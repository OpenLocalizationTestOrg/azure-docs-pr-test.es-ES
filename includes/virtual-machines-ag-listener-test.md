<span data-ttu-id="8f7c3-101">En este paso, se probará el agente de escucha del grupo de disponibilidad mediante una aplicación de cliente que se ejecuta en la misma red.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-101">In this step, you test the availability group listener by using a client application that's running on the same network.</span></span>

<span data-ttu-id="8f7c3-102">La conectividad del cliente tiene los requisitos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8f7c3-102">Client connectivity has the following requirements:</span></span>

* <span data-ttu-id="8f7c3-103">Las conexiones de cliente para el agente de escucha tienen que proceder de máquinas que residan en un servicio en la nube diferente al que hospeda las réplicas de disponibilidad Always On.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-103">Client connections to the listener must come from machines that reside in a different cloud service than the one that hosts the Always On availability replicas.</span></span>
* <span data-ttu-id="8f7c3-104">Si las réplicas AlwaysOn están en subredes diferentes, los clientes tendrán que especificar *MultisubnetFailover=True* en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-104">If the Always On replicas are in different subnets, clients must specify *MultisubnetFailover=True* in the connection string.</span></span> <span data-ttu-id="8f7c3-105">Esta condición se produce en los intentos de conexión en paralelo con las réplicas de las diversas subredes.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-105">This condition results in parallel connection attempts to replicas in the various subnets.</span></span> <span data-ttu-id="8f7c3-106">Este escenario incluye una implementación de grupo de disponibilidad Always On entre regiones.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-106">This scenario includes a cross-region Always On availability group deployment.</span></span>

<span data-ttu-id="8f7c3-107">Un ejemplo sería conectarse al agente de escucha desde una de las máquinas virtuales de la misma red virtual de Azure (pero no desde una que hospede una réplica).</span><span class="sxs-lookup"><span data-stu-id="8f7c3-107">One example is to connect to the listener from one of the VMs in the same Azure virtual network (but not one that hosts a replica).</span></span> <span data-ttu-id="8f7c3-108">Una manera fácil de completar esta prueba consiste en intentar conectar SQL Server Management Studio al agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-108">An easy way to complete this test is to try to connect SQL Server Management Studio to the availability group listener.</span></span> <span data-ttu-id="8f7c3-109">Otro método sencillo es ejecutar [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx) de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8f7c3-109">Another simple method is to run [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx), as follows:</span></span>

    sqlcmd -S "<ListenerName>,<EndpointPort>" -d "<DatabaseName>" -Q "select @@servername, db_name()" -l 15

> [!NOTE]
> <span data-ttu-id="8f7c3-110">Si el valor de EndpointPort es *1433*, no es necesario especificarlo en la llamada.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-110">If the EndpointPort value is *1433*, you are not required to specify it in the call.</span></span> <span data-ttu-id="8f7c3-111">La llamada anterior también asume que el equipo cliente está unido al mismo dominio y que el llamador tiene concedidos los permisos en la base de datos mediante la autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-111">The previous call also assumes that the client machine is joined to the same domain and that the caller has been granted permissions on the database by using Windows authentication.</span></span>
> 
> 

<span data-ttu-id="8f7c3-112">Al probar el agente de escucha, asegúrese de conmutar por error el grupo de disponibilidad para asegurarte de que los clientes puedan conectarse al agente de escucha a través de las conmutaciones por error.</span><span class="sxs-lookup"><span data-stu-id="8f7c3-112">When you test the listener, be sure to fail over the availability group to make sure that clients can connect to the listener across failovers.</span></span>


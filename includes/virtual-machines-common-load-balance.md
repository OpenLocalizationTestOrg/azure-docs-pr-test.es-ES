

<span data-ttu-id="449a2-101">Hay dos niveles de equilibrio de carga disponibles para Servicios de infraestructura de Azure:</span><span class="sxs-lookup"><span data-stu-id="449a2-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="449a2-102">**Nivel de DNS**: equilibrio de carga del tráfico para los diferentes servicios en la nube ubicados en distintos centros de datos, para diferentes sitios web de Azure ubicados en distintos centros de datos o para puntos de conexión externos.</span><span class="sxs-lookup"><span data-stu-id="449a2-102">**DNS Level**:  Load balancing for traffic to different cloud services located in different data centers, to different Azure websites located in different data centers, or to external endpoints.</span></span> <span data-ttu-id="449a2-103">Esto se realiza mediante el Administrador de tráfico de Azure y el método de equilibrio de carga Round Robin.</span><span class="sxs-lookup"><span data-stu-id="449a2-103">This is done with Azure Traffic Manager and the Round Robin load balancing method.</span></span>
* <span data-ttu-id="449a2-104">**Nivel de red**: equilibrio de carga del tráfico de Internet entrante para diferentes máquinas virtuales de un servicio en la nube o equilibrio de carga entre las máquinas virtuales de un servicio en la nube o una red virtual.</span><span class="sxs-lookup"><span data-stu-id="449a2-104">**Network Level**:  Load balancing of incoming Internet traffic to different virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="449a2-105">Esto se realiza mediante el equilibrador de carga de Azure.</span><span class="sxs-lookup"><span data-stu-id="449a2-105">This is done with the Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="449a2-106">Equilibrio de carga del Administrador de tráfico para servicios en la nube y sitios web</span><span class="sxs-lookup"><span data-stu-id="449a2-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="449a2-107">El Administrador de tráfico permite controlar la distribución del tráfico de usuarios en los extremos especificados, que pueden incluir servicios en la nube, sitios web, sitios externos y otros perfiles del Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="449a2-107">Traffic Manager allows you to control the distribution of user traffic to endpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="449a2-108">El Administrador de tráfico aplica un motor de directivas inteligente a las consultas del Sistema de nombres de dominio (DNS) para los nombres de dominio de los recursos de Internet.</span><span class="sxs-lookup"><span data-stu-id="449a2-108">Traffic Manager works by applying an intelligent policy engine to Domain Name System (DNS) queries for the domain names of your Internet resources.</span></span> <span data-ttu-id="449a2-109">Los servicios en la nube o los sitios web pueden ejecutarse en centros de datos diferentes de todo el mundo.</span><span class="sxs-lookup"><span data-stu-id="449a2-109">Your cloud services or websites can be running in different datacenters across the world.</span></span>

<span data-ttu-id="449a2-110">Debe usar REST o Windows PowerShell para configurar los extremos externos o los perfiles de Administrador de tráfico como extremos.</span><span class="sxs-lookup"><span data-stu-id="449a2-110">You must use either REST or Windows PowerShell to configure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="449a2-111">El Administrador de tráfico usa tres métodos de equilibrio de carga para distribuir el tráfico:</span><span class="sxs-lookup"><span data-stu-id="449a2-111">Traffic Manager uses three load-balancing methods to distribute traffic:</span></span>

* <span data-ttu-id="449a2-112">**Conmutación por error**: use este método cuando desee usar un punto de conexión principal para todo el tráfico, pero proporcione copias de seguridad en caso de que el punto de conexión deje de estar disponible.</span><span class="sxs-lookup"><span data-stu-id="449a2-112">**Failover**:  Use this method when you want to use a primary endpoint for all traffic, but provide backups in case the primary becomes unavailable.</span></span>
* <span data-ttu-id="449a2-113">**Rendimiento**: use este método cuando tenga puntos de conexión en diferentes ubicaciones geográficas y desee solicitar a los clientes que usen el punto de conexión "más cercano" en términos de menor latencia.</span><span class="sxs-lookup"><span data-stu-id="449a2-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients to use the "closest" endpoint in terms of the lowest latency.</span></span>
* <span data-ttu-id="449a2-114">**Round Robin:** use este método cuando desee distribuir la carga entre un conjunto de servicios en la nube del mismo centro de datos o entre servicios en la nube o sitios web de diferentes centros de datos.</span><span class="sxs-lookup"><span data-stu-id="449a2-114">**Round Robin:**  Use this method when you want to distribute load across a set of cloud services in the same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="449a2-115">Para más información, consulte [Métodos de enrutamiento de tráfico de Traffic Manager](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="449a2-116">En el diagrama siguiente se muestra un ejemplo del método de equilibrio de carga Round Robin para la distribución del tráfico entre diferentes servicios en la nube.</span><span class="sxs-lookup"><span data-stu-id="449a2-116">The following diagram shows an example of the Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![equilibrio de carga](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="449a2-118">El proceso básico es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="449a2-118">The basic process is the following:</span></span>

1. <span data-ttu-id="449a2-119">Un cliente de Internet requiere un nombre de dominio que corresponda a un servicio web.</span><span class="sxs-lookup"><span data-stu-id="449a2-119">An Internet client queries a domain name corresponding to a web service.</span></span>
2. <span data-ttu-id="449a2-120">DNS reenvía la solicitud de consulta de nombre al Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="449a2-120">DNS forwards the name query request to Traffic Manager.</span></span>
3. <span data-ttu-id="449a2-121">El Administrador de tráfico elige el siguiente servicio en la nube de la lista Round Robin y devuelve el nombre de DNS.</span><span class="sxs-lookup"><span data-stu-id="449a2-121">Traffic Manager chooses the next cloud service in the Round Robin list and sends back the DNS name.</span></span> <span data-ttu-id="449a2-122">El servidor DNS del cliente de Internet resuelve el nombre en una dirección IP y lo envía al cliente de Internet.</span><span class="sxs-lookup"><span data-stu-id="449a2-122">The Internet client's DNS server resolves the name to an IP address and sends it to the Internet client.</span></span>
4. <span data-ttu-id="449a2-123">El cliente de Internet se conecta con el servicio en la nube que ha elegido el Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="449a2-123">The Internet client connects with the cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="449a2-124">Para obtener más información, consulte [Administrador de tráfico](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="449a2-125">Equilibrio de carga de Azure para máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="449a2-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="449a2-126">Las máquinas virtuales que están en el mismo servicio en la nube o en la misma red virtual pueden comunicarse directamente entre sí mediante sus direcciones IP privadas.</span><span class="sxs-lookup"><span data-stu-id="449a2-126">Virtual machines in the same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="449a2-127">Los equipos y servicios fuera del servicio en la nube o la red virtual solo pueden comunicarse con las máquinas virtuales de un servicio en la nube o red virtual con un extremo configurado.</span><span class="sxs-lookup"><span data-stu-id="449a2-127">Computers and services outside the cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="449a2-128">Un extremo es una asignación de una dirección IP pública y un puerto a esa dirección IP privada y un puerto de una máquina virtual o rol web en un servicio en la nube de Azure.</span><span class="sxs-lookup"><span data-stu-id="449a2-128">An endpoint is a mapping of a public IP address and port to that private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="449a2-129">El Equilibrador de carga de Azure distribuye de forma aleatoria un tipo específico de tráfico entrante entre varias máquinas virtuales o servicios en una configuración conocida como conjunto de carga equilibrada.</span><span class="sxs-lookup"><span data-stu-id="449a2-129">The Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="449a2-130">Por ejemplo, puede extender la carga del tráfico de solicitudes web entre varios servidores web o roles web.</span><span class="sxs-lookup"><span data-stu-id="449a2-130">For example, you can spread the load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="449a2-131">En el diagrama siguiente se muestra un extremo con equilibrio de carga para el tráfico web (sin cifrar) estándar que se comparte entre tres máquinas virtuales para el puerto TCP público y privado de 80.</span><span class="sxs-lookup"><span data-stu-id="449a2-131">The following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for the public and private TCP port of 80.</span></span> <span data-ttu-id="449a2-132">Estas tres máquinas virtuales se encuentran en un conjunto con equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="449a2-132">These three virtual machines are in a load-balanced set.</span></span>

![equilibrio de carga](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="449a2-134">Para obtener más información, consulte [Equilibrador de carga de Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="449a2-135">Para conocer los pasos para crear un conjunto con equilibrio de carga, consulte [Creación de un equilibrador de carga orientado a Internet en Resource Manager mediante PowerShell](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-135">For the steps to create a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="449a2-136">Azure también puede equilibrar la carga en un servicio en la nube o una red virtual.</span><span class="sxs-lookup"><span data-stu-id="449a2-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="449a2-137">Esto se conoce como equilibrio de carga interno y se puede usar de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="449a2-137">This is known as internal load balancing and can be used in the following ways:</span></span>

* <span data-ttu-id="449a2-138">Para equilibrar la carga entre servidores de distintos niveles de una aplicación multinivel (por ejemplo, entre los niveles web y de base de datos).</span><span class="sxs-lookup"><span data-stu-id="449a2-138">To load balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="449a2-139">Para equilibrar la carga para las aplicaciones de línea de negocio (LOB) hospedadas en Azure sin requerir hardware ni software adicional de equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="449a2-139">To load balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="449a2-140">Para incluir servidores locales en el conjunto de equipos de cuyo tráfico se va a equilibrar la carga.</span><span class="sxs-lookup"><span data-stu-id="449a2-140">To include on-premises servers in the set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="449a2-141">Simular al equilibrio de carga de Azure, el equilibrio de carga interno se facilita mediante la configuración de un conjunto interno de carga equilibrada.</span><span class="sxs-lookup"><span data-stu-id="449a2-141">Similar to Azure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="449a2-142">En el diagrama siguiente se muestra un ejemplo de un extremo con carga equilibrada de una aplicación de línea de negocios (LOB) que se comparte entre tres máquinas virtuales en una red virtual entre entornos.</span><span class="sxs-lookup"><span data-stu-id="449a2-142">The following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![equilibrio de carga](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="449a2-144">Consideraciones sobre el equilibrador de carga</span><span class="sxs-lookup"><span data-stu-id="449a2-144">Load balancer considerations</span></span>
<span data-ttu-id="449a2-145">De manera predeterminada, un equilibrador de carga está configurado para tener un tiempo de espera de 4 minutos en una sesión inactiva.</span><span class="sxs-lookup"><span data-stu-id="449a2-145">A load balancer is configured by default to timeout an idle session in 4 minutes.</span></span> <span data-ttu-id="449a2-146">Si la aplicación detrás de un equilibrador de carga deja inactiva una conexión durante más de 4 minutos y no tiene una configuración de conexión persistente, se terminará la conexión.</span><span class="sxs-lookup"><span data-stu-id="449a2-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, the connection will be dropped.</span></span> <span data-ttu-id="449a2-147">Puede cambiar el comportamiento del equilibrador de carga para permitir un [tiempo de espera más prolongado para el equilibrador de carga de Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-147">You can change the load balancer behavior to allow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="449a2-148">Otra consideración es el tipo del modo de distribución que admite el equilibrador de carga de Azure.</span><span class="sxs-lookup"><span data-stu-id="449a2-148">Other consideration is the type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="449a2-149">Puede configurar la afinidad de dirección IP de origen (dirección de IP de origen, dirección IP de destino) o el protocolo IP de origen (dirección IP de origen, protocolo y dirección IP de destino).</span><span class="sxs-lookup"><span data-stu-id="449a2-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="449a2-150">Revise el [modo de distribución del equilibrador de carga de Azure (afinidad de dirección IP de origen)](../articles/load-balancer/load-balancer-distribution-mode.md) para más información.</span><span class="sxs-lookup"><span data-stu-id="449a2-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="449a2-151">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="449a2-151">Next steps</span></span>
<span data-ttu-id="449a2-152">Para conocer los pasos para crear un conjunto de carga equilibrada, consulte [Creación del equilibrador de carga interno con PowerShell](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-152">For the steps to create a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="449a2-153">Para obtener más información, consulte [Equilibrio de carga interno](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="449a2-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>




<span data-ttu-id="24f9d-101">Las extensiones de VM pueden ayudarle a:</span><span class="sxs-lookup"><span data-stu-id="24f9d-101">VM extensions can help you:</span></span>

* <span data-ttu-id="24f9d-102">Modificar las características de seguridad e identidad, como el restablecimiento de valores de cuenta y el uso de antimalware</span><span class="sxs-lookup"><span data-stu-id="24f9d-102">Modify security and identity features, such as resetting account values and using antimalware</span></span>
* <span data-ttu-id="24f9d-103">Iniciar, detener o configurar la supervisión y el diagnóstico</span><span class="sxs-lookup"><span data-stu-id="24f9d-103">Start, stop, or configure monitoring and diagnostics</span></span>
* <span data-ttu-id="24f9d-104">Restablecer o instalar características de conectividad, como RDP y SSH</span><span class="sxs-lookup"><span data-stu-id="24f9d-104">Reset or install connectivity features, such as RDP and SSH</span></span>
* <span data-ttu-id="24f9d-105">Diagnosticar, supervisar y administrar las máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="24f9d-105">Diagnose, monitor, and manage your VMs</span></span>

<span data-ttu-id="24f9d-106">Hay muchas otras características.</span><span class="sxs-lookup"><span data-stu-id="24f9d-106">There are many other features as well.</span></span> <span data-ttu-id="24f9d-107">Periódicamente se lanzan nuevas características de extensión de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="24f9d-107">New VM Extension features are released regularly.</span></span> <span data-ttu-id="24f9d-108">En este artículo, se describen los Agentes de VM de Azure para Windows y Linux y cómo admiten la funcionalidad de Extensión de VM.</span><span class="sxs-lookup"><span data-stu-id="24f9d-108">This article describes the Azure VM Agents for Windows and Linux, and how they support VM Extension functionality.</span></span> <span data-ttu-id="24f9d-109">Si desea obtener un listado de las extensiones de máquina virtual por categoría de característica, consulte [Características y extensiones de VM de Azure](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="24f9d-109">For a listing of VM Extensions by feature category, see [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="azure-vm-agents-for-windows-and-linux"></a><span data-ttu-id="24f9d-110">Agentes de VM de Azure para Windows y Linux</span><span class="sxs-lookup"><span data-stu-id="24f9d-110">Azure VM Agents for Windows and Linux</span></span>
<span data-ttu-id="24f9d-111">El agente de Azure Virtual Machines (agente de VM) es un proceso ligero y protegido que instala, configura y elimina extensiones de máquina virtual en instancias de Azure Virtual Machines.</span><span class="sxs-lookup"><span data-stu-id="24f9d-111">The Azure Virtual Machines Agent (VM Agent) is a secured, light-weight process that installs, configures, and removes VM extensions on instances of Azure Virtual Machines.</span></span> <span data-ttu-id="24f9d-112">El Agente de VM actúa como el servicio de control local seguro para la VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="24f9d-112">The VM Agent acts as the secure local control service for your Azure VM.</span></span> <span data-ttu-id="24f9d-113">Las extensiones que carga el agente proporcionan características específicas para aumentar la productividad mediante el uso de la instancia.</span><span class="sxs-lookup"><span data-stu-id="24f9d-113">The extensions that the agent loads provide specific features to increase your productivity using the instance.</span></span>

<span data-ttu-id="24f9d-114">Existen dos agentes de Azure Virtual Machines, uno para máquinas virtuales Windows y otro para máquinas virtuales Linux.</span><span class="sxs-lookup"><span data-stu-id="24f9d-114">Two Azure VM Agents exist, one for Windows VMs and one for Linux VMs.</span></span>

<span data-ttu-id="24f9d-115">Si desea que una instancia de máquina virtual use una o varias extensiones de máquina virtual, es preciso que tenga un agente de máquina virtual instalado.</span><span class="sxs-lookup"><span data-stu-id="24f9d-115">If you want a virtual machine instance to use one or more VM extensions, the instance must have an installed VM Agent.</span></span> <span data-ttu-id="24f9d-116">La imagen de una máquina virtual que se crea mediante Azure Portal y una imagen de **Marketplace** instala automáticamente un agente de máquina virtual en el proceso de creación.</span><span class="sxs-lookup"><span data-stu-id="24f9d-116">A virtual machine image created by using the Azure portal and an image from the **Marketplace** automatically installs a VM Agent in the creation process.</span></span> <span data-ttu-id="24f9d-117">Si una instancia de la máquina virtual no tiene un agente de máquina virtual, se puede instalar después de crear la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="24f9d-117">If a virtual machine instance lacks a VM Agent, you can install the VM Agent after the virtual machine instance is created.</span></span> <span data-ttu-id="24f9d-118">O bien, el agente puede instalar en una imagen de máquina virtual personalizada que posteriormente se carga.</span><span class="sxs-lookup"><span data-stu-id="24f9d-118">Or, you can install the agent in a custom VM image that you then upload.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="24f9d-119">Estos agentes de máquina virtual son servicios muy ligeros que permiten la administración protegida de las instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="24f9d-119">These VM Agents are very light-weight, services that enable secured administration of virtual machine instances.</span></span> <span data-ttu-id="24f9d-120">Es posible que existan casos en los que no desee tener el Agente de VM.</span><span class="sxs-lookup"><span data-stu-id="24f9d-120">There might be cases in which you do not want the VM Agent.</span></span> <span data-ttu-id="24f9d-121">Si es así, asegúrese de crear máquinas virtuales que no tengan instalado el agente de máquina virtual mediante la CLI de Azure o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="24f9d-121">If so, be sure to create VMs that do not have the VM Agent installed using the Azure CLI or PowerShell.</span></span> <span data-ttu-id="24f9d-122">A pesar de que el Agente de VM se puede quitar físicamente, el comportamiento de cualquier extensión de VM en la instancia es indefinido.</span><span class="sxs-lookup"><span data-stu-id="24f9d-122">Although the VM Agent can be removed physically, the behavior of VM Extensions on the instance is undefined.</span></span> <span data-ttu-id="24f9d-123">Como consecuencia, no se admite la eliminación de agentes de máquina virtual instalados.</span><span class="sxs-lookup"><span data-stu-id="24f9d-123">As a result, removing an installed VM Agent is not supported.</span></span>
>

<span data-ttu-id="24f9d-124">El Agente de VM se habilita en las siguientes situaciones:</span><span class="sxs-lookup"><span data-stu-id="24f9d-124">The VM Agent is enabled in the following situations:</span></span>

* <span data-ttu-id="24f9d-125">Cuando se crea una instancia de una máquina virtual mediante Azure Portal y seleccionando una imagen de **Marketplace**,</span><span class="sxs-lookup"><span data-stu-id="24f9d-125">When you create an instance of a VM by using the Azure portal and selecting an image from the **Marketplace**,</span></span>
* <span data-ttu-id="24f9d-126">Cuando crea una instancia de una máquina virtual mediante los cmdlets [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) o [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f9d-126">When you create an instance of a VM by using the [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) or the [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) cmdlet.</span></span> <span data-ttu-id="24f9d-127">Para crear una máquina virtual sin ningún agente de máquina virtual, agregue el parámetro **–DisableGuestAgent** al cmdlet [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f9d-127">You can create a VM without a VM Agent by adding the **–DisableGuestAgent** parameter to the [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) cmdlet,</span></span>

* <span data-ttu-id="24f9d-128">Cuando el agente de máquina virtual se descarga e instala de forma manual en una instancia existente de la máquina virtual y se establece el valor **ProvisionGuestAgent** en **true**.</span><span class="sxs-lookup"><span data-stu-id="24f9d-128">When you manually download and install the VM Agent on an existing VM instance, and set the **ProvisionGuestAgent** value to **true**.</span></span> <span data-ttu-id="24f9d-129">Esta técnica se puede usar para agentes Windows y Linux, mediante el uso de un comando de PowerShell o una llamada de REST.</span><span class="sxs-lookup"><span data-stu-id="24f9d-129">You can use this technique for Windows and Linux agents, by using a PowerShell command or a REST call.</span></span> <span data-ttu-id="24f9d-130">(Si no establece el valor de **ProvisionGuestAgent** después de instalar manualmente el agente de máquina virtual, la incorporación de este no se detectará correctamente). El código de ejemplo siguiente muestra cómo hacerlo mediante PowerShell, donde los argumentos `$svc` y `$name` ya se han determinado:</span><span class="sxs-lookup"><span data-stu-id="24f9d-130">(If you do not set the **ProvisionGuestAgent** value after manually installing the VM Agent, the addition of the VM Agent is not detected properly.) The following code example shows how to do this using PowerShell where the `$svc` and `$name` arguments have already been determined:</span></span>

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* <span data-ttu-id="24f9d-131">Cuando se crea una imagen de máquina virtual que incluye a un agente de máquina virtual instalado.</span><span class="sxs-lookup"><span data-stu-id="24f9d-131">When you create a VM image that includes an installed VM Agent.</span></span> <span data-ttu-id="24f9d-132">Una vez que la imagen con el agente de máquina virtual existe, dicha imagen se puede cargar en Azure.</span><span class="sxs-lookup"><span data-stu-id="24f9d-132">Once the image with the VM Agent exists, you can upload that image to Azure.</span></span> <span data-ttu-id="24f9d-133">En el caso de una VM de Windows, descargue el [archivo .msi del agente de máquina virtual de Windows](http://go.microsoft.com/fwlink/?LinkID=394789) e instale dicho agente.</span><span class="sxs-lookup"><span data-stu-id="24f9d-133">For a Windows VM, download the [Windows VM Agent .msi file](http://go.microsoft.com/fwlink/?LinkID=394789) and install the VM Agent.</span></span> <span data-ttu-id="24f9d-134">En el caso de una máquina virtual Linux, instálelo desde el repositorio de GitHub, que se encuentra en <https://github.com/Azure/WALinuxAgent>.</span><span class="sxs-lookup"><span data-stu-id="24f9d-134">For a Linux VM, install the VM Agent from the GitHub repository located at <https://github.com/Azure/WALinuxAgent>.</span></span> <span data-ttu-id="24f9d-135">Para más información sobre cómo instalar el agente de máquina virtual en Linux, consulte la [Guía de usuario de agente de máquina virtual Linux de Azure](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="24f9d-135">For more information on how to install the VM Agent on Linux, see the [Azure Linux VM Agent User Guide](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="24f9d-136">En PaaS, el agente de máquina virtual se denomina **WindowsAzureGuestAgent** y siempre está disponible en las máquinas virtuales de rol web y rol de trabajo.</span><span class="sxs-lookup"><span data-stu-id="24f9d-136">In PaaS, the VM Agent is called **WindowsAzureGuestAgent**, and is always available on Web and Worker Role VMs.</span></span> <span data-ttu-id="24f9d-137">[para más información, consulte [Windows Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) (Arquitectura de roles de Azure)]. El agente de máquina virtual para máquinas virtuales de rol ahora puede agregar extensiones a las máquinas virtuales de servicio en la nube, de la misma forma en que lo hace para las máquinas virtuales persistentes.</span><span class="sxs-lookup"><span data-stu-id="24f9d-137">(For more information, see [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) The VM Agent for Role VMs can now add extensions to the cloud service VMs in the same way that it does for persistent Virtual Machines.</span></span> <span data-ttu-id="24f9d-138">La principal diferencia entre las extensiones de máquina virtual en las máquinas virtuales de rol y en las máquinas virtuales persistentes es cuando se agregan las extensiones de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="24f9d-138">The biggest difference between VM Extensions on role VMs and persistent VMs is when the VM extensions are added.</span></span> <span data-ttu-id="24f9d-139">Con las máquinas virtuales de rol, las extensiones se agregan primero al servicio en la nube y, después, a las implementaciones de dicho servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="24f9d-139">With role VMs, extensions are added first to the cloud service, then to the deployments within that cloud service.</span></span>
>
> <span data-ttu-id="24f9d-140">Utilice el cmdlet [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) para mostrar todas las extensiones de VM de rol disponibles.</span><span class="sxs-lookup"><span data-stu-id="24f9d-140">Use the [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) cmdlet to list all available role VM extensions.</span></span>
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a><span data-ttu-id="24f9d-141">Buscar, agregar, actualizar y quitar extensiones de VM</span><span class="sxs-lookup"><span data-stu-id="24f9d-141">Find, Add, Update, and Remove VM Extensions</span></span>
<span data-ttu-id="24f9d-142">Para obtener información sobre estas tareas, consulte [Adición, búsqueda, actualización y eliminación de extensiones de máquina virtual de Azure](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="24f9d-142">For details on these tasks, see [Add, Find, Update, and Remove Azure VM Extensions](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

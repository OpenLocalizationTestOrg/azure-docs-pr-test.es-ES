> [!div class="op_single_selector"]
> * [<span data-ttu-id="f891b-101">Linux</span><span class="sxs-lookup"><span data-stu-id="f891b-101">Linux</span></span>](../articles/iot-hub/iot-hub-linux-iot-edge-simulated-device.md)
> * [<span data-ttu-id="f891b-102">Windows</span><span class="sxs-lookup"><span data-stu-id="f891b-102">Windows</span></span>](../articles/iot-hub/iot-hub-windows-iot-edge-simulated-device.md)

<span data-ttu-id="f891b-103">En este tutorial de hello [ejemplo en la nube de dispositivo simulado cargar] muestra cómo toouse [Azure IoT borde] [ lnk-sdk] toosend tooIoT de telemetría de dispositivo para la nube concentrador de simulada dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f891b-103">This walkthrough of hello [Simulated Device Cloud Upload sample] shows you how toouse [Azure IoT Edge][lnk-sdk] toosend device-to-cloud telemetry tooIoT Hub from simulated devices.</span></span>

<span data-ttu-id="f891b-104">En este tutorial, se describen los siguientes procedimientos:</span><span class="sxs-lookup"><span data-stu-id="f891b-104">This walkthrough covers:</span></span>

* <span data-ttu-id="f891b-105">**Arquitectura**: obtener información arquitectónica sobre hello [ejemplo en la nube de dispositivo simulado cargar].</span><span class="sxs-lookup"><span data-stu-id="f891b-105">**Architecture**: architectural information about hello [Simulated Device Cloud Upload sample].</span></span>
* <span data-ttu-id="f891b-106">**Compile y ejecute**: Hola pasos necesarios toobuild y ejemplo de Hola de ejecución.</span><span class="sxs-lookup"><span data-stu-id="f891b-106">**Build and run**: hello steps required toobuild and run hello sample.</span></span>

## <a name="architecture"></a><span data-ttu-id="f891b-107">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="f891b-107">Architecture</span></span>

<span data-ttu-id="f891b-108">Hola [ejemplo en la nube de dispositivo simulado cargar] muestra cómo toocreate una puerta de enlace que envía la telemetría de simula centro de IoT tooan de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f891b-108">hello [Simulated Device Cloud Upload sample] shows how toocreate a gateway that sends telemetry from simulated devices tooan IoT hub.</span></span> <span data-ttu-id="f891b-109">Un dispositivo no sea capaz de tooconnect directamente tooIoT concentrador porque el dispositivo de hello:</span><span class="sxs-lookup"><span data-stu-id="f891b-109">A device may not be able tooconnect directly tooIoT Hub because hello device:</span></span>

* <span data-ttu-id="f891b-110">No usa un protocolo de comunicaciones que entienda IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f891b-110">Does not use a communications protocol understood by IoT Hub.</span></span>
* <span data-ttu-id="f891b-111">No es lo suficientemente inteligente como tooremember Hola identidad asignan tooit IoT hub.</span><span class="sxs-lookup"><span data-stu-id="f891b-111">Is not smart enough tooremember hello identity assigned tooit by IoT Hub.</span></span>

<span data-ttu-id="f891b-112">Una puerta de enlace de IoT borde puede resolver estos problemas en hello siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="f891b-112">An IoT Edge gateway can solve these problems in hello following ways:</span></span>

* <span data-ttu-id="f891b-113">puerta de enlace de Hello entiende protocolo Hola Hola dispositivo usado, recibe la telemetría de dispositivo para la nube de dispositivo de Hola y reenvía esos tooIoT mensajes concentrador mediante un protocolo entendido por centro de IoT Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-113">hello gateway understands hello protocol used by hello device, receives device-to-cloud telemetry from hello device, and forwards those messages tooIoT Hub using a protocol understood by hello IoT hub.</span></span>

* <span data-ttu-id="f891b-114">puerta de enlace de Hello asigna toodevices de identidades de centro de IoT y actúa como un servidor proxy cuando un dispositivo envía mensajes tooIoT concentrador.</span><span class="sxs-lookup"><span data-stu-id="f891b-114">hello gateway maps IoT Hub identities toodevices and acts as a proxy when a device sends messages tooIoT Hub.</span></span>

<span data-ttu-id="f891b-115">Hola siguiente diagrama muestra Hola componentes principales de ejemplo de Hola, incluidos Hola módulos IoT borde:</span><span class="sxs-lookup"><span data-stu-id="f891b-115">hello following diagram shows hello main components of hello sample, including hello IoT Edge modules:</span></span>

![][1]

<span data-ttu-id="f891b-116">módulos de Hello no pasar los mensajes directamente tooeach otro.</span><span class="sxs-lookup"><span data-stu-id="f891b-116">hello modules do not pass messages directly tooeach other.</span></span> <span data-ttu-id="f891b-117">módulos de Hello publican a broker interna de mensajes tooan que ofrece toohello de mensajes de Hola otros módulos mediante un mecanismo de suscripción.</span><span class="sxs-lookup"><span data-stu-id="f891b-117">hello modules publish messages tooan internal broker that delivers hello messages toohello other modules using a subscription mechanism.</span></span> <span data-ttu-id="f891b-118">Para más información, consulte [Introducción a Azure IoT Edge][lnk-gw-getstarted].</span><span class="sxs-lookup"><span data-stu-id="f891b-118">For more information, see [Get started with Azure IoT Edge][lnk-gw-getstarted].</span></span>

### <a name="protocol-ingestion-module"></a><span data-ttu-id="f891b-119">Módulo de ingesta de protocolos</span><span class="sxs-lookup"><span data-stu-id="f891b-119">Protocol ingestion module</span></span>

<span data-ttu-id="f891b-120">Este módulo es hello punto de partida para recibir datos de los dispositivos, a través de puerta de enlace de Hola y en la nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-120">This module is hello starting point for receiving data from devices, through hello gateway, and into hello cloud.</span></span> <span data-ttu-id="f891b-121">En el ejemplo de Hola Hola módulo:</span><span class="sxs-lookup"><span data-stu-id="f891b-121">In hello sample, hello module:</span></span>

1. <span data-ttu-id="f891b-122">Crea datos de temperatura simulados.</span><span class="sxs-lookup"><span data-stu-id="f891b-122">Creates simulated temperature data.</span></span> <span data-ttu-id="f891b-123">Si usa dispositivos físicos, módulo de hello lee datos de los dispositivos físicos.</span><span class="sxs-lookup"><span data-stu-id="f891b-123">If you use physical devices, hello module reads data from those physical devices.</span></span>
1. <span data-ttu-id="f891b-124">Crea un mensaje.</span><span class="sxs-lookup"><span data-stu-id="f891b-124">Creates a message.</span></span>
1. <span data-ttu-id="f891b-125">Coloca los datos de temperatura de hello simulado en el contenido del mensaje de Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-125">Places hello simulated temperature data into hello message content.</span></span>
1. <span data-ttu-id="f891b-126">Agrega una propiedad con un mensaje de toohello de dirección MAC falsa.</span><span class="sxs-lookup"><span data-stu-id="f891b-126">Adds a property with a fake MAC address toohello message.</span></span>
1. <span data-ttu-id="f891b-127">Hace que toohello disponible siguiente módulo de mensaje de Hola en cadena Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-127">Makes hello message available toohello next module in hello chain.</span></span>

<span data-ttu-id="f891b-128">módulo de Hello denominado **ingesta de protocolo X** en Hola se denomina diagrama anterior **dispositivo simulado** en el código fuente de Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-128">hello module called **Protocol X ingestion** in hello previous diagram is called **Simulated device** in hello source code.</span></span>

### <a name="mac-lt-gt-iot-hub-id-module"></a><span data-ttu-id="f891b-129">Módulo de identificación MAC &lt;-&gt; IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f891b-129">MAC &lt;-&gt; IoT Hub ID module</span></span>

<span data-ttu-id="f891b-130">Este módulo busca los mensajes que tienen una propiedad de dirección de Mac.</span><span class="sxs-lookup"><span data-stu-id="f891b-130">This module scans for messages that have a Mac address property.</span></span> <span data-ttu-id="f891b-131">En el ejemplo de Hola, módulo de ingesta de hello protocol agrega propiedad de dirección MAC de Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-131">In hello sample, hello protocol ingestion module adds hello MAC address property.</span></span> <span data-ttu-id="f891b-132">Si el módulo de hello encuentra este tipo de propiedad, agrega otra propiedad con un mensaje de toohello clave de dispositivo de centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="f891b-132">If hello module finds such a property, it adds another property with an IoT Hub device key toohello message.</span></span> <span data-ttu-id="f891b-133">módulo de Hello, a continuación, crea toohello disponible siguiente módulo de mensaje de Hola en cadena Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-133">hello module then makes hello message available toohello next module in hello chain.</span></span>

<span data-ttu-id="f891b-134">desarrollador de Hello configura una asignación entre las direcciones MAC y dispositivos de centro de IoT identidades tooassociate Hola simulada con identidades de dispositivos del centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="f891b-134">hello developer sets up a mapping between MAC addresses and IoT Hub identities tooassociate hello simulated devices with IoT Hub device identities.</span></span> <span data-ttu-id="f891b-135">Programador de Hello agrega asignación Hola manualmente como parte de la configuración del módulo Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-135">hello developer adds hello mapping manually as part of hello module configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="f891b-136">En este ejemplo se usa una dirección MAC como identificador único del dispositivo y se correlaciona con una identidad de dispositivo del Centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="f891b-136">This sample uses a MAC address as a unique device identifier and correlates it with an IoT Hub device identity.</span></span> <span data-ttu-id="f891b-137">Sin embargo, puede escribir su propio módulo para que utilice un identificador único diferente.</span><span class="sxs-lookup"><span data-stu-id="f891b-137">However, you can write your own module that uses a different unique identifier.</span></span> <span data-ttu-id="f891b-138">Por ejemplo, los dispositivos pueden tener números de serie exclusivos o datos de telemetría de saludo pueden incluir un nombre de dispositivo incrustado único.</span><span class="sxs-lookup"><span data-stu-id="f891b-138">For example, your devices may have unique serial numbers or hello telemetry data may include a unique embedded device name.</span></span>

### <a name="iot-hub-communication-module"></a><span data-ttu-id="f891b-139">Módulo de comunicación del Centro de IoT</span><span class="sxs-lookup"><span data-stu-id="f891b-139">IoT Hub communication module</span></span>

<span data-ttu-id="f891b-140">Este módulo toma los mensajes con un centro de IoT propiedad de clave de dispositivo que haya sido asignado por el módulo anterior Hola.</span><span class="sxs-lookup"><span data-stu-id="f891b-140">This module takes messages with an IoT Hub device key property that was assigned by hello previous module.</span></span> <span data-ttu-id="f891b-141">módulo de Hello envía mensajes de bienvenida del contenido tooIoT concentrador mediante Hola protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="f891b-141">hello module sends hello message content tooIoT Hub using hello HTTP protocol.</span></span> <span data-ttu-id="f891b-142">HTTP es uno de hello tres protocolos entienden por centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="f891b-142">HTTP is one of hello three protocols understood by IoT Hub.</span></span>

<span data-ttu-id="f891b-143">En lugar de abrir una conexión para cada dispositivo simulado, este módulo abre una única conexión HTTP Hola puerta de enlace toohello centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="f891b-143">Instead of opening a connection for each simulated device, this module opens a single HTTP connection from hello gateway toohello IoT hub.</span></span> <span data-ttu-id="f891b-144">módulo hello multiplexes, a continuación, las conexiones desde todos los dispositivos de hello simulada través de esa conexión.</span><span class="sxs-lookup"><span data-stu-id="f891b-144">hello module then multiplexes connections from all hello simulated devices over that connection.</span></span> <span data-ttu-id="f891b-145">Este enfoque permite a una sola puerta de enlace tooconnect muchos más dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f891b-145">This approach enables a single gateway tooconnect many more devices.</span></span>

## <a name="before-you-get-started"></a><span data-ttu-id="f891b-146">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="f891b-146">Before you get started</span></span>

<span data-ttu-id="f891b-147">Antes de comenzar, realice los siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="f891b-147">Before you get started, you must:</span></span>

* <span data-ttu-id="f891b-148">[Crear un centro de IoT] [ lnk-create-hub] en su suscripción de Azure, se necesita Hola nombre de su toocomplete de base de datos central en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="f891b-148">[Create an IoT hub][lnk-create-hub] in your Azure subscription, you need hello name of your hub toocomplete this walkthrough.</span></span> <span data-ttu-id="f891b-149">Si no tiene ninguna, puede crear una [cuenta gratuita][lnk-free-trial] en tan solo unos minutos.</span><span class="sxs-lookup"><span data-stu-id="f891b-149">If you don't have an account, you can create a [free account][lnk-free-trial] in just a couple of minutes.</span></span>
* <span data-ttu-id="f891b-150">Agregue el centro de IoT de dos dispositivos tooyour y tome nota de sus identificadores y las claves de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f891b-150">Add two devices tooyour IoT hub and make a note of their ids and device keys.</span></span> <span data-ttu-id="f891b-151">Puede usar hello [explorador del dispositivo] [ lnk-device-explorer] o [el centro de IOT explorador] [ lnk-iothub-explorer] herramienta tooadd su centro de IoT de toohello de dispositivos que creó en hello anterior paso a paso y recuperar sus claves.</span><span class="sxs-lookup"><span data-stu-id="f891b-151">You can use hello [device explorer][lnk-device-explorer] or [iothub-explorer][lnk-iothub-explorer] tool tooadd your devices toohello IoT hub you created in hello previous step and retrieve their keys.</span></span>

![][2]

<!-- Images -->
[1]: media/iot-hub-iot-edge-simulated-selector/image1.png
[2]: media/iot-hub-iot-edge-simulated-selector/image2.png

<!-- Links -->
[ejemplo en la nube de dispositivo simulado cargar]: https://github.com/Azure/iot-edge/blob/master/samples/simulated_device_cloud_upload/README.md
[lnk-sdk]: https://github.com/Azure/iot-edge
[lnk-gw-getstarted]: ../articles/iot-hub/iot-hub-linux-iot-edge-get-started.md
[lnk-free-trial]: https://azure.microsoft.com/pricing/free-trial/
[lnk-device-explorer]: https://github.com/Azure/azure-iot-sdk-csharp/tree/master/tools/DeviceExplorer
[lnk-iothub-explorer]: https://github.com/Azure/iothub-explorer/blob/master/readme.md
[lnk-create-hub]: ../articles/iot-hub/iot-hub-create-through-portal.md
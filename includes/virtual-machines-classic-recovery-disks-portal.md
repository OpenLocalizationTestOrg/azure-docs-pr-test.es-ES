<span data-ttu-id="38220-101">Si la máquina virtual (VM) en Azure detecta un error de disco o de arranque, debe tooperform pasos en el disco duro virtual Hola propio para solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="38220-101">If your virtual machine (VM) in Azure encounters a boot or disk error, you may need tooperform troubleshooting steps on hello virtual hard disk itself.</span></span> <span data-ttu-id="38220-102">Un ejemplo común sería una actualización de la aplicación que ha fallado que impide que Hola VM correctamente.</span><span class="sxs-lookup"><span data-stu-id="38220-102">A common example would be a failed application update that prevents hello VM from booting successfully.</span></span> <span data-ttu-id="38220-103">Este artículo se describe cómo toouse tooconnect portal Azure su toofix VM de disco duro virtual tooanother los errores y, a continuación, volver a crear la máquina virtual original.</span><span class="sxs-lookup"><span data-stu-id="38220-103">This article describes how toouse Azure portal tooconnect your virtual hard disk tooanother VM toofix any errors and then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="38220-104">Introducción al proceso de recuperación</span><span class="sxs-lookup"><span data-stu-id="38220-104">Recovery process overview</span></span>
<span data-ttu-id="38220-105">proceso de solución de problemas de Hello es como sigue:</span><span class="sxs-lookup"><span data-stu-id="38220-105">hello troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="38220-106">Eliminar Hola máquina virtual que se produzca problemas, pero conservar los discos duros virtuales Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-106">Delete hello VM that's encountering issues, but retain hello virtual hard disks.</span></span>
2. <span data-ttu-id="38220-107">Adjuntar y montar hello tooanother de disco duro virtual para solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="38220-107">Attach and mount hello virtual hard disk tooanother VM for troubleshooting.</span></span>
3. <span data-ttu-id="38220-108">Conectar toohello solución de problemas de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-108">Connect toohello troubleshooting VM.</span></span> <span data-ttu-id="38220-109">Editar los archivos o ejecutar herramientas de errores de toofix en hello: disco duro virtual original.</span><span class="sxs-lookup"><span data-stu-id="38220-109">Edit files or run tools toofix errors on hello original virtual hard disk.</span></span>
4. <span data-ttu-id="38220-110">Desmonte y desconecte Hola de disco duro virtual de hello VM de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="38220-110">Unmount and detach hello virtual hard disk from hello troubleshooting VM.</span></span>
5. <span data-ttu-id="38220-111">Crear una máquina virtual mediante hello: disco duro virtual original.</span><span class="sxs-lookup"><span data-stu-id="38220-111">Create a VM by using hello original virtual hard disk.</span></span>

## <a name="delete-hello-original-vm"></a><span data-ttu-id="38220-112">Eliminar Hola VM original</span><span class="sxs-lookup"><span data-stu-id="38220-112">Delete hello original VM</span></span>
<span data-ttu-id="38220-113">Los discos duros virtuales y las máquinas virtuales son dos recursos diferentes de Azure.</span><span class="sxs-lookup"><span data-stu-id="38220-113">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="38220-114">Un disco duro virtual es donde se almacenan el sistema operativo de hello, aplicaciones y configuraciones.</span><span class="sxs-lookup"><span data-stu-id="38220-114">A virtual hard disk is where hello operating system, applications, and configurations are stored.</span></span> <span data-ttu-id="38220-115">Hola VM es solo de metadatos que define el tamaño de Hola o la ubicación y que hace referencia a recursos, como un disco duro virtual o una tarjeta de interfaz de red virtual (NIC).</span><span class="sxs-lookup"><span data-stu-id="38220-115">hello VM is just metadata that defines hello size or location and that references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="38220-116">Cada disco duro virtual Obtiene una concesión asignada ese disco una vez conectado tooa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-116">Each virtual hard disk gets a lease assigned when that disk is attached tooa VM.</span></span> <span data-ttu-id="38220-117">Aunque los discos de datos se pueden conectados y desconectados incluso mientras se está ejecutando Hola VM, no se puede desasociar el disco del sistema operativo Hola a menos que se elimine Hola recurso de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-117">Although data disks can be attached and detached even while hello VM is running, hello OS disk cannot be detached unless hello VM resource is deleted.</span></span> <span data-ttu-id="38220-118">concesión de Hola continúa tooassociate Hola SO disco tooa VM incluso cuando esa máquina virtual está en un estado detenido o desasignado.</span><span class="sxs-lookup"><span data-stu-id="38220-118">hello lease continues tooassociate hello OS disk tooa VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="38220-119">Hola primera toorecovering paso la máquina virtual es el recurso de máquina virtual de hello toodelete propio.</span><span class="sxs-lookup"><span data-stu-id="38220-119">hello first step toorecovering your VM is toodelete hello VM resource itself.</span></span> <span data-ttu-id="38220-120">Eliminando Hola VM deja Hola los discos duros virtuales en su cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="38220-120">Deleting hello VM leaves hello virtual hard disks in your storage account.</span></span> <span data-ttu-id="38220-121">Después de Hola que se elimina la máquina virtual, puede adjuntar Hola disco duro virtual tooanother VM tootroubleshoot y resolver errores de Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-121">After hello VM is deleted, you can attach hello virtual hard disk tooanother VM tootroubleshoot and resolve hello errors.</span></span> 

1. <span data-ttu-id="38220-122">Inicie sesión en toohello [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="38220-122">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="38220-123">En el menú de hello en el lado izquierdo de hello, haga clic en **máquinas virtuales (clásicas)**.</span><span class="sxs-lookup"><span data-stu-id="38220-123">On hello menu on hello left side, click **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="38220-124">Haga clic en la máquina virtual que tiene el problema de hello, seleccione hello **discos**y, a continuación, identificar nombre Hola de disco duro virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-124">Select hello VM that has hello problem, click **Disks**, and then identify hello name of hello virtual hard disk.</span></span> 
4. <span data-ttu-id="38220-125">Seleccione el disco duro virtual de hello SO y comprobar hello **ubicación** cuenta de almacenamiento de hello tooidentify que contiene este disco duro virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-125">Select hello OS virtual hard disk and check hello **Location** tooidentify hello storage account that contains that virtual hard disk.</span></span> <span data-ttu-id="38220-126">En el siguiente ejemplo de Hola Hola cadena inmediatamente anterior ". blob.core.windows.net" es el nombre de cuenta de almacenamiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-126">In hello following example, hello string immediately before ".blob.core.windows.net" is hello storage account name.</span></span>

    ```
    https://portalvhds73fmhrw5xkp43.blob.core.windows.net/vhds/SCCM2012-2015-08-28.vhd
    ```

    ![imagen de Hello acerca de la ubicación de la máquina virtual](./media/virtual-machines-classic-recovery-disks-portal/vm-location.png)

5. <span data-ttu-id="38220-128">Haga clic en hello VM y, a continuación, seleccione **eliminar**.</span><span class="sxs-lookup"><span data-stu-id="38220-128">Right-click hello VM and then select **Delete**.</span></span> <span data-ttu-id="38220-129">Asegúrese de que no se seleccionen discos Hola al eliminar Hola VM.</span><span class="sxs-lookup"><span data-stu-id="38220-129">Make sure that hello disks are not selected when you delete hello VM.</span></span>
6. <span data-ttu-id="38220-130">Cree una nueva máquina virtual de recuperación.</span><span class="sxs-lookup"><span data-stu-id="38220-130">Create a new recovery VM.</span></span> <span data-ttu-id="38220-131">Esta máquina virtual debe estar en hello mismo grupo de recursos y región (servicio de nube) como problema Hola VM.</span><span class="sxs-lookup"><span data-stu-id="38220-131">This VM must be in hello same region and resource group (Cloud Service) as hello problem VM.</span></span>
7. <span data-ttu-id="38220-132">Seleccione la máquina virtual de recuperación de hello y, a continuación, seleccione **discos** > **adjuntar existente**.</span><span class="sxs-lookup"><span data-stu-id="38220-132">Select hello recovery VM, and then select **Disks** > **Attach Existing**.</span></span>
8. <span data-ttu-id="38220-133">tooselect su disco duro virtual existente, haga clic en **archivo VHD**:</span><span class="sxs-lookup"><span data-stu-id="38220-133">tooselect your existing virtual hard disk, click **VHD File**:</span></span>

    ![Busque el disco duro virtual existente.](./media/virtual-machines-classic-recovery-disks-portal/select-vhd-location.png)

9. <span data-ttu-id="38220-135">Seleccione la cuenta de almacenamiento de hello > contenedor VHD > Hola disco duro virtual, haga clic en hello **seleccione** botón tooconfirm su elección.</span><span class="sxs-lookup"><span data-stu-id="38220-135">Select hello storage account > VHD container > hello virtual hard disk, click hello **Select** button tooconfirm your choice.</span></span>

    ![Seleccione el disco duro virtual existente](./media/virtual-machines-classic-recovery-disks-portal/select-vhd.png)

10. <span data-ttu-id="38220-137">Con un VHD ahora seleccionado, seleccione **Aceptar** tooattach Hola disco duro virtual existente.</span><span class="sxs-lookup"><span data-stu-id="38220-137">With your VHD now selected, select **OK** tooattach hello existing virtual hard disk.</span></span>
11. <span data-ttu-id="38220-138">Después de unos segundos, Hola **discos** panel para la máquina virtual se mostrará el disco duro virtual existente conectado como disco de datos:</span><span class="sxs-lookup"><span data-stu-id="38220-138">After a few seconds, hello **Disks** pane for your VM will display your existing virtual hard disk connected as a data disk:</span></span>

    ![Disco duro virtual existente conectado como disco de datos](./media/virtual-machines-classic-recovery-disks-portal/attached-disk.png)

## <a name="fix-issues-on-hello-original-virtual-hard-disk"></a><span data-ttu-id="38220-140">Solucionar problemas en hello: disco duro virtual original</span><span class="sxs-lookup"><span data-stu-id="38220-140">Fix issues on hello original virtual hard disk</span></span>
<span data-ttu-id="38220-141">Cuando se montan hello: disco duro virtual existente, ahora puede realizar cualquier tarea de mantenimiento y solución de problemas de pasos según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="38220-141">When hello existing virtual hard disk is mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="38220-142">Una vez que se ha solucionado problemas hello, continúe con hello pasos.</span><span class="sxs-lookup"><span data-stu-id="38220-142">Once you have addressed hello issues, continue with hello following steps.</span></span>

## <a name="unmount-and-detach-hello-original-virtual-hard-disk"></a><span data-ttu-id="38220-143">Desmonte y desconecte hello: disco duro virtual original</span><span class="sxs-lookup"><span data-stu-id="38220-143">Unmount and detach hello original virtual hard disk</span></span>
<span data-ttu-id="38220-144">Una vez que se resuelven los errores, desmonte y desasociar el disco duro virtual existente del saludo de la máquina virtual para solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="38220-144">Once any errors are resolved, unmount and detach hello existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="38220-145">No se puede usar el disco duro virtual junto con cualquier otra máquina virtual hasta que se libera la concesión de Hola que asocia toohello de disco duro virtual de hello VM de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="38220-145">You cannot use your virtual hard disk together with any other VM until hello lease that attaches hello virtual hard disk toohello troubleshooting VM is released.</span></span>  

1. <span data-ttu-id="38220-146">Inicie sesión en toohello [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="38220-146">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="38220-147">En el menú de hello en el lado izquierdo de hello, seleccione **máquinas virtuales (clásicas)**.</span><span class="sxs-lookup"><span data-stu-id="38220-147">On hello menu on hello left side, select **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="38220-148">Busque la máquina virtual de recuperación de Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-148">Locate hello recovery VM.</span></span> <span data-ttu-id="38220-149">Seleccione los discos, disco de hello del menú contextual y, a continuación, seleccione **separar**.</span><span class="sxs-lookup"><span data-stu-id="38220-149">Select Disks, right-click hello disk, and then select **Detach**.</span></span>

## <a name="create-a-vm-from-hello-original-hard-disk"></a><span data-ttu-id="38220-150">Crear una máquina virtual desde el disco duro original de Hola</span><span class="sxs-lookup"><span data-stu-id="38220-150">Create a VM from hello original hard disk</span></span>

<span data-ttu-id="38220-151">usar una máquina virtual desde el disco duro virtual original de toocreate [portal de Azure clásico](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="38220-151">toocreate a VM from your original virtual hard disk, use [Azure classic portal](https://manage.windowsazure.com).</span></span>

1. <span data-ttu-id="38220-152">Inicie sesión en el [Portal de Azure clásico](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="38220-152">Sign into [Azure classic portal](https://manage.windowsazure.com).</span></span>
2. <span data-ttu-id="38220-153">En hello parte inferior del portal de hello, seleccione **New** > **proceso** > **Máquina Virtual** > **de la Galería** .</span><span class="sxs-lookup"><span data-stu-id="38220-153">At hello bottom of hello portal, select **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span>
3. <span data-ttu-id="38220-154">Hola **elegir una imagen** sección, seleccione **Mis discos**, y, a continuación, seleccione Hola disco duro virtual original.</span><span class="sxs-lookup"><span data-stu-id="38220-154">In hello **Choose an Image** section, select **My disks**, and then select hello original virtual hard disk.</span></span> <span data-ttu-id="38220-155">Compruebe la información de ubicación de Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-155">Check hello location information.</span></span> <span data-ttu-id="38220-156">Se trata de una región Hola donde debe implementarse Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-156">This is hello region where hello VM must be deployed.</span></span> <span data-ttu-id="38220-157">Seleccione el botón siguiente Hola.</span><span class="sxs-lookup"><span data-stu-id="38220-157">Select hello next button.</span></span>
4. <span data-ttu-id="38220-158">Hola **configuración de máquina Virtual** sección, escriba el nombre de la máquina virtual de Hola y seleccione un tamaño para hello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="38220-158">In hello **Virtual machine configuration** section, type hello VM name and select a size for hello VM.</span></span>

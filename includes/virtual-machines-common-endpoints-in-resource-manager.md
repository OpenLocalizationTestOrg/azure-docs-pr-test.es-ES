<span data-ttu-id="64725-101">los puntos de conexión de Hello enfoque tooAzure funciona un poco distinto entre los modelos de implementación de hello clásico y Administrador de recursos.</span><span class="sxs-lookup"><span data-stu-id="64725-101">hello approach tooAzure endpoints works a little differently between hello Classic and Resource Manager deployment models.</span></span> <span data-ttu-id="64725-102">En el modelo de implementación del Administrador de recursos de hello, ahora dispone de filtros de red de toocreate de flexibilidad de Hola que controlan el flujo de Hola de tráfico dentro y fuera de las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-102">In hello Resource Manager deployment model, you now have hello flexibility toocreate network filters that control hello flow of traffic in and out of your VMs.</span></span> <span data-ttu-id="64725-103">Estos filtros le permiten toocreate complejos entornos de red más allá de un punto de conexión simple como en el modelo de implementación de hello clásico.</span><span class="sxs-lookup"><span data-stu-id="64725-103">These filters allow you toocreate complex networking environments beyond a simple endpoint as in hello Classic deployment model.</span></span> <span data-ttu-id="64725-104">En este artículo se proporciona información general sobre los grupos de seguridad de red y se explican sus diferencias con respecto a los puntos de conexión del modelo clásica, para lo que se crean reglas de filtrado y escenarios de implementación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="64725-104">This article provides an overview of Network Security Groups and how they differ from using Classic endpoints, creating these filtering rules, and sample deployment scenarios.</span></span>

## <a name="overview-of-resource-manager-deployments"></a><span data-ttu-id="64725-105">Información general acerca de las implementaciones de Resource Manager</span><span class="sxs-lookup"><span data-stu-id="64725-105">Overview of Resource Manager deployments</span></span>
<span data-ttu-id="64725-106">Puntos de conexión de modelo de implementación clásica de Hola se reemplazan por los grupos de seguridad de red y las reglas de lista (ACL) de control de acceso.</span><span class="sxs-lookup"><span data-stu-id="64725-106">Endpoints in hello Classic deployment model are replaced by Network Security Groups and access control list (ACL) rules.</span></span> <span data-ttu-id="64725-107">Estos son unos rápidos para implementar las reglas de ACL del grupo de seguridad de red:</span><span class="sxs-lookup"><span data-stu-id="64725-107">Quick steps for implementing Network Security Group ACL rules are:</span></span>

* <span data-ttu-id="64725-108">Crear un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-108">Create a Network Security Group.</span></span>
* <span data-ttu-id="64725-109">tooallow o denegar el tráfico, defina las reglas de ACL de grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-109">tooallow or deny traffic, define your Network Security Group ACL rules.</span></span>
* <span data-ttu-id="64725-110">Asignar la interfaz de red de tooa de grupo de seguridad de red o subred de red virtual.</span><span class="sxs-lookup"><span data-stu-id="64725-110">Assign your Network Security Group tooa network interface or virtual network subnet.</span></span>

<span data-ttu-id="64725-111">Si desea tooalso realizar el enrutamiento de puerto, que necesita tooplace un equilibrador de carga delante de la máquina virtual y usa las reglas NAT.</span><span class="sxs-lookup"><span data-stu-id="64725-111">If you are wanting tooalso perform port-forwarding, you need tooplace a load balancer in front of your VM and use NAT rules.</span></span> <span data-ttu-id="64725-112">Estos serían los pasos rápidos para implementar un equilibrador de carga y reglas NAT:</span><span class="sxs-lookup"><span data-stu-id="64725-112">Quick steps for implementing a load balancer and NAT rules would be as follows:</span></span>

* <span data-ttu-id="64725-113">Cree un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="64725-113">Create a load balancer.</span></span>
* <span data-ttu-id="64725-114">Cree un grupo back-end y agregue el grupo de toohello de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-114">Create a backend pool and add your VMs toohello pool.</span></span>
* <span data-ttu-id="64725-115">Definir las reglas NAT para el reenvío de puerto de hello necesario.</span><span class="sxs-lookup"><span data-stu-id="64725-115">Define your NAT rules for hello required port forwarding.</span></span>
* <span data-ttu-id="64725-116">Asignar las reglas NAT tooyour las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-116">Assign your NAT rules tooyour VMs.</span></span>

## <a name="network-security-group-overview"></a><span data-ttu-id="64725-117">Introducción a los grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="64725-117">Network Security Group overview</span></span>
<span data-ttu-id="64725-118">Grupos de seguridad de red proporcionan un nivel de seguridad para que los puertos específicos de tooallow y subredes tooaccess las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-118">Network Security Groups provide a layer of security for you tooallow specific ports and subnets tooaccess your VMs.</span></span> <span data-ttu-id="64725-119">Normalmente siempre es necesario proporcionar este nivel de seguridad entre las máquinas virtuales y hello world fuera de un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-119">You typically always have a Network Security Group providing this layer of security between your VMs and hello outside world.</span></span> <span data-ttu-id="64725-120">Grupos de seguridad de red puede ser aplicada tooa subred de red virtual o una interfaz de red específico para una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="64725-120">Network Security Groups can be applied tooa virtual network subnet or a specific network interface for a VM.</span></span> <span data-ttu-id="64725-121">En lugar de crear reglas de ACL de punto de conexión, ahora se crean reglas de ACL del grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-121">Rather than creating endpoint ACL rules, you now create Network Security Group ACL rules.</span></span> <span data-ttu-id="64725-122">Estas reglas ACL proporcionan un control mucho mayor que basta con crear un punto de conexión tooforward un puerto determinado.</span><span class="sxs-lookup"><span data-stu-id="64725-122">These ACL rules provide much greater control than simply creating an endpoint tooforward a given port.</span></span> <span data-ttu-id="64725-123">Para más información, consulte [¿Qué es un grupo de seguridad de red?](../articles/virtual-network/virtual-networks-nsg.md)</span><span class="sxs-lookup"><span data-stu-id="64725-123">For more information, see [What is a Network Security Group?](../articles/virtual-network/virtual-networks-nsg.md)</span></span>

> [!TIP]
> <span data-ttu-id="64725-124">Puede asignar subredes toomultiple de grupos de seguridad de red o interfaces de red.</span><span class="sxs-lookup"><span data-stu-id="64725-124">You can assign Network Security Groups toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="64725-125">No hay una asignación 1:1.</span><span class="sxs-lookup"><span data-stu-id="64725-125">There is no 1:1 mapping.</span></span> <span data-ttu-id="64725-126">Puede crear un grupo de seguridad de red con un conjunto común de reglas de ACL y aplicar toomultiple subredes o interfaces de red.</span><span class="sxs-lookup"><span data-stu-id="64725-126">You can create a Network Security Group with a common set of ACL rules and apply toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="64725-127">Además, el grupo de seguridad de red puede ser tooresources aplicados a través de su suscripción (basado en [controles de acceso en función de rol](../articles/active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="64725-127">Further, Network Security Group can be applied tooresources across your subscription (based on [Role Based Access Controls](../articles/active-directory/role-based-access-control-what-is.md).</span></span>

## <a name="load-balancers-overview"></a><span data-ttu-id="64725-128">Información general de los equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="64725-128">Load Balancers overview</span></span>
<span data-ttu-id="64725-129">En el modelo de implementación clásica de hello, Azure podría realizar todas las Hola traducción de direcciones de red (NAT) y el puerto reenvío en un servicio de nube para usted.</span><span class="sxs-lookup"><span data-stu-id="64725-129">In hello Classic deployment model, Azure would perform all hello Network Address Translation (NAT) and port forwarding on a Cloud Service for you.</span></span> <span data-ttu-id="64725-130">Al crear un punto de conexión, especificaría Hola puerto externo tooexpose junto con hello puerto interno toodirect tráfico.</span><span class="sxs-lookup"><span data-stu-id="64725-130">When creating an endpoint, you would specify hello external port tooexpose along with hello internal port toodirect traffic to.</span></span> <span data-ttu-id="64725-131">Por sí mismos, los grupos de seguridad de red no realizan el mismo enrutamiento de puertos ni la misma NAT.</span><span class="sxs-lookup"><span data-stu-id="64725-131">Network Security Groups by themselves do not perform this same NAT and port forwarding.</span></span> 

<span data-ttu-id="64725-132">tooallow toocreate reglas NAT para estos puertos de reenvío, creará un equilibrador de carga de Azure en el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="64725-132">tooallow you toocreate NAT rules for such port forwarding, create an Azure load balancer in your resource group.</span></span> <span data-ttu-id="64725-133">De nuevo, el equilibrador de carga de hello es granular suficiente tooonly aplicar toospecific VM si es necesario.</span><span class="sxs-lookup"><span data-stu-id="64725-133">Again, hello load balancer is granular enough tooonly apply toospecific VMs if needed.</span></span> <span data-ttu-id="64725-134">Hello Azure carga trabajo de reglas NAT equilibrador junto con tooprovide de reglas de ACL de grupo de seguridad de red mucha más flexibilidad y control que son posibles con los puntos de conexión de servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="64725-134">hello Azure load balancer NAT rules work alongside Network Security Group ACL rules tooprovide much more flexibility and control than was achievable using Cloud Service endpoints.</span></span> <span data-ttu-id="64725-135">Para obtener más información, vea hello [información general del equilibrador de carga](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="64725-135">For more information, see hello [load balancer overview](../articles/load-balancer/load-balancer-overview.md).</span></span>

## <a name="network-security-group-acl-rules"></a><span data-ttu-id="64725-136">Reglas de ACL del grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="64725-136">Network Security Group ACL rules</span></span>
<span data-ttu-id="64725-137">Las reglas de ACL permiten definir qué tráfico puede entrar y salir en una máquina virtual en función de determinados puertos, intervalos de puerto o protocolos.</span><span class="sxs-lookup"><span data-stu-id="64725-137">ACL rules let you define what traffic can flow in and out of your VM based on specific ports, port ranges, or protocols.</span></span> <span data-ttu-id="64725-138">Las reglas se asignan tooindividual las máquinas virtuales o subred tooa.</span><span class="sxs-lookup"><span data-stu-id="64725-138">Rules are assigned tooindividual VMs or tooa subnet.</span></span> <span data-ttu-id="64725-139">Hola siguiente captura de pantalla es un ejemplo de las reglas de ACL para un servidor Web comunes:</span><span class="sxs-lookup"><span data-stu-id="64725-139">hello following screenshot is an example of ACL rules for a common webserver:</span></span>

![Lista de reglas de ACL del grupo de seguridad de red](./media/virtual-machines-common-endpoints-in-resource-manager/example-acl-rules.png)

<span data-ttu-id="64725-141">Las reglas de ACL se aplican en función de una métrica de prioridad que especifique - Hola mayor sea el valor de hello, menor prioridad de Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="64725-141">ACL rules are applied based on a priority metric that you specify - hello higher hello value, hello lower hello priority.</span></span> <span data-ttu-id="64725-142">Cada grupo de seguridad de red tiene el valor predeterminado de tres reglas que están diseñadas toohandle flujo de Hola de tráfico de red de Azure, con explícito `DenyAllInbound` como regla final Hola.</span><span class="sxs-lookup"><span data-stu-id="64725-142">Every Network Security Group has three default rules that are designed toohandle hello flow of Azure networking traffic, with an explicit `DenyAllInbound` as hello final rule.</span></span> <span data-ttu-id="64725-143">Reglas de ACL predeterminada se debido a una prioridad baja toonot interferir con reglas que se crean.</span><span class="sxs-lookup"><span data-stu-id="64725-143">Default ACL rules are given a low priority toonot interfere with rules you create.</span></span>

## <a name="assigning-network-security-groups"></a><span data-ttu-id="64725-144">Asignación de grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="64725-144">Assigning Network Security Groups</span></span>
<span data-ttu-id="64725-145">Asignar una subred de tooa de grupo de seguridad de red o una interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="64725-145">You assign a Network Security Group tooa subnet or a network interface.</span></span> <span data-ttu-id="64725-146">Este enfoque permite toobe tan específicos según sea necesario al aplicar la ACL reglas tooonly una VM específica, o asegurarse de que un conjunto común de ACL reglas son aplicado tooall parte de las máquinas virtuales de una subred:</span><span class="sxs-lookup"><span data-stu-id="64725-146">This approach allows you toobe as granular as needed when applying your ACL rules tooonly a specific VM, or ensure a common set of ACL rules are applied tooall VMs part of a subnet:</span></span>

![Aplicar los NSG toonetwork interfaces o subredes](./media/virtual-machines-common-endpoints-in-resource-manager/apply-nsg-to-resources.png)

<span data-ttu-id="64725-148">comportamiento de Hola de hello grupo de seguridad de red no cambia dependiendo de que se va a asignar tooa subred o una interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="64725-148">hello behavior of hello Network Security Group doesn't change depending on being assigned tooa subnet or a network interface.</span></span> <span data-ttu-id="64725-149">Un escenario común de implementación tiene Hola que había asignado de grupo de seguridad de red tooa cumplimiento de tooensure de subred de la subred de toothat adjunto de todas las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-149">A common deployment scenario has hello Network Security Group assigned tooa subnet tooensure compliance of all VMs attached toothat subnet.</span></span> <span data-ttu-id="64725-150">Para obtener más información, consulte [aplicar seguridad de red agrupa tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span><span class="sxs-lookup"><span data-stu-id="64725-150">For more information, see [applying Network Security groups tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span></span>

## <a name="default-behavior-of-network-security-groups"></a><span data-ttu-id="64725-151">Comportamiento predeterminado de grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="64725-151">Default behavior of Network Security Groups</span></span>
<span data-ttu-id="64725-152">Dependiendo de cómo y cuándo se cree el grupo de seguridad de red, pueden crearse reglas predeterminadas para el acceso RDP toopermit de máquinas virtuales de Windows en el puerto TCP 3389.</span><span class="sxs-lookup"><span data-stu-id="64725-152">Depending on how and when you create your Network Security Group, default rules may be created for Windows VMs toopermit RDP access on TCP port 3389.</span></span> <span data-ttu-id="64725-153">Las reglas predeterminadas para las máquinas virtuales Linux permiten el acceso de SSH al puerto TCP 22.</span><span class="sxs-lookup"><span data-stu-id="64725-153">Default rules for Linux VMs permit SSH access on TCP port 22.</span></span> <span data-ttu-id="64725-154">Estas reglas ACL automática se crean en hello condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="64725-154">These automatic ACL rules are created under hello following conditions:</span></span>

* <span data-ttu-id="64725-155">Si crea una VM de Windows a través del portal de Hola y Aceptar Hola predeterminado acción toocreate un grupo de seguridad de red, se crea un ACL regla tooallow el puerto TCP 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="64725-155">If you create a Windows VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 3389 (RDP) is created.</span></span>
* <span data-ttu-id="64725-156">Si crea una VM de Linux a través del portal de Hola y Aceptar Hola predeterminado acción toocreate un grupo de seguridad de red, se crea un ACL regla tooallow el puerto TCP 22 (SSH).</span><span class="sxs-lookup"><span data-stu-id="64725-156">If you create a Linux VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 22 (SSH) is created.</span></span>

<span data-ttu-id="64725-157">Bajo las demás condiciones, estas reglas de ACL predeterminadas no se crean.</span><span class="sxs-lookup"><span data-stu-id="64725-157">Under all other conditions, these default ACL rules are not created.</span></span> <span data-ttu-id="64725-158">No se puede conectar tooyour VM sin crear Hola reglas ACL adecuadas.</span><span class="sxs-lookup"><span data-stu-id="64725-158">You cannot connect tooyour VM without creating hello appropriate ACL rules.</span></span> <span data-ttu-id="64725-159">Estas condiciones incluyen hello siguientes acciones comunes:</span><span class="sxs-lookup"><span data-stu-id="64725-159">These conditions include hello following common actions:</span></span>

* <span data-ttu-id="64725-160">Crear un grupo de seguridad de red a través del portal de Hola como un Hola de toocreating acción independiente máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="64725-160">Creating a Network Security Group through hello portal as a separate action toocreating hello VM.</span></span>
* <span data-ttu-id="64725-161">Creación de un grupo de seguridad de red mediante programación a través de PowerShell, la CLI de Azure, API de REST, etc.</span><span class="sxs-lookup"><span data-stu-id="64725-161">Creating a Network Security Group programmatically through PowerShell, Azure CLI, Rest APIs, etc.</span></span>
* <span data-ttu-id="64725-162">Crear una máquina virtual y asignarle tooan existente de grupo de seguridad de red que ya no tiene regla ACL adecuada Hola definida.</span><span class="sxs-lookup"><span data-stu-id="64725-162">Creating a VM and assigning it tooan existing Network Security Group that does not already have hello appropriate ACL rule defined.</span></span>

<span data-ttu-id="64725-163">En Hola a todos los anteriores casos debe toocreate reglas de ACL para las conexiones de administración remota de VM tooallow Hola.</span><span class="sxs-lookup"><span data-stu-id="64725-163">In all hello preceding cases, you need toocreate ACL rules for your VM tooallow hello appropriate remote management connections.</span></span>

## <a name="default-behavior-of-a-vm-without-a-network-security-group"></a><span data-ttu-id="64725-164">Comportamiento predeterminado de una máquina virtual sin un grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="64725-164">Default behavior of a VM without a Network Security Group</span></span>
<span data-ttu-id="64725-165">Es posible crear una máquina virtual sin necesidad de crear un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-165">You can create a VM without creating a Network Security Group.</span></span> <span data-ttu-id="64725-166">En estas situaciones, puede conectarse tooyour VM mediante RDP o SSH sin necesidad de crear cualquier regla de ACL.</span><span class="sxs-lookup"><span data-stu-id="64725-166">In these situations, you can connect tooyour VM using RDP or SSH without creating any ACL rules.</span></span> <span data-ttu-id="64725-167">De forma similar, si se ha instalado un servicio web en el puerto 80, es posible acceder automáticamente a él de forma remota.</span><span class="sxs-lookup"><span data-stu-id="64725-167">Similarly, if you installed a web service on port 80, that service is automatically accessible remotely.</span></span> <span data-ttu-id="64725-168">Hola VM tiene todos los puertos abierto.</span><span class="sxs-lookup"><span data-stu-id="64725-168">hello VM has all ports open.</span></span>

> [!NOTE]
> <span data-ttu-id="64725-169">Todavía necesita toohave una tooa de dirección asignada IP virtual pública en orden para cualquier conexión remota.</span><span class="sxs-lookup"><span data-stu-id="64725-169">You still need toohave a public IP address assigned tooa VM in order for any remote connections.</span></span> <span data-ttu-id="64725-170">No tener un grupo de seguridad de red para la interfaz de red o de subred de hello no expone tráfico externo de hello VM tooany.</span><span class="sxs-lookup"><span data-stu-id="64725-170">Not having a Network Security Group for hello subnet or network interface doesn't expose hello VM tooany external traffic.</span></span> <span data-ttu-id="64725-171">acción de Hello predeterminada al crear una máquina virtual a través del portal de hello es toocreate una IP pública nueva.</span><span class="sxs-lookup"><span data-stu-id="64725-171">hello default action when creating a VM through hello portal is toocreate a new public IP.</span></span> <span data-ttu-id="64725-172">En el caso de las demás formas de crear una máquina virtual como PowerShell, la CLI de Azure o una plantilla de Resource Manager, no se crea automáticamente una dirección IP pública, a menos que se solicite explícitamente.</span><span class="sxs-lookup"><span data-stu-id="64725-172">For all other forms of creating a VM such as PowerShell, Azure CLI, or Resource Manager template, a public IP is not automatically created unless explicitly requested.</span></span> <span data-ttu-id="64725-173">acción predeterminada de Hola a través del portal de hello también es toocreate un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-173">hello default action through hello portal is also toocreate a Network Security Group.</span></span> <span data-ttu-id="64725-174">Esta acción predeterminada significa que no debe terminar en una situación con una máquina virtual expuesta que no tenga el filtrado de redes instalado.</span><span class="sxs-lookup"><span data-stu-id="64725-174">This default action means you shouldn't end up in a situation with an exposed VM that has no network filtering in place.</span></span>

## <a name="understanding-load-balancers-and-nat-rules"></a><span data-ttu-id="64725-175">Descripción de las reglas NAT y los equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="64725-175">Understanding Load Balancers and NAT rules</span></span>
<span data-ttu-id="64725-176">En el modelo de implementación de hello clásico, puede crear puntos de conexión que también realizan el reenvío de puerto.</span><span class="sxs-lookup"><span data-stu-id="64725-176">In hello Classic deployment model, you could create endpoints that also performed port forwarding.</span></span> <span data-ttu-id="64725-177">Cuando se crea una máquina virtual en el modelo de implementación clásica de hello, se crearán automáticamente las reglas de ACL para RDP o SSH.</span><span class="sxs-lookup"><span data-stu-id="64725-177">When you create a VM in hello Classic deployment model, ACL rules for RDP or SSH would be automatically created.</span></span> <span data-ttu-id="64725-178">Estas reglas no expondría el puerto TCP 3389 o el puerto TCP 22 respectivamente toohello fuera del mundo.</span><span class="sxs-lookup"><span data-stu-id="64725-178">These rules would not expose TCP port 3389 or TCP port 22 respectively toohello outside world.</span></span> <span data-ttu-id="64725-179">En su lugar, podría exponerse un puerto TCP de gran valor que se asigna un puerto interno toohello adecuado.</span><span class="sxs-lookup"><span data-stu-id="64725-179">Instead, a high-value TCP port would be exposed that maps toohello appropriate internal port.</span></span> <span data-ttu-id="64725-180">También puede crear sus propias reglas ACL de forma similar, como exponer un webserver en TCP puerto 4280 toohello fuera del mundo.</span><span class="sxs-lookup"><span data-stu-id="64725-180">You could also create your own ACL rules in a similar manner, such as expose a webserver on TCP port 4280 toohello outside world.</span></span> <span data-ttu-id="64725-181">Puede ver estas reglas ACL y las asignaciones de puerto en hello siguiendo la captura de pantalla de portal clásico de hello:</span><span class="sxs-lookup"><span data-stu-id="64725-181">You can see these ACL rules and port mappings in hello following screenshot from hello Classic portal:</span></span>

![Enrutamiento de puertos con punto de conexión del modelo de implementación Clásico](./media/virtual-machines-common-endpoints-in-resource-manager/classic-endpoints-port-forwarding.png)

<span data-ttu-id="64725-183">Con los grupos de seguridad de red, la función de enrutamiento de puertos la controla un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="64725-183">With Network Security Groups, that port-forwarding function is handled by a load balancer.</span></span> <span data-ttu-id="64725-184">Para más información, consulte los [equilibradores de carga de Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="64725-184">For more information, see [load balancers in Azure](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="64725-185">Hello en el ejemplo siguiente se muestra un equilibrador de carga con una NAT regla tooperform reenvío de puerto TCP puerto 4222 toohello interno el puerto TCP 22 una máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="64725-185">hello following example shows a load balancer with a NAT rule tooperform port-forwarding TCP port 4222 toohello internal TCP port 22 a VM:</span></span>

![Reglas NAT del equilibrador para el enrutamiento de puertos](./media/virtual-machines-common-endpoints-in-resource-manager/load-balancer-nat-rules.png)

> [!NOTE]
> <span data-ttu-id="64725-187">Al implementar un equilibrador de carga, por lo general no asigna Hola propia máquina virtual una dirección IP pública.</span><span class="sxs-lookup"><span data-stu-id="64725-187">When you implement a load balancer, you typically don't assign hello VM itself a public IP address.</span></span> <span data-ttu-id="64725-188">En su lugar, equilibrador de carga de hello tiene un tooit dirección asignada de IP pública.</span><span class="sxs-lookup"><span data-stu-id="64725-188">Instead, hello load balancer has a public IP address assigned tooit.</span></span> <span data-ttu-id="64725-189">Todavía necesita toocreate el grupo de seguridad de red y ACL reglas toodefine Hola el flujo de tráfico dentro y fuera de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="64725-189">You still need toocreate your Network Security Group and ACL rules toodefine hello flow of traffic in and out of your VM.</span></span> <span data-ttu-id="64725-190">Hello las reglas NAT de equilibrador de carga son simplemente toodefine los puertos que se permiten a través del equilibrador de carga de Hola y cómo obtener distribuyen a través de back-end de hello las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="64725-190">hello load balancer NAT rules are simply toodefine what ports are allowed through hello load balancer and how they get distributed across hello backend VMs.</span></span> <span data-ttu-id="64725-191">Por lo tanto, necesitará toocreate una regla NAT para tráfico tooflow a través del equilibrador de carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="64725-191">As such, you need toocreate a NAT rule for traffic tooflow through hello load balancer.</span></span> <span data-ttu-id="64725-192">tooallow Hola tráfico tooreach Hola VM, cree una regla de ACL de grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="64725-192">tooallow hello traffic tooreach hello VM, create a Network Security Group ACL rule.</span></span>

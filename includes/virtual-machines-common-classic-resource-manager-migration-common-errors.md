# <a name="common-errors-during-classic-tooazure-resource-manager-migration"></a><span data-ttu-id="dc2c3-101">Errores comunes durante clásico tooAzure migración del Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="dc2c3-101">Common errors during Classic tooAzure Resource Manager migration</span></span>
<span data-ttu-id="dc2c3-102">Los catálogos de este artículo Hola más comunes de los errores y las mitigaciones durante la migración de Hola de recursos de IaaS de pila de Azure Resource Manager de toohello de modelo de implementación clásico de Azure.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-102">This article catalogs hello most common errors and mitigations during hello migration of IaaS resources from Azure classic deployment model toohello Azure Resource Manager stack.</span></span>

## <a name="list-of-errors"></a><span data-ttu-id="dc2c3-103">Lista de errores</span><span class="sxs-lookup"><span data-stu-id="dc2c3-103">List of errors</span></span>
| <span data-ttu-id="dc2c3-104">Cadena de error</span><span class="sxs-lookup"><span data-stu-id="dc2c3-104">Error string</span></span> | <span data-ttu-id="dc2c3-105">Mitigación</span><span class="sxs-lookup"><span data-stu-id="dc2c3-105">Mitigation</span></span> |
| --- | --- |
| <span data-ttu-id="dc2c3-106">Error interno del servidor</span><span class="sxs-lookup"><span data-stu-id="dc2c3-106">Internal server error</span></span> |<span data-ttu-id="dc2c3-107">En algunos casos, se trata de un error transitorio que desaparece con un reintento.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-107">In some cases, this is a transient error that goes away with a retry.</span></span> <span data-ttu-id="dc2c3-108">Si continúa toopersist, [póngase en contacto con soporte técnico de Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) como sea necesario, investigación de registros de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-108">If it continues toopersist, [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) as it needs investigation of platform logs.</span></span> <br><br> <span data-ttu-id="dc2c3-109">**Nota:** una vez que se realiza un seguimiento de equipo de soporte técnico de Hola de incidente de hello, no intente cualquier reducción automática que esto podría tener consecuencias no deseadas en su entorno.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-109">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="dc2c3-110">No se admite la migración para la implementación {nombre de implementación} en HostedService {nombre del servicio hospedado} porque es una implementación PaaS (web/trabajo).</span><span class="sxs-lookup"><span data-stu-id="dc2c3-110">Migration is not supported for Deployment {deployment-name}  in HostedService {hosted-service-name} because it is a PaaS deployment (Web/Worker).</span></span> |<span data-ttu-id="dc2c3-111">Esto sucede cuando una implementación contiene un rol web o de trabajo.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-111">This happens when a deployment contains a web/worker role.</span></span> <span data-ttu-id="dc2c3-112">Dado que solo se admite la migración de máquinas virtuales, quite consolidado Hola de implementación de Hola y reintente la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-112">Since migration is only supported for Virtual Machines, please remove hello web/worker role from hello deployment and try migration again.</span></span> |
| <span data-ttu-id="dc2c3-113">Error de implementación de plantilla {nombre de plantilla}.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-113">Template {template-name} deployment failed.</span></span> <span data-ttu-id="dc2c3-114">CorrelationId={guid}</span><span class="sxs-lookup"><span data-stu-id="dc2c3-114">CorrelationId={guid}</span></span> |<span data-ttu-id="dc2c3-115">En hello back-end del servicio de migración, se usan recursos de Azure Resource Manager plantillas toocreate en pila de hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-115">In hello backend of migration service, we use Azure Resource Manager templates toocreate resources in hello Azure Resource Manager stack.</span></span> <span data-ttu-id="dc2c3-116">Puesto que las plantillas son idempotentes, normalmente sin ningún riesgo puede reintentar hello tooget de operación de migración más allá de este error.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-116">Since templates are idempotent, usually you can safely retry hello migration operation tooget past this error.</span></span> <span data-ttu-id="dc2c3-117">Si este error persiste toopersist, inicie [póngase en contacto con soporte técnico de Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) y asígneles Hola CorrelationId.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-117">If this error continues toopersist, please [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) and give them hello CorrelationId.</span></span> <br><br> <span data-ttu-id="dc2c3-118">**Nota:** una vez que se realiza un seguimiento de equipo de soporte técnico de Hola de incidente de hello, no intente cualquier reducción automática que esto podría tener consecuencias no deseadas en su entorno.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-118">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="dc2c3-119">red virtual de Hola {que virtual-network-name} no existe.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-119">hello virtual network {virtual-network-name} does not exist.</span></span> |<span data-ttu-id="dc2c3-120">Esto puede ocurrir si ha creado Hola red Virtual en el nuevo portal de Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-120">This can happen if you created hello Virtual Network in hello new Azure portal.</span></span> <span data-ttu-id="dc2c3-121">nombre de red Virtual real Hola sigue el patrón de Hola "grupo * <VNET name>"</span><span class="sxs-lookup"><span data-stu-id="dc2c3-121">hello actual Virtual Network name follows hello pattern "Group * <VNET name>"</span></span> |
| <span data-ttu-id="dc2c3-122">La máquina virtual {nombre de la máquina virtual} de HostedService {nombre del servicio hospedado} contiene la extensión {nombre de la extensión} que no se admite en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-122">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} which is not supported in Azure Resource Manager.</span></span> <span data-ttu-id="dc2c3-123">Se recomienda toouninstall desde Hola VM antes de continuar con la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-123">It is recommended toouninstall it from hello VM before continuing with migration.</span></span> |<span data-ttu-id="dc2c3-124">Las extensiones XML como BGInfo 1.* no se admiten en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-124">XML extensions such as BGInfo 1.* are not supported in Azure Resource Manager.</span></span> <span data-ttu-id="dc2c3-125">Por lo tanto, no se pueden migrar estas extensiones.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-125">Therefore, these extensions cannot be migrated.</span></span> <span data-ttu-id="dc2c3-126">Si estas extensiones son izquierdo Hola instalados en virtual machine, se desinstalan automáticamente antes de completar la migración de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-126">If these extensions are left installed on hello virtual machine, they are automatically uninstalled before completing hello migration.</span></span> |
| <span data-ttu-id="dc2c3-127">La máquina virtual {nombre de la máquina virtual} de HostedService {nombre del servicio hospedado} contiene la extensión VMSnapshot/VMSnapshotLinux que actualmente no se admite para migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-127">VM {vm-name} in HostedService {hosted-service-name} contains Extension VMSnapshot/VMSnapshotLinux, which is currently not supported for Migration.</span></span> <span data-ttu-id="dc2c3-128">Desinstale de hello VM y agregarlo de nuevo mediante Azure Resource Manager después de completar Hola migración</span><span class="sxs-lookup"><span data-stu-id="dc2c3-128">Uninstall it from hello VM and add it back using Azure Resource Manager after hello Migration is Complete</span></span> |<span data-ttu-id="dc2c3-129">Se trata de un escenario de Hola donde se configura la máquina virtual de Hola para copia de seguridad de Azure.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-129">This is hello scenario where hello virtual machine is configured for Azure Backup.</span></span> <span data-ttu-id="dc2c3-130">Puesto que es actualmente un escenario no compatible, siga solución hello en https://aka.ms/vmbackupmigration</span><span class="sxs-lookup"><span data-stu-id="dc2c3-130">Since this is currently an unsupported scenario, please follow hello workaround at https://aka.ms/vmbackupmigration</span></span> |
| <span data-ttu-id="dc2c3-131">Máquina virtual {vm-name} en HostedService {hospedado-service-name} contiene extensión {nombre de extensión} cuyo estado no se está informando de hello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-131">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} whose Status is not being reported from hello VM.</span></span> <span data-ttu-id="dc2c3-132">Por lo tanto, esta máquina virtual no se puede migrar.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-132">Hence, this VM cannot be migrated.</span></span> <span data-ttu-id="dc2c3-133">Asegúrese de que se está notificando que el estado de extensión de Hola o desinstalación Hola de hello VM y vuelva a intentar la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-133">Ensure that hello Extension status is being reported or uninstall hello extension from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="dc2c3-134">La máquina virtual {nombre de la máquina virtual} en HostedService {nombre del servicio hospedado} contiene la extensión {nombre de la extensión} que notifica el estado del controlador: {estado del controlador}.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-134">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} reporting Handler Status: {handler-status}.</span></span> <span data-ttu-id="dc2c3-135">Por lo tanto, no se pueden migrar Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-135">Hence, hello VM cannot be migrated.</span></span> <span data-ttu-id="dc2c3-136">Asegúrese de que se notifica el estado de controlador de extensión de hello es {estado del controlador} o desinstalarlo de hello VM y vuelva a intentar la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-136">Ensure that hello Extension handler status being reported is {handler-status} or uninstall it from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="dc2c3-137">Agente de máquina virtual para la máquina virtual {vm-name} en HostedService {hospedado-service-name} está informando Hola estado general del agente como no preparada.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-137">VM Agent for VM {vm-name} in HostedService {hosted-service-name} is reporting hello overall agent status as Not Ready.</span></span> <span data-ttu-id="dc2c3-138">Por lo tanto, Hola VM puede no se migran, si tiene una extensión de migrable.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-138">Hence, hello VM may not be migrated, if it has a migratable extension.</span></span> <span data-ttu-id="dc2c3-139">Asegúrese de que ese agente de máquina virtual de hello es informar del estado de agente global como listo.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-139">Ensure that hello VM Agent is reporting overall agent status as Ready.</span></span> <span data-ttu-id="dc2c3-140">Consulte toohttps://aka.ms/classiciaasmigrationfaqs.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-140">Refer toohttps://aka.ms/classiciaasmigrationfaqs.</span></span> |<span data-ttu-id="dc2c3-141">Agente de invitado de Azure & extensiones de máquina virtual necesitan saliente internet access toohello VM almacenamiento cuenta toopopulate su estado.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-141">Azure guest agent & VM Extensions need outbound internet access toohello VM storage account toopopulate their status.</span></span> <span data-ttu-id="dc2c3-142">Entre las causas comunes del error de estado se incluyen:</span><span class="sxs-lookup"><span data-stu-id="dc2c3-142">Common causes of status failure include</span></span> <li> <span data-ttu-id="dc2c3-143">un grupo de seguridad que bloquea el acceso de salida toohello internet</span><span class="sxs-lookup"><span data-stu-id="dc2c3-143">a Network Security Group that blocks outbound access toohello internet</span></span> <li> <span data-ttu-id="dc2c3-144">Si Hola red virtual tiene servidores DNS local y se pierde la conectividad DNS</span><span class="sxs-lookup"><span data-stu-id="dc2c3-144">If hello VNET has on-prem DNS servers and DNS connectivity is lost</span></span> <br><br> <span data-ttu-id="dc2c3-145">Si continúa toosee un estado no compatible, puede desinstalar Hola extensiones tooskip esta comprobación y continuar con la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-145">If you continue toosee an unsupported status, you can uninstall hello extensions tooskip this check and move forward with migration.</span></span> |
| <span data-ttu-id="dc2c3-146">No se admite la migración para la implementación {nombre de implementación} en HostedService {nombre del servicio hospedado} porque tiene varios conjuntos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-146">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name} because it has multiple Availability Sets.</span></span> |<span data-ttu-id="dc2c3-147">Actualmente, solo se pueden migrar los servicios hospedados que tengan como mucho un conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-147">Currently, only hosted services that have 1 or less Availability sets can be migrated.</span></span> <span data-ttu-id="dc2c3-148">toowork resolver este problema, mueva Hola adicional conjuntos de disponibilidad y servicio hospedado en máquinas virtuales en esas tooa de conjuntos de disponibilidad diferente.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-148">toowork around this problem, please move hello additional Availability sets and Virtual machines in those Availability sets tooa different hosted service.</span></span> |
| <span data-ttu-id="dc2c3-149">No se admite la migración para la implementación {deployment-name} en HostedService {hospedado-service-name porque tiene máquinas virtuales que no forman parte del conjunto de disponibilidad de hello aunque hello HostedService contiene uno.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-149">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name because it has VMs that are not part of hello Availability Set even though hello HostedService contains one.</span></span> |<span data-ttu-id="dc2c3-150">solución de Hola para este escenario es tooeither mover todas las máquinas virtuales de hello en la disponibilidad de una sola establecer o quitar todas las máquinas virtuales de hello que conjunto de disponibilidad en el servicio de hello hospedado.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-150">hello workaround for this scenario is tooeither move all hello virtual machines into a single Availability set or remove all Virtual machines from hello Availability set in hello hosted service.</span></span> |
| <span data-ttu-id="dc2c3-151">Cuenta de almacenamiento/HostedService/Virtual red {que virtual-network-name} está en proceso de Hola de migrarse y por lo tanto, no se puede cambiar</span><span class="sxs-lookup"><span data-stu-id="dc2c3-151">Storage account/HostedService/Virtual Network {virtual-network-name} is in hello process of being migrated and hence cannot be changed</span></span> |<span data-ttu-id="dc2c3-152">Este error se produce cuando Hola "Preparación" la operación de migración se ha completado en el recurso de Hola y se desencadena una operación que podría hacer que un recurso de toohello de cambio.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-152">This error happens when hello "Prepare" migration operation has been completed on hello resource and an operation that would make a change toohello resource is triggered.</span></span> <span data-ttu-id="dc2c3-153">Debido a bloqueo de hello en el plano de la administración de hello después de la operación de "Preparación", se bloquean los recursos de toohello de cambios.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-153">Because of hello lock on hello management plane after "Prepare" operation, any changes toohello resource are blocked.</span></span> <span data-ttu-id="dc2c3-154">plano de administración de hello toounlock, puede ejecutar Hola "Confirmar" operación toocomplete migración u Hola "Anular" migración operación tooroll volver Hola operación de "Preparación".</span><span class="sxs-lookup"><span data-stu-id="dc2c3-154">toounlock hello management plane, you can run hello "Commit" migration operation toocomplete migration or hello "Abort" migration operation tooroll back hello "Prepare" operation.</span></span> |
| <span data-ttu-id="dc2c3-155">No se permite la migración para HostedService {nombre del servicio hospedado} porque tiene una máquina virtual {nombre de la máquina virtual} en estado: RoleStateUnknown.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-155">Migration is not allowed for HostedService {hosted-service-name} because it has VM {vm-name} in State: RoleStateUnknown.</span></span> <span data-ttu-id="dc2c3-156">Se permite la migración solo al Hola máquina virtual está en uno de los siguientes Hola Estados - ejecución, detenido, se cancela la asignación de detenido.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-156">Migration is allowed only when hello VM is in one of hello following states - Running, Stopped, Stopped Deallocated.</span></span> |<span data-ttu-id="dc2c3-157">Hello VM posible que se está llevando a cabo a través de una transición de estado, que normalmente se produce cuando durante una operación de actualización en hello servicio hospedado, como reiniciar el equipo, instalar la extensión etcetera. Se recomienda para toocomplete de operación de actualización de hello en hello HostedService antes de intentar la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-157">hello VM might be undergoing through a state transition, which usually happens when during an update operation on hello HostedService such as a reboot, extension installation etc. It is recommended for hello update operation toocomplete on hello HostedService before trying migration.</span></span> |
| <span data-ttu-id="dc2c3-158">Implementación {deployment-name} en {hospedado-service-name} HostedService contiene una máquina virtual {vm-name} con el disco de datos {nombre de disco de datos} cuyos bytes de tamaño {size-of-the-vhd-blob-backing-the-data-disk} del blob físico no coincide con {de tamaño lógico de disco de datos de la máquina virtual de Hola bytes Size-of-the-Data-Disk-Specified-in-the-VM-API}.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-158">Deployment {deployment-name} in HostedService {hosted-service-name} contains a VM {vm-name} with Data Disk {data-disk-name} whose physical blob size {size-of-the-vhd-blob-backing-the-data-disk} bytes does not match hello VM Data Disk logical size {size-of-the-data-disk-specified-in-the-vm-api} bytes.</span></span> <span data-ttu-id="dc2c3-159">Migración continuará sin especificar un tamaño de disco de datos de Hola para hello VM de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-159">Migration will proceed without specifying a size for hello data disk for hello Azure Resource Manager VM.</span></span> | <span data-ttu-id="dc2c3-160">Este error se produce si ha cambiado el tamaño del blob de disco duro virtual de hello sin actualizar el tamaño de hello en el modelo de la API de VM de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-160">This error happens if you've resized hello VHD blob without updating hello size in hello VM API model.</span></span> <span data-ttu-id="dc2c3-161">[A continuación](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes), se describen los pasos de mitigación detallados.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-161">Detailed mitigation steps are outlined [below](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span></span>|
| <span data-ttu-id="dc2c3-162">Se produjo una excepción de almacenamiento durante la validación de datos de un disco {nombre de disco de datos} con el vínculo multimedia {URI de disco de datos} para la máquina virtual {nombre de máquina virtual} en el servicio en la nube {nombre del servicio en la nube}.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-162">A storage exception occurred while validating data disk {data disk name} with media link {data disk Uri} for VM {VM name} in Cloud Service {Cloud Service name}.</span></span> <span data-ttu-id="dc2c3-163">Asegúrese de que ese vínculo de medios de disco duro virtual de hello es accesible para esta máquina virtual</span><span class="sxs-lookup"><span data-stu-id="dc2c3-163">Please ensure that hello VHD media link is accessible for this virtual machine</span></span> | <span data-ttu-id="dc2c3-164">Este error puede ocurrir si los discos de Hola de hello VM que se haya eliminado o ya no es accesible.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-164">This error can happen if hello disks of hello VM have been deleted or are not accessible anymore.</span></span> <span data-ttu-id="dc2c3-165">Asegúrese de seguro discos Hola Hola existe la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-165">Please make sure hello disks for hello VM exist.</span></span>|
| <span data-ttu-id="dc2c3-166">La máquina virtual {vm-name} de HostedService {cloud-service-name} contiene un disco con MediaLink {vhd-uri} que tiene un nombre de blob {vhd-blob-name} que no se admite en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-166">VM {vm-name} in HostedService {cloud-service-name} contains Disk with MediaLink {vhd-uri} which has blob name {vhd-blob-name}  that is not supported in Azure Resource Manager.</span></span> | <span data-ttu-id="dc2c3-167">Este error se produce cuando el nombre hello de blob de hello tiene un "/" en lo que no se admite actualmente en el proveedor de recursos de proceso.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-167">This error occurs when hello name of hello blob has a "/" in it which is not supported in Compute Resource Provider currently.</span></span> |
| <span data-ttu-id="dc2c3-168">No se permite la migración para la implementación {deployment-name} en HostedService {cloud-service-name} porque no está en ámbito regional Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-168">Migration is not allowed for Deployment {deployment-name} in HostedService {cloud-service-name} as it is not in hello regional scope.</span></span> <span data-ttu-id="dc2c3-169">Consulte toohttp://aka.ms/regionalscope para mover este ámbito de tooregional de implementación.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-169">Please refer toohttp://aka.ms/regionalscope for moving this deployment tooregional scope.</span></span> | <span data-ttu-id="dc2c3-170">En 2014, Azure anunció que se moverán el recursos de red de un ámbito de tooregional de ámbito de nivel de clúster.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-170">In 2014, Azure announced that networking resources will move from a cluster level scope tooregional scope.</span></span> <span data-ttu-id="dc2c3-171">Vea [http://aka.ms/regionalscope] para obtener más detalles (http://aka.ms/regionalscope).</span><span class="sxs-lookup"><span data-stu-id="dc2c3-171">See [http://aka.ms/regionalscope] for more details (http://aka.ms/regionalscope).</span></span> <span data-ttu-id="dc2c3-172">Este error se produce cuando la implementación de Hola que se está migrando no se ha realizado una operación de actualización, que automáticamente lo mueve tooa de ámbito regional.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-172">This error happens when hello deployment being migrated has not had an update operation, which automatically moves it tooa regional scope.</span></span> <span data-ttu-id="dc2c3-173">Solución recomendada es tooeither agregar una máquina virtual de punto de conexión tooa o datos toohello VM de disco y, a continuación, vuelva a intentar la migración.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-173">Best workaround is tooeither add an endpoint tooa VM or a data disk toohello VM and then retry migration.</span></span> <br> <span data-ttu-id="dc2c3-174">Vea [cómo tooset extremos en una máquina virtual de Windows clásica en Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) o [conectar una máquina de virtual datos disco tooa Windows creada con el modelo de implementación clásica de Hola](../articles/virtual-machines/windows/classic/attach-disk.md)</span><span class="sxs-lookup"><span data-stu-id="dc2c3-174">See [How tooset up endpoints on a classic Windows virtual machine in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) or [Attach a data disk tooa Windows virtual machine created with hello classic deployment model](../articles/virtual-machines/windows/classic/attach-disk.md)</span></span>|


## <a name="detailed-mitigations"></a><span data-ttu-id="dc2c3-175">Mitigaciones detalladas</span><span class="sxs-lookup"><span data-stu-id="dc2c3-175">Detailed mitigations</span></span>

### <a name="vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-hello-vm-data-disk-logical-size-bytes"></a><span data-ttu-id="dc2c3-176">Máquina virtual con el disco de datos cuyo física blob de bytes de tamaño no coincide con los bytes de tamaño lógico de disco de datos de la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-176">VM with Data Disk whose physical blob size bytes does not match hello VM Data Disk logical size bytes.</span></span>

<span data-ttu-id="dc2c3-177">Esto sucede cuando hello tamaño lógico de disco de datos puede dejan de estar sincronizado con el tamaño del blob de disco duro virtual real de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-177">This happens when hello Data disk logical size can get out of sync with hello actual VHD blob size.</span></span> <span data-ttu-id="dc2c3-178">Esto puede comprobar fácilmente por mediante Hola siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="dc2c3-178">This can be easily verified using hello following commands:</span></span>

#### <a name="verifying-hello-issue"></a><span data-ttu-id="dc2c3-179">Comprobar el problema de Hola</span><span class="sxs-lookup"><span data-stu-id="dc2c3-179">Verifying hello issue</span></span>

```PowerShell
# Store hello VM details in hello VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

# Display hello data disk properties
# NOTE hello data disk LogicalDiskSizeInGB below which is 11GB. Also note hello MediaLink Uri of hello VHD blob as we'll use this in hello next step
$vm.VM.DataVirtualHardDisks


HostCaching         : None
DiskLabel           : 
DiskName            : coreosvm-coreosvm-0-201611230636240687
Lun                 : 0
LogicalDiskSizeInGB : 11
MediaLink           : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
SourceMediaLink     : 
IOType              : Standard
ExtensionData       : 

# Now get hello properties of hello blob backing hello data disk above
# NOTE hello size of hello blob is about 15 GB which is different from LogicalDiskSizeInGB above
$blob = Get-AzureStorageblob -Blob "coreosvm-dd1.vhd" -Container vhds 

$blob

ICloudBlob        : Microsoft.WindowsAzure.Storage.Blob.CloudPageBlob
BlobType          : PageBlob
Length            : 16106127872
ContentType       : application/octet-stream
LastModified      : 11/23/2016 7:16:22 AM +00:00
SnapshotTime      : 
ContinuationToken : 
Context           : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name              : coreosvm-dd1.vhd
```

#### <a name="mitigating-hello-issue"></a><span data-ttu-id="dc2c3-180">Mitigar el problema de Hola</span><span class="sxs-lookup"><span data-stu-id="dc2c3-180">Mitigating hello issue</span></span>

```PowerShell
# Convert hello blob size in bytes tooGB into a variable which we'll use later
$newSize = [int]($blob.Length / 1GB)

# See hello calculated size in GB
$newSize

15

# Store hello disk name of hello data disk as we'll use this tooidentify hello disk toobe updated
$diskName = $vm.VM.DataVirtualHardDisks[0].DiskName

# Identify hello LUN of hello data disk tooremove
$lunToRemove = $vm.VM.DataVirtualHardDisks[0].Lun

# Now remove hello data disk from hello VM so that hello disk isn't leased by hello VM and it's size can be updated
Remove-AzureDataDisk -LUN $lunToRemove -VM $vm | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       213xx1-b44b-1v6n-23gg-591f2a13cd16   Succeeded  

# Verify we have hello right disk that's going toobe updated
Get-AzureDisk -DiskName $diskName

AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : 
Location             : East US
DiskSizeInGB         : 11
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 0c56a2b7-a325-123b-7043-74c27d5a61fd
OperationStatus      : Succeeded

# Now update hello disk toohello new size
Update-AzureDisk -DiskName $diskName -ResizedSizeInGB $newSize -Label $diskName

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureDisk     cv134b65-1b6n-8908-abuo-ce9e395ac3e7 Succeeded 

# Now verify that hello "DiskSizeInGB" property of hello disk matches hello size of hello blob 
Get-AzureDisk -DiskName $diskName


AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : coreosvm-coreosvm-0-201611230636240687
Location             : East US
DiskSizeInGB         : 15
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 1v53bde5-cv56-5621-9078-16b9c8a0bad2
OperationStatus      : Succeeded

# Now we'll add hello disk back toohello VM as a data disk. First we need tooget an updated VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

Add-AzureDataDisk -Import -DiskName $diskName -LUN 0 -VM $vm -HostCaching ReadWrite | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       b0ad3d4c-4v68-45vb-xxc1-134fd010d0f8 Succeeded      
```

### <a name="moving-a-vm-tooa-different-subscription-after-completing-migration"></a><span data-ttu-id="dc2c3-181">Mover VM tooa otra suscripción después de completar la migración</span><span class="sxs-lookup"><span data-stu-id="dc2c3-181">Moving a VM tooa different subscription after completing migration</span></span>

<span data-ttu-id="dc2c3-182">Después de completar el proceso de migración de hello, puede que desee suscripción tooanother de toomove Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-182">After you complete hello migration process, you may want toomove hello VM tooanother subscription.</span></span> <span data-ttu-id="dc2c3-183">Sin embargo, si tiene un certificado de secreto en hello mover la máquina virtual que se hace referencia a un recurso de almacén de claves, hello actualmente no se admite.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-183">However, if you have a secret/certificate on hello VM that references a Key Vault resource, hello move is currently not supported.</span></span> <span data-ttu-id="dc2c3-184">Hola instrucciones a continuación le permitirá problema de hello tooworkaround.</span><span class="sxs-lookup"><span data-stu-id="dc2c3-184">hello below instructions will allow you tooworkaround hello issue.</span></span> 

#### <a name="powershell"></a><span data-ttu-id="dc2c3-185">PowerShell</span><span class="sxs-lookup"><span data-stu-id="dc2c3-185">PowerShell</span></span>
```powershell
$vm = Get-AzureRmVM -ResourceGroupName "MyRG" -Name "MyVM"
Remove-AzureRmVMSecret -VM $vm
Update-AzureRmVM -ResourceGroupName "MyRG" -VM $vm
```
#### <a name="azure-cli-20"></a><span data-ttu-id="dc2c3-186">CLI de Azure 2.0</span><span class="sxs-lookup"><span data-stu-id="dc2c3-186">Azure CLI 2.0</span></span>

```bash
az vm update -g "myrg" -n "myvm" --set osProfile.Secrets=[]
```

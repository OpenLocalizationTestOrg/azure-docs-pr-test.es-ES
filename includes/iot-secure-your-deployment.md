# <a name="secure-your-iot-deployment"></a><span data-ttu-id="b9041-101">Proteger su implementación de IoT</span><span class="sxs-lookup"><span data-stu-id="b9041-101">Secure your IoT deployment</span></span>
<span data-ttu-id="b9041-102">Este artículo ofrece Hola siguiente nivel de detalle para proteger la infraestructura de hello basado en Azure IoT Internet de las cosas (IoT).</span><span class="sxs-lookup"><span data-stu-id="b9041-102">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="b9041-103">Incluye vínculos a los detalles de nivel de tooimplementation para configurar e implementar cada componente.</span><span class="sxs-lookup"><span data-stu-id="b9041-103">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="b9041-104">También se proporcionan comparaciones y opciones entre diversos métodos que compiten entre sí.</span><span class="sxs-lookup"><span data-stu-id="b9041-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="b9041-105">Protección de la implementación de Azure IoT Hola puede dividirse en hello siguientes tres áreas de seguridad:</span><span class="sxs-lookup"><span data-stu-id="b9041-105">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="b9041-106">**Seguridad de los dispositivos**: protección de dispositivos de IoT de hello mientras se implementa en hello comodín.</span><span class="sxs-lookup"><span data-stu-id="b9041-106">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="b9041-107">**Seguridad de conexión**: asegurarse de todos los datos transmitidos entre dispositivos de IoT de Hola y centro de IoT es confidencial y prueba de manipulaciones.</span><span class="sxs-lookup"><span data-stu-id="b9041-107">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="b9041-108">**Seguridad en la nube**: proporcionando un medio toosecure datos mientras se mueve a través de y se almacena en la nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-108">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Tres áreas de seguridad][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="b9041-110">Seguridad en el aprovisionamiento y la autenticación de dispositivos</span><span class="sxs-lookup"><span data-stu-id="b9041-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="b9041-111">Hello Azure IoT Suite protege los dispositivos de IoT por hello siguiendo dos métodos:</span><span class="sxs-lookup"><span data-stu-id="b9041-111">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="b9041-112">Al proporcionar una clave de identidad única (tokens de seguridad) para cada dispositivo, lo que puede usarse en hello dispositivo toocommunicate con hello centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-112">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="b9041-113">Mediante el uso de un dispositivo [certificado X.509] [ lnk-x509] y la clave privada como una toohello de dispositivo de medios tooauthenticate Hola centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="b9041-114">Este método de autenticación garantiza que Hola clave privada en el dispositivo de Hola se desconoce fuera de dispositivo de Hola en cualquier momento, proporcionar un mayor nivel de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9041-114">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="b9041-115">método de token de seguridad de Hello proporciona autenticación para las llamadas realizadas por hello dispositivo tooIoT concentrador mediante la asociación de llamada de hello tooeach clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="b9041-115">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="b9041-116">Autenticación basada en X.509 permite la autenticación de un dispositivo de IoT en nivel físico de hello como parte del establecimiento de la conexión TLS Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-116">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="b9041-117">método basado en tokens de seguridad de Hola se puede utilizar sin autenticación de X.509 Hola que es un patrón de menos seguro.</span><span class="sxs-lookup"><span data-stu-id="b9041-117">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="b9041-118">Hello elegir entre métodos de hello dos es principalmente dictado por Hola de forma segura la autenticación de dispositivo debe toobe y la disponibilidad de almacenamiento seguro en el dispositivo de Hola (toostore Hola clave privada segura).</span><span class="sxs-lookup"><span data-stu-id="b9041-118">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="b9041-119">Tokens de seguridad del Centro de IoT</span><span class="sxs-lookup"><span data-stu-id="b9041-119">IoT Hub security tokens</span></span>
<span data-ttu-id="b9041-120">Centro de IoT usa seguridad tokens tooauthenticate dispositivos y servicios tooavoid envío de claves de red de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-120">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="b9041-121">Además, los tokens de seguridad están limitados en cuanto al ámbito y el período de validez.</span><span class="sxs-lookup"><span data-stu-id="b9041-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="b9041-122">Los SDK de IoT de Azure generan automáticamente tokens sin necesidad de ninguna configuración especial.</span><span class="sxs-lookup"><span data-stu-id="b9041-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="b9041-123">Sin embargo, algunos escenarios, requieren Hola usuario toogenerate y utilizar directamente los tokens de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9041-123">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="b9041-124">Puede tratarse uso directo de Hola de superficies de hello MQTT, AMQP o HTTP o implementación de hello del modelo de servicio de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-124">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="b9041-125">Obtener más detalles sobre la estructura de Hola de token de seguridad de Hola y su uso pueden encontrarse en hello siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="b9041-125">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="b9041-126">[Estructura del token de seguridad][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="b9041-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="b9041-127">[Uso de tokens de SAS como dispositivo][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="b9041-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="b9041-128">Cada centro de IoT tiene un [del registro de identidad] [ lnk-identity-registry] que puede ser toocreate usado por dispositivo recursos en el servicio de hello, por ejemplo, una cola que contiene mensajes de nube al dispositivo en curso y tooallow acceso toohello puntos de conexión de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9041-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="b9041-129">Hola del registro de identidad de centro de IoT proporciona un almacenamiento seguro de identidades de dispositivos y las claves de seguridad para una solución.</span><span class="sxs-lookup"><span data-stu-id="b9041-129">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="b9041-130">Pueden agregarse individuales o grupos de identidades de dispositivos tooan Permitir lista o una lista de bloqueo, lo que permite un control completo sobre el acceso a los dispositivos.</span><span class="sxs-lookup"><span data-stu-id="b9041-130">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="b9041-131">Hello artículos siguientes proporcionan más detalles en la estructura de Hola de registro de la identidad de Hola y operaciones admitidas.</span><span class="sxs-lookup"><span data-stu-id="b9041-131">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="b9041-132">[IoT Hub admite protocolos como MQTT, AMQP y HTTP][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="b9041-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="b9041-133">Cada uno de estos protocolos utilizan tokens de seguridad de hello IoT dispositivo tooIoT concentrador de forma diferente:</span><span class="sxs-lookup"><span data-stu-id="b9041-133">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="b9041-134">AMQP: Seguridad de sin formato y basada en AMQP notificaciones SASL ({policyName}@sas.root. {} iothubName} en caso de hello de tokens de nivel del centro de IoT; {deviceId} en el caso de tokens centrada en el dispositivo).</span><span class="sxs-lookup"><span data-stu-id="b9041-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="b9041-135">MQTT: Conectar utiliza paquetes {deviceId} como Hola {ClientId}, {IoThubhostname} / {deviceId} en hello **nombre de usuario** campo y una SAS de token en hello **contraseña** campo.</span><span class="sxs-lookup"><span data-stu-id="b9041-135">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="b9041-136">HTTP: Símbolo (token) válido es en el encabezado de solicitud de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-136">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="b9041-137">Registro de la identidad de centro de IoT puede credenciales de seguridad de tooconfigure usado por el dispositivo y el control de acceso.</span><span class="sxs-lookup"><span data-stu-id="b9041-137">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="b9041-138">Sin embargo, si una solución de IoT ya realizó una inversión importante en un [Registro de identidad del dispositivo o un esquema de autenticación personalizados][lnk-custom-auth], se puede integrar en una infraestructura existente con IoT Hub mediante la creación de un servicio de token.</span><span class="sxs-lookup"><span data-stu-id="b9041-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="b9041-139">Autenticación de dispositivos basada en certificados X.509</span><span class="sxs-lookup"><span data-stu-id="b9041-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="b9041-140">Hola de uso de un [basado en dispositivos certificado X.509] [ lnk-use-x509] y su par de claves pública y privada asociado permite autenticación adicional en el nivel físico Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-140">hello use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="b9041-141">clave privada de Hola se almacena de forma segura en el dispositivo de hello y no es reconocible fuera Hola dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9041-141">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="b9041-142">certificado X.509 de Hello contiene información acerca del dispositivo de hello, como Id. de dispositivo y otros detalles de la organización.</span><span class="sxs-lookup"><span data-stu-id="b9041-142">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="b9041-143">Una firma de certificado de Hola se genera mediante la clave privada de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-143">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="b9041-144">Flujo de aprovisionamiento de dispositivos de alto nivel:</span><span class="sxs-lookup"><span data-stu-id="b9041-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="b9041-145">Asociar un identificador tooa dispositivo físico: identidad del dispositivo o dispositivos de toohello asociados de certificado X.509 durante dispositivos de fabricación o puesta en servicio.</span><span class="sxs-lookup"><span data-stu-id="b9041-145">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="b9041-146">Crear una entrada de identidad correspondiente en el centro de IoT: identidad del dispositivo y la información de dispositivo asociado en hello del registro de identidad de centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="b9041-147">Almacenar la huella digital del certificado X.509 de forma segura en el Registro de identidad de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b9041-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="b9041-148">Certificado raíz en el dispositivo</span><span class="sxs-lookup"><span data-stu-id="b9041-148">Root certificate on device</span></span>
<span data-ttu-id="b9041-149">Al establecer una conexión segura de TLS con el centro de IoT, dispositivos de IoT Hola autentica utilizando un certificado raíz que forma parte del SDK de dispositivos de Hola de centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-149">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="b9041-150">Para SDK de cliente de hello C certificado Hola se encuentra en la carpeta de Hola "\\c\\certificados" bajo raíz de hello del repositorio de Hola.</span><span class="sxs-lookup"><span data-stu-id="b9041-150">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="b9041-151">A pesar de que estos certificados raíz son de larga duración, puede caducar o revocarse.</span><span class="sxs-lookup"><span data-stu-id="b9041-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="b9041-152">Si no hay ninguna manera de actualizar certificado de hello en dispositivo hello, hello dispositivo no podrá conectarse toosubsequently toohello centro de IoT (o cualquier otro servicio de nube).</span><span class="sxs-lookup"><span data-stu-id="b9041-152">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="b9041-153">Tener un certificado de raíz de medios tooupdate Hola una vez implementado dispositivos de IoT Hola mitigará eficazmente este riesgo.</span><span class="sxs-lookup"><span data-stu-id="b9041-153">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="b9041-154">Proteger conexión Hola</span><span class="sxs-lookup"><span data-stu-id="b9041-154">Securing hello connection</span></span>
<span data-ttu-id="b9041-155">Conexión a Internet entre dispositivos de IoT de Hola y centro de IoT se protege utilizando Hola estándar de seguridad de capa de transporte (TLS).</span><span class="sxs-lookup"><span data-stu-id="b9041-155">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="b9041-156">IoT de Azure admite [TLS 1.2][lnk-tls12], TLS 1.1 y TLS 1.0, en este orden.</span><span class="sxs-lookup"><span data-stu-id="b9041-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="b9041-157">La compatibilidad con TLS 1.0 solo se proporciona para permitir versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="b9041-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="b9041-158">Se recomienda toouse TLS 1.2, puesto que ofrece Hola seguridad mayoría.</span><span class="sxs-lookup"><span data-stu-id="b9041-158">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="b9041-159">Conjunto de IoT de Azure admite Hola siguiendo conjuntos de cifrado, en este orden.</span><span class="sxs-lookup"><span data-stu-id="b9041-159">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="b9041-160">Conjunto de cifrado</span><span class="sxs-lookup"><span data-stu-id="b9041-160">Cipher Suite</span></span> | <span data-ttu-id="b9041-161">Length</span><span class="sxs-lookup"><span data-stu-id="b9041-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="b9041-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="b9041-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="b9041-163">RSA de 7680 bits) FS</span><span class="sxs-lookup"><span data-stu-id="b9041-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="b9041-164">256</span><span class="sxs-lookup"><span data-stu-id="b9041-164">256</span></span> |
| <span data-ttu-id="b9041-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="b9041-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="b9041-166">RSA de 3072 bits) FS</span><span class="sxs-lookup"><span data-stu-id="b9041-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="b9041-167">128</span><span class="sxs-lookup"><span data-stu-id="b9041-167">128</span></span> |
| <span data-ttu-id="b9041-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="b9041-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="b9041-169">RSA de 7680 bits) FS</span><span class="sxs-lookup"><span data-stu-id="b9041-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="b9041-170">256</span><span class="sxs-lookup"><span data-stu-id="b9041-170">256</span></span> |
| <span data-ttu-id="b9041-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="b9041-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="b9041-172">RSA de 3072 bits) FS</span><span class="sxs-lookup"><span data-stu-id="b9041-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="b9041-173">128</span><span class="sxs-lookup"><span data-stu-id="b9041-173">128</span></span> |
| <span data-ttu-id="b9041-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="b9041-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="b9041-175">256</span><span class="sxs-lookup"><span data-stu-id="b9041-175">256</span></span> |
| <span data-ttu-id="b9041-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="b9041-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="b9041-177">128</span><span class="sxs-lookup"><span data-stu-id="b9041-177">128</span></span> |
| <span data-ttu-id="b9041-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="b9041-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="b9041-179">256</span><span class="sxs-lookup"><span data-stu-id="b9041-179">256</span></span> |
| <span data-ttu-id="b9041-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="b9041-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="b9041-181">128</span><span class="sxs-lookup"><span data-stu-id="b9041-181">128</span></span> |
| <span data-ttu-id="b9041-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="b9041-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="b9041-183">256</span><span class="sxs-lookup"><span data-stu-id="b9041-183">256</span></span> |
| <span data-ttu-id="b9041-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="b9041-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="b9041-185">128</span><span class="sxs-lookup"><span data-stu-id="b9041-185">128</span></span> |
| <span data-ttu-id="b9041-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="b9041-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="b9041-187">112</span><span class="sxs-lookup"><span data-stu-id="b9041-187">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="b9041-188">Protección de nube de Hola</span><span class="sxs-lookup"><span data-stu-id="b9041-188">Securing hello cloud</span></span>
<span data-ttu-id="b9041-189">Azure IoT Hub permite la definición de [directivas de control de acceso][lnk-protocols] para cada clave de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9041-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="b9041-190">Usa Hola siguiendo el conjunto de permisos toogrant acceso tooeach de extremos del centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-190">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="b9041-191">Permisos limitan Hola acceso tooan que centro de IoT basado en la funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="b9041-191">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="b9041-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="b9041-192">**RegistryRead**.</span></span> <span data-ttu-id="b9041-193">Registro de identidad de toohello de concede acceso de lectura.</span><span class="sxs-lookup"><span data-stu-id="b9041-193">Grants read access toohello identity registry.</span></span> <span data-ttu-id="b9041-194">Para más información, consulte [Registro de identidad][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="b9041-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="b9041-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="b9041-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="b9041-196">Concede acceso de lectura y escritura toohello del registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="b9041-196">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="b9041-197">Para más información, consulte [Registro de identidad][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="b9041-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="b9041-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="b9041-198">**ServiceConnect**.</span></span> <span data-ttu-id="b9041-199">Concede acceso toocloud orientada a servicios comunicación y supervisión de los puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="b9041-199">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="b9041-200">Por ejemplo, concede permiso tooback-end en la nube servicios tooreceive dispositivo a la nube mensajes, enviar mensajes de la nube al dispositivo y Hola recuperar correspondientes confirmaciones de entrega.</span><span class="sxs-lookup"><span data-stu-id="b9041-200">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="b9041-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="b9041-201">**DeviceConnect**.</span></span> <span data-ttu-id="b9041-202">Concede acceso a extremos de acceso toodevice.</span><span class="sxs-lookup"><span data-stu-id="b9041-202">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="b9041-203">Por ejemplo, se concede permiso mensajes del dispositivo a la nube de toosend y recibir mensajes en la nube al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9041-203">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="b9041-204">Este permiso lo usan los dispositivos.</span><span class="sxs-lookup"><span data-stu-id="b9041-204">This permission is used by devices.</span></span>

<span data-ttu-id="b9041-205">Hay dos tooobtain formas **DeviceConnect** permisos con el centro de IoT con [tokens de seguridad][lnk-sas-tokens]: con una clave de identidad de dispositivo o una clave de acceso compartido.</span><span class="sxs-lookup"><span data-stu-id="b9041-205">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="b9041-206">Además, es importante toonote toda la funcionalidad accesible desde dispositivos expuesto por diseño en los puntos de conexión con el prefijo `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="b9041-206">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="b9041-207">[Componentes del servicio solo pueden generar tokens de seguridad] [ lnk-service-tokens] usar compartidos conceder los permisos adecuados de hello las directivas de acceso.</span><span class="sxs-lookup"><span data-stu-id="b9041-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="b9041-208">Centro de IoT de Azure y otros servicios que pueden formar parte de la solución de Hola que admita la administración de usuarios con hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9041-208">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="b9041-209">Los datos consumidos por Azure IoT Hub se pueden usar en una gran variedad de servicios, como Azure Stream Analytics, Azure Blob Storage, etc.</span><span class="sxs-lookup"><span data-stu-id="b9041-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="b9041-210">Estos servicios permiten el acceso de administración.</span><span class="sxs-lookup"><span data-stu-id="b9041-210">These services allow management access.</span></span> <span data-ttu-id="b9041-211">Lea más sobre estos servicios y las opciones disponibles a continuación:</span><span class="sxs-lookup"><span data-stu-id="b9041-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="b9041-212">[Azure DocumentDB][lnk-docdb]: un servicio de base de datos escalable e indexan completamente para datos semiestructurados que administra los metadatos para los dispositivos de hello aprovisionar, como atributos, configuración y propiedades de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9041-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="b9041-213">DocumentDB ofrece procesamiento de alto rendimiento, indexación de datos independiente del esquema y una completa interfaz de consultas SQL.</span><span class="sxs-lookup"><span data-stu-id="b9041-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="b9041-214">[Análisis de transmisiones de Azure][lnk-asa]: transmisiones en tiempo real de procesamiento en la nube de Hola que permite toorapidly desarrollar e implementar una visión análisis de bajo costo solución toouncover en tiempo real de los dispositivos, sensores, infraestructura y aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="b9041-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="b9041-215">datos de Hola desde este servicio completamente administrado pueden reducir el volumen de tooany bien con un alto rendimiento, baja latencia y la resistencia.</span><span class="sxs-lookup"><span data-stu-id="b9041-215">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="b9041-216">[Servicios de aplicaciones de Azure][lnk-appservices]: un sitio web eficaz toobuild plataforma de nube y aplicaciones móviles que se conectan en cualquier lugar; toodata en la nube de Hola o de forma local.</span><span class="sxs-lookup"><span data-stu-id="b9041-216">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="b9041-217">Cree atractivas aplicaciones móviles para iOS, Android y Windows.</span><span class="sxs-lookup"><span data-stu-id="b9041-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="b9041-218">Integrar con el Software como servicio (SaaS) y enterprise las aplicaciones con toodozens cuadro conectividad de servicios en la nube y aplicaciones empresariales.</span><span class="sxs-lookup"><span data-stu-id="b9041-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="b9041-219">El código en su lenguaje favorito y IDE toobuild (. NET, Node.js, PHP, Python o Java) las aplicaciones web y las API más rápidas que nunca.</span><span class="sxs-lookup"><span data-stu-id="b9041-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="b9041-220">[Lógica de aplicaciones][lnk-logicapps]: característica de Logic Apps Hola de servicio de aplicaciones de Azure le ayuda a integrar sus sistemas de línea de negocio existentes de IoT solución tooyour y automatizar los procesos de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b9041-220">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="b9041-221">Lógica de aplicaciones permite que los flujos de trabajo a los desarrolladores toodesign que comienzan con un desencadenador y, a continuación, ejecutan una serie de pasos, reglas y acciones que usan toointegrate conectores eficaces con los procesos empresariales.</span><span class="sxs-lookup"><span data-stu-id="b9041-221">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="b9041-222">Lógica de aplicaciones ofrece gran ecosistema de tooa de conectividad de cuadro de SaaS, basada en la nube y aplicaciones locales.</span><span class="sxs-lookup"><span data-stu-id="b9041-222">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="b9041-223">[Almacenamiento de blobs de Azure][lnk-blob]: almacenamiento en nube rentable, confiable para los datos de Hola que los dispositivos envían toohello en la nube.</span><span class="sxs-lookup"><span data-stu-id="b9041-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="b9041-224">Conclusión</span><span class="sxs-lookup"><span data-stu-id="b9041-224">Conclusion</span></span>
<span data-ttu-id="b9041-225">En este artículo se proporciona información general sobre los detalles de los niveles de implementación para diseñar e implementar una infraestructura de IoT mediante IoT de Azure.</span><span class="sxs-lookup"><span data-stu-id="b9041-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="b9041-226">Configurar cada toobe componente segura es clave para la protección de Hola toda la infraestructura de IoT.</span><span class="sxs-lookup"><span data-stu-id="b9041-226">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="b9041-227">Opciones de diseño de Hello disponibles en IoT de Azure proporcionan un cierto nivel de flexibilidad y elección; Sin embargo, cada opción podría tener implicaciones de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b9041-227">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="b9041-228">Se recomienda valorar cada una de estas opciones mediante una evaluación de riesgo y costo.</span><span class="sxs-lookup"><span data-stu-id="b9041-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

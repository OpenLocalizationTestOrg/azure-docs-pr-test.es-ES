

<span data-ttu-id="59a8d-101">Cuando cree una aplicación web para un sitio web de Azure, puede aprovisionar una máquina virtual en Azure.</span><span class="sxs-lookup"><span data-stu-id="59a8d-101">When you create a web application project for Azure, you can provision a virtual machine in Azure.</span></span> <span data-ttu-id="59a8d-102">Después, puede configurar la máquina virtual con software adicional o usar dicha máquina para diagnósticos o depuración.</span><span class="sxs-lookup"><span data-stu-id="59a8d-102">You can then configure the virtual machine with additional software, or use the virtual machine for diagnostic or debugging purposes.</span></span>

<span data-ttu-id="59a8d-103">Para crear una máquina virtual cuando cree una aplicación web, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="59a8d-103">To create a virtual machine when you create a web application, follow these steps:</span></span>

1. <span data-ttu-id="59a8d-104">En Visual Studio, haga clic en **Archivo** > **Nuevo** > **Proyecto** > **Web** y elija **Aplicación web ASP.NET** (en los nodos **Visual C#** o **Visual Basic**).</span><span class="sxs-lookup"><span data-stu-id="59a8d-104">In Visual Studio, click **File** > **New** > **Project** > **Web**, and then choose **ASP.NET Web Application** (under the **Visual C#** or **Visual Basic** nodes).</span></span>
2. <span data-ttu-id="59a8d-105">En el cuadro de diálogo **Nuevo proyecto de ASP.NET**, seleccione el tipo de aplicación web que desee y en la sección de Azure de dicho cuadro de diálogo (en la esquina inferior derecha), asegúrese de que la casilla **Host en la nube** está seleccionada (en algunas instalaciones la casilla se llama **Crear recursos remotos**).</span><span class="sxs-lookup"><span data-stu-id="59a8d-105">In the **New ASP.NET Project** dialog box, select the type of web application you want, and in the Azure section of the dialog box (in the lower-right corner), make sure that the **Host in the cloud** check box is selected (this check box is labeled **Create remote resources** in some installations).</span></span>
   
    ![][0]
3. <span data-ttu-id="59a8d-106">En este ejemplo, en la lista desplegable de Microsoft Azure, elija **Máquina virtual (v1)** y, luego, haga clic en el botón **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="59a8d-106">For this example, in the drop-down list under Microsoft Azure, choose **Virtual Machine (v1)**, and then click the **OK** button.</span></span>
4. <span data-ttu-id="59a8d-107">Inicie sesión en Azure si se le solicita.</span><span class="sxs-lookup"><span data-stu-id="59a8d-107">Sign in to Azure if you're prompted.</span></span> <span data-ttu-id="59a8d-108">Aparecerá el cuadro de diálogo **Crear máquina virtual** .</span><span class="sxs-lookup"><span data-stu-id="59a8d-108">The **Create Virtual Machine** dialog box appears.</span></span>
   
    ![][2]
5. <span data-ttu-id="59a8d-109">En el cuadro **Nombre DNS** , escriba un nombre para la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-109">In the **DNS name** box, enter a name for the virtual machine.</span></span> <span data-ttu-id="59a8d-110">El nombre DNS debe ser único en Azure.</span><span class="sxs-lookup"><span data-stu-id="59a8d-110">The DNS name must be unique in Azure.</span></span> <span data-ttu-id="59a8d-111">Si el nombre que escriba no está disponible, aparecerá un signo de exclamación rojo.</span><span class="sxs-lookup"><span data-stu-id="59a8d-111">If the name you entered isn't available, a red exclamation point appears.</span></span>
6. <span data-ttu-id="59a8d-112">En la lista **Imagen** , elija la imagen en la que quiera basar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-112">In the **Image** list, choose the image you want to base the virtual machine on.</span></span> <span data-ttu-id="59a8d-113">Puede elegir cualquiera de las imágenes de máquinas virtuales de Azure o su propia imagen que haya cargado en Azure.</span><span class="sxs-lookup"><span data-stu-id="59a8d-113">You can choose any of the standard Azure virtual machine images or your image that you've uploaded to Azure.</span></span>
7. <span data-ttu-id="59a8d-114">Deje la casilla **Habilitar IIS y Web Deploy** activada a menos que desee instalar un servidor web diferente.</span><span class="sxs-lookup"><span data-stu-id="59a8d-114">Leave the **Enable IIS and Web Deploy** check box selected unless you plan to install a different web server.</span></span> <span data-ttu-id="59a8d-115">No podrá publicar desde Visual Studio si deshabilita Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="59a8d-115">You won't be able to publish from Visual Studio if you disable Web Deploy.</span></span> <span data-ttu-id="59a8d-116">Puede agregar IIS y Web Deploy para cualquiera de las imágenes de Windows Server empaquetadas, incluidas sus propias imágenes personalizadas.</span><span class="sxs-lookup"><span data-stu-id="59a8d-116">You can add IIS and Web Deploy to any of the packaged Windows Server images, including your own custom images.</span></span>
8. <span data-ttu-id="59a8d-117">En la lista **Tamaño** , seleccione el tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-117">In the **Size** list, choose the size of the virtual machine.</span></span>
9. <span data-ttu-id="59a8d-118">Especifique las credenciales de inicio de sesión para esta máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-118">Specify the sign-in credentials for this virtual machine.</span></span> <span data-ttu-id="59a8d-119">Anótelas, ya que las necesitará para acceder a la máquina a través de Escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="59a8d-119">Make a note of them, because you'll need them to access the machine through Remote Desktop.</span></span>
10. <span data-ttu-id="59a8d-120">En la lista **Ubicación** , elija la región en la que se hospedará la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-120">In the **Location** list, choose the region to host the virtual machine.</span></span>
11. <span data-ttu-id="59a8d-121">Haga clic en el botón **Aceptar** para empezar a crear la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-121">Click  the **OK** button to start creating the virtual machine.</span></span> <span data-ttu-id="59a8d-122">Puede seguir el progreso de la operación en la ventana **Resultados** .</span><span class="sxs-lookup"><span data-stu-id="59a8d-122">You can follow the progress of the operation in the **Output** window.</span></span>
    
    ![][3]
12. <span data-ttu-id="59a8d-123">Cuando la máquina virtual se aprovisiona, los scripts publicados se crean en un nodo **PublishScripts** en la solución.</span><span class="sxs-lookup"><span data-stu-id="59a8d-123">When the virtual machine is provisioned, published scripts are created in a **PublishScripts** node in your solution.</span></span> <span data-ttu-id="59a8d-124">El script publicado se ejecuta y aprovisiona en una máquina virtual en Azure.</span><span class="sxs-lookup"><span data-stu-id="59a8d-124">The published script runs and provisions a virtual machine in Azure.</span></span> <span data-ttu-id="59a8d-125">La ventana **Resultados** muestra el estado.</span><span class="sxs-lookup"><span data-stu-id="59a8d-125">The **Output** window shows the status.</span></span> <span data-ttu-id="59a8d-126">El script realiza las siguientes acciones para configurar la máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="59a8d-126">The script performs the following actions to set up the virtual machine:</span></span>
    
    * <span data-ttu-id="59a8d-127">Crea la máquina virtual si todavía no existe.</span><span class="sxs-lookup"><span data-stu-id="59a8d-127">Creates the virtual machine if it doesn't already exist.</span></span>
    * <span data-ttu-id="59a8d-128">Crea una cuenta de almacenamiento con un nombre que empieza con `devtest`, pero solamente si no existe tal cuenta de almacenamiento en la región especificada.</span><span class="sxs-lookup"><span data-stu-id="59a8d-128">Creates a storage account with a name that begins with `devtest`, but only if there isn't already such a storage account in the specified region.</span></span>
    * <span data-ttu-id="59a8d-129">Crea un servicio en la nube como un contenedor para la máquina virtual y crea un rol web para la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="59a8d-129">Creates a cloud service as a container for the virtual machine, and creates a web role for the web application.</span></span>
    * <span data-ttu-id="59a8d-130">Configura Web Deploy en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-130">Configures Web Deploy on the virtual machine.</span></span>
    * <span data-ttu-id="59a8d-131">Configura IIS y ASP.NET en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-131">Configures IIS and ASP.NET on the virtual machine.</span></span>
    
    ![][4]
13. <span data-ttu-id="59a8d-132">(Opcional) Puede conectarse a la nueva máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="59a8d-132">(Optional) You can connect to the new virtual machine.</span></span> <span data-ttu-id="59a8d-133">En el **Explorador de servidores**, expanda el nodo **Virtual Machines**, elija el nodo correspondiente a la máquina virtual que ha creado y, en su menú contextual, elija **Connect with Remote Desktop** (Conectarse con Escritorio remoto).</span><span class="sxs-lookup"><span data-stu-id="59a8d-133">In **Server Explorer**, expand the **Virtual Machines** node, choose the node for the virtual machine you created, and on its shortcut menu, choose **Connect with Remote Desktop**.</span></span> <span data-ttu-id="59a8d-134">O bien, en **Cloud Explorer** puede elegir **Abrir en el portal** en el menú contextual y conectarse a la máquina virtual desde ahí.</span><span class="sxs-lookup"><span data-stu-id="59a8d-134">Alternatively, in **Cloud Explorer** you can choose **Open in Portal** on the shortcut menu and connect to the virtual machine there.</span></span>
    
    ![][5]

## <a name="next-steps"></a><span data-ttu-id="59a8d-135">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="59a8d-135">Next steps</span></span>
<span data-ttu-id="59a8d-136">Si quiere personalizar los scripts publicados que creó, vea información más detallada en [Uso de scripts de Windows PowerShell para publicar en entornos de prueba y desarrollo](http://msdn.microsoft.com/library/dn642480.aspx).</span><span class="sxs-lookup"><span data-stu-id="59a8d-136">If you want to customize the published scripts you created, read more in-depth information at [Using Windows PowerShell Scripts to Publish to Dev and Test Environments](http://msdn.microsoft.com/library/dn642480.aspx).</span></span>

[0]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_NewProject.PNG
[1]: ./media/dotnet-visual-studio-create-virtual-machine/CreateVM_SignIn.PNG
[2]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_CreateVM.PNG
[3]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_Provisioning.png
[4]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_SolutionExplorer.png
[5]: ./media/virtual-machines-common-classic-web-app-visual-studio/VS_Create_VM_Connect.png

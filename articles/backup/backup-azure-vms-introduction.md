---
title: "aaaPlanning su infraestructura de copia de seguridad de máquina virtual en Azure | Documentos de Microsoft"
description: "Consideraciones importantes al planear tooback las máquinas virtuales en Azure"
services: backup
documentationcenter: 
author: markgalioto
manager: carmonm
editor: 
keywords: "copias de seguridad de máquinas virtuales, realizar copias de seguridad de máquinas virtuales"
ms.assetid: 19d2cf82-1f60-43e1-b089-9238042887a9
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/18/2017
ms.author: markgal;trinadhk
ms.openlocfilehash: d11982431610000293038ee6aa7df8e7bc2d8b70
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="plan-your-vm-backup-infrastructure-in-azure"></a><span data-ttu-id="d0182-104">Planeación de la infraestructura de copia de seguridad de máquinas virtuales en Azure</span><span class="sxs-lookup"><span data-stu-id="d0182-104">Plan your VM backup infrastructure in Azure</span></span>
<span data-ttu-id="d0182-105">Este artículo proporciona rendimiento y recursos sugerencias toohelp planear la infraestructura de copia de seguridad de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d0182-105">This article provides performance and resource suggestions toohelp you plan your VM backup infrastructure.</span></span> <span data-ttu-id="d0182-106">También define los aspectos clave del servicio de copia de seguridad de hello; estos aspectos pueden resultar fundamental para determinar la arquitectura, planificación de capacidad y la programación.</span><span class="sxs-lookup"><span data-stu-id="d0182-106">It also defines key aspects of hello Backup service; these aspects can be critical in determining your architecture, capacity planning, and scheduling.</span></span> <span data-ttu-id="d0182-107">Si ha [preparado el entorno](backup-azure-vms-prepare.md), planificación es el paso siguiente Hola antes de empezar [tooback las máquinas virtuales](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="d0182-107">If you've [prepared your environment](backup-azure-vms-prepare.md), planning is hello next step before you begin [tooback up VMs](backup-azure-vms.md).</span></span> <span data-ttu-id="d0182-108">Si necesita obtener más información acerca de máquinas virtuales de Azure, vea hello [documentación de máquinas virtuales](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="d0182-108">If you need more information about Azure virtual machines, see hello [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="how-does-azure-back-up-virtual-machines"></a><span data-ttu-id="d0182-109">¿Cómo realiza Azure la copia de seguridad de las máquinas virtuales?</span><span class="sxs-lookup"><span data-stu-id="d0182-109">How does Azure back up virtual machines?</span></span>
<span data-ttu-id="d0182-110">Cuando Hola servicio copia de seguridad de Azure inicia un trabajo de copia de seguridad en tiempo de hello programado, desencadena Hola extensión de reserva tootake una instantánea en un momento.</span><span class="sxs-lookup"><span data-stu-id="d0182-110">When hello Azure Backup service initiates a backup job at hello scheduled time, it triggers hello backup extension tootake a point-in-time snapshot.</span></span> <span data-ttu-id="d0182-111">Hola servicio de copia de seguridad de Azure usa hello _VMSnapshot_ extensión en Windows y hello _VMSnapshotLinux_ extensión en Linux.</span><span class="sxs-lookup"><span data-stu-id="d0182-111">hello Azure Backup service uses hello _VMSnapshot_ extension in Windows, and hello _VMSnapshotLinux_ extension in Linux.</span></span> <span data-ttu-id="d0182-112">Hola extensión se instala durante la copia de seguridad de hello primera máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d0182-112">hello extension is installed during hello first VM backup.</span></span> <span data-ttu-id="d0182-113">extensión de hello tooinstall, Hola VM debe estar ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="d0182-113">tooinstall hello extension, hello VM must be running.</span></span> <span data-ttu-id="d0182-114">Si hello no se está ejecutando, Hola servicio de copia de seguridad toma una instantánea de hello almacenamiento subyacente (debido a que ninguna aplicación de escritura aparecen al Hola que VM está en estado detenido).</span><span class="sxs-lookup"><span data-stu-id="d0182-114">If hello VM is not running, hello Backup service takes a snapshot of hello underlying storage (since no application writes occur while hello VM is stopped).</span></span>

<span data-ttu-id="d0182-115">Cuando se toma una instantánea de máquinas virtuales de Windows, servicio de copia de seguridad de Hola coordina con tooget de servicio de instantáneas de volumen (VSS) de hello una instantánea coherente de los discos de la máquina virtual Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-115">When taking a snapshot of Windows VMs, hello Backup service coordinates with hello Volume Shadow Copy Service (VSS) tooget a consistent snapshot of hello virtual machine's disks.</span></span> <span data-ttu-id="d0182-116">Si hace copia de seguridad de máquinas virtuales de Linux, puede escribir su propia coherencia de tooensure scripts personalizados al tomar una instantánea de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d0182-116">If you're backing up Linux VMs, you can write your own custom scripts tooensure consistency when taking a VM snapshot.</span></span> <span data-ttu-id="d0182-117">Más adelante en este artículo se proporcionan más detalles sobre cómo invocar estas secuencias de comandos.</span><span class="sxs-lookup"><span data-stu-id="d0182-117">Details on invoking these scripts are provided later in this article.</span></span>

<span data-ttu-id="d0182-118">Una vez Hola servicio de copia de seguridad de Azure toma instantáneas de hello, datos de hello están el almacén de toohello transferidos.</span><span class="sxs-lookup"><span data-stu-id="d0182-118">Once hello Azure Backup service takes hello snapshot, hello data is transferred toohello vault.</span></span> <span data-ttu-id="d0182-119">toomaximize eficacia, servicio de hello identifica y transfiere únicamente los bloques de datos que han cambiado desde la copia de seguridad anterior de Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-119">toomaximize efficiency, hello service identifies and transfers only hello blocks of data that have changed since hello previous backup.</span></span>

![Arquitectura de copia de seguridad de máquinas virtuales de Azure](./media/backup-azure-vms-introduction/vmbackup-architecture.png)

<span data-ttu-id="d0182-121">Una vez completada la transferencia de datos hello, instantánea Hola se quita y se crea un punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="d0182-121">When hello data transfer is complete, hello snapshot is removed and a recovery point is created.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="d0182-122">Durante el proceso de copia de seguridad de hello, copia de seguridad de Azure no incluye Hola temporal disco conectado toohello virtual machine.</span><span class="sxs-lookup"><span data-stu-id="d0182-122">During hello backup process, Azure Backup doesn't include hello temporary disk attached toohello virtual machine.</span></span> <span data-ttu-id="d0182-123">Para obtener más información, consulte el blog de hello en [almacenamiento temporal](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="d0182-123">For more information, see hello blog on [temporary storage](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span></span>
> 2. <span data-ttu-id="d0182-124">Puesto que la copia de seguridad de Azure toma una instantánea de nivel de almacenamiento y las transferencias que toovault de instantáneas, no cambie claves de cuenta de almacenamiento de hello hasta que finalice el trabajo de copia de seguridad de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-124">Since Azure Backup takes a storage-level snapshot and transfers that snapshot toovault, do not change hello storage account keys until hello backup job finishes.</span></span>
> 3. <span data-ttu-id="d0182-125">Para las máquinas virtuales de premium, copiaremos toostorage cuenta de hello instantánea.</span><span class="sxs-lookup"><span data-stu-id="d0182-125">For premium VMs, we copy hello snapshot toostorage account.</span></span> <span data-ttu-id="d0182-126">Se trata de toomake seguro de que el servicio de copia de seguridad de Azure obtiene suficientes IOPS para transferir datos toovault.</span><span class="sxs-lookup"><span data-stu-id="d0182-126">This is toomake sure that Azure Backup service gets sufficient IOPS for transferring data toovault.</span></span> <span data-ttu-id="d0182-127">Esta copia adicional de almacenamiento se cobra según Hola VM tamaño asignado.</span><span class="sxs-lookup"><span data-stu-id="d0182-127">This additional copy of storage is charged as per hello VM allocated size.</span></span> 
>

### <a name="data-consistency"></a><span data-ttu-id="d0182-128">Coherencia de datos</span><span class="sxs-lookup"><span data-stu-id="d0182-128">Data consistency</span></span>
<span data-ttu-id="d0182-129">Copia de seguridad y restaurar los datos críticos del negocio resulta complicada por el hecho de Hola que deben hacer copia los datos críticos del negocio mientras las aplicaciones de Hola que generan Hola ejecutan datos.</span><span class="sxs-lookup"><span data-stu-id="d0182-129">Backing up and restoring business critical data is complicated by hello fact that business critical data must be backed up while hello applications that produce hello data are running.</span></span> <span data-ttu-id="d0182-130">tooaddress, copias de seguridad coherentes con la aplicación de copia de seguridad de Azure admite para máquinas virtuales de Linux y Windows</span><span class="sxs-lookup"><span data-stu-id="d0182-130">tooaddress this, Azure Backup supports application-consistent backups for both Windows and Linux VMs</span></span>
#### <a name="windows-vm"></a><span data-ttu-id="d0182-131">Máquina virtual de Windows</span><span class="sxs-lookup"><span data-stu-id="d0182-131">Windows VM</span></span>
<span data-ttu-id="d0182-132">Copia de seguridad de Azure realiza copias de seguridad completas de VSS en máquinas virtuales de Windows (más información sobre [copia de seguridad completa de VSS](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span><span class="sxs-lookup"><span data-stu-id="d0182-132">Azure Backup takes VSS full backups on Windows VMs (read more about [VSS full backup](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span></span> <span data-ttu-id="d0182-133">tooenable VSS copia copias de seguridad, Hola siguiente conjunto de toobe necesidades clave del registro de hello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d0182-133">tooenable VSS copy backups, hello following registry key needs toobe set on hello VM.</span></span>

```
[HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
"USEVSSCOPYBACKUP"="TRUE"
```

#### <a name="linux-vms"></a><span data-ttu-id="d0182-134">Máquinas virtuales con Linux</span><span class="sxs-lookup"><span data-stu-id="d0182-134">Linux VMs</span></span>
<span data-ttu-id="d0182-135">Azure Backup proporciona un marco de trabajo para las secuencias de comandos.</span><span class="sxs-lookup"><span data-stu-id="d0182-135">Azure Backup provides a scripting framework.</span></span> <span data-ttu-id="d0182-136">coherencia con las aplicaciones tooensure al realizar copias de seguridad de máquinas virtuales de Linux, crear scripts previos personalizados y secuencias de comandos posteriores a la que controlan el flujo de trabajo de copia de seguridad de Hola y entorno.</span><span class="sxs-lookup"><span data-stu-id="d0182-136">tooensure application consistency when backing up Linux VMs, create custom pre-scripts and post-scripts that control hello backup workflow and environment.</span></span> <span data-ttu-id="d0182-137">Copia de seguridad de Azure hello secuencia de comandos anterior, invoca antes de realizar la instantánea de la VM de Hola y script posterior a la de hello, invoca una vez completado el trabajo de instantáneas de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-137">Azure Backup invokes hello pre-script before taking hello VM snapshot and invokes hello post-script once hello VM snapshot job completes.</span></span> <span data-ttu-id="d0182-138">Para obtener más información, consulte sobre [copias de seguridad de máquinas virtuales coherentes con la aplicación mediante las secuencias de comandos anteriores y posteriores](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="d0182-138">For more details, see [application consistent VM backups using pre-script and post-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span>
> [!NOTE]
> <span data-ttu-id="d0182-139">Copia de seguridad de Azure, solo invoca Hola escrito por el cliente anterior scripts y posteriores.</span><span class="sxs-lookup"><span data-stu-id="d0182-139">Azure Backup only invokes hello customer-written pre- and post-scripts.</span></span> <span data-ttu-id="d0182-140">Si el script previo de Hola y scripts posteriores a la se ejecutan correctamente, copia de seguridad de Azure marca punto de recuperación de hello como aplicación coherente.</span><span class="sxs-lookup"><span data-stu-id="d0182-140">If hello pre-script and post-scripts execute successfully, Azure Backup marks hello recovery point as application consistent.</span></span> <span data-ttu-id="d0182-141">Sin embargo, al cliente de hello es el responsable último de coherencia de la aplicación hello cuando se utilizan scripts personalizados.</span><span class="sxs-lookup"><span data-stu-id="d0182-141">However, hello customer is ultimately responsible for hello application consistency when using custom scripts.</span></span>
>


<span data-ttu-id="d0182-142">Esta tabla explica los tipos de Hola de hello y coherencia condiciones que se producen en durante la copia de seguridad de máquina virtual de Azure y procedimientos de restauración.</span><span class="sxs-lookup"><span data-stu-id="d0182-142">This table explains hello types of consistency and hello conditions that they occur under during Azure VM backup and restore procedures.</span></span>

| <span data-ttu-id="d0182-143">Coherencia</span><span class="sxs-lookup"><span data-stu-id="d0182-143">Consistency</span></span> | <span data-ttu-id="d0182-144">Con base en VSS</span><span class="sxs-lookup"><span data-stu-id="d0182-144">VSS-based</span></span> | <span data-ttu-id="d0182-145">Explicación y detalles</span><span class="sxs-lookup"><span data-stu-id="d0182-145">Explanation and details</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d0182-146">Coherencia de las aplicaciones</span><span class="sxs-lookup"><span data-stu-id="d0182-146">Application consistency</span></span> |<span data-ttu-id="d0182-147">Sí para Windows</span><span class="sxs-lookup"><span data-stu-id="d0182-147">Yes for Windows</span></span>|<span data-ttu-id="d0182-148">Se trata del tipo de coherencia ideal para las cargas de trabajo, ya que garantiza que:</span><span class="sxs-lookup"><span data-stu-id="d0182-148">Application consistency is ideal for workloads as it ensures that:</span></span><ol><li> <span data-ttu-id="d0182-149">Hola VM *arranca*.</span><span class="sxs-lookup"><span data-stu-id="d0182-149">hello VM *boots up*.</span></span> <li><span data-ttu-id="d0182-150">No hay *daños*.</span><span class="sxs-lookup"><span data-stu-id="d0182-150">There is *no corruption*.</span></span> <li><span data-ttu-id="d0182-151">No hay *pérdida de datos*.</span><span class="sxs-lookup"><span data-stu-id="d0182-151">There is *no data loss*.</span></span><li> <span data-ttu-id="d0182-152">datos de Hello están aplicación de toohello coherente que utiliza datos de hello, por implicadas en la aplicación hello en tiempo de Hola de copia de seguridad--mediante script VSS o anterior o posterior.</span><span class="sxs-lookup"><span data-stu-id="d0182-152">hello data is consistent toohello application that uses hello data, by involving hello application at hello time of backup--using VSS or pre/post script.</span></span></ol> <li><span data-ttu-id="d0182-153">*Máquinas virtuales de Windows*-las cargas de trabajo de Microsoft más tengan escritores VSS que realizan acciones específicas de la carga de trabajo relacionados toodata coherencia.</span><span class="sxs-lookup"><span data-stu-id="d0182-153">*Windows VMs*- Most Microsoft workloads have VSS writers that do workload-specific actions related toodata consistency.</span></span> <span data-ttu-id="d0182-154">Por ejemplo, Microsoft SQL Server tiene un escritor VSS que garantiza que se realizan correctamente el archivo de registro de transacciones de hello escrituras toohello y base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-154">For example, Microsoft SQL Server has a VSS writer that ensures that hello writes toohello transaction log file and hello database are done correctly.</span></span> <span data-ttu-id="d0182-155">Copias de seguridad de la máquina virtual de Windows Azure, toocreate un punto de recuperación coherentes con la aplicación, extensión de copia de seguridad de hello debe invocar el flujo de trabajo de hello VSS y completar antes de realizar la instantánea de la VM de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-155">For Azure Windows VM backups, toocreate an application-consistent recovery point, hello backup extension must invoke hello VSS workflow and complete it before taking hello VM snapshot.</span></span> <span data-ttu-id="d0182-156">Para hello Azure VM instantánea toobe preciso, los escritores VSS de Hola de todas las aplicaciones de Azure VM deben completar también.</span><span class="sxs-lookup"><span data-stu-id="d0182-156">For hello Azure VM snapshot toobe accurate, hello VSS writers of all Azure VM applications must complete as well.</span></span> <span data-ttu-id="d0182-157">(Obtenga información acerca de hello [conceptos básicos de VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) y profundice en los detalles de Hola de [su funcionamiento](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="d0182-157">(Learn hello [basics of VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) and dive deep into hello details of [how it works](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span></span> </li> <li> <span data-ttu-id="d0182-158">*Máquinas virtuales de Linux*-los clientes pueden ejecutar [tooensure personalizado de script previo y posterior a la coherencia de la aplicación](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="d0182-158">*Linux VMs*- Customers can execute [custom pre-script and post-script tooensure application consistency](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span> </li> |
| <span data-ttu-id="d0182-159">Coherencia del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="d0182-159">File-system consistency</span></span> |<span data-ttu-id="d0182-160">Sí, para equipos basados en Windows</span><span class="sxs-lookup"><span data-stu-id="d0182-160">Yes - for Windows-based computers</span></span> |<span data-ttu-id="d0182-161">Hay dos escenarios donde puede ser el punto de recuperación de hello *coherente de sistema de archivos*:</span><span class="sxs-lookup"><span data-stu-id="d0182-161">There are two scenarios where hello recovery point can be *file-system consistent*:</span></span><ul><li><span data-ttu-id="d0182-162">Copias de seguridad de máquinas virtuales con Linux en Azure, sin los script anterior y posterior, o en caso de que estos generen errores.</span><span class="sxs-lookup"><span data-stu-id="d0182-162">Backups of Linux VMs in Azure, without pre-script/post-script or if pre-script/post-script failed.</span></span> <li><span data-ttu-id="d0182-163">Error de VSS durante la copia de seguridad de máquinas virtuales Windows en Azure.</span><span class="sxs-lookup"><span data-stu-id="d0182-163">VSS failure during backup for Windows VMs in Azure.</span></span></li></ul> <span data-ttu-id="d0182-164">En ambos casos estos, Hola recomendado que se puede hacer es tooensure que:</span><span class="sxs-lookup"><span data-stu-id="d0182-164">In both these cases, hello best that can be done is tooensure that:</span></span> <ol><li> <span data-ttu-id="d0182-165">Hola VM *arranca*.</span><span class="sxs-lookup"><span data-stu-id="d0182-165">hello VM *boots up*.</span></span> <li><span data-ttu-id="d0182-166">No hay *daños*.</span><span class="sxs-lookup"><span data-stu-id="d0182-166">There is *no corruption*.</span></span><li><span data-ttu-id="d0182-167">No hay *pérdida de datos*.</span><span class="sxs-lookup"><span data-stu-id="d0182-167">There is *no data loss*.</span></span></ol> <span data-ttu-id="d0182-168">Las aplicaciones necesitan mecanismo tooimplement su propios "revisión de seguridad" en los datos de hello restaurado.</span><span class="sxs-lookup"><span data-stu-id="d0182-168">Applications need tooimplement their own "fix-up" mechanism on hello restored data.</span></span> |
| <span data-ttu-id="d0182-169">Coherencia de bloqueos</span><span class="sxs-lookup"><span data-stu-id="d0182-169">Crash consistency</span></span> |<span data-ttu-id="d0182-170">No</span><span class="sxs-lookup"><span data-stu-id="d0182-170">No</span></span> |<span data-ttu-id="d0182-171">Esta situación es la máquina virtual de tooa equivalente experimentan un "bloqueo" (a través de un restablecimiento parcial o disco duro).</span><span class="sxs-lookup"><span data-stu-id="d0182-171">This situation is equivalent tooa virtual machine experiencing a "crash" (through either a soft or hard reset).</span></span> <span data-ttu-id="d0182-172">Coherencia de bloqueo suele sucede cuando se cierra Hola máquina virtual de Azure en tiempo de Hola de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-172">Crash consistency typically happens when hello Azure virtual machine is shut down at hello time of backup.</span></span> <span data-ttu-id="d0182-173">Un punto de recuperación coherente para bloqueos no proporciona ninguna garantía alrededor de coherencia de Hola de los datos de hello en medio de almacenamiento de hello, ya sea desde la perspectiva de Hola de sistema operativo de Hola o aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="d0182-173">A crash-consistent recovery point provides no guarantees around hello consistency of hello data on hello storage medium--either from hello perspective of hello operating system or hello application.</span></span> <span data-ttu-id="d0182-174">Los únicos datos de Hola que ya existe en el disco de hello en tiempo de Hola de copia de seguridad se capturan y copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-174">Only hello data that already exists on hello disk at hello time of backup is captured and backed up.</span></span> <br/> <br/> <span data-ttu-id="d0182-175">Aunque no hay ninguna garantía, normalmente, Hola arranque del sistema operativo, seguido de comprobación de disco procedimiento, como chkdsk, toofix los errores por daños.</span><span class="sxs-lookup"><span data-stu-id="d0182-175">While there are no guarantees, usually, hello operating system boots, followed by disk-checking procedure, like chkdsk, toofix any corruption errors.</span></span> <span data-ttu-id="d0182-176">Los datos en memoria o escribe que no se han transferido toohello disco se pierden.</span><span class="sxs-lookup"><span data-stu-id="d0182-176">Any in-memory data or writes that have not been transferred toohello disk are lost.</span></span> <span data-ttu-id="d0182-177">aplicación Hello sigue normalmente con su propio mecanismo de comprobación en caso de que la desinstalación de datos necesita toobe realiza.</span><span class="sxs-lookup"><span data-stu-id="d0182-177">hello application typically follows with its own verification mechanism in case data rollback needs toobe done.</span></span> <br><br><span data-ttu-id="d0182-178">Por ejemplo, si el registro de transacciones de hello tiene entradas que no están presentes en la base de datos de hello, a continuación, software de base de datos de hello hace una reversión hasta que Hola datos son coherentes.</span><span class="sxs-lookup"><span data-stu-id="d0182-178">As an example, if hello transaction log has entries that are not present in hello database, then hello database software does a rollback until hello data is consistent.</span></span> <span data-ttu-id="d0182-179">Cuando los datos se distribuyen en varios discos virtuales (por ejemplo, los volúmenes distribuidos), un punto de recuperación coherente para bloqueos no proporciona ninguna garantía de exactitud de Hola de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-179">When data is spread across multiple virtual disks (like spanned volumes), a crash-consistent recovery point provides no guarantees for hello correctness of hello data.</span></span> |

## <a name="performance-and-resource-utilization"></a><span data-ttu-id="d0182-180">Rendimiento y uso de recursos</span><span class="sxs-lookup"><span data-stu-id="d0182-180">Performance and resource utilization</span></span>
<span data-ttu-id="d0182-181">Al igual que el software de copia de seguridad que se implementa de forma local, debe planear las necesidades de capacidad y utilización de recursos al realizar la copia de seguridad de máquinas virtuales en Azure.</span><span class="sxs-lookup"><span data-stu-id="d0182-181">Like backup software that is deployed on-premises, you should plan for capacity and resource utilization needs when backing up VMs in Azure.</span></span> <span data-ttu-id="d0182-182">Hola [limita el almacenamiento de Azure](../azure-subscription-service-limits.md#storage-limits) definir cómo afecta a las cargas de trabajo de toorunning toostructure VM implementaciones tooget rendimiento máximo con como mínimo.</span><span class="sxs-lookup"><span data-stu-id="d0182-182">hello [Azure Storage limits](../azure-subscription-service-limits.md#storage-limits) define how toostructure VM deployments tooget maximum performance with minimum impact toorunning workloads.</span></span>

<span data-ttu-id="d0182-183">Pagar toohello atención que siguiente almacenamiento de Azure limita al planear el rendimiento de copia de seguridad:</span><span class="sxs-lookup"><span data-stu-id="d0182-183">Pay attention toohello following Azure Storage limits when planning backup performance:</span></span>

* <span data-ttu-id="d0182-184">Salida máxima por cuenta de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="d0182-184">Max egress per storage account</span></span>
* <span data-ttu-id="d0182-185">Tasa de solicitud total por cuenta de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="d0182-185">Total request rate per storage account</span></span>

### <a name="storage-account-limits"></a><span data-ttu-id="d0182-186">Límites de la cuenta de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="d0182-186">Storage account limits</span></span>
<span data-ttu-id="d0182-187">Datos de copia de seguridad copiado desde una cuenta de almacenamiento, se agrega toohello operaciones de entrada/salida por segundo (IOPS) y las métricas de salida (o rendimiento) de cuenta de almacenamiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-187">Backup data copied from a storage account, adds toohello input/output operations per second (IOPS) and egress (or throughput) metrics of hello storage account.</span></span> <span data-ttu-id="d0182-188">Hola al mismo tiempo máquinas virtuales también están consumiendo IOPS y el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-188">At hello same time, virtual machines are also consuming IOPS and throughput.</span></span> <span data-ttu-id="d0182-189">el objetivo de Hello es tooensure copia de seguridad y tráfico de máquinas virtuales no superan los límites de su cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-189">hello goal is tooensure Backup and virtual machine traffic don't exceed your storage account limits.</span></span>

### <a name="number-of-disks"></a><span data-ttu-id="d0182-190">Número de discos</span><span class="sxs-lookup"><span data-stu-id="d0182-190">Number of disks</span></span>
<span data-ttu-id="d0182-191">proceso de copia de seguridad de Hello intenta toocomplete un trabajo de copia de seguridad tan pronto como sea posible.</span><span class="sxs-lookup"><span data-stu-id="d0182-191">hello backup process tries toocomplete a backup job as quickly as possible.</span></span> <span data-ttu-id="d0182-192">Con ello, se consume tantos recursos como es posible.</span><span class="sxs-lookup"><span data-stu-id="d0182-192">In doing so, it consumes as many resources as it can.</span></span> <span data-ttu-id="d0182-193">Sin embargo, todas las operaciones de E/S están limitadas por hello *rendimiento total único Blob*, que tiene un límite de 60 MB por segundo.</span><span class="sxs-lookup"><span data-stu-id="d0182-193">However, all I/O operations are limited by hello *Target Throughput for Single Blob*, which has a limit of 60 MB per second.</span></span> <span data-ttu-id="d0182-194">En un intento de toomaximize su velocidad, proceso de copia de seguridad de hello intenta tooback cada uno de los discos de la máquina virtual de hello *en paralelo*.</span><span class="sxs-lookup"><span data-stu-id="d0182-194">In an attempt toomaximize its speed, hello backup process tries tooback up each of hello VM's disks *in parallel*.</span></span> <span data-ttu-id="d0182-195">Si una máquina virtual tiene cuatro discos, servicio de hello intenta tooback los todos los cuatro discos en paralelo.</span><span class="sxs-lookup"><span data-stu-id="d0182-195">If a VM has four disks, hello service attempts tooback up all four disks in parallel.</span></span> <span data-ttu-id="d0182-196">Hola **número de discos** copia de seguridad, es el factor más importante de Hola para determinar el tráfico de copia de seguridad de cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-196">hello **number of disks** being backed up, is hello most important factor in determining storage account backup traffic.</span></span>

### <a name="backup-schedule"></a><span data-ttu-id="d0182-197">Programación de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="d0182-197">Backup schedule</span></span>
<span data-ttu-id="d0182-198">Otro factor que afecta al rendimiento es hello **programar copia de seguridad**.</span><span class="sxs-lookup"><span data-stu-id="d0182-198">An additional factor that impacts performance is hello **backup schedule**.</span></span> <span data-ttu-id="d0182-199">Si configura las directivas de Hola para todas las máquinas virtuales se copian en hello mismo tiempo, se ha programado un atasco de tráfico.</span><span class="sxs-lookup"><span data-stu-id="d0182-199">If you configure hello policies so all VMs are backed up at hello same time, you have scheduled a traffic jam.</span></span> <span data-ttu-id="d0182-200">proceso de copia de seguridad de Hello intenta tooback los todos los discos en paralelo.</span><span class="sxs-lookup"><span data-stu-id="d0182-200">hello backup process attempts tooback up all disks in parallel.</span></span> <span data-ttu-id="d0182-201">tráfico de copia de seguridad de Hola de tooreduce desde una cuenta de almacenamiento, copia de seguridad diferentes máquinas virtuales en otro momento del día de hello, sin superposición.</span><span class="sxs-lookup"><span data-stu-id="d0182-201">tooreduce hello backup traffic from a storage account, back up different VMs at different time of hello day, with no overlap.</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="d0182-202">Planificación de capacidad</span><span class="sxs-lookup"><span data-stu-id="d0182-202">Capacity planning</span></span>
<span data-ttu-id="d0182-203">Que reúnan los factores anteriores hello, necesitará tooplan para necesidades de uso de cuenta de almacenamiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-203">Putting hello previous factors together, you need tooplan for hello storage account usage needs.</span></span> <span data-ttu-id="d0182-204">Descargar hello [hoja de cálculo de Excel de planeación de la capacidad de copia de seguridad virtual](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) impacto de hello toosee de su disco y las opciones de programación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-204">Download hello [VM backup capacity planning Excel spreadsheet](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello impact of your disk and backup schedule choices.</span></span>

### <a name="backup-throughput"></a><span data-ttu-id="d0182-205">Rendimiento de la copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="d0182-205">Backup throughput</span></span>
<span data-ttu-id="d0182-206">Para cada disco haciendo copias de seguridad, copia de seguridad de Azure lee bloques de hello en el disco de Hola y almacenes de Hola solo datos modificados (copia de seguridad incremental).</span><span class="sxs-lookup"><span data-stu-id="d0182-206">For each disk being backed up, Azure Backup reads hello blocks on hello disk and stores only hello changed data (incremental backup).</span></span> <span data-ttu-id="d0182-207">Hello tabla siguiente muestran valores de rendimiento de copia de seguridad promedio de hello servicio.</span><span class="sxs-lookup"><span data-stu-id="d0182-207">hello following table shows hello average Backup service throughput values.</span></span> <span data-ttu-id="d0182-208">Hola después de datos puede calcular cantidad Hola de tiempo que sea necesario tooback configurar un disco de un tamaño determinado.</span><span class="sxs-lookup"><span data-stu-id="d0182-208">Using hello following data, you can estimate hello amount of time needed tooback up a disk of a given size.</span></span>

| <span data-ttu-id="d0182-209">Operación de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="d0182-209">Backup operation</span></span> | <span data-ttu-id="d0182-210">Mejor rendimiento</span><span class="sxs-lookup"><span data-stu-id="d0182-210">Best-case throughput</span></span> |
| --- | --- |
| <span data-ttu-id="d0182-211">Copia de seguridad inicial</span><span class="sxs-lookup"><span data-stu-id="d0182-211">Initial backup</span></span> |<span data-ttu-id="d0182-212">160 Mbps</span><span class="sxs-lookup"><span data-stu-id="d0182-212">160 Mbps</span></span> |
| <span data-ttu-id="d0182-213">Copia de seguridad incremental (DR)</span><span class="sxs-lookup"><span data-stu-id="d0182-213">Incremental backup (DR)</span></span> |<span data-ttu-id="d0182-214">640 Mbps </span><span class="sxs-lookup"><span data-stu-id="d0182-214">640 Mbps</span></span> <br><br> <span data-ttu-id="d0182-215">Quita de rendimiento considerablemente si Hola cambia datos (que es necesario toobe copia de seguridad) es dispersa en disco Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-215">Throughput drops significantly if hello changed data (that needs toobe backed up) is dispersed across hello disk.</span></span>|

## <a name="total-vm-backup-time"></a><span data-ttu-id="d0182-216">Tiempo total de copia de seguridad de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="d0182-216">Total VM backup time</span></span>
<span data-ttu-id="d0182-217">Aunque la mayor parte de hora de copia de seguridad de Hola se dedica a leer y copiar los datos, otras operaciones contribuyen toohello tiempo total necesario tooback seguridad de una máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="d0182-217">While most of hello backup time is spent reading and copying data, other operations contribute toohello total time needed tooback up a VM:</span></span>

* <span data-ttu-id="d0182-218">Necesita demasiado tiempo[instalar o actualizar la extensión de copia de seguridad de hello](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="d0182-218">Time needed too[install or update hello backup extension](backup-azure-vms.md).</span></span>
* <span data-ttu-id="d0182-219">Hora de la instantánea, que es hello tootrigger de tiempo que tarda una instantánea.</span><span class="sxs-lookup"><span data-stu-id="d0182-219">Snapshot time, which is hello time taken tootrigger a snapshot.</span></span> <span data-ttu-id="d0182-220">Las instantáneas son de tiempo de copia de seguridad de desencadenadas toohello cierre programado.</span><span class="sxs-lookup"><span data-stu-id="d0182-220">Snapshots are triggered close toohello scheduled backup time.</span></span>
* <span data-ttu-id="d0182-221">Tiempo de espera en la cola.</span><span class="sxs-lookup"><span data-stu-id="d0182-221">Queue wait time.</span></span> <span data-ttu-id="d0182-222">Puesto que el servicio de copia de seguridad de Hola procesa con copias de seguridad desde varios clientes, copiar datos de copia de seguridad de servicios de recuperación o copia de seguridad de instantánea toohello almacén podría no iniciarse inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="d0182-222">Since hello Backup service is processing backups from multiple customers, copying backup data from snapshot toohello backup or Recovery Services vault might not start immediately.</span></span> <span data-ttu-id="d0182-223">En los momentos de picos de carga, puede ajustar Hola espera tooeight horas debido toohello número de copias de seguridad que se va a procesar.</span><span class="sxs-lookup"><span data-stu-id="d0182-223">In times of peak load, hello wait can stretch up tooeight hours due toohello number of backups being processed.</span></span> <span data-ttu-id="d0182-224">Sin embargo, el tiempo de copia de seguridad de VM total hello es inferior a 24 horas para las directivas de copia de seguridad diarias.</span><span class="sxs-lookup"><span data-stu-id="d0182-224">However, hello total VM backup time is less than 24 hours for daily backup policies.</span></span>
* <span data-ttu-id="d0182-225">Tiempo de transferencia de datos, tiempo necesario para la copia de seguridad toocompute Hola los cambios incrementales desde la copia de seguridad anterior del servicio y transferir esos almacenamiento toovault de cambios.</span><span class="sxs-lookup"><span data-stu-id="d0182-225">Data transfer time, time needed for backup service toocompute hello incremental changes from previous backup and transfer those changes toovault storage.</span></span>

### <a name="why-am-i-observing-longer12-hours-backup-time"></a><span data-ttu-id="d0182-226">¿Por qué veo un tiempo de copia de seguridad más largo (>12 horas)?</span><span class="sxs-lookup"><span data-stu-id="d0182-226">Why am I observing longer(>12 hours) backup time?</span></span>
<span data-ttu-id="d0182-227">Copia de seguridad consta de dos fases: tomar instantáneas y la transferencia de Hola instantáneas toohello almacén.</span><span class="sxs-lookup"><span data-stu-id="d0182-227">Backup consists of two phases: taking snapshots and transferring hello snapshots toohello vault.</span></span> <span data-ttu-id="d0182-228">Hola servicio de copia de seguridad se optimiza para el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-228">hello Backup service optimizes for storage.</span></span> <span data-ttu-id="d0182-229">Al transferir datos tooa almacén de hello instantánea, servicio de hello transfiere solo los cambios incrementales desde la instantánea anterior Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-229">When transferring hello snapshot data tooa vault, hello service only transfers incremental changes from hello previous snapshot.</span></span>  <span data-ttu-id="d0182-230">toodetermine cambios incrementales de hello, servicio de hello calcula suma de comprobación de Hola de bloques de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-230">toodetermine hello incremental changes, hello service computes hello checksum of hello blocks.</span></span> <span data-ttu-id="d0182-231">Si se cambia un bloque, bloque de Hola se identifica como un toobe de bloque enviado toohello almacén.</span><span class="sxs-lookup"><span data-stu-id="d0182-231">If a block is changed, hello block is identified as a block toobe sent toohello vault.</span></span> <span data-ttu-id="d0182-232">A continuación, aumenta el servicio Hola aún más en cada una de Hola habían identificado bloques, buscando oportunidades toominimize Hola datos tootransfer.</span><span class="sxs-lookup"><span data-stu-id="d0182-232">Then hello service drills further into each of hello identified blocks, looking for opportunities toominimize hello data tootransfer.</span></span> <span data-ttu-id="d0182-233">Después de evaluar todos los bloques cambiados, servicio de hello fusiona cambios hello y los envía toohello almacén.</span><span class="sxs-lookup"><span data-stu-id="d0182-233">After evaluating all changed blocks, hello service coalesces hello changes and sends them toohello vault.</span></span> <span data-ttu-id="d0182-234">En algunas aplicaciones heredadas, las escrituras pequeñas y fragmentadas no son óptimas para el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-234">In some legacy applications, small, fragmented writes are not optimal for storage.</span></span> <span data-ttu-id="d0182-235">Si instantánea hello contiene muchas escrituras pequeñas, fragmentados, servicio Hola emplea más tiempo de procesamiento de datos de hello escritos aplicaciones de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-235">If hello snapshot contains many small, fragmented writes, hello service spends additional time processing hello data written by hello applications.</span></span> <span data-ttu-id="d0182-236">Hola recomendada bloque de escritura de aplicaciones de Azure, para aplicaciones que se ejecutan dentro de Hola de máquina virtual, es un mínimo de 8 KB.</span><span class="sxs-lookup"><span data-stu-id="d0182-236">hello recommended application write block from Azure, for applications running inside hello VM, is a minimum of 8 KB.</span></span> <span data-ttu-id="d0182-237">Si la aplicación utiliza un bloque de menos de 8 KB, se realiza el rendimiento de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-237">If your application uses a block of less than 8 KB, backup performance is effected.</span></span> <span data-ttu-id="d0182-238">Para obtener ayuda con el rendimiento de copia de seguridad de tooimprove de aplicación para la optimización, vea [aplicaciones para un rendimiento óptimo con el almacenamiento de Azure para la optimización](../storage/common/storage-premium-storage-performance.md).</span><span class="sxs-lookup"><span data-stu-id="d0182-238">For help with tuning your application tooimprove backup performance, see [Tuning applications for optimal performance with Azure storage](../storage/common/storage-premium-storage-performance.md).</span></span> <span data-ttu-id="d0182-239">Aunque el artículo de hello en el rendimiento de copia de seguridad utilizan ejemplos de almacenamiento Premium, instrucciones de hello es aplicable para discos de almacenamiento estándar.</span><span class="sxs-lookup"><span data-stu-id="d0182-239">Though hello article on backup performance uses Premium storage examples, hello guidance is applicable for Standard storage disks.</span></span>

## <a name="total-restore-time"></a><span data-ttu-id="d0182-240">Tiempo total de restauración</span><span class="sxs-lookup"><span data-stu-id="d0182-240">Total restore time</span></span>
<span data-ttu-id="d0182-241">Una operación de restauración consta de dos tareas de sub main: copiar datos desde la cuenta de almacenamiento del cliente de hello almacén toohello elegido y la creación de la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-241">A restore operation consists of two main sub tasks: Copying data back from hello vault toohello chosen customer storage account, and creating hello virtual machine.</span></span> <span data-ttu-id="d0182-242">Copiar datos desde el almacén de hello depende de dónde se almacenan internamente las copias de seguridad de hello en Azure y donde se almacena la cuenta de almacenamiento del cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-242">Copying data back from hello vault depends on where hello backups are stored internally in Azure, and where hello customer storage account is stored.</span></span> <span data-ttu-id="d0182-243">Tiempo que tarda toocopy datos depende de:</span><span class="sxs-lookup"><span data-stu-id="d0182-243">Time taken toocopy data depends upon:</span></span>
* <span data-ttu-id="d0182-244">-Tiempo de espera en cola desde procesos de servicio de hello trabajos de restauración desde varios clientes en hello mismo tiempo, las solicitudes de restauración son ponen en cola.</span><span class="sxs-lookup"><span data-stu-id="d0182-244">Queue wait time - Since hello service processes restore jobs from multiple customers at hello same time, restore requests are put in a queue.</span></span>
* <span data-ttu-id="d0182-245">Tiempo - de copia de datos se copian datos de cuenta de almacenamiento de hello almacén toohello cliente.</span><span class="sxs-lookup"><span data-stu-id="d0182-245">Data copy time - Data is copied from hello vault toohello customer storage account.</span></span> <span data-ttu-id="d0182-246">Restaurar tiempo depende de IOPS y obtiene rendimiento servicio de copia de seguridad de Azure en la cuenta de almacenamiento del cliente de hello seleccionado.</span><span class="sxs-lookup"><span data-stu-id="d0182-246">Restore time depends on IOPS and throughput Azure Backup service gets on hello selected customer storage account.</span></span> <span data-ttu-id="d0182-247">tooreduce Hola Copiar hora durante el proceso de restauración de hello, seleccione una cuenta de almacenamiento no se cargó con otras lecturas y escrituras de aplicación.</span><span class="sxs-lookup"><span data-stu-id="d0182-247">tooreduce hello copying time during hello restore process, select a storage account not loaded with other application writes and reads.</span></span>

## <a name="best-practices"></a><span data-ttu-id="d0182-248">Prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="d0182-248">Best practices</span></span>
<span data-ttu-id="d0182-249">Se recomienda seguir estos procedimientos recomendados al configurar copias de seguridad para máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="d0182-249">We suggest following these practices while configuring backups for virtual machines:</span></span>

* <span data-ttu-id="d0182-250">No programar más de 10 VM clásicas de hello mismo nube servicio tooback en hello mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="d0182-250">Don't schedule more than 10 classic VMs from hello same cloud service tooback up at hello same time.</span></span> <span data-ttu-id="d0182-251">Si desea tooback de varias máquinas virtuales del mismo servicio en la nube, escalonar las horas de inicio de copia de seguridad de hello en una hora.</span><span class="sxs-lookup"><span data-stu-id="d0182-251">If you want tooback up multiple VMs from same cloud service, stagger hello backup start times by an hour.</span></span>
* <span data-ttu-id="d0182-252">No programe más de 40 tooback de máquinas virtuales de seguridad en hello mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="d0182-252">Do not schedule more than 40 VMs tooback up at hello same time.</span></span>
* <span data-ttu-id="d0182-253">Programe las copias de seguridad de máquinas virtuales durante horas de poca actividad.</span><span class="sxs-lookup"><span data-stu-id="d0182-253">Schedule VM backups during non-peak hours.</span></span> <span data-ttu-id="d0182-254">Este servicio de copia de seguridad de Hola de forma usa e/s por segundo para transferir datos desde el depósito de toohello de hello del cliente de cuenta.</span><span class="sxs-lookup"><span data-stu-id="d0182-254">This way hello Backup service uses IOPS for transferring data from hello customer storage account toohello vault.</span></span>
* <span data-ttu-id="d0182-255">Asegúrese de que una directiva se aplique en máquinas virtuales entre distintas cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d0182-255">Make sure that a policy is applied on VMs spread across different storage accounts.</span></span> <span data-ttu-id="d0182-256">Se recomienda no más de 20 total discos desde una única cuenta de almacenamiento estará protegida por hello misma programación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-256">We suggest no more than 20 total disks from a single storage account be protected by hello same backup schedule.</span></span> <span data-ttu-id="d0182-257">Si tiene mayor que 20 discos en una cuenta de almacenamiento, se propagan esas máquinas virtuales a través de varias de las directivas de tooget Hola IOPS necesarias durante la fase de transferencia de hello del proceso de copia de seguridad de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-257">If you have greater than 20 disks in a storage account, spread those VMs across multiple policies tooget hello required IOPS during hello transfer phase of hello backup process.</span></span>
* <span data-ttu-id="d0182-258">No restaure una máquina virtual que se ejecuta en la cuenta de almacenamiento de toosame de almacenamiento Premium.</span><span class="sxs-lookup"><span data-stu-id="d0182-258">Do not restore a VM running on Premium storage toosame storage account.</span></span> <span data-ttu-id="d0182-259">Si el proceso de operación de restauración de hello coincide con la operación de copia de seguridad de hello, reduce Hola IOPS disponible para copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-259">If hello restore operation process coincides with hello backup operation, it reduces hello available IOPS for backup.</span></span>
* <span data-ttu-id="d0182-260">Para una copia de seguridad de la máquina virtual Premium, asegúrese de que la cuenta de almacenamiento que hospeda los discos Premium tenga al menos 50 % de espacio libre para que la instantánea de almacenamiento provisional realice una copia de seguridad correcta.</span><span class="sxs-lookup"><span data-stu-id="d0182-260">For Premium VM backup, ensure that storage account that hosts premium disks has atleast 50% free space for staging snapshot for a successful backup.</span></span> 
* <span data-ttu-id="d0182-261">Asegúrese de que la versión de python en máquinas virtuales Linux habilitadas para la copia de seguridad sea 2.7</span><span class="sxs-lookup"><span data-stu-id="d0182-261">Make sure that python version on Linux VMs enabled for backup is 2.7</span></span>

## <a name="data-encryption"></a><span data-ttu-id="d0182-262">Cifrado de datos</span><span class="sxs-lookup"><span data-stu-id="d0182-262">Data encryption</span></span>
<span data-ttu-id="d0182-263">Copia de seguridad de Azure no cifra los datos como parte del proceso de copia de seguridad de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-263">Azure Backup does not encrypt data as a part of hello backup process.</span></span> <span data-ttu-id="d0182-264">Sin embargo, puede cifrar los datos dentro de hello VM y copia de seguridad Hola datos protegidos sin problemas (Obtenga más información sobre [copia de seguridad de los datos cifrados](backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="d0182-264">However, you can encrypt data within hello VM and back up hello protected data seamlessly (read more about [backup of encrypted data](backup-azure-vms-encryption.md)).</span></span>

## <a name="calculating-hello-cost-of-protected-instances"></a><span data-ttu-id="d0182-265">Calcular el costo de Hola de instancias protegidas</span><span class="sxs-lookup"><span data-stu-id="d0182-265">Calculating hello cost of protected instances</span></span>
<span data-ttu-id="d0182-266">Máquinas virtuales de Azure que se copian mediante copia de seguridad de Azure están sujetas demasiado[precios de copia de seguridad de Azure](https://azure.microsoft.com/pricing/details/backup/).</span><span class="sxs-lookup"><span data-stu-id="d0182-266">Azure virtual machines that are backed up through Azure Backup are subject too[Azure Backup pricing](https://azure.microsoft.com/pricing/details/backup/).</span></span> <span data-ttu-id="d0182-267">Hola cálculo de instancias protegidas se basa en hello *real* tamaño de máquina virtual de hello, que es la suma de Hola de todos los datos de hello en la máquina virtual de hello--excepto Hola "disco de recursos".</span><span class="sxs-lookup"><span data-stu-id="d0182-267">hello Protected Instances calculation is based on hello *actual* size of hello virtual machine, which is hello sum of all hello data in hello virtual machine--excluding hello “resource disk.”</span></span>

<span data-ttu-id="d0182-268">Precios de copia de seguridad de máquinas virtuales es *no* según tamaño Hola máximo compatible para cada máquina virtual de datos disco toohello adjunto.</span><span class="sxs-lookup"><span data-stu-id="d0182-268">Pricing for backing up VMs is *not* based on hello maximum supported size for each data disk attached toohello virtual machine.</span></span> <span data-ttu-id="d0182-269">Precio se basa en datos reales de hello almacenados en disco de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-269">Pricing is based on hello actual data stored in hello data disk.</span></span> <span data-ttu-id="d0182-270">Del mismo modo, facturación de almacenamiento de copia de seguridad de Hola se basa en la cantidad de Hola de datos que se almacenan en la copia de seguridad de Azure, que es la suma de Hola de datos reales de hello en cada punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="d0182-270">Similarly, hello backup storage bill is based on hello amount of data that is stored in Azure Backup, which is hello sum of hello actual data in each recovery point.</span></span>

<span data-ttu-id="d0182-271">Por ejemplo, veamos una máquina virtual de tamaño estándar A2 con dos discos de datos adicionales con un tamaño máximo de 1 TB cada uno.</span><span class="sxs-lookup"><span data-stu-id="d0182-271">For example, take an A2 Standard-sized virtual machine that has two additional data disks with a maximum size of 1 TB each.</span></span> <span data-ttu-id="d0182-272">Hello siguiente tabla ofrece Hola datos almacenados en cada uno de estos discos:</span><span class="sxs-lookup"><span data-stu-id="d0182-272">hello following table gives hello actual data stored on each of these disks:</span></span>

| <span data-ttu-id="d0182-273">Tipo de disco</span><span class="sxs-lookup"><span data-stu-id="d0182-273">Disk type</span></span> | <span data-ttu-id="d0182-274">Tamaño máximo</span><span class="sxs-lookup"><span data-stu-id="d0182-274">Max size</span></span> | <span data-ttu-id="d0182-275">Datos reales presentes</span><span class="sxs-lookup"><span data-stu-id="d0182-275">Actual data present</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d0182-276">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="d0182-276">Operating system disk</span></span> |<span data-ttu-id="d0182-277">1023 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-277">1023 GB</span></span> |<span data-ttu-id="d0182-278">17 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-278">17 GB</span></span> |
| <span data-ttu-id="d0182-279">Disco local o disco de recursos</span><span class="sxs-lookup"><span data-stu-id="d0182-279">Local disk / Resource disk</span></span> |<span data-ttu-id="d0182-280">135 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-280">135 GB</span></span> |<span data-ttu-id="d0182-281">5 GB (no incluidos en la copia de seguridad)</span><span class="sxs-lookup"><span data-stu-id="d0182-281">5 GB (not included for backup)</span></span> |
| <span data-ttu-id="d0182-282">Disco de datos 1</span><span class="sxs-lookup"><span data-stu-id="d0182-282">Data disk 1</span></span> |<span data-ttu-id="d0182-283">1023 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-283">1023 GB</span></span> |<span data-ttu-id="d0182-284">30 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-284">30 GB</span></span> |
| <span data-ttu-id="d0182-285">Disco de datos 2</span><span class="sxs-lookup"><span data-stu-id="d0182-285">Data disk 2</span></span> |<span data-ttu-id="d0182-286">1023 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-286">1023 GB</span></span> |<span data-ttu-id="d0182-287">0 GB</span><span class="sxs-lookup"><span data-stu-id="d0182-287">0 GB</span></span> |

<span data-ttu-id="d0182-288">Hola *real* en este caso es el tamaño de máquina virtual de Hola de 17 GB + 30 GB + 0 GB = 47 GB.</span><span class="sxs-lookup"><span data-stu-id="d0182-288">hello *actual* size of hello virtual machine in this case is 17 GB + 30 GB + 0 GB = 47 GB.</span></span> <span data-ttu-id="d0182-289">Este tamaño de instancias protegidas (47 GB) se convierte en la base de Hola para factura mensual de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-289">This Protected Instance size (47 GB) becomes hello basis for hello monthly bill.</span></span> <span data-ttu-id="d0182-290">Como Hola cantidad de datos en una máquina virtual de hello crece, tamaño de instancias protegidas Hola usado para los cambios de facturación en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="d0182-290">As hello amount of data in hello virtual machine grows, hello Protected Instance size used for billing changes accordingly.</span></span>

<span data-ttu-id="d0182-291">Facturación no se inicia hasta que se complete la copia de seguridad correcta Hola primero.</span><span class="sxs-lookup"><span data-stu-id="d0182-291">Billing does not start until hello first successful backup completes.</span></span> <span data-ttu-id="d0182-292">En este momento, comienza la facturación hello para el almacenamiento e instancias protegidas.</span><span class="sxs-lookup"><span data-stu-id="d0182-292">At this point, hello billing for both Storage and Protected Instances begins.</span></span> <span data-ttu-id="d0182-293">Facturación permanecerá así siempre que hay *cualquier copia de seguridad de datos almacenados en un almacén* para la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-293">Billing continues as long as there is *any backup data stored in a vault* for hello virtual machine.</span></span> <span data-ttu-id="d0182-294">Si detiene la protección en la máquina virtual de hello, pero hay datos de copia de seguridad de máquinas virtuales en un almacén, continúa la facturación.</span><span class="sxs-lookup"><span data-stu-id="d0182-294">If you stop protection on hello virtual machine, but virtual machine backup data exists in a vault, billing continues.</span></span>

<span data-ttu-id="d0182-295">Facturación de una máquina virtual especificada se detiene solo si se detiene la protección de Hola *y* se eliminan todos los datos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0182-295">Billing for a specified virtual machine stops only if hello protection is stopped *and* all backup data is deleted.</span></span> <span data-ttu-id="d0182-296">Cuando se detiene la protección y no hay ningún trabajo de copia de seguridad activa, tamaño Hola de hello última VM copia de seguridad correcta se convierte en el tamaño de instancias protegidas de hello utilizado para la factura mensual de Hola.</span><span class="sxs-lookup"><span data-stu-id="d0182-296">When protection stops and there are no active backup jobs, hello size of hello last successful VM backup becomes hello Protected Instance size used for hello monthly bill.</span></span>

## <a name="questions"></a><span data-ttu-id="d0182-297">¿Tiene preguntas?</span><span class="sxs-lookup"><span data-stu-id="d0182-297">Questions?</span></span>
<span data-ttu-id="d0182-298">Si tiene alguna pregunta, o si hay cualquier característica que le gustaría toosee incluido, [nos envíe sus comentarios](http://aka.ms/azurebackup_feedback).</span><span class="sxs-lookup"><span data-stu-id="d0182-298">If you have questions, or if there is any feature that you would like toosee included, [send us feedback](http://aka.ms/azurebackup_feedback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d0182-299">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d0182-299">Next steps</span></span>
* [<span data-ttu-id="d0182-300">Copia de seguridad de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="d0182-300">Back up virtual machines</span></span>](backup-azure-vms.md)
* [<span data-ttu-id="d0182-301">Administrar copia de seguridad de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="d0182-301">Manage virtual machine backup</span></span>](backup-azure-manage-vms.md)
* [<span data-ttu-id="d0182-302">Restauración de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="d0182-302">Restore virtual machines</span></span>](backup-azure-restore-vms.md)
* [<span data-ttu-id="d0182-303">Solución de problemas de copia de seguridad de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="d0182-303">Troubleshoot VM backup issues</span></span>](backup-azure-vms-troubleshoot.md)

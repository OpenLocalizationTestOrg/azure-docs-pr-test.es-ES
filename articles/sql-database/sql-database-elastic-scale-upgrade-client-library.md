---
title: "biblioteca de cliente de base de datos elástica más reciente de aaaUpgrade toohello | Documentos de Microsoft"
description: "Actualización de aplicaciones y bibliotecas mediante NuGet"
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 0a546510-76e7-465e-9271-f15ff0cfa959
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: ddove
ms.openlocfilehash: cc2c9179be4c53ca59cd24d832127cf277c6e695
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-an-app-toouse-hello-latest-elastic-database-client-library"></a><span data-ttu-id="57dd8-103">Actualizar una aplicación toouse hello más reciente bases de datos elásticas bibliotecas de cliente</span><span class="sxs-lookup"><span data-stu-id="57dd8-103">Upgrade an app toouse hello latest elastic database client library</span></span>
<span data-ttu-id="57dd8-104">Las nuevas versiones de hello [biblioteca de cliente de base de datos elástica](sql-database-elastic-database-client-library.md) están disponibles a través de la interfaz de NuGetPackage Manager NuGetand hello en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57dd8-104">New versions of hello [Elastic Database client library](sql-database-elastic-database-client-library.md) are  available through NuGetand hello NuGetPackage Manager interface in Visual Studio.</span></span> <span data-ttu-id="57dd8-105">Las actualizaciones contienen correcciones de errores y compatibilidad con nuevas capacidades de la biblioteca de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="57dd8-105">Upgrades contain bug fixes and support for new capabilities of hello client library.</span></span>

<span data-ttu-id="57dd8-106">**Para la versión más reciente de hello:** vaya demasiado[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="57dd8-106">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span>

<span data-ttu-id="57dd8-107">Volver a generar la aplicación con la nueva biblioteca de hello, así como cambiar los metadatos de Shard Map Manager existentes almacenados en sus toosupport nuevas características de bases de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="57dd8-107">Rebuild your application with hello new library, as well as change your existing Shard Map Manager metadata stored in your Azure SQL Databases toosupport new features.</span></span>

<span data-ttu-id="57dd8-108">Llevar a cabo estos pasos en orden, se garantiza que las versiones anteriores de la biblioteca de cliente de hello ya no están presentes en un entorno cuando se actualizan los objetos de metadatos, lo que significa que no se creará objetos de metadatos de la antigua versión después de la actualización.</span><span class="sxs-lookup"><span data-stu-id="57dd8-108">Performing these steps in order ensures that old versions of hello client library are no longer present in your environment when metadata objects are updated, which means that old-version metadata objects won’t be created after upgrade.</span></span>   

## <a name="upgrade-steps"></a><span data-ttu-id="57dd8-109">Pasos de actualización</span><span class="sxs-lookup"><span data-stu-id="57dd8-109">Upgrade steps</span></span>
<span data-ttu-id="57dd8-110">**1. Actualice sus aplicaciones.**</span><span class="sxs-lookup"><span data-stu-id="57dd8-110">**1. Upgrade your applications.**</span></span> <span data-ttu-id="57dd8-111">En Visual Studio, la descarga y la versión de biblioteca cliente más reciente de referencia de Hola a todos los proyectos de desarrollo que usan la biblioteca de hello; a continuación, volver a generar e implementar.</span><span class="sxs-lookup"><span data-stu-id="57dd8-111">In Visual Studio, download and reference hello latest client library version into all of your development projects that use hello library; then rebuild and deploy.</span></span> 

* <span data-ttu-id="57dd8-112">En la solución de Visual Studio, seleccione **Herramientas** --> **Administrador de paquetes NuGet** -->  **Administrar paquetes NuGet para la solución**.</span><span class="sxs-lookup"><span data-stu-id="57dd8-112">In your Visual Studio solution, select **Tools** --> **NuGet Package Manager** -->  **Manage NuGet Packages for Solution**.</span></span> 
* <span data-ttu-id="57dd8-113">(Visual Studio 2013) En el panel izquierdo de hello, seleccione **actualizaciones**y, a continuación, seleccione hello **actualización** botón en el paquete de hello **base de datos de SQL Azure elástico biblioteca de cliente escala** que aparece en hello ventana.</span><span class="sxs-lookup"><span data-stu-id="57dd8-113">(Visual Studio 2013) In hello left panel, select **Updates**, and then select hello **Update** button on hello package **Azure SQL Database Elastic Scale Client Library** that appears in hello window.</span></span>
* <span data-ttu-id="57dd8-114">(Visual Studio 2015) Establezca el cuadro de filtro de hello demasiado**actualizar disponible**.</span><span class="sxs-lookup"><span data-stu-id="57dd8-114">(Visual Studio 2015) Set hello Filter box too**Upgrade available**.</span></span> <span data-ttu-id="57dd8-115">Seleccione hello tooupdate de paquete y haga clic en hello **actualización** botón.</span><span class="sxs-lookup"><span data-stu-id="57dd8-115">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="57dd8-116">(2017 de visual Studio) En hello parte superior del cuadro de diálogo de hello, seleccione **actualizaciones**.</span><span class="sxs-lookup"><span data-stu-id="57dd8-116">(Visual Studio 2017) At hello top of hello dialog, select **Updates**.</span></span> <span data-ttu-id="57dd8-117">Seleccione hello tooupdate de paquete y haga clic en hello **actualización** botón.</span><span class="sxs-lookup"><span data-stu-id="57dd8-117">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="57dd8-118">Genere e implemente.</span><span class="sxs-lookup"><span data-stu-id="57dd8-118">Build and Deploy.</span></span> 

<span data-ttu-id="57dd8-119">**2. Actualice los scripts.**</span><span class="sxs-lookup"><span data-stu-id="57dd8-119">**2. Upgrade your scripts.**</span></span> <span data-ttu-id="57dd8-120">Si utilizas **PowerShell** toomanage particiones, las secuencias de comandos [descargar la nueva versión de la biblioteca de hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) y cópielo al directorio de Hola desde el que ejecutar secuencias de comandos.</span><span class="sxs-lookup"><span data-stu-id="57dd8-120">If you are using **PowerShell** scripts toomanage shards, [download hello new library version](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) and copy it into hello directory from which you execute scripts.</span></span> 

<span data-ttu-id="57dd8-121">**3. Actualice el servicio de división y combinación.**</span><span class="sxs-lookup"><span data-stu-id="57dd8-121">**3. Upgrade your split-merge service.**</span></span> <span data-ttu-id="57dd8-122">Si usas Hola bases de datos elásticas herramienta Dividir-combinar tooreorganize datos particionados, [descargar e implementar la versión más reciente de Hola de herramienta de hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span><span class="sxs-lookup"><span data-stu-id="57dd8-122">If you use hello elastic database split-merge tool tooreorganize sharded data, [download and deploy hello latest version of hello tool](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span></span> <span data-ttu-id="57dd8-123">Actualización pasos detallados para Hola se puede encontrar servicio [aquí](sql-database-elastic-scale-overview-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="57dd8-123">Detailed upgrade steps for hello Service can be found [here](sql-database-elastic-scale-overview-split-and-merge.md).</span></span> 

<span data-ttu-id="57dd8-124">**4. Actualice las bases de datos de Shard Map Manager**.</span><span class="sxs-lookup"><span data-stu-id="57dd8-124">**4. Upgrade your Shard Map Manager databases**.</span></span> <span data-ttu-id="57dd8-125">Actualizar los metadatos de hello admiten los mapas de particiones en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="57dd8-125">Upgrade hello metadata supporting your Shard Maps in Azure SQL Database.</span></span>  <span data-ttu-id="57dd8-126">Hay dos maneras de hacerlo, mediante PowerShell o C#.</span><span class="sxs-lookup"><span data-stu-id="57dd8-126">There are two ways you can accomplish this, using PowerShell or C#.</span></span> <span data-ttu-id="57dd8-127">Ambas opciones se muestran a continuación.</span><span class="sxs-lookup"><span data-stu-id="57dd8-127">Both options are shown below.</span></span>

<span data-ttu-id="57dd8-128">***Opción 1: actualizar los metadatos mediante PowerShell***</span><span class="sxs-lookup"><span data-stu-id="57dd8-128">***Option 1: Upgrade metadata using PowerShell***</span></span>

1. <span data-ttu-id="57dd8-129">Descargar hello más reciente de línea de comandos la utilidad de NuGet desde [aquí](http://nuget.org/nuget.exe) y guardar tooa carpeta.</span><span class="sxs-lookup"><span data-stu-id="57dd8-129">Download hello latest command-line utility for NuGet from [here](http://nuget.org/nuget.exe) and save tooa folder.</span></span> 
2. <span data-ttu-id="57dd8-130">Abra un símbolo del sistema, vaya toohello misma carpeta y problema Hola comando:`nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span><span class="sxs-lookup"><span data-stu-id="57dd8-130">Open a Command Prompt, navigate toohello same folder, and issue hello command: `nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span></span>
3. <span data-ttu-id="57dd8-131">Desplácese subcarpeta toohello que contiene Hola nueva DLL versión de cliente que se acaba de descargar, por ejemplo:`cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span><span class="sxs-lookup"><span data-stu-id="57dd8-131">Navigate toohello subfolder containing hello new client DLL version you have just downloaded, for example: `cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span></span>
4. <span data-ttu-id="57dd8-132">Descargar Hola elástico de base de datos cliente actualización scriptlet de hello [centro de scripts de](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), y guardarlo en hello la misma carpeta que contiene Hola DLL.</span><span class="sxs-lookup"><span data-stu-id="57dd8-132">Download hello elastic database client upgrade scriptlet from hello [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), and save it into hello same folder containing hello DLL.</span></span>
5. <span data-ttu-id="57dd8-133">Desde esa carpeta, ejecute "PowerShell.\upgrade.ps1" Hola desde línea de comandos y siga las indicaciones de Hola.</span><span class="sxs-lookup"><span data-stu-id="57dd8-133">From that folder, run “PowerShell .\upgrade.ps1” from hello command prompt and follow hello prompts.</span></span>

<span data-ttu-id="57dd8-134">***Opción 2: actualizar los metadatos mediante C#***</span><span class="sxs-lookup"><span data-stu-id="57dd8-134">***Option 2: Upgrade metadata using C#***</span></span>

<span data-ttu-id="57dd8-135">O bien, crear una aplicación de Visual Studio que abre su ShardMapManager, recorre en iteración todas las particiones y realiza una actualización de metadatos de hello llamando a métodos de hello [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) y [ UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) como en este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="57dd8-135">Alternatively, create a Visual Studio application that opens your ShardMapManager, iterates over all shards, and performs hello metadata upgrade by calling hello methods [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) and [UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) as in this example:</span></span> 

    ShardMapManager smm =
       ShardMapManagerFactory.GetSqlShardMapManager
       (connStr, ShardMapManagerLoadPolicy.Lazy); 
    smm.UpgradeGlobalStore(); 

    foreach (ShardLocation loc in
     smm.GetDistinctShardLocations()) 
    {   
       smm.UpgradeLocalStore(loc); 
    } 

<span data-ttu-id="57dd8-136">Estas técnicas para las actualizaciones de metadatos se pueden aplicar varias veces sin problema.</span><span class="sxs-lookup"><span data-stu-id="57dd8-136">These techniques for metadata upgrades can be applied multiple times without harm.</span></span> <span data-ttu-id="57dd8-137">Por ejemplo, si una versión anterior del cliente sin darse cuenta crea una partición después de haber actualizado ya, puede ejecutar actualización nuevo a través de tooensure de todas las particiones que hello versión más reciente de metadatos está presente en toda la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="57dd8-137">For example, if an older client version inadvertently creates a shard after you have already updated, you can run upgrade again across all shards tooensure that hello latest metadata version is present throughout your infrastructure.</span></span> 

<span data-ttu-id="57dd8-138">**Nota:** a fecha de publicación de las nuevas versiones de la biblioteca de cliente de Hola continuar toowork con las versiones anteriores de hello Shard Map Manager metadatos en la base de datos de SQL Azure y viceversa.</span><span class="sxs-lookup"><span data-stu-id="57dd8-138">**Note:**  New versions of hello client library published to-date continue toowork with prior versions of hello Shard Map Manager metadata on Azure SQL DB, and vice-versa.</span></span>   <span data-ttu-id="57dd8-139">Sin embargo tootake aprovechar algunas de las nuevas características de Hola de cliente más reciente de hello, metadatos necesita toobe actualizado.</span><span class="sxs-lookup"><span data-stu-id="57dd8-139">However tootake advantage of some of hello new features in hello latest client, metadata needs toobe upgraded.</span></span>   <span data-ttu-id="57dd8-140">Tenga en cuenta que las actualizaciones de metadatos no afecte a los datos de usuario o datos específicos de la aplicación, solo los objetos creados y utilizados por hello Shard Map Manager.</span><span class="sxs-lookup"><span data-stu-id="57dd8-140">Note that metadata upgrades will not affect any user-data or application-specific data, only objects created and used by hello Shard Map Manager.</span></span>  <span data-ttu-id="57dd8-141">Y las aplicaciones siguen toooperate a través de la secuencia de actualización de Hola que se ha descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="57dd8-141">And applications continue toooperate through hello upgrade sequence described above.</span></span> 

## <a name="elastic-database-client-version-history"></a><span data-ttu-id="57dd8-142">Historial de versiones de cliente de base de datos elástica</span><span class="sxs-lookup"><span data-stu-id="57dd8-142">Elastic database client version history</span></span>
<span data-ttu-id="57dd8-143">Para el historial de versiones, vaya demasiado[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span><span class="sxs-lookup"><span data-stu-id="57dd8-143">For version history, go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]:./media/sql-database-elastic-scale-upgrade-client-library/nuget-upgrade.png


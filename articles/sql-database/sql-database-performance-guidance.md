---
title: rendimiento de la base de datos SQL de aaaAzure directrices de ajuste | Documentos de Microsoft
description: "En este artículo puede ayudarle a determinar qué toochoose de nivel de servicio para la aplicación. También recomienda formas tootune su Hola de tooget aplicación máximo partido de la base de datos de SQL Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="32bb7-104">Ajuste del rendimiento en Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="32bb7-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="32bb7-105">Base de datos de SQL Azure proporciona [recomendaciones](sql-database-advisor.md) que puede usar tooimprove rendimiento de la base de datos, o puede dejar base de datos de SQL Azure [tooyour aplicación se adaptan automáticamente](sql-database-automatic-tuning.md) y aplicar cambios que mejorará el rendimiento de la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="32bb7-106">En el no hay ninguna recomendación aplicable y sigue teniendo problemas de rendimiento, podría utilizar Hola siguientes prestaciones de tooimprove de métodos:</span><span class="sxs-lookup"><span data-stu-id="32bb7-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="32bb7-107">Aumentar [niveles de servicio](sql-database-service-tiers.md) y proporcionar la base de datos de más recursos tooyour.</span><span class="sxs-lookup"><span data-stu-id="32bb7-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="32bb7-108">Ajuste la aplicación y aplique algunas prácticas recomendadas que puedan mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="32bb7-109">Optimizar la base de datos de hello cambiando los índices y las consultas toomore trabajar eficazmente con datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="32bb7-110">Se trata de métodos manuales porque necesita toodecide qué [niveles de servicio](sql-database-service-tiers.md) elegiría o se necesita la aplicación de toorewrite o de código de base de datos e implementar cambios Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="32bb7-111">Aumento del nivel de rendimiento de su base de datos</span><span class="sxs-lookup"><span data-stu-id="32bb7-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="32bb7-112">Azure SQL Database ofrece cuatro [niveles de servicio](sql-database-service-tiers.md) que puede elegir de entre: Básico, Estándar, Premium y Premium RS (el rendimiento se mide en unidades de procesamiento de base de datos o [DTU](sql-database-what-is-a-dtu.md)).</span><span class="sxs-lookup"><span data-stu-id="32bb7-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="32bb7-113">Cada nivel de servicio aísla estrictamente recursos de Hola que puede utilizar la base de datos SQL y garantiza un rendimiento predecible para ese nivel de servicio.</span><span class="sxs-lookup"><span data-stu-id="32bb7-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="32bb7-114">En este artículo, se ofrecen directrices que pueden ayudarle a elegir el nivel de servicio de hello para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="32bb7-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="32bb7-115">También se explican maneras que se puede ajustar su Hola de tooget aplicación máximo partido de la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="32bb7-116">Este artículo se centra en la guía de rendimiento para bases de datos únicas de Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="32bb7-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="32bb7-117">Para obtener instrucciones de rendimiento los bloques de tooelastic relacionados, consulte [consideraciones de precio y rendimiento para grupos elásticos](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="32bb7-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="32bb7-118">Sin embargo, tenga en cuenta que puede aplicar muchas recomendaciones en este toodatabases artículo en un grupo elástico de optimización de Hola y obtener los beneficios de rendimiento similares.</span><span class="sxs-lookup"><span data-stu-id="32bb7-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="32bb7-119">**Básico**: Hola servicio básico nivel ofrece buena predicción del rendimiento para cada base de datos, la hora en horas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="32bb7-120">En una base de datos básica, hay suficientes recursos para proporcionar un buen rendimiento en bases de datos pequeñas que no tienen varias solicitudes simultáneas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="32bb7-121">Los casos de uso típicos de cuándo se usaría un nivel de servicio Básico son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="32bb7-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="32bb7-122">**Acaba de empezar con Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="32bb7-123">Las aplicaciones que están en desarrollo no necesitan habitualmente altos niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="32bb7-124">Las bases de datos básicas son un entorno adecuado para el desarrollo de bases de datos o pruebas a un precio bajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="32bb7-125">**Tiene una base de datos con un único usuario**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-125">**You have a database with a single user**.</span></span> <span data-ttu-id="32bb7-126">Las aplicaciones que asocian un único usuario a una base de datos normalmente no tienen grandes requisitos de simultaneidad y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="32bb7-127">Estas aplicaciones son candidatos para el nivel de servicio básico de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="32bb7-128">**Estándar**: nivel de servicio estándar de hello ofrece la capacidad de predicción de mejorar el rendimiento y proporciona un buen rendimiento para bases de datos que tienen varias solicitudes simultáneas, como aplicaciones web y de grupo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="32bb7-129">Cuando se usa una base de datos con un nivel de servicio Estándar, puede ajustar el tamaño de la aplicación de base de datos según un rendimiento predecible, minuto a minuto.</span><span class="sxs-lookup"><span data-stu-id="32bb7-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="32bb7-130">**La base de datos tiene varias solicitudes simultáneas**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="32bb7-131">Las aplicaciones que atienden a más de un usuario a la vez suelen necesitar niveles de rendimiento más altos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="32bb7-132">Por ejemplo, las aplicaciones web o de grupo de trabajo que tengan requisitos de tráfico de E/S de bajo toomedium admite varias consultas simultáneas son buenos candidatos para el nivel de servicio estándar Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="32bb7-133">**Premium**: nivel de servicio Premium de hello proporciona un rendimiento predecible, segunda en segundo lugar, para cada base de datos Premium.</span><span class="sxs-lookup"><span data-stu-id="32bb7-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="32bb7-134">Cuando se elige el nivel de servicio Premium de hello, puede cambiar el tamaño de la aplicación de base de datos según la carga pico de Hola para esa base de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="32bb7-135">plan de Hello elimina aquellos casos en que la variación de rendimiento puede hacer más tiempo del esperado en operaciones sensibles a la latencia de las consultas pequeñas tootake.</span><span class="sxs-lookup"><span data-stu-id="32bb7-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="32bb7-136">Este modelo puede simplificar considerablemente los ciclos de validación de hello desarrollo y producto para las aplicaciones que necesitan toomake declaraciones firmes sobre necesidades máximas de recursos, variación de rendimiento o latencia de las consultas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="32bb7-137">La mayoría de los casos de uso del nivel de servicio Premium tienen una o varias de estas características:</span><span class="sxs-lookup"><span data-stu-id="32bb7-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="32bb7-138">**Carga máxima elevada**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-138">**High peak load**.</span></span> <span data-ttu-id="32bb7-139">Una aplicación que requiere sustancial CPU, memoria o entrada/salida (E/S) toocomplete sus operaciones requiere un nivel dedicado y de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="32bb7-140">Por ejemplo, una operación de base de datos conocido tooconsume varios núcleos de CPU durante un período prolongado es un candidato para el nivel de servicio Premium de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="32bb7-141">**Muchas solicitudes simultáneas**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-141">**Many concurrent requests**.</span></span> <span data-ttu-id="32bb7-142">Algunas aplicaciones de base de datos atienden muchas solicitudes simultáneas, por ejemplo, cuando dan servicio a un sitio web con un volumen elevado de tráfico.</span><span class="sxs-lookup"><span data-stu-id="32bb7-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="32bb7-143">Básico y estándar niveles de servicio limitan número de Hola de solicitudes simultáneas por base de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="32bb7-144">Las aplicaciones que requieren más conexiones necesitaría toochoose un reserva suficiente tamaño toohandle Hola número máximo de solicitudes necesarias.</span><span class="sxs-lookup"><span data-stu-id="32bb7-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="32bb7-145">**Baja latencia**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-145">**Low latency**.</span></span> <span data-ttu-id="32bb7-146">Algunas aplicaciones necesitan tooguarantee una respuesta de la base de datos de hello en un tiempo mínimo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="32bb7-147">Si se llama a un procedimiento almacenado específico como parte de una operación de cliente más amplia, podría tener un requisito toohave una devolución de llamada en no más de 20 milisegundos, 99 por ciento de tiempo de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="32bb7-148">Este tipo de los beneficios de la aplicación de nivel de servicio Premium de hello, toomake seguro de que Hola requiere capacidad de ejecución está disponible.</span><span class="sxs-lookup"><span data-stu-id="32bb7-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="32bb7-149">**Premium RS**: Hola nivel Premium RS está diseñado para cargas de trabajo intensivo que no requieren Hola mayor garantía de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="32bb7-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="32bb7-150">Los ejemplos incluyen las pruebas en cargas de trabajo de alto rendimiento, o una carga de trabajo analítico donde la base de datos de hello no es sistema Hola de registro.</span><span class="sxs-lookup"><span data-stu-id="32bb7-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="32bb7-151">nivel de servicio de Hola que necesite para la base de datos SQL depende de los requisitos de carga máxima de Hola para cada dimensión de recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="32bb7-152">Algunas aplicaciones usan pocas cantidades de un recurso pero tienen necesidades considerables de otros.</span><span class="sxs-lookup"><span data-stu-id="32bb7-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="32bb7-153">Límites y capacidades de nivel de servicio</span><span class="sxs-lookup"><span data-stu-id="32bb7-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="32bb7-154">En cada nivel de servicio, establecer el nivel de rendimiento de hello, por lo que tendrá Hola flexibilidad toopay solo para la capacidad de Hola que necesita.</span><span class="sxs-lookup"><span data-stu-id="32bb7-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="32bb7-155">También puede [ajustar la capacidad](sql-database-service-tiers.md), hacia arriba o hacia abajo, según los cambios en la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="32bb7-156">Por ejemplo, si la carga de trabajo de la base de datos es elevada durante la época de compras de vuelta al colegio hello, puede aumentar el nivel de rendimiento de Hola de base de datos de Hola durante un tiempo establecido, julio a septiembre.</span><span class="sxs-lookup"><span data-stu-id="32bb7-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="32bb7-157">Luego, puede reducirla cuando finalice la temporada de actividad máxima.</span><span class="sxs-lookup"><span data-stu-id="32bb7-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="32bb7-158">Puede minimizar lo que paga al optimizar la estacionalidad de toohello de entorno de nube de su negocio.</span><span class="sxs-lookup"><span data-stu-id="32bb7-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="32bb7-159">Este modelo también funciona bien para los ciclos de lanzamiento de productos de software.</span><span class="sxs-lookup"><span data-stu-id="32bb7-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="32bb7-160">Un equipo de pruebas puede asignar capacidad mientras realiza ejecuciones de prueba y luego liberar esa capacidad cuando finalicen las pruebas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="32bb7-161">En un modelo de solicitud de capacidad, se paga por la capacidad que necesite, así se evita gastos en recursos dedicados que raramente usa.</span><span class="sxs-lookup"><span data-stu-id="32bb7-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="32bb7-162">¿Por qué niveles de servicio?</span><span class="sxs-lookup"><span data-stu-id="32bb7-162">Why service tiers?</span></span>
<span data-ttu-id="32bb7-163">Aunque cada carga de trabajo de la base de datos puede ser diferente, el propósito de Hola de niveles de servicio es tooprovide predicción del rendimiento en varios niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="32bb7-164">Los clientes con requisitos de recursos de base de datos a gran escala pueden trabajar en un entorno informático más dedicado.</span><span class="sxs-lookup"><span data-stu-id="32bb7-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="32bb7-165">Optimización de la aplicación</span><span class="sxs-lookup"><span data-stu-id="32bb7-165">Tune your application</span></span>
<span data-ttu-id="32bb7-166">En el servidor SQL local tradicional, a menudo se separa proceso Hola de planeación de la capacidad inicial de proceso Hola de ejecutar una aplicación en producción.</span><span class="sxs-lookup"><span data-stu-id="32bb7-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="32bb7-167">Primero se adquieren las licencias de hardware y productos y luego se ajusta el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="32bb7-168">Cuando se utiliza la base de datos de SQL Azure, es un proceso de hello toointerweave buena idea de cómo ejecutar una aplicación y para la optimización se.</span><span class="sxs-lookup"><span data-stu-id="32bb7-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="32bb7-169">Con el modelo de Hola de pago por capacidad a petición, puede optimizar los aplicación toouse Hola recursos mínimos necesarios ahora, en lugar de en exceso hardware en función de suposiciones de planes de crecimiento futuro de una aplicación, que a menudo son incorrectos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="32bb7-170">Algunos clientes pueden elegir no tootune una aplicación y elija en su lugar toooverprovision los recursos de hardware.</span><span class="sxs-lookup"><span data-stu-id="32bb7-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="32bb7-171">Este enfoque podría ser una buena idea si no desea toochange una aplicación clave durante un período de ocupación.</span><span class="sxs-lookup"><span data-stu-id="32bb7-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="32bb7-172">Sin embargo, optimización de una aplicación puede minimizar los requisitos de recursos y reducir las facturas mensuales cuando se usan los niveles de servicio de hello en base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="32bb7-173">Características de la aplicación</span><span class="sxs-lookup"><span data-stu-id="32bb7-173">Application characteristics</span></span>
<span data-ttu-id="32bb7-174">Aunque los niveles de servicio de base de datos de SQL Azure están diseñadas tooimprove estabilidad del rendimiento y capacidad de predicción para una aplicación, algunas prácticas recomendadas pueden ayudarle a optimizar la aplicación toobetter aprovechar las ventajas de los recursos de hello en un nivel de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="32bb7-175">Aunque muchas aplicaciones tienen importantes mejoras de rendimiento simplemente por cambio tooa mayor nivel de rendimiento o servicio de nivel, algunas aplicaciones precisan adicionales para la optimización toobenefit de un mayor nivel de servicio.</span><span class="sxs-lookup"><span data-stu-id="32bb7-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="32bb7-176">Para aumentar el rendimiento, puede realizar ajustes adicionales en las aplicaciones para que tengan estas características:</span><span class="sxs-lookup"><span data-stu-id="32bb7-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="32bb7-177">**Aplicaciones que tienen un rendimiento lento debido a un comportamiento "comunicativo"**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="32bb7-178">Aplicaciones locuaces realizar operaciones de acceso de exceso de datos que son confidenciales toonetwork latencia.</span><span class="sxs-lookup"><span data-stu-id="32bb7-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="32bb7-179">Tendrá que toomodify estos tipos de número de hello tooreduce de las aplicaciones de base de datos SQL toohello de operaciones de acceso de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="32bb7-180">Por ejemplo, podría mejorar el rendimiento de la aplicación mediante el uso de técnicas como el procesamiento por lotes de consultas ad hoc o mover hello toostored procedimientos de consulta.</span><span class="sxs-lookup"><span data-stu-id="32bb7-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="32bb7-181">Para más información, consulte [Consultas por lotes](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="32bb7-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="32bb7-182">**Bases de datos con una carga de trabajo intensiva que no se admite en una sola máquina**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="32bb7-183">Las bases de datos que superan los recursos de Hola de mayor nivel de rendimiento de Premium Hola pueden beneficiarse del escalado horizontal de carga de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="32bb7-184">Para más información, consulte [Particionamiento entre bases de datos](#cross-database-sharding) y [Creación de particiones funcional](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="32bb7-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="32bb7-185">**Aplicaciones que tienen consultas poco óptimas**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="32bb7-186">Las aplicaciones, especialmente las que en la capa de acceso a datos hello, que tienen consultas poco optimizadas no pueden beneficiarse de un nivel de rendimiento superior.</span><span class="sxs-lookup"><span data-stu-id="32bb7-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="32bb7-187">Esto incluye consultas que carecen de una cláusula WHERE, con índices que faltan o tienen estadísticas anticuadas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="32bb7-188">Estas aplicaciones se benefician de las técnicas de optimización del rendimiento de consultas estándar.</span><span class="sxs-lookup"><span data-stu-id="32bb7-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="32bb7-189">Para más información, consulte [Índices que faltan](#identifying-and-adding-missing-indexes) y [Optimización de consultas y sugerencias](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="32bb7-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="32bb7-190">**Aplicaciones que tienen un diseño de acceso a datos poco óptimo**.</span><span class="sxs-lookup"><span data-stu-id="32bb7-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="32bb7-191">Puede que las aplicaciones que tienen problemas inherentes de simultaneidad de acceso a datos, por ejemplo, interbloqueos, no se beneficien de un nivel de rendimiento más alto.</span><span class="sxs-lookup"><span data-stu-id="32bb7-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="32bb7-192">Considere la posibilidad de reducir los viajes de ida y contra Hola base de datos de SQL Azure mediante los datos en caché en el lado del cliente de hello con hello servicio Caching de Azure u otra tecnología de almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="32bb7-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="32bb7-193">Consulte [Almacenamiento en caché de la capa de aplicación](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="32bb7-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="32bb7-194">Ajuste de la base de datos</span><span class="sxs-lookup"><span data-stu-id="32bb7-194">Tune your database</span></span>
<span data-ttu-id="32bb7-195">En esta sección, veremos algunas técnicas que puede utilizar un rendimiento óptimo Hola de tootune base de datos de SQL Azure toogain para su aplicación y ejecutarla en el nivel más bajo de rendimiento posible de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="32bb7-196">Algunas de estas técnicas coinciden con las prácticas recomendadas de optimización tradicionales de SQL Server, pero otras son específica tooAzure base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="32bb7-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="32bb7-197">En algunos casos, puede examinar Hola consumida recursos para una optimización de base de datos toofind áreas toofurther y extender toowork de técnicas tradicionales de SQL Server en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="32bb7-198">Identificación de problemas de rendimiento mediante Azure Portal</span><span class="sxs-lookup"><span data-stu-id="32bb7-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="32bb7-199">Hola después herramientas Hola portal de Azure puede ayudarle a analizar y solucionar problemas de rendimiento con la base de datos SQL:</span><span class="sxs-lookup"><span data-stu-id="32bb7-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="32bb7-200">Información de rendimiento de consultas</span><span class="sxs-lookup"><span data-stu-id="32bb7-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="32bb7-201">Asesor de Base de datos SQL</span><span class="sxs-lookup"><span data-stu-id="32bb7-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="32bb7-202">Hello portal de Azure proporciona más información acerca de estas herramientas y cómo toouse ellos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="32bb7-203">tooefficiently diagnostique y corrija cualquier problema, le recomendamos que primero intente herramientas Hola Hola portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="32bb7-204">Se recomienda que realice manual de hello para la optimización enfoques que se describen a continuación, para los que faltan índices y optimización de consultas, en casos especiales.</span><span class="sxs-lookup"><span data-stu-id="32bb7-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="32bb7-205">Obtenga más información acerca de cómo identificar problemas en Azure SQL Database en el artículo de [supervisión de rendimiento](sql-database-single-database-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="32bb7-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="32bb7-206">Identificación y adición de índices que faltan</span><span class="sxs-lookup"><span data-stu-id="32bb7-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="32bb7-207">Un problema común de rendimiento de base de datos OLTP está relacionado con el diseño de base de datos física toohello.</span><span class="sxs-lookup"><span data-stu-id="32bb7-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="32bb7-208">A menudo, los esquemas de base de datos se diseñan y se entregan sin realizar pruebas a escala (ya sea en la carga o en el volumen de datos).</span><span class="sxs-lookup"><span data-stu-id="32bb7-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="32bb7-209">Por desgracia, rendimiento de Hola de un plan de consulta podría ser aceptable en una pequeña escala pero degradar sustancialmente en volúmenes de datos de nivel de producción.</span><span class="sxs-lookup"><span data-stu-id="32bb7-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="32bb7-210">origen de Hello más común de este problema es la falta de Hola de filtros de índices adecuados toosatisfy u otras restricciones de una consulta.</span><span class="sxs-lookup"><span data-stu-id="32bb7-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="32bb7-211">A menudo, la falta de índices se manifiesta como un recorrido de tabla cuando podría ser suficiente una búsqueda de índice.</span><span class="sxs-lookup"><span data-stu-id="32bb7-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="32bb7-212">En este ejemplo, plan de consulta seleccionado Hola utiliza un recorrido cuando bastaría con una búsqueda:</span><span class="sxs-lookup"><span data-stu-id="32bb7-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Plan de consulta con índices que faltan](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="32bb7-214">Azure SQL Database puede ayudarle a encontrar y corregir condiciones de falta de índice comunes.</span><span class="sxs-lookup"><span data-stu-id="32bb7-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="32bb7-215">DMV que se integran en la base de datos de SQL Azure mire compilaciones de consultas en el que un índice reduciría considerablemente Hola estimado costo toorun una consulta.</span><span class="sxs-lookup"><span data-stu-id="32bb7-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="32bb7-216">Durante la ejecución de consultas, base de datos SQL realiza un seguimiento de la frecuencia con la que se ejecuta cada plan de consulta y Hola pistas estimado brecha entre hello en ejecución hello y plan de consulta imaginado uno donde existía ese índice.</span><span class="sxs-lookup"><span data-stu-id="32bb7-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="32bb7-217">Puede usar estos estimación de tooquickly DMV qué diseño de base de datos física tooyour cambios podría mejorar el costo de carga de trabajo general para una base de datos y su carga de trabajo real.</span><span class="sxs-lookup"><span data-stu-id="32bb7-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="32bb7-218">Puede utilizar esta posibilidad de tooevaluate consulta índices que faltan:</span><span class="sxs-lookup"><span data-stu-id="32bb7-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="32bb7-219">En este ejemplo, consulta Hola devolvió esta sugerencia:</span><span class="sxs-lookup"><span data-stu-id="32bb7-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="32bb7-220">Después de crearlo, esa misma instrucción SELECT elige un plan diferente, que utiliza una búsqueda en lugar de un análisis y, a continuación, se ejecuta de forma más eficaz en plan hello:</span><span class="sxs-lookup"><span data-stu-id="32bb7-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Plan de consulta con índices corregidos](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="32bb7-222">Hola clave es esa capacidad de E/S de un compartido hello, sistema está más limitada que la de un equipo servidor dedicado.</span><span class="sxs-lookup"><span data-stu-id="32bb7-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="32bb7-223">Es importante minimizar innecesarios E/S tootake máximo las ventajas de sistema de Hola Hola DTU de cada nivel de rendimiento de los niveles de servicio de base de datos de SQL Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="32bb7-224">Las opciones de diseño de base de datos física adecuada significativamente pueden mejorar la latencia de Hola para consultas individuales, mejorar el rendimiento de Hola de solicitudes simultáneas que se controlan por unidad de escala y minimizar la consulta de hello costos necesarios toosatisfy Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="32bb7-225">Para obtener más información acerca de hello falta DMV de índice, vea [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="32bb7-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="32bb7-226">Optimización de consultas y sugerencias</span><span class="sxs-lookup"><span data-stu-id="32bb7-226">Query tuning and hinting</span></span>
<span data-ttu-id="32bb7-227">optimizador de consultas de Hello en la base de datos de SQL Azure es similar toohello tradicional SQL Server optimizador.</span><span class="sxs-lookup"><span data-stu-id="32bb7-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="32bb7-228">En la mayoría de las prácticas recomendadas de Hola para optimizar las consultas y Hola descripción razonamiento limitaciones del modelo de optimizador de consultas de hello también se aplican tooAzure base de datos de SQL.</span><span class="sxs-lookup"><span data-stu-id="32bb7-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="32bb7-229">Si optimizar las consultas de base de datos de SQL Azure, podría obtener ventaja adicional de Hola de reducir las demandas de recursos agregados.</span><span class="sxs-lookup"><span data-stu-id="32bb7-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="32bb7-230">Su aplicación podría ser capaz de toorun a un costo menor que un equivalente no optimizado ya que se puede ejecutar en un nivel de rendimiento inferior.</span><span class="sxs-lookup"><span data-stu-id="32bb7-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="32bb7-231">Un ejemplo que es común en SQL Server y que también aplica tooAzure base de datos SQL es cómo el optimizador "husmea" parámetros de la consulta de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="32bb7-232">Durante la compilación, optimizador de consultas de Hola se evalúa como valor actual de Hola de un parámetro toodetermine si puede generar un plan de consulta más óptimo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="32bb7-233">Aunque a menudo esta estrategia puede provocar tooa plan de consulta que es significativamente más rápido que un plan compilado sin valores de parámetro conocidos, funciona actualmente no entienden bien tanto en SQL Server y en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="32bb7-234">A veces no se examinan parámetro hello y a veces se examinan parámetro hello pero plan generado hello no es óptimo para el conjunto completo de Hola de valores de parámetro en una carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="32bb7-235">Microsoft incluye las sugerencias de consulta (directivas) para que pueda especificar intento más deliberado e invalidar el comportamiento predeterminado de Hola de examen de parámetros.</span><span class="sxs-lookup"><span data-stu-id="32bb7-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="32bb7-236">A menudo, si usas sugerencias, puede corregir los casos en que el comportamiento de SQL Server o base de datos de SQL de Azure predeterminado hello es imperfecto para una carga de trabajo de cliente específico.</span><span class="sxs-lookup"><span data-stu-id="32bb7-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="32bb7-237">Hello de ejemplo siguiente muestra cómo el procesador de consultas de hello puede generar un plan que no es óptimo para rendimiento y requisitos de recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="32bb7-238">Este ejemplo también muestra que si usa una sugerencia de consulta, puede reducir los requisitos de recursos y el tiempo de ejecución de consultas de su base de datos SQL:</span><span class="sxs-lookup"><span data-stu-id="32bb7-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="32bb7-239">código de Hello el programa de instalación crea una tabla que ha sesgado distribución de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="32bb7-240">difiere del plan de consulta óptimo Hola se basa en el parámetro que está seleccionado.</span><span class="sxs-lookup"><span data-stu-id="32bb7-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="32bb7-241">Lamentablemente, comportamiento almacenamiento en caché de plan de hello no siempre recompila consulta hello en función del valor de parámetro más común de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="32bb7-242">Por lo tanto, es posible que un toobe de planes poco óptimos almacena en caché y se utiliza para muchos valores, incluso cuando un plan diferente podría ser una opción mejor de plan en promedio.</span><span class="sxs-lookup"><span data-stu-id="32bb7-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="32bb7-243">A continuación, plan de consulta de hello crea dos procedimientos almacenados que son idénticos, salvo que una tiene una sugerencia de consulta especiales.</span><span class="sxs-lookup"><span data-stu-id="32bb7-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="32bb7-244">**Ejemplo (parte 1):**</span><span class="sxs-lookup"><span data-stu-id="32bb7-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="32bb7-245">**Ejemplo (parte 2):**</span><span class="sxs-lookup"><span data-stu-id="32bb7-245">**Example, part 2**</span></span>

<span data-ttu-id="32bb7-246">(Se recomienda que espere al menos 10 minutos antes de empezar la parte 2 del ejemplo de Hola, para que los resultados de hello son distintos en hello resultantes de los datos de telemetría).</span><span class="sxs-lookup"><span data-stu-id="32bb7-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="32bb7-247">Cada parte de este ejemplo intenta toorun una instrucción insert con parámetros 1.000 veces (toogenerate un toouse de carga suficiente como un conjunto de datos de prueba).</span><span class="sxs-lookup"><span data-stu-id="32bb7-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="32bb7-248">Cuando ejecuta los procedimientos almacenados, procesador de consultas de hello examina el valor del parámetro hello que se pasa toohello procedimiento durante su primera compilación ("examen de parámetros").</span><span class="sxs-lookup"><span data-stu-id="32bb7-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="32bb7-249">procesador de Hello almacena en memoria caché el plan resultante de Hola y lo utiliza para invocaciones posteriores, incluso si el valor del parámetro hello es diferente.</span><span class="sxs-lookup"><span data-stu-id="32bb7-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="32bb7-250">plan óptimo de Hello no podría utilizarse en todos los casos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="32bb7-251">En ciertas ocasiones necesitará tooguide Hola optimizador toopick un plan que es mejor para caso promedio de hello en lugar de mayúsculas y minúsculas Hola desde cuando consulta hello en primer lugar se ha compilado.</span><span class="sxs-lookup"><span data-stu-id="32bb7-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="32bb7-252">En este ejemplo, plan inicial Hola genera un plan de "recorrido" que lee toofind de todas las filas de cada valor que coincida con el parámetro hello:</span><span class="sxs-lookup"><span data-stu-id="32bb7-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Optimización de consultas mediante un plan de exploración](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="32bb7-254">Como ejecutamos el procedimiento de hello mediante Hola valor 1, plan resultante Hola fue óptimo para el valor de hello 1 pero sí poco óptimo para todos los demás valores de tabla de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="32bb7-255">resultado de Hello es probable que no es lo que desearía si estuviera toopick cada plan al azar, porque el plan de hello tiene un rendimiento más lento y utiliza más recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="32bb7-256">Si ejecuta pruebas de hello con `SET STATISTICS IO` establecido demasiado`ON`, trabajo de recorrido lógico de hello en este ejemplo se realiza entre bastidores de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="32bb7-257">Puede ver que hay 1.148 lecturas realizarla plan hello (que es eficaz si caso promedio de hello es tooreturn únicamente una fila):</span><span class="sxs-lookup"><span data-stu-id="32bb7-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Optimización de consultas mediante una exploración lógica](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="32bb7-259">Hola segunda parte del ejemplo de Hola utiliza un toouse del optimizador de consultas sugerencia tootell Hola un valor específico durante el proceso de compilación de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="32bb7-260">En este caso, fuerza Hola procesador tooignore Hola valor de consulta que se pasa como parámetro de hello, y en su lugar tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="32bb7-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="32bb7-261">Esto refiere valor tooa cuya frecuencia promedio de hello en tabla hello (se omite el sesgo).</span><span class="sxs-lookup"><span data-stu-id="32bb7-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="32bb7-262">plan resultante de Hello es un plan de búsqueda que es más rápida y utiliza menos recursos, en promedio, que el plan de hello en la parte 1 de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="32bb7-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Optimización de consultas mediante una sugerencia de consulta](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="32bb7-264">Puede ver el efecto de Hola Hola **sys.resource_stats** tabla (no hay un retraso de tiempo de Hola que ejecutar pruebas de Hola y cuando datos Hola rellenan la tabla de hello).</span><span class="sxs-lookup"><span data-stu-id="32bb7-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="32bb7-265">Para este ejemplo, parte 1 que se ejecuta durante el período de tiempo de hello 22:25:00 y parte 2 ejecutada a las 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="32bb7-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="32bb7-266">Hello período de tiempo anterior usó más recursos en la ventana de tiempo de Hola uno posterior (debido a las mejoras de eficacia del plan).</span><span class="sxs-lookup"><span data-stu-id="32bb7-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Resultados del ejemplo de optimización de consultas](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="32bb7-268">Aunque el volumen de hello en este ejemplo es pequeño intencionadamente, el efecto de Hola de parámetros poco óptimos puede ser considerable, especialmente en las bases de datos más grandes.</span><span class="sxs-lookup"><span data-stu-id="32bb7-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="32bb7-269">diferencia de Hello, en casos extremos, puede estar entre segundos para los casos rápidos y horas para casos lenta.</span><span class="sxs-lookup"><span data-stu-id="32bb7-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="32bb7-270">Puede examinar **sys.resource_stats** toodetermine si el recurso de Hola de una prueba utiliza más o menos recursos que otra prueba.</span><span class="sxs-lookup"><span data-stu-id="32bb7-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="32bb7-271">Al comparar los datos, separar tiempo Hola de pruebas para que no se encuentran en hello mismo período de 5 minutos en hello **sys.resource_stats** vista.</span><span class="sxs-lookup"><span data-stu-id="32bb7-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="32bb7-272">Hello objetivo del ejercicio hello es cantidad total de hello toominimize de recursos que usa y no toominimize Hola máximo los recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="32bb7-273">Por lo general, al optimizar la latencia de un fragmento de código, también se reduce el consumo de recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="32bb7-274">Asegúrese de que los cambios de Hola que realice tooan aplicación son necesarios y que los cambios de hello no afecten negativamente Hola experiencia de alguien que podría usar sugerencias de consulta en la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="32bb7-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="32bb7-275">Si una carga de trabajo tiene un conjunto de consultas repetidas, a menudo hace sentido toocapture y validar idoneidad de Hola de las opciones de plan ya que las unidades de base de datos de hello mínima de recursos tamaño unidad requiere toohost Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="32bb7-276">Después de validar, en ocasiones examinar los planes de hello que toohelp Asegúrese de que no se han degradado.</span><span class="sxs-lookup"><span data-stu-id="32bb7-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="32bb7-277">Puede aprender más sobre las [sugerencias de consulta (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="32bb7-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="32bb7-278">Particionamiento entre bases de datos</span><span class="sxs-lookup"><span data-stu-id="32bb7-278">Cross-database sharding</span></span>
<span data-ttu-id="32bb7-279">Como base de datos de SQL Azure se ejecuta en hardware estándar, los límites de capacidad de Hola para una sola base de datos son menores que para una instalación de SQL Server local tradicional.</span><span class="sxs-lookup"><span data-stu-id="32bb7-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="32bb7-280">Algunos clientes utilizan operaciones de base de datos de toospread de técnicas de particionamiento entre varias bases de datos cuando las operaciones de hello no caben dentro de los límites de Hola de una sola base de datos en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="32bb7-281">La mayoría de los clientes que usan técnicas de particionamiento en Azure SQL Database divide sus datos en una única dimensión entre varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="32bb7-282">En este caso, deberá toounderstand que las aplicaciones OLTP suelen realizan las transacciones que se aplican tooonly una fila o tooa grupo pequeño de filas de esquema de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="32bb7-283">Base de datos SQL proporciona ahora una tooassist de biblioteca con el particionamiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="32bb7-284">Para obtener más información, consulte [Información general de la biblioteca de cliente de bases de datos elásticas](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="32bb7-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="32bb7-285">Por ejemplo, si una base de datos tiene el nombre del cliente, pedido y detalles del pedido (como Hola base de datos Northwind de ejemplo tradicional que se distribuye con SQL Server), podría dividir estos datos en varias bases de datos mediante la agrupación de un cliente con hello relacionados con orden y los detalles de pedido información.</span><span class="sxs-lookup"><span data-stu-id="32bb7-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="32bb7-286">Puede garantizar que los datos de ese cliente hello permanecen en una sola base de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="32bb7-287">aplicación Hello dividiría los distintos clientes a través de las bases de datos, repartir eficazmente Hola carga entre varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="32bb7-288">Con el particionamiento, los clientes no solo pueden evitar límite de tamaño de base de datos máximo de hello, pero la base de datos de SQL Azure también puede procesar las cargas de trabajo que son mucho mayores que los límites de Hola Hola diferentes niveles de rendimiento, siempre y cuando cada base de datos individual se adapta a su DTU.</span><span class="sxs-lookup"><span data-stu-id="32bb7-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="32bb7-289">Aunque el particionamiento de base de datos no reduce la capacidad de recursos agregada de Hola para una solución, es muy eficaz en admitir soluciones muy grandes que se distribuyen en varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="32bb7-290">Cada base de datos puede ejecutar en un rendimiento de nivel toosupport de muy grande, las bases de datos "eficaces" con requisitos elevados de recursos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="32bb7-291">Creación de particiones funcional</span><span class="sxs-lookup"><span data-stu-id="32bb7-291">Functional partitioning</span></span>
<span data-ttu-id="32bb7-292">Los usuarios de SQL Server suelen combinar varias funciones en una base de datos única.</span><span class="sxs-lookup"><span data-stu-id="32bb7-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="32bb7-293">Por ejemplo, si una aplicación tiene el inventario de toomanage de lógica de una tienda, esa base de datos podría tener lógica asociada con el inventario, pedidos de compra, procedimientos almacenados y vistas indizadas o materializadas que administración los informes de fin de mes.</span><span class="sxs-lookup"><span data-stu-id="32bb7-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="32bb7-294">Esta técnica resulta más fácil de base de datos de hello tooadminister para operaciones como copia de seguridad, pero también requiere toosize hello toohandle Hola pico de carga de hardware en todas las funciones de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="32bb7-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="32bb7-295">Si utiliza una arquitectura de escalabilidad horizontal en la base de datos de SQL Azure, es una buena idea toosplit las distintas funciones de una aplicación en diferentes bases de datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="32bb7-296">Mediante esta técnica, cada aplicación se escala de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="32bb7-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="32bb7-297">Cuando una aplicación realiza una actividad mayor (y Hola carga en los incrementos de la base de datos de hello), Administrador de hello puede elegir niveles de rendimiento independientes para cada función en la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="32bb7-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="32bb7-298">En límite de hello, con esta arquitectura, una aplicación puede ser mayor que un solo equipo estándar puede controlar porque carga Hola se reparte entre varias máquinas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="32bb7-299">Consultas por lotes</span><span class="sxs-lookup"><span data-stu-id="32bb7-299">Batch queries</span></span>
<span data-ttu-id="32bb7-300">Para las aplicaciones que tienen acceso a datos mediante el uso de gran volumen, frecuentes, consultas ad hoc, una cantidad considerable de tiempo de respuesta se invierte en la comunicación de red entre la capa de aplicación de Hola y de nivel de base de datos de SQL Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="32bb7-301">Aunque ambos Hola aplicación y base de datos de SQL Azure están en hello mismo centro de datos, latencia de red de hello entre Hola dos podría ser agravado por un gran número de operaciones de acceso a datos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="32bb7-302">red de hello tooreduce round viajes para datos de hello operaciones de acceso, considere el uso de consultas ad hoc de hello opción tooeither lote Hola o toocompile usarlas como procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="32bb7-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="32bb7-303">Si procesar por lotes de consultas ad hoc de hello, puede enviar varias consultas como un lote grande en una base de datos SQL de solo viaje tooAzure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="32bb7-304">Si compila las consultas ad hoc en un procedimiento almacenado, podría conseguir Hola que mismo resultado que si en un lote.</span><span class="sxs-lookup"><span data-stu-id="32bb7-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="32bb7-305">Con un procedimiento almacenado también ofrece Hola ventaja de aumentar las posibilidades de Hola de almacenamiento en caché de planes de consulta de hello en la base de datos de SQL Azure para que pueda usar Hola procedimiento almacenado de nuevo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="32bb7-306">Algunas aplicaciones requieren operaciones de escritura intensivas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-306">Some applications are write-intensive.</span></span> <span data-ttu-id="32bb7-307">A veces puede reducir la carga de E/S total de hello en una base de datos teniendo en cuenta cómo se escribe toobatch juntos.</span><span class="sxs-lookup"><span data-stu-id="32bb7-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="32bb7-308">Con frecuencia es tan sencillo como usar transacciones explícitas en lugar de transacciones de confirmación automática dentro de los procedimientos almacenados y lotes ad hoc.</span><span class="sxs-lookup"><span data-stu-id="32bb7-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="32bb7-309">Para ver una evaluación de las distintas técnicas que se pueden usar, consulte [Técnicas de procesamiento por lotes para aplicaciones de SQL Database en Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="32bb7-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="32bb7-310">Experimentar con su propio modelo adecuado de carga de trabajo toofind hello para el procesamiento por lotes.</span><span class="sxs-lookup"><span data-stu-id="32bb7-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="32bb7-311">Estar toounderstand seguro de que puede tener un modelo ligeramente garantiza la coherencia transaccional diferentes.</span><span class="sxs-lookup"><span data-stu-id="32bb7-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="32bb7-312">Encontrar Hola carga de trabajo adecuada que minimiza el uso de recursos, es necesario encontrar la combinación correcta de Hola de ventajas y desventajas de coherencia y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="32bb7-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="32bb7-313">Almacenamiento en caché de la capa de aplicación</span><span class="sxs-lookup"><span data-stu-id="32bb7-313">Application-tier caching</span></span>
<span data-ttu-id="32bb7-314">Algunas aplicaciones de base de datos tienen cargas de trabajo con operaciones de lectura intensivas.</span><span class="sxs-lookup"><span data-stu-id="32bb7-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="32bb7-315">Almacenamiento en caché capas puede reducir la carga de hello en la base de datos de Hola y podría reducir potencialmente toosupport requiere nivel de rendimiento de hello una base de datos mediante el uso de la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="32bb7-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="32bb7-316">Con [Azure Redis Cache](https://azure.microsoft.com/services/cache/), si tiene una carga de trabajo con muchas lecturas, puede leer datos de hello una vez (o quizás una vez por equipo de capa de aplicación, según cómo esté configurada) y, a continuación, almacene esos datos fuera de la base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="32bb7-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="32bb7-317">Esto supone una carga de base de datos de manera tooreduce (CPU y E/S de lectura), pero no hay un efecto en la coherencia transaccional porque los datos de Hola que se va a leer desde la memoria caché de hello podrían ser sincronizados con datos de hello en la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="32bb7-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="32bb7-318">Aunque en muchas aplicaciones algún nivel de incoherencia es aceptable, esto no se aplica a todas las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="32bb7-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="32bb7-319">Debería comprender totalmente los requisitos de una aplicación antes de emplear una estrategia de almacenamiento en caché de la capa de aplicación.</span><span class="sxs-lookup"><span data-stu-id="32bb7-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="32bb7-320">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="32bb7-320">Next steps</span></span>
* <span data-ttu-id="32bb7-321">Para más información sobre los niveles de servicio, consulte [Opciones y rendimiento de SQL Database](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="32bb7-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="32bb7-322">Para obtener más información sobre los grupos elásticos, consulte [¿Qué es un grupo elástico de Azure?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="32bb7-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="32bb7-323">Para obtener información acerca de los grupos de rendimiento y elasticidad, consulte [cuando tooconsider un grupo elástico](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="32bb7-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>


---
title: "Concesión de acceso a Azure SQL Database | Microsoft Docs"
description: "Obtenga información acerca de cómo conceder el acceso a Microsoft Azure SQL Database."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 0ca1ccd273317d67537d31724d566625a4eb2c85
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="14820-103">Control de acceso a Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="14820-103">Azure SQL Database access control</span></span>
<span data-ttu-id="14820-104">Para proporcionar seguridad, SQL Database controla el acceso con reglas de firewall que limitan la conectividad por dirección IP, con mecanismos de autenticación que requieren a los usuarios que demuestren su identidad y con mecanismos de autorización que limitan a los usuarios el acceso a datos y acciones específicos.</span><span class="sxs-lookup"><span data-stu-id="14820-104">To provide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users to prove their identity, and authorization mechanisms limiting users to specific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="14820-105">Para obtener información general de las características de seguridad de SQL Database, consulte [SQL security overview](sql-database-security-overview.md) (Información general acerca de la seguridad de SQL).</span><span class="sxs-lookup"><span data-stu-id="14820-105">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="14820-106">Para ver un tutorial, consulte [Protección de Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="14820-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="14820-107">Firewall y reglas de firewall</span><span class="sxs-lookup"><span data-stu-id="14820-107">Firewall and firewall rules</span></span>
<span data-ttu-id="14820-108">Microsoft Azure SQL Database ofrece un servicio de base de datos relacional para Azure y otras aplicaciones basadas en Internet.</span><span class="sxs-lookup"><span data-stu-id="14820-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="14820-109">Para ayudar a proteger los datos, los firewalls impiden todo acceso al servidor de bases de datos, excepto a aquellos equipos a los que haya concedido permiso.</span><span class="sxs-lookup"><span data-stu-id="14820-109">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="14820-110">Asimismo, otorgan acceso a las bases de datos según la dirección IP de origen de cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="14820-110">The firewall grants access to databases based on the originating IP address of each request.</span></span> <span data-ttu-id="14820-111">Para más información, consulte [Introducción a las reglas de firewall de Azure SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="14820-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="14820-112">El servicio de Base de datos SQL de Azure solo está disponible a través del puerto TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="14820-112">The Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="14820-113">Para tener acceso a una Base de datos SQL desde el equipo, asegúrese de que el firewall de equipos cliente permite la comunicación TCP saliente en el puerto TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="14820-113">To access a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="14820-114">Si no es necesario para otras aplicaciones, bloquee las conexiones entrantes en el puerto TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="14820-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="14820-115">Como parte del proceso de conexión, las conexiones de máquinas virtuales de Azure se redirigen a una dirección IP y un puerto diferente, único para cada rol de trabajo.</span><span class="sxs-lookup"><span data-stu-id="14820-115">As part of the connection process, connections from Azure virtual machines are redirected to a different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="14820-116">El número de puerto está comprendido en el rango del 11000 al 11999.</span><span class="sxs-lookup"><span data-stu-id="14820-116">The port number is in the range from 11000 to 11999.</span></span> <span data-ttu-id="14820-117">Para obtener más información sobre los puertos TCP, consulte [Puertos más allá del 1433 para ADO.NET 4.5 y SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="14820-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="14820-118">Autenticación</span><span class="sxs-lookup"><span data-stu-id="14820-118">Authentication</span></span>

<span data-ttu-id="14820-119">Base de datos SQL admite dos tipos de autenticación:</span><span class="sxs-lookup"><span data-stu-id="14820-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="14820-120">**Autenticación de SQL**, que usa un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="14820-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="14820-121">Al crear el servidor lógico de la base de datos, especificó un inicio de sesión de "administrador de servidor" con un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="14820-121">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="14820-122">Con estas credenciales, puede autenticarse en cualquier base de datos en ese servidor como propietario de la base de datos, o "dbo".</span><span class="sxs-lookup"><span data-stu-id="14820-122">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span></span> 
* <span data-ttu-id="14820-123">**Autenticación de Azure Active Directory**, que usa las identidades administradas por Azure Active Directory y es compatible con dominios administrados e integrados.</span><span class="sxs-lookup"><span data-stu-id="14820-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="14820-124">Use la autenticación de Active Directory (seguridad integrada) [siempre que sea posible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="14820-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="14820-125">Si desea usar la autenticación de Azure Active Directory, debe crear otro administrador de servidor llamado "administrador de Azure AD" con permiso para administrar usuarios y grupos de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="14820-125">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span></span> <span data-ttu-id="14820-126">Este administrador también puede realizar todas las operaciones de un administrador de servidor normal.</span><span class="sxs-lookup"><span data-stu-id="14820-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="14820-127">Consulte el tutorial [Conectar a la Base de datos SQL mediante la autenticación de Azure Active Directory](sql-database-aad-authentication.md) , para obtener información acerca de cómo crear un administrador de Azure AD y así habilitar la autenticación de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="14820-127">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="14820-128">El motor de la base de datos cierra las conexiones que permanecen inactivas durante más de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="14820-128">The Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="14820-129">La conexión debe volver a iniciar sesión para poder usarse.</span><span class="sxs-lookup"><span data-stu-id="14820-129">The connection must login again before it can be used.</span></span> <span data-ttu-id="14820-130">Las conexiones con SQL Database que están constantemente activas requieren volver a ser autorizadas (acción realizada por el motor de la base de datos) al menos cada 10 horas.</span><span class="sxs-lookup"><span data-stu-id="14820-130">Continuously active connections to SQL Database require reauthorization (performed by the database engine) at least every 10 hours.</span></span> <span data-ttu-id="14820-131">El motor de la base de datos intenta repetir la autorización con la contraseña que se envió inicialmente y no se requiere ninguna acción del usuario.</span><span class="sxs-lookup"><span data-stu-id="14820-131">The database engine attempts reauthorization using the originally submitted password and no user input is required.</span></span> <span data-ttu-id="14820-132">Por motivos de rendimiento, cuando se restablece una contraseña en SQL Database, la conexión no vuelve a autenticar, incluso si esta se restablece debido a la agrupación de conexiones.</span><span class="sxs-lookup"><span data-stu-id="14820-132">For performance reasons, when a password is reset in SQL Database, the connection is not be reauthenticated, even if the connection is reset due to connection pooling.</span></span> <span data-ttu-id="14820-133">Esto difiere del comportamiento del SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="14820-133">This is different from the behavior of on-premises SQL Server.</span></span> <span data-ttu-id="14820-134">Si se ha cambiado la contraseña desde que se autorizó la conexión inicialmente, deberá terminarse la conexión y establecerse una nueva conexión con la nueva contraseña.</span><span class="sxs-lookup"><span data-stu-id="14820-134">If the password has been changed since the connection was initially authorized, the connection must be terminated and a new connection made using the new password.</span></span> <span data-ttu-id="14820-135">Los usuarios con el permiso `KILL DATABASE CONNECTION` pueden terminar explícitamente una conexión con SQL Database mediante el uso del comando [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="14820-135">A user with the `KILL DATABASE CONNECTION` permission can explicitly terminate a connection to SQL Database by using the [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="14820-136">Las cuentas de usuario se pueden crear en la base de datos maestra y se pueden conceder permisos en todas las bases de datos del servidor, o se pueden crear en la misma base de datos (se denominan usuarios de bases de datos independientes).</span><span class="sxs-lookup"><span data-stu-id="14820-136">User accounts can be created in the master database and can be granted permissions in all databases on the server, or they can be created in the database itself (called contained users).</span></span> <span data-ttu-id="14820-137">Para más información sobre cómo crear y administrar inicios de sesión, consulte [Administración de inicios de sesión](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="14820-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="14820-138">Para mejorar la portabilidad y escalabilidad, utilice usuarios de bases de datos independientes para mejorar la escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="14820-138">To enhance portability and scalabilty, use contained database users to enhance scalability.</span></span> <span data-ttu-id="14820-139">Para más información sobre los usuarios de bases de datos independientes, consulte [Usuarios de bases de datos independientes: llévense sus bases de datos donde quieran](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) y [Bases de datos independientes](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="14820-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="14820-140">Como procedimiento recomendado, la aplicación debe usar una cuenta dedicada para autenticar. De esta forma, puede limitar los permisos concedidos a la aplicación y reducir los riesgos de actividad malintencionada en caso de que el código de la aplicación sea vulnerable a ataques por inyección de código SQL.</span><span class="sxs-lookup"><span data-stu-id="14820-140">As a best practice your application should use a dedicated account to authenticate -- this way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span></span> <span data-ttu-id="14820-141">Se recomienda crear un [usuario de base de datos independiente](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), ya que esto permitirá que la aplicación se autentique directamente en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="14820-141">The recommended approach is to create a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app to authenticate directly to the database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="14820-142">Autorización</span><span class="sxs-lookup"><span data-stu-id="14820-142">Authorization</span></span>

<span data-ttu-id="14820-143">Autorización indica las acciones que pueden realizar los usuarios en Azure SQL Database, algo que controlan las [pertenencias a roles](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) y los [permisos de nivel de objeto](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine) de las bases de datos de la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="14820-143">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="14820-144">Como procedimiento recomendado, debe conceder a los usuarios los privilegios mínimos necesarios.</span><span class="sxs-lookup"><span data-stu-id="14820-144">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="14820-145">La cuenta de administrador de servidor con la que se está conectando forma parte de db_owner, que tiene autoridad para realizar cualquier acción en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="14820-145">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="14820-146">Guarde esta cuenta para implementar las actualizaciones de los esquemas y otras operaciones de administración.</span><span class="sxs-lookup"><span data-stu-id="14820-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="14820-147">Utilice la cuenta "ApplicationUser" con permisos más limitados para conectarse desde la aplicación a la base de datos con los privilegios mínimos que necesita la aplicación.</span><span class="sxs-lookup"><span data-stu-id="14820-147">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span> <span data-ttu-id="14820-148">Para más información, consulte [Administración de inicios de sesión](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="14820-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="14820-149">Normalmente, solo los administradores necesitan tener acceso a la base de datos `master`.</span><span class="sxs-lookup"><span data-stu-id="14820-149">Typically, only administrators need access to the `master` database.</span></span> <span data-ttu-id="14820-150">El acceso rutinario a cada base de datos de usuario debe llevarse a cabo a través de los usuarios de la base de datos independiente que no son administradores creados en cada base de datos.</span><span class="sxs-lookup"><span data-stu-id="14820-150">Routine access to each user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="14820-151">Al utilizar los usuarios de la base de datos independiente, no es necesario que cree inicios de sesión en la base de datos `master`.</span><span class="sxs-lookup"><span data-stu-id="14820-151">When you use contained database users, you do not need to create logins in the `master` database.</span></span> <span data-ttu-id="14820-152">Para obtener más información, vea [Usuarios de base de datos independiente - Conversión de la base de datos en portátil](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="14820-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="14820-153">Debe familiarizarse con las siguientes características que pueden utilizarse para limitar o elevar los permisos:</span><span class="sxs-lookup"><span data-stu-id="14820-153">You should familiarize yourself with the following features that can be used to limit or elevate permissions:</span></span>   
* <span data-ttu-id="14820-154">La [suplantación](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) y la [firma de módulos](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) se pueden usar para elevar los permisos temporalmente de forma segura.</span><span class="sxs-lookup"><span data-stu-id="14820-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used to securely elevate permissions temporarily.</span></span>
* <span data-ttu-id="14820-155">[seguridad del nivel de fila](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) permite filtrar las filas que puede ver el usuario.</span><span class="sxs-lookup"><span data-stu-id="14820-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="14820-156">[enmascaramiento de datos](sql-database-dynamic-data-masking-get-started.md) puede utilizarse para limitar la exposición de información confidencial.</span><span class="sxs-lookup"><span data-stu-id="14820-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span></span>
* <span data-ttu-id="14820-157">[procedimientos almacenados](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) puede utilizarse para limitar las acciones que se pueden realizar en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="14820-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used to limit the actions that can be taken on the database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="14820-158">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="14820-158">Next steps</span></span>

- <span data-ttu-id="14820-159">Para obtener información general de las características de seguridad de SQL Database, consulte [SQL security overview](sql-database-security-overview.md) (Información general acerca de la seguridad de SQL).</span><span class="sxs-lookup"><span data-stu-id="14820-159">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="14820-160">Para más información acerca de las reglas de firewall, consulte [Reglas de firewall](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="14820-160">To learn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="14820-161">Para obtener información acerca de los usuarios e inicios de sesión, consulte [Administración de inicios de sesión](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="14820-161">To learn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="14820-162">Para analizar la supervisión proactiva, consulte [Auditorías de SQL Database](sql-database-auditing.md) y [Detección de amenazas de SQL Database](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="14820-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="14820-163">Para ver un tutorial, consulte [Protección de Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="14820-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

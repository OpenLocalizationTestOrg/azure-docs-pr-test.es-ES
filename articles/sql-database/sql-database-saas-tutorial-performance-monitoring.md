---
title: "rendimiento de aaaMonitor de muchas bases de datos de SQL Azure en una aplicación de SaaS multiempresa | Documentos de Microsoft"
description: "Supervisar y administrar el rendimiento de las bases de datos y los grupos de aplicación de SaaS de Wingtip de base de datos de SQL Azure hello"
keywords: tutorial de SQL Database
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="83460-104">Supervisar el rendimiento de hello aplicación Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="83460-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="83460-105">En este tutorial se describen varios escenarios clave de administración de rendimiento que se usan en aplicaciones de SaaS.</span><span class="sxs-lookup"><span data-stu-id="83460-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="83460-106">Utiliza una actividad de toosimulate del generador de carga entre todas las bases de datos de inquilino, se muestran supervisión integrada de Hola y características de alertas de base de datos SQL y grupos elásticos.</span><span class="sxs-lookup"><span data-stu-id="83460-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="83460-107">aplicación de SaaS Wingtip Hello usa un modelo de datos único inquilino, donde cada lugar (inquilino) tiene su propia base de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="83460-108">Al igual que muchas aplicaciones de SaaS, Hola prevé patrón de carga de trabajo de inquilino es imprevisible y esporádico.</span><span class="sxs-lookup"><span data-stu-id="83460-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="83460-109">En otras palabras, las ventas de entradas pueden producirse en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="83460-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="83460-110">tootake la ventaja de este patrón de uso típico de la base de datos, las bases de datos se implementan en grupos de bases de datos elásticas de inquilino.</span><span class="sxs-lookup"><span data-stu-id="83460-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="83460-111">Grupos elásticos optimizan el costo de Hola de una solución mediante el uso compartido de recursos entre varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="83460-112">Con este tipo de patrón, es importante toomonitor base de datos y tooensure de uso de recursos de grupo que carga razonablemente se reparten entre grupos.</span><span class="sxs-lookup"><span data-stu-id="83460-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="83460-113">También debe tooensure que las bases de datos individuales tienen los recursos adecuados y que no están alcanzando grupos sus [eDTU](sql-database-what-is-a-dtu.md) límites.</span><span class="sxs-lookup"><span data-stu-id="83460-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="83460-114">Este tutorial explora formas toomonitor y administrar grupos y las bases de datos y cómo tootake acción correctora en toovariations de respuesta de carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="83460-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="83460-115">En este tutorial, aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="83460-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="83460-116">Simular el uso en las bases de datos del inquilino de hello mediante la ejecución de un generador de carga proporcionado</span><span class="sxs-lookup"><span data-stu-id="83460-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="83460-117">Bases de datos de inquilino de hello monitor como responden toohello aumento de carga</span><span class="sxs-lookup"><span data-stu-id="83460-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="83460-118">Escalar verticalmente Hola grupo elástico en respuesta toohello mayor de la base de datos de carga</span><span class="sxs-lookup"><span data-stu-id="83460-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="83460-119">Aprovisionar una segunda actividad de base de datos del saldo tooload grupo elástico</span><span class="sxs-lookup"><span data-stu-id="83460-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="83460-120">toocomplete se ha completado este tutorial, asegúrese de hello seguro después de requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="83460-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="83460-121">se implementa la aplicación de SaaS Wingtip Hello.</span><span class="sxs-lookup"><span data-stu-id="83460-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="83460-122">vea toodeploy en menos de cinco minutos, [implementar y explorar la aplicación de SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="83460-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="83460-123">Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="83460-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="83460-124">Para más información, consulte [Introducción a Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="83460-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="83460-125">Patrones de la administración de rendimiento de introducción tooSaaS</span><span class="sxs-lookup"><span data-stu-id="83460-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="83460-126">Administración del rendimiento de la base de datos consta de compilación y analizar datos de rendimiento y, a continuación, reacción toothis datos mediante el ajuste de parámetros toomaintain un tiempo de respuesta aceptable para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="83460-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="83460-127">Cuando se hospedan a varios inquilinos, grupos elástico de base de datos son un tooprovide de manera rentable y administración los recursos de un grupo de bases de datos con cargas de trabajo impredecibles.</span><span class="sxs-lookup"><span data-stu-id="83460-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="83460-128">Con ciertos patrones de carga de trabajo, se pueden beneficiar de la administración en grupo un mínimo de dos bases de datos S3.</span><span class="sxs-lookup"><span data-stu-id="83460-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![medios](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="83460-130">Grupos y las bases de datos de hello en grupos, deben ser supervisado tooensure pueden permanecer dentro de intervalos aceptables de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="83460-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="83460-131">Optimizar Hola grupo toomeet Hola necesidades especiales de configuración de carga de trabajo agregado Hola de todas las bases de datos, asegurarse de que hello Edtu de grupo adecuado para hello carga de trabajo general.</span><span class="sxs-lookup"><span data-stu-id="83460-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="83460-132">Ajustar Hola por base de datos min y por base de datos máximo de eDTU valores tooappropriate valores para sus requisitos de aplicación específica.</span><span class="sxs-lookup"><span data-stu-id="83460-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="83460-133">Estrategias de administración del rendimiento</span><span class="sxs-lookup"><span data-stu-id="83460-133">Performance management strategies</span></span>

* <span data-ttu-id="83460-134">tooavoid tener toomanually supervisar el rendimiento, que resulta más eficaz**establecer alertas que desencadenan cuando las bases de datos o grupos extraviado fuera de los intervalos normales**.</span><span class="sxs-lookup"><span data-stu-id="83460-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="83460-135">Hola toorespond las fluctuaciones de tooshort término en el nivel de rendimiento de agregado de Hola de un grupo, **nivel de eDTU de grupo se puede escalar hacia arriba o hacia abajo**.</span><span class="sxs-lookup"><span data-stu-id="83460-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="83460-136">Si se produce esta fluctuación de forma regular o de predicción, **ajuste de escala en el grupo de hello puede ser toooccur programada automáticamente**.</span><span class="sxs-lookup"><span data-stu-id="83460-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="83460-137">Por ejemplo, cuando haya poca carga de trabajo (por la noche o durante el fin de semana), redúzcalo verticalmente.</span><span class="sxs-lookup"><span data-stu-id="83460-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="83460-138">las fluctuaciones de término toolonger toorespond o cambios en Hola número de bases de datos, **bases de datos individuales se pueden mover a otros grupos**.</span><span class="sxs-lookup"><span data-stu-id="83460-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="83460-139">toorespond tooshort término aumenta en *individuales* carga de base de datos **bases de datos individuales pueden deja fuera de un grupo y asignar un nivel de rendimiento individuales**.</span><span class="sxs-lookup"><span data-stu-id="83460-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="83460-140">Una vez que se reduce la carga de hello, base de datos de hello, a continuación, se pueden devolver toohello grupo.</span><span class="sxs-lookup"><span data-stu-id="83460-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="83460-141">Cuando esto se conoce de antemano, las bases de datos se pueden mover antelación tooensure Hola base de datos siempre tiene recursos Hola necesarios, tooavoid impacto en otras bases de datos en bloque de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="83460-142">Si este requisito es de predicción, como un lugar experimentan un urgente de ventas de vale para un evento popular, este comportamiento de administración puede integrarse en la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="83460-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="83460-143">Hola [portal de Azure](https://portal.azure.com) proporciona supervisión y alertas relacionadas con la mayoría de los recursos integrados.</span><span class="sxs-lookup"><span data-stu-id="83460-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="83460-144">Para SQL Database, la supervisión y las alertas están disponibles para las bases de datos y los grupos.</span><span class="sxs-lookup"><span data-stu-id="83460-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="83460-145">Este integradas de supervisión y alerta es específico del recurso, por lo que es toouse adecuada para pequeñas cantidades de recursos, pero no es muy práctico cuando se trabaja con muchos recursos.</span><span class="sxs-lookup"><span data-stu-id="83460-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="83460-146">Para escenarios de alto volumen donde se trabaja con muchos recursos, se puede usar [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="83460-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="83460-147">Se trata de un servicio de Azure independiente que proporciona análisis de los registros de diagnóstico emitidos y de telemetría recopilados en un área de trabajo de Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="83460-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="83460-148">Análisis de registros pueden recopilar la telemetría de muchos servicios y ser tooquery usado y establecer alertas.</span><span class="sxs-lookup"><span data-stu-id="83460-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="83460-149">Obtener scripts y código fuente hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="83460-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="83460-150">Hello Wingtip SaaS scripts y código fuente de aplicación están disponibles en hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repositorio de github.</span><span class="sxs-lookup"><span data-stu-id="83460-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="83460-151">[Pasos de secuencias de comandos de toodownload Hola Wingtip SaaS](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="83460-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="83460-152">Aprovisionamiento de inquilinos adicionales</span><span class="sxs-lookup"><span data-stu-id="83460-152">Provision additional tenants</span></span>

<span data-ttu-id="83460-153">Mientras grupos pueden ser rentables con solo dos bases de datos de S3, Hola más bases de datos que se encuentran en Hola Hola de grupo más rentable Hola promedio efecto se convierte en.</span><span class="sxs-lookup"><span data-stu-id="83460-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="83460-154">Para una buena comprensión de cómo funciona la administración y la supervisión del rendimiento a escala, para este tutorial se necesitan al menos 20 bases de datos implementadas.</span><span class="sxs-lookup"><span data-stu-id="83460-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="83460-155">Si ha proporcionado un lote de inquilinos en un tutorial anterior, omitir toohello [simular el uso en todas las bases de datos de inquilino](#simulate-usage-on-all-tenant-databases) sección.</span><span class="sxs-lookup"><span data-stu-id="83460-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="83460-156">Abra... \\Módulos de aprendizaje\\administración y supervisión del rendimiento\\*demostración PerformanceMonitoringAndManagement.ps1* en hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="83460-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="83460-157">Mantenga este script abierta, ya que se van a ejecutar varios escenarios en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="83460-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="83460-158">Establezca **$DemoScenario** = **1**, **Aprovisionamiento de un lote de inquilinos**</span><span class="sxs-lookup"><span data-stu-id="83460-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="83460-159">Presione **F5** secuencia de comandos de toorun Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="83460-160">script de Hola implementará a 17 inquilinos en menos de cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="83460-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="83460-161">Hola *New-TenantBatch* script utiliza un conjunto anidado o vinculado de [el Administrador de recursos](../azure-resource-manager/index.md) plantillas que crear un lote de inquilinos, que de forma predeterminada, copia la base de datos de hello **basetenantdb** en hello catálogo server toocreate Hola inquilino bases de datos, a continuación, registra estos en el catálogo de Hola y finalmente los inicializa con el tipo de nombre y la ubicación del inquilino de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="83460-162">Esto es coherente con la manera de hello aplicación hello aprovisiona a un nuevo inquilino.</span><span class="sxs-lookup"><span data-stu-id="83460-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="83460-163">Los cambios realizados demasiado*basetenantdb* es tooany aplicado nuevos inquilinos aprovisionados a partir de ahí.</span><span class="sxs-lookup"><span data-stu-id="83460-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="83460-164">Vea hello [tutorial de administración de esquema](sql-database-saas-tutorial-schema-management.md) toosee cómo cambia el esquema de toomake demasiado*existente* bases de datos de inquilinos (incluidos hello *basetenantdb* base de datos).</span><span class="sxs-lookup"><span data-stu-id="83460-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="83460-165">Simulación de uso en todas las bases de datos de inquilinos</span><span class="sxs-lookup"><span data-stu-id="83460-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="83460-166">Hola *PerformanceMonitoringAndManagement.ps1 demostración* script es siempre que simula una carga de trabajo que se ejecutan en todas las bases de datos de inquilino.</span><span class="sxs-lookup"><span data-stu-id="83460-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="83460-167">la carga de Hola se genera mediante uno de los escenarios de carga disponibles de hello:</span><span class="sxs-lookup"><span data-stu-id="83460-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="83460-168">Demostración</span><span class="sxs-lookup"><span data-stu-id="83460-168">Demo</span></span> | <span data-ttu-id="83460-169">Escenario</span><span class="sxs-lookup"><span data-stu-id="83460-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="83460-170">2</span><span class="sxs-lookup"><span data-stu-id="83460-170">2</span></span> | <span data-ttu-id="83460-171">Generación de una carga de intensidad normal (aprox. 40 DTU)</span><span class="sxs-lookup"><span data-stu-id="83460-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="83460-172">3</span><span class="sxs-lookup"><span data-stu-id="83460-172">3</span></span> | <span data-ttu-id="83460-173">Generación de una carga con ráfagas más prolongadas y frecuentes por base de datos</span><span class="sxs-lookup"><span data-stu-id="83460-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="83460-174">4</span><span class="sxs-lookup"><span data-stu-id="83460-174">4</span></span> | <span data-ttu-id="83460-175">Generación de una carga con mayores ráfagas de DTU por base de datos (aprox. 80 DTU)</span><span class="sxs-lookup"><span data-stu-id="83460-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="83460-176">5</span><span class="sxs-lookup"><span data-stu-id="83460-176">5</span></span> | <span data-ttu-id="83460-177">Generación de una carga normal y una carga elevada en un solo inquilino (aprox. 95 DTU)</span><span class="sxs-lookup"><span data-stu-id="83460-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="83460-178">6</span><span class="sxs-lookup"><span data-stu-id="83460-178">6</span></span> | <span data-ttu-id="83460-179">Generación de una carga desequilibrada en varios grupos</span><span class="sxs-lookup"><span data-stu-id="83460-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="83460-180">Generador de carga de Hola se aplica un *sintético* base de datos de carga de CPU solo tooevery inquilinos.</span><span class="sxs-lookup"><span data-stu-id="83460-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="83460-181">Generador de Hello inicia un trabajo para cada base de datos de inquilinos, que llama a un procedimiento almacenado periódicamente que genera una carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="83460-182">intervalos, la duración y niveles de carga de hello (en Edtu) varían entre todas las bases de datos, simulación de la actividad de inquilinos imprevisible.</span><span class="sxs-lookup"><span data-stu-id="83460-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="83460-183">Abra... \\Módulos de aprendizaje\\administración y supervisión del rendimiento\\*demostración PerformanceMonitoringAndManagement.ps1* en hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="83460-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="83460-184">Mantenga este script abierta, ya que se van a ejecutar varios escenarios en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="83460-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="83460-185">Establezca **$DemoScenario** = **2**, *Generación de una carga de intensidad normal*.</span><span class="sxs-lookup"><span data-stu-id="83460-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="83460-186">Presione **F5** tooapply un tooall de carga de las bases de datos de inquilino.</span><span class="sxs-lookup"><span data-stu-id="83460-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="83460-187">Wingtip es una aplicación de SaaS, y carga de Hola mundo real en una aplicación de SaaS normalmente es esporádico e imprevisibles.</span><span class="sxs-lookup"><span data-stu-id="83460-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="83460-188">toosimulate esto, Hola carga generador genera una carga aleatorio se distribuye entre todos los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="83460-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="83460-189">Para tooemerge de patrón de carga hello, por lo que ejecutar el generador de carga de Hola durante 3 a 5 minutos antes de intentar toomonitor Hola carga en las secciones siguientes de Hola se necesitan varios minutos.</span><span class="sxs-lookup"><span data-stu-id="83460-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83460-190">Generador de carga de saludo se está ejecutando como una serie de trabajos en la sesión de PowerShell local.</span><span class="sxs-lookup"><span data-stu-id="83460-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="83460-191">Mantener hello *PerformanceMonitoringAndManagement.ps1 demostración* ficha abierta.</span><span class="sxs-lookup"><span data-stu-id="83460-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="83460-192">Si cerrar pestaña de Hola o suspender su equipo, deja de generador de carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="83460-193">Generador de carga de Hello permanece en un *invocar trabajo* estado donde genera una carga en los nuevos inquilinos que se aprovisionan después de que se inició el generador de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="83460-194">Use *Ctrl-C* toostop invocar nuevos trabajos y script de Hola de salida.</span><span class="sxs-lookup"><span data-stu-id="83460-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="83460-195">Generador de carga de Hello continuará toorun, pero solo en los inquilinos existentes.</span><span class="sxs-lookup"><span data-stu-id="83460-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="83460-196">Supervisar el uso de recursos con hello portal de Azure</span><span class="sxs-lookup"><span data-stu-id="83460-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="83460-197">uso de recursos de hello toomonitor que los resultados de Hola de carga que se aplica, abrir el grupo de portal toohello de Hola que contiene las bases de datos del inquilino de hello:</span><span class="sxs-lookup"><span data-stu-id="83460-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="83460-198">Abra hello [portal de Azure](https://portal.azure.com) y examinar toohello *tenants1 -&lt;usuario&gt;*  server.</span><span class="sxs-lookup"><span data-stu-id="83460-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="83460-199">Desplácese hacia abajo, busque los grupos elásticos y haga clic en **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="83460-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="83460-200">Este grupo contiene todas las bases de datos del inquilino de hello creados hasta ahora.</span><span class="sxs-lookup"><span data-stu-id="83460-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="83460-201">Observar hello **grupo elástico supervisión** y **supervisión de bases de datos elásticas** gráficos.</span><span class="sxs-lookup"><span data-stu-id="83460-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="83460-202">Hola utilización de recursos del grupo es uso de la base de datos agregados de Hola para todas las bases de datos en bloque de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="83460-203">gráfico de base de datos de Hello muestra hello cinco bases de datos más recientes:</span><span class="sxs-lookup"><span data-stu-id="83460-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="83460-204">Porque hay bases de datos adicionales en el grupo de hello más allá de Hola cinco principal, uso del grupo de hello muestra las actividades que no se reflejan en el gráfico de cinco bases de datos principales de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="83460-205">Para ver detalles adicionales, haga clic en **Uso de recursos de base de datos**:</span><span class="sxs-lookup"><span data-stu-id="83460-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="83460-206">Establecer alertas de rendimiento en el bloque de Hola</span><span class="sxs-lookup"><span data-stu-id="83460-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="83460-207">Establecer una alerta en el grupo de Hola que se desencadena en \>utilización del 75% como sigue:</span><span class="sxs-lookup"><span data-stu-id="83460-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="83460-208">Abra *Pool1* (en hello *tenants1 -\<usuario\>*  server) en hello [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="83460-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="83460-209">Haga clic en **Reglas de alerta** y en **+ Agregar alerta**:</span><span class="sxs-lookup"><span data-stu-id="83460-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![agregar alerta](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="83460-211">Proporcione un nombre, como **High DTU**,</span><span class="sxs-lookup"><span data-stu-id="83460-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="83460-212">Establecer Hola siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="83460-212">Set hello following values:</span></span>
   * <span data-ttu-id="83460-213">**Métrica = eDTU percentage**</span><span class="sxs-lookup"><span data-stu-id="83460-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="83460-214">**Condición = greater than**.</span><span class="sxs-lookup"><span data-stu-id="83460-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="83460-215">**Umbral = 75**.</span><span class="sxs-lookup"><span data-stu-id="83460-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="83460-216">**Período = sobre Hola últimos 30 minutos**.</span><span class="sxs-lookup"><span data-stu-id="83460-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="83460-217">Agregar una toohello de dirección de correo electrónico *administrador adicional email(s)* y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="83460-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![Establecer alerta](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="83460-219">Escalado vertical de un grupo ocupado</span><span class="sxs-lookup"><span data-stu-id="83460-219">Scale up a busy pool</span></span>

<span data-ttu-id="83460-220">Si aumenta el nivel de carga global de hello en un punto de toohello de grupo que maxes out grupo hello y alcanza el 100% del uso de eDTU, a continuación, rendimiento de la base de datos individual se ve afectado, potencialmente los tiempos de respuesta de consulta para todas las bases de datos en bloque de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="83460-221">**Corto plazo**, considere la posibilidad de escalar verticalmente recursos adicionales de hello grupo tooprovide o quitar las bases de datos del grupo de hello (moverlos tooother grupos, o fuera del nivel de servicio independiente de hello grupo tooa).</span><span class="sxs-lookup"><span data-stu-id="83460-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="83460-222">**A largo plazo**, considere la posibilidad de optimizar las consultas o un índice de rendimiento de base de datos de uso tooimprove.</span><span class="sxs-lookup"><span data-stu-id="83460-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="83460-223">Función hello tooperformance de sensibilidad de la aplicación emite a su tooscale de práctica recomendada un grupo de seguridad antes de llegar a 100% del uso de eDTU.</span><span class="sxs-lookup"><span data-stu-id="83460-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="83460-224">Usar una alerta toowarn, de antemano.</span><span class="sxs-lookup"><span data-stu-id="83460-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="83460-225">Puede simular un grupo de disponibilidad por incrementar la carga de hello producida por el generador de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="83460-226">Causando hello tooburst de bases de datos con más frecuencia y para carga agregado ya lo está, creciente hello en el grupo de hello sin cambiar los requisitos de Hola de bases de datos individuales de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="83460-227">Cómo ampliar el grupo de hello fácilmente se realiza en el portal de Hola o de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="83460-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="83460-228">Este ejercicio usa portal Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="83460-229">Establecer *$DemoScenario* = **3**, _generar carga con ráfagas más y más frecuentes por base de datos_ intensidad de hello tooincrease de carga agregado de hello en grupo de Hello sin cambiar la carga máxima de hello requerida por cada base de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="83460-230">Presione **F5** tooapply un tooall de carga de las bases de datos de inquilino.</span><span class="sxs-lookup"><span data-stu-id="83460-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="83460-231">Vaya demasiado**Pool1** Hola portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="83460-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="83460-232">Hola Monitor aumenta el uso de eDTU de grupo en el gráfico superior Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="83460-233">Tarda unos minutos para nuevos tookick de carga Hola superior, pero rápidamente verá grupo Hola iniciar toohit máxima utilización, y como carga de hello steadies en el nuevo patrón de hello, rápidamente sobrecargas grupo Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="83460-234">tooscale grupo hello, haga clic en **Configurar grupo** en parte superior de Hola de hello **Pool1** página.</span><span class="sxs-lookup"><span data-stu-id="83460-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="83460-235">Ajustar hello **eDTU del grupo** configuración demasiado**100**.</span><span class="sxs-lookup"><span data-stu-id="83460-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="83460-236">Cambiar hello eDTU del grupo no cambia las opciones de cada base de datos de hello (que sigue siendo 50 eDTU máx. por base de datos).</span><span class="sxs-lookup"><span data-stu-id="83460-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="83460-237">Puede ver los valores de cada base de datos de hello en hello derecha de hello **Configurar grupo** página.</span><span class="sxs-lookup"><span data-stu-id="83460-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="83460-238">Haga clic en **guardar** agrupación de toosubmit Hola solicitudes tooscale Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="83460-239">Vuelva demasiado**Pool1** > **Introducción** hello tooview gráficos de supervisión.</span><span class="sxs-lookup"><span data-stu-id="83460-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="83460-240">Supervisar el efecto de Hola de proporcionar grupo Hola con más recursos (aunque con algunas bases de datos y una carga aleatoria no resulta siempre fácil toosee forma concluyente hasta que se ejecuta durante algún tiempo).</span><span class="sxs-lookup"><span data-stu-id="83460-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="83460-241">Aunque se trata de hello gráficos tenga en cuenta que el 100% en hello superior gráfico ahora representa 100 Edtu, mientras que en hello inferior gráfico 100% es todavía 50 Edtu como Hola por base de datos máximo sigue siendo 50 Edtu.</span><span class="sxs-lookup"><span data-stu-id="83460-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="83460-242">Bases de datos permanecen en línea y estén totalmente disponibles a lo largo del proceso de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="83460-243">En hello último momento como cada base de datos está listo toobe habilitado con hello eDTU del grupo nuevo, todas las conexiones activas se interrumpen.</span><span class="sxs-lookup"><span data-stu-id="83460-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="83460-244">Código de la aplicación siempre debe escribirse tooretry quitar conexiones por lo que se volverá a conectar la base de datos de toohello en grupo de escalado de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="83460-245">Equilibrio de carga entre grupos</span><span class="sxs-lookup"><span data-stu-id="83460-245">Load balance between pools</span></span>

<span data-ttu-id="83460-246">Como una alternativa tooscaling grupo hello, cree un segundo grupo y mover las bases de datos en él hello toobalance cargar entre Hola dos grupos.</span><span class="sxs-lookup"><span data-stu-id="83460-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="83460-247">toodo se debe crear este nuevo grupo de hello en Hola mismo servidor que hello en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="83460-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="83460-248">Hola [portal de Azure](https://portal.azure.com), abra hello **tenants1 -&lt;usuario&gt;**  server.</span><span class="sxs-lookup"><span data-stu-id="83460-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="83460-249">Haga clic en **+ nuevo grupo** toocreate un bloque de servidor actual Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="83460-250">En hello **grupo elástico de base de datos** plantilla:</span><span class="sxs-lookup"><span data-stu-id="83460-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="83460-251">Establecer **nombre** demasiado*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="83460-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="83460-252">Deje Hola tarifa como **grupo estándar**.</span><span class="sxs-lookup"><span data-stu-id="83460-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="83460-253">Haga clic en **Configurar grupo**.</span><span class="sxs-lookup"><span data-stu-id="83460-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="83460-254">Establecer **eDTU del grupo** demasiado*eDTU 50*.</span><span class="sxs-lookup"><span data-stu-id="83460-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="83460-255">Haga clic en **agregar bases de datos** toosee una lista de bases de datos servidor hello que pueden agregarse demasiado*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="83460-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="83460-256">Seleccione cualquier toomove 10 bases de datos en estas toohello nuevo grupo y, a continuación, haga clic en **seleccione**.</span><span class="sxs-lookup"><span data-stu-id="83460-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="83460-257">Si ha ha estado ejecutando el generador de carga de hello, servicio Hola ya sabe que el perfil de rendimiento requiere un grupo mayor que 50 eDTU del tamaño predeterminado hello y recomienda a partir de una configuración de eDTU 100.</span><span class="sxs-lookup"><span data-stu-id="83460-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![recomendación](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="83460-259">Para este tutorial, deje predeterminado de hello en 50 Edtu y haga clic en **seleccione** nuevo.</span><span class="sxs-lookup"><span data-stu-id="83460-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="83460-260">Seleccione **Aceptar** toocreate Hola nuevo grupo y toomove Hola seleccionado bases de datos en él.</span><span class="sxs-lookup"><span data-stu-id="83460-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="83460-261">Crear grupo de Hola y mover las bases de datos de Hola tarda unos minutos.</span><span class="sxs-lookup"><span data-stu-id="83460-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="83460-262">Tal y como se han movido a las bases de datos permanecen en línea y totalmente accesible hasta Hola muy último momento, momento en que se cierran todas las conexiones abiertas.</span><span class="sxs-lookup"><span data-stu-id="83460-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="83460-263">Tiene alguna lógica de reintento, siempre y cuando los clientes conectarán a continuación, toohello base de datos en el nuevo grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="83460-264">Examinar demasiado**Pool2** (en hello *tenants1* server) tooopen Hola grupo y supervisar su rendimiento.</span><span class="sxs-lookup"><span data-stu-id="83460-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="83460-265">Si no lo ve, espera para el aprovisionamiento de hello toocomplete de grupo nuevo.</span><span class="sxs-lookup"><span data-stu-id="83460-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="83460-266">Ahora verá que el uso de los recursos en *Pool1* ha disminuido y que *Pool2* tiene una carga similar.</span><span class="sxs-lookup"><span data-stu-id="83460-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="83460-267">Administrar el rendimiento de una sola base de datos</span><span class="sxs-lookup"><span data-stu-id="83460-267">Manage performance of a single database</span></span>

<span data-ttu-id="83460-268">Si una base de datos en un grupo experimenta una carga intensiva prolongada, dependiendo de la configuración del grupo de hello, puede suelen toodominate recursos de hello en el grupo de Hola y afectar a otras bases de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="83460-269">Si la actividad de hello es probable que toocontinue durante algún tiempo, base de datos de Hola se puede mover temporalmente fuera del grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="83460-270">Esto permite Hola Hola de toohave de base de datos de recursos adicionales necesarios y que se aísla de hello otras bases de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="83460-271">Este ejercicio simula el efecto de Hola de Contoso un auditorio experimentando una carga elevada al vales vaya a la venta de un concierto popular.</span><span class="sxs-lookup"><span data-stu-id="83460-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="83460-272">Abra Hola... \\ *PerformanceMonitoringAndManagement.ps1 demostración* secuencia de comandos.</span><span class="sxs-lookup"><span data-stu-id="83460-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="83460-273">Establezca **$DemoScenario = 5, Generación de una carga normal y una carga elevada en un solo inquilino (aprox. 95 DTU).**</span><span class="sxs-lookup"><span data-stu-id="83460-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="83460-274">Establezca **$SingleTenantDatabaseName = contosoconcerthall**</span><span class="sxs-lookup"><span data-stu-id="83460-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="83460-275">Ejecutar script de Hola con **F5**.</span><span class="sxs-lookup"><span data-stu-id="83460-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="83460-276">Hola [portal de Azure](https://portal.azure.com) abrir **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="83460-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="83460-277">Inspeccionar hello **grupo elástico supervisión** del gráfico y busque el uso de eDTU de grupo de hello aumentado.</span><span class="sxs-lookup"><span data-stu-id="83460-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="83460-278">Después de un minuto o dos, una mayor carga de hello debe iniciar tookick en y, rápidamente, debería ver que el grupo de Hola llega a 100% de utilización.</span><span class="sxs-lookup"><span data-stu-id="83460-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="83460-279">Inspeccionar hello **supervisión de bases de datos elásticas** presentación que se muestra en las bases de datos más recientes de Hola Hola última hora.</span><span class="sxs-lookup"><span data-stu-id="83460-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="83460-280">Hola *contosoconcerthall* base de datos pronto debe aparecer como una de las bases de datos más recientes de hello cinco.</span><span class="sxs-lookup"><span data-stu-id="83460-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="83460-281">**Haga clic en supervisión de bases de datos elásticas de hello** **gráfico** y lo abre hello **utilización de recursos de base de datos** página donde puede supervisar cualquiera de las bases de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="83460-282">Esto le permite aislar la presentación de Hola de hello *contosoconcerthall* base de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="83460-283">En la lista de Hola de bases de datos, haga clic en **contosoconcerthall**.</span><span class="sxs-lookup"><span data-stu-id="83460-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="83460-284">Haga clic en **tarifa (escala Dtu)** tooopen hello **configurar rendimiento** página donde puede establecer un nivel de rendimiento independiente para la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="83460-285">Haga clic en hello **estándar** pestaña Opciones de escala de tooopen hello en el nivel estándar Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="83460-286">Deslice hello **control deslizante DTU** tooright tooselect **100** Dtu.</span><span class="sxs-lookup"><span data-stu-id="83460-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="83460-287">Tenga en cuenta esta condición corresponde el objetivo de servicio toohello, **S3**.</span><span class="sxs-lookup"><span data-stu-id="83460-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="83460-288">Haga clic en **aplicar** toomove Hola base de datos del grupo de Hola y conviértala en un *para estándar S3* base de datos.</span><span class="sxs-lookup"><span data-stu-id="83460-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="83460-289">Una vez finalizada la escala es una completa, monitor Hola efecto en la base de datos de hello contosoconcerthall y Pool1 en las hojas elásticas de base de datos y de grupo Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="83460-290">Una vez que desaparezca de la carga elevada de hello en base de datos de hello contosoconcerthall debe rápidamente vuelve toohello grupo tooreduce su costo.</span><span class="sxs-lookup"><span data-stu-id="83460-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="83460-291">Si no está claro al que se realizará podría establecer una alerta en la base de datos de hello, que se desencadenará cuando el uso de su DTU cae por debajo de Hola por base de datos máximo en el grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="83460-292">El movimiento de una base de datos a un grupo se describe en el ejercicio 5.</span><span class="sxs-lookup"><span data-stu-id="83460-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="83460-293">Otros modelos de administración del rendimiento</span><span class="sxs-lookup"><span data-stu-id="83460-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="83460-294">**Ajuste de escala preferentes** en donde se explorar cómo tooscale una base de datos aislado, sabía que toolook de base de datos para anterior ejercicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="83460-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="83460-295">Si Administración de Hola de Contoso un auditorio tenía informado Wingtips de venta de vale inminente de hello, base de datos de Hola se hayan movido fuera del grupo de hello antelación.</span><span class="sxs-lookup"><span data-stu-id="83460-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="83460-296">En caso contrario, es probable que habría requería una alerta en el grupo de Hola o toospot de la base de datos de hello lo que estaba sucediendo.</span><span class="sxs-lookup"><span data-stu-id="83460-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="83460-297">Desearía toolearn respecto de hello otros inquilinos de hello grupo quejan de reducción del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="83460-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="83460-298">Y si el inquilino de hello puede predecir cuánto necesitan recursos adicionales, puede configurar una base de datos de automatización de Azure runbook toomove Hola fuera del grupo de hello y, a continuación, realizar la copia en una programación definida.</span><span class="sxs-lookup"><span data-stu-id="83460-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="83460-299">**Autoservicio escalado inquilino** porque el ajuste de escala es una tarea que se llaman fácilmente a través de la API de administración de hello, puede fácilmente crear bases de datos de inquilino de tooscale de capacidad de hello en la aplicación de acceso de inquilino y ofrecer como una característica de su servicio de SaaS.</span><span class="sxs-lookup"><span data-stu-id="83460-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="83460-300">Por ejemplo, permitir que los inquilinos self-administer escalado vertical y horizontalmente, quizás directamente vinculada facturación tootheir!</span><span class="sxs-lookup"><span data-stu-id="83460-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="83460-301">**Ajuste de escala en un grupo de arriba y abajo en los patrones de uso de toomatch de una programación**</span><span class="sxs-lookup"><span data-stu-id="83460-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="83460-302">Cuando el uso de inquilinos agregado sigue los patrones de uso de predicción, puede usar Automatización de Azure tooscale un grupo de arriba y abajo según una programación.</span><span class="sxs-lookup"><span data-stu-id="83460-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="83460-303">Por ejemplo, puede reducir un grupo verticalmente después de las 6 p.m. y escalarlo de nuevo antes de las 6 a.m. entre semana porque sabe que se necesitan menos recursos.</span><span class="sxs-lookup"><span data-stu-id="83460-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="83460-304">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="83460-304">Next steps</span></span>

<span data-ttu-id="83460-305">En este tutorial, aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="83460-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="83460-306">Simular el uso en las bases de datos del inquilino de hello mediante la ejecución de un generador de carga proporcionado</span><span class="sxs-lookup"><span data-stu-id="83460-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="83460-307">Bases de datos de inquilino de hello monitor como responden toohello aumento de carga</span><span class="sxs-lookup"><span data-stu-id="83460-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="83460-308">Escalar verticalmente Hola grupo elástico en respuesta toohello mayor de la base de datos de carga</span><span class="sxs-lookup"><span data-stu-id="83460-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="83460-309">Aprovisionar una segunda actividad de base de datos de grupo elástico tooload saldo Hola</span><span class="sxs-lookup"><span data-stu-id="83460-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="83460-310">Tutorial sobre la restauración de un único inquilino</span><span class="sxs-lookup"><span data-stu-id="83460-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="83460-311">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="83460-311">Additional resources</span></span>

* <span data-ttu-id="83460-312">Adicionales [tutoriales que se basan en la implementación de aplicaciones de SaaS Wingtip Hola](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="83460-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="83460-313">Grupos elásticos de SQL</span><span class="sxs-lookup"><span data-stu-id="83460-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="83460-314">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="83460-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="83460-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md): tutorial de configuración y uso de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="83460-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>

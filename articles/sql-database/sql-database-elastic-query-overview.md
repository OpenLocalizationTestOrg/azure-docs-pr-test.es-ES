---
title: "información general de consulta flexible de base de datos SQL de aaaAzure | Documentos de Microsoft"
description: "Información general sobre la característica de consulta flexible de Hola"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="bae95-103">Información general sobre las consultas elásticas de Azure SQL Database (versión preliminar)</span><span class="sxs-lookup"><span data-stu-id="bae95-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="bae95-104">característica de consulta flexible de Hello (en vista previa) le permite toorun una consulta de Transact-SQL que abarca varias bases de datos en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="bae95-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="bae95-105">Permite tablas remotas de tooperform consultas entre bases de datos tooaccess y tooquery de herramientas (Excel, Power BI, Tableau, etc.) de Microsoft y terceros tooconnect uno de los niveles de datos con varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="bae95-106">Con esta característica, puede escalar horizontalmente capas de datos de toolarge de las consultas en base de datos SQL y visualizar los resultados de hello en los informes de business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="bae95-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="bae95-107">¿Por qué usar consultas elásticas?</span><span class="sxs-lookup"><span data-stu-id="bae95-107">Why use elastic queries?</span></span>

<span data-ttu-id="bae95-108">**Base de datos SQL de Azure**</span><span class="sxs-lookup"><span data-stu-id="bae95-108">**Azure SQL Database**</span></span>

<span data-ttu-id="bae95-109">Realice consultas entre bases de datos SQL de Azure completamente en T-SQL.</span><span class="sxs-lookup"><span data-stu-id="bae95-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="bae95-110">lo que permite realizar consultas de solo lectura en bases de datos remotas.</span><span class="sxs-lookup"><span data-stu-id="bae95-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="bae95-111">Esto proporciona una opción para local actual usando nombres de tres y cuatro partes o base de datos del servidor vinculado tooSQL las aplicaciones de toomigrate de los clientes de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bae95-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="bae95-112">**Disponible en el nivel Estándar**</span><span class="sxs-lookup"><span data-stu-id="bae95-112">**Available on standard tier**</span></span>

<span data-ttu-id="bae95-113">Consulta elástico se admite en el nivel de rendimiento estándar de hello en el nivel de rendimiento de suma toohello Premium.</span><span class="sxs-lookup"><span data-stu-id="bae95-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="bae95-114">Vea la sección de hello en vista previa de limitaciones que se indican en las limitaciones de rendimiento para los niveles de rendimiento inferior.</span><span class="sxs-lookup"><span data-stu-id="bae95-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="bae95-115">**Bases de datos de inserción tooremote**</span><span class="sxs-lookup"><span data-stu-id="bae95-115">**Push tooremote databases**</span></span>

<span data-ttu-id="bae95-116">Consultas elásticas ahora pueden insertar parámetros toohello remotos bases de datos SQL para su ejecución.</span><span class="sxs-lookup"><span data-stu-id="bae95-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="bae95-117">**Ejecución de un procedimiento almacenado**</span><span class="sxs-lookup"><span data-stu-id="bae95-117">**Stored procedure execution**</span></span>

<span data-ttu-id="bae95-118">Ejecute llamadas a procedimientos almacenados remotos o funciones remotas mediante [sp\_execute\_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="bae95-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="bae95-119">**Flexibilidad**</span><span class="sxs-lookup"><span data-stu-id="bae95-119">**Flexibility**</span></span>

<span data-ttu-id="bae95-120">Tablas externas con consulta elástico ahora pueden hacer referencia a tablas de tooremote con un esquema diferente o un nombre de tabla.</span><span class="sxs-lookup"><span data-stu-id="bae95-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="bae95-121">Escenarios de consulta elástica</span><span class="sxs-lookup"><span data-stu-id="bae95-121">Elastic query scenarios</span></span>

<span data-ttu-id="bae95-122">objetivo de Hello es toofacilitate consultar escenarios donde varias bases de datos contribuyen filas en un solo resultado total.</span><span class="sxs-lookup"><span data-stu-id="bae95-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="bae95-123">consulta de Hola o bien puede estar compuesto por usuario de Hola o una aplicación directamente o indirectamente a través de herramientas que están conectados toohello base de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="bae95-124">Esto resulta especialmente útil cuando se crean informes, mediante herramientas de integración de datos o de BI comerciales, o bien cualquier aplicación que no se pueda cambiar.</span><span class="sxs-lookup"><span data-stu-id="bae95-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="bae95-125">Con una consulta flexible, puede consultar a través de varias bases de datos con experiencia de conectividad de SQL Server familiar de hello en herramientas como Excel, Power BI, Tableau o Cognos.</span><span class="sxs-lookup"><span data-stu-id="bae95-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="bae95-126">Una consulta flexible permite un acceso sencillo tooan completa colección de bases de datos a través de las consultas emitidas por SQL Server Management Studio o Visual Studio y facilita la consulta entre bases de datos de Entity Framework o en otros entornos de ORM.</span><span class="sxs-lookup"><span data-stu-id="bae95-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="bae95-127">La figura 1 muestra un escenario donde existente en la nube aplicación (que utiliza hello [biblioteca de cliente de base de datos elástica](sql-database-elastic-database-client-library.md)) se basa en una escala horizontal de datos de nivel y se utiliza una consulta flexible para informes de entre bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="bae95-128">**Figura 1** Consulta usada en la capa de datos de escala horizontal</span><span class="sxs-lookup"><span data-stu-id="bae95-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Consulta usada en la capa de datos de escala horizontal][1]

<span data-ttu-id="bae95-130">Escenarios de clientes para consulta elástico se caracterizan por hello siguientes topologías:</span><span class="sxs-lookup"><span data-stu-id="bae95-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="bae95-131">**Particionamiento vertical - consultas entre bases de datos** (topología 1): datos de Hola se crea una partición vertical entre un número de bases de datos de una capa de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="bae95-132">Normalmente, los distintos conjuntos de tablas residen en bases de datos diferentes.</span><span class="sxs-lookup"><span data-stu-id="bae95-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="bae95-133">Esto significa que el esquema hello es diferente en distintas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="bae95-134">Por ejemplo, todas las tablas de inventario se encuentran en una base de datos mientras que todas las relacionadas con la contabilidad se encuentran en otra.</span><span class="sxs-lookup"><span data-stu-id="bae95-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="bae95-135">Casos de uso comunes con esta topología requieren una tooquery a través de o informes de toocompile entre tablas en varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="bae95-136">**Particiones horizontales - particionamiento** (topología de 2): datos se dividen en sentido horizontal de nivel de filas de toodistribute a través de un repositorio ampliado de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="bae95-137">Con este enfoque, el esquema de hello es idéntica en todas las bases de datos participantes.</span><span class="sxs-lookup"><span data-stu-id="bae95-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="bae95-138">Este enfoque también se denomina simplemente "particionamiento".</span><span class="sxs-lookup"><span data-stu-id="bae95-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="bae95-139">Particionamiento puede realizarse y administra mediante bibliotecas de herramientas de bases de datos elásticas (1) Hola o (2) particionamiento automático.</span><span class="sxs-lookup"><span data-stu-id="bae95-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="bae95-140">Una consulta flexible es informes tooquery o compilación usados en muchas particiones.</span><span class="sxs-lookup"><span data-stu-id="bae95-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="bae95-141">Consulta flexible funciona mejor para escenarios de informes ocasionales donde se puede realizar la mayor parte del procesamiento de Hola de capa de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="bae95-142">Para grandes cargas de trabajo de informes o escenarios de almacenamiento de datos con consultas más complejas, considere también usar [Almacenamiento de datos SQL de Azure](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="bae95-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="bae95-143">Particionamiento vertical: consultas entre bases de datos</span><span class="sxs-lookup"><span data-stu-id="bae95-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="bae95-144">toobegin de codificación, vea [Introducción a la consulta entre bases de datos (creación de particiones verticales)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="bae95-145">Una consulta flexible puede ser datos de uso toomake ubicados en una bases de datos SQL del tooother disponible de base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="bae95-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="bae95-146">Esto permite que las consultas de una base de datos toorefer tootables en cualquier otro remoto base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="bae95-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="bae95-147">Hola primer paso es toodefine un origen de datos externo para cada base de datos remota.</span><span class="sxs-lookup"><span data-stu-id="bae95-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="bae95-148">origen de datos externo de Hola se define en hello base de datos local que se desean toogain acceso tootables ubicado en la base de datos remota Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="bae95-149">No son necesarios en la base de datos remota de Hola cambios.</span><span class="sxs-lookup"><span data-stu-id="bae95-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="bae95-150">Para verticales partición escenarios típicos donde diferentes bases de datos tienen esquemas distintos, consultas elásticas pueden ser tooimplement usado casos de uso comunes, como acceder a los datos tooreference y entre bases de datos realizar consultas.</span><span class="sxs-lookup"><span data-stu-id="bae95-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bae95-151">Se debe poseer el permiso ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="bae95-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="bae95-152">Este permiso se incluye con el permiso ALTER DATABASE Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="bae95-153">Los permisos ALTER ANY EXTERNAL DATA SOURCE son toohello toorefer necesario el origen de datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="bae95-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="bae95-154">**Datos de referencia**: topología de Hola se utiliza para la administración de datos de referencia.</span><span class="sxs-lookup"><span data-stu-id="bae95-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="bae95-155">En la siguiente ilustración de hello, dos tablas (T1 y T2) con datos de referencia se mantienen en una base de datos dedicado.</span><span class="sxs-lookup"><span data-stu-id="bae95-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="bae95-156">Utilizando una consulta flexible, ahora puede acceder a tablas T1 y T2 remotamente desde otras bases de datos, como se muestra en la figura Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="bae95-157">Use la topología 1 si las tablas de referencia son pequeñas o si las consultas remotas en la tabla de referencia tienen predicados selectivos.</span><span class="sxs-lookup"><span data-stu-id="bae95-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="bae95-158">**Figura 2** partición Vertical: usar datos de referencia de tooquery de consulta flexible</span><span class="sxs-lookup"><span data-stu-id="bae95-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Creación de particiones: usar datos de referencia de consulta flexible tooquery vertical][3]

<span data-ttu-id="bae95-160">**Consulta entre bases de datos**: las consultas elásticas hacen posibles los casos de uso que requieren realizar consultas en varias bases de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="bae95-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="bae95-161">En la ilustración 3, se muestran cuatro bases de datos diferentes: CRM, Inventory, HR y Products.</span><span class="sxs-lookup"><span data-stu-id="bae95-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="bae95-162">Las consultas realizadas en una de las bases de datos de hello también necesitan tener acceso a tooone o todos Hola otras bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="bae95-163">Con una consulta flexible, puede configurar la base de datos para este caso mediante la ejecución de algunas instrucciones de DDL simples en cada una de las bases de cuatro datos Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="bae95-164">Después de esta configuración por única vez, tabla de acceso tooa remota es tan sencillo como referencia tooa de tabla local de las consultas de T-SQL o desde las herramientas de BI.</span><span class="sxs-lookup"><span data-stu-id="bae95-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="bae95-165">Si las consultas remotas de hello no devuelven resultados grandes, se recomienda este enfoque.</span><span class="sxs-lookup"><span data-stu-id="bae95-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="bae95-166">**Figura 3** partición Vertical: con consulta elástico tooquery a través de varias bases de datos</span><span class="sxs-lookup"><span data-stu-id="bae95-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Particionamiento vertical: con consulta elástico tooquery a través de varias bases de datos][4]

<span data-ttu-id="bae95-168">pasos siguientes Hello configuran consultas de bases de datos elásticas para escenarios de partición verticales que requieren la tabla de access tooa ubicados en bases de datos remotas de SQL con hello mismo esquema:</span><span class="sxs-lookup"><span data-stu-id="bae95-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="bae95-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) miClaveMaestra</span><span class="sxs-lookup"><span data-stu-id="bae95-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="bae95-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) miCredencial</span><span class="sxs-lookup"><span data-stu-id="bae95-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="bae95-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) miOrigenDeDatos de tipo **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="bae95-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="bae95-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) miTabla</span><span class="sxs-lookup"><span data-stu-id="bae95-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="bae95-173">Después de ejecutar las instrucciones de DDL de hello, puede tener acceso a tabla remota Hola "mytable" como si fuese una tabla local.</span><span class="sxs-lookup"><span data-stu-id="bae95-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="bae95-174">La base de datos de SQL Azure automáticamente se abre una base de datos remoto de conexión toohello, procesará la solicitud en la base de datos remota de Hola y devuelve los resultados de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="bae95-175">Particiones horizontales (particionamiento)</span><span class="sxs-lookup"><span data-stu-id="bae95-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="bae95-176">Con tooperform de consulta flexible tareas de notificación sobre particionada, es decir, horizontalmente particiones, capa de datos requiere un [mapa de particiones de bases de datos elásticas](sql-database-elastic-scale-shard-map-management.md) bases de datos de toorepresent Hola de capa de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="bae95-177">Normalmente, sólo un mapa de particiones solo se usa en este escenario y una base de datos dedicada con capacidades de consulta flexible (nodo principal) actúa como punto de entrada de Hola para consultas de notificación.</span><span class="sxs-lookup"><span data-stu-id="bae95-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="bae95-178">Sólo esta base de datos dedicada debe mapa de particiones de acceso toohello.</span><span class="sxs-lookup"><span data-stu-id="bae95-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="bae95-179">Figura 4 muestra esta topología y su configuración con asignación de base de datos y particiones de consulta flexible de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="bae95-180">las bases de datos de Hola Hola nivel de datos pueden ser de cualquier edición o versión de base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="bae95-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="bae95-181">Para obtener más información acerca de la biblioteca de cliente de base de datos elástica hello y la creación de mapas de particiones, vea [administración de mapa de particiones](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="bae95-182">**Ilustración 4** Particionamiento horizontal: usar una consulta elástica para informes en capas de datos particionadas</span><span class="sxs-lookup"><span data-stu-id="bae95-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Particionamiento horizontal: usar una consulta elástica para informes en capas de datos particionadas][5]

> [!NOTE]
> <span data-ttu-id="bae95-184">Base de datos de consulta flexible (nodo principal) puede ser independiente de la base de datos, o puede ser Hola mismo dicho mapa de particiones de Hola de hosts de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="bae95-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="bae95-185">Cualquier configuración que elija, asegúrese de que ese nivel de servicio y el rendimiento de esa base de datos es la cantidad de hello esperado de toohandle lo suficientemente alto de solicitudes de inicio de sesión o consulta.</span><span class="sxs-lookup"><span data-stu-id="bae95-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="bae95-186">Hello estos pasos, configure las consultas de bases de datos elásticas para escenarios horizontales de partición que requieren acceso tooa conjunto de tabla y que se encuentran en (normalmente) varios remotos bases de datos SQL:</span><span class="sxs-lookup"><span data-stu-id="bae95-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="bae95-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) miClaveMaestra</span><span class="sxs-lookup"><span data-stu-id="bae95-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="bae95-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) miCredencial</span><span class="sxs-lookup"><span data-stu-id="bae95-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="bae95-189">Crear un [mapa de particiones](sql-database-elastic-scale-shard-map-management.md) que representa el nivel de datos mediante la biblioteca de cliente de base de datos elástica Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="bae95-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) miOrigenDeDatos de tipo **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="bae95-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="bae95-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) miTabla</span><span class="sxs-lookup"><span data-stu-id="bae95-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="bae95-192">Una vez que ha llevado a cabo estos pasos, puede tener acceso a la tabla con particiones horizontales de Hola "mytable" como si fuese una tabla local.</span><span class="sxs-lookup"><span data-stu-id="bae95-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="bae95-193">La base de datos de SQL Azure automáticamente abre varias conexiones en paralelo toohello bases de datos remotas donde se almacenan físicamente las tablas de hello, procesa las solicitudes de hello en bases de datos remotas de Hola y devuelve los resultados de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="bae95-194">Obtener más información sobre los pasos de hello necesarios para el escenario de particiones horizontales de hello puede encontrarse en [consulta flexible para la partición horizontal](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="bae95-195">toobegin de codificación, vea [Introducción a la consulta flexible para la partición horizontal (particionamiento)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="bae95-196">Consultas T-SQL</span><span class="sxs-lookup"><span data-stu-id="bae95-196">T-SQL querying</span></span>
<span data-ttu-id="bae95-197">Una vez haya definido los orígenes de datos externos y las tablas externas, puede usar SQL Server conexión cadenas tooconnect toohello bases de datos normales que definió las tablas externas.</span><span class="sxs-lookup"><span data-stu-id="bae95-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="bae95-198">A continuación, puede ejecutar instrucciones T-SQL sobre las tablas externas en esa conexión con limitaciones de hello descritas a continuación.</span><span class="sxs-lookup"><span data-stu-id="bae95-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="bae95-199">Puede encontrar más información y ejemplos de consultas de T-SQL en temas de la documentación de Hola para [particiones horizontales](sql-database-elastic-query-horizontal-partitioning.md) y [particionamiento vertical](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="bae95-200">Conectividad para herramientas</span><span class="sxs-lookup"><span data-stu-id="bae95-200">Connectivity for tools</span></span>
<span data-ttu-id="bae95-201">Puede usar regular tooconnect de cadenas de conexión de SQL Server de las aplicaciones y toodatabases herramientas de integración de inteligencia empresarial o datos que tienen tablas externas.</span><span class="sxs-lookup"><span data-stu-id="bae95-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="bae95-202">Asegúrese de que SQL Server se admite como origen de datos para la herramienta.</span><span class="sxs-lookup"><span data-stu-id="bae95-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="bae95-203">Una vez conectado, consulte toohello consulta elástico hello y base de datos de tablas externas en esa base de datos tal como lo haría con cualquier otra base de datos de SQL Server se conecta a toowith la herramienta.</span><span class="sxs-lookup"><span data-stu-id="bae95-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bae95-204">Actualmente no se admite la autenticación usando Azure Active Directory con consultas elásticas.</span><span class="sxs-lookup"><span data-stu-id="bae95-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="bae95-205">Coste</span><span class="sxs-lookup"><span data-stu-id="bae95-205">Cost</span></span>
<span data-ttu-id="bae95-206">Consulta elástico se incluye en el costo de Hola de las bases de datos de la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="bae95-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="bae95-207">Tenga en cuenta que se admiten topologías donde las bases de datos remotos están en otro centro de datos de punto de conexión de consulta flexible de Hola, pero la salida de datos de bases de datos remotas se encargan de regular [tasas Azure](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="bae95-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="bae95-208">Limitaciones de vista previa</span><span class="sxs-lookup"><span data-stu-id="bae95-208">Preview limitations</span></span>
* <span data-ttu-id="bae95-209">Ejecuta la primera consulta elástica puede tardar hasta tooa varios minutos en el nivel de rendimiento estándar de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="bae95-210">Este tiempo es una funcionalidad de consulta flexible de hello tooload necesarios; mejora el rendimiento de carga con niveles de rendimiento superiores.</span><span class="sxs-lookup"><span data-stu-id="bae95-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="bae95-211">Aún no se admite el scripting de orígenes de datos externos o tablas externas desde SSMS o SSDT.</span><span class="sxs-lookup"><span data-stu-id="bae95-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="bae95-212">La función Importación/Exportación para bases de datos SQL aún no admite orígenes de datos externos ni tablas externas.</span><span class="sxs-lookup"><span data-stu-id="bae95-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="bae95-213">Si necesita toouse importación/exportación, quitar estos objetos antes de exportar y, a continuación, volver a crearlos después de importar.</span><span class="sxs-lookup"><span data-stu-id="bae95-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="bae95-214">Consulta flexible actualmente solo admite tablas de tooexternal de acceso de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="bae95-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="bae95-215">Sin embargo, puede utilizar toda la funcionalidad de T-SQL en la base de datos de Hola donde se define la tabla externa de Hola.</span><span class="sxs-lookup"><span data-stu-id="bae95-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="bae95-216">Esto puede ser útil para, por ejemplo, conservar los resultados temporales con, por ejemplo, seleccione < column_list > en < local_table > o toodefine procedimientos almacenados en la base de datos de consulta flexible de Hola que hacen referencia a tablas de tooexternal.</span><span class="sxs-lookup"><span data-stu-id="bae95-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="bae95-217">A excepción de nvarchar(max), los tipos LOB no se admiten en las definiciones de tabla externa.</span><span class="sxs-lookup"><span data-stu-id="bae95-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="bae95-218">Como alternativa, puede crear una vista en hello base de datos remota que convierte el tipo LOB de Hola a nvarchar (max), defina la tabla externa a través de la vista de hello en lugar de la tabla de base de Hola y, a continuación, se convierte en tipo LOB original de hello en las consultas.</span><span class="sxs-lookup"><span data-stu-id="bae95-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="bae95-219">Actualmente no se admiten estadísticas de columna con tablas externas.</span><span class="sxs-lookup"><span data-stu-id="bae95-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="bae95-220">Las estadísticas de tablas se admiten, pero necesitan toobe creado manualmente.</span><span class="sxs-lookup"><span data-stu-id="bae95-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="bae95-221">Comentarios</span><span class="sxs-lookup"><span data-stu-id="bae95-221">Feedback</span></span>
<span data-ttu-id="bae95-222">Por favor, compartir comentarios sobre su experiencia con consultas elásticas con nosotros Disqus siguiente, foros de MSDN de hello, o en Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="bae95-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="bae95-223">Estamos interesados en todos los tipos de comentarios sobre el servicio de hello (defectos, bordes desparejos, espacios de característica).</span><span class="sxs-lookup"><span data-stu-id="bae95-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="bae95-224">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="bae95-224">Next steps</span></span>

* <span data-ttu-id="bae95-225">Para obtener un tutorial sobre la creación de particiones verticales, consulte [Introducción a las consultas entre bases de datos (particiones verticales)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="bae95-226">Para ver la sintaxis y consultas de ejemplo para los datos con particionamiento vertical, consulte [Consulta de datos particionados verticalmente](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="bae95-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="bae95-227">Para obtener un tutorial sobre la creación de particiones horizontales (particionamiento), consulte [Introducción a las consultas elásticas para las particiones horizontales (particionamiento)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="bae95-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="bae95-228">Para ver la sintaxis y consultas de ejemplo para los datos con particionamiento horizontal, consulte [Consulta de datos particionados horizontalmente.](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="bae95-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="bae95-229">Consulte [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) para ver un procedimiento almacenado que ejecuta una instrucción de Transact-SQL en una sola instancia remota de Azure SQL Database o un conjunto de bases de datos que actúan como particiones en un esquema de particiones horizontales.</span><span class="sxs-lookup"><span data-stu-id="bae95-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->

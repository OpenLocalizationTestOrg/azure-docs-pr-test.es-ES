---
title: "esquema de base de datos de SQL Azure aaaManage en una aplicación de varios inquilinos | Documentos de Microsoft"
description: "Administración del esquema para varios inquilinos en una aplicación multiinquilino que usa Azure SQL Database"
keywords: tutorial de SQL Database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="5996b-104">Administrar esquemas para varios inquilinos en hello aplicación Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="5996b-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="5996b-105">Hola [primer tutorial de SaaS Wingtip](sql-database-saas-tutorial.md) muestra cómo puede proporcionar una base de datos de inquilino y registrarlo en el catálogo de hello aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="5996b-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="5996b-106">Como cualquier aplicación Hola aplicación SaaS Wingtip evolucionará con el tiempo y a veces será necesario base de datos de cambios toohello.</span><span class="sxs-lookup"><span data-stu-id="5996b-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="5996b-107">Pueden incluir cambios de esquema nueva o modificada, datos de referencia nuevos o modificados y el rendimiento de la aplicación óptimo de tooensure de las tareas rutinarias de la base de datos mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="5996b-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="5996b-108">Con una aplicación SaaS, estos cambios deben toobe implementa de manera coordinada a través de una línea potencialmente masiva de las bases de datos de inquilino.</span><span class="sxs-lookup"><span data-stu-id="5996b-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="5996b-109">Para estos toobe cambios en el futuro de inquilinos bases de datos, será necesario toobe incorporar Hola proceso de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="5996b-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="5996b-110">Este tutorial explora dos escenarios - implementación de las actualizaciones de datos de referencia para todos los inquilinos y reoptimización un índice en hello de la tabla que contiene datos de referencia de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="5996b-111">Hola [trabajos elásticos](sql-database-elastic-jobs-overview.md) característica es tooexecute usa estas operaciones en todos los inquilinos y hello *dorada* base de datos de inquilinos que se utiliza como plantilla para nuevas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="5996b-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="5996b-112">En este tutorial, aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="5996b-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="5996b-113">Crear una cuenta de trabajo</span><span class="sxs-lookup"><span data-stu-id="5996b-113">Create a job account</span></span>
> * <span data-ttu-id="5996b-114">Consultas entre varios inquilinos</span><span class="sxs-lookup"><span data-stu-id="5996b-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="5996b-115">Actualizar datos en todas las bases de datos de inquilino</span><span class="sxs-lookup"><span data-stu-id="5996b-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="5996b-116">Crear un índice en una tabla en todas las bases de datos de inquilino</span><span class="sxs-lookup"><span data-stu-id="5996b-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="5996b-117">toocomplete este tutorial, asegúrese de hello seguro siguiendo los requisitos previos se cumplen:</span><span class="sxs-lookup"><span data-stu-id="5996b-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="5996b-118">se implementa la aplicación de SaaS Wingtip Hello.</span><span class="sxs-lookup"><span data-stu-id="5996b-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="5996b-119">vea toodeploy en menos de cinco minutos, [implementar y explorar la aplicación de SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="5996b-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="5996b-120">Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="5996b-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="5996b-121">Para más información, consulte [Introducción a Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="5996b-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="5996b-122">se instala la versión más reciente de Hola de SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="5996b-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="5996b-123">Descarga e instalación de SSMS</span><span class="sxs-lookup"><span data-stu-id="5996b-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="5996b-124">*Este tutorial usa características de hello servicio de base de datos SQL que se encuentran en una vista previa limitada (trabajos de base de datos elástica). Si desea toodo en este tutorial, proporcione el identificador de suscripción tooSaaSFeedback@microsoft.com con el asunto = elástico de vista previa de los trabajos. Después de recibir la confirmación de que se ha habilitado la suscripción, [descargar e instalar los cmdlets de trabajos de la versión preliminar más reciente de hello](https://github.com/jaredmoo/azure-powershell/releases). Esta versión preliminar es limitada, de modo que póngase en contacto SaaSFeedback@microsoft.com si necesita asistencia.*</span><span class="sxs-lookup"><span data-stu-id="5996b-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="5996b-125">Introducción tooSaaS patrones de la administración de esquema</span><span class="sxs-lookup"><span data-stu-id="5996b-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="5996b-126">Hello inquilino único por base de datos de SaaS patrón ventajas de muchas maneras de aislamiento de los datos Hola que da como resultado, pero en hello mismo tiempo que aumenta la complejidad adicional de Hola de mantener y administrar muchas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="5996b-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="5996b-127">[Trabajos elásticos](sql-database-elastic-jobs-overview.md) facilita la administración y la administración de nivel de datos SQL de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="5996b-128">Trabajos permiten toosecurely y ejecutan de forma confiable, tareas (secuencias de comandos de T-SQL) independientes de la interacción del usuario o una entrada, en un grupo de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="5996b-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="5996b-129">Este método puede ser utilizado toodeploy esquema y los cambios de datos de referencia entre todos los inquilinos en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="5996b-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="5996b-130">Trabajos elásticos también pueden ser utilizado toomaintain una *dorada* utiliza la copia de base de datos de hello toocreate nuevos inquilinos, así se garantiza siempre tenga hello más recientes esquema y datos de referencia.</span><span class="sxs-lookup"><span data-stu-id="5996b-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![pantalla](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="5996b-132">Versión preliminar limitada de Trabajos elásticos</span><span class="sxs-lookup"><span data-stu-id="5996b-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="5996b-133">Hay una nueva versión de Trabajos elásticos que ahora es una característica integrada de Azure SQL Database (no requiere servicios ni componentes adicionales).</span><span class="sxs-lookup"><span data-stu-id="5996b-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="5996b-134">Esta nueva versión de Trabajos elásticos ofrece actualmente una versión preliminar limitada.</span><span class="sxs-lookup"><span data-stu-id="5996b-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="5996b-135">Esta vista previa limitada actualmente admite cuentas de trabajo de PowerShell toocreate y toocreate de T-SQL y administrar trabajos.</span><span class="sxs-lookup"><span data-stu-id="5996b-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="5996b-136">*Este tutorial usa características de hello servicio de base de datos SQL que se encuentran en una vista previa limitada (trabajos de base de datos elástica). Si desea toodo en este tutorial, proporcione el identificador de suscripción tooSaaSFeedback@microsoft.com con el asunto = elástico de vista previa de los trabajos. Después de recibir la confirmación de que se ha habilitado la suscripción, [descargar e instalar los cmdlets de trabajos de la versión preliminar más reciente de hello](https://github.com/jaredmoo/azure-powershell/releases). Esta versión preliminar es limitada, de modo que póngase en contacto SaaSFeedback@microsoft.com si necesita asistencia.*</span><span class="sxs-lookup"><span data-stu-id="5996b-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="5996b-137">Obtener scripts de la aplicación hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="5996b-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="5996b-138">Hello Wingtip SaaS scripts y código fuente de aplicación están disponibles en hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repositorio de github.</span><span class="sxs-lookup"><span data-stu-id="5996b-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="5996b-139">[Pasos de secuencias de comandos de toodownload Hola Wingtip SaaS](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="5996b-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="5996b-140">Creación de una base de datos de cuentas de trabajo y una nueva cuenta de trabajo</span><span class="sxs-lookup"><span data-stu-id="5996b-140">Create a job account database and new job account</span></span>

<span data-ttu-id="5996b-141">Este tutorial necesita que usar PowerShell toocreate Hola trabajo base de datos y el trabajo de cuenta.</span><span class="sxs-lookup"><span data-stu-id="5996b-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="5996b-142">Como MSDB y el Agente SQL, trabajos elástico usa SQL Azure base de datos toostore definiciones de trabajos, el estado de trabajo y el historial.</span><span class="sxs-lookup"><span data-stu-id="5996b-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="5996b-143">Una vez creada la cuenta de trabajo de hello, puede crear y supervisar trabajos inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="5996b-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="5996b-144">Abra... \\Módulos de aprendizaje\\Schema Management\\*demostración SchemaManagement.ps1* en hello **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="5996b-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="5996b-145">Presione **F5** secuencia de comandos de toorun Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="5996b-146">Hola *demostración SchemaManagement.ps1* Hola de llamadas de script *implementar SchemaManagement.ps1* script toocreate una *S2* base de datos denominada **jobaccount** en el servidor de catálogo Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="5996b-147">A continuación, crea la cuenta de trabajo de hello, pasar la base de datos de hello jobaccount como una llamada de creación de cuenta de trabajo de parámetro toohello.</span><span class="sxs-lookup"><span data-stu-id="5996b-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="5996b-148">Crear un trabajo de los inquilinos tooall de datos nueva referencia toodeploy</span><span class="sxs-lookup"><span data-stu-id="5996b-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="5996b-149">Cada base de datos de inquilinos incluye un conjunto de tipos de ubicación que definen el tipo de saludo de eventos que se hospedan en un lugar.</span><span class="sxs-lookup"><span data-stu-id="5996b-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="5996b-150">En este ejercicio, implementar un tipo de ubicación adicional actualización tooall Hola inquilino bases de datos tooadd dos: *motocicleta competir* y *natación Club*.</span><span class="sxs-lookup"><span data-stu-id="5996b-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="5996b-151">Estos tipos de jurisdicción corresponden toohello imagen de fondo que se ven en la aplicación de eventos de hello inquilino.</span><span class="sxs-lookup"><span data-stu-id="5996b-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="5996b-152">Haga clic en el menú desplegable menú de tipo de ubicación de Hola y validar que están disponibles solo 10 opciones de tipo de ubicación y específicamente esa 'Motocicleta competir' y 'Natación Club' no están incluidos en la lista de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="5996b-153">Ahora vamos a crear un Hola de trabajo tooupdate *VenueTypes* de tabla en todas las bases de datos de inquilino de Hola y agregar nuevos tipos de jurisdicción Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="5996b-154">toocreate un nuevo trabajo, se utiliza un conjunto de trabajos creados en la base de datos de hello jobaccount cuando se creó la cuenta de trabajo de Hola de procedimientos almacenados del sistema.</span><span class="sxs-lookup"><span data-stu-id="5996b-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="5996b-155">Abra SSMS y conectar el servidor de catálogo toohello: catálogo -\<usuario\>. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="5996b-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="5996b-156">Conecte también servidor de inquilinos de toohello: tenants1 -\<usuario\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="5996b-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="5996b-157">Examinar toohello *contosoconcerthall* base de datos en hello *tenants1* Hola de servidor y consulta *VenueTypes* tooconfirm de tabla que *motocicleta competir*  y *natación Club* **no son** en la lista de resultados de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="5996b-158">Archivo de hello abrir... \\Módulos de aprendizaje\\administración del esquema\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="5996b-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="5996b-159">Modificar la instrucción de hello: establecer @wtpUser = &lt;usuario&gt; y sustituya el valor de usuario de hello usa al implementar la aplicación de Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="5996b-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="5996b-160">Asegúrese de base de datos de jobaccount toohello conectado y presione **F5** para ejecutar el script de Hola</span><span class="sxs-lookup"><span data-stu-id="5996b-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="5996b-161">**SP\_agregar\_destino\_grupo** crea el nombre de grupo de destino de hello DemoServerGroup, ahora tenemos tooadd miembros de destino.</span><span class="sxs-lookup"><span data-stu-id="5996b-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="5996b-162">**SP\_agregar\_destino\_grupo\_miembro** agrega un *server* tipo de miembro que considere todas las bases de datos dentro de ese servidor (tenga en cuenta esto es hello tenants1-dedestino&lt; Usuario&gt; servidor que contiene las bases de datos del inquilino de Hola) en tiempo de trabajo de ejecución debe incluirse en el trabajo de hello, hello en segundo lugar está agregando un *base de datos* tienen como destino el tipo de miembro, específicamente Hola (base de datos 'maestra' basetenantdb) que reside en el catálogo -&lt;usuario&gt; server y por último otro *base de datos* destino grupo miembro tipo tooinclude hello adhocanalytics base de datos que se usa en un tutorial posterior.</span><span class="sxs-lookup"><span data-stu-id="5996b-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="5996b-163">**sp\_add\_job** crea un trabajo llamado “Reference Data Deployment”.</span><span class="sxs-lookup"><span data-stu-id="5996b-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="5996b-164">**SP\_agregar\_jobstep** crea Hola paso de trabajo que contiene la tabla de referencia en la Hola por tooupdate de texto de comando de T-SQL, VenueTypes</span><span class="sxs-lookup"><span data-stu-id="5996b-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="5996b-165">Hola restantes en el script de Hola muestran existencia Hola de objetos de Hola y supervisar la ejecución de trabajo.</span><span class="sxs-lookup"><span data-stu-id="5996b-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="5996b-166">Use este valor de estado de las consultas tooreview Hola Hola **ciclo de vida de** toodetermine de columna al trabajo de hello ha finalizado correctamente en todas las bases de datos de inquilino y Hola dos bases de datos adicionales que contiene la tabla de referencia de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="5996b-167">En SSMS, busque toohello *contosoconcerthall* base de datos en hello *tenants1* Hola de servidor y consulta *VenueTypes* tooconfirm de tabla que *motocicleta Competir* y *natación Club* **son** ahora en la lista de resultados de Hola.</span><span class="sxs-lookup"><span data-stu-id="5996b-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="5996b-168">Crear un índice de tabla de referencia de trabajo toomanage Hola</span><span class="sxs-lookup"><span data-stu-id="5996b-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="5996b-169">Similar toohello ejercicio anterior, este ejercicio crea un índice de hello toorebuild de trabajo en la clave principal de la tabla de referencia de hello, puede realizar una operación de administración de bases de datos habituales un administrador después de una carga de datos de gran tamaño en una tabla.</span><span class="sxs-lookup"><span data-stu-id="5996b-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="5996b-170">Crear un trabajo mediante Hola trabajos mismo 'sistema' procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="5996b-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="5996b-171">Abra SSMS y conéctese toohello catálogo -&lt;usuario&gt;. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="5996b-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="5996b-172">Archivo de hello abrir... \\Módulos de aprendizaje\\administración del esquema\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="5996b-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="5996b-173">Haga clic en, seleccione la conexión y conectarse toohello catálogo -&lt;usuario&gt;. database.windows.net server, si aún no está conectado</span><span class="sxs-lookup"><span data-stu-id="5996b-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="5996b-174">Asegúrese de que es la base de datos de jobaccount toohello conectado y presione script de Hola toorun F5</span><span class="sxs-lookup"><span data-stu-id="5996b-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="5996b-175">sp\_add\_job crea un nuevo trabajo denominado “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”.</span><span class="sxs-lookup"><span data-stu-id="5996b-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="5996b-176">SP\_agregar\_jobstep crea paso de trabajo de Hola que contiene código T-SQL comando texto tooupdate Hola índice</span><span class="sxs-lookup"><span data-stu-id="5996b-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="5996b-177">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="5996b-177">Next steps</span></span>

<span data-ttu-id="5996b-178">En este tutorial, ha aprendido cómo:</span><span class="sxs-lookup"><span data-stu-id="5996b-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="5996b-179">Crear un tooquery de la cuenta de trabajo en varios inquilinos</span><span class="sxs-lookup"><span data-stu-id="5996b-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="5996b-180">Actualizar datos en todas las bases de datos de inquilino</span><span class="sxs-lookup"><span data-stu-id="5996b-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="5996b-181">Crear un índice en una tabla en todas las bases de datos de inquilino</span><span class="sxs-lookup"><span data-stu-id="5996b-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="5996b-182">Tutorial de análisis ad hoc</span><span class="sxs-lookup"><span data-stu-id="5996b-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="5996b-183">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="5996b-183">Additional resources</span></span>

* [<span data-ttu-id="5996b-184">Tutoriales adicionales que se basan en la implementación de aplicaciones de SaaS Wingtip Hola</span><span class="sxs-lookup"><span data-stu-id="5996b-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="5996b-185">Administración de bases de datos escaladas horizontalmente en la nube</span><span class="sxs-lookup"><span data-stu-id="5996b-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="5996b-186">Creación y administración de bases de datos escaladas horizontalmente</span><span class="sxs-lookup"><span data-stu-id="5996b-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)

---
title: recomendaciones de aaaPerformance - base de datos de SQL de Azure | Documentos de Microsoft
description: Hola base de datos de SQL Azure proporciona recomendaciones para las bases de datos de SQL que puede mejorar el rendimiento de la consulta actual.
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 77db338a0a395aec78c9e02849ae5ba4f2d01680
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="2cf48-103">Recomendaciones de rendimiento</span><span class="sxs-lookup"><span data-stu-id="2cf48-103">Performance recommendations</span></span>

<span data-ttu-id="2cf48-104">La base de datos de SQL Azure aprende y se adapta a su aplicación y proporciona recomendaciones personalizadas habilitar rendimiento de hello toomaximize de las bases de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="2cf48-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you toomaximize hello performance of your SQL databases.</span></span> <span data-ttu-id="2cf48-105">Se evalúa continuamente el rendimiento mediante el análisis de su historial de uso de SQL Database.</span><span class="sxs-lookup"><span data-stu-id="2cf48-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="2cf48-106">recomendaciones de Hola que se proporcionan se basan en un patrón de carga de trabajo único de la base de datos y ayudar a mejorar su rendimiento.</span><span class="sxs-lookup"><span data-stu-id="2cf48-106">hello recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="2cf48-107">La manera recomendada de usar las recomendaciones es habilitando "Ajuste automático" en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="2cf48-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="2cf48-108">Para ver detalles, consulte [Ajuste automático](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="2cf48-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="2cf48-109">Recomendaciones Crear índice</span><span class="sxs-lookup"><span data-stu-id="2cf48-109">Create index recommendations</span></span>
<span data-ttu-id="2cf48-110">La base de datos de SQL Azure continuamente supervisa las consultas de Hola que se está ejecutadas e identifica los índices de Hola que pudieron mejorar el rendimiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-110">Azure SQL Database continuously monitors hello queries being executed and identifies hello indexes that could improve hello performance.</span></span> <span data-ttu-id="2cf48-111">Una vez que se crea suficiente confianza de que falta un determinado índice, se crea una recomendación **Crear índice**.</span><span class="sxs-lookup"><span data-stu-id="2cf48-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="2cf48-112">Confianza de compilaciones de base de datos de SQL Azure calculando el índice de Hola de ganancia de rendimiento aportaría a través del tiempo.</span><span class="sxs-lookup"><span data-stu-id="2cf48-112">Azure SQL Database builds confidence by estimating performance gain hello index would bring through time.</span></span> <span data-ttu-id="2cf48-113">Función hello estimado mejora del rendimiento, las recomendaciones se clasifican como alta, Media o baja.</span><span class="sxs-lookup"><span data-stu-id="2cf48-113">Depending on hello estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="2cf48-114">Los índices creados mediante recomendaciones se marcan siempre como índices auto_created.</span><span class="sxs-lookup"><span data-stu-id="2cf48-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="2cf48-115">Puede ver qué índices son auto_created en la vista sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="2cf48-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="2cf48-116">Los índices creados de forma automática no bloquean los comandos ALTER/RENAME.</span><span class="sxs-lookup"><span data-stu-id="2cf48-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="2cf48-117">Si trata de columna de hello toodrop cuya automático índice creada sobre él, Hola comando pasa y se quita automáticamente Hola índice creado con el comando de hello así.</span><span class="sxs-lookup"><span data-stu-id="2cf48-117">If you try toodrop hello column that has an auto created index over it, hello command passes and hello auto created index is dropped with hello command as well.</span></span> <span data-ttu-id="2cf48-118">Índices normales bloquearían Hola ALTER/comando Cambiar nombre en las columnas que se indizan.</span><span class="sxs-lookup"><span data-stu-id="2cf48-118">Regular indexes would block hello ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="2cf48-119">Una vez que cree Hola se aplica la recomendación de índice, base de datos de SQL Azure comparará el rendimiento de las consultas de hello con rendimiento de línea de base de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-119">Once hello create index recommendation is applied, Azure SQL Database will compare performance of hello queries with hello baseline performance.</span></span> <span data-ttu-id="2cf48-120">Si el nuevo índice, vuelva a mejoras en el rendimiento de hello, recomendación se marcará como correcta e impacto en el informe estará disponible.</span><span class="sxs-lookup"><span data-stu-id="2cf48-120">If new index brought improvements in hello performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="2cf48-121">En caso de que el índice de hello no ofrecen beneficios de hello, se revertirán automáticamente.</span><span class="sxs-lookup"><span data-stu-id="2cf48-121">In case hello index didn’t bring hello benefits, it will be automatically reverted.</span></span> <span data-ttu-id="2cf48-122">Esta base de datos de SQL Azure de manera se asegura de que mediante recomendaciones solo mejorará el rendimiento de la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-122">This way Azure SQL Database ensures that using recommendations will only improve hello database performance.</span></span>

<span data-ttu-id="2cf48-123">Cualquier **crear índice** recomendación tiene una directiva que no permita que aplicando la recomendación de hello si el uso DTU de base de datos o grupo de hello es superior al 80% en los últimos 20 minutos o si el almacenamiento de hello es superior al 90% de uso de retroceso.</span><span class="sxs-lookup"><span data-stu-id="2cf48-123">Any **Create index** recommendation has a back off policy that won’t allow applying hello recommendation if hello database or pool DTU usage was above 80% in last 20 minutes or if hello storage is above 90% of usage.</span></span> <span data-ttu-id="2cf48-124">En este caso, se puede posponer la recomendación de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-124">In this case, hello recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="2cf48-125">Recomendaciones Quitar índice</span><span class="sxs-lookup"><span data-stu-id="2cf48-125">Drop index recommendations</span></span>
<span data-ttu-id="2cf48-126">Además toodetecting un índice que falta, Azure SQL Database continuamente analiza el rendimiento de Hola de los índices existentes.</span><span class="sxs-lookup"><span data-stu-id="2cf48-126">In addition toodetecting a missing index, Azure SQL Database continuously analyzes hello performance of existing indexes.</span></span> <span data-ttu-id="2cf48-127">Si no se usa un índice, Azure SQL Database recomendará quitarlo.</span><span class="sxs-lookup"><span data-stu-id="2cf48-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="2cf48-128">Se recomienda quitar un índice en dos casos:</span><span class="sxs-lookup"><span data-stu-id="2cf48-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="2cf48-129">El índice es un duplicado de otro (misma columna indexada e incluida, esquema de partición y filtros)</span><span class="sxs-lookup"><span data-stu-id="2cf48-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="2cf48-130">El índice lleva sin usarse un período prolongado (93 días)</span><span class="sxs-lookup"><span data-stu-id="2cf48-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="2cf48-131">Recomendaciones de quitar índice también ir a través de la comprobación de hello después de la implementación.</span><span class="sxs-lookup"><span data-stu-id="2cf48-131">Drop index recommendations also go through hello verification after implementation.</span></span> <span data-ttu-id="2cf48-132">Si se ha mejorado el rendimiento de hello informe del impacto de hello estará disponible.</span><span class="sxs-lookup"><span data-stu-id="2cf48-132">If hello performance is improved hello impact report will be available.</span></span> <span data-ttu-id="2cf48-133">Si se detecta una degradación del rendimiento, se revertirá la recomendación.</span><span class="sxs-lookup"><span data-stu-id="2cf48-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="2cf48-134">Recomendaciones para parametrizar consultas</span><span class="sxs-lookup"><span data-stu-id="2cf48-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="2cf48-135">**Parametrizar consultas** recomendaciones aparecen cuando tiene uno o más consultas que constantemente se están volviendo a compilar, pero terminan con Hola mismo plan de ejecución de consulta.</span><span class="sxs-lookup"><span data-stu-id="2cf48-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with hello same query execution plan.</span></span> <span data-ttu-id="2cf48-136">Esta condición se abre un tooapply oportunidad fuerza la parametrización, lo que le permitirá planes de consulta toobe almacena en caché y volver a usar en hello futura mejora el rendimiento y reducir el uso de recursos.</span><span class="sxs-lookup"><span data-stu-id="2cf48-136">This condition opens up an opportunity tooapply forced parameterization, which will allow query plans toobe cached and reused in hello future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="2cf48-137">Cada consulta que se emite inicialmente en SQL Server debe toogenerate toobe compila un plan de ejecución.</span><span class="sxs-lookup"><span data-stu-id="2cf48-137">Every query issued against SQL Server initially needs toobe compiled toogenerate an execution plan.</span></span> <span data-ttu-id="2cf48-138">Cada plan generado se agrega memoria caché del plan toohello y las ejecuciones posteriores de hello misma consulta puede volver a usar este plan desde la memoria caché de hello, lo que elimina la necesidad de Hola de compilación adicional.</span><span class="sxs-lookup"><span data-stu-id="2cf48-138">Each generated plan is added toohello plan cache and subsequent executions of hello same query can reuse this plan from hello cache, eliminating hello need for additional compilation.</span></span> 

<span data-ttu-id="2cf48-139">Las aplicaciones que envían las consultas, que incluyen valores sin parámetros, pueden provocar sobrecarga de rendimiento de tooa, donde para cada consulta con distintos valores de parámetro plan de ejecución de Hola se compila de nuevo.</span><span class="sxs-lookup"><span data-stu-id="2cf48-139">Applications that send queries, which include non-parameterized values, can lead tooa performance overhead, where for every such query with different parameter values hello execution plan is compiled again.</span></span> <span data-ttu-id="2cf48-140">En muchos Hola casos mismas consultas con parámetros diferentes valores generan Hola mismo planes de ejecución, pero estos planes todavía por separado se agregan toohello memoria caché del plan.</span><span class="sxs-lookup"><span data-stu-id="2cf48-140">In many cases hello same queries with different parameter values generate hello same execution plans, but these plans are still separately added toohello plan cache.</span></span> <span data-ttu-id="2cf48-141">Recompilación de planes de ejecución utilizan recursos de base de datos, aumentar Hola Duración tiempo y un desbordamiento de hello plan de consulta que produce la memoria caché planes toobe expulsa de la memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-141">Recompiling execution plans use database resources, increase hello query duration time and overflow hello plan cache causing plans toobe evicted from hello cache.</span></span> <span data-ttu-id="2cf48-142">Este comportamiento de SQL Server se puede modificar estableciendo Hola forzada la opción parameterization de la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-142">This behavior of SQL Server can be altered by setting hello forced parameterization option on hello database.</span></span> 

<span data-ttu-id="2cf48-143">toohelp estimar el impacto de Hola de esta recomendación, son proporcionados por una comparación entre la CPU real de hello hello y uso proyectan el uso de CPU (como si se aplicó la recomendación de hello).</span><span class="sxs-lookup"><span data-stu-id="2cf48-143">toohelp you estimate hello impact of this recommendation, you are provided with a comparison between hello actual CPU usage and hello projected CPU usage (as if hello recommendation was applied).</span></span> <span data-ttu-id="2cf48-144">Además tooCPU ahorro, reduce la duración de la consulta para hello tiempo de compilación.</span><span class="sxs-lookup"><span data-stu-id="2cf48-144">In addition tooCPU savings, your query duration decreases for hello time spent in compilation.</span></span> <span data-ttu-id="2cf48-145">También habrá mucha menos sobrecarga en memoria caché del plan, lo que permite la mayoría de hello toostay en caché los planes y volverá a utilizar.</span><span class="sxs-lookup"><span data-stu-id="2cf48-145">There will also be much less overhead on plan cache, allowing majority of hello plans toostay in cache and be reused.</span></span> <span data-ttu-id="2cf48-146">Puede aplicar esta recomendación rápida y fácilmente haciendo clic en hello **aplicar** comando.</span><span class="sxs-lookup"><span data-stu-id="2cf48-146">You can apply this recommendation quickly and easily by clicking on hello **Apply** command.</span></span> 

<span data-ttu-id="2cf48-147">Una vez que se aplica esta recomendación, se habilitará la parametrización forzada en minutos en la base de datos y comienza Hola supervisión de proceso que dura aproximadamente 24 horas.</span><span class="sxs-lookup"><span data-stu-id="2cf48-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts hello monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="2cf48-148">Después de este período, tendrá que ser capaz de toosee Hola validación informe que muestra el uso de CPU de la base de datos 24 horas antes y después de aplicar la recomendación de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-148">After this period, you will be able toosee hello validation report that shows CPU usage of your database 24 hours before and after hello recommendation has been applied.</span></span> <span data-ttu-id="2cf48-149">Asistente de base de datos de SQL tiene un mecanismo de seguridad que se revierte automáticamente la recomendación de hello aplicado en caso de que se ha detectado una regresión del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="2cf48-149">SQL Database Advisor has a safety mechanism that automatically reverts hello applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="2cf48-150">Recomendaciones para solucionar problemas del esquema</span><span class="sxs-lookup"><span data-stu-id="2cf48-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="2cf48-151">**Solucionar problemas del esquema** recomendaciones aparecen cuando hello una anomalía en número de hello relacionadas con el esquema de errores de SQL en la base de datos de SQL Azure está pasando lo los avisos de servicio de base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="2cf48-151">**Fix schema issues** recommendations appear when hello SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="2cf48-152">Esta recomendación suele aparecer cuando la base de datos encuentra varios errores relacionados con el esquema (nombre de columna no válido, nombre de objeto no válido, etc.) en el curso de una hora.</span><span class="sxs-lookup"><span data-stu-id="2cf48-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="2cf48-153">"Problemas del esquema" son una clase de errores de sintaxis de SQL Server que se producen cuando la definición de Hola de consulta SQL de Hola y Hola de esquema de base de datos de hello no estén alineados.</span><span class="sxs-lookup"><span data-stu-id="2cf48-153">“Schema issues” are a class of syntax errors in SQL Server that happen when hello definition of hello SQL query and hello definition of hello database schema are not aligned.</span></span> <span data-ttu-id="2cf48-154">Por ejemplo, una de las columnas de hello esperadas por la consulta de hello pueden faltar en la tabla de destino de hello, o viceversa.</span><span class="sxs-lookup"><span data-stu-id="2cf48-154">For example, one of hello columns expected by hello query may be missing in hello target table, or vice versa.</span></span> 

<span data-ttu-id="2cf48-155">Recomendación "Corregir el problema de esquema" aparece cuando el servicio de base de datos de SQL Azure observa una anomalía en número de hello relacionadas con el esquema de errores de SQL ocurre en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="2cf48-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="2cf48-156">Hola siguientes errores de Hola de muestra de tabla que están relacionados tooschema problemas:</span><span class="sxs-lookup"><span data-stu-id="2cf48-156">hello following table shows hello errors that are related tooschema issues:</span></span>

| <span data-ttu-id="2cf48-157">Código de error SQL</span><span class="sxs-lookup"><span data-stu-id="2cf48-157">SQL Error Code</span></span> | <span data-ttu-id="2cf48-158">Message</span><span class="sxs-lookup"><span data-stu-id="2cf48-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="2cf48-159">201</span><span class="sxs-lookup"><span data-stu-id="2cf48-159">201</span></span> |<span data-ttu-id="2cf48-160">El procedimiento o la función '*' espera parámetros '*', que no se han proporcionado.</span><span class="sxs-lookup"><span data-stu-id="2cf48-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="2cf48-161">207</span><span class="sxs-lookup"><span data-stu-id="2cf48-161">207</span></span> |<span data-ttu-id="2cf48-162">Nombre de columna '*' no válido.</span><span class="sxs-lookup"><span data-stu-id="2cf48-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="2cf48-163">208</span><span class="sxs-lookup"><span data-stu-id="2cf48-163">208</span></span> |<span data-ttu-id="2cf48-164">Nombre de objeto '*' no válido.</span><span class="sxs-lookup"><span data-stu-id="2cf48-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="2cf48-165">213</span><span class="sxs-lookup"><span data-stu-id="2cf48-165">213</span></span> |<span data-ttu-id="2cf48-166">El nombre de columna o los valores especificados no corresponden a la definición de la tabla.</span><span class="sxs-lookup"><span data-stu-id="2cf48-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="2cf48-167">2812</span><span class="sxs-lookup"><span data-stu-id="2cf48-167">2812</span></span> |<span data-ttu-id="2cf48-168">No se pudo encontrar el procedimiento almacenado '*'.</span><span class="sxs-lookup"><span data-stu-id="2cf48-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="2cf48-169">8144</span><span class="sxs-lookup"><span data-stu-id="2cf48-169">8144</span></span> |<span data-ttu-id="2cf48-170">La función o el procedimiento * tiene demasiados argumentos.</span><span class="sxs-lookup"><span data-stu-id="2cf48-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="2cf48-171">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="2cf48-171">Next steps</span></span>
<span data-ttu-id="2cf48-172">Supervisar sus recomendaciones y continuar tooapply les toorefine rendimiento.</span><span class="sxs-lookup"><span data-stu-id="2cf48-172">Monitor your recommendations and continue tooapply them toorefine performance.</span></span> <span data-ttu-id="2cf48-173">Las cargas de trabajo de bases de datos son dinámicas y cambian con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="2cf48-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="2cf48-174">Asistente de base de datos SQL continúa toomonitor y proporcionar recomendaciones que pueden mejorar el rendimiento de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="2cf48-174">SQL Database advisor continues toomonitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="2cf48-175">Vea [recomendaciones de rendimiento en el portal de Azure hello](sql-database-advisor-portal.md) para conocer los pasos sobre cómo las recomendaciones de rendimiento de toouse de Hola portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="2cf48-175">See [Performance recommendations in hello Azure portal](sql-database-advisor-portal.md) for steps on how toouse performance recommendations in hello Azure portal.</span></span>
* <span data-ttu-id="2cf48-176">Vea [información de rendimiento de consultas](sql-database-query-performance.md) toolearn sobre y vista de impacto en el rendimiento de las consultas principales de Hola.</span><span class="sxs-lookup"><span data-stu-id="2cf48-176">See [Query Performance Insights](sql-database-query-performance.md) toolearn about and view hello performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2cf48-177">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="2cf48-177">Additional resources</span></span>
* [<span data-ttu-id="2cf48-178">Almacén de consultas</span><span class="sxs-lookup"><span data-stu-id="2cf48-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="2cf48-179">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="2cf48-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="2cf48-180">Control de acceso basado en rol</span><span class="sxs-lookup"><span data-stu-id="2cf48-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)


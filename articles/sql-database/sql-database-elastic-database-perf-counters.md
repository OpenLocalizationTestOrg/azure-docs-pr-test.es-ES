---
title: contadores de aaaPerformance para el Administrador de mapa de particiones
description: Clase ShardMapManager y contadores de rendimiento de enrutamiento dependiente de los datos
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
editor: 
ms.assetid: b090aba0-2e30-454c-96b3-dffa281f539a
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: ddove
ms.openlocfilehash: d24198563d9fa88d12e6c464dbe89bc300e72ca0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="performance-counters-for-shard-map-manager"></a><span data-ttu-id="f5058-103">Contadores de rendimiento para Shard Map Manager</span><span class="sxs-lookup"><span data-stu-id="f5058-103">Performance counters for shard map manager</span></span>
<span data-ttu-id="f5058-104">Puede capturar Hola de rendimiento de un [manager de mapa de particiones](sql-database-elastic-scale-shard-map-management.md), especialmente cuando se usa [enrutamiento dependiente de datos](sql-database-elastic-scale-data-dependent-routing.md).</span><span class="sxs-lookup"><span data-stu-id="f5058-104">You can capture hello performance of a [shard map manager](sql-database-elastic-scale-shard-map-management.md), especially when using [data dependent routing](sql-database-elastic-scale-data-dependent-routing.md).</span></span> <span data-ttu-id="f5058-105">Los contadores se crean con métodos de hello Microsoft.Azure.SqlDatabase.ElasticScale.Client clase.</span><span class="sxs-lookup"><span data-stu-id="f5058-105">Counters are created with methods of hello Microsoft.Azure.SqlDatabase.ElasticScale.Client class.</span></span>  

<span data-ttu-id="f5058-106">Contadores son utilizados tootrack Hola rendimiento de [enrutamiento dependiente de datos](sql-database-elastic-scale-data-dependent-routing.md) operaciones.</span><span class="sxs-lookup"><span data-stu-id="f5058-106">Counters are used tootrack hello performance of [data dependent routing](sql-database-elastic-scale-data-dependent-routing.md) operations.</span></span> <span data-ttu-id="f5058-107">Estos contadores son accesibles en hello Monitor de rendimiento, en la categoría de "Administración de particiones de elástico bases de datos:" ¡hello.</span><span class="sxs-lookup"><span data-stu-id="f5058-107">These counters are accessible in hello Performance Monitor, under hello "Elastic Database: Shard Management" category.</span></span>

<span data-ttu-id="f5058-108">**Para la versión más reciente de hello:** vaya demasiado[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="f5058-108">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span> <span data-ttu-id="f5058-109">Vea también [actualizar una aplicación toouse hello más reciente bases de datos elásticas bibliotecas de cliente](sql-database-elastic-scale-upgrade-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="f5058-109">See also [Upgrade an app toouse hello latest elastic database client library](sql-database-elastic-scale-upgrade-client-library.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f5058-110">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f5058-110">Prerequisites</span></span>
* <span data-ttu-id="f5058-111">Hola toocreate la categoría de rendimiento de Hola y contadores de usuario debe formar parte de hello local **administradores** grupo máquina Hola hospeda aplicación Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-111">toocreate hello performance category and counters, hello user must be a part of hello local **Administrators** group on hello machine hosting hello application.</span></span>  
* <span data-ttu-id="f5058-112">instancia de contador de toocreate un rendimiento y actualizar los contadores de hello, Hola usuario debe ser un miembro de cualquier hello **administradores** o **usuarios del Monitor de rendimiento** grupo.</span><span class="sxs-lookup"><span data-stu-id="f5058-112">toocreate a performance counter instance and update hello counters, hello user must be a member of either hello **Administrators** or **Performance Monitor Users** group.</span></span> 

## <a name="create-performance-category-and-counters"></a><span data-ttu-id="f5058-113">Creación de la categoría y los contadores de rendimiento</span><span class="sxs-lookup"><span data-stu-id="f5058-113">Create performance category and counters</span></span>
<span data-ttu-id="f5058-114">contadores de hello toocreate, llame al método de CreatePeformanceCategoryAndCounters de Hola de hello [ShardMapManagmentFactory clase](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.aspx).</span><span class="sxs-lookup"><span data-stu-id="f5058-114">toocreate hello counters, call hello CreatePeformanceCategoryAndCounters method of hello [ShardMapManagmentFactory class](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.aspx).</span></span> <span data-ttu-id="f5058-115">Sólo un administrador puede ejecutar el método hello:</span><span class="sxs-lookup"><span data-stu-id="f5058-115">Only an administrator can execute hello method:</span></span> 

    ShardMapManagerFactory.CreatePerformanceCategoryAndCounters()  

<span data-ttu-id="f5058-116">También puede usar [esto](https://gallery.technet.microsoft.com/scriptcenter/Elastic-DB-Tools-for-Azure-17e3d283) método de hello tooexecute de script de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f5058-116">You can also use [this](https://gallery.technet.microsoft.com/scriptcenter/Elastic-DB-Tools-for-Azure-17e3d283) PowerShell script tooexecute hello method.</span></span> <span data-ttu-id="f5058-117">método Hello crea Hola siguiendo los contadores de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="f5058-117">hello method creates hello following performance counters:</span></span>  

* <span data-ttu-id="f5058-118">**Almacena en caché las asignaciones**: número de asignaciones que se almacenan en caché para el mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-118">**Cached mappings**: Number of mappings cached for hello shard map.</span></span>
* <span data-ttu-id="f5058-119">**DDR operaciones/seg**: tasa de operaciones de enrutamiento dependiente de datos de mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-119">**DDR operations/sec**: Rate of data dependent routing operations for hello shard map.</span></span> <span data-ttu-id="f5058-120">Este contador se actualiza cuando una llamada demasiado[OpenConnectionForKey()](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) da como resultado una partición de destino toohello de conexión correcta.</span><span class="sxs-lookup"><span data-stu-id="f5058-120">This counter is  updated when a call too[OpenConnectionForKey()](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) results in a successful connection toohello destination shard.</span></span> 
* <span data-ttu-id="f5058-121">**Asignación de búsqueda de aciertos de caché/s**: tasa de operaciones de búsqueda de caché correcta para las asignaciones en el mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-121">**Mapping lookup cache hits/sec**: Rate of successful cache lookup operations for mappings in hello shard map.</span></span> 
* <span data-ttu-id="f5058-122">**Asignación de búsqueda de errores de caché/seg.**: tasa de operaciones de búsqueda de errores de caché para las asignaciones en el mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-122">**Mapping lookup cache misses/sec**: Rate of failed cache lookup operations for mappings in hello shard map.</span></span>
* <span data-ttu-id="f5058-123">**Asignaciones de agregado o actualizado en la caché/s**: ritmo al que se van a agregar las asignaciones o actualizado en caché para el mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-123">**Mappings added or updated in cache/sec**: Rate at which mappings are being added or updated in cache for hello shard map.</span></span> 
* <span data-ttu-id="f5058-124">**Quitaron las asignaciones desde la caché/s**: tasa a la que se quitan los asignaciones de memoria caché de mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-124">**Mappings removed from cache/sec**: Rate at which mappings are being removed from cache for hello shard map.</span></span> 

<span data-ttu-id="f5058-125">Los contadores de rendimiento se crean para cada mapa de particiones en caché por proceso.</span><span class="sxs-lookup"><span data-stu-id="f5058-125">Performance counters are created for each cached shard map per process.</span></span>  

## <a name="notes"></a><span data-ttu-id="f5058-126">Notas</span><span class="sxs-lookup"><span data-stu-id="f5058-126">Notes</span></span>
<span data-ttu-id="f5058-127">Hello siguientes eventos desencadenan la creación de Hola Hola de contadores de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="f5058-127">hello following events trigger hello creation of hello performance counters:</span></span>  

* <span data-ttu-id="f5058-128">Inicialización de hello [ShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) con [carga diligente](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerloadpolicy.aspx), si hello ShardMapManager contiene las asignaciones de particiones.</span><span class="sxs-lookup"><span data-stu-id="f5058-128">Initialization of hello [ShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) with [eager loading](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerloadpolicy.aspx), if hello ShardMapManager contains any shard maps.</span></span> <span data-ttu-id="f5058-129">Puede tratarse de hello [GetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx?f=255&MSPPError=-2147217396#M:Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerFactory.GetSqlShardMapManager%28System.String,Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerLoadPolicy%29) hello y [TryGetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.trygetsqlshardmapmanager.aspx) métodos.</span><span class="sxs-lookup"><span data-stu-id="f5058-129">These include hello [GetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx?f=255&MSPPError=-2147217396#M:Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerFactory.GetSqlShardMapManager%28System.String,Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerLoadPolicy%29) and hello [TryGetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.trygetsqlshardmapmanager.aspx) methods.</span></span>
* <span data-ttu-id="f5058-130">Búsqueda correcta de un mapa de particiones (mediante [GetShardMap()](https://msdn.microsoft.com/library/azure/dn824215.aspx), [GetListShardMap()](https://msdn.microsoft.com/library/azure/dn824212.aspx) o [GetRangeShardMap()](https://msdn.microsoft.com/library/azure/dn824173.aspx)).</span><span class="sxs-lookup"><span data-stu-id="f5058-130">Successful lookup of a shard map (using [GetShardMap()](https://msdn.microsoft.com/library/azure/dn824215.aspx), [GetListShardMap()](https://msdn.microsoft.com/library/azure/dn824212.aspx) or [GetRangeShardMap()](https://msdn.microsoft.com/library/azure/dn824173.aspx)).</span></span> 
* <span data-ttu-id="f5058-131">Creación correcta de un mapa de particiones con CreateShardMap().</span><span class="sxs-lookup"><span data-stu-id="f5058-131">Successful creation of shard map using CreateShardMap().</span></span>

<span data-ttu-id="f5058-132">contadores de rendimiento de Hola se actualizará por todas las operaciones de caché que se realiza en las asignaciones y mapa de particiones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-132">hello performance counters will be updated by all cache operations performed on hello shard map and mappings.</span></span> <span data-ttu-id="f5058-133">Eliminación correcta del mapa de particiones de hello mediante DeleteShardMap () reults de eliminación de esta instancia de contadores de rendimiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-133">Successful removal of hello shard map using DeleteShardMap()reults in deletion of hello performance counters instance.</span></span>  

## <a name="best-practices"></a><span data-ttu-id="f5058-134">Prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="f5058-134">Best practices</span></span>
* <span data-ttu-id="f5058-135">Creación de la categoría de rendimiento de Hola y contadores debe realizarse una sola vez antes de la creación de hello del objeto ShardMapManager.</span><span class="sxs-lookup"><span data-stu-id="f5058-135">Creation of hello performance category and counters should be performed only once before hello creation of ShardMapManager object.</span></span> <span data-ttu-id="f5058-136">Cada ejecución del comando de hello CreatePerformanceCategoryAndCounters() borra contadores anterior hello (perder los datos notificados por todas las instancias) y crea otras nuevas.</span><span class="sxs-lookup"><span data-stu-id="f5058-136">Every execution of hello command CreatePerformanceCategoryAndCounters() clears hello previous counters (losing data reported by all instances) and creates new ones.</span></span>  
* <span data-ttu-id="f5058-137">Las instancias de contadores de rendimiento se crean por proceso.</span><span class="sxs-lookup"><span data-stu-id="f5058-137">Performance counter instances are created per process.</span></span> <span data-ttu-id="f5058-138">Cualquier bloqueo de aplicación o la eliminación de un mapa de particiones de memoria caché de hello dará como resultado una eliminación de instancias de contadores de rendimiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="f5058-138">Any application crash or removal of a shard map from hello cache will result in deletion of hello performance counters instances.</span></span>  

### <a name="see-also"></a><span data-ttu-id="f5058-139">Otras referencias</span><span class="sxs-lookup"><span data-stu-id="f5058-139">See also</span></span>
[<span data-ttu-id="f5058-140">Información general de las características de bases de datos elásticas</span><span class="sxs-lookup"><span data-stu-id="f5058-140">Elastic Database features overview</span></span>](sql-database-elastic-scale-introduction.md)  

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->


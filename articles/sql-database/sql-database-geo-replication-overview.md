---
title: "aaaFailover grupos y la replicación geográfica activa - base de datos de SQL de Azure | Documentos de Microsoft"
description: "Grupos de conmutación por error automática con la replicación geográfica activa permite toosetup 4 réplicas de la base de datos en cualquiera de los centros de datos de Azure de Hola y autoomatically conmutación por error en caso de hello de una interrupción."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="dfe9b-103">Introducción: grupos de conmutación por error y replicación geográfica activa</span><span class="sxs-lookup"><span data-stu-id="dfe9b-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="dfe9b-104">Replicación geográfica activa permite tooconfigure seguridad toofour legible bases de datos secundarias en hello ubicaciones (regiones) del centro de datos de la mismos o distintos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="dfe9b-105">Bases de datos secundarias están disponibles para las consultas y de conmutación por error en caso de hello de datos center interrupción o hello incapacidad tooconnect toohello base de datos principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="dfe9b-106">Hola conmutación por error debe iniciar manualmente la aplicación hello del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="dfe9b-107">Después de la conmutación por error, la nueva réplica principal de hello tiene un extremo de una conexión distinta.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="dfe9b-108">La replicación geográfica activa está disponible para todas las bases de datos en todos los niveles de servicio de todas las regiones.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="dfe9b-109">Grupos de conmutación por error automática de base de datos de SQL Azure (en vista previa) es un tooautomatically de característica diseñada de base de datos SQL administrar la relación de replicación geográfica, la conectividad y conmutación por error a escala.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="dfe9b-110">Con él, Hola clientes ganancia Hola capacidad tooautomatically recuperar varias bases de datos relacionadas en la región secundaria Hola después de errores catastróficos regionales u otros eventos no planeadas que dan como resultado una pérdida completa o parcial de hello del servicio de base de datos SQL disponibilidad de la región principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="dfe9b-111">Además, puede usar Hola bases de datos secundarias legibles toooffload de solo lectura las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="dfe9b-112">Dado que los grupos de conmutación por error automática implican varias bases de datos que deben configurarse en el servidor principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="dfe9b-113">Los servidores principales y secundarios deben estar en hello misma suscripción.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="dfe9b-114">Grupos de conmutación por error automática admiten la replicación de todas las bases de datos en hello grupo tooonly un servidor secundario en una región distinta.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="dfe9b-115">Permite que la replicación geográfica activa, sin grupos de conmutación por error automática, un too4 secundarias en cualquier región.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="dfe9b-116">Si usa replicación geográfica activa y de cualquier motivo que se produce un error en la base de datos principal, o simplemente se desconecta toobe de necesidades, puede iniciar tooany de conmutación por error de las bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="dfe9b-117">Cuando conmutación por error es activado tooone de bases de datos secundarias de hello, todos los demás elementos secundarios son toohello automáticamente vinculado nuevo elemento principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="dfe9b-118">Si utilizas una conmutación por error automática agrupa cualquier interrupción que afecta a una o varias de las bases de datos de hello en los resultados del grupo de hello en conmutación automática por error y recuperación de la base de datos de toomanage (en vista previa).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="dfe9b-119">Puede configurar la directiva de conmutación por error automática de Hola que mejor se adapte a sus necesidades de aplicación, o puede dejar de participar y use la activación manual.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="dfe9b-120">Además, los grupos de conmutación por error automática (en versión preliminar) proporcionan puntos de conexión de agentes de escucha de lectura-escritura y de solo lectura que no se modifican durante las conmutaciones por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="dfe9b-121">Si se utiliza la activación de la conmutación por error manual o automática, conmutación por error cambia todas las bases de datos secundarias en hello tooprimary de grupo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="dfe9b-122">Una vez completada la conmutación por error de base de datos de hello, registro DNS de hello es nueva región de tooredirect actualizan automáticamente Hola extremos toohello.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="dfe9b-123">Con la replicación geográfica activa puede administrar la replicación y la conmutación por error de una base de datos individual o de un conjunto de bases de datos en un servidor o en un grupo elástico.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="dfe9b-124">Puede hacer que el uso de hello [portal de Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), o hello [API de REST](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="dfe9b-125">Después de la conmutación por error, asegúrese de que los requisitos de autenticación de hello para el servidor y la base de datos se configuran en la nueva réplica principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="dfe9b-126">Para obtener más información, consulte [Administración de la seguridad de Base de datos SQL de Azure después de la recuperación ante desastres](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="dfe9b-127">Esto aplica tanto tooactive replicación geográfica y la conmutación por error automática grupos (en vista previa).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="dfe9b-128">Hola de replicación geográfica activa aprovecha [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) tecnología de SQL Server tooasynchronously replicar las transacciones confirmadas en hello principal de la base de datos tooa base de datos secundaria mediante el aislamiento de instantánea de lectura confirmada (RCSI).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="dfe9b-129">Grupos de conmutación por error automática proporcionan semántica de grupo de hello encima de replicación geográfica activa, pero se usa el mismo mecanismo de replicación asincrónica de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="dfe9b-130">Mientras que en un momento determinado, base de datos secundaria de Hola puede estar ligeramente por detrás de la base de datos principal de Hola, se garantiza que los datos secundarios de hello toonever tienen transacciones parciales.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="dfe9b-131">La redundancia entre regiones permite recuperar tooquickly de las aplicaciones de una pérdida permanente de un centro de datos completa o partes de un centro de datos causada por desastres naturales, errores humanos catastróficos o actos malintencionados.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="dfe9b-132">datos específicos de RPO de Hello pueden encontrarse en [información general de la continuidad del negocio](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="dfe9b-133">Hello en la ilustración siguiente se muestra un ejemplo de replicación geográfica activa configurado con un elemento principal en la región de hello Ee.uu. Central Norte y secundaria en la región de hello Ee.uu. Central sur.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![Relación de replicación geográfica](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="dfe9b-135">Dado que las bases de datos secundaria de hello son legibles, pueden ser utilizados toooffload de solo lectura las cargas de trabajo como trabajos de informes.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="dfe9b-136">Si usa replicación geográfica activa, es base de datos secundaria de posibles toocreate Hola Hola misma región con hello principal, pero no aumenta toocatastrophic errores de la aplicación hello resistencia.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="dfe9b-137">Si usa grupos de conmutación por error automática (en versión preliminar), las bases de datos secundarias siempre se crean en otra región.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="dfe9b-138">Además, toodisaster recuperación replicación geográfica activa puede usarse en hello los escenarios siguientes:</span><span class="sxs-lookup"><span data-stu-id="dfe9b-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="dfe9b-139">**Migración de base de datos**: puede usar replicación geográfica activa toomigrate una base de datos desde un servidor tooanother en línea con el tiempo de inactividad mínimo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="dfe9b-140">**Actualizaciones de aplicaciones**: puede crear una base de datos secundaria adicional como copia de conmutación por recuperación durante las actualizaciones de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="dfe9b-141">continuidad del negocio real tooachieve, agregar redundancia de la base de datos entre centros de datos es solo una parte de la solución de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="dfe9b-142">Recuperación de una aplicación (servicio)-to-end después de un error catastrófico requiere la recuperación de todos los componentes que constituyen el servicio de Hola y todos los servicios dependientes.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="dfe9b-143">Ejemplos de estos componentes incluyen el software de cliente de hello (por ejemplo, un explorador con JavaScript personalizado), front-end web, almacenamiento y DNS.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="dfe9b-144">Es fundamental que todos los componentes son resistente toohello mismos errores y estén disponibles en el objetivo de tiempo de recuperación (RTO) de hello de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="dfe9b-145">Por lo tanto, es necesario tooidentify todos los servicios dependientes y comprender garantías de Hola y las capacidades que proporcionan.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="dfe9b-146">A continuación, debe tomar tooensure los pasos adecuados que el servicio funcione durante Hola conmutación por error de los servicios de Hola que depende.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="dfe9b-147">Para más información sobre el diseño de soluciones para la recuperación ante desastres, consulte [Diseño de soluciones de nube para la continuidad empresarial mediante la replicación geográfica activa](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="dfe9b-148">Funcionalidades de replicación geográfica activa</span><span class="sxs-lookup"><span data-stu-id="dfe9b-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="dfe9b-149">característica de replicación geográfica activa Hola proporciona Hola después capacidades esenciales:</span><span class="sxs-lookup"><span data-stu-id="dfe9b-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="dfe9b-150">**Replicación asincrónica automática**: solo puede crear una base de datos secundaria mediante la adición de tooan la base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="dfe9b-151">Hola secundaria puede crearse en cualquier servidor de base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="dfe9b-152">Una vez creado, base de datos secundaria de Hola se rellena con datos de hello copiados de la base de datos principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="dfe9b-153">Este proceso se conoce como propagación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-153">This process is known as seeding.</span></span> <span data-ttu-id="dfe9b-154">Después de haber creado y propagado base de datos secundaria, las actualizaciones de base de datos principal de toohello son asincrónicamente replican automáticamente toohello base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="dfe9b-155">Replicación asincrónica significa que las transacciones se confirman en la base de datos principal de hello antes de que se toohello replicadas de base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="dfe9b-156">**Bases de datos secundarias legibles**: una aplicación puede tener acceso a una base de datos secundaria para las operaciones de solo lectura usando Hola igual o entidades de seguridad diferente que se usan para tener acceso a la base de datos principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="dfe9b-157">Hello bases de datos secundarias funcionan en aislamiento de instantánea modo tooensure la replicación de las actualizaciones de Hola de hello principal (reproducción del registro) no se retrasa por las consultas ejecutadas en hello secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dfe9b-158">reproducción de registro de Hello se retrasa en base de datos secundaria de hello si hay actualizaciones del esquema que está recibiendo Hola principal que requieren un bloqueo de esquema de base de datos secundaria de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="dfe9b-159">**Varias réplicas secundarias legibles**: dos o más bases de datos secundarias aumentan la redundancia y nivel de protección de la base de datos principal de Hola y de aplicación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="dfe9b-160">Si existen varias bases de datos secundarias, aplicación hello permanece protegido incluso si se produce un error en una de las bases de datos secundaria de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="dfe9b-161">Si hay una base de datos secundaria, y se produce un error, se expone la aplicación hello toohigher riesgo hasta que se cree una nueva base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dfe9b-162">Si usa replicación geográfica activa toobuild una aplicación distribuida globalmente y necesita tooprovide de solo lectura, tener acceso a toodata en más de 4 regiones, puede crear secundaria de una base de datos secundaria (es decir, un proceso conocido como encadenamiento).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="dfe9b-163">De este modo, puede alcanzar una escala prácticamente ilimitada de replicación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="dfe9b-164">Además, el encadenamiento de reduce la sobrecarga de Hola de replicación de base de datos principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="dfe9b-165">Hola aún retardo de aumento de la replicación de hello en bases de datos secundarias de hello más hoja.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="dfe9b-166">.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-166">.</span></span> 
   >

* <span data-ttu-id="dfe9b-167">**Compatibilidad con bases de datos de grupos elásticos**: la replicación geográfica activa se puede configurar para cualquier base de datos en un grupo elástico.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="dfe9b-168">base de datos secundaria de Hello puede estar en otro grupo elástico.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="dfe9b-169">Para bases de datos normales, Hola secundaria puede ser un grupo elástico y viceversa siempre que sean de niveles de servicio de Hola Hola igual.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="dfe9b-170">**Nivel de rendimiento configurables de la base de datos secundaria de Hola**: puede crear una base de datos secundaria con el nivel de rendimiento inferior a Hola principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="dfe9b-171">Las bases de datos principales y secundarias son necesarios toohave Hola de mismo nivel de servicio.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="dfe9b-172">Esta opción no se recomienda para las aplicaciones con la actividad de escritura de base de datos alta debido a retrasos de replicación mayor de hello aumenta Hola riesgo considerable pérdida de datos después de una conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="dfe9b-173">Además, después de que se ve afectado el rendimiento de la aplicación de conmutación por error Hola hasta Hola nueva principal es tooa actualizado un rendimiento más alto nivel.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="dfe9b-174">gráfico de porcentaje de E/S de registro en el portal de Azure Hello proporciona una buena manera tooestimate Hola nivel mínimo en el rendimiento de hello secundaria que es necesario toosustain Hola replicación carga.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="dfe9b-175">Por ejemplo, si la base de datos principal es P6 (1000 DTU) y su porcentaje de E/S de registro es 50% Hola secundaria debe toobe al menos P4 (DTU 500).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="dfe9b-176">También puede recuperar los datos de E/S de registro de hello usando [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) o [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) vistas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="dfe9b-177">Para obtener más información sobre los niveles de rendimiento de base de datos SQL de hello, consulte [opciones de base de datos SQL y el rendimiento](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="dfe9b-178">**Controlado por el usuario de conmutación por error y conmutación por recuperación**: una base de datos secundaria puede ser explícitamente rol principal toohello desactivados en cualquier momento mediante la aplicación hello o usuario Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="dfe9b-179">Durante una Hola de interrupción reales se debería usar opción "no planeado", lo que promueve toobe secundaria Hola principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="dfe9b-180">Cuando Hola error principal recupera y está disponible de nuevo, sistema Hola automáticamente Hola marcas recuperar principal como una base de datos secundaria y ponerla al día con la nueva réplica principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="dfe9b-181">Pagar toohello naturaleza asincrónica de la replicación, una pequeña cantidad de datos se puede perder durante las conmutaciones por error no planeada si se produce un error en la principal antes de replicarse toohello de cambios más reciente de hello secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="dfe9b-182">Cuando un elemento principal con varias secundarias conmuta por error, sistema Hola vuelve a configurar automáticamente las relaciones de replicación de Hola y Hola vínculos restantes secundarias toohello recién promovido principal sin necesidad de intervención del usuario.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="dfe9b-183">Una vez se mitiga la interrupción de Hola que causó la conmutación por error de hello, puede ser deseable tooreturn región principal de hello aplicación toohello.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="dfe9b-184">toodo que, se debe invocar comando de conmutación por error de hello con hello "planeada" opción.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="dfe9b-185">**Mantener las credenciales y las reglas de firewall sincronizados**: se recomienda usar [las reglas de firewall de base de datos](sql-database-firewall-configure.md) para bases de datos de replicación geográfica para estas reglas se pueden replicar con tooensure de base de datos de hello todas las bases de datos secundarias tienen Hola las mismas reglas de firewall que Hola principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="dfe9b-186">Este enfoque elimina la necesidad de Hola para los clientes toomanually configurar y mantener las reglas de firewall en servidores que hospedan las bases de datos principal y secundaria de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="dfe9b-187">De igual forma, mediante [usuarios de base de datos independiente](sql-database-manage-logins.md) para datos de acceso garantiza bases de datos principales y secundarias tienen siempre hello las credenciales de usuario mismo, por lo que durante una conmutación por error, no hay ningún interrupciones toomismatches debido a inicios de sesión y contraseñas.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="dfe9b-188">Con la adición de Hola de [Azure Active Directory](../active-directory/active-directory-whatis.md), los clientes pueden administrar usuario acceso tooboth principal y secundaria bases de datos y lo que elimina Hola necesita para administrar las credenciales en las bases de datos por completo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="dfe9b-189">Funcionalidades de los grupos de conmutación por error automática</span><span class="sxs-lookup"><span data-stu-id="dfe9b-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="dfe9b-190">La característica de grupos de conmutación por error automática proporciona una abstracción eficaz de la replicación geográfica activa mediante la compatibilidad de la conmutación por error automática y la replicación a nivel de grupo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="dfe9b-191">Además, quita cadena de conexión de SQL de Hola Hola necesidad toochange después de la conmutación por error al proporcionar extremos de agente de escucha adicional de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="dfe9b-192">**Grupo de conmutación por error**: se pueden crear uno o más grupos de conmutación por error entre dos servidores en regiones distintas (servidor principal y servidor secundario).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="dfe9b-193">Cada grupo puede incluir una o varias bases de datos que se recuperen como una unidad en caso de algunas o todas las bases de datos principales de estar disponibles debido a una interrupción de tooan en la región principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="dfe9b-194">**Servidor principal**: un servidor que hospeda las bases de datos principales de hello en el grupo de conmutación por error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="dfe9b-195">**Servidor secundario**: un servidor que hospeda las bases de datos secundarias de hello en el grupo de conmutación por error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="dfe9b-196">no puede ser el servidor secundario de Hola Hola misma región que el servidor principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="dfe9b-197">**Agregar grupo de toofailover de bases de datos**: puede colocar varias bases de datos dentro de un servidor o dentro de un flexible del grupo en hello mismo grupo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="dfe9b-198">Si agrega un grupo de toohello de base de datos independiente, crea automáticamente una base de datos secundaria utilizando Hola la mismo edición y nivel de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="dfe9b-199">Si la base de datos principal de hello está en un grupo elástico, Hola secundaria se crea automáticamente en grupo elástico Hola con hello mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="dfe9b-200">Si agrega una base de datos que ya tiene una base de datos secundaria en el servidor secundario de hello, que la replicación geográfica se hereda por grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dfe9b-201">Al agregar una base de datos que ya tiene una base de datos secundaria en un servidor que no forma parte del grupo de conmutación por error de hello, se crea una nueva base de datos secundaria en el servidor secundario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="dfe9b-202">**Agente de escucha de lectura y escritura de grupo de conmutación por error**: un registro DNS CNAME formado como  **&lt;nombre del grupo de conmutación por error&gt;. database.windows.net** que apunte toohello dirección URL del servidor principal actual.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="dfe9b-203">Permite hello las aplicaciones de SQL de lectura y escritura tootransparently conectar toohello base de datos principal cuando Hola principal cambia después de la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="dfe9b-204">**Escucha de solo lectura del grupo de conmutación por error**: un registro DNS CNAME formado como  **&lt;nombre del grupo de conmutación por error&gt;. secondary.database.windows.net** que señala la dirección URL del servidor secundario toohello.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="dfe9b-205">Hola permite que las aplicaciones de SQL de solo lectura que conectar tootransparently toohello base de datos secundaria con hello especifica las reglas de equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="dfe9b-206">También puede especificar si desea Hola de solo lectura toobe tráfico redirigir automáticamente toohello de servidor principal al servidor secundario de hello no está disponible.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="dfe9b-207">**Directiva de conmutación por error automática**: de forma predeterminada, el grupo de conmutación por error de hello está configurado con una directiva de conmutación por error automática.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="dfe9b-208">Hola conmutación por error de sistema desencadenadores en cuanto se detectó un error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="dfe9b-209">Si desea que el flujo de trabajo de toocontrol Hola conmutación por error de la aplicación hello, puede desactivar la conmutación automática por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="dfe9b-210">**Conmutación por error manual**: conmutación por error se puede iniciar manualmente en cualquier momento, independientemente de la configuración de conmutación automática por error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="dfe9b-211">Si la directiva de conmutación por error automática no está configurada de conmutación por error manual es toorecover requiere las bases de datos en el grupo de conmutación por error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="dfe9b-212">Puede iniciar una conmutación por error forzada o sencilla (con sincronización total de los datos).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="dfe9b-213">Hola este último podría ser región principal del toohello toorelocate usado Hola servidor activo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="dfe9b-214">Cuando se completa la conmutación por error los registros DNS de hello son tooensure actualizan automáticamente conectividad toohello correcto del servidor.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="dfe9b-215">**Período de gracia con pérdida de datos**: debido a bases de datos principal y secundaria de Hola se sincronizan con conmutación por error de replicación asincrónica Hola puede producir pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="dfe9b-216">Puede personalizar tooreflect de directiva de conmutación por error automática de hello pérdida de toodata de tolerancia de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="dfe9b-217">Mediante la configuración de **GracePeriodWithDataLossHours**, puede controlar cuánto tiempo espera el sistema Hola antes de iniciar la conmutación por error de hello tooresult probable pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="dfe9b-218">Cuando el sistema detecta la que las bases de datos de hello en el grupo de hello aún están en línea (por ejemplo, interrupción de hello solo afectada plano de control de servicio de hello), activa inmediatamente Hola conmutación por error con la sincronización de datos completa (conmutación por error descriptivo), independientemente del valor de Hola establecer **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="dfe9b-219">Este comportamiento garantiza que no hay ninguna pérdida de datos durante la recuperación de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="dfe9b-220">período de gracia de Hello surte efecto cuando no es posible una conmutación por error descriptivo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="dfe9b-221">Si la interrupción de Hola se mitiga antes de que expire el período de gracia de hello, Hola conmutación por error no está activado.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="dfe9b-222">**Varios grupos de conmutación por error**: puede configurar varios grupos de conmutación por error para hello mismo par de escala de hello toocontrol de servidores de las conmutaciones por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="dfe9b-223">Cada grupo realiza la conmutación por error por separado.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-223">Each group fails over independently.</span></span> <span data-ttu-id="dfe9b-224">Si su aplicación multiempresa usa grupos elásticos, puede usar esta capacidad toomix principal y secundaria bases de datos de cada grupo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="dfe9b-225">De esta forma puede reducir el Hola impacto de una interrupción tooonly la mitad de los inquilinos de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="dfe9b-226">Procedimientos recomendados para la creación de servicios de alta disponibilidad</span><span class="sxs-lookup"><span data-stu-id="dfe9b-226">Best practices of building highly available service</span></span>

<span data-ttu-id="dfe9b-227">toobuild un servicio de alta disponibilidad que utiliza a los clientes Hola de base de datos SQL de Azure debe seguir estas directrices:</span><span class="sxs-lookup"><span data-stu-id="dfe9b-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="dfe9b-228">**Utilizar el grupo de conmutación por error**: se pueden crear uno o varios grupos de conmutación por error entre dos servidores en regiones distintas (servidor principal y servidor secundario).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="dfe9b-229">Cada grupo puede incluir una o varias bases de datos que se recuperen como una unidad en caso de algunas o todas las bases de datos principales de estar disponibles debido a una interrupción de tooan en la región principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="dfe9b-230">grupo de conmutación por error de Hello crea la base de datos de replicación geográfica secundaria con hello mismo objetivo como Hola principal de servicio.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="dfe9b-231">Si agrega que una existente replicación geográfica relación toohello conmutación por error grupo Asegúrese seguro Hola geográfica-réplica secundaria está configurada con hello igual como objetivo de nivel de servicio Hola principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="dfe9b-232">**Utilizar el agente de escucha de lectura y escritura para la carga de trabajo OLTP**: al realizar el uso de las operaciones OLTP  **&lt;nombre del grupo de conmutación por error&gt;. database.windows.net** como dirección URL del servidor de Hola y conexiones de hello será toohello automáticamente dirigido principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="dfe9b-233">Esta dirección URL no cambiará después Hola conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="dfe9b-234">Conmutación por error de nota Hola implica la actualización Hola por lo que las conexiones de cliente de hello será redirigido toohello nuevo principal solo después de que el cliente de hello DNS actualiza la caché del registro DNS.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="dfe9b-235">**Utilizar el agente de escucha de solo lectura para la carga de trabajo de solo lectura**: Si tienes aislada lógicamente de solo lectura carga de trabajo con tolerancia a errores toocertain obsolescencia de los datos, puede usar la base de datos secundaria de hello en aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="dfe9b-236">Para utilizarán las sesiones de sólo lectura  **&lt;nombre del grupo de conmutación por error&gt;. secondary.database.windows.net** como dirección URL del servidor de Hola y conexión de hello será dirigido automáticamente toohello secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="dfe9b-237">También se recomienda indicar en la cadena de conexión el intento de lectura mediante **ApplicationIntent=ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="dfe9b-238">**Prepárese para la degradación del rendimiento**: decisión de conmutación por error SQL es independiente del resto de Hola de aplicación hello u otros servicios que se utiliza.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="dfe9b-239">aplicación Hello puede ser "mixto" con algunos componentes de una región y otras en otro.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="dfe9b-240">degradación de hello tooavoid, asegúrese de implementación de aplicaciones redundantes de hello en región Hola DR y siga las instrucciones de hello en este artículo.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="dfe9b-241">Aplicación de hello nota en la región de recuperación ante desastres de hello no tiene toouse una cadena de conexión diferentes.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="dfe9b-242">**Preparar la pérdida de datos**: si se detecta una interrupción del servicio, SQL desencadena automáticamente la conmutación por error de lectura y escritura si hay cero toohello de pérdida de datos lo mejor de nuestro conocimiento.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="dfe9b-243">En caso contrario, se espera especificado por el período de hello **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="dfe9b-244">Si especificó **GracePeriodWithDataLossHours**, prepárese para la pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="dfe9b-245">Por lo general, durante las interrupciones, Azure favorece la disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="dfe9b-246">Si no puede permitirse perder datos, asegúrese de seguro tooset **GracePeriodWithDataLossHours** número suficientemente grande de tooa, por ejemplo, 24 horas.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="dfe9b-247">Actualización o degradación de una base de datos principal</span><span class="sxs-lookup"><span data-stu-id="dfe9b-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="dfe9b-248">Puede actualizar o degradar un nivel de rendimiento de base de datos principal tooa (dentro de hello mismo nivel de servicio) sin desconectar las bases de datos secundarias.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="dfe9b-249">Al actualizar, se recomienda que actualizar base de datos secundaria de hello en primer lugar y, a continuación, actualizar Hola principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="dfe9b-250">Al degradar, invierta el orden de hello: degradar Hola principal primero y, a continuación, baje Hola secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="dfe9b-251">Al actualizar o cambiar el nivel de servicio diferente de tooa de base de datos de hello esta recomendación se aplica.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="dfe9b-252">Si ha creado la base de datos secundaria como parte de la configuración de grupo de conmutación por error de hello no es base de datos secundaria de toodowngrade recomendada Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="dfe9b-253">Se trata de tooensure el nivel de datos tiene suficiente tooprocess capacidad su carga de trabajo normal después de activa la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="dfe9b-254">Para evitar la pérdida de Hola de datos críticos</span><span class="sxs-lookup"><span data-stu-id="dfe9b-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="dfe9b-255">Pagar toohello alta latencia de redes de área extensa, copia continua usa un mecanismo de replicación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="dfe9b-256">La replicación asincrónica hace inevitable la pérdida de cierta cantidad datos si se produce un error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="dfe9b-257">Sin embargo, es posible que algunas aplicaciones exijan que no se pierdan datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="dfe9b-258">tooprotect estas actualizaciones críticas, un desarrollador de aplicaciones pueden llamar a hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procedimiento del sistema inmediatamente después de confirmar la transacción de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="dfe9b-259">Al llamar a **sp_wait_for_database_copy_sync** Hola bloques subproceso de llamada hasta que la última transacción confirmada de hello ha sido transmitida toohello base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="dfe9b-260">Sin embargo, no espere para hello transmitida transacciones toobe reproducir y se confirman en hello secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="dfe9b-261">**sp_wait_for_database_copy_sync** tooa ámbito vínculo de copia continua específico.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="dfe9b-262">Cualquier usuario con hello conexión derechos toohello base de datos principal puede llamar a este procedimiento.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="dfe9b-263">**sp_wait_for_database_copy_sync** evitará la pérdida de datos después de la conmutación por error, pero no garantizará la sincronización completa para el acceso de lectura.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="dfe9b-264">Hola retraso causado por un **sp_wait_for_database_copy_sync** llamada a procedimiento puede ser considerable y depende de tamaño de Hola Hola del registro de transacciones en tiempo de Hola de llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="dfe9b-265">Administración mediante programación de los grupos de conmutación por error y de la replicación geográfica activa</span><span class="sxs-lookup"><span data-stu-id="dfe9b-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="dfe9b-266">Según lo descrito anteriormente, grupos de conmutación por error automática (en vista previa) y se activa la replicación geográfica también se puede administrar mediante programación con PowerShell de Azure y Hola API de REST.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="dfe9b-267">Hola las tablas siguientes describe los conjunto Hola de comandos disponibles.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="dfe9b-268">**API de administrador de recursos de Azure y la seguridad basada en roles**: replicación geográfica activa incluye un conjunto de API de administrador de recursos de Azure para la administración, incluidos hello [API de REST de base de datos de SQL Azure](https://docs.microsoft.com/rest/api/sql/) y [Azure Cmdlets de PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="dfe9b-269">Estas API requieren el uso de Hola de grupos de recursos y admiten la seguridad basada en roles (RBAC).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="dfe9b-270">Para obtener más información sobre cómo tooimplement tener acceso a los roles, consulte [Azure Role-Based el Control de acceso](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="dfe9b-271">Muchas de las nuevas características de la replicación geográfica activa solo se admiten con [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md), que se basa en la [API de REST de Azure SQL](https://msdn.microsoft.com/library/azure/mt163571.aspx) y los [cmdlets de PowerShell de Azure SQL Database](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="dfe9b-272">Hola [API de REST (clásica)](https://msdn.microsoft.com/library/azure/dn505719.aspx) y [cmdlets de base de datos de SQL de Azure (clásica)](https://msdn.microsoft.com/library/azure/dn546723.aspx) se admiten por compatibilidad con versiones anteriores mediante Hola se recomiendan las API basadas en el Administrador de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="dfe9b-273">Administrar SQL proceso de uso de conmutación por error de base de datos mediante Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="dfe9b-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="dfe9b-274">Comando</span><span class="sxs-lookup"><span data-stu-id="dfe9b-274">Command</span></span> | <span data-ttu-id="dfe9b-275">Description</span><span class="sxs-lookup"><span data-stu-id="dfe9b-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="dfe9b-276">ALTER DATABASE (Base de datos SQL de Azure)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="dfe9b-277">Usar Agregar secundario ON SERVER argumento toocreate una base de datos secundaria para una base de datos existente e inicia la replicación de datos</span><span class="sxs-lookup"><span data-stu-id="dfe9b-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="dfe9b-278">ALTER DATABASE (Base de datos SQL de Azure)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="dfe9b-279">Utilizar la conmutación por error o FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch una conmutación por error de base de datos secundaria toobe tooinitiate principal</span><span class="sxs-lookup"><span data-stu-id="dfe9b-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="dfe9b-280">ALTER DATABASE (Base de datos SQL de Azure)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="dfe9b-281">Utilice Quitar secundaria ON SERVER tooterminate una replicación de datos entre una base de datos SQL y la base de datos secundaria Hola especificado.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="dfe9b-282">sys.geo_replication_links (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="dfe9b-283">Devuelve información acerca de todos los vínculos de replicación existente para cada base de datos en el servidor lógico de base de datos de SQL Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="dfe9b-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="dfe9b-285">Obtiene Hola última hora de la replicación, último intervalo de replicación y otra información sobre el vínculo de replicación de Hola para una base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="dfe9b-286">sys.dm_operation_status (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="dfe9b-287">Muestra el estado de Hola de todas las operaciones de base de datos, incluido el estado de Hola Hola vínculos de replicación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="dfe9b-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="dfe9b-289">provoca Hola aplicación toowait hasta que todas las transacciones confirmadas se replica y confirma por base de datos secundaria Hola activa.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="dfe9b-290">Administrar SQL base de datos de conmutación por error utilizando PowerShell</span><span class="sxs-lookup"><span data-stu-id="dfe9b-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="dfe9b-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="dfe9b-291">Cmdlet</span></span> | <span data-ttu-id="dfe9b-292">Descripción</span><span class="sxs-lookup"><span data-stu-id="dfe9b-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="dfe9b-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="dfe9b-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="dfe9b-294">Obtiene una o más bases de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="dfe9b-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="dfe9b-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="dfe9b-296">Crea una base de datos secundaria para una base de datos existente e inicia la replicación de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="dfe9b-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="dfe9b-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="dfe9b-298">Se activa una conmutación por error de base de datos secundaria toobe tooinitiate principal.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="dfe9b-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="dfe9b-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="dfe9b-300">Finaliza la replicación de datos entre una base de datos SQL y la base de datos secundaria Hola especificado.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="dfe9b-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="dfe9b-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="dfe9b-302">Obtiene los vínculos de replicación geográfica de hello entre una base de datos de SQL Azure y un grupo de recursos o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="dfe9b-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="dfe9b-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="dfe9b-304">Este comando crea un grupo de conmutación por error y lo registra en el servidor principal y el servidor secundario</span><span class="sxs-lookup"><span data-stu-id="dfe9b-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="dfe9b-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="dfe9b-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="dfe9b-306">Quita el grupo de conmutación por error de Hola de servidor hello y elimina todas las bases de datos secundarias incluidas hello grupo</span><span class="sxs-lookup"><span data-stu-id="dfe9b-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="dfe9b-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="dfe9b-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="dfe9b-308">Recupera la configuración de grupo de conmutación por error de Hola</span><span class="sxs-lookup"><span data-stu-id="dfe9b-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="dfe9b-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="dfe9b-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="dfe9b-310">Modifica la configuración de Hola de grupo de conmutación por error de Hola</span><span class="sxs-lookup"><span data-stu-id="dfe9b-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="dfe9b-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="dfe9b-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="dfe9b-312">Conmutación por error de desencadenadores de servidor secundario de la toohello del grupo de hello conmutación por error</span><span class="sxs-lookup"><span data-stu-id="dfe9b-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="dfe9b-313">Para los scripts de ejemplo, vea [Configuración y conmutación por error de una única base de datos mediante la replicación geográfica activa](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configuración y conmutación por error de una base de datos agrupada mediante la replicación geográfica activa](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md) y [Configuración y conmutación por error de un grupo de conmutación por error para una única base de datos (versión preliminar)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="dfe9b-314">Administrar la conmutación por error de base de datos SQL con hello API de REST</span><span class="sxs-lookup"><span data-stu-id="dfe9b-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="dfe9b-315">API</span><span class="sxs-lookup"><span data-stu-id="dfe9b-315">API</span></span> | <span data-ttu-id="dfe9b-316">Description</span><span class="sxs-lookup"><span data-stu-id="dfe9b-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="dfe9b-317">Crear o actualizar base de datos (createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="dfe9b-318">Crea, actualiza o restaura una base de datos principal o secundaria.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="dfe9b-319">Obtener el estado de creación o actualización de la base de datos</span><span class="sxs-lookup"><span data-stu-id="dfe9b-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="dfe9b-320">Devuelve el estado de Hola durante una operación de creación.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="dfe9b-321">Establecer la base de datos secundaria como principal (conmutación por error planeada)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="dfe9b-322">Establece qué base de datos de réplica es principal con conmutación por error de base de datos de réplica principal actual Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="dfe9b-323">Establecer la base de datos secundaria como principal (conmutación por error no planeada)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="dfe9b-324">Establece qué base de datos de réplica es principal con conmutación por error de base de datos de réplica principal actual Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="dfe9b-325">Esta operación puede ocasionar pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="dfe9b-326">Obtener vínculo de replicación</span><span class="sxs-lookup"><span data-stu-id="dfe9b-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="dfe9b-327">Obtiene un vínculo de replicación específico para una Base de datos SQL determinada en una asociación de replicación geográfica.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="dfe9b-328">Recupera información de hello visible en la vista de catálogo sys.geo_replication_links Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="dfe9b-329">Vínculos de replicación: lista por base de datos</span><span class="sxs-lookup"><span data-stu-id="dfe9b-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="dfe9b-330">Obtiene todos los vínculos de replicación para una Base de datos SQL determinada en una asociación de replicación geográfica.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="dfe9b-331">Recupera información de hello visible en la vista de catálogo sys.geo_replication_links Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="dfe9b-332">Eliminar vínculo de replicación</span><span class="sxs-lookup"><span data-stu-id="dfe9b-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="dfe9b-333">Elimina un vínculo de replicación de base de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-333">Deletes a database replication link.</span></span> <span data-ttu-id="dfe9b-334">No se puede realizar durante la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="dfe9b-335">[Crear o actualizar un grupo de conmutación por error]/rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="dfe9b-336">Crea o actualiza un grupo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="dfe9b-337">Eliminar grupo de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="dfe9b-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="dfe9b-338">Quita el grupo de conmutación por error de Hola de servidor hello</span><span class="sxs-lookup"><span data-stu-id="dfe9b-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="dfe9b-339">Conmutación por error (planeada)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="dfe9b-340">Conmuta por error de seguridad del servidor de toothis de servidor principal actual de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="dfe9b-341">Forzar la conmutación por error ocasiona la pérdida de datos</span><span class="sxs-lookup"><span data-stu-id="dfe9b-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="dfe9b-342">les a través del servidor de toothis de servidor principal actual de Hola.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="dfe9b-343">Esta operación puede ocasionar pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="dfe9b-344">Obtener grupo de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="dfe9b-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="dfe9b-345">Obtiene un grupo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="dfe9b-346">Enumerar grupos de conmutación por error por servidor</span><span class="sxs-lookup"><span data-stu-id="dfe9b-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="dfe9b-347">Enumera los grupos de conmutación por error de hello en un servidor.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="dfe9b-348">Actualizar grupo de conmutación por error</span><span class="sxs-lookup"><span data-stu-id="dfe9b-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="dfe9b-349">Actualiza un grupo de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="dfe9b-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="dfe9b-350">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="dfe9b-350">Next steps</span></span>
* <span data-ttu-id="dfe9b-351">Para los scripts de ejemplo, vea:</span><span class="sxs-lookup"><span data-stu-id="dfe9b-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="dfe9b-352">Configuración y conmutación por error de una base de datos única mediante la replicación geográfica activa</span><span class="sxs-lookup"><span data-stu-id="dfe9b-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="dfe9b-353">Configuración y conmutación por error de una base de datos agrupada mediante la replicación geográfica activa</span><span class="sxs-lookup"><span data-stu-id="dfe9b-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="dfe9b-354">Configurar y conmutar por error un grupo de conmutación por error para una sola base de datos (versión preliminar)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="dfe9b-355">Para obtener una descripción general y los escenarios de la continuidad empresarial, consulte [Continuidad empresarial con Base de datos SQL de Azure](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="dfe9b-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="dfe9b-356">toolearn acerca de las copias de seguridad automatizada de base de datos SQL Azure, consulte [copias de seguridad automáticas de base de datos SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="dfe9b-357">toolearn sobre el uso de copias de seguridad automatizadas para la recuperación, consulte [restaurar una base de datos de copias de seguridad de hello iniciadas por el servicio](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="dfe9b-358">toolearn acerca de los requisitos de autenticación para un nuevo servidor principal y la base de datos, vea [seguridad de base de datos de SQL después de la recuperación ante desastres](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="dfe9b-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>


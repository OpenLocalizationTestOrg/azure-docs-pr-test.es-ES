---
title: "Solución de problemas de conexión comunes relacionados con la base de datos SQL de Azure"
description: "Pasos para identificar y resolver errores de conexión comunes para la base de datos SQL de Azure."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: b8abf1285318e491d51aadf90f921103d84ce1a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-connection-issues-to-azure-sql-database"></a><span data-ttu-id="dfb6c-103">Solución de problemas de conexión de Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-103">Troubleshoot connection issues to Azure SQL Database</span></span>
<span data-ttu-id="dfb6c-104">Cuando la conexión a Base de datos SQL de Azure no se logra establecer, se reciben [mensajes de error](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-104">When the connection to Azure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="dfb6c-105">Este artículo es un tema centralizado que ayuda a la solución de problemas de conectividad de Base de datos SQL de Azure.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="dfb6c-106">Se presentan [las causas habituales](#cause) de los problemas de conexión, se recomienda [una herramienta de solución de problemas](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) que lo ayuda a identificar el problema y se proporcionan pasos de solución de problemas para resolver [errores transitorios](#troubleshoot-transient-errors) y [errores persistentes o no transitorios](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-106">It introduces [the common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity the problem, and provides troubleshooting steps to solve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="dfb6c-107">Si encuentra problemas de conexión, pruebe los pasos de solución de problemas que se describen en este artículo.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-107">If you encounter the connection issues, try the troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="dfb6c-108">Causa</span><span class="sxs-lookup"><span data-stu-id="dfb6c-108">Cause</span></span>
<span data-ttu-id="dfb6c-109">Los problemas de conexión pueden tener alguna de las siguientes causas:</span><span class="sxs-lookup"><span data-stu-id="dfb6c-109">Connection problems may be caused by any of the following:</span></span>

* <span data-ttu-id="dfb6c-110">Error al aplicar los procedimientos recomendados y las directrices de diseño durante el proceso de diseño de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-110">Failure to apply best practices and design guidelines during the application design process.</span></span>  <span data-ttu-id="dfb6c-111">Para comenzar, consulte [Información general de desarrollo de Base de datos SQL](sql-database-develop-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="dfb6c-111">See [SQL Database Development Overview](sql-database-develop-overview.md) to get started.</span></span>
* <span data-ttu-id="dfb6c-112">Reconfiguración de la Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="dfb6c-113">Configuración de firewall</span><span class="sxs-lookup"><span data-stu-id="dfb6c-113">Firewall settings</span></span>
* <span data-ttu-id="dfb6c-114">Tiempo de espera de conexión agotado</span><span class="sxs-lookup"><span data-stu-id="dfb6c-114">Connection time-out</span></span>
* <span data-ttu-id="dfb6c-115">Información de inicio de sesión incorrecta</span><span class="sxs-lookup"><span data-stu-id="dfb6c-115">Incorrect login information</span></span>
* <span data-ttu-id="dfb6c-116">Límite máximo alcanzado en algunos recursos de Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="dfb6c-117">Por lo general, los problemas de conexión de Base de datos SQL de Azure se pueden clasificar en los siguientes:</span><span class="sxs-lookup"><span data-stu-id="dfb6c-117">Generally, connection issues to Azure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="dfb6c-118">Errores transitorios (corta duración o intermitentes)</span><span class="sxs-lookup"><span data-stu-id="dfb6c-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="dfb6c-119">Errores persistentes o no transitorios (errores que se repiten con frecuencia)</span><span class="sxs-lookup"><span data-stu-id="dfb6c-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-the-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="dfb6c-120">Pruebe el solucionador de problemas para los problemas de conectividad de Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-120">Try the troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="dfb6c-121">Si se produce un error de conexión específico, pruebe [esta herramienta](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), que le ayudará a identificar y resolver el problema.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="dfb6c-122">Solución de problemas de errores transitorios</span><span class="sxs-lookup"><span data-stu-id="dfb6c-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="dfb6c-123">Cuando una aplicación se conecte a una base de datos SQL de Azure, recibirá el mensaje de error siguiente:</span><span class="sxs-lookup"><span data-stu-id="dfb6c-123">When an application connects to an Azure SQL database, you receive the following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry the connection later. If the problem persists, contact customer support, and provide them the session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="dfb6c-124">Este mensaje de error suele ser transitorio (breve).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="dfb6c-125">Este error se produce cuando la base de datos de Azure se está moviendo (o reconfigurando) y la aplicación pierde la conexión con la base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-125">This error occurs when the Azure database is being moved (or reconfigured) and your application loses its connection to the SQL database.</span></span> <span data-ttu-id="dfb6c-126">Los eventos de reconfiguración de la base de datos SQL se producen debido a un evento planeado (por ejemplo, una actualización de software) o a un evento no planeado (por ejemplo, el bloqueo de un proceso o un equilibrio de carga).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="dfb6c-127">La mayoría de los eventos de reconfiguración son generalmente de corta duración y se completarán en menos de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="dfb6c-128">Sin embargo, ocasionalmente estos eventos pueden tardar más tiempo de finalizar, por ejemplo, cuando una transacción grande produce una recuperación de larga duración.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-128">However, these events can occasionally take longer to finish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-to-resolve-transient-connectivity-issues"></a><span data-ttu-id="dfb6c-129">Pasos para resolver los problemas de conectividad transitorios</span><span class="sxs-lookup"><span data-stu-id="dfb6c-129">Steps to resolve transient connectivity issues</span></span>

1. <span data-ttu-id="dfb6c-130">Compruebe el [panel de Estado de Microsoft Azure](https://azure.microsoft.com/status) para comprobar si hay interrupciones conocidas que se hayan producido durante el tiempo en el que la aplicación informó de los errores.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-130">Check the [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during the time during which the errors were reported by the application.</span></span>
2. <span data-ttu-id="dfb6c-131">Para las aplicaciones que se conectan a un servicio en la nube, como la base de datos SQL de Azure, se deben prever eventos periódicos de reconfiguración e implementación de la lógica de reintento para gestionar estos errores en lugar de mostrarlos como errores de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-131">Applications that connect to a cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic to handle these errors instead of surfacing these as application errors to users.</span></span> <span data-ttu-id="dfb6c-132">Consulte la sección [Errores transitorios](sql-database-connectivity-issues.md), así como los procedimientos recomendados e instrucciones de diseño en [Información general de desarrollo de SQL Database](sql-database-develop-overview.md), donde encontrará más información e instrucciones para las estrategias generales de reintento.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-132">Review the [Transient errors](sql-database-connectivity-issues.md) section and the best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="dfb6c-133">Después, para información específica, consulte ejemplos de código en [Bibliotecas de conexiones para Base de datos SQL y SQL Server](sql-database-libraries.md) .</span><span class="sxs-lookup"><span data-stu-id="dfb6c-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="dfb6c-134">Conforme una base de datos se acerca a sus límites de recursos, puede parecer un problema de conectividad transitorio.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-134">As a database approaches its resource limits, it can seem to be a transient connectivity issue.</span></span> <span data-ttu-id="dfb6c-135">Vea [Solucionar problemas de rendimiento](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="dfb6c-136">Si los problemas de conectividad continúan, si el tiempo de detección del error por parte de la aplicación supera los 60 segundos o si el error se repite varias veces en un día determinado, realice una solicitud de soporte técnico a Azure; para ello, seleccione **Obtener soporte** en el sitio [Soporte técnico de Azure](https://azure.microsoft.com/support/options) .</span><span class="sxs-lookup"><span data-stu-id="dfb6c-136">If connectivity problems continue, or if the duration for which your application encounters the error exceeds 60 seconds or if you see multiple occurrences of the error in a given day, file an Azure support request by selecting **Get Support** on the [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="dfb6c-137">Solución de problemas de los errores persistentes</span><span class="sxs-lookup"><span data-stu-id="dfb6c-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="dfb6c-138">Si la aplicación no se puede conectar a la Base de datos SQL de Azure de forma persistente, normalmente indica un problema con uno de los siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="dfb6c-138">If the application persistently fails to connect to Azure SQL Database, it usually indicates an issue with one of the following:</span></span>

* <span data-ttu-id="dfb6c-139">Configuración del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-139">Firewall configuration.</span></span> <span data-ttu-id="dfb6c-140">La base de datos SQL de Azure o el firewall del cliente están bloqueando las conexiones de la base de datos SQL de Azure.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-140">The Azure SQL database or client-side firewall is blocking connections to Azure SQL Database.</span></span>
* <span data-ttu-id="dfb6c-141">Reconfiguración de la red en el lado cliente: por ejemplo, un nuevo servidor de proxy o dirección IP.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-141">Network reconfiguration on the client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="dfb6c-142">Error de usuario: por ejemplo, escribió incorrectamente los parámetros de conexión, como el nombre del servidor en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-142">User error: for example, mistyped connection parameters, such as the server name in the connection string.</span></span>

### <a name="steps-to-resolve-persistent-connectivity-issues"></a><span data-ttu-id="dfb6c-143">Pasos para resolver los problemas de conectividad persistentes</span><span class="sxs-lookup"><span data-stu-id="dfb6c-143">Steps to resolve persistent connectivity issues</span></span>
1. <span data-ttu-id="dfb6c-144">Configure las [reglas de firewall](sql-database-configure-firewall-settings.md) para permitir la dirección IP del cliente.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) to allow the client IP address.</span></span> <span data-ttu-id="dfb6c-145">Con fines de prueba temporales, configure una regla de firewall mediante 0.0.0.0 como intervalo de direcciones IP inicial y 255.255.255.255 como intervalo de dirección IP final.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as the starting IP address range and using 255.255.255.255 as the ending IP address range.</span></span> <span data-ttu-id="dfb6c-146">Se abrirá el servidor a todas las direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-146">This will open the server to all IP addresses.</span></span> <span data-ttu-id="dfb6c-147">Si se resuelve el problema de conectividad, quite esta regla y cree una regla de firewall para una dirección IP o intervalo de direcciones apropiadamente limitados.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="dfb6c-148">En todos los firewalls entre el cliente e Internet, asegúrese de que el puerto 1433 está abierto para las conexiones salientes.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-148">On all firewalls between the client and the Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="dfb6c-149">Consulte [Configure the Windows Firewall to Allow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) (Configuración del Firewall de Windows para permitir el acceso de SQL Server) y [Puertos y protocolos requeridos para la identidad híbrida](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) para obtener información sobre punteros relacionados con los puertos adicionales que necesite abrir para la autenticación de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-149">Review [Configure the Windows Firewall to Allow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related to additional ports that you need to open for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="dfb6c-150">Compruebe la cadena de conexión y otras opciones de conexión.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="dfb6c-151">Vea la sección Cadena de conexión en el [tema de los problemas de conectividad](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="dfb6c-151">See the Connection String section in the [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="dfb6c-152">Compruebe el estado del servicio en el panel.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-152">Check service health in the dashboard.</span></span> <span data-ttu-id="dfb6c-153">Si piensa que hay un interrupción regional, vea [Recuperación tras una interrupción](sql-database-disaster-recovery.md) para los pasos para recuperarse para una región nueva.</span><span class="sxs-lookup"><span data-stu-id="dfb6c-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps to recover to a new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dfb6c-154">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="dfb6c-154">Next steps</span></span>
* [<span data-ttu-id="dfb6c-155">Evaluación y mejora del rendimiento de la base de datos con la Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="dfb6c-156">Buscar en la documentación de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="dfb6c-156">Search the documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="dfb6c-157">Ver las últimas actualizaciones del servicio Base de datos SQL</span><span class="sxs-lookup"><span data-stu-id="dfb6c-157">View the latest updates to the Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="dfb6c-158">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="dfb6c-158">Additional resources</span></span>
* [<span data-ttu-id="dfb6c-159">Información general de desarrollo de Base de datos SQL</span><span class="sxs-lookup"><span data-stu-id="dfb6c-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="dfb6c-160">Orientación general sobre reintentos</span><span class="sxs-lookup"><span data-stu-id="dfb6c-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="dfb6c-161">Bibliotecas de conexiones para Base de datos SQL y SQL Server</span><span class="sxs-lookup"><span data-stu-id="dfb6c-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)


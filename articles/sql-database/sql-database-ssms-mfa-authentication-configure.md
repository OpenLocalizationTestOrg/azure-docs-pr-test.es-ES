---
title: "Configuración de la autenticación multifactor: Azure SQL | Microsoft Docs"
description: Use Multi-Factor Authentication con SSMS para SQL Database y SQL Data Warehouse.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/17/2017
ms.author: rickbyh
ms.openlocfilehash: fd78b34e8bbefdaa79a73d69ff2a0e3c1c342e98
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="configure-multi-factor-authentication-for-sql-server-management-studio-and-azure-ad"></a><span data-ttu-id="776ab-103">Configuración de la autenticación multifactor para SQL Server Management Studio y Azure AD</span><span class="sxs-lookup"><span data-stu-id="776ab-103">Configure multi-factor authentication for SQL Server Management Studio and Azure AD</span></span>

<span data-ttu-id="776ab-104">En este tema se muestra cómo usar la autenticación multifactor (MFA) de Azure Active Directory con SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="776ab-104">This topic shows you how to use Azure Active Directory multi-factor authentication (MFA) with SQL Server Management Studio.</span></span> <span data-ttu-id="776ab-105">MFA de Azure AD puede usarse cuando se conecta SSMS o SqlPackage.exe a Azure SQL Database y Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="776ab-105">Azure AD MFA can be used when connecting SSMS or SqlPackage.exe to Azure SQL Database and Azure SQL Data Warehouse.</span></span>

<span data-ttu-id="776ab-106">Para obtener información general de la autenticación multifactor de Azure SQL Database, vea [Autenticación universal con SQL Database y SQL Data Warehouse (compatibilidad de SSMS con MFA)](sql-database-ssms-mfa-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-106">For an overview of Azure SQL Database multi-factor authentication, see [Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)](sql-database-ssms-mfa-authentication.md).</span></span>

## <a name="configuration-steps"></a><span data-ttu-id="776ab-107">Pasos de configuración</span><span class="sxs-lookup"><span data-stu-id="776ab-107">Configuration steps</span></span>

1. <span data-ttu-id="776ab-108">**Configuración de una instancia de Azure Active Directory**: para más información, consulte [Administración de su directorio de Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Integración de identidades locales con Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/) (Incorporación de su nombre de dominio a Azure AD), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/) (Windows ahora admite la federación con Windows Server Active Directory) y [Administrar Azure AD mediante Windows PowerShell](https://msdn.microsoft.com/library/azure/jj151815.aspx).</span><span class="sxs-lookup"><span data-stu-id="776ab-108">**Configure an Azure Active Directory** - For more information, see [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), and [Manage Azure AD using Windows PowerShell](https://msdn.microsoft.com/library/azure/jj151815.aspx).</span></span>
2. <span data-ttu-id="776ab-109">**Configurar MFA**: para obtener instrucciones detalladas, consulte [¿Qué es Azure Multi-Factor Authentication?](../multi-factor-authentication/multi-factor-authentication.md), [Acceso condicional (MFA) con Azure SQL Database y Data Warehouse](sql-database-conditional-access.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-109">**Configure MFA** - For step-by-step instructions, see [What is Azure Multi-Factor Authentication?](../multi-factor-authentication/multi-factor-authentication.md), [Conditional Access (MFA) with Azure SQL Database and Data Warehouse](sql-database-conditional-access.md).</span></span> <span data-ttu-id="776ab-110">(El acceso condicional completo requiere una versión Premium de Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="776ab-110">(Full conditional access requires a Premium Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="776ab-111">MFA limitado está disponible con la versión estándar de Azure AD).</span><span class="sxs-lookup"><span data-stu-id="776ab-111">Limited MFA is available with a standard Azure AD.)</span></span>
3. <span data-ttu-id="776ab-112">**Configuración de SQL Database o SQL Data Warehouse para Autenticación de Azure AD**: para instrucciones detalladas, consulte [Conexión a SQL Database o a SQL Data Warehouse mediante Autenticación de Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-112">**Configure SQL Database or SQL Data Warehouse for Azure AD Authentication** - For step-by-step instructions, see [Connecting to SQL Database or SQL Data Warehouse By Using Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>
4. <span data-ttu-id="776ab-113">**Descarga de SSMS**: en el equipo cliente, descargue la versión más reciente de SSMS, desde [Descarga de SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="776ab-113">**Download SSMS** - On the client computer, download the latest SSMS, from [Download SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span></span> <span data-ttu-id="776ab-114">Para todas las características de este tema, utilice al menos la versión 17.2 de julio de 2017.</span><span class="sxs-lookup"><span data-stu-id="776ab-114">For all the features in this topic, use at least July 2017, version 17.2.</span></span>  

## <a name="connecting-by-using-universal-authentication-with-ssms"></a><span data-ttu-id="776ab-115">Conexión mediante autenticación universal con SSMS</span><span class="sxs-lookup"><span data-stu-id="776ab-115">Connecting by using universal authentication with SSMS</span></span>

<span data-ttu-id="776ab-116">Los pasos siguientes muestran cómo conectarse a SQL Database o SQL Data Warehouse con la versión más reciente de SSMS.</span><span class="sxs-lookup"><span data-stu-id="776ab-116">The following steps show how to connect to SQL Database or SQL Data Warehouse by using the latest SSMS.</span></span>

1. <span data-ttu-id="776ab-117">Para conectarse con Autenticación universal, en el cuadro de diálogo **Conectar con el servidor**, seleccione **Active Directory - Universal compatible con MFA**.</span><span class="sxs-lookup"><span data-stu-id="776ab-117">To connect using Universal Authentication, on the **Connect to Server** dialog box, select **Active Directory - Universal with MFA support**.</span></span> <span data-ttu-id="776ab-118">(Si ve **Autenticación universal de Active Directory**, no tiene la versión más reciente de SSMS).</span><span class="sxs-lookup"><span data-stu-id="776ab-118">(If you see **Active Directory Universal Authentication** you are not on the latest version of SSMS.)</span></span>  
   <span data-ttu-id="776ab-119">![1mfa-universal-connect][1]</span><span class="sxs-lookup"><span data-stu-id="776ab-119">![1mfa-universal-connect][1]</span></span>  
2. <span data-ttu-id="776ab-120">Rellene el cuadro **Nombre de usuario** con las credenciales de Azure Active Directory, con el formato `user_name@domain.com`.</span><span class="sxs-lookup"><span data-stu-id="776ab-120">Complete the **User name** box with the Azure Active Directory credentials, in the format `user_name@domain.com`.</span></span>  
   <span data-ttu-id="776ab-121">![1mfa-universal-connect-user](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect-user.png)</span><span class="sxs-lookup"><span data-stu-id="776ab-121">![1mfa-universal-connect-user](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect-user.png)</span></span>   
3. <span data-ttu-id="776ab-122">Si va a conectarse como un usuario invitado, debe hacer clic en **Opciones** y, en el cuadro d diálogo **Propiedad de conexión**, rellenar el cuadro **Nombre de dominio o ID de inquilino de AD**.</span><span class="sxs-lookup"><span data-stu-id="776ab-122">If you are connecting as a guest user, you must click **Options**, and on the **Connection Property** dialog box, complete the **AD domain name or tenant ID** box.</span></span> <span data-ttu-id="776ab-123">Para más información, consulte [Autenticación universal con SQL Database y SQL Data Warehouse (compatibilidad de SSMS con MFA)](sql-database-ssms-mfa-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-123">For more information, see [Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)](sql-database-ssms-mfa-authentication.md).</span></span>
   <span data-ttu-id="776ab-124">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span><span class="sxs-lookup"><span data-stu-id="776ab-124">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span></span>   
4. <span data-ttu-id="776ab-125">Como es habitual para SQL Database y SQL Data Warehouse, debe hacer clic en **Opciones** y especificar la base de datos en el cuadro de diálogo **Opciones**.</span><span class="sxs-lookup"><span data-stu-id="776ab-125">As usual for SQL Database and SQL Data Warehouse, you must click **Options** and specify the database on the **Options** dialog box.</span></span> <span data-ttu-id="776ab-126">(Si el usuario conectado es un invitado (es decir, joe@outlook.com), debe activar la casilla y agregar el nombre de dominio de AD actual o el identificador de inquilino como parte de las opciones).</span><span class="sxs-lookup"><span data-stu-id="776ab-126">(If the connected user is a guest user ( i.e. joe@outlook.com), you must check the box and add the current AD domain name or tenant ID as part of Options.</span></span> <span data-ttu-id="776ab-127">Consulte [Autenticación universal con SQL Database y SQL Data Warehouse (compatibilidad de SSMS con MFA)]()(sql-database-ssms-mfa-authentication.md.</span><span class="sxs-lookup"><span data-stu-id="776ab-127">See [Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)]()(sql-database-ssms-mfa-authentication.md.</span></span> <span data-ttu-id="776ab-128">Haga clic en **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="776ab-128">Then click **Connect**.</span></span>  
5. <span data-ttu-id="776ab-129">Cuando aparezca el cuadro de diálogo **Iniciar sesión con su cuenta** , escriba la cuenta y la contraseña de su identidad de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="776ab-129">When the **Sign in to your account** dialog box appears, provide the account and password of your Azure Active Directory identity.</span></span> <span data-ttu-id="776ab-130">Si un usuario pertenece a un dominio federado con Azure AD, no se requiere contraseña.</span><span class="sxs-lookup"><span data-stu-id="776ab-130">No password is required if a user is part of a domain federated with Azure AD.</span></span>  
   <span data-ttu-id="776ab-131">![2mfa-sign-in][2]</span><span class="sxs-lookup"><span data-stu-id="776ab-131">![2mfa-sign-in][2]</span></span>  

   > [!NOTE]
   > <span data-ttu-id="776ab-132">Para Autenticación universal con una cuenta que no requiere MFA, conéctese en este momento.</span><span class="sxs-lookup"><span data-stu-id="776ab-132">For Universal Authentication with an account that does not require MFA, you connect at this point.</span></span> <span data-ttu-id="776ab-133">Para los usuarios que requieren MFA, continúe con los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="776ab-133">For users requiring MFA, continue with the following steps:</span></span>
   >  
   
6. <span data-ttu-id="776ab-134">Pueden aparecer dos cuadros de diálogo de configuración de MFA.</span><span class="sxs-lookup"><span data-stu-id="776ab-134">Two MFA setup dialog boxes might appear.</span></span> <span data-ttu-id="776ab-135">Esta operación de una sola vez depende de la configuración del administrador de MFA y, por tanto, puede ser opcional.</span><span class="sxs-lookup"><span data-stu-id="776ab-135">This one time operation depends on the MFA administrator setting, and therefore may be optional.</span></span> <span data-ttu-id="776ab-136">En el caso de un dominio habilitado para MFA, a veces este paso está definido previamente (por ejemplo, el dominio requiere que los usuarios usen una tarjeta inteligente y un PIN).</span><span class="sxs-lookup"><span data-stu-id="776ab-136">For an MFA enabled domain this step is sometimes pre-defined (for example, the domain requires users to use a smartcard and pin).</span></span>  
   ![3mfa-setup][3]  
7. <span data-ttu-id="776ab-138">El segundo cuadro de diálogo de un único uso que puede que aparezca le permite seleccionar los detalles del método de autenticación.</span><span class="sxs-lookup"><span data-stu-id="776ab-138">The second possible one time dialog box allows you to select the details of your authentication method.</span></span> <span data-ttu-id="776ab-139">El administrador configura las opciones posibles.</span><span class="sxs-lookup"><span data-stu-id="776ab-139">The possible options are configured by your administrator.</span></span>  
   ![4mfa-verify-1][4]  
8. <span data-ttu-id="776ab-141">Azure Active Directory le envía la información de confirmación.</span><span class="sxs-lookup"><span data-stu-id="776ab-141">The Azure Active Directory sends the confirming information to you.</span></span> <span data-ttu-id="776ab-142">Cuando reciba el código de comprobación, escríbalo en el cuadro **Escribir código de comprobación** y haga clic en **Iniciar sesión**.</span><span class="sxs-lookup"><span data-stu-id="776ab-142">When you receive the verification code, enter it into the **Enter verification code** box, and click **Sign in**.</span></span>  
   <span data-ttu-id="776ab-143">![5mfa-verify-2][5]</span><span class="sxs-lookup"><span data-stu-id="776ab-143">![5mfa-verify-2][5]</span></span>  

<span data-ttu-id="776ab-144">Cuando se complete la comprobación, SSMS se conectará de manera habitual, siempre que haya acceso de firewall y credenciales válidas.</span><span class="sxs-lookup"><span data-stu-id="776ab-144">When verification is complete, SSMS connects normally presuming valid credentials and firewall access.</span></span>

## <a name="next-steps"></a><span data-ttu-id="776ab-145">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="776ab-145">Next steps</span></span>

* <span data-ttu-id="776ab-146">Para obtener información general de la autenticación multifactor de Azure SQL Database, consulte [Autenticación universal con SQL Database y SQL Data Warehouse (compatibilidad de SSMS con MFA)](sql-database-ssms-mfa-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-146">For an overview of Azure SQL Database multi-factor authentication, see Universal Authentication with [SQL Database and SQL Data Warehouse (SSMS support for MFA)](sql-database-ssms-mfa-authentication.md).</span></span>
* <span data-ttu-id="776ab-147">Conceder a otros usuarios acceso a la base de datos. Consulte [Autorización y autenticación de SQL Database: concesión de acceso](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-147">Grant others access to your database: [SQL Database Authentication and Authorization: Granting Access](sql-database-manage-logins.md)</span></span>  
<span data-ttu-id="776ab-148">Asegúrese de que otros usuarios puedan conectarse a través del firewall. Consulte [Configuración de un firewall de nivel de servidor en Azure SQL Database mediante Azure Portal](sql-database-configure-firewall-settings.md).</span><span class="sxs-lookup"><span data-stu-id="776ab-148">Make sure others can connect through the firewall: [Configure an Azure SQL Database server-level firewall rule using the Azure portal](sql-database-configure-firewall-settings.md)</span></span>


[1]: ./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png
[2]: ./media/sql-database-ssms-mfa-auth/2mfa-sign-in.png
[3]: ./media/sql-database-ssms-mfa-auth/3mfa-setup.png
[4]: ./media/sql-database-ssms-mfa-auth/4mfa-verify-1.png
[5]: ./media/sql-database-ssms-mfa-auth/5mfa-verify-2.png


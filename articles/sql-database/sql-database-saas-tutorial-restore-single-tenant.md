---
title: "aaaRestore una base de datos de SQL Azure en una aplicación de varios inquilinos | Documentos de Microsoft"
description: "Obtenga información acerca de cómo toorestore un único a los inquilinos SQL base de datos después de la eliminación accidental de datos"
keywords: tutorial de SQL Database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="de28e-104">Restaurar una base de datos SQL de inquilinos de SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="de28e-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="de28e-105">aplicación de SaaS Wingtip Hello se basa en un modelo de base de datos por inquilino, donde cada inquilino tiene su propia base de datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="de28e-106">Una de las ventajas de Hola de este modelo es que es fácil toorestore datos de un solo inquilino de forma aislada sin afectar a otros inquilinos.</span><span class="sxs-lookup"><span data-stu-id="de28e-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="de28e-107">En este tutorial, conocerá dos patrones de recuperación de datos:</span><span class="sxs-lookup"><span data-stu-id="de28e-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="de28e-108">Restauración de una base de datos en una base de datos en paralelo (lado a lado)</span><span class="sxs-lookup"><span data-stu-id="de28e-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="de28e-109">Restauración de una base de datos en contexto</span><span class="sxs-lookup"><span data-stu-id="de28e-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="de28e-110">**Restaurar inquilino tooa anterior punto en el tiempo, en una base de datos paralelo**</span><span class="sxs-lookup"><span data-stu-id="de28e-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="de28e-111">Este patrón se puede usar por inquilino Hola para revisión, auditoría, cumplimiento de normas, base de datos etc. Hola original permanece en línea y sin cambios.</span><span class="sxs-lookup"><span data-stu-id="de28e-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="de28e-112">**Restauración de inquilino en contexto**</span><span class="sxs-lookup"><span data-stu-id="de28e-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="de28e-113">Este patrón es toorecover normalmente se usan un punto previo tooa de inquilino en el tiempo, después de un inquilino elimina accidentalmente los datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="de28e-114">base de datos original de Hola se deja sin conexión y reemplazado por base de datos restaurada Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="de28e-115">toocomplete se ha completado este tutorial, asegúrese de hello seguro después de requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="de28e-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="de28e-116">se implementa la aplicación de SaaS Wingtip Hello.</span><span class="sxs-lookup"><span data-stu-id="de28e-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="de28e-117">vea toodeploy en menos de cinco minutos, [implementar y explorar la aplicación de SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="de28e-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="de28e-118">Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="de28e-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="de28e-119">Para más información, consulte [Introducción a Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="de28e-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="de28e-120">Patrón de restauración de introducción toohello SaaS inquilino</span><span class="sxs-lookup"><span data-stu-id="de28e-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="de28e-121">Para el inquilino de hello restaurar patrón, hay dos modelos simples para restaurar datos de un inquilino individual.</span><span class="sxs-lookup"><span data-stu-id="de28e-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="de28e-122">Debido a que las bases de datos de inquilino están aisladas entre sí, restaurar un inquilino no afecta los datos de los demás inquilinos.</span><span class="sxs-lookup"><span data-stu-id="de28e-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="de28e-123">En el primer patrón de hello, los datos se restauran en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="de28e-124">inquilino Hello, a continuación, se proporciona la base de datos de access toothis junto con sus datos de producción.</span><span class="sxs-lookup"><span data-stu-id="de28e-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="de28e-125">Este patrón permite a un inquilino de datos de administración tooreview Hola restaurar y potencialmente utilizarla tooselectively sobrescribir los valores de datos actuales.</span><span class="sxs-lookup"><span data-stu-id="de28e-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="de28e-126">Es una toohello SaaS aplicación diseñador toodetermine solo a la manera sofisticada hello deben ser opciones de recuperación de datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="de28e-127">Basta con que se va a tooreview capaz de datos en estado de Hola que estaba en un momento dado en el tiempo puede ser todo lo que es necesario en algunos escenarios.</span><span class="sxs-lookup"><span data-stu-id="de28e-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="de28e-128">Si utiliza la base de datos de hello [georreplicación](sql-database-geo-replication-overview.md), se recomienda copiar datos de hello necesario de copia de hello restaurado en la base de datos original de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="de28e-129">Si reemplaza la base de datos original de Hola con base de datos de hello restaurar, es necesario tooreconfigure y resincronizar la replicación geográfica.</span><span class="sxs-lookup"><span data-stu-id="de28e-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="de28e-130">En patrón segundo hello, que adopta ese inquilino Hola ha sufrido una pérdida o daños de los datos, se restaura la base de datos de producción del inquilino de hello tooa punto anterior en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="de28e-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="de28e-131">De restauración de hello en lugar patrón inquilino Hola se desconecta durante un breve tiempo mientras la base de datos de Hola se restaure y se vuelve a poner en línea.</span><span class="sxs-lookup"><span data-stu-id="de28e-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="de28e-132">Hello base de datos original se elimina, pero todavía se puede restaurar desde si necesita toogo atrás tooan incluso anterior punto en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="de28e-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="de28e-133">Una variación de este modelo podría cambiar el nombre de base de datos de hello en lugar de eliminarlo, aunque la base de datos de cambio de nombre hello no proporciona ninguna ventaja adicional en cuanto a seguridad de los datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="de28e-134">Obtener scripts de la aplicación hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="de28e-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="de28e-135">Hello Wingtip SaaS scripts y código fuente de aplicación están disponibles en hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repositorio de github.</span><span class="sxs-lookup"><span data-stu-id="de28e-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="de28e-136">[Pasos de secuencias de comandos de toodownload Hola Wingtip SaaS](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="de28e-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="de28e-137">Simulación de la eliminación accidental de los datos de un inquilino</span><span class="sxs-lookup"><span data-stu-id="de28e-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="de28e-138">toodemonstrate estos escenarios de recuperación, se necesita demasiado*accidentalmente* eliminar algunos datos en una de las bases de datos del inquilino de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="de28e-139">Aunque puede eliminar todos los registros, Hola configura paso siguiente Hola demostración toonot bloquearse mediante infracciones de integridad referencial!</span><span class="sxs-lookup"><span data-stu-id="de28e-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="de28e-140">También agrega algunos datos de compra de vales puede usar más adelante en hello *tutoriales de análisis de SaaS Wingtip*.</span><span class="sxs-lookup"><span data-stu-id="de28e-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="de28e-141">Ejecutar secuencia de comandos del generador de vale de Hola y crear datos adicionales.</span><span class="sxs-lookup"><span data-stu-id="de28e-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="de28e-142">Generador de vale Hola intencionadamente no adquirir vales para cada evento último de los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="de28e-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="de28e-143">Abra... \\Módulos de aprendizaje\\utilidades\\*demostración TicketGenerator.ps1* en hello *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="de28e-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="de28e-144">Presione **F5** toorun Hola script y generan los clientes y datos de ventas de vales.</span><span class="sxs-lookup"><span data-stu-id="de28e-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="de28e-145">Abra Hola aplicación tooreview Hola actuales eventos</span><span class="sxs-lookup"><span data-stu-id="de28e-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="de28e-146">Abra hello *concentrador de eventos* (http://events.wtp.&lt; usuario&gt;. trafficmanager.net) y haga clic en **Contoso un auditorio**:</span><span class="sxs-lookup"><span data-stu-id="de28e-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![events hub](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="de28e-148">Desplácese por hello lista de eventos y tome nota del último evento de hello en lista de hello:</span><span class="sxs-lookup"><span data-stu-id="de28e-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![último evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="de28e-150">Ejecutar demo Hola Hola escenario tooaccidentally delete último evento</span><span class="sxs-lookup"><span data-stu-id="de28e-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="de28e-151">Abra... \\Módulos de aprendizaje\\continuidad del negocio y recuperación ante desastres\\RestoreTenant\\*demostración RestoreTenant.ps1* en hello *PowerShell ISE*, y Hola conjunto siguiente valor:</span><span class="sxs-lookup"><span data-stu-id="de28e-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="de28e-152">**$DemoScenario** = **1**, establezca demasiado**1** -eliminar eventos sin ventas de vale.</span><span class="sxs-lookup"><span data-stu-id="de28e-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="de28e-153">Presione **F5** toorun Hola script y eliminar el último evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="de28e-154">Verá una confirmación mensaje similares toohello a continuación:</span><span class="sxs-lookup"><span data-stu-id="de28e-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="de28e-155">se abre la página de eventos de Hello Contoso.</span><span class="sxs-lookup"><span data-stu-id="de28e-155">hello Contoso events page opens.</span></span> <span data-ttu-id="de28e-156">Desplácese hacia abajo y compruebe el evento Hola ha desaparecido.</span><span class="sxs-lookup"><span data-stu-id="de28e-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="de28e-157">Si hay eventos de hello en lista de hello, haga clic en actualizar y compruebe que ha desaparecido.</span><span class="sxs-lookup"><span data-stu-id="de28e-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![último evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="de28e-159">Restaurar una base de datos de inquilinos en paralelo con la base de datos de producción de hello</span><span class="sxs-lookup"><span data-stu-id="de28e-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="de28e-160">Este ejercicio restaura el punto de tooa de base de datos de Contoso un auditorio hello en tiempo antes de que se eliminó el evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="de28e-161">Después de eliminan eventos de hello en los pasos anteriores de hello, que desee toorecover y ver datos de hello eliminado.</span><span class="sxs-lookup"><span data-stu-id="de28e-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="de28e-162">No es necesario toorestore la base de datos de producción con registro de hello eliminado, pero necesita toorecover Hola antigua base de datos tooaccess Hola datos antiguos por otros motivos empresariales.</span><span class="sxs-lookup"><span data-stu-id="de28e-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="de28e-163">Hola *restauración TenantInParallel.ps1* secuencia de comandos crea un inquilino paralelo base de datos y una entrada de catálogo paralelo ambas denominada *ContosoConcertHall\_antiguo*.</span><span class="sxs-lookup"><span data-stu-id="de28e-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="de28e-164">Este patrón de restauración es más adecuado para recuperarse de una pérdida de datos sin importancia o para escenarios de recuperación de cumplimiento y auditoría.</span><span class="sxs-lookup"><span data-stu-id="de28e-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="de28e-165">También es Hola enfoque recomendado cuando se usa [georreplicación](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="de28e-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="de28e-166">Hola completa [simular un usuario que se eliminen accidentalmente los datos](#simulate-a-tenant-accidentally-deleting-data) sección.</span><span class="sxs-lookup"><span data-stu-id="de28e-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="de28e-167">Abra... \\Módulos de aprendizaje\\continuidad del negocio y recuperación ante desastres\\RestoreTenant\\_demostración RestoreTenant.ps1_ en hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="de28e-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="de28e-168">Establecer **$DemoScenario** = **2**, establezca esta propiedad demasiado**2** demasiado*inquilino de restauración en paralelo*.</span><span class="sxs-lookup"><span data-stu-id="de28e-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="de28e-169">Presione **F5** secuencia de comandos de toorun Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="de28e-170">script de Hola restaura Hola inquilino database (base de datos paralelos de tooa) tooa punto en el tiempo antes de eliminar eventos de hello en la sección anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="de28e-171">Crea una segunda base de datos, quita los metadatos de catálogo existentes que existe en esta base de datos y agrega el catálogo de toohello de base de datos de hello en hello *ContosoConcertHall\_antiguo* entrada.</span><span class="sxs-lookup"><span data-stu-id="de28e-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="de28e-172">script de demostración de Hello abre la página de eventos de hello en el explorador.</span><span class="sxs-lookup"><span data-stu-id="de28e-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="de28e-173">Nota de la dirección URL de hello: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` que esto muestra de Hola Restaurar base de datos donde *_old* se agrega el nombre de toohello.</span><span class="sxs-lookup"><span data-stu-id="de28e-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="de28e-174">Eventos de hello desplazamiento incluidos en hello explorador tooconfirm que Hola eliminado en la sección anterior de hello el evento se ha restaurado.</span><span class="sxs-lookup"><span data-stu-id="de28e-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="de28e-175">Tenga en cuenta a ese inquilino Hola restaurar exponer como un inquilino adicional, con sus propio vales toobrowse de aplicación de eventos, es poco probable toobe cómo proporcionaría que un inquilino acceder a toorestored los datos, pero actúa tooeasily ilustra el patrón de restauración de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="de28e-176">En realidad, es probable que solo debería retener esta base de datos restaurada durante un período definido.</span><span class="sxs-lookup"><span data-stu-id="de28e-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="de28e-177">Puede eliminar entrada del inquilino de hello restaura una vez que termine por llamada hello *Remove-RestoredTenant.ps1* secuencia de comandos.</span><span class="sxs-lookup"><span data-stu-id="de28e-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="de28e-178">Establecer **$DemoScenario** demasiado**4** tooselect hello *quitar restaurar inquilino* escenario.</span><span class="sxs-lookup"><span data-stu-id="de28e-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="de28e-179">**Ejecute****con****F5**</span><span class="sxs-lookup"><span data-stu-id="de28e-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="de28e-180">Hola *ContosoConcertHall\_antiguo* entrada ahora se elimina del catálogo de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="de28e-181">Continúe y cerrar la página de eventos de Hola para este inquilino en el explorador.</span><span class="sxs-lookup"><span data-stu-id="de28e-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="de28e-182">Restaurar a un inquilino en su lugar, reemplazando la base de datos de inquilinos existente Hola</span><span class="sxs-lookup"><span data-stu-id="de28e-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="de28e-183">Este ejercicio restaura el punto de hello Contoso un auditorio inquilino tooa de tiempo antes de que se eliminó el evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="de28e-184">Hola *TenantInPlace restauración* script restaura Hola actual inquilino tooa nueva base de datos que señala tooa anterior punto en el tiempo y las eliminaciones Hola base de datos original.</span><span class="sxs-lookup"><span data-stu-id="de28e-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="de28e-185">Este patrón de restauración es más adecuado para recuperarse de daños graves en los datos, ya que puede haber pérdida de datos importantes que Hola inquilino tendría tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="de28e-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="de28e-186">Abra el archivo **Demo-RestoreTenant.ps1** en PowerShell ISE</span><span class="sxs-lookup"><span data-stu-id="de28e-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="de28e-187">Establecer **$DemoScenario** demasiado**5** tooselect hello *restaurar inquilino en el escenario de contexto*.</span><span class="sxs-lookup"><span data-stu-id="de28e-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="de28e-188">Ejecute con **F5**.</span><span class="sxs-lookup"><span data-stu-id="de28e-188">Execute using **F5**.</span></span>

<span data-ttu-id="de28e-189">script de Hola restaura el punto de tooa de base de datos de inquilino de hello cinco minutos antes de que se eliminó el evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="de28e-190">Para ello, primero teniendo Hola Contoso un auditorio inquilino sin conexión por lo que no hay ningún otro actualiza los datos de toohello.</span><span class="sxs-lookup"><span data-stu-id="de28e-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="de28e-191">A continuación, se crea mediante la restauración desde el punto de restauración de Hola y denominado una base de datos en paralelo con una marca de tiempo nombre de base de datos de hello tooensure no entra en conflicto con el nombre de base de datos de inquilino existente de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="de28e-192">A continuación, se elimina la base de datos de inquilino antigua hello y base de datos restaurada hello es el nombre de base de datos original de toohello cuyo nombre ha cambiado.</span><span class="sxs-lookup"><span data-stu-id="de28e-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="de28e-193">Por último, Contoso un auditorio se pone tooallow en línea hello aplicación toohello Restaurar base de datos.</span><span class="sxs-lookup"><span data-stu-id="de28e-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="de28e-194">Restauró correctamente el punto de tooa de base de datos de hello en tiempo antes de que se eliminó el evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="de28e-195">Hola se abrirá la página de eventos, por lo que se confirme se ha restaurado el último evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="de28e-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="de28e-196">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="de28e-196">Next steps</span></span>

<span data-ttu-id="de28e-197">En este tutorial aprendió lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="de28e-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="de28e-198">Restauración de una base de datos en una base de datos en paralelo (lado a lado)</span><span class="sxs-lookup"><span data-stu-id="de28e-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="de28e-199">Restauración de una base de datos en contexto</span><span class="sxs-lookup"><span data-stu-id="de28e-199">Restore a database in place</span></span>

[<span data-ttu-id="de28e-200">Administración de un esquema de base de datos de inquilino</span><span class="sxs-lookup"><span data-stu-id="de28e-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="de28e-201">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="de28e-201">Additional resources</span></span>

* <span data-ttu-id="de28e-202">Adicionales [tutoriales que parten Hola aplicación Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="de28e-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="de28e-203">Introducción a la continuidad empresarial con Base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="de28e-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="de28e-204">Más información sobre las copias de seguridad de SQL Database</span><span class="sxs-lookup"><span data-stu-id="de28e-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)

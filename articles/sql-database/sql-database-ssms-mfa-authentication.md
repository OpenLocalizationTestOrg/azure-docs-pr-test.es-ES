---
title: 'Multi-Factor Authentication: Azure SQL | Microsoft Docs'
description: Use Multi-Factor Authentication con SSMS para SQL Database y SQL Data Warehouse.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: fbd6e644-0520-439c-8304-2e4fb6d6eb91
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/19/2017
ms.author: rickbyh
ms.openlocfilehash: 17c48626d85b833269bb7c4d1d34618cccffd03e
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="universal-authentication-with-sql-database-and-sql-data-warehouse-ssms-support-for-mfa"></a><span data-ttu-id="bae31-103">Autenticación universal con SQL Database y SQL Data Warehouse (compatibilidad de SSMS con MFA)</span><span class="sxs-lookup"><span data-stu-id="bae31-103">Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)</span></span>
<span data-ttu-id="bae31-104">Azure SQL Database y Azure SQL Data Warehouse admiten conexiones procedentes de SQL Server Management Studio (SSMS) mediante *Autenticación universal de Active Directory*.</span><span class="sxs-lookup"><span data-stu-id="bae31-104">Azure SQL Database and Azure SQL Data Warehouse support connections from SQL Server Management Studio (SSMS) using *Active Directory Universal Authentication*.</span></span> 
<span data-ttu-id="bae31-105">**Descarga de la versión de SSMS más reciente**: en el equipo cliente, descargue la versión más reciente de SSMS desde [Descarga de SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="bae31-105">**Download the latest SSMS** - On the client computer, download the latest version of SSMS, from [Download SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span></span> <span data-ttu-id="bae31-106">Para todas las características de este tema, utilice al menos la versión 17.2 de julio de 2017.</span><span class="sxs-lookup"><span data-stu-id="bae31-106">For all the features in this topic, use at least July 2017, version 17.2.</span></span>  <span data-ttu-id="bae31-107">El cuadro de diálogo de conexión más reciente tiene la apariencia siguiente: ![1mfa-universal-connect](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "Rellena el cuadro Nombre de usuario.")</span><span class="sxs-lookup"><span data-stu-id="bae31-107">The most recent connection dialog box, looks like this: ![1mfa-universal-connect](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "Completes the User name box.")</span></span>  

## <a name="the-five-authentication-options"></a><span data-ttu-id="bae31-108">Las cinco opciones de autenticación</span><span class="sxs-lookup"><span data-stu-id="bae31-108">The five authentication options</span></span>  
- <span data-ttu-id="bae31-109">La Autenticación Universal de Active Directory admite los dos métodos de autenticación no interactiva (`Active Directory - Password` y `Active Directory - Integrated`).</span><span class="sxs-lookup"><span data-stu-id="bae31-109">Active Directory Universal Authentication supports the two non-interactive authentication methods (`Active Directory - Password` authentication and `Active Directory - Integrated` authentication).</span></span> <span data-ttu-id="bae31-110">Los métodos de autenticación no interactivos `Active Directory - Password` y `Active Directory - Integrated` se pueden usar en muchas aplicaciones (ADO.NET, JDBC, ODBC, etc.).</span><span class="sxs-lookup"><span data-stu-id="bae31-110">Non-interactive `Active Directory - Password` and `Active Directory - Integrated` Authentication methods can be used in many different applications (ADO.NET, JDBC, ODBC, etc.).</span></span> <span data-ttu-id="bae31-111">Estos dos métodos nunca generan cuadros de diálogo emergentes.</span><span class="sxs-lookup"><span data-stu-id="bae31-111">These two methods never result in pop-up dialog boxes.</span></span>

- <span data-ttu-id="bae31-112">La autenticación `Active Directory - Universal with MFA` es un método interactivo que también admite *Azure Multi-Factor Authentication* (MFA).</span><span class="sxs-lookup"><span data-stu-id="bae31-112">`Active Directory - Universal with MFA` authentication is an interactive method that also supports *Azure Multi-Factor Authentication* (MFA).</span></span> <span data-ttu-id="bae31-113">Azure MFA ayuda a proteger el acceso a los datos y las aplicaciones, al tiempo que satisface la demanda de los usuarios de un proceso de inicio de sesión simple.</span><span class="sxs-lookup"><span data-stu-id="bae31-113">Azure MFA helps safeguard access to data and applications while meeting user demand for a simple sign-in process.</span></span> <span data-ttu-id="bae31-114">Ofrece una autenticación segura con una gran variedad de opciones sencillas de verificación, como llamadas telefónicas, mensajes de texto, tarjetas inteligentes con PIN o notificaciones de aplicaciones móviles, lo que permite a los usuarios elegir el mecanismo que prefieran.</span><span class="sxs-lookup"><span data-stu-id="bae31-114">It delivers strong authentication with a range of easy verification options (phone call, text message, smart cards with pin, or mobile app notification), allowing users to choose the method they prefer.</span></span> <span data-ttu-id="bae31-115">MFA interactivo con Azure AD puede generar un cuadro de diálogo emergente para la validación.</span><span class="sxs-lookup"><span data-stu-id="bae31-115">Interactive MFA with Azure AD can result in a pop-up dialog box for validation.</span></span>

<span data-ttu-id="bae31-116">Para una descripción de Multi-Factor Authentication, consulte [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="bae31-116">For a description of Multi-Factor Authentication, see [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span></span>
<span data-ttu-id="bae31-117">Para ver los pasos de configuración, consulte [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md) (Configuración de la autenticación multifactor de Azure SQL Database para SQL Server Management Studio).</span><span class="sxs-lookup"><span data-stu-id="bae31-117">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>

### <a name="azure-ad-domain-name-or-tenant-id-parameter"></a><span data-ttu-id="bae31-118">Nombre de dominio de Azure AD o parámetro de identificador de inquilino</span><span class="sxs-lookup"><span data-stu-id="bae31-118">Azure AD domain name or tenant ID parameter</span></span>   

<span data-ttu-id="bae31-119">A partir de la [versión 17 de SSMS](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), los usuarios que se importan como invitados en la instancia actual de Active Directory desde otras instancias, pueden proporcionar el nombre de dominio de Azure AD o el identificador de inquilino cuando se conectan.</span><span class="sxs-lookup"><span data-stu-id="bae31-119">Beginning with [SSMS version 17](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), users that are imported into the current Active Directory from other Azure Active Directories as guest users, can provide the Azure AD domain name, or tenant ID when they connect.</span></span> <span data-ttu-id="bae31-120">Los usuarios invitados incluyen los que lo son desde otras instancias de Azure AD, cuentas de Microsoft como outlook.com, hotmail.com o live.com, u otras cuentas como gmail.com. Esta información permite que **Active Directory universal con MFA Authentication** identifique la entidad de autenticación correcta.</span><span class="sxs-lookup"><span data-stu-id="bae31-120">Guest users include users invited from other Azure ADs, Microsoft accounts such as outlook.com, hotmail.com, live.com, or other accounts like gmail.com. This information, allows **Active Directory Universal with MFA Authentication** to identify the correct authenticating authority.</span></span> <span data-ttu-id="bae31-121">Esta opción también se requiere para admitir cuentas de Microsoft (MSA), como outlook.com, hotmail.com o live.com, y otras cuentas que no son MSA.</span><span class="sxs-lookup"><span data-stu-id="bae31-121">This option is also required to support Microsoft accounts (MSA) such as outlook.com, hotmail.com, live.com, or non-MSA accounts.</span></span> <span data-ttu-id="bae31-122">Todos los usuarios que deseen que se emplee en ellos la autenticación universal deben escribir su nombre de dominio o identificador de inquilino de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="bae31-122">All these users who want to be authenticated using Universal Authentication must enter their Azure AD domain name or tenant ID.</span></span> <span data-ttu-id="bae31-123">Este parámetro representa el nombre de dominio o identificador de inquilino actuales de Azure AD al que el servidor Azure está vinculado.</span><span class="sxs-lookup"><span data-stu-id="bae31-123">This parameter represents the current Azure AD domain name/tenant ID the Azure Server is linked with.</span></span> <span data-ttu-id="bae31-124">Por ejemplo, si el servidor Azure está asociado al dominio de Azure AD `contosotest.onmicrosoft.com` en el que el usuario `joe@contosodev.onmicrosoft.com` está hospedado como un usuario importado del dominio de Azure AD `contosodev.onmicrosoft.com`, el nombre de dominio requerido para autenticar este usuario es `contosotest.onmicrosoft.com`.</span><span class="sxs-lookup"><span data-stu-id="bae31-124">For example, if Azure Server is associated with Azure AD domain `contosotest.onmicrosoft.com` where user `joe@contosodev.onmicrosoft.com` is hosted as an imported user from Azure AD domain `contosodev.onmicrosoft.com`, the domain name required to authenticate this user is `contosotest.onmicrosoft.com`.</span></span> <span data-ttu-id="bae31-125">Cuando el usuario es un usuario nativo de Azure AD vinculado al servidor Azure y no es una cuenta MSA, no se requieren el identificador de inquilino ni el nombre de dominio.</span><span class="sxs-lookup"><span data-stu-id="bae31-125">When the user is a native user of the Azure AD linked to Azure Server, and is not an MSA account, no domain name or tenant ID is required.</span></span> <span data-ttu-id="bae31-126">Para especificar el parámetro (a partir de la versión 17.2 de SSMS), en el cuadro de diálogo **Conectar con base de datos**, rellene el cuadro de diálogo, seleccione la autenticación **Active Directory: Universal con MFA**, haga clic en **Opciones**, rellene el cuadro **Nombre de usuario** y, a continuación, haga clic en la pestaña **Propiedades de conexión**. Active la casilla **Nombre de dominio o ID de inquilino de AD** y proporcione la entidad de autenticación, por ejemplo, el nombre de dominio (**contosoprueba.enmicrosoft.com**) o el GUID del identificador del inquilino.</span><span class="sxs-lookup"><span data-stu-id="bae31-126">To enter the parameter (beginning with SSMS version 17.2), in the **Connect to Database** dialog box, complete the dialog box, selecting **Active Directory - Universal with MFA** authentication, click **Options**, complete the **User name** box, and then click the **Connection Properties** tab. Check the **AD domain name or tenant ID** box, and provide authenticating authority, such as the domain name (**contosotest.onmicrosoft.com**) or the GUID of the tenant ID.</span></span>  
   <span data-ttu-id="bae31-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span><span class="sxs-lookup"><span data-stu-id="bae31-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span></span>   

### <a name="azure-ad-business-to-business-support"></a><span data-ttu-id="bae31-128">Compatibilidad con aplicaciones empresariales de Azure AD</span><span class="sxs-lookup"><span data-stu-id="bae31-128">Azure AD business to business support</span></span>   
<span data-ttu-id="bae31-129">Los usuarios de Azure AD admitidos en escenarios empresariales (B2B) de Azure AD como invitados (consulte [¿Qué es la colaboración B2B de Azure AD](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) pueden conectarse a SQL Database y a SQL Data Warehouse únicamente como miembros de un grupo creado en Azure AD actual y asignado manualmente mediante la instrucción `CREATE USER` de Transact-SQL en una base de datos determinada.</span><span class="sxs-lookup"><span data-stu-id="bae31-129">Azure AD users supported for Azure AD B2B scenarios as guest users (see [What is Azure B2B collaboration](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) can connect to SQL Database and SQL Data Warehouse only as part of members of a group created in current Azure AD and mapped manually using the Transact-SQL `CREATE USER` statement in a given database.</span></span> <span data-ttu-id="bae31-130">Por ejemplo, si `steve@gmail.com` es invitado a `contosotest` de Azure AD (con el dominio de Azure AD `contosotest.onmicrosoft.com`), debe crearse en Azure AD un grupo de Azure AD, como `usergroup`, que contenga el miembro `steve@gmail.com`.</span><span class="sxs-lookup"><span data-stu-id="bae31-130">For example, if `steve@gmail.com` is invited to Azure AD `contosotest` (with the Azure Ad domain `contosotest.onmicrosoft.com`), an Azure AD group, such as `usergroup` must be created in the Azure AD that contains the `steve@gmail.com` member.</span></span> <span data-ttu-id="bae31-131">Después, el administrador de Azure AD SQL o un administrador de base de datos de Azure AD debe crear este grupo para una base de datos específica (por ejemplo, MyDatabase) ejecutando una instrucción `CREATE USER [usergroup] FROM EXTERNAL PROVIDER` de Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="bae31-131">Then, this group must be created for a specific  database (i.e. MyDatabase) by Azure AD SQL admin or Azure AD DBO  by executing a Transact-SQL `CREATE USER [usergroup] FROM EXTERNAL PROVIDER` statement.</span></span> <span data-ttu-id="bae31-132">Después de crear el usuario de base de datos, el usuario `steve@gmail.com` puede iniciar sesión en `MyDatabase` con la opción de autenticación de SSMS `Active Directory – Universal with MFA support`.</span><span class="sxs-lookup"><span data-stu-id="bae31-132">After the database user is created, then the user `steve@gmail.com` can login to `MyDatabase` using the SSMS authentication option `Active Directory – Universal with MFA support`.</span></span> <span data-ttu-id="bae31-133">De forma predeterminada, el grupo de usuarios tiene el permiso de conexión y cualquier acceso adicional a los datos tendrá que concederse de la manera normal.</span><span class="sxs-lookup"><span data-stu-id="bae31-133">The usergroup, by default, has only the connect permission and any further data access that will need to be granted in the normal way.</span></span> <span data-ttu-id="bae31-134">Tenga en cuenta que el usuario `steve@gmail.com` como invitado debe activar la casilla y agregar el nombre de dominio de AD `contosotest.onmicrosoft.com` en el cuadro de diálogo **Propiedad de conexión** de SSMS.</span><span class="sxs-lookup"><span data-stu-id="bae31-134">Please note that user `steve@gmail.com` as a guest user must check the box and add the AD domain name `contosotest.onmicrosoft.com` in the SSMS **Connection Property** dialog box.</span></span> <span data-ttu-id="bae31-135">La opción **Nombre de dominio o ID de inquilino de AD** solo se admite para las opciones Universal con conexión MFA, en caso contrario se atenúa.</span><span class="sxs-lookup"><span data-stu-id="bae31-135">The **AD domain name or tenant ID** option is only supported for the Universal with MFA connection options, otherwise it is greyed out.</span></span>

## <a name="universal-authentication-limitations-for-sql-database-and-sql-data-warehouse"></a><span data-ttu-id="bae31-136">Limitaciones de Autenticación universal para SQL Database y SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="bae31-136">Universal Authentication limitations for SQL Database and SQL Data Warehouse</span></span>
* <span data-ttu-id="bae31-137">SSMS y SqlPackage.exe son las únicas herramientas que actualmente están habilitadas para MFA a través de Autenticación universal de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bae31-137">SSMS and SqlPackage.exe are the only tools currently enabled for MFA through Active Directory Universal Authentication.</span></span>
* <span data-ttu-id="bae31-138">La versión 17.2 de SSMS admite el acceso simultáneo de varios usuarios mediante Autenticación universal con MFA.</span><span class="sxs-lookup"><span data-stu-id="bae31-138">SSMS version 17.2, supports multi-user concurrent access using Universal Authentication with MFA.</span></span> <span data-ttu-id="bae31-139">Las versiones 17.0 y 17.1, limitadas a un registro para una instancia de SSMS con Autenticación universal para una sola cuenta de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bae31-139">Version 17.0 and 17.1, restricted a log in for an instance of SSMS using Universal Authentication to a single Azure Active Directory account.</span></span> <span data-ttu-id="bae31-140">Para iniciar sesión con otra cuenta de Azure AD, debe usar otra instancia de SSMS.</span><span class="sxs-lookup"><span data-stu-id="bae31-140">To log in as another Azure AD account, you must use another instance of SSMS.</span></span> <span data-ttu-id="bae31-141">(Esta restricción se limita a Autenticación universal de Active Directory. Puede iniciar sesión en distintos servidores con Autenticación de contraseña de Active Directory, Autenticación integrada de Active Directory o Autenticación de SQL Server).</span><span class="sxs-lookup"><span data-stu-id="bae31-141">(This restriction is limited to Active Directory Universal Authentication; you can log in to different servers using Active Directory Password Authentication, Active Directory Integrated Authentication, or SQL Server Authentication).</span></span>
* <span data-ttu-id="bae31-142">SSMS admite Autenticación universal de Active Directory para la visualización de Explorador de objetos, Editor de consultas y Almacén de consultas.</span><span class="sxs-lookup"><span data-stu-id="bae31-142">SSMS supports Active Directory Universal Authentication for Object Explorer, Query Editor, and Query Store visualization.</span></span>
* <span data-ttu-id="bae31-143">La versión 17.2 de SSMS proporciona compatibilidad con el asistente de DacFx para la base de datos de exportación, extracción e implementación.</span><span class="sxs-lookup"><span data-stu-id="bae31-143">SSMS version 17.2 provides DacFx Wizard support for Export/Extract/Deploy Data database.</span></span> <span data-ttu-id="bae31-144">Una vez que se autentica un usuario específico mediante el cuadro de diálogo de autenticación inicial con Autenticación universal, el asistente de DacFx funciona del mismo modo que con todos los demás métodos de autenticación.</span><span class="sxs-lookup"><span data-stu-id="bae31-144">Once a specific user is authenticated through the initial authentication dialog using Universal Authentication, the DacFx Wizard functions the same way it does for all other authentication methods.</span></span>
* <span data-ttu-id="bae31-145">El Diseñador de tablas de SSMS no admite Autenticación universal.</span><span class="sxs-lookup"><span data-stu-id="bae31-145">The SSMS Table Designer does not support Universal Authentication.</span></span>
* <span data-ttu-id="bae31-146">No hay ningún requisito de software adicional para Autenticación universal de Active Directory, excepto el uso de una versión compatible de SSMS.</span><span class="sxs-lookup"><span data-stu-id="bae31-146">There are no additional software requirements for Active Directory Universal Authentication except that you must use a supported version of SSMS.</span></span>  
* <span data-ttu-id="bae31-147">Se actualizó la versión de la Biblioteca de autenticación de Active Directory (ADAL) para Autenticación universal a su versión de lanzamiento disponible más reciente ADAL.dll 3.13.9.</span><span class="sxs-lookup"><span data-stu-id="bae31-147">The Active Directory Authentication Library (ADAL) version for Universal authentication was updated to its latest ADAL.dll 3.13.9 available released version.</span></span> <span data-ttu-id="bae31-148">Consulte [Biblioteca de autenticación de Active Directory 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span><span class="sxs-lookup"><span data-stu-id="bae31-148">See [Active Directory Authentication Library 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span></span>


## <a name="next-steps"></a><span data-ttu-id="bae31-149">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="bae31-149">Next steps</span></span>

- <span data-ttu-id="bae31-150">Para ver los pasos de configuración, consulte [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md) (Configuración de la autenticación multifactor de Azure SQL Database para SQL Server Management Studio).</span><span class="sxs-lookup"><span data-stu-id="bae31-150">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>
- <span data-ttu-id="bae31-151">Conceder a otros usuarios acceso a la base de datos. Consulte [Autorización y autenticación de SQL Database: concesión de acceso](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="bae31-151">Grant others access to your database: [SQL Database Authentication and Authorization: Granting Access](sql-database-manage-logins.md)</span></span>  
- <span data-ttu-id="bae31-152">Asegúrese de que otros usuarios puedan conectarse a través del firewall. Consulte [Configuración de un firewall de nivel de servidor en Azure SQL Database mediante Azure Portal](sql-database-configure-firewall-settings.md).</span><span class="sxs-lookup"><span data-stu-id="bae31-152">Make sure others can connect through the firewall: [Configure an Azure SQL Database server-level firewall rule using the Azure portal](sql-database-configure-firewall-settings.md)</span></span>  
- [<span data-ttu-id="bae31-153">Configuración y administración de la autenticación de Azure Active Directory con SQL Database o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="bae31-153">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>](sql-database-aad-authentication-configure.md)  
- [<span data-ttu-id="bae31-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span><span class="sxs-lookup"><span data-stu-id="bae31-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span></span>](https://www.microsoft.com/download/details.aspx?id=55088)  
- [<span data-ttu-id="bae31-155">SQLPackage.exe</span><span class="sxs-lookup"><span data-stu-id="bae31-155">SQLPackage.exe</span></span>](https://msdn.microsoft.com/library/hh550080.aspx)  
- [<span data-ttu-id="bae31-156">Importación de un archivo BACPAC en una nueva base de datos SQL de Azure</span><span class="sxs-lookup"><span data-stu-id="bae31-156">Import a BACPAC file to a new Azure SQL Database</span></span>](../sql-database/sql-database-import.md)  
- [<span data-ttu-id="bae31-157">Exportación de una base de datos SQL de Azure a un archivo BACPAC</span><span class="sxs-lookup"><span data-stu-id="bae31-157">Export an Azure SQL database to a BACPAC file</span></span>](../sql-database/sql-database-export.md)  
- <span data-ttu-id="bae31-158">Interfaz de C# [Interfaz IUniversalAuthProvider](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span><span class="sxs-lookup"><span data-stu-id="bae31-158">C# interface [IUniversalAuthProvider Interface](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span></span>  

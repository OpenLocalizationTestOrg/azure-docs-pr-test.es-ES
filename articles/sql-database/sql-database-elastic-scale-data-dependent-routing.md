---
title: aaaData dependiente de enrutamiento con la base de datos de SQL de Azure | Documentos de Microsoft
description: "¿Cómo toouse Hola clase ShardMapManager en aplicaciones de .NET para el enrutamiento, una característica de bases de datos particionadas en base de datos de SQL Azure de dependiente de datos"
services: sql-database
documentationcenter: 
manager: jhubbard
author: torsteng
editor: 
ms.assetid: cad09e15-5561-4448-aa18-b38f54cda004
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/27/2017
ms.author: ddove
ms.openlocfilehash: 34014508ae01905686791fe096bb275cb84f53b4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="data-dependent-routing"></a><span data-ttu-id="448cb-103">Enrutamiento dependiente de los datos</span><span class="sxs-lookup"><span data-stu-id="448cb-103">Data dependent routing</span></span>
<span data-ttu-id="448cb-104">**Enrutamiento dependiente de datos** es Hola capacidad toouse Hola base de datos de una consulta tooroute Hola solicitud tooan adecuado.</span><span class="sxs-lookup"><span data-stu-id="448cb-104">**Data dependent routing** is hello ability toouse hello data in a query tooroute hello request tooan appropriate database.</span></span> <span data-ttu-id="448cb-105">Se trata de un patrón fundamental cuando se trabaja con bases de datos particionadas.</span><span class="sxs-lookup"><span data-stu-id="448cb-105">This is a fundamental pattern when working with sharded databases.</span></span> <span data-ttu-id="448cb-106">contexto de la solicitud de Hello también puede ser usado tooroute solicitud de hello, especialmente si clave de particionamiento de hello no forma parte de la consulta de Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-106">hello request context may also be used tooroute hello request, especially if hello sharding key is not part of hello query.</span></span> <span data-ttu-id="448cb-107">Cada consulta específica o transacción en una aplicación con enrutamiento dependiente de datos está restringido tooaccessing una base de datos única por solicitud.</span><span class="sxs-lookup"><span data-stu-id="448cb-107">Each specific query or transaction in an application using data dependent routing is restricted tooaccessing a single database per request.</span></span> <span data-ttu-id="448cb-108">Para las herramientas de hello elástico de base de datos de SQL de Azure, esta ruta se logra con hello  **[ShardMapManager clase](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)**  en aplicaciones de ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="448cb-108">For hello Azure SQL Database Elastic tools, this routing is accomplished with hello **[ShardMapManager class](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)** in ADO.NET applications.</span></span>

<span data-ttu-id="448cb-109">aplicación Hello no es necesario tootrack varias cadenas de conexión o ubicaciones de base de datos asociados a distintos segmentos de datos de entorno particionada Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-109">hello application does not need tootrack various connection strings or DB locations associated with different slices of data in hello sharded environment.</span></span> <span data-ttu-id="448cb-110">En su lugar, Hola [Shard Map Manager](sql-database-elastic-scale-shard-map-management.md) abre las conexiones toohello correcta las bases de datos cuando sea necesario, en función de los datos de hello en mapa de particiones de Hola y el valor de Hola de clave de particionamiento de hello es destino de saludo de solicitud de la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="448cb-110">Instead, hello [Shard Map Manager](sql-database-elastic-scale-shard-map-management.md) opens connections toohello correct databases when needed, based on hello data in hello shard map and hello value of hello sharding key that is hello target of hello application’s request.</span></span> <span data-ttu-id="448cb-111">Hola clave suele ser hello *customer_id*, *tenant_id*, *date_key*, o algún otro identificador específico que es un parámetro de solicitud de la base de datos de hello fundamental).</span><span class="sxs-lookup"><span data-stu-id="448cb-111">hello key is typically hello *customer_id*, *tenant_id*, *date_key*, or some other specific identifier that is a fundamental parameter of hello database request).</span></span> 

<span data-ttu-id="448cb-112">Para más información, consulte [Scaling Out SQL Server with Data Dependent Routing](https://technet.microsoft.com/library/cc966448.aspx)(Escalado horizontal de SQL Server con enrutamiento dependiente de los datos).</span><span class="sxs-lookup"><span data-stu-id="448cb-112">For more information, see [Scaling Out SQL Server with Data Dependent Routing](https://technet.microsoft.com/library/cc966448.aspx).</span></span>

## <a name="download-hello-client-library"></a><span data-ttu-id="448cb-113">Descargar la biblioteca de cliente hello</span><span class="sxs-lookup"><span data-stu-id="448cb-113">Download hello client library</span></span>
<span data-ttu-id="448cb-114">clase de hello tooget, instalación hello [biblioteca de cliente de base de datos elástica](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="448cb-114">tooget hello class, install hello [Elastic Database Client Library](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span> 

## <a name="using-a-shardmapmanager-in-a-data-dependent-routing-application"></a><span data-ttu-id="448cb-115">Usar un ShardMapManager en una aplicación de enrutamiento dependiente de datos</span><span class="sxs-lookup"><span data-stu-id="448cb-115">Using a ShardMapManager in a data dependent routing application</span></span>
<span data-ttu-id="448cb-116">Las aplicaciones deben crear una instancia hello **ShardMapManager** durante la inicialización, mediante la llamada del generador de hello  **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span><span class="sxs-lookup"><span data-stu-id="448cb-116">Applications should instantiate hello **ShardMapManager** during initialization, using hello factory call **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span></span> <span data-ttu-id="448cb-117">En este ejemplo, se inicializan **ShardMapManager** y un elemento **ShardMap** específico que contiene.</span><span class="sxs-lookup"><span data-stu-id="448cb-117">In this example, both a **ShardMapManager** and a specific **ShardMap** that it contains are initialized.</span></span> <span data-ttu-id="448cb-118">En este ejemplo se muestra hello GetSqlShardMapManager y [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) métodos.</span><span class="sxs-lookup"><span data-stu-id="448cb-118">This example shows hello GetSqlShardMapManager and [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) methods.</span></span>

    ShardMapManager smm = ShardMapManagerFactory.GetSqlShardMapManager(smmConnnectionString, 
                      ShardMapManagerLoadPolicy.Lazy);
    RangeShardMap<int> customerShardMap = smm.GetRangeShardMap<int>("customerMap"); 

### <a name="use-lowest-privilege-credentials-possible-for-getting-hello-shard-map"></a><span data-ttu-id="448cb-119">Usar credenciales de privilegios más bajo posible para obtener el mapa de particiones de Hola</span><span class="sxs-lookup"><span data-stu-id="448cb-119">Use lowest privilege credentials possible for getting hello shard map</span></span>
<span data-ttu-id="448cb-120">Si una aplicación no es la manipulación de propia asignación de particiones Hola, credenciales de hello utilizadas en el método de fábrica de hello deben tener permisos de solo de solo lectura en hello **Global mapa de particiones** base de datos.</span><span class="sxs-lookup"><span data-stu-id="448cb-120">If an application is not manipulating hello shard map itself, hello credentials used in hello factory method should have just read-only permissions on hello **Global Shard Map** database.</span></span> <span data-ttu-id="448cb-121">Estas credenciales son suelen ser diferentes de las credenciales usadas tooopen conexiones toohello particiones map manager.</span><span class="sxs-lookup"><span data-stu-id="448cb-121">These credentials are typically different from credentials used tooopen connections toohello shard map manager.</span></span> <span data-ttu-id="448cb-122">Vea también [credenciales usan la biblioteca de cliente de base de datos elástica tooaccess hello](sql-database-elastic-scale-manage-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="448cb-122">See also [Credentials used tooaccess hello Elastic Database client library](sql-database-elastic-scale-manage-credentials.md).</span></span> 

## <a name="call-hello-openconnectionforkey-method"></a><span data-ttu-id="448cb-123">Llame al método de hello OpenConnectionForKey</span><span class="sxs-lookup"><span data-stu-id="448cb-123">Call hello OpenConnectionForKey method</span></span>
<span data-ttu-id="448cb-124">Hola  **[ShardMap.OpenConnectionForKey método](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)**  devuelve una conexión ADO.Net listo para la emisión de la base de datos de comandos toohello adecuada en función de valor de Hola de hello **clave**parámetro.</span><span class="sxs-lookup"><span data-stu-id="448cb-124">hello **[ShardMap.OpenConnectionForKey method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)** returns an ADO.Net connection ready for issuing commands toohello appropriate database based on hello value of hello **key** parameter.</span></span> <span data-ttu-id="448cb-125">Información de partición se almacena en memoria caché en la aplicación hello hello **ShardMapManager**, por lo que estas solicitudes no suelen implicar una búsqueda de base de datos contra Hola **Global mapa de particiones** base de datos.</span><span class="sxs-lookup"><span data-stu-id="448cb-125">Shard information is cached in hello application by hello **ShardMapManager**, so these requests do not typically involve a database lookup against hello **Global Shard Map** database.</span></span> 

    // Syntax: 
    public SqlConnection OpenConnectionForKey<TKey>(
        TKey key,
        string connectionString,
        ConnectionOptions options
    )


* <span data-ttu-id="448cb-126">Hola **clave** parámetro se utiliza como clave de búsqueda en hello particiones mapa toodetermine Hola base de datos adecuada para la solicitud de Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-126">hello **key** parameter is used as a lookup key into hello shard map toodetermine hello appropriate database for hello request.</span></span> 
* <span data-ttu-id="448cb-127">Hola **connectionString** son toopass utilizados solo credenciales de usuario de Hola para conexión de hello deseado.</span><span class="sxs-lookup"><span data-stu-id="448cb-127">hello **connectionString** is used toopass only hello user credentials for hello desired connection.</span></span> <span data-ttu-id="448cb-128">Ningún nombre de base de datos o el nombre del servidor se incluyen en este *connectionString* puesto que el método hello determinará la base de datos de Hola y servidor mediante hello **ShardMap**.</span><span class="sxs-lookup"><span data-stu-id="448cb-128">No database name or server name are included in this *connectionString* since hello method will determine hello database and server using hello **ShardMap**.</span></span> 
* <span data-ttu-id="448cb-129">Hola  **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)**  debe establecerse demasiado**ConnectionOptions.Validate** si puede cambiar un entorno donde partición se asigna y filas pueden mover bases de datos de tooother como un resultado de las operaciones de división o combinación.</span><span class="sxs-lookup"><span data-stu-id="448cb-129">hello **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)** should be set too**ConnectionOptions.Validate** if an environment where shard maps may change and rows may move tooother databases as a result of split or merge operations.</span></span> <span data-ttu-id="448cb-130">Esto implica un mapa de particiones local toohello breve consulta en la base de datos de destino hello (no en el mapa de toohello particiones global) antes de la conexión de Hola se entrega toohello aplicación.</span><span class="sxs-lookup"><span data-stu-id="448cb-130">This involves a brief query toohello local shard map on hello target database (not toohello global shard map) before hello connection is delivered toohello application.</span></span> 

<span data-ttu-id="448cb-131">Si falla la validación de hello en mapa de particiones locales de hello (lo que indica que la memoria caché de hello es incorrecta), hello Shard Map Manager consultará Hola partición global mapa tooobtain Hola nuevo valor correcto para la búsqueda de hello, actualice su caché de hello y obtenga y devolver Hola conexión de base de datos correspondiente.</span><span class="sxs-lookup"><span data-stu-id="448cb-131">If hello validation against hello local shard map fails (indicating that hello cache is incorrect), hello Shard Map Manager will query hello global shard map tooobtain hello new correct value for hello lookup, update hello cache, and obtain and return hello appropriate database connection.</span></span> 

<span data-ttu-id="448cb-132">Utilice **ConnectionOptions.None** solo cuando no se esperen cambios de asignación de particiones mientras una aplicación está en línea.</span><span class="sxs-lookup"><span data-stu-id="448cb-132">Use **ConnectionOptions.None** only when shard mapping changes are not expected while an application is online.</span></span> <span data-ttu-id="448cb-133">En ese caso, valores de hello en caché pueden suponer tooalways sea correcta y se puede omitir sin ningún riesgo Hola validación de ida y vuelta adicional llamada toohello de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="448cb-133">In that case, hello cached values can be assumed tooalways be correct, and hello extra round-trip validation call toohello target database can be safely skipped.</span></span> <span data-ttu-id="448cb-134">Esto reduce el tráfico de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="448cb-134">That reduces database traffic.</span></span> <span data-ttu-id="448cb-135">Hola **connectionOptions** también se puede establecer a través de un valor en un tooindicate del archivo de configuración si se esperan que los cambios de particionamiento o no durante un período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="448cb-135">hello **connectionOptions** may also be set via a value in a configuration file tooindicate whether sharding changes are expected or not during a period of time.</span></span>  

<span data-ttu-id="448cb-136">Este ejemplo usa el valor de Hola de una clave de entero **CustomerID**, utilizando un **ShardMap** objeto denominado **customerShardMap**.</span><span class="sxs-lookup"><span data-stu-id="448cb-136">This example uses hello value of an integer key **CustomerID**, using a **ShardMap** object named **customerShardMap**.</span></span>  

    int customerId = 12345; 
    int newPersonId = 4321; 

    // Connect toohello shard for that customer ID. No need toocall a SqlConnection 
    // constructor followed by hello Open method.
    using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId, 
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
    { 
        // Execute a simple command. 
        SqlCommand cmd = conn.CreateCommand(); 
        cmd.CommandText = @"UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID"; 

        cmd.Parameters.AddWithValue("@customerID", customerId); 
        cmd.Parameters.AddWithValue("@newPersonID", newPersonId); 
        cmd.ExecuteNonQuery(); 
    }  

<span data-ttu-id="448cb-137">Hola **OpenConnectionForKey** método devuelve una nueva conexión ya abierto toohello base de datos correcta.</span><span class="sxs-lookup"><span data-stu-id="448cb-137">hello **OpenConnectionForKey** method returns a new already-open connection toohello correct database.</span></span> <span data-ttu-id="448cb-138">Las conexiones utilizadas de esta manera seguirán aprovechando completamente las agrupaciones de conexiones de ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="448cb-138">Connections utilized in this way still take full advantage of ADO.Net connection pooling.</span></span> <span data-ttu-id="448cb-139">Siempre y cuando las transacciones y las solicitudes se pueden lograr mediante una partición a la vez, debe ser única necesarios en una aplicación ya usa ADO.Net de modificación Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-139">As long as transactions and requests can be satisfied by one shard at a time, this should be hello only modification necessary in an application already using ADO.Net.</span></span> 

<span data-ttu-id="448cb-140">Hola  **[OpenConnectionForKeyAsync método](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)**  también está disponible si la aplicación hace que la programación asincrónica de uso con ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="448cb-140">hello **[OpenConnectionForKeyAsync method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)** is also available if your application makes use asynchronous programming with ADO.Net.</span></span> <span data-ttu-id="448cb-141">Su comportamiento es datos Hola dependientes enrutamiento equivalente de ADO. De NET  **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)**  método.</span><span class="sxs-lookup"><span data-stu-id="448cb-141">Its behavior is hello data dependent routing equivalent of ADO.Net's **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)** method.</span></span>

## <a name="integrating-with-transient-fault-handling"></a><span data-ttu-id="448cb-142">Integración con el control de errores transitorios</span><span class="sxs-lookup"><span data-stu-id="448cb-142">Integrating with transient fault handling</span></span>
<span data-ttu-id="448cb-143">Una práctica recomendada para el desarrollo de aplicaciones de acceso a datos en la nube de hello es tooensure los errores transitorios se detecta la aplicación hello y que las operaciones de Hola se reintentan varias veces antes de producir un error.</span><span class="sxs-lookup"><span data-stu-id="448cb-143">A best practice in developing data access applications in hello cloud is tooensure that transient faults are caught by hello app, and that hello operations are retried several times before throwing an error.</span></span> <span data-ttu-id="448cb-144">El control de errores transitorios para aplicaciones en la nube se describe en [Control de errores transitorios](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span><span class="sxs-lookup"><span data-stu-id="448cb-144">Transient fault handling for cloud applications is discussed at [Transient Fault Handling](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span></span> 

<span data-ttu-id="448cb-145">Control de errores transitorios puede coexistir natural con el patrón de enrutamiento dependiente de datos Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-145">Transient fault handling can coexist naturally with hello Data Dependent Routing pattern.</span></span> <span data-ttu-id="448cb-146">Hola requisito clave es tooretry Hola solicitud de acceso de datos completo incluido hello **con** bloque que obtienen la conexión de enrutamiento dependiente de los datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-146">hello key requirement is tooretry hello entire data access request including hello **using** block that obtained hello data-dependent routing connection.</span></span> <span data-ttu-id="448cb-147">ejemplo de Hola anterior podría modificarse como sigue (Observe el cambio resaltado).</span><span class="sxs-lookup"><span data-stu-id="448cb-147">hello example above could be rewritten as follows (note highlighted change).</span></span> 

### <a name="example---data-dependent-routing-with-transient-fault-handling"></a><span data-ttu-id="448cb-148">Ejemplo: enrutamiento dependiente de los datos con control de errores transitorios</span><span class="sxs-lookup"><span data-stu-id="448cb-148">Example - data dependent routing with transient fault handling</span></span>
<pre><code>int customerId = 12345; 
int newPersonId = 4321; 

<span style="background-color:  #FFFF00">Configuration.SqlRetryPolicy.ExecuteAction(() =&gt; </span> 
<span style="background-color:  #FFFF00">    { </span>
        // Connect toohello shard for a customer ID. 
        using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId,  
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
        { 
            // Execute a simple command 
            SqlCommand cmd = conn.CreateCommand(); 

            cmd.CommandText = @&quot;UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID&quot;; 

            cmd.Parameters.AddWithValue(&quot;@customerID&quot;, customerId); 
            cmd.Parameters.AddWithValue(&quot;@newPersonID&quot;, newPersonId); 
            cmd.ExecuteNonQuery(); 

            Console.WriteLine(&quot;Update completed&quot;); 
        } 
<span style="background-color:  #FFFF00">    }); </span> 
</code></pre>


<span data-ttu-id="448cb-149">Control de errores transitorios tooimplement necesarios son los paquetes descargan automáticamente cuando se crea la aplicación de ejemplo de Hola elástico de base de datos.</span><span class="sxs-lookup"><span data-stu-id="448cb-149">Packages necessary tooimplement transient fault handling are downloaded automatically when you build hello elastic database sample application.</span></span> <span data-ttu-id="448cb-150">Los paquetes también están disponibles por separado en [Biblioteca de información empresarial: bloque de aplicación Control de errores transitorios](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span><span class="sxs-lookup"><span data-stu-id="448cb-150">Packages are also available separately at [Enterprise Library - Transient Fault Handling Application Block](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span></span> <span data-ttu-id="448cb-151">Use la versión 6.0 o posterior.</span><span class="sxs-lookup"><span data-stu-id="448cb-151">Use version 6.0 or later.</span></span> 

## <a name="transactional-consistency"></a><span data-ttu-id="448cb-152">Coherencia de las transacciones</span><span class="sxs-lookup"><span data-stu-id="448cb-152">Transactional consistency</span></span>
<span data-ttu-id="448cb-153">Propiedades de transacción se garantiza para todas las particiones de tooa local de operaciones.</span><span class="sxs-lookup"><span data-stu-id="448cb-153">Transactional properties are guaranteed for all operations local tooa shard.</span></span> <span data-ttu-id="448cb-154">Por ejemplo, las transacciones que se envían a través de enrutamiento dependiente de los datos se ejecuten dentro del ámbito de Hola de partición de destino de Hola de conexión de Hola.</span><span class="sxs-lookup"><span data-stu-id="448cb-154">For example, transactions submitted through data-dependent routing execute within hello scope of hello target shard for hello connection.</span></span> <span data-ttu-id="448cb-155">En este momento, no se proporcionan funcionalidades para alistar conexiones múltiples en una transacción y, por lo tanto, no hay garantías de transacciones para las operaciones realizadas a través de las particiones.</span><span class="sxs-lookup"><span data-stu-id="448cb-155">At this time, there are no capabilities provided for enlisting multiple connections into a transaction, and therefore there are no transactional guarantees for operations performed across shards.</span></span>

## <a name="next-steps"></a><span data-ttu-id="448cb-156">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="448cb-156">Next steps</span></span>
<span data-ttu-id="448cb-157">vea toodetach una partición o una partición, tooreattach [con los problemas de asignación de particiones de la clase toofix de hello RecoveryManager](sql-database-elastic-database-recovery-manager.md)</span><span class="sxs-lookup"><span data-stu-id="448cb-157">toodetach a shard, or tooreattach a shard, see [Using hello RecoveryManager class toofix shard map problems](sql-database-elastic-database-recovery-manager.md)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]


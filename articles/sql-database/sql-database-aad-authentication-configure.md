---
title: "Configuración de la autenticación de Azure Active Directory: SQL | Microsoft Docs"
description: "Aprenda a conectarse a SQL Database y SQL Data Warehouse mediante Autenticación de Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: 61a52813769891aa63373437e9300d4f8f47fab2
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="c53a4-103">Configuración y administración de la autenticación de Azure Active Directory con SQL Database o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="c53a4-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="c53a4-104">Este artículo muestra cómo crear y rellenar una instancia de Azure AD y, a continuación, usarla con Azure SQL Database y SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-104">This article shows you how to create and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="c53a4-105">Para ver un resumen, consulte [Autenticación con Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="c53a4-106">La conexión a una instancia de SQL Server que se ejecute en una máquina virtual de Azure no se admite si se usa una cuenta de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c53a4-106">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="c53a4-107">Utilice en su lugar una cuenta de Active Directory del dominio.</span><span class="sxs-lookup"><span data-stu-id="c53a4-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="c53a4-108">Crear y rellenar una instancia de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="c53a4-109">Cree una instancia de Azure AD y rellénela con usuarios y grupos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="c53a4-110">Azure AD puede ser el dominio administrado de Azure AD de dominio inicial.</span><span class="sxs-lookup"><span data-stu-id="c53a4-110">Azure AD can be the initial domain Azure AD managed domain.</span></span> <span data-ttu-id="c53a4-111">Azure AD también puede ser una instancia local de Active Directory Domain Services que se federa con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with the Azure AD.</span></span>

<span data-ttu-id="c53a4-112">Para obtener más información, consulte [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md) (Integración de sus identidades locales con Azure Active Directory), [Incorporación de su nombre de dominio personalizado a Azure Active Directory](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/) (Microsoft Azure admite ahora Windows Server Active Directory), [Administración de su directorio de Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Administrar Azure AD mediante Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0) y [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md) (Puertos y protocolos requeridos para la identidad híbrida).</span><span class="sxs-lookup"><span data-stu-id="c53a4-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-the-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="c53a4-113">Opcional: asociar o cambiar el Active Directory que está asociado actualmente a la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="c53a4-113">Optional: Associate or change the active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="c53a4-114">Para asociar la base de datos con el directorio de Azure AD para su organización, cree el directorio como un directorio de confianza para la suscripción de Azure que hospeda la base de datos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-114">To associate your database with the Azure AD directory for your organization, make the directory a trusted directory for the Azure subscription hosting the database.</span></span> <span data-ttu-id="c53a4-115">Para obtener más información, consulte [Cómo se asocian las suscripciones a Azure con Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="c53a4-116">**Información adicional:** cada suscripción de Azure tiene una relación de confianza con una instancia de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="c53a4-117">Esto significa que confía en ese directorio para autenticar usuarios, servicios y dispositivos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-117">This means that it trusts that directory to authenticate users, services, and devices.</span></span> <span data-ttu-id="c53a4-118">Varias suscripciones pueden confiar en el mismo directorio, pero una suscripción confía solo en un único directorio.</span><span class="sxs-lookup"><span data-stu-id="c53a4-118">Multiple subscriptions can trust the same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="c53a4-119">Puede ver el directorio en que confía la suscripción en la pestaña **Configuración** , en [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="c53a4-119">You can see which directory is trusted by your subscription under the **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="c53a4-120">Esta relación de confianza que tiene una suscripción con un directorio es diferente de la relación que tiene una suscripción con todos los demás recursos de Azure (sitios web, bases de datos etc.), que son más parecidos a los recursos secundarios de una suscripción.</span><span class="sxs-lookup"><span data-stu-id="c53a4-120">This trust relationship that a subscription has with a directory is unlike the relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="c53a4-121">Si una suscripción expira, el acceso a esos otros recursos asociados a la suscripción también se detiene.</span><span class="sxs-lookup"><span data-stu-id="c53a4-121">If a subscription expires, then access to those other resources associated with the subscription also stops.</span></span> <span data-ttu-id="c53a4-122">Sin embargo, el directorio permanece en Azure y puede asociar otra suscripción a ese directorio y continuar con la administración de los usuarios del directorio.</span><span class="sxs-lookup"><span data-stu-id="c53a4-122">But the directory remains in Azure, and you can associate another subscription with that directory and continue to manage the directory users.</span></span> <span data-ttu-id="c53a4-123">Para más información sobre recursos, consulte [Descripción de acceso a los recursos de Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="c53a4-124">En los procedimientos siguientes se explica cómo cambiar el directorio asociado para una suscripción determinada.</span><span class="sxs-lookup"><span data-stu-id="c53a4-124">The following procedures show you how to change the associated directory for a given subscription.</span></span>
1. <span data-ttu-id="c53a4-125">Conéctese a su [Portal de Azure clásico](https://manage.windowsazure.com/) mediante un administrador de suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="c53a4-125">Connect to your [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="c53a4-126">En el área de la izquierda, seleccione **CONFIGURACIÓN**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-126">On the left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="c53a4-127">Las suscripciones aparecen en la pantalla de configuración.</span><span class="sxs-lookup"><span data-stu-id="c53a4-127">Your subscriptions appear in the settings screen.</span></span> <span data-ttu-id="c53a4-128">Si la suscripción deseada no aparece, haga clic en el apartado **Suscripciones** de la parte superior, despliegue la lista del cuadro **FILTRAR POR DIRECTORIO**, seleccione el directorio que contiene las suscripciones y después haga clic en **APLICAR**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-128">If the desired subscription does not appear, click **Subscriptions** at the top, drop down the **FILTER BY DIRECTORY** box and select the directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![seleccionar suscripción][4]
4. <span data-ttu-id="c53a4-130">En el área **Configuración**, haga clic en la suscripción y, después, en **EDITAR DIRECTORIO** en la parte inferior de la página.</span><span class="sxs-lookup"><span data-stu-id="c53a4-130">In the **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at the bottom of the page.</span></span>
   
    ![portal de configuración de ad][5]
5. <span data-ttu-id="c53a4-132">En el cuadro **EDITAR DIRECTORIO** , seleccione el directorio de Azure Active Directory asociado al servidor SQL Server o a la instancia de SQL Data Warehouse y haga clic en la flecha para avanzar.</span><span class="sxs-lookup"><span data-stu-id="c53a4-132">In the **EDIT DIRECTORY** box, select the Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click the arrow for next.</span></span>
   
    ![selección de editar directorio][6]
6. <span data-ttu-id="c53a4-134">En el cuadro de diálogo de la asociación de directorios **CONFIRMAR**, confirme el mensaje "**Se quitarán todos los coadministradores**".</span><span class="sxs-lookup"><span data-stu-id="c53a4-134">In the **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![confirmación de editar directorio][7]
7. <span data-ttu-id="c53a4-136">Haga clic en la marca de verificación para volver a cargar el portal.</span><span class="sxs-lookup"><span data-stu-id="c53a4-136">Click the check to reload the portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c53a4-137">Cuando se cambia el directorio, el acceso de todos los coadministradores, usuarios y grupos de Azure AD y usuarios de recursos con respaldo del directorio se quitan y dejan de tener acceso a la suscripción y sus recursos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-137">When you change the directory, access to all co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access to this subscription or its resources.</span></span> <span data-ttu-id="c53a4-138">Solo el administrador del servicio puede configurar el acceso para las entidades de seguridad según el nuevo directorio.</span><span class="sxs-lookup"><span data-stu-id="c53a4-138">Only you, as a service administrator, can configure access for principals based on the new directory.</span></span> <span data-ttu-id="c53a4-139">Este cambio podría tardar una cantidad considerable de tiempo en propagarse a todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-139">This change might take a substantial amount of time to propagate to all resources.</span></span> <span data-ttu-id="c53a4-140">Al cambiar el directorio también se modifica el administrador de Azure AD de SQL Database y SQL Data Warehouse, y se deshabilita el acceso a la base de datos de los usuarios de Azure AD existentes.</span><span class="sxs-lookup"><span data-stu-id="c53a4-140">Changing the directory, also changes the Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="c53a4-141">El administrador de Azure AD debe restablecerse (como se describe a continuación) y se deben crear nuevos usuarios de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-141">The Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="c53a4-142">Creación de un administrador de Azure AD para Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="c53a4-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="c53a4-143">Cada servidor de Azure SQL Server (que hospeda una instancia de SQL Database o SQL Data Warehouse) se inicia con una única cuenta de administrador, que es el administrador de todo el servidor de Azure SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c53a4-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is the administrator of the entire Azure SQL server.</span></span> <span data-ttu-id="c53a4-144">Se debe crear un segundo administrador de SQL Server que sea una cuenta de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="c53a4-145">Esta entidad de seguridad se crea como un usuario de base de datos independiente en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="c53a4-145">This principal is created as a contained database user in the master database.</span></span> <span data-ttu-id="c53a4-146">Como administradores, las cuentas de administrador del servidor son miembros del rol **db_owner** en todas las bases de datos de usuarios y se especifican en cada base de datos de usuarios como el usuario **dbo**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-146">As administrators, the server administrator accounts are members of the **db_owner** role in every user database, and enter each user database as the **dbo** user.</span></span> <span data-ttu-id="c53a4-147">Para más información sobre las cuentas de administrador de servidor, consulte [Administración de bases de datos e inicios de sesión en Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-147">For more information about the server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="c53a4-148">Cuando se usa Azure Active Directory con replicación geográfica, el administrador de Azure Active Directory debe configurarse para los servidores principal y secundarios.</span><span class="sxs-lookup"><span data-stu-id="c53a4-148">When using Azure Active Directory with geo-replication, the Azure Active Directory administrator must be configured for both the primary and the secondary servers.</span></span> <span data-ttu-id="c53a4-149">Si un servidor no tiene un administrador de Azure Active Directory, los usuarios y los inicios de sesión de Azure Active Directory reciben un error "No se puede conectar con el servidor".</span><span class="sxs-lookup"><span data-stu-id="c53a4-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" to server error.</span></span>

> [!NOTE]
> <span data-ttu-id="c53a4-150">Los usuarios que no se basen en una cuenta de Azure AD (incluida la cuenta de administrador del servidor Azure SQL Server) no pueden crear usuarios basados en Azure AD porque no tienen permisos para validar los usuarios de la base de datos propuesta con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-150">Users that are not based on an Azure AD account (including the Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission to validate proposed database users with the Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="c53a4-151">Aprovisionamiento de un administrador de Azure Active Directory para el servidor de Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="c53a4-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="c53a4-152">Los dos procedimientos siguientes muestran cómo aprovisionar un administrador de Azure Active Directory para el servidor de Azure SQL Server en Azure Portal y mediante el uso de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c53a4-152">The following two procedures show you how to provision an Azure Active Directory administrator for your Azure SQL server in the Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="c53a4-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="c53a4-153">Azure portal</span></span>
1. <span data-ttu-id="c53a4-154">En [Azure Portal](https://portal.azure.com/), en la esquina superior derecha, haga clic en la conexión para desplegar una lista de posibles directorios de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c53a4-154">In the [Azure portal](https://portal.azure.com/), in the upper-right corner, click your connection to drop down a list of possible Active Directories.</span></span> <span data-ttu-id="c53a4-155">Elija el Active Directory correcto como el valor predeterminado de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-155">Choose the correct Active Directory as the default Azure AD.</span></span> <span data-ttu-id="c53a4-156">En este paso se vincula la asociación de la suscripción de Active Directory con Azure SQL Server, asegurándose de que la misma suscripción se use tanto para Azure AD como para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c53a4-156">This step links the subscription association with Active Directory with Azure SQL server making sure that the same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="c53a4-157">(El servidor de Azure SQL Server se puede hospedar en Azure SQL Database o Azure SQL Data Warehouse).</span><span class="sxs-lookup"><span data-stu-id="c53a4-157">(The Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="c53a4-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="c53a4-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="c53a4-159">En el área de la izquierda, seleccione **Servidores SQL Server** y su **servidor SQL Server** y, después, en la hoja **SQL Server**, haga clic en **Administrador de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-159">In the left banner select **SQL servers**, select your **SQL server**, and then in the **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="c53a4-160">En la hoja **Administrador de Active Directory**, haga clic en **Establecer administrador**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-160">In the **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="c53a4-161">![Seleccionar Active Directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="c53a4-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="c53a4-162">En la hoja **Agregar administrador**, busque un usuario, seleccione el usuario o grupo que convertirá en administrador y, después, haga clic en **Seleccionar**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-162">In the **Add admin** blade, search for a user, select the user or group to be an administrator, and then click **Select**.</span></span> <span data-ttu-id="c53a4-163">(En la hoja del administrador de Active Directory se muestran todos los miembros y grupos del directorio de Active Directory).</span><span class="sxs-lookup"><span data-stu-id="c53a4-163">(The Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="c53a4-164">No se pueden seleccionar los usuarios o grupos que aparecen atenuados porque no se admiten como administradores de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="c53a4-165">(Consulte la lista de administradores admitidos en la sección **Características y limitaciones de Azure AD** de [Uso de la autenticación de Azure Active Directory con SQL Database o SQL Data Warehouse](sql-database-aad-authentication.md)). El control de acceso basado en rol (RBAC) se aplica solo al portal y no se propaga a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c53a4-165">(See the list of supported admins in the **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only to the portal and is not propagated to SQL Server.</span></span>   
    <span data-ttu-id="c53a4-166">![Seleccionar administrador](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="c53a4-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="c53a4-167">En la parte superior de la hoja **Administrador de Active Directory**, haga clic en **GUARDAR**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-167">At the top of the **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="c53a4-168">![Guardar administrador](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="c53a4-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="c53a4-169">El proceso de cambio del el administrador puede tardar varios minutos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-169">The process of changing the administrator may take several minutes.</span></span> <span data-ttu-id="c53a4-170">El nuevo administrador aparece en el cuadro **Administrador de Active Directory** .</span><span class="sxs-lookup"><span data-stu-id="c53a4-170">Then the new administrator appears in the **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c53a4-171">Al configurar el nuevo administrador de Azure AD, el nuevo nombre del administrador (usuario o grupo) no puede estar en la base de datos maestra virtual como usuario de autenticación de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c53a4-171">When setting up the Azure AD admin, the new admin name (user or group) cannot already be present in the virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="c53a4-172">Si estuviera presente, se producirá un error en el programa de instalación del administrador de Azure AD y, por lo tanto, deberá revertir su creación e indicar que ese administrador (nombre) ya existe.</span><span class="sxs-lookup"><span data-stu-id="c53a4-172">If present, the Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="c53a4-173">Como dicho usuario de autenticación de SQL Server no forma parte de Azure AD, se producirá un error cada vez que intente conectarse al servidor mediante la autenticación de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-173">Since such a SQL Server authentication user is not part of the Azure AD, any effort to connect to the server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="c53a4-174">Si más adelante desea quitar un administrador, en la parte superior de la hoja **Administrador de Active Directory**, haga clic en **Quitar administrador** y, después, en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-174">To later remove an Admin, at the top of the **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="c53a4-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c53a4-175">PowerShell</span></span>
<span data-ttu-id="c53a4-176">Para ejecutar los cmdlets de PowerShell, necesitará tener Azure PowerShell instalado y en marcha.</span><span class="sxs-lookup"><span data-stu-id="c53a4-176">To run PowerShell cmdlets, you need to have Azure PowerShell installed and running.</span></span> <span data-ttu-id="c53a4-177">Para obtener información detallada, vea [Instalación y configuración de Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="c53a4-177">For detailed information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="c53a4-178">Para aprovisionar un administrador de Azure AD, debe ejecutar los siguientes comandos de Azure PowerShell:</span><span class="sxs-lookup"><span data-stu-id="c53a4-178">To provision an Azure AD admin, execute the following Azure PowerShell commands:</span></span>

* <span data-ttu-id="c53a4-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="c53a4-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="c53a4-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="c53a4-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="c53a4-181">Cmdlets que se usan para aprovisionar y administrar administradores de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c53a4-181">Cmdlets used to provision and manage Azure AD admin:</span></span>

| <span data-ttu-id="c53a4-182">Nombre del cmdlet</span><span class="sxs-lookup"><span data-stu-id="c53a4-182">Cmdlet name</span></span> | <span data-ttu-id="c53a4-183">Description</span><span class="sxs-lookup"><span data-stu-id="c53a4-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="c53a4-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c53a4-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c53a4-185">Aprovisiona un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="c53a4-186">(Debe ser de la suscripción actual).</span><span class="sxs-lookup"><span data-stu-id="c53a4-186">(Must be from the current subscription.)</span></span> |
| [<span data-ttu-id="c53a4-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c53a4-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c53a4-188">Quita un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="c53a4-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c53a4-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c53a4-190">Devuelve información sobre un administrador de Azure Active Directory configurado actualmente para el servidor de Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-190">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="c53a4-191">Use el comando de PowerShell get-help para ver más detalles de cada uno de estos comandos; por ejemplo, ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="c53a4-191">Use PowerShell command get-help to see more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="c53a4-192">El script siguiente aprovisiona un grupo de administradores de Azure AD denominado **DBA_Group** (id. de objeto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) para el servidor **demo_server**, en un grupo de recursos llamado **Group-23**:</span><span class="sxs-lookup"><span data-stu-id="c53a4-192">The following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for the **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="c53a4-193">El parámetro de entrada **DisplayName** acepta tanto el nombre para mostrar de Azure AD, como el nombre principal de usuario.</span><span class="sxs-lookup"><span data-stu-id="c53a4-193">The **DisplayName** input parameter accepts either the Azure AD display name or the User Principal Name.</span></span> <span data-ttu-id="c53a4-194">Por ejemplo, ``DisplayName="John Smith"`` y ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="c53a4-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="c53a4-195">En los grupos de Azure AD solo se admite el nombre para mostrar de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-195">For Azure AD groups only the Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="c53a4-196">El comando ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` de Azure PowerShell no le impedirá aprovisionar administradores de Azure AD para usuarios no admitidos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-196">The Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="c53a4-197">Es posible aprovisionar un usuario no admitido, pero no podrá conectarse a una base de datos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-197">An unsupported user can be provisioned, but can not connect to a database.</span></span> 
> 

<span data-ttu-id="c53a4-198">En el ejemplo siguiente se usa el elemento opcional **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="c53a4-198">The following example uses the optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="c53a4-199">El elemento **ObjectID** de Azure AD es necesario cuando el valor **DisplayName** no es único.</span><span class="sxs-lookup"><span data-stu-id="c53a4-199">The Azure AD **ObjectID** is required when the **DisplayName** is not unique.</span></span> <span data-ttu-id="c53a4-200">Para recuperar los valores **ObjectID** y **DisplayName**, use la sección Active Directory del Portal de Azure clásico y visualice las propiedades de un usuario o grupo.</span><span class="sxs-lookup"><span data-stu-id="c53a4-200">To retrieve the **ObjectID** and **DisplayName** values, use the Active Directory section of Azure Classic Portal, and view the properties of a user or group.</span></span>
> 

<span data-ttu-id="c53a4-201">En el ejemplo siguiente se devuelve información sobre el administrador actual de Azure AD para el servidor de Azure SQL Server:</span><span class="sxs-lookup"><span data-stu-id="c53a4-201">The following example returns information about the current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="c53a4-202">En el ejemplo siguiente se quita un administrador de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c53a4-202">The following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="c53a4-203">También puede aprovisionar un administrador de Azure Active Directory mediante las API de REST.</span><span class="sxs-lookup"><span data-stu-id="c53a4-203">You can also provision an Azure Active Directory Administrator by using the REST APIs.</span></span> <span data-ttu-id="c53a4-204">Para obtener más información, consulte [Service Management REST API Reference and Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="c53a4-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="c53a4-205">CLI</span><span class="sxs-lookup"><span data-stu-id="c53a4-205">CLI</span></span>  
<span data-ttu-id="c53a4-206">También puede aprovisionar un administrador de Azure AD mediante una llamada a los siguientes comandos de la CLI:</span><span class="sxs-lookup"><span data-stu-id="c53a4-206">You can also provision an Azure AD admin by calling the following CLI commands:</span></span>
| <span data-ttu-id="c53a4-207">Comando</span><span class="sxs-lookup"><span data-stu-id="c53a4-207">Command</span></span> | <span data-ttu-id="c53a4-208">Descripción</span><span class="sxs-lookup"><span data-stu-id="c53a4-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="c53a4-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="c53a4-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="c53a4-210">Aprovisiona un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="c53a4-211">(Debe ser de la suscripción actual).</span><span class="sxs-lookup"><span data-stu-id="c53a4-211">(Must be from the current subscription.)</span></span> |
|[<span data-ttu-id="c53a4-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="c53a4-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="c53a4-213">Quita un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="c53a4-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="c53a4-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="c53a4-215">Devuelve información sobre un administrador de Azure Active Directory configurado actualmente para el servidor de Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-215">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="c53a4-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="c53a4-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="c53a4-217">Actualiza el administrador de Azure Active Directory para un servidor Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-217">Updates the Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="c53a4-218">Para más información acerca de los comandos de la CLI, consulte [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="c53a4-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="c53a4-219">Configurar los equipos cliente.</span><span class="sxs-lookup"><span data-stu-id="c53a4-219">Configure your client computers</span></span>
<span data-ttu-id="c53a4-220">En todos los equipos cliente, desde el que las aplicaciones o los usuarios se conectan a Azure SQL Database o a Azure SQL Data Warehouse mediante identidades de Azure AD, debe instalar el software siguiente:</span><span class="sxs-lookup"><span data-stu-id="c53a4-220">On all client machines, from which your applications or users connect to Azure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install the following software:</span></span>

* <span data-ttu-id="c53a4-221">.NET Framework 4.6 o una versión posterior de [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="c53a4-222">La Biblioteca de autenticación de Azure Active Directory para SQL Server (**ADALSQL.DLL**) está disponible en varios idiomas (x86 y amd64) en el centro de descarga en la sección [Biblioteca de autenticación de Microsoft Active Directory para Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="c53a4-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from the download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="c53a4-223">Puede cumplir estos requisitos mediante:</span><span class="sxs-lookup"><span data-stu-id="c53a4-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="c53a4-224">La instalación de [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) o de [SQL Server Data Tools para Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) cumple los requisitos de .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="c53a4-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets the .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="c53a4-225">SSMS instala la versión x86 de **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-225">SSMS installs the x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="c53a4-226">SSMS instala la versión amd64 de **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-226">SSDT installs the amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="c53a4-227">La versión más reciente de Visual Studio de la sección [Descargas de Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) cumple con los requisitos de .NET Framework 4.6, pero no instala la versión amd64 necesaria de **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-227">The latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets the .NET Framework 4.6 requirement, but does not install the required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-to-azure-ad-identities"></a><span data-ttu-id="c53a4-228">Crear usuarios de base de datos independiente  en la base de datos y asignados a identidades de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-228">Create contained database users in your database mapped to Azure AD identities</span></span>

<span data-ttu-id="c53a4-229">La autenticación de Azure Active Directory requiere que los usuarios de la base de datos se creen como usuarios de bases de datos independientes.</span><span class="sxs-lookup"><span data-stu-id="c53a4-229">Azure Active Directory authentication requires database users to be created as contained database users.</span></span> <span data-ttu-id="c53a4-230">Un usuario de base de datos independiente basado en una identidad de Azure AD es un usuario de base de datos que no tiene un inicio de sesión en la base de datos maestra y que se asigna a una identidad en el directorio de Azure AD que está asociado a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in the master database, and which maps to an identity in the Azure AD directory that is associated with the database.</span></span> <span data-ttu-id="c53a4-231">La identidad de Azure AD puede ser una cuenta de usuario individual o un grupo.</span><span class="sxs-lookup"><span data-stu-id="c53a4-231">The Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="c53a4-232">Para más información sobre los usuarios de bases de datos independientes, vea [Usuarios de bases de datos independientes: cómo hacer que la base de datos sea portátil](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="c53a4-233">Los usuarios de base de datos (a excepción de los administradores) no se pueden crear mediante el portal.</span><span class="sxs-lookup"><span data-stu-id="c53a4-233">Database users (with the exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="c53a4-234">Los roles de RBAC no se propagan a SQL Data Warehouse, SQL Database o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c53a4-234">RBAC roles are not propagated to SQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="c53a4-235">Los roles de RBAC de Azure se utilizan para administrar los recursos de Azure y no se aplican a los permisos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-235">Azure RBAC roles are used for managing Azure Resources, and do not apply to database permissions.</span></span> <span data-ttu-id="c53a4-236">Por ejemplo, el rol **Colaborador de SQL Server** no concede acceso para conectarse a SQL Database o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-236">For example, the **SQL Server Contributor** role does not grant access to connect to the SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="c53a4-237">El permiso de acceso tiene que concederse directamente en la base de datos mediante instrucciones de Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="c53a4-237">The access permission must be granted directly in the database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="c53a4-238">Para crear un usuario de base de datos independiente basada en Azure AD (que no sea el administrador del servidor que es el propietario de la base de datos), conéctese a la base de datos con una identidad de Azure AD, como un usuario con al menos el permiso **ALTER ANY USER** .</span><span class="sxs-lookup"><span data-stu-id="c53a4-238">To create an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity, as a user with at least the **ALTER ANY USER** permission.</span></span> <span data-ttu-id="c53a4-239">Después, use la sintaxis de Transact-SQL siguiente:</span><span class="sxs-lookup"><span data-stu-id="c53a4-239">Then use the following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c53a4-240">*Azure_AD_principal_name* puede ser el nombre principal de usuario de un usuario de Azure AD, o el nombre para mostrar de un grupo de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-240">*Azure_AD_principal_name* can be the user principal name of an Azure AD user or the display name for an Azure AD group.</span></span>

<span data-ttu-id="c53a4-241">**Por ejemplo:** para crear un usuario de base de datos independiente que represente un usuario de dominio administrado o federado de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c53a4-241">**Examples:** To create a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c53a4-242">Para crear un usuario de base de datos contenido que represente un grupo de dominio federado o de Azure AD, proporcione el nombre para mostrar de un grupo de seguridad:</span><span class="sxs-lookup"><span data-stu-id="c53a4-242">To create a contained database user representing an Azure AD or federated domain group, provide the display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c53a4-243">Para crear un usuario de base de datos independiente que represente a una aplicación que se conecta mediante un token de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c53a4-243">To create a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="c53a4-244">No puede crear directamente un usuario a partir de una instancia de Azure Active Directory distinta a la que esté asociada a su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="c53a4-244">You cannot directly create a user from an Azure Active Directory other than the Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="c53a4-245">Sin embargo, se pueden agregar miembros de otras instancias de AD que sean usuarios importados en el Active Directory asociado (que se conocen como "usuarios externos") a un grupo de Active Directory del AD inquilino.</span><span class="sxs-lookup"><span data-stu-id="c53a4-245">However, members of other Active Directories that are imported users in the associated Active Directory (known as external users) can be added to an Active Directory group in the tenant Active Directory.</span></span> <span data-ttu-id="c53a4-246">Al crear un usuario de la base de datos independiente para ese grupo de AD, los usuarios del Active Directory externo pueden obtener acceso a SQL Database.</span><span class="sxs-lookup"><span data-stu-id="c53a4-246">By creating a contained database user for that AD group, the users from the external Active Directory can gain access to SQL Database.</span></span>   

<span data-ttu-id="c53a4-247">Para más información sobre la creación de usuarios de bases de datos independientes basados en identidades de Azure Active Directory, vea [CREAR USUARIO (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="c53a4-248">Si se quita el administrador de Azure Active Directory de Azure SQL Server, se impide que cualquier usuario de autenticación de Azure AD pueda conectarse al servidor.</span><span class="sxs-lookup"><span data-stu-id="c53a4-248">Removing the Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting to the server.</span></span> <span data-ttu-id="c53a4-249">Si es necesario, un administrador de SQL Database puede quitar manualmente a usuarios de Azure AD no utilizados.</span><span class="sxs-lookup"><span data-stu-id="c53a4-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="c53a4-250">Si recibe la notificación **Tiempo de espera de conexión agotado**, es posible que deba establecer el parámetro `TransparentNetworkIPResolution` de la cadena de conexión en False.</span><span class="sxs-lookup"><span data-stu-id="c53a4-250">If you receive a **Connection Timeout Expired**, you may need to set the `TransparentNetworkIPResolution` parameter of the connection string to false.</span></span> <span data-ttu-id="c53a4-251">Para más información, consulte [Connection timeout issue with .NET Framework 4.6.1 – TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/) (Problema de tiempo de espera de conexión agotado con .NET Framework 4.6.1: TransparentNetworkIPResolution).</span><span class="sxs-lookup"><span data-stu-id="c53a4-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="c53a4-252">Cuando se crea un usuario de base de datos, dicho usuario recibe el permiso **CONNECT** y puede conectarse a esa base de datos como un miembro con el rol **PUBLIC**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-252">When you create a database user, that user receives the **CONNECT** permission and can connect to that database as a member of the **PUBLIC** role.</span></span> <span data-ttu-id="c53a4-253">En un principio, los únicos permisos disponibles para el usuario son los permisos que se conceden al rol **PUBLIC** o cualquier otro permiso que se conceda a los grupos de Windows de los que sea miembro.</span><span class="sxs-lookup"><span data-stu-id="c53a4-253">Initially the only permissions available to the user are any permissions granted to the **PUBLIC** role, or any permissions granted to any Windows groups that they are a member of.</span></span> <span data-ttu-id="c53a4-254">Cuando se aprovisiona un usuario de base de datos de independiente basada en AD Azure, se pueden conceder permisos adicionales al usuario, del mismo modo que se conceden permisos a cualquier otro tipo de usuario.</span><span class="sxs-lookup"><span data-stu-id="c53a4-254">Once you provision an Azure AD-based contained database user, you can grant the user additional permissions, the same way as you grant permission to any other type of user.</span></span> <span data-ttu-id="c53a4-255">Normalmente, se conceden permisos a roles de base de datos y después se agregan usuarios a los roles.</span><span class="sxs-lookup"><span data-stu-id="c53a4-255">Typically grant permissions to database roles, and add users to roles.</span></span> <span data-ttu-id="c53a4-256">Para obtener más información, consulte [Conceptos básicos de los permisos de los motores de las bases de datos](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="c53a4-257">Para obtener más información sobre los roles especiales de SQL Database, consulte [Administrar bases de datos e inicios de sesión en Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="c53a4-258">Un usuario de dominio federado que se importa en un dominio de administración debe usar la identidad de dominio administrado.</span><span class="sxs-lookup"><span data-stu-id="c53a4-258">A federated domain user that is imported into a manage domain, must use the managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="c53a4-259">Los usuarios de Azure AD se marcan en los metadatos de la base de datos con el tipo E (EXTERNAL_USER) y en los grupos con el tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="c53a4-259">Azure AD users are marked in the database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="c53a4-260">Para obtener más información, consulte [sys.database_principals (Transact-SQL)](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-to-the-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="c53a4-261">Conexión con la base de datos de usuario o el almacenamiento de datos mediante SQL Server Management Studio o SQL Server Data Tools</span><span class="sxs-lookup"><span data-stu-id="c53a4-261">Connect to the user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="c53a4-262">Para confirmar que el administrador de Azure AD está correctamente configurado, conéctese a la base de datos **maestra** con la cuenta de administrador de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-262">To confirm the Azure AD administrator is properly set up, connect to the **master** database using the Azure AD administrator account.</span></span>
<span data-ttu-id="c53a4-263">Para aprovisionar un usuario de base de datos independiente basada en un directorio de Azure AD (que no sea el administrador del servidor que es el propietario de la base de datos), conéctese a la base de datos con una identidad de Azure AD que tenga acceso a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="c53a4-263">To provision an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity that has access to the database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c53a4-264">La autenticación de Azure Active Directory es compatible con [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) y [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) en Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="c53a4-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="c53a4-265">La versión de agosto de 2016 de SSMS también incluye compatibilidad con la autenticación universal de Active Directory, que permite a los administradores requerir Multi-Factor Authentication con una llamada de teléfono, un mensaje de texto, tarjetas inteligentes con PIN o una notificación de aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="c53a4-265">The August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators to require Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-to-connect-using-ssms-or-ssdt"></a><span data-ttu-id="c53a4-266">Uso de una identidad de Azure AD para conectarse mediante SQL Server Management Studio o SQL Server Database Tools</span><span class="sxs-lookup"><span data-stu-id="c53a4-266">Using an Azure AD identity to connect using SSMS or SSDT</span></span>  

<span data-ttu-id="c53a4-267">Los procedimientos siguientes muestran cómo conectarse a una instancia de SQL Database con una identidad de Azure AD mediante SQL Server Management Studio o SQL Server Database Tools.</span><span class="sxs-lookup"><span data-stu-id="c53a4-267">The following procedures show you how to connect to a SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="c53a4-268">Autenticación integrada de Active Directory</span><span class="sxs-lookup"><span data-stu-id="c53a4-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="c53a4-269">Use este método si tiene la sesión iniciada en Windows con sus credenciales de Azure Active Directory desde un dominio federado.</span><span class="sxs-lookup"><span data-stu-id="c53a4-269">Use this method if you are logged in to Windows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="c53a4-270">Inicie Management Studio o Data Tools y, en el cuadro de diálogo **Conectar con el servidor** (o **Conectarse al motor de base de datos**), en el cuadro **Autenticación**, seleccione **Integrada de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-270">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="c53a4-271">No se necesita ni se puede especificar una contraseña para la conexión, ya que aparecen las credenciales existentes.</span><span class="sxs-lookup"><span data-stu-id="c53a4-271">No password is needed or can be entered because your existing credentials will be presented for the connection.</span></span>   

    ![Selección de autenticación integrada de Active Directory][11]
2. <span data-ttu-id="c53a4-273">Haga clic en el botón **Opciones** y, en la página **Propiedades de conexión**, en el cuadro **Conectar con base de datos**, escriba el nombre de la base de datos de usuarios a la que quiere conectarse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-273">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="c53a4-274">(La opción **Nombre de dominio o ID de inquilino de AD** solo se admite para las opciones **Universal con conexión MFA**, en caso contrario se atenúa).</span><span class="sxs-lookup"><span data-stu-id="c53a4-274">(The **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Selección del nombre de la base de datos][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="c53a4-276">Autenticación de contraseña de Active Directory</span><span class="sxs-lookup"><span data-stu-id="c53a4-276">Active Directory password authentication</span></span>

<span data-ttu-id="c53a4-277">Use este método al conectarse con un nombre de entidad de seguridad de Azure AD mediante el dominio administrado de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-277">Use this method when connecting with an Azure AD principal name using the Azure AD managed domain.</span></span> <span data-ttu-id="c53a4-278">También puede utilizarlo para la cuenta federada sin acceso al dominio, por ejemplo, cuando se trabaja de forma remota.</span><span class="sxs-lookup"><span data-stu-id="c53a4-278">You can also use it for federated account without access to the domain, for example when working remotely.</span></span>

<span data-ttu-id="c53a4-279">Use este método si tiene la sesión iniciada en Windows con las credenciales de un dominio que no está federado con Azure, o cuando utiliza la autenticación de Azure AD mediante Azure AD basado en el dominio inicial o del cliente.</span><span class="sxs-lookup"><span data-stu-id="c53a4-279">Use this method if you are logged in to Windows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on the initial or the client domain.</span></span>

1. <span data-ttu-id="c53a4-280">Inicie Management Studio o Data Tools y, en el cuadro de diálogo **Conectar con el servidor** (o **Conectarse al motor de base de datos**), en el cuadro **Autenticación**, seleccione **Contraseña de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="c53a4-280">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="c53a4-281">En el cuadro **Nombre de usuario**, escriba el nombre de usuario de Azure Active Directory con el formato **username@domain.com**. Debe tratarse de una cuenta de Azure Active Directory o una cuenta de un dominio federado con el directorio de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c53a4-281">In the **User name** box, type your Azure Active Directory user name in the format **username@domain.com**. This must be an account from the Azure Active Directory or an account from a domain federate with the Azure Active Directory.</span></span>
3. <span data-ttu-id="c53a4-282">En el cuadro **Contraseña** , escriba la contraseña de usuario de la cuenta de Azure Active Directory o de la cuenta de dominio federado.</span><span class="sxs-lookup"><span data-stu-id="c53a4-282">In the **Password** box, type your user password for the Azure Active Directory account or federated domain account.</span></span>

    ![Selección de autenticación de contraseña de Active Directory][12]
4. <span data-ttu-id="c53a4-284">Haga clic en el botón **Opciones** y, en la página **Propiedades de conexión**, en el cuadro **Conectar con base de datos**, escriba el nombre de la base de datos de usuarios a la que quiere conectarse.</span><span class="sxs-lookup"><span data-stu-id="c53a4-284">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="c53a4-285">(Consulte el gráfico que aparece en la opción anterior).</span><span class="sxs-lookup"><span data-stu-id="c53a4-285">(See the graphic in the previous option.)</span></span>

## <a name="using-an-azure-ad-identity-to-connect-from-a-client-application"></a><span data-ttu-id="c53a4-286">Uso de una identidad de Azure AD para conectarse desde una aplicación cliente</span><span class="sxs-lookup"><span data-stu-id="c53a4-286">Using an Azure AD identity to connect from a client application</span></span>

<span data-ttu-id="c53a4-287">Los procedimientos siguientes muestran cómo conectarse a una instancia de SQL Database con una identidad de Azure AD desde una aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="c53a4-287">The following procedures show you how to connect to a SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="c53a4-288">Autenticación integrada de Active Directory</span><span class="sxs-lookup"><span data-stu-id="c53a4-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="c53a4-289">Para usar la autenticación integrada de Windows, la instancia de Active Directory del dominio se debe federar con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c53a4-289">To use integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="c53a4-290">La aplicación cliente (o un servicio) que se conecte a la base de datos debe ejecutarse en un equipo unido a un dominio con las credenciales de dominio de un usuario.</span><span class="sxs-lookup"><span data-stu-id="c53a4-290">Your client application (or a service) connecting to the database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="c53a4-291">Para conectarse a una base de datos mediante autenticación integrada y una identidad de Azure AD, la palabra clave Authentication de la cadena de conexión de la base de datos debe establecerse como Active Directory Integrated.</span><span class="sxs-lookup"><span data-stu-id="c53a4-291">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword in the database connection string must be set to Active Directory Integrated.</span></span> <span data-ttu-id="c53a4-292">En el siguiente ejemplo de código de C# se usa ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="c53a4-292">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="c53a4-293">No se admite la palabra clave ``Integrated Security=True`` de la cadena de conexión para conectarse a Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="c53a4-293">The connection string keyword ``Integrated Security=True`` is not supported for connecting to Azure SQL Database.</span></span> <span data-ttu-id="c53a4-294">Al crear una conexión ODBC tendrá que quitar espacios y establecer la autenticación en 'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="c53a4-294">When making an ODBC connection, you will need to remove spaces and set Authentication to 'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="c53a4-295">Autenticación de contraseña de Active Directory</span><span class="sxs-lookup"><span data-stu-id="c53a4-295">Active Directory password authentication</span></span>

<span data-ttu-id="c53a4-296">Para conectarse a una base de datos mediante autenticación integrada y una identidad de Azure AD, la palabra clave Authentication debe establecerse como Active Directory Password.</span><span class="sxs-lookup"><span data-stu-id="c53a4-296">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword must be set to Active Directory Password.</span></span> <span data-ttu-id="c53a4-297">La cadena de conexión debe contener las palabras clave y los valores User ID/UID y Password/PWD.</span><span class="sxs-lookup"><span data-stu-id="c53a4-297">The connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="c53a4-298">En el siguiente ejemplo de código de C# se usa ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="c53a4-298">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="c53a4-299">Puede encontrar más información sobre los métodos de autenticación de Azure AD con los ejemplos de código de demostración que se encuentran disponibles en la [demostración de la autenticación de Azure AD de GitHub](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="c53a4-299">Learn more about Azure AD authentication methods using the demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="c53a4-300">Token de Azure AD</span><span class="sxs-lookup"><span data-stu-id="c53a4-300">Azure AD token</span></span>
<span data-ttu-id="c53a4-301">Este método de autenticación permite a los servicios de nivel intermedio conectarse a Azure SQL Database o Azure SQL Data Warehouse mediante la obtención de un token de Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="c53a4-301">This authentication method allows middle-tier services to connect to Azure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="c53a4-302">Permite escenarios sofisticados, incluida la autenticación basada en certificados.</span><span class="sxs-lookup"><span data-stu-id="c53a4-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="c53a4-303">Para usar la autenticación de token de Azure AD tiene que realizar cuatro pasos básicos:</span><span class="sxs-lookup"><span data-stu-id="c53a4-303">You must complete four basic steps to use Azure AD token authentication:</span></span>

1. <span data-ttu-id="c53a4-304">Registrar la aplicación con Azure Active Directory y obtener el identificador de cliente para el código.</span><span class="sxs-lookup"><span data-stu-id="c53a4-304">Register your application with Azure Active Directory and get the client id for your code.</span></span> 
2. <span data-ttu-id="c53a4-305">Crear un usuario de base de datos que represente a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c53a4-305">Create a database user representing the application.</span></span> <span data-ttu-id="c53a4-306">(Completado anteriormente en el paso 6).</span><span class="sxs-lookup"><span data-stu-id="c53a4-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="c53a4-307">Crear un certificado en el equipo cliente que va ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c53a4-307">Create a certificate on the client computer runs the application.</span></span>
4. <span data-ttu-id="c53a4-308">Agregar el certificado como una clave para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c53a4-308">Add the certificate as a key for your application.</span></span>

<span data-ttu-id="c53a4-309">Cadena de conexión de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="c53a4-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="c53a4-310">Para más información, consulte el [blog de seguridad de SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="c53a4-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="c53a4-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="c53a4-311">sqlcmd</span></span>

<span data-ttu-id="c53a4-312">Las instrucciones siguientes permiten conectar con la versión 13.1 de sqlcmd, que está disponible en el [Centro de descarga](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="c53a4-312">The following statements, connect using version 13.1 of sqlcmd, which is available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="c53a4-313">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="c53a4-313">Next steps</span></span>
- <span data-ttu-id="c53a4-314">Para obtener información general de acceso y control en SQL Database, consulte [Control de acceso a Azure SQL Database](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="c53a4-315">Para obtener información general de los inicios de sesión, usuarios y roles de base de datos de SQL Database, consulte [Control y concesión de acceso a bases de datos](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="c53a4-316">Para más información acerca de las entidades de seguridad de bases de datos, consulte [Entidades de seguridad](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="c53a4-317">Para más información acerca de los roles de base de datos, consulte [Roles de nivel de base de datos](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="c53a4-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="c53a4-318">Para más información general acerca de las reglas de firewall de SQL Database, consulte [Introducción a las reglas de firewall de Azure SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="c53a4-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png


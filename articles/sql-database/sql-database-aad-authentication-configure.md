---
title: "autenticación de Azure Active Directory aaaConfigure - SQL | Documentos de Microsoft"
description: "Obtenga información acerca de cómo tooconnect tooSQL base de datos y almacenamiento de datos de SQL mediante autenticación de Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="a1fd3-103">Configuración y administración de la autenticación de Azure Active Directory con SQL Database o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="a1fd3-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="a1fd3-104">Este artículo muestra cómo toocreate rellenar Azure AD y, a continuación, usar Azure AD con la base de datos de SQL Azure y almacenamiento de datos de SQL.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="a1fd3-105">Para ver un resumen, consulte [Autenticación con Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="a1fd3-106">Conexión tooSQL servidor se ejecuta en una VM de Azure no es compatible con una cuenta de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="a1fd3-107">Utilice en su lugar una cuenta de Active Directory del dominio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="a1fd3-108">Crear y rellenar una instancia de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="a1fd3-109">Cree una instancia de Azure AD y rellénela con usuarios y grupos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="a1fd3-110">Azure AD puede ser el dominio administrado de Azure AD del dominio inicial. Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="a1fd3-111">Azure AD también puede ser un local Active Directory Domain Services que se federa con hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="a1fd3-112">Para obtener más información, consulte [integrar las identidades locales con Azure Active Directory](../active-directory/active-directory-aadconnect.md), [agregar su propios tooAzure de nombre de dominio AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure ahora admite la federación con Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [administrar su directorio Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [administrar Azure AD mediante Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), y [identidad híbrida Puertos y protocolos necesarios](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="a1fd3-113">Opcional: Asociar o cambiar Hola active directory que está asociada actualmente con la suscripción de Azure</span><span class="sxs-lookup"><span data-stu-id="a1fd3-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="a1fd3-114">tooassociate la base de datos con el directorio de hello Azure AD para su organización, asegúrese de directorio Hola un directorio de confianza para base de datos de hello hospedaje de hello suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="a1fd3-115">Para obtener más información, consulte [Cómo se asocian las suscripciones a Azure con Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="a1fd3-116">**Información adicional:** cada suscripción de Azure tiene una relación de confianza con una instancia de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="a1fd3-117">Esto significa que confía en ese directorio tooauthenticate usuarios, servicios y dispositivos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="a1fd3-118">Varias suscripciones pueden confiar Hola mismo directorio, pero una suscripción confía en un único directorio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="a1fd3-119">Puede ver qué directorio confía en su suscripción bajo hello **configuración** ficha en [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="a1fd3-120">Esta relación de confianza que tiene una suscripción con un directorio es distinto de la relación de Hola que tiene una suscripción con todos los demás recursos de Azure (sitios Web, bases de datos etc.), que son más parecidos a los recursos secundarios de una suscripción.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="a1fd3-121">Si una suscripción expira, acceder a toothose otros recursos asociados con la suscripción de hello también se detiene.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="a1fd3-122">Pero Hola directorio permanece en Azure, y puede asociar otra suscripción a ese directorio y continuar a los usuarios de toomanage Hola directorio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="a1fd3-123">Para más información sobre recursos, consulte [Descripción de acceso a los recursos de Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="a1fd3-124">Hello procedimientos siguientes muestran cómo toochange Hola asocia directorio para una suscripción determinada.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="a1fd3-125">Conectar tooyour [Portal clásico de Azure](https://manage.windowsazure.com/) mediante el Administrador de una suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="a1fd3-126">En el encabezado de la izquierda hello, seleccione **configuración**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="a1fd3-127">Las suscripciones aparecen en la pantalla de configuración de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="a1fd3-128">Si Hola deseado suscripción no aparece, haga clic en **suscripciones** en la parte superior de hello, lista desplegable hello **filtro por directorio** cuadro y seleccione directorio de Hola que contiene las suscripciones y, a continuación, haga clic en **Aplicar**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![seleccionar suscripción][4]
4. <span data-ttu-id="a1fd3-130">Hola **configuración** área, haga clic en la suscripción y, a continuación, haga clic en **editar directorio** final Hola de página Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![portal de configuración de ad][5]
5. <span data-ttu-id="a1fd3-132">Hola **editar directorio** cuadro, seleccione hello Azure Active Directory que está asociado a su almacén de datos de SQL o SQL Server y, a continuación, haga clic en hello flecha siguiente.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![selección de editar directorio][6]
6. <span data-ttu-id="a1fd3-134">Hola **confirmar** directorio cuadro de diálogo de asignación, confirme que "**se quitarán todos los coadministradores.**"</span><span class="sxs-lookup"><span data-stu-id="a1fd3-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![confirmación de editar directorio][7]
7. <span data-ttu-id="a1fd3-136">Haga clic en el portal de hello comprobación tooreload Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="a1fd3-137">Cuando cambie el directorio de hello, coadministradores tooall de acceso, usuarios de Azure AD y los grupos y se quitan usuarios de recurso basado en el directorio y ya no tienen acceso toothis suscripción o a sus recursos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="a1fd3-138">Solo, como un administrador de servicios, puede configurar el acceso para las entidades de seguridad basados en el nuevo directorio de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="a1fd3-139">Este cambio puede tardar una cantidad considerable de recursos de tooall toopropagate de tiempo.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="a1fd3-140">Cambiando el directorio de hello, también cambios hello Administrador de Azure AD para la base de datos SQL y almacenamiento de datos de SQL y denegar el acceso de la base de datos para los usuarios de Azure AD existentes.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="a1fd3-141">Hola Azure AD, administrador debe restablecer (tal y como se describe a continuación) y Azure nuevo se deben crear usuarios de AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="a1fd3-142">Creación de un administrador de Azure AD para Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="a1fd3-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="a1fd3-143">Cada servidor de SQL Azure (que hospeda una base de datos SQL o almacenamiento de datos SQL) se inicia con una cuenta de administrador de servidor único que es administrador de Hola de hello todo Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="a1fd3-144">Se debe crear un segundo administrador de SQL Server que sea una cuenta de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="a1fd3-145">Esta entidad de seguridad se crea como un usuario de base de datos independiente en la base de datos maestra Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="a1fd3-146">Como administradores, cuentas de administrador del servidor de hello son miembros de hello **db_owner** rol en todos los usuarios de base de datos y escriba cada base de datos de usuario como hello **dbo** usuario.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="a1fd3-147">Para obtener más información acerca de las cuentas de administrador de servidor hello, consulte [administrar bases de datos e inicios de sesión en la base de datos de SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="a1fd3-148">Al usar Azure Active Directory con replicación geográfica, Administrador de Azure Active Directory de hello debe configurarse para hello principal y los servidores secundarios de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="a1fd3-149">Si un servidor no tiene un administrador de Azure Active Directory, a continuación, los usuarios e inicios de sesión de Azure Active Directory reciben un error de tooserver "No se puede conectar".</span><span class="sxs-lookup"><span data-stu-id="a1fd3-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="a1fd3-150">Los usuarios que no se basan en una cuenta de Azure AD (incluida la cuenta de administrador de servidor de SQL Azure de hello), no se puede crear usuarios basados en AD de Azure, porque no tienen toovalidate permiso propuesto a los usuarios de base de datos con hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="a1fd3-151">Aprovisionamiento de un administrador de Azure Active Directory para el servidor de Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="a1fd3-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="a1fd3-152">Hola dos procedimientos siguientes muestra cómo tooprovision un administrador de Azure Active Directory para el servidor de SQL Azure en hello portal de Azure y mediante el uso de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="a1fd3-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="a1fd3-153">Azure portal</span></span>
1. <span data-ttu-id="a1fd3-154">Hola [portal de Azure](https://portal.azure.com/), en Hola esquina superior derecha, haga clic en el toodrop de conexión hacia abajo en una lista de posibles directorios de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="a1fd3-155">Elija Hola corregir Active Directory como valor predeterminado de hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="a1fd3-156">Este paso vínculos Hola asociación de la suscripción con Active Directory con el servidor de SQL Azure asegurándose de que Hola misma suscripción se usa para Azure AD y SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="a1fd3-157">(servidor de SQL Azure Hola puede hospedar base de datos de SQL Azure o almacenamiento de datos de SQL Azure.)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="a1fd3-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="a1fd3-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="a1fd3-159">Hola izquierda Seleccione pancarta **servidores SQL Server**, seleccione la **SQL server**y, a continuación, en hello **SQL Server** hoja, haga clic en **Administrador de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="a1fd3-160">Hola **Administrador de Active Directory** hoja, haga clic en **Set admin**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="a1fd3-161">![Seleccionar Active Directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="a1fd3-162">Hola **Agregar administrador** hoja, buscar un usuario, usuario seleccione Hola o toobe un administrador de grupo y, a continuación, haga clic en **seleccione**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="a1fd3-163">(hoja de administración de Active Directory de hello muestra todos los miembros y grupos de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="a1fd3-164">No se pueden seleccionar los usuarios o grupos que aparecen atenuados porque no se admiten como administradores de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="a1fd3-165">(Ver lista de Hola de administradores admitidos en hello **características de Azure AD y limitaciones** sección de [Use Azure autenticación de Active Directory para la autenticación con la base de datos SQL o almacenamiento de datos de SQL](sql-database-aad-authentication.md).) Control de acceso basado en roles (RBAC) aplica solo toohello portal y no es propagado tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="a1fd3-166">![Seleccionar administrador](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="a1fd3-167">En parte superior de Hola de hello **Administrador de Active Directory** hoja, haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="a1fd3-168">![Guardar administrador](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="a1fd3-169">proceso de Hello del cambio de administrador de hello puede tardar varios minutos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="a1fd3-170">Aparecerá el nuevo administrador de Hola Hola **Administrador de Active Directory** cuadro.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="a1fd3-171">Al configurar el Administrador de hello Azure AD, Hola nuevo nombre de administrador (usuario o grupo) no puede estar ya presente en la base de datos maestra Hola virtual como un usuario de autenticación de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="a1fd3-172">Si está presente, se producirá un error en el programa de instalación de administración de hello Azure AD; revertir su creación y que indica que este tipo administrador (nombre) ya existe.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="a1fd3-173">Puesto que este tipo un usuario de autenticación de SQL Server no forma parte del programa Hola a Azure AD, se produce un error en cualquier servidor de toohello de tooconnect esfuerzo mediante autenticación de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="a1fd3-174">toolater quitar un administrador, en parte superior de Hola de hello **Administrador de Active Directory** hoja, haga clic en **quitar administrador**y, a continuación, haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="a1fd3-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a1fd3-175">PowerShell</span></span>
<span data-ttu-id="a1fd3-176">toorun cmdlets de PowerShell, necesita toohave PowerShell de Azure instalada y en ejecución.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="a1fd3-177">Para obtener información detallada, vea [cómo tooinstall y configurar Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="a1fd3-178">tooprovision un administrador de Azure AD, ejecute hello siga los comandos de PowerShell de Azure:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="a1fd3-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="a1fd3-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="a1fd3-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="a1fd3-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="a1fd3-181">Cmdlets usa tooprovision y administrar la administración de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="a1fd3-182">Nombre del cmdlet</span><span class="sxs-lookup"><span data-stu-id="a1fd3-182">Cmdlet name</span></span> | <span data-ttu-id="a1fd3-183">Description</span><span class="sxs-lookup"><span data-stu-id="a1fd3-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="a1fd3-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="a1fd3-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="a1fd3-185">Aprovisiona un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="a1fd3-186">(Debe ser de la suscripción actual de hello).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="a1fd3-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="a1fd3-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="a1fd3-188">Quita un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="a1fd3-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="a1fd3-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="a1fd3-190">Devuelve información acerca de un administrador de Active Directory de Azure configurada actualmente para el servidor de SQL Azure de Hola o almacenamiento de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="a1fd3-191">Usar PowerShell comando get-help toosee se ofrecen más detalles para cada uno de estos comandos, por ejemplo ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="a1fd3-192">Hola siguiendo las disposiciones de secuencia de comandos con nombre de un grupo de administradores de Azure AD **DBA_Group** (Id. de objeto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) para hello **demo_server** servidor en un grupo de recursos denominado **23 de grupo** :</span><span class="sxs-lookup"><span data-stu-id="a1fd3-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="a1fd3-193">Hola **DisplayName** parámetro de entrada acepta el nombre para mostrar hello Azure AD u Hola nombre Principal de usuario.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="a1fd3-194">Por ejemplo, ``DisplayName="John Smith"`` y ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="a1fd3-195">Para hello solo de grupos de AD de Azure AD de Azure se admite el nombre para mostrar.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="a1fd3-196">Hola comando de PowerShell de Azure ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` no le impide desde el aprovisionamiento de administradores de Azure AD para que los usuarios no admitidos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="a1fd3-197">Un usuario no compatible se puede aprovisionar, pero no puede conectar la base de datos de tooa.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="a1fd3-198">Hello en el ejemplo siguiente se usa Hola opcional **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="a1fd3-199">Hello Azure AD **ObjectID** es necesaria cuando hello **DisplayName** no es único.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="a1fd3-200">Hola tooretrieve **ObjectID** y **DisplayName** valores, utilice Hola sección de Active Directory del Portal de Azure clásico y ver propiedades de Hola de un usuario o grupo.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="a1fd3-201">Hola siguiente ejemplo devuelve información acerca de Hola actual de Azure AD, Administrador de servidor de SQL Azure:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="a1fd3-202">Hola de ejemplo siguiente quita un administrador de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="a1fd3-203">También puede aprovisionar un administrador de Azure Active Directory mediante las API de REST de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="a1fd3-204">Para obtener más información, consulte [Service Management REST API Reference and Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="a1fd3-205">CLI</span><span class="sxs-lookup"><span data-stu-id="a1fd3-205">CLI</span></span>  
<span data-ttu-id="a1fd3-206">También puede aprovisionar un administrador de Azure AD mediante la llamada Hola siga los comandos CLI:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="a1fd3-207">Comando</span><span class="sxs-lookup"><span data-stu-id="a1fd3-207">Command</span></span> | <span data-ttu-id="a1fd3-208">Descripción</span><span class="sxs-lookup"><span data-stu-id="a1fd3-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="a1fd3-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="a1fd3-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="a1fd3-210">Aprovisiona un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="a1fd3-211">(Debe ser de la suscripción actual de hello).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="a1fd3-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="a1fd3-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="a1fd3-213">Quita un administrador de Azure Active Directory para Azure SQL Server o para Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="a1fd3-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="a1fd3-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="a1fd3-215">Devuelve información acerca de un administrador de Active Directory de Azure configurada actualmente para el servidor de SQL Azure de Hola o almacenamiento de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="a1fd3-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="a1fd3-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="a1fd3-217">Actualiza el Administrador de Active Directory de Hola para un servidor de SQL Azure o el almacenamiento de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="a1fd3-218">Para más información acerca de los comandos de la CLI, consulte [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="a1fd3-219">Configurar los equipos cliente.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-219">Configure your client computers</span></span>
<span data-ttu-id="a1fd3-220">En todos los equipos cliente, desde el que las aplicaciones o los usuarios conectan tooAzure base de datos SQL o almacenamiento de datos de SQL Azure mediante identidades de Azure AD, debe instalar Hola siguiente software:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="a1fd3-221">.NET Framework 4.6 o una versión posterior de [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="a1fd3-222">Biblioteca de autenticación de Azure Active Directory para SQL Server (**ADALSQL. DLL**) está disponible en varios idiomas (x86 y amd64) desde el centro de descarga de hello en [Microsoft biblioteca de autenticación de Active Directory para Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="a1fd3-223">Puede cumplir estos requisitos mediante:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="a1fd3-224">Instalar cualquiera [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) o [SQL Server Data Tools para Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) cumple Hola requisito de .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="a1fd3-225">SSMS instala la versión de Hola x86 de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="a1fd3-226">SSDT instala la versión de Hola amd64 de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="a1fd3-227">Hola más reciente de Visual Studio desde [descargas de Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) cumple el requisito de hello 4.6 de .NET Framework, pero no instala Hola amd64 necesario versión de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="a1fd3-228">Crear usuarios de base de datos independiente en la base de datos asignado tooAzure identidades de AD</span><span class="sxs-lookup"><span data-stu-id="a1fd3-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="a1fd3-229">Autenticación de Azure Active Directory requiere toobe de los usuarios de base de datos creado como usuarios de base de datos independiente.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="a1fd3-230">Un usuario de base de datos independiente en función de una identidad de Azure AD, es un usuario de base de datos que no tiene un inicio de sesión en la base de datos maestra de Hola y qué identidad de tooan mapas en Hola directorio de Azure AD que está asociado a la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="a1fd3-231">Hola identidad de Azure AD puede ser una cuenta de usuario individual o un grupo.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="a1fd3-232">Para más información sobre los usuarios de bases de datos independientes, vea [Usuarios de bases de datos independientes: cómo hacer que la base de datos sea portátil](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="a1fd3-233">Los usuarios de base de datos (con excepción de Hola de administradores) no se puede crear mediante el portal.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="a1fd3-234">Los roles RBAC no son propagado tooSQL servidor, base de datos SQL o almacenamiento de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="a1fd3-235">Las funciones de RBAC Azure se utilizan para administrar recursos de Azure y no aplican permisos toodatabase.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="a1fd3-236">Por ejemplo, hello **SQL Server colaborador** rol no concede acceso tooconnect toohello base de datos SQL o almacenamiento de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="a1fd3-237">debe tener permiso de acceso de Hello directamente en la base de datos de hello mediante instrucciones Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="a1fd3-238">toocreate un usuario de base de datos de contenido basados en AD Azure (distinto de hello administrador del servidor que pertenece la base de datos de hello), conectar la base de datos de toohello con una identidad de Azure AD, como un usuario con al menos Hola **ALTER ANY USER** permiso.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="a1fd3-239">A continuación, usar hello la sintaxis de Transact-SQL:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="a1fd3-240">*Azure_AD_principal_name* puede ser el nombre principal de usuario de Hola de un nombre para mostrar Azure AD Hola o de usuario para un grupo de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="a1fd3-241">**Ejemplos:** toocreate un usuario de base de datos independiente que representa un anuncio de Azure federados o administrados de usuario de dominio:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="a1fd3-242">toocreate un usuario de base de datos independiente que representa un anuncio de Azure o federado grupo de dominio, proporcionar Hola nombre para mostrar de un grupo de seguridad:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="a1fd3-243">toocreate un usuario de base de datos independiente que represente una aplicación que se conecte mediante un símbolo (token) de Azure AD:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="a1fd3-244">No se puede crear directamente un usuario de Azure Active Directory que no sea de hello Azure Active Directory que está asociada a su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="a1fd3-245">Sin embargo, los miembros de otros directorios de Active Directory que son los usuarios importados en hello asociados Active Directory (conocidos como los usuarios externos) se pueden agregar grupo de Active Directory de tooan en Active Directory del inquilino de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="a1fd3-246">Mediante la creación de un usuario de base de datos independiente para ese grupo de AD, hello los usuarios de hello externo de Active Directory pueden tener acceso tooSQL base de datos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="a1fd3-247">Para más información sobre la creación de usuarios de bases de datos independientes basados en identidades de Azure Active Directory, vea [CREAR USUARIO (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="a1fd3-248">Quitar Administrador de Azure Active Directory de Hola de Azure SQL server impide que cualquier usuario de autenticación de Azure AD conectar el servidor de toohello.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="a1fd3-249">Si es necesario, un administrador de SQL Database puede quitar manualmente a usuarios de Azure AD no utilizados.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="a1fd3-250">Si recibe un **tiempo de espera de conexión expirado**, puede que necesite tooset hello `TransparentNetworkIPResolution` parámetro de toofalse de cadena de conexión de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="a1fd3-251">Para más información, consulte [Connection timeout issue with .NET Framework 4.6.1 – TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/) (Problema de tiempo de espera de conexión agotado con .NET Framework 4.6.1: TransparentNetworkIPResolution).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="a1fd3-252">Cuando se crea un usuario de base de datos, ese usuario recibe hello **conectar** permiso y se puede conectar la base de datos de toothat como miembro del programa Hola a **público** rol.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="a1fd3-253">Hola inicialmente solo permisos de usuario de toohello disponibles son los permisos conceden toohello **público** rol o los permisos conceden tooany grupos de Windows que son miembros de.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="a1fd3-254">Una vez se aprovisiona un usuario de base de datos de contenido basados en AD Azure, puede conceder permisos adicionales del usuario de hello, Hola de igual forma en que se concede permiso tooany otro tipo de usuario.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="a1fd3-255">Normalmente conceder permisos toodatabase roles y agregar usuarios tooroles.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="a1fd3-256">Para obtener más información, consulte [Conceptos básicos de los permisos de los motores de las bases de datos](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="a1fd3-257">Para obtener más información sobre los roles especiales de SQL Database, consulte [Administrar bases de datos e inicios de sesión en Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="a1fd3-258">Un usuario de dominio federado que se importa en un dominio de administrar, debe usar identidad de dominio de hello administrado.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="a1fd3-259">Usuarios de Azure AD se marcan en los metadatos de la base de datos de hello con tipo E (EXTERNAL_USER) y para grupos con tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="a1fd3-260">Para obtener más información, consulte [sys.database_principals (Transact-SQL)](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="a1fd3-261">Conectar almacenamiento de base de datos o datos de usuario de toohello mediante SSMS o SSDT</span><span class="sxs-lookup"><span data-stu-id="a1fd3-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="a1fd3-262">Administrador de hello Azure AD tooconfirm está configurado correctamente, conéctese toohello **maestro** base de datos mediante la cuenta de administrador de hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="a1fd3-263">tooprovision un usuario de base de datos de contenido basados en AD Azure (distinto de hello administrador del servidor que pertenece la base de datos de hello), conectar la base de datos de toohello con una identidad de Azure AD que tenga la base de datos de access toohello.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a1fd3-264">La autenticación de Azure Active Directory es compatible con [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) y [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) en Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="a1fd3-265">Hola versión de agosto de 2016 de SSMS también incluye compatibilidad para Universal autenticación de Active Directory, que permite a los administradores toorequire la autenticación multifactor usando una llamada de teléfono, mensaje de texto, las tarjetas inteligentes con pin o la notificación de aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="a1fd3-266">Usar un tooconnect de identidad de Azure AD con SSMS o SSDT</span><span class="sxs-lookup"><span data-stu-id="a1fd3-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="a1fd3-267">Hola procedimientos siguientes muestra cómo tooconnect tooa SQL de base de datos con una identidad de Azure AD mediante SQL Server Management Studio o las herramientas de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="a1fd3-268">Autenticación integrada de Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1fd3-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="a1fd3-269">Utilice este método si se registran en tooWindows con sus credenciales de Azure Active Directory de un dominio federado.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="a1fd3-270">Inicie Management Studio o herramientas de datos y en hello **conectar tooServer** (o **conectar tooDatabase motor**) cuadro de diálogo hello **autenticación** , seleccione **Integrada en active Directory -**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="a1fd3-271">Ninguna contraseña es necesaria o se puede especificar porque sus credenciales existentes se presentará para conexión de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![Selección de autenticación integrada de Active Directory][11]
2. <span data-ttu-id="a1fd3-273">Haga clic en hello **opciones** botón y en hello **propiedades de conexión** página Hola **conectar toodatabase** cuadro, escriba un nombre Hola de base de datos de usuario de hello desea tooconnect Para.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="a1fd3-274">(hello **identificador de inquilino o el nombre de dominio de AD**"opción solo se admite para **Universal con conexión de MFA** las opciones, en caso contrario se atenúa.)</span><span class="sxs-lookup"><span data-stu-id="a1fd3-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Seleccione el nombre de la base de datos de Hola][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="a1fd3-276">Autenticación de contraseña de Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1fd3-276">Active Directory password authentication</span></span>

<span data-ttu-id="a1fd3-277">Use este método cuando se conecta con un nombre de entidad de seguridad de Azure AD con hello Azure AD administra el dominio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="a1fd3-278">También puede usar para una cuenta federada sin dominio toohello de acceso, por ejemplo, cuando trabajan de forma remota.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="a1fd3-279">Utilice este método si se registran en tooWindows usando las credenciales de un dominio que no está federado con Azure, o cuando se usa la autenticación de Azure AD mediante Azure AD en función de saludo inicial u Hola dominio del cliente.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="a1fd3-280">Inicie Management Studio o herramientas de datos y en hello **conectar tooServer** (o **conectar tooDatabase motor**) cuadro de diálogo hello **autenticación** , seleccione **Active Directory: contraseña**.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="a1fd3-281">Hola **nombre de usuario** , escriba su nombre de usuario de Azure Active Directory en formato de hello  **username@domain.com** . Debe ser una cuenta de hello Azure Active Directory o una cuenta de un dominio federar con hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="a1fd3-282">Hola **contraseña** cuadro, escriba la contraseña de usuario para la cuenta de Azure Active Directory de Hola o federado cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Selección de autenticación de contraseña de Active Directory][12]
4. <span data-ttu-id="a1fd3-284">Haga clic en hello **opciones** botón y en hello **propiedades de conexión** página Hola **conectar toodatabase** cuadro, escriba un nombre Hola de base de datos de usuario de hello desea tooconnect Para.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="a1fd3-285">(Consulte el gráfico de hello en la opción anterior hello).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="a1fd3-286">Usar un tooconnect de identidad de Azure AD desde una aplicación cliente</span><span class="sxs-lookup"><span data-stu-id="a1fd3-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="a1fd3-287">Hola procedimientos siguientes muestra cómo tooconnect tooa SQL de base de datos con una identidad de Azure AD desde una aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="a1fd3-288">Autenticación integrada de Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1fd3-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="a1fd3-289">toouse la autenticación de Windows integrada, de Active Directory el dominio debe ser federado con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="a1fd3-290">Debe estar ejecutándose la aplicación de cliente (o un servicio) conectar toohello base de datos en un equipo unido a un dominio con credenciales de dominio de un usuario.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="a1fd3-291">tooconnect tooa base de datos mediante la autenticación y una identidad de Azure AD, palabra clave de autenticación de hello en la cadena de conexión de base de datos de hello debe establecerse tooActive Directory integrado.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="a1fd3-292">Hello siguiente ejemplo de código de C# utiliza ADO. NET.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="a1fd3-293">palabra clave de cadena de conexión de Hola ``Integrated Security=True`` no se admite para la conexión tooAzure base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="a1fd3-294">Al realizar una conexión ODBC, necesitará tooremove espacios y establecer autenticación too'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="a1fd3-295">Autenticación de contraseña de Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1fd3-295">Active Directory password authentication</span></span>

<span data-ttu-id="a1fd3-296">tooconnect tooa base de datos mediante la autenticación y una identidad de Azure AD, palabra clave de autenticación de hello debe establecerse tooActive contraseña del directorio.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="a1fd3-297">cadena de conexión de Hello debe contener valores y palabras clave de contraseña/PWD y UID/Id. de usuario.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="a1fd3-298">Hello siguiente ejemplo de código de C# utiliza ADO. NET.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="a1fd3-299">Obtener más información sobre los métodos de autenticación de Azure AD con ejemplos de código de demostración de hello disponibles en [demostración de GitHub de autenticación de Azure AD](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="a1fd3-300">Token de Azure AD</span><span class="sxs-lookup"><span data-stu-id="a1fd3-300">Azure AD token</span></span>
<span data-ttu-id="a1fd3-301">Este método de autenticación permite servicios de nivel medio tooconnect tooAzure base de datos SQL o almacenamiento de datos de SQL Azure al obtener un token de Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="a1fd3-302">Permite escenarios sofisticados, incluida la autenticación basada en certificados.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="a1fd3-303">Debe completar los cuatro pasos básicos toouse Azure símbolo (token) de autenticación de AD:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="a1fd3-304">Registrar la aplicación con Azure Active Directory y obtener el identificador de cliente de hello para el código.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="a1fd3-305">Cree una aplicación de Hola que representan de usuario de base de datos.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-305">Create a database user representing hello application.</span></span> <span data-ttu-id="a1fd3-306">(Completado anteriormente en el paso 6).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="a1fd3-307">Cree un certificado en las ejecuciones de equipo de cliente hello aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="a1fd3-308">Agregar certificado de hello como una clave para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a1fd3-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="a1fd3-309">Cadena de conexión de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="a1fd3-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="a1fd3-310">Para más información, consulte el [blog de seguridad de SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="a1fd3-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="a1fd3-311">sqlcmd</span></span>

<span data-ttu-id="a1fd3-312">Hola siguiendo las instrucciones, conéctese mediante versión 13.1 de sqlcmd, que está disponible en hello [centro de descarga de](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="a1fd3-313">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a1fd3-313">Next steps</span></span>
- <span data-ttu-id="a1fd3-314">Para obtener información general de acceso y control en SQL Database, consulte [Control de acceso a Azure SQL Database](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="a1fd3-315">Para obtener información general de los inicios de sesión, usuarios y roles de base de datos de SQL Database, consulte [Control y concesión de acceso a bases de datos](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="a1fd3-316">Para más información acerca de las entidades de seguridad de bases de datos, consulte [Entidades de seguridad](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="a1fd3-317">Para más información acerca de los roles de base de datos, consulte [Roles de nivel de base de datos](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="a1fd3-318">Para más información general acerca de las reglas de firewall de SQL Database, consulte [Introducción a las reglas de firewall de Azure SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="a1fd3-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png


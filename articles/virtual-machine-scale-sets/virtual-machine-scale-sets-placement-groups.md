---
title: "aaaWorking con grandes conjuntos de escalas de máquina Virtual de Azure | Documentos de Microsoft"
description: "Lo que necesita tooknow toouse grandes máquina virtual de Azure escalar conjuntos"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="50822-103">Uso de grandes conjuntos de escalado de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="50822-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="50822-104">Ahora puede crear Azure [conjuntos de escalas de máquina virtual](/azure/virtual-machine-scale-sets/) con una capacidad de seguridad too1, 000 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="50822-105">En este documento, un _conjunto de escalas de máquina virtual grande_ se define como una escala establecida capaz de escalar toogreater de 100 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling toogreater than 100 VMs.</span></span> <span data-ttu-id="50822-106">Esta funcionalidad se establece con una propiedad de conjunto de escalado (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="50822-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="50822-107">Conjuntos de determinados aspectos de gran escala, como los dominios de error y equilibrio de carga comportan de manera diferente tooa conjunto de escala estándar.</span><span class="sxs-lookup"><span data-stu-id="50822-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently tooa standard scale set.</span></span> <span data-ttu-id="50822-108">Este documento explica las características de Hola de conjuntos de gran escala y describe lo que necesita tooknow toosuccessfully usarlos en sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="50822-108">This document explains hello characteristics of large scale sets, and describes what you need tooknow toosuccessfully use them in your applications.</span></span> 

<span data-ttu-id="50822-109">Un enfoque común para implementar la infraestructura de nube a gran escala es toocreate un conjunto de _unidades de escala_, por ejemplo mediante la creación de varias máquinas virtuales escalar conjuntos entre varias redes virtuales y las cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="50822-109">A common approach for deploying cloud infrastructure at large scale is toocreate a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="50822-110">Este enfoque proporciona más fácil toosingle de administración en comparación con las máquinas virtuales y varias unidades de escala son útiles para muchas aplicaciones, especialmente aquellas que requieren otros componentes apilables como varias redes virtuales y los puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="50822-110">This approach provides easier management compared toosingle VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="50822-111">Si la aplicación requiere un único clúster de gran tamaño sin embargo, puede ser más sencillo toodeploy configurada una sola escala de too1, 000 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-111">If your application requires a single large cluster however, it can be more straightforward toodeploy a single scale set of up too1,000 VMs.</span></span> <span data-ttu-id="50822-112">Algunos escenarios de ejemplo son las implementaciones de macrodatos centralizadas y las mallas de computación que requieren una administración sencilla de un grupo grande de nodos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="50822-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="50822-113">Combinar con el conjunto de escalas de VM [discos de datos conectados](virtual-machine-scale-sets-attached-disks.md), conjuntos de gran escala permiten toodeploy una infraestructura escalable que consta de miles de núcleos y petabytes de almacenamiento, como una única operación.</span><span class="sxs-lookup"><span data-stu-id="50822-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you toodeploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="50822-114">Grupos de selección de ubicación</span><span class="sxs-lookup"><span data-stu-id="50822-114">Placement groups</span></span> 
<span data-ttu-id="50822-115">¿En qué consiste un _grandes_ conjunto especial de escalas no es número Hola de máquinas virtuales, pero el número Hola de _grupos de selección de ubicación_ contiene.</span><span class="sxs-lookup"><span data-stu-id="50822-115">What makes a _large_ scale set special is not hello number of VMs, but hello number of _placement groups_ it contains.</span></span> <span data-ttu-id="50822-116">Un grupo de selección de ubicación es un conjunto de disponibilidad de Azure tooan de construcción similar, con sus propios dominios de error y dominios de actualización.</span><span class="sxs-lookup"><span data-stu-id="50822-116">A placement group is a construct similar tooan Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="50822-117">De forma predeterminada, un conjunto de escalado consta de un único grupo de selección de ubicación con un tamaño máximo de 100 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="50822-118">Si una escala de establece la propiedad denominada _singlePlacementGroup_ se establece too_false_, conjunto de escalas de hello puede estar compuesto de varios grupos de selección de ubicación y tiene un intervalo de 0 a 1.000 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-118">If a scale set property called _singlePlacementGroup_ is set too_false_, hello scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="50822-119">Cuando se establece valor predeterminado de toohello de _true_, un conjunto de escala se compone de un grupo de selección de ubicación única y tiene un intervalo de 0-100 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-119">When set toohello default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="50822-120">Lista de comprobación para usar grandes conjuntos de escalado</span><span class="sxs-lookup"><span data-stu-id="50822-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="50822-121">toodecide si la aplicación puede hacer un uso eficaz de conjuntos de gran escala, considere la posibilidad de hello según los requisitos:</span><span class="sxs-lookup"><span data-stu-id="50822-121">toodecide whether your application can make effective use of large scale sets, consider hello following requirements:</span></span>

- <span data-ttu-id="50822-122">Los conjuntos de escalado grandes necesitan Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="50822-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="50822-123">Los conjuntos de escalado grandes que no se crean con Managed Disks requieren varias cuentas de almacenamiento (una por cada 20 máquinas virtuales).</span><span class="sxs-lookup"><span data-stu-id="50822-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="50822-124">Los conjuntos de gran escala son toowork diseñada exclusivamente con tooreduce discos administrados limita el riesgo de Hola de sobrecarga de administración y tooavoid de almacenamiento de la ejecución en una suscripción para las cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="50822-124">Large scale sets are designed toowork exclusively with Managed Disks tooreduce your storage management overhead, and tooavoid hello risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="50822-125">Si no utiliza discos administrados, el conjunto de escala es too100 limita las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-125">If you do not use Managed Disks, your scale set is limited too100 VMs.</span></span>
- <span data-ttu-id="50822-126">Conjuntos de escalas de creado a partir de imágenes de Azure Marketplace pueden escalar too1, 000 máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-126">Scale sets created from Azure Marketplace images can scale up too1,000 VMs.</span></span>
- <span data-ttu-id="50822-127">Conjuntos de escalas de creado a partir de imágenes personalizadas (imágenes de máquina virtual que crea y carga usted mismo) actualmente pueden escalar too100 las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="50822-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up too100 VMs.</span></span>
- <span data-ttu-id="50822-128">Capa 4 equilibrio de carga con hello equilibrador de carga de Azure no se admite todavía para conjuntos de escalas de formada por varios grupos de selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="50822-128">Layer-4 load balancing with hello Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="50822-129">Si necesita hello toouse equilibrador de carga de Azure que escala de hello seguro sea es toouse configurado un grupo de selección de ubicación única, que es el valor predeterminado de Hola.</span><span class="sxs-lookup"><span data-stu-id="50822-129">If you need toouse hello Azure Load Balancer make sure hello scale set is configured toouse a single placement group, which is hello default setting.</span></span>
- <span data-ttu-id="50822-130">7 de la capa de equilibrio de carga con hello puerta de enlace de aplicaciones de Azure es compatible con todos los conjuntos de escala.</span><span class="sxs-lookup"><span data-stu-id="50822-130">Layer-7 load balancing with hello Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="50822-131">Un conjunto de escala se define con una sola subred, asegúrese de que la subred tiene un espacio de direcciones lo suficientemente grande como para todas las máquinas virtuales de Hola que necesita.</span><span class="sxs-lookup"><span data-stu-id="50822-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all hello VMs you need.</span></span> <span data-ttu-id="50822-132">De forma predeterminada un conjunto de escalado de overprovisions (crea máquinas virtuales adicionales durante la implementación o mientras se escala horizontalmente, que no se le cobra por) tooimprove implementación confiabilidad y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="50822-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) tooimprove deployment reliability and performance.</span></span> <span data-ttu-id="50822-133">Permitir un mayor número de Hola de máquinas virtuales que piensa tooscale a dirección espacio 20%.</span><span class="sxs-lookup"><span data-stu-id="50822-133">Allow for an address space 20% greater than hello number of VMs you plan tooscale to.</span></span>
- <span data-ttu-id="50822-134">Si tiene previsto toodeploy muchas máquinas virtuales, sus límites de cuota de núcleos de proceso pueden necesitar toobe aumentado.</span><span class="sxs-lookup"><span data-stu-id="50822-134">If you are planning toodeploy many VMs, your Compute core quota limits may need toobe increased.</span></span>
- <span data-ttu-id="50822-135">Los dominios de error y los dominios de actualización solo son coherentes dentro de un grupo de selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="50822-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="50822-136">Esta arquitectura no cambia Hola general conjunto de disponibilidad de una escala, como las máquinas virtuales se distribuyen uniformemente entre distinto hardware físico, pero lo que significa que si necesita tooguarantee dos máquinas virtuales están en un hardware diferente, asegúrese de que están en error diferentes dominios de Hola mismo grupo de selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="50822-136">This architecture does not change hello overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need tooguarantee two VMs are on different hardware, make sure they are in different fault domains in hello same placement group.</span></span> <span data-ttu-id="50822-137">Identificador de grupo de dominio y la colocación de error se muestran en hello _instancia vista_ de una escala del conjunto de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="50822-137">Fault domain and placement group ID are shown in hello _instance view_ of a scale set VM.</span></span> <span data-ttu-id="50822-138">Puede ver la vista de instancia Hola de un conjunto de escalas de VM en hello [Explorador de recursos de Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="50822-138">You can view hello instance view of a scale set VM in hello [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="50822-139">Creación de un conjunto de escalado grande</span><span class="sxs-lookup"><span data-stu-id="50822-139">Creating a large scale set</span></span>
<span data-ttu-id="50822-140">Cuando se crea una escala establecida en hello portal de Azure, puede permitir que se grupos de selección de ubicación de tooscale toomultiple por establecer hello _grupo único de la selección de ubicación de límite tooa_ too_False_ opción Hola _Fundamentos_ hoja.</span><span class="sxs-lookup"><span data-stu-id="50822-140">When you create a scale set in hello Azure portal, you can allow it tooscale toomultiple placement groups by setting hello _Limit tooa single placement group_ option too_False_ in hello _Basics_ blade.</span></span> <span data-ttu-id="50822-141">Con esta too_False_ de conjunto de opción, puede especificar un _el número de instancias_ valor de seguridad too1, 000.</span><span class="sxs-lookup"><span data-stu-id="50822-141">With this option set too_False_, you can specify an _Instance count_ value of up too1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="50822-142">Puede crear a gran escala de máquinas virtuales que se establecen a través de hello [CLI de Azure](https://github.com/Azure/azure-cli) _crear az vmss_ comando.</span><span class="sxs-lookup"><span data-stu-id="50822-142">You can create a large VM scale set using hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="50822-143">Este comando establece valores predeterminados inteligentes como tamaño de la subred en función de hello _recuento de instancias_ argumento:</span><span class="sxs-lookup"><span data-stu-id="50822-143">This command sets intelligent defaults such as subnet size based on hello _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="50822-144">Tenga en cuenta que hello _vmss crear_ ciertos valores de configuración si no los especifica valores predeterminados de comando.</span><span class="sxs-lookup"><span data-stu-id="50822-144">Note that hello _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="50822-145">opciones disponibles de toosee Hola que puede invalidar, intente:</span><span class="sxs-lookup"><span data-stu-id="50822-145">toosee hello available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="50822-146">Si va a crear a gran escala establecer creando una plantilla de Azure Resource Manager, asegúrese de plantilla de hello crea un conjunto de escala basado en discos administrados de Azure.</span><span class="sxs-lookup"><span data-stu-id="50822-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure hello template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="50822-147">Puede establecer hello _singlePlacementGroup_ too_false_ propiedad Hola _propiedades_ sección de hello _Microsoft.Compute/virtualMAchineScaleSets_ recursos.</span><span class="sxs-lookup"><span data-stu-id="50822-147">You can set hello _singlePlacementGroup_ property too_false_ in hello _properties_ section of hello _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="50822-148">Hello siguiente fragmento de JSON muestra a partir de una plantilla de conjunto de escala, incluida la capacidad VM de 1.000 Hola y Hola Hola _"singlePlacementGroup": false_ configuración:</span><span class="sxs-lookup"><span data-stu-id="50822-148">hello following JSON fragment shows hello beginning of a scale set template, including hello 1,000 VM capacity and hello _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="50822-149">Para obtener un ejemplo completo de a gran escala conjuntos de plantilla, consulte demasiado[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="50822-149">For a complete example of a large scale set template, refer too[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a><span data-ttu-id="50822-150">Convertir una escala existente establece toospan varios grupos de selección de ubicación</span><span class="sxs-lookup"><span data-stu-id="50822-150">Converting an existing scale set toospan multiple placement groups</span></span>
<span data-ttu-id="50822-151">toomake una escala VM existente establecida capaz de escalar toomore de 100 máquinas virtuales, deberá hello toochange _singplePlacementGroup_ too_false_ de propiedad en la escala de hello establece el modelo.</span><span class="sxs-lookup"><span data-stu-id="50822-151">toomake an existing VM scale set capable of scaling toomore than 100 VMs, you need toochange hello _singplePlacementGroup_ property too_false_ in hello scale set model.</span></span> <span data-ttu-id="50822-152">Puede probar si cambia esta propiedad con hello [Explorador de recursos de Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="50822-152">You can test changing this property with hello [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="50822-153">Buscar un conjunto de escala existente, seleccione _editar_ y cambiar hello _singlePlacementGroup_ propiedad.</span><span class="sxs-lookup"><span data-stu-id="50822-153">Find an existing scale set, select _Edit_ and change hello _singlePlacementGroup_ property.</span></span> <span data-ttu-id="50822-154">Si no ve esta propiedad, puede estar viendo escala Hola establecido con una versión anterior de hello Microsoft.Compute API.</span><span class="sxs-lookup"><span data-stu-id="50822-154">If you do not see this property, you may be viewing hello scale set with an older version of hello Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="50822-155">Puede cambiar una escala establecida de admitir una única ubicación grupo solo (comportamiento predeterminado de hello) tooa admite varios grupos de selección de ubicación, pero no se puede convertir Hola revés.</span><span class="sxs-lookup"><span data-stu-id="50822-155">You can change a scale set from supporting a single placement group only (hello default behavior) tooa supporting multiple placement groups, but you cannot convert hello other way around.</span></span> <span data-ttu-id="50822-156">Por lo tanto, asegúrese de que comprende las propiedades de Hola de conjuntos de gran escala antes de convertir.</span><span class="sxs-lookup"><span data-stu-id="50822-156">Therefore make sure you understand hello properties of large scale sets before converting.</span></span> <span data-ttu-id="50822-157">En concreto, asegúrese de que no es necesario con hello equilibrador de carga de Azure de equilibrio de carga de nivel 4.</span><span class="sxs-lookup"><span data-stu-id="50822-157">In particular, make sure you do not need layer-4 load balancing with hello Azure Load Balancer.</span></span>



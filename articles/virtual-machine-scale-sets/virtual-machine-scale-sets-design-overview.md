---
title: "Consideraciones de diseño para Conjuntos de escalado de máquinas virtuales de Azure | Microsoft Docs"
description: "Conozca las consideraciones de diseño de los Conjuntos de escalado de máquinas virtuales de Azure"
keywords: "máquina virtual Linux,conjuntos de escalado de máquina virtual"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: 6dbd4f22e3e949e19565030f5a10f545b89a0a3c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="86d75-104">Consideraciones de diseño para conjuntos de escalado</span><span class="sxs-lookup"><span data-stu-id="86d75-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="86d75-105">Este tema analiza consideraciones de diseño para conjuntos de escalado de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="86d75-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="86d75-106">Para información sobre qué son los conjuntos de escalado de máquinas virtuales, consulte [Información general de conjuntos de escalado de máquinas virtuales](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="86d75-106">For information about what Virtual Machine Scale Sets are, refer to [Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-to-use-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="86d75-107">¿Cuándo se usan conjuntos de escalado en lugar de máquinas virtuales?</span><span class="sxs-lookup"><span data-stu-id="86d75-107">When to use scale sets instead of virtual machines?</span></span>
<span data-ttu-id="86d75-108">Por lo general, los conjuntos de escala son útiles para implementar infraestructura altamente disponible donde un conjunto de máquinas tiene una configuración similar.</span><span class="sxs-lookup"><span data-stu-id="86d75-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="86d75-109">Sin embargo, algunas características solo están disponibles en los conjuntos de escalado, mientras que otras características solo están disponibles en las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="86d75-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="86d75-110">Con el fin de tomar una decisión fundamentada sobre cuándo usar cada tecnología, primero debemos examinar algunas de las características más usadas que se encuentran en los conjuntos de escalado, pero no en las máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="86d75-110">In order to make an informed decision about when to use each technology, we should first take a look at some of the commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="86d75-111">Características específicas de los conjuntos de escalado</span><span class="sxs-lookup"><span data-stu-id="86d75-111">Scale set-specific features</span></span>

- <span data-ttu-id="86d75-112">Una vez que especifique la configuración del conjunto de escalado, puede simplemente actualizar la propiedad de "capacidad" para implementar más máquinas virtuales en paralelo.</span><span class="sxs-lookup"><span data-stu-id="86d75-112">Once you specify the scale set configuration, you can simply update the "capacity" property to deploy more VMs in parallel.</span></span> <span data-ttu-id="86d75-113">Esto es mucho más simple que escribir un script para organizar la implementación de muchas máquinas virtuales individuales en paralelo.</span><span class="sxs-lookup"><span data-stu-id="86d75-113">This is much simpler than writing a script to orchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="86d75-114">Puede [usar el escalado automático de Azure para escalar automáticamente un conjunto de escalado](./virtual-machine-scale-sets-autoscale-overview.md), pero no máquinas virtuales individuales.</span><span class="sxs-lookup"><span data-stu-id="86d75-114">You can [use Azure Autoscale to automatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="86d75-115">Puede [restablecer la imagen inicial de máquinas virtuales del conjunto de escalado](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm), pero [no las máquinas virtuales individuales](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="86d75-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="86d75-116">También puede [sobreaprovisionar](./virtual-machine-scale-sets-design-overview.md) máquinas virtuales del conjunto de escalado para lograr una mejor confiabilidad y tiempos de implementación más rápidos.</span><span class="sxs-lookup"><span data-stu-id="86d75-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="86d75-117">No puede hacer esto con máquinas virtuales individuales a menos que escriba el código personalizado para hacerlo.</span><span class="sxs-lookup"><span data-stu-id="86d75-117">You cannot do this with individual VMs unless you write custom code to do this.</span></span>
- <span data-ttu-id="86d75-118">Puede especificar una [directiva de actualización](./virtual-machine-scale-sets-upgrade-scale-set.md) para facilitar la implementación de actualizaciones en las máquinas virtuales del conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) to make it easy to roll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="86d75-119">Con las máquinas virtuales individuales, debe organizar usted mismo las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="86d75-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="86d75-120">Características específicas de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="86d75-120">VM-specific features</span></span>

<span data-ttu-id="86d75-121">Por otro lado, algunas características solo están disponibles en las máquinas virtuales (al menos por el momento):</span><span class="sxs-lookup"><span data-stu-id="86d75-121">On the other hand, some features are only available in VMs (at least for the time being):</span></span>

- <span data-ttu-id="86d75-122">Puede conectar discos de datos a máquinas virtuales individuales específicas, pero los discos de datos conectados están configurados para todas las máquinas virtuales en un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-122">You can attach data disks to specific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="86d75-123">Puede conectar discos de datos no vacíos a máquinas virtuales individuales, pero no máquinas virtuales de un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-123">You can attach non-empty data disks to individual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="86d75-124">Puede crear una instantánea de una máquina virtual individual, pero no una máquina virtual en un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="86d75-125">Puede capturar una imagen desde una máquina virtual individual, pero no desde una máquina virtual en un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="86d75-126">Puede migrar una máquina virtual individual desde discos nativos a discos administrados, pero no puede hacerlo para máquinas virtuales de un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-126">You can migrate an individual VM from native disks to managed disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="86d75-127">Puede asignar direcciones IP públicas IPv6 a NIC de máquinas virtuales individuales, pero no puede hacerlo para máquinas virtuales de un conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-127">You can assign IPv6 public IP addresses to individual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="86d75-128">Tenga en cuenta que puede asignar direcciones IP públicas IPv6 a equilibradores de carga delante de máquinas virtuales individuales o de máquinas virtuales de conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-128">Note that you can assign IPv6 public IP addresses to load balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="86d75-129">Storage</span><span class="sxs-lookup"><span data-stu-id="86d75-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="86d75-130">Conjuntos de escalado con Azure Managed Disks</span><span class="sxs-lookup"><span data-stu-id="86d75-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="86d75-131">Los conjuntos de escalado se pueden crear con [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) en lugar de las cuentas de Azure Storage tradicionales.</span><span class="sxs-lookup"><span data-stu-id="86d75-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="86d75-132">Managed Disks ofrece las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="86d75-132">Managed Disks provide the following benefits:</span></span>
- <span data-ttu-id="86d75-133">No necesita crear previamente un conjunto de cuentas de Azure Storage para las VM de conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-133">You do not have to pre-create a set of Azure storage accounts for the scale set VMs.</span></span>
- <span data-ttu-id="86d75-134">Puede definir [discos de datos conectados](virtual-machine-scale-sets-attached-disks.md) para las VM del conjunto de escalado.</span><span class="sxs-lookup"><span data-stu-id="86d75-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for the VMs in your scale set.</span></span>
- <span data-ttu-id="86d75-135">Los conjuntos de escalado se pueden configurar para [que admitan hasta 1000 VM en un conjunto](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="86d75-135">Scale sets can be configured to [support up to 1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="86d75-136">Si hay una plantilla existente, también puede [actualizarla para usar Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="86d75-136">If you have an existing template, you can also [update the template to use Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="86d75-137">Almacenamiento administrado por el usuario</span><span class="sxs-lookup"><span data-stu-id="86d75-137">User-managed Storage</span></span>
<span data-ttu-id="86d75-138">Un conjunto de escalado que no se definió con Azure Managed Disks se basa en las cuentas de almacenamiento creadas por el cliente para almacenar los discos del SO de las VM en el conjunto.</span><span class="sxs-lookup"><span data-stu-id="86d75-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts to store the OS disks of the VMs in the set.</span></span> <span data-ttu-id="86d75-139">Se recomienda una proporción de 20 VM por cuenta de almacenamiento (o menos) para alcanzar el E/S máximo y también aprovechar el _aprovisionamiento en exceso_ (ver a continuación).</span><span class="sxs-lookup"><span data-stu-id="86d75-139">A ratio of 20 VMs per storage account or less is recommended to achieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="86d75-140">También se recomienda usar las distintas letras del alfabeto en los caracteres iniciales de los nombres de las cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="86d75-140">It is also recommended that you spread the beginning characters of the storage account names across the alphabet.</span></span> <span data-ttu-id="86d75-141">Esto ayuda a distribuir la carga en diferentes sistemas internos.</span><span class="sxs-lookup"><span data-stu-id="86d75-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="86d75-142">Aprovisionamiento en exceso</span><span class="sxs-lookup"><span data-stu-id="86d75-142">Overprovisioning</span></span>
<span data-ttu-id="86d75-143">Los conjuntos de escalado actualmente se establecen de manera predeterminada para "sobreaprovisionar" máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="86d75-143">Scale sets currently default to "overprovisioning" VMs.</span></span> <span data-ttu-id="86d75-144">Con el aprovisionamiento en exceso activado, el conjunto de escalado en realidad ejecuta más VM de las que se solicitan y, luego, elimina las VM adicionales una vez que las solicitadas se aprovisionan correctamente.</span><span class="sxs-lookup"><span data-stu-id="86d75-144">With overprovisioning turned on, the scale set actually spins up more VMs than you asked for, then deletes the extra VMs once the requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="86d75-145">El aprovisionamiento en exceso mejora las tasas de éxito y disminuye el tiempo de implementación.</span><span class="sxs-lookup"><span data-stu-id="86d75-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="86d75-146">No se le cobrará por las VM adicionales y estas no cuentan en sus límites de cuota.</span><span class="sxs-lookup"><span data-stu-id="86d75-146">You are not billed for the extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="86d75-147">Aunque el aprovisionamiento en exceso mejora las tasas de éxito de aprovisionamiento, puede provocar un comportamiento confuso para una aplicación que no está diseñada para controlar VM adicionales que aparecen y desparecen.</span><span class="sxs-lookup"><span data-stu-id="86d75-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed to handle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="86d75-148">Para desactivar el sobreaprovisionamiento, asegúrese de que tiene la cadena siguiente en la plantilla: `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="86d75-148">To turn overprovisioning off, ensure you have the following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="86d75-149">Puede encontrar más detalles en la [documentación de API de REST de conjuntos de escalado](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="86d75-149">More details can be found in the [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="86d75-150">Si el conjunto de escalado usa almacenamiento administrado por el usuario y se desactiva el aprovisionamiento en exceso, puede tener más de 20 VM por cuenta de almacenamiento. Sin embargo, no se recomienda que supere las 40 para mantener un buen rendimiento de E/S.</span><span class="sxs-lookup"><span data-stu-id="86d75-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended to go above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="86d75-151">Límites</span><span class="sxs-lookup"><span data-stu-id="86d75-151">Limits</span></span>
<span data-ttu-id="86d75-152">Un conjunto de escalado basado en una imagen de Marketplace (que también se conoce como una imagen de plataforma) y configurado para usar Azure Managed Disks admite una capacidad de hasta 1000 VM.</span><span class="sxs-lookup"><span data-stu-id="86d75-152">A scale set built on a Marketplace image (also known as a platform image) and configured to use Azure Managed Disks supports a capacity of up to 1,000 VMs.</span></span> <span data-ttu-id="86d75-153">Si configura el conjunto de escalado para que admita más de 100 VM, no todos los escenarios funcionan del mismo modo (por ejemplo, el equilibro de carga).</span><span class="sxs-lookup"><span data-stu-id="86d75-153">If you configure your scale set to support more than 100 VMs, not all scenarios work the same (for example load balancing).</span></span> <span data-ttu-id="86d75-154">Para más información, consulte [Uso de grandes conjuntos de escalado de máquinas virtuales](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="86d75-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="86d75-155">Un conjunto de escalado configurado con cuentas de almacenamiento administradas por el usuario actualmente tiene un límite de 100 VM (y se recomiendan 5 cuentas de almacenamiento para esta escala).</span><span class="sxs-lookup"><span data-stu-id="86d75-155">A scale set configured with user-managed storage accounts is currently limited to 100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="86d75-156">Un conjunto de escalado basado en una imagen personalizada (que usted haya creado) puede tener una capacidad de hasta 100 VM cuando está configurado con Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="86d75-156">A scale set built on a custom image (one built by you) can have a capacity of up to 100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="86d75-157">Si el conjunto de escalado está configurado con cuentas de almacenamiento administradas por el usuario, debe crear todos los VHD del disco del SO dentro de una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="86d75-157">If the scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="86d75-158">Como resultado, el número máximo recomendado de VM de un conjunto de escalado basado en una imagen personalizada y en el almacenamiento administrado por el usuario es 20.</span><span class="sxs-lookup"><span data-stu-id="86d75-158">As a result, the maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="86d75-159">Si se desactiva el aprovisionamiento en exceso, puede aumentar la cifra hasta 40.</span><span class="sxs-lookup"><span data-stu-id="86d75-159">If you turn off overprovisioning, you can go up to 40.</span></span>

<span data-ttu-id="86d75-160">Para poder tener más máquinas virtuales que las que permiten estos límites, debe implementar varios conjuntos de escalado, tal como se muestra en [esta plantilla](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="86d75-160">For more VMs than these limits allow, you need to deploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>


---
title: "aaaTest tooAzure de conmutación por error de Site Recovery | Documentos de Microsoft"
description: "Obtenga información acerca de cómo ejecutar una conmutación por error de prueba de tooAzure local"
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/04/2017
ms.author: pratshar
ms.openlocfilehash: fa0a93f409cc9f2c2c06c2d91c65971dc90c507f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="test--failover-tooazure-in-site-recovery"></a><span data-ttu-id="c68d6-103">Probar la conmutación por error tooAzure en Site Recovery</span><span class="sxs-lookup"><span data-stu-id="c68d6-103">Test  Failover tooAzure in Site Recovery</span></span>



<span data-ttu-id="c68d6-104">Este artículo proporciona información y las instrucciones para realizar una conmutación por error de prueba o una exploración de recuperación ante desastres de máquinas virtuales y servidores físicos están protegidas con Site Recovery con Azure como sitio de recuperación de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-104">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using Azure as hello recovery site.</span></span>

<span data-ttu-id="c68d6-105">Enviar comentarios o preguntas en parte inferior de este artículo, o en Hola de hello [foro de servicios de recuperación de Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="c68d6-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="c68d6-106">Conmutación por error de prueba es ejecutar toovalidate la estrategia de replicación o realizar una exploración de recuperación ante desastres sin pérdida de datos o el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="c68d6-106">Test failover is run toovalidate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="c68d6-107">Realizar una conmutación por error de prueba no tiene ningún efecto en la replicación en curso de Hola o en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="c68d6-107">Doing a test failover doesn't have any impact on hello ongoing replication or on your production environment.</span></span> <span data-ttu-id="c68d6-108">La conmutación por error de prueba puede hacerse en una máquina virtual o en un [plan de recuperación](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="c68d6-108">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="c68d6-109">Al activar una conmutación por error de prueba, debe prueba de toowhich de red toospecify Hola conectaría máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="c68d6-109">When triggering a test failover, you need toospecify hello network toowhich test virtual machines would connect to.</span></span> <span data-ttu-id="c68d6-110">Una vez que se desencadena una conmutación por error de prueba, puede seguir el progreso en hello **trabajos** página.</span><span class="sxs-lookup"><span data-stu-id="c68d6-110">Once a test failover is triggered, you can track progress in hello **Jobs** page.</span></span>  


## <a name="supported-scenarios"></a><span data-ttu-id="c68d6-111">Escenarios admitidos</span><span class="sxs-lookup"><span data-stu-id="c68d6-111">Supported scenarios</span></span>
<span data-ttu-id="c68d6-112">Se admite la conmutación por error en todos los escenarios de implementación distinto de [tooAzure de sitio de VMware heredado](site-recovery-vmware-to-azure-classic-legacy.md).</span><span class="sxs-lookup"><span data-stu-id="c68d6-112">Test failover is supported in all deployment scenarios other than [legacy VMware site tooAzure](site-recovery-vmware-to-azure-classic-legacy.md).</span></span> <span data-ttu-id="c68d6-113">Conmutación por error de prueba tampoco se admite cuando la máquina virtual ha se ha conmutado por error tooAzure.</span><span class="sxs-lookup"><span data-stu-id="c68d6-113">Test failover is also not supported when virtual machine has been failed over tooAzure.</span></span>  


## <a name="run-a-test-failover"></a><span data-ttu-id="c68d6-114">Ejecución de una conmutación por error de prueba</span><span class="sxs-lookup"><span data-stu-id="c68d6-114">Run a test failover</span></span>
<span data-ttu-id="c68d6-115">Este procedimiento describe cómo toorun una conmutación por error de prueba para una recuperación del plan.</span><span class="sxs-lookup"><span data-stu-id="c68d6-115">This procedure describes how toorun a test failover for a recovery plan.</span></span> <span data-ttu-id="c68d6-116">O bien también puede ejecutar la conmutación por error de prueba para un único equipo mediante el uso de la opción adecuada de hello en él.</span><span class="sxs-lookup"><span data-stu-id="c68d6-116">Alternatively you can also run test failover for a single machine by using hello appropriate option on it.</span></span>

![Test Failover](./media/site-recovery-test-failover-to-azure/TestFailover.png)


1. <span data-ttu-id="c68d6-118">Seleccione **Recovery Plans** > *nombreDePlanDeRecuperación*.</span><span class="sxs-lookup"><span data-stu-id="c68d6-118">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="c68d6-119">Haga clic en **Probar conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="c68d6-119">Click **Test Failover**.</span></span>
1. <span data-ttu-id="c68d6-120">Seleccione un **punto de recuperación** toofailover a.</span><span class="sxs-lookup"><span data-stu-id="c68d6-120">Select a **Recovery Point** toofailover to.</span></span> <span data-ttu-id="c68d6-121">Puede usar uno de hello siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="c68d6-121">You can use one of hello following options:</span></span>
    1.  <span data-ttu-id="c68d6-122">**Procesar más reciente**: esta opción se conmuta todas las máquinas virtuales de hello recuperación plan toohello último punto de recuperación que ya ha sido procesado por el servicio de Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="c68d6-122">**Latest processed**: This option fails over all virtual machines of hello recovery plan toohello latest recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="c68d6-123">Cuando realiza una conmutación por error de prueba de una máquina virtual, también se muestra la marca de tiempo de punto de recuperación procesada más reciente de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-123">When you are doing test failover of a virtual machine, time stamp of hello latest processed recovery point is also shown.</span></span> <span data-ttu-id="c68d6-124">Si realiza una conmutación por error de un plan de recuperación, puede ir de máquina virtual de tooindividual y mirar **puntos de recuperación más reciente** icono tooget esta información.</span><span class="sxs-lookup"><span data-stu-id="c68d6-124">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span> <span data-ttu-id="c68d6-125">A medida que se empleó ningún tiempo tooprocess Hola datos sin procesar, esta opción proporciona una opción de conmutación por error bajo RTO (objetivo de tiempo de recuperación).</span><span class="sxs-lookup"><span data-stu-id="c68d6-125">As no time is spent tooprocess hello unprocessed data, this option provides a low RTO (Recovery Time Objective) failover option.</span></span>
    1.  <span data-ttu-id="c68d6-126">**Más reciente coherente con la aplicación**: esta opción se conmuta todas las máquinas virtuales Hola plan toohello más reciente aplicación coherente recuperación del punto de recuperación que ya ha sido procesado por el servicio de recuperación del sitio.</span><span class="sxs-lookup"><span data-stu-id="c68d6-126">**Latest app-consistent**: This option fails over all virtual machines of hello recovery plan toohello latest application consistent recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="c68d6-127">Cuando realiza una conmutación por error de prueba de una máquina virtual, también se muestra la marca de tiempo del último punto de recuperación coherente con la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="c68d6-127">When you are doing test failover of a virtual machine, time stamp of hello latest app-consistent recovery point is also shown.</span></span> <span data-ttu-id="c68d6-128">Si realiza una conmutación por error de un plan de recuperación, puede ir de máquina virtual de tooindividual y mirar **puntos de recuperación más reciente** icono tooget esta información.</span><span class="sxs-lookup"><span data-stu-id="c68d6-128">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span>
    1.  <span data-ttu-id="c68d6-129">**Última**: esta opción procesa primero todos los datos de Hola que se ha enviado tooSite recuperación servicio toocreate un punto de recuperación para cada máquina virtual antes de conmutar a tooit.</span><span class="sxs-lookup"><span data-stu-id="c68d6-129">**Latest**: This option first processes all hello data that has been sent tooSite Recovery service toocreate a recovery point for each virtual machine before failing them over tooit.</span></span> <span data-ttu-id="c68d6-130">Esta opción proporciona Hola menor RPO (objetivo de punto de recuperación) como máquina de virtual Hola creada después de conmutación por error tendrá todos los datos de Hola que se ha replicado tooSite el servicio de recuperación cuando se activó la conmutación por error de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-130">This option provides hello lowest RPO (Recovery Point Objective) as hello virtual machine created after failover will have all hello data that has been replicated tooSite Recovery service when hello failover was triggered.</span></span>
    1.  <span data-ttu-id="c68d6-131">**Latest multi-VM processed** (Últimas máquinas virtuales procesadas): esta opción solo está disponible para planes de recuperación que tienen al menos una máquina virtual con la coherencia para varias máquinas virtuales activada.</span><span class="sxs-lookup"><span data-stu-id="c68d6-131">**Latest multi-VM processed**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="c68d6-132">Punto de máquinas virtuales que forman parte de una replicación grupo conmutación por error toohello recuperación más reciente comunes varias VM coherente.</span><span class="sxs-lookup"><span data-stu-id="c68d6-132">Virtual machines that are part of a replication group failover toohello latest common multi-VM consistent recovery point.</span></span> <span data-ttu-id="c68d6-133">Otra máquinas virtuales conmutación por error tootheir más reciente procesado punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="c68d6-133">Other virtual machines failover tootheir latest processed recovery point.</span></span>  
    1.  <span data-ttu-id="c68d6-134">**Latest multi-VM app-consistent** (Últimas máquinas virtuales coherentes con la aplicación): esta opción solo está disponible para planes de recuperación que tienen al menos una máquina virtual con la coherencia para varias máquinas virtuales activada.</span><span class="sxs-lookup"><span data-stu-id="c68d6-134">**Latest multi-VM app-consistent**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="c68d6-135">Máquinas virtuales que forman parte de una replicación de grupo de conmutación por error toohello más reciente varias VM coherentes con la aplicación de punto de recuperación común.</span><span class="sxs-lookup"><span data-stu-id="c68d6-135">Virtual machines that are part of a replication group failover toohello latest common multi-VM application-consistent recovery point.</span></span> <span data-ttu-id="c68d6-136">Otra máquinas virtuales conmutación por error tootheir más reciente coherente con la aplicación el punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="c68d6-136">Other virtual machines failover tootheir latest application-consistent recovery point.</span></span> 
    1.  <span data-ttu-id="c68d6-137">**Personalizado**: si está realizando la conmutación por error de prueba de una máquina virtual, puede usar este punto de recuperación concreto de opción toofailover tooa.</span><span class="sxs-lookup"><span data-stu-id="c68d6-137">**Custom**: If you are doing test failover of a virtual machine, then you can use this option toofailover tooa particular recovery point.</span></span>
1. <span data-ttu-id="c68d6-138">Seleccione un **red virtual de Azure**: proporcione una red virtual de Azure donde se debería crear máquinas virtuales de prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-138">Select an **Azure virtual network**: Provide an Azure virtual network where hello test virtual machines would be created.</span></span> <span data-ttu-id="c68d6-139">Máquinas virtuales de prueba toocreate en una subred del mismo nombre de intentos de recuperación de sitio y usar Hola IP misma que la proporcionada en **proceso y red** configuración de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-139">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="c68d6-140">Si la subred del mismo nombre no está disponible en hello red virtual de Azure proporcionado para la conmutación por error de prueba, máquina virtual de prueba se crea en la primera subred de hello alfabéticamente.</span><span class="sxs-lookup"><span data-stu-id="c68d6-140">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="c68d6-141">Si la misma IP no está disponible en la subred de hello, la máquina virtual tiene otra dirección IP disponible en la subred de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-141">If same IP is not available in hello subnet, then virtual machine gets another IP address available in hello subnet.</span></span> <span data-ttu-id="c68d6-142">Consulte esta sección para obtener [más información](#creating-a-network-for-test-failover).</span><span class="sxs-lookup"><span data-stu-id="c68d6-142">Read this section for [more details](#creating-a-network-for-test-failover)</span></span>
1. <span data-ttu-id="c68d6-143">Si está conmuta tooAzure y está habilitado el cifrado de datos, en **clave de cifrado** certificado Hola seleccione emitido cuando habilita el cifrado de datos durante la instalación del proveedor.</span><span class="sxs-lookup"><span data-stu-id="c68d6-143">If you're failing over tooAzure and data encryption is enabled, in **Encryption Key** select hello certificate that was issued when you enabled data encryption during Provider installation.</span></span> <span data-ttu-id="c68d6-144">Puede omitir este paso si no ha habilitado el cifrado en la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-144">You can ignore this step if you have not enabled encryption on hello virtual machine.</span></span>
1. <span data-ttu-id="c68d6-145">Realizar el seguimiento de progreso de la conmutación por error en hello **trabajos** ficha. Debe ser toosee capaz de máquina de réplica de prueba de Hola Hola portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="c68d6-145">Track failover progress on hello **Jobs** tab. You should be able toosee hello test replica machine in hello Azure portal.</span></span>
1. <span data-ttu-id="c68d6-146">tooinitiate una conexión RDP en la máquina virtual de hello, necesitará demasiado[agregar una ip pública](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) en hello interfaz de red de hello conmutado por máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="c68d6-146">tooinitiate an RDP connection on hello virtual machine, you will need too[add a public ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on hello network interface of hello failed over virtual machine.</span></span> <span data-ttu-id="c68d6-147">Si conmuta por máquina virtual de tooa clásico, deberá demasiado[agregar un punto de conexión](../virtual-machines/windows/classic/setup-endpoints.md) en el puerto 3389</span><span class="sxs-lookup"><span data-stu-id="c68d6-147">If you are failing over tooa Classic virtual machine, then you need too[add an endpoint](../virtual-machines/windows/classic/setup-endpoints.md) on port 3389</span></span>
1. <span data-ttu-id="c68d6-148">Una vez que haya terminado, haga clic en **conmutación por error de prueba de limpieza** Hola plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="c68d6-148">Once you're done, click **Cleanup test failover** on hello recovery plan.</span></span> <span data-ttu-id="c68d6-149">En **notas** registrar y guardar las observaciones asociadas con conmutación por error de prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-149">In **Notes** record and save any observations associated with hello test failover.</span></span> <span data-ttu-id="c68d6-150">Esto elimina máquinas virtuales de Hola que se crearon durante la conmutación por error de prueba.</span><span class="sxs-lookup"><span data-stu-id="c68d6-150">This deletes hello virtual machines that were created during test failover.</span></span>


> [!TIP]
> <span data-ttu-id="c68d6-151">Máquinas virtuales de prueba toocreate en una subred del mismo nombre de intentos de recuperación de sitio y usar Hola IP misma que la proporcionada en **proceso y red** configuración de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-151">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="c68d6-152">Si la subred del mismo nombre no está disponible en hello red virtual de Azure proporcionado para la conmutación por error de prueba, máquina virtual de prueba se crea en la primera subred de hello alfabéticamente.</span><span class="sxs-lookup"><span data-stu-id="c68d6-152">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="c68d6-153">Si IP de destino de hello forma parte de hello elegido subred, recuperación de sitio intenta toocreate Hola prueba de conmutación por error máquina virtual a través Hola IP de destino.</span><span class="sxs-lookup"><span data-stu-id="c68d6-153">If hello target IP is part of hello chosen subnet, then site recovery tries toocreate hello test failover virtual machine using hello target IP.</span></span> <span data-ttu-id="c68d6-154">Si IP de destino de hello no forma parte de hello elegido subred máquina virtual de conmutación por error de prueba se crea con cualquier dirección IP disponible en hello elegido subred.</span><span class="sxs-lookup"><span data-stu-id="c68d6-154">If hello target IP is not part of hello chosen subnet then test failover virtual machine gets created using any available IP in hello chosen subnet.</span></span>
>
>

## <a name="test-failover-job"></a><span data-ttu-id="c68d6-155">Trabajo de conmutación por error de prueba</span><span class="sxs-lookup"><span data-stu-id="c68d6-155">Test failover job</span></span>

![Test Failover](./media/site-recovery-test-failover-to-azure/TestFailoverJob.png)

<span data-ttu-id="c68d6-157">Cuando se desencadena una conmutación por error de prueba, se realizan estos pasos:</span><span class="sxs-lookup"><span data-stu-id="c68d6-157">When a test failover is triggered, it involves following steps:</span></span>

1. <span data-ttu-id="c68d6-158">Comprobación de los requisitos previos: en este paso se garantiza que se cumplen todas las condiciones necesarias para la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="c68d6-158">Prerequisites check: This step ensures that all conditions required for failover are met</span></span>
1. <span data-ttu-id="c68d6-159">Conmutación por error: Este paso procesa los datos de Hola y sea listo para que se puede crear una máquina virtual de Azure fuera de ella.</span><span class="sxs-lookup"><span data-stu-id="c68d6-159">Failover: This step processes hello data and makes it ready so that an Azure virtual machine can be created out of it.</span></span> <span data-ttu-id="c68d6-160">Si ha elegido **más reciente** punto de recuperación, este paso crea un punto de recuperación de datos de Hola que se ha enviado el servicio toohello.</span><span class="sxs-lookup"><span data-stu-id="c68d6-160">If you have chosen **Latest** recovery point, this step creates a recovery point from hello data that has been sent toohello service.</span></span>
1. <span data-ttu-id="c68d6-161">Inicio: En este paso se crea una máquina virtual de Azure utilizando los datos de hello procesados en el paso anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-161">Start: This step creates an Azure virtual machine using hello data processed in hello previous step.</span></span>

## <a name="time-taken-for-failover"></a><span data-ttu-id="c68d6-162">Tiempo necesario para la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-162">Time taken for failover</span></span>

<span data-ttu-id="c68d6-163">En algunos casos, conmutación por error de máquinas virtuales requiere un paso adicional intermedio que normalmente tarda aproximadamente 8 too10 minutos toocomplete.</span><span class="sxs-lookup"><span data-stu-id="c68d6-163">In certain cases, failover of virtual machines requires an extra intermediate step that usually takes around 8  too10 minutes toocomplete.</span></span> <span data-ttu-id="c68d6-164">Estos casos son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="c68d6-164">These cases are as following:</span></span>

* <span data-ttu-id="c68d6-165">Máquinas virtuales VMware usando una versión de servicio de movilidad anterior a 9,8 hello</span><span class="sxs-lookup"><span data-stu-id="c68d6-165">VMware virtual machines using a version of hello Mobility service older than 9.8</span></span>
* <span data-ttu-id="c68d6-166">Servidores físicos</span><span class="sxs-lookup"><span data-stu-id="c68d6-166">Physical servers</span></span>
* <span data-ttu-id="c68d6-167">Máquinas virtuales de VMware Linux</span><span class="sxs-lookup"><span data-stu-id="c68d6-167">VMware Linux virtual machines</span></span>
* <span data-ttu-id="c68d6-168">Máquinas virtuales Hyper-V protegidas como servidores físicos</span><span class="sxs-lookup"><span data-stu-id="c68d6-168">Hyper-V virtual machines protected as physical servers</span></span>
* <span data-ttu-id="c68d6-169">Máquinas virtuales de VMware donde los siguientes controladores no están presentes como controladores de arranque</span><span class="sxs-lookup"><span data-stu-id="c68d6-169">VMware virtual machines where following drivers are not present as boot drivers</span></span>
    * <span data-ttu-id="c68d6-170">storvsc</span><span class="sxs-lookup"><span data-stu-id="c68d6-170">storvsc</span></span>
    * <span data-ttu-id="c68d6-171">vmbus</span><span class="sxs-lookup"><span data-stu-id="c68d6-171">vmbus</span></span>
    * <span data-ttu-id="c68d6-172">storflt</span><span class="sxs-lookup"><span data-stu-id="c68d6-172">storflt</span></span>
    * <span data-ttu-id="c68d6-173">intelide</span><span class="sxs-lookup"><span data-stu-id="c68d6-173">intelide</span></span>
    * <span data-ttu-id="c68d6-174">atapi</span><span class="sxs-lookup"><span data-stu-id="c68d6-174">atapi</span></span>
* <span data-ttu-id="c68d6-175">Máquinas virtuales de VMware que no tienen el servicio DHCP habilitado independientemente de si usan direcciones IP estáticas o DHCP</span><span class="sxs-lookup"><span data-stu-id="c68d6-175">VMware virtual machines that don't have DHCP service enabled irrespective of whether they are using DHCP or static IP addresses</span></span>

<span data-ttu-id="c68d6-176">En hello todos los demás casos este paso intermedio no es necesaria y tiempo Hola de conmutación por error de hello es notablemente inferior.</span><span class="sxs-lookup"><span data-stu-id="c68d6-176">In all hello other cases this intermediate step is not required and hello time taken for hello failover is significantly lower.</span></span>


## <a name="creating-a-network-for-test-failover"></a><span data-ttu-id="c68d6-177">Creación de una red para conmutación por error de prueba</span><span class="sxs-lookup"><span data-stu-id="c68d6-177">Creating a network for test failover</span></span>
<span data-ttu-id="c68d6-178">Se recomienda que, cuando realiza una conmutación por error de prueba elija una red que está aislada de la red de sitio de recuperación de producción que proporcionó en **proceso y red** configuración de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-178">It is recommended that when you are doing a test failover you choose a network that is isolated from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="c68d6-179">De forma predeterminada, cualquier red virtual que se cree en Azure está aislada de otras redes.</span><span class="sxs-lookup"><span data-stu-id="c68d6-179">By default when you create an Azure virtual network, it is isolated from other networks.</span></span> <span data-ttu-id="c68d6-180">Esta red debe imitar la red de producción:</span><span class="sxs-lookup"><span data-stu-id="c68d6-180">This network should mimic your production network:</span></span>

1. <span data-ttu-id="c68d6-181">Red de prueba debe tener el mismo número de subredes que en la red de producción y con el mismo nombre que las subredes de hello en la red de producción de hello.</span><span class="sxs-lookup"><span data-stu-id="c68d6-181">Test network should have same number of subnets as that in your production network and with hello same name as those of hello subnets in your production network.</span></span>
1. <span data-ttu-id="c68d6-182">Debe usar la red de prueba Hola mismo intervalo IP que el de la red de producción.</span><span class="sxs-lookup"><span data-stu-id="c68d6-182">Test network should use hello same IP range as that of your production network.</span></span>
1. <span data-ttu-id="c68d6-183">Hola de actualización DNS de red de prueba como Hola IP que asignó como destino IP para hello DNS máquinas virtuales de hello **proceso y red** configuración.</span><span class="sxs-lookup"><span data-stu-id="c68d6-183">Update hello DNS of hello Test Network as hello IP that you gave as target IP for hello DNS virtual machine under **Compute and Network** settings.</span></span> <span data-ttu-id="c68d6-184">Examine la sección [Consideraciones sobre la conmutación por error de prueba para Active Directory](site-recovery-active-directory.md#test-failover-considerations) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="c68d6-184">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>


## <a name="test-failover-tooa-production-network-on-recovery-site"></a><span data-ttu-id="c68d6-185">Red de producción de tooa de conmutación por error de prueba en el sitio de recuperación</span><span class="sxs-lookup"><span data-stu-id="c68d6-185">Test failover tooa production network on recovery site</span></span>
<span data-ttu-id="c68d6-186">Se recomienda que, cuando realiza una conmutación por error de prueba elija una red que es diferente de la red de sitio de recuperación de producción que proporcionó en **proceso y red** configuración de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-186">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="c68d6-187">Sin embargo, si realmente desea conectividad de red de tooend toovalidate final en un error a través de la máquina virtual, tenga en cuenta Hola siguientes puntos:</span><span class="sxs-lookup"><span data-stu-id="c68d6-187">But if you really want toovalidate end tooend network connectivity in a failed over virtual machine, note hello following points:</span></span>

1. <span data-ttu-id="c68d6-188">Asegúrese de que la máquina virtual principal Hola está apagado cuando realiza una conmutación por error de prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-188">Make sure that hello primary virtual machine is shutdown when you are doing hello test failover.</span></span> <span data-ttu-id="c68d6-189">Si no lo hace, habrá dos máquinas virtuales con hello misma identidad que se ejecuta en hello en la misma red en hello mismo tiempo y que puede provocar la tooundesired consecuencias.</span><span class="sxs-lookup"><span data-stu-id="c68d6-189">If you don't do so, there will be two virtual machines with hello same identity running in hello same network at hello same time and that can lead tooundesired consequences.</span></span>
1. <span data-ttu-id="c68d6-190">Se perderán los cambios realizados en máquinas virtuales de hello prueba de conmutación por error cuando se limpieza Hola conmutación por error máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="c68d6-190">Any changes that you make into hello test failover virtual machines would be lost when you cleanup hello test failover virtual machines.</span></span> <span data-ttu-id="c68d6-191">Estos cambios no serán máquina virtual principal de toohello atrás replicada.</span><span class="sxs-lookup"><span data-stu-id="c68d6-191">These changes will not be replicated back toohello primary virtual machine.</span></span>
1. <span data-ttu-id="c68d6-192">Esta forma de realizar pruebas conduce tooa tiempo de inactividad de la aplicación de producción.</span><span class="sxs-lookup"><span data-stu-id="c68d6-192">This way of doing testing leads tooa downtime of your production application.</span></span> <span data-ttu-id="c68d6-193">Los usuarios de aplicación Hola se deben plantear toonot de la aplicación de Hola de uso al explorar Hola recuperación ante desastres está en curso.</span><span class="sxs-lookup"><span data-stu-id="c68d6-193">Users of hello application should be asked toonot use hello application when hello DR drill is in progress.</span></span>  



## <a name="prepare-active-directory-and-dns"></a><span data-ttu-id="c68d6-194">Preparación de Active Directory y DNS</span><span class="sxs-lookup"><span data-stu-id="c68d6-194">Prepare Active Directory and DNS</span></span>
<span data-ttu-id="c68d6-195">toorun una conmutación por error de prueba para probar la aplicación, necesitará una copia del entorno de Active Directory de producción de hello en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="c68d6-195">toorun a test failover for application testing, you need a copy of hello production Active Directory environment in your test environment.</span></span> <span data-ttu-id="c68d6-196">Examine la sección [Consideraciones sobre la conmutación por error de prueba para Active Directory](site-recovery-active-directory.md#test-failover-considerations) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="c68d6-196">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>

## <a name="prepare-tooconnect-tooazure-vms-after-failover"></a><span data-ttu-id="c68d6-197">Preparar tooconnect tooAzure las máquinas virtuales después de la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-197">Prepare tooconnect tooAzure VMs after failover</span></span>

<span data-ttu-id="c68d6-198">Si desea que tooconnect tooAzure máquinas virtuales mediante RDP después de la conmutación por error, asegúrese de que hello las acciones que se resumen en la tabla de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-198">If you want tooconnect tooAzure VMs using RDP after failover, make sure you do hello actions summarized in hello table.</span></span>

<span data-ttu-id="c68d6-199">**Conmutación por error**</span><span class="sxs-lookup"><span data-stu-id="c68d6-199">**Failover**</span></span> | <span data-ttu-id="c68d6-200">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="c68d6-200">**Location**</span></span> | <span data-ttu-id="c68d6-201">**Acciones**</span><span class="sxs-lookup"><span data-stu-id="c68d6-201">**Actions**</span></span>
--- | --- | ---
<span data-ttu-id="c68d6-202">**Máquina virtual de Azure que ejecuta Windows**</span><span class="sxs-lookup"><span data-stu-id="c68d6-202">**Azure VM running Windows**</span></span> | <span data-ttu-id="c68d6-203">En la máquina local antes de la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-203">On on-premises machine before failover</span></span> | <span data-ttu-id="c68d6-204">tooaccess Hola VM de Azure sobre Hola internet, habilitar RDP, asegúrese de que TCP y UDP reglas se agregan para hello **público**, y que se permita RDP en **Firewall de Windows** > **permitido Aplicaciones**, para todos los perfiles.</span><span class="sxs-lookup"><span data-stu-id="c68d6-204">tooaccess hello Azure VM over hello internet, enable RDP, make sure TCP, and UDP rules are added for hello **Public**, and that RDP is allowed in **Windows Firewall** > **Allowed Apps**, for all profiles.</span></span><br/><br/> <span data-ttu-id="c68d6-205">tooaccess a través de una conexión de sitio a sitio, habilitar RDP en la máquina de Hola y asegúrese de que está permitido RDP en hello **Firewall de Windows** -> **permite aplicaciones y características** para  **Dominio y Private** redes.</span><span class="sxs-lookup"><span data-stu-id="c68d6-205">tooaccess over a site-to-site connection, enable RDP on hello machine, and ensure that RDP is allowed in hello **Windows Firewall** -> **Allowed apps and features** for **Domain and Private** networks.</span></span><br/><br/>  <span data-ttu-id="c68d6-206">Asegúrese de que Directiva de SAN del sistema operativo Hola se establece demasiado**OnlineAll**.</span><span class="sxs-lookup"><span data-stu-id="c68d6-206">Make sure hello operating system's SAN policy is set too**OnlineAll**.</span></span> <span data-ttu-id="c68d6-207">[Más información](https://support.microsoft.com/kb/3031135).</span><span class="sxs-lookup"><span data-stu-id="c68d6-207">[Learn more](https://support.microsoft.com/kb/3031135).</span></span><br/><br/> <span data-ttu-id="c68d6-208">Asegúrese de que no hay Windows actualizaciones pendientes en la máquina virtual de hello cuando se desencadenan una conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="c68d6-208">Make sure there are no Windows updates pending on hello virtual machine when you trigger a failover.</span></span> <span data-ttu-id="c68d6-209">Actualización de Windows puede comenzar cuando la conmutación por error y no será capaz de toologin toohello virtual machine hasta que se complete la actualización de Hola.</span><span class="sxs-lookup"><span data-stu-id="c68d6-209">Windows update might start when you failover and you will not be able toologin toohello virtual machine until hello update completes.</span></span> <br/><br/>
<span data-ttu-id="c68d6-210">**Máquina virtual de Azure que ejecuta Windows**</span><span class="sxs-lookup"><span data-stu-id="c68d6-210">**Azure VM running Windows**</span></span> | <span data-ttu-id="c68d6-211">En la máquina virtual de Azure después de la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-211">On Azure VM after failover</span></span> | <span data-ttu-id="c68d6-212">Para una máquina virtual clásica, [agregar un extremo público](../virtual-machines/windows/classic/setup-endpoints.md) para hello protocolo RDP (puerto 3389)</span><span class="sxs-lookup"><span data-stu-id="c68d6-212">For a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) for hello RDP protocol (port 3389)</span></span><br/><br/>  <span data-ttu-id="c68d6-213">En el caso de una máquina virtual de Resource Manager, [añada una dirección IP pública](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="c68d6-213">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="c68d6-214">Hola reglas del grupo de seguridad de red en hello conmutado por error máquinas virtuales y hello toowhich de subred de Azure está conectado, necesita puerto RDP de las conexiones entrante de tooallow toohello.</span><span class="sxs-lookup"><span data-stu-id="c68d6-214">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello RDP port.</span></span><br/><br/> <span data-ttu-id="c68d6-215">Para una máquina virtual del Administrador de recursos, también puede comprobar **diagnósticos de arranque** toolook en una captura de pantalla de máquina virtual de Hola</span><span class="sxs-lookup"><span data-stu-id="c68d6-215">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/> <span data-ttu-id="c68d6-216">Si no puede conectarse, compruebe que Hola VM se esté ejecutando y, a continuación, consulte estos [sugerencias para solucionar problemas](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span><span class="sxs-lookup"><span data-stu-id="c68d6-216">If you can't connect, check that hello VM is running and then look at these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span><br/><br/>
<span data-ttu-id="c68d6-217">**Máquina virtual de Azure que ejecuta Linux**</span><span class="sxs-lookup"><span data-stu-id="c68d6-217">**Azure VM running Linux**</span></span> | <span data-ttu-id="c68d6-218">En la máquina local antes de la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-218">On on-premises machine before failover</span></span> | <span data-ttu-id="c68d6-219">Asegúrese de que ese servicio de Secure Shell en hello Azure VM Hola se establece toostart automáticamente en el arranque del sistema.</span><span class="sxs-lookup"><span data-stu-id="c68d6-219">Ensure that hello Secure Shell service on hello Azure VM is set toostart automatically on system boot.</span></span><br/><br/> <span data-ttu-id="c68d6-220">Compruebe que las reglas de firewall permiten a un tooit de conexión SSH.</span><span class="sxs-lookup"><span data-stu-id="c68d6-220">Check that firewall rules allow an SSH connection tooit.</span></span>
<span data-ttu-id="c68d6-221">**Máquina virtual de Azure que ejecuta Linux**</span><span class="sxs-lookup"><span data-stu-id="c68d6-221">**Azure VM running Linux**</span></span> | <span data-ttu-id="c68d6-222">Máquina virtual de Azure después de la conmutación por error</span><span class="sxs-lookup"><span data-stu-id="c68d6-222">Azure VM after failover</span></span> | <span data-ttu-id="c68d6-223">Hola reglas del grupo de seguridad de red en hello conmutado por error máquinas virtuales y hello toowhich de subred de Azure está conectado, es necesario tooallow conexiones toohello SSH el puerto entrante.</span><span class="sxs-lookup"><span data-stu-id="c68d6-223">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello SSH port.</span></span><br/><br/> <span data-ttu-id="c68d6-224">Para una máquina virtual clásica, [agregar un extremo público](../virtual-machines/windows/classic/setup-endpoints.md) debe crearse en las conexiones entrantes de tooallow en hello SSH (puerto TCP 22 de forma predeterminada).</span><span class="sxs-lookup"><span data-stu-id="c68d6-224">For  a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) should be created, tooallow incoming connections on hello SSH port (TCP port 22 by default).</span></span><br/><br/> <span data-ttu-id="c68d6-225">En el caso de una máquina virtual de Resource Manager, [añada una dirección IP pública](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="c68d6-225">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="c68d6-226">Para una máquina virtual del Administrador de recursos, también puede comprobar **diagnósticos de arranque** toolook en una captura de pantalla de máquina virtual de Hola</span><span class="sxs-lookup"><span data-stu-id="c68d6-226">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/>



## <a name="next-steps"></a><span data-ttu-id="c68d6-227">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="c68d6-227">Next steps</span></span>
<span data-ttu-id="c68d6-228">Después de ejecutar correctamente una conmutación por error de prueba, puede intentar realizar una [conmutación por error](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="c68d6-228">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>

---
title: "Funcionamiento de la replicación de Hyper-V en Azure Site Recovery | Microsoft Docs"
description: "Este artículo proporciona información general de los componentes y la arquitectura usados al replicar máquinas virtuales de Hyper-V locales a Azure con el servicio de Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/23/2017
ms.author: raynew
ms.openlocfilehash: 28f775afaf72b11eec0c22f755e4dbd6a485c895
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="how-does-hyper-v-replication-to-azure-work-in-site-recovery"></a><span data-ttu-id="0ecd2-104">Funcionamiento de la replicación de Hyper-V en Azure en Site Recovery</span><span class="sxs-lookup"><span data-stu-id="0ecd2-104">How does Hyper-V replication to Azure work in Site Recovery?</span></span>


<span data-ttu-id="0ecd2-105">En este artículo se describen los componentes y procesos que tienen lugar al replicar máquinas virtuales de Hyper-V locales, a Azure mediante el servicio [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-105">This article describes the components and processes involved when replicating on-premises Hyper-V virtual machines, to Azure using the [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="0ecd2-106">Site Recovery puede replicar máquinas virtuales de Hyper-V en clústeres de Hyper-V y hosts independientes que se administren con o sin System Center Virtual Machine Manager (VMM).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-106">Site Recovery can replicate Hyper-V VMs on Hyper-V clusters and standalone hosts that are managed with or without System Center Virtual Machine Manager (VMM).</span></span>

<span data-ttu-id="0ecd2-107">Publique cualquier comentario que tenga en la parte inferior de este artículo, o bien en el [foro de Azure Recovery Services](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-107">Post any comments at the bottom of this article, or in the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>



## <a name="architectural-components"></a><span data-ttu-id="0ecd2-108">Componentes de la arquitectura</span><span class="sxs-lookup"><span data-stu-id="0ecd2-108">Architectural components</span></span>

<span data-ttu-id="0ecd2-109">En la replicación de las máquinas virtuales de Hyper-V a Azure, intervienen una serie de componentes.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-109">There are a number of components involved when replicating Hyper-V VMs to Azure.</span></span>

<span data-ttu-id="0ecd2-110">**Componente**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-110">**Component**</span></span> | <span data-ttu-id="0ecd2-111">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-111">**Location**</span></span> | <span data-ttu-id="0ecd2-112">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-112">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="0ecd2-113">**Las tablas de Azure**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-113">**Azure**</span></span> | <span data-ttu-id="0ecd2-114">En Azure, necesitará una cuenta de Microsoft Azure, una cuenta de almacenamiento de Azure y una red de Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-114">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="0ecd2-115">Los datos replicados se almacenan en la cuenta de almacenamiento y las máquinas virtuales de Azure se crean con los datos replicados cuando se produce la conmutación por error desde el sitio local.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-115">Replicated data is stored in the storage account, and Azure VMs are created with the replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="0ecd2-116">Las máquinas virtuales de Azure se conectan a la red virtual de Azure cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-116">The Azure VMs connect to the Azure virtual network when they're created.</span></span>
<span data-ttu-id="0ecd2-117">**Servidor VMM**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-117">**VMM server**</span></span> | <span data-ttu-id="0ecd2-118">Los hosts de Hyper-V están ubicados en nubes de VMM</span><span class="sxs-lookup"><span data-stu-id="0ecd2-118">Hyper-V hosts are located in VMM clouds</span></span> | <span data-ttu-id="0ecd2-119">Si los hosts de Hyper-V se administran en nubes de VMM, registre el servidor de VMM en el almacén de Recovery Services.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-119">If Hyper-V hosts are managed in VMM clouds, you register the VMM server in the Recovery Services vault.</span></span><br/><br/> <span data-ttu-id="0ecd2-120">En el servidor de VMM, instale el proveedor de Site Recovery para organizar la replicación con Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-120">On the VMM server you install the Site Recovery Provider to orchestrate replication with Azure.</span></span><br/><br/> <span data-ttu-id="0ecd2-121">Necesita redes de máquinas virtuales y lógicas configuradas para configurar a su vez la asignación de red.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-121">You need logical and VM networks set up to configure network mapping.</span></span> <span data-ttu-id="0ecd2-122">Una red de VM debe estar vinculada a una red lógica asociada con la nube.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-122">A VM network should be linked to a logical network that's associated with the cloud.</span></span>
<span data-ttu-id="0ecd2-123">**Host de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-123">**Hyper-V host**</span></span> | <span data-ttu-id="0ecd2-124">Los host y clústeres de Hyper-V pueden implementarse con o sin un servidor de VMM.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-124">Hyper-V hosts and clusters can be deployed with or without VMM server.</span></span> | <span data-ttu-id="0ecd2-125">Si no hay ningún servidor VMM, el proveedor de Site Recovery se instala en el host para organizar la replicación con Site Recovery a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-125">If there's no VMM server, the Site Recovery Provider is installed on the host to orchestrate replication with Site Recovery over the internet.</span></span> <span data-ttu-id="0ecd2-126">Si hay servidor de VMM, el proveedor se instala en él y no en el host.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-126">If there's a VMM server, the Provider is installed on it, and not on the host.</span></span><br/><br/> <span data-ttu-id="0ecd2-127">El agente de Recovery Services se instala en el host para controlar la replicación de datos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-127">The Recovery Services agent is installed on the host to handle data replication.</span></span><br/><br/> <span data-ttu-id="0ecd2-128">Las comunicaciones del proveedor y el agente son seguras y cifradas.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-128">Communications from both the Provider and the agent are secure and encrypted.</span></span> <span data-ttu-id="0ecd2-129">También se cifran los datos replicados en el almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-129">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="0ecd2-130">**Máquinas virtuales de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-130">**Hyper-V VMs**</span></span> | <span data-ttu-id="0ecd2-131">Necesita una o varias máquinas virtuales que se ejecuten en un servidor host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-131">You need one or more VMs running on a Hyper-V host server.</span></span> | <span data-ttu-id="0ecd2-132">No es necesario instalar nada explícitamente en las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-132">Nothing needs to explicitly installed on VMs.</span></span>

<span data-ttu-id="0ecd2-133">Aprenda sobre los requisitos previos de implementación y los requisitos de cada uno de estos componentes en la [matriz de compatibilidad](site-recovery-support-matrix-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-133">Learn about the deployment prerequisites and requirements for each of these components in the [support matrix](site-recovery-support-matrix-to-azure.md).</span></span>

<span data-ttu-id="0ecd2-134">**Figura 1: Replicación del sitio de Hyper-V a Azure**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-134">**Figure 1: Hyper-V site to Azure replication**</span></span>

![Componentes](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)

<span data-ttu-id="0ecd2-136">**Figura 2: Replicación de Hyper-V en nubes de VMM a Azure**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-136">**Figure 2: Hyper-V in VMM clouds to Azure replication**</span></span>

![Componentes](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png)


## <a name="replication-process"></a><span data-ttu-id="0ecd2-138">Proceso de replicación</span><span class="sxs-lookup"><span data-stu-id="0ecd2-138">Replication process</span></span>

<span data-ttu-id="0ecd2-139">**Figura 3: Proceso de replicación y recuperación para la replicación de Hyper-V a Azure**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-139">**Figure 3: Replication and recovery process for Hyper-V replication to Azure**</span></span>

![flujo de trabajo](./media/site-recovery-components/arch-hyperv-azure-workflow.png)

### <a name="enable-protection"></a><span data-ttu-id="0ecd2-141">Habilitar protección</span><span class="sxs-lookup"><span data-stu-id="0ecd2-141">Enable protection</span></span>

1. <span data-ttu-id="0ecd2-142">Después de habilitar la protección de una máquina virtual de Hyper-V, en el Azure Portal o de forma local, la opción **Habilitar la protección** se inicia.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-142">After you enable protection for a Hyper-V VM, in the Azure portal or on-premises, the **Enable protection** starts.</span></span>
2. <span data-ttu-id="0ecd2-143">El trabajo comprueba que la máquina cumpla los requisitos previos e invoca [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx) para que configure la replicación con su configuración.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-143">The job checks that the machine complies with prerequisites, before invoking the [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), to set up replication with the settings you've configured.</span></span>
3. <span data-ttu-id="0ecd2-144">El trabajo comienza la replicación inicial con la invocación del método [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) para inicializar una replicación completa de la máquina virtual y enviar los discos virtuales de la máquina virtual a Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-144">The job starts initial replication by invoking the [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, to initialize a full VM replication, and send the VM's virtual disks to Azure.</span></span>
4. <span data-ttu-id="0ecd2-145">Puede supervisar el trabajo en la pestaña **Trabajos**.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-145">You can monitor the job in the **Jobs** tab.</span></span>
        <span data-ttu-id="0ecd2-146">![Lista Trabajos](media/site-recovery-hyper-v-azure-architecture/image1.png)![Detalles de Habilitar protección](media/site-recovery-hyper-v-azure-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="0ecd2-146">![Jobs list](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Enable protection drill down](media/site-recovery-hyper-v-azure-architecture/image2.png)</span></span>

### <a name="replicate-the-initial-data"></a><span data-ttu-id="0ecd2-147">Replicación de los datos iniciales</span><span class="sxs-lookup"><span data-stu-id="0ecd2-147">Replicate the initial data</span></span>

1. <span data-ttu-id="0ecd2-148">Cuando se desencadena la replicación inicial, se toma una [instantánea de la máquina virtual de Hyper-V](https://technet.microsoft.com/library/dd560637.aspx).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-148">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="0ecd2-149">Los discos duros virtuales se replican uno a uno hasta que se copian todos en Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-149">Virtual hard disks are replicated one by one until they're all copied to Azure.</span></span> <span data-ttu-id="0ecd2-150">Esto puede tardar unos minutos, en función del tamaño de la máquina virtual y el ancho de banda de la red.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-150">It could take a while, depending on the VM size, and network bandwidth.</span></span> <span data-ttu-id="0ecd2-151">Para optimizar el uso de la red, consulte cómo [administrar el uso de ancho de banda de red para la protección en entornos locales en Azure](https://support.microsoft.com/kb/3056159).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-151">To optimize your network usage, see [How to manage on-premises to Azure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="0ecd2-152">Si se producen cambios en el disco con la replicación inicial en curso, el seguimiento de replicaciones de Réplica de Hyper-V realiza un seguimiento de esos cambios en los registros de replicación de Hyper-V (.hrl).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-152">If disk changes occur while initial replication is in progress, the Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="0ecd2-153">Estos archivos se encuentran en la misma carpeta que los discos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-153">These files are located in the same folder as the disks.</span></span> <span data-ttu-id="0ecd2-154">Cada disco tiene un archivo .hrl asociado que se enviará al almacenamiento secundario.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-154">Each disk has an associated .hrl file that will be sent to secondary storage.</span></span>
4. <span data-ttu-id="0ecd2-155">Los archivos de instantáneas y de registro consumen recursos de disco mientras la replicación inicial está en curso.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-155">The snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="0ecd2-156">Cuando finalice la replicación inicial, se elimina la instantánea de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-156">When the initial replication finishes, the VM snapshot is deleted.</span></span> <span data-ttu-id="0ecd2-157">Los cambios diferenciales en el registro del disco se sincronizan y se combinan en el disco primario.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-157">Delta disk changes in the log are synchronized and merged to the parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="0ecd2-158">Fin de la protección</span><span class="sxs-lookup"><span data-stu-id="0ecd2-158">Finalize protection</span></span>

1. <span data-ttu-id="0ecd2-159">Una vez finalizada la replicación inicial, el trabajo **Finalizar la protección en la máquina virtual** configura la red y otras opciones posteriores a la replicación para proteger la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-159">After the initial replication finishes, the **Finalize protection on the virtual machine** job configures network and other post-replication settings, so that the virtual machine is protected.</span></span>
    <span data-ttu-id="0ecd2-160">![Trabajo de finalización de la protección](media/site-recovery-hyper-v-azure-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="0ecd2-160">![Finalize protection job](media/site-recovery-hyper-v-azure-architecture/image3.png)</span></span>
2. <span data-ttu-id="0ecd2-161">Si va a replicar en Azure, debe ajustar la configuración de la máquina virtual para que esté preparada para conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-161">If you're replicating to Azure, you might need to tweak the settings for the virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="0ecd2-162">En este momento puede ejecutar una conmutación por error de prueba para comprobar que todo funciona según lo esperado.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-162">At this point you can run a test failover to check everything is working as expected.</span></span>

### <a name="replicate-the-delta"></a><span data-ttu-id="0ecd2-163">Replicación diferencial</span><span class="sxs-lookup"><span data-stu-id="0ecd2-163">Replicate the delta</span></span>

1. <span data-ttu-id="0ecd2-164">Después de la replicación inicial, comienza la sincronización diferencial según la configuración de replicación.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-164">After the initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="0ecd2-165">La herramienta de seguimiento de la replicación de Réplica de Hyper-V supervisa los cambios realizados en un disco duro virtual como archivos .hrl.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-165">The Hyper-V Replica Replication Tracker tracks the changes to a virtual hard disk as .hrl files.</span></span> <span data-ttu-id="0ecd2-166">Cada disco configurado para la replicación tiene un archivo .hrl asociado.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-166">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="0ecd2-167">Este registro se envía a la cuenta de almacenamiento del cliente una vez completada la replicación inicial.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-167">This log is sent to the customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="0ecd2-168">Cuando un registro se encuentra en tránsito hacia Azure, los cambios en el disco principal se siguen en otro archivo de registro del mismo directorio.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-168">When a log is in transit to Azure, the changes in the primary disk are tracked in another log file, in the same directory.</span></span>
3. <span data-ttu-id="0ecd2-169">Durante la replicación inicial y diferencial puede supervisar la máquina virtual en su vista.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-169">During initial and delta replication, you can monitor the VM in the VM view.</span></span> <span data-ttu-id="0ecd2-170">[Más información](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-170">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="synchronize-replication"></a><span data-ttu-id="0ecd2-171">Sincronización de la replicación</span><span class="sxs-lookup"><span data-stu-id="0ecd2-171">Synchronize replication</span></span>

1. <span data-ttu-id="0ecd2-172">Si se produce un error en la replicación diferencial y una replicación completa sería costosa en términos de ancho de banda o de tiempo, se marca una máquina virtual para la resincronización.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-172">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="0ecd2-173">Por ejemplo, si los archivos .hrl alcanzan el 50 % del tamaño del disco, la máquina virtual se marcará para repetir la sincronización.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-173">For example, if the .hrl files reach 50% of the disk size, then the VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="0ecd2-174">La resincronización reduce al mínimo la cantidad de datos que se envían; para ello, calcula las sumas de comprobación de las máquinas virtuales de origen y de destino, y envía solo los datos diferenciales.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-174">Resynchronization minimizes the amount of data sent by computing checksums of the source and target virtual machines, and sending only the delta data.</span></span> <span data-ttu-id="0ecd2-175">La resincronización utiliza un algoritmo de fragmentación de bloques fijos donde los archivos de origen y destino se dividen en fragmentos fijos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-175">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="0ecd2-176">Se generan sumas de comprobación para cada fragmento y, luego, se comparan para determinar qué bloques del origen se deben aplicar al destino.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-176">Checksums for each chunk are generated and then compared to determine which blocks from the source need to be applied to the target.</span></span>
3. <span data-ttu-id="0ecd2-177">Una vez finalizada la resincronización, se debe reanudar la replicación diferencial normal.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-177">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="0ecd2-178">De forma predeterminada, la resincronización está programada para ejecutarse automáticamente fuera del horario de oficina, pero puede resincronizar una máquina virtual manualmente.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-178">By default resynchronization is scheduled to run automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="0ecd2-179">Por ejemplo, si se produce una interrupción de la red o de otro tipo, la resincronización se puede reanudar.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-179">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="0ecd2-180">Para ello, seleccione la máquina virtual en el portal > **Volver a sincronizar**.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-180">To do this, select the VM in the portal > **Resynchronize**.</span></span>

    ![Resincronización manual](media/site-recovery-hyper-v-azure-architecture/image4.png)


### <a name="retry-logic"></a><span data-ttu-id="0ecd2-182">Lógica de reintento</span><span class="sxs-lookup"><span data-stu-id="0ecd2-182">Retry logic</span></span>

<span data-ttu-id="0ecd2-183">Si se produce un error de replicación, se realiza un reintento de forma predefinida.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-183">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="0ecd2-184">Esta lógica se puede clasificar en dos categorías:</span><span class="sxs-lookup"><span data-stu-id="0ecd2-184">This logic can be classified into two categories:</span></span>

<span data-ttu-id="0ecd2-185">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-185">**Category**</span></span> | <span data-ttu-id="0ecd2-186">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-186">**Details**</span></span>
--- | ---
<span data-ttu-id="0ecd2-187">**Errores irrecuperables**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-187">**Non-recoverable errors**</span></span> | <span data-ttu-id="0ecd2-188">No se realiza ningún reintento.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-188">No retry is attempted.</span></span> <span data-ttu-id="0ecd2-189">El estado de la máquina virtual será **Crítico** y se requiere la intervención del administrador.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-189">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="0ecd2-190">Ejemplos de estos errores: división de la cadena de disco duro virtual; estado no válido para la réplica de máquina virtual; errores de autenticación de red (de autorización); sin detección de errores en la máquina virtual (para servidores de Hyper-V independientes)</span><span class="sxs-lookup"><span data-stu-id="0ecd2-190">Examples of these errors include: broken VHD chain; Invalid state for the replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="0ecd2-191">**Errores recuperables**</span><span class="sxs-lookup"><span data-stu-id="0ecd2-191">**Recoverable errors**</span></span> | <span data-ttu-id="0ecd2-192">Los reintentos se producen con cada intervalo de replicación mediante el uso de la interrupción exponencial, lo que aumenta el intervalo de reintentos desde el inicio del primer intento en 1, 2, 4, 8 y 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-192">Retries occur every replication interval, using an exponential back-off that increases the retry interval from the start of the first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="0ecd2-193">Si el error persiste, reintente cada 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-193">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="0ecd2-194">Ejemplos: errores de red; errores de espacio insuficiente en disco; memoria insuficiente</span><span class="sxs-lookup"><span data-stu-id="0ecd2-194">Examples include: network errors; low disk  errors; low memory conditions</span></span> |



## <a name="failover-and-failback-process"></a><span data-ttu-id="0ecd2-195">Proceso de conmutación por error y conmutación por recuperación</span><span class="sxs-lookup"><span data-stu-id="0ecd2-195">Failover and failback process</span></span>

1. <span data-ttu-id="0ecd2-196">Puede ejecutar una [conmutación por error](site-recovery-failover.md), planeada o no, desde máquinas virtuales de Hyper-V locales en Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-196">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs to Azure.</span></span> <span data-ttu-id="0ecd2-197">Si ejecuta una conmutación por error planeada, las máquinas virtuales de origen se apagan para garantizar que no se pierdan datos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-197">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="0ecd2-198">Puede conmutar por error una única máquina o crear [planes de recuperación](site-recovery-create-recovery-plans.md) para organizar la conmutación por error de varias máquinas.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-198">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="0ecd2-199">Después de ejecutar la conmutación por error, podrá ver las máquinas virtuales de la réplica creadas en Azure.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-199">After you run the failover, you should be able to see the created replica VMs in Azure.</span></span> <span data-ttu-id="0ecd2-200">Puede asignar una dirección IP pública a la máquina virtual si es necesario.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-200">You can assign a public IP address to the VM if required.</span></span>
5. <span data-ttu-id="0ecd2-201">Después, ejecute una conmutación por error para iniciar el acceso a la carga de trabajo desde la máquina virtual de Azure de la réplica.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-201">You then commit the failover to start accessing the workload from the replica Azure VM.</span></span>
6. <span data-ttu-id="0ecd2-202">Cuando el sitio local principal esté disponible de nuevo, podrá realizar una [conmutación por recuperación](site-recovery-failback-from-azure-to-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-202">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="0ecd2-203">Inicie una conmutación por error planeada desde Azure al sitio principal.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-203">You kick off a planned failover from Azure to the primary site.</span></span> <span data-ttu-id="0ecd2-204">Para una conmutación por error planeada puede elegir realizar una conmutación por recuperación en la misma máquina virtual o en una ubicación alternativa y sincronizar los cambios entre Azure y el sitio local para garantizar que no se produzca ninguna pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-204">For a planned failover you can select to failback to the same VM or to an alternate location, and synchronize changes between Azure and on-premises, to ensure no data loss.</span></span> <span data-ttu-id="0ecd2-205">Cuando las máquinas virtuales se crean en una ubicación local, puede ejecutar la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="0ecd2-205">When VMs are created on-premises, you commit the failover.</span></span>




## <a name="next-steps"></a><span data-ttu-id="0ecd2-206">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0ecd2-206">Next steps</span></span>

<span data-ttu-id="0ecd2-207">Revise la [matriz de compatibilidad](site-recovery-support-matrix-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd2-207">Review the [support matrix](site-recovery-support-matrix-to-azure.md)</span></span>

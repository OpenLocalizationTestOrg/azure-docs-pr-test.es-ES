---
title: "aaaReplicate un IIS de varios niveles según la aplicación web con Azure Site Recovery | Documentos de Microsoft"
description: "Este artículo describe cómo tooreplicate IIS web máquinas virtuales de granja de servidores con Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="60a5e-103">Replicación de una aplicación web basada en IIS de niveles múltiples con Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="60a5e-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="60a5e-104">Información general</span><span class="sxs-lookup"><span data-stu-id="60a5e-104">Overview</span></span>


<span data-ttu-id="60a5e-105">Software de la aplicación es motor Hola de productividad empresarial en una organización.</span><span class="sxs-lookup"><span data-stu-id="60a5e-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="60a5e-106">En una organización, puede haber diversas aplicaciones web con diferentes propósitos.</span><span class="sxs-lookup"><span data-stu-id="60a5e-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="60a5e-107">Algunas de ellas, como las aplicaciones financieras, los programas de procesamiento de nóminas y los sitios web destinados a los clientes, pueden resultar extremadamente cruciales para la organización.</span><span class="sxs-lookup"><span data-stu-id="60a5e-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="60a5e-108">Será importante para hello organización toohave les seguridad y en funcionamiento con pérdida de tooprevent de todas las horas de productividad y más importante evitar cualquier imagen de marca de daños toohello de organización de Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="60a5e-109">Las aplicaciones críticas web normalmente se configuran como aplicaciones de varios niveles con web hello, base de datos y aplicaciones en distintos niveles.</span><span class="sxs-lookup"><span data-stu-id="60a5e-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="60a5e-110">Además de repartida entre distintos niveles, las aplicaciones de Hola también pueden usar varios servidores en cada capa tooload equilibrar Hola del tráfico.</span><span class="sxs-lookup"><span data-stu-id="60a5e-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="60a5e-111">Además, las asignaciones de hello entre distintos niveles y en el servidor web de hello pueden basarse en direcciones IP estáticas.</span><span class="sxs-lookup"><span data-stu-id="60a5e-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="60a5e-112">En la conmutación por error, algunas de estas asignaciones debe toobe actualizado, especialmente, si tiene varios sitios Web configurados en el servidor web de Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="60a5e-113">En el caso de aplicaciones web mediante SSL, los enlaces de certificados tendrá toobe actualizado.</span><span class="sxs-lookup"><span data-stu-id="60a5e-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="60a5e-114">Métodos de recuperación en función de replicación no tradicionales implican la copia de seguridad de varios archivos de configuración, configuración del registro, enlaces, componentes personalizados (COM o. NET), contenido y también certificados y recuperar archivos de Hola a través de un conjunto de pasos manuales.</span><span class="sxs-lookup"><span data-stu-id="60a5e-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="60a5e-115">Estas técnicas resultan engorrosas, suelen generar errores y no son escalables.</span><span class="sxs-lookup"><span data-stu-id="60a5e-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="60a5e-116">Es, por ejemplo, fácilmente posible tooforget copia de seguridad de certificados y se quedaría sin opción pero toobuy nuevos certificados de servidor hello después de la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="60a5e-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="60a5e-117">Una solución de recuperación ante desastres conveniente, debe permitir que el modelo de planes de recuperación alrededor de Hola por encima de arquitecturas de aplicación compleja y también tienen Hola capacidad tooadd personalizar pasos toohandle aplicación asignaciones entre los distintos niveles, por lo que proporciona un con un solo clic que captura la solución en caso de hello de un desastre iniciales tooa reducir el RTO.</span><span class="sxs-lookup"><span data-stu-id="60a5e-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="60a5e-118">Este artículo describe cómo tooprotect un servicio de IIS según la aplicación web utilizando un [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="60a5e-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="60a5e-119">Este artículo explica las prácticas recomendadas para la replicación de un nivel tres basados en IIS tooAzure de aplicación web, cómo se puede hacer una exploración de recuperación ante desastres, y cómo se tooAzure de aplicación Hola de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="60a5e-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="60a5e-120">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="60a5e-120">Prerequisites</span></span>

<span data-ttu-id="60a5e-121">Antes de empezar, asegúrese de que comprende siguiente hello:</span><span class="sxs-lookup"><span data-stu-id="60a5e-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="60a5e-122">Replicar una máquina virtual tooAzure</span><span class="sxs-lookup"><span data-stu-id="60a5e-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="60a5e-123">Cómo demasiado[el diseño de una red de recuperación](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="60a5e-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="60a5e-124">Realizar una tooAzure de conmutación por error de prueba</span><span class="sxs-lookup"><span data-stu-id="60a5e-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="60a5e-125">Realizar una conmutación por error tooAzure</span><span class="sxs-lookup"><span data-stu-id="60a5e-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="60a5e-126">Cómo demasiado[replicar un controlador de dominio](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="60a5e-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="60a5e-127">Cómo demasiado[replicar SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="60a5e-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="60a5e-128">Modelos de implementación</span><span class="sxs-lookup"><span data-stu-id="60a5e-128">Deployment patterns</span></span>
<span data-ttu-id="60a5e-129">Una aplicación web IIS según sigue normalmente uno de los siguientes patrones de implementación de Hola:</span><span class="sxs-lookup"><span data-stu-id="60a5e-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="60a5e-130">**Modelo de implementación 1 ** Granja de servidores web de IIS con Enrutamiento de solicitud de aplicaciones (ARR), IIS Server y Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="60a5e-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Modelo de implementación](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="60a5e-132">**Modelo de implementación 2** Granja de servidores web basada IIS con Enrutamiento de solicitud de aplicaciones (ARR), IIS Server, servidor de aplicaciones y Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="60a5e-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Modelo de implementación](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="60a5e-134">Compatibilidad de Site Recovery</span><span class="sxs-lookup"><span data-stu-id="60a5e-134">Site Recovery support</span></span>

<span data-ttu-id="60a5e-135">Se utilizaron para el propósito de Hola de creación de este artículo las máquinas virtuales VMware con el servidor IIS versión 7.5 en Windows Server 2012 R2 Enterprise.</span><span class="sxs-lookup"><span data-stu-id="60a5e-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="60a5e-136">Como la replicación de recuperación de sitios es independiente de la aplicación, se proporcionan recomendaciones de hello aquí son toohold esperado en los escenarios siguientes también y otra versión de IIS.</span><span class="sxs-lookup"><span data-stu-id="60a5e-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="60a5e-137">Origen y destino</span><span class="sxs-lookup"><span data-stu-id="60a5e-137">Source and target</span></span>

<span data-ttu-id="60a5e-138">**Escenario**</span><span class="sxs-lookup"><span data-stu-id="60a5e-138">**Scenario**</span></span> | <span data-ttu-id="60a5e-139">**sitio secundario tooa**</span><span class="sxs-lookup"><span data-stu-id="60a5e-139">**tooa secondary site**</span></span> | <span data-ttu-id="60a5e-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="60a5e-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="60a5e-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="60a5e-141">**Hyper-V**</span></span> | <span data-ttu-id="60a5e-142">Sí</span><span class="sxs-lookup"><span data-stu-id="60a5e-142">Yes</span></span> | <span data-ttu-id="60a5e-143">Sí</span><span class="sxs-lookup"><span data-stu-id="60a5e-143">Yes</span></span>
<span data-ttu-id="60a5e-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="60a5e-144">**VMware**</span></span> | <span data-ttu-id="60a5e-145">Sí</span><span class="sxs-lookup"><span data-stu-id="60a5e-145">Yes</span></span> | <span data-ttu-id="60a5e-146">Sí</span><span class="sxs-lookup"><span data-stu-id="60a5e-146">Yes</span></span>
<span data-ttu-id="60a5e-147">**Servidor físico**</span><span class="sxs-lookup"><span data-stu-id="60a5e-147">**Physical server**</span></span> | <span data-ttu-id="60a5e-148">No</span><span class="sxs-lookup"><span data-stu-id="60a5e-148">No</span></span> | <span data-ttu-id="60a5e-149">Sí</span><span class="sxs-lookup"><span data-stu-id="60a5e-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="60a5e-150">Replicación de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="60a5e-150">Replicate virtual machines</span></span>

<span data-ttu-id="60a5e-151">Siga [esta guía](site-recovery-vmware-to-azure.md) toostart replicar tooAzure de máquinas virtuales de granja de servidores web IIS de hello todos los.</span><span class="sxs-lookup"><span data-stu-id="60a5e-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="60a5e-152">Si está usando una dirección IP estática y luego especifique Hola IP que desee Hola tootake de máquina virtual en hello [ **IP de destino** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) en configuración de red y proceso.</span><span class="sxs-lookup"><span data-stu-id="60a5e-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![IP de destino](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="60a5e-154">Creación de un plan de recuperación</span><span class="sxs-lookup"><span data-stu-id="60a5e-154">Creating a recovery plan</span></span>

<span data-ttu-id="60a5e-155">Un plan de recuperación permite secuenciación Hola conmutación por error de distintos niveles de una aplicación de varios niveles, por lo tanto, mantener la coherencia de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="60a5e-156">Siga Hola pasos siguientes al crear un plan de recuperación para una aplicación web de varios niveles.</span><span class="sxs-lookup"><span data-stu-id="60a5e-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="60a5e-157">[Aprenda más sobre la creación de un plan de recuperación](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="60a5e-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="60a5e-158">Agregar grupos de toofailover de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="60a5e-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="60a5e-159">Una aplicación típica de web IIS de varios nivel constará de un nivel de base de datos con máquinas virtuales, nivel de web Hola constituida por un servidor IIS y una capa de aplicación de SQL.</span><span class="sxs-lookup"><span data-stu-id="60a5e-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="60a5e-160">Agregar todas estas máquinas virtuales toodifferent de grupo basándose en el nivel que a continuación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="60a5e-161">[Aprenda más sobre cómo personalizar los planes de recuperación](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="60a5e-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="60a5e-162">Cree un plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-162">Create a recovery plan.</span></span> <span data-ttu-id="60a5e-163">Agregar base de datos máquinas virtuales Hola capa en el grupo 1 tooensure que están última cierre y vuelva a la primera.</span><span class="sxs-lookup"><span data-stu-id="60a5e-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="60a5e-164">Agregar máquinas de virtuales de nivel de aplicación de hello en grupo 2, que se incorporan después de que se ha incluido el nivel de base de datos de hello.</span><span class="sxs-lookup"><span data-stu-id="60a5e-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="60a5e-165">Agregar hello web niveles las máquinas virtuales en el grupo 3, que se incorporan después de capa de aplicación Hola se ha incluido.</span><span class="sxs-lookup"><span data-stu-id="60a5e-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="60a5e-166">Agregar máquinas virtuales de equilibrio de carga en el grupo 4, que se incorporan después de que se ha incluido el nivel de web Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="60a5e-167">Agregar plan de recuperación de toohello de secuencias de comandos</span><span class="sxs-lookup"><span data-stu-id="60a5e-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="60a5e-168">Puede que tenga toodo algunas operaciones en máquinas virtuales de Azure post pruebas de conmutación por error y conmutación por error toomake IIS web granja función hello correctamente.</span><span class="sxs-lookup"><span data-stu-id="60a5e-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="60a5e-169">Puede automatizar la operación de conmutación por error de post hello como la actualización de la entrada DNS, cambiar el enlace del sitio, cambios en la cadena de conexión agregando correspondientes a los scripts en el plan de recuperación de hello como sigue.</span><span class="sxs-lookup"><span data-stu-id="60a5e-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="60a5e-170">[Aprenda más sobre la incorporación de scripts al plan de recuperación](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="60a5e-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="60a5e-171">Actualización de DNS</span><span class="sxs-lookup"><span data-stu-id="60a5e-171">DNS Update</span></span>
<span data-ttu-id="60a5e-172">Si Hola DNS está configurado para la actualización dinámica de DNS, a continuación, máquinas virtuales normalmente se haya actualizado Hola DNS con la dirección IP de hello nuevo una vez que se inician.</span><span class="sxs-lookup"><span data-stu-id="60a5e-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="60a5e-173">Si desea que tooadd un tooupdate paso explícito DNS con hello nuevas direcciones IP de máquinas virtuales de hello, a continuación, agregue esto [tooupdate IP en DNS de script](https://aka.ms/asr-dns-update) como una acción posterior en grupos de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="60a5e-174">Cadena de conexión del archivo web.config de una aplicación</span><span class="sxs-lookup"><span data-stu-id="60a5e-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="60a5e-175">cadena de conexión de Hello especifica la base de datos de Hola Hola sitio web se comunica con.</span><span class="sxs-lookup"><span data-stu-id="60a5e-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="60a5e-176">Si cadena de conexión de hello lleva el nombre de Hola de máquina virtual de base de datos de hello, realizar ningún paso adicional será necesario posterior conmutación por error y se podrán aplicación hello tooautomatically comunicarse toohello base de datos.</span><span class="sxs-lookup"><span data-stu-id="60a5e-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="60a5e-177">Además, si se mantiene la dirección IP de hello para la máquina virtual de base de datos de hello, no será necesaria la cadena de conexión de tooupdate Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="60a5e-178">Si la cadena de conexión de hello hace referencia la máquina virtual toohello base de datos a través de una dirección IP, será necesario toobe actualizado posterior conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="60a5e-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="60a5e-179">Por ejemplo,</span><span class="sxs-lookup"><span data-stu-id="60a5e-179">E.g.</span></span> <span data-ttu-id="60a5e-180">Hola por debajo de la cadena de conexión apunta toohello DB con la dirección IP 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="60a5e-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="60a5e-181">Puede actualizar la cadena de conexión de hello en el nivel web agregando [secuencia de comandos de actualización de conexión de IIS](https://aka.ms/asr-update-webtier-script-classic) después de grupo 3 en el plan de recuperación de Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="60a5e-182">Enlaces de sitios para la aplicación hello</span><span class="sxs-lookup"><span data-stu-id="60a5e-182">Site bindings for hello application</span></span>
<span data-ttu-id="60a5e-183">Cada sitio consta de información que incluye el tipo de saludo de enlace, la dirección IP de hello en qué Hola servidor IIS escucha las solicitudes de toohello de sitio de hello, número de puerto de Hola y nombres de host de hello para el sitio de Hola de enlace.</span><span class="sxs-lookup"><span data-stu-id="60a5e-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="60a5e-184">En tiempo de presentación de una conmutación por error, estos enlaces necesite toobe actualiza si hay un cambio en la dirección IP de hello asociado con ellos.</span><span class="sxs-lookup"><span data-stu-id="60a5e-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="60a5e-185">Si se ha marcado 'all unassigned' hello enlace de sitio como en el siguiente ejemplo de Hola, no será necesario tooupdate esta conmutación por error de enlace post.</span><span class="sxs-lookup"><span data-stu-id="60a5e-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="60a5e-186">Además, si dirección IP de hello asociada con un sitio no se cambia post conmutación por error, el enlace del sitio de hello necesita no estén actualizado (retención de dirección IP de hello depende de la arquitectura de red de Hola y subredes asignan toohello sitios principal y de recuperación y, por lo que pueden o no sea factible para su organización).</span><span class="sxs-lookup"><span data-stu-id="60a5e-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Enlace SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="60a5e-188">Si la dirección IP de Hola que haya asociado con un sitio, deberá tooupdate todos los enlaces de sitio con la dirección IP de la nueva Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="60a5e-189">Puede agregar [script de actualización de nivel de Web de IIS](https://aka.ms/asr-web-tier-update-runbook-classic) después de grupo 3 en enlaces de sitios de recuperación plan toochange Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="60a5e-190">Actualización de la dirección IP del equilibrador de carga</span><span class="sxs-lookup"><span data-stu-id="60a5e-190">Update load balancer IP address</span></span>
<span data-ttu-id="60a5e-191">Si la máquina virtual de enrutamiento de solicitud de aplicación, agregue [secuencia de comandos de conmutación por error de IIS ARR](https://aka.ms/asr-iis-arrtier-failover-script-classic) después de la dirección IP de grupo 4 tooupdate Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="60a5e-192">enlace de certificado SSL de Hola para una conexión https</span><span class="sxs-lookup"><span data-stu-id="60a5e-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="60a5e-193">Sitios Web puede tener un certificado SSL asociado que ayuda a garantizar una comunicación segura entre el servidor Web de Hola y explorador del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="60a5e-194">Si el sitio Web de hello tiene una conexión https y una dirección IP de https asociado sitio enlace toohello Hola del servidor de IIS con un enlace de certificado SSL, un nuevo enlace de sitio deberá toobe agregado para el certificado de hello con hello IP de la máquina virtual IIS de hello registrar conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="60a5e-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="60a5e-195">se pueden emitir certificados SSL de Hello en:</span><span class="sxs-lookup"><span data-stu-id="60a5e-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="60a5e-196">a) nombre de dominio completo de Hola del sitio Web de Hola</span><span class="sxs-lookup"><span data-stu-id="60a5e-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="60a5e-197">b) nombre de hello del servidor de Hola</span><span class="sxs-lookup"><span data-stu-id="60a5e-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="60a5e-198">c) un certificado comodín con nombre de dominio de Hola</span><span class="sxs-lookup"><span data-stu-id="60a5e-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="60a5e-199">d) una dirección IP: si se emite certificados SSL de hello en IP Hola Hola del servidor de IIS, otro toobe de necesidades de certificado SSL emitido en la dirección IP de Hola de hello servidor IIS en el sitio de Azure de Hola y un enlace de SSL adicional para este certificado será necesario toobe creado.</span><span class="sxs-lookup"><span data-stu-id="60a5e-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="60a5e-200">Por lo tanto, es aconsejable toonot un certificado SSL emitido en IP.</span><span class="sxs-lookup"><span data-stu-id="60a5e-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="60a5e-201">Esta es una opción que apenas se usa y que pronto quedará en desuso a tenor de los nuevos cambios de CA/Browser Forum.</span><span class="sxs-lookup"><span data-stu-id="60a5e-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="60a5e-202">Dependencia de Hola de actualización entre web de Hola y de capa de aplicación Hola</span><span class="sxs-lookup"><span data-stu-id="60a5e-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="60a5e-203">Si tiene una dependencia de aplicación específico basada en dirección IP de Hola de máquinas virtuales de hello, necesita tooupdate esta conmutación por error de dependencia post.</span><span class="sxs-lookup"><span data-stu-id="60a5e-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="60a5e-204">Realización de una conmutación por error de prueba</span><span class="sxs-lookup"><span data-stu-id="60a5e-204">Doing a test failover</span></span>
<span data-ttu-id="60a5e-205">Siga [esta guía](site-recovery-test-failover-to-azure.md) toodo una conmutación por error de prueba.</span><span class="sxs-lookup"><span data-stu-id="60a5e-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="60a5e-206">Vaya tooAzure portal y seleccione el almacén del servicio de recuperación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="60a5e-207">Haga clic en el plan de recuperación de hello creado para la granja de servidores de web IIS.</span><span class="sxs-lookup"><span data-stu-id="60a5e-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="60a5e-208">Haga clic en 'Probar conmutación por error'.</span><span class="sxs-lookup"><span data-stu-id="60a5e-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="60a5e-209">Seleccione el punto de recuperación y el proceso de conmutación por error de prueba de red virtual de Azure toostart Hola.</span><span class="sxs-lookup"><span data-stu-id="60a5e-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="60a5e-210">Una vez que el entorno secundario hello es hacia arriba, puede realizar sus validaciones.</span><span class="sxs-lookup"><span data-stu-id="60a5e-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="60a5e-211">Después de completar las validaciones de hello, puede seleccionar 'Validaciones completar' y entorno de conmutación por error de prueba de Hola se borrarán.</span><span class="sxs-lookup"><span data-stu-id="60a5e-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="60a5e-212">Realización de una conmutación por error</span><span class="sxs-lookup"><span data-stu-id="60a5e-212">Doing a failover</span></span>
<span data-ttu-id="60a5e-213">Siga [estas directrices](site-recovery-failover.md) cuando realice una conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="60a5e-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="60a5e-214">Vaya tooAzure portal y seleccione el almacén del servicio de recuperación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="60a5e-215">Haga clic en el plan de recuperación de hello creado para la granja de servidores de web IIS.</span><span class="sxs-lookup"><span data-stu-id="60a5e-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="60a5e-216">Haga clic en 'Conmutación por error'.</span><span class="sxs-lookup"><span data-stu-id="60a5e-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="60a5e-217">Seleccione el proceso de conmutación por error de Hola de toostart de punto de recuperación.</span><span class="sxs-lookup"><span data-stu-id="60a5e-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="60a5e-218">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="60a5e-218">Next steps</span></span>
<span data-ttu-id="60a5e-219">Puede obtener más información sobre la [replicación de otras aplicaciones](site-recovery-workload.md) a través de Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="60a5e-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>

---
title: "¿aaaHow realiza el trabajo de tooAzure de replicación de Hyper-V en Site Recovery? | Microsoft Docs"
description: "En este artículo se proporciona información general sobre cómo funciona la replicación de Hyper-V en Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/14/2017
ms.author: raynew
ROBOTS: NOINDEX, NOFOLLOW
redirect_url: site-recovery-architecture-hyper-v-to-azure
ms.openlocfilehash: e982806b4d6cdec2f71f82d8c73c17cc50ad3c33
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-does-hyper-v-replication-tooazure-work"></a><span data-ttu-id="eede2-104">¿Cómo funciona tooAzure de replicación de Hyper-V?</span><span class="sxs-lookup"><span data-stu-id="eede2-104">How does Hyper-V replication tooAzure work?</span></span>

<span data-ttu-id="eede2-105">Lea esta arquitectura de artículo toounderstand Hola y flujos de trabajo para tooAzure de replicación de Hyper-V con hello [Azure Site Recovery](site-recovery-overview.md) servicio.</span><span class="sxs-lookup"><span data-stu-id="eede2-105">Read this article toounderstand hello architecture and workflows for Hyper-V replication tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="eede2-106">Registrar cualquier comentario a la parte inferior de este artículo, o en Hola de hello [foro de servicios de recuperación de Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="eede2-106">Post any comments at hello bottom of this article, or in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="eede2-107">Puede replicar Hola siguientes tooAzure:</span><span class="sxs-lookup"><span data-stu-id="eede2-107">You can replicate hello following tooAzure:</span></span>
- <span data-ttu-id="eede2-108">**Hyper-V con VMM**: máquinas virtuales ubicadas en hosts de Hyper-V locales que se administran en nubes de System Center Virtual MAchine Manager (VMM).</span><span class="sxs-lookup"><span data-stu-id="eede2-108">**Hyper-V with VMM**: VMs located on on-premises Hyper-V hosts managed in  System Center Virtual MAchine Manager (VMM) clouds.</span></span> <span data-ttu-id="eede2-109">Los hosts pueden ejecutar cualquier [sistema operativo compatible](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span><span class="sxs-lookup"><span data-stu-id="eede2-109">Hosts can be running any [supported operating system](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span> <span data-ttu-id="eede2-110">Puede replicar máquinas virtuales de Hyper-V que ejecuten cualquier sistema operativo invitado [compatible con Hyper-V y Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span><span class="sxs-lookup"><span data-stu-id="eede2-110">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>
- <span data-ttu-id="eede2-111">**Hyper-V sin VMM**: máquinas virtuales locales que se encuentran en hosts de Hyper-V que no se administran en nubes de VMM.</span><span class="sxs-lookup"><span data-stu-id="eede2-111">**Hyper-V without VMM**: On-premises VMs located on Hyper-V hosts that aren't managed in VMM clouds.</span></span> <span data-ttu-id="eede2-112">Hosts pueden ejecutar cualquiera de hello [los sistemas operativos compatibles](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span><span class="sxs-lookup"><span data-stu-id="eede2-112">Hosts can run any of hello [supported operating systems](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span></span> <span data-ttu-id="eede2-113">Puede replicar máquinas virtuales de Hyper-V que ejecuten cualquier sistema operativo invitado [compatible con Hyper-V y Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span><span class="sxs-lookup"><span data-stu-id="eede2-113">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="eede2-114">Componentes de la arquitectura</span><span class="sxs-lookup"><span data-stu-id="eede2-114">Architectural components</span></span>

<span data-ttu-id="eede2-115">**Ámbito**</span><span class="sxs-lookup"><span data-stu-id="eede2-115">**Area**</span></span> | <span data-ttu-id="eede2-116">**Componente**</span><span class="sxs-lookup"><span data-stu-id="eede2-116">**Component**</span></span> | <span data-ttu-id="eede2-117">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="eede2-117">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="eede2-118">**Las tablas de Azure**</span><span class="sxs-lookup"><span data-stu-id="eede2-118">**Azure**</span></span> | <span data-ttu-id="eede2-119">En Azure, necesitará una cuenta de Microsoft Azure, una cuenta de almacenamiento de Azure y una red de Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-119">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="eede2-120">Las de almacenamiento y red pueden basarse en cuentas de Resource Manager o cuentas clásicas.</span><span class="sxs-lookup"><span data-stu-id="eede2-120">Storage and network can be Resource Manager-based, or classic accounts.</span></span><br/><br/> <span data-ttu-id="eede2-121">Los datos replicados se almacenan en la cuenta de almacenamiento de Hola y máquinas virtuales de Azure se crean con datos saludo replican Cuando se produce la conmutación por error desde el sitio local.</span><span class="sxs-lookup"><span data-stu-id="eede2-121">Replicated data is stored in hello storage account, and Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="eede2-122">Hola máquinas virtuales de Azure Conéctese toohello red virtual de Azure cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="eede2-122">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="eede2-123">**Servidor VMM**</span><span class="sxs-lookup"><span data-stu-id="eede2-123">**VMM server**</span></span> | <span data-ttu-id="eede2-124">Hosts de Hyper-V ubicados en nubes de VMM</span><span class="sxs-lookup"><span data-stu-id="eede2-124">Hyper-V hosts located in VMM clouds</span></span> | <span data-ttu-id="eede2-125">Si los hosts de Hyper-V se administran en nubes de VMM, debe registrar servidor VMM hello en hello que del almacén de servicios de recuperación.</span><span class="sxs-lookup"><span data-stu-id="eede2-125">If Hyper-V hosts are managed in VMM clouds, you register hello VMM server in hello Recovery Services vault.</span></span><br/><br/> <span data-ttu-id="eede2-126">En el servidor VMM de hello instala la replicación de tooorchestrate de proveedor de Site Recovery Hola con Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-126">On hello VMM server you install hello Site Recovery Provider tooorchestrate replication with Azure.</span></span><br/><br/> <span data-ttu-id="eede2-127">Necesita lógica y redes de VM configurada tooconfigure la asignación de red.</span><span class="sxs-lookup"><span data-stu-id="eede2-127">You need logical and VM networks set up tooconfigure network mapping.</span></span> <span data-ttu-id="eede2-128">Una red de VM debe ser tooa vinculado red lógica que esté asociada con la nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-128">A VM network should be linked tooa logical network that's associated with hello cloud.</span></span>
<span data-ttu-id="eede2-129">**Host de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="eede2-129">**Hyper-V host**</span></span> | <span data-ttu-id="eede2-130">Los servidores de Hyper-V pueden implementarse con o sin servidor de VMM.</span><span class="sxs-lookup"><span data-stu-id="eede2-130">Hyper-V servers can be deployed with or without VMM server.</span></span> | <span data-ttu-id="eede2-131">Si no hay ningún servidor VMM, proveedor de Site Recovery se instala en la replicación de hello host tooorchestrate con Site Recovery a través de Hola Hola internet.</span><span class="sxs-lookup"><span data-stu-id="eede2-131">If there's no VMM server, hello Site Recovery Provider is installed on hello host tooorchestrate replication with Site Recovery over hello internet.</span></span> <span data-ttu-id="eede2-132">Si hay un servidor de VMM, Hola proveedor está instalado en él y no en el host de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-132">If there's a VMM server, hello Provider is installed on it, and not on hello host.</span></span><br/><br/> <span data-ttu-id="eede2-133">agente de servicios de recuperación de Hello está instalado en la replicación de datos de hello host toohandle.</span><span class="sxs-lookup"><span data-stu-id="eede2-133">hello Recovery Services agent is installed on hello host toohandle data replication.</span></span><br/><br/> <span data-ttu-id="eede2-134">Las comunicaciones de hello proveedor y agente de hello son seguro y está cifrado.</span><span class="sxs-lookup"><span data-stu-id="eede2-134">Communications from both hello Provider and hello agent are secure and encrypted.</span></span> <span data-ttu-id="eede2-135">También se cifran los datos replicados en el almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-135">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="eede2-136">**Máquinas virtuales de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="eede2-136">**Hyper-V VMs**</span></span> | <span data-ttu-id="eede2-137">Necesita uno o más máquinas virtuales en el servidor de host de Hyper-V de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-137">You need one or more VMs on hello Hyper-V host server.</span></span> | <span data-ttu-id="eede2-138">Es necesario ninguna acción tooexplicitly instalado en máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="eede2-138">Nothing needs tooexplicitly installed on VMs</span></span>

## <a name="deployment-steps"></a><span data-ttu-id="eede2-139">Pasos de implementación</span><span class="sxs-lookup"><span data-stu-id="eede2-139">Deployment steps</span></span>

1. <span data-ttu-id="eede2-140">**Azure**: configurar Hola de componentes de Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-140">**Azure**: You set up hello Azure components.</span></span> <span data-ttu-id="eede2-141">Se recomienda que configure las cuentas de almacenamiento y de red antes de comenzar la implementación de Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="eede2-141">We recommend you set up storage and network accounts before you begin Site Recovery deployment.</span></span>
2. <span data-ttu-id="eede2-142">**Almacén**: cree un almacén de Recovery Services para Site Recovery y configúrelo, incluidas las opciones de origen y de destino, una directiva de replicación, finalmente, habilite la replicación.</span><span class="sxs-lookup"><span data-stu-id="eede2-142">**Vault**: You create a Recovery Services vault for Site Recovery, and configure vault settings, including configuring source and target settings, setting up a replication policy, and enabling replication.</span></span>
3. <span data-ttu-id="eede2-143">**Origen y destino**:</span><span class="sxs-lookup"><span data-stu-id="eede2-143">**Source and target**:</span></span>
    - <span data-ttu-id="eede2-144">**Hosts de Hyper-V en nubes de VMM**: como parte de la especificación de configuración de origen, descargar e instalar hello Azure Site Recovery Provider en el servidor VMM de Hola y el agente de servicios de recuperación de Azure de hello en cada host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="eede2-144">**Hyper-V hosts in VMM clouds**: As part of specifying source settings, you download and install hello Azure Site Recovery Provider on hello VMM server, and hello Azure Recovery Services agent on each Hyper-V host.</span></span> <span data-ttu-id="eede2-145">origen de Hello será el servidor VMM de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-145">hello source will be hello VMM server.</span></span> <span data-ttu-id="eede2-146">destino de Hello es Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-146">hello target is Azure.</span></span>
    - <span data-ttu-id="eede2-147">Hosts de Hyper-V sin WMM: cuando se especifica la configuración del código fuente, descargar e instalar Hola proveedor y el agente en cada host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="eede2-147">Hyper-V hosts without VMM: When you specify source settings, you download and install hello Provider and agent on each Hyper-V host.</span></span> <span data-ttu-id="eede2-148">Durante la implementación recopilar hosts hello en un sitio de Hyper-V y especificar este sitio como origen de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-148">During deployment you gather hello hosts into a Hyper-V site, and specify this site as hello source.</span></span> <span data-ttu-id="eede2-149">destino de Hello es Azure.</span><span class="sxs-lookup"><span data-stu-id="eede2-149">hello target is Azure.</span></span>

    <span data-ttu-id="eede2-150">![Replicación de Hyper-V o VMM tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![tooAzure de replicación de sitio de Hyper-V](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span><span class="sxs-lookup"><span data-stu-id="eede2-150">![Hyper-V/VMM replication tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![Hyper-V site replication tooAzure](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span></span>


4. <span data-ttu-id="eede2-151">**Directiva de replicación**: crear una directiva de replicación de sitio de Hyper-V de Hola o de nube de VMM.</span><span class="sxs-lookup"><span data-stu-id="eede2-151">**Replication policy**: You create a replication policy for hello Hyper-V site or VMM cloud.</span></span> <span data-ttu-id="eede2-152">Directiva de Hello es máquinas virtuales de tooall aplicado ubicadas en hosts en el sitio de Hola o en la nube.</span><span class="sxs-lookup"><span data-stu-id="eede2-152">hello policy is applied tooall VMs located on hosts in hello site or cloud.</span></span>
5. <span data-ttu-id="eede2-153">**Habilitación de la replicación**: habilite la replicación de máquinas virtuales de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="eede2-153">**Enable replication**: You enable replication for Hyper-V VMs.</span></span> <span data-ttu-id="eede2-154">Se produce la replicación inicial según la configuración de directiva de replicación de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-154">Initial replication occurs in accordance with hello replication policy settings.</span></span> <span data-ttu-id="eede2-155">Se realiza el seguimiento de cambios de datos y la replicación de diferencias cambios tooAzure comienza después de que finalice la replicación inicial de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-155">Data changes are tracked, and replication of delta changes tooAzure begins after hello initial replication finishes.</span></span> <span data-ttu-id="eede2-156">Las marcas de revisión de un elemento se conservan en un archivo .hrl.</span><span class="sxs-lookup"><span data-stu-id="eede2-156">Tracked changes for an item are held in a .hrl file.</span></span>
6. <span data-ttu-id="eede2-157">**Probar la conmutación por error**: ejecutar una toomake de conmutación por error de prueba que todo funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="eede2-157">**Test failover**:  You run a test failover toomake sure everything's working as expected.</span></span>

<span data-ttu-id="eede2-158">Más información acerca de la implementación:</span><span class="sxs-lookup"><span data-stu-id="eede2-158">Learn more about deployment:</span></span>
- [<span data-ttu-id="eede2-159">Empezar a trabajar con tooAzure de replicación de máquina virtual de Hyper-V - con VMM</span><span class="sxs-lookup"><span data-stu-id="eede2-159">Get started with Hyper-V VM replication tooAzure - with VMM</span></span>](site-recovery-vmm-to-azure.md)
- [<span data-ttu-id="eede2-160">Empezar a trabajar con tooAzure de replicación de máquina virtual de Hyper-V - sin VMM</span><span class="sxs-lookup"><span data-stu-id="eede2-160">Get started with Hyper-V VM replication tooAzure - without VMM</span></span>](site-recovery-hyper-v-site-to-azure.md)

## <a name="hyper-v-replication-workflow"></a><span data-ttu-id="eede2-161">Flujo de trabajo de replicación de Hyper-V</span><span class="sxs-lookup"><span data-stu-id="eede2-161">Hyper-V replication workflow</span></span>

### <a name="enable-protection"></a><span data-ttu-id="eede2-162">Habilitar protección</span><span class="sxs-lookup"><span data-stu-id="eede2-162">Enable protection</span></span>

1. <span data-ttu-id="eede2-163">Después de habilitar la protección de una máquina virtual de Hyper-V, Hola portal de Azure o de forma local, Hola **habilitar la protección** inicia.</span><span class="sxs-lookup"><span data-stu-id="eede2-163">After you enable protection for a Hyper-V VM, in hello Azure portal or on-premises, hello **Enable protection** starts.</span></span>
2. <span data-ttu-id="eede2-164">Hello trabajo comprueba esa máquina Hola cumple los requisitos previos, antes de invocar hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset la replicación con la configuración de Hola que haya configurado.</span><span class="sxs-lookup"><span data-stu-id="eede2-164">hello job checks that hello machine complies with prerequisites, before invoking hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset up replication with hello settings you've configured.</span></span>
3. <span data-ttu-id="eede2-165">trabajo de Hello inicia la replicación inicial mediante la invocación de hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) método, tooinitialize una réplica completa de la máquina virtual y tooAzure de discos virtuales de envío Hola la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="eede2-165">hello job starts initial replication by invoking hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, tooinitialize a full VM replication, and send hello VM's virtual disks tooAzure.</span></span>
4. <span data-ttu-id="eede2-166">Puede supervisar el trabajo de Hola Hola **trabajos** ficha.      ![Lista Trabajos](media/site-recovery-hyper-v-azure-architecture/image1.png)![Detalles de Habilitar protección](media/site-recovery-hyper-v-azure-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="eede2-166">You can monitor hello job in hello **Jobs** tab.      ![Jobs list](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Enable protection drill down](media/site-recovery-hyper-v-azure-architecture/image2.png)</span></span>

### <a name="initial-replication"></a><span data-ttu-id="eede2-167">Replicación inicial</span><span class="sxs-lookup"><span data-stu-id="eede2-167">Initial replication</span></span>

1. <span data-ttu-id="eede2-168">Cuando se desencadena la replicación inicial, se toma una [instantánea de la máquina virtual de Hyper-V](https://technet.microsoft.com/library/dd560637.aspx).</span><span class="sxs-lookup"><span data-stu-id="eede2-168">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="eede2-169">Discos duros virtuales están replicados uno por uno hasta que sean más tooAzure copiado todos los.</span><span class="sxs-lookup"><span data-stu-id="eede2-169">Virtual hard disks are replicated one by one until they're all copied tooAzure.</span></span> <span data-ttu-id="eede2-170">Se puede tardar varios minutos, según Hola tamaño de máquina virtual y ancho de banda de red.</span><span class="sxs-lookup"><span data-stu-id="eede2-170">It could take a while, depending on hello VM size, and network bandwidth.</span></span> <span data-ttu-id="eede2-171">toooptimize el uso de la red, consulte [cómo toomanage local uso de ancho de banda de red de tooAzure protección](https://support.microsoft.com/kb/3056159).</span><span class="sxs-lookup"><span data-stu-id="eede2-171">toooptimize your network usage, see [How toomanage on-premises tooAzure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="eede2-172">Si se producen cambios de disco mientras la replicación inicial está en curso, Hola Rastreador de replicación de réplica de Hyper-V realiza un seguimiento de los cambios como registros de replicación de Hyper-V (.hrl).</span><span class="sxs-lookup"><span data-stu-id="eede2-172">If disk changes occur while initial replication is in progress, hello Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="eede2-173">Estos archivos se encuentran en hello misma carpeta que los discos de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-173">These files are located in hello same folder as hello disks.</span></span> <span data-ttu-id="eede2-174">Cada disco tiene un archivo de .hrl asociados que se enviarán toosecondary almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="eede2-174">Each disk has an associated .hrl file that will be sent toosecondary storage.</span></span>
4. <span data-ttu-id="eede2-175">archivos de instantáneas y de registro de Hello consumen recursos de disco mientras la replicación inicial está en curso.</span><span class="sxs-lookup"><span data-stu-id="eede2-175">hello snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="eede2-176">Cuando finalice la replicación inicial de hello, se elimina la instantánea de la VM de Hola.</span><span class="sxs-lookup"><span data-stu-id="eede2-176">When hello initial replication finishes, hello VM snapshot is deleted.</span></span> <span data-ttu-id="eede2-177">Cambios realizados en el registro de hello en el disco de delta son disco primario con toohello combinada y sin sincronizar.</span><span class="sxs-lookup"><span data-stu-id="eede2-177">Delta disk changes in hello log are synchronized and merged toohello parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="eede2-178">Fin de la protección</span><span class="sxs-lookup"><span data-stu-id="eede2-178">Finalize protection</span></span>

1. <span data-ttu-id="eede2-179">Al finalizar la replicación inicial de hello, hello **finalizar la protección en la máquina virtual de hello** trabajo configura la red y otras configuraciones posteriores a la replicación, para que la máquina virtual de hello está protegida.</span><span class="sxs-lookup"><span data-stu-id="eede2-179">After hello initial replication finishes, hello **Finalize protection on hello virtual machine** job configures network and other post-replication settings, so that hello virtual machine is protected.</span></span>
    <span data-ttu-id="eede2-180">![Trabajo de finalización de la protección](media/site-recovery-hyper-v-azure-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="eede2-180">![Finalize protection job](media/site-recovery-hyper-v-azure-architecture/image3.png)</span></span>
2. <span data-ttu-id="eede2-181">Si replica tooAzure, podría necesita una configuración de hello tootweak para la máquina virtual de Hola para que esté preparado para conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="eede2-181">If you're replicating tooAzure, you might need tootweak hello settings for hello virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="eede2-182">En este momento puede ejecutar un toocheck de conmutación por error de prueba que todo funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="eede2-182">At this point you can run a test failover toocheck everything is working as expected.</span></span>

### <a name="delta-replication"></a><span data-ttu-id="eede2-183">Replicación diferencial</span><span class="sxs-lookup"><span data-stu-id="eede2-183">Delta replication</span></span>

1. <span data-ttu-id="eede2-184">Después de la replicación inicial de hello, sincronización delta comienza, según la configuración de replicación.</span><span class="sxs-lookup"><span data-stu-id="eede2-184">After hello initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="eede2-185">Hola Rastreador de replicación de réplica de Hyper-V realiza un seguimiento Hola cambios tooa disco duro como archivos .hrl.</span><span class="sxs-lookup"><span data-stu-id="eede2-185">hello Hyper-V Replica Replication Tracker tracks hello changes tooa virtual hard disk as .hrl files.</span></span> <span data-ttu-id="eede2-186">Cada disco configurado para la replicación tiene un archivo .hrl asociado.</span><span class="sxs-lookup"><span data-stu-id="eede2-186">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="eede2-187">Este registro se envía la cuenta de almacenamiento del cliente toohello una vez completada la replicación inicial.</span><span class="sxs-lookup"><span data-stu-id="eede2-187">This log is sent toohello customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="eede2-188">Cuando un registro está en tránsito tooAzure, se realiza el seguimiento de cambios de hello en el disco principal de hello en otro archivo de registro de hello mismo directorio.</span><span class="sxs-lookup"><span data-stu-id="eede2-188">When a log is in transit tooAzure, hello changes in hello primary disk are tracked in another log file, in hello same directory.</span></span>
3. <span data-ttu-id="eede2-189">Durante la replicación inicial y las diferencias, puede supervisar Hola VM Hola vista de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="eede2-189">During initial and delta replication, you can monitor hello VM in hello VM view.</span></span> <span data-ttu-id="eede2-190">[Más información](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="eede2-190">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="replication-synchronization"></a><span data-ttu-id="eede2-191">Sincronización de las replicaciones</span><span class="sxs-lookup"><span data-stu-id="eede2-191">Replication synchronization</span></span>

1. <span data-ttu-id="eede2-192">Si se produce un error en la replicación diferencial y una replicación completa sería costosa en términos de ancho de banda o de tiempo, se marca una máquina virtual para la resincronización.</span><span class="sxs-lookup"><span data-stu-id="eede2-192">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="eede2-193">Por ejemplo, si los archivos de .hrl Hola llegan a 50% del tamaño de disco de hello, a continuación, hello VM se marcarán para volver a sincronizar.</span><span class="sxs-lookup"><span data-stu-id="eede2-193">For example, if hello .hrl files reach 50% of hello disk size, then hello VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="eede2-194">Resincronización minimiza la cantidad de Hola de datos enviados por el cálculo de sumas de comprobación de Hola de origen y destino de máquinas virtuales y enviar solo Hola diferencias de datos.</span><span class="sxs-lookup"><span data-stu-id="eede2-194">Resynchronization minimizes hello amount of data sent by computing checksums of hello source and target virtual machines, and sending only hello delta data.</span></span> <span data-ttu-id="eede2-195">La resincronización utiliza un algoritmo de fragmentación de bloques fijos donde los archivos de origen y destino se dividen en fragmentos fijos.</span><span class="sxs-lookup"><span data-stu-id="eede2-195">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="eede2-196">Las sumas de comprobación para cada fragmento se generan y, a continuación, en comparación con toodetermine que bloquea el destino de hello origen necesidad toobe toohello aplicada.</span><span class="sxs-lookup"><span data-stu-id="eede2-196">Checksums for each chunk are generated and then compared toodetermine which blocks from hello source need toobe applied toohello target.</span></span>
3. <span data-ttu-id="eede2-197">Una vez finalizada la resincronización, se debe reanudar la replicación diferencial normal.</span><span class="sxs-lookup"><span data-stu-id="eede2-197">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="eede2-198">De forma predeterminada la resincronización es toorun programada automáticamente fuera del horario de oficina, pero puede volver a sincronizar una máquina virtual manualmente.</span><span class="sxs-lookup"><span data-stu-id="eede2-198">By default resynchronization is scheduled toorun automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="eede2-199">Por ejemplo, si se produce una interrupción de la red o de otro tipo, la resincronización se puede reanudar.</span><span class="sxs-lookup"><span data-stu-id="eede2-199">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="eede2-200">toodo, seleccione Hola VM en el portal de hello > **resincronizar**.</span><span class="sxs-lookup"><span data-stu-id="eede2-200">toodo this, select hello VM in hello portal > **Resynchronize**.</span></span>

    ![Resincronización manual](media/site-recovery-hyper-v-azure-architecture/image4.png)


### <a name="retries"></a><span data-ttu-id="eede2-202">Reintentos</span><span class="sxs-lookup"><span data-stu-id="eede2-202">Retries</span></span>

<span data-ttu-id="eede2-203">Si se produce un error de replicación, se realiza un reintento de forma predefinida.</span><span class="sxs-lookup"><span data-stu-id="eede2-203">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="eede2-204">Esta lógica se puede clasificar en dos categorías:</span><span class="sxs-lookup"><span data-stu-id="eede2-204">This logic can be classified into two categories:</span></span>

<span data-ttu-id="eede2-205">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="eede2-205">**Category**</span></span> | <span data-ttu-id="eede2-206">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="eede2-206">**Details**</span></span>
--- | ---
<span data-ttu-id="eede2-207">**Errores irrecuperables**</span><span class="sxs-lookup"><span data-stu-id="eede2-207">**Non-recoverable errors**</span></span> | <span data-ttu-id="eede2-208">No se realiza ningún reintento.</span><span class="sxs-lookup"><span data-stu-id="eede2-208">No retry is attempted.</span></span> <span data-ttu-id="eede2-209">El estado de la máquina virtual será **Crítico** y se requiere la intervención del administrador.</span><span class="sxs-lookup"><span data-stu-id="eede2-209">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="eede2-210">Algunos ejemplos de estos errores son: divide la cadena de disco duro virtual; Estado no válido para la réplica de hello VM; Errores de autenticación de red: errores de autorización; Máquina virtual no se encontró errores (para servidores de Hyper-V independiente)</span><span class="sxs-lookup"><span data-stu-id="eede2-210">Examples of these errors include: broken VHD chain; Invalid state for hello replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="eede2-211">**Errores recuperables**</span><span class="sxs-lookup"><span data-stu-id="eede2-211">**Recoverable errors**</span></span> | <span data-ttu-id="eede2-212">Reintentos posteriores ocurren cada intervalo de replicación, con un retroceso exponencial que aumenta el intervalo de reintento de Hola desde el inicio de hello del primer intento de Hola por 1, 2, 4, 8 y 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="eede2-212">Retries occur every replication interval, using an exponential back-off that increases hello retry interval from hello start of hello first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="eede2-213">Si el error persiste, reintente cada 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="eede2-213">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="eede2-214">Ejemplos: errores de red; errores de espacio insuficiente en disco; memoria insuficiente</span><span class="sxs-lookup"><span data-stu-id="eede2-214">Examples include: network errors; low disk  errors; low memory conditions</span></span> |

## <a name="protection-and-recovery-lifecycle"></a><span data-ttu-id="eede2-215">Ciclo de vida de la protección y la recuperación</span><span class="sxs-lookup"><span data-stu-id="eede2-215">Protection and recovery lifecycle</span></span>

![flujo de trabajo](./media/site-recovery-components/arch-hyperv-azure-workflow.png)

## <a name="next-steps"></a><span data-ttu-id="eede2-217">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="eede2-217">Next steps</span></span>

- [<span data-ttu-id="eede2-218">Comprobación de los requisitos previos de implementación</span><span class="sxs-lookup"><span data-stu-id="eede2-218">Check deployment prerequisites</span></span>](site-recovery-prereq.md)
- <span data-ttu-id="eede2-219">Solución de problemas con:</span><span class="sxs-lookup"><span data-stu-id="eede2-219">Troubleshoot with:</span></span>
    - [<span data-ttu-id="eede2-220">Supervisión y solución de problemas de protección</span><span class="sxs-lookup"><span data-stu-id="eede2-220">Monitor and troubleshoot protection</span></span>](site-recovery-monitoring-and-troubleshooting.md)
    - [<span data-ttu-id="eede2-221">Ayuda del soporte técnico de Microsoft</span><span class="sxs-lookup"><span data-stu-id="eede2-221">Help from Microsoft support</span></span>](site-recovery-monitoring-and-troubleshooting.md#reach-out-for-microsoft-support)
    - [<span data-ttu-id="eede2-222">Errores comunes y soluciones</span><span class="sxs-lookup"><span data-stu-id="eede2-222">Common errors and resolutions</span></span>](site-recovery-monitoring-and-troubleshooting.md#common-azure-site-recovery-errors-and-their-resolutions)

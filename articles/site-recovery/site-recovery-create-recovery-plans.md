---
title: "Creación de planes de recuperación para conmutación por error y recuperación en Azure Site Recovery | Microsoft Docs"
description: "Se describe cómo crear y personalizar planes de recuperación en Azure Site Recovery para conmutar por error y recuperar máquinas virtuales y servidores físicos."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 1b0d64cd592c4738311797b826e490639340f92a
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="e36a4-103">Creación de planes de recuperación</span><span class="sxs-lookup"><span data-stu-id="e36a4-103">Create recovery plans</span></span>


<span data-ttu-id="e36a4-104">En este artículo se proporciona información sobre cómo crear y personalizar planes de recuperación en [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e36a4-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="e36a4-105">Publique cualquier comentario o pregunta que tenga en la parte inferior de este artículo, o bien en el [foro de Servicios de recuperación de Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="e36a4-105">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="e36a4-106">Cree planes de recuperación para realizar las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="e36a4-106">Create recovery plans to do the following:</span></span>

* <span data-ttu-id="e36a4-107">Definen grupos de máquinas que conmutan por error juntas y también se inician juntas.</span><span class="sxs-lookup"><span data-stu-id="e36a4-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="e36a4-108">Modelan dependencias entre máquinas, agrupándolas en un grupo de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="e36a4-109">Por ejemplo, para conmutar por error y abrir una aplicación específica, agrupe todas las máquinas virtuales de dicha aplicación en el mismo grupo de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-109">For example, to fail over and bring up a specific application, you group all of the VMs for that application into the same recovery plan group.</span></span>
* <span data-ttu-id="e36a4-110">Ejecutar una conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="e36a4-110">Run a failover.</span></span> <span data-ttu-id="e36a4-111">Puede ejecutar una conmutación por error de prueba, planeada o no planeada en un plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="e36a4-112">Creación de un plan de recuperación</span><span class="sxs-lookup"><span data-stu-id="e36a4-112">Create a recovery plan</span></span>

1. <span data-ttu-id="e36a4-113">Haga clic en **Planes de recuperación** > **Crear plan de recuperación**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="e36a4-114">Especifique un nombre para el plan de recuperación y un origen y destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-114">Specify a name for the recovery plan, and a source and target.</span></span> <span data-ttu-id="e36a4-115">La ubicación de origen debe tener máquinas virtuales habilitadas para conmutación por error y recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-115">The source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="e36a4-116">Para la replicación de VMM a VMM, seleccione **Tipo de origen** > **VMM** y los servidores VMM de origen y destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-116">For VMM to VMM replication, select **Source Type** > **VMM**, and the source and target VMM servers.</span></span> <span data-ttu-id="e36a4-117">Haga clic en **Hyper-V** para ver las nubes que están protegidas.</span><span class="sxs-lookup"><span data-stu-id="e36a4-117">Click **Hyper-V** to see clouds that are protected.</span></span>
    - <span data-ttu-id="e36a4-118">Para la replicación de VMM en Azure, seleccione **Tipo de origen** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-118">For VMM to Azure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="e36a4-119">Seleccione el servidor VMM de origen y **Azure** como destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-119">Select the source VMM server, and **Azure** as the target.</span></span>
    - <span data-ttu-id="e36a4-120">Para la replicación de Hyper-V en Azure (sin VMM), seleccione **Tipo de origen** > **Sitio Hyper-V**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-120">For Hyper-V replication to Azure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="e36a4-121">Seleccione el sitio como origen y **Azure** como destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-121">Select the site as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="e36a4-122">Para la replicación de una máquina virtual de VMware o un servidor local físico en Azure, seleccione un servidor de configuración como origen y **Azure** como destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-122">For a VMware VM or a physical on-premises server to Azure, select a configuration server as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="e36a4-123">Para un plan de recuperación de Azure en Azure, seleccione una región de Azure como origen y otra secundaria de Azure como destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-123">For a Azure to Azure recovery plan, select a Azure region as the source, and a secondary Azure region as the target.</span></span> <span data-ttu-id="e36a4-124">Las regiones de Azure secundarias son únicamente aquellas en las que se protegen las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="e36a4-124">The secondary Azure regions are only those to which virtual machines are protected.</span></span>
2. <span data-ttu-id="e36a4-125">En **Seleccionar máquinas virtuales**, seleccione las máquinas virtuales (o un grupo de replicación) que desee agregar al grupo predeterminado (Grupo 1) del plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-125">In **Select virtual machines**, select the virtual machines (or replication group) that you want to add to the default group (Group 1) in the recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="e36a4-126">Personalización y extensión de planes de recuperación</span><span class="sxs-lookup"><span data-stu-id="e36a4-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="e36a4-127">Puede personalizar y extender los planes de recuperación:</span><span class="sxs-lookup"><span data-stu-id="e36a4-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="e36a4-128">**Agregar grupos nuevos**: agregue más grupos de planes de recuperación (hasta siete) al grupo predeterminado y después agregue más máquinas o grupos de replicación a esos grupos de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-128">**Add new groups**—Add additional recovery plan groups (up to seven) to the default group, and then add more machines or replication groups to those recovery plan groups.</span></span> <span data-ttu-id="e36a4-129">Los grupos se numeran en el orden en que se agregan.</span><span class="sxs-lookup"><span data-stu-id="e36a4-129">Groups are numbered in the order in which you add them.</span></span> <span data-ttu-id="e36a4-130">Solo se puede incluir una máquina virtual o un grupo de replicación en un grupo de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="e36a4-131">**Agregar una acción manual**: puede agregar acciones manuales que se ejecuten antes o después de un grupo de planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="e36a4-132">Cuando se ejecuta el plan de recuperación, se detiene en el punto en que se insertó la acción manual.</span><span class="sxs-lookup"><span data-stu-id="e36a4-132">When the recovery plan runs, it stops at the point at which you inserted the manual action.</span></span> <span data-ttu-id="e36a4-133">En un cuadro de diálogo, se le pide que especifique que se completó la acción manual.</span><span class="sxs-lookup"><span data-stu-id="e36a4-133">A dialog box prompts you to specify that the manual action was completed.</span></span>
- <span data-ttu-id="e36a4-134">**Agregar un script**: puede agregar scripts que se ejecutan antes o después de un grupo de planes recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="e36a4-135">Cuando agrega un script, este agrega un nuevo conjunto de acciones al grupo.</span><span class="sxs-lookup"><span data-stu-id="e36a4-135">When you add a script, it adds a new set of actions for the group.</span></span> <span data-ttu-id="e36a4-136">Por ejemplo, un conjunto de pasos previos para el grupo 1 se creará con el nombre: Grupo 1: pasos previos.</span><span class="sxs-lookup"><span data-stu-id="e36a4-136">For example, a set of pre-steps for Group 1 will be created with the name: Group 1: pre-steps.</span></span> <span data-ttu-id="e36a4-137">Dentro de este conjunto se enumerarán todos los pasos previos.</span><span class="sxs-lookup"><span data-stu-id="e36a4-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="e36a4-138">Solo puede agregar un script en el sitio principal si hay un servidor VMM implementado.</span><span class="sxs-lookup"><span data-stu-id="e36a4-138">You can only add a script on the primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="e36a4-139">**Agregar runbooks de Azure**: puede extender planes de recuperación con runbooks de Azure.</span><span class="sxs-lookup"><span data-stu-id="e36a4-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="e36a4-140">Por ejemplo, para automatizar tareas o para crear una recuperación en un solo paso.</span><span class="sxs-lookup"><span data-stu-id="e36a4-140">For example, to automate tasks, or to create single-step recovery.</span></span> <span data-ttu-id="e36a4-141">[Más información](site-recovery-runbook-automation.md).</span><span class="sxs-lookup"><span data-stu-id="e36a4-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="e36a4-142">Incorporación de scripts</span><span class="sxs-lookup"><span data-stu-id="e36a4-142">Add scripts</span></span>

<span data-ttu-id="e36a4-143">Puede usar scripts de PowerShell en los planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="e36a4-144">Asegúrese de que los scripts usan bloques try-catch para que las excepciones se controlen correctamente.</span><span class="sxs-lookup"><span data-stu-id="e36a4-144">Ensure that scripts use try-catch blocks so that the exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="e36a4-145">Si hay alguna excepción en el script, deja de funcionar y la tarea muestra errores.</span><span class="sxs-lookup"><span data-stu-id="e36a4-145">If there is an exception in the script, it stops running and the task shows as failed.</span></span>
    - <span data-ttu-id="e36a4-146">Si se produce un error, el resto del script no se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="e36a4-146">If an error occurs, any remaining part of the script doesn't run.</span></span>
    - <span data-ttu-id="e36a4-147">Si se produce un error al ejecutar una conmutación por error no planeada, el plan de recuperación continúa.</span><span class="sxs-lookup"><span data-stu-id="e36a4-147">If an error occurs when you run an unplanned failover, the recovery plan continues.</span></span>
    - <span data-ttu-id="e36a4-148">Si se produce un error al ejecutar una conmutación por error planeada, el plan de recuperación se detiene.</span><span class="sxs-lookup"><span data-stu-id="e36a4-148">If an error occurs when you run a planned failover, the recovery plan stops.</span></span> <span data-ttu-id="e36a4-149">Debe corregir el script, comprobar que se ejecute según lo previsto y volver a ejecutar el plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-149">You need to fix the script, check that it runs as expected, and then run the recovery plan again.</span></span>
- <span data-ttu-id="e36a4-150">El comando Write-Host no funciona en un script de plan de recuperación y se produce un error en el script.</span><span class="sxs-lookup"><span data-stu-id="e36a4-150">The Write-Host command doesn’t work in a recovery plan script, and the script will fail.</span></span> <span data-ttu-id="e36a4-151">Para crear salida, cree un script de proxy que a su vez se ejecute el script principal.</span><span class="sxs-lookup"><span data-stu-id="e36a4-151">To create output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="e36a4-152">Asegúrese de que toda la salida se canalice mediante el comando >>.</span><span class="sxs-lookup"><span data-stu-id="e36a4-152">Make sure that all output is piped out using the >> command.</span></span>
  * <span data-ttu-id="e36a4-153">Se agota el tiempo de espera del script si no vuelve en 600 segundos.</span><span class="sxs-lookup"><span data-stu-id="e36a4-153">The script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="e36a4-154">Si se escribe algo en STDERR, el script se clasifica como con errores.</span><span class="sxs-lookup"><span data-stu-id="e36a4-154">If anything is written out to STDERR, the script is classified as failed.</span></span> <span data-ttu-id="e36a4-155">La información se muestra en los detalles de ejecución del script.</span><span class="sxs-lookup"><span data-stu-id="e36a4-155">This information is displayed in the script execution details.</span></span>

<span data-ttu-id="e36a4-156">Si utiliza VMM en la implementación:</span><span class="sxs-lookup"><span data-stu-id="e36a4-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="e36a4-157">Los scripts de los planes de recuperación se ejecutan en el contexto de la cuenta de servicio de VMM.</span><span class="sxs-lookup"><span data-stu-id="e36a4-157">Scripts in a recovery plan run in the context of the VMM Service account.</span></span> <span data-ttu-id="e36a4-158">Asegúrese de que esta cuenta tenga permisos de lectura para el recurso compartido remoto donde se encuentra el script.</span><span class="sxs-lookup"><span data-stu-id="e36a4-158">Make sure this account has Read permissions for the remote share on which the script is located.</span></span> <span data-ttu-id="e36a4-159">Pruebe a ejecutar el script en el nivel de privilegios de cuenta del servicio VMM.</span><span class="sxs-lookup"><span data-stu-id="e36a4-159">Test the script to run at the VMM service account privilege level.</span></span>
* <span data-ttu-id="e36a4-160">Los cmdlets de VMM se entregan en un módulo de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e36a4-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="e36a4-161">El módulo se instala al mismo tiempo que la consola VMM.</span><span class="sxs-lookup"><span data-stu-id="e36a4-161">The module is installed when you install the VMM console.</span></span> <span data-ttu-id="e36a4-162">Se puede cargar en el script usando este comando en el script:</span><span class="sxs-lookup"><span data-stu-id="e36a4-162">It can be loaded into your script, using the following command in the script:</span></span>
   - <span data-ttu-id="e36a4-163">Import-Module -Name virtualmachinemanager.</span><span class="sxs-lookup"><span data-stu-id="e36a4-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="e36a4-164">[Más información](https://technet.microsoft.com/library/hh875013.aspx).</span><span class="sxs-lookup"><span data-stu-id="e36a4-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="e36a4-165">Asegúrese de que tiene al menos un servidor de biblioteca en la implementación de VMM.</span><span class="sxs-lookup"><span data-stu-id="e36a4-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="e36a4-166">De forma predeterminada, la ruta de acceso del recurso compartido de biblioteca para un servidor VMM se encuentra localmente en el servidor VMM, con el nombre de carpeta MSCVMMLibrary.</span><span class="sxs-lookup"><span data-stu-id="e36a4-166">By default, the library share path for a VMM server is located locally on the VMM server, with the folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="e36a4-167">Si la ruta de acceso del recurso compartido de biblioteca es remota (o local pero no se comparte con MSCVMMLibrary), configure el recurso compartido como se indica a continuación (por ejemplo, con \\\libserver2.contoso.com\share\):</span><span class="sxs-lookup"><span data-stu-id="e36a4-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure the share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="e36a4-168">Abra el Editor del Registro y vaya a **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-168">Open the Registry Editor and navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="e36a4-169">Edite el valor **ScriptLibraryPath** y colóquelo como \\libserver2.contoso.com\share\..</span><span class="sxs-lookup"><span data-stu-id="e36a4-169">Edit the value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="e36a4-170">Especifique el nombre de dominio completo.</span><span class="sxs-lookup"><span data-stu-id="e36a4-170">Specify the full FQDN.</span></span> <span data-ttu-id="e36a4-171">Proporcione permisos a la ubicación del recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="e36a4-171">Provide permissions to the share location.</span></span>
      * <span data-ttu-id="e36a4-172">Asegúrese de probar el script con una cuenta de usuario que tenga los mismos permisos que la cuenta del servicio VMM.</span><span class="sxs-lookup"><span data-stu-id="e36a4-172">Ensure that you test the script with a user account that has the same permissions as the VMM service account.</span></span> <span data-ttu-id="e36a4-173">Esto comprueba que los scripts probados de forma independiente se ejecuten de la misma manera que lo harán en planes de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-173">This checks that standalone tested scripts run in the same way as they will in recovery plans.</span></span> <span data-ttu-id="e36a4-174">En el servidor VMM, establezca que se omita la directiva de ejecución como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="e36a4-174">On the VMM server, set the execution policy to bypass as follows:</span></span>
        * <span data-ttu-id="e36a4-175">Abra la consola de Windows PowerShell de 64 bits con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="e36a4-175">Open the 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="e36a4-176">Escriba: **Set-executionpolicy bypass**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="e36a4-177">[Más información](https://technet.microsoft.com/library/ee176961.aspx).</span><span class="sxs-lookup"><span data-stu-id="e36a4-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-to-a-plan"></a><span data-ttu-id="e36a4-178">Incorporación de un script o una acción manual a un plan</span><span class="sxs-lookup"><span data-stu-id="e36a4-178">Add a script or manual action to a plan</span></span>

<span data-ttu-id="e36a4-179">Puede agregar un script al grupo de planes de recuperación predeterminado después de haber agregado máquinas virtuales o grupos de replicación a él y de haber creado el plan.</span><span class="sxs-lookup"><span data-stu-id="e36a4-179">You can add a script to the default recovery plan group after you've added VMs or replication groups to it, and created the plan.</span></span>

1. <span data-ttu-id="e36a4-180">Abra el plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-180">Open the recovery plan.</span></span>
2. <span data-ttu-id="e36a4-181">Haga clic en un elemento en la lista **Paso** y en **Script** o **Acción manual**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-181">Click an item in the **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="e36a4-182">Especifique si desea agregar el script o la acción antes o después del elemento seleccionado.</span><span class="sxs-lookup"><span data-stu-id="e36a4-182">Specify whether to want to add the script or action before or after the selected item.</span></span> <span data-ttu-id="e36a4-183">Use los botones de comando **Subir** y **Bajar** para subir o bajar el script.</span><span class="sxs-lookup"><span data-stu-id="e36a4-183">Use the **Move Up** and **Move Down**  buttons, to move the position of the script up or down.</span></span>
4. <span data-ttu-id="e36a4-184">Si agrega un script de VMM, seleccione **Failover to VMM script** (Conmutación por error en script de VMM).</span><span class="sxs-lookup"><span data-stu-id="e36a4-184">If you add a VMM script, select **Failover to VMM script**.</span></span> <span data-ttu-id="e36a4-185">En **Ruta de acceso del script**, escriba la ruta de acceso relativa al recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="e36a4-185">In **Script Path**, type the relative path to the share.</span></span> <span data-ttu-id="e36a4-186">En el ejemplo siguiente con VMM, especifique la ruta de acceso: **\RPScripts\RPScript.PS1**.</span><span class="sxs-lookup"><span data-stu-id="e36a4-186">In the VMM example below, you specify the path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="e36a4-187">Si agrega un runbook de Azure Automation, especifique la cuenta de Azure Automation donde se encuentra el runbook y seleccione el valor de script de runbook de Azure adecuado.</span><span class="sxs-lookup"><span data-stu-id="e36a4-187">If you add an Azure automation run book, specify the Azure Automation account in which the runbook is located, and select the appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="e36a4-188">Realice una conmutación por error del plan de recuperación para asegurarse de que el script funcione según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="e36a4-188">Do a failover of the recovery plan, to make sure the script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="e36a4-189">Adición de un script de VMM</span><span class="sxs-lookup"><span data-stu-id="e36a4-189">Add a VMM script</span></span>

<span data-ttu-id="e36a4-190">Si tiene un sitio de origen VMM, puede crear un script en el servidor VMM e incluirlo en el plan de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e36a4-190">If you have a VMM source site, you can create a script on the VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="e36a4-191">Cree una carpeta en el recurso compartido de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="e36a4-191">Create a new folder in the library share.</span></span> <span data-ttu-id="e36a4-192">Por ejemplo, \<nombreDeServidorVMM>\MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="e36a4-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="e36a4-193">Colóquela en los servidores VMM de origen y destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-193">Place it on the source and target VMM servers.</span></span>
2. <span data-ttu-id="e36a4-194">Cree el script (por ejemplo, RPScript) y compruebe que funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="e36a4-194">Create the script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="e36a4-195">Coloque el script en la ubicación \<nombreDeServidorVMM>\MSSCVMMLibrary de los servidores VMM de origen y destino.</span><span class="sxs-lookup"><span data-stu-id="e36a4-195">Place the script in the location \<VMMServerName>\MSSCVMMLibrary, on the source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="e36a4-196">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e36a4-196">Next steps</span></span>

<span data-ttu-id="e36a4-197">[Aprenda más](site-recovery-failover.md) sobre la ejecución de conmutaciones por error.</span><span class="sxs-lookup"><span data-stu-id="e36a4-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>

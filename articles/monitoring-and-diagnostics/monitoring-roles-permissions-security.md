---
title: aaaGet a trabajar con roles, permisos y seguridad con el Monitor de Azure | Documentos de Microsoft
description: "Obtenga información acerca de cómo toouse Azure Monitor roles integrados y permisos toorestrict tener acceso a recursos de toomonitoring."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="8c8ae-103">Introducción a roles, permisos y seguridad con Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="8c8ae-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="8c8ae-104">Muchos equipos necesitan toostrictly regulan toomonitoring acceder a los datos y la configuración.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="8c8ae-105">Por ejemplo, si tiene los miembros del equipo que trabajan en exclusivamente de supervisión (ingenieros de soporte técnico, ingenieros de devops) o si usa un proveedor de servicios administrados, puede que desee toogrant acceso tooonly datos de supervisión al restringir su toocreate de capacidad, modificar, o eliminar los recursos.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="8c8ae-106">Este artículo muestra cómo tooquickly aplicar un supervisión RBAC rol tooa usuario integradas en Azure o crear sus propios roles personalizados para un usuario que necesita permisos de supervisión limitados.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="8c8ae-107">, A continuación, describe las consideraciones de seguridad para los recursos relacionados con el Monitor de Azure y cómo puede limitar el acceso a los datos toohello contienen.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="8c8ae-108">Roles de supervisión integrados</span><span class="sxs-lookup"><span data-stu-id="8c8ae-108">Built-in monitoring roles</span></span>
<span data-ttu-id="8c8ae-109">Funciones integradas del Monitor de Azure están diseñadas toohelp límite acceso tooresources en una suscripción mientras aún habilita los responsables de supervisar la infraestructura tooobtain y configurar los datos de Hola que necesitan.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="8c8ae-110">Azure Monitor proporciona dos roles de fábrica: un lector de supervisión y un colaborador de supervisión.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="8c8ae-111">Lector de supervisión</span><span class="sxs-lookup"><span data-stu-id="8c8ae-111">Monitoring Reader</span></span>
<span data-ttu-id="8c8ae-112">Personas asignado el rol de lector de supervisión de hello pueden ver todos los datos de supervisión en una suscripción, pero no se puede modificar cualquier recurso o editar los recursos de configuración relacionados toomonitoring.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="8c8ae-113">Esta función es adecuada para los usuarios de una organización, por ejemplo, ingenieros de soporte técnico u operaciones que necesitan toobe capaz de:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="8c8ae-114">Ver los paneles de supervisión en el portal de Hola y crear sus propios paneles de supervisión privadas.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="8c8ae-115">Consultar las métricas con hello [API de REST de Azure Monitor](https://msdn.microsoft.com/library/azure/dn931930.aspx), [cmdlets de PowerShell](insights-powershell-samples.md), o [multiplataforma CLI](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="8c8ae-116">Consulta Hola mediante el portal de hello, API de REST de Monitor de Azure, cmdlets de PowerShell o CLI multiplataforma de registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="8c8ae-117">Hola de vista [configuración de diagnóstico](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) para un recurso.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="8c8ae-118">Hola de vista [registro perfil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) para una suscripción.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="8c8ae-119">Consultar la configuración de escalado automático.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-119">View autoscale settings.</span></span>
* <span data-ttu-id="8c8ae-120">Consultar la configuración y actividad de alertas.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-120">View alert activity and settings.</span></span>
* <span data-ttu-id="8c8ae-121">Acceder a datos de Application Insights y ver los datos en AI Analytics.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="8c8ae-122">Buscar datos del área de trabajo de análisis de registros (OMS) junto con datos de uso para el área de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="8c8ae-123">Ver grupos de administración de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="8c8ae-124">Recuperar el esquema de búsqueda de hello Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="8c8ae-125">Enumerar los Intelligence Pack de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="8c8ae-126">Recuperar y ejecutar las búsquedas guardadas en Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="8c8ae-127">Recuperar la configuración de almacenamiento de hello Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="8c8ae-128">Este rol no le otorga acceso de lectura toolog datos que se ha transmitido tooan concentrador de eventos o almacenada en una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="8c8ae-129">[Vea más adelante](#security-considerations-for-monitoring-data) para obtener información acerca de cómo configurar el acceso a los recursos de toothese.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="8c8ae-130">Colaborador de supervisión</span><span class="sxs-lookup"><span data-stu-id="8c8ae-130">Monitoring Contributor</span></span>
<span data-ttu-id="8c8ae-131">Personas asignadas Hola supervisión Colaborador rol puede ver todos los datos de supervisión en una suscripción y crear o modificar la configuración de supervisión, pero no se puede modificar ningún otro recurso.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="8c8ae-132">Esta función es un supraconjunto de rol de lector de supervisión de Hola y es adecuada para los miembros del equipo de supervisión o proveedores de servicios administrados que además toohello permisos anteriores, también se deben toobe capaz de la organización:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="8c8ae-133">Publicar paneles de supervisión como un panel compartido.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="8c8ae-134">Determinar la [configuración de diagnóstico](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) de un recurso.*</span><span class="sxs-lookup"><span data-stu-id="8c8ae-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="8c8ae-135">Conjunto hello [registro perfil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) para un suscripción.* como</span><span class="sxs-lookup"><span data-stu-id="8c8ae-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="8c8ae-136">Definir la configuración y actividad de alertas.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="8c8ae-137">Crear componentes y pruebas web de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="8c8ae-138">Mostrar las claves compartidas del área de trabajo de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="8c8ae-139">Habilitar o deshabilitar Intelligence Pack de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="8c8ae-140">Crear y eliminar y ejecutar las búsquedas guardadas en Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="8c8ae-141">Crear y eliminar la configuración de almacenamiento de hello Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="8c8ae-142">* usuario también por separado debe tener permiso de ListKeys en tooset de recursos (almacenamiento cuenta o evento de concentrador espacio de nombres) de destino de hello un perfil de registro o la configuración de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="8c8ae-143">Este rol no le otorga acceso de lectura toolog datos que se ha transmitido tooan concentrador de eventos o almacenada en una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="8c8ae-144">[Vea más adelante](#security-considerations-for-monitoring-data) para obtener información acerca de cómo configurar el acceso a los recursos de toothese.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="8c8ae-145">Roles RBAC personalizados y permisos de supervisión</span><span class="sxs-lookup"><span data-stu-id="8c8ae-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="8c8ae-146">Si Hola por encima de funciones integradas no satisface necesidades específicas de Hola de su equipo, puede [crear un rol personalizado de RBAC](../active-directory/role-based-access-control-custom-roles.md) con más permisos granulares.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="8c8ae-147">A continuación se muestran Hola operaciones comunes de Azure Monitor RBAC con sus descripciones.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="8c8ae-148">Operación</span><span class="sxs-lookup"><span data-stu-id="8c8ae-148">Operation</span></span> | <span data-ttu-id="8c8ae-149">Description</span><span class="sxs-lookup"><span data-stu-id="8c8ae-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8c8ae-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="8c8ae-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="8c8ae-151">Reglas de alerta de lectura, escritura y eliminación.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="8c8ae-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="8c8ae-153">Lista de incidentes (historial de regla de alerta de Hola se desencadena) para las reglas de alerta.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="8c8ae-154">Esto solo aplica toohello portal.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="8c8ae-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="8c8ae-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="8c8ae-156">Configuración de escalado automático de lectura, escritura y eliminación.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="8c8ae-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="8c8ae-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="8c8ae-158">Configuración de diagnóstico de lectura, escritura y eliminación.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="8c8ae-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="8c8ae-160">Este permiso es necesario para los usuarios que necesitan obtener acceso a los registros de tooActivity mediante el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="8c8ae-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="8c8ae-162">Enumerar eventos del registro de actividades (eventos de administración) de una suscripción.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="8c8ae-163">Este permiso es aplicable tooboth mediante programación y acceso al portal toohello registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="8c8ae-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="8c8ae-165">Este permiso es necesario para los usuarios que necesitan obtener acceso a los registros de tooActivity mediante el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="8c8ae-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="8c8ae-167">Leer definiciones de métrica (lista de tipos de métricas disponibles para un recurso).</span><span class="sxs-lookup"><span data-stu-id="8c8ae-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="8c8ae-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="8c8ae-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="8c8ae-169">Leer las métricas de un recurso.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="8c8ae-170">Obtener acceso a tooalerts, configuración de diagnóstico y métricas para un recurso que requiere que el usuario hello tiene tipo de recurso de toohello de acceso de lectura y el ámbito de ese recurso.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="8c8ae-171">Crear ("escritura") un perfil de configuración o de registro de diagnóstico que archivos tooa centros de almacenamiento cuenta o secuencias tooevent requiere hello tooalso de usuario tiene permiso de ListKeys de recurso de destino de Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="8c8ae-172">Por ejemplo, mediante Hola por encima de la tabla podría crear un rol RBAC personalizado para un "lector de registro de actividad" similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="8c8ae-173">Consideraciones de seguridad para datos de supervisión</span><span class="sxs-lookup"><span data-stu-id="8c8ae-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="8c8ae-174">Los datos de supervisión, en particular los archivos de registro, pueden obtener información confidencial, como los nombres de usuario o las direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="8c8ae-175">Los datos de supervisión de Azure se presentan en tres formatos básicos:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="8c8ae-176">Hola registro de actividad, que describe todas las acciones de plano de control en su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="8c8ae-177">Los registros de diagnóstico, que son registros emitidos por un recurso.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="8c8ae-178">Métricas, que emiten los recursos.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="8c8ae-179">Los tres tipos de datos pueden almacenarse en una cuenta de almacenamiento o en Stream tooEvent concentrador, ambos de los cuales son recursos de Azure de uso generales.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="8c8ae-180">Dado que son recursos de uso general, su creación, eliminación o el acceso a ellos constituyen una operación privilegiada que suele estar reservada a un administrador.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="8c8ae-181">Se recomienda que utilice Hola seguir prácticas recomendadas para el uso incorrecto de tooprevent de recursos relacionados con la supervisión:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="8c8ae-182">Utilizar una cuenta de almacenamiento dedicada a datos de supervisión.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="8c8ae-183">Si necesita tooseparate datos de supervisión en varias cuentas de almacenamiento, nunca comparten el uso de una cuenta de almacenamiento entre supervisión y datos sin supervisión, este pueden provocar accidentalmente quienes solo necesita tener acceso a los datos de toomonitoring (p. ej.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="8c8ae-184">un SIEM terceros) tener acceso a datos de supervisión de toonon.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="8c8ae-185">Usar nombres de Bus de servicio o un concentrador de eventos única y exclusiva en toda la configuración de diagnóstico para hello mismo motivo como anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="8c8ae-186">Limitar las cuentas de acceso de almacenamiento relacionada con toomonitoring o concentradores de eventos guardándolas en un grupo de recursos independiente, y [utilizar ámbito](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) en sus roles supervisión toolimit acceso tooonly ese grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="8c8ae-187">Nunca debe conceder permiso de ListKeys de Hola para las cuentas de almacenamiento o en centros de eventos en el ámbito de la suscripción cuando un usuario solo necesita acceder a los datos toomonitoring.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="8c8ae-188">En su lugar, asigne estos permisos, usuario toohello en un recurso o grupo de recursos (si tiene un grupo de recursos de supervisión dedicado) ámbito.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="8c8ae-189">Limitar las cuentas de almacenamiento relacionada con el toomonitoring de acceso</span><span class="sxs-lookup"><span data-stu-id="8c8ae-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="8c8ae-190">Cuando un usuario o una aplicación necesita tener acceso a datos toomonitoring en una cuenta de almacenamiento, debe [generar una SAS de cuenta](https://msdn.microsoft.com/library/azure/mt584140.aspx) Hola cuenta de almacenamiento que contiene los datos de supervisión con el almacenamiento de tooblob de acceso de solo lectura de nivel de servicio.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="8c8ae-191">En PowerShell, podría quedar de manera similar a:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="8c8ae-192">Puede proporcionar después a entidades de token toohello Hola que necesita tooread desde esa cuenta de almacenamiento, y puede enumerar y leer todos los blobs en esa cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="8c8ae-193">Como alternativa, si necesita toocontrol este permiso con RBAC, puede conceder ese Hola entidad permiso Microsoft.Storage/storageAccounts/listkeys/action en dicha cuenta de almacenamiento en particular.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="8c8ae-194">Esto es necesario para los usuarios que necesitan toobe puede tooset un diagnóstico configuración o registro perfil tooarchive tooa cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="8c8ae-195">Por ejemplo, podría crear Hola siguiendo las funciones RBAC personalizado para un usuario o aplicación que solo necesita tooread desde una cuenta de almacenamiento:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="8c8ae-196">Hola ListKeys permiso permite claves de cuenta de almacenamiento principal y secundaria de hello usuario toolist Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="8c8ae-197">Estas claves conceder usuario Hola todos firmados permisos (lectura, escritura, crear blobs y eliminar blobs, etc.) en todos firmados servicios (blob, cola, tabla o archivo) en esa cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="8c8ae-198">Se recomienda usar una SAS de cuenta, como se ha descrito anteriormente, cuando sea posible.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="8c8ae-199">Limitación de los centros de eventos relacionados con el toomonitoring de acceso</span><span class="sxs-lookup"><span data-stu-id="8c8ae-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="8c8ae-200">Los concentradores de eventos puede ir seguido de un patrón similar, pero primero debe toocreate una regla de autorización de escucha dedicada.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="8c8ae-201">Si desea que toogrant acceso tooan aplicación que basta con que los centros de eventos relacionados con el toomonitoring toolisten, Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="8c8ae-202">Crear una directiva de acceso compartido en hello concentradores de eventos que se crearon para la transmisión por secuencias de datos de supervisión con solo las notificaciones de escucha.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="8c8ae-203">Esto puede hacerse en el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-203">This can be done in hello portal.</span></span> <span data-ttu-id="8c8ae-204">Por ejemplo, podría llamarlo "monitoringReadOnly."</span><span class="sxs-lookup"><span data-stu-id="8c8ae-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="8c8ae-205">Si es posible, le interesará toogive que directamente clave toohello consumidor y omitir el paso siguiente de saludo.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="8c8ae-206">Si el consumidor de hello necesita toobe tooget capaz de hello clave ad-hoc, conceda acción de ListKeys Hola Hola de usuario para ese concentrador de eventos.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="8c8ae-207">Esto también es necesario para los usuarios que necesiten toobe capaz tooset una configuración de diagnóstico o centros de tooevent toostream de perfil de registro.</span><span class="sxs-lookup"><span data-stu-id="8c8ae-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="8c8ae-208">Por ejemplo, podría crear una regla de RBAC:</span><span class="sxs-lookup"><span data-stu-id="8c8ae-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="8c8ae-209">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8c8ae-209">Next steps</span></span>
* [<span data-ttu-id="8c8ae-210">Consulte información sobre RBAC y permisos en Resource Manager</span><span class="sxs-lookup"><span data-stu-id="8c8ae-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="8c8ae-211">Información general de Hola de lectura de la supervisión de Azure</span><span class="sxs-lookup"><span data-stu-id="8c8ae-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)


---
title: "Información general sobre el registro de actividades de Azure | Microsoft Docs"
description: "Aprenda qué es el registro de actividad de Azure y cómo puede usarlo para comprender los eventos que se producen en su suscripción de Azure."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: c274782f-039d-4c28-9ddb-f89ce21052c7
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: johnkem
ms.openlocfilehash: 8ff9f73fc0732cd2227b7e0cc1091e04d69014eb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="monitor-subscription-activity-with-the-azure-activity-log"></a><span data-ttu-id="de35c-103">Supervise la actividad de suscripción con Azure Activity Log</span><span class="sxs-lookup"><span data-stu-id="de35c-103">Monitor Subscription Activity with the Azure Activity Log</span></span>
<span data-ttu-id="de35c-104">**Azure Activity Log** es un registro de suscripción que proporciona información sobre los eventos de nivel de suscripción que se han producido en Azure.</span><span class="sxs-lookup"><span data-stu-id="de35c-104">The **Azure Activity Log** is a subscription log that provides insight into subscription-level events that have occurred in Azure.</span></span> <span data-ttu-id="de35c-105">Esta incluye una serie de datos, desde datos operativos de Azure Resource Manager hasta actualizaciones en eventos de Estado del servicio.</span><span class="sxs-lookup"><span data-stu-id="de35c-105">This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.</span></span> <span data-ttu-id="de35c-106">El Registro de actividad se conocía anteriormente como "Registros de auditoría" o "Registros operativos", ya que la categoría Administrativo notifica eventos del plano de control de las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="de35c-106">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since the Administrative category reports control-plane events for your subscriptions.</span></span> <span data-ttu-id="de35c-107">Con el Registro de actividades, se pueden determinar los interrogantes “qué, quién y cuándo” de las operaciones de escritura (PUT, POST, DELETE) en los recursos de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="de35c-107">Using the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="de35c-108">También puede conocer el estado de la operación y otras propiedades relevantes.</span><span class="sxs-lookup"><span data-stu-id="de35c-108">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="de35c-109">El registro de actividad no incluye las operaciones de lectura (GET) ni las operaciones de los recursos que usan el modelo Clásico/"RDFE".</span><span class="sxs-lookup"><span data-stu-id="de35c-109">The Activity Log does not include read (GET) operations or operations for resources that use the Classic/"RDFE" model.</span></span>

![<span data-ttu-id="de35c-110">Comparación de los registros de actividad y otros tipos de registros</span><span class="sxs-lookup"><span data-stu-id="de35c-110">Activity Logs vs other types of logs</span></span> ](./media/monitoring-overview-activity-logs/Activity_Log_vs_other_logs_v5.png)

<span data-ttu-id="de35c-111">Ilustración 1: Comparación de los registros de actividad y otros tipos de registros</span><span class="sxs-lookup"><span data-stu-id="de35c-111">Figure 1: Activity Logs vs other types of logs</span></span>

<span data-ttu-id="de35c-112">El registro de actividad es distinto de los [registros de diagnóstico](monitoring-overview-of-diagnostic-logs.md).</span><span class="sxs-lookup"><span data-stu-id="de35c-112">The Activity Log differs from [Diagnostic Logs](monitoring-overview-of-diagnostic-logs.md).</span></span> <span data-ttu-id="de35c-113">El Registro de actividad proporciona datos sobre las operaciones en un recurso desde el exterior (el "plano de control").</span><span class="sxs-lookup"><span data-stu-id="de35c-113">Activity Logs provide data about the operations on a resource from the outside (the "control plane").</span></span> <span data-ttu-id="de35c-114">Los registros de diagnóstico son emitidos por un recurso y proporcionan información sobre el funcionamiento de dicho recurso (el "plano de datos").</span><span class="sxs-lookup"><span data-stu-id="de35c-114">Diagnostics Logs are emitted by a resource and provide information about the operation of that resource (the "data plane").</span></span>

<span data-ttu-id="de35c-115">Puede recuperar los eventos del registro de actividad mediante Azure Portal, la CLI, los cmdlets de PowerShell y la API de REST de Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="de35c-115">You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.</span></span>


> [!WARNING]
> <span data-ttu-id="de35c-116">El registro de actividad de Azure sirve principalmente para las actividades que se producen en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="de35c-116">The Azure Activity Log is primarily for activities that occur in Azure Resource Manager.</span></span> <span data-ttu-id="de35c-117">No hace seguimiento de los recursos que usan el modelo Clásico/RDFE.</span><span class="sxs-lookup"><span data-stu-id="de35c-117">It does not track resources using the Classic/RDFE model.</span></span> <span data-ttu-id="de35c-118">Algunos tipos de recursos clásicos tienen un proveedor de recursos de servidor proxy en Azure Resource Manager (por ejemplo, Microsoft.ClassicCompute).</span><span class="sxs-lookup"><span data-stu-id="de35c-118">Some Classic resource types have a proxy resource provider in Azure Resource Manager (for example, Microsoft.ClassicCompute).</span></span> <span data-ttu-id="de35c-119">Si interactúa con un tipo de recurso clásico a través de Azure Resource Manager con estos proveedores de recursos de servidor proxy, las operaciones aparecen en el registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-119">If you interact with a Classic resource type through Azure Resource Manager using these proxy resource providers, the operations appear in the Activity Log.</span></span> <span data-ttu-id="de35c-120">Si interactúa con un tipo de recurso clásico en el portal clásico o fuera de los servidores proxy de Azure Resource Manager, sus acciones solo se registran en el registro de operaciones.</span><span class="sxs-lookup"><span data-stu-id="de35c-120">If you interact with a Classic resource type in the Classic portal or otherwise outside of the Azure Resource Manager proxies, your actions are only recorded in the Operation Log.</span></span> <span data-ttu-id="de35c-121">Solo se puede tener acceso al registro de operaciones desde el portal clásico.</span><span class="sxs-lookup"><span data-stu-id="de35c-121">The Operation Log is accessible only in the Classic portal.</span></span>
>
>

<span data-ttu-id="de35c-122">Vea el vídeo siguiente sobre la introducción del registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-122">View the following video introducing the Activity Log.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Seth-Juarez/Logs-John-Kemnetz/player]
> 
>

## <a name="categories-in-the-activity-log"></a><span data-ttu-id="de35c-123">Categorías del Registro de actividad</span><span class="sxs-lookup"><span data-stu-id="de35c-123">Categories in the Activity Log</span></span>
<span data-ttu-id="de35c-124">El Registro de actividad contiene varias categorías de datos.</span><span class="sxs-lookup"><span data-stu-id="de35c-124">The Activity Log contains several categories of data.</span></span> <span data-ttu-id="de35c-125">Para obtener todos los detalles sobre el esquema de datos de estas categorías, [vea este artículo](monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="de35c-125">For full details on the schemata of these categories, [see this article](monitoring-activity-log-schema.md).</span></span> <span data-ttu-id="de35c-126">Entre ellos se incluyen los siguientes:</span><span class="sxs-lookup"><span data-stu-id="de35c-126">These include:</span></span>
* <span data-ttu-id="de35c-127">**Administrativo**: esta categoría contiene el registro de todas las operaciones de creación, actualización, eliminación y acción realizadas a través de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="de35c-127">**Administrative** - This category contains the record of all create, update, delete, and action operations performed through Resource Manager.</span></span> <span data-ttu-id="de35c-128">Los ejemplos de los tipos de eventos que aparecen en esta categoría incluyen "crear máquina virtual" y "eliminar grupo de seguridad de red". Cada acción realizada por un usuario o una aplicación mediante Resource Manager se modela como una operación en un tipo de recurso determinado.</span><span class="sxs-lookup"><span data-stu-id="de35c-128">Examples of the types of events you would see in this category include "create virtual machine" and "delete network security group" Every action taken by a user or application using Resource Manager is modeled as an operation on a particular resource type.</span></span> <span data-ttu-id="de35c-129">Si el tipo de operación es Write, Delete o Action, los registros de inicio y corrección o error de esa operación se registran en la categoría Administrativo.</span><span class="sxs-lookup"><span data-stu-id="de35c-129">If the operation type is Write, Delete, or Action, the records of both the start and success or fail of that operation are recorded in the Administrative category.</span></span> <span data-ttu-id="de35c-130">La categoría Administrativo también incluye los cambios realizados en el control de acceso basado en roles de una suscripción.</span><span class="sxs-lookup"><span data-stu-id="de35c-130">The Administrative category also includes any changes to role-based access control in a subscription.</span></span>
* <span data-ttu-id="de35c-131">**Estado del servicio**: esta categoría contiene el registro de los incidentes de estado del servicio que se han producido en Azure.</span><span class="sxs-lookup"><span data-stu-id="de35c-131">**Service Health** - This category contains the record of any service health incidents that have occurred in Azure.</span></span> <span data-ttu-id="de35c-132">Un ejemplo del tipo de evento que aparece en esta categoría es "SQL Azure en el este de EE. UU. está experimentando un tiempo de inactividad".</span><span class="sxs-lookup"><span data-stu-id="de35c-132">An example of the type of event you would see in this category is "SQL Azure in East US is experiencing downtime."</span></span> <span data-ttu-id="de35c-133">Los eventos de estado del servicio son de cinco variedades: Acción requerida, Recuperación asistida, Incidente, Mantenimiento, Información o Seguridad, y solo aparecen si tiene un recurso en la suscripción que se vaya a ver afectado por el evento.</span><span class="sxs-lookup"><span data-stu-id="de35c-133">Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security, and only appear if you have a resource in the subscription that would be impacted by the event.</span></span>
* <span data-ttu-id="de35c-134">**Alerta**: esta categoría contiene el registro de todas las activaciones de alertas de Azure.</span><span class="sxs-lookup"><span data-stu-id="de35c-134">**Alert** - This category contains the record of all activations of Azure alerts.</span></span> <span data-ttu-id="de35c-135">Un ejemplo del tipo de evento que aparece en esta categoría es "el % de CPU en myVM ha estado por encima de 80 durante los últimos 5 minutos".</span><span class="sxs-lookup"><span data-stu-id="de35c-135">An example of the type of event you would see in this category is "CPU % on myVM has been over 80 for the past 5 minutes."</span></span> <span data-ttu-id="de35c-136">Varios sistemas de Azure tienen un concepto de alerta: puede definir una regla de algún tipo y recibir una notificación cuando las condiciones coincidan con esa regla.</span><span class="sxs-lookup"><span data-stu-id="de35c-136">A variety of Azure systems have an alerting concept -- you can define a rule of some sort and receive a notification when conditions match that rule.</span></span> <span data-ttu-id="de35c-137">Cada vez que un tipo de alerta de Azure compatible "se activa" o se cumplen las condiciones para generar una notificación, también se inserta un registro de la activación en esta categoría del Registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-137">Each time a supported Azure alert type 'activates,' or the conditions are met to generate a notification, a record of the activation is also pushed to this category of the Activity Log.</span></span>
* <span data-ttu-id="de35c-138">**Escalado automático**: esta categoría contiene el registro de los eventos relacionados con el funcionamiento del motor de escalado automático en función de cualquier configuración de escalado automático que haya definido en la suscripción.</span><span class="sxs-lookup"><span data-stu-id="de35c-138">**Autoscale** - This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription.</span></span> <span data-ttu-id="de35c-139">Un ejemplo del tipo de evento que aparece en esta categoría es "Error de acción de escalado automático".</span><span class="sxs-lookup"><span data-stu-id="de35c-139">An example of the type of event you would see in this category is "Autoscale scale up action failed."</span></span> <span data-ttu-id="de35c-140">Con el escalado automático puede escalar horizontalmente o reducir horizontalmente de forma automática el número de instancias de un tipo de recurso compatible en función de la hora del día o cargar datos (métricas) mediante una configuración de escalado automático.</span><span class="sxs-lookup"><span data-stu-id="de35c-140">Using autoscale, you can automatically scale out or scale in the number of instances in a supported resource type based on time of day and/or load (metric) data using an autoscale setting.</span></span> <span data-ttu-id="de35c-141">Cuando se cumplen las condiciones para escalar o reducir verticalmente, se registran los eventos de inicio y corrección o error en esta categoría.</span><span class="sxs-lookup"><span data-stu-id="de35c-141">When the conditions are met to scale up or down, the start and succeeded or failed events are recorded in this category.</span></span>
* <span data-ttu-id="de35c-142">**Recomendación**: esta categoría contiene eventos de recomendación de determinados tipos de recursos, como sitios web y servidores SQL Server.</span><span class="sxs-lookup"><span data-stu-id="de35c-142">**Recommendation** - This category contains recommendation events from certain resource types, such as web sites and SQL servers.</span></span> <span data-ttu-id="de35c-143">Estos eventos ofrecen recomendaciones para usar mejor los recursos.</span><span class="sxs-lookup"><span data-stu-id="de35c-143">These events offer recommendations for how to better utilize your resources.</span></span> <span data-ttu-id="de35c-144">Solo recibirá eventos de este tipo si dispone de recursos que emitan recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="de35c-144">You only receive events of this type if you have resources that emit recommendations.</span></span>
* <span data-ttu-id="de35c-145">**Directiva, Seguridad y Estado de los recursos**: estas categorías no contienen ningún evento; están reservadas para un uso futuro.</span><span class="sxs-lookup"><span data-stu-id="de35c-145">**Policy, Security, and Resource Health** - These categories do not contain any events; they are reserved for future use.</span></span>

## <a name="event-schema-per-category"></a><span data-ttu-id="de35c-146">Esquema de eventos por categoría</span><span class="sxs-lookup"><span data-stu-id="de35c-146">Event schema per category</span></span>
[<span data-ttu-id="de35c-147">Vea este artículo para comprender el esquema de eventos de Activity Log por categoría.</span><span class="sxs-lookup"><span data-stu-id="de35c-147">See this article to understand the Activity Log event schema per category.</span></span>](monitoring-activity-log-schema.md)

## <a name="what-you-can-do-with-the-activity-log"></a><span data-ttu-id="de35c-148">Qué se puede hacer con el registro de actividad</span><span class="sxs-lookup"><span data-stu-id="de35c-148">What you can do with the Activity Log</span></span>
<span data-ttu-id="de35c-149">Estas son algunas de las cosas que puede hacer con el registro de actividad:</span><span class="sxs-lookup"><span data-stu-id="de35c-149">Here are some of the things you can do with the Activity Log:</span></span>

![Registro de actividad de Azure](./media/monitoring-overview-activity-logs/Activity_Log_Overview_v3.png)


* <span data-ttu-id="de35c-151">Verlo y realizar consultas en él en **Azure Portal**.</span><span class="sxs-lookup"><span data-stu-id="de35c-151">Query and view it in the **Azure portal**.</span></span>
* [<span data-ttu-id="de35c-152">Crear una alerta basada en un evento de Activity Log.</span><span class="sxs-lookup"><span data-stu-id="de35c-152">Create an alert on an Activity Log event.</span></span>](monitoring-activity-log-alerts.md)
* <span data-ttu-id="de35c-153">[Transmitirlo al **Centro de eventos**](monitoring-stream-activity-logs-event-hubs.md) para la ingestión en un servicio de terceros o una solución de análisis personalizado como PowerBI.</span><span class="sxs-lookup"><span data-stu-id="de35c-153">[Stream it to an **Event Hub**](monitoring-stream-activity-logs-event-hubs.md) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>
* <span data-ttu-id="de35c-154">Analizarlo en PowerBI con el [**paquete de contenido de PowerBI**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span><span class="sxs-lookup"><span data-stu-id="de35c-154">Analyze it in PowerBI using the [**PowerBI content pack**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span></span>
* <span data-ttu-id="de35c-155">[Guardarlo en una **cuenta de almacenamiento** para archivarlo o inspeccionarlo manualmente](monitoring-archive-activity-log.md).</span><span class="sxs-lookup"><span data-stu-id="de35c-155">[Save it to a **Storage Account** for archival or manual inspection](monitoring-archive-activity-log.md).</span></span> <span data-ttu-id="de35c-156">Puede especificar el tiempo de retención (en días) mediante el **perfil de registro**.</span><span class="sxs-lookup"><span data-stu-id="de35c-156">You can specify the retention time (in days) using the **Log Profile**.</span></span>
* <span data-ttu-id="de35c-157">Consultarlo mediante un cmdlet de PowerShell, la CLI o la API de REST.</span><span class="sxs-lookup"><span data-stu-id="de35c-157">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

## <a name="query-the-activity-log-in-the-azure-portal"></a><span data-ttu-id="de35c-158">Consulta de Activity Log en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="de35c-158">Query the Activity Log in the Azure portal</span></span>
<span data-ttu-id="de35c-159">En Azure Portal puede ver el registro de actividad en varios lugares:</span><span class="sxs-lookup"><span data-stu-id="de35c-159">Within the Azure portal you can view your Activity Log in several places:</span></span>
* <span data-ttu-id="de35c-160">La **hoja de Activity Log**, a la que se puede acceder buscando Activity Log en "More Services" (Más servicios) en el panel de navegación izquierdo.</span><span class="sxs-lookup"><span data-stu-id="de35c-160">The **Activity Log blade**, which you can access by searching for the Activity Log under "More Services" in the left-hand navigation pane.</span></span>
* <span data-ttu-id="de35c-161">La **hoja Monitor**, que aparece de forma predeterminada en el panel de navegación izquierdo.</span><span class="sxs-lookup"><span data-stu-id="de35c-161">The **Monitor blade**, which appears by default in the left-hand navigation pane.</span></span> <span data-ttu-id="de35c-162">Activity Log es una de las secciones de esta hoja Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="de35c-162">The Activity Log is one section of this Azure Monitor blade.</span></span>
* <span data-ttu-id="de35c-163">La **hoja de recursos** de cualquier recurso, por ejemplo, la hoja de configuración de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="de35c-163">Any resource's **resource blade**, for example, the configuration blade for a Virtual Machine.</span></span> <span data-ttu-id="de35c-164">Activity Log es una de las secciones en la mayoría de estas hojas de recursos y al hacer clic en ella automáticamente filtra los eventos relacionados con ese recurso concreto.</span><span class="sxs-lookup"><span data-stu-id="de35c-164">The Activity Log is be one of the sections on most of these resource blades, and clicking on it automatically filters the events to those related to that specific resource.</span></span>

<span data-ttu-id="de35c-165">En Azure Portal, puede filtrar Activity Log por estos campos:</span><span class="sxs-lookup"><span data-stu-id="de35c-165">In the Azure portal, you can filter your Activity Log by these fields:</span></span>
* <span data-ttu-id="de35c-166">Intervalo de tiempo: la hora de inicio y finalización para los eventos.</span><span class="sxs-lookup"><span data-stu-id="de35c-166">Timespan - The start and end time for events.</span></span>
* <span data-ttu-id="de35c-167">Categoría: la categoría de los eventos, como se describió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="de35c-167">Category - The event category as described above.</span></span>
* <span data-ttu-id="de35c-168">Suscripción: uno o más nombres de suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="de35c-168">Subscription - One or more Azure subscription names.</span></span>
* <span data-ttu-id="de35c-169">Grupo de recursos: uno o más grupos de recursos dentro de esas suscripciones.</span><span class="sxs-lookup"><span data-stu-id="de35c-169">Resource group - One or more resource groups within those subscriptions.</span></span>
* <span data-ttu-id="de35c-170">Recurso (nombre): el nombre de un recurso específico.</span><span class="sxs-lookup"><span data-stu-id="de35c-170">Resource (name) - The name of a specific resource.</span></span>
* <span data-ttu-id="de35c-171">Tipo de recurso: el tipo de recurso, por ejemplo, Microsoft.Compute/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="de35c-171">Resource type - The type of resource, for example, Microsoft.Compute/virtualmachines.</span></span>
* <span data-ttu-id="de35c-172">Nombre de la operación: el nombre de una operación de Azure Resource Manager, por ejemplo, Microsoft.SQL/servers/Write.</span><span class="sxs-lookup"><span data-stu-id="de35c-172">Operation name - The name of an Azure Resource Manager operation, for example, Microsoft.SQL/servers/Write.</span></span>
* <span data-ttu-id="de35c-173">Gravedad: el nivel de gravedad del evento (informativo, advertencia, error, crítico).</span><span class="sxs-lookup"><span data-stu-id="de35c-173">Severity - The severity level of the event (Informational, Warning, Error, Critical).</span></span>
* <span data-ttu-id="de35c-174">Evento iniciado por: el 'llamador' o el usuario que realizó la operación.</span><span class="sxs-lookup"><span data-stu-id="de35c-174">Event initiated by - The 'caller,' or user who performed the operation.</span></span>
* <span data-ttu-id="de35c-175">Abrir búsqueda: se trata de un cuadro de búsqueda de texto abierto que busca esa cadena en todos los campos de todos los eventos.</span><span class="sxs-lookup"><span data-stu-id="de35c-175">Open search - This is an open text search box that searches for that string across all fields in all events.</span></span>

<span data-ttu-id="de35c-176">Una vez que haya definido un conjunto de filtros, puede guardarlo como una consulta que se conserva entre sesiones por si necesita volver a realizar la misma consulta con esos filtros aplicados de nuevo en el futuro.</span><span class="sxs-lookup"><span data-stu-id="de35c-176">Once you have defined a set of filters, you can save it as a query that is persisted across sessions if you ever need to perform the same query with those filters applied again in the future.</span></span> <span data-ttu-id="de35c-177">También puede anclar una consulta en el panel de Azure para estar siempre al tanto de eventos específicos.</span><span class="sxs-lookup"><span data-stu-id="de35c-177">You can also pin a query to your Azure dashboard to always keep an eye on specific events.</span></span>

<span data-ttu-id="de35c-178">Al hacer clic en "Aplicar" se ejecuta la consulta y se muestran todos los eventos que coinciden.</span><span class="sxs-lookup"><span data-stu-id="de35c-178">Clicking "Apply" runs your query and show all matching events.</span></span> <span data-ttu-id="de35c-179">Al hacer clic en cualquier evento en la lista, se muestra el resumen de ese evento, así como la notación de objetos JavaScript (JSON) completa y sin procesar de ese evento.</span><span class="sxs-lookup"><span data-stu-id="de35c-179">Clicking on any event in the list shows the summary of that event as well as the full raw JSON of that event.</span></span>

<span data-ttu-id="de35c-180">Para ampliar aún más las posibilidades, puede hacer clic en el icono de **Búsqueda de registros**, que muestra los datos de Activity Log en el [análisis de registros de la solución Activity Log Analytics](../log-analytics/log-analytics-activity.md).</span><span class="sxs-lookup"><span data-stu-id="de35c-180">For even more power, you can click the **Log Search** icon, which displays your Activity Log data in the [Log Analytics Activity Log Analytics solution](../log-analytics/log-analytics-activity.md).</span></span> <span data-ttu-id="de35c-181">La hoja Log Analytics ofrece una experiencia básica de exploración/filtro en registros, pero Log Analytics le permite dinamizar, consultar y visualizar sus datos de otras formas más eficaces.</span><span class="sxs-lookup"><span data-stu-id="de35c-181">The Activity Log blade offers a basic filter/browse experience on logs, but Log Analytics enables you to pivot, query, and visualize your data in more powerful ways.</span></span>

## <a name="export-the-activity-log-with-a-log-profile"></a><span data-ttu-id="de35c-182">Exportación del registro de actividad con perfiles de registro</span><span class="sxs-lookup"><span data-stu-id="de35c-182">Export the Activity Log with a Log Profile</span></span>
<span data-ttu-id="de35c-183">Un **perfil de registro** controla cómo se exporta el registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-183">A **Log Profile** controls how your Activity Log is exported.</span></span> <span data-ttu-id="de35c-184">Con un perfil de registro, puede configurar:</span><span class="sxs-lookup"><span data-stu-id="de35c-184">Using a Log Profile, you can configure:</span></span>

* <span data-ttu-id="de35c-185">Dónde se debería enviar el registro de actividad (cuenta de almacenamiento o Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="de35c-185">Where the Activity Log should be sent (Storage Account or Event Hubs)</span></span>
* <span data-ttu-id="de35c-186">Qué categorías de eventos (Escritura, Eliminación, Acción) se deberían enviar.</span><span class="sxs-lookup"><span data-stu-id="de35c-186">Which event categories (Write, Delete, Action) should be sent.</span></span> <span data-ttu-id="de35c-187">*El significado de "categoría" en los eventos de registro de actividad y los perfiles de registro es distinto. En el perfil de registro, "Categoría" representa el tipo de operación (escritura, eliminación, acción). En un evento de registro de actividad, la propiedad de "categoría" representa el origen o el tipo de un evento (por ejemplo, Administration, ServiceHealth, Alert, etc.).*</span><span class="sxs-lookup"><span data-stu-id="de35c-187">*The meaning of "category" in Log Profiles and Activity Log events is different. In the Log Profile, "Category" represents the operation type (Write, Delete, Action). In an Activity Log event, the "category" property represents the source or type of event (for example, Administration, ServiceHealth, Alert, and more).*</span></span>
* <span data-ttu-id="de35c-188">Qué regiones (ubicaciones) se deben exportar.</span><span class="sxs-lookup"><span data-stu-id="de35c-188">Which regions (locations) should be exported.</span></span> <span data-ttu-id="de35c-189">Asegúrese de que incluye "global", ya que muchos eventos en Activity Log son eventos globales.</span><span class="sxs-lookup"><span data-stu-id="de35c-189">Make sure to include "global," as many events in the Activity Log are global events.</span></span>
* <span data-ttu-id="de35c-190">El tiempo durante el que se debe conservar un registro de actividad en una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="de35c-190">How long the Activity Log should be retained in a Storage Account.</span></span>
    - <span data-ttu-id="de35c-191">Una retención de cero días significa que los registros se conservan de forma indefinida.</span><span class="sxs-lookup"><span data-stu-id="de35c-191">A retention of zero days means logs are kept forever.</span></span> <span data-ttu-id="de35c-192">De lo contrario, el valor puede ser cualquier número de días comprendido entre 1 y 2147483647.</span><span class="sxs-lookup"><span data-stu-id="de35c-192">Otherwise, the value can be any number of days between 1 and 2147483647.</span></span>
    - <span data-ttu-id="de35c-193">Si se establecen directivas de retención, pero el almacenamiento de registros en una cuenta de almacenamiento está deshabilitado (por ejemplo, si solo se han seleccionado las opciones de Event Hubs u OMS), las directivas de retención no surten ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="de35c-193">If retention policies are set but storing logs in a Storage Account is disabled (for example, if only Event Hubs or OMS options are selected), the retention policies have no effect.</span></span>
    - <span data-ttu-id="de35c-194">Las directivas de retención se aplican a diario, por lo que al final de un día (UTC) se eliminan los registros del día que quede fuera de la directiva de retención.</span><span class="sxs-lookup"><span data-stu-id="de35c-194">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy are deleted.</span></span> <span data-ttu-id="de35c-195">Por ejemplo, si tuviera una directiva de retención de un día, se eliminarían los registros de anteayer al principio del día de hoy.</span><span class="sxs-lookup"><span data-stu-id="de35c-195">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted.</span></span>

<span data-ttu-id="de35c-196">Puede usar una cuenta de almacenamiento o un espacio de nombres de centro de eventos que no esté en la misma suscripción que el que emite los registros.</span><span class="sxs-lookup"><span data-stu-id="de35c-196">You can use a storage account or event hub namespace that is not in the same subscription as the one emitting logs.</span></span> <span data-ttu-id="de35c-197">El usuario que configura los ajustes debe tener el acceso de RBAC adecuado a ambas suscripciones.</span><span class="sxs-lookup"><span data-stu-id="de35c-197">The user who configures the setting must have the appropriate RBAC access to both subscriptions.</span></span>

<span data-ttu-id="de35c-198">Estas opciones se pueden configurar a través de la opción de exportación en la hoja de registro de actividad en el portal.</span><span class="sxs-lookup"><span data-stu-id="de35c-198">These settings can be configured via the “Export” option in the Activity Log blade in the portal.</span></span> <span data-ttu-id="de35c-199">También pueden configurarse mediante programación [con la API de REST de Azure Monitor](https://msdn.microsoft.com/library/azure/dn931927.aspx), los cmdlets de PowerShell o con la CLI.</span><span class="sxs-lookup"><span data-stu-id="de35c-199">They can also be configured programmatically [using the Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlets, or CLI.</span></span> <span data-ttu-id="de35c-200">Una suscripción solo puede tener un perfil de registro.</span><span class="sxs-lookup"><span data-stu-id="de35c-200">A subscription can only have one log profile.</span></span>

### <a name="configure-log-profiles-using-the-azure-portal"></a><span data-ttu-id="de35c-201">Configuración de perfiles de registro mediante Azure Portal</span><span class="sxs-lookup"><span data-stu-id="de35c-201">Configure log profiles using the Azure portal</span></span>
<span data-ttu-id="de35c-202">Puede transmitir el registro de actividad a un centro de eventos o almacenarlo en una cuenta de almacenamiento mediante la opción "Exportar" en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="de35c-202">You can stream the Activity Log to an Event Hub or store them in a Storage Account by using the “Export” option in the Azure portal.</span></span>

1. <span data-ttu-id="de35c-203">Vaya a la hoja de **registro de actividad** mediante el menú en el lado izquierdo del portal.</span><span class="sxs-lookup"><span data-stu-id="de35c-203">Navigate to the **Activity Log** blade using the menu on the left side of the portal.</span></span>

    ![Ir al registro de actividad en el portal](./media/monitoring-overview-activity-logs/activity-logs-portal-navigate.png)
2. <span data-ttu-id="de35c-205">Haga clic en el botón **Exportar** en la parte superior de la hoja.</span><span class="sxs-lookup"><span data-stu-id="de35c-205">Click the **Export** button at the top of the blade.</span></span>

    ![Botón Exportar en el portal](./media/monitoring-overview-activity-logs/activity-logs-portal-export.png)
3. <span data-ttu-id="de35c-207">En la hoja que aparece, puede seleccionar:</span><span class="sxs-lookup"><span data-stu-id="de35c-207">In the blade that appears, you can select:</span></span>  
  * <span data-ttu-id="de35c-208">Las regiones para las que le gustaría exportar eventos</span><span class="sxs-lookup"><span data-stu-id="de35c-208">regions for which you would like to export events</span></span>
  * <span data-ttu-id="de35c-209">La cuenta de almacenamiento en la que desea guardar los eventos</span><span class="sxs-lookup"><span data-stu-id="de35c-209">the Storage Account to which you would like to save events</span></span>
  * <span data-ttu-id="de35c-210">El número de días que desea conservar estos eventos en el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="de35c-210">the number of days you want to retain these events in storage.</span></span> <span data-ttu-id="de35c-211">Un valor de 0 días conserva los registros para siempre.</span><span class="sxs-lookup"><span data-stu-id="de35c-211">A setting of 0 days retains the logs forever.</span></span>
  * <span data-ttu-id="de35c-212">El espacio de nombres de Service Bus en el que quiere que se cree un centro de eventos para transmitir estos eventos.</span><span class="sxs-lookup"><span data-stu-id="de35c-212">the Service Bus Namespace in which you would like an Event Hub to be created for streaming these events.</span></span>

     ![Exportar en hoja de registro de actividad](./media/monitoring-overview-activity-logs/activity-logs-portal-export-blade.png)
4. <span data-ttu-id="de35c-214">Haga clic en **Guardar** para guardar la configuración.</span><span class="sxs-lookup"><span data-stu-id="de35c-214">Click **Save** to save these settings.</span></span> <span data-ttu-id="de35c-215">La configuración se aplica inmediatamente a la suscripción.</span><span class="sxs-lookup"><span data-stu-id="de35c-215">The settings are immediately be applied to your subscription.</span></span>

### <a name="configure-log-profiles-using-the-azure-powershell-cmdlets"></a><span data-ttu-id="de35c-216">Configuración de perfiles de registro mediante cmdlets de Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="de35c-216">Configure log profiles using the Azure PowerShell Cmdlets</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="de35c-217">Obtención del perfil de registro existente</span><span class="sxs-lookup"><span data-stu-id="de35c-217">Get existing log profile</span></span>
```
Get-AzureRmLogProfile
```

#### <a name="add-a-log-profile"></a><span data-ttu-id="de35c-218">Incorporación de un perfil de registro</span><span class="sxs-lookup"><span data-stu-id="de35c-218">Add a log profile</span></span>
```
Add-AzureRmLogProfile -Name my_log_profile -StorageAccountId /subscriptions/s1/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey -Locations global,westus,eastus -RetentionInDays 90 -Categories Write,Delete,Action
```

| <span data-ttu-id="de35c-219">Propiedad</span><span class="sxs-lookup"><span data-stu-id="de35c-219">Property</span></span> | <span data-ttu-id="de35c-220">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="de35c-220">Required</span></span> | <span data-ttu-id="de35c-221">Description</span><span class="sxs-lookup"><span data-stu-id="de35c-221">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="de35c-222">Nombre</span><span class="sxs-lookup"><span data-stu-id="de35c-222">Name</span></span> |<span data-ttu-id="de35c-223">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-223">Yes</span></span> |<span data-ttu-id="de35c-224">Nombre de su perfil de registro.</span><span class="sxs-lookup"><span data-stu-id="de35c-224">Name of your log profile.</span></span> |
| <span data-ttu-id="de35c-225">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="de35c-225">StorageAccountId</span></span> |<span data-ttu-id="de35c-226">No</span><span class="sxs-lookup"><span data-stu-id="de35c-226">No</span></span> |<span data-ttu-id="de35c-227">Identificador de recurso de la cuenta de almacenamiento donde se debe guardar el registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-227">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="de35c-228">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="de35c-228">serviceBusRuleId</span></span> |<span data-ttu-id="de35c-229">No</span><span class="sxs-lookup"><span data-stu-id="de35c-229">No</span></span> |<span data-ttu-id="de35c-230">Identificador de regla de Service Bus para el espacio de nombres de Service Bus donde desea que se creen los centros de eventos.</span><span class="sxs-lookup"><span data-stu-id="de35c-230">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="de35c-231">Es una cadena con este formato: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="de35c-231">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="de35c-232">Ubicaciones</span><span class="sxs-lookup"><span data-stu-id="de35c-232">Locations</span></span> |<span data-ttu-id="de35c-233">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-233">Yes</span></span> |<span data-ttu-id="de35c-234">Lista separada por comas de las regiones para las que desea recopilar eventos del registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-234">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="de35c-235">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="de35c-235">RetentionInDays</span></span> |<span data-ttu-id="de35c-236">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-236">Yes</span></span> |<span data-ttu-id="de35c-237">Número de días que deben retenerse los eventos, entre 1 y 2147483647.</span><span class="sxs-lookup"><span data-stu-id="de35c-237">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="de35c-238">Con el valor cero, se almacenan los registros indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="de35c-238">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="de35c-239">Categorías</span><span class="sxs-lookup"><span data-stu-id="de35c-239">Categories</span></span> |<span data-ttu-id="de35c-240">No</span><span class="sxs-lookup"><span data-stu-id="de35c-240">No</span></span> |<span data-ttu-id="de35c-241">Lista separada por comas de las categorías de eventos que deben recopilarse.</span><span class="sxs-lookup"><span data-stu-id="de35c-241">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="de35c-242">Los valores posibles son Write, Delete y Action.</span><span class="sxs-lookup"><span data-stu-id="de35c-242">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="de35c-243">Eliminación de perfil de registro</span><span class="sxs-lookup"><span data-stu-id="de35c-243">Remove a log profile</span></span>
```
Remove-AzureRmLogProfile -name my_log_profile
```

### <a name="configure-log-profiles-using-the-azure-cross-platform-cli"></a><span data-ttu-id="de35c-244">Configuración de perfiles de registro mediante la CLI multiplataforma de Azure</span><span class="sxs-lookup"><span data-stu-id="de35c-244">Configure log profiles Using the Azure Cross-Platform CLI</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="de35c-245">Obtención del perfil de registro existente</span><span class="sxs-lookup"><span data-stu-id="de35c-245">Get existing log profile</span></span>
```
azure insights logprofile list
```
```
azure insights logprofile get --name my_log_profile
```
<span data-ttu-id="de35c-246">La propiedad `name` debe ser el nombre del perfil de registro.</span><span class="sxs-lookup"><span data-stu-id="de35c-246">The `name` property should be the name of your log profile.</span></span>

#### <a name="add-a-log-profile"></a><span data-ttu-id="de35c-247">Incorporación de un perfil de registro</span><span class="sxs-lookup"><span data-stu-id="de35c-247">Add a log profile</span></span>
```
azure insights logprofile add --name my_log_profile --storageId /subscriptions/s1/resourceGroups/insights-integration/providers/Microsoft.Storage/storageAccounts/my_storage --serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey --locations global,westus,eastus,northeurope --retentionInDays 90 –categories Write,Delete,Action
```

| <span data-ttu-id="de35c-248">Propiedad</span><span class="sxs-lookup"><span data-stu-id="de35c-248">Property</span></span> | <span data-ttu-id="de35c-249">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="de35c-249">Required</span></span> | <span data-ttu-id="de35c-250">Description</span><span class="sxs-lookup"><span data-stu-id="de35c-250">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="de35c-251">name</span><span class="sxs-lookup"><span data-stu-id="de35c-251">name</span></span> |<span data-ttu-id="de35c-252">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-252">Yes</span></span> |<span data-ttu-id="de35c-253">Nombre de su perfil de registro.</span><span class="sxs-lookup"><span data-stu-id="de35c-253">Name of your log profile.</span></span> |
| <span data-ttu-id="de35c-254">storageId</span><span class="sxs-lookup"><span data-stu-id="de35c-254">storageId</span></span> |<span data-ttu-id="de35c-255">No</span><span class="sxs-lookup"><span data-stu-id="de35c-255">No</span></span> |<span data-ttu-id="de35c-256">Identificador de recurso de la cuenta de almacenamiento donde se debe guardar el registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-256">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="de35c-257">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="de35c-257">serviceBusRuleId</span></span> |<span data-ttu-id="de35c-258">No</span><span class="sxs-lookup"><span data-stu-id="de35c-258">No</span></span> |<span data-ttu-id="de35c-259">Identificador de regla de Service Bus para el espacio de nombres de Service Bus donde desea que se creen los centros de eventos.</span><span class="sxs-lookup"><span data-stu-id="de35c-259">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="de35c-260">Es una cadena con este formato: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="de35c-260">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="de35c-261">Ubicaciones</span><span class="sxs-lookup"><span data-stu-id="de35c-261">locations</span></span> |<span data-ttu-id="de35c-262">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-262">Yes</span></span> |<span data-ttu-id="de35c-263">Lista separada por comas de las regiones para las que desea recopilar eventos del registro de actividad.</span><span class="sxs-lookup"><span data-stu-id="de35c-263">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="de35c-264">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="de35c-264">retentionInDays</span></span> |<span data-ttu-id="de35c-265">Sí</span><span class="sxs-lookup"><span data-stu-id="de35c-265">Yes</span></span> |<span data-ttu-id="de35c-266">Número de días que deben retenerse los eventos, entre 1 y 2147483647.</span><span class="sxs-lookup"><span data-stu-id="de35c-266">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="de35c-267">Con el valor cero, se almacenan los registros indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="de35c-267">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="de35c-268">Categorías</span><span class="sxs-lookup"><span data-stu-id="de35c-268">categories</span></span> |<span data-ttu-id="de35c-269">No</span><span class="sxs-lookup"><span data-stu-id="de35c-269">No</span></span> |<span data-ttu-id="de35c-270">Lista separada por comas de las categorías de eventos que deben recopilarse.</span><span class="sxs-lookup"><span data-stu-id="de35c-270">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="de35c-271">Los valores posibles son Write, Delete y Action.</span><span class="sxs-lookup"><span data-stu-id="de35c-271">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="de35c-272">Eliminación de perfil de registro</span><span class="sxs-lookup"><span data-stu-id="de35c-272">Remove a log profile</span></span>
```
azure insights logprofile delete --name my_log_profile
```

## <a name="next-steps"></a><span data-ttu-id="de35c-273">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="de35c-273">Next Steps</span></span>
* [<span data-ttu-id="de35c-274">Más información sobre el registro de actividad (antes, Registros de auditoría)</span><span class="sxs-lookup"><span data-stu-id="de35c-274">Learn more about the Activity Log (formerly Audit Logs)</span></span>](../azure-resource-manager/resource-group-audit.md)
* [<span data-ttu-id="de35c-275">Transmisión del registro de actividad de Azure a Event Hubs</span><span class="sxs-lookup"><span data-stu-id="de35c-275">Stream the Azure Activity Log to Event Hubs</span></span>](monitoring-stream-activity-logs-event-hubs.md)

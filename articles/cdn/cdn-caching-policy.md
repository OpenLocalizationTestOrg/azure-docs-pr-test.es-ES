---
title: "Administración de la directiva de almacenamiento en caché de la red CDN de Azure en Azure Media Services | Microsoft Docs"
description: "Aprenda a administrar la directiva de almacenamiento en caché de la red CDN de Azure en Azure Media Services."
services: media-services,cdn
documentationcenter: .NET
author: juliako
manager: erikre
editor: 
ms.assetid: be33aecc-6dbe-43d7-a056-10ba911e0e94
ms.service: media-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/04/2017
ms.author: juliako
ms.openlocfilehash: 0c479a58f4158bb1a72dc43432507160f65d2791
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="manage-azure-cdn-caching-policy-in-azure-media-services"></a><span data-ttu-id="e5ec0-103">Administración de la directiva de almacenamiento en caché de la red CDN de Azure en Azure Media Services</span><span class="sxs-lookup"><span data-stu-id="e5ec0-103">Manage Azure CDN caching policy in Azure Media Services</span></span>
<span data-ttu-id="e5ec0-104">Servicios multimedia de Azure proporciona streaming adaptable basado en HTTP y descarga progresiva.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-104">Azure Media Services provides HTTP based Adaptive Streaming and progressive download.</span></span> <span data-ttu-id="e5ec0-105">El streaming basado en HTTP es altamente escalable con ventajas de almacenamiento en caché en proxy y capas CDN, además de almacenamiento en caché del cliente.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-105">HTTP based streaming is highly scalable with benefits of caching in proxy and CDN layers as well as client side caching.</span></span> <span data-ttu-id="e5ec0-106">Los extremos de streaming proporcionan capacidades generales de streaming, así como configuración para encabezados de caché HTTP.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-106">Streaming endpoints provides general streaming capabilities and also configuration for HTTP cache headers.</span></span> <span data-ttu-id="e5ec0-107">Los extremos de streaming establecen Control de caché HTTP: encabezados max-age y Expires.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-107">Streaming endpoints sets HTTP Cache-Control: max-age and Expires headers.</span></span> <span data-ttu-id="e5ec0-108">Puede obtener más información sobre los encabezados de caché HTTP en [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-108">You can get more information for HTTP cache headers from [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).</span></span>

## <a name="default-caching-headers"></a><span data-ttu-id="e5ec0-109">Encabezados de almacenamiento en caché predeterminados</span><span class="sxs-lookup"><span data-stu-id="e5ec0-109">Default Caching headers</span></span>
<span data-ttu-id="e5ec0-110">De forma predeterminada, los extremos de streaming aplican encabezados de caché de 3 días para datos de streaming a petición (fragmentos/segmentos multimedia reales) y manifest(playlist).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-110">By default streaming-endpoints apply 3 day cache headers for on-demand streaming data (actual media fragments/chunks) and manifest(playlist).</span></span> <span data-ttu-id="e5ec0-111">Para streaming en directo, los extremos de streaming aplican encabezados de caché de 3 días para datos (fragmentos/segmentos multimedia reales) y encabezados de caché de 2 segundos para solicitudes de manifest(playlist).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-111">For live streaming, streaming endpoints apply 3 day cache headers for data (actual media fragments/chunks) and 2 seconds cache header for manifest(playlist) requests.</span></span> <span data-ttu-id="e5ec0-112">Cuando un programa en directo pasa a ser a petición (archivo directo), se aplican encabezados de caché de streaming a petición.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-112">When live program turns to on-demand (live archive) then on-demand streaming cache headers apply.</span></span>

## <a name="azure-cdn-integration"></a><span data-ttu-id="e5ec0-113">Integración de CDN de Azure</span><span class="sxs-lookup"><span data-stu-id="e5ec0-113">Azure CDN integration</span></span>
<span data-ttu-id="e5ec0-114">Servicios multimedia de Azure proporciona una [red CDN integrada](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) para puntos de conexión de streaming.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-114">Azure Media Services provides [integrated CDN](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) for streaming-endpoints.</span></span> <span data-ttu-id="e5ec0-115">Los encabezados Cache-control se aplican de la misma manera que los extremos de streaming a extremos de streaming habilitados para CDN.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-115">Cache-control headers applies in the same way as streaming endpoints to CDN enabled streaming endpoints.</span></span> <span data-ttu-id="e5ec0-116">CDN de Azure usa valores de caché configurados de extremo de streaming para definir el tiempo de duración de los objetos almacenados en caché internamente y también utiliza este valor para establecer encabezados de caché de entrega.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-116">Azure CDN uses streaming endpoint configured cache values to define the life time of the internally cached objects and also uses this value to set the delivery cache headers.</span></span> <span data-ttu-id="e5ec0-117">Cuando se utilizan extremos de streaming habilitados para CDN, no se recomienda establecer valores de caché pequeños.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-117">When using CDN enabled streaming endpoints it is not recommended to set small cache values.</span></span> <span data-ttu-id="e5ec0-118">Si se establecen valores pequeños, se disminuye el rendimiento y se reducen las ventajas de CDN.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-118">Setting small values will decrease the performance and reduce the benefit of CDN.</span></span> <span data-ttu-id="e5ec0-119">No se permite establecer encabezados de caché menores de 600 segundos para extremos de streaming habilitados para CDN.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-119">It is not allowed to set cache headers smaller than 600 seconds for CDN enabled streaming endpoints.</span></span>

> [!IMPORTANT]
><span data-ttu-id="e5ec0-120">Azure Media Services está totalmente integrado completa con la red CDN de Azure.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-120">Azure Media Services has complete integration with Azure CDN.</span></span> <span data-ttu-id="e5ec0-121">Con un solo clic puede integrar todos los proveedores disponibles de la red CDN de Azure (Akamai y Verizon) a su punto de conexión de streaming, incluidos los estándar y Premium de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-121">With a single click you can integrate all the available Azure CDN providers (Akamai and Verizon) to your streaming endpoint including CDN Standard and Premium products.</span></span> <span data-ttu-id="e5ec0-122">Para más información, consulte este [anuncio](https://azure.microsoft.com/blog/standardstreamingendpoint/).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-122">For more information, see this [announcement](https://azure.microsoft.com/blog/standardstreamingendpoint/).</span></span>
> 
> <span data-ttu-id="e5ec0-123">Los cargos de datos del punto de conexión de streaming a la red CDN solo se deshabilitan si la red CDN se habilitada a través de las API del punto de conexión de streaming o mediante la sección del punto de conexión de streaming del Portal de administración de Azure.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-123">Data charges from streaming endpoint to CDN only gets disabled if the CDN is enabled over streaming endpoint APIs or using Azure management portal's streaming endpoint section.</span></span> <span data-ttu-id="e5ec0-124">La integración manual o la creación directa de un punto de conexión de CDN mediante las API de CDN o la sección del portal no deshabilitará los cargos de datos.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-124">Manual integration or directly creating a CDN endpoint using CDN APIs or portal section will not disable the data charges.</span></span>

## <a name="configuring-cache-headers-with-azure-media-services"></a><span data-ttu-id="e5ec0-125">Configuración de encabezados de caché con Servicios multimedia de Azure</span><span class="sxs-lookup"><span data-stu-id="e5ec0-125">Configuring cache headers with Azure Media Services</span></span>
<span data-ttu-id="e5ec0-126">Puede usar el Portal de administración de Azure o las API de Servicios multimedia de Azure para configurar valores de encabezados de caché.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-126">You can use Azure Management portal or Azure Media Services APIs to configure cache header values.</span></span>

1. <span data-ttu-id="e5ec0-127">Para configurar encabezados de caché mediante el Portal de administración, consulte [Administración de extremos de streaming](../media-services/media-services-portal-manage-streaming-endpoints.md) , sección Configuración del extremo de streaming.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-127">To configure cache headers using management portal please refer to [How to Manage Streaming Endpoints](../media-services/media-services-portal-manage-streaming-endpoints.md) section Configuring the Streaming Endpoint.</span></span>
2. <span data-ttu-id="e5ec0-128">API de REST de Servicios multimedia de Azure, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-128">Azure Media Services REST API, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).</span></span>
3. <span data-ttu-id="e5ec0-129">.NET SDK de Servicios multimedia de Azure, [Propiedades de StreamingEndpointCacheControl](http://go.microsoft.com/fwlink/?LinkId=615302).</span><span class="sxs-lookup"><span data-stu-id="e5ec0-129">Azure Media Services .NET SDK, [StreamingEndpointCacheControl Properties](http://go.microsoft.com/fwlink/?LinkId=615302).</span></span>

## <a name="cache-configuration-precedence-order"></a><span data-ttu-id="e5ec0-130">Orden de prioridad de configuración de caché</span><span class="sxs-lookup"><span data-stu-id="e5ec0-130">Cache configuration precedence order</span></span>
1. <span data-ttu-id="e5ec0-131">El valor de caché configurado de Servicios multimedia de Azure reemplaza el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-131">Azure Media Services configured cache value overrides default value.</span></span>
2. <span data-ttu-id="e5ec0-132">Si no hay ninguna configuración manual, se aplican los valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-132">If there is no manual configuration, default values applies.</span></span>
3. <span data-ttu-id="e5ec0-133">De forma predeterminada, se aplican encabezados de caché de 2 segundos para manifest(playlist) de streaming en directo independientemente de la configuración multimedia o de almacenamiento de Azure y la anulación de este valor no está disponible.</span><span class="sxs-lookup"><span data-stu-id="e5ec0-133">By default 2 seconds cache headers applies to live streaming manifest(playlist) regardless of Azure Media or Azure Storage configuration and overriding of this value is not available.</span></span>


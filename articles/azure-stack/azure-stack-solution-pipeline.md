---
title: "Implementación de una aplicación en Azure Stack | Microsoft Docs"
description: "Aprenda a implementar aplicaciones en Azure y Azure Stack con una canalización de CI/CD híbrida."
services: azure-stack
documentationcenter: 
author: HeathL17
manager: byronr
editor: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: helaw
ms.custom: mvc
ms.openlocfilehash: 019d743b0b3104e16a6690f438e7841fa63f09d0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="deploy-apps-to-azure-and-azure-stack"></a><span data-ttu-id="f9086-103">Implementación de aplicaciones en Azure y Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f9086-103">Deploy apps to Azure and Azure Stack</span></span>
<span data-ttu-id="f9086-104">Una canalización de [integración continua](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[entrega continua](https://www.visualstudio.com/learn/what-is-continuous-delivery/) (CI/CD) híbrida le permite crear, probar e implementar una aplicación en varias nubes.</span><span class="sxs-lookup"><span data-stu-id="f9086-104">A hybrid [continuous integration](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[continuous delivery](https://www.visualstudio.com/learn/what-is-continuous-delivery/)(CI/CD) pipeline enables you to build, test, and deploy your app to multiple clouds.</span></span>  <span data-ttu-id="f9086-105">En este tutorial, se crea un entorno de ejemplo para aprender el modo en que una canalización de CI/CD híbrida puede ayudarle a:</span><span class="sxs-lookup"><span data-stu-id="f9086-105">In this tutorial, you build a sample environment to learn how a hybrid CI/CD pipeline can help you:</span></span>
 
> [!div class="checklist"]
> * <span data-ttu-id="f9086-106">Iniciar una nueva compilación en función de las confirmaciones de código en el repositorio de Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="f9086-106">Initiate a new build based on code commits to your Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="f9086-107">Implementar automáticamente el código recién compilado en Azure para llevar a cabo las pruebas de aceptación del usuario.</span><span class="sxs-lookup"><span data-stu-id="f9086-107">Automatically deploy your newly built code to Azure for user acceptance testing.</span></span>
> * <span data-ttu-id="f9086-108">Una vez que el código haya pasado las pruebas, se implementan automáticamente en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-108">Once your code has passed testing, automatically deploy to Azure Stack.</span></span> 


## <a name="prerequisites"></a><span data-ttu-id="f9086-109">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f9086-109">Prerequisites</span></span>
<span data-ttu-id="f9086-110">Se requieren algunos componentes para crear una canalización de CI/CD híbrida y pueden tardar algún tiempo en prepararse.</span><span class="sxs-lookup"><span data-stu-id="f9086-110">A few components are required to build a hybrid CI/CD pipeline, and may take some time to prepare.</span></span>  <span data-ttu-id="f9086-111">Si ya tiene algunos de estos componentes, asegúrese de que cumplen los requisitos antes de comenzar.</span><span class="sxs-lookup"><span data-stu-id="f9086-111">If you already have some of these components, make sure they meet the requirements before beginning.</span></span>

<span data-ttu-id="f9086-112">En este tema también se da por supuesto que tiene algunos conocimientos de Azure y Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-112">This topic also assumes that you have some knowledge of Azure and Azure Stack.</span></span> <span data-ttu-id="f9086-113">Si desea más información antes de continuar, asegúrese de empezar con estos temas:</span><span class="sxs-lookup"><span data-stu-id="f9086-113">If you want to learn more before proceeding, be sure to start with these topics:</span></span>

- [<span data-ttu-id="f9086-114">Introducción a Azure</span><span class="sxs-lookup"><span data-stu-id="f9086-114">Introduction to Azure</span></span>](https://docs.microsoft.com/azure/fundamentals-introduction-to-azure)
- [<span data-ttu-id="f9086-115">Conceptos clave de Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f9086-115">Azure Stack Key Concepts</span></span>](azure-stack-key-features.md)

### <a name="azure"></a><span data-ttu-id="f9086-116">Azure</span><span class="sxs-lookup"><span data-stu-id="f9086-116">Azure</span></span>
 - <span data-ttu-id="f9086-117">Si no tiene una suscripción a Azure, cree una [cuenta gratuita](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) antes de empezar.</span><span class="sxs-lookup"><span data-stu-id="f9086-117">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
 - <span data-ttu-id="f9086-118">Cree una [aplicación web](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md) y configúrela para [publicación FTP](../app-service-web/app-service-deploy-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="f9086-118">Create a [Web App](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md), and configure it for [FTP publishing](../app-service-web/app-service-deploy-ftp.md).</span></span>  <span data-ttu-id="f9086-119">Tome nota de la dirección URL de la nueva aplicación web, ya que se utiliza más adelante.</span><span class="sxs-lookup"><span data-stu-id="f9086-119">Make note of the new Web App URL, as it is used later.</span></span>


### <a name="azure-stack"></a><span data-ttu-id="f9086-120">Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f9086-120">Azure Stack</span></span>
 - <span data-ttu-id="f9086-121">[Implementación de Azure Stack](azure-stack-run-powershell-script.md).</span><span class="sxs-lookup"><span data-stu-id="f9086-121">[Deploy Azure Stack](azure-stack-run-powershell-script.md).</span></span>  <span data-ttu-id="f9086-122">La instalación suele tardar unas horas, de modo que planéela en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="f9086-122">The installation usually takes a few hours to complete, so plan accordingly.</span></span>
 - <span data-ttu-id="f9086-123">Implemente servicios PaaS de [App Service](azure-stack-app-service-deploy.md) para Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-123">Deploy [App Service](azure-stack-app-service-deploy.md) PaaS services to Azure Stack.</span></span>
 - <span data-ttu-id="f9086-124">Cree una aplicación web y configúrela para [publicación FTP](azure-stack-app-service-enable-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="f9086-124">Create a Web App and configure it for [FTP publishing](azure-stack-app-service-enable-ftp.md).</span></span>  <span data-ttu-id="f9086-125">Tome nota de la dirección URL de la nueva aplicación web, ya que se utiliza más adelante.</span><span class="sxs-lookup"><span data-stu-id="f9086-125">Make note of the new Web App URL, as it is used later.</span></span>  

### <a name="developer-tools"></a><span data-ttu-id="f9086-126">Herramientas para desarrolladores</span><span class="sxs-lookup"><span data-stu-id="f9086-126">Developer tools</span></span>
 - <span data-ttu-id="f9086-127">Cree un [área de trabajo de VSTS](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span><span class="sxs-lookup"><span data-stu-id="f9086-127">Create a [VSTS workspace](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span></span>  <span data-ttu-id="f9086-128">El proceso de registro crea un proyecto denominado "MyFirstProject".</span><span class="sxs-lookup"><span data-stu-id="f9086-128">The sign-up process creates a project named "MyFirstProject."</span></span>  
 - <span data-ttu-id="f9086-129">[Instale Visual Studio 2017](https://docs.microsoft.com/visualstudio/install/install-visual-studio) e [inicie sesión en VSTS](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="f9086-129">[Install Visual Studio 2017](https://docs.microsoft.com/visualstudio/install/install-visual-studio) and [sign-in to VSTS](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span></span>
 - <span data-ttu-id="f9086-130">Conéctese al proyecto y [realice la clonación localmente](https://www.visualstudio.com/docs/git/gitquickstart).</span><span class="sxs-lookup"><span data-stu-id="f9086-130">Connect to the project and [clone locally](https://www.visualstudio.com/docs/git/gitquickstart).</span></span>
 - <span data-ttu-id="f9086-131">Cree un [grupo de agentes](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) en VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-131">Create an [agent pool](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) in VSTS.</span></span>
 - <span data-ttu-id="f9086-132">Instale Visual Studio e implemente un [agente de compilación de VSTS](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) para una máquina virtual en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-132">Install Visual Studio and deploy a [VSTS build agent](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) to a virtual machine on Azure Stack.</span></span> 
 

## <a name="create-app--push-to-vsts"></a><span data-ttu-id="f9086-133">Creación de la aplicación e inserción en VSTS</span><span class="sxs-lookup"><span data-stu-id="f9086-133">Create app & push to VSTS</span></span>

### <a name="create-application"></a><span data-ttu-id="f9086-134">Creación de la aplicación</span><span class="sxs-lookup"><span data-stu-id="f9086-134">Create application</span></span>
<span data-ttu-id="f9086-135">En esta sección, va a crear una aplicación ASP.NET sencilla y la insertará en VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-135">In this section, you create a simple ASP.NET application and push it to VSTS.</span></span>  <span data-ttu-id="f9086-136">Estos pasos representan el flujo de trabajo habitual del desarrollador y se pueden adaptar para los diferentes lenguajes y herramientas de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f9086-136">These steps represent the normal developer workflow, and could be adapted for developer tools and languages.</span></span> 

1.  <span data-ttu-id="f9086-137">Abra Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f9086-137">Open Visual Studio.</span></span>
2.  <span data-ttu-id="f9086-138">Desde el espacio de Team Explorer y el área **Soluciones...** , haga clic en **Nuevo**.</span><span class="sxs-lookup"><span data-stu-id="f9086-138">From the Team Explorer space and **Solutions...** area, click **New**.</span></span>
3.  <span data-ttu-id="f9086-139">Seleccione **Visual C#** > **Web** > **Aplicación web ASP.NET (.NET Framework)**.</span><span class="sxs-lookup"><span data-stu-id="f9086-139">Select **Visual C#** > **Web** > **ASP.NET Web Application (.NET Framework)**.</span></span>
4.  <span data-ttu-id="f9086-140">Asigne un nombre a la aplicación y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-140">Provide a name for the application and click **OK**.</span></span>
5.  <span data-ttu-id="f9086-141">En la siguiente pantalla, conserve los valores predeterminados (formularios Web Forms) y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-141">On the next screen, keep the defaults (Web forms) and click **OK**.</span></span>

### <a name="commit-and-push-changes-to-vsts"></a><span data-ttu-id="f9086-142">Confirmación e inserción de los cambios en VSTS</span><span class="sxs-lookup"><span data-stu-id="f9086-142">Commit and push changes to VSTS</span></span>
1.  <span data-ttu-id="f9086-143">Con Team Explorer en Visual Studio, seleccione la lista desplegable y haga clic en **Cambios**.</span><span class="sxs-lookup"><span data-stu-id="f9086-143">Using Team Explorer in Visual Studio, select the dropdown and click **Changes**.</span></span>
2.  <span data-ttu-id="f9086-144">Agregue un mensaje de confirmación y seleccione **Confirmar todo**.</span><span class="sxs-lookup"><span data-stu-id="f9086-144">Provide a commit message and select **Commit all**.</span></span> <span data-ttu-id="f9086-145">Puede que se le pida que guarde el archivo de solución; haga clic en Sí para guardar todo.</span><span class="sxs-lookup"><span data-stu-id="f9086-145">You may be prompted to save the solution file, click yes to save all.</span></span>
3.  <span data-ttu-id="f9086-146">Una vez haya confirmado, Visual Studio ofrece sincronizar los cambios en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="f9086-146">Once committed, Visual Studio offers to sync changes to your project.</span></span> <span data-ttu-id="f9086-147">Seleccione **Sincronizar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-147">Select **Sync**.</span></span>

    ![imagen que muestra la pantalla de confirmación una vez completada la confirmación](./media/azure-stack-solution-pipeline/image1.png)

4.  <span data-ttu-id="f9086-149">En la pestaña de sincronización, en *Saliente*, verá la nueva confirmación.</span><span class="sxs-lookup"><span data-stu-id="f9086-149">In the synchronization tab, under *Outgoing*, you see your new commit.</span></span>  <span data-ttu-id="f9086-150">Seleccione **Insertar** para sincronizar el cambio en VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-150">Select **Push** to synchronize the change to VSTS.</span></span>

    ![imagen que muestra los pasos de sincronización](./media/azure-stack-solution-pipeline/image2.png)

### <a name="review-code-in-vsts"></a><span data-ttu-id="f9086-152">Revisión del código en VSTS</span><span class="sxs-lookup"><span data-stu-id="f9086-152">Review code in VSTS</span></span>
<span data-ttu-id="f9086-153">Una vez haya confirmado un cambio y lo haya insertado en VSTS, compruebe el código desde el portal de VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-153">Once you've committed a change and pushed to VSTS, check your code from the VSTS portal.</span></span>  <span data-ttu-id="f9086-154">Seleccione **Código** y, a continuación, **Archivos** en el menú desplegable.</span><span class="sxs-lookup"><span data-stu-id="f9086-154">Select **Code**, and then **Files** from the dropdown menu.</span></span>  <span data-ttu-id="f9086-155">Puede ver la solución que creó.</span><span class="sxs-lookup"><span data-stu-id="f9086-155">You can see the solution you created.</span></span>

## <a name="create-build-definition"></a><span data-ttu-id="f9086-156">Creación de la definición de compilación</span><span class="sxs-lookup"><span data-stu-id="f9086-156">Create build definition</span></span>
<span data-ttu-id="f9086-157">El proceso de compilación define el modo en que la aplicación se compila y se empaqueta para implementarse cada vez que se confirman los cambios en el código.</span><span class="sxs-lookup"><span data-stu-id="f9086-157">The build process defines how your application is built and packaged for deployment on each commit of code changes.</span></span> <span data-ttu-id="f9086-158">En nuestro ejemplo, utilizamos la plantilla incluida para configurar el proceso de compilación de una aplicación ASP.NET, aunque esta configuración podría adaptarse según la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9086-158">In our example, we use the included template to configure the build process for an ASP.NET app, though this configuration could be adapted depending on your application.</span></span>

1.  <span data-ttu-id="f9086-159">Inicie sesión en el área de trabajo de VSTS desde un explorador web.</span><span class="sxs-lookup"><span data-stu-id="f9086-159">Sign in to your VSTS workspace from a web browser.</span></span>
2.  <span data-ttu-id="f9086-160">En el encabezado, seleccione **Compilación y versión** y, a continuación, **Compilaciones**.</span><span class="sxs-lookup"><span data-stu-id="f9086-160">From the banner, select **Build & Release**  and then **Builds**.</span></span>
3.  <span data-ttu-id="f9086-161">Haga clic en **+ Nueva definición**.</span><span class="sxs-lookup"><span data-stu-id="f9086-161">Click **+ New definition**.</span></span>
4.  <span data-ttu-id="f9086-162">En la lista de plantillas, seleccione **ASP.NET (versión preliminar)** y **Aplicar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-162">From the list of templates, select **ASP.NET (Preview)** and select **Apply**.</span></span>
5.  <span data-ttu-id="f9086-163">Modifique el campo *Argumentos de MSBuild* en el paso*Compilar solución* para:</span><span class="sxs-lookup"><span data-stu-id="f9086-163">Modify the *MSBuild Arguments* field in *Build Solution* step to:</span></span>

    `/p:DeployOnBuild=True /p:WebPublishMethod=FileSystem /p:DeployDefaultTarget=WebPublish /p:publishUrl="$(build.artifactstagingdirectory)\\"`

6.  <span data-ttu-id="f9086-164">Seleccione la pestaña **Opciones** y la cola del agente para el agente de compilación que implementó en una máquina virtual en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-164">Select the **Options** tab, and select the agent queue for the build agent you deployed to a virtual machine on Azure Stack.</span></span> 
7.  <span data-ttu-id="f9086-165">Seleccione la pestaña **Desencadenadores** y habilite **Integración continua**.</span><span class="sxs-lookup"><span data-stu-id="f9086-165">Select the **Triggers** tab, and enable **Continuous Integration**.</span></span>
7.  <span data-ttu-id="f9086-166">Haga clic en **Guardar y poner en cola** y, a continuación, seleccione **Guardar** en la lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="f9086-166">Click **Save & queue** and then select **Save** from the dropdown.</span></span> 

## <a name="create-release-definition"></a><span data-ttu-id="f9086-167">Creación de la definición de versión</span><span class="sxs-lookup"><span data-stu-id="f9086-167">Create release definition</span></span>
<span data-ttu-id="f9086-168">El proceso de creación de versiones define el modo en que las compilaciones derivadas del paso anterior se implementan en un entorno.</span><span class="sxs-lookup"><span data-stu-id="f9086-168">The release process defines how builds from the previous step are deployed to an environment.</span></span>  <span data-ttu-id="f9086-169">En este tutorial, publicamos nuestra aplicación ASP.NET con el protocolo FTP en una aplicación web de Azure.</span><span class="sxs-lookup"><span data-stu-id="f9086-169">In this tutorial, we publish our ASP.NET app with FTP to an Azure Web App.</span></span> <span data-ttu-id="f9086-170">Para configurar una versión en Azure, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="f9086-170">To configure a release to Azure, use the following steps:</span></span>

1.  <span data-ttu-id="f9086-171">En el encabezado de VSTS, seleccione **Compilación y versión** y, a continuación, **Versiones**.</span><span class="sxs-lookup"><span data-stu-id="f9086-171">From the VSTS banner, select **Build & Release**  and then **Releases**.</span></span>
2.  <span data-ttu-id="f9086-172">Haga clic en la opción **+ Nueva definición** en verde.</span><span class="sxs-lookup"><span data-stu-id="f9086-172">Click the green **+ New definition**.</span></span>
3.  <span data-ttu-id="f9086-173">Seleccione **Vacía** y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="f9086-173">Select **Empty** and click **Next**.</span></span>
4.  <span data-ttu-id="f9086-174">Active la casilla de *Implementación continua* y, a continuación, haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="f9086-174">Check the box for *Continuous deployment*, and then click **Create**.</span></span>

<span data-ttu-id="f9086-175">Ahora que ha creado una definición de versión vacía y vinculada a la compilación, agregamos los pasos para el entorno de Azure:</span><span class="sxs-lookup"><span data-stu-id="f9086-175">Now that you've created an empty release definition and tied it to the build, we add steps for the Azure environment:</span></span>

1.  <span data-ttu-id="f9086-176">Haga clic en el  **+ verde**  para agregar tareas.</span><span class="sxs-lookup"><span data-stu-id="f9086-176">Click the green **+** to add tasks.</span></span>
2.  <span data-ttu-id="f9086-177">Seleccione **Todos** y, a continuación, en la lista, agregue **Carga por FTP** y seleccione **Cerrar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-177">Select **All**, and then from the list, add **FTP Upload** and select **Close**.</span></span>
3.  <span data-ttu-id="f9086-178">Seleccione la tarea **Carga por FTP** recién agregada y configure los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9086-178">Select the **FTP Upload** task you just added, and configure the following parameters:</span></span>
    
    | <span data-ttu-id="f9086-179">Parámetro</span><span class="sxs-lookup"><span data-stu-id="f9086-179">Parameter</span></span> | <span data-ttu-id="f9086-180">Valor</span><span class="sxs-lookup"><span data-stu-id="f9086-180">Value</span></span> |
    | ----- | ----- |
    |<span data-ttu-id="f9086-181">Método de autenticación</span><span class="sxs-lookup"><span data-stu-id="f9086-181">Authentication Method</span></span>| <span data-ttu-id="f9086-182">Escribir credenciales</span><span class="sxs-lookup"><span data-stu-id="f9086-182">Enter Credentials</span></span>|
    |<span data-ttu-id="f9086-183">Dirección URL del servidor</span><span class="sxs-lookup"><span data-stu-id="f9086-183">Server URL</span></span> | <span data-ttu-id="f9086-184">Dirección URL de FTP de la aplicación web recuperada de Azure Portal</span><span class="sxs-lookup"><span data-stu-id="f9086-184">Web App FTP URL retrieved from Azure portal</span></span> |
    |<span data-ttu-id="f9086-185">Nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="f9086-185">Username</span></span> | <span data-ttu-id="f9086-186">Nombre de usuario que configuró al crear las credenciales de FTP para la aplicación web</span><span class="sxs-lookup"><span data-stu-id="f9086-186">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="f9086-187">Password</span><span class="sxs-lookup"><span data-stu-id="f9086-187">Password</span></span> | <span data-ttu-id="f9086-188">Contraseña que creó al establecer las credenciales FTP para la aplicación web</span><span class="sxs-lookup"><span data-stu-id="f9086-188">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="f9086-189">Directorio de origen</span><span class="sxs-lookup"><span data-stu-id="f9086-189">Source Directory</span></span> | <span data-ttu-id="f9086-190">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="f9086-190">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="f9086-191">Directorio remoto</span><span class="sxs-lookup"><span data-stu-id="f9086-191">Remote Directory</span></span> | <span data-ttu-id="f9086-192">/site/wwwroot/</span><span class="sxs-lookup"><span data-stu-id="f9086-192">/site/wwwroot/</span></span> |
    |<span data-ttu-id="f9086-193">Mantener las rutas de acceso de los archivos</span><span class="sxs-lookup"><span data-stu-id="f9086-193">Preserve file paths</span></span> | <span data-ttu-id="f9086-194">Habilitado (activado)</span><span class="sxs-lookup"><span data-stu-id="f9086-194">Enabled (checked)</span></span>|

4.  <span data-ttu-id="f9086-195">Haga clic en **Guardar**</span><span class="sxs-lookup"><span data-stu-id="f9086-195">Click **Save**</span></span>

<span data-ttu-id="f9086-196">Por último, configure la definición de la versión para usar el grupo de agentes que contiene al agente implementado con los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9086-196">Finally, you configure the release definition to use the agent pool containing the agent deployed using the following steps:</span></span>
1.  <span data-ttu-id="f9086-197">Seleccione la definición de la versión y haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-197">Select the release definition and click **Edit**.</span></span>
2.  <span data-ttu-id="f9086-198">Seleccione **Ejecutar en el agente** en la columna central.</span><span class="sxs-lookup"><span data-stu-id="f9086-198">Select **Run on agent** from the middle column.</span></span>  <span data-ttu-id="f9086-199">En la columna de la derecha, seleccione la cola del agente que contiene el agente de compilación que se ejecuta en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-199">In the right column, select the agent queue containing the build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="f9086-200">![imagen que muestra la configuración de la definición de versión para usar una cola específica](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f9086-200">![image showing configuration of release definition to use specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>


## <a name="deploy-your-app-to-azure"></a><span data-ttu-id="f9086-201">Implementación de una aplicación en Azure</span><span class="sxs-lookup"><span data-stu-id="f9086-201">Deploy your app to Azure</span></span>
<span data-ttu-id="f9086-202">Este paso usa la canalización de CI/CD recién creada para implementar la aplicación ASP.NET en una aplicación web en Azure.</span><span class="sxs-lookup"><span data-stu-id="f9086-202">This step uses your newly built CI/CD pipeline to deploy the ASP.NET app to a Web App on Azure.</span></span> 

1.  <span data-ttu-id="f9086-203">En el encabezado de VSTS, seleccione **Compilación y versión** y, a continuación, **Compilaciones**.</span><span class="sxs-lookup"><span data-stu-id="f9086-203">From the banner in VSTS, select **Build & Release**, and then select **Builds**.</span></span>
2.  <span data-ttu-id="f9086-204">Haga clic en **...**  en la definición de compilación creada anteriormente y, a continuación, seleccione **Poner nueva compilación en cola**.</span><span class="sxs-lookup"><span data-stu-id="f9086-204">Click **...** on the build definition previously created, and select **Queue new build**.</span></span>
3.  <span data-ttu-id="f9086-205">Acepte el valor predeterminado y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-205">Accept the defaults and click **Ok**.</span></span>  <span data-ttu-id="f9086-206">La compilación comienza y se muestra el progreso.</span><span class="sxs-lookup"><span data-stu-id="f9086-206">The build begins and displays progress.</span></span>
4.  <span data-ttu-id="f9086-207">Una vez completada la compilación, puede realizar el seguimiento del estado seleccionando **Compilación y versión** y **Versiones**.</span><span class="sxs-lookup"><span data-stu-id="f9086-207">Once the build is complete, you can track the status by selecting **Build & Release** and selecting **Releases**.</span></span>
5.  <span data-ttu-id="f9086-208">Una vez completada la compilación, visite el sitio web utilizando la dirección URL que anotó al crear la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="f9086-208">After the build is complete, visit the website using the URL noted when creating the Web App.</span></span>    


## <a name="add-azure-stack-to-pipeline"></a><span data-ttu-id="f9086-209">Incorporación de Azure Stack a la canalización</span><span class="sxs-lookup"><span data-stu-id="f9086-209">Add Azure Stack to pipeline</span></span>
<span data-ttu-id="f9086-210">Ahora que ha probado la canalización de CI/CD implementándola en Azure, es momento de agregar Azure Stack a la canalización.</span><span class="sxs-lookup"><span data-stu-id="f9086-210">Now that you've tested your CI/CD pipeline by deploying to Azure, it's time to add Azure Stack to the pipeline.</span></span>  <span data-ttu-id="f9086-211">En los pasos siguientes, cree un nuevo entorno y agregue una tarea Carga por FTP para implementar la aplicación en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-211">In the following steps, you create a new environment and add an FTP Upload task to deploy your app to Azure Stack.</span></span>  <span data-ttu-id="f9086-212">También agrega un aprobador de versión, que actúa como medio de simular la "firma" en una versión de código para Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-212">You also add a release approver, which serves as a way to simulate "signing off" on a code release to Azure Stack.</span></span>  

1.  <span data-ttu-id="f9086-213">En la definición de la versión, seleccione **+ Agregar entorno** y **Crear nuevo entorno**.</span><span class="sxs-lookup"><span data-stu-id="f9086-213">In the Release definition, select **+ Add Environment** and **Create new environment**.</span></span>
2.  <span data-ttu-id="f9086-214">Seleccione **Vacío** y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="f9086-214">Select **Empty**, click **Next**.</span></span>
3.  <span data-ttu-id="f9086-215">Seleccione **Usuarios específicos** y especifique su cuenta.</span><span class="sxs-lookup"><span data-stu-id="f9086-215">Select **Specific users** and specify your account.</span></span>  <span data-ttu-id="f9086-216">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="f9086-216">Select **Create**.</span></span>
4.  <span data-ttu-id="f9086-217">Cambie el nombre del entorno seleccionando el nombre actual y escribiendo *Azure Stack*.</span><span class="sxs-lookup"><span data-stu-id="f9086-217">Rename the environment by selecting the existing name and typing *Azure Stack*.</span></span>
5.  <span data-ttu-id="f9086-218">Ahora, seleccione el entorno de Azure Stack y después seleccione **Agregar tareas**.</span><span class="sxs-lookup"><span data-stu-id="f9086-218">Now, selection the Azure Stack environment, then select **Add tasks**.</span></span>
6.  <span data-ttu-id="f9086-219">Seleccione la tarea **Carga por FTP** y **Agregar**; a continuación, seleccione **Cerrar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-219">Select the **FTP Upload** task and select **Add**, then select **Close**.</span></span>


### <a name="configure-ftp-task"></a><span data-ttu-id="f9086-220">Configuración de la tarea FTP</span><span class="sxs-lookup"><span data-stu-id="f9086-220">Configure FTP task</span></span>
<span data-ttu-id="f9086-221">Ahora que ha creado una versión, configurará los pasos necesarios para publicarla en la aplicación web en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-221">Now that you've created a release, you'll configure the steps required for publishing to the Web App on Azure Stack.</span></span>  <span data-ttu-id="f9086-222">Igual que ha configurado la tarea Carga por FTP para Azure, configurará la tarea para Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="f9086-222">Just like you configured the FTP Upload task for Azure, you configure the task for Azure Stack:</span></span>

1.  <span data-ttu-id="f9086-223">Seleccione la tarea **Carga por FTP** recién agregada y configure los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9086-223">Select the **FTP Upload** task you just added, and configure the following parameters:</span></span>
    
    | <span data-ttu-id="f9086-224">Parámetro</span><span class="sxs-lookup"><span data-stu-id="f9086-224">Parameter</span></span> | <span data-ttu-id="f9086-225">Valor</span><span class="sxs-lookup"><span data-stu-id="f9086-225">Value</span></span> |
    | -----     | ----- |
    |<span data-ttu-id="f9086-226">Método de autenticación</span><span class="sxs-lookup"><span data-stu-id="f9086-226">Authentication Method</span></span>| <span data-ttu-id="f9086-227">Escribir credenciales</span><span class="sxs-lookup"><span data-stu-id="f9086-227">Enter Credentials</span></span>|
    |<span data-ttu-id="f9086-228">Dirección URL del servidor</span><span class="sxs-lookup"><span data-stu-id="f9086-228">Server URL</span></span> | <span data-ttu-id="f9086-229">Dirección URL de FTP de la aplicación web recuperada de Azure Stack Portal</span><span class="sxs-lookup"><span data-stu-id="f9086-229">Web App FTP URL retrieved from Azure Stack portal</span></span> |
    |<span data-ttu-id="f9086-230">Nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="f9086-230">Username</span></span> | <span data-ttu-id="f9086-231">Nombre de usuario que configuró al crear las credenciales de FTP para la aplicación web</span><span class="sxs-lookup"><span data-stu-id="f9086-231">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="f9086-232">Password</span><span class="sxs-lookup"><span data-stu-id="f9086-232">Password</span></span> | <span data-ttu-id="f9086-233">Contraseña que creó al establecer las credenciales FTP para la aplicación web</span><span class="sxs-lookup"><span data-stu-id="f9086-233">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="f9086-234">Directorio de origen</span><span class="sxs-lookup"><span data-stu-id="f9086-234">Source Directory</span></span> | <span data-ttu-id="f9086-235">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="f9086-235">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="f9086-236">Directorio remoto</span><span class="sxs-lookup"><span data-stu-id="f9086-236">Remote Directory</span></span> | <span data-ttu-id="f9086-237">/site/wwwroot/</span><span class="sxs-lookup"><span data-stu-id="f9086-237">/site/wwwroot/</span></span>|
    |<span data-ttu-id="f9086-238">Mantener las rutas de acceso de los archivos</span><span class="sxs-lookup"><span data-stu-id="f9086-238">Preserve file paths</span></span> | <span data-ttu-id="f9086-239">Habilitado (activado)</span><span class="sxs-lookup"><span data-stu-id="f9086-239">Enabled (checked)</span></span>|

2.  <span data-ttu-id="f9086-240">Haga clic en **Guardar**</span><span class="sxs-lookup"><span data-stu-id="f9086-240">Click **Save**</span></span>

<span data-ttu-id="f9086-241">Por último, configure la definición de la versión para usar el grupo de agentes que contiene al agente implementado con los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9086-241">Finally, configure the release definition to use the agent pool containing the agent deployed using the following steps:</span></span>
1.  <span data-ttu-id="f9086-242">Seleccione la definición de la versión y haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="f9086-242">Select the release definition and click **Edit**</span></span>
2.  <span data-ttu-id="f9086-243">Seleccione **Ejecutar en el agente** en la columna central.</span><span class="sxs-lookup"><span data-stu-id="f9086-243">Select **Run on agent** from the middle column.</span></span> <span data-ttu-id="f9086-244">En la columna de la derecha, seleccione la cola del agente que contiene el agente de compilación que se ejecuta en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-244">In the right column, select the agent queue containing the build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="f9086-245">![imagen que muestra la configuración de la definición de versión para usar una cola específica](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f9086-245">![image showing configuration of release definition to use specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>

## <a name="deploy-new-code"></a><span data-ttu-id="f9086-246">Implementación de nuevo código</span><span class="sxs-lookup"><span data-stu-id="f9086-246">Deploy new code</span></span>
<span data-ttu-id="f9086-247">Ahora puede probar la canalización de CI/CD híbrida, con el paso final de la publicación en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-247">You can now test the hybrid CI/CD pipeline, with the final step publishing to Azure Stack.</span></span>  <span data-ttu-id="f9086-248">En esta sección, modificará el pie de página del sitio y empezará la implementación a través de la canalización.</span><span class="sxs-lookup"><span data-stu-id="f9086-248">In this section, you modify the site's footer and start deployment through the pipeline.</span></span>  <span data-ttu-id="f9086-249">Una vez haya terminado, verá los cambios implementados en Azure para revisarlos y, cuando apruebe la versión, se publicarán en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-249">Once complete, you will see your changes deployed to Azure for review, then once you approve the release, they are published to Azure Stack.</span></span>

1. <span data-ttu-id="f9086-250">En Visual Studio, abra el archivo *site.master* y cambie esta línea:</span><span class="sxs-lookup"><span data-stu-id="f9086-250">In Visual Studio, open the *site.master* file and change this line:</span></span>
    
    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application</p>
    `

    <span data-ttu-id="f9086-251">a este:</span><span class="sxs-lookup"><span data-stu-id="f9086-251">to this:</span></span>

    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application delivered by VSTS, Azure, and Azure Stack</p>
    `
3.  <span data-ttu-id="f9086-252">Confirme los cambios y sincronice en VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-252">Commit the changes and sync to VSTS.</span></span>  
4.  <span data-ttu-id="f9086-253">Desde el área de trabajo de VSTS, compruebe el estado de la compilación seleccionando **Compilar y versión** > **Compilar**</span><span class="sxs-lookup"><span data-stu-id="f9086-253">From the VSTS workspace, check the build status by selecting **Build & Release** > **Build**</span></span>
5.  <span data-ttu-id="f9086-254">Verá una compilación en curso.</span><span class="sxs-lookup"><span data-stu-id="f9086-254">You will see a build in progress.</span></span>  <span data-ttu-id="f9086-255">Haga doble clic en el estado y podrá ver el progreso de la compilación.</span><span class="sxs-lookup"><span data-stu-id="f9086-255">Double-click the status, and you can watch the build progress.</span></span>  <span data-ttu-id="f9086-256">Una vez que vea "Compilación finalizada" en la consola, compruebe la versión en **Compilar y versión** > **Versión**.</span><span class="sxs-lookup"><span data-stu-id="f9086-256">Once you see "Finished build" in the console, move on to check the release from **Build & Release** > **Release**.</span></span>  <span data-ttu-id="f9086-257">Haga doble clic en la versión.</span><span class="sxs-lookup"><span data-stu-id="f9086-257">Double-click the release.</span></span>
6.  <span data-ttu-id="f9086-258">Recibirá una notificación que indica que una versión requiere ser revisada.</span><span class="sxs-lookup"><span data-stu-id="f9086-258">You will receive notification that a release requires review.</span></span> <span data-ttu-id="f9086-259">Compruebe la dirección URL de la aplicación web y que los nuevos cambios están presentes.</span><span class="sxs-lookup"><span data-stu-id="f9086-259">Check the Web App URL and verify the new changes are present.</span></span>  <span data-ttu-id="f9086-260">Apruebe la versión en VSTS.</span><span class="sxs-lookup"><span data-stu-id="f9086-260">Approve the release in VSTS.</span></span>
    <span data-ttu-id="f9086-261">![imagen que muestra la configuración de la definición de versión para usar una cola específica](./media/azure-stack-solution-pipeline/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f9086-261">![image showing configuration of release definition to use specific queue](./media/azure-stack-solution-pipeline/image4.png)</span></span>
    
7.  <span data-ttu-id="f9086-262">Compruebe que la publicación en Azure Stack se ha completado visitando el sitio web con la dirección URL que anotó al crear la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="f9086-262">Verify publishing to Azure Stack is complete by visiting the website using the URL noted when creating the Web App.</span></span>
    <span data-ttu-id="f9086-263">![imagen que muestra la aplicación ASP.NET con el pie de página cambiado](./media/azure-stack-solution-pipeline/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f9086-263">![image showing ASP.NEt app with footer changed](./media/azure-stack-solution-pipeline/image5.png)</span></span>


<span data-ttu-id="f9086-264">Ahora puede usar la nueva canalización de CI/CD híbrida como un bloque de creación para otros modelos de nube híbrida.</span><span class="sxs-lookup"><span data-stu-id="f9086-264">You can now use your new hybrid CI/CD pipeline as a building block for other hybrid cloud patterns.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f9086-265">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f9086-265">Next steps</span></span>
<span data-ttu-id="f9086-266">En este tutorial, aprendió a crear una canalización de CI/CD híbrida que:</span><span class="sxs-lookup"><span data-stu-id="f9086-266">In this tutorial, you learned how to build a hybrid CI/CD pipeline that:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="f9086-267">Inicia una nueva compilación en función de las confirmaciones de código en el repositorio de Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="f9086-267">Initiates a new build based on code commits to your Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="f9086-268">Implementa automáticamente el código recién compilado en Azure para llevar a cabo las pruebas de aceptación del usuario.</span><span class="sxs-lookup"><span data-stu-id="f9086-268">Automatically deploys your newly built code to Azure for user acceptance testing.</span></span>
> * <span data-ttu-id="f9086-269">Una vez que el código ha pasado las pruebas, se implementan automáticamente en Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-269">Once your code has passed testing, automatically deploys to Azure Stack.</span></span> 

<span data-ttu-id="f9086-270">Ahora que tiene una canalización de CI/CD híbrida, continúe aprendiendo a desarrollar aplicaciones para Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f9086-270">Now that you have a hybrid CI/CD pipeline, continue by learning how to develop apps for Azure Stack.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="f9086-271">Desarrollo para Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f9086-271">Develop for Azure Stack</span></span>](azure-stack-developer.md)



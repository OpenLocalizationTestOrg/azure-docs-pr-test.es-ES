---
title: "Filtros y manifiestos dinámicos | Microsoft Docs"
description: "En este tema se describe cómo crear filtros para que su cliente pueda usarlos para el streaming de secciones específicas de una transmisión. Servicios multimedia crea manifiestos dinámicos par lograr este streaming selectivo."
services: media-services
documentationcenter: 
author: cenkdin
manager: cfowler
editor: 
ms.assetid: ff102765-8cee-4c08-a6da-b603db9e2054
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 06/29/2017
ms.author: cenkd;juliako
ms.openlocfilehash: 4034fd0aa64627c107a43208dcca766f7f44d5d4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="filters-and-dynamic-manifests"></a><span data-ttu-id="d2240-104">Filtros y manifiestos dinámicos</span><span class="sxs-lookup"><span data-stu-id="d2240-104">Filters and dynamic manifests</span></span>
<span data-ttu-id="d2240-105">A partir de la versión 2.11, los Servicios multimedia permiten definir filtros para los activos.</span><span class="sxs-lookup"><span data-stu-id="d2240-105">Starting with 2.11 release, Media Services enables you to define filters for your assets.</span></span> <span data-ttu-id="d2240-106">Estos filtros son reglas del lado servidor que permitirán a los clientes elegir realizar acciones como: reproducir solo una sección de un vídeo (en lugar de reproducir el vídeo completo), o especificar solo un subconjunto de las representaciones de audio y vídeo que el dispositivo de su cliente puede controlar (en lugar de todas las copias asociadas al activo).</span><span class="sxs-lookup"><span data-stu-id="d2240-106">These filters are server side rules that will allow your customers to choose to do things like: playback only a section of a video (instead of playing the whole video), or specify only a subset of audio and video renditions that your customer's device can handle (instead of all the renditions that are associated with the asset).</span></span> <span data-ttu-id="d2240-107">Este filtrado de sus activos se archiva a través de los **manifiestos dinámicos**que se crean tras la solicitud del cliente para transmitir un vídeo en función de los filtros especificados.</span><span class="sxs-lookup"><span data-stu-id="d2240-107">This filtering of your assets is archived through **Dynamic Manifest**s that are created upon your customer's request to stream a video based on specified filter(s).</span></span>

<span data-ttu-id="d2240-108">En este tema se describen escenarios comunes en los que el uso de filtros resultaría muy beneficioso para los clientes y vínculos a temas que muestran cómo crear filtros mediante programación (actualmente solo puede crear filtros con las API de REST).</span><span class="sxs-lookup"><span data-stu-id="d2240-108">This topics discusses common scenarios in which using filters would be very beneficial to your customers and links to topics that demonstrate how to create filters programmatically (currently, you can create filters with REST APIs only).</span></span>

## <a name="overview"></a><span data-ttu-id="d2240-109">Información general</span><span class="sxs-lookup"><span data-stu-id="d2240-109">Overview</span></span>
<span data-ttu-id="d2240-110">Cuando entregue su contenido a los clientes (transmisión de eventos en directo o vídeo bajo demanda), su objetivo es entregar un vídeo de alta calidad a varios dispositivos en condiciones de red diferentes.</span><span class="sxs-lookup"><span data-stu-id="d2240-110">When delivering your content to customers (streaming live events or video-on-demand) your goal is to deliver a high quality video to various devices under different network conditions.</span></span> <span data-ttu-id="d2240-111">Para lograr este objetivo, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d2240-111">To achieve this goal do the following:</span></span>

* <span data-ttu-id="d2240-112">codifique la secuencia a secuencia de vídeo de velocidad de bits múltiple ([velocidad de bits adaptativa](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) (esto se encargará de las condiciones de calidad y red) y</span><span class="sxs-lookup"><span data-stu-id="d2240-112">encode your stream to multi-bitrate ([adaptive bitrate](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) video stream (this will take care of quality and network conditions) and</span></span> 
* <span data-ttu-id="d2240-113">use el [empaquetado dinámico](media-services-dynamic-packaging-overview.md) de Servicios multimedia dinámicamente para volver a empaquetar dinámicamente su secuencia en distintos protocolos (esto se encargará de la transmisión por secuencias en dispositivos diferentes).</span><span class="sxs-lookup"><span data-stu-id="d2240-113">use Media Services [Dynamic Packaging](media-services-dynamic-packaging-overview.md) to dynamically re-package your stream into different protocols (this will take care of streaming on different devices).</span></span> <span data-ttu-id="d2240-114">Media Services admite la entrega de las siguientes tecnologías de streaming con velocidad de bits adaptable: HTTP Live Streaming (HLS), Smooth Streaming y MPEG-DASH.</span><span class="sxs-lookup"><span data-stu-id="d2240-114">Media Services supports delivery of the following adaptive bitrate streaming technologies: HTTP Live Streaming (HLS), Smooth Streaming, and MPEG DASH.</span></span> 

### <a name="manifest-files"></a><span data-ttu-id="d2240-115">Archivos de manifiesto</span><span class="sxs-lookup"><span data-stu-id="d2240-115">Manifest files</span></span>
<span data-ttu-id="d2240-116">Cuando codifique un activo para transmisión por secuencias de velocidad de bits adaptativa, se crea un archivo de **manifiesto** (lista de reproducción) (el archivo se basa en texto o XML).</span><span class="sxs-lookup"><span data-stu-id="d2240-116">When you encode an asset for adaptive bitrate streaming, a **manifest** (playlist) file is created (the file is text-based or XML-based).</span></span> <span data-ttu-id="d2240-117">El archivo de **manifiesto** incluye metadatos de transmisión por secuencias como: el tipo de pista (audio, vídeo o texto), el nombre de la pista, la hora inicial y final, la velocidad de bits (calidades), los idiomas de pista, la ventana de presentación (ventana deslizante de duración fija), el códec de vídeo (FourCC).</span><span class="sxs-lookup"><span data-stu-id="d2240-117">The **manifest** file includes streaming metadata such as: track type (audio, video, or text), track name, start and end time, bitrate (qualities), track languages, presentation window (sliding window of fixed duration), video codec (FourCC).</span></span> <span data-ttu-id="d2240-118">También indica al reproductor que recupere el siguiente fragmento ofreciendo información sobre los próximos fragmentos de vídeo reproducibles disponibles y su ubicación.</span><span class="sxs-lookup"><span data-stu-id="d2240-118">It also instructs the player to retrieve the next fragment by providing information about the next playable video fragments available and their location.</span></span> <span data-ttu-id="d2240-119">Los fragmentos (o segmentos) son "fragmentos" reales de un contenido de vídeo.</span><span class="sxs-lookup"><span data-stu-id="d2240-119">Fragments (or segments) are the actual “chunks” of a video content.</span></span>

<span data-ttu-id="d2240-120">Este es un ejemplo de un archivo de manifiesto:</span><span class="sxs-lookup"><span data-stu-id="d2240-120">Here is an example of a manifest file:</span></span> 

    <?xml version="1.0" encoding="UTF-8"?>    
    <SmoothStreamingMedia MajorVersion="2" MinorVersion="0" Duration="330187755" TimeScale="10000000">

    <StreamIndex Chunks="17" Type="video" Url="QualityLevels({bitrate})/Fragments(video={start time})" QualityLevels="8">
    <QualityLevel Index="0" Bitrate="5860941" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931300016E360000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="1" Bitrate="4602724" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931100011EDC00002CD29FF8C7076850A45800000000168E9093525" />
    <QualityLevel Index="2" Bitrate="3319311" FourCC="H264" MaxWidth="1280" MaxHeight="720" CodecPrivateData="000000016764001FAC2CA5014016EC054808080A00000300020000030064C0800067C28000103667F8C7076850A4580000000168E9093525" />
    <QualityLevel Index="3" Bitrate="2195119" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C1000044AA0000ABA9FE31C1DA14291600000000168E9093525" />
    <QualityLevel Index="4" Bitrate="1469881" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C04000B71A0000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="5" Bitrate="978815" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C08001E8480004C4B7F8C7076850A45800000000168E9093525" />
    <QualityLevel Index="6" Bitrate="638374" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C080013D60000C65DFE31C1DA1429160000000168E9093525" />
    <QualityLevel Index="7" Bitrate="388851" FourCC="H264" MaxWidth="320" MaxHeight="180" CodecPrivateData="000000016764000DAC2CA505067E7C054830303200000300020000030064C040030D40003D093F8C7076850A45800000000168E9093525" />

    <c t="0" d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="9600000"/>
    </StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_128kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_128kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="125658" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_56kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_56kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="53655" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>

    </SmoothStreamingMedia>

### <a name="dynamic-manifests"></a><span data-ttu-id="d2240-121">Manifiestos dinámicos</span><span class="sxs-lookup"><span data-stu-id="d2240-121">Dynamic manifests</span></span>
<span data-ttu-id="d2240-122">Hay [escenarios](media-services-dynamic-manifest-overview.md#scenarios) cuando el cliente necesita mayor flexibilidad que lo que se describe en el archivo de manifiesto del activo predeterminado.</span><span class="sxs-lookup"><span data-stu-id="d2240-122">There are [scenarios](media-services-dynamic-manifest-overview.md#scenarios) when your client needs more flexibility than what's described in the default asset's manifest file.</span></span> <span data-ttu-id="d2240-123">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="d2240-123">For example:</span></span>

* <span data-ttu-id="d2240-124">Específico de dispositivo: entregue únicamente las representaciones y pistas de idioma especificadas que admite el dispositivo que se usa para la reproducción del contenido ("filtrado de representaciones").</span><span class="sxs-lookup"><span data-stu-id="d2240-124">Device specific: deliver only the specified renditions and\or specified language tracks that are supported by the device that is used to playback the content ("rendition filtering").</span></span> 
* <span data-ttu-id="d2240-125">Reduzca el manifiesto para mostrar un clip secundario de un evento en directo ("filtrado de vídeos secundarios").</span><span class="sxs-lookup"><span data-stu-id="d2240-125">Reduce the manifest to show a sub-clip of a live event ("sub-clip filtering").</span></span>
* <span data-ttu-id="d2240-126">Recorte el inicio de un vídeo ("recorte de un vídeo").</span><span class="sxs-lookup"><span data-stu-id="d2240-126">Trim the start of a video ("trimming a video").</span></span>
* <span data-ttu-id="d2240-127">Ajuste la ventana de presentación (DVR) para ofrecer una longitud limitada de la ventana de DVR en el reproductor ("ventana de presentación de ajuste").</span><span class="sxs-lookup"><span data-stu-id="d2240-127">Adjust Presentation Window (DVR) in order to provide a limited length of the DVR window in the player ("adjusting presentation window") .</span></span>

<span data-ttu-id="d2240-128">Para lograr esta flexibilidad, los Servicios multimedia ofrecen **manifiestos dinámicos** basados en [filtros](media-services-dynamic-manifest-overview.md#filters)predefinidos.</span><span class="sxs-lookup"><span data-stu-id="d2240-128">To achieve this flexibility, Media Services offers **Dynamic Manifests** based on pre-defined [filters](media-services-dynamic-manifest-overview.md#filters).</span></span>  <span data-ttu-id="d2240-129">Cuando defina los filtros, los clientes podrían usarlos para transmitir una representación específica o clips secundarios del vídeo.</span><span class="sxs-lookup"><span data-stu-id="d2240-129">Once you define the filters, your clients could use them to stream a specific rendition or sub-clips of your video.</span></span> <span data-ttu-id="d2240-130">Especificarían filtros en la URL de streaming.</span><span class="sxs-lookup"><span data-stu-id="d2240-130">They would specify filter(s) in the streaming URL.</span></span> <span data-ttu-id="d2240-131">Se podrían aplicar filtros a protocolos de streaming con velocidad de bits adaptable compatibles con [empaquetado dinámico](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH y Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="d2240-131">Filters could be applied to adaptive bitrate streaming protocols supported by [Dynamic Packaging](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH, and Smooth Streaming.</span></span> <span data-ttu-id="d2240-132">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="d2240-132">For example:</span></span>

<span data-ttu-id="d2240-133">URL de MPEG DASH con filtro</span><span class="sxs-lookup"><span data-stu-id="d2240-133">MPEG DASH URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf,filter=MyLocalFilter)

<span data-ttu-id="d2240-134">URL de Smooth Streaming con filtro</span><span class="sxs-lookup"><span data-stu-id="d2240-134">Smooth Streaming URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(filter=MyLocalFilter)


<span data-ttu-id="d2240-135">Para obtener más información sobre cómo entregar el contenido y crear URL de streaming, vea [Información general de entregar contenido](media-services-deliver-content-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d2240-135">For more information about how to deliver your content and build streaming URLs, see [Delivering content overview](media-services-deliver-content-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="d2240-136">Tenga en cuenta que los manifiestos dinámicos no cambian el activo y el manifiesto predeterminado para ese activo.</span><span class="sxs-lookup"><span data-stu-id="d2240-136">Note that Dynamic Manifests do not change the asset and the default manifest for that asset.</span></span> <span data-ttu-id="d2240-137">Su cliente puede elegir solicitar una secuencia con o sin filtros.</span><span class="sxs-lookup"><span data-stu-id="d2240-137">Your client can choose to request a stream with or without filters.</span></span> 
> 
> 

### <span data-ttu-id="d2240-138"><a id="filters"></a>Filtros</span><span class="sxs-lookup"><span data-stu-id="d2240-138"><a id="filters"></a>Filters</span></span>
<span data-ttu-id="d2240-139">Hay dos tipos de filtros de activos:</span><span class="sxs-lookup"><span data-stu-id="d2240-139">There are two types of asset filters:</span></span> 

* <span data-ttu-id="d2240-140">Filtros globales (se pueden aplicar a cualquier activo de la cuenta de Servicios multimedia de Azure, tienen una duración de la cuenta) y</span><span class="sxs-lookup"><span data-stu-id="d2240-140">Global filters (can be applied to any asset in the Azure Media Services account, have a lifetime of the account) and</span></span> 
* <span data-ttu-id="d2240-141">Filtros locales (solo se pueden aplicar a un activo con el que estaba asociado el filtro una vez creado, tienen una duración del activo).</span><span class="sxs-lookup"><span data-stu-id="d2240-141">Local filters (can only be applied to an asset with which the filter was associated upon creation, have a lifetime of the asset).</span></span> 

<span data-ttu-id="d2240-142">Los tipos de filtros globales y locales tienen exactamente las mismas propiedades.</span><span class="sxs-lookup"><span data-stu-id="d2240-142">Global and local filter types have exactly the same properties.</span></span> <span data-ttu-id="d2240-143">La diferencia principal entre los dos es para qué escenarios es más adecuado cada tipo de filtro.</span><span class="sxs-lookup"><span data-stu-id="d2240-143">The main difference between the two is for which scenarios what type of a filer is more suitable.</span></span> <span data-ttu-id="d2240-144">Los filtros globales suelen ser adecuados para los perfiles de dispositivos (filtrado de representaciones) donde los filtros locales podrían usarse para recortar un activo específico.</span><span class="sxs-lookup"><span data-stu-id="d2240-144">Global filters are generally suitable for device profiles (rendition filtering) where local filters could be used to trim a specific asset.</span></span>

## <span data-ttu-id="d2240-145"><a id="scenarios"></a>Escenarios comunes</span><span class="sxs-lookup"><span data-stu-id="d2240-145"><a id="scenarios"></a>Common scenarios</span></span>
<span data-ttu-id="d2240-146">Como se mencionó anteriomente, al entregar su contenido a los clientes (transmisión de eventos en directo o vídeo a la carta bajo demanda), el objetivo es entregar un vídeo de alta calidad a varios dispositivos en condiciones de red diferentes.</span><span class="sxs-lookup"><span data-stu-id="d2240-146">As was mentioned before, when delivering your content to customers (streaming live events or video-on-demand) your goal is to deliver a high quality video to various devices under different network conditions.</span></span> <span data-ttu-id="d2240-147">Además, puede tener otros requisitos que implican el filtrado de los activos y el uso de **manifiestos dinámico**s.</span><span class="sxs-lookup"><span data-stu-id="d2240-147">In addition, your might have other requirements that involve filtering your assets and using of **Dynamic Manifest**s.</span></span> <span data-ttu-id="d2240-148">En las secciones siguientes se ofrece una breve introducción a los diferentes escenarios de filtrado.</span><span class="sxs-lookup"><span data-stu-id="d2240-148">The following sections give a short overview of different filtering scenarios.</span></span>

* <span data-ttu-id="d2240-149">Especifique solo un subconjunto de representaciones de audio y vídeo que pueden controlar determinados dispositivos (en lugar de todas las representaciones asociadas al activo).</span><span class="sxs-lookup"><span data-stu-id="d2240-149">Specify only a subset of audio and video renditions that certain devices can handle (instead of all the renditions that are associated with the asset).</span></span> 
* <span data-ttu-id="d2240-150">Reproducir solo una sección de un vídeo (en lugar de reproducir todo el vídeo).</span><span class="sxs-lookup"><span data-stu-id="d2240-150">Playing back only a section of a video (instead of playing the whole video).</span></span>
* <span data-ttu-id="d2240-151">Ajustar la ventana de presentación de DVR.</span><span class="sxs-lookup"><span data-stu-id="d2240-151">Adjust DVR presentation window.</span></span>

## <a name="rendition-filtering"></a><span data-ttu-id="d2240-152">Filtrado de representaciones</span><span class="sxs-lookup"><span data-stu-id="d2240-152">Rendition filtering</span></span>
<span data-ttu-id="d2240-153">Puede elegir codificar el activo en varios perfiles de codificación (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) y varias velocidades de bits de calidad.</span><span class="sxs-lookup"><span data-stu-id="d2240-153">You may choose to encode your asset to multiple encoding profiles (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) and multiple quality bitrates.</span></span> <span data-ttu-id="d2240-154">Sin embargo, no todos los dispositivos cliente serán compatibles con todos los perfiles y velocidades de bits de su activo.</span><span class="sxs-lookup"><span data-stu-id="d2240-154">However, not all client devices will support all your asset's profiles and bitrates.</span></span> <span data-ttu-id="d2240-155">Por ejemplo, los dispositivos Android más antiguos solo admiten H.264 Baseline+AACL.</span><span class="sxs-lookup"><span data-stu-id="d2240-155">For example, older Android devices only supports H.264 Baseline+AACL.</span></span> <span data-ttu-id="d2240-156">El envío de velocidades de bits más altas a un dispositivo que no puede obtener los beneficios, desperdicia el ancho de banda y el cálculo del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d2240-156">Sending higher bitrates to a device which cannot get the benefits, wastes bandwidth and device computation.</span></span> <span data-ttu-id="d2240-157">Dicho dispositivo debe descodificar toda la información ofrecida, solo para reducirla verticalmente para presentación.</span><span class="sxs-lookup"><span data-stu-id="d2240-157">Such device must decode all the given information, only to scale it down for display.</span></span>

<span data-ttu-id="d2240-158">Con el manifiesto dinámico, puede crear perfiles de dispositivo como móvil, consola, HD/SD, etc. e incluir las pistas y calidades que quiere que formen parte de cada perfil.</span><span class="sxs-lookup"><span data-stu-id="d2240-158">With Dynamic Manifest, you can create device profiles such as mobile, console, HD/SD, etc. and include the tracks and qualities which you want to be a part of each profile.</span></span>

![Ejemplo de filtrado de representaciones][renditions2]

<span data-ttu-id="d2240-160">En el ejemplo siguiente, se usó un codificador para codificar un recurso intermedio en siete representaciones de vídeo MP4 ISO (de 180p a 1080p).</span><span class="sxs-lookup"><span data-stu-id="d2240-160">In the following example, an encoder was used to encode a mezzanine asset into seven ISO MP4s video renditions (from 180p to 1080p).</span></span> <span data-ttu-id="d2240-161">El recurso codificado puede empaquetarse dinámicamente en cualquiera de los siguientes protocolos de streaming: HLS, Smooth y MPEG-DASH.</span><span class="sxs-lookup"><span data-stu-id="d2240-161">The encoded asset can be dynamically packaged into any of the following streaming protocols: HLS, Smooth, and MPEG DASH.</span></span>  <span data-ttu-id="d2240-162">En la parte superior del diagrama, se muestra el manifiesto HLS para el activo sin filtros (contiene las siete representaciones).</span><span class="sxs-lookup"><span data-stu-id="d2240-162">At the top of the diagram, the HLS manifest for the asset with no filters is shown (it contains all seven renditions).</span></span>  <span data-ttu-id="d2240-163">En la parte inferior izquierda, se muestra el manifiesto HLS al que se aplicó un filtro denominado "ott".</span><span class="sxs-lookup"><span data-stu-id="d2240-163">In the bottom left, the HLS manifest to which a filter named "ott" was applied is shown.</span></span> <span data-ttu-id="d2240-164">El filtro de "ott" especifica la eliminación de todas las velocidades de bits por debajo de 1 Mbps, lo que dio lugar a que se quitaran los dos niveles de calidad inferiores en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="d2240-164">The "ott" filter specifies to remove all bitrates below 1Mbps, which resulted in the bottom two quality levels being stripped off in the response.</span></span>  <span data-ttu-id="d2240-165">En la parte inferior derecha se muestra el manifiesto HLS al que se aplicó un filtro denominado "móvil".</span><span class="sxs-lookup"><span data-stu-id="d2240-165">In the bottom right,   the HLS manifest to which a filter named "mobile" was applied is shown.</span></span> <span data-ttu-id="d2240-166">El filtro "móvil" especifica la eliminación de las representaciones donde la resolución es mayor que 720p, lo que hizo que se quitaran las dos representaciones de 1080p.</span><span class="sxs-lookup"><span data-stu-id="d2240-166">The "mobile" filter specifies to remove renditions where the resolution is larger than 720p, which resulted in the two 1080p renditions being stripped off.</span></span>

![Filtrado de representaciones][renditions1]

## <a name="removing-language-tracks"></a><span data-ttu-id="d2240-168">Quitar pistas de idioma</span><span class="sxs-lookup"><span data-stu-id="d2240-168">Removing language tracks</span></span>
<span data-ttu-id="d2240-169">Los activos pueden incluir varios idiomas de audio como inglés, español, francés, etc. Normalmente, los administradores del SDK del reproductor toman como valor predeterminado la selección de pistas de audio y las pistas de audio disponibles por selección de usuario.</span><span class="sxs-lookup"><span data-stu-id="d2240-169">Your assets might include multiple audio languages such as English, Spanish, French, etc. Usually, the Player SDK managers default audio track selection and available audio tracks per user selection.</span></span> <span data-ttu-id="d2240-170">Es un desafío desarrollar estos SDK del Reproductor; requiere diferentes implementaciones en marcos de reproductores específicos de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="d2240-170">It is challenging to develop such Player SDKs, it requires different implementations across device-specific player-frameworks.</span></span> <span data-ttu-id="d2240-171">Además, en algunas plataformas, las API del reproductor están limitadas y no incluyen la característica de selección de audio, donde los usuarios no pueden seleccionar o cambiar la pista de audio predeterminada. Con los filtros de activo, puede controlar el comportamiento creando filtros que solo incluyen idiomas de audio deseados.</span><span class="sxs-lookup"><span data-stu-id="d2240-171">Also, on some platforms, Player APIs are limited and do not include audio selection feature where users cannot select or change the default audio track. With asset filters, you can control the behavior by creating filters that only include desired audio languages.</span></span>

![Filtrado de pistas de idioma][language_filter]

## <a name="trimming-start-of-an-asset"></a><span data-ttu-id="d2240-173">Recorte del inicio de un activo</span><span class="sxs-lookup"><span data-stu-id="d2240-173">Trimming start of an asset</span></span>
<span data-ttu-id="d2240-174">En la mayoría de los eventos de streaming en directo, los operadores ejecutan algunas pruebas antes del evento real.</span><span class="sxs-lookup"><span data-stu-id="d2240-174">In most live streaming events, operators run some tests before the actual event.</span></span> <span data-ttu-id="d2240-175">Por ejemplo, podrían incluir una pizarra como esta antes del inicio del evento: "El programa comenzará momentáneamente".</span><span class="sxs-lookup"><span data-stu-id="d2240-175">For example, they might include a slate like this before the start of the event: "Program will begin momentarily".</span></span> <span data-ttu-id="d2240-176">Si el programa se está archivando, los datos de pizarra y de prueba también se archivan y se incluirán en la presentación.</span><span class="sxs-lookup"><span data-stu-id="d2240-176">If the program is archiving, the test and slate data are also archived and will be included in the presentation.</span></span> <span data-ttu-id="d2240-177">Sin embargo, esta información no se debe mostrar a los clientes.</span><span class="sxs-lookup"><span data-stu-id="d2240-177">However, this information should not be shown to the clients.</span></span> <span data-ttu-id="d2240-178">Con el manifiesto dinámico, puede crear un filtro de tiempo de inicio y quitar los datos no deseados del manifiesto.</span><span class="sxs-lookup"><span data-stu-id="d2240-178">With Dynamic Manifest, you can create a start time filter and remove the unwanted data from the manifest.</span></span>

![Inicio de recorte][trim_filter]

## <a name="creating-sub-clips-views-from-a-live-archive"></a><span data-ttu-id="d2240-180">Crear clips secundarios (vistas) desde un archivo en directo</span><span class="sxs-lookup"><span data-stu-id="d2240-180">Creating sub-clips (views) from a live archive</span></span>
<span data-ttu-id="d2240-181">Muchos eventos en directo son de larga ejecución y el archivo en directo puede incluir varios eventos.</span><span class="sxs-lookup"><span data-stu-id="d2240-181">Many live events are long running and live archive might include multiple events.</span></span> <span data-ttu-id="d2240-182">Después de que termine el evento en directo, es posible que los emisores deseen dividir el archivo activo en secuencias de inicio y detención de programa lógicas.</span><span class="sxs-lookup"><span data-stu-id="d2240-182">After the live event ends broadcasters may want to break up the live archive into logical program start and stop sequences.</span></span> <span data-ttu-id="d2240-183">Después, publique por separado estos programas virtuales sin procesar posteriormente el archivo activo y sin crear activos separados (que no se beneficiarán de los fragmentos en caché existentes en las CDN).</span><span class="sxs-lookup"><span data-stu-id="d2240-183">Then, publish these virtual programs separately without post processing the live archive and not creating separate assets (which will not get benefit of the existing cached fragments in the CDNs).</span></span> <span data-ttu-id="d2240-184">Entre los ejemplos de estos programas virtuales (clips secundarios) se encuentran los cuatro cuartos de un partido de baloncesto o fútbol americano, las entradas en el béisbol o los eventos individuales de una tarde de un programa de las Olimpiadas.</span><span class="sxs-lookup"><span data-stu-id="d2240-184">Examples of such virtual programs (sub-clips) are the quarters of a football or basketball game, the innings in baseball, or individual events of an afternoon of Olympics program.</span></span>

<span data-ttu-id="d2240-185">Con el manifiesto dinámico, puede crear filtros mediante las horas inicial y final y crear vistas virtuales encima de su archivo dinámico.</span><span class="sxs-lookup"><span data-stu-id="d2240-185">With Dynamic Manifest, you can create filters using start/end times and create virtual views over the top of your live archive.</span></span> 

![Filtro de clips secundarios][subclip_filter]

<span data-ttu-id="d2240-187">Activo filtrado:</span><span class="sxs-lookup"><span data-stu-id="d2240-187">Filtered Asset:</span></span>

![Esquí][skiing]

## <a name="adjusting-presentation-window-dvr"></a><span data-ttu-id="d2240-189">Ajustar la ventana de presentación (DVR)</span><span class="sxs-lookup"><span data-stu-id="d2240-189">Adjusting Presentation Window (DVR)</span></span>
<span data-ttu-id="d2240-190">En la actualidad, los Servicios multimedia de Azure ofrecen un archivo circular donde la duración se puede configurar entre 5 minutos y 25 horas.</span><span class="sxs-lookup"><span data-stu-id="d2240-190">Currently, Azure Media Services offers circular archive where the duration can be configured between 5 minutes - 25 hours.</span></span> <span data-ttu-id="d2240-191">El filtrado de manifiestos se puede usar para crear una ventana de DVR dinámica encima del archivo, sin eliminar medios.</span><span class="sxs-lookup"><span data-stu-id="d2240-191">Manifest filtering can be used to create a rolling DVR window over the top of the archive, without deleting media.</span></span> <span data-ttu-id="d2240-192">Hay muchos escenarios en los que los emisores desean proporcionar una ventana de DVR limitada que se mueve con el borde dinámico y al mismo tiempo mantiene una ventana de archivado más grande.</span><span class="sxs-lookup"><span data-stu-id="d2240-192">There are many scenarios where broadcasters want to provide a limited DVR window which moves with the live edge and at the same time keep a bigger archiving window.</span></span> <span data-ttu-id="d2240-193">Es posible que un emisor desee usar los datos que están fuera de la ventana de DVR para resaltar clips, o que desee proporcionar diferentes ventanas de DVR para dispositivos diferentes.</span><span class="sxs-lookup"><span data-stu-id="d2240-193">A broadcaster may want to use the data that is out of the DVR window to highlight clips, or he\she may want to provide different DVR windows for different devices.</span></span> <span data-ttu-id="d2240-194">Por ejemplo, la mayoría de los dispositivos móviles no administran grandes ventanas de DVR (puede tener una ventana de DVR de 2 minutos para dispositivos móviles y 1 hora para clientes de escritorio).</span><span class="sxs-lookup"><span data-stu-id="d2240-194">For example, most of the mobile devices don’t handle big DVR windows (you can have a 2 minute DVR window for mobile devices and 1 hour for desktop clients).</span></span>

![Ventana de DVR][dvr_filter]

## <a name="adjusting-livebackoff-live-position"></a><span data-ttu-id="d2240-196">Ajustar LiveBackoff (posición en directo)</span><span class="sxs-lookup"><span data-stu-id="d2240-196">Adjusting LiveBackoff (live position)</span></span>
<span data-ttu-id="d2240-197">El filtrado de manifiestos puede usarse para quitar varios segundos del borde directo de un programa activo.</span><span class="sxs-lookup"><span data-stu-id="d2240-197">Manifest filtering can be used to remove several seconds from the live edge of a live program.</span></span> <span data-ttu-id="d2240-198">Esto permite a los emisores ver la presentación en el punto de publicación de vista previa y crear puntos de inserción de anuncios antes de que los visores reciban la secuencia (normalmente con una interrupción de copia anterior a 30 segundos).</span><span class="sxs-lookup"><span data-stu-id="d2240-198">This allows broadcasters to watch the presentation on the preview publication point and create advertisement insertion points before the viewers receive the stream (usually backed-off by 30 seconds).</span></span> <span data-ttu-id="d2240-199">Los emisores, entonces, pueden insertar estos anuncios en sus marcos de cliente a tiempo para su recepción y procesar la información antes de la oportunidad de anuncio.</span><span class="sxs-lookup"><span data-stu-id="d2240-199">Broadcasters can then push these advertisements to their client frameworks in time for them to received and process the information before the advertisement opportunity.</span></span>

<span data-ttu-id="d2240-200">Además de la compatibilidad de anuncio, LiveBackoff se puede usar para ajustar la posición de descarga en directo del cliente para que cuando los clientes se desvíen y lleguen al borde directo puedan obtener todavía fragmentos del servidor en lugar de obtener los errores HTTP 404 o 412.</span><span class="sxs-lookup"><span data-stu-id="d2240-200">In addition to the advertisement support, LiveBackoff can be used for adjusting client live download position so that when clients drift and hit the live edge they can still get fragments from server instead of getting 404 or 412 HTTP errors.</span></span>

![livebackoff_filter][livebackoff_filter]

## <a name="combining-multiple-rules-in-a-single-filter"></a><span data-ttu-id="d2240-202">Combinación de varias reglas en un filtro único</span><span class="sxs-lookup"><span data-stu-id="d2240-202">Combining multiple rules in a single filter</span></span>
<span data-ttu-id="d2240-203">Puede combinar varias reglas de filtrado en un filtro único.</span><span class="sxs-lookup"><span data-stu-id="d2240-203">You can combine multiple filtering rules in a single filter.</span></span> <span data-ttu-id="d2240-204">Por ejemplo, puede definir una regla de intervalos para quitar la pizarra de un archivo activo y filtrar además velocidades de bits disponibles.</span><span class="sxs-lookup"><span data-stu-id="d2240-204">As an example you can define a range rule to remove slate from a live archive and also filter available bitrates.</span></span> <span data-ttu-id="d2240-205">Para varias reglas de filtrado, el resultado final es la composición (solo intersección) de estas reglas.</span><span class="sxs-lookup"><span data-stu-id="d2240-205">For multiple filtering rules the end result is the composition (intersection only) of these rules.</span></span>

![varias reglas][multiple-rules]

## <a name="create-filters-programmatically"></a><span data-ttu-id="d2240-207">Crear filtros mediante programación</span><span class="sxs-lookup"><span data-stu-id="d2240-207">Create filters programmatically</span></span>
<span data-ttu-id="d2240-208">En el siguiente tema se describen las entidades de Media Services que están relacionadas con los filtros.</span><span class="sxs-lookup"><span data-stu-id="d2240-208">The following topic discusses Media Services entities that are related to filters.</span></span> <span data-ttu-id="d2240-209">En el tema también se muestra cómo crear filtros mediante programación.</span><span class="sxs-lookup"><span data-stu-id="d2240-209">The topic also shows how to programmatically create filters.</span></span>  

<span data-ttu-id="d2240-210">[Crear filtros con las API de REST](media-services-rest-dynamic-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="d2240-210">[Create filters with REST APIs](media-services-rest-dynamic-manifest.md).</span></span>

## <a name="combining-multiple-filters-filter-composition"></a><span data-ttu-id="d2240-211">Combinar múltiples filtros (composición de filtros)</span><span class="sxs-lookup"><span data-stu-id="d2240-211">Combining multiple filters (filter composition)</span></span>
<span data-ttu-id="d2240-212">También puede combinar varios filtros en una sola dirección URL.</span><span class="sxs-lookup"><span data-stu-id="d2240-212">You can also combine multiple filters in a single URL.</span></span> 

<span data-ttu-id="d2240-213">En el escenario siguiente se muestra para qué puede resultar útil la combinación de filtros:</span><span class="sxs-lookup"><span data-stu-id="d2240-213">The following scenario demonstrates why you might want to combine filters:</span></span>

1. <span data-ttu-id="d2240-214">Necesita filtrar sus calidades de vídeos para dispositivos móviles, como Android o iPAD (con el fin de limitar las calidades de vídeo).</span><span class="sxs-lookup"><span data-stu-id="d2240-214">You need to filter your video qualities for mobile devices such as Android or iPAD (in order to limit video qualities).</span></span> <span data-ttu-id="d2240-215">Para quitar las calidades no deseadas, debe crear un filtro global que sea adecuado para los perfiles de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d2240-215">To remove the unwanted qualities, you would create a global filter which is suitable for device profiles.</span></span> <span data-ttu-id="d2240-216">Como se mencionó anteriormente, los filtros globales pueden utilizarse para todos sus activos en la misma cuenta de servicios multimedia sin ninguna asociación adicional.</span><span class="sxs-lookup"><span data-stu-id="d2240-216">As mentioned above, global filters can be used for all your assets under the same media services account without any further association.</span></span> 
2. <span data-ttu-id="d2240-217">También desea recortar el tiempo de inicio y finalización de un activo.</span><span class="sxs-lookup"><span data-stu-id="d2240-217">You also want to trim the start and end time of an asset.</span></span> <span data-ttu-id="d2240-218">Para hacerlo, debe crear un filtro local y establecer la hora de inicio y fin.</span><span class="sxs-lookup"><span data-stu-id="d2240-218">To achieve this, you would create a local filter and set the start/end time.</span></span> 
3. <span data-ttu-id="d2240-219">Desea combinar ambos filtros (sin combinación tendría que agregar el filtrado de calidad al filtro de recorte, lo cual dificultaría el uso del filtro).</span><span class="sxs-lookup"><span data-stu-id="d2240-219">You want to combine both of these filters (without combination you would need to add quality filtering to the trimming filter which will make filter usage difficult).</span></span>

<span data-ttu-id="d2240-220">Para combinar filtros, deberá establecer los nombres de filtro de la dirección URL del manifiesto o la lista de reproducción separados por punto y coma.</span><span class="sxs-lookup"><span data-stu-id="d2240-220">To combine filters, you need to set the filter names to the manifest/playlist URL with semicolon delimited.</span></span> <span data-ttu-id="d2240-221">Supongamos que tiene un filtro denominado *MyMobileDevice* que filtra cualidades y que tiene otro denominado *MyStartTime* para establecer una determinada hora de inicio.</span><span class="sxs-lookup"><span data-stu-id="d2240-221">Let’s assume you have a filter named *MyMobileDevice* that filters qualities and you have another named *MyStartTime* to set a specific start time.</span></span> <span data-ttu-id="d2240-222">Puede combinarlos así:</span><span class="sxs-lookup"><span data-stu-id="d2240-222">You can combine them like this:</span></span>

    http://teststreaming.streaming.mediaservices.windows.net/3d56a4d-b71d-489b-854f-1d67c0596966/64ff1f89-b430-43f8-87dd-56c87b7bd9e2.ism/Manifest(filter=MyMobileDevice;MyStartTime)

<span data-ttu-id="d2240-223">Puede combinar hasta 3 filtros.</span><span class="sxs-lookup"><span data-stu-id="d2240-223">You can combine up to 3 filters.</span></span> 

<span data-ttu-id="d2240-224">Para obtener más información, consulte [este blog](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) .</span><span class="sxs-lookup"><span data-stu-id="d2240-224">For more information see [this](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) blog.</span></span>

## <a name="know-issues-and-limitations"></a><span data-ttu-id="d2240-225">Problemas conocidos y limitaciones</span><span class="sxs-lookup"><span data-stu-id="d2240-225">Know issues and limitations</span></span>
* <span data-ttu-id="d2240-226">El manifiesto dinámico funciona en los límites GOP (fotogramas clave), por lo que el recorte tiene precisión GOP.</span><span class="sxs-lookup"><span data-stu-id="d2240-226">Dynamic manifest operates in GOP boundaries (Key Frames) hence trimming has GOP accuracy.</span></span> 
* <span data-ttu-id="d2240-227">Puede usar el mismo nombre de filtro para los filtros globales y locales.</span><span class="sxs-lookup"><span data-stu-id="d2240-227">You can use same filter name for local and global filters.</span></span> <span data-ttu-id="d2240-228">Tenga en cuenta que el filtro local tienen una mayor prioridad e invalidará los filtros globales.</span><span class="sxs-lookup"><span data-stu-id="d2240-228">Note that local filter have higher precedence and will override global filters.</span></span>
* <span data-ttu-id="d2240-229">Si actualiza un filtro, se pueden tardar hasta 2 minutos en que el extremo de streaming actualice las reglas.</span><span class="sxs-lookup"><span data-stu-id="d2240-229">If you update a filter, it can take up to 2 minutes for streaming endpoint to refresh the rules.</span></span> <span data-ttu-id="d2240-230">Si el contenido se suministró con algunos filtros (y se almacenó en caché en servidores proxy y cachés CDN), la actualización de  estos filtros puede generar errores del reproductor.</span><span class="sxs-lookup"><span data-stu-id="d2240-230">If the content was served using some filters (and cached in proxies and CDN caches), updating these filters can result in player failures.</span></span> <span data-ttu-id="d2240-231">Se recomienda borrar la memoria caché después de actualizar el filtro.</span><span class="sxs-lookup"><span data-stu-id="d2240-231">It is recommend to clear the cache after updating the filter.</span></span> <span data-ttu-id="d2240-232">Si esta opción no es posible, piense en usar un filtro diferente.</span><span class="sxs-lookup"><span data-stu-id="d2240-232">If this option is not possible, consider using a different filter.</span></span>

## <a name="media-services-learning-paths"></a><span data-ttu-id="d2240-233">Rutas de aprendizaje de Servicios multimedia</span><span class="sxs-lookup"><span data-stu-id="d2240-233">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="d2240-234">Envío de comentarios</span><span class="sxs-lookup"><span data-stu-id="d2240-234">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="see-also"></a><span data-ttu-id="d2240-235">Otras referencias</span><span class="sxs-lookup"><span data-stu-id="d2240-235">See Also</span></span>
[<span data-ttu-id="d2240-236">Información general de entrega de contenido a los clientes</span><span class="sxs-lookup"><span data-stu-id="d2240-236">Delivering Content to Customers Overview</span></span>](media-services-deliver-content-overview.md)

[renditions1]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter.png
[renditions2]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter2.png

[rendered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[timeline_trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[timeline_trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png

[multiple-rules]:./media/media-services-dynamic-manifest-overview/media-services-multiple-rules-filters.png

[subclip_filter]: ./media/media-services-dynamic-manifest-overview/media-services-subclips-filter.png
[trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png
[trim_filter]: ./media/media-services-dynamic-manifest-overview/media-services-trim-filter.png
[redered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[livebackoff_filter]: ./media/media-services-dynamic-manifest-overview/media-services-livebackoff-filter.png
[language_filter]: ./media/media-services-dynamic-manifest-overview/media-services-language-filter.png
[dvr_filter]: ./media/media-services-dynamic-manifest-overview/media-services-dvr-filter.png
[skiing]: ./media/media-services-dynamic-manifest-overview/media-services-skiing.png

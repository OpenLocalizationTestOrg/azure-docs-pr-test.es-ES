---
title: "aaaUse tooaccess de autenticación de Azure AD API de servicios multimedia de Azure con REST | Documentos de Microsoft"
description: "Obtenga información acerca de cómo tooaccess API de servicios multimedia de Azure con la autenticación de Azure Active Directory mediante el uso de REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="46ec2-103">Tooaccess de autenticación de Azure AD use Hola API de servicios multimedia de Azure con REST</span><span class="sxs-lookup"><span data-stu-id="46ec2-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="46ec2-104">equipo de servicios multimedia de Azure de Hello ha publicado la compatibilidad con la autenticación de Azure Active Directory (Azure AD) para el acceso de servicios multimedia de Azure.</span><span class="sxs-lookup"><span data-stu-id="46ec2-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="46ec2-105">También anunció la autenticación del servicio de Control de acceso de Azure de planes toodeprecate para el acceso a los servicios multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="46ec2-106">Dado que cada suscripción de Azure y cada cuenta de servicios multimedia son inquilino tooan adjunto Azure AD, compatibilidad con la autenticación de Azure AD ofrece muchos beneficios de seguridad.</span><span class="sxs-lookup"><span data-stu-id="46ec2-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="46ec2-107">Para obtener más información acerca de este cambio y la migración (si se utiliza Hola SDK de .NET de servicios multimedia para la aplicación), consulte siguiente Hola entradas de blog y los artículos:</span><span class="sxs-lookup"><span data-stu-id="46ec2-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- <span data-ttu-id="46ec2-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation) (Azure Media Services anuncia la compatibilidad con Azure AD y el desuso de la autenticación de Access Control)</span><span class="sxs-lookup"><span data-stu-id="46ec2-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)</span></span>
- <span data-ttu-id="46ec2-109">[Access Azure Media Services API by using Azure AD authentication](media-services-use-aad-auth-to-access-ams-api.md) (Acceder a la API de Azure Media Services mediante la autenticación de Azure AD)</span><span class="sxs-lookup"><span data-stu-id="46ec2-109">[Access Azure Media Services API by using Azure AD authentication](media-services-use-aad-auth-to-access-ams-api.md)</span></span>
- [<span data-ttu-id="46ec2-110">Usar autenticación de Azure AD tooaccess API de servicios multimedia de Azure mediante Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="46ec2-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="46ec2-111">Introducción a la autenticación de Azure AD mediante el uso de Hola portal de Azure</span><span class="sxs-lookup"><span data-stu-id="46ec2-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="46ec2-112">Algunos clientes necesitan toodevelop sus soluciones de servicios multimedia en hello siguiendo las restricciones:</span><span class="sxs-lookup"><span data-stu-id="46ec2-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="46ec2-113">Utiliza un lenguaje de programación que no sea Microsoft .NET o C# o entorno en tiempo de ejecución de hello no es Windows.</span><span class="sxs-lookup"><span data-stu-id="46ec2-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="46ec2-114">Bibliotecas de Azure AD, como bibliotecas de autenticación de Active Directory no están disponibles para el lenguaje de programación de Hola o no se puede usar para su entorno en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="46ec2-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="46ec2-115">Algunos clientes han desarrollado aplicaciones mediante la API de REST para la autenticación de Access Control y el acceso a Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="46ec2-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="46ec2-116">Para estos clientes, necesita un Hola solo API de REST toouse de manera para autenticación de Azure AD y acceso subsiguiente de los servicios de multimedia de Azure.</span><span class="sxs-lookup"><span data-stu-id="46ec2-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="46ec2-117">Necesita toonot se basan en cualquiera de las bibliotecas de hello Azure AD o en hello SDK de .NET de servicios multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="46ec2-118">En este artículo se describe una solución y se proporciona código de ejemplo para este escenario.</span><span class="sxs-lookup"><span data-stu-id="46ec2-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="46ec2-119">Dado que el código de hello es todas las llamadas de API de REST, con ninguna dependencia de Azure AD o biblioteca de servicios multimedia de Azure, código de hello fácilmente puede ser traducido tooany otro lenguaje de programación.</span><span class="sxs-lookup"><span data-stu-id="46ec2-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="46ec2-120">Actualmente, servicios multimedia admite el modelo de autenticación de servicios de Control de acceso de Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="46ec2-121">No obstante, la autenticación de Access Control dejará de usarse el 1 de junio de 2018.</span><span class="sxs-lookup"><span data-stu-id="46ec2-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="46ec2-122">Se recomienda que migre modelo de autenticación de Azure AD toohello tan pronto como sea posible.</span><span class="sxs-lookup"><span data-stu-id="46ec2-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="46ec2-123">Diseño</span><span class="sxs-lookup"><span data-stu-id="46ec2-123">Design</span></span>

<span data-ttu-id="46ec2-124">En este artículo, se utiliza Hola después de diseño de autenticación y autorización:</span><span class="sxs-lookup"><span data-stu-id="46ec2-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="46ec2-125">Protocolo de autorización: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="46ec2-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="46ec2-126">OAuth 2.0 es un estándar de seguridad web que cubre la autenticación y la autorización.</span><span class="sxs-lookup"><span data-stu-id="46ec2-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="46ec2-127">Es compatible con Google, Microsoft, Facebook y PayPal.</span><span class="sxs-lookup"><span data-stu-id="46ec2-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="46ec2-128">Se ratificó en octubre de 2012.</span><span class="sxs-lookup"><span data-stu-id="46ec2-128">It was ratified October 2012.</span></span> <span data-ttu-id="46ec2-129">Microsoft es firme partidario de OAuth 2.0 y OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="46ec2-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="46ec2-130">Ambos estándares son compatibles con varios servicios y bibliotecas de cliente, incluidos Azure Active Directory, Open Web Interface for .NET (OWIN), Katana y las bibliotecas de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="46ec2-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="46ec2-131">Tipo de concesión: credenciales de cliente.</span><span class="sxs-lookup"><span data-stu-id="46ec2-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="46ec2-132">Las credenciales del cliente es uno de los tipos de concesión de cuatro de hello en OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="46ec2-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="46ec2-133">A menudo se usa para el acceso a la API de Microsoft Graph de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="46ec2-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="46ec2-134">Modo de autenticación: entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="46ec2-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="46ec2-135">Hola otro modo de autenticación es autenticación interactiva o usuario.</span><span class="sxs-lookup"><span data-stu-id="46ec2-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="46ec2-136">Un total de cuatro aplicaciones o servicios implicados en el flujo de autenticación y autorización de hello Azure AD para el uso de servicios multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="46ec2-137">las aplicaciones de Hola y servicios de flujo de hello, se describen en hello en la tabla siguiente:</span><span class="sxs-lookup"><span data-stu-id="46ec2-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="46ec2-138">Tipo de aplicación</span><span class="sxs-lookup"><span data-stu-id="46ec2-138">Application type</span></span> |<span data-ttu-id="46ec2-139">Application</span><span class="sxs-lookup"><span data-stu-id="46ec2-139">Application</span></span> |<span data-ttu-id="46ec2-140">Flujo</span><span class="sxs-lookup"><span data-stu-id="46ec2-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="46ec2-141">Cliente</span><span class="sxs-lookup"><span data-stu-id="46ec2-141">Client</span></span> | <span data-ttu-id="46ec2-142">Aplicación o solución de cliente</span><span class="sxs-lookup"><span data-stu-id="46ec2-142">Customer app or solution</span></span> | <span data-ttu-id="46ec2-143">Esta aplicación (en realidad, su proxy) se registra en el inquilino de Azure AD de hello en qué Hola multimedia de hello y suscripción de Azure se encuentra la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="46ec2-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="46ec2-144">Hello entidad de servicio de aplicación hello registrado se le conceden con rol de propietario o colaborador en hello Access Control (IAM) de la cuenta de servicio de hello multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="46ec2-145">entidad de servicio de Hola se representa mediante Hola aplicación cliente y el Id. de clave secreta de cliente.</span><span class="sxs-lookup"><span data-stu-id="46ec2-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="46ec2-146">Proveedor de identidades (IDP)</span><span class="sxs-lookup"><span data-stu-id="46ec2-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="46ec2-147">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="46ec2-147">Azure AD as IDP</span></span> | <span data-ttu-id="46ec2-148">entidad de servicio de aplicación registrado Hello (Id. de cliente y el secreto de cliente) se autentica con Azure AD como Hola IDP.</span><span class="sxs-lookup"><span data-stu-id="46ec2-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="46ec2-149">Esta autenticación se realiza interna e implícitamente.</span><span class="sxs-lookup"><span data-stu-id="46ec2-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="46ec2-150">Como en el flujo de credenciales de cliente se autentica el cliente de hello en lugar de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="46ec2-151">Servicio de token seguro (STS) o servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="46ec2-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="46ec2-152">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="46ec2-152">Azure AD as STS</span></span> | <span data-ttu-id="46ec2-153">Después de la autenticación por hello IDP (o servidor de OAuth en términos de OAuth 2.0), Azure AD como servidor STS/OAuth para el recurso de nivel intermedio de acceso toohello emite un token de acceso o JSON Web Token (JWT): en nuestro caso, Hola extremo de API de REST de servicios multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="46ec2-154">Recurso</span><span class="sxs-lookup"><span data-stu-id="46ec2-154">Resource</span></span> | <span data-ttu-id="46ec2-155">API de REST de Media Services</span><span class="sxs-lookup"><span data-stu-id="46ec2-155">Media Services REST API</span></span> | <span data-ttu-id="46ec2-156">Todas las llamadas API de REST de servicios de multimedia está autorizada por un token de acceso que es emitido por Azure AD como servidor de OAuth de Hola o STS.</span><span class="sxs-lookup"><span data-stu-id="46ec2-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="46ec2-157">Si ejecuta el código de ejemplo de Hola y capturar un JWT o un token de acceso, hello JWT tiene Hola siguientes atributos:</span><span class="sxs-lookup"><span data-stu-id="46ec2-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="46ec2-158">Estas son las asignaciones de Hola entre atributos Hola Hola hello y JWT cuatro las aplicaciones o servicios en la tabla anterior de Hola:</span><span class="sxs-lookup"><span data-stu-id="46ec2-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="46ec2-159">Tipo de aplicación</span><span class="sxs-lookup"><span data-stu-id="46ec2-159">Application type</span></span> |<span data-ttu-id="46ec2-160">Application</span><span class="sxs-lookup"><span data-stu-id="46ec2-160">Application</span></span> |<span data-ttu-id="46ec2-161">Atributo del JWT</span><span class="sxs-lookup"><span data-stu-id="46ec2-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="46ec2-162">Cliente</span><span class="sxs-lookup"><span data-stu-id="46ec2-162">Client</span></span> |<span data-ttu-id="46ec2-163">Aplicación o solución de cliente</span><span class="sxs-lookup"><span data-stu-id="46ec2-163">Customer app or solution</span></span> |<span data-ttu-id="46ec2-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="46ec2-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="46ec2-165">Id. de cliente de Hola de una aplicación registrará tooAzure AD en la sección siguiente Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="46ec2-166">Proveedor de identidades (IDP)</span><span class="sxs-lookup"><span data-stu-id="46ec2-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="46ec2-167">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="46ec2-167">Azure AD as IDP</span></span> |<span data-ttu-id="46ec2-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="46ec2-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="46ec2-169">Hola GUID es el inquilino de Id. de Microsoft de hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="46ec2-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="46ec2-170">Cada inquilino tiene su propio identificador único.</span><span class="sxs-lookup"><span data-stu-id="46ec2-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="46ec2-171">Servicio de token seguro (STS) o servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="46ec2-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="46ec2-172">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="46ec2-172">Azure AD as STS</span></span> | <span data-ttu-id="46ec2-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="46ec2-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="46ec2-174">Hola GUID es el inquilino de Id. de Microsoft de hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="46ec2-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="46ec2-175">Recurso</span><span class="sxs-lookup"><span data-stu-id="46ec2-175">Resource</span></span> | <span data-ttu-id="46ec2-176">API de REST de Media Services</span><span class="sxs-lookup"><span data-stu-id="46ec2-176">Media Services REST API</span></span> |<span data-ttu-id="46ec2-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="46ec2-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="46ec2-178">destinatario de Hola o audiencia del token de acceso de Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="46ec2-179">Pasos de configuración</span><span class="sxs-lookup"><span data-stu-id="46ec2-179">Steps for setup</span></span>

<span data-ttu-id="46ec2-180">tooregister y configurar una aplicación de Azure AD para autenticación de Azure AD y tooobtain un token de acceso para llamar a un extremo de API de REST de servicios multimedia de Azure de hello, Hola completa pasos:</span><span class="sxs-lookup"><span data-stu-id="46ec2-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="46ec2-181">Hola [portal de Azure clásico](http://go.microsoft.com/fwlink/?LinkID=213885), registrar un inquilino de Azure AD toohello de aplicación (por ejemplo, wzmediaservice) de Azure AD (por ejemplo, microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="46ec2-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="46ec2-182">No importa si se ha registrado como aplicación web o nativa.</span><span class="sxs-lookup"><span data-stu-id="46ec2-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="46ec2-183">Además, puede elegir cualquier dirección URL de inicio de sesión y de respuesta (por ejemplo, http://wzmediaservice.com para ambas).</span><span class="sxs-lookup"><span data-stu-id="46ec2-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="46ec2-184">Hola [portal de Azure clásico](http://go.microsoft.com/fwlink/?LinkID=213885), vaya toohello **configurar** pestaña de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="46ec2-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="46ec2-185">Hola Nota **Id. de cliente**.</span><span class="sxs-lookup"><span data-stu-id="46ec2-185">Note hello **client ID**.</span></span> <span data-ttu-id="46ec2-186">Luego, en **Claves**, genere una **clave de cliente** (secreto del cliente).</span><span class="sxs-lookup"><span data-stu-id="46ec2-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="46ec2-187">Tome nota de secreto del cliente Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-187">Take note of hello client secret.</span></span> <span data-ttu-id="46ec2-188">No se volverá a mostrar.</span><span class="sxs-lookup"><span data-stu-id="46ec2-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="46ec2-189">Hola [portal de Azure](http://ms.portal.azure.com), vaya toohello cuenta de servicios multimedia.</span><span class="sxs-lookup"><span data-stu-id="46ec2-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="46ec2-190">Seleccione hello **el Control de acceso** panel de (índices IAM).</span><span class="sxs-lookup"><span data-stu-id="46ec2-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="46ec2-191">Agregar a un nuevo miembro que tenga Hola propietario o rol de colaborador de Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="46ec2-192">De entidad de seguridad de hello, busque el nombre de la aplicación hello registrado en el paso 1 (en este ejemplo, wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="46ec2-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="46ec2-193">Toocollect de información</span><span class="sxs-lookup"><span data-stu-id="46ec2-193">Info toocollect</span></span>

<span data-ttu-id="46ec2-194">tooprepare de codificación de REST, recopilar Hola después tooinclude de puntos de datos en el código de hello:</span><span class="sxs-lookup"><span data-stu-id="46ec2-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="46ec2-195">Azure AD como punto de conexión de STS: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="46ec2-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="46ec2-196">Desde este punto de conexión se solicita un token de acceso JWT.</span><span class="sxs-lookup"><span data-stu-id="46ec2-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="46ec2-197">Además tooserving como un IDP, Azure AD también actúa como un STS.</span><span class="sxs-lookup"><span data-stu-id="46ec2-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="46ec2-198">Azure AD emite un JWT para el acceso a los recursos (un token de acceso).</span><span class="sxs-lookup"><span data-stu-id="46ec2-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="46ec2-199">Un token JWT tiene distintas notificaciones.</span><span class="sxs-lookup"><span data-stu-id="46ec2-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="46ec2-200">API de REST de Azure Media Services como recurso o audiencia: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="46ec2-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="46ec2-201">Id. de cliente: vea el paso 2 de [Pasos de configuración](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="46ec2-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="46ec2-202">Secreto del cliente: vea el paso 2 de [Pasos de configuración](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="46ec2-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="46ec2-203">El extremo de API de REST de servicios multimedia cuenta Hola siguiendo el formato:</span><span class="sxs-lookup"><span data-stu-id="46ec2-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="46ec2-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="46ec2-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="46ec2-205">Se trata de punto de conexión de hello en qué todas las API de REST de servicios multimedia se realizan llamadas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="46ec2-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="46ec2-206">Por ejemplo, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="46ec2-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="46ec2-207">A continuación, puede colocar estos cinco parámetros en el archivo web.config o app.config, toouse en el código.</span><span class="sxs-lookup"><span data-stu-id="46ec2-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="46ec2-208">Código de ejemplo</span><span class="sxs-lookup"><span data-stu-id="46ec2-208">Sample code</span></span>

<span data-ttu-id="46ec2-209">Puede encontrar código de ejemplo de Hola en [autenticación de Azure AD para el acceso de servicios multimedia de Azure: tanto a través de la API de REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="46ec2-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="46ec2-210">código de ejemplo de Hola tiene dos partes:</span><span class="sxs-lookup"><span data-stu-id="46ec2-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="46ec2-211">Un proyecto de biblioteca DLL que tiene todo el código Hola API de REST para autenticación de Azure AD y la autorización.</span><span class="sxs-lookup"><span data-stu-id="46ec2-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="46ec2-212">También tiene un método para hacer que el extremo de API de REST de servicios multimedia de API de REST llamadas toohello, con el token de acceso de Hola.</span><span class="sxs-lookup"><span data-stu-id="46ec2-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="46ec2-213">Un cliente de prueba de consola, que inicia la autenticación de Azure AD y llama a distintas API de REST de Media Services.</span><span class="sxs-lookup"><span data-stu-id="46ec2-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="46ec2-214">proyecto de ejemplo de Hola tiene tres características:</span><span class="sxs-lookup"><span data-stu-id="46ec2-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="46ec2-215">Autenticaciones de Azure AD a través de las credenciales del cliente hello conceder mediante Hola solo API de REST.</span><span class="sxs-lookup"><span data-stu-id="46ec2-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="46ec2-216">Acceso a los servicios multimedia Azure mediante Hola solo API de REST.</span><span class="sxs-lookup"><span data-stu-id="46ec2-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="46ec2-217">Acceso de almacenamiento de Azure mediante el uso de Hola solo API de REST (como toocreate usa una cuenta de servicios multimedia, mediante el uso de API de REST).</span><span class="sxs-lookup"><span data-stu-id="46ec2-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="46ec2-218">¿Dónde está el token de actualización de hello?</span><span class="sxs-lookup"><span data-stu-id="46ec2-218">Where is hello refresh token?</span></span>

<span data-ttu-id="46ec2-219">¿Algunos de los lectores que se pregunte: donde es el token de actualización de hello?</span><span class="sxs-lookup"><span data-stu-id="46ec2-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="46ec2-220">¿Por qué no usar aquí un token de actualización?</span><span class="sxs-lookup"><span data-stu-id="46ec2-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="46ec2-221">propósito de Hola de un token de actualización no es toorefresh un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="46ec2-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="46ec2-222">En su lugar, está diseñada toobypass intervención del usuario o la autenticación del usuario final y sigue recibiendo un token de acceso válido cuando caduca un token anterior.</span><span class="sxs-lookup"><span data-stu-id="46ec2-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="46ec2-223">Un nombre más adecuado para un token de actualización sería algo como "token de omisión de reinicio de sesión de usuario".</span><span class="sxs-lookup"><span data-stu-id="46ec2-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="46ec2-224">Si usas Hola flujo (nombre de usuario y una contraseña, que actúa en nombre del usuario) de la concesión de autorización de OAuth 2.0, un token de actualización le ayuda a obtener un acceso renovado token sin solicitar la intervención del usuario.</span><span class="sxs-lookup"><span data-stu-id="46ec2-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="46ec2-225">Sin embargo, para hello flujo que se describe en este artículo de concesión de credenciales de cliente de OAuth 2.0, cliente hello actúa en su propio nombre.</span><span class="sxs-lookup"><span data-stu-id="46ec2-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="46ec2-226">No necesita la intervención del usuario en absoluto, y servidor de autorización de hello no necesita demasiado (y no) proporcionan un token de actualización.</span><span class="sxs-lookup"><span data-stu-id="46ec2-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="46ec2-227">Si depura hello **GetUrlEncodedJWT** método, observe que la respuesta de Hola de extremo de token de hello tiene un token de acceso, pero ningún token de actualización.</span><span class="sxs-lookup"><span data-stu-id="46ec2-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="46ec2-228">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="46ec2-228">Next steps</span></span>

<span data-ttu-id="46ec2-229">Empezar a trabajar con [cargar archivos tooyour cuenta](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="46ec2-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>

---
title: "Protección de su contenido con Azure Media Services | Microsoft Docs"
description: "En este artículo se ofrece información general de protección de contenido con Media Services."
services: media-services
documentationcenter: 
author: Juliako
manager: cfowler
editor: 
ms.assetid: 81bc00e1-dcda-4d69-b9ab-8768b793422b
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/29/2017
ms.author: juliako
ms.openlocfilehash: 64be4ea104bd11b8e191e2c8d4170a2de88acb47
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="protecting-content-overview"></a><span data-ttu-id="0f124-103">Información general de protección del contenido</span><span class="sxs-lookup"><span data-stu-id="0f124-103">Protecting content overview</span></span>
<span data-ttu-id="0f124-104">Servicios multimedia de Microsoft Azure le permite proteger su contenido multimedia desde el momento en que deja el equipo a través de almacenamiento, procesamiento y entrega.</span><span class="sxs-lookup"><span data-stu-id="0f124-104">Microsoft Azure Media Services enables you to secure your media from the time it leaves your computer through storage, processing, and delivery.</span></span> <span data-ttu-id="0f124-105">Media Services permite entregar el contenido cifrado de forma dinámica con Estándar de cifrado avanzado (AES) (mediante claves de cifrado de 128 bits) o cualquiera de los DRM principales: Microsoft PlayReady, Google Widevine y Apple FairPlay.</span><span class="sxs-lookup"><span data-stu-id="0f124-105">Media Services allows you to deliver your live and on-demand content encrypted dynamically with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or any of the major DRMs: Microsoft PlayReady, Google Widevine, and Apple FairPlay.</span></span> <span data-ttu-id="0f124-106">Media Services también proporciona un servicio para entregar claves AES y licencias de DMR (PlayReady, Widevine y FairPlay) a los clientes autorizados.</span><span class="sxs-lookup"><span data-stu-id="0f124-106">Media Services also provides a service for delivering AES keys and DRM (PlayReady, Widevine, and FairPlay) licenses to authorized clients.</span></span> 

<span data-ttu-id="0f124-107">La siguiente imagen muestra los flujos de trabajo de protección de contenido que admite AMS.</span><span class="sxs-lookup"><span data-stu-id="0f124-107">The following image demonstrates the content protection workflows that AMS supports.</span></span> 

![Protección con PlayReady](./media/media-services-content-protection-overview/media-services-content-protection-with-multi-drm.png)

>[!NOTE]
><span data-ttu-id="0f124-109">Cuando se crea la cuenta de AMS, se agrega un punto de conexión de streaming **predeterminado** a la cuenta en estado **Stopped** (Detenido).</span><span class="sxs-lookup"><span data-stu-id="0f124-109">When your AMS account is created a **default** streaming endpoint is added to your account in the **Stopped** state.</span></span> <span data-ttu-id="0f124-110">Para iniciar la transmisión del contenido y aprovechar el empaquetado dinámico y el cifrado dinámico, el punto de conexión de streaming desde el que va a transmitir el contenido debe estar en estado **Running** (En ejecución).</span><span class="sxs-lookup"><span data-stu-id="0f124-110">To start streaming your content and take advantage of dynamic packaging and dynamic encryption, the streaming endpoint from which you want to stream content has to be in the **Running** state.</span></span> 

<span data-ttu-id="0f124-111">En este tema se explican los [conceptos y terminología](media-services-content-protection-overview.md) pertinentes para conocer la protección de contenido con AMS.</span><span class="sxs-lookup"><span data-stu-id="0f124-111">This topic explains [concepts and terminology](media-services-content-protection-overview.md) relevant to understanding content protection with AMS.</span></span> <span data-ttu-id="0f124-112">El tema también contiene [vínculos](media-services-content-protection-overview.md#common-scenarios) a temas que muestran cómo realizar las tareas de protección de contenido.</span><span class="sxs-lookup"><span data-stu-id="0f124-112">The topic also contains [links](media-services-content-protection-overview.md#common-scenarios) to topics that show how to achieve content protection tasks.</span></span> 

## <a name="dynamic-encryption"></a><span data-ttu-id="0f124-113">Cifrado dinámico</span><span class="sxs-lookup"><span data-stu-id="0f124-113">Dynamic encryption</span></span>
<span data-ttu-id="0f124-114">Microsoft Azure Media Services permite proporcionar el contenido cifrado de forma dinámica con la clave sin cifrado AES o cifrado DRM: Microsoft PlayReady, Google Widevine y Apple FairPlay.</span><span class="sxs-lookup"><span data-stu-id="0f124-114">Microsoft Azure Media Services enables you to deliver your content encrypted  dynamically with AES clear key or DRM encryption: Microsoft PlayReady, Google Widevine, and Apple FairPlay.</span></span>

<span data-ttu-id="0f124-115">Actualmente puede cifrar los formatos de streaming siguientes: HLS, MPEG DASH y Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="0f124-115">Currently, you can encrypt the following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="0f124-116">No se pueden cifrar las descargas progresivas.</span><span class="sxs-lookup"><span data-stu-id="0f124-116">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="0f124-117">Si desea que Servicios multimedia cifren un recurso, debe asociar una clave de cifrado (CommonEncryption o EnvelopeEncryption) con su recurso y, además, configurar directivas de autorización para la clave.</span><span class="sxs-lookup"><span data-stu-id="0f124-117">If you want for Media Services to encrypt an asset, you need to associate an encryption key (CommonEncryption or EnvelopeEncryption) with your asset and also configure authorization policies for the key.</span></span>

<span data-ttu-id="0f124-118">También necesita configurar la directiva de entrega del recurso.</span><span class="sxs-lookup"><span data-stu-id="0f124-118">You also need to configure the asset's delivery policy.</span></span> <span data-ttu-id="0f124-119">Si desea transmitir un recurso cifrado de almacenamiento, asegúrese de configurar la directiva de entrega del recurso para especificar cómo desea entregarlo.</span><span class="sxs-lookup"><span data-stu-id="0f124-119">If you want to stream a storage encrypted asset, make sure to specify how you want to deliver it by configuring asset delivery policy.</span></span>

<span data-ttu-id="0f124-120">Cuando un reproductor solicita una transmisión, Media Services usa la clave especificada para cifrar de forma dinámica el contenido mediante la clave sin cifrado de AES o el cifrado DRM.</span><span class="sxs-lookup"><span data-stu-id="0f124-120">When a stream is requested by a player, Media Services uses the specified key to dynamically encrypt your content using AES clear key or DRM encryption.</span></span> <span data-ttu-id="0f124-121">Para descifrar la secuencia, el reproductor solicitará la clave del servicio de entrega de claves.</span><span class="sxs-lookup"><span data-stu-id="0f124-121">To decrypt the stream, the player will request the key from the key delivery service.</span></span> <span data-ttu-id="0f124-122">Para decidir si el usuario está o no autorizado para obtener la clave, el servicio evalúa las directivas de autorización que especificó para la clave.</span><span class="sxs-lookup"><span data-stu-id="0f124-122">To decide whether or not the user is authorized to get the key, the service evaluates the authorization policies that you specified for the key.</span></span>


## <a name="storage-encryption"></a><span data-ttu-id="0f124-123">Cifrado de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="0f124-123">Storage encryption</span></span>
<span data-ttu-id="0f124-124">Utilice el cifrado de almacenamiento para cifrar el contenido no cifrado de manera local mediante el cifrado de AES de 256 bits y luego cargarlo a Azure Storage donde se almacena cifrado en reposo.</span><span class="sxs-lookup"><span data-stu-id="0f124-124">Use storage encryption to encrypt your clear content locally using AES 256 bit encryption and then upload it to Azure Storage where it is stored encrypted at rest.</span></span> <span data-ttu-id="0f124-125">Los recursos protegidos con el cifrado de almacenamiento se descifran automáticamente y se colocan en un sistema de archivos cifrados antes de la codificación y, opcionalmente, se vuelven a cifrar antes de volver a cargarlos como un nuevo recurso de salida.</span><span class="sxs-lookup"><span data-stu-id="0f124-125">Assets protected with storage encryption are automatically unencrypted and placed in an encrypted file system prior to encoding, and optionally re-encrypted prior to uploading back as a new output asset.</span></span> <span data-ttu-id="0f124-126">El caso de uso principal para el cifrado de almacenamiento es cuando desea proteger los archivos multimedia de entrada de alta calidad con un sólido cifrado en reposo en disco.</span><span class="sxs-lookup"><span data-stu-id="0f124-126">The primary use case for storage encryption is when you want to secure your high quality input media files with strong encryption at rest on disk.</span></span>

<span data-ttu-id="0f124-127">Para entregar a un recurso cifrado de almacenamiento, debe configurar la directiva de entrega del recurso para que Servicios multimedia sepa cómo desea entregar el contenido.</span><span class="sxs-lookup"><span data-stu-id="0f124-127">In order to deliver a storage encrypted asset, you must configure the asset’s delivery policy so Media Services knows how you want to deliver your content.</span></span> <span data-ttu-id="0f124-128">Antes de poder transmitir el activo, el servidor de streaming quita el cifrado de almacenamiento y transmite el contenido usando la directiva de entrega especificada (por ejemplo, AES, cifrado común o sin cifrado).</span><span class="sxs-lookup"><span data-stu-id="0f124-128">Before your asset can be streamed, the streaming server removes the storage encryption and streams your content using the specified delivery policy (for example, AES, common encryption, or no encryption).</span></span>

## <a name="common-encryption-cenc"></a><span data-ttu-id="0f124-129">Cifrado común (CENC)</span><span class="sxs-lookup"><span data-stu-id="0f124-129">Common encryption (CENC)</span></span>
<span data-ttu-id="0f124-130">El cifrado común se utiliza al cifrar el contenido con PlayReady o Widewine.</span><span class="sxs-lookup"><span data-stu-id="0f124-130">Common encryption is used when encrypting your content with PlayReady or/and Widewine.</span></span>

## <a name="using-cbcs-aapl-encryption"></a><span data-ttu-id="0f124-131">Uso del cifrado cbcs-aapl</span><span class="sxs-lookup"><span data-stu-id="0f124-131">Using cbcs-aapl encryption</span></span>
<span data-ttu-id="0f124-132">Cbcs-aapl se usa al cifrar el contenido con FairPlay.</span><span class="sxs-lookup"><span data-stu-id="0f124-132">Cbcs-aapl is used when encrypting your content with FairPlay.</span></span>

## <a name="envelope-encryption"></a><span data-ttu-id="0f124-133">Cifrado de sobre</span><span class="sxs-lookup"><span data-stu-id="0f124-133">Envelope encryption</span></span>
<span data-ttu-id="0f124-134">Utilice esta opción si desea proteger su contenido con la clave sin cifrado de AES-128.</span><span class="sxs-lookup"><span data-stu-id="0f124-134">Use this option if you want to protect your content with AES-128 clear key.</span></span> <span data-ttu-id="0f124-135">Si desea una opción más segura, elija uno de los DRM enumerados en este tema.</span><span class="sxs-lookup"><span data-stu-id="0f124-135">If you want a more secure option, choose one of the DRMs listed in this topic.</span></span> 

## <a name="licenses-and-keys-delivery-service"></a><span data-ttu-id="0f124-136">Servicio de entrega de licencias y claves</span><span class="sxs-lookup"><span data-stu-id="0f124-136">Licenses and keys delivery service</span></span>
<span data-ttu-id="0f124-137">Media Services proporciona un servicio para proporcionar licencias DRM (PlayReady, Widevine, FairPlay) y claves sin cifrado de AES a clientes autorizados.</span><span class="sxs-lookup"><span data-stu-id="0f124-137">Media Services provides a service for delivering DRM (PlayReady, Widevine, FairPlay) licenses and AES clear keys to authorized clients.</span></span> <span data-ttu-id="0f124-138">Puede utilizar [Azure Portal](media-services-portal-protect-content.md), la API de REST o SDK de Media Services para .NET para configurar las directivas de autorización y autenticación de sus licencias y claves.</span><span class="sxs-lookup"><span data-stu-id="0f124-138">You can use [the Azure portal](media-services-portal-protect-content.md), REST API, or Media Services SDK for .NET to configure authorization and authentication policies for your licenses and keys.</span></span>

## <a name="token-restriction"></a><span data-ttu-id="0f124-139">Restricción de token</span><span class="sxs-lookup"><span data-stu-id="0f124-139">Token restriction</span></span>
<span data-ttu-id="0f124-140">La directiva de autorización de claves de acceso podría tener una o más restricciones de autorización: abrir o restricción de token.</span><span class="sxs-lookup"><span data-stu-id="0f124-140">The content key authorization policy could have one or more authorization restrictions: open or token restriction.</span></span> <span data-ttu-id="0f124-141">La directiva con restricción token debe ir acompañada de un token emitido por un Servicio de tokens seguros (STS).</span><span class="sxs-lookup"><span data-stu-id="0f124-141">The token restricted policy must be accompanied by a token issued by a Secure Token Service (STS).</span></span> <span data-ttu-id="0f124-142">Servicios multimedia admite tokens en formato Token de web simple (SWT) y en formato Token de web JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="0f124-142">Media Services supports tokens in the Simple Web Tokens (SWT) format and JSON Web Token (JWT) format.</span></span> <span data-ttu-id="0f124-143">Los Servicios multimedia no proporcionan Servicios de tokens seguros.</span><span class="sxs-lookup"><span data-stu-id="0f124-143">Media Services does not provide Secure Token Services.</span></span> <span data-ttu-id="0f124-144">Puede crear un STS personalizado o aprovechar el Servicio de control de acceso (ACS) de Microsoft Azure para emitir tokens.</span><span class="sxs-lookup"><span data-stu-id="0f124-144">You can create a custom STS or leverage Microsoft Azure ACS to issue tokens.</span></span> <span data-ttu-id="0f124-145">Se debe configurar el STS para crear un token firmado con las notificaciones de clave y emisión que especificó en la configuración de restricción de tokens.</span><span class="sxs-lookup"><span data-stu-id="0f124-145">The STS must be configured to create a token signed with the specified key and issue claims that you specified in the token restriction configuration.</span></span> <span data-ttu-id="0f124-146">El servicio de entrega de claves de Servicios multimedia devolverá la clave solicitada (o licencia) al cliente si el token es válido y las reclamaciones del token coinciden con las configuradas para la clave (o licencia).</span><span class="sxs-lookup"><span data-stu-id="0f124-146">The Media Services key delivery service will return the requested key (or license) to the client if the token is valid and the claims in the token match those configured for the key (or license).</span></span>

<span data-ttu-id="0f124-147">Al configurar la directiva de restricción de token, debe especificar los parámetros de clave de comprobación principal, emisor y público.</span><span class="sxs-lookup"><span data-stu-id="0f124-147">When configuring the token restricted policy, you must specify the primary verification key, issuer and audience parameters.</span></span> <span data-ttu-id="0f124-148">La clave de comprobación principal contiene la clave con la que se firmó el token y el emisor es el servicio de tokens seguros que emite el token.</span><span class="sxs-lookup"><span data-stu-id="0f124-148">The primary verification key contains the key that the token was signed with, issuer is the secure token service that issues the token.</span></span> <span data-ttu-id="0f124-149">El público (a veces denominado ámbito) describe la intención del token o del recurso cuyo acceso está autorizado por el token.</span><span class="sxs-lookup"><span data-stu-id="0f124-149">The audience (sometimes called scope) describes the intent of the token or the resource the token authorizes access to.</span></span> <span data-ttu-id="0f124-150">El servicio de entrega de claves de los Servicios multimedia valida que estos valores del token coincidan con los valores de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="0f124-150">The Media Services key delivery service validates that these values in the token match the values in the template.</span></span>

## <a name="streaming-urls"></a><span data-ttu-id="0f124-151">Direcciones URL de streaming</span><span class="sxs-lookup"><span data-stu-id="0f124-151">Streaming URLs</span></span>
<span data-ttu-id="0f124-152">Si el recurso se cifró con más de un DRM, debe usar una etiqueta de cifrado en la dirección URL de streaming: (formato = 'm3u8-aapl', cifrado = 'xxx').</span><span class="sxs-lookup"><span data-stu-id="0f124-152">If your asset was encrypted with more than one DRM, you should use an encryption tag in the streaming URL: (format='m3u8-aapl', encryption='xxx').</span></span>

<span data-ttu-id="0f124-153">Se aplican las siguientes consideraciones:</span><span class="sxs-lookup"><span data-stu-id="0f124-153">The following considerations apply:</span></span>

* <span data-ttu-id="0f124-154">Se puede especificar solo un tipo de cifrado o ninguno.</span><span class="sxs-lookup"><span data-stu-id="0f124-154">Only zero or one encryption type can be specified.</span></span>
* <span data-ttu-id="0f124-155">El tipo de cifrado no tiene que especificarse en la dirección URL si solo se aplicó un cifrado al recurso.</span><span class="sxs-lookup"><span data-stu-id="0f124-155">Encryption type doesn't have to be specified in the url if only one encryption was applied to the asset.</span></span>
* <span data-ttu-id="0f124-156">El tipo de cifrado distingue mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0f124-156">Encryption type is case insensitive.</span></span>
* <span data-ttu-id="0f124-157">Se pueden especificar los siguientes tipos de cifrado:</span><span class="sxs-lookup"><span data-stu-id="0f124-157">The following encryption types can be specified:</span></span>  
  * <span data-ttu-id="0f124-158">**cenc**: cifrado común (Playready o Widevine)</span><span class="sxs-lookup"><span data-stu-id="0f124-158">**cenc**:  Common encryption (Playready or Widevine)</span></span>
  * <span data-ttu-id="0f124-159">**cbcs-aapl**: Fairplay</span><span class="sxs-lookup"><span data-stu-id="0f124-159">**cbcs-aapl**: Fairplay</span></span>
  * <span data-ttu-id="0f124-160">**cbc**: cifrado de sobre AES.</span><span class="sxs-lookup"><span data-stu-id="0f124-160">**cbc**: AES envelope encryption.</span></span>

## <a name="common-scenarios"></a><span data-ttu-id="0f124-161">Escenarios comunes</span><span class="sxs-lookup"><span data-stu-id="0f124-161">Common scenarios</span></span>
<span data-ttu-id="0f124-162">Los temas siguientes muestran cómo proteger el contenido en el almacenamiento, proporcionar medios de streaming cifrados dinámicamente, uso del servicio de entrega de claves\licencia de AMS</span><span class="sxs-lookup"><span data-stu-id="0f124-162">The following topics demonstrate how to protect content in storage, deliver dynamically encrypted streaming media, use AMS key/license delivery service</span></span>

* [<span data-ttu-id="0f124-163">Protección con AES</span><span class="sxs-lookup"><span data-stu-id="0f124-163">Protect with AES</span></span>](media-services-protect-with-aes128.md) 
* [<span data-ttu-id="0f124-164">Protección con PlayReady y/o Widevine </span><span class="sxs-lookup"><span data-stu-id="0f124-164">Protect with PlayReady and/or Widevine </span></span>](media-services-protect-with-drm.md)
* [<span data-ttu-id="0f124-165">Transmisión de contenido HLS protegido con Apple FairPlay o PlayReady</span><span class="sxs-lookup"><span data-stu-id="0f124-165">Stream your HLS content Protected with Apple FairPlay and/or PlayReady</span></span>](media-services-protect-hls-with-fairplay.md)

### <a name="additional-scenarios"></a><span data-ttu-id="0f124-166">Otros escenarios</span><span class="sxs-lookup"><span data-stu-id="0f124-166">Additional scenarios</span></span>
* <span data-ttu-id="0f124-167">[How to integrate Azure PlayReady License service with your own encryptor/streaming server](http://mingfeiy.com/integrate-azure-playready-license-service-encryptorstreaming-server)(Integración del servicio de licencia de PlayReady de Azure con su propio servidor de streaming/sistema de cifrado).</span><span class="sxs-lookup"><span data-stu-id="0f124-167">[How to integrate Azure PlayReady License service with your own encryptor/streaming server](http://mingfeiy.com/integrate-azure-playready-license-service-encryptorstreaming-server).</span></span>
* [<span data-ttu-id="0f124-168">Uso de castLabs para entregar licencias de DRM a Servicios multimedia de Azure</span><span class="sxs-lookup"><span data-stu-id="0f124-168">Using castLabs to deliver DRM licenses to Azure Media Services</span></span>](media-services-castlabs-integration.md)

>[!NOTE]
><span data-ttu-id="0f124-169">Un escenario en el que usa un servidor DRM externo (tecnología) y flujo de AMS no se admite actualmente.</span><span class="sxs-lookup"><span data-stu-id="0f124-169">A scenario in which you use an external DRM server(technology) and stream from AMS is currently not supported.</span></span>


## <a name="media-services-learning-paths"></a><span data-ttu-id="0f124-170">Rutas de aprendizaje de Servicios multimedia</span><span class="sxs-lookup"><span data-stu-id="0f124-170">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="0f124-171">Envío de comentarios</span><span class="sxs-lookup"><span data-stu-id="0f124-171">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="related-links"></a><span data-ttu-id="0f124-172">Vínculos relacionados</span><span class="sxs-lookup"><span data-stu-id="0f124-172">Related Links</span></span>
[<span data-ttu-id="0f124-173">Anuncio de PlayReady como servicio y cifrado dinámico AES con Servicios multimedia de Azure</span><span class="sxs-lookup"><span data-stu-id="0f124-173">Announcing PlayReady as a service and AES dynamic encryption with Azure Media Services</span></span>](http://mingfeiy.com/playready)

[<span data-ttu-id="0f124-174">Explicación del precio de la entrega de licencia de PlayReady de Servicios multimedia de Azure</span><span class="sxs-lookup"><span data-stu-id="0f124-174">Azure Media Services PlayReady license delivery pricing explained</span></span>](http://mingfeiy.com/playready-pricing-explained-in-azure-media-services)

[<span data-ttu-id="0f124-175">Depuración del flujo cifrado de AES en Servicios multimedia de Azure</span><span class="sxs-lookup"><span data-stu-id="0f124-175">How to debug for AES encrypted stream in Azure Media Services</span></span>](http://mingfeiy.com/debug-aes-encrypted-stream-azure-media-services)

[<span data-ttu-id="0f124-176">Autenticación de token JWT</span><span class="sxs-lookup"><span data-stu-id="0f124-176">JWT token authenitcation</span></span>](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/)

<span data-ttu-id="0f124-177">[Integración de la aplicación OWIN basada en MVC de Servicios multimedia de Azure con Azure Active Directory y restricción de la entrega de claves de contenido basada en notificaciones de JWT](http://www.gtrifonov.com/2015/01/24/mvc-owin-azure-media-services-ad-integration/).</span><span class="sxs-lookup"><span data-stu-id="0f124-177">[Integrate Azure Media Services OWIN MVC based app with Azure Active Directory and restrict content key delivery based on JWT claims](http://www.gtrifonov.com/2015/01/24/mvc-owin-azure-media-services-ad-integration/).</span></span>

<span data-ttu-id="0f124-178">[Uso de ACS de Azure para emitir tokens](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="0f124-178">[Use Azure ACS to issue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

[content-protection]: ./media/media-services-content-protection-overview/media-services-content-protection.png

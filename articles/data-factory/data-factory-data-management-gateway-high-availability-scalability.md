---
title: Alta disponibilidad con Data Management Gateway en Azure Data Factory | Microsoft Docs
description: "Este artículo explica cómo puede escalar horizontalmente una puerta de enlace de administración de datos mediante la adición de más nodos y escalar verticalmente aumentando el número de trabajos simultáneos que se pueden ejecutar en un nodo."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: b6bf353a2bad28b0db3a88e971e5c6b209b7ab2b
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="194cb-103">Data Management Gateway - Alta disponibilidad y escalabilidad (versión preliminar)</span><span class="sxs-lookup"><span data-stu-id="194cb-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="194cb-104">Este artículo le ayuda a configurar una solución de alta disponibilidad y escalabilidad con Data Management Gateway.</span><span class="sxs-lookup"><span data-stu-id="194cb-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="194cb-105">En este artículo se da por supuesto que ya está familiarizado con los conceptos básicos de Data Management Gateway.</span><span class="sxs-lookup"><span data-stu-id="194cb-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="194cb-106">Para más información, consulte [Data Management Gateway](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="194cb-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="194cb-107">**La versión preliminar de esta característica es compatible oficialmente con Data Management Gateway versión 2.12.xxxx.x y superior**.</span><span class="sxs-lookup"><span data-stu-id="194cb-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="194cb-108">Asegúrese de que está utilizando la versión 2.12.xxxx.x o superior.</span><span class="sxs-lookup"><span data-stu-id="194cb-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="194cb-109">Descargue la versión más reciente de Data Management Gateway [aquí](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="194cb-109">Download the latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="194cb-110">Información general</span><span class="sxs-lookup"><span data-stu-id="194cb-110">Overview</span></span>
<span data-ttu-id="194cb-111">Puede asociar puertas de enlace de administración de datos instaladas en varios equipos de forma local con una sola puerta de enlace lógica desde el portal.</span><span class="sxs-lookup"><span data-stu-id="194cb-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from the portal.</span></span> <span data-ttu-id="194cb-112">Estos equipos se llaman **nodos**.</span><span class="sxs-lookup"><span data-stu-id="194cb-112">These machines are called **nodes**.</span></span> <span data-ttu-id="194cb-113">Puede tener hasta **cuatro nodos** asociados con una puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-113">You can have up to **four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="194cb-114">Las ventajas de tener varios nodos (máquinas locales con la puerta de enlace instalada) para una puerta de enlace lógica son:</span><span class="sxs-lookup"><span data-stu-id="194cb-114">The benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="194cb-115">Mejorar el rendimiento del movimiento de datos entre los equipos locales y los almacenes de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="194cb-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="194cb-116">Si uno de los nodos deja de funcionar por algún motivo, los otros nodos siguen estando disponibles para mover los datos.</span><span class="sxs-lookup"><span data-stu-id="194cb-116">If one of the nodes goes down for some reason, other nodes are still available for moving the data.</span></span> 
- <span data-ttu-id="194cb-117">Si uno de los nodos tiene que ser desconectado por mantenimiento, los otros nodos siguen estando disponibles para mover los datos.</span><span class="sxs-lookup"><span data-stu-id="194cb-117">If one of the nodes need to be taken offline for maintenance, other nodes are still available for moving the data.</span></span>

<span data-ttu-id="194cb-118">También puede configurar el número de **trabajos de movimiento de datos simultáneos** que puede ejecutar en un nodo para escalar verticalmente la funcionalidad de mover datos entre los equipos locales y los almacenes de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="194cb-118">You can also configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="194cb-119">Mediante Azure Portal, puede supervisar el estado de estos nodos, lo que ayuda a decidir si agregar o quitar un nodo de la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-119">Using the Azure portal, you can monitor the status of these nodes, which helps you decide whether to add or remove a node from the logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="194cb-120">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="194cb-120">Architecture</span></span> 
<span data-ttu-id="194cb-121">El diagrama siguiente proporciona información general de la arquitectura de la característica de escalabilidad y disponibilidad de Data Management Gateway:</span><span class="sxs-lookup"><span data-stu-id="194cb-121">The following diagram provides the architecture overview of scalability and availability feature of the Data Management Gateway:</span></span> 

![Data Management Gateway - Alta disponibilidad y escalabilidad](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="194cb-123">Una **puerta de enlace lógica** es la puerta de enlace que agrega a una factoría de datos en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="194cb-123">A **logical gateway** is the gateway you add to a data factory in the Azure portal.</span></span> <span data-ttu-id="194cb-124">Anteriormente, solo era posible asociar un único equipo de Windows local con Data Management Gateway instalado con una puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="194cb-125">Ese equipo de puerta de enlace local se llama nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="194cb-126">Ahora, puede asociar hasta **cuatro nodos físicos** con una puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-126">Now, you can associate up to **four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="194cb-127">Una puerta de enlace lógica con varios nodos se denomina **puerta de enlace multi-nodo**.</span><span class="sxs-lookup"><span data-stu-id="194cb-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="194cb-128">Todos estos nodos están **activos**.</span><span class="sxs-lookup"><span data-stu-id="194cb-128">All these nodes are **active**.</span></span> <span data-ttu-id="194cb-129">Todos ellos pueden procesar trabajos de movimiento de datos para mover datos entre los equipos locales y los almacenes de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="194cb-129">They all can process data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="194cb-130">Uno de los nodos actúa como distribuidor y como trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-130">One of the nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="194cb-131">Los otros nodos en los grupos son nodos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-131">Other nodes in the groups are worker nodes.</span></span> <span data-ttu-id="194cb-132">Un nodo **distribuidor** extrae tareas y trabajos de movimiento de datos desde el servicio en la nube y los envía a los nodos de trabajo (incluido él mismo).</span><span class="sxs-lookup"><span data-stu-id="194cb-132">A **dispatcher** node pulls data movement tasks/jobs from the cloud service and dispatches them to worker nodes (including itself).</span></span> <span data-ttu-id="194cb-133">Un nodo de **trabajo** ejecuta trabajos de movimiento de datos para mover datos entre los equipos locales y los almacenes de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="194cb-133">A **worker** node executes data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="194cb-134">Todos los nodos son de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-134">All nodes are workers.</span></span> <span data-ttu-id="194cb-135">Únicamente un nodo puede ser a la vez distribuidor y nodo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="194cb-136">Normalmente, puede comenzar con un nodo y **escalar horizontalmente** para agregar más nodos cuando los nodos existentes se desborden por la carga de movimiento de datos.</span><span class="sxs-lookup"><span data-stu-id="194cb-136">You may typically start with one node and **scale out** to add more nodes as the existing node(s) are overwhelmed with the data movement load.</span></span> <span data-ttu-id="194cb-137">También puede **escalar verticalmente** la capacidad de movimiento de datos de un nodo de puerta de enlace si aumenta el número de trabajos simultáneos que se pueden ejecutar en el nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-137">You can also **scale up** the data movement capability of a gateway node by increasing the number of concurrent jobs that are allowed to run on the node.</span></span> <span data-ttu-id="194cb-138">Esta funcionalidad también está disponible con una puerta de enlace de un único nodo (incluso cuando no está habilitada la característica de escalabilidad y disponibilidad).</span><span class="sxs-lookup"><span data-stu-id="194cb-138">This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="194cb-139">Una puerta de enlace con varios nodos mantiene las credenciales del almacén de datos sincronizadas en todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="194cb-139">A gateway with multiple nodes keeps the data store credentials in sync across all nodes.</span></span> <span data-ttu-id="194cb-140">Si hay un problema de conectividad de nodo a nodo, las credenciales podrían no estar sincronizadas. Al establecer las credenciales para un almacén de datos local que usa una puerta de enlace, se guardan las credenciales en el nodo distribuidor y de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-140">If there is a node-to-node connectivity issue, the credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on the dispatcher/worker node.</span></span> <span data-ttu-id="194cb-141">El nodo distribuidor se sincroniza con los otros nodos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-141">The dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="194cb-142">Este proceso se conoce como **sincronización de credenciales**. El canal de comunicación entre los nodos puede estar **cifrado** por un certificado público de SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="194cb-142">This process is known as **credentials sync**. The communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="194cb-143">Configuración de una puerta de enlace de varios nodos</span><span class="sxs-lookup"><span data-stu-id="194cb-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="194cb-144">En esta sección se da por supuesto que ha consultado o está familiarizado con los conceptos de los siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="194cb-144">This section assumes that you have gone through the following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="194cb-145">[Data Management Gateway](data-factory-data-management-gateway.md): ofrece una información general detallada de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="194cb-146">[Movimiento de datos entre equipos locales y almacenes de datos en la nube](data-factory-move-data-between-onprem-and-cloud.md): contiene un tutorial con instrucciones paso a paso para usar una puerta de enlace con un único nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="194cb-147">Antes de instalar una puerta de enlace de administración de datos en un equipo de Windows local, consulte los requisitos previos descritos en [el artículo principal](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="194cb-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [the main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="194cb-148">En el [tutorial](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), al crear una puerta de enlace lógica, se habilita la característica de **alta disponibilidad y escalabilidad**.</span><span class="sxs-lookup"><span data-stu-id="194cb-148">In the [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable the **High Availability & Scalability** feature.</span></span> 

    ![Data Management Gateway: habilitar alta disponibilidad y escalabilidad](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="194cb-150">En la página **Configurar**, utilice el vinculo **Instalación rápida** o **Instalación manual** para instalar una puerta de enlace en el primer nodo (un equipo Windows local).</span><span class="sxs-lookup"><span data-stu-id="194cb-150">In the **Configure** page, use either **Express Setup** or **Manual Setup** link to install a gateway on the first node (an on-premises Windows machine).</span></span>

    ![Data Management Gateway: instalación rápida o manual](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="194cb-152">Si utiliza la opción de configuración rápida, la comunicación de nodo a nodo se realiza sin cifrado.</span><span class="sxs-lookup"><span data-stu-id="194cb-152">If you use the express setup option, the node-to-node communication is done without encryption.</span></span> <span data-ttu-id="194cb-153">El nombre del nodo es igual que el nombre del equipo.</span><span class="sxs-lookup"><span data-stu-id="194cb-153">The node name is same as the machine name.</span></span> <span data-ttu-id="194cb-154">Use la instalación manual si la comunicación de nodo a nodo debe cifrarse o si desea especificar un nombre de nodo de su elección.</span><span class="sxs-lookup"><span data-stu-id="194cb-154">Use manual setup if the node-node communication needs to be encrypted or you want to specify a node name of your choice.</span></span> <span data-ttu-id="194cb-155">Los nombres de nodo no se puede editar más adelante.</span><span class="sxs-lookup"><span data-stu-id="194cb-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="194cb-156">Si elige **instalación rápida**</span><span class="sxs-lookup"><span data-stu-id="194cb-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="194cb-157">Podrá ver el siguiente mensaje después de que la puerta de enlace se ha instalado correctamente:</span><span class="sxs-lookup"><span data-stu-id="194cb-157">You see the following message after the gateway is successfully installed:</span></span>

        ![Data Management Gateway: instalación rápida correcta](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="194cb-159">Puede iniciar Configuration Manager de Data Management Gateway siguiendo [estas instrucciones](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="194cb-159">Launch Data Management Configuration Manager for the gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="194cb-160">Verá el nombre de la puerta de enlace, el nombre de nodo, el estado, etcetera.</span><span class="sxs-lookup"><span data-stu-id="194cb-160">You see the gateway name, node name, status, etc.</span></span>

        ![Data Management Gateway: instalación correcta](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="194cb-162">Si elige **instalación manual**:</span><span class="sxs-lookup"><span data-stu-id="194cb-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="194cb-163">Descargue el paquete de instalación de Microsoft Download Center y ejecútelo para instalar la puerta de enlace en el equipo.</span><span class="sxs-lookup"><span data-stu-id="194cb-163">Download the installation package from the Microsoft Download Center, run it to install gateway on your machine.</span></span>
    2. <span data-ttu-id="194cb-164">Use la **clave de autenticación** desde la página **Configurar** para registrar la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-164">Use the **authentication key** from the **Configure** page to register the gateway.</span></span>
    
        ![Data Management Gateway: instalación correcta](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="194cb-166">En la página **Nuevo nodo de puerta de enlace**, puede proporcionar un **nombre** personalizado al nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-166">In the **New gateway node** page, you can provide a custom **name** to the gateway node.</span></span> <span data-ttu-id="194cb-167">De forma predeterminada, el nombre de nodo es igual que el nombre del equipo.</span><span class="sxs-lookup"><span data-stu-id="194cb-167">By default, node name is same as the machine name.</span></span>    

        ![Data Management Gateway: especificar nombre](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="194cb-169">En la página siguiente, puede elegir si desea **habilitar el cifrado para la comunicación de nodo a nodo**.</span><span class="sxs-lookup"><span data-stu-id="194cb-169">In the next page, you can choose whether to **enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="194cb-170">Haga clic en **Omitir** para deshabilitar el cifrado (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="194cb-170">Click **Skip** to disable encryption (default).</span></span>

        ![Data Management Gateway: habilitar cifrado](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="194cb-172">Solo se admite el cambio del modo de cifrado cuando se tiene un único nodo de puerta de enlace en la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-172">Changing of encryption mode is only supported when you have a single gateway node in the logical gateway.</span></span> <span data-ttu-id="194cb-173">Para cambiar el modo de cifrado cuando una puerta de enlace tiene varios nodos, realice los pasos siguientes: elimine todos los nodos excepto uno, cambie el modo de cifrado y, a continuación, vuelva a agregar los nodos.</span><span class="sxs-lookup"><span data-stu-id="194cb-173">To change the encryption mode when a gateway has multiple nodes, do the following steps: delete all the nodes except one node, change the encryption mode, and then add the nodes again.</span></span>
        > 
        > <span data-ttu-id="194cb-174">Consulte la sección [requisitos de los certificados TLS/SSL](#tlsssl-certificate-requirements) para obtener una lista de los requisitos para utilizar un certificado TLS/SSL.</span><span class="sxs-lookup"><span data-stu-id="194cb-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="194cb-175">Después de que la puerta de enlace se ha instalado correctamente, haga clic en Iniciar Configuration Manager:</span><span class="sxs-lookup"><span data-stu-id="194cb-175">After the gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Instalación manual: iniciar Configuration Manager](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="194cb-177">Puede ver Configuration Manager de Data Management Gateway en el nodo (máquina de Windows local), que muestra el estado de conectividad, **nombre de puerta de enlace** y **nombre de nodo**.</span><span class="sxs-lookup"><span data-stu-id="194cb-177">you see Data Management Gateway Configuration Manager on the node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Data Management Gateway: instalación correcta](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="194cb-179">Si va a aprovisionar la puerta de enlace en una máquina virtual de Azure, puede usar [esta plantilla de Azure Resource Manager en GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="194cb-179">If you are provisioning the gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="194cb-180">Este script crea una puerta de enlace lógica, configura las máquinas virtuales con el software de Data Management Gateway instalado y las registra en la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with the logical gateway.</span></span> 
6. <span data-ttu-id="194cb-181">En Azure Portal, abra la página **Puerta de enlace**:</span><span class="sxs-lookup"><span data-stu-id="194cb-181">In Azure portal, launch the **Gateway** page:</span></span> 
    1. <span data-ttu-id="194cb-182">En la página de inicio de factoría de datos en el portal, haga clic en **Servicios vinculados**.</span><span class="sxs-lookup"><span data-stu-id="194cb-182">On the data factory home page in the portal, click **Linked Services**.</span></span>
    
        ![Página principal Factoría de datos](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="194cb-184">Seleccione **Puerta de enlace** para ver la página **Puerta de enlace**:</span><span class="sxs-lookup"><span data-stu-id="194cb-184">select the **gateway** to see the **Gateway** page:</span></span>
    
        ![Página principal Factoría de datos](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="194cb-186">Verá la página **Puerta de enlace**:</span><span class="sxs-lookup"><span data-stu-id="194cb-186">You see the **Gateway** page:</span></span>   

        ![Puerta de enlace con la vista de un solo nodo](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="194cb-188">Haga clic en **Agregar nodo** en la barra de herramientas para agregar un nodo a la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-188">Click **Add Node** on the toolbar to add a node to the logical gateway.</span></span> <span data-ttu-id="194cb-189">Si va a usar la instalación rápida, realice este paso desde la máquina local que va a agregar como un nodo a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-189">If you are planning to use express setup, do this step from the on-premises machine that will be added as a node to the gateway.</span></span> 

    ![Data Management Gateway: menú agregar nodo](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="194cb-191">Los pasos son similares a los de la configuración del primer nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-191">Steps are similar to setting up the first node.</span></span> <span data-ttu-id="194cb-192">La interfaz de usuario de Configuration Manager permite establecer el nombre del nodo si elige la opción de instalación manual:</span><span class="sxs-lookup"><span data-stu-id="194cb-192">The Configuration Manager UI lets you set the node name if you choose the manual installation option:</span></span> 

    ![Configuration Manager: instalación de la segunda puerta de enlace](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="194cb-194">Después de que la puerta de enlace se ha instalado correctamente en el nodo, la herramienta de Configuration Manager muestra la siguiente pantalla:</span><span class="sxs-lookup"><span data-stu-id="194cb-194">After the gateway is installed successfully on the node, the Configuration Manager tool displays the following screen:</span></span>  

    ![Configuration Manager: instalación correcta de la segunda puerta de enlace](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="194cb-196">Si abre la página **Puerta de enlace** en el portal, verá dos nodos de puerta de enlace ahora:</span><span class="sxs-lookup"><span data-stu-id="194cb-196">If you open the **Gateway** page in the portal, you see two gateway nodes now:</span></span> 

    ![Puerta de enlace con dos nodos en el portal](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="194cb-198">Para eliminar un nodo de puerta de enlace, haga clic en **Eliminar nodo** en la barra de herramientas, seleccione el nodo que desea eliminar y, a continuación, haga clic en **Eliminar** desde la barra de herramientas.</span><span class="sxs-lookup"><span data-stu-id="194cb-198">To delete a gateway node, click **Delete Node** on the toolbar, select the node you want to delete, and then click **Delete** from the toolbar.</span></span> <span data-ttu-id="194cb-199">Esta acción elimina el nodo seleccionado del grupo.</span><span class="sxs-lookup"><span data-stu-id="194cb-199">This action deletes the selected node from the group.</span></span> <span data-ttu-id="194cb-200">Tenga en cuenta que esta acción no desinstala el software de la puerta de enlace de administración de datos del nodo (máquina Windows local).</span><span class="sxs-lookup"><span data-stu-id="194cb-200">Note that this action does not uninstall the data management gateway software from the node (on-premises Windows machine).</span></span> <span data-ttu-id="194cb-201">Use **Agregar o quitar programas** de forma local en el Panel de Control para desinstalar la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-201">Use **Add or remove programs** in Control Panel on the on-premises to uninstall the gateway.</span></span> <span data-ttu-id="194cb-202">Cuando se desinstala la puerta de enlace del nodo, se elimina automáticamente en el portal.</span><span class="sxs-lookup"><span data-stu-id="194cb-202">When you uninstall gateway from the node, it's automatically deleted in the portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="194cb-203">Actualización de una puerta de enlace existente</span><span class="sxs-lookup"><span data-stu-id="194cb-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="194cb-204">Puede actualizar una puerta de enlace existente para usar la característica de alta disponibilidad y escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="194cb-204">You can upgrade an existing gateway to use the high availability and scalability feature.</span></span> <span data-ttu-id="194cb-205">Esta característica solo funciona con los nodos que tengan una versión de Data Management Gateway igual o posterior a la 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="194cb-205">This feature works only with nodes that have the data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="194cb-206">Puede ver la versión de Data Management Gateway instalada en un equipo en la pestaña **Ayuda** de Configuration Manager de Data Management Gateway.</span><span class="sxs-lookup"><span data-stu-id="194cb-206">You can see the version of data management gateway installed on a machine in the **Help** tab of the Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="194cb-207">Para actualizar la puerta de enlace en el equipo local a la versión más reciente debe descargar y ejecutar un paquete de instalación MSI de [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="194cb-207">Update the gateway on the on-premises machine to the latest version by following by downloading and running an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="194cb-208">Consulte la sección [Instalación](data-factory-data-management-gateway.md#installation) para más información.</span><span class="sxs-lookup"><span data-stu-id="194cb-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="194cb-209">Acceda a Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="194cb-209">Navigate to the Azure portal.</span></span> <span data-ttu-id="194cb-210">Abra la página **Factoría de datos** de la factoría de datos.</span><span class="sxs-lookup"><span data-stu-id="194cb-210">Launch the **Data Factory page** for your data factory.</span></span> <span data-ttu-id="194cb-211">Haga clic en el icono Servicios vinculados para abrir la página **Servicios vinculados**.</span><span class="sxs-lookup"><span data-stu-id="194cb-211">Click Linked services tile to launch the **linked services page**.</span></span> <span data-ttu-id="194cb-212">Seleccione la puerta de enlace para abrir la página **Puerta de enlace**.</span><span class="sxs-lookup"><span data-stu-id="194cb-212">Select the gateway to launch the **gateway page**.</span></span> <span data-ttu-id="194cb-213">Haga clic para habilitar la **Característica de versión preliminar** tal como se muestra en la siguiente imagen:</span><span class="sxs-lookup"><span data-stu-id="194cb-213">Click and enable **Preview Feature** as shown in the following image:</span></span> 

    ![Data Management Gateway: habilitar característica versión preliminar](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="194cb-215">Una vez habilitada la característica de versión preliminar en el portal, cierre todas las páginas.</span><span class="sxs-lookup"><span data-stu-id="194cb-215">Once the preview feature is enabled in the portal, close all pages.</span></span> <span data-ttu-id="194cb-216">Vuelva a abrir la página **Puerta de enlace** para ver la nueva interfaz de usuario (UI) de la versión preliminar.</span><span class="sxs-lookup"><span data-stu-id="194cb-216">Reopen the **gateway page** to see the new preview user interface (UI).</span></span>
 
    ![Data Management Gateway: habilitación correcta de la característica versión preliminar](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Data Management Gateway: interfaz de usuario de la versión preliminar](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="194cb-219">Durante la actualización, el nombre del primer nodo es el nombre de la máquina.</span><span class="sxs-lookup"><span data-stu-id="194cb-219">During the upgrade, name of the first node is the name of the machine.</span></span> 
3. <span data-ttu-id="194cb-220">Ahora, agregue un nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-220">Now, add a node.</span></span> <span data-ttu-id="194cb-221">En la página **Puerta de enlace**, haga clic en **Agregar nodo**.</span><span class="sxs-lookup"><span data-stu-id="194cb-221">In the **Gateway** page, click **Add Node**.</span></span>  

    ![Data Management Gateway: menú agregar nodo](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="194cb-223">Siga las instrucciones de la sección anterior para configurar el nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-223">Follow instructions from the previous section to set up the node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="194cb-224">Procedimientos recomendados de instalación</span><span class="sxs-lookup"><span data-stu-id="194cb-224">Installation best practices</span></span>

- <span data-ttu-id="194cb-225">Configurar el plan de energía en el equipo host para la puerta de enlace, de forma que el equipo no hiberne.</span><span class="sxs-lookup"><span data-stu-id="194cb-225">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span></span> <span data-ttu-id="194cb-226">Si la máquina host está en hibernación, la puerta de enlace no responde a las solicitudes de datos.</span><span class="sxs-lookup"><span data-stu-id="194cb-226">If the host machine hibernates, the gateway does not respond to data requests.</span></span>
- <span data-ttu-id="194cb-227">Se debe hacer una copia de seguridad del certificado asociado a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-227">Back up the certificate associated with the gateway.</span></span>
- <span data-ttu-id="194cb-228">Asegúrese de que todos los nodos son de una configuración similar (recomendada) para un rendimiento ideal.</span><span class="sxs-lookup"><span data-stu-id="194cb-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="194cb-229">Agregue al menos dos nodos para asegurar la alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="194cb-229">Add at least two nodes to ensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="194cb-230">Requisitos del certificado TLS/SSL</span><span class="sxs-lookup"><span data-stu-id="194cb-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="194cb-231">Estos son los requisitos para el certificado TLS/SSL que se usa para proteger las comunicaciones entre los nodos de la puerta de enlace:</span><span class="sxs-lookup"><span data-stu-id="194cb-231">Here are the requirements for the TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="194cb-232">El certificado debe ser un certificado de confianza pública X509 v3.</span><span class="sxs-lookup"><span data-stu-id="194cb-232">The certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="194cb-233">Todos los nodos de la puerta de enlace deben confiar en este certificado.</span><span class="sxs-lookup"><span data-stu-id="194cb-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="194cb-234">Se recomienda que utilice certificados emitidos por una entidad de certificación pública (CA).</span><span class="sxs-lookup"><span data-stu-id="194cb-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="194cb-235">Se admite cualquier tamaño de clave compatible con Windows Server 2012 R2 para los certificados SSL.</span><span class="sxs-lookup"><span data-stu-id="194cb-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="194cb-236">No se admiten certificados que utilizan claves CNG.</span><span class="sxs-lookup"><span data-stu-id="194cb-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="194cb-237">Se admiten certificados comodín.</span><span class="sxs-lookup"><span data-stu-id="194cb-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="194cb-238">Supervisión de una puerta de enlace de varios nodos</span><span class="sxs-lookup"><span data-stu-id="194cb-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="194cb-239">Supervisión de una puerta de enlace de varios nodos</span><span class="sxs-lookup"><span data-stu-id="194cb-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="194cb-240">En Azure Portal, puede ver una instantánea casi en tiempo real de la utilización de los recursos (CPU, memoria, red (entrada/salida), etc.) en cada nodo junto con los estados de los nodos de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-240">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Data Management Gateway: supervisión de varios nodos](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="194cb-242">Puede habilitar la **Configuración avanzada** en la página **Puerta de enlace** para ver métricas avanzadas como **Red**(entrada/salida), **Rol y estado de credenciales**, que es útil para depurar problemas de puerta de enlace y **Trabajos simultáneos** (en ejecución / límite) que puede ser modificado según corresponda durante la optimización del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="194cb-242">You can enable **Advanced Settings** in the **Gateway** page to see advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="194cb-243">En la tabla siguiente se proporcionan las descripciones de las columnas de la lista **Nodos de la puerta de enlace**:</span><span class="sxs-lookup"><span data-stu-id="194cb-243">The following table provides descriptions of columns in the **Gateway Nodes** list:</span></span>  

<span data-ttu-id="194cb-244">Propiedad de supervisión</span><span class="sxs-lookup"><span data-stu-id="194cb-244">Monitoring Property</span></span> | <span data-ttu-id="194cb-245">Descripción</span><span class="sxs-lookup"><span data-stu-id="194cb-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="194cb-246">Nombre</span><span class="sxs-lookup"><span data-stu-id="194cb-246">Name</span></span> | <span data-ttu-id="194cb-247">Nombre de la puerta de enlace lógica y de los nodos asociados a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-247">Name of the logical gateway and nodes associated with the gateway.</span></span>  
<span data-ttu-id="194cb-248">Estado</span><span class="sxs-lookup"><span data-stu-id="194cb-248">Status</span></span> | <span data-ttu-id="194cb-249">Estado de la puerta de enlace lógica y de los nodos de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-249">Status of the logical gateway and the gateway nodes.</span></span> <span data-ttu-id="194cb-250">Ejemplo: En línea, Sin conexión, Limitado, etc. Para obtener información acerca de estos estados, consulte la sección [Estado de la puerta de enlace](#gateway-status).</span><span class="sxs-lookup"><span data-stu-id="194cb-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="194cb-251">Versión</span><span class="sxs-lookup"><span data-stu-id="194cb-251">Version</span></span> | <span data-ttu-id="194cb-252">Muestra la versión de la puerta de enlace lógica y de cada nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-252">Shows the version of the logical gateway and each gateway node.</span></span> <span data-ttu-id="194cb-253">La versión de la puerta de enlace lógica se determina basándose en la versión de la mayoría de los nodos del grupo.</span><span class="sxs-lookup"><span data-stu-id="194cb-253">The version of the logical gateway is determined based on version of majority of nodes in the group.</span></span> <span data-ttu-id="194cb-254">Si hay nodos con versiones diferentes en la configuración de la puerta de enlace lógica, solo los nodos con el mismo número de versión que la puerta de enlace lógica funcionan correctamente.</span><span class="sxs-lookup"><span data-stu-id="194cb-254">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span></span> <span data-ttu-id="194cb-255">Los otros están en el modo limitado y deben actualizarse manualmente (solo en caso de que se produzca un error en la actualización automática).</span><span class="sxs-lookup"><span data-stu-id="194cb-255">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="194cb-256">Memoria disponible</span><span class="sxs-lookup"><span data-stu-id="194cb-256">Available memory</span></span> | <span data-ttu-id="194cb-257">Memoria disponible en un nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-257">Available memory on a gateway node.</span></span> <span data-ttu-id="194cb-258">Este valor es una instantánea casi en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="194cb-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="194cb-259">Uso de CPU</span><span class="sxs-lookup"><span data-stu-id="194cb-259">CPU utilization</span></span> | <span data-ttu-id="194cb-260">Uso de CPU de un nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="194cb-261">Este valor es una instantánea casi en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="194cb-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="194cb-262">Redes (Entrada/Salida)</span><span class="sxs-lookup"><span data-stu-id="194cb-262">Networking (In/Out)</span></span> | <span data-ttu-id="194cb-263">Uso de red de un nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="194cb-264">Este valor es una instantánea casi en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="194cb-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="194cb-265">Trabajos simultáneos (En ejecución / Límite)</span><span class="sxs-lookup"><span data-stu-id="194cb-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="194cb-266">Número de trabajos o tareas que se ejecutan en cada nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="194cb-267">Este valor es una instantánea casi en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="194cb-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="194cb-268">Límite significa el máximo número de trabajos simultáneos para cada nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-268">Limit signifies the maximum concurrent jobs for each node.</span></span> <span data-ttu-id="194cb-269">Este valor se define basándose en el tamaño de la máquina.</span><span class="sxs-lookup"><span data-stu-id="194cb-269">This value is defined based on the machine size.</span></span> <span data-ttu-id="194cb-270">Puede aumentar el límite para escalar verticalmente la ejecución de trabajos simultáneos en escenarios avanzados, donde la CPU, la memoria o la red están infrautilizadas pero se agota el tiempo de espera de las actividades. Esta funcionalidad también está disponible con una puerta de enlace de un único nodo (incluso cuando no está habilitada la característica de escalabilidad y disponibilidad).</span><span class="sxs-lookup"><span data-stu-id="194cb-270">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> <span data-ttu-id="194cb-271">Para más información, consulte la sección [Consideraciones para el escalado](#scale-considerations).</span><span class="sxs-lookup"><span data-stu-id="194cb-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="194cb-272">Rol</span><span class="sxs-lookup"><span data-stu-id="194cb-272">Role</span></span> | <span data-ttu-id="194cb-273">Hay dos tipos de roles: distribuidor y de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="194cb-274">Todos los nodos son trabajos, lo que significa que pueden usarse para ejecutar los trabajos.</span><span class="sxs-lookup"><span data-stu-id="194cb-274">All nodes are workers, which means they can all be used to execute jobs.</span></span> <span data-ttu-id="194cb-275">Hay solo un nodo distribuidor, que se usa para extraer los trabajos y tareas de los servicios en la nube y enviarlos a los diferentes nodos de trabajo (incluido él mismo).</span><span class="sxs-lookup"><span data-stu-id="194cb-275">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span></span> 

![Data Management Gateway: supervisión avanzada de varios nodos](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="194cb-277">Estado de la puerta de enlace</span><span class="sxs-lookup"><span data-stu-id="194cb-277">Gateway status</span></span>

<span data-ttu-id="194cb-278">La tabla siguiente proporciona los estados posibles de un **nodo de la puerta de enlace**:</span><span class="sxs-lookup"><span data-stu-id="194cb-278">The following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="194cb-279">Estado</span><span class="sxs-lookup"><span data-stu-id="194cb-279">Status</span></span>  | <span data-ttu-id="194cb-280">Comentarios/Escenarios</span><span class="sxs-lookup"><span data-stu-id="194cb-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="194cb-281">En línea</span><span class="sxs-lookup"><span data-stu-id="194cb-281">Online</span></span> | <span data-ttu-id="194cb-282">Nodo conectado al servicio Data Factory.</span><span class="sxs-lookup"><span data-stu-id="194cb-282">Node connected to Data Factory service.</span></span>
<span data-ttu-id="194cb-283">Sin conexión</span><span class="sxs-lookup"><span data-stu-id="194cb-283">Offline</span></span> | <span data-ttu-id="194cb-284">El nodo está sin conexión.</span><span class="sxs-lookup"><span data-stu-id="194cb-284">Node is offline.</span></span>
<span data-ttu-id="194cb-285">Actualizando</span><span class="sxs-lookup"><span data-stu-id="194cb-285">Upgrading</span></span> | <span data-ttu-id="194cb-286">El nodo se está actualizando automáticamente.</span><span class="sxs-lookup"><span data-stu-id="194cb-286">The node is being auto-updated.</span></span>
<span data-ttu-id="194cb-287">Limitado</span><span class="sxs-lookup"><span data-stu-id="194cb-287">Limited</span></span> | <span data-ttu-id="194cb-288">Debido a un problema de conectividad.</span><span class="sxs-lookup"><span data-stu-id="194cb-288">Due to Connectivity issue.</span></span> <span data-ttu-id="194cb-289">Puede ser debido a un problema en el puerto HTTP 8050, a un problema de conectividad del bus de servicio o un problema de sincronización de credenciales.</span><span class="sxs-lookup"><span data-stu-id="194cb-289">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="194cb-290">Inactivo</span><span class="sxs-lookup"><span data-stu-id="194cb-290">Inactive</span></span> | <span data-ttu-id="194cb-291">El nodo tiene una configuración diferente de la configuración de la mayoría de los otros nodos.</span><span class="sxs-lookup"><span data-stu-id="194cb-291">Node is in a configuration different from the configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="194cb-292">Un nodo puede estar inactivo cuando no se puede conectar a otros nodos.</span><span class="sxs-lookup"><span data-stu-id="194cb-292">A node can be inactive when it cannot connect to other nodes.</span></span> 


<span data-ttu-id="194cb-293">La tabla siguiente proporciona los estados posibles de una **puerta de enlace lógica**.</span><span class="sxs-lookup"><span data-stu-id="194cb-293">The following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="194cb-294">El estado de la puerta de enlace depende de los estados de los nodos de puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-294">The gateway status depends on statuses of the gateway nodes.</span></span> 

<span data-ttu-id="194cb-295">Estado</span><span class="sxs-lookup"><span data-stu-id="194cb-295">Status</span></span> | <span data-ttu-id="194cb-296">Comentarios</span><span class="sxs-lookup"><span data-stu-id="194cb-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="194cb-297">Debe registrarse</span><span class="sxs-lookup"><span data-stu-id="194cb-297">Needs Registration</span></span> | <span data-ttu-id="194cb-298">Aún no se ha registrado ningún nodo en esta puerta de enlace lógica</span><span class="sxs-lookup"><span data-stu-id="194cb-298">No node is yet registered to this logical gateway</span></span>
<span data-ttu-id="194cb-299">En línea</span><span class="sxs-lookup"><span data-stu-id="194cb-299">Online</span></span> | <span data-ttu-id="194cb-300">Los nodos de la puerta de enlace están en línea</span><span class="sxs-lookup"><span data-stu-id="194cb-300">Gateway Nodes are online</span></span>
<span data-ttu-id="194cb-301">Sin conexión</span><span class="sxs-lookup"><span data-stu-id="194cb-301">Offline</span></span> | <span data-ttu-id="194cb-302">Ningún nodo está en línea.</span><span class="sxs-lookup"><span data-stu-id="194cb-302">No node in online status.</span></span>
<span data-ttu-id="194cb-303">Limitado</span><span class="sxs-lookup"><span data-stu-id="194cb-303">Limited</span></span> | <span data-ttu-id="194cb-304">No todos los nodos de la puerta de enlace están en buen estado.</span><span class="sxs-lookup"><span data-stu-id="194cb-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="194cb-305">Este estado es una advertencia de que alguno de los nodos podría estar inactivo.</span><span class="sxs-lookup"><span data-stu-id="194cb-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="194cb-306">Podría ser debido a un problema de sincronización de credenciales en el nodo distribuidor o de trabajo.</span><span class="sxs-lookup"><span data-stu-id="194cb-306">Could be due to credential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="194cb-307">Supervisión de canalización y actividades</span><span class="sxs-lookup"><span data-stu-id="194cb-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="194cb-308">Azure Portal proporciona una experiencia de supervisión de canalización con detalle granular de nivel de nodo específico.</span><span class="sxs-lookup"><span data-stu-id="194cb-308">The Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="194cb-309">Por ejemplo, muestra las actividades que se ejecutaron en cada nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="194cb-310">Esta información puede ser útil para comprender los problemas de rendimiento en un nodo determinado, por ejemplo, debido a una limitación de red.</span><span class="sxs-lookup"><span data-stu-id="194cb-310">This information can be helpful in understanding performance issues on a particular node, say due to network throttling.</span></span> 

![Data Management Gateway: supervisión de varios nodos para canalizaciones](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Data Management Gateway: detalles de canalización](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="194cb-313">Consideraciones de escala</span><span class="sxs-lookup"><span data-stu-id="194cb-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="194cb-314">Escalado horizontal</span><span class="sxs-lookup"><span data-stu-id="194cb-314">Scale out</span></span>
<span data-ttu-id="194cb-315">Cuando la **memoria disponible es baja** y el **uso de CPU es alto**, agregar un nuevo nodo ayuda a escalar horizontalmente la carga en los equipos.</span><span class="sxs-lookup"><span data-stu-id="194cb-315">When the **available memory is low** and the **CPU usage is high**, adding a new node helps scale out the load across machines.</span></span> <span data-ttu-id="194cb-316">Si se producen errores en las actividades debido a tiempos de espera excedidos o a un nodo de la puerta de enlace sin conexión, será útil agregar un nodo a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-316">If activities are failing due to time-out or gateway node being offline, it helps if you add a node to the gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="194cb-317">Escalado vertical</span><span class="sxs-lookup"><span data-stu-id="194cb-317">Scale up</span></span>
<span data-ttu-id="194cb-318">Cuando la memoria disponible y la CPU no se utilizan correctamente, pero la capacidad de inactividad es 0, debe escalar verticalmente aumentando el número de trabajos simultáneos que se pueden ejecutar en un nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-318">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="194cb-319">También puede escalar verticalmente cuando se agota el tiempo de espera de las actividades porque la puerta de enlace está sobrecargada.</span><span class="sxs-lookup"><span data-stu-id="194cb-319">You may also want to scale up when activities are timing out because the gateway is overloaded.</span></span> <span data-ttu-id="194cb-320">Como se muestra en la siguiente imagen, puede aumentar la capacidad máxima para un nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-320">As shown in the following image, you can increase the maximum capacity for a node.</span></span> <span data-ttu-id="194cb-321">Se recomienda comenzar duplicándolo.</span><span class="sxs-lookup"><span data-stu-id="194cb-321">We suggest doubling it to start with.</span></span>  

![Data Management Gateway: consideraciones de escala](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="194cb-323">Problemas conocidos y cambios relevantes</span><span class="sxs-lookup"><span data-stu-id="194cb-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="194cb-324">Actualmente, puede tener hasta cuatro nodos físicos de puerta de enlace para una sola puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-324">Currently, you can have up to four physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="194cb-325">Si necesita más de cuatro nodos por motivos de rendimiento, envíe un correo electrónico a [ DMGHelp@microsoft.com ](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="194cb-325">If you need more than four nodes for performance reasons, send an email to [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="194cb-326">No se puede volver a registrar un nodo de puerta de enlace con la clave de autenticación de otra puerta de enlace lógica para cambiar la puerta de enlace lógica actual.</span><span class="sxs-lookup"><span data-stu-id="194cb-326">You cannot re-register a gateway node with the authentication key from another logical gateway to switch from the current logical gateway.</span></span> <span data-ttu-id="194cb-327">Para volver a registrarlo, desinstale la puerta de enlace del nodo, vuelva a instalar la puerta de enlace y regístrela con la clave de autenticación de la otra puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-327">To re-register, uninstall the gateway from the node, reinstall the gateway, and register it with the authentication key for the other logical gateway.</span></span> 
- <span data-ttu-id="194cb-328">Si es necesario un proxy HTTP para todos los nodos de la puerta de enlace, establezca el proxy en diahost.exe.config y diawp.exe.config y use el administrador del servidor para asegurarse de que todos los nodos tienen el mismo diahost.exe.config y diawip.exe.config. Consulte la sección [configurar el proxy](data-factory-data-management-gateway.md#configure-proxy-server-settings) para más información.</span><span class="sxs-lookup"><span data-stu-id="194cb-328">If HTTP proxy is required for all your gateway nodes, set the proxy in diahost.exe.config and diawp.exe.config, and use the server manager to make sure all nodes have the same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="194cb-329">Para cambiar el modo de cifrado para la comunicación de nodo a nodo en Configuration Manager de la puerta de enlace, elimine todos los nodos desde el portal excepto uno.</span><span class="sxs-lookup"><span data-stu-id="194cb-329">To change encryption mode for node-to-node communication in Gateway Configuration Manager, delete all the nodes in the portal except one.</span></span> <span data-ttu-id="194cb-330">A continuación, agregue nodos después de cambiar el modo de cifrado.</span><span class="sxs-lookup"><span data-stu-id="194cb-330">Then, add nodes back after changing the encryption mode.</span></span>
- <span data-ttu-id="194cb-331">Utilice un certificado SSL oficial si elige cifrar el canal de comunicación de nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-331">Use an official SSL certificate if you choose to encrypt the node-to-node communication channel.</span></span> <span data-ttu-id="194cb-332">Un certificado autofirmado puede producir problemas de conectividad ya que el mismo certificado puede no ser de confianza en la lista de entidades de certificación de otros equipos.</span><span class="sxs-lookup"><span data-stu-id="194cb-332">Self-signed certificate may cause connectivity issues as the same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="194cb-333">No se puede registrar un nodo de puerta de enlace en una puerta de enlace lógica si la versión del nodo es menor que la versión de la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-333">You cannot register a gateway node to a logical gateway when the node version is lower than the logical gateway version.</span></span> <span data-ttu-id="194cb-334">Elimine todos los nodos de la puerta de enlace lógica desde Azure Portal para poder registrar un nodo con una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="194cb-334">Delete all nodes of the logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="194cb-335">Si elimina todos los nodos de una puerta de enlace lógica, instale y registre manualmente los nuevos nodos en esa puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-335">If you delete all nodes of a logical gateway, manually install and register new nodes to that logical gateway.</span></span> <span data-ttu-id="194cb-336">La instalación rápida no se admite en este caso.</span><span class="sxs-lookup"><span data-stu-id="194cb-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="194cb-337">No se puede usar la instalación rápida para instalar nodos en una puerta de enlace lógica existente, que todavía está usando credenciales de la nube.</span><span class="sxs-lookup"><span data-stu-id="194cb-337">You cannot use express setup to install nodes to an existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="194cb-338">Puede comprobar dónde se almacenan las credenciales en la pestaña Configuración de Configuration Manager de Data Management Gateway.</span><span class="sxs-lookup"><span data-stu-id="194cb-338">You can check where the credentials are stored from the Gateway Configuration Manager on the Settings tab.</span></span>
- <span data-ttu-id="194cb-339">No se puede usar la instalación rápida para instalar nodos en una puerta de enlace lógica existente que tenga habilitado el cifrado nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-339">You cannot use express setup to install nodes to an existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="194cb-340">Dado que establecer el modo de cifrado implica agregar manualmente los certificados, la instalación rápida no es una opción.</span><span class="sxs-lookup"><span data-stu-id="194cb-340">As setting the encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="194cb-341">Para la copia de archivos desde el entorno local, no debe usar \\localhost o C:\archivos puesto que localhost o la unidad local podrían no ser accesibles en todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="194cb-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="194cb-342">En su lugar, utilice \\Nombre_del_servidor\archivos para especificar la ubicación de los archivos.</span><span class="sxs-lookup"><span data-stu-id="194cb-342">Instead, use \\ServerName\files to specify files’ location.</span></span>


## <a name="rolling-back-from-the-preview"></a><span data-ttu-id="194cb-343">Revertir desde la versión preliminar</span><span class="sxs-lookup"><span data-stu-id="194cb-343">Rolling back from the preview</span></span> 
<span data-ttu-id="194cb-344">Para revertir desde la versión preliminar, elimine todos los nodos excepto uno.</span><span class="sxs-lookup"><span data-stu-id="194cb-344">To roll back from the preview, delete all nodes but one node.</span></span> <span data-ttu-id="194cb-345">No importa qué nodos elimine, pero asegúrese de tener al menos un nodo en la puerta de enlace lógica.</span><span class="sxs-lookup"><span data-stu-id="194cb-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in the logical gateway.</span></span> <span data-ttu-id="194cb-346">Puede eliminar un nodo mediante la desinstalación de la puerta de enlace en el equipo o a través de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="194cb-346">You can delete a node either by uninstalling gateway on the machine or by using the Azure portal.</span></span> <span data-ttu-id="194cb-347">En Azure Portal, en la página **Factoría de datos**, haga clic en Servicios vinculados para abrir la página **Servicios vinculados**.</span><span class="sxs-lookup"><span data-stu-id="194cb-347">In the Azure portal, in the **Data Factory** page, click Linked services to launch the **Linked services** page.</span></span> <span data-ttu-id="194cb-348">Seleccione la puerta de enlace para abrir la página **Puerta de enlace**.</span><span class="sxs-lookup"><span data-stu-id="194cb-348">Select the gateway to launch the **Gateway** page.</span></span> <span data-ttu-id="194cb-349">En la página Puerta de enlace puede ver los nodos asociados a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-349">In the Gateway page, you can see the nodes associated with the gateway.</span></span> <span data-ttu-id="194cb-350">La página permite eliminar un nodo de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-350">The page lets you delete a node from the gateway.</span></span>
 
<span data-ttu-id="194cb-351">Después de eliminarlo, haga clic en **Característica de versión preliminar** en la misma página de Azure Portal y deshabilite la característica de versión preliminar.</span><span class="sxs-lookup"><span data-stu-id="194cb-351">After deleting, click **preview features** in the same Azure portal page, and disable the preview feature.</span></span> <span data-ttu-id="194cb-352">Ha restablecido la puerta de enlace como puerta de enlace de un nodo GA (disponibilidad general).</span><span class="sxs-lookup"><span data-stu-id="194cb-352">You have reset your gateway to one node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="194cb-353">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="194cb-353">Next steps</span></span>
<span data-ttu-id="194cb-354">Consulte los artículos siguientes:</span><span class="sxs-lookup"><span data-stu-id="194cb-354">Review the following articles:</span></span>
- <span data-ttu-id="194cb-355">[Data Management Gateway](data-factory-data-management-gateway.md): ofrece una información general detallada de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="194cb-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="194cb-356">[Movimiento de datos entre equipos locales y almacenes de datos en la nube](data-factory-move-data-between-onprem-and-cloud.md): contiene un tutorial con instrucciones paso a paso para usar una puerta de enlace con un único nodo.</span><span class="sxs-lookup"><span data-stu-id="194cb-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 

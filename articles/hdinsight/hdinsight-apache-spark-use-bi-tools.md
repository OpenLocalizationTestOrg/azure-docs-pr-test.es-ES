---
title: "aaaSpark BI mediante herramientas de visualización de datos en HDInsight de Azure | Documentos de Microsoft"
description: "Uso de herramientas de visualización de datos para análisis con Apache Spark BI en clústeres de HDInsight"
keywords: "Apache Spark BI, Spark BI, visualización de datos de Spark, inteligencia empresarial de Spark"
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 1448b536-9bc8-46bc-bbc6-d7001623642a
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: ba4bfff737ce80ffca5c24f1c2c82a1447f467fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="apache-spark-bi-using-data-visualization-tools-with-azure-hdinsight"></a><span data-ttu-id="01529-104">Apache Spark BI mediante herramientas de visualización de datos con Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="01529-104">Apache Spark BI using data visualization tools with Azure HDInsight</span></span>

<span data-ttu-id="01529-105">Obtenga información acerca de la visualización de datos de toouse herramientas como tooanalyze Power BI y Tableau un conjunto de datos de ejemplo sin formato mediante Apache Spark BI en clústeres de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="01529-105">Learn how toouse data visualization tools such as Power BI and Tableau tooanalyze a raw sample data set using Apache Spark BI on HDInsight clusters.</span></span>

> [!NOTE]
> <span data-ttu-id="01529-106">La conectividad con las herramientas de BI que se describen en este artículo no se admite en la versión 2.1 de Spark de la versión 3.6 preliminar de HDInsight de Azure.</span><span class="sxs-lookup"><span data-stu-id="01529-106">Connectivity with BI tools described in this article is not supported on Spark 2.1 on Azure HDInsight 3.6 Preview.</span></span> <span data-ttu-id="01529-107">Solo las versiones de Spark 1.6 y 2.0 (3.4 y 3.5 de HDInsight respectivamente) son compatibles.</span><span class="sxs-lookup"><span data-stu-id="01529-107">Only Spark versions 1.6 and 2.0 (HDInsight 3.4, 3.5 respectively) are supported.</span></span>
>

<span data-ttu-id="01529-108">Este tutorial también está disponible como un cuaderno de Jupyter Notebook en un clúster Spark de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="01529-108">This tutorial is also available as a Jupyter notebook on an HDInsight Spark cluster.</span></span> <span data-ttu-id="01529-109">experiencia de Bloc de notas de Hello le permite ejecutar fragmentos de código de Python Hola desde Bloc de notas de hello propio.</span><span class="sxs-lookup"><span data-stu-id="01529-109">hello notebook experience lets you run hello Python snippets from hello notebook itself.</span></span> <span data-ttu-id="01529-110">tutorial de hello tooperform desde dentro de un bloc de notas, cree un clúster de Spark, inicie Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), y, a continuación, ejecutar el Bloc de notas de hello **herramientas de BI de uso con Apache Spark en HDInsight.ipynb** en hello **Python**  carpeta.</span><span class="sxs-lookup"><span data-stu-id="01529-110">tooperform hello tutorial from within a notebook, create a Spark cluster, launch a Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), and then run hello notebook **Use BI tools with Apache Spark on HDInsight.ipynb** under hello **Python** folder.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="01529-111">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="01529-111">Prerequisites</span></span>

* <span data-ttu-id="01529-112">Un clúster de Apache Spark en HDInsight.</span><span class="sxs-lookup"><span data-stu-id="01529-112">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="01529-113">Para obtener instrucciones, vea [Creación de clústeres Apache Spark en HDInsight de Azure](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="01529-113">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>


## <span data-ttu-id="01529-114"><a name="hivetable"></a>Preparación de los datos para la visualización de datos de Spark</span><span class="sxs-lookup"><span data-stu-id="01529-114"><a name="hivetable"></a>Prepare data for Spark data visualization</span></span>

<span data-ttu-id="01529-115">En esta sección, se utiliza hello [Jupyter](https://jupyter.org) Bloc de notas de un HDInsight Spark clúster toorun los trabajos que procesan los datos de ejemplo sin formato y guardarla como una tabla.</span><span class="sxs-lookup"><span data-stu-id="01529-115">In this section, we use hello [Jupyter](https://jupyter.org) notebook from an HDInsight Spark cluster toorun jobs that process your raw sample data and save it as a table.</span></span> <span data-ttu-id="01529-116">datos de ejemplo de Hola están un archivo .csv (hvac.csv) disponible en todos los clústeres de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="01529-116">hello sample data is a .csv file (hvac.csv) available on all clusters by default.</span></span> <span data-ttu-id="01529-117">Una vez que los datos se guardan como una tabla, en la sección siguiente de hello es usar la tabla de toohello de tooconnect de herramientas de BI y realicemos visualizaciones de datos.</span><span class="sxs-lookup"><span data-stu-id="01529-117">Once your data is saved as a table, in hello next section we use BI tools tooconnect toohello table and perform data visualizations.</span></span>

> [!NOTE]
> <span data-ttu-id="01529-118">Si va a realizar Hola los pasos de este artículo después de completar las instrucciones de hello en [ejecutar las consultas interactivas en un clúster de HDInsight Spark](hdinsight-apache-spark-load-data-run-query.md), puede omitir tooStep 8 siguiente.</span><span class="sxs-lookup"><span data-stu-id="01529-118">If you are performing hello steps in this article after completing hello instructions in [Run interactive queries on an HDInsight Spark cluster](hdinsight-apache-spark-load-data-run-query.md), you can skip tooStep 8 below.</span></span>
>

1. <span data-ttu-id="01529-119">De hello [portal de Azure](https://portal.azure.com/), desde el panel de inicio de hello, haga clic en icono de hello para el clúster de Spark (si anclarlo toohello panel de inicio).</span><span class="sxs-lookup"><span data-stu-id="01529-119">From hello [Azure portal](https://portal.azure.com/), from hello startboard, click hello tile for your Spark cluster (if you pinned it toohello startboard).</span></span> <span data-ttu-id="01529-120">También puede navegar clúster tooyour en **examinar todos los** > **clústeres de HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="01529-120">You can also navigate tooyour cluster under **Browse All** > **HDInsight Clusters**.</span></span>   

2. <span data-ttu-id="01529-121">En la hoja de clúster de Spark hello, haga clic en **panel clúster**y, a continuación, haga clic en **Jupyter Notebook**.</span><span class="sxs-lookup"><span data-stu-id="01529-121">From hello Spark cluster blade, click **Cluster Dashboard**, and then click **Jupyter Notebook**.</span></span> <span data-ttu-id="01529-122">Si se le pide, escriba las credenciales de administrador de Hola para clúster Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-122">If prompted, enter hello admin credentials for hello cluster.</span></span>

   > [!NOTE]
   > <span data-ttu-id="01529-123">También puede tener acceso a Jupyter Notebook hello para el clúster por abrir Hola siguiente dirección URL en el explorador.</span><span class="sxs-lookup"><span data-stu-id="01529-123">You may also reach hello Jupyter Notebook for your cluster by opening hello following URL in your browser.</span></span> <span data-ttu-id="01529-124">Reemplace **CLUSTERNAME** con nombre hello del clúster:</span><span class="sxs-lookup"><span data-stu-id="01529-124">Replace **CLUSTERNAME** with hello name of your cluster:</span></span>
   >
   > `https://CLUSTERNAME.azurehdinsight.net/jupyter`
   >
   >

3. <span data-ttu-id="01529-125">Cree un cuaderno.</span><span class="sxs-lookup"><span data-stu-id="01529-125">Create a notebook.</span></span> <span data-ttu-id="01529-126">Haga clic en **Nuevo** y, luego, en **PySpark**.</span><span class="sxs-lookup"><span data-stu-id="01529-126">Click **New**, and then click **PySpark**.</span></span>

    <span data-ttu-id="01529-127">![Creación de un cuaderno de Jupyter Notebook para Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Creación de un cuaderno de Jupyter Notebook para Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-127">![Create a Jupyter notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Create a Jupyter notebook for Apache Spark BI")</span></span>

4. <span data-ttu-id="01529-128">Un nuevo bloc de notas se crea y se abre con el nombre de hello Untitled.pynb.</span><span class="sxs-lookup"><span data-stu-id="01529-128">A new notebook is created and opened with hello name Untitled.pynb.</span></span> <span data-ttu-id="01529-129">Haga clic en nombre de Bloc de notas de hello en la parte superior de Hola y escriba un nombre descriptivo.</span><span class="sxs-lookup"><span data-stu-id="01529-129">Click hello notebook name at hello top, and enter a friendly name.</span></span>

    <span data-ttu-id="01529-130">![Proporcione un nombre para el Bloc de notas de Hola para Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "proporcione un nombre para el Bloc de notas de Hola para Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-130">![Provide a name for hello notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "Provide a name for hello notebook for Apache Spark BI")</span></span>

5. <span data-ttu-id="01529-131">Como ha creado un bloc de notas con kernel PySpark de hello, no es necesario toocreate ningún contexto explícitamente.</span><span class="sxs-lookup"><span data-stu-id="01529-131">Because you created a notebook using hello PySpark kernel, you do not need toocreate any contexts explicitly.</span></span> <span data-ttu-id="01529-132">contextos de Spark y Hive Hola se crean automáticamente cuando se ejecuta la primera celda de código de hello.</span><span class="sxs-lookup"><span data-stu-id="01529-132">hello Spark and Hive contexts are automatically created for you when you run hello first code cell.</span></span> <span data-ttu-id="01529-133">Puede iniciar mediante la importación de tipos de hello necesarios para este escenario.</span><span class="sxs-lookup"><span data-stu-id="01529-133">You can start by importing hello types required for this scenario.</span></span> <span data-ttu-id="01529-134">toodo por lo tanto, coloque cursor de hello en la celda de hello y presione **MAYÚS + ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="01529-134">toodo so, place hello cursor in hello cell and press **SHIFT + ENTER**.</span></span>

        from pyspark.sql import *

6. <span data-ttu-id="01529-135">Cargue los datos de ejemplo en una tabla temporal.</span><span class="sxs-lookup"><span data-stu-id="01529-135">Load sample data into a temporary table.</span></span> <span data-ttu-id="01529-136">Cuando se crea un clúster de Spark en HDInsight, archivo de datos de ejemplo de Hola, **hvac.csv**, es copiada toohello asociado de cuenta de almacenamiento en **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span><span class="sxs-lookup"><span data-stu-id="01529-136">When you create a Spark cluster in HDInsight, hello sample data file, **hvac.csv**, is copied toohello associated storage account under **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span></span>

    <span data-ttu-id="01529-137">En una celda vacía, pegue el siguiente Hola fragmento y presione **MAYÚS + ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="01529-137">In an empty cell, paste hello following snippet and press **SHIFT + ENTER**.</span></span> <span data-ttu-id="01529-138">Este fragmento de código registra datos de hello en una tabla denominada **hvac**.</span><span class="sxs-lookup"><span data-stu-id="01529-138">This snippet registers hello data into a table called **hvac**.</span></span>

        # Create an RDD from sample data
        hvacText = sc.textFile("wasb:///HdiSamples/HdiSamples/SensorSampleData/hvac/HVAC.csv")

        # Create a schema for our data
        Entry = Row('Date', 'Time', 'TargetTemp', 'ActualTemp', 'BuildingID')

        # Parse hello data and create a schema
        hvacParts = hvacText.map(lambda s: s.split(',')).filter(lambda s: s[0] != 'Date')
        hvac = hvacParts.map(lambda p: Entry(str(p[0]), str(p[1]), int(p[2]), int(p[3]), int(p[6])))

        # Infer hello schema and create a table       
        hvacTable = sqlContext.createDataFrame(hvac)
        hvacTable.registerTempTable('hvactemptable')
        dfw = DataFrameWriter(hvacTable)
        dfw.saveAsTable('hvac')

7. <span data-ttu-id="01529-139">Compruebe que la tabla Hola se creó correctamente.</span><span class="sxs-lookup"><span data-stu-id="01529-139">Verify that hello table was successfully created.</span></span> <span data-ttu-id="01529-140">Puede usar hello `%%sql` mágico consultas de Hive toorun directamente.</span><span class="sxs-lookup"><span data-stu-id="01529-140">You can use hello `%%sql` magic toorun Hive queries directly.</span></span> <span data-ttu-id="01529-141">Para obtener más información acerca de hello `%%sql` mágico y otros magics disponibles con kernel PySpark de hello, vea [núcleos disponibles en los equipos portátiles Jupyter con clústeres de HDInsight Spark](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span><span class="sxs-lookup"><span data-stu-id="01529-141">For more information about hello `%%sql` magic, and other magics available with hello PySpark kernel, see [Kernels available on Jupyter notebooks with Spark HDInsight clusters](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span></span>

        %%sql
        SHOW TABLES

    <span data-ttu-id="01529-142">Verá una salida como la que se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="01529-142">You see an output like shown below:</span></span>

        +---------------+-------------+
        |tableName      |isTemporary  |
        +---------------+-------------+
        |hvactemptable  |true        |
        |hivesampletable|false        |
        |hvac           |false        |
        +---------------+-------------+

    <span data-ttu-id="01529-143">Hola solo las tablas que tienen false en hello **isTemporary** columna son tablas de subárbol que se almacenan en la tienda de metadatos de Hola y pueden tener acceso desde herramientas de BI de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-143">Only hello tables that have false under hello **isTemporary** column are hive tables that are stored in hello metastore and can be accessed from hello BI tools.</span></span> <span data-ttu-id="01529-144">En este tutorial, nos conectamos toohello **hvac** tabla hemos creado.</span><span class="sxs-lookup"><span data-stu-id="01529-144">In this tutorial, we connect toohello **hvac** table we created.</span></span>

8. <span data-ttu-id="01529-145">Comprobar que esa tabla hello contiene datos de hello prevista.</span><span class="sxs-lookup"><span data-stu-id="01529-145">Verify that hello table contains hello intended data.</span></span> <span data-ttu-id="01529-146">En una celda vacía en el Bloc de notas de hello, copie el siguiente de hello fragmento y presione **MAYÚS + ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="01529-146">In an empty cell in hello notebook, copy hello following snippet and press **SHIFT + ENTER**.</span></span>

        %%sql
        SELECT * FROM hvac LIMIT 10

9. <span data-ttu-id="01529-147">Apagar los recursos de Hola de toorelease de hello Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="01529-147">Shut down hello notebook toorelease hello resources.</span></span> <span data-ttu-id="01529-148">toodo es así, de hello **archivo** menú en el Bloc de notas de hello, haga clic en **cerrar y detener la**.</span><span class="sxs-lookup"><span data-stu-id="01529-148">toodo so, from hello **File** menu on hello notebook, click **Close and Halt**.</span></span>

## <span data-ttu-id="01529-149"><a name="powerbi"></a>Uso de Power BI para la visualización de datos de Spark</span><span class="sxs-lookup"><span data-stu-id="01529-149"><a name="powerbi"></a>Use Power BI for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="01529-150">Esta sección se aplica solo a Spark 1.6 en HDInsight 3.4 y Spark 2.0 en HDInsight 3.5.</span><span class="sxs-lookup"><span data-stu-id="01529-150">This section is applicable only for Spark 1.6 on HDInsight 3.4 and Spark 2.0 on HDInsight 3.5.</span></span>
>
>

<span data-ttu-id="01529-151">Una vez que ha guardado los datos de hello como una tabla, puede usar datos de Power BI tooconnect toohello y visualizar informes toocreate, paneles, etcetera.</span><span class="sxs-lookup"><span data-stu-id="01529-151">Once you have saved hello data as a table, you can use Power BI tooconnect toohello data and visualize it toocreate reports, dashboards, etc.</span></span>

1. <span data-ttu-id="01529-152">Asegúrese de que tiene acceso tooPower BI.</span><span class="sxs-lookup"><span data-stu-id="01529-152">Make sure you have access tooPower BI.</span></span> <span data-ttu-id="01529-153">Puede obtener una suscripción de versión preliminar gratuita de Power BI en [http://www.powerbi.com/](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="01529-153">You can get a free preview subscription of Power BI from [http://www.powerbi.com/](http://www.powerbi.com/).</span></span>

2. <span data-ttu-id="01529-154">Inicie sesión en demasiado[Power BI](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="01529-154">Sign in too[Power BI](http://www.powerbi.com/).</span></span>

3. <span data-ttu-id="01529-155">Desde la parte inferior del panel izquierdo de Hola Hola haga clic en **obtener datos**.</span><span class="sxs-lookup"><span data-stu-id="01529-155">From hello bottom of hello left pane, click **Get Data**.</span></span>

4. <span data-ttu-id="01529-156">En hello **obtener datos** página, en **importar o conectarse tooData**, para **bases de datos**, haga clic en **obtener**.</span><span class="sxs-lookup"><span data-stu-id="01529-156">On hello **Get Data** page, under **Import or Connect tooData**, for **Databases**, click **Get**.</span></span>

    <span data-ttu-id="01529-157">![Obtención de datos en Power BI para Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Obtención de datos en Power BI para Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-157">![Get data into Power BI for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Get data into Power BI for Apache Spark BI")</span></span>

5. <span data-ttu-id="01529-158">En la siguiente pantalla de bienvenida, haga clic en **Spark en HDInsight de Azure** y, a continuación, haga clic en **conectar**.</span><span class="sxs-lookup"><span data-stu-id="01529-158">On hello next screen, click **Spark on Azure HDInsight** and then click **Connect**.</span></span> <span data-ttu-id="01529-159">Cuando se le solicite, escriba la dirección URL del clúster de hello (`mysparkcluster.azurehdinsight.net`) y Hola credenciales tooconnect toohello clúster.</span><span class="sxs-lookup"><span data-stu-id="01529-159">When prompted, enter hello cluster URL (`mysparkcluster.azurehdinsight.net`) and hello credentials tooconnect toohello cluster.</span></span>

    <span data-ttu-id="01529-160">![Conectar tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "conectar tooApache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-160">![Connect tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "Connect tooApache Spark BI")</span></span>

    <span data-ttu-id="01529-161">Una vez establecida la conexión de hello, Power BI inicia la importación de datos de clúster de hello Spark en HDInsight.</span><span class="sxs-lookup"><span data-stu-id="01529-161">After hello connection is established, Power BI starts importing data from hello Spark cluster on HDInsight.</span></span>

6. <span data-ttu-id="01529-162">Power BI importa los datos de Hola y agrega un **Spark** conjunto de datos en hello **conjuntos de datos** encabezado.</span><span class="sxs-lookup"><span data-stu-id="01529-162">Power BI imports hello data and adds a **Spark** dataset under hello **Datasets** heading.</span></span> <span data-ttu-id="01529-163">Haga clic en el conjunto de datos de hello tooopen una nueva hoja de cálculo toovisualize Hola de datos.</span><span class="sxs-lookup"><span data-stu-id="01529-163">Click hello data set tooopen a new worksheet toovisualize hello data.</span></span> <span data-ttu-id="01529-164">También puede guardar la hoja de cálculo de Hola como un informe.</span><span class="sxs-lookup"><span data-stu-id="01529-164">You can also save hello worksheet as a report.</span></span> <span data-ttu-id="01529-165">una hoja de cálculo de hello toosave **archivo** menú, haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="01529-165">toosave a worksheet, from hello **File** menu, click **Save**.</span></span>

    <span data-ttu-id="01529-166">![Icono de Apache Spark BI en el panel de Power BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Icono de Apache Spark BI en el panel de Power BI")</span><span class="sxs-lookup"><span data-stu-id="01529-166">![Apache Spark BI tile on Power BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Apache Spark BI tile on Power BI dashboard")</span></span>
7. <span data-ttu-id="01529-167">Tenga en cuenta que hello **campos** lista de la derecha de hello muestra hello **hvac** tabla que creó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="01529-167">Notice that hello **Fields** list on hello right lists hello **hvac** table you created earlier.</span></span> <span data-ttu-id="01529-168">Expanda campos de hello toosee hello de la tabla en la tabla de hello, tal y como se definió anteriormente en el Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="01529-168">Expand hello table toosee hello fields in hello table, as you defined in notebook earlier.</span></span>

      <span data-ttu-id="01529-169">![Lista de tablas en el panel de Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "Lista de tablas en el panel de Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-169">![List tables on Apache Spark BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "List tables on Apache Spark BI dashboard")</span></span>

8. <span data-ttu-id="01529-170">Crear una variación de visualización tooshow Hola entre temperatura de destino y la temperatura real para cada compilación.</span><span class="sxs-lookup"><span data-stu-id="01529-170">Build a visualization tooshow hello variance between target temperature and actual temperature for each building.</span></span> <span data-ttu-id="01529-171">Seleccionar datos de yoru toovisualize, **gráfico de áreas** (que se muestra en el cuadro rojo).</span><span class="sxs-lookup"><span data-stu-id="01529-171">toovisualize yoru data, select **Area Chart** (shown in red box).</span></span> <span data-ttu-id="01529-172">eje de hello toodefine, arrastrar y colocar hello **BuildingID** campo **eje**, y **ActualTemp**/**TargetTemp** campos en **valor**.</span><span class="sxs-lookup"><span data-stu-id="01529-172">toodefine hello axis, drag-and-drop hello **BuildingID** field under **Axis**, and **ActualTemp**/**TargetTemp** fields under **Value**.</span></span>

    <span data-ttu-id="01529-173">![Creación de visualizaciones de datos de Spark con Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Creación de visualizaciones de datos de Spark con Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-173">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Create Spark data visualizations using Apache Spark BI")</span></span>

9. <span data-ttu-id="01529-174">De forma predeterminada visualización Hola muestra la suma de hello para **ActualTemp** y **TargetTemp**.</span><span class="sxs-lookup"><span data-stu-id="01529-174">By default hello visualization shows hello sum for **ActualTemp** and **TargetTemp**.</span></span> <span data-ttu-id="01529-175">Por tanto Hola los campos de hello lista desplegable, seleccione **Media** tooget un promedio de real y la temperatura de destino para ambos edificios.</span><span class="sxs-lookup"><span data-stu-id="01529-175">For both hello fields, from hello drop-down, select **Average** tooget an average of actual and target temperatures for both buildings.</span></span>

    <span data-ttu-id="01529-176">![Creación de visualizaciones de datos de Spark con Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Creación de visualizaciones de datos de Spark con Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-176">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Create Spark data visualizations using Apache Spark BI")</span></span>

10. <span data-ttu-id="01529-177">La visualización de datos debe ser similar toohello uno en la captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-177">Your data visualization should be similar toohello one in hello screenshot.</span></span> <span data-ttu-id="01529-178">Mueva el cursor sobre Hola visualización tooget información sobre herramientas con datos relevantes.</span><span class="sxs-lookup"><span data-stu-id="01529-178">Move your cursor over hello visualization tooget tool tips with relevant data.</span></span>

    <span data-ttu-id="01529-179">![Creación de visualizaciones de datos de Spark con Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Creación de visualizaciones de datos de Spark con Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-179">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Create Spark data visualizations using Apache Spark BI")</span></span>

11. <span data-ttu-id="01529-180">Haga clic en **guardar** de hello principales de menú y proporcione un nombre de informe.</span><span class="sxs-lookup"><span data-stu-id="01529-180">Click **Save** from hello top menu and provide a report name.</span></span> <span data-ttu-id="01529-181">También puede anclar Hola visual.</span><span class="sxs-lookup"><span data-stu-id="01529-181">You can also pin hello visual.</span></span> <span data-ttu-id="01529-182">Al anclar una visualización, se almacena en el panel por lo que puede controlar los valores más recientes de hello un vistazo.</span><span class="sxs-lookup"><span data-stu-id="01529-182">When you pin a visualization, it is stored on your dashboard so you can track hello latest value at a glance.</span></span>

   <span data-ttu-id="01529-183">Puede agregar tantos visualizaciones como desee para Hola el mismo conjunto de datos y anclarlos toohello panel para una instantánea de los datos.</span><span class="sxs-lookup"><span data-stu-id="01529-183">You can add as many visualizations as you want for hello same dataset and pin them toohello dashboard for a snapshot of your data.</span></span> <span data-ttu-id="01529-184">Asimismo, clústeres de Spark en HDInsight son tooPower conectado BI con direct conectarse.</span><span class="sxs-lookup"><span data-stu-id="01529-184">Also, Spark clusters on HDInsight are connected tooPower BI with direct connect.</span></span> <span data-ttu-id="01529-185">Esto asegura que Power BI siempre tiene Hola mayoría de los datos actualizada desde el clúster no es necesario tooschedule actualizaciones para el conjunto de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-185">This ensures that Power BI always has hello most up-to-date data from your cluster so you do not need tooschedule refreshes for hello dataset.</span></span>

## <span data-ttu-id="01529-186"><a name="tableau"></a>Uso de Tableau Desktop para la visualización de datos de Spark</span><span class="sxs-lookup"><span data-stu-id="01529-186"><a name="tableau"></a>Use Tableau Desktop for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="01529-187">Esta sección solo es aplicable a los clústeres de Spark 1.5.2 creados en Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="01529-187">This section is applicable only for Spark 1.5.2 clusters created in Azure HDInsight.</span></span>
>
>

1. <span data-ttu-id="01529-188">Instalar [Tableau Desktop](http://www.tableau.com/products/desktop) en equipo Hola donde se ejecuta este tutorial de Apache Spark BI.</span><span class="sxs-lookup"><span data-stu-id="01529-188">Install [Tableau Desktop](http://www.tableau.com/products/desktop) on hello computer where you are running this Apache Spark BI tutorial.</span></span>

2. <span data-ttu-id="01529-189">Asegúrese de que el equipo también tenga instalado el controlador ODBC de Microsoft Spark.</span><span class="sxs-lookup"><span data-stu-id="01529-189">Make sure that computer also has Microsoft Spark ODBC driver installed.</span></span> <span data-ttu-id="01529-190">Puede instalar controladores de Hola de [aquí](http://go.microsoft.com/fwlink/?LinkId=616229).</span><span class="sxs-lookup"><span data-stu-id="01529-190">You can install hello driver from [here](http://go.microsoft.com/fwlink/?LinkId=616229).</span></span>

1. <span data-ttu-id="01529-191">Inicie Tableau Desktop.</span><span class="sxs-lookup"><span data-stu-id="01529-191">Launch Tableau Desktop.</span></span> <span data-ttu-id="01529-192">En el panel izquierdo de hello, en lista de Hola de tooconnect de servidor, haga clic en **Spark SQL**.</span><span class="sxs-lookup"><span data-stu-id="01529-192">In hello left pane, from hello list of server tooconnect to, click **Spark SQL**.</span></span> <span data-ttu-id="01529-193">Si Spark SQL no aparece de forma predeterminada en el panel izquierdo de hello, puede buscar haciendo clic en **más servidores**.</span><span class="sxs-lookup"><span data-stu-id="01529-193">If Spark SQL is not listed by default in hello left pane, you can find it by click **More Servers**.</span></span>
2. <span data-ttu-id="01529-194">En el cuadro de diálogo de conexión de hello Spark SQL, proporcione los valores de hello tal y como se muestra en la captura de pantalla de hello y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="01529-194">In hello Spark SQL connection dialog box, provide hello values as shown in hello screenshot, and then click **OK**.</span></span>

    <span data-ttu-id="01529-195">![Clúster de tooa conectar a Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "conectar tooa clústeres de Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-195">![Connect tooa cluster for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "Connect tooa cluster for Apache Spark BI")</span></span>

    <span data-ttu-id="01529-196">Hola listas desplegables de autenticación **servicio HDInsight de Microsoft Azure** como una opción, solo si ha instalado hello [controlador ODBC de Microsoft Spark](http://go.microsoft.com/fwlink/?LinkId=616229) en el equipo de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-196">hello authentication drop-down lists **Microsoft Azure HDInsight Service** as an option, only if you installed hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) on hello computer.</span></span>
3. <span data-ttu-id="01529-197">En pantalla siguiente hello, de hello **esquema** lista desplegable, haga clic en hello **buscar** icono y, a continuación, haga clic en **predeterminado**.</span><span class="sxs-lookup"><span data-stu-id="01529-197">On hello next screen, from hello **Schema** drop-down, click hello **Find** icon, and then click **default**.</span></span>

    <span data-ttu-id="01529-198">![Búsqueda del esquema de Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Búsqueda del esquema de Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-198">![Find schema for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Find schema for Apache Spark BI")</span></span>
4. <span data-ttu-id="01529-199">Para hello **tabla** , a continuación, haga clic en hello **buscar** icono nuevo toolist Hola a todos Hive tablas disponibles en el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-199">For hello **Table** field, click hello **Find** icon again toolist all hello Hive tables available in hello cluster.</span></span> <span data-ttu-id="01529-200">Debería ver Hola **hvac** tabla creada anteriormente con el Bloc de notas de Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-200">You should see hello **hvac** table you created earlier using hello notebook.</span></span>

    <span data-ttu-id="01529-201">![Búsqueda de la tabla de Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Búsqueda de la tabla de Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-201">![Find table for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Find table for Apache Spark BI")</span></span>
5. <span data-ttu-id="01529-202">Arrastre y coloque el cuadro superior toohello de hello tabla en hello derecho.</span><span class="sxs-lookup"><span data-stu-id="01529-202">Drag and drop hello table toohello top box on hello right.</span></span> <span data-ttu-id="01529-203">Tableau importa datos de Hola y muestra el esquema de hello como se resalta cuadro Hola rojo.</span><span class="sxs-lookup"><span data-stu-id="01529-203">Tableau imports hello data and displays hello schema as highlighted by hello red box.</span></span>

    <span data-ttu-id="01529-204">![Agregar tablas tooTableau para Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "agregar tablas tooTableau para Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="01529-204">![Add tables tooTableau for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "Add tables tooTableau for Apache Spark BI")</span></span>
6. <span data-ttu-id="01529-205">Haga clic en hello **Sheet1** pestaña en hello parte inferior izquierda.</span><span class="sxs-lookup"><span data-stu-id="01529-205">Click hello **Sheet1** tab at hello bottom left.</span></span> <span data-ttu-id="01529-206">Realizar una visualización que muestra destino promedio de Hola y la temperatura real para todos los edificios para cada fecha.</span><span class="sxs-lookup"><span data-stu-id="01529-206">Make a visualization that shows hello average target and actual temperatures for all buildings for each date.</span></span> <span data-ttu-id="01529-207">Arrastre **fecha** y **Id. de edificio** demasiado**columnas** y **Temp real**/**destino Temp**demasiado**filas**.</span><span class="sxs-lookup"><span data-stu-id="01529-207">Drag **Date** and **Building ID** too**Columns** and **Actual Temp**/**Target Temp** too**Rows**.</span></span> <span data-ttu-id="01529-208">En **marcas**, seleccione **área** toouse un mapa de área de visualización de datos de Spark.</span><span class="sxs-lookup"><span data-stu-id="01529-208">Under **Marks**, select **Area** toouse an area map for Spark data visualization.</span></span>

     <span data-ttu-id="01529-209">![Incorporación de campos para la visualización de datos de Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Incorporación de campos para la visualización de datos de Spark")</span><span class="sxs-lookup"><span data-stu-id="01529-209">![Add fields for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Add fields for Spark data visualization")</span></span>
7. <span data-ttu-id="01529-210">De forma predeterminada, se muestran los campos de temperatura de hello como agregado.</span><span class="sxs-lookup"><span data-stu-id="01529-210">By default, hello temperature fields are shown as aggregate.</span></span> <span data-ttu-id="01529-211">Si desea que las temperaturas medias de hello tooshow en su lugar, puede hacerlo desde la lista desplegable Hola tal y como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="01529-211">If you want tooshow hello average temperatures instead, you can do so from hello drop-down, as shown below.</span></span>

    <span data-ttu-id="01529-212">![Realización del promedio de temperatura para la visualización de datos de Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Realización del promedio de temperatura para la visualización de datos de Spark")</span><span class="sxs-lookup"><span data-stu-id="01529-212">![Take average of temperature for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Take average of temperature for Spark data visualization")</span></span>

8. <span data-ttu-id="01529-213">Puede también super-imponer una asignación de temperatura Hola en otro tooget una idea más clara de la diferencia entre el destino y la temperatura real.</span><span class="sxs-lookup"><span data-stu-id="01529-213">You can also super-impose one temperature map over hello other tooget a better feel of difference between target and actual temperatures.</span></span> <span data-ttu-id="01529-214">Mover esquina de hello mouse toohello de asignación de área inferior de hello hasta que vea forma de identificador hello resaltado en un círculo rojo.</span><span class="sxs-lookup"><span data-stu-id="01529-214">Move hello mouse toohello corner of hello lower area map till you see hello handle shape highlighted in a red circle.</span></span> <span data-ttu-id="01529-215">Arrastre Hola mapa toohello otra asignación de Hola superior y versión Hola mouse cuando vea forma Hola resaltado en el rectángulo rojo.</span><span class="sxs-lookup"><span data-stu-id="01529-215">Drag hello map toohello other map on hello top and release hello mouse when you see hello shape highlighted in red rectangle.</span></span>

    <span data-ttu-id="01529-216">![Combinación de mapas para la visualización de datos de Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Combinación de mapas para la visualización de datos de Spark")</span><span class="sxs-lookup"><span data-stu-id="01529-216">![Merge maps for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Merge maps for Spark data visualization")</span></span>

     <span data-ttu-id="01529-217">Como se muestra en la captura de pantalla de hello, debe cambiar la visualización de datos:</span><span class="sxs-lookup"><span data-stu-id="01529-217">Your data visualization should change as shown in hello screenshot:</span></span>

    <span data-ttu-id="01529-218">![Salida de Tableau para la visualización de datos de Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Salida de Tableau para la visualización de datos de Spark")</span><span class="sxs-lookup"><span data-stu-id="01529-218">![Tableau output for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Tableau output for Spark data visualization")</span></span>
9. <span data-ttu-id="01529-219">Haga clic en **guardar** hoja de cálculo de toosave Hola.</span><span class="sxs-lookup"><span data-stu-id="01529-219">Click **Save** toosave hello worksheet.</span></span> <span data-ttu-id="01529-220">Puede crear paneles y agregar uno o más tooit hojas.</span><span class="sxs-lookup"><span data-stu-id="01529-220">You can create dashboards and add one or more sheets tooit.</span></span>

## <a name="next-steps"></a><span data-ttu-id="01529-221">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="01529-221">Next steps</span></span>

<span data-ttu-id="01529-222">Hasta ahora, ha aprendido cómo crear Spark marcos tooquery datos toocreate un clúster y, a continuación, tener acceso a esos datos desde herramientas de BI.</span><span class="sxs-lookup"><span data-stu-id="01529-222">So far you learned how toocreate a cluster, create Spark data frames tooquery data, and then access that data from BI tools.</span></span> <span data-ttu-id="01529-223">Ahora puede consultar instrucciones sobre cómo toomanage Hola recursos de clúster y depurar los trabajos que se ejecutan en un clúster de HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="01529-223">You can now look at instructions on how toomanage hello cluster resources and debug jobs that are running in an HDInsight Spark cluster.</span></span>

* [<span data-ttu-id="01529-224">Administrar los recursos de clúster de hello Apache Spark en HDInsight de Azure</span><span class="sxs-lookup"><span data-stu-id="01529-224">Manage resources for hello Apache Spark cluster in Azure HDInsight</span></span>](hdinsight-apache-spark-resource-manager.md)
* [<span data-ttu-id="01529-225">Track and debug jobs running on an Apache Spark cluster in HDInsight (Seguimiento y depuración de trabajos que se ejecutan en un clúster de Apache Spark en HDInsight)</span><span class="sxs-lookup"><span data-stu-id="01529-225">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)


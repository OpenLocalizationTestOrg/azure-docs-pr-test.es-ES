---
title: "Procesamiento de datos del sensor de vehículo con Apache Storm en HDInsight | Microsoft Docs"
description: "Aprenda a procesar datos del sensor de vehículo de Centros de eventos con Apache Storm en HDInsight. Agregue datos de modelo de Azure Cosmos DB y almacene el resultado en el almacenamiento."
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8e8ebc724e1c70e8fcd56312adef5da2342373ea
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="c901c-104">Procese datos del sensor de vehículo de Centros de eventos de Azure con Apache Storm en HDInsight</span><span class="sxs-lookup"><span data-stu-id="c901c-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="c901c-105">Aprenda a procesar datos del sensor de vehículo de Centros de eventos de Azure con Apache Storm en HDInsight.</span><span class="sxs-lookup"><span data-stu-id="c901c-105">Learn how to process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="c901c-106">En este ejemplo se leen datos del sensor de Event Hubs de Azure, que se enriquecen al hacer referencia a los datos almacenados en Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="c901c-106">This example reads sensor data from Azure Event Hubs, enriches the data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="c901c-107">Los datos se almacenan en Azure Storage con el sistema de archivos de Hadoop (HDFS).</span><span class="sxs-lookup"><span data-stu-id="c901c-107">The data is stored into Azure Storage using the Hadoop File System (HDFS).</span></span>

![Diagrama de arquitectura de Internet de las cosas (IoT) y HDInsight](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="c901c-109">Información general</span><span class="sxs-lookup"><span data-stu-id="c901c-109">Overview</span></span>

<span data-ttu-id="c901c-110">La adición de sensores a vehículos permite predecir problemas con los equipos en función de las tendencias de datos históricos.</span><span class="sxs-lookup"><span data-stu-id="c901c-110">Adding sensors to vehicles allows you to predict equipment problems based on historical data trends.</span></span> <span data-ttu-id="c901c-111">También permite realizar mejoras en futuras versiones en función del análisis de patrones de uso.</span><span class="sxs-lookup"><span data-stu-id="c901c-111">It also allows you to make improvements to future versions based on usage pattern analysis.</span></span> <span data-ttu-id="c901c-112">Debe ser capaz de cargar los datos de todos los vehículos en Hadoop de forma rápida y eficaz antes de que se lleve a cabo el procesamiento de MapReduce.</span><span class="sxs-lookup"><span data-stu-id="c901c-112">You must be able to quickly and efficiently load the data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="c901c-113">Además, puede que desee realizar análisis para rutas de error crítico (temperatura del motor, frenos, etc.) en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="c901c-113">Additionally, you may wish to do analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="c901c-114">Event Hubs de Azure se crea para administrar el volumen masivo de datos generados por sensores.</span><span class="sxs-lookup"><span data-stu-id="c901c-114">Azure Event Hubs is built to handle the massive volume of data generated by sensors.</span></span> <span data-ttu-id="c901c-115">Apache Storm puede utilizarse para cargar y procesar los datos antes de almacenarlos en HDFS.</span><span class="sxs-lookup"><span data-stu-id="c901c-115">Apache Storm can be used to load and process the data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="c901c-116">Solución</span><span class="sxs-lookup"><span data-stu-id="c901c-116">Solution</span></span>

<span data-ttu-id="c901c-117">Los datos de telemetría para la temperatura del motor, la temperatura ambiente y la velocidad del vehículo se registran mediante sensores.</span><span class="sxs-lookup"><span data-stu-id="c901c-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="c901c-118">Los datos se envían a Event Hubs junto con el número de identificación del vehículo (VIN) del coche y una marca de tiempo.</span><span class="sxs-lookup"><span data-stu-id="c901c-118">Data is then sent to Event Hubs along with the car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="c901c-119">Desde allí, una topología de Storm ejecutándose en un clúster de Apache Storm en HDInsight lee los datos, los procesa y los almacena en HDFS.</span><span class="sxs-lookup"><span data-stu-id="c901c-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads the data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="c901c-120">Durante el procesamiento, el VIN se usa para recuperar información sobre el modelo desde Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="c901c-120">During processing, the VIN is used to retrieve model information from Cosmos DB.</span></span> <span data-ttu-id="c901c-121">Estos datos se agregan al flujo de datos antes de almacenarse.</span><span class="sxs-lookup"><span data-stu-id="c901c-121">This data is added to the data stream before it is stored.</span></span>

<span data-ttu-id="c901c-122">Los componentes usados en la topología de Storm son:</span><span class="sxs-lookup"><span data-stu-id="c901c-122">The components used in the Storm Topology are:</span></span>

* <span data-ttu-id="c901c-123">**EventHubSpout** : lee los datos de Centros de eventos de Azure.</span><span class="sxs-lookup"><span data-stu-id="c901c-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="c901c-124">**TypeConversionBolt**: convierte la cadena JSON de Event Hubs en una tupla que contiene los siguientes datos del sensor:</span><span class="sxs-lookup"><span data-stu-id="c901c-124">**TypeConversionBolt** - converts the JSON string from Event Hubs into a tuple containing the following sensor data:</span></span>
    * <span data-ttu-id="c901c-125">Engine temperature</span><span class="sxs-lookup"><span data-stu-id="c901c-125">Engine temperature</span></span>
    * <span data-ttu-id="c901c-126">Temperatura ambiente</span><span class="sxs-lookup"><span data-stu-id="c901c-126">Ambient temperature</span></span>
    * <span data-ttu-id="c901c-127">Velocidad</span><span class="sxs-lookup"><span data-stu-id="c901c-127">Speed</span></span>
    * <span data-ttu-id="c901c-128">VIN</span><span class="sxs-lookup"><span data-stu-id="c901c-128">VIN</span></span>
    * <span data-ttu-id="c901c-129">Timestamp</span><span class="sxs-lookup"><span data-stu-id="c901c-129">Timestamp</span></span>
* <span data-ttu-id="c901c-130">**DataReferencBolt**: busca el modelo del vehículo desde Cosmos DB mediante el VIN.</span><span class="sxs-lookup"><span data-stu-id="c901c-130">**DataReferencBolt** - looks up the vehicle model from Cosmos DB using the VIN</span></span>
* <span data-ttu-id="c901c-131">**WasbStoreBolt** : almacena los datos en HDFS (Almacenamiento de Azure).</span><span class="sxs-lookup"><span data-stu-id="c901c-131">**WasbStoreBolt** - stores the data to HDFS (Azure Storage)</span></span>

<span data-ttu-id="c901c-132">La siguiente imagen es un diagrama de esta solución:</span><span class="sxs-lookup"><span data-stu-id="c901c-132">The following image is a diagram of this solution:</span></span>

![topología de storm](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="c901c-134">Implementación</span><span class="sxs-lookup"><span data-stu-id="c901c-134">Implementation</span></span>

<span data-ttu-id="c901c-135">Se puede encontrar una solución completa y automatizada para este escenario como parte del repositorio [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) en GitHub.</span><span class="sxs-lookup"><span data-stu-id="c901c-135">A complete, automated solution for this scenario is available as part of the [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="c901c-136">Para utilizar este ejemplo, siga los pasos de [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="c901c-136">To use this example, follow the steps in the [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c901c-137">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="c901c-137">Next Steps</span></span>

<span data-ttu-id="c901c-138">Para más topologías de ejemplo de Storm, vea [Topologías de ejemplo para Storm en HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="c901c-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>


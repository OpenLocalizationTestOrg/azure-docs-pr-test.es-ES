---
title: "Acceso a los registros de aplicación de YARN de Hadoop mediante programación - Azure | Microsoft Docs"
description: "La aplicación de Access se registra mediante programación en un clúster de Hadoop en HDInsight."
services: hdinsight
documentationcenter: 
tags: azure-portal
author: mumian
manager: jhubbard
editor: cgronlun
ms.assetid: 0198d6c9-7767-4682-bd34-42838cf48fc5
ms.service: hdinsight
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2017
ms.author: jgao
ROBOTS: NOINDEX
ms.openlocfilehash: 90323af4a1f4526ab9b26811c8679337076112d1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="access-yarn-application-logs-on-windows-based-hdinsight"></a><span data-ttu-id="e6290-103">Acceso a registros de aplicación de YARN en HDInsight basado en Windows</span><span class="sxs-lookup"><span data-stu-id="e6290-103">Access YARN application logs on Windows-based HDInsight</span></span>
<span data-ttu-id="e6290-104">En este tema se explica cómo acceder a los registros de aplicaciones de YARN (del inglés Yet Another Resource Negotiator) que finalicen en un clúster Hadoop basado en Windows en Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="e6290-104">This topic explains how to access the logs for YARN (Yet Another Resource Negotiator) applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e6290-105">La información contenida en este documento es específica de los clústeres de HDInsight basados en Windows.</span><span class="sxs-lookup"><span data-stu-id="e6290-105">The information in this document applies only to Windows-based HDInsight clusters.</span></span> <span data-ttu-id="e6290-106">Linux es el único sistema operativo que se usa en la versión 3.4 de HDInsight, o en las superiores.</span><span class="sxs-lookup"><span data-stu-id="e6290-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="e6290-107">Consulte la información sobre la [retirada de HDInsight en Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="e6290-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span> <span data-ttu-id="e6290-108">Para obtener información sobre cómo acceder a registros de YARN en clústeres de HDInsight basados en Linux, vea [Acceso a registros de aplicación de YARN en Hadoop basado en Linux en HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span><span class="sxs-lookup"><span data-stu-id="e6290-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span></span>
>


### <a name="prerequisites"></a><span data-ttu-id="e6290-109">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="e6290-109">Prerequisites</span></span>
* <span data-ttu-id="e6290-110">Un clúster de HDInsight basado en Windows</span><span class="sxs-lookup"><span data-stu-id="e6290-110">A Windows-based HDInsight cluster.</span></span>  <span data-ttu-id="e6290-111">Consulte [Creación de clústeres de Hadoop basados en Windows en HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="e6290-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span></span>

## <a name="yarn-timeline-server"></a><span data-ttu-id="e6290-112">Servidor de escala de tiempo de YARN</span><span class="sxs-lookup"><span data-stu-id="e6290-112">YARN Timeline Server</span></span>
<span data-ttu-id="e6290-113">El <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">Servidor de escala de tiempo de YARN</a> proporciona información genérica acerca de las aplicaciones completadas, así como información de aplicaciones específicas de marco a través de dos interfaces diferentes.</span><span class="sxs-lookup"><span data-stu-id="e6290-113">The <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="e6290-114">Concretamente:</span><span class="sxs-lookup"><span data-stu-id="e6290-114">Specifically:</span></span>

* <span data-ttu-id="e6290-115">Se ha habilitado el almacenamiento y la recuperación de información de aplicaciones genéricas en clústeres de HDInsight con la versión 3.1.1.374 o superiores.</span><span class="sxs-lookup"><span data-stu-id="e6290-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="e6290-116">El componente de información de aplicaciones específica del marco del servidor de la escala de tiempo no está disponible actualmente en los clústeres de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="e6290-116">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="e6290-117">La información genérica sobre aplicaciones incluye los siguientes tipos de datos:</span><span class="sxs-lookup"><span data-stu-id="e6290-117">Generic information on applications includes the following sorts of data:</span></span>

* <span data-ttu-id="e6290-118">El ID de la aplicación, que es el identificador único de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-118">The application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="e6290-119">El usuario que ha iniciado la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-119">The user who started the application</span></span>
* <span data-ttu-id="e6290-120">La información acerca de los intentos realizados para completar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-120">Information on attempts made to complete the application</span></span>
* <span data-ttu-id="e6290-121">Los contenedores usados por cualquier intento de aplicación concreto.</span><span class="sxs-lookup"><span data-stu-id="e6290-121">The containers used by any given application attempt</span></span>

<span data-ttu-id="e6290-122">En los clústeres de HDInsight, esta información la almacenará el Administrador de recursos de Azure en un almacén de historial en el contenedor predeterminado de la cuenta de almacenamiento predeterminada de Azure.</span><span class="sxs-lookup"><span data-stu-id="e6290-122">On your HDInsight clusters, this information will be stored by Azure Resource Manager to a history store in the default container of your default Azure Storage account.</span></span> <span data-ttu-id="e6290-123">Estos datos genéricos sobre aplicaciones completadas se pueden recuperar a través de una API de REST:</span><span class="sxs-lookup"><span data-stu-id="e6290-123">This generic data on completed applications can be retrieved through a REST API:</span></span>

    GET on https://<cluster-dns-name>.azurehdinsight.net/ws/v1/applicationhistory/apps


## <a name="yarn-applications-and-logs"></a><span data-ttu-id="e6290-124">Registros y aplicaciones de YARN</span><span class="sxs-lookup"><span data-stu-id="e6290-124">YARN applications and logs</span></span>
<span data-ttu-id="e6290-125">YARN admite varios modelos de programación (MapReduce es uno de ellos) al desacoplar la administración de recursos de la programación/supervisión de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e6290-125">YARN supports multiple programming models (MapReduce being one of them) by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="e6290-126">Esto se realiza mediante un *Resource Manager* (RM) global, por nodo de trabajo *Administradores de nodos* (NM) y por aplicación *Maestros de aplicación* (AM).</span><span class="sxs-lookup"><span data-stu-id="e6290-126">This is done through a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="e6290-127">El AM por aplicación negocia recursos (CPU, memoria, disco, red) para ejecutar la aplicación con el RM.</span><span class="sxs-lookup"><span data-stu-id="e6290-127">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span></span> <span data-ttu-id="e6290-128">El RM funciona con NM para conceder estos recursos como *contenedores*.</span><span class="sxs-lookup"><span data-stu-id="e6290-128">The RM works with NMs to grant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="e6290-129">El AM es responsable del seguimiento del progreso de los contenedores asignados a él por el RM.</span><span class="sxs-lookup"><span data-stu-id="e6290-129">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span></span> <span data-ttu-id="e6290-130">Una aplicación puede requerir muchos contenedores según la naturaleza de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-130">An application may require many containers depending on the nature of the application.</span></span>

<span data-ttu-id="e6290-131">Además, cada aplicación puede constar de varios *intentos de aplicación* para completar la aplicación en el caso de bloqueos o debido a la pérdida de comunicación entre un AM y un RM.</span><span class="sxs-lookup"><span data-stu-id="e6290-131">Furthermore, each application may consist of multiple *application attempts* in order to finish in the presence of crashes or due to the loss of communication between an AM and an RM.</span></span> <span data-ttu-id="e6290-132">Por lo tanto, los contenedores se conceden a un intento específico de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-132">Hence, containers are granted to a specific attempt of an application.</span></span> <span data-ttu-id="e6290-133">En cierto sentido, un contenedor ofrece el contexto para la unidad básica de trabajo realizado por una aplicación YARN, y todo el trabajo que se realiza en el contexto de un contenedor se lleva a cabo en el nodo de trabajo concreto en el que se ha asignado el contenedor.</span><span class="sxs-lookup"><span data-stu-id="e6290-133">In a sense, a container provides the context for basic unit of work performed by a YARN application, and all work that is done within the context of a container is performed on the single worker node on which the container was allocated.</span></span> <span data-ttu-id="e6290-134">Consulte [Conceptos de YARN][YARN-concepts] como referencia adicional.</span><span class="sxs-lookup"><span data-stu-id="e6290-134">See [YARN Concepts][YARN-concepts] for further reference.</span></span>

<span data-ttu-id="e6290-135">Los registros de aplicación (y los registros de contenedor asociados) son fundamentales en la depuración de las aplicaciones de Hadoop problemáticas.</span><span class="sxs-lookup"><span data-stu-id="e6290-135">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="e6290-136">YARN proporciona un buen marco para recopilar, agregar y almacenar registros de aplicaciones con la característica de [agregación de registros][log-aggregation].</span><span class="sxs-lookup"><span data-stu-id="e6290-136">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="e6290-137">La característica Agregación de registro hace que el acceso a los registros de aplicaciones sea más determinante, ya que agrega los registros en todos los contenedores en un nodo de trabajo y los almacena como un archivo de registro agregado por nodo de trabajo en el sistema de archivos predeterminado después de que se complete una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-137">The Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on the default file system after an application finishes.</span></span> <span data-ttu-id="e6290-138">Su aplicación puede utilizar cientos o miles de contenedores, pero los registros para todos los contenedores que se ejecutan en un nodo de trabajo único se agregarán siempre en un archivo único, lo que da como resultado un archivo de registro por nodo de trabajo usado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6290-138">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node will always be aggregated to a single file, resulting in one log file per worker node used by your application.</span></span> <span data-ttu-id="e6290-139">La agregación de registro está habilitada de forma predeterminada en los clústeres de HDInsight (versión 3.0 y posteriores). Los registros agregados se pueden encontrar en el contenedor predeterminado del clúster en la siguiente ubicación:</span><span class="sxs-lookup"><span data-stu-id="e6290-139">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in the default container of your cluster at the following location:</span></span>

    wasb:///app-logs/<user>/logs/<applicationId>

<span data-ttu-id="e6290-140">En dicha ubicación, *usuario* es el nombre del usuario que inició la aplicación. *applicationId*, por su parte, es el identificador único de una aplicación según la asignación del RM de YARN.</span><span class="sxs-lookup"><span data-stu-id="e6290-140">In that location, *user* is the name of the user who started the application, and *applicationId* is the unique identifier of an application as assigned by the YARN RM.</span></span>

<span data-ttu-id="e6290-141">Los registros agregados no son legibles directamente tal como se escriben en un [TFile][T-file], [formato binario][binary-format] indexado por el contenedor.</span><span class="sxs-lookup"><span data-stu-id="e6290-141">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="e6290-142">YARN ofrece herramientas CLI para volcar estos registros como texto sin formato para aplicaciones o contenedores de interés.</span><span class="sxs-lookup"><span data-stu-id="e6290-142">YARN provides CLI tools to dump these logs as plain text for applications or containers of interest.</span></span> <span data-ttu-id="e6290-143">Puede ver estos registros como texto sin formato al ejecutar uno de los siguiente comandos de YARN directamente en los nodos del clúster (después de conectarse a él a través de RDP):</span><span class="sxs-lookup"><span data-stu-id="e6290-143">You can view these logs as plain text by running one of the following YARN commands directly on the cluster nodes (after connecting to it through RDP):</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>


## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="e6290-144">Interfaz de usuario de ResourceManager de YARN</span><span class="sxs-lookup"><span data-stu-id="e6290-144">YARN ResourceManager UI</span></span>
<span data-ttu-id="e6290-145">La interfaz de usuario de ResourceManager de YARN se ejecuta en el nodo principal del clúster, y puede tener acceso a ella mediante el panel del Portal de Azure:</span><span class="sxs-lookup"><span data-stu-id="e6290-145">The YARN ResourceManager UI runs on the cluster headnode, and can be accessed through the Azure portal dashboard:</span></span>

1. <span data-ttu-id="e6290-146">Inicie sesión en el [portal de Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e6290-146">Sign in to [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="e6290-147">En el menú de la izquierda, haga clic en **Examinar**, haga clic en **Clústeres de HDInsight** y haga clic en un clúster basado en Windows que desea que tenga acceso a los registros de aplicación de YARN.</span><span class="sxs-lookup"><span data-stu-id="e6290-147">On the left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want to access the YARN application logs.</span></span>
3. <span data-ttu-id="e6290-148">En el menú superior, haga clic en **Panel**.</span><span class="sxs-lookup"><span data-stu-id="e6290-148">On the top menu, click **Dashboard**.</span></span> <span data-ttu-id="e6290-149">Verá una página abierta en una nueva pestaña del explorador denominada **Consola de consultas de HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="e6290-149">You will see a page opened on a new browser tab called **HDInsight Query Console**.</span></span>
4. <span data-ttu-id="e6290-150">Desde **Consola de consultas de HDInsight**, haga clic en **IU de YARN**.</span><span class="sxs-lookup"><span data-stu-id="e6290-150">From **HDInsight Query Console**, click **Yarn UI**.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/

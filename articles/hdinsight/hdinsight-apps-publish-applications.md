---
title: "Publicación de aplicaciones de HDInsight - Azure | Microsoft Docs"
description: Aprenda a crear y publicar aplicaciones de HDInsight.
services: hdinsight
documentationcenter: 
author: mumian
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 14aef891-7a37-4cf1-8f7d-ca923565c783
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/25/2017
ms.author: jgao
ms.openlocfilehash: 6aa66cac35bc317fc87003e6c3d824544c53de88
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="publish-hdinsight-applications-into-the-azure-marketplace"></a><span data-ttu-id="c95ef-103">Publicación de aplicaciones de HDInsight en Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="c95ef-103">Publish HDInsight applications into the Azure Marketplace</span></span>
<span data-ttu-id="c95ef-104">Una aplicación de HDInsight es una aplicación que los usuarios pueden instalar en un clúster de HDInsight basado en Linux.</span><span class="sxs-lookup"><span data-stu-id="c95ef-104">An HDInsight application is an application that users can install on a Linux-based HDInsight cluster.</span></span> <span data-ttu-id="c95ef-105">Estas aplicaciones puede desarrollarlas Microsoft, fabricantes de software independientes (ISV) o el propio usuario.</span><span class="sxs-lookup"><span data-stu-id="c95ef-105">These applications can be developed by Microsoft, independent software vendors (ISV) or by yourself.</span></span> <span data-ttu-id="c95ef-106">En este artículo aprenderá a publicar una aplicación de HDInsight en Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="c95ef-106">In this article, you learn how to publish an HDInsight application into the Azure Marketplace.</span></span>  <span data-ttu-id="c95ef-107">Para obtener información general acerca de cómo publicar en Azure Marketplace, consulte [Publicación de una oferta en Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="c95ef-107">For general information about publishing into the Azure Marketplace, see [publish an offer to the Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span></span>

<span data-ttu-id="c95ef-108">Las aplicaciones de HDInsight usan el modelo *Traiga su propia licencia (BYOL)* , donde el proveedor de la aplicación es el responsable de la concesión de licencias de la aplicación a los usuarios finales y Azure solo cobra a los usuarios finales los recursos que crean, como el clúster de HDInsight y sus máquinas virtuales o nodos.</span><span class="sxs-lookup"><span data-stu-id="c95ef-108">HDInsight applications use the *Bring Your Own License (BYOL)* model, where application provider is responsible for licensing the application to end-users, and end-users are only charged by Azure for the resources they create, such as the HDInsight cluster and its VMs/nodes.</span></span> <span data-ttu-id="c95ef-109">Actualmente, la facturación de la aplicación en sí no se lleva a cabo a través de Azure.</span><span class="sxs-lookup"><span data-stu-id="c95ef-109">Currently, billing for the application itself is not done through Azure.</span></span>

<span data-ttu-id="c95ef-110">Otro artículo relacionado con la aplicación de HDInsight:</span><span class="sxs-lookup"><span data-stu-id="c95ef-110">Other HDInsight application-related article:</span></span>

* <span data-ttu-id="c95ef-111">[Instalación de aplicaciones de HDInsight](hdinsight-apps-install-applications.md): aprenda a instalar una aplicación de HDInsight en sus clústeres.</span><span class="sxs-lookup"><span data-stu-id="c95ef-111">[Install HDInsight applications](hdinsight-apps-install-applications.md): Learn how to install an HDInsight application to your clusters.</span></span>
* <span data-ttu-id="c95ef-112">[Instalación de aplicaciones de HDInsight personalizadas](hdinsight-apps-install-custom-applications.md): aprenda a instalar y probar aplicaciones personalizadas de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="c95ef-112">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): Learn how to install and test custom HDInsight applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="c95ef-113">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="c95ef-113">Prerequisites</span></span>
<span data-ttu-id="c95ef-114">Para enviar una aplicación personalizada a Marketplace, es preciso haberla creado y probado.</span><span class="sxs-lookup"><span data-stu-id="c95ef-114">To submit your custom application to the marketplace, you must have created and tested your custom application.</span></span> <span data-ttu-id="c95ef-115">Consulte los artículos siguientes:</span><span class="sxs-lookup"><span data-stu-id="c95ef-115">See the following articles:</span></span>

* <span data-ttu-id="c95ef-116">[Instalación de aplicaciones de HDInsight personalizadas](hdinsight-apps-install-custom-applications.md): aprenda a instalar y probar aplicaciones personalizadas de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="c95ef-116">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): Learn how to install and test custom HDInsight applications.</span></span>

<span data-ttu-id="c95ef-117">También es preciso haber registrado una cuenta de desarrollador.</span><span class="sxs-lookup"><span data-stu-id="c95ef-117">You must also have registered your developer account.</span></span> <span data-ttu-id="c95ef-118">Consulte [Publicación de una oferta en Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md) y [Crear una cuenta de desarrollador de Microsoft](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span><span class="sxs-lookup"><span data-stu-id="c95ef-118">See [publish an offer to the Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md) and [Create a Microsoft Developer account](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span></span>

## <a name="define-application"></a><span data-ttu-id="c95ef-119">Definición de la aplicación</span><span class="sxs-lookup"><span data-stu-id="c95ef-119">Define application</span></span>
<span data-ttu-id="c95ef-120">La publicación de aplicaciones en Azure Marketplace conlleva dos pasos.</span><span class="sxs-lookup"><span data-stu-id="c95ef-120">There are two steps involved for publishing applications to the Azure Marketplace.</span></span>  <span data-ttu-id="c95ef-121">En primer lugar, es preciso definir un archivo **createUiDef.json** para indicar con que clústeres es compatible la aplicación y, después, publicar la plantilla desde Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="c95ef-121">First you define a **createUiDef.json** file to indicate which clusters your application is compatible with; and then you publish the template from the Azure portal.</span></span> <span data-ttu-id="c95ef-122">La siguiente sección es un archivo createUiDef.json de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c95ef-122">The following section is a sample createUiDef.json file.</span></span>

    {
        "handler": "Microsoft.HDInsight",
        "version": "0.0.1-preview",
        "clusterFilters": {
            "types": ["Hadoop", "HBase", "Storm", "Spark"],
            "tiers": ["Standard", "Premium"],
            "versions": ["3.4"]
        }
    }


| <span data-ttu-id="c95ef-123">Campo</span><span class="sxs-lookup"><span data-stu-id="c95ef-123">Field</span></span> | <span data-ttu-id="c95ef-124">Description</span><span class="sxs-lookup"><span data-stu-id="c95ef-124">Description</span></span> | <span data-ttu-id="c95ef-125">Valores posibles</span><span class="sxs-lookup"><span data-stu-id="c95ef-125">Possible values</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c95ef-126">types</span><span class="sxs-lookup"><span data-stu-id="c95ef-126">types</span></span> |<span data-ttu-id="c95ef-127">Los tipos de clúster con los que es compatible la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c95ef-127">The cluster types that the application is compatible with.</span></span> |<span data-ttu-id="c95ef-128">Hadoop, HBase, Storm y Spark (o cualquier combinación de éstos)</span><span class="sxs-lookup"><span data-stu-id="c95ef-128">Hadoop, HBase, Storm, Spark, (or any combination of these)</span></span> |
| <span data-ttu-id="c95ef-129">tiers</span><span class="sxs-lookup"><span data-stu-id="c95ef-129">tiers</span></span> |<span data-ttu-id="c95ef-130">Los niveles de clúster con los que es compatible la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c95ef-130">The cluster tiers that the application is compatible with.</span></span> |<span data-ttu-id="c95ef-131">Standard, Premium (o ambos)</span><span class="sxs-lookup"><span data-stu-id="c95ef-131">Standard, Premium, (or both)</span></span> |
| <span data-ttu-id="c95ef-132">versions</span><span class="sxs-lookup"><span data-stu-id="c95ef-132">versions</span></span> |<span data-ttu-id="c95ef-133">Los tipos de clúster de HDInsight con los que es compatible la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c95ef-133">The HDInsight cluster types that the application is compatible with.</span></span> |<span data-ttu-id="c95ef-134">3.4</span><span class="sxs-lookup"><span data-stu-id="c95ef-134">3.4</span></span> |

## <a name="application-install-script"></a><span data-ttu-id="c95ef-135">Script de instalación de aplicación</span><span class="sxs-lookup"><span data-stu-id="c95ef-135">Application install script</span></span>
<span data-ttu-id="c95ef-136">Siempre que se instala una aplicación en un clúster (uno ya existente o uno nuevo), se crea un nodo perimetral y el script de instalación de aplicación se ejecuta en él.</span><span class="sxs-lookup"><span data-stu-id="c95ef-136">Whenever an application is installed on a cluster (either an existing one or a new one), an edge node is created and the application install script is run on it.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="c95ef-137">El nombre de los nombres de script de instalación de aplicación debe ser único para un clúster determinado y debe tener el formato siguiente.</span><span class="sxs-lookup"><span data-stu-id="c95ef-137">The name of the application install script names must be unique for a particular cluster with the following format.</span></span>
  > 
  > <span data-ttu-id="c95ef-138">name": "[concat('hue-install-v0','-' ,uniquestring(‘applicationName’)]"</span><span class="sxs-lookup"><span data-stu-id="c95ef-138">name": "[concat('hue-install-v0','-' ,uniquestring(‘applicationName’)]"</span></span>
  > 
  > <span data-ttu-id="c95ef-139">Tenga en cuenta que el nombre del script consta de tres partes:</span><span class="sxs-lookup"><span data-stu-id="c95ef-139">Note there are three parts to the script name:</span></span>
  > 
  > 1. <span data-ttu-id="c95ef-140">El prefijo del nombre del script, que incluirá el nombre de la aplicación o un nombre relevante para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c95ef-140">A script name prefix, which shall include either the application name or a name relevant to the application.</span></span>
  > 2. <span data-ttu-id="c95ef-141">Un signo "-", para mejorar la legibilidad.</span><span class="sxs-lookup"><span data-stu-id="c95ef-141">A "-" for readability.</span></span>
  > 3. <span data-ttu-id="c95ef-142">Una función de cadena única con el nombre de la aplicación como parámetro.</span><span class="sxs-lookup"><span data-stu-id="c95ef-142">A unique string function with the application name as the parameter.</span></span>
  > 
  > <span data-ttu-id="c95ef-143">El ejemplo anterior se acaba convirtiendo en: hue-install-v0-4wkahss55hlas en la lista de acciones de script persistentes.</span><span class="sxs-lookup"><span data-stu-id="c95ef-143">An example is the above ends up becoming: hue-install-v0-4wkahss55hlas in the persisted script action list.</span></span> <span data-ttu-id="c95ef-144">Para ver una carga de JSON de ejemplo, diríjase a [https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json](https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="c95ef-144">For a sample JSON payload, see [https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json](https://raw.githubusercontent.com/hdinsight/Iaas-Applications/master/Hue/azuredeploy.json).</span></span>
  > 
<span data-ttu-id="c95ef-145">El script de instalación debe tener las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="c95ef-145">The installation script must have the following characteristics:</span></span>
1. <span data-ttu-id="c95ef-146">Asegúrese de que el script sea idempotente.</span><span class="sxs-lookup"><span data-stu-id="c95ef-146">Ensure that the script is idempotent.</span></span> <span data-ttu-id="c95ef-147">Las distintas llamadas al script deben producir el mismo resultado.</span><span class="sxs-lookup"><span data-stu-id="c95ef-147">Multiple calls to the script should produce the same result.</span></span>
2. <span data-ttu-id="c95ef-148">El script debe tener las versiones correctas.</span><span class="sxs-lookup"><span data-stu-id="c95ef-148">The script should be properly versioned.</span></span> <span data-ttu-id="c95ef-149">Use otra ubicación para el script cuando esté actualizando o probando cambios para que los clientes que estén intentando instalar la aplicación no se vean afectados.</span><span class="sxs-lookup"><span data-stu-id="c95ef-149">Use a different location for the script when you are upgrading or testing out changes so that customers that are trying to install the application are not affected.</span></span> 
3. <span data-ttu-id="c95ef-150">Agregue un registro adecuado a los scripts en cada momento.</span><span class="sxs-lookup"><span data-stu-id="c95ef-150">Add adequate logging to the scripts at each point.</span></span> <span data-ttu-id="c95ef-151">Normalmente los registros de script son la única manera de depurar problemas de instalación de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="c95ef-151">Usually the script logs are the only way to debug application installation issues.</span></span>
4. <span data-ttu-id="c95ef-152">Asegúrese de que las llamadas a servicios o recursos externos tengan reintentos adecuados para que la instalación no se vea afectada por problemas de red transitorios.</span><span class="sxs-lookup"><span data-stu-id="c95ef-152">Ensure that calls to external services or resources have adequate retries so that the installation is not affected by transient network issues.</span></span>
5. <span data-ttu-id="c95ef-153">Si el script inicia servicios en los nodos, asegúrese de que los servicios se supervisen y configuren para iniciarse automáticamente en caso de reinicio del nodo.</span><span class="sxs-lookup"><span data-stu-id="c95ef-153">If your script is starting services on the nodes, ensure that the services are monitored and configured to start automatically in case of node reboots.</span></span>

## <a name="package-application"></a><span data-ttu-id="c95ef-154">Empaquetado de aplicación</span><span class="sxs-lookup"><span data-stu-id="c95ef-154">Package application</span></span>
<span data-ttu-id="c95ef-155">Cree un archivo zip que contenga todos los archivos requeridos para instalar aplicaciones de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="c95ef-155">Create a zip file that contains all required files for installing your HDInsight applications.</span></span> <span data-ttu-id="c95ef-156">Necesitará dicho archivo zip en [Publicación de la aplicación](#publish-application).</span><span class="sxs-lookup"><span data-stu-id="c95ef-156">You need the zip file in [Publish application](#publish-application).</span></span>

* <span data-ttu-id="c95ef-157">[createUiDefinition.json](#define-application).</span><span class="sxs-lookup"><span data-stu-id="c95ef-157">[createUiDefinition.json](#define-application).</span></span>
* <span data-ttu-id="c95ef-158">mainTemplate.json.</span><span class="sxs-lookup"><span data-stu-id="c95ef-158">mainTemplate.json.</span></span> <span data-ttu-id="c95ef-159">En [Instalación de aplicaciones de HDInsight personalizadas](hdinsight-apps-install-custom-applications.md), puede encontrar un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c95ef-159">See a sample at [Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md).</span></span>
* <span data-ttu-id="c95ef-160">Todos los scripts requeridos.</span><span class="sxs-lookup"><span data-stu-id="c95ef-160">All required scripts.</span></span>

> [!NOTE]
> <span data-ttu-id="c95ef-161">Los archivos de aplicación (incluidos los archivos de aplicación web, en caso de que haya) se pueden ubicar en cualquier punto de conexión con acceso público.</span><span class="sxs-lookup"><span data-stu-id="c95ef-161">The application files (including web application files if there is any) can be located on any publicly accessible endpoint.</span></span>
> 

## <a name="publish-application"></a><span data-ttu-id="c95ef-162">Publicación de la aplicación</span><span class="sxs-lookup"><span data-stu-id="c95ef-162">Publish application</span></span>
<span data-ttu-id="c95ef-163">Para publicar una aplicación de HDInsight, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="c95ef-163">Follow the following steps to publish an HDInsight application:</span></span>

1. <span data-ttu-id="c95ef-164">Inicie sesión en el [Portal de publicación de Azure](https://publish.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="c95ef-164">Sign on to the [Azure Publishing portal](https://publish.windowsazure.com/).</span></span>
2. <span data-ttu-id="c95ef-165">Haga clic en **Plantillas de solución** para crear una plantilla de solución.</span><span class="sxs-lookup"><span data-stu-id="c95ef-165">Click **Solution templates** from the left to create a new solution template.</span></span>
3. <span data-ttu-id="c95ef-166">Escriba un título y haga clic en **Create a new solution template** (Crear una plantilla de solución).</span><span class="sxs-lookup"><span data-stu-id="c95ef-166">Enter a title, and then click **Create a new solution template**.</span></span>
4. <span data-ttu-id="c95ef-167">Haga clic en **Create Dev Center account and join the Azure program** (Crear cuenta del Centro de desarrollo y unirse al programa de Azure) para registrar una compañía, en caso de que no lo haya hecho.</span><span class="sxs-lookup"><span data-stu-id="c95ef-167">Click **Create Dev Center account and join the Azure program** to register your company if you haven't done so.</span></span>  <span data-ttu-id="c95ef-168">Consulte [Crear una cuenta de desarrollador de Microsoft](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span><span class="sxs-lookup"><span data-stu-id="c95ef-168">See [Create a Microsoft Developer account](../marketplace-publishing/marketplace-publishing-accounts-creation-registration.md).</span></span>
5. <span data-ttu-id="c95ef-169">Haga clic en **Define some Topologies to get Started**(Definir topologías para empezar).</span><span class="sxs-lookup"><span data-stu-id="c95ef-169">Click **Define some Topologies to get Started**.</span></span> <span data-ttu-id="c95ef-170">Una plantilla de solución es una "matriz" para todas sus topologías.</span><span class="sxs-lookup"><span data-stu-id="c95ef-170">A solution template is a "parent" to all its topologies.</span></span> <span data-ttu-id="c95ef-171">Puede definir varias topologías en una oferta o plantilla de solución.</span><span class="sxs-lookup"><span data-stu-id="c95ef-171">You can define multiple topologies in one offer/solution template.</span></span> <span data-ttu-id="c95ef-172">Cuando se inserta una oferta en un entorno de ensayo, se inserta con todas sus topologías.</span><span class="sxs-lookup"><span data-stu-id="c95ef-172">When an offer is pushed to staging, it is pushed with all its topologies.</span></span> 
6. <span data-ttu-id="c95ef-173">Especifique el nombre de una topología y haga clic en el signo más.</span><span class="sxs-lookup"><span data-stu-id="c95ef-173">Enter a topology name, and then click the plus sign.</span></span>
7. <span data-ttu-id="c95ef-174">Especifique una nueva versión y haga clic en el signo más.</span><span class="sxs-lookup"><span data-stu-id="c95ef-174">Enter a new version, and then click the Plus sign.</span></span>
8. <span data-ttu-id="c95ef-175">Cargue el archivo zip preparado en [Empaquetado de aplicación](#package-application).</span><span class="sxs-lookup"><span data-stu-id="c95ef-175">Upload the zip file prepared in [Package application](#package-application).</span></span>  
9. <span data-ttu-id="c95ef-176">Haga clic en **Request Certification**(Solicitar certificado).</span><span class="sxs-lookup"><span data-stu-id="c95ef-176">Click **Request Certification**.</span></span> <span data-ttu-id="c95ef-177">El equipo de certificación de Microsoft revisará los archivos y certificará la topología.</span><span class="sxs-lookup"><span data-stu-id="c95ef-177">The Microsoft certification team will review the files and certify the topology.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c95ef-178">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="c95ef-178">Next steps</span></span>
* <span data-ttu-id="c95ef-179">[Instalación de aplicaciones de HDInsight](hdinsight-apps-install-applications.md): aprenda a instalar una aplicación de HDInsight en sus clústeres.</span><span class="sxs-lookup"><span data-stu-id="c95ef-179">[Install HDInsight applications](hdinsight-apps-install-applications.md): Learn how to install an HDInsight application to your clusters.</span></span>
* <span data-ttu-id="c95ef-180">[Instalación de aplicaciones de HDInsight personalizadas](hdinsight-apps-install-custom-applications.md): aprenda a implementar en HDInsight una aplicación de HDInsight no publicada.</span><span class="sxs-lookup"><span data-stu-id="c95ef-180">[Install custom HDInsight applications](hdinsight-apps-install-custom-applications.md): learn how to deploy an unpublished HDInsight application to HDInsight.</span></span>
* <span data-ttu-id="c95ef-181">[Personalización de clústeres de HDInsight mediante la acción de scripts (Linux)](hdinsight-hadoop-customize-cluster-linux.md): aprenda a usar acciones de script para instalar otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="c95ef-181">[Customize Linux-based HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster-linux.md): learn how to use Script Action to install additional applications.</span></span>
* <span data-ttu-id="c95ef-182">[Creación de clústeres de Hadoop basados en Linux en HDInsight con plantillas de Azure Resource Manager](hdinsight-hadoop-create-linux-clusters-arm-templates.md): aprenda a llamar a plantillas de Resource Manager para crear clústeres de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="c95ef-182">[Create Linux-based Hadoop clusters in HDInsight using Azure Resource Manager templates](hdinsight-hadoop-create-linux-clusters-arm-templates.md): learn how to call Resource Manager templates to create HDInsight clusters.</span></span>
* <span data-ttu-id="c95ef-183">[Use empty edge nodes in HDInsight](hdinsight-apps-use-edge-node.md)(Utilización de nodos perimetrales vacíos en HDInsight): aprenda a usar un nodo perimetral vacío para acceder a los clústeres de HDInsight, probar aplicaciones de este y hospedarlas.</span><span class="sxs-lookup"><span data-stu-id="c95ef-183">[Use empty edge nodes in HDInsight](hdinsight-apps-use-edge-node.md): learn how to use an empty edge node for accessing HDInsight cluster, testing HDInsight applications, and hosting HDInsight applications.</span></span>


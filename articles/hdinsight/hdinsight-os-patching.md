---
title: "Configuración de la programación de aplicación de revisiones de SO para clústeres de HDInsight basado en Linux (Azure) | Microsoft Docs"
description: "Aprenda a configurar la programación de la aplicación de revisión del SO para clústeres de HDInsight basado en Linux."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: af3c5a19ae8e2e606e4b0506f9f6dddb41192e40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="a42b9-103">Aplicación de revisión del SO para HDInsight</span><span class="sxs-lookup"><span data-stu-id="a42b9-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="a42b9-104">Como servicio de Hadoop administrado, HDInsight se preocupa de aplicar las revisiones del SO de las máquinas virtuales subyacentes que los clústeres de HDInsight usan.</span><span class="sxs-lookup"><span data-stu-id="a42b9-104">As a managed Hadoop service, HDInsight takes care of patching the OS of the underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="a42b9-105">A partir del 1 de agosto de 2016, cambiamos la directiva de aplicación de revisión del SO invitado para clústeres de HDInsight basado en Linux (versión 3.4 o superior).</span><span class="sxs-lookup"><span data-stu-id="a42b9-105">As of August 1, 2016, we have changed the guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="a42b9-106">El objetivo de la nueva directiva consiste en reducir significativamente el número de reinicios debidos a la aplicación de revisión.</span><span class="sxs-lookup"><span data-stu-id="a42b9-106">The goal of the new policy is to significantly reduce the number of reboots due to patching.</span></span> <span data-ttu-id="a42b9-107">La nueva directiva seguirá aplicando revisiones en máquinas virtuales de clústeres Linux cada lunes o jueves a partir de las 12:00 (UTC) de manera escalonada en los distintos nodos de cualquier clúster.</span><span class="sxs-lookup"><span data-stu-id="a42b9-107">The new policy will continue to patch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="a42b9-108">Sin embargo, las máquinas virtuales solo se reiniciarán, como máximo, una vez cada 30 días debido a la aplicación de revisión de SO invitado.</span><span class="sxs-lookup"><span data-stu-id="a42b9-108">However, any given VM will only reboot at most once every 30 days due to guest OS patching.</span></span> <span data-ttu-id="a42b9-109">Además, el primer reinicio de un clúster recién creado no se realizará hasta que no hayan transcurrido 30 días desde la fecha de creación del clúster.</span><span class="sxs-lookup"><span data-stu-id="a42b9-109">In addition, the first reboot for a newly created cluster will not happen sooner than 30 days from the cluster creation date.</span></span> <span data-ttu-id="a42b9-110">Las revisiones entrarán en vigor una vez que se reinicien las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="a42b9-110">Patches will be effective once the VMs are rebooted.</span></span>

## <a name="how-to-configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="a42b9-111">Configuración de la programación de la aplicación de revisión del SO para clústeres de HDInsight basado en Linux</span><span class="sxs-lookup"><span data-stu-id="a42b9-111">How to configure the OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="a42b9-112">Las máquinas virtuales de un clúster de HDInsight se deben reiniciar de forma ocasional para poder instalar las revisiones de seguridad importantes.</span><span class="sxs-lookup"><span data-stu-id="a42b9-112">The virtual machines in an HDInsight cluster need to be rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="a42b9-113">A partir del 1 de agosto de 2016, los nuevos clústeres de HDInsight basado en Linux (versión 3.4 o superior) se reinician según la programación siguiente:</span><span class="sxs-lookup"><span data-stu-id="a42b9-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using the following schedule:</span></span>

1. <span data-ttu-id="a42b9-114">Una máquina virtual en el clúster solo se puede reiniciar para las revisiones, como máximo, una vez en un período de 30 días.</span><span class="sxs-lookup"><span data-stu-id="a42b9-114">A virtual machine in the cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="a42b9-115">El reinicio se realiza a las 12:00 a.m., hora UTC.</span><span class="sxs-lookup"><span data-stu-id="a42b9-115">The reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="a42b9-116">El reinicio es un proceso escalonado entre las distintas máquinas virtuales del clúster, por lo que el clúster sigue disponible durante el proceso de reinicio.</span><span class="sxs-lookup"><span data-stu-id="a42b9-116">The reboot process is staggered across virtual machines in the cluster, so the cluster is still available during the reboot process.</span></span>
4. <span data-ttu-id="a42b9-117">El primer reinicio de un clúster recién creado no se realizará hasta que hayan transcurrido 30 días después de la fecha de creación del clúster.</span><span class="sxs-lookup"><span data-stu-id="a42b9-117">The first reboot for a newly created cluster will not happen sooner than 30 days after the cluster creation date.</span></span>

<span data-ttu-id="a42b9-118">Con la acción de script que se describe en este artículo, puede modificar la programación de aplicación de revisión del SO de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a42b9-118">Using the script action described in this article, you can modify the OS patching schedule as follows:</span></span>
1. <span data-ttu-id="a42b9-119">Habilite o deshabilite los reinicios automáticos.</span><span class="sxs-lookup"><span data-stu-id="a42b9-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="a42b9-120">Establezca la frecuencia de los reinicios (días entre reinicios).</span><span class="sxs-lookup"><span data-stu-id="a42b9-120">Set the frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="a42b9-121">Establezca el día de la semana en que se realizará un reinicio.</span><span class="sxs-lookup"><span data-stu-id="a42b9-121">Set the day of the week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="a42b9-122">Esta acción de script solo funcionará con clústeres de HDInsight basado en Linux que se hayan creado después del 1 de agosto de 2016.</span><span class="sxs-lookup"><span data-stu-id="a42b9-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="a42b9-123">Las revisiones solo entrarán en vigor una vez que se reinicien las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="a42b9-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-to-use-the-script"></a><span data-ttu-id="a42b9-124">Uso del script</span><span class="sxs-lookup"><span data-stu-id="a42b9-124">How to use the script</span></span> 

<span data-ttu-id="a42b9-125">Cuando se usa este script, se requiere la información siguiente:</span><span class="sxs-lookup"><span data-stu-id="a42b9-125">When using this script requires the following information:</span></span>
1. <span data-ttu-id="a42b9-126">La ubicación del script: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span><span class="sxs-lookup"><span data-stu-id="a42b9-126">The script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span></span>
    <span data-ttu-id="a42b9-127">HDInsight usa este URI para encontrar y ejecutar el script en todas las máquinas virtuales del clúster.</span><span class="sxs-lookup"><span data-stu-id="a42b9-127">HDInsight uses this URI to find and run the script on all the virtual machines in the cluster.</span></span>
  
2. <span data-ttu-id="a42b9-128">Los tipos de nodo de clúster al que se aplica el script: headnode, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="a42b9-128">The cluster node types that the script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="a42b9-129">Este script se debe aplicar a todos los tipos de nodo del clúster.</span><span class="sxs-lookup"><span data-stu-id="a42b9-129">This script must be applied to all node types in the cluster.</span></span> <span data-ttu-id="a42b9-130">Si no se aplica a un tipo de nodo, las máquinas virtuales de ese tipo de nodo seguirán usando la programación de aplicación de revisión anterior.</span><span class="sxs-lookup"><span data-stu-id="a42b9-130">If it is not applied to a node type, then the virtual machines for that node type will continue to use the previous patching schedule.</span></span>


3.  <span data-ttu-id="a42b9-131">Parámetro: este script acepta tres parámetros numéricos:</span><span class="sxs-lookup"><span data-stu-id="a42b9-131">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="a42b9-132">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a42b9-132">Parameter</span></span> | <span data-ttu-id="a42b9-133">Definición</span><span class="sxs-lookup"><span data-stu-id="a42b9-133">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="a42b9-134">Habilite o deshabilite los reinicios automáticos</span><span class="sxs-lookup"><span data-stu-id="a42b9-134">Enable/disable automatic reboots</span></span> |<span data-ttu-id="a42b9-135">0 o 1.</span><span class="sxs-lookup"><span data-stu-id="a42b9-135">0 or 1.</span></span> <span data-ttu-id="a42b9-136">El valor 0 deshabilita los reinicios automáticos, mientras que 1 los habilita.</span><span class="sxs-lookup"><span data-stu-id="a42b9-136">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="a42b9-137">Frecuencia</span><span class="sxs-lookup"><span data-stu-id="a42b9-137">Frequency</span></span> |<span data-ttu-id="a42b9-138">7 a 90 (incluido).</span><span class="sxs-lookup"><span data-stu-id="a42b9-138">7 to 90 (inclusive).</span></span> <span data-ttu-id="a42b9-139">La cantidad de días que se esperará antes de reiniciar las máquinas virtuales para las revisiones que requieren un reinicio.</span><span class="sxs-lookup"><span data-stu-id="a42b9-139">The number of days to wait before rebooting the virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="a42b9-140">Día de la semana</span><span class="sxs-lookup"><span data-stu-id="a42b9-140">Day of week</span></span> |<span data-ttu-id="a42b9-141">1 a 7 (incluido).</span><span class="sxs-lookup"><span data-stu-id="a42b9-141">1 to 7 (inclusive).</span></span> <span data-ttu-id="a42b9-142">El valor 1 indica que el reinicio debe realizarse un lunes y el valor 7 indica que se debe realizar el domingo. Por ejemplo, si usa los parámetros 1 60 2, los reinicios automáticos se realizan cada 60 días (como máximo) los martes.</span><span class="sxs-lookup"><span data-stu-id="a42b9-142">A value of 1 indicates the reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="a42b9-143">Persistencia</span><span class="sxs-lookup"><span data-stu-id="a42b9-143">Persistence</span></span> |<span data-ttu-id="a42b9-144">Cuando aplica una acción de script en un clúster existente, puede marcar el script como persistente.</span><span class="sxs-lookup"><span data-stu-id="a42b9-144">When applying a script action to an existing cluster, you can mark the script as persisted.</span></span> <span data-ttu-id="a42b9-145">Los scripts persistentes se aplican cuando los nuevos nodos workernode se agregan al clúster a través de operaciones de escalado.</span><span class="sxs-lookup"><span data-stu-id="a42b9-145">Persisted scripts are applied when new workernodes are added to the cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="a42b9-146">Debe marcar este script como resistente cuando lo aplique en un clúster existente.</span><span class="sxs-lookup"><span data-stu-id="a42b9-146">You must mark this script as persisted when applying to an existing cluster.</span></span> <span data-ttu-id="a42b9-147">De lo contrario, cualquier nodo nuevo que se creen a través de las operaciones de escalado usarán la programación de aplicación de revisión predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a42b9-147">Otherwise, any new nodes created through scaling      operations will use the default patching schedule.</span></span>
<span data-ttu-id="a42b9-148">Si aplica el script como parte del proceso de creación de clústeres, se marcará como persistente de forma automática.</span><span class="sxs-lookup"><span data-stu-id="a42b9-148">If you apply the script as part of the cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="a42b9-149">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a42b9-149">Next steps</span></span>

<span data-ttu-id="a42b9-150">Para los pasos específicos sobre cómo usar la acción de script, consulte las secciones siguiente en [Personalización de clústeres de HDInsight basado en Linux mediante la acción de scripts](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="a42b9-150">For specific steps on using the script action, see the following sections in the [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="a42b9-151">Uso de una acción de script durante la creación de un clúster</span><span class="sxs-lookup"><span data-stu-id="a42b9-151">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="a42b9-152">Aplicación de una acción de script a un clúster en ejecución</span><span class="sxs-lookup"><span data-stu-id="a42b9-152">Apply a script action to a running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)

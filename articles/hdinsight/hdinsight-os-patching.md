---
title: "programación de aplicación de revisiones aaaConfigure OS para clústeres de HDInsight basados en Linux - Azure | Documentos de Microsoft"
description: "Obtenga información acerca de cómo los clústeres de programación de aplicación de revisiones tooconfigure OS para HDInsight basados en Linux."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="cbf77-103">Aplicación de revisión del SO para HDInsight</span><span class="sxs-lookup"><span data-stu-id="cbf77-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="cbf77-104">Como un servicio administrado de Hadoop, HDInsight se encarga de aplicar revisiones Hola SO de hello subyacentes de las máquinas virtuales que se usan los clústeres de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="cbf77-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="cbf77-105">A partir del 1 de agosto de 2016, hemos cambiado directiva de aplicación de revisión de SO de invitado y Hola para clústeres de HDInsight basados en Linux (versión 3.4 o superior).</span><span class="sxs-lookup"><span data-stu-id="cbf77-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="cbf77-106">objetivo de Hola de nueva directiva de hello es toosignificantly reducir el número de Hola de reinicios toopatching due.</span><span class="sxs-lookup"><span data-stu-id="cbf77-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="cbf77-107">nueva directiva de Hello continuará toopatch las máquinas virtuales (VM) en Linux clústeres cada el lunes o el jueves a partir de 12.00 UTC de forma escalonada en nodos cualquier clúster determinado.</span><span class="sxs-lookup"><span data-stu-id="cbf77-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="cbf77-108">Sin embargo, cualquier máquina virtual determinada solo se reiniciará como máximo una vez cada 30 días debido a la aplicación de revisiones tooguest OS.</span><span class="sxs-lookup"><span data-stu-id="cbf77-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="cbf77-109">Además, Hola reiniciar por primera vez para un clúster recién creado no se realizará antes de 30 días a partir de la fecha de creación de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="cbf77-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="cbf77-110">Revisiones serán efectivos cuando se reinician hello las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="cbf77-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="cbf77-111">¿Cómo tooconfigure Hola programación de aplicación de revisión de SO para clústeres de HDInsight basados en Linux</span><span class="sxs-lookup"><span data-stu-id="cbf77-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="cbf77-112">máquinas virtuales de Hello en un clúster de HDInsight necesita toobe reinicia ocasionalmente para que se pueden instalar revisiones de seguridad importantes.</span><span class="sxs-lookup"><span data-stu-id="cbf77-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="cbf77-113">A partir del 1 de agosto de 2016, nuevos clústeres de HDInsight basados en Linux (versión 3.4 o superior,) se reinician con hello siguiente programación:</span><span class="sxs-lookup"><span data-stu-id="cbf77-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="cbf77-114">Una máquina virtual en clúster de hello puede reiniciar sólo para revisiones a lo sumo, una vez en un período de 30 días.</span><span class="sxs-lookup"><span data-stu-id="cbf77-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="cbf77-115">Hola reinicie inicial 12.00 UTC.</span><span class="sxs-lookup"><span data-stu-id="cbf77-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="cbf77-116">proceso de reinicio de Hola se escalona a lo largo de máquinas virtuales en clúster de hello, por lo que el clúster de hello sigue estando disponible durante el proceso de reinicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="cbf77-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="cbf77-117">Hola reiniciar por primera vez para un clúster recién creado no se realizará antes de 30 días después de la fecha de creación de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="cbf77-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="cbf77-118">Con la acción de secuencia de comandos de Hola que se describe en este artículo, puede modificar programación de aplicación de revisiones de hello OS como sigue:</span><span class="sxs-lookup"><span data-stu-id="cbf77-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="cbf77-119">Habilite o deshabilite los reinicios automáticos.</span><span class="sxs-lookup"><span data-stu-id="cbf77-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="cbf77-120">Frecuencia de Hola de conjunto de reinicia (días entre reinicios)</span><span class="sxs-lookup"><span data-stu-id="cbf77-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="cbf77-121">Establezca Hola día de semana de hello cuando se produce un reinicio</span><span class="sxs-lookup"><span data-stu-id="cbf77-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="cbf77-122">Esta acción de script solo funcionará con clústeres de HDInsight basado en Linux que se hayan creado después del 1 de agosto de 2016.</span><span class="sxs-lookup"><span data-stu-id="cbf77-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="cbf77-123">Las revisiones solo entrarán en vigor una vez que se reinicien las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="cbf77-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="cbf77-124">¿Cómo toouse hello secuencia de comandos</span><span class="sxs-lookup"><span data-stu-id="cbf77-124">How toouse hello script</span></span> 

<span data-ttu-id="cbf77-125">Cuando requiera Hola siguiendo la información mediante este script:</span><span class="sxs-lookup"><span data-stu-id="cbf77-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="cbf77-126">ubicación del script de Hola: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight utiliza esta toofind URI y ejecuta script de Hola en todas las máquinas virtuales de hello en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="cbf77-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="cbf77-127">Hola tipos de nodos de clúster que se aplica el script de Hola a: nodo principal, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="cbf77-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="cbf77-128">Esta secuencia de comandos debe ser tipos de nodo de tooall aplicados en el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="cbf77-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="cbf77-129">Si no es de tipo de nodo tooa aplicado y, a continuación, Hola virtual máquinas para ese tipo de nodo continuará toouse Hola revisiones la programación anterior.</span><span class="sxs-lookup"><span data-stu-id="cbf77-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="cbf77-130">Parámetro: este script acepta tres parámetros numéricos:</span><span class="sxs-lookup"><span data-stu-id="cbf77-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="cbf77-131">Parámetro</span><span class="sxs-lookup"><span data-stu-id="cbf77-131">Parameter</span></span> | <span data-ttu-id="cbf77-132">Definición</span><span class="sxs-lookup"><span data-stu-id="cbf77-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="cbf77-133">Habilite o deshabilite los reinicios automáticos</span><span class="sxs-lookup"><span data-stu-id="cbf77-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="cbf77-134">0 o 1.</span><span class="sxs-lookup"><span data-stu-id="cbf77-134">0 or 1.</span></span> <span data-ttu-id="cbf77-135">El valor 0 deshabilita los reinicios automáticos, mientras que 1 los habilita.</span><span class="sxs-lookup"><span data-stu-id="cbf77-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="cbf77-136">Frecuencia</span><span class="sxs-lookup"><span data-stu-id="cbf77-136">Frequency</span></span> |<span data-ttu-id="cbf77-137">too90 7 (inclusive).</span><span class="sxs-lookup"><span data-stu-id="cbf77-137">7 too90 (inclusive).</span></span> <span data-ttu-id="cbf77-138">número de Hola de toowait días antes de reiniciar las máquinas virtuales de Hola para las revisiones que requieren un reinicio.</span><span class="sxs-lookup"><span data-stu-id="cbf77-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="cbf77-139">Día de la semana</span><span class="sxs-lookup"><span data-stu-id="cbf77-139">Day of week</span></span> |<span data-ttu-id="cbf77-140">1 too7 (inclusive).</span><span class="sxs-lookup"><span data-stu-id="cbf77-140">1 too7 (inclusive).</span></span> <span data-ttu-id="cbf77-141">Un valor de 1 indica el reinicio de hello debe aparecer un lunes y 7 indica un ejemplo de Sunday.For, con parámetros de 1 60 2 resultados en automático se reinicia cada 60 días (como máximo) del martes.</span><span class="sxs-lookup"><span data-stu-id="cbf77-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="cbf77-142">Persistencia</span><span class="sxs-lookup"><span data-stu-id="cbf77-142">Persistence</span></span> |<span data-ttu-id="cbf77-143">Al aplicar un clúster existente de script acción tooan, puede marcar el script de Hola conservada.</span><span class="sxs-lookup"><span data-stu-id="cbf77-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="cbf77-144">Las secuencias de comandos persistentes se aplican cuando workernodes nuevos se agregan toohello clúster a través de las operaciones de ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="cbf77-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="cbf77-145">Debe marcar esta secuencia de comandos conservada al aplicar tooan de clúster existente.</span><span class="sxs-lookup"><span data-stu-id="cbf77-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="cbf77-146">En caso contrario, los nuevos nodos creados a través de las operaciones de ajuste de escala usará predeterminado de hello programación de aplicación de revisiones.</span><span class="sxs-lookup"><span data-stu-id="cbf77-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="cbf77-147">Si aplica la secuencia de comandos de Hola como parte del proceso de creación de clúster de Hola, se mantiene automáticamente.</span><span class="sxs-lookup"><span data-stu-id="cbf77-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="cbf77-148">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="cbf77-148">Next steps</span></span>

<span data-ttu-id="cbf77-149">Para pasos específicos sobre el uso de la acción de secuencia de comandos de hello, vea Hola siguientes secciones en hello [clústeres de HDInsight basados en Linuz personalizar mediante la acción de secuencia de comandos](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="cbf77-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="cbf77-150">Uso de una acción de script durante la creación de un clúster</span><span class="sxs-lookup"><span data-stu-id="cbf77-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="cbf77-151">Aplicar un tooa de acción de secuencia de comandos ejecutando el clúster</span><span class="sxs-lookup"><span data-stu-id="cbf77-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)

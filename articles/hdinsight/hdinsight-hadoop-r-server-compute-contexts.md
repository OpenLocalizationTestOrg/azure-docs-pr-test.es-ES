---
title: 'Opciones de contexto de proceso para R Server en HDInsight: Azure | Microsoft Docs'
description: Conozca las distintas opciones de contexto de proceso disponibles para los usuarios con R Server en HDInsight.
services: HDInsight
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 0deb0b1c-4094-459b-94fc-ec9b774c1f8a
ms.service: HDInsight
ms.custom: hdinsightactive
ms.devlang: R
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 06/19/2017
ms.author: bradsev
ms.openlocfilehash: 47f4441612be4f363ba82cc22b09786a6f3bfdc3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="compute-context-options-for-r-server-on-hdinsight"></a><span data-ttu-id="87f74-103">Opciones de contexto de proceso para R Server en HDInsight (versión preliminar)</span><span class="sxs-lookup"><span data-stu-id="87f74-103">Compute context options for R Server on HDInsight</span></span>

<span data-ttu-id="87f74-104">Microsoft R Server en Azure HDInsight controla cómo se ejecutan las llamadas estableciendo el contexto de proceso.</span><span class="sxs-lookup"><span data-stu-id="87f74-104">Microsoft R Server on Azure HDInsight controls how calls are executed by setting the compute context.</span></span> <span data-ttu-id="87f74-105">En este artículo se describen las opciones que están disponibles para especificar si la ejecución se realiza o no en paralelo y, en caso afirmativo, cómo se lleva a cabo a través del nodo perimetral o del clúster de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="87f74-105">This article outlines the options that are available to specify whether and how execution is parallelized across cores of the edge node or HDInsight cluster.</span></span>

<span data-ttu-id="87f74-106">El nodo perimetral de un clúster proporciona un lugar conveniente para conectarse al clúster y ejecutar los scripts de R.</span><span class="sxs-lookup"><span data-stu-id="87f74-106">The edge node of a cluster provides a convenient place to connect to the cluster and to run your R scripts.</span></span> <span data-ttu-id="87f74-107">Con un nodo perimetral, tiene la opción de ejecutar las funciones distribuidas paralelizadas de ScaleR en los diferentes núcleos del servidor de nodo perimetral.</span><span class="sxs-lookup"><span data-stu-id="87f74-107">With an edge node, you have the option of running the parallelized distributed functions of ScaleR across the cores of the edge node server.</span></span> <span data-ttu-id="87f74-108">También puede ejecutarlas en los nodos del clúster utilizando los contextos de proceso de Spark o Hadoop MapReduce de ScaleR.</span><span class="sxs-lookup"><span data-stu-id="87f74-108">You can also run them across the nodes of the cluster by using ScaleR’s Hadoop Map Reduce or Spark compute contexts.</span></span>

## <a name="microsoft-r-server-on-azure-hdinsight"></a><span data-ttu-id="87f74-109">Microsoft R Server en Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="87f74-109">Microsoft R Server on Azure HDInsight</span></span>
<span data-ttu-id="87f74-110">[Microsoft R Server en Azure HDInsight](hdinsight-hadoop-r-server-overview.md) proporciona las últimas funcionalidades para análisis basado en R.</span><span class="sxs-lookup"><span data-stu-id="87f74-110">[Microsoft R Server on Azure HDInsight](hdinsight-hadoop-r-server-overview.md) provides the latest capabilities for R-based analytics.</span></span> <span data-ttu-id="87f74-111">Puede usar datos almacenados en un contenedor HDFS en su cuenta de almacenamiento de [Azure Blob](../storage/common/storage-introduction.md "Azure Blob Storage"), un almacén de Data Lake Store o el sistema de archivos local de Linux.</span><span class="sxs-lookup"><span data-stu-id="87f74-111">It can use data that is stored in an HDFS container in your [Azure Blob](../storage/common/storage-introduction.md "Azure Blob storage") storage account, a Data Lake store, or the local Linux file system.</span></span> <span data-ttu-id="87f74-112">Como R Server se basa en el lenguaje R de código abierto integrado, las aplicaciones basadas en R que se crean aplican cualquiera de los más de 8000 paquetes de R de código abierto.</span><span class="sxs-lookup"><span data-stu-id="87f74-112">Since R Server is built on open source R, the R-based applications you build can apply any of the 8000+ open source R packages.</span></span> <span data-ttu-id="87f74-113">También pueden utilizar las rutinas de [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), un paquete de análisis de macrodatos de Microsoft que se incluye con R Server.</span><span class="sxs-lookup"><span data-stu-id="87f74-113">They can also use the routines in [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), Microsoft’s big data analytics package that is included with R Server.</span></span>  

## <a name="compute-contexts-for-an-edge-node"></a><span data-ttu-id="87f74-114">Contextos de proceso de un nodo perimetral</span><span class="sxs-lookup"><span data-stu-id="87f74-114">Compute contexts for an edge node</span></span>
<span data-ttu-id="87f74-115">En general, el script de R que se ejecuta en el nodo perimetral de R Server lo hace dentro del intérprete de R de ese nodo.</span><span class="sxs-lookup"><span data-stu-id="87f74-115">In general, an R script that's run in R Server on the edge node runs within the R interpreter on that node.</span></span> <span data-ttu-id="87f74-116">Las excepciones son esos pasos que llaman a una función ScaleR.</span><span class="sxs-lookup"><span data-stu-id="87f74-116">The exceptions are those steps that call a ScaleR function.</span></span> <span data-ttu-id="87f74-117">Las llamadas a ScaleR se ejecutan en un entorno de proceso determinado por la manera en que establece el contexto de proceso de ScaleR.</span><span class="sxs-lookup"><span data-stu-id="87f74-117">The ScaleR calls run in a compute environment that is determined by how you set the ScaleR compute context.</span></span>  <span data-ttu-id="87f74-118">Al ejecutar el script de R desde un nodo perimetral, los posibles valores del contexto de proceso son:</span><span class="sxs-lookup"><span data-stu-id="87f74-118">When you run your R script from an edge node, the possible values of the compute context are:</span></span>

- <span data-ttu-id="87f74-119">secuencial local (*‘local’*)</span><span class="sxs-lookup"><span data-stu-id="87f74-119">local sequential (*‘local’*)</span></span>
- <span data-ttu-id="87f74-120">paralelo local (*‘localpar’*)</span><span class="sxs-lookup"><span data-stu-id="87f74-120">local parallel (*‘localpar’*)</span></span>
- <span data-ttu-id="87f74-121">MapReduce</span><span class="sxs-lookup"><span data-stu-id="87f74-121">Map Reduce</span></span>
- <span data-ttu-id="87f74-122">Spark</span><span class="sxs-lookup"><span data-stu-id="87f74-122">Spark</span></span>

<span data-ttu-id="87f74-123">Las opciones *‘local’* y *‘localpar’* solo difieren en cómo se ejecutan las llamadas de **rxExec**.</span><span class="sxs-lookup"><span data-stu-id="87f74-123">The *‘local’* and *‘localpar’* options differ only in how **rxExec** calls are executed.</span></span> <span data-ttu-id="87f74-124">Las dos ejecutan otras llamadas a función de rx de manera paralela en todos los núcleos disponibles, a menos que se especifique lo contrario mediante el uso de la opción **numCoresToUse** de ScaleR; por ejemplo, `rxOptions(numCoresToUse=6)`.</span><span class="sxs-lookup"><span data-stu-id="87f74-124">They both execute other rx-function calls in a parallel manner across all available cores unless specified otherwise through use of the ScaleR **numCoresToUse** option, for example `rxOptions(numCoresToUse=6)`.</span></span> <span data-ttu-id="87f74-125">Las opciones de ejecución en paralelo ofrecen un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="87f74-125">Parallel execution options offer optimal performance.</span></span>

<span data-ttu-id="87f74-126">En la tabla siguiente se resumen las distintas opciones de contexto de proceso para establecer cómo se ejecutan las llamadas:</span><span class="sxs-lookup"><span data-stu-id="87f74-126">The following table summarizes the various compute context options to set how calls are executed:</span></span>

| <span data-ttu-id="87f74-127">Contexto de proceso</span><span class="sxs-lookup"><span data-stu-id="87f74-127">Compute context</span></span>  | <span data-ttu-id="87f74-128">Cómo definir</span><span class="sxs-lookup"><span data-stu-id="87f74-128">How to set</span></span>                      | <span data-ttu-id="87f74-129">Contexto de ejecución</span><span class="sxs-lookup"><span data-stu-id="87f74-129">Execution context</span></span>                        |
| ---------------- | ------------------------------- | ---------------------------------------- |
| <span data-ttu-id="87f74-130">Secuencial local</span><span class="sxs-lookup"><span data-stu-id="87f74-130">Local sequential</span></span> | <span data-ttu-id="87f74-131">rxSetComputeContext(‘local’)</span><span class="sxs-lookup"><span data-stu-id="87f74-131">rxSetComputeContext(‘local’)</span></span>    | <span data-ttu-id="87f74-132">Ejecución en paralelo en los núcleos del servidor de nodo perimetral, excepto las llamadas de rxExec, que se ejecutan en serie</span><span class="sxs-lookup"><span data-stu-id="87f74-132">Parallelized execution across the cores of the edge node server, except for rxExec calls, which are executed serially</span></span> |
| <span data-ttu-id="87f74-133">Paralelo local</span><span class="sxs-lookup"><span data-stu-id="87f74-133">Local parallel</span></span>   | <span data-ttu-id="87f74-134">rxSetComputeContext(‘localpar’)</span><span class="sxs-lookup"><span data-stu-id="87f74-134">rxSetComputeContext(‘localpar’)</span></span> | <span data-ttu-id="87f74-135">Ejecución paralelizada en los núcleos del servidor de nodo perimetral</span><span class="sxs-lookup"><span data-stu-id="87f74-135">Parallelized execution across the cores of the edge node server</span></span> |
| <span data-ttu-id="87f74-136">Spark</span><span class="sxs-lookup"><span data-stu-id="87f74-136">Spark</span></span>            | <span data-ttu-id="87f74-137">RxSpark()</span><span class="sxs-lookup"><span data-stu-id="87f74-137">RxSpark()</span></span>                       | <span data-ttu-id="87f74-138">Ejecución distribuida paralelizada vía Spark en los nodos del clúster de HDI</span><span class="sxs-lookup"><span data-stu-id="87f74-138">Parallelized distributed execution via Spark across the nodes of the HDI cluster</span></span> |
| <span data-ttu-id="87f74-139">MapReduce</span><span class="sxs-lookup"><span data-stu-id="87f74-139">Map Reduce</span></span>       | <span data-ttu-id="87f74-140">RxHadoopMR()</span><span class="sxs-lookup"><span data-stu-id="87f74-140">RxHadoopMR()</span></span>                    | <span data-ttu-id="87f74-141">Ejecución distribuida paralelizada vía MapReduce en los nodos del clúster de HDI</span><span class="sxs-lookup"><span data-stu-id="87f74-141">Parallelized distributed execution via Map Reduce across the nodes of the HDI cluster</span></span> |

## <a name="guidelines-for-deciding-on-a-compute-context"></a><span data-ttu-id="87f74-142">Directrices para decidir en un contexto de proceso</span><span class="sxs-lookup"><span data-stu-id="87f74-142">Guidelines for deciding on a compute context</span></span>

<span data-ttu-id="87f74-143">¿Cuál de las tres opciones que elija que proporcionan la ejecución en paralelo depende de la naturaleza del trabajo de análisis, el tamaño y la ubicación de los datos?</span><span class="sxs-lookup"><span data-stu-id="87f74-143">Which of the three options you choose that provide parallelized execution depends on the nature of your analytics work, the size, and the location of your data.</span></span> <span data-ttu-id="87f74-144">No hay ninguna fórmula sencilla que indique qué contexto de proceso ejecutar.</span><span class="sxs-lookup"><span data-stu-id="87f74-144">There is no simple formula that tells you which compute context to use.</span></span> <span data-ttu-id="87f74-145">Sin embargo, hay algunos principios fundamentales que pueden ayudarle a tomar la decisión correcta o, al menos, a reducir sus opciones antes de ejecutar una prueba comparativa.</span><span class="sxs-lookup"><span data-stu-id="87f74-145">There are, however, some guiding principles that can help you make the right choice, or, at least, help you narrow down your choices before you run a benchmark.</span></span> <span data-ttu-id="87f74-146">Estos principios rectores incluyen:</span><span class="sxs-lookup"><span data-stu-id="87f74-146">These guiding principles include:</span></span>

- <span data-ttu-id="87f74-147">El sistema de archivos de Linux local es más rápido que HDFS.</span><span class="sxs-lookup"><span data-stu-id="87f74-147">The local Linux file system is faster than HDFS.</span></span>
- <span data-ttu-id="87f74-148">Los análisis repetidos son más rápidos si los datos son locales y están en XDF.</span><span class="sxs-lookup"><span data-stu-id="87f74-148">Repeated analyses are faster if the data is local, and if it's in XDF.</span></span>
- <span data-ttu-id="87f74-149">Es preferible transmitir pequeñas cantidades de datos desde un origen de datos de texto.</span><span class="sxs-lookup"><span data-stu-id="87f74-149">It's preferable to stream small amounts of data from a text data source.</span></span> <span data-ttu-id="87f74-150">Si la cantidad de datos es mayor, conviértala a XDF antes del análisis.</span><span class="sxs-lookup"><span data-stu-id="87f74-150">If the amount of data is larger, convert it to XDF before analysis.</span></span>
- <span data-ttu-id="87f74-151">La sobrecarga de copiar o transmitir los datos al nodo perimetral para su análisis se convierte en algo difícil de manejar en el caso de cantidades de datos muy grandes.</span><span class="sxs-lookup"><span data-stu-id="87f74-151">The overhead of copying or streaming the data to the edge node for analysis becomes unmanageable for very large amounts of data.</span></span>
- <span data-ttu-id="87f74-152">Spark es más rápido que MapReduce para el análisis de Hadoop.</span><span class="sxs-lookup"><span data-stu-id="87f74-152">Spark is faster than Map Reduce for analysis in Hadoop.</span></span>

<span data-ttu-id="87f74-153">Con estos principios, las siguientes secciones ofrecen algunas reglas generales para seleccionar un contexto de proceso.</span><span class="sxs-lookup"><span data-stu-id="87f74-153">Given these principles, the following sections offer some general rules of thumb for selecting a compute context.</span></span>

### <a name="local"></a><span data-ttu-id="87f74-154">Local</span><span class="sxs-lookup"><span data-stu-id="87f74-154">Local</span></span>
* <span data-ttu-id="87f74-155">Si la cantidad de datos que se va a analizar es pequeña y no requiere un análisis repetido, transmítalos directamente a la rutina de análisis utilizando *'local'* o *'localpar'*.</span><span class="sxs-lookup"><span data-stu-id="87f74-155">If the amount of data to analyze is small and does not require repeated analysis, then stream it directly into the analysis routine using *'local'* or *'localpar'*.</span></span>
* <span data-ttu-id="87f74-156">Si la cantidad de datos que se va a analizar es pequeña o mediana y requiere análisis repetido, cópielos en el sistema de archivos local, impórtelos a XDF y analícelos mediante *'local'* o *'localpar'*.</span><span class="sxs-lookup"><span data-stu-id="87f74-156">If the amount of data to analyze is small or medium-sized and requires repeated analysis, then copy it to the local file system, import it to XDF, and analyze it via *'local'* or *'localpar'*.</span></span>

### <a name="hadoop-spark"></a><span data-ttu-id="87f74-157">Hadoop Spark</span><span class="sxs-lookup"><span data-stu-id="87f74-157">Hadoop Spark</span></span>
* <span data-ttu-id="87f74-158">Si la cantidad de datos que se va a analizar es grande, impórtelos a Spark DataFrame mediante **RxHiveData** o **RxParquetData**, o a XDF en HDFS (a no ser que el almacenamiento sea un problema), y analícelos mediante el contexto de proceso de Spark.</span><span class="sxs-lookup"><span data-stu-id="87f74-158">If the amount of data to analyze is large, then import it to a Spark DataFrame using **RxHiveData** or **RxParquetData**, or to XDF in HDFS (unless storage is an issue), and analyze it using the Spark compute context.</span></span>

### <a name="hadoop-map-reduce"></a><span data-ttu-id="87f74-159">Hadoop MapReduce</span><span class="sxs-lookup"><span data-stu-id="87f74-159">Hadoop Map Reduce</span></span>
* <span data-ttu-id="87f74-160">Utilice el contexto de proceso de MadReduce solo si detecta un problema insuperable con el contexto de procesos de Spark, ya que generalmente es más lento.</span><span class="sxs-lookup"><span data-stu-id="87f74-160">Use the Map Reduce compute context only if you encounter an insurmountable problem with the Spark compute context since it is generally slower.</span></span>  

## <a name="inline-help-on-rxsetcomputecontext"></a><span data-ttu-id="87f74-161">Ayuda insertada en rxSetComputeContext</span><span class="sxs-lookup"><span data-stu-id="87f74-161">Inline help on rxSetComputeContext</span></span>
<span data-ttu-id="87f74-162">Para más información sobre los contextos de proceso de ScaleR y ver algunos ejemplos, consulte la ayuda insertada en R en el método rxSetComputeContext, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="87f74-162">For more information and examples of ScaleR compute contexts, see the inline help in R on the rxSetComputeContext method, for example:</span></span>

    > ?rxSetComputeContext

<span data-ttu-id="87f74-163">También puede consultar el documento "[ScaleR Distributed Computing Guide](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)" (Guía de informática distribuida de ScaleR) que se encuentra disponible en la biblioteca [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server en MSDN").</span><span class="sxs-lookup"><span data-stu-id="87f74-163">You can also refer to the “[ScaleR Distributed Computing Guide](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)” that's available from the [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server on MSDN") library.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87f74-164">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="87f74-164">Next steps</span></span>
<span data-ttu-id="87f74-165">En este artículo ha aprendido las opciones que están disponibles para especificar si la ejecución se realiza o no en paralelo y, en caso afirmativo, cómo se lleva a cabo a través del nodo perimetral o del clúster de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="87f74-165">In this article, you learned about the options that are available to specify whether and how execution is parallelized across cores of the edge node or HDInsight cluster.</span></span> <span data-ttu-id="87f74-166">Para más información sobre cómo usar R Server con clústeres de HDInsight, consulte los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="87f74-166">To learn more about how to use R Server with HDInsight clusters, see the following topics:</span></span>

* [<span data-ttu-id="87f74-167">Información general sobre R Server en Hadoop</span><span class="sxs-lookup"><span data-stu-id="87f74-167">Overview of R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-overview.md)
* [<span data-ttu-id="87f74-168">Introducción a R Server en Hadoop</span><span class="sxs-lookup"><span data-stu-id="87f74-168">Get started with R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-get-started.md)
* [<span data-ttu-id="87f74-169">Instalación de RStudio con R Server en HDInsight (si no está instalado durante la creación del clúster)</span><span class="sxs-lookup"><span data-stu-id="87f74-169">Add RStudio Server to HDInsight (if not added during cluster creation)</span></span>](hdinsight-hadoop-r-server-install-r-studio.md)
* [<span data-ttu-id="87f74-170">Opciones de Azure Storage para R Server en HDInsight</span><span class="sxs-lookup"><span data-stu-id="87f74-170">Azure Storage options for R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-storage.md)


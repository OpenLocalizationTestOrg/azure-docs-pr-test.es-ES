---
title: "Generación y exportación de certificados para conexiones de punto a sitio: MakeCert: Azure | Microsoft Docs"
description: "Este artículo contiene pasos toocreate un certificado raíz autofirmado, exportar la clave pública de Hola y generar los certificados de cliente mediante MakeCert."
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: vpn-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/09/2017
ms.author: cherylmc
ms.openlocfilehash: 0b795ccf74f1f97fbd3de8a0dc339f9cb0b48183
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="generate-and-export-certificates-for-point-to-site-connections-using-makecert"></a><span data-ttu-id="047fb-103">Generación y exportación de certificados para conexiones de punto a sitio con MakeCert</span><span class="sxs-lookup"><span data-stu-id="047fb-103">Generate and export certificates for Point-to-Site connections using MakeCert</span></span>

<span data-ttu-id="047fb-104">Conexiones de punto a sitio usan certificados tooauthenticate.</span><span class="sxs-lookup"><span data-stu-id="047fb-104">Point-to-Site connections use certificates tooauthenticate.</span></span> <span data-ttu-id="047fb-105">Este artículo muestra cómo toocreate una firma automática el certificado de raíz y generar los certificados de cliente mediante MakeCert.</span><span class="sxs-lookup"><span data-stu-id="047fb-105">This article shows you how toocreate a self-signed root certificate and generate client certificates using MakeCert.</span></span> <span data-ttu-id="047fb-106">Si está buscando en pasos de configuración de punto a sitio, como cómo enumerar certificados raíz de tooupload, seleccione uno de los artículos de hello ' Configure Point-to-Site' de hello después de:</span><span class="sxs-lookup"><span data-stu-id="047fb-106">If you are looking for Point-to-Site configuration steps, such as how tooupload root certificates, select one of hello 'Configure Point-to-Site' articles from hello following list:</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="047fb-107">Creación de certificados autofirmados: PowerShell</span><span class="sxs-lookup"><span data-stu-id="047fb-107">Create self-signed certificates - PowerShell</span></span>](vpn-gateway-certificates-point-to-site.md)
> * [<span data-ttu-id="047fb-108">Creación de certificados autofirmados: MakeCert</span><span class="sxs-lookup"><span data-stu-id="047fb-108">Create self-signed certificates - MakeCert</span></span>](vpn-gateway-certificates-point-to-site-makecert.md)
> * [<span data-ttu-id="047fb-109">Configuración de una conexión de punto a sitio: Resource Manager: Azure Portal</span><span class="sxs-lookup"><span data-stu-id="047fb-109">Configure Point-to-Site - Resource Manager - Azure portal</span></span>](vpn-gateway-howto-point-to-site-resource-manager-portal.md)
> * [<span data-ttu-id="047fb-110">Configuración de una conexión de punto a sitio - Resource Manager - PowerShell</span><span class="sxs-lookup"><span data-stu-id="047fb-110">Configure Point-to-Site - Resource Manager - PowerShell</span></span>](vpn-gateway-howto-point-to-site-rm-ps.md)
> * [<span data-ttu-id="047fb-111">Configuración de una conexión de punto a sitio: Clásico: Azure Portal</span><span class="sxs-lookup"><span data-stu-id="047fb-111">Configure Point-to-Site - Classic - Azure portal</span></span>](vpn-gateway-howto-point-to-site-classic-azure-portal.md)
> 
> 

<span data-ttu-id="047fb-112">Aunque se recomienda usar hello [Windows PowerShell de 10 pasos](vpn-gateway-certificates-point-to-site.md) toocreate los certificados, se dan estas instrucciones de MakeCert como un método opcional.</span><span class="sxs-lookup"><span data-stu-id="047fb-112">While we recommend using hello [Windows 10 PowerShell steps](vpn-gateway-certificates-point-to-site.md) toocreate your certificates, we provide these MakeCert instructions as an optional method.</span></span> <span data-ttu-id="047fb-113">certificados de Hola que generan mediante cualquiera de estos métodos se pueden instalar en [cualquier sistema operativo de cliente admitida](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span><span class="sxs-lookup"><span data-stu-id="047fb-113">hello certificates that you generate using either method can be installed on [any supported client operating system](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span></span> <span data-ttu-id="047fb-114">Sin embargo, MakeCert tiene Hola siguiente limitación:</span><span class="sxs-lookup"><span data-stu-id="047fb-114">However, MakeCert has hello following limitation:</span></span>

* <span data-ttu-id="047fb-115">Makecert está en desuso.</span><span class="sxs-lookup"><span data-stu-id="047fb-115">MakeCert is deprecated.</span></span> <span data-ttu-id="047fb-116">Esto significa que se puede quitar esta herramienta en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="047fb-116">This means that this tool could be removed at any point.</span></span> <span data-ttu-id="047fb-117">Los certificados ya generados con MakeCert no se verán afectados si MakeCert ya no está disponible.</span><span class="sxs-lookup"><span data-stu-id="047fb-117">Any certificates that you already generated using MakeCert won't be affected when MakeCert is no longer available.</span></span> <span data-ttu-id="047fb-118">MakeCert forma solo usa toogenerate Hola certificados, no como un mecanismo de validación.</span><span class="sxs-lookup"><span data-stu-id="047fb-118">MakeCert is only used toogenerate hello certificates, not as a validating mechanism.</span></span>

## <span data-ttu-id="047fb-119"><a name="rootcert"></a>Creación de un certificado raíz autofirmado</span><span class="sxs-lookup"><span data-stu-id="047fb-119"><a name="rootcert"></a>Create a self-signed root certificate</span></span>

<span data-ttu-id="047fb-120">Hola siguientes pasos muestra cómo toocreate una firma automática de certificado mediante MakeCert.</span><span class="sxs-lookup"><span data-stu-id="047fb-120">hello following steps show you how toocreate a self-signed certificate using MakeCert.</span></span> <span data-ttu-id="047fb-121">Estos pasos no son específicos del modelo de implementación.</span><span class="sxs-lookup"><span data-stu-id="047fb-121">These steps are not deployment-model specific.</span></span> <span data-ttu-id="047fb-122">Son válidos para el Administrador de recursos y la versión clásica.</span><span class="sxs-lookup"><span data-stu-id="047fb-122">They are valid for both Resource Manager and classic.</span></span>

1. <span data-ttu-id="047fb-123">Descargue e instale [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="047fb-123">Download and install [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span></span>
2. <span data-ttu-id="047fb-124">Después de la instalación, normalmente puede encontrar utilidad makecert.exe de hello en esta ruta de acceso: ' C:\Program Files (x86) \Windows Kits\10\bin\<arch >'.</span><span class="sxs-lookup"><span data-stu-id="047fb-124">After installation, you can typically find hello makecert.exe utility under this path: 'C:\Program Files (x86)\Windows Kits\10\bin\<arch>'.</span></span> <span data-ttu-id="047fb-125">Sin embargo, es posible que estaba instalado tooanother ubicación.</span><span class="sxs-lookup"><span data-stu-id="047fb-125">Although, it's possible that it was installed tooanother location.</span></span> <span data-ttu-id="047fb-126">Abra un símbolo del sistema como administrador y navegue toohello ubicación de hello herramienta MakeCert.</span><span class="sxs-lookup"><span data-stu-id="047fb-126">Open a command prompt as administrator and navigate toohello location of hello MakeCert utility.</span></span> <span data-ttu-id="047fb-127">Puede usar Hola siguiente ejemplo, ajustar la ubicación correcta de hello:</span><span class="sxs-lookup"><span data-stu-id="047fb-127">You can use hello following example, adjusting for hello proper location:</span></span>

  ```cmd
  cd C:\Program Files (x86)\Windows Kits\10\bin\x64
  ```
3. <span data-ttu-id="047fb-128">Cree e instale un certificado en el almacén de certificados personales de hello en el equipo.</span><span class="sxs-lookup"><span data-stu-id="047fb-128">Create and install a certificate in hello Personal certificate store on your computer.</span></span> <span data-ttu-id="047fb-129">Hello en el ejemplo siguiente se crea su correspondiente *.cer* archivo cargue tooAzure al configurar P2S.</span><span class="sxs-lookup"><span data-stu-id="047fb-129">hello following example creates a corresponding *.cer* file that you upload tooAzure when configuring P2S.</span></span> <span data-ttu-id="047fb-130">Reemplace 'P2SRootCert' y 'P2SRootCert.cer' con el nombre de Hola que quiere toouse de certificado de Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-130">Replace 'P2SRootCert' and 'P2SRootCert.cer' with hello name that you want toouse for hello certificate.</span></span> <span data-ttu-id="047fb-131">Hola certificado se encuentra en los 'certificados - actual\Personal\Certificados'.</span><span class="sxs-lookup"><span data-stu-id="047fb-131">hello certificate is located in your 'Certificates - Current User\Personal\Certificates'.</span></span>

  ```cmd
  makecert -sky exchange -r -n "CN=P2SRootCert" -pe -a sha256 -len 2048 -ss My
  ```

## <span data-ttu-id="047fb-132"><a name="cer"></a>Exportar la clave pública de hello (.cer)</span><span class="sxs-lookup"><span data-stu-id="047fb-132"><a name="cer"></a>Export hello public key (.cer)</span></span>

[!INCLUDE [Export public key](../../includes/vpn-gateway-certificates-export-public-key-include.md)]

<span data-ttu-id="047fb-133">archivo de Hello exported.cer debe ser tooAzure cargado.</span><span class="sxs-lookup"><span data-stu-id="047fb-133">hello exported.cer file must be uploaded tooAzure.</span></span> <span data-ttu-id="047fb-134">Para ver las instrucciones, consulte [Configuración de una conexión de punto a sitio](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span><span class="sxs-lookup"><span data-stu-id="047fb-134">For instructions, see [Configure a Point-to-Site connection](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span></span> <span data-ttu-id="047fb-135">tooadd un certificado raíz de confianza adicionales, consulte [en esta sección](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) de artículo Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-135">tooadd an additional trusted root certificate, see [this section](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) of hello article.</span></span>

### <a name="export-hello-self-signed-certificate-and-private-key-toostore-it-optional"></a><span data-ttu-id="047fb-136">Exportar el certificado autofirmado de Hola y toostore clave privada se (opcional)</span><span class="sxs-lookup"><span data-stu-id="047fb-136">Export hello self-signed certificate and private key toostore it (optional)</span></span>

<span data-ttu-id="047fb-137">Puede que desee tooexport Hola certificado raíz autofirmado y almacenar de forma segura.</span><span class="sxs-lookup"><span data-stu-id="047fb-137">You may want tooexport hello self-signed root certificate and store it safely.</span></span> <span data-ttu-id="047fb-138">Si es necesario, más adelante puede instalarlo en otro equipo y generar más certificados de cliente o exportar otro archivo .cer.</span><span class="sxs-lookup"><span data-stu-id="047fb-138">If need be, you can later install it on another computer and generate more client certificates, or export another .cer file.</span></span> <span data-ttu-id="047fb-139">Hola tooexport certificado autofirmado de raíz como una .pfx, certificado de raíz de hello seleccione y use Hola mismos pasos tal como se describe en [exportar un certificado de cliente](#clientexport).</span><span class="sxs-lookup"><span data-stu-id="047fb-139">tooexport hello self-signed root certificate as a .pfx, select hello root certificate and use hello same steps as described in [Export a client certificate](#clientexport).</span></span>

## <a name="create-and-install-client-certificates"></a><span data-ttu-id="047fb-140">Creación e instalación de certificados de cliente</span><span class="sxs-lookup"><span data-stu-id="047fb-140">Create and install client certificates</span></span>

<span data-ttu-id="047fb-141">No instale el certificado autofirmado de hello directamente en el equipo cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-141">You don't install hello self-signed certificate directly on hello client computer.</span></span> <span data-ttu-id="047fb-142">Necesita un certificado de cliente de certificado autofirmado de hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="047fb-142">You need toogenerate a client certificate from hello self-signed certificate.</span></span> <span data-ttu-id="047fb-143">A continuación, exportar e instalar el equipo de cliente de toohello de certificado de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-143">You then export and install hello client certificate toohello client computer.</span></span> <span data-ttu-id="047fb-144">Hola pasos no es específicos del modelo de implementación.</span><span class="sxs-lookup"><span data-stu-id="047fb-144">hello following steps are not deployment-model specific.</span></span> <span data-ttu-id="047fb-145">Son válidos para el Administrador de recursos y la versión clásica.</span><span class="sxs-lookup"><span data-stu-id="047fb-145">They are valid for both Resource Manager and classic.</span></span>

### <span data-ttu-id="047fb-146"><a name="clientcert"></a>Generación de un certificado de cliente</span><span class="sxs-lookup"><span data-stu-id="047fb-146"><a name="clientcert"></a>Generate a client certificate</span></span>

<span data-ttu-id="047fb-147">Cada equipo cliente que se conecta tooa red virtual con punto a sitio debe tener instalado un certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="047fb-147">Each client computer that connects tooa VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="047fb-148">Genere un certificado de cliente de certificado de raíz autofirmado hello y, a continuación, exportar de instalar el certificado de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-148">You generate a client certificate from hello self-signed root certificate, and then export and install hello client certificate.</span></span> <span data-ttu-id="047fb-149">Si no está instalado el certificado de cliente de hello, se produce un error en la autenticación.</span><span class="sxs-lookup"><span data-stu-id="047fb-149">If hello client certificate is not installed, authentication fails.</span></span> 

<span data-ttu-id="047fb-150">Hello pasos siguientes le guían a través de generar un certificado de cliente de un certificado raíz autofirmado.</span><span class="sxs-lookup"><span data-stu-id="047fb-150">hello following steps walk you through generating a client certificate from a self-signed root certificate.</span></span> <span data-ttu-id="047fb-151">Puede generar varios certificados de cliente de hello mismo certificado raíz.</span><span class="sxs-lookup"><span data-stu-id="047fb-151">You may generate multiple client certificates from hello same root certificate.</span></span> <span data-ttu-id="047fb-152">Al generar certificados de cliente mediante estos pasos hello, certificado de cliente de Hola se instala automáticamente en el equipo de Hola que utiliza certificados de hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="047fb-152">When you generate client certificates using hello steps below, hello client certificate is automatically installed on hello computer that you used toogenerate hello certificate.</span></span> <span data-ttu-id="047fb-153">Si desea tooinstall un certificado de cliente en otro equipo cliente, puede exportar el certificado de Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-153">If you want tooinstall a client certificate on another client computer, you can export hello certificate.</span></span>
 
1. <span data-ttu-id="047fb-154">En hello mismo equipo que usa toocreate Hola certificado autofirmado, abra un símbolo del sistema como administrador.</span><span class="sxs-lookup"><span data-stu-id="047fb-154">On hello same computer that you used toocreate hello self-signed certificate, open a command prompt as administrator.</span></span>
2. <span data-ttu-id="047fb-155">Modifique y ejecute toogenerate de ejemplo de Hola un certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="047fb-155">Modify and run hello sample toogenerate a client certificate.</span></span>
  * <span data-ttu-id="047fb-156">Cambio *"P2SRootCert"* toohello nombre de raíz autofirmado Hola que va a generar el certificado de cliente de Hola de.</span><span class="sxs-lookup"><span data-stu-id="047fb-156">Change *"P2SRootCert"* toohello name of hello self-signed root that you are generating hello client certificate from.</span></span> <span data-ttu-id="047fb-157">Asegúrese de que está utilizando Hola nombre de certificado de raíz de hello, que es cualquier hello ' CN =' valor era que especificó cuando creó raíz autofirmado Hola.</span><span class="sxs-lookup"><span data-stu-id="047fb-157">Make sure you are using hello name of hello root certificate, which is whatever hello 'CN=' value was that you specified when you created hello self-signed root.</span></span>
  * <span data-ttu-id="047fb-158">Cambio *P2SChildCert* nombre toohello desea toogenerate una toobe de certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="047fb-158">Change *P2SChildCert* toohello name you want toogenerate a client certificate toobe.</span></span>

  <span data-ttu-id="047fb-159">Si ejecuta Hola siguiente ejemplo sin modificación alguna, resultado de hello es un certificado de cliente denominado P2SChildcert en el almacén de certificados personales que generó el certificado raíz P2SRootCert.</span><span class="sxs-lookup"><span data-stu-id="047fb-159">If you run hello following example without modifying it, hello result is a client certificate named P2SChildcert in your Personal certificate store that was generated from root certificate P2SRootCert.</span></span>

  ```cmd
  makecert.exe -n "CN=P2SChildCert" -pe -sky exchange -m 96 -ss My -in "P2SRootCert" -is my -a sha256
  ```

### <span data-ttu-id="047fb-160"><a name="clientexport"></a>Exportación de un certificado de cliente</span><span class="sxs-lookup"><span data-stu-id="047fb-160"><a name="clientexport"></a>Export a client certificate</span></span>

[!INCLUDE [Export client certificate](../../includes/vpn-gateway-certificates-export-client-cert-include.md)]

### <span data-ttu-id="047fb-161"><a name="install"></a>Instalación de un certificado de cliente exportado</span><span class="sxs-lookup"><span data-stu-id="047fb-161"><a name="install"></a>Install an exported client certificate</span></span>

[!INCLUDE [Install client certificate](../../includes/vpn-gateway-certificates-install-client-cert-include.md)]

## <a name="next-steps"></a><span data-ttu-id="047fb-162">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="047fb-162">Next steps</span></span>

<span data-ttu-id="047fb-163">Continúe con la configuración de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="047fb-163">Continue with your Point-to-Site configuration.</span></span> 

* <span data-ttu-id="047fb-164">Para **el Administrador de recursos** pasos del modelo de implementación, consulte [configurar una tooa de conexión de punto a sitio red virtual](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="047fb-164">For **Resource Manager** deployment model steps, see [Configure a Point-to-Site connection tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span></span>
* <span data-ttu-id="047fb-165">Para **clásico** pasos del modelo de implementación, consulte [configurar una tooa de conexión de Point-to-Site VPN red virtual (clásica)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="047fb-165">For **classic** deployment model steps, see [Configure a Point-to-Site VPN connection tooa VNet (classic)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span></span>

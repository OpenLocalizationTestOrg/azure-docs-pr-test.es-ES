---
title: "aaaAuthentication y autorización para las aplicaciones de API de servicio de aplicaciones de Azure | Documentos de Microsoft"
description: "Obtenga información acerca de los servicios de autenticación y autorización de Hola que proporciona el servicio de aplicaciones de Azure para aplicaciones de API."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="f87f8-103">Autenticación y autorización para Aplicaciones de API en el Servicio de aplicaciones de Azure</span><span class="sxs-lookup"><span data-stu-id="f87f8-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="f87f8-104">Información general</span><span class="sxs-lookup"><span data-stu-id="f87f8-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="f87f8-105">En este tema será tooa migrada consolidado [aplicación de servicio de autenticación / autorización](../app-service/app-service-authentication-overview.md) tema, que cubre a Web, móviles y aplicaciones de API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="f87f8-106">Azure App Service ofrece servicios de autenticación y autorización integrados que implementan [OAuth 2.0](#oauth) y [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="f87f8-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="f87f8-107">Este artículo describen los servicios de Hola y opciones que están disponibles para las aplicaciones de API de servicio de aplicaciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="f87f8-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="f87f8-108">Hola siguiente diagrama muestra algunas características clave de autenticación de servicio de aplicaciones:</span><span class="sxs-lookup"><span data-stu-id="f87f8-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="f87f8-109">Preprocesa las solicitudes entrantes de API, lo que significa que funciona con cualquier lenguaje o marco admitido por el Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f87f8-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="f87f8-110">Ofrece varias opciones para el trabajo de autenticación de la cantidad desea toodo en su propio código.</span><span class="sxs-lookup"><span data-stu-id="f87f8-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="f87f8-111">Funciona para la autenticación tanto del usuario final como de la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="f87f8-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="f87f8-112">Admite cinco proveedores de identidades: Azure Active Directory, Facebook, Google, Twitter y cuenta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f87f8-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="f87f8-113">Lo Hola funciona igual para aplicaciones de API, las aplicaciones Web y aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="f87f8-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="f87f8-114">Independencia de lenguajes</span><span class="sxs-lookup"><span data-stu-id="f87f8-114">Language agnostic</span></span>
<span data-ttu-id="f87f8-115">Procesamiento de autenticación de servicio de aplicaciones se produce antes de que las solicitudes llegan a la aplicación de API, lo que significa que las características de autenticación Hola funcionen para aplicaciones de API escritas en cualquier lenguaje o el marco de trabajo.</span><span class="sxs-lookup"><span data-stu-id="f87f8-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="f87f8-116">La API se puede basar en ASP.NET, Java, Node.js o en cualquier marco compatible con el Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f87f8-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="f87f8-117">Servicio de aplicaciones que se pasa en el token de web JSON (JWT) de Hola Hola encabezado de autorización de una solicitud HTTP, y el código escrito en cualquier idioma o el marco de trabajo puede obtener información de Hola que necesita de hello símbolo (token).</span><span class="sxs-lookup"><span data-stu-id="f87f8-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="f87f8-118">Además, servicio de aplicaciones proporciona acceso más fácil toohello suelen usada notificaciones estableciendo algunos encabezados especiales, como siguiente hello:</span><span class="sxs-lookup"><span data-stu-id="f87f8-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="f87f8-119">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="f87f8-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="f87f8-120">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="f87f8-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="f87f8-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="f87f8-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="f87f8-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="f87f8-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="f87f8-123">En una API. NET, puede usar hello `Authorize` de atributo y para la autorización específica puede escribir fácilmente código en función de notificaciones porque la información de notificaciones se rellena automáticamente en las clases .NET.</span><span class="sxs-lookup"><span data-stu-id="f87f8-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="f87f8-124">Varias opciones de protección</span><span class="sxs-lookup"><span data-stu-id="f87f8-124">Multiple protection options</span></span>
<span data-ttu-id="f87f8-125">El Servicio de aplicaciones puede impedir que las solicitudes anónimas de HTTP lleguen a su aplicación de API, puede pasar todas las solicitudes y validar los tokens para las solicitudes que los incluyen o puede dejar pasar todas las solicitudes sin realizar ninguna acción en ellas:</span><span class="sxs-lookup"><span data-stu-id="f87f8-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="f87f8-126">Permitir sólo las solicitudes autenticadas tooreach a su aplicación de API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="f87f8-127">Si se recibe una solicitud anónima desde un explorador, el servicio de aplicaciones redirigirá tooa página de inicio de sesión de proveedor de autenticación de Hola (Twitter de AD, Google, Azure, etc.) que desee.</span><span class="sxs-lookup"><span data-stu-id="f87f8-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="f87f8-128">Con esta opción, no necesita toowrite cualquier código de autenticación en absoluto en la aplicación, y código de autorización se simplifica porque se proporcionan notificaciones más importantes de hello en encabezados HTTP Hola.</span><span class="sxs-lookup"><span data-stu-id="f87f8-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="f87f8-129">Permitir tooreach de todas las solicitudes a su aplicación de API, pero validar las solicitudes autenticadas y pasar información de autenticación en los encabezados de hello HTTP.</span><span class="sxs-lookup"><span data-stu-id="f87f8-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="f87f8-130">Esta opción proporciona una mayor flexibilidad para controlar las solicitudes anónimas, pero tienes toowrite código si desea que los usuarios anónimos de tooprevent del uso de la API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="f87f8-131">Puesto que se pasan notificaciones más populares de hello en encabezados de Hola de solicitudes HTTP, el código de autorización es relativamente sencilla.</span><span class="sxs-lookup"><span data-stu-id="f87f8-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="f87f8-132">Permitir tooreach de todas las solicitudes de la API, no realizar ninguna acción en la información de autenticación de solicitudes de Hola.</span><span class="sxs-lookup"><span data-stu-id="f87f8-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="f87f8-133">Esta opción deja tareas Hola de autenticación y autorización completamente el tooyour del código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="f87f8-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="f87f8-134">Hola [portal de Azure](https://portal.azure.com/), Seleccionar opción de Hola que desee en hello **autenticación / autorización** hoja.</span><span class="sxs-lookup"><span data-stu-id="f87f8-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="f87f8-135">Para las opciones 1 y 2, activar **autenticación del servicio de aplicación**y en hello **tootake de acción cuando no se autentica la solicitud** lista desplegable y elija **sesión** o **Permitir solicitud (ninguna acción)**.</span><span class="sxs-lookup"><span data-stu-id="f87f8-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="f87f8-136">Si elige **sesión**, tiene un proveedor de autenticación de toochoose y configurar ese proveedor.</span><span class="sxs-lookup"><span data-stu-id="f87f8-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="f87f8-137">Para obtener información detallada acerca de cómo tooconfigure la autenticación, vea [cómo tooconfigure su inicio de sesión de Azure Active Directory de servicio de aplicaciones aplicación toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="f87f8-138">aplica el artículo de Hello tooAPI aplicaciones, así como las aplicaciones móviles, e incluye vínculos a artículos de tooother para hello otros proveedores de autenticación.</span><span class="sxs-lookup"><span data-stu-id="f87f8-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="f87f8-139"><a id="internal"></a> Autenticación de cuentas de servicio</span><span class="sxs-lookup"><span data-stu-id="f87f8-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="f87f8-140">Autenticación de servicio de aplicaciones funciona en escenarios internos como para llamar desde una aplicación de API tooanother de aplicación de API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="f87f8-141">En este escenario se puede obtener un token mediante credenciales para una cuenta de servicio, en lugar de las credenciales de usuario final.</span><span class="sxs-lookup"><span data-stu-id="f87f8-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="f87f8-142">Las cuentas de servicio también se conocen como *entidades de servicio* en Azure Active Directory y la autenticación que usa dichas cuenta también se conoce como escenario entre servicios.</span><span class="sxs-lookup"><span data-stu-id="f87f8-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="f87f8-143">Para los escenarios de servicio al servicio, proteja Hola llamada a aplicación de API con Azure Active Directory y proporcionar un token de autorización principal de servicio AAD cuando se llama a la aplicación hello API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="f87f8-144">Obtener un token proporcionando Hola Id. de cliente y secreto de aplicación AAD de Hola de cliente.</span><span class="sxs-lookup"><span data-stu-id="f87f8-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="f87f8-145">Se requiere, como true toobe usado para controlar el token de Zumo de servicios móviles de hello ningún código de solo Azure especial.</span><span class="sxs-lookup"><span data-stu-id="f87f8-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="f87f8-146">Un ejemplo de este escenario mediante aplicaciones de API de ASP.NET está cubierto por el tutorial Hola [autenticación principal del servicio para las aplicaciones de la API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="f87f8-147">Si desea toohandle un escenario de servicio a servicio sin usar la autenticación de servicio de aplicaciones, puede utilizar certificados de cliente o la autenticación básica.</span><span class="sxs-lookup"><span data-stu-id="f87f8-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="f87f8-148">Para obtener información acerca de los certificados de cliente en Azure, consulte [cómo tooConfigure autenticación mutua de TLS para las aplicaciones Web](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="f87f8-149">Para más información sobre la autenticación básica en ASP.NET, consulte [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters)(Filtros de autenticación en ASP.NET Web API 2).</span><span class="sxs-lookup"><span data-stu-id="f87f8-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="f87f8-150">Autenticación de cuentas de servicio desde una aplicación de servicio de aplicación lógica tooan API aplicaciones es un caso especial que se explica en [mediante la API personalizada hospedada en el servicio de aplicaciones a las aplicaciones lógicas](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="f87f8-151">Autenticación de cliente móvil</span><span class="sxs-lookup"><span data-stu-id="f87f8-151">Mobile client authentication</span></span>
<span data-ttu-id="f87f8-152">Para obtener información acerca de cómo toohandle autenticación desde clientes móviles, vea hello [documentación sobre la autenticación para aplicaciones móviles](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="f87f8-153">Autenticación de servicio de aplicaciones funciona Hola igual para aplicaciones móviles y aplicaciones de API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="f87f8-154">Más información</span><span class="sxs-lookup"><span data-stu-id="f87f8-154">More information</span></span>
<span data-ttu-id="f87f8-155">Para obtener más información sobre la autenticación y autorización en el servicio de aplicación de Azure, vea Hola recursos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f87f8-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="f87f8-156">Expanding App Service authentication / authorization</span><span class="sxs-lookup"><span data-stu-id="f87f8-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="f87f8-157">[Cómo tooconfigure su inicio de sesión de Azure Active Directory de servicio de aplicaciones aplicación toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (incluye enlaces para otros proveedores de autenticación al principio de Hola de página de hello).</span><span class="sxs-lookup"><span data-stu-id="f87f8-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="f87f8-158">Para obtener más información acerca de OAuth 2.0, OpenID Connect y Tokens de Web JSON (JWT), vea Hola recursos siguientes.</span><span class="sxs-lookup"><span data-stu-id="f87f8-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="f87f8-159">Introducción a OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="f87f8-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [<span data-ttu-id="f87f8-160">Introducción tooOAuth2, OpenID Connect y Tokens de Web JSON (JWT) - curso Pluralsight</span><span class="sxs-lookup"><span data-stu-id="f87f8-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="f87f8-161">Cómo compilar una API de RESTful y garantizar su seguridad para varios clientes en ASP.NET: curso de PluralSight</span><span class="sxs-lookup"><span data-stu-id="f87f8-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="f87f8-162">Para obtener más información acerca de Active Directory de Azure, vea Hola recursos siguientes.</span><span class="sxs-lookup"><span data-stu-id="f87f8-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="f87f8-163">Escenarios de Azure AD</span><span class="sxs-lookup"><span data-stu-id="f87f8-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="f87f8-164">Guía para desarrolladores de Azure AD</span><span class="sxs-lookup"><span data-stu-id="f87f8-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="f87f8-165">Ejemplos de Azure AD</span><span class="sxs-lookup"><span data-stu-id="f87f8-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="f87f8-166">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f87f8-166">Next steps</span></span>
<span data-ttu-id="f87f8-167">En este artículo se han explicado las características de autenticación y autorización del Servicio de aplicaciones que puede utilizar para las aplicaciones de API.</span><span class="sxs-lookup"><span data-stu-id="f87f8-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="f87f8-168">tutorial siguiente de Hello para la obtención de hello iniciado serie se muestra cómo tooimplement [autenticación de usuario en aplicaciones de API de servicio de aplicación](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f87f8-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>


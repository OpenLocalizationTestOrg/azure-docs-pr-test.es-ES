---
title: "Aprovisionamiento e implementación predecibles de microservicios en Azure"
description: "Obtenga información sobre cómo implementar una aplicación formada por microservicios en el Servicio de aplicaciones de Azure como una sola unidad y de forma predecible con plantillas de grupo de recursos JSON y scripting de PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: 844f42e61ba443a4b74a52f622113e87a7781913
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="8010c-103">Aprovisionamiento e implementación predecibles de microservicios en Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="8010c-104">En este tutorial se explica cómo aprovisionar e implementar una aplicación formada por [microservicios](https://en.wikipedia.org/wiki/Microservices) en [Azure App Service](/services/app-service/) como una sola unidad y de forma predecible con plantillas de grupo de recursos JSON y scripting de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8010c-104">This tutorial shows how to provision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="8010c-105">Al aprovisionar e implementar aplicaciones de gran escala que se componen de microservicios muy desacoplados, la repetibilidad y la previsión son fundamentales para que el proceso se realice correctamente.</span><span class="sxs-lookup"><span data-stu-id="8010c-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial to success.</span></span> <span data-ttu-id="8010c-106">[Servicio de aplicaciones de Azure](/services/app-service/) le permite crear microservicios que incluyen aplicaciones web, aplicaciones móviles, aplicaciones de API y aplicaciones lógicas.</span><span class="sxs-lookup"><span data-stu-id="8010c-106">[Azure App Service](/services/app-service/) enables you to create microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="8010c-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) le permite administrar todos los microservicios como una unidad, junto con las dependencias de recursos, como la configuración del control de origen y la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8010c-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you to manage all the microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="8010c-108">Ahora, también puede implementar esta aplicación mediante plantillas JSON y scripting sencillo de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8010c-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="8010c-109">Lo que hará</span><span class="sxs-lookup"><span data-stu-id="8010c-109">What you will do</span></span>
<span data-ttu-id="8010c-110">En el tutorial, implementará una aplicación que incluye:</span><span class="sxs-lookup"><span data-stu-id="8010c-110">In the tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="8010c-111">Dos aplicaciones web (es decir, dos microservicios)</span><span class="sxs-lookup"><span data-stu-id="8010c-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="8010c-112">Un base de datos SQL backend</span><span class="sxs-lookup"><span data-stu-id="8010c-112">A backend SQL Database</span></span>
* <span data-ttu-id="8010c-113">Configuración de aplicaciones, cadenas de conexión y control de código fuente</span><span class="sxs-lookup"><span data-stu-id="8010c-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="8010c-114">Información sobre aplicaciones, alertas y configuración de autoescala</span><span class="sxs-lookup"><span data-stu-id="8010c-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="8010c-115">Herramientas que va a utilizar</span><span class="sxs-lookup"><span data-stu-id="8010c-115">Tools you will use</span></span>
<span data-ttu-id="8010c-116">En este tutorial, utilizará las siguientes herramientas.</span><span class="sxs-lookup"><span data-stu-id="8010c-116">In this tutorial, you will use the following tools.</span></span> <span data-ttu-id="8010c-117">Habida cuenta de que no se trata de un tema dedicado íntegramente a las herramientas, voy a presentar un escenario de un extremo a otro y a dar solo una breve introducción acerca de cada una, además de indicar dónde se puede encontrar más información al respecto.</span><span class="sxs-lookup"><span data-stu-id="8010c-117">Since it’s not comprehensive discussion on tools, I’m going to stick to the end-to-end scenario and just give you a brief intro to each, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="8010c-118">Plantillas del Administrador de recursos de Azure (JSON)</span><span class="sxs-lookup"><span data-stu-id="8010c-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="8010c-119">Cada vez que crea una aplicación web en el Servicio de aplicaciones de Azure, por ejemplo, el Administrador de recursos de Azure utiliza una plantilla JSON para crear el grupo de recursos completo con los recursos del componente.</span><span class="sxs-lookup"><span data-stu-id="8010c-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template to create the entire resource group with the component resources.</span></span> <span data-ttu-id="8010c-120">Una plantilla compleja de [Azure Marketplace](/marketplace) como la aplicación [WordPress escalable](/marketplace/partners/wordpress/scalablewordpress/) puede incluir la base de datos MySQL, cuentas de almacenamiento, el plan de App Service, la propia aplicación web, las reglas de alerta, la configuración de la aplicación, valores de escalado automático, etc., y todas estas plantillas están disponibles a través de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8010c-120">A complex template from the [Azure Marketplace](/marketplace) like the [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include the MySQL database, storage accounts, the App Service plan, the web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available to you through PowerShell.</span></span> <span data-ttu-id="8010c-121">Para obtener información acerca de cómo descargar y usar estas plantillas, consulte [Uso de Azure PowerShell con el Administrador de recursos de Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="8010c-121">For information on how to download and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="8010c-122">Para obtener más información sobre las plantillas del Administrador de recursos de Azure, consulte [Creación de plantillas de Administrador de recursos de Azure](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="8010c-122">For more information on the Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="8010c-123">SDK de Azure 2.6 para Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8010c-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="8010c-124">El SDK más reciente contiene mejoras en la compatibilidad de la plantilla del Administrador de recursos en el editor de JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-124">The newest SDK contains improvements to the Resource Manager template support in the JSON editor.</span></span> <span data-ttu-id="8010c-125">Puede utilizar esto para crear rápidamente una plantilla de grupo de recursos desde el principio o abrir una plantilla existente de JSON (por ejemplo, una plantilla descargada de la Galería) para modificarla, rellenar el archivo de parámetros e incluso implementar el grupo de recursos directamente desde una solución de grupo de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-125">You can use this to quickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate the parameters file, and even deploy the resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="8010c-126">Para obtener más información, consulte [SDK de Azure 2.6 para Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="8010c-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="8010c-127">Azure PowerShell 0.8.0 o posterior</span><span class="sxs-lookup"><span data-stu-id="8010c-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="8010c-128">A partir de la versión 0.8.0, la instalación de Azure PowerShell incluye el módulo Administrador de recursos de Azure además del módulo de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-128">Beginning in version 0.8.0, the Azure PowerShell installation includes the Azure Resource Manager module in addition to the Azure module.</span></span> <span data-ttu-id="8010c-129">Este nuevo módulo permite crear un script de la implementación de grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-129">This new module enables you to script the deployment of resource groups.</span></span>

<span data-ttu-id="8010c-130">Para obtener más información, consulte [Uso de Azure PowerShell con el Administrador de recursos de Azure](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="8010c-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="8010c-131">Explorador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-131">Azure Resource Explorer</span></span>
<span data-ttu-id="8010c-132">Esta [herramienta de vista previa](https://resources.azure.com) le permite explorar las definiciones de JSON de todos los grupos de recursos en su suscripción y los recursos individuales.</span><span class="sxs-lookup"><span data-stu-id="8010c-132">This [preview tool](https://resources.azure.com) enables you to explore the JSON definitions of all the resource groups in your subscription and the individual resources.</span></span> <span data-ttu-id="8010c-133">En la herramienta, puede editar las definiciones de JSON de un recurso, eliminar una jerarquía completa de recursos y crear nuevos recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-133">In the tool, you can edit the JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="8010c-134">La información disponible en esta herramienta es muy útil para la creación de plantillas, ya que muestra las propiedades que debe establecer para un tipo determinado de recursos, los valores correctos, etc. Incluso puede crear el grupo de recursos en [Azure Portal](https://portal.azure.com/); a continuación, examinar sus definiciones de JSON en la herramienta de explorador a fin de facilitarle el uso de plantillas para el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-134">The information readily available in this tool is very helpful for template authoring because it shows you what properties you need to set for a particular type of resource, the correct values, etc. You can even create your resource group in the [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in the explorer tool to help you templatize the resource group.</span></span>

### <a name="deploy-to-azure-button"></a><span data-ttu-id="8010c-135">Botón Implementación en Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-135">Deploy to Azure button</span></span>
<span data-ttu-id="8010c-136">Si utiliza GitHub para el control de código fuente, puede colocar un [botón de implementación en Azure](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) en el archivo README.MD, que habilita una IU de implementación inmediata para Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-136">If you use GitHub for source control, you can put a [Deploy to Azure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI to Azure.</span></span> <span data-ttu-id="8010c-137">Aunque puede hacerlo para cualquier aplicación web sencilla, se puede extender para habilitar la implementación de un grupo de recursos completo colocando un archivo azuredeploy.json en la raíz del repositorio.</span><span class="sxs-lookup"><span data-stu-id="8010c-137">While you can do this for any simple web app, you can extend this to enable deploying an entire resource group by putting an azuredeploy.json file in the repository root.</span></span> <span data-ttu-id="8010c-138">Este archivo JSON, que contiene la plantilla de grupo de recursos, lo utilizará el botón Implementación en Azure para crear el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-138">This JSON file, which contains the resource group template, will be used by the Deploy to Azure button to create the resource group.</span></span> <span data-ttu-id="8010c-139">Para obtener un ejemplo, consulte el ejemplo [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) , que se utilizará en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="8010c-139">For an example, see the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-the-sample-resource-group-template"></a><span data-ttu-id="8010c-140">Obtención de la plantilla de grupo de recursos de ejemplo</span><span class="sxs-lookup"><span data-stu-id="8010c-140">Get the sample resource group template</span></span>
<span data-ttu-id="8010c-141">Ahora vamos a centrarnos en ello.</span><span class="sxs-lookup"><span data-stu-id="8010c-141">So now let’s get right to it.</span></span>

1. <span data-ttu-id="8010c-142">Navegue hasta el ejemplo del Servicio de aplicaciones [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) .</span><span class="sxs-lookup"><span data-stu-id="8010c-142">Navigate to the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="8010c-143">En readme.md, haga clic en **Implementación en Azure**.</span><span class="sxs-lookup"><span data-stu-id="8010c-143">In readme.md, click **Deploy to Azure**.</span></span>
3. <span data-ttu-id="8010c-144">Se le remite al sitio [deploy-to-azure](https://deploy.azure.com) de sitio y se le solicita que especifique los parámetros de implementación.</span><span class="sxs-lookup"><span data-stu-id="8010c-144">You’re taken to the [deploy-to-azure](https://deploy.azure.com) site and asked to input deployment parameters.</span></span> <span data-ttu-id="8010c-145">Observe que la mayoría de los campos se rellenan con el nombre del repositorio y algunas cadenas aleatorias.</span><span class="sxs-lookup"><span data-stu-id="8010c-145">Notice that most of the fields are populated with the repository name and some random strings for you.</span></span> <span data-ttu-id="8010c-146">Puede cambiar todos los campos si lo desea, pero lo único que tiene que escribir es el inicio de sesión administrativo de SQL Server y la contraseña y, a continuación, hacer clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8010c-146">You can change all the fields if you want, but the only things you have to enter are the SQL Server administrative login and the password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="8010c-147">A continuación, haga clic en **Implementar** para iniciar el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="8010c-147">Next, click **Deploy** to start the deployment process.</span></span> <span data-ttu-id="8010c-148">Una vez que el proceso se ejecuta hasta completarse, haga clic en el vínculo http://todoapp*XXXX*.azurewebsites.net para examinar la aplicación implementada.</span><span class="sxs-lookup"><span data-stu-id="8010c-148">Once the process runs to completion, click the http://todoapp*XXXX*.azurewebsites.net link to browse the deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="8010c-149">La interfaz de usuario podría ser un poco lenta la primera vez que obtiene acceso a ella porque las aplicaciones se acaban de iniciar, pero no le quepa duda de que se trata de una aplicación totalmente funcional.</span><span class="sxs-lookup"><span data-stu-id="8010c-149">The UI would be a little slow when you first browse to it because the apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="8010c-150">En la página Implementar, haga clic en el vínculo **Administrar** para ver la nueva aplicación en el Portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-150">Back in the Deploy page, click the **Manage** link to see the new application in the Azure Portal.</span></span>
6. <span data-ttu-id="8010c-151">En el menú desplegable **Essentials** , haga clic en el vínculo del grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-151">In the **Essentials** dropdown, click the resource group link.</span></span> <span data-ttu-id="8010c-152">Tenga en cuenta también que la aplicación web ya está conectada al repositorio de GitHub en **Proyecto externo**.</span><span class="sxs-lookup"><span data-stu-id="8010c-152">Note also that the web app is already connected to the GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="8010c-153">En la hoja del grupo de recursos, tenga en cuenta que ya existen dos aplicaciones web y una base de datos SQL en el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-153">In the resource group blade, note that there are already two web apps and one SQL Database in the resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="8010c-154">Todo lo que acabamos de ver en unos pocos minutos es una aplicación de dos microservicios totalmente implementada, con todos los componentes, las dependencias, la configuración, la base de datos y la publicación continua, configurada mediante una orquestación automatizada en el Administrador de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all the components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="8010c-155">Todo esto se realiza mediante dos elementos:</span><span class="sxs-lookup"><span data-stu-id="8010c-155">All this was done by two things:</span></span>

* <span data-ttu-id="8010c-156">El botón Implementación en Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-156">The Deploy to Azure button</span></span>
* <span data-ttu-id="8010c-157">azuredeploy.json en la raíz del repositorio</span><span class="sxs-lookup"><span data-stu-id="8010c-157">azuredeploy.json in the repo root</span></span>

<span data-ttu-id="8010c-158">Puede implementar la misma aplicación decenas, cientos o miles de veces y tener exactamente la misma configuración cada vez.</span><span class="sxs-lookup"><span data-stu-id="8010c-158">You can deploy this same application tens, hundreds, or thousands of times and have the exact same configuration every time.</span></span> <span data-ttu-id="8010c-159">La repetibilidad y la predicción de este enfoque le permite implementar aplicaciones de gran escala con facilidad y confianza.</span><span class="sxs-lookup"><span data-stu-id="8010c-159">The repeatability and the predictability of this approach enables you to deploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="8010c-160">Examine (o edite) AZUREDEPLOY.JSON</span><span class="sxs-lookup"><span data-stu-id="8010c-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="8010c-161">Ahora veamos cómo se ha configurado el repositorio de GitHub.</span><span class="sxs-lookup"><span data-stu-id="8010c-161">Now let’s look at how the GitHub repository was set up.</span></span> <span data-ttu-id="8010c-162">Va a utilizar el editor de JSON en el SDK .NET de Azure, por lo que si no ha instalado todavía [SDK .NET de Azure 2.6](/downloads/), hágalo ahora.</span><span class="sxs-lookup"><span data-stu-id="8010c-162">You will be using the JSON editor in the Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="8010c-163">Clone el repositorio [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) con su herramienta git favorita.</span><span class="sxs-lookup"><span data-stu-id="8010c-163">Clone the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="8010c-164">En la siguiente captura de pantalla, hago esto en Team Explorer en Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="8010c-164">In the screenshot below, I’m doing this in the Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="8010c-165">Desde la raíz del repositorio, abra azuredeploy.json en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8010c-165">From the repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="8010c-166">Si no ve el panel de esquema de JSON, deberá instalar el SDK .NET de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-166">If you don’t see the JSON Outline pane, you need to install Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="8010c-167">No voy a describir todos los detalles del formato JSON, pero en la sección [Más recursos](#resources) hay vínculos para obtener información sobre el lenguaje de la plantilla de grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-167">I’m not going to describe every detail of the JSON format, but the [More Resources](#resources) section has links for learning the resource group template language.</span></span> <span data-ttu-id="8010c-168">Aquí, voy a mostrar las interesantes características que le ayudarán a empezar a crear su propia plantilla personalizada para la implementación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8010c-168">Here, I’m just going to show you the interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="8010c-169">Parámetros</span><span class="sxs-lookup"><span data-stu-id="8010c-169">Parameters</span></span>
<span data-ttu-id="8010c-170">Eche un vistazo a la sección de parámetros para ver que la mayoría de ellos son los que el botón **Implementación en Azure** le pide que especifique.</span><span class="sxs-lookup"><span data-stu-id="8010c-170">Take a look at the parameters section to see that most of these parameters are what the **Deploy to Azure** button prompts you to input.</span></span> <span data-ttu-id="8010c-171">El sitio detrás del botón **Implementación en Azure** rellena la interfaz de usuario de entrada con los parámetros definidos en azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="8010c-171">The site behind the **Deploy to Azure** button populates the input UI using the parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="8010c-172">Estos parámetros se usan en las definiciones de recursos, como los nombres de recursos, los valores de propiedad, etc.</span><span class="sxs-lookup"><span data-stu-id="8010c-172">These parameters are used throughout the resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="8010c-173">Recursos</span><span class="sxs-lookup"><span data-stu-id="8010c-173">Resources</span></span>
<span data-ttu-id="8010c-174">En el nodo de recursos, puede ver que se definen cuatro recursos de nivel superior, que son una instancia de SQL Server, un plan del Servicio de aplicaciones y dos aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="8010c-174">In the resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="8010c-175">Plan del Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="8010c-175">App Service plan</span></span>
<span data-ttu-id="8010c-176">Comencemos con un simple recurso de nivel de raíz en JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-176">Let’s start with a simple root-level resource in the JSON.</span></span> <span data-ttu-id="8010c-177">En el esquema de JSON, haga clic en el plan del Servicio de aplicaciones denominado **[hostingPlanName]** para resaltar el código correspondiente de JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-177">In the JSON Outline, click the App Service plan named **[hostingPlanName]** to highlight the corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="8010c-178">Tenga en cuenta que el elemento `type` especifica la cadena para un plan del Servicio de aplicaciones (hace mucho tiempo se conocía como una granja de servidores), y otros elementos y propiedades se rellenan con los parámetros definidos en el archivo JSON, y este recurso no tiene ningún recurso anidado.</span><span class="sxs-lookup"><span data-stu-id="8010c-178">Note that the `type` element specifies the string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using the parameters defined in the JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="8010c-179">Tenga en cuenta también que el valor de `apiVersion` indica a Azure con qué versión de la API de REST utilizar la definición de recursos de JSON, y esto puede afectar a qué formato se le debe dar al recurso dentro de `{}`.</span><span class="sxs-lookup"><span data-stu-id="8010c-179">Note also that the value of `apiVersion` tells Azure which version of the REST API to use the JSON resource definition with, and it can affect how the resource should be formatted inside the `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="8010c-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="8010c-180">SQL Server</span></span>
<span data-ttu-id="8010c-181">A continuación, haga clic en el recurso de SQL Server denominado **SQLServer** en el esquema de JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-181">Next, click on the SQL Server resource named **SQLServer** in the JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="8010c-182">Tenga en cuenta lo siguiente sobre el código resaltado de JSON:</span><span class="sxs-lookup"><span data-stu-id="8010c-182">Note the following about the highlighted JSON code:</span></span>

* <span data-ttu-id="8010c-183">El uso de parámetros garantiza que los recursos creados son denominados y configurados de manera que sean coherentes entre sí.</span><span class="sxs-lookup"><span data-stu-id="8010c-183">The use of parameters ensures that the created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="8010c-184">El recurso de SQL Server tiene dos recursos anidados, cada uno con un valor diferente para `type`.</span><span class="sxs-lookup"><span data-stu-id="8010c-184">The SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="8010c-185">Los recursos anidados dentro de `“resources”: […]`, donde se definen las reglas de firewall y de la base de datos, tienen un elemento `dependsOn` que especifica el identificador de recurso del recurso SQLServer en el nivel de raíz.</span><span class="sxs-lookup"><span data-stu-id="8010c-185">The nested resources inside `“resources”: […]`, where the database and the firewall rules are defined, have a `dependsOn` element that specifies the resource ID of the root-level SQLServer resource.</span></span> <span data-ttu-id="8010c-186">Esto indica al Administrador de recursos de Azure que antes de crear este recurso, el otro recurso ya debe existir; y si ese otro recurso está definido en la plantilla, cree ese primero.</span><span class="sxs-lookup"><span data-stu-id="8010c-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in the template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="8010c-187">Para obtener información detallada sobre cómo utilizar la función `resourceId()`, consulte [Funciones de la plantilla de Azure Resource Manager](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="8010c-187">For detailed information on how to use the `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="8010c-188">El efecto del elemento `dependsOn` es que el Administrador de recursos de Azure puede saber qué recursos se pueden crear en paralelo y qué recursos deben crearse de forma secuencial.</span><span class="sxs-lookup"><span data-stu-id="8010c-188">The effect of the `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="8010c-189">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="8010c-189">Web app</span></span>
<span data-ttu-id="8010c-190">Ahora vamos a pasar a las aplicaciones web, que son más complicadas.</span><span class="sxs-lookup"><span data-stu-id="8010c-190">Now, let’s move on to the actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="8010c-191">Haga clic en la aplicación web [variables(‘apiSiteName’)] en el esquema de JSON para resaltar su código JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-191">Click the [variables(‘apiSiteName’)] web app in the JSON Outline to highlight its JSON code.</span></span> <span data-ttu-id="8010c-192">Observará que las cosas se están poniendo mucho más interesantes.</span><span class="sxs-lookup"><span data-stu-id="8010c-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="8010c-193">Para este propósito, hablaré de cada una de las características:</span><span class="sxs-lookup"><span data-stu-id="8010c-193">For this purpose, I’ll talk about the features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="8010c-194">Recurso raíz</span><span class="sxs-lookup"><span data-stu-id="8010c-194">Root resource</span></span>
<span data-ttu-id="8010c-195">La aplicación web depende de dos recursos distintos.</span><span class="sxs-lookup"><span data-stu-id="8010c-195">The web app depends on two different resources.</span></span> <span data-ttu-id="8010c-196">Esto significa que el Administrador de recursos de Azure creará la aplicación web sólo después de haber creado el plan del Servicio de aplicaciones y la instancia de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8010c-196">This means that Azure Resource Manager will create the web app only after both the App Service plan and the SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="8010c-197">Configuración de la aplicación</span><span class="sxs-lookup"><span data-stu-id="8010c-197">App settings</span></span>
<span data-ttu-id="8010c-198">La configuración de la aplicación también se define como un recurso anidado.</span><span class="sxs-lookup"><span data-stu-id="8010c-198">The app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="8010c-199">En el elemento `properties` para `config/appsettings`, tiene dos configuraciones para la aplicación con el formato `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="8010c-199">In the `properties` element for `config/appsettings`, you have two app settings in the format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="8010c-200">`PROJECT` es una [configuración de KUDU](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) que indica a la implementación de Azure qué proyecto usar en una solución de Visual Studio de varios proyectos.</span><span class="sxs-lookup"><span data-stu-id="8010c-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project to use in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="8010c-201">Le mostraré más adelante cómo se configura el control de código fuente, pero dado que el código de ToDoApp se encuentra en una solución de Visual Studio de varios proyectos, necesitamos esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8010c-201">I will show you later how source control is configured, but since the ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="8010c-202">`clientUrl` es simplemente una configuración de la aplicación que el código de la aplicación utiliza.</span><span class="sxs-lookup"><span data-stu-id="8010c-202">`clientUrl` is simply an app setting that the application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="8010c-203">Cadenas de conexión</span><span class="sxs-lookup"><span data-stu-id="8010c-203">Connection strings</span></span>
<span data-ttu-id="8010c-204">Las cadenas de conexión también se definen como un recurso anidado.</span><span class="sxs-lookup"><span data-stu-id="8010c-204">The connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="8010c-205">En el elemento `properties` para `config/connectionstrings`, cada cadena de conexión también se define como un par nombre-valor, con el formato específico de `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="8010c-205">In the `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with the specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="8010c-206">Para el elemento `type`, los valores posibles son `MySql`, `SQLServer`, `SQLAzure` y `Custom`.</span><span class="sxs-lookup"><span data-stu-id="8010c-206">For the `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="8010c-207">Para obtener una lista definitiva de los tipos de cadena de conexión, ejecute el siguiente comando de Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="8010c-207">For a definitive list of the connection string types, run the following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="8010c-208">Control de código fuente</span><span class="sxs-lookup"><span data-stu-id="8010c-208">Source control</span></span>
<span data-ttu-id="8010c-209">La configuración del control de código fuente también se define como un recurso anidado.</span><span class="sxs-lookup"><span data-stu-id="8010c-209">The source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="8010c-210">El Administrador de recursos de Azure usa este recurso para configurar la publicación continua (consulte la advertencia en `IsManualIntegration` más adelante) y también para iniciar la implementación de código de la aplicación automáticamente durante el procesamiento del archivo JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-210">Azure Resource Manager uses this resource to configure continuous publishing (see caveat on `IsManualIntegration` later) and also to kick off the deployment of application code automatically during the processing of the JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="8010c-211">`RepoUrl` y `branch` deberían ser bastante intuitivos y deben apuntar al repositorio de Git y al nombre de la bifurcación desde la que realizar la publicación.</span><span class="sxs-lookup"><span data-stu-id="8010c-211">`RepoUrl` and `branch` should be pretty intuitive and should point to the Git repository and the name of the branch to publish from.</span></span> <span data-ttu-id="8010c-212">De nuevo, se definen mediante parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="8010c-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="8010c-213">Tenga en cuenta en el elemento `dependsOn` que, además del recurso de aplicación web, `sourcecontrols/web` depende también de `config/appsettings` y `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="8010c-213">Note in the `dependsOn` element that, in addition to the web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="8010c-214">Esto es porque una vez que `sourcecontrols/web` está configurado, el proceso de implementación de Azure intentará automáticamente implementar, generar e iniciar el código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8010c-214">This is because once `sourcecontrols/web` is configured, the Azure deployment process will automatically attempt to deploy, build, and start the application code.</span></span> <span data-ttu-id="8010c-215">Por lo tanto, insertar esta dependencia ayuda a asegurarse de que la aplicación tenga acceso a la configuración de la aplicación y las cadenas de conexión necesarias antes de ejecutar el código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8010c-215">Therefore, inserting this dependency helps you make sure that the application has access to the required app settings and connection strings before the application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="8010c-216">Tenga en cuenta también que `IsManualIntegration` está establecido en `true`.</span><span class="sxs-lookup"><span data-stu-id="8010c-216">Note also that `IsManualIntegration` is set to `true`.</span></span> <span data-ttu-id="8010c-217">Esta propiedad es necesaria en este tutorial, ya que no posee realmente el repositorio de GitHub y realmente no puede conceder permiso a Azure para configurar la publicación continua de [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (es decir,</span><span class="sxs-lookup"><span data-stu-id="8010c-217">This property is necessary in this tutorial because you do not actually own the GitHub repository, and thus cannot actually grant permission to Azure to configure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e.</span></span> <span data-ttu-id="8010c-218">insertar actualizaciones de repositorio automáticas en Azure).</span><span class="sxs-lookup"><span data-stu-id="8010c-218">push automatic repository updates to Azure).</span></span> <span data-ttu-id="8010c-219">Puede utilizar el valor predeterminado `false` para el repositorio especificado solo si ha configurado antes las credenciales de GitHub del propietario en el [Portal de Azure](https://portal.azure.com/) .</span><span class="sxs-lookup"><span data-stu-id="8010c-219">You can use the default value `false` for the specified repository only if you have configured the owner’s GitHub credentials in the [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="8010c-220">En otras palabras, si ha configurado el control de código fuente para GitHub o BitBucket para cualquier aplicación en el [Portal de Azure](https://portal.azure.com/) anteriormente, mediante las credenciales de usuario, Azure recordará estas credenciales y las usará para implementar cualquier aplicación de GitHub o BitBucket en el futuro.</span><span class="sxs-lookup"><span data-stu-id="8010c-220">In other words, if you have set up source control to GitHub or BitBucket for any app in the [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember the credentials and use them whenever you deploy any app from GitHub or BitBucket in the future.</span></span> <span data-ttu-id="8010c-221">Sin embargo, si no ha hecho esto, se producirá un error en la implementación de la plantilla JSON cuando el administrador de recursos de Azure intente configurar el control de código fuente de la aplicación web porque no puede iniciar sesión en GitHub o BitBucket con las credenciales del propietario del repositorio.</span><span class="sxs-lookup"><span data-stu-id="8010c-221">However, if you haven’t done this already, deployment of the JSON template will fail when Azure Resource Manager tries to configure the web app’s source control settings because it cannot log into GitHub or BitBucket with the repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-the-json-template-with-deployed-resource-group"></a><span data-ttu-id="8010c-222">Comparación de la plantilla JSON con grupos de recursos implementados</span><span class="sxs-lookup"><span data-stu-id="8010c-222">Compare the JSON template with deployed resource group</span></span>
<span data-ttu-id="8010c-223">Aquí puede consultar todas las hojas de la aplicación web en el [Portal de Azure](https://portal.azure.com/), pero hay otra herramienta también puede resultar útil, e incluso más.</span><span class="sxs-lookup"><span data-stu-id="8010c-223">Here, you can go through all the web app’s blades in the [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="8010c-224">Vaya a la herramienta de vista previa [Explorador de recursos de Azure](https://resources.azure.com) , que proporciona una representación JSON de todos los grupos de recursos en las suscripciones, tal y como existen en el backend de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-224">Go to the [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all the resource groups in your subscriptions, as they actually exist in the Azure backend.</span></span> <span data-ttu-id="8010c-225">También puede ver cómo la jerarquía JSON del grupo de recursos en Azure se corresponde con la jerarquía del archivo de plantilla utilizado para crearlo.</span><span class="sxs-lookup"><span data-stu-id="8010c-225">You can also see how the resource group’s JSON hierarchy in Azure corresponds with the hierarchy in the template file that’s used to create it.</span></span>

<span data-ttu-id="8010c-226">Por ejemplo, si voy a la herramienta [Explorador de recursos de Azure](https://resources.azure.com) y expando los nodos en el explorador, puedo ver el grupo de recursos y los recursos de nivel de raíz que se engloban en sus respectivos tipos de recursos.</span><span class="sxs-lookup"><span data-stu-id="8010c-226">For example, when I go to the [Azure Resource Explorer](https://resources.azure.com) tool and expand the nodes in the explorer, I can see the resource group and the root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="8010c-227">Si profundiza en una aplicación web, observará que los detalles de configuración de la misma son similares a los de la captura de pantalla siguiente:</span><span class="sxs-lookup"><span data-stu-id="8010c-227">If you drill down to a web app, you should be able to see web app configuration details similar to the below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="8010c-228">Nuevamente, los recursos anidados deben tener una jerarquía muy similar a la de su archivo de plantilla JSON, y debería ver la configuración de la aplicación, las cadenas de conexión, etc. que se reflejan de forma adecuada en el panel JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-228">Again, the nested resources should have a hierarchy very similar to those in your JSON template file, and you should see the app settings, connection strings, etc., properly reflected in the JSON pane.</span></span> <span data-ttu-id="8010c-229">La ausencia de configuración aquí puede indicar un problema con el archivo JSON y puede ayudarle a solucionar problemas con el archivo de plantilla JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-229">The absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-the-resource-group-template-yourself"></a><span data-ttu-id="8010c-230">Implementación de la plantilla de grupo de recursos manualmente</span><span class="sxs-lookup"><span data-stu-id="8010c-230">Deploy the resource group template yourself</span></span>
<span data-ttu-id="8010c-231">El botón **Implementación en Azure** es excelente, pero permite implementar la plantilla de grupo de recursos en azuredeploy.json sólo si ya se ha insertado azuredeploy.json en GitHub.</span><span class="sxs-lookup"><span data-stu-id="8010c-231">The **Deploy to Azure** button is great, but it allows you to deploy the resource group template in azuredeploy.json only if you have already pushed azuredeploy.json to GitHub.</span></span> <span data-ttu-id="8010c-232">El SDK .NET de Azure también proporciona las herramientas para implementar cualquier archivo de plantilla JSON directamente desde el equipo local.</span><span class="sxs-lookup"><span data-stu-id="8010c-232">The Azure .NET SDK also provides the tools for you to deploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="8010c-233">Para ello, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8010c-233">To do this, follow the steps below:</span></span>

1. <span data-ttu-id="8010c-234">En Visual Studio, haga clic en **Archivo** > **Nuevo** > **proyecto**.</span><span class="sxs-lookup"><span data-stu-id="8010c-234">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="8010c-235">Haga clic en **Visual C#** > **Nube** >  **&gt; Grupo de recursos de Azure** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8010c-235">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="8010c-236">En **Seleccionar plantilla de Azure**, seleccione **Plantilla en blanco** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8010c-236">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="8010c-237">Arrastre azuredeploy.json a la carpeta **Plantilla** del nuevo proyecto.</span><span class="sxs-lookup"><span data-stu-id="8010c-237">Drag azuredeploy.json into the **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="8010c-238">En el Explorador de soluciones, abra el archivo azuredeploy.json copiado.</span><span class="sxs-lookup"><span data-stu-id="8010c-238">From Solution Explorer, open the copied azuredeploy.json.</span></span>
6. <span data-ttu-id="8010c-239">Para ilustrar la demostración, vamos a agregar algunos recursos de Application Insights estándar a nuestro archivo JSON; para ello, hay que hacer clic en **Agregar recurso**.</span><span class="sxs-lookup"><span data-stu-id="8010c-239">Just for the sake of the demonstration, let’s add some standard Application Insight resources to our JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="8010c-240">Si solo le interesa implementar el archivo JSON, omita los pasos de implementación.</span><span class="sxs-lookup"><span data-stu-id="8010c-240">If you’re just interested in deploying the JSON file, skip to the deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="8010c-241">Seleccione **Application Insights para Web Apps**; a continuación, asegúrese de que hay un plan de App Service y una aplicación web seleccionados y, a continuación, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="8010c-241">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="8010c-242">Ahora ya podrá ver varios recursos nuevos que, en función del recurso de que se trate y de su función, dependerá del plan del Servicio de aplicaciones o de la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="8010c-242">You’ll now be able to see several new resources that, depending on the resource and what it does, have dependencies on either the App Service plan or the web app.</span></span> <span data-ttu-id="8010c-243">Estos recursos no están habilitados por su definición existente y tiene que cambiar este ajuste.</span><span class="sxs-lookup"><span data-stu-id="8010c-243">These resources are not enabled by their existing definition and you’re going to change that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="8010c-244">En el esquema de JSON, haga clic en **appInsights AutoScale** para resaltar su código JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-244">In the JSON Outline, click **appInsights AutoScale** to highlight its JSON code.</span></span> <span data-ttu-id="8010c-245">Se trata de la configuración de escalado del plan del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8010c-245">This is the scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="8010c-246">En el código resaltado de JSON, busque las propiedades `location` y `enabled` y configúrelas tal como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="8010c-246">In the highlighted JSON code, locate the `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="8010c-247">En el esquema de JSON, haga clic en **CPUHigh appInsights** para resaltar su código JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-247">In the JSON Outline, click **CPUHigh appInsights** to highlight its JSON code.</span></span> <span data-ttu-id="8010c-248">Se trata de una alerta.</span><span class="sxs-lookup"><span data-stu-id="8010c-248">This is an alert.</span></span>
11. <span data-ttu-id="8010c-249">Busque las propiedades `location` y `isEnabled` y configúrelas tal como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="8010c-249">Locate the `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="8010c-250">Haga lo mismo para las otras tres alertas (bombilla púrpura).</span><span class="sxs-lookup"><span data-stu-id="8010c-250">Do the same for the other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="8010c-251">Ahora ya puede realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="8010c-251">You’re now ready to deploy.</span></span> <span data-ttu-id="8010c-252">A continuación, haga clic con el botón secundario en el proyecto y seleccione **Implementar** > **New Implementarment**.</span><span class="sxs-lookup"><span data-stu-id="8010c-252">Right-click the project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="8010c-253">Inicie sesión en su cuenta de Azure si aún no lo ha hecho.</span><span class="sxs-lookup"><span data-stu-id="8010c-253">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="8010c-254">Seleccione un grupo de recursos existente en su suscripción o cree uno nuevo y seleccione **azuredeploy.json**, y, a continuación, haga clic en **Editar parámetros**.</span><span class="sxs-lookup"><span data-stu-id="8010c-254">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="8010c-255">Ahora podrá editar todos los parámetros definidos en el archivo de plantilla en una cómoda tabla.</span><span class="sxs-lookup"><span data-stu-id="8010c-255">You’ll now be able to edit all the parameters defined in the template file in a nice table.</span></span> <span data-ttu-id="8010c-256">Los parámetros que definen los valores predeterminados ya tendrán sus valores predeterminados y los parámetros que definen una lista de valores permitidos se mostrarán como menús desplegables.</span><span class="sxs-lookup"><span data-stu-id="8010c-256">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="8010c-257">Rellene todos los parámetros vacíos y use la [dirección de repositorio de GitHub para ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) en **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="8010c-257">Fill in all the empty parameters, and use the [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="8010c-258">A continuación, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="8010c-258">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="8010c-259">El escalado automático es una característica que se ofrece en el nivel **estándar** o posterior, y las alertas para planes son características que se ofrecen en el nivel **básico** o posterior; deberá establecer el parámetro **sku** en **Estándar** o **Premium** para ver todos los nuevos detalles mejorados de App Insights.</span><span class="sxs-lookup"><span data-stu-id="8010c-259">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need to set the **sku** parameter to **Standard** or **Premium** in order to see all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="8010c-260">Haga clic en **Implementar**.</span><span class="sxs-lookup"><span data-stu-id="8010c-260">Click **Deploy**.</span></span> <span data-ttu-id="8010c-261">Si ha seleccionado **Guardar contraseñas**, la contraseña se guardará en el archivo de parámetros como **texto sin formato**.</span><span class="sxs-lookup"><span data-stu-id="8010c-261">If you selected **Save passwords**, the password will be saved in the parameter file **in plain text**.</span></span> <span data-ttu-id="8010c-262">De lo contrario, se le pedirá que escriba la contraseña de la base de datos durante el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="8010c-262">Otherwise, you’ll be asked to input the database password during the deployment process.</span></span>

<span data-ttu-id="8010c-263">¡Ya está!</span><span class="sxs-lookup"><span data-stu-id="8010c-263">That’s it!</span></span> <span data-ttu-id="8010c-264">Ahora solo tiene que ir a [Azure Portal](https://portal.azure.com/) y a la herramienta [Explorador de recursos de Azure](https://resources.azure.com) para ver la configuración de escalado automático y las nuevas alertas que se han agregado a la aplicación implementada con JSON.</span><span class="sxs-lookup"><span data-stu-id="8010c-264">Now you just need to go to the [Azure Portal](https://portal.azure.com/) and the [Azure Resource Explorer](https://resources.azure.com) tool to see the new alerts and autoscale settings added to your JSON deployed application.</span></span>

<span data-ttu-id="8010c-265">Con los pasos de esta sección se consigue lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8010c-265">Your steps in this section mainly accomplished the following:</span></span>

1. <span data-ttu-id="8010c-266">Preparación del archivo de plantilla</span><span class="sxs-lookup"><span data-stu-id="8010c-266">Prepared the template file</span></span>
2. <span data-ttu-id="8010c-267">Creación de un archivo de parámetros con el archivo de plantilla</span><span class="sxs-lookup"><span data-stu-id="8010c-267">Created a parameter file to go with the template file</span></span>
3. <span data-ttu-id="8010c-268">Implementación del archivo de plantilla con el archivo de parámetros</span><span class="sxs-lookup"><span data-stu-id="8010c-268">Deployed the template file with the parameter file</span></span>

<span data-ttu-id="8010c-269">El último paso se realiza fácilmente mediante un cmdlet de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8010c-269">The last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="8010c-270">Para ver lo que Visual Studio hizo al implementar la aplicación, abra Scripts\Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="8010c-270">To see what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="8010c-271">Hay una gran cantidad de código, pero solo voy a resaltar todo el código pertinente que necesita para implementar el archivo de plantilla con el archivo de parámetros.</span><span class="sxs-lookup"><span data-stu-id="8010c-271">There’s a lot of code there, but I’m just going to highlight all the pertinent code you need to deploy the template file with the parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="8010c-272">El último cmdlet, `New-AzureResourceGroup`, es el que realmente realiza la acción.</span><span class="sxs-lookup"><span data-stu-id="8010c-272">The last cmdlet, `New-AzureResourceGroup`, is the one that actually performs the action.</span></span> <span data-ttu-id="8010c-273">Todo esto debería demostrará que, con la ayuda de herramientas, es relativamente fácil implementar su aplicación de nube de manera predecible.</span><span class="sxs-lookup"><span data-stu-id="8010c-273">All this should demonstrate to you that, with the help of tooling, it is relatively straightforward to deploy your cloud application predictably.</span></span> <span data-ttu-id="8010c-274">Cada vez que ejecute el cmdlet en la misma plantilla con el mismo archivo de parámetros, obtendrá el mismo resultado.</span><span class="sxs-lookup"><span data-stu-id="8010c-274">Every time you run the cmdlet on the same template with the same parameter file, you’re going to get the same result.</span></span>

## <a name="summary"></a><span data-ttu-id="8010c-275">Resumen</span><span class="sxs-lookup"><span data-stu-id="8010c-275">Summary</span></span>
<span data-ttu-id="8010c-276">En las operaciones de desarrollo, la repetibilidad y previsión son claves para cualquier implementación correcta de una aplicación de gran escala compuesta por microservicios.</span><span class="sxs-lookup"><span data-stu-id="8010c-276">In DevOps, repeatability and predictability are keys to any successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="8010c-277">En este tutorial, ha implementado una aplicación de dos microservicios en Azure como un único grupo de recursos con la plantilla de Administrador de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8010c-277">In this tutorial, you have deployed a two-microservice application to Azure as a single resource group using the Azure Resource Manager template.</span></span> <span data-ttu-id="8010c-278">Espero que le haya aportado los conocimientos que necesita para iniciar la conversión de la aplicación de Azure a una plantilla a fin de que pueda aprovisionarla e implementarla de manera predecible.</span><span class="sxs-lookup"><span data-stu-id="8010c-278">Hopefully, it has given you the knowledge you need in order to start converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="8010c-279">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8010c-279">Next Steps</span></span>
<span data-ttu-id="8010c-280">Obtenga información sobre cómo [aplicar con facilidad metodologías ágiles y publicar continuamente la aplicación de microservicios](app-service-agile-software-development.md). Conozca además técnicas de implementación avanzadas como la [implementación de la distribución de paquetes piloto](app-service-web-test-in-production-controlled-test-flight.md).</span><span class="sxs-lookup"><span data-stu-id="8010c-280">Find out how to [apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="8010c-281">Más recursos</span><span class="sxs-lookup"><span data-stu-id="8010c-281">More resources</span></span>
* [<span data-ttu-id="8010c-282">Idioma de la plantilla del Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-282">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="8010c-283">Creación de plantillas del Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-283">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="8010c-284">Funciones de la plantilla del Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-284">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="8010c-285">Implementación de una aplicación con la plantilla del Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-285">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="8010c-286">Uso de Azure PowerShell con el Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-286">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="8010c-287">Solución de problemas de implementaciones de grupo de recursos en Azure</span><span class="sxs-lookup"><span data-stu-id="8010c-287">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)


---
title: Procedimientos recomendados para el Servicio de aplicaciones de Azure
description: "Información acerca de los procedimientos recomendados y la solución de problemas del Servicio de aplicaciones de Azure."
services: app-service
documentationcenter: 
author: dariagrigoriu
manager: erikre
editor: mollybos
ms.assetid: f3359464-fa44-4f4a-9ea6-7821060e8d0d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: dariagrigoriu
ms.openlocfilehash: fd94f5b17f69dec91c78c8acfbac2eaf5787c010
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="best-practices-for-azure-app-service"></a><span data-ttu-id="ecb3e-103">Procedimientos recomendados para el Servicio de aplicaciones de Azure</span><span class="sxs-lookup"><span data-stu-id="ecb3e-103">Best Practices for Azure App Service</span></span>
<span data-ttu-id="ecb3e-104">En este artículo se resumen los procedimientos recomendados para usar el [Servicio de aplicaciones de Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-104">This article summarizes best practices for using [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> 

## <span data-ttu-id="ecb3e-105"><a name="colocation"></a>Ubicación compartida</span><span class="sxs-lookup"><span data-stu-id="ecb3e-105"><a name="colocation"></a>Colocation</span></span>
<span data-ttu-id="ecb3e-106">Cuando los recursos de Azure que componen una solución como una aplicación web y una base de datos se encuentran en regiones diferentes los efectos pueden incluir:</span><span class="sxs-lookup"><span data-stu-id="ecb3e-106">When Azure resources composing a solution such as a web app and a database are located in different regions the effects can include the following:</span></span>

* <span data-ttu-id="ecb3e-107">Mayor latencia en la comunicación entre recursos</span><span class="sxs-lookup"><span data-stu-id="ecb3e-107">Increased latency in communication between resources</span></span>
* <span data-ttu-id="ecb3e-108">Cargos monetarios de transferencia de datos entre regiones como se indica en el [página de precios de Azure](https://azure.microsoft.com/pricing/details/data-transfers)</span><span class="sxs-lookup"><span data-stu-id="ecb3e-108">Monetary charges for outbound data transfer cross-region as noted on the [Azure pricing page](https://azure.microsoft.com/pricing/details/data-transfers).</span></span>

<span data-ttu-id="ecb3e-109">Para los recursos de Azure que componen una solución, como una aplicación web y una cuenta de almacenamiento o base de datos usada para mantener el contenido o los datos, se recomienda que la ubicación compartida se encuentre en la misma región.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-109">Colocation in the same region is best for Azure resources composing a solution such as a web app and a database or storage account used to hold content or data.</span></span> <span data-ttu-id="ecb3e-110">Al crear recursos es preciso asegurarse de que estén de la misma región de Azure, salvo que haya motivos comerciales o de diseño concretos para que no lo estén.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-110">When creating resources you should make sure they are in the same Azure region unless you have specific business or design reason for them not to be.</span></span> <span data-ttu-id="ecb3e-111">Para mover una aplicación del Servicio de aplicaciones a la región de la base de datos, utilice la [característica de clonación del Servicio de aplicaciones](app-service-web-app-cloning-portal.md) , que actualmente está disponible para las aplicaciones del servicio de aplicaciones Premium.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-111">You can move an App Service app to the same region as your database by leveraging the [App Service cloning feature](app-service-web-app-cloning-portal.md) currently available for Premium App Service Plan apps.</span></span>   

## <span data-ttu-id="ecb3e-112"><a name="memoryresources"></a>Cuando las aplicaciones consumen más memoria de lo esperado</span><span class="sxs-lookup"><span data-stu-id="ecb3e-112"><a name="memoryresources"></a>When apps consume more memory than expected</span></span>
<span data-ttu-id="ecb3e-113">Si observa que una aplicación consume más memoria de lo esperado, lo que se indica a través de la supervisión o de recomendaciones de servicio, considere la posibilidad de usar la [característica de recuperación automática del Servicio de aplicaciones](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-113">When you notice an app consumes more memory than expected as indicated via monitoring or service recommendations consider the [App Service Auto-Healing feature](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span></span> <span data-ttu-id="ecb3e-114">Una de las opciones de esta característica es que realiza acciones personalizadas en función de un umbral de memoria.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-114">One of the options for the Auto-Healing feature is taking custom actions based on a memory threshold.</span></span> <span data-ttu-id="ecb3e-115">Las acciones abarcan todo el espectro, desde las notificaciones por correo electrónico a la investigación a través de volcado de memoria a la mitigación inmediata mediante el reciclado del proceso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-115">Actions span the spectrum from email notifications to investigation via memory dump to on-the-spot mitigation by recycling the worker process.</span></span> <span data-ttu-id="ecb3e-116">La recuperación automática se puede configurar tanto a través de web.config como a través de una interfaz de usuario, tal y como se describe en esta entrada del blog [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps)(Extensión del sitio de soporte del Servicio de aplicaciones).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-116">Auto-healing can be configured via web.config and via a friendly user interface as described at in this blog post for the [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span></span>   

## <span data-ttu-id="ecb3e-117"><a name="CPUresources"></a>Cuando las aplicaciones consumen más CPU de lo esperado</span><span class="sxs-lookup"><span data-stu-id="ecb3e-117"><a name="CPUresources"></a>When apps consume more CPU than expected</span></span>
<span data-ttu-id="ecb3e-118">Si observa que una aplicación consume más CPU de lo esperado o experimenta repetidas puntas de actividad de la CPU como indican la supervisión o las recomendaciones de servicio, considere la posibilidad de escalar el plan del servicio de aplicaciones vertical u horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-118">When you notice an app consumes more CPU than expected or experiences repeated CPU spikes as indicated via monitoring or service recommendations consider scaling up or scaling out the App Service plan.</span></span> <span data-ttu-id="ecb3e-119">Si una aplicación es con estado, el escalado vertical es la única opción, mientras que si es sin estado, el escalado horizontal le proporcionará mayor flexibilidad y mayor potencial de escalado.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-119">If your application is statefull, scaling up is the only option, while if your application is stateless, scaling out will give you more flexibility and higher scale potential.</span></span> 

<span data-ttu-id="ecb3e-120">Para obtener más información sobre las aplicaciones "con estado" y "sin estado", puede ver este vídeo: [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid)(Planeamiento de una aplicación completa de niveles múltiples en una aplicación web de Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-120">For more information about “statefull” vs “stateless” applications you can watch this video: [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid).</span></span> <span data-ttu-id="ecb3e-121">Para obtener más información sobre las opciones de escalado y escalado automático del Servicio de aplicaciones, consulte [Escalación de una aplicación web en el Servicio de aplicaciones de Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-121">For more information about App Service scaling and autoscaling options read: [Scale a Web App in Azure App Service](web-sites-scale.md).</span></span>  

## <span data-ttu-id="ecb3e-122"><a name="socketresources"></a>Cuando se agotan los recursos del socket</span><span class="sxs-lookup"><span data-stu-id="ecb3e-122"><a name="socketresources"></a>When socket resources are exhausted</span></span>
<span data-ttu-id="ecb3e-123">Una razón habitual para agotar las conexiones TCP salientes es el uso de bibliotecas de cliente que no se han implementado para reutilizar las conexiones TCP o en el caso de un protocolo de nivel superior como HTTP, no saca provecho de las conexiones persistentes.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-123">A common reason for exhausting outbound TCP connections is the use of client libraries which are not implemented to reuse TCP connections, or in the case of a higher level protocol such as HTTP - Keep-Alive not being leveraged.</span></span> <span data-ttu-id="ecb3e-124">Revise la documentación de las bibliotecas a las que hacen referencia las aplicaciones del plan del servicio de aplicaciones para asegurarse de que se configuran o se tiene acceso a ellas en el código para una reutilización eficiente de las conexiones salientes.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-124">Please review the documentation for each of the libraries referenced by the apps in your App Service Plan to ensure they are configured or accessed in your code for efficient reuse of outbound connections.</span></span> <span data-ttu-id="ecb3e-125">Siga también la guía de la documentación de la biblioteca para que la creación y liberación, o la limpieza sean correctas para evitar las conexiones con fugas.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-125">Also follow the library documentation guidance for proper creation and release or cleanup to avoid leaking connections.</span></span> <span data-ttu-id="ecb3e-126">Aunque las investigaciones de estas bibliotecas de cliente están en curso, el impacto se pueden mitiga mediante el escalado horizontal a varias instancias.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-126">While such client libraries investigations are in progress impact may be mitigated by scaling out to multiple instances.</span></span>  

## <span data-ttu-id="ecb3e-127"><a name="appbackup"></a>Cuando la copia de seguridad de la aplicación comienza a fallar</span><span class="sxs-lookup"><span data-stu-id="ecb3e-127"><a name="appbackup"></a>When your app backup starts failing</span></span>
<span data-ttu-id="ecb3e-128">Los dos principales motivos por los que comienza a fallar la copia de seguridad de una aplicación son una configuración de almacenamiento no válida y una configuración de base de datos no válida.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-128">The two most common reasons why app backup fails are: invalid storage settings and invalid database configuration.</span></span> <span data-ttu-id="ecb3e-129">Estos errores suelen ocurrir cuando se producen cambios en los recursos de almacenamiento o de base de datos o en el acceso a estos recursos (por ejemplo, la actualización de las credenciales de la base de datos seleccionada en la configuración de copia de seguridad).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-129">These failures typically happen when there are changes to storage or database resources, or changes for how to access these resources (e.g. credentials updated for the database selected in the backup settings).</span></span> <span data-ttu-id="ecb3e-130">Las copias de seguridad suelen ejecutarse según una programación y requieren acceso al almacenamiento (para generar los archivos de copia de seguridad) y a las bases de datos (para copiar y leer el contenido que se incluirá en la copia de seguridad).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-130">Backups typically run on a schedule and require access to storage (for outputting the backed up files) and databases (for copying and reading contents to be included in the backup).</span></span> <span data-ttu-id="ecb3e-131">Si no se tiene acceso a cualquiera de estos recursos, se produciría un error de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-131">The result of failing to access either of these resources would be consistent backup failure.</span></span> 

<span data-ttu-id="ecb3e-132">Cuando aparecen errores de copia de seguridad, revise los resultados más recientes para saber qué tipo de error se está produciendo.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-132">When backup failures happen, please review most recent results to understand which type of failure is happening.</span></span> <span data-ttu-id="ecb3e-133">En el caso de errores de acceso de almacenamiento, revise y actualice la configuración de almacenamiento utilizada en la configuración de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-133">In the case of storage access failures, please review and update the storage settings used in the backup configuration.</span></span> <span data-ttu-id="ecb3e-134">En el caso de errores de acceso de la base de datos, revise y actualice las cadenas de conexiones como parte de la configuración de la aplicación. Después, continúe para actualizar la configuración de copia de seguridad con el fin de incluir correctamente las bases de datos necesarias.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-134">In the case of database access failures, please review and update your connections strings as part of app settings; then proceed to update your backup configuration to properly include the required databases.</span></span> <span data-ttu-id="ecb3e-135">Para más información sobre la copia de seguridad de aplicaciones, consulte el documento [Realizar una copia de seguridad de la aplicación en Azure](web-sites-backup.md).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-135">For more information on app backup please see the [Back up a web app in Azure App Service](web-sites-backup.md) documentation.</span></span>

## <span data-ttu-id="ecb3e-136"><a name="nodejs"></a>Cuando se implementan nuevas aplicaciones de Node.js en el Servicio de aplicaciones de Azure</span><span class="sxs-lookup"><span data-stu-id="ecb3e-136"><a name="nodejs"></a>When new Node.js apps are deployed to Azure App Service</span></span>
<span data-ttu-id="ecb3e-137">La configuración predeterminada del Servicio de aplicaciones de Azure para las aplicaciones Node.js tiene que como objetivo satisfacer mejor los requisitos de las aplicaciones más comunes.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-137">Azure App Service default configuration for Node.js apps is intended to best suit the needs of most common apps.</span></span> <span data-ttu-id="ecb3e-138">Si considera que la configuración de la aplicación Node.js va a beneficiarse del ajuste personalizado para mejorar el rendimiento o para optimizar el uso de recursos para los recursos de la CPU, memoria o red, podría consultar nuestras prácticas recomendadas y pasos para solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="ecb3e-138">If configuration for your Node.js app would benefit from personalized tuning to improve performance or optimize resource usage for CPU/memory/network resources, you could review our best practices and troubleshooting steps.</span></span> <span data-ttu-id="ecb3e-139">En este artículo se describe las opciones de IISNode que pueda necesitar para configurar una aplicación de Node.js, así como los distintos escenarios o problemas de dicha aplicación. También se muestra cómo solucionar estos problemas: [Guía de procedimientos recomendados y solución de problemas para aplicaciones Node en Aplicaciones web de Azure](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span><span class="sxs-lookup"><span data-stu-id="ecb3e-139">This documentation article describes the iisnode settings you may need to configure for your Node.js app, describes the various scenarios or issues that your app may be facing, and shows how to address these issues: [Best practices and troubleshooting guide for Node applications on Azure App Service](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span></span>   


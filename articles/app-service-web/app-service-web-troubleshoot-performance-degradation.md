---
title: Rendimiento reducido de las aplicaciones web en App Service | Microsoft Docs
description: "Este artículo lo ayuda a solucionar los problemas de rendimiento reducido en las aplicaciones web de Azure App Service."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "rendimiento de aplicaciones web, aplicación lenta, aplicaciones lentas"
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 1cfe7ec37ad8b24a8bd9ab2bf67e95675a57b675
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="7e4a2-104">Solucionar los problemas de rendimiento reducido de aplicaciones web en Azure App Service</span><span class="sxs-lookup"><span data-stu-id="7e4a2-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="7e4a2-105">Este artículo lo ayuda a solucionar los problemas de rendimiento reducido en las aplicaciones web de [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="7e4a2-106">Si necesita más ayuda en cualquier momento con este artículo, puede ponerse en contacto con los expertos de Azure en [los foros de MSDN Azure y de desbordamiento de pila](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-106">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="7e4a2-107">Como alternativa, también puede registrar un incidente de soporte técnico de Azure.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="7e4a2-108">Vaya al [sitio de soporte técnico de Azure](https://azure.microsoft.com/support/options/) y haga clic en **Obtener soporte técnico**.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-108">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="7e4a2-109">Síntoma</span><span class="sxs-lookup"><span data-stu-id="7e4a2-109">Symptom</span></span>
<span data-ttu-id="7e4a2-110">Al examinar la aplicación web, las páginas se cargan lentamente y, en ocasiones, se agota el tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-110">When you browse the web app, the pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="7e4a2-111">Causa</span><span class="sxs-lookup"><span data-stu-id="7e4a2-111">Cause</span></span>
<span data-ttu-id="7e4a2-112">Con frecuencia este problema se debe a problemas en el nivel de la aplicación, como, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="7e4a2-113">Solicitudes de redes que tardan mucho tiempo</span><span class="sxs-lookup"><span data-stu-id="7e4a2-113">network requests taking a long time</span></span>
* <span data-ttu-id="7e4a2-114">Consultas de código de aplicación o base de datos que no son eficaces</span><span class="sxs-lookup"><span data-stu-id="7e4a2-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="7e4a2-115">Aplicaciones que hacen un uso elevado de memoria y CPU</span><span class="sxs-lookup"><span data-stu-id="7e4a2-115">application using high memory/CPU</span></span>
* <span data-ttu-id="7e4a2-116">Aplicaciones que se bloquean debido a una excepción</span><span class="sxs-lookup"><span data-stu-id="7e4a2-116">application crashing due to an exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="7e4a2-117">Pasos para solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="7e4a2-117">Troubleshooting steps</span></span>
<span data-ttu-id="7e4a2-118">El procedimiento de solución de problemas se puede dividir en tres tareas distintas, en orden secuencial:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="7e4a2-119">Observación y supervisión del comportamiento de la aplicación</span><span class="sxs-lookup"><span data-stu-id="7e4a2-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="7e4a2-120">Recopilación de datos</span><span class="sxs-lookup"><span data-stu-id="7e4a2-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="7e4a2-121">Mitigación del problema</span><span class="sxs-lookup"><span data-stu-id="7e4a2-121">Mitigate the issue</span></span>](#mitigate)

<span data-ttu-id="7e4a2-122">[Azure App Service Web Apps](/services/app-service/web/) ofrece diversas opciones en cada paso.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="7e4a2-123">1. Observación y supervisión del comportamiento de la aplicación</span><span class="sxs-lookup"><span data-stu-id="7e4a2-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="7e4a2-124">Seguimiento del estado del servicio</span><span class="sxs-lookup"><span data-stu-id="7e4a2-124">Track Service health</span></span>
<span data-ttu-id="7e4a2-125">Cada vez que hay una interrupción del servicio o una degradación del rendimiento, Microsoft Azure lo anuncia.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="7e4a2-126">Puede realizar un seguimiento del estado del servicio en [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-126">You can track the health of the service on the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="7e4a2-127">Para más información, consulte [Track service health](../monitoring-and-diagnostics/insights-service-health.md) (Seguimiento del estado del servicio).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="7e4a2-128">Supervisión de la aplicación web</span><span class="sxs-lookup"><span data-stu-id="7e4a2-128">Monitor your web app</span></span>
<span data-ttu-id="7e4a2-129">Esta opción le permite averiguar si la aplicación tiene problemas.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-129">This option enables you to find out if your application is having any issues.</span></span> <span data-ttu-id="7e4a2-130">En la hoja de la aplicación web, haga clic en el icono **Solicitudes y errores** .</span><span class="sxs-lookup"><span data-stu-id="7e4a2-130">In your web app’s blade, click the **Requests and errors** tile.</span></span> <span data-ttu-id="7e4a2-131">La hoja **Métrica** muestra todas las métricas que puede agregar.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-131">The **Metric** blade shows you all the metrics you can add.</span></span>

<span data-ttu-id="7e4a2-132">Algunas de las métricas que podría querer supervisar para su aplicación web son:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-132">Some of the metrics that you might want to monitor for your web app are</span></span>

* <span data-ttu-id="7e4a2-133">Espacio de trabajo de memoria promedio</span><span class="sxs-lookup"><span data-stu-id="7e4a2-133">Average memory working set</span></span>
* <span data-ttu-id="7e4a2-134">Tiempo medio de respuesta</span><span class="sxs-lookup"><span data-stu-id="7e4a2-134">Average response time</span></span>
* <span data-ttu-id="7e4a2-135">Tiempo de CPU</span><span class="sxs-lookup"><span data-stu-id="7e4a2-135">CPU time</span></span>
* <span data-ttu-id="7e4a2-136">Espacio de trabajo de memoria</span><span class="sxs-lookup"><span data-stu-id="7e4a2-136">Memory working set</span></span>
* <span data-ttu-id="7e4a2-137">Solicitudes</span><span class="sxs-lookup"><span data-stu-id="7e4a2-137">Requests</span></span>

![supervisar el rendimiento de aplicaciones web](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="7e4a2-139">Para más información, consulte:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-139">For more information, see:</span></span>

* [<span data-ttu-id="7e4a2-140">Supervisión de aplicaciones web en Azure App Service</span><span class="sxs-lookup"><span data-stu-id="7e4a2-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="7e4a2-141">Recibir notificaciones de alerta</span><span class="sxs-lookup"><span data-stu-id="7e4a2-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="7e4a2-142">estado de extremo web</span><span class="sxs-lookup"><span data-stu-id="7e4a2-142">Monitor web endpoint status</span></span>
<span data-ttu-id="7e4a2-143">Si ejecuta la aplicación web en el plan de tarifa **Estándar**, Web Apps le permite supervisar dos puntos de conexión de tres ubicaciones geográficas.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-143">If you are running your web app in the **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="7e4a2-144">La supervisión de extremo configura pruebas web desde ubicaciones distribuidas geográficamente que prueban el tiempo de respuesta y el tiempo activo de direcciones URL web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="7e4a2-145">La prueba realiza una operación HTTP Get en la dirección URL web para determinar el tiempo de respuesta y el tiempo de actividad desde cada ubicación.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-145">The test performs an HTTP GET operation on the web URL to determine the response time and uptime from each location.</span></span> <span data-ttu-id="7e4a2-146">Cada ubicación configurada ejecuta una prueba cada cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="7e4a2-147">El tiempo activo se supervisa a través de códigos de respuesta de HTTP y el tiempo de respuesta se mide en milisegundos.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="7e4a2-148">Una prueba de supervisión da error si el código de respuesta HTTP es mayor o igual que 400 o si la respuesta demora más de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-148">A monitoring test fails if the HTTP response code is greater than or equal to 400 or if the response takes more than 30 seconds.</span></span> <span data-ttu-id="7e4a2-149">Un extremo se considera disponible si sus pruebas de supervisión se realizan correctamente desde todas las ubicaciones especificadas.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-149">An endpoint is considered available if its monitoring tests succeed from all the specified locations.</span></span>

<span data-ttu-id="7e4a2-150">Para configurarlo, consulte [Supervisión de Aplicaciones en Azure App Service](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-150">To set it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="7e4a2-151">Consulte también [Mantenimiento de Sitios web de Azure activos y supervisión de puntos de conexión: con Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) para ver un vídeo sobre la supervisión de los puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="7e4a2-152">Supervisión del rendimiento de la aplicación mediante el uso de extensiones</span><span class="sxs-lookup"><span data-stu-id="7e4a2-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="7e4a2-153">También puede supervisar el rendimiento de la aplicación mediante las *extensiones de sitio*.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="7e4a2-154">Cada aplicación web de App Service proporciona un punto de conexión de administración extensible que le permite usar un eficaz conjunto de herramientas implementadas como extensiones del sitio.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-154">Each App Service web app provides an extensible management end point that allows you to use a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="7e4a2-155">Entre las extensiones se incluyen:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-155">Extensions include:</span></span> 

- <span data-ttu-id="7e4a2-156">Editores de código fuente como [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="7e4a2-157">Las herramientas de administración de los recursos conectados como, por ejemplo, una base de datos de MySQL conectada a una aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-157">Management tools for connected resources such as a MySQL database connected to a web app.</span></span>

<span data-ttu-id="7e4a2-158">[Azure Application Insights](/services/application-insights/) y [New Relic](/marketplace/partners/newrelic/newrelic/) son dos de las extensiones de sitio de supervisión del rendimiento que se encuentran disponibles.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of the performance monitoring site extensions that are available.</span></span> <span data-ttu-id="7e4a2-159">Para usar New Relic, instale a un agente en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-159">To use New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="7e4a2-160">Para usar Application Insights de Azure, vuelva a compilar el código con un SDK; también puede instalar una extensión que proporciona acceso a datos adicionales.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-160">To use Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access to additional data.</span></span> <span data-ttu-id="7e4a2-161">El SDK permite escribir código para supervisar el uso y el rendimiento de la aplicación con más detalle.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-161">The SDK lets you write code to monitor the usage and performance of your app in more detail.</span></span>

<span data-ttu-id="7e4a2-162">Para usar Application Insights, consulte [Supervisión del rendimiento en las aplicaciones web](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-162">To use Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="7e4a2-163">Para usar New Relic, consulte [Administración del rendimiento de las aplicaciones de New Relic en Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-163">To use New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="7e4a2-164">2. Recopilación de datos</span><span class="sxs-lookup"><span data-stu-id="7e4a2-164">2. Collect data</span></span>
<span data-ttu-id="7e4a2-165">El entorno Web Apps proporciona funciones de diagnóstico para registrar información del servidor web y de la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-165">The Web Apps environment provides diagnostic functionality for logging information from both the web server and the web application.</span></span> <span data-ttu-id="7e4a2-166">La información se divide en diagnósticos del servidor web y diagnósticos de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-166">The information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="7e4a2-167">Habilitar diagnósticos del servidor web</span><span class="sxs-lookup"><span data-stu-id="7e4a2-167">Enable web server diagnostics</span></span>
<span data-ttu-id="7e4a2-168">Puede habilitar o deshabilitar los siguientes tipos de registros:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-168">You can enable or disable the following kinds of logs:</span></span>

* <span data-ttu-id="7e4a2-169">**Registro de errores detallado** : registra información detallada de errores para códigos de estado HTTP que indican un problema (código de estado 400 o superior).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="7e4a2-170">Puede contener información que puede ayudar a determinar por qué el servidor ha devuelto el código de error.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-170">This may contain information that can help determine why the server returned the error code.</span></span>
* <span data-ttu-id="7e4a2-171">**Seguimiento de solicitudes con error** : registra información detallada acerca de solicitudes con error, incluido un seguimiento de los componentes de IIS usados para procesar la solicitud y el tiempo dedicado a cada componente.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of the IIS components used to process the request and the time taken in each component.</span></span> <span data-ttu-id="7e4a2-172">Esto puede resultar útil si está intentando mejorar el rendimiento de las aplicaciones web o de aislar la causa de un error HTTP determinado.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-172">This can be useful if you are attempting to improve web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="7e4a2-173">**Registro del servidor web** : registra todas las transacciones HTTP con el formato de archivo de registro extendido de W3C.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-173">**Web Server Logging** - Information about HTTP transactions using the W3C extended log file format.</span></span> <span data-ttu-id="7e4a2-174">Este informe resulta útil para determinar las métricas totales de la aplicación web, como el número de solicitudes tramitadas o cuántas solicitudes proceden de una dirección IP específica.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-174">This is useful when determining overall web app metrics, such as the number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="7e4a2-175">Habilitar diagnósticos de la aplicación</span><span class="sxs-lookup"><span data-stu-id="7e4a2-175">Enable application diagnostics</span></span>
<span data-ttu-id="7e4a2-176">Existen varias opciones para recopilar los datos de rendimiento de Web Apps, generar el perfil de la aplicación en directo desde Visual Studio, o modificar el código de la aplicación para registrar más información y seguimientos.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-176">There are several options to collect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code to log more information and traces.</span></span> <span data-ttu-id="7e4a2-177">Puede elegir las opciones en función de cuántos accesos tiene a la aplicación y de lo que ha observado con las herramientas de supervisión.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-177">You can choose the options based on how much access you have to the application and what you observed from the monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="7e4a2-178">Uso de Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="7e4a2-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="7e4a2-179">Puede habilitar Application Insights Profiler para empezar a capturar seguimientos detallados de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-179">You can enable the Application Insights Profiler to start capturing detailed performance traces.</span></span> <span data-ttu-id="7e4a2-180">Puede acceder a los seguimientos capturados de hace cinco días como máximo cuando lo necesite para investigar los problemas que se produjeron en el pasado.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-180">You can access traces captured up to five days ago when you need to investigate problems happened in the past.</span></span> <span data-ttu-id="7e4a2-181">Puede elegir esta opción siempre que tenga acceso al recurso de Application Insights de la aplicación web en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-181">You can choose this option as long as you have access to the web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="7e4a2-182">Application Insights Profiler proporciona estadísticas sobre el tiempo de respuesta de cada llamada web y seguimiento que indican cuál es la línea de código que provocó las respuestas lentas.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused the slow responses.</span></span> <span data-ttu-id="7e4a2-183">En ocasiones, la aplicación de App Service es lenta porque determinado código no está escrito pensando en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-183">Sometimes the App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="7e4a2-184">Por ejemplo, código secuencial que se puede ejecutar en paralelo y contenciones de bloqueo de base de datos no deseadas.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="7e4a2-185">La eliminación de estos cuellos de botella en el código aumenta el rendimiento de la aplicación, pero son difíciles de detectar sin configurar elaborados registros y seguimientos.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-185">Removing these bottlenecks in the code increases the app's performance, but they are hard to detect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="7e4a2-186">Los seguimientos recopilados por Application Insights Profiler ayudan a identificar las líneas de código que ralentizan la aplicación y a superar este desafío para las aplicaciones de App Service.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-186">The traces collected by Application Insights Profiler helps identifying the lines of code that slows down the application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="7e4a2-187">Para más información, consulte [Generación de perfiles de aplicaciones web activas de Azure con Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="7e4a2-188">Uso de la generación remota de perfiles</span><span class="sxs-lookup"><span data-stu-id="7e4a2-188">Use Remote Profiling</span></span>
<span data-ttu-id="7e4a2-189">En Azure App Service, se pueden generar perfiles de forma remota de aplicaciones web, aplicaciones de API y WebJobs.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="7e4a2-190">Elija esta opción si tiene acceso al recurso de la aplicación web y sabe cómo reproducir el problema o si conoce el intervalo de tiempo exacto en que ocurre el problema de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-190">Choose this option if you have access to the web app resource and you know how to reproduce the issue, or if you know the exact time interval the performance issue happens.</span></span>

<span data-ttu-id="7e4a2-191">La generación de perfiles remota puede resultar útil si el uso de CPU del proceso es elevado y el proceso se ejecuta más lento de lo esperado o la latencia de las solicitudes HTTP es superior a la normal. En estos casos, puede generar un perfil para su proceso de forma remota y obtener las pilas de llamada de muestreo de CPU para analizar la actividad del proceso y las rutas de acceso activas del código.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-191">Remote Profiling is useful if the CPU usage of the process is high and your process is running slower than expected, or the latency of HTTP requests are higher than normal, you can remotely profile your process and get the CPU sampling call stacks to analyze the process activity and code hot paths.</span></span>

<span data-ttu-id="7e4a2-192">Para más información, consulte [Compatibilidad con la generación remota de perfiles en Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="7e4a2-193">Establecimiento manual de los seguimientos de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="7e4a2-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="7e4a2-194">Si tiene acceso al código fuente de la aplicación web, el diagnóstico de aplicaciones le permite capturar información generada por una aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-194">If you have access to the web application source code, Application diagnostics enables you to capture information produced by a web application.</span></span> <span data-ttu-id="7e4a2-195">Las aplicaciones de ASP.NET pueden usar la clase `System.Diagnostics.Trace` para registrar información en el registro de diagnóstico de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-195">ASP.NET applications can use the `System.Diagnostics.Trace` class to log information to the application diagnostics log.</span></span> <span data-ttu-id="7e4a2-196">Sin embargo, debe cambiar el código y volver a implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-196">However, you need to change the code and redeploy your application.</span></span> <span data-ttu-id="7e4a2-197">Este método es recomendable si la aplicación se ejecuta en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="7e4a2-198">Para obtener instrucciones detalladas sobre cómo configurar su aplicación para el registro, consulte [Habilitación del registro de diagnóstico para aplicaciones web en Azure App Service](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-198">For detailed instructions on how to configure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-the-azure-app-service-support-portal"></a><span data-ttu-id="7e4a2-199">Uso del portal de soporte técnico de Azure App Service</span><span class="sxs-lookup"><span data-stu-id="7e4a2-199">Use the Azure App Service support portal</span></span>
<span data-ttu-id="7e4a2-200">El servicio Web Apps ofrece la posibilidad de solucionar los problemas relacionados con su aplicación web con solo examinar los registros HTTP, los registros de eventos, los volcados de proceso, etc.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-200">Web Apps provides you with the ability to troubleshoot issues related to your web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="7e4a2-201">Puede tener acceso a toda esta información con nuestro Portal de soporte técnico en **http://&lt;Nombre de la aplicación>.scm.azurewebsites.net/Support**.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="7e4a2-202">El portal de soporte técnico de Azure App Service le proporciona tres pestañas distintas correspondientes a los tres pasos de un escenario común de solución de problemas:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-202">The Azure App Service support portal provides you with three separate tabs to support the three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="7e4a2-203">Observación del comportamiento actual</span><span class="sxs-lookup"><span data-stu-id="7e4a2-203">Observe current behavior</span></span>
2. <span data-ttu-id="7e4a2-204">Análisis mediante la recopilación de información de diagnóstico y la ejecución de los analizadores integrados</span><span class="sxs-lookup"><span data-stu-id="7e4a2-204">Analyze by collecting diagnostics information and running the built-in analyzers</span></span>
3. <span data-ttu-id="7e4a2-205">Mitigación</span><span class="sxs-lookup"><span data-stu-id="7e4a2-205">Mitigate</span></span>

<span data-ttu-id="7e4a2-206">Si el problema está sucediendo justo ahora, haga clic en **Analizar** > **Diagnósticos** > **Diagnosticar ahora** para crear una sesión de diagnóstico, que recopilará registros HTTP, registros del visor de eventos, volcados de memoria, registros de errores PHP e informes de procesos PHP.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-206">If the issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** to create a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="7e4a2-207">Después de la recopilación de los datos, el portal de soporte técnico también ejecuta un análisis de ellos y se proporciona un informe HTML.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-207">Once the data is collected, the support portal runs an analysis on the data and provides you with an HTML report.</span></span>

<span data-ttu-id="7e4a2-208">En caso de que quiera descargar los datos, de forma predeterminada se almacenarían en la carpeta D:\home\data\DaaS.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-208">In case you want to download the data, by default, it would be stored in the D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="7e4a2-209">Para más información sobre el portal de soporte técnico de Azure App Service, consulte [Nuevas actualizaciones de la extensión de sitios de soporte técnico para Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-209">For more information on the Azure App Service support portal, see [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-the-kudu-debug-console"></a><span data-ttu-id="7e4a2-210">Uso de la consola de depuración Kudu</span><span class="sxs-lookup"><span data-stu-id="7e4a2-210">Use the Kudu Debug Console</span></span>
<span data-ttu-id="7e4a2-211">El servicio Web Apps incluye una consola de depuración que puede usar para depurar, explorar o cargar archivos, e incluye también puntos de conexión JSON para obtener información sobre su entorno.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="7e4a2-212">A esta consola se le denomina *Consola Kudu* o *Panel SCM* para la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-212">This console is called the *Kudu Console* or the *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="7e4a2-213">Puede tener acceso a este panel en el vínculo **https://&lt;Nombre de la aplicación>.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-213">You can access this dashboard by going to the link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="7e4a2-214">Algunas de las cosas que proporciona Kudu son:</span><span class="sxs-lookup"><span data-stu-id="7e4a2-214">Some of the things that Kudu provides are:</span></span>

* <span data-ttu-id="7e4a2-215">Configuración del entorno de la aplicación</span><span class="sxs-lookup"><span data-stu-id="7e4a2-215">environment settings for your application</span></span>
* <span data-ttu-id="7e4a2-216">transmisión de registro</span><span class="sxs-lookup"><span data-stu-id="7e4a2-216">log stream</span></span>
* <span data-ttu-id="7e4a2-217">Volcado de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="7e4a2-217">diagnostic dump</span></span>
* <span data-ttu-id="7e4a2-218">Depuración de la consola en la que puede ejecutar cmdlets de Powershell y comandos básicos de DOS.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="7e4a2-219">Otra característica útil de Kudu es que, en caso de que la aplicación inicie excepciones de primera oportunidad, puede usar Kudu y la herramienta Procdump de SysInternals para crear volcados de memoria.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and the SysInternals tool Procdump to create memory dumps.</span></span> <span data-ttu-id="7e4a2-220">Estos volcados de memoria son instantáneas del proceso y a menudo pueden ayudarle solucionar problemas más complicados de su aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-220">These memory dumps are snapshots of the process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="7e4a2-221">Para obtener más información sobre las características disponibles en Kudu, consulte [Herramientas de Azure Websites Team Services que debe conocer](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-the-issue"></a><span data-ttu-id="7e4a2-222">3. Mitigación del problema</span><span class="sxs-lookup"><span data-stu-id="7e4a2-222">3. Mitigate the issue</span></span>
#### <a name="scale-the-web-app"></a><span data-ttu-id="7e4a2-223">Escalado de la aplicación web</span><span class="sxs-lookup"><span data-stu-id="7e4a2-223">Scale the web app</span></span>
<span data-ttu-id="7e4a2-224">En Azure App Service, puede ajustar la escala en la que se ejecuta la aplicación para aumentar el rendimiento y la capacidad de proceso.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-224">In Azure App Service, for increased performance and throughput,  you can adjust the scale at which you are running your application.</span></span> <span data-ttu-id="7e4a2-225">El escalado vertical de una aplicación web implica dos acciones relacionadas: cambiar el plan de App Service por un plan de tarifa más alto y configurar determinados valores después de haber cambiado a ese plan de tarifa más alto.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-225">Scaling up a web app involves two related actions: changing your App Service plan to a higher pricing tier, and configuring certain settings after you have switched to the higher pricing tier.</span></span>

<span data-ttu-id="7e4a2-226">Para obtener más información sobre el escalado, consulte [Escalado de una aplicación web en Azure App Service](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="7e4a2-227">Además, puede elegir ejecutar la aplicación en más de una instancia.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-227">Additionally, you can choose to run your application on more than one instance.</span></span> <span data-ttu-id="7e4a2-228">El escalado no solo le proporciona una mayor capacidad de procesamiento, sino también algo de tolerancia a errores.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="7e4a2-229">Si el proceso se interrumpe en una instancia, las otras instancias seguirán atendiendo las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-229">If the process goes down on one instance, the other instances continue to serve requests.</span></span>

<span data-ttu-id="7e4a2-230">Puede establecer el escalado en Manual o Automático.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-230">You can set the scaling to be Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="7e4a2-231">Uso de AutoHeal</span><span class="sxs-lookup"><span data-stu-id="7e4a2-231">Use AutoHeal</span></span>
<span data-ttu-id="7e4a2-232">AutoHeal recicla el proceso de trabajo para su aplicación en función de la configuración que elija (como cambios de configuración, solicitudes, límites de memoria o el tiempo necesario para ejecutar una solicitud).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-232">AutoHeal recycles the worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or the time needed to execute a request).</span></span> <span data-ttu-id="7e4a2-233">Casi siempre, el proceso de reciclaje es la forma más rápida de recuperarse de un problema.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-233">Most of the time, recycle the process is the fastest way to recover from a problem.</span></span> <span data-ttu-id="7e4a2-234">Aunque siempre puede reiniciar la aplicación web directamente en Azure Portal, AutoHeal lo hará automáticamente por usted.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-234">Though you can always restart the web app from directly within the Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="7e4a2-235">Todo lo que debe hacer es agregar algunos desencadenadores en web.config raíz de la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-235">All you need to do is add some triggers in the root web.config for your web app.</span></span> <span data-ttu-id="7e4a2-236">Esta configuración funcionaría igual incluso si la aplicación no fuera .Net.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-236">These settings would work in the same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="7e4a2-237">Para obtener más información, consulte [Recuperación automática de Sitios web de Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-the-web-app"></a><span data-ttu-id="7e4a2-238">Reinicio de la aplicación web</span><span class="sxs-lookup"><span data-stu-id="7e4a2-238">Restart the web app</span></span>
<span data-ttu-id="7e4a2-239">Reiniciar suele ser la manera más sencilla de recuperarse de problemas que solo tienen lugar una vez.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-239">Restarting is often the simplest way to recover from one-time issues.</span></span> <span data-ttu-id="7e4a2-240">En [Azure Portal](https://portal.azure.com/), en la hoja de la aplicación web, tiene las opciones para detener o reiniciar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-240">On the [Azure portal](https://portal.azure.com/), on your web app’s blade, you have the options to stop or restart your app.</span></span>

 ![reiniciar las aplicaciones web para resolver los problemas de rendimiento](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="7e4a2-242">También puede administrar la aplicación web con Azure Powershell.</span><span class="sxs-lookup"><span data-stu-id="7e4a2-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="7e4a2-243">Para obtener más información, vea [Uso de Azure PowerShell con el Administrador de recursos de Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="7e4a2-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

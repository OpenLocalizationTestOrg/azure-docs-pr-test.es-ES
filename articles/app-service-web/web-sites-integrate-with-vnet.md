---
title: "Integración de una aplicación con una red virtual de Azure"
description: "Muestra cómo conectar una aplicación del Servicio de aplicaciones de Azure a una red virtual de Azure nueva o existente"
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: cephalin
ms.assetid: 90bc6ec6-133d-4d87-a867-fcf77da75f5a
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/23/2017
ms.author: ccompy
ms.openlocfilehash: 61508f759cad92a8c17d72a5d68fb54994c393bc
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="integrate-your-app-with-an-azure-virtual-network"></a><span data-ttu-id="ba519-103">Integración de su aplicación con una red virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="ba519-103">Integrate your app with an Azure Virtual Network</span></span>
<span data-ttu-id="ba519-104">En este documento, se describe la característica Integración con redes virtuales del Servicio de aplicaciones de Azure y se muestra cómo configurarla con aplicaciones en el [Servicio de aplicaciones de Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="ba519-104">This document describes the Azure App Service virtual network integration feature and shows how to set it up with apps in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> <span data-ttu-id="ba519-105">Si no conoce las redes virtuales de Azure, se trata de una funcionalidad que le permite colocar muchos de sus recursos de Azure en una red no enrutable sin conexión a Internet cuyo acceso se controla.</span><span class="sxs-lookup"><span data-stu-id="ba519-105">If you are unfamiliar with Azure Virtual Networks (VNets), this is a capability that allows you to place many of your Azure resources in a non-internet routeable network that you control access to.</span></span> <span data-ttu-id="ba519-106">Después, estas redes se pueden conectar a sus redes locales mediante diversas tecnologías de VPN.</span><span class="sxs-lookup"><span data-stu-id="ba519-106">These networks can then be connected to your on-premises networks using a variety of VPN technologies.</span></span> <span data-ttu-id="ba519-107">Para más información sobre las redes virtuales de Azure, consulte: [Información general sobre redes virtuales][VNETOverview].</span><span class="sxs-lookup"><span data-stu-id="ba519-107">To learn more about Azure Virtual Networks, start with the information here: [Azure Virtual Network Overview][VNETOverview].</span></span> 

<span data-ttu-id="ba519-108">El Servicio de aplicaciones de Azure adopta dos formas.</span><span class="sxs-lookup"><span data-stu-id="ba519-108">The Azure App Service has two forms.</span></span> 

1. <span data-ttu-id="ba519-109">Los sistemas multiinquilino que admiten la gama completa de planes de precios.</span><span class="sxs-lookup"><span data-stu-id="ba519-109">The multi-tenant systems that support the full range of pricing plans</span></span>
2. <span data-ttu-id="ba519-110">La característica premium App Service Environment (ASE), que se implementa en su red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-110">The App Service Environment (ASE) premium feature, which deploys into your VNet.</span></span> 

<span data-ttu-id="ba519-111">Este documento pasa a través de Integración con red virtual y no de App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ba519-111">This document goes through VNet Integration and not App Service Environment.</span></span> <span data-ttu-id="ba519-112">Si desea obtener más información sobre la característica de ASE, comience con la información que se presenta aquí: [Introducción a App Service Environment][ASEintro].</span><span class="sxs-lookup"><span data-stu-id="ba519-112">If you want to learn more about the ASE feature, start with the information here: [App Service Environment introduction][ASEintro].</span></span>

<span data-ttu-id="ba519-113">Integración con red virtual ofrece a su aplicación web acceso a los recursos de su red virtual, pero no concede acceso privado a su aplicación web desde la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-113">VNet Integration gives your web app access to resources in your virtual network but does not grant private access to your web app from the virtual network.</span></span> <span data-ttu-id="ba519-114">El acceso al sitio privado se refiere a que la aplicación solo es accesible desde una red privada, como desde dentro de una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="ba519-114">Private site access refers to making your app only accessible from a private network such as from within an Azure virtual network.</span></span> <span data-ttu-id="ba519-115">El acceso privado al sitio solo está disponible con un ASE configurado con un Equilibrador de carga interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="ba519-115">Private site access is only available with an ASE configured with an Internal Load Balancer (ILB).</span></span> <span data-ttu-id="ba519-116">Para obtener más información sobre el uso de un ASE con un ILB, comience por leer el artículo aquí indicado: [Creación y uso de un ASE con un ILB][ILBASE].</span><span class="sxs-lookup"><span data-stu-id="ba519-116">For details on using an ILB ASE, start with the article here: [Creating and using an ILB ASE][ILBASE].</span></span> 

<span data-ttu-id="ba519-117">Un escenario habitual en el que usaría Integración con red virtual es para permitir el acceso desde su aplicación web a una base de datos o a servicios web que se ejecutan en una máquina virtual de la red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="ba519-117">A common scenario where you would use VNet Integration is enabling access from your web app to a database or a web service running on a virtual machine in your Azure virtual network.</span></span> <span data-ttu-id="ba519-118">Con Integración con red virtual, no es necesario exponer un punto de conexión público para las aplicaciones en su máquina virtual, sino que puede usar las direcciones privadas no enrutables sin conexión a Internet en su lugar.</span><span class="sxs-lookup"><span data-stu-id="ba519-118">With VNet Integration, you don't need to expose a public endpoint for applications on your VM but can use the private non-internet routable addresses instead.</span></span> 

<span data-ttu-id="ba519-119">La característica Integración con red virtual:</span><span class="sxs-lookup"><span data-stu-id="ba519-119">The VNet Integration feature:</span></span>

* <span data-ttu-id="ba519-120">requiere un plan de precios Premium, Estándar o Aislado;</span><span class="sxs-lookup"><span data-stu-id="ba519-120">requires a Standard, Premium, or Isolated pricing plan</span></span> 
* <span data-ttu-id="ba519-121">funciona con una red virtual clásica o de Resource Manager;</span><span class="sxs-lookup"><span data-stu-id="ba519-121">works with Classic or Resource Manager VNet</span></span> 
* <span data-ttu-id="ba519-122">es compatible con TCP y UDP;</span><span class="sxs-lookup"><span data-stu-id="ba519-122">supports TCP and UDP</span></span>
* <span data-ttu-id="ba519-123">funciona con aplicaciones web, móviles y de API;</span><span class="sxs-lookup"><span data-stu-id="ba519-123">works with Web, Mobile, and API apps</span></span>
* <span data-ttu-id="ba519-124">permite que una aplicación se conecte solo a una red virtual a la vez;</span><span class="sxs-lookup"><span data-stu-id="ba519-124">enables an app to connect to only 1 VNet at a time</span></span>
* <span data-ttu-id="ba519-125">permite la integración con hasta cinco redes virtuales dentro de un plan de App Service;</span><span class="sxs-lookup"><span data-stu-id="ba519-125">enables up to five VNets to be integrated with in an App Service Plan</span></span> 
* <span data-ttu-id="ba519-126">permite que varias aplicaciones de un plan de App Service usen la misma red virtual;</span><span class="sxs-lookup"><span data-stu-id="ba519-126">allows the same VNet to be used by multiple apps in an App Service Plan</span></span>
* <span data-ttu-id="ba519-127">admite un SLA del 99,9 % debido al SLA de la puerta de enlace de red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-127">supports a 99.9% SLA due to the SLA on the VNet Gateway</span></span>

<span data-ttu-id="ba519-128">Hay algunos aspectos que Integración con red virtual no admite, como:</span><span class="sxs-lookup"><span data-stu-id="ba519-128">There are some things that VNet Integration does not support including:</span></span>

* <span data-ttu-id="ba519-129">montar una unidad;</span><span class="sxs-lookup"><span data-stu-id="ba519-129">mounting a drive</span></span>
* <span data-ttu-id="ba519-130">la integración de AD;</span><span class="sxs-lookup"><span data-stu-id="ba519-130">AD integration</span></span> 
* <span data-ttu-id="ba519-131">NetBios;</span><span class="sxs-lookup"><span data-stu-id="ba519-131">NetBios</span></span>
* <span data-ttu-id="ba519-132">el acceso privado a sitios.</span><span class="sxs-lookup"><span data-stu-id="ba519-132">private site access</span></span>

### <a name="getting-started"></a><span data-ttu-id="ba519-133">Introducción</span><span class="sxs-lookup"><span data-stu-id="ba519-133">Getting started</span></span>
<span data-ttu-id="ba519-134">Le recordamos algunos aspectos que debe tener en cuenta antes de conectar su aplicación web a una red virtual:</span><span class="sxs-lookup"><span data-stu-id="ba519-134">Here are some things to keep in mind before connecting your web app to a virtual network:</span></span>

* <span data-ttu-id="ba519-135">Integración con red virtual solo funciona con aplicaciones en un plan de precios **Estándar**, **Premium** o **Aislado**.</span><span class="sxs-lookup"><span data-stu-id="ba519-135">VNet Integration only works with apps in a **Standard**, **Premium**, or **Isolated** pricing plan.</span></span> <span data-ttu-id="ba519-136">Si habilita la característica y después escala su plan de App Service a un plan de precios no admitido, las aplicaciones pierden la conexión a las redes virtuales que estén usando.</span><span class="sxs-lookup"><span data-stu-id="ba519-136">If you enable the feature, and then scale your App Service Plan to an unsupported pricing plan your apps lose their connections to the VNets they are using.</span></span> 
* <span data-ttu-id="ba519-137">Si su red virtual de destino ya existe, debe tener habilitada la VPN de punto a sitio con una puerta de enlace de enrutamiento dinámico para que se pueda conectar a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-137">If your target virtual network already exists, it must have point-to-site VPN enabled with a Dynamic routing gateway before it can be connected to an app.</span></span> <span data-ttu-id="ba519-138">Si la puerta de enlace está configurada con enrutamiento estático, no puede habilitar una red privada virtual (VPN) de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-138">If your gateway is configured with Static routing, you cannot enable point-to-site Virtual Private Network (VPN).</span></span>
* <span data-ttu-id="ba519-139">La red virtual debe compartir la misma suscripción que el plan de App Service (ASP).</span><span class="sxs-lookup"><span data-stu-id="ba519-139">The VNet must be in the same subscription as your App Service Plan(ASP).</span></span> 
* <span data-ttu-id="ba519-140">Las aplicaciones que se integran con una red virtual usarán el DNS que se especifique para esa red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-140">The apps that integrate with a VNet use the DNS that is specified for that VNet.</span></span>
* <span data-ttu-id="ba519-141">De forma predeterminada, las aplicaciones que se integran solo enrutan el tráfico hacia la red virtual según las rutas definidas en la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-141">By default your integrating apps only route traffic into your VNet based on the routes that are defined in your VNet.</span></span> 

## <a name="enabling-vnet-integration"></a><span data-ttu-id="ba519-142">Habilitación de Integración con red virtual</span><span class="sxs-lookup"><span data-stu-id="ba519-142">Enabling VNet Integration</span></span>
<span data-ttu-id="ba519-143">Este documento se centra principalmente en el uso de Azure Portal para Integración con red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-143">This document is focused primarily on using the Azure portal for VNet Integration.</span></span> <span data-ttu-id="ba519-144">Para habilitar Integración con red virtual de una aplicación mediante PowerShell, siga las indicaciones que encontrará aquí: [Conexión de la aplicación a la red virtual con PowerShell][IntPowershell].</span><span class="sxs-lookup"><span data-stu-id="ba519-144">To enable VNet Integration with your app using PowerShell, follow the directions here: [Connect your app to your virtual network by using PowerShell][IntPowershell].</span></span>

<span data-ttu-id="ba519-145">Puede conectar una aplicación a una red virtual nueva o existente.</span><span class="sxs-lookup"><span data-stu-id="ba519-145">You have the option to connect your app to a new or existing virtual network.</span></span> <span data-ttu-id="ba519-146">Si crea una nueva red como parte de la integración, además de crearse la red virtual, se preconfigura de forma automática una puerta de enlace de enrutamiento dinámico y se habilita la VPN de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-146">If you create a new network as a part of your integration, then in addition to just creating the VNet, a dynamic routing gateway is pre-configured for you and Point to Site VPN is enabled.</span></span> 

> [!NOTE]
> <span data-ttu-id="ba519-147">Se puede tardar unos minutos en configurar una nueva integración con redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="ba519-147">Configuring a new virtual network integration can take several minutes.</span></span> 
> 
> 

<span data-ttu-id="ba519-148">Para habilitar Integración con red virtual, abra la configuración de la aplicación y después seleccione Redes.</span><span class="sxs-lookup"><span data-stu-id="ba519-148">To enable VNet Integration, open your app Settings and then select Networking.</span></span> <span data-ttu-id="ba519-149">La interfaz de usuario que se abre ofrece tres opciones de redes.</span><span class="sxs-lookup"><span data-stu-id="ba519-149">The UI that opens up offers three networking choices.</span></span> <span data-ttu-id="ba519-150">En esta guía solo se va a tratar Integración con red virtual, aunque más adelante en este documento se explicarán Conexiones híbridas y a instancias de App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ba519-150">This guide is only going into VNet Integration though Hybrid Connections and App Service Environments are discussed later in this document.</span></span> 

<span data-ttu-id="ba519-151">Si la aplicación no pertenece al plan de precios correcto, la interfaz de usuario le permite escalarlo a otro superior de su elección.</span><span class="sxs-lookup"><span data-stu-id="ba519-151">If your app is not in the correct pricing plan, the UI enables you to scale your plan to a higher pricing plan of your choice.</span></span>

![][1]

### <a name="enabling-vnet-integration-with-a-pre-existing-vnet"></a><span data-ttu-id="ba519-152">Habilitación de Integración con red virtual con una red virtual existente</span><span class="sxs-lookup"><span data-stu-id="ba519-152">Enabling VNet Integration with a pre-existing VNet</span></span>
<span data-ttu-id="ba519-153">La interfaz de usuario de Integración con red virtual le permite seleccionar en una lista de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="ba519-153">The VNet Integration UI allows you to select from a list of your VNets.</span></span> <span data-ttu-id="ba519-154">Las redes virtuales clásicas indican su pertenencia a esta clase con la palabra "Clásica" entre paréntesis junto al nombre de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-154">The Classic VNets indicate that they are such with the word "Classic" in parentheses next to the VNet name.</span></span> <span data-ttu-id="ba519-155">La lista está ordenada de tal forma que las redes virtuales de Resource Manager se muestran primero.</span><span class="sxs-lookup"><span data-stu-id="ba519-155">The list is sorted such that the Resource Manager VNets are listed first.</span></span> <span data-ttu-id="ba519-156">En la imagen siguiente, se ve que solo se puede seleccionar una red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-156">In the image shown below you can see that only one VNet can be selected.</span></span> <span data-ttu-id="ba519-157">Existen varias razones por las que una red virtual estará atenuada, entre otras:</span><span class="sxs-lookup"><span data-stu-id="ba519-157">There are multiple reasons that a VNet can be grayed out including:</span></span>

* <span data-ttu-id="ba519-158">la red virtual pertenece a otra suscripción a la que su cuenta tiene acceso;</span><span class="sxs-lookup"><span data-stu-id="ba519-158">the VNet is in another subscription that your account has access to</span></span>
* <span data-ttu-id="ba519-159">la red virtual no tiene la conectividad de punto a sitio habilitada;</span><span class="sxs-lookup"><span data-stu-id="ba519-159">the VNet does not have Point to Site enabled</span></span>
* <span data-ttu-id="ba519-160">la red virtual carece de una puerta de enlace de enrutamiento dinámico.</span><span class="sxs-lookup"><span data-stu-id="ba519-160">the VNet does not have a dynamic routing gateway</span></span>

![][2]

<span data-ttu-id="ba519-161">Para habilitar la integración, basta con hacer clic en la red virtual con la que se desee integrar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-161">To enable integration simply click on the VNet you wish to integrate with.</span></span> <span data-ttu-id="ba519-162">Después de seleccionar la red virtual, la aplicación se reinicia automáticamente para que los cambios surtan efecto.</span><span class="sxs-lookup"><span data-stu-id="ba519-162">After you select the VNet, your app is automatically restarted for the changes to take effect.</span></span> 

##### <a name="enable-point-to-site-in-a-classic-vnet"></a><span data-ttu-id="ba519-163">Habilitación de una conectividad de punto a sitio en una red virtual clásica</span><span class="sxs-lookup"><span data-stu-id="ba519-163">Enable Point to Site in a Classic VNet</span></span>
<span data-ttu-id="ba519-164">Si la red virtual carece de una puerta de enlace o de conectividad de punto a sitio, primero debe configurarlas.</span><span class="sxs-lookup"><span data-stu-id="ba519-164">If your VNet does not have a gateway nor has Point to Site, then you have to set that up first.</span></span> <span data-ttu-id="ba519-165">Para hacerlo con una red virtual clásica, vaya a [Azure Portal][AzurePortal] y muestre la lista de redes virtuales (clásicas).</span><span class="sxs-lookup"><span data-stu-id="ba519-165">To do this for a Classic VNet, go to the [Azure portal][AzurePortal] and bring up the list of Virtual Networks(classic).</span></span> <span data-ttu-id="ba519-166">Desde aquí, haga clic en la red con la que desee integrar la aplicación y haga clic en el cuadro grande bajo Essentials llamado Conexiones VPN.</span><span class="sxs-lookup"><span data-stu-id="ba519-166">From here, click on the network you want to integrate with and click on the big box under Essentials called VPN Connections.</span></span> <span data-ttu-id="ba519-167">Aquí puede crear la VPN de punto a sitio e incluso hacer que se cree una puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba519-167">From here, you can create your point to site VPN and even have it create a gateway.</span></span> <span data-ttu-id="ba519-168">Después de completar la experiencia de creación de la conexión de punto a sitio y la puerta de enlace, pasan unos 30 minutos hasta que todo esté listo.</span><span class="sxs-lookup"><span data-stu-id="ba519-168">After you go through the point to site with gateway creation experience it is about 30 minutes before it is ready.</span></span> 

![][8]

##### <a name="enabling-point-to-site-in-a-resource-manager-vnet"></a><span data-ttu-id="ba519-169">Habilitación de punto a sitio en una red virtual de Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ba519-169">Enabling Point to Site in a Resource Manager VNet</span></span>
<span data-ttu-id="ba519-170">Para configurar una red virtual de Resource Manager con una puerta de enlace y la conexión de punto a sitio, puede usar PowerShell tal y como se describe aquí ([Configuración de una conexión punto a sitio a una red virtual mediante PowerShell][V2VNETP2S]) o utilizar Azure Portal tal como se explica aquí ([Configuración de una conexión de punto a sitio a una red virtual mediante Azure Portal][V2VNETPortal]).</span><span class="sxs-lookup"><span data-stu-id="ba519-170">To configure a Resource Manager VNet with a gateway and Point to Site, you can use either PowerShell as documented here, [Configure a Point-to-Site connection to a virtual network using PowerShell][V2VNETP2S] or use the Azure portal as documented here, [Configure a Point-to-Site connection to a VNet using the Azure portal][V2VNETPortal].</span></span> <span data-ttu-id="ba519-171">La interfaz de usuario que debe realizar esta funcionalidad no está aún disponible.</span><span class="sxs-lookup"><span data-stu-id="ba519-171">The UI to perform this capability is not yet available.</span></span> <span data-ttu-id="ba519-172">Tenga en cuenta que no necesita crear certificados para la configuración de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-172">Note that you need to create certificates for the Point to Site configuration.</span></span> <span data-ttu-id="ba519-173">Esto se configura automáticamente cuando se conecte la aplicación web a la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-173">This is automatically configured when you connect your WebApp to the VNet.</span></span> 

### <a name="creating-a-pre-configured-vnet"></a><span data-ttu-id="ba519-174">Creación de una red virtual preconfigurada</span><span class="sxs-lookup"><span data-stu-id="ba519-174">Creating a pre-configured VNet</span></span>
<span data-ttu-id="ba519-175">Si desea crear una nueva red virtual que esté configurada con una puerta de enlace y una conexión de punto a sitio, la interfaz de usuario de redes de App Service dispone de la funcionalidad para hacerlo, pero solo para una red virtual de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ba519-175">If you want to create a new VNet that is configured with a gateway and Point-to-Site, then the App Service networking UI has the capability to do that but only for a Resource Manager VNet.</span></span> <span data-ttu-id="ba519-176">Si desea crear una red virtual clásica con una puerta de enlace y una conexión de punto a sitio, deberá hacerlo manualmente a través de la interfaz de usuario de redes.</span><span class="sxs-lookup"><span data-stu-id="ba519-176">If you wish to create a Classic VNet with a gateway and Point-to-Site, then you need to do this manually through the Networking user interface.</span></span> 

<span data-ttu-id="ba519-177">Para crear una red virtual de Resource Manager a través de la interfaz de usuario de Integración con red virtual, seleccione **Crear una red virtual nueva** y especifique:</span><span class="sxs-lookup"><span data-stu-id="ba519-177">To create a Resource Manager VNet through the VNet Integration UI, simply select **Create New Virtual Network** and provide the:</span></span>

* <span data-ttu-id="ba519-178">El nombre de la red virtual</span><span class="sxs-lookup"><span data-stu-id="ba519-178">Virtual Network Name</span></span>
* <span data-ttu-id="ba519-179">El bloque de direcciones de la red virtual</span><span class="sxs-lookup"><span data-stu-id="ba519-179">Virtual Network Address Block</span></span>
* <span data-ttu-id="ba519-180">Nombre de subred</span><span class="sxs-lookup"><span data-stu-id="ba519-180">Subnet Name</span></span>
* <span data-ttu-id="ba519-181">El bloque de direcciones de la subred</span><span class="sxs-lookup"><span data-stu-id="ba519-181">Subnet Address Block</span></span>
* <span data-ttu-id="ba519-182">El bloque de direcciones de la puerta de enlace</span><span class="sxs-lookup"><span data-stu-id="ba519-182">Gateway Address Block</span></span>
* <span data-ttu-id="ba519-183">El bloque de direcciones de la conexión de punto a sitio</span><span class="sxs-lookup"><span data-stu-id="ba519-183">Point-to-Site Address Block</span></span>

<span data-ttu-id="ba519-184">Si desea que esta red virtual se conecte a cualquiera de sus otras redes, no debe elegir un espacio de direcciones IP que se solape con esas redes.</span><span class="sxs-lookup"><span data-stu-id="ba519-184">If you want this VNet to connect to any other networks, then you should avoid picking IP address space that overlaps with those networks.</span></span> 

> [!NOTE]
> <span data-ttu-id="ba519-185">La creación de una red virtual de Resource Manager con una puerta de enlace tarda unos 30 minutos y actualmente no integra la red virtual con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-185">Resource Manager VNet creation with a gateway takes about 30 minutes and currently does not integrate the VNet with your app.</span></span> <span data-ttu-id="ba519-186">Una vez creada la red virtual con la puerta de enlace, debe volver a la interfaz de usuario de Integración con red virtual de la aplicación y seleccionar la nueva red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-186">After your VNet is created with the gateway you need to come back to your app VNet Integration UI and select your new VNet.</span></span>
> 
> 

![][3]

<span data-ttu-id="ba519-187">Las redes virtuales de Azure normalmente se crean dentro de direcciones de red privadas.</span><span class="sxs-lookup"><span data-stu-id="ba519-187">Azure VNets normally are created within private network addresses.</span></span> <span data-ttu-id="ba519-188">De forma predeterminada, la característica Integración con red virtual enrutará el tráfico destinado a esos intervalos de direcciones IP hacia la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-188">By default the VNet Integration feature routes any traffic destined for those IP address ranges into your VNet.</span></span> <span data-ttu-id="ba519-189">Los intervalos de direcciones IP privadas son:</span><span class="sxs-lookup"><span data-stu-id="ba519-189">The private IP address ranges are:</span></span>

* <span data-ttu-id="ba519-190">10.0.0.0/8: es igual que 10.0.0.0 - 10.255.255.255.</span><span class="sxs-lookup"><span data-stu-id="ba519-190">10.0.0.0/8 - this is the same as 10.0.0.0 - 10.255.255.255</span></span>
* <span data-ttu-id="ba519-191">172.16.0.0/12: es igual que 172.16.0.0 - 172.31.255.255.</span><span class="sxs-lookup"><span data-stu-id="ba519-191">172.16.0.0/12 - this is the same as 172.16.0.0 - 172.31.255.255</span></span> 
* <span data-ttu-id="ba519-192">192.168.0.0/16: es igual que 192.168.0.0 - 192.168.255.255.</span><span class="sxs-lookup"><span data-stu-id="ba519-192">192.168.0.0/16 - this is the same as 192.168.0.0 - 192.168.255.255</span></span>

<span data-ttu-id="ba519-193">El espacio de direcciones de red virtual debe especificarse con la notación CIDR.</span><span class="sxs-lookup"><span data-stu-id="ba519-193">The VNet address space needs to be specified in CIDR notation.</span></span> <span data-ttu-id="ba519-194">Si desconoce la notación CIDR, es un método para especificar bloques de direcciones con una dirección IP y un entero que representa la máscara de red.</span><span class="sxs-lookup"><span data-stu-id="ba519-194">If you are unfamiliar with CIDR notation, it is a method for specifying address blocks using an IP address and an integer that represents the network mask.</span></span> <span data-ttu-id="ba519-195">Como referencia rápida, tenga en cuenta que 10.1.0.0/24 corresponde a 256 direcciones y 10.1.0.0/25, a 128.</span><span class="sxs-lookup"><span data-stu-id="ba519-195">As a quick reference, consider that 10.1.0.0/24 would be 256 addresses and 10.1.0.0/25 would be 128 addresses.</span></span> <span data-ttu-id="ba519-196">Una dirección IPv4 con un /32 sería simplemente una dirección.</span><span class="sxs-lookup"><span data-stu-id="ba519-196">An IPv4 address with a /32 would be just 1 address.</span></span> 

<span data-ttu-id="ba519-197">Si establece aquí la información del servidor DNS, quedará establecida para la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-197">If you set the DNS server information here, then that is set for your VNet.</span></span> <span data-ttu-id="ba519-198">Después de crearse la red virtual, puede editar esta información desde las experiencias de usuario de red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-198">After VNet creation you can edit this information from the VNet user experiences.</span></span> <span data-ttu-id="ba519-199">Si cambia el DNS de la red virtual, debe realizar una operación de sincronización de red.</span><span class="sxs-lookup"><span data-stu-id="ba519-199">If you change the DNS of the VNet, then you need to perform a Sync Network operation.</span></span>

<span data-ttu-id="ba519-200">Cuando se crea una red virtual clásica mediante la interfaz de usuario de Integración con red virtual, se crea una red virtual en el mismo grupo de recursos que la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-200">When you create a Classic VNet using the VNet Integration UI, it creates a VNet in the same resource group as your app.</span></span> 

## <a name="how-the-system-works"></a><span data-ttu-id="ba519-201">Funcionamiento del sistema</span><span class="sxs-lookup"><span data-stu-id="ba519-201">How the system works</span></span>
<span data-ttu-id="ba519-202">Esta característica se basa en la tecnología de VPN de punto a sitio para conectar la aplicación a la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-202">Under the covers this feature builds on top of Point-to-Site VPN technology to connect your app to your VNet.</span></span> <span data-ttu-id="ba519-203">Las aplicaciones de Azure App Service tienen una arquitectura de sistema de varios inquilinos que impide el aprovisionamiento de una aplicación directamente en una red virtual como se hace con las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="ba519-203">Apps in Azure App Service have a multi-tenant system architecture, which precludes provisioning an app directly in a VNet as is done with virtual machines.</span></span> <span data-ttu-id="ba519-204">Al basarse en tecnología de punto a sitio, se limita el acceso a la red a únicamente la máquina virtual que hospeda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-204">By building on point-to-site technology we limit network access to just the virtual machine hosting the app.</span></span> <span data-ttu-id="ba519-205">El acceso a la red se restringe aún más en esos hosts de aplicaciones para que sus aplicaciones solo puedan acceder a las redes que se configuren para ese fin.</span><span class="sxs-lookup"><span data-stu-id="ba519-205">Access to the network is further restricted on those app hosts so that your apps can only access the networks that you configure them to access.</span></span> 

![][4]

<span data-ttu-id="ba519-206">Si no ha configurado un servidor DNS con su red virtual, la aplicación necesitará usar direcciones IP para acceder al recurso de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-206">If you haven’t configured a DNS server with your virtual network, your app will need to use IP addresses to reach resource in the VNet.</span></span> <span data-ttu-id="ba519-207">Cuando use direcciones IP, recuerde que la principal ventaja de esta característica es que le permite usar las direcciones privadas dentro de la red privada.</span><span class="sxs-lookup"><span data-stu-id="ba519-207">While using IP addresses, remember that the major benefit of this feature is that it enables you to use the private addresses within your private network.</span></span> <span data-ttu-id="ba519-208">Si ha configurado la aplicación para que use direcciones IP públicas para una de las máquinas virtuales, no está usando la característica Integración con red virtual, sino que se está comunicando a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="ba519-208">If you set your app up to use public IP addresses for one of your VMs, then you aren't using the VNet Integration feature and are communicating over the internet.</span></span>

## <a name="managing-the-vnet-integrations"></a><span data-ttu-id="ba519-209">Administración de las integraciones con redes virtuales</span><span class="sxs-lookup"><span data-stu-id="ba519-209">Managing the VNet Integrations</span></span>
<span data-ttu-id="ba519-210">La capacidad de conectarse a una red virtual y desconectarse de ella se encuentra en un nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-210">The ability to connect and disconnect to a VNet is at an app level.</span></span> <span data-ttu-id="ba519-211">Las operaciones que pueden afectar a la integración con red virtual en varias aplicaciones se encuentran en un nivel del plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="ba519-211">Operations that can affect the VNet Integration across multiple apps are at an ASP level.</span></span> <span data-ttu-id="ba519-212">Desde la interfaz de usuario que se muestra en el nivel de aplicación, puede obtener detalles sobre la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-212">From the UI that is shown at the app level, you can get details on your VNet.</span></span> <span data-ttu-id="ba519-213">Gran parte de esta misma información también se muestra en el nivel de plan de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="ba519-213">Most of the same information is also shown at the ASP level.</span></span> 

![][5]

<span data-ttu-id="ba519-214">En la página Estado de característica de red, puede ver si la aplicación está conectada a la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-214">From the Network Feature Status page, you can see if your app is connected to your VNet.</span></span> <span data-ttu-id="ba519-215">Si la puerta de enlace de red virtual no está disponible por cualquier razón, aparecerá como no conectada.</span><span class="sxs-lookup"><span data-stu-id="ba519-215">If your VNet gateway is down for whatever reason, then this would show as not-connected.</span></span> 

<span data-ttu-id="ba519-216">La información que tiene ahora disponible en la interfaz de usuario de Integración con red virtual en el nivel de aplicación es igual que la información detallada que se obtiene desde el plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="ba519-216">The information you now have available to you in the app level VNet Integration UI is the same as the detail information you get from the ASP.</span></span> <span data-ttu-id="ba519-217">Esto es lo que cubre:</span><span class="sxs-lookup"><span data-stu-id="ba519-217">Here are those items:</span></span>

* <span data-ttu-id="ba519-218">Nombre de red virtual: este vínculo abre la interfaz de usuario de red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="ba519-218">VNet Name - This link opens the Azure virtual network UI</span></span>
* <span data-ttu-id="ba519-219">Ubicación: esto refleja la ubicación de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-219">Location - This reflects the location of your VNet.</span></span> <span data-ttu-id="ba519-220">Es posible realizar la integración con una red virtual en otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-220">It is possible to integrate with a VNet in another location.</span></span>
* <span data-ttu-id="ba519-221">Estado de certificado: hay certificados que se usan para proteger la conexión VPN entre la aplicación y la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-221">Certificate Status - There are certificates used to secure the VPN connection between the app and the VNet.</span></span> <span data-ttu-id="ba519-222">Esto refleja una prueba para asegurarse de que estén sincronizados.</span><span class="sxs-lookup"><span data-stu-id="ba519-222">This reflects a test to ensure they are in sync.</span></span>
* <span data-ttu-id="ba519-223">Estado de la puerta de enlace: si las puertas de enlace estuvieran inactivas por algún motivo, la aplicación no podrá acceder a los recursos de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-223">Gateway Status - Should your gateways be down for whatever reason then your app cannot access resources in the VNet.</span></span> 
* <span data-ttu-id="ba519-224">Espacio de direcciones de red virtual: se trata del espacio de direcciones IP para la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-224">VNet address space - This is the IP address space for your VNet.</span></span> 
* <span data-ttu-id="ba519-225">Espacio de direcciones de punto a sitio: es el espacio de direcciones IP de punto a sitio para la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-225">Point to Site address space - This is the point to site IP address space for your VNet.</span></span> <span data-ttu-id="ba519-226">La aplicación muestra la comunicación como procedente de una de las direcciones IP de este espacio de direcciones.</span><span class="sxs-lookup"><span data-stu-id="ba519-226">Your app shows communication as coming from one of the IPs in this address space.</span></span> 
* <span data-ttu-id="ba519-227">Espacio de direcciones de sitio a sitio: puede usar VPN de sitio a sitio para conectar la red virtual a sus recursos locales o a otras redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="ba519-227">Site to site address space - You can use Site to Site VPNs to connect your VNet to your on-premises resources or to other VNet.</span></span> <span data-ttu-id="ba519-228">Si lo tiene configurado, aquí se muestran los intervalos de direcciones IP definidos para esa conexión VPN.</span><span class="sxs-lookup"><span data-stu-id="ba519-228">Should you have that configured then the IP ranges defined with that VPN connection shows here.</span></span>
* <span data-ttu-id="ba519-229">Servidores DNS: si tiene servidores DNS configurados con la red virtual, aparecen aquí.</span><span class="sxs-lookup"><span data-stu-id="ba519-229">DNS Servers - If you have DNS Servers configured with your VNet, then they are listed here.</span></span>
* <span data-ttu-id="ba519-230">Direcciones IP enrutadas a la red virtual: hay una lista de direcciones IP para las que la red virtual tiene definido el enrutamiento y esas direcciones se muestran aquí.</span><span class="sxs-lookup"><span data-stu-id="ba519-230">IPs routed to the VNet - There are a list of IP addresses that your VNet has routing defined for, and those addresses show here.</span></span> 

<span data-ttu-id="ba519-231">La única operación que puede realizar en la vista de aplicación de Integración con red virtual es desconectar la aplicación de la red virtual si está conectada a ella.</span><span class="sxs-lookup"><span data-stu-id="ba519-231">The only operation you can take in the app view of your VNet Integration is to disconnect your app from the VNet it is currently connected to.</span></span> <span data-ttu-id="ba519-232">Para hacerlo, basta con hacer clic en Desconectar arriba.</span><span class="sxs-lookup"><span data-stu-id="ba519-232">To do this simply click Disconnect at the top.</span></span> <span data-ttu-id="ba519-233">Esta acción no cambia la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-233">This action does not change your VNet.</span></span> <span data-ttu-id="ba519-234">La red virtual y su configuración, incluidas las puertas de enlace, permanecen intactas.</span><span class="sxs-lookup"><span data-stu-id="ba519-234">The VNet and its configuration including the gateways remains unchanged.</span></span> <span data-ttu-id="ba519-235">Si después desea eliminar la red virtual, debe eliminar primero los recursos que hay en ella, incluidas las puertas de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba519-235">If you then want to delete your VNet, you need to first delete the resources in it including the gateways.</span></span> 

<span data-ttu-id="ba519-236">La vista del plan de servicio de aplicaciones ofrece varias operaciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="ba519-236">The App Service Plan view has a number of additional operations.</span></span> <span data-ttu-id="ba519-237">Además, también se accede a ella de forma diferente desde la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-237">It is also accessed differently than from the app.</span></span> <span data-ttu-id="ba519-238">Para llegar a la interfaz de usuario de Redes del plan de servicio de aplicaciones, abra la interfaz de usuario del plan de servicio de aplicaciones y desplácese hacia abajo.</span><span class="sxs-lookup"><span data-stu-id="ba519-238">To reach the ASP Networking UI simply open your ASP UI and scroll down.</span></span> <span data-ttu-id="ba519-239">Hay un elemento de interfaz de usuario llamado Estado de característica de red.</span><span class="sxs-lookup"><span data-stu-id="ba519-239">There is a UI element called Network Feature Status.</span></span> <span data-ttu-id="ba519-240">Ofrece varios detalles menores sobre Integración con red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-240">It gives some minor details around your VNet Integration.</span></span> <span data-ttu-id="ba519-241">Si hace clic en este elemento, se abre la interfaz de usuario de Estado de característica de red.</span><span class="sxs-lookup"><span data-stu-id="ba519-241">Clicking on this UI opens the Network Feature Status UI.</span></span> <span data-ttu-id="ba519-242">Si después hace clic en "Haga clic aquí para administrar", se abrirá la interfaz de usuario que enumera las integraciones con redes virtuales en este plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="ba519-242">If you then click on "Click here to manage", the UI that lists the VNet Integrations in this ASP opens.</span></span>

![][6]

<span data-ttu-id="ba519-243">Está bien recordar la ubicación del plan de App Service cuando se observan las ubicaciones de las redes virtuales con las que va a realizar la integración.</span><span class="sxs-lookup"><span data-stu-id="ba519-243">The location of the ASP is good to remember when looking at the locations of the VNets you are integrating with.</span></span> <span data-ttu-id="ba519-244">Cuando la red virtual está en otra ubicación, es mucho más probable que se experimenten problemas de latencia.</span><span class="sxs-lookup"><span data-stu-id="ba519-244">When the VNet is in another location you are far more likely to see latency issues.</span></span> 

<span data-ttu-id="ba519-245">Las redes virtuales integradas constituyen un recordatorio de con cuántas redes virtuales están integradas sus aplicaciones en este plan de App Service y cuántas puede tener.</span><span class="sxs-lookup"><span data-stu-id="ba519-245">The VNets integrated with is a reminder on how many VNets your apps are integrated with in this ASP and how many you can have.</span></span> 

<span data-ttu-id="ba519-246">Para ver más detalles sobre cada red virtual, haga clic en la red virtual que le interese.</span><span class="sxs-lookup"><span data-stu-id="ba519-246">To see added details on each VNet, just click on the VNet you are interested in.</span></span> <span data-ttu-id="ba519-247">Además de los detalles que se indicaron antes, también verá una lista de las aplicaciones de este plan de App Service que usan esa red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-247">In addition to the details that were noted earlier, you can also see a list of the apps in this ASP that are using that VNet.</span></span> 

<span data-ttu-id="ba519-248">Con respecto a las acciones, existen dos principales.</span><span class="sxs-lookup"><span data-stu-id="ba519-248">With respect to actions there are two primary actions.</span></span> <span data-ttu-id="ba519-249">La primera es la capacidad de agregar rutas que controlan el tráfico que sale de la aplicación hacia la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-249">The first is the ability to add routes that drive traffic leaving your app into your VNet.</span></span> <span data-ttu-id="ba519-250">La segunda acción es la capacidad de sincronizar los certificados y la información de la red.</span><span class="sxs-lookup"><span data-stu-id="ba519-250">The second action is the ability to sync certificates and network information.</span></span>

![][7]

<span data-ttu-id="ba519-251">**Enrutamiento** Como se indicó antes, las rutas definidas en la red virtual son lo que se usa para dirigir el tráfico desde la aplicación hacia la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-251">**Routing** As noted earlier the routes that are defined in your VNet are what is used for directing traffic into your VNet from your app.</span></span> <span data-ttu-id="ba519-252">Sin embargo, en algunos casos, los clientes desean enviar más tráfico saliente desde una aplicación hacia la red virtual y para ellos se proporciona esta capacidad.</span><span class="sxs-lookup"><span data-stu-id="ba519-252">There are some uses though where customers want to send additional outbound traffic from an app into the VNet and for them this capability is provided.</span></span> <span data-ttu-id="ba519-253">Lo que ocurra con el tráfico después de eso depende de cómo el cliente configure su red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-253">What happens to the traffic after that is up to how the customer configures their VNet.</span></span> 

<span data-ttu-id="ba519-254">**Certificados** El campo Estado de certificado refleja que el Servicio de aplicaciones está llevando a cabo una comprobación para confirmar que los certificados que se estén usando para la conexión VPN sigan siendo válidos.</span><span class="sxs-lookup"><span data-stu-id="ba519-254">**Certificates** The Certificate Status reflects a check being performed by the App Service to validate that the certificates that we are using for the VPN connection are still good.</span></span> <span data-ttu-id="ba519-255">Cuando se habilita Integración con red virtual, si es la primera integración con dicha red virtual desde las aplicaciones de este plan de App Service, se produce un intercambio obligatorio de certificados para garantizar la seguridad de la conexión.</span><span class="sxs-lookup"><span data-stu-id="ba519-255">When VNet Integration enabled, then if this is the first integration to that VNet from any apps in this ASP, there is a required exchange of certificates to ensure the security of the connection.</span></span> <span data-ttu-id="ba519-256">Junto con los certificados, se obtienen la configuración de DNS, las rutas y otros elementos similares que describen la red.</span><span class="sxs-lookup"><span data-stu-id="ba519-256">Along with the certificates we get the DNS configuration, routes and other similar things that describe the network.</span></span>
<span data-ttu-id="ba519-257">Si cambian los certificados o la información de red, es necesario hacer clic en "Sincronizar red".</span><span class="sxs-lookup"><span data-stu-id="ba519-257">If those certificates or network information is changed, then you need to click "Sync Network".</span></span> <span data-ttu-id="ba519-258">**NOTA**: Al hacer clic en "Sincronizar red", se producirá una breve interrupción en la conectividad entre la aplicación y la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-258">**NOTE**: When you click "Sync Network" then you cause a brief outage in connectivity between your app and your VNet.</span></span> <span data-ttu-id="ba519-259">Aunque no se reinicia la aplicación, la pérdida de conectividad podría hacer que su sitio no funcione correctamente.</span><span class="sxs-lookup"><span data-stu-id="ba519-259">While your app is not restarted, the loss of connectivity could cause your site to not function properly.</span></span> 

## <a name="accessing-on-premises-resources"></a><span data-ttu-id="ba519-260">Obtener acceso a recursos locales</span><span class="sxs-lookup"><span data-stu-id="ba519-260">Accessing on-premises resources</span></span>
<span data-ttu-id="ba519-261">Una de las ventajas de la característica Integración con red virtual es que, si la red virtual está conectada a la red local con una VPN de sitio a sitio, las aplicaciones pueden acceder a los recursos locales desde su aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-261">One of the benefits of the VNet Integration feature is that if your VNet is connected to your on-premises network with a Site to Site VPN then your apps can have access to your on-premises resources from your app.</span></span> <span data-ttu-id="ba519-262">Para que esto funcione, puede que necesite actualizar la puerta de enlace de VPN local con las rutas de su intervalo de direcciones IP de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-262">For this to work though you may need to update your on-premises VPN gateway with the routes for your Point to Site IP range.</span></span> <span data-ttu-id="ba519-263">En la configuración inicial de la VPN de sitio a sitio, los scripts que se usan para configurarla deberían también configurar las rutas, incluida la VPN de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-263">When the Site to Site VPN is first set up then the scripts used to configure it should set up routes including your Point to Site VPN.</span></span> <span data-ttu-id="ba519-264">Si agrega la VPN de punto a sitio después de crear la VPN de sitio a sitio, deberá actualizar las rutas manualmente.</span><span class="sxs-lookup"><span data-stu-id="ba519-264">If you add the Point to Site VPN after you create your Site to Site VPN, then you need to update the routes manually.</span></span> <span data-ttu-id="ba519-265">El procedimiento varía según la puerta de enlace y no se describe aquí.</span><span class="sxs-lookup"><span data-stu-id="ba519-265">Details on how to do that vary per gateway and are not described here.</span></span> 

> [!NOTE]
> <span data-ttu-id="ba519-266">La característica Integración con red virtual no integra una aplicación con una red virtual que tiene una puerta de enlace de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ba519-266">The VNet Integration feature does not integrate an app with a VNet that has an ExpressRoute Gateway.</span></span> <span data-ttu-id="ba519-267">Incluso si la puerta de enlace de ExpressRoute está configurada en [modo de coexistencia][VPNERCoex], Integración con red virtual no funcionará.</span><span class="sxs-lookup"><span data-stu-id="ba519-267">Even if the ExpressRoute Gateway is configured in [coexistence mode][VPNERCoex] the VNet Integration does not work.</span></span> <span data-ttu-id="ba519-268">Si necesita tener acceso a los recursos mediante una conexión de ExpressRoute, puede utilizar una instancia de [App Service Environment][ASE] que se ejecute en la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-268">If you need to access resources through an ExpressRoute connection, then you can use an [App Service Environment][ASE], which runs in your VNet.</span></span>
> 
> 

## <a name="pricing-details"></a><span data-ttu-id="ba519-269">Detalles de precios</span><span class="sxs-lookup"><span data-stu-id="ba519-269">Pricing details</span></span>
<span data-ttu-id="ba519-270">Hay algunos matices sobre los precios que se deben tener en cuenta al usar la característica Integración con red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-270">There are a few pricing nuances that you should be aware of when using the VNet Integration feature.</span></span> <span data-ttu-id="ba519-271">El uso de esta característica comporta tres cargos:</span><span class="sxs-lookup"><span data-stu-id="ba519-271">There are 3 related charges to the use of this feature:</span></span>

* <span data-ttu-id="ba519-272">Requisitos del plan de tarifa para el plan de servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="ba519-272">ASP pricing tier requirements</span></span>
* <span data-ttu-id="ba519-273">Costos de la transferencia de datos</span><span class="sxs-lookup"><span data-stu-id="ba519-273">Data transfer costs</span></span>
* <span data-ttu-id="ba519-274">Costos de la puerta de enlace de VPN</span><span class="sxs-lookup"><span data-stu-id="ba519-274">VPN Gateway costs.</span></span>

<span data-ttu-id="ba519-275">Para que las aplicaciones puedan usar esta característica, deben pertenecer a un plan de servicio de aplicaciones Premium o Estándar.</span><span class="sxs-lookup"><span data-stu-id="ba519-275">For your apps to be able to use this feature, they need to be in a Standard or Premium App Service Plan.</span></span> <span data-ttu-id="ba519-276">Puede ver más detalles sobre esos costos aquí: [Precios de App Service][ASPricing].</span><span class="sxs-lookup"><span data-stu-id="ba519-276">You can see more details on those costs here: [App Service Pricing][ASPricing].</span></span> 

<span data-ttu-id="ba519-277">Debido a la forma en que se controlan las VPN de punto a sitio, siempre tiene un cargo por los datos salientes a través de la conexión de Integración con red virtual, incluso si la red virtual está en el mismo centro de datos.</span><span class="sxs-lookup"><span data-stu-id="ba519-277">Due to the way Point to Site VPNs are handled, you always have a charge for outbound data through your VNet Integration connection even if the VNet is in the same data center.</span></span> <span data-ttu-id="ba519-278">Para ver cuáles son dichos cargos, consulte: [Detalles de precios de transferencia de datos][DataPricing].</span><span class="sxs-lookup"><span data-stu-id="ba519-278">To see what those charges are, take a look here: [Data Transfer Pricing Details][DataPricing].</span></span> 

<span data-ttu-id="ba519-279">El último elemento es el costo de las puertas de enlace de red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-279">The last item is the cost of the VNet gateways.</span></span> <span data-ttu-id="ba519-280">Si no necesita las puertas de enlace para algo diferente, como las VPN de sitio a sitio, va a pagar para que las puertas de enlace admitan la característica Integración con red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-280">If you don't need the gateways for something else such as Site to Site VPNs, then you are paying for gateways to support the VNet Integration feature.</span></span> <span data-ttu-id="ba519-281">Los detalles sobre esos costos están aquí: [Precios de Puerta de enlace de VPN][VNETPricing].</span><span class="sxs-lookup"><span data-stu-id="ba519-281">There are details on those costs here: [VPN Gateway Pricing][VNETPricing].</span></span> 

## <a name="troubleshooting"></a><span data-ttu-id="ba519-282">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="ba519-282">Troubleshooting</span></span>
<span data-ttu-id="ba519-283">El que una característica sea fácil de configurar no quiere decir que no presente problemas con el uso.</span><span class="sxs-lookup"><span data-stu-id="ba519-283">While the feature is easy to set up, that doesn't mean that your experience will be problem free.</span></span> <span data-ttu-id="ba519-284">Si encuentra problemas para acceder al punto de conexión que desee, existen varias utilidades que sirven para probar la conectividad desde la consola de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-284">Should you encounter problems accessing your desired endpoint there are some utilities you can use to test connectivity from the app console.</span></span> <span data-ttu-id="ba519-285">Puede usar dos experiencias de consola.</span><span class="sxs-lookup"><span data-stu-id="ba519-285">There are two console experiences you can use.</span></span> <span data-ttu-id="ba519-286">Una es la consola Kudu y la otra es la consola a la que se accede en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="ba519-286">One is from the Kudu console and the other is the console that you can reach in the Azure portal.</span></span> <span data-ttu-id="ba519-287">Para llegar a la consola Kudu desde la aplicación, vaya a Herramientas -> Kudu.</span><span class="sxs-lookup"><span data-stu-id="ba519-287">To get to the Kudu console from your app go to Tools -> Kudu.</span></span> <span data-ttu-id="ba519-288">Esto equivale a ir a [nombreDeSitio].scm.azurewebsites.net.</span><span class="sxs-lookup"><span data-stu-id="ba519-288">This is the same as going to [sitename].scm.azurewebsites.net.</span></span> <span data-ttu-id="ba519-289">Cuando se abra, simplemente vaya a la pestaña de consola Debug (Depurar). Para llegar a la consola hospedada en el Portal de Azure, desde su aplicación, vaya a Herramientas -> Consola.</span><span class="sxs-lookup"><span data-stu-id="ba519-289">Once that opens simply go to the Debug console tab. To get to the Azure portal hosted console then from your app go to Tools -> Console.</span></span> 

#### <a name="tools"></a><span data-ttu-id="ba519-290">Herramientas</span><span class="sxs-lookup"><span data-stu-id="ba519-290">Tools</span></span>
<span data-ttu-id="ba519-291">Las herramientas ping, nslookup y tracert no funcionarán a través de la consola por restricciones de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ba519-291">The tools ping, nslookup and tracert won’t work through the console due to security constraints.</span></span> <span data-ttu-id="ba519-292">Para suplir esta falta, se han agregado dos herramientas independientes.</span><span class="sxs-lookup"><span data-stu-id="ba519-292">To fill the void there have been two separate tools added.</span></span> <span data-ttu-id="ba519-293">Para probar la funcionalidad de DNS, agregamos una herramienta denominada nameresolver.exe.</span><span class="sxs-lookup"><span data-stu-id="ba519-293">In order to test DNS functionality we added a tool named nameresolver.exe.</span></span> <span data-ttu-id="ba519-294">La sintaxis es:</span><span class="sxs-lookup"><span data-stu-id="ba519-294">The syntax is:</span></span>

    nameresolver.exe hostname [optional: DNS Server]

<span data-ttu-id="ba519-295">Puede usar nameresolver para comprobar los nombres de host de los que depende la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-295">You can use nameresolver to check the hostnames that your app depends on.</span></span> <span data-ttu-id="ba519-296">De este modo, puede probar si hay algo mal configurado en el DNS o si no tiene acceso al servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="ba519-296">This way you can test if you have anything mis-configured with your DNS or perhaps don't have access to your DNS server.</span></span>

<span data-ttu-id="ba519-297">La siguiente herramienta permite probar la conectividad de TCP para una combinación de host y puerto.</span><span class="sxs-lookup"><span data-stu-id="ba519-297">The next tool allows you to test for TCP connectivity to a host and port combination.</span></span> <span data-ttu-id="ba519-298">Esta herramienta se llama tcpping.exe y la sintaxis es:</span><span class="sxs-lookup"><span data-stu-id="ba519-298">This tool is called tcpping.exe and the syntax is:</span></span>

    tcpping.exe hostname [optional: port]

<span data-ttu-id="ba519-299">La utilidad tcpping indica si se puede llegar a un host y a puerto específicos.</span><span class="sxs-lookup"><span data-stu-id="ba519-299">The tcpping utility tells you if you can reach a specific host and port.</span></span> <span data-ttu-id="ba519-300">Solo puede mostrar correcto si hay una aplicación que escucha en la combinación de host y puerto, y no hay acceso a la red de la aplicación para el host especificado y el puerto.</span><span class="sxs-lookup"><span data-stu-id="ba519-300">It only can show success if: there is an application listening at the host and port combination, and there is network access from your app to the specified host and port.</span></span>

#### <a name="debugging-access-to-vnet-hosted-resources"></a><span data-ttu-id="ba519-301">Depuración del acceso a recursos hospedados en la red virtual</span><span class="sxs-lookup"><span data-stu-id="ba519-301">Debugging access to VNet hosted resources</span></span>
<span data-ttu-id="ba519-302">Hay varias situaciones que pueden impedir que la aplicación llegue a un host y un puerto específicos.</span><span class="sxs-lookup"><span data-stu-id="ba519-302">There are a number of things that can prevent your app from reaching a specific host and port.</span></span> <span data-ttu-id="ba519-303">La mayoría de las veces se debe a una de estas tres causas:</span><span class="sxs-lookup"><span data-stu-id="ba519-303">Most of the time it is one of three things:</span></span>

* <span data-ttu-id="ba519-304">**Hay un firewall en la comunicación**: si tiene un firewall en la comunicación, se agotará el tiempo de espera de TCP.</span><span class="sxs-lookup"><span data-stu-id="ba519-304">**There is a firewall in the way** If you have a firewall in the way, you will hit the TCP timeout.</span></span> <span data-ttu-id="ba519-305">En este caso, es de 21 segundos.</span><span class="sxs-lookup"><span data-stu-id="ba519-305">That is 21 seconds in this case.</span></span> <span data-ttu-id="ba519-306">Utilice la herramienta tcpping para probar la conectividad.</span><span class="sxs-lookup"><span data-stu-id="ba519-306">Use the tcpping tool to test connectivity.</span></span> <span data-ttu-id="ba519-307">Los tiempos de espera agotados de TCP pueden deberse a muchas causas, además de los firewalls, pero comience por comprobar los firewalls.</span><span class="sxs-lookup"><span data-stu-id="ba519-307">TCP timeouts can be due to many things beyond firewalls but start there.</span></span> 
* <span data-ttu-id="ba519-308">**El DNS no está accesible**: el tiempo de espera del DNS es de tres segundos por cada servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="ba519-308">**DNS is not accessible** The DNS timeout is three seconds per DNS server.</span></span> <span data-ttu-id="ba519-309">Si tiene dos servidores DNS, el tiempo de espera es de seis segundos.</span><span class="sxs-lookup"><span data-stu-id="ba519-309">If you have two DNS servers, the timeout is 6 seconds.</span></span> <span data-ttu-id="ba519-310">Utilice nameresolver para ver si funciona el DNS.</span><span class="sxs-lookup"><span data-stu-id="ba519-310">Use nameresolver to see if DNS is working.</span></span> <span data-ttu-id="ba519-311">Recuerde que no puede usar nslookup ya que este no utiliza el DNS con el que está configurada su red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-311">Remember you can't use nslookup as that does not use the DNS your VNet is configured with.</span></span>
* <span data-ttu-id="ba519-312">**Intervalo IP de P2S no válido**  El intervalo IP de punto a sitio debe estar en los intervalos IP privado de RFC 1918 (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span><span class="sxs-lookup"><span data-stu-id="ba519-312">**Invalid P2S IP range** The point to site IP range needs to be in the RFC 1918 private IP ranges (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span></span> <span data-ttu-id="ba519-313">Si el intervalo utiliza direcciones IP externas, las cosas no funcionarán.</span><span class="sxs-lookup"><span data-stu-id="ba519-313">If the range uses IPs outside of that, then things won't work.</span></span> 

<span data-ttu-id="ba519-314">Si estos elementos no resuelven su problema, busque primero elementos sencillas como:</span><span class="sxs-lookup"><span data-stu-id="ba519-314">If those items don't answer your problem, look first for the simple things like:</span></span> 

* <span data-ttu-id="ba519-315">¿Aparece la puerta de enlace como activa en el Portal?</span><span class="sxs-lookup"><span data-stu-id="ba519-315">Does the Gateway show as being up in the portal?</span></span>
* <span data-ttu-id="ba519-316">¿Indican los certificados que están sincronizados?</span><span class="sxs-lookup"><span data-stu-id="ba519-316">Do certificates show as being in sync?</span></span>
* <span data-ttu-id="ba519-317">¿Cambió alguien la configuración de la red sin hacer clic en "Sincronizar red" en los planes de servicio de aplicaciones afectados?</span><span class="sxs-lookup"><span data-stu-id="ba519-317">Did anybody change the network configuration without doing a "Sync Network" in the affected ASPs?</span></span> 

<span data-ttu-id="ba519-318">Si la puerta de enlace está inactiva, vuelva a activarla.</span><span class="sxs-lookup"><span data-stu-id="ba519-318">If your gateway is down, then bring it back up.</span></span> <span data-ttu-id="ba519-319">Si los certificados no están sincronizados, vaya a la vista del plan de App Service en Integración con red virtual y haga clic en "Sincronizar red".</span><span class="sxs-lookup"><span data-stu-id="ba519-319">If your certificates are out of sync, then go to the ASP view of your VNet Integration and hit "Sync Network".</span></span> <span data-ttu-id="ba519-320">Si sospecha que se realizó un cambio en la configuración de la red virtual y no se sincronizó con el plan de App Service, vaya a la vista del plan de App Service de Integración con red virtual y haga clic en "Sincronizar red". Recuerde que esto causará una breve interrupción en la conexión entre la red virtual y sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="ba519-320">If you suspect that there has been a change made to your VNet configuration and it wasn't sync'd with your ASPs, then go to the ASP view of your VNet Integration and hit "Sync Network" Just as a reminder, this causes a brief outage with your VNet connection and your apps.</span></span> 

<span data-ttu-id="ba519-321">Si todo eso está bien, debe profundizar un poco más:</span><span class="sxs-lookup"><span data-stu-id="ba519-321">If all of that is fine, then you need to dig in a bit deeper:</span></span>

* <span data-ttu-id="ba519-322">¿Hay alguna otra aplicación que utilice Integración con red virtual para tener acceso a recursos en la misma red virtual?</span><span class="sxs-lookup"><span data-stu-id="ba519-322">Are there any other apps using VNet Integration to reach resources in the same VNet?</span></span> 
* <span data-ttu-id="ba519-323">¿Puede ir a la consola de la aplicación y usar tcpping para llegar a cualquier otro recurso de la red virtual?</span><span class="sxs-lookup"><span data-stu-id="ba519-323">Can you go to the app console and use tcpping to reach any other resources in your VNet?</span></span> 

<span data-ttu-id="ba519-324">Si la respuesta a cualquiera de las anteriores preguntas es afirmativa, Integración con red virtual es correcta y el problema reside en otro lugar.</span><span class="sxs-lookup"><span data-stu-id="ba519-324">If either of the above are true, then your VNet Integration is fine and the problem is somewhere else.</span></span> <span data-ttu-id="ba519-325">Aquí la situación se complica porque no existe una forma sencilla de ver por qué no se llega a un host:puerto.</span><span class="sxs-lookup"><span data-stu-id="ba519-325">This is where it gets to be more of a challenge because there is no simple way to see why you can't reach a host:port.</span></span> <span data-ttu-id="ba519-326">Algunas de las causas son:</span><span class="sxs-lookup"><span data-stu-id="ba519-326">Some of the causes include:</span></span>

* <span data-ttu-id="ba519-327">tiene un firewall en el host que impide el acceso al puerto de la aplicación desde su intervalo de direcciones IP de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-327">you have a firewall up on your host preventing access to the application port from your point to site IP range.</span></span> <span data-ttu-id="ba519-328">Para cruzar subredes, se requiere a menudo acceso público.</span><span class="sxs-lookup"><span data-stu-id="ba519-328">Crossing subnets often requires Public access.</span></span>
* <span data-ttu-id="ba519-329">el host de destino está inactivo;</span><span class="sxs-lookup"><span data-stu-id="ba519-329">your target host is down</span></span>
* <span data-ttu-id="ba519-330">la aplicación está inactiva;</span><span class="sxs-lookup"><span data-stu-id="ba519-330">your application is down</span></span>
* <span data-ttu-id="ba519-331">la dirección IP o el nombre de host son incorrectos;</span><span class="sxs-lookup"><span data-stu-id="ba519-331">you had the wrong IP or hostname</span></span>
* <span data-ttu-id="ba519-332">la aplicación escucha en un puerto diferente del que se esperaba.</span><span class="sxs-lookup"><span data-stu-id="ba519-332">your application is listening on a different port than what you expected.</span></span> <span data-ttu-id="ba519-333">Para comprobarlo, vaya a ese host y use "netstat -aon" en el símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="ba519-333">You can check this by going onto that host and using "netstat -aon" from the cmd prompt.</span></span> <span data-ttu-id="ba519-334">Esto le muestra qué identificador de proceso está escuchando en qué puerto;</span><span class="sxs-lookup"><span data-stu-id="ba519-334">This shows you what process ID is listening on what port.</span></span> 
* <span data-ttu-id="ba519-335">los grupos de seguridad de la red están configurados de tal manera que impiden el acceso al host y al puerto de la aplicación desde su intervalo de direcciones IP de punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-335">your network security groups are configured in such a manner that they prevent access to your application host and port from your point to site IP range</span></span>

<span data-ttu-id="ba519-336">Recuerde que no sabe qué dirección IP del intervalo de direcciones IP de punto a sitio usará la aplicación, así que necesita permitir el acceso a todo el intervalo.</span><span class="sxs-lookup"><span data-stu-id="ba519-336">Remember that you don't know what IP in your Point to Site IP range that your app will use so you need to allow access from the entire range.</span></span> 

<span data-ttu-id="ba519-337">Otros pasos de depuración son:</span><span class="sxs-lookup"><span data-stu-id="ba519-337">Additional debug steps include:</span></span>

* <span data-ttu-id="ba519-338">iniciar sesión en otra máquina virtual de la red virtual e intentar acceder al host:puerto de recursos desde ella.</span><span class="sxs-lookup"><span data-stu-id="ba519-338">log onto another VM in your VNet and attempt to reach your resource host:port from there.</span></span> <span data-ttu-id="ba519-339">Hay algunas utilidades ping basadas en TCP que sirven para este propósito o incluso puede usar telnet si es necesario.</span><span class="sxs-lookup"><span data-stu-id="ba519-339">There are some TCP ping utilities that you can use for this purpose or can even use telnet if need be.</span></span> <span data-ttu-id="ba519-340">El objetivo es solamente determinar si existe conectividad desde esta otra máquina virtual;</span><span class="sxs-lookup"><span data-stu-id="ba519-340">The purpose here is just to determine if connectivity is there from this other VM.</span></span> 
* <span data-ttu-id="ba519-341">abrir una aplicación en otra máquina virtual y probar el acceso a ese host y ese puerto desde la consola de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-341">bring up an application on another VM and test access to that host and port from the console from your app</span></span>

#### <a name="on-premises-resources"></a><span data-ttu-id="ba519-342">Recursos locales</span><span class="sxs-lookup"><span data-stu-id="ba519-342">On-premises resources</span></span> ####
<span data-ttu-id="ba519-343">Si la aplicación no puede acceder a los recursos locales, lo primero que debe comprobar es si puede llegar a un recurso de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-343">If your app cannot reach resources on-premises, then the first thing you should check is if you can reach a resource in your VNet.</span></span> <span data-ttu-id="ba519-344">Si funciona, intente conectarse a la aplicación local desde una máquina virtual de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-344">If that works, try to reach the on-premises application from a VM in the VNet.</span></span> <span data-ttu-id="ba519-345">Puede usar telnet o una utilidad ping basada en TCP.</span><span class="sxs-lookup"><span data-stu-id="ba519-345">You can use telnet or a TCP ping utility.</span></span> <span data-ttu-id="ba519-346">Si la máquina virtual no puede acceder al recurso local, asegúrese de que funciona la conexión VPN de sitio a sitio.</span><span class="sxs-lookup"><span data-stu-id="ba519-346">If your VM can't reach your on-premises resource, then make sure your Site to Site VPN connection is working.</span></span> <span data-ttu-id="ba519-347">Si funciona, compruebe lo mismo que se indicó antes, así como el estado y la configuración de la puerta de enlace local.</span><span class="sxs-lookup"><span data-stu-id="ba519-347">If it is working, then check the same things noted earlier as well as the on-premises gateway configuration and status.</span></span> 

<span data-ttu-id="ba519-348">Ahora bien, si la máquina virtual hospedada en la red virtual puede acceder a su sistema local pero la aplicación no puede, es probable que el motivo sea uno de los siguientes:</span><span class="sxs-lookup"><span data-stu-id="ba519-348">Now if your VNet hosted VM can reach your on-premises system but your app can't then the reason is likely one of the following:</span></span>

* <span data-ttu-id="ba519-349">Las rutas no están configuradas con los intervalos IP de punto a sitio en la puerta de enlace local</span><span class="sxs-lookup"><span data-stu-id="ba519-349">your routes are not configured with your point to site IP ranges in your on-premises gateway</span></span>
* <span data-ttu-id="ba519-350">Los grupos de seguridad de red están bloqueando el acceso del intervalo IP de punto a sitio</span><span class="sxs-lookup"><span data-stu-id="ba519-350">your network security groups are blocking access for your Point to Site IP range</span></span>
* <span data-ttu-id="ba519-351">Los firewalls locales están bloqueando el tráfico procedente del intervalo IP de punto a sitio</span><span class="sxs-lookup"><span data-stu-id="ba519-351">your on-premises firewalls are blocking traffic from your Point to Site IP range</span></span>
* <span data-ttu-id="ba519-352">Tiene una ruta definida por el usuario (UDR) en la red virtual que impide que el tráfico basado en la conectividad de punto a sitio llegue a su red local</span><span class="sxs-lookup"><span data-stu-id="ba519-352">you have a User Defined Route(UDR) in your VNet that prevents your Point to Site based traffic from reaching your on-premises network</span></span>

## <a name="hybrid-connections-and-app-service-environments"></a><span data-ttu-id="ba519-353">Conexiones híbridas y entornos del Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="ba519-353">Hybrid Connections and App Service Environments</span></span>
<span data-ttu-id="ba519-354">Existen tres características que permiten el acceso a los recursos hospedados en la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-354">There are three features that enable access to VNet hosted resources.</span></span> <span data-ttu-id="ba519-355">Son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="ba519-355">They are:</span></span>

* <span data-ttu-id="ba519-356">Integración con red virtual</span><span class="sxs-lookup"><span data-stu-id="ba519-356">VNet Integration</span></span>
* <span data-ttu-id="ba519-357">conexiones híbridas</span><span class="sxs-lookup"><span data-stu-id="ba519-357">Hybrid Connections</span></span>
* <span data-ttu-id="ba519-358">Entornos del Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="ba519-358">App Service Environments</span></span>

<span data-ttu-id="ba519-359">Conexiones híbridas requiere que se instale un agente de retransmisión llamado administrador de conexiones híbridas (HCM) en la red.</span><span class="sxs-lookup"><span data-stu-id="ba519-359">Hybrid Connections requires you to install a relay agent called the Hybrid Connection Manager(HCM) in your network.</span></span> <span data-ttu-id="ba519-360">El HCM debe ser capaz de conectarse a Azure y también a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba519-360">The HCM needs to be able to connect to Azure and also to your application.</span></span> <span data-ttu-id="ba519-361">Esta solución es especialmente atractiva desde una red remota como su red local o incluso otra red hospedada en la nube porque no requiere un punto de conexión accesible por Internet.</span><span class="sxs-lookup"><span data-stu-id="ba519-361">This solution is especially great from a remote network such as your on-premises network or even another cloud hosted network because it does not require an internet accessible endpoint.</span></span> <span data-ttu-id="ba519-362">El HCM solamente se ejecuta en Windows y puede tener hasta cinco instancias en ejecución para proporcionar alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="ba519-362">The HCM only runs on Windows and you can have up to five instances running to provide high availability.</span></span> <span data-ttu-id="ba519-363">Sin embargo, Conexiones híbridas solo admite TCP y cada uno de sus puntos de conexión tiene que coincidir con una combinación de host:puerto específica.</span><span class="sxs-lookup"><span data-stu-id="ba519-363">Hybrid Connections only supports TCP though and each HC endpoint has to match to a specific host:port combination.</span></span> 

<span data-ttu-id="ba519-364">La característica App Service Environment permite ejecutar una instancia de Azure App Service en la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ba519-364">The App Service Environment feature allows you to run an instance of the Azure App Service in your VNet.</span></span> <span data-ttu-id="ba519-365">Esto permite que sus aplicaciones accedan a recursos de la red virtual sin ningún paso adicional.</span><span class="sxs-lookup"><span data-stu-id="ba519-365">This lets your apps access resources in your VNet without any extra steps.</span></span> <span data-ttu-id="ba519-366">Algunas de las otras ventajas de un entorno de App Service Environment es que se pueden usar trabajos dedicados Dv2 con hasta 14 GB de RAM.</span><span class="sxs-lookup"><span data-stu-id="ba519-366">Some of the other benefits of an App Service Environment are that you can use Dv2 based workers with up to 14 GB of RAM.</span></span> <span data-ttu-id="ba519-367">Otra ventaja es que se puede escalar el sistema para que satisfaga sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ba519-367">Another benefit is that you can scale the system to meet your needs.</span></span> <span data-ttu-id="ba519-368">A diferencia de los entornos de varios inquilinos en los que el plan de App Service se limita a 20 instancias, en un ASE puede escalar hasta 100 instancias del plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="ba519-368">Unlike the multi-tenant environments where your ASP is limited to 20 instances, in an ASE you can scale up to 100 ASP instances.</span></span> <span data-ttu-id="ba519-369">Una de las cosas que ofrece un entorno de App Service Environment que no encontrará en Integración con red virtual es que funciona con una VPN de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ba519-369">One of the things you get with an ASE that you don't with VNet Integration is that an App Service Environment can work with an ExpressRoute VPN.</span></span> 

<span data-ttu-id="ba519-370">Aunque algunos casos de uso se solapan, ninguna de estas características puede reemplazar a las otras.</span><span class="sxs-lookup"><span data-stu-id="ba519-370">While there is some use case overlap, none of these feature can replace any of the others.</span></span> <span data-ttu-id="ba519-371">Saber qué característica emplear depende de sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ba519-371">Knowing what feature to use is tied to your needs.</span></span> <span data-ttu-id="ba519-372">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ba519-372">For example:</span></span>

* <span data-ttu-id="ba519-373">Si es un desarrollador y simplemente desea ejecutar un sitio en Azure y acceder a la base de datos en la estación de trabajo que suele usar, lo más fácil de usar es Conexiones híbridas.</span><span class="sxs-lookup"><span data-stu-id="ba519-373">If you are a developer and simply want to run a site in Azure and have it access the database on the workstation under your desk, then the easiest thing to use is Hybrid Connections.</span></span> 
* <span data-ttu-id="ba519-374">Si es una gran organización que desea colocar un gran número de propiedades web en la nube pública y administrarlas en su propia red, entonces le interesará App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ba519-374">If you are a large organization that wants to put a large number of web properties in the public cloud and manage them in your own network, then you want to go with the App Service Environment.</span></span> 
* <span data-ttu-id="ba519-375">Si tiene varias aplicaciones hospedadas con App Service y simplemente desea acceder a recursos de la red virtual, Integración con red virtual es la mejor opción.</span><span class="sxs-lookup"><span data-stu-id="ba519-375">If you have a number of App Service hosted apps and simply want to access resources in your VNet, then VNet Integration is the way to go.</span></span> 

<span data-ttu-id="ba519-376">Más allá de los casos de uso, hay diversos aspectos relacionados con la simplicidad.</span><span class="sxs-lookup"><span data-stu-id="ba519-376">Beyond the use cases, there are some simplicity related aspects.</span></span> <span data-ttu-id="ba519-377">Si la red virtual ya está conectada a la red local, usar Integración con red virtual o una instancia de App Service Environment es una manera fácil de consumir recursos locales.</span><span class="sxs-lookup"><span data-stu-id="ba519-377">If your VNet is already connected to your on-premises network, then using VNet Integration or an App Service Environment is an easy way to consume on-premises resources.</span></span> <span data-ttu-id="ba519-378">Por otro lado, si la red virtual no está conectada a la red local, resulta mucho más costoso configurar una VPN de sitio a sitio con la red virtual en comparación con instalar el HCM.</span><span class="sxs-lookup"><span data-stu-id="ba519-378">On the other hand, if your VNet is not connected to your on-premises network then it's a lot more overhead to set up a site to site VPN with your VNet compared with installing the HCM.</span></span> 

<span data-ttu-id="ba519-379">Además de las diferencias funcionales, existen también diferencias de precio.</span><span class="sxs-lookup"><span data-stu-id="ba519-379">Beyond the functional differences, there are also pricing differences.</span></span> <span data-ttu-id="ba519-380">La característica Entorno del Servicio de aplicaciones es un servicio premium, pero ofrece la mayor variedad de configuraciones de red, además de otras características interesantes.</span><span class="sxs-lookup"><span data-stu-id="ba519-380">The App Service Environment feature is a Premium service offering but offers the most network configuration possibilities in addition to other great features.</span></span> <span data-ttu-id="ba519-381">Integración con red virtual se puede usar con el plan de App Service Estándar o Premium y es ideal para consumir de forma segura recursos de la red virtual desde App Service con varios inquilinos.</span><span class="sxs-lookup"><span data-stu-id="ba519-381">VNet Integration can be used with Standard or Premium ASPs and is perfect for securely consuming resources in your VNet from the multi-tenant App Service.</span></span> <span data-ttu-id="ba519-382">Actualmente, Conexiones híbridas depende de un cuenta de BizTalk con niveles de precios que comienzan de forma gratuita y progresivamente van aumentando según la cantidad que necesite.</span><span class="sxs-lookup"><span data-stu-id="ba519-382">Hybrid Connections currently depends on a BizTalk account, which has pricing levels that start free and then get progressively more expensive based on the amount you need.</span></span> <span data-ttu-id="ba519-383">Sin embargo, cuando se necesita trabajar en muchas redes, no hay ninguna característica como Conexiones híbridas, que permite acceder a recursos de más de 100 redes distintas.</span><span class="sxs-lookup"><span data-stu-id="ba519-383">When it comes to working across many networks though, there is no other feature like Hybrid Connections, which can enable you to access resources in well over 100 separate networks.</span></span> 

<!--Image references-->
[1]: ./media/web-sites-integrate-with-vnet/vnetint-upgradeplan.png
[2]: ./media/web-sites-integrate-with-vnet/vnetint-existingvnet.png
[3]: ./media/web-sites-integrate-with-vnet/vnetint-createvnet.png
[4]: ./media/web-sites-integrate-with-vnet/vnetint-howitworks.png
[5]: ./media/web-sites-integrate-with-vnet/vnetint-appmanage.png
[6]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanage.png
[7]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanagedetail.png
[8]: ./media/web-sites-integrate-with-vnet/vnetint-vnetp2s.png

<!--Links-->
[VNETOverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-overview/ 
[AzurePortal]: http://portal.azure.com/
[ASPricing]: http://azure.microsoft.com/pricing/details/app-service/
[VNETPricing]: http://azure.microsoft.com/pricing/details/vpn-gateway/
[DataPricing]: http://azure.microsoft.com/pricing/details/data-transfers/
[V2VNETP2S]: http://azure.microsoft.com/documentation/articles/vpn-gateway-howto-point-to-site-rm-ps/
[IntPowershell]: http://azure.microsoft.com/documentation/articles/app-service-vnet-integration-powershell/
[ASEintro]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
[ILBASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/create-ilb-ase
[V2VNETPortal]: https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal
[VPNERCoex]: http://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-coexist-resource-manager
[ASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro

---
title: "Información general sobre la arquitectura de red de los entornos del Servicio de aplicaciones"
description: "Introducción a la arquitectura de la topología de red de los entornos del Servicio de aplicaciones."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: b2afe86d8774b449a257312d4e60b5f6125336ca
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="81fad-103">Información general sobre la arquitectura de red de los entornos del Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="81fad-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="81fad-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="81fad-104">Introduction</span></span>
<span data-ttu-id="81fad-105">Los entornos de App Service siempre se crean dentro de una subred de una [red virtual][virtualnetwork]; las aplicaciones que se ejecutan en un entorno de App Service pueden comunicarse con puntos de conexión privados ubicados dentro de la misma topología de red virtual.</span><span class="sxs-lookup"><span data-stu-id="81fad-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within the same virtual network topology.</span></span>  <span data-ttu-id="81fad-106">Puesto que los clientes pueden bloquear partes de su infraestructura de red virtual, es importante conocer los tipos de flujos de comunicación de red que se producen con un entorno del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-106">Since customers may lock down parts of their virtual network infrastructure, it is important to understand the types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="81fad-107">Flujo de red general</span><span class="sxs-lookup"><span data-stu-id="81fad-107">General Network Flow</span></span>
<span data-ttu-id="81fad-108">Cuando un entorno del Servicio de aplicaciones (ASE) utiliza una dirección IP virtual pública (VIP) para las aplicaciones, todo el tráfico entrante llega a esa VIP pública,</span><span class="sxs-lookup"><span data-stu-id="81fad-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="81fad-109">incluido el tráfico HTTP y HTTPS para las aplicaciones, así como otro tráfico de FTP, la funcionalidad de depuración remota y las operaciones de administración de Azure.</span><span class="sxs-lookup"><span data-stu-id="81fad-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="81fad-110">Para obtener una lista completa de los puertos específicos (necesarios y opcionales) que están disponibles en la VIP pública, consulte el artículo sobre el [control del tráfico entrante][controllinginboundtraffic] en un entorno de App Service.</span><span class="sxs-lookup"><span data-stu-id="81fad-110">For a full list of the specific ports (both required and optional) that are available on the public VIP see the article on [controlling inbound traffic][controllinginboundtraffic] to an App Service Environment.</span></span> 

<span data-ttu-id="81fad-111">Los entornos del Servicio de aplicaciones también admiten aplicaciones en ejecución enlazadas únicamente a una dirección de red virtual interna, que también se denomina "dirección del ILB" (equilibrador de carga interno).</span><span class="sxs-lookup"><span data-stu-id="81fad-111">App Service Environments also support running apps that are bound only to a virtual network internal address, also referred to as an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="81fad-112">En un ASE con un ILB, el tráfico HTTP y HTTPS de las aplicaciones, así como las llamadas de depuración remota, proceden de la dirección del ILB.</span><span class="sxs-lookup"><span data-stu-id="81fad-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on the ILB address.</span></span>  <span data-ttu-id="81fad-113">En las configuraciones de ASE con un ILB más habituales, el tráfico FTP y FTPS también llegan desde esa dirección.</span><span class="sxs-lookup"><span data-stu-id="81fad-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on the ILB address.</span></span>  <span data-ttu-id="81fad-114">Sin embargo, las operaciones de administración de Azure seguirán fluyendo a los puertos 454 y 455 en la VIP pública de un ASE con un ILB.</span><span class="sxs-lookup"><span data-stu-id="81fad-114">However Azure management operations will still flow to ports 454/455 on the public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="81fad-115">En el diagrama siguiente se muestra información general de los distintos flujos de red entrantes y salientes de un entorno del Servicio de aplicaciones, donde las aplicaciones se enlazan a una dirección IP virtual pública:</span><span class="sxs-lookup"><span data-stu-id="81fad-115">The diagram below shows an overview of the various inbound and outbound network flows for an App Service Environment where the apps are bound to a public virtual IP address:</span></span>

![Flujos de red generales][GeneralNetworkFlows]

<span data-ttu-id="81fad-117">Un entorno del Servicio de aplicaciones puede comunicarse con una variedad de extremos privados del cliente.</span><span class="sxs-lookup"><span data-stu-id="81fad-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="81fad-118">Por ejemplo, las aplicaciones que se ejecutan en el entorno del Servicio de aplicaciones pueden conectarse a servidores de base de datos que se ejecutan en máquinas virtuales de IaaS en la misma topología de red virtual.</span><span class="sxs-lookup"><span data-stu-id="81fad-118">For example, apps running in the App Service Environment can connect to database server(s) running on IaaS virtual machines in the same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="81fad-119">Si examinamos el diagrama de red, la implementación correspondiente a "Otros recursos de proceso" se efectúa en una subred diferente a la del entorno del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-119">Looking at the network diagram, the "Other Compute Resources" are deployed in a different Subnet from the App Service Environment.</span></span> <span data-ttu-id="81fad-120">Al implementar recursos en la misma subred que el entorno del Servicio de aplicaciones (ASE), se bloqueará la conectividad del ASE a esos recursos (excepto para el enrutamiento específico dentro del entorno del Servicio de aplicaciones).</span><span class="sxs-lookup"><span data-stu-id="81fad-120">Deploying resources in the same Subnet with the ASE will block connectivity from ASE to those resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="81fad-121">Implemente en su lugar en una subred diferente (en la misma red virtual).</span><span class="sxs-lookup"><span data-stu-id="81fad-121">Deploy to a different Subnet instead (in the same VNET).</span></span> <span data-ttu-id="81fad-122">A continuación, el entorno del Servicio de aplicaciones podrá conectarse.</span><span class="sxs-lookup"><span data-stu-id="81fad-122">The App Service Environment will then be able to connect.</span></span> <span data-ttu-id="81fad-123">No se necesita ninguna configuración adicional.</span><span class="sxs-lookup"><span data-stu-id="81fad-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="81fad-124">Los entornos del Servicio de aplicaciones también se comunican con la base de datos SQL y los recursos del Almacenamiento de Azure necesarios para administrar y operar un entorno del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="81fad-125">Algunos recursos de almacenamiento y SQL con los que se comunica un entorno del Servicio de aplicaciones se encuentran en la misma región que el entorno del Servicio de aplicaciones, mientras que otros se encuentran en regiones de Azure remotas.</span><span class="sxs-lookup"><span data-stu-id="81fad-125">Some of the Sql and Storage resources that an App Service Environment communicates with are located in the same region as the App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="81fad-126">Como resultado, la conectividad saliente a Internet siempre es necesaria para que un entorno del Servicio de aplicaciones funcione correctamente.</span><span class="sxs-lookup"><span data-stu-id="81fad-126">As a result, outbound connectivity to the Internet is always required for an App Service Environment to function properly.</span></span> 

<span data-ttu-id="81fad-127">Puesto que un entorno del Servicio de aplicaciones se implementa en una subred, los grupos de seguridad de red pueden usarse para controlar el tráfico entrante a la subred.</span><span class="sxs-lookup"><span data-stu-id="81fad-127">Since an App Service Environment is deployed in a subnet, network security groups can be used to control inbound traffic to the subnet.</span></span>  <span data-ttu-id="81fad-128">Para obtener información detallada sobre cómo controlar el tráfico entrante a un entorno de App Service, consulte el siguiente [artículo][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="81fad-128">For details on how to control inbound traffic to an App Service Environment, see the following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="81fad-129">Para obtener información detallada sobre cómo permitir la conectividad saliente de Internet desde un entorno de App Service, consulte el artículo siguiente sobre cómo trabajar con [Express Route][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="81fad-129">For details on how to allow outbound Internet connectivity from an App Service Environment, see the following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="81fad-130">El mismo enfoque que se describe en este artículo se aplica al trabajar con conectividad de sitio a sitio y al usar la tunelización forzada.</span><span class="sxs-lookup"><span data-stu-id="81fad-130">The same approach described in the article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="81fad-131">Direcciones de red de salida</span><span class="sxs-lookup"><span data-stu-id="81fad-131">Outbound Network Addresses</span></span>
<span data-ttu-id="81fad-132">Cuando un entorno del Servicio de aplicaciones realiza las llamadas salientes, una dirección IP siempre se asocia con las llamadas salientes.</span><span class="sxs-lookup"><span data-stu-id="81fad-132">When an App Service Environment makes outbound calls, an IP Address is always associated with the outbound calls.</span></span>  <span data-ttu-id="81fad-133">La dirección IP específica que se usa depende de si el extremo al que se llama se encuentra dentro de la topología de red virtual o fuera de ella.</span><span class="sxs-lookup"><span data-stu-id="81fad-133">The specific IP address that is used depends on whether the endpoint being called is located within the virtual network topology, or outside of the virtual network topology.</span></span>

<span data-ttu-id="81fad-134">Si el extremo al que se llama está **fuera** de la topología de red virtual, entonces la dirección saliente (también conocida como la dirección NAT saliente) que se utiliza es la VIP pública del entorno del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-134">If the endpoint being called is **outside** of the virtual network topology, then the outbound address (aka the outbound NAT address) that is used is the public VIP of the App Service Environment.</span></span>  <span data-ttu-id="81fad-135">Esta dirección se encuentra en la interfaz de usuario del portal para el entorno de Servicio de aplicaciones en la hoja Propiedades.</span><span class="sxs-lookup"><span data-stu-id="81fad-135">This address can be found in the portal user interface for the App Service Environment in Properties blade.</span></span>

![Dirección IP saliente][OutboundIPAddress]

<span data-ttu-id="81fad-137">Esta dirección también se puede determinar para los ASE que solo tienen una VIP pública creando una aplicación en el entorno de Servicio de aplicaciones y, después, realizando una operación *nslookup* en la dirección de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="81fad-137">This address can also be determined for ASEs that only have a public VIP by creating an app in the App Service Environment, and then performing an *nslookup* on the app's address.</span></span> <span data-ttu-id="81fad-138">La dirección IP resultante es tanto la VIP pública como la dirección NAT saliente del entorno del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-138">The resultant IP address is both the public VIP, as well as the App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="81fad-139">Si el extremo al que se llama está **dentro** de la topología de red virtual, la dirección saliente de la aplicación de llamada será la dirección IP interna del recurso de proceso individual que ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="81fad-139">If the endpoint being called is **inside** of the virtual network topology, the outbound address of the calling app will be the internal IP address of the individual compute resource running the app.</span></span>  <span data-ttu-id="81fad-140">Sin embargo, no hay una asignación persistente de direcciones IP internas de red virtual a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-140">However there is not a persistent mapping of virtual network internal IP addresses to apps.</span></span>  <span data-ttu-id="81fad-141">Las aplicaciones pueden moverse a través de recursos informáticos diferentes y el grupo de recursos informáticos disponibles en un entorno del Servicio de aplicaciones puede cambiar debido a las operaciones de ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="81fad-141">Apps can move around across different compute resources, and the pool of available compute resources in an App Service Environment can change due to scaling operations.</span></span>

<span data-ttu-id="81fad-142">Sin embargo, puesto que un entorno del Servicio de aplicaciones siempre se encuentra dentro de una subred, se garantiza que la dirección IP interna de un recurso informático que ejecuta una aplicación siempre se queda dentro del intervalo CIDR de la subred.</span><span class="sxs-lookup"><span data-stu-id="81fad-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that the internal IP address of a compute resource running an app will always lie within the CIDR range of the subnet.</span></span>  <span data-ttu-id="81fad-143">Como resultado, cuando las ACL específicas o los grupos de seguridad de red se utilizan para proteger el acceso a otros extremos en la red virtual, el intervalo de subred que contiene el entorno del Servicio de aplicaciones necesita tener acceso.</span><span class="sxs-lookup"><span data-stu-id="81fad-143">As a result, when fine-grained ACLs or network security groups are used to secure access to other endpoints within the virtual network, the subnet range containing the App Service Environment needs to be granted access.</span></span>

<span data-ttu-id="81fad-144">En el diagrama siguiente se explican estos conceptos de manera detallada:</span><span class="sxs-lookup"><span data-stu-id="81fad-144">The following diagram shows these concepts in more detail:</span></span>

![Direcciones de red de salida][OutboundNetworkAddresses]

<span data-ttu-id="81fad-146">En el diagrama anterior:</span><span class="sxs-lookup"><span data-stu-id="81fad-146">In the above diagram:</span></span>

* <span data-ttu-id="81fad-147">Dado que la VIP pública del entorno del Servicio de aplicaciones es 192.23.1.2, que es la dirección IP saliente que se utiliza cuando se realizan llamadas a los extremos de "Internet".</span><span class="sxs-lookup"><span data-stu-id="81fad-147">Since the public VIP of the App Service Environment is 192.23.1.2, that is the outbound IP address used when making calls to "Internet" endpoints.</span></span>
* <span data-ttu-id="81fad-148">El intervalo CIDR de la subred que contiene para el entorno del Servicio de aplicaciones es 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="81fad-148">The CIDR range of the containing subnet for the App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="81fad-149">Otros extremos dentro de la misma infraestructura de red virtual verán las llamadas de aplicaciones como originadas en algún lugar dentro de este intervalo de direcciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-149">Other endpoints within the same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="81fad-150">Llamadas entre entornos del Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="81fad-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="81fad-151">El escenario puede resultar más complejo si implementa varios entornos del Servicio de aplicaciones en la misma red virtual y realiza llamadas salientes desde un entorno del Servicio de aplicaciones a otro.</span><span class="sxs-lookup"><span data-stu-id="81fad-151">A more complex scenario can occur if you deploy multiple App Service Environments in the same virtual network, and make outbound calls from one App Service Environment to another App Service Environment.</span></span>  <span data-ttu-id="81fad-152">Estos tipos de llamadas cruzadas entre entornos del Servicio de aplicaciones también se tratarán como llamadas de "Internet".</span><span class="sxs-lookup"><span data-stu-id="81fad-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="81fad-153">En el siguiente diagrama, se muestra un ejemplo de arquitectura en capas con aplicaciones en un entorno de Servicio de aplicaciones (p. ej., aplicaciones web de "entrada principal") que llaman a aplicaciones en un segundo entorno de Servicio de aplicaciones (por ejemplo, aplicaciones de API de back-end internas que no se crearon para que sean accesibles desde Internet).</span><span class="sxs-lookup"><span data-stu-id="81fad-153">The following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended to be accessible from the Internet).</span></span> 

![Llamadas entre entornos del Servicio de aplicaciones][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="81fad-155">En el ejemplo anterior, el entorno de Servicio de aplicaciones "ASE One" tiene la dirección IP saliente 192.23.1.2.</span><span class="sxs-lookup"><span data-stu-id="81fad-155">In the example above the App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="81fad-156">Si una aplicación que se ejecuta en este entorno de Servicio de aplicaciones hace una llamada saliente a una aplicación que se ejecuta en un segundo entorno de Servicio de aplicaciones ("ASE Two") ubicado en la misma red virtual, la llamada saliente se tratará como una llamada de "Internet".</span><span class="sxs-lookup"><span data-stu-id="81fad-156">If an app running on this App Service Environment makes an outbound call to an app running on a second App Service Environment ("ASE Two") located in the same virtual network, the outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="81fad-157">Como resultado, el tráfico de red que llega al segundo entorno de Servicio de aplicaciones se mostrará como originado en 192.23.1.2 (es decir, no el intervalo de direcciones de subred del primer entorno de Servicio de aplicaciones).</span><span class="sxs-lookup"><span data-stu-id="81fad-157">As a result the network traffic arriving on the second App Service Environment will show as originating from 192.23.1.2 (i.e. not the subnet address range of the first App Service Environment).</span></span>

<span data-ttu-id="81fad-158">Aunque las llamadas entre diferentes entornos de Servicio de aplicaciones se tratan como llamadas de "Internet", cuando ambos entornos de Servicio de aplicaciones se encuentran en la misma región de Azure, el tráfico de red permanecerá en la red regional de Azure y no pasará físicamente a través de la Internet pública.</span><span class="sxs-lookup"><span data-stu-id="81fad-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in the same Azure region the network traffic will remain on the regional Azure network and will not physically flow over the public Internet.</span></span>  <span data-ttu-id="81fad-159">Como resultado, puede usar un grupo de seguridad de red en la subred del segundo entorno de Servicio de aplicaciones para permitir solo las llamadas entrantes desde el primer entorno de Servicio de aplicaciones (cuya dirección IP saliente es 192.23.1.2), lo que garantiza una comunicación segura entre los entornos de Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="81fad-159">As a result you can use a network security group on the subnet of the second App Service Environment to only allow inbound calls from the first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between the App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="81fad-160">Información y vínculos adicionales</span><span class="sxs-lookup"><span data-stu-id="81fad-160">Additional Links and Information</span></span>
<span data-ttu-id="81fad-161">Todos los artículos y procedimientos para los entornos del Servicio de aplicaciones están disponibles en el archivo [Léame para entornos del Servicio de aplicaciones](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="81fad-161">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="81fad-162">Se puede obtener más información sobre los puertos de entrada usados por los entornos de App Service y sobre el uso de grupos de seguridad de red para controlar el tráfico entrante [aquí][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="81fad-162">Details on inbound ports used by App Service Environments and using network security groups to control inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="81fad-163">Los detalles sobre el uso de rutas definidas por el usuario para conceder acceso saliente a Internet a los entornos de App Service están disponibles en este [artículo][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="81fad-163">Details on using user defined routes to grant outbound Internet access to App Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png


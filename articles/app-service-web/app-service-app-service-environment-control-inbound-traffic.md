---
title: "aaaHow tooControl el tráfico entrante tooan entorno del servicio de aplicaciones"
description: "Obtenga información acerca de cómo toocontrol de reglas de seguridad de red tooconfigure entrada tráfico tooan entorno del servicio de aplicaciones."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: e7c6e6201db6a1ea77f7a2eee29a3b5445175495
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-toocontrol-inbound-traffic-tooan-app-service-environment"></a><span data-ttu-id="610a8-103">Cómo tooControl el tráfico entrante tooan entorno del servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="610a8-103">How tooControl Inbound Traffic tooan App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="610a8-104">Información general</span><span class="sxs-lookup"><span data-stu-id="610a8-104">Overview</span></span>
<span data-ttu-id="610a8-105">Un entorno de App Service se puede crear **en** una red virtual de Azure Resource Manager **o en** una [red virtual][virtualnetwork] del modelo de implementación clásica.</span><span class="sxs-lookup"><span data-stu-id="610a8-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="610a8-106">Una nueva red virtual y la nueva subred pueden definirse en tiempo de Hola que se crea un entorno de servicio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="610a8-106">A new virtual network and new subnet can be defined at hello time an App Service Environment is created.</span></span>  <span data-ttu-id="610a8-107">También puede crearse un entorno del Servicio de aplicaciones en una red virtual y subred preexistentes.</span><span class="sxs-lookup"><span data-stu-id="610a8-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="610a8-108">Tras el cambio realizado en junio de 2016, los entornos ASE también se pueden implementar en redes virtuales que usen intervalos de direcciones públicas o espacios de direcciones de RFC1918 (es decir, direcciones privadas).</span><span class="sxs-lookup"><span data-stu-id="610a8-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span>  <span data-ttu-id="610a8-109">Para obtener más información acerca de cómo crear un entorno de servicio de aplicaciones, consulte [cómo tooCreate un entorno de servicio de aplicaciones][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="610a8-109">For more details on creating an App Service Environment see [How tooCreate an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="610a8-110">Un entorno de servicio de aplicaciones debe siempre se pueden crear dentro de una subred porque una subred proporciona un límite de red que puede ser usado toolock hacia abajo el tráfico entrante detrás de dispositivos de nivel superior y los servicios de modo que solo se acepta el tráfico HTTP y HTTPS de específico ascendente Direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="610a8-110">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used toolock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="610a8-111">El tráfico de red entrante y saliente de una subred se controla mediante un [grupo de seguridad de red][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="610a8-111">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="610a8-112">Controlar el tráfico entrante requiere la creación de reglas de seguridad de red en un grupo de seguridad de red y, a continuación, asignar Hola red seguridad grupo Hola subred contenedor Hola entorno del servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-112">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning hello network security group hello subnet containing hello App Service Environment.</span></span>

<span data-ttu-id="610a8-113">Una vez que se asigna a un grupo de seguridad de red tooa subred, el tráfico entrante tooapps Hola que entono es permitidos y bloqueados en función de Hola permitir y denegar las reglas definidas en el grupo de seguridad de red de Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-113">Once a network security group is assigned tooa subnet, inbound traffic tooapps in hello App Service Environment is allowed/blocked based on hello allow and deny rules defined in hello network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="610a8-114">Puertos de red usados en un entorno de App Service</span><span class="sxs-lookup"><span data-stu-id="610a8-114">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="610a8-115">Antes de bloquear el tráfico de red entrante a un grupo de seguridad de red, es importante tooknow Hola conjunto de puertos de red necesarios y opcionales utilizados por un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-115">Before locking down inbound network traffic with a network security group, it is important tooknow hello set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="610a8-116">Cierra accidentalmente desactivar tráfico toosome puertos puede dar lugar a pérdida de funcionalidad en un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-116">Accidentally closing off traffic toosome ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="610a8-117">Hola mostramos una lista de puertos utilizados por un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-117">hello following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="610a8-118">Todos los puertos son **TCP**, a menos que indique claramente:</span><span class="sxs-lookup"><span data-stu-id="610a8-118">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="610a8-119">454:  **puerto obligatorio** utilizado por la infraestructura de Azure para administrar y mantener App Service Environment a través de SSL.</span><span class="sxs-lookup"><span data-stu-id="610a8-119">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="610a8-120">No se bloquee el puerto de toothis de tráfico.</span><span class="sxs-lookup"><span data-stu-id="610a8-120">Do not block traffic toothis port.</span></span>  <span data-ttu-id="610a8-121">Este puerto es siempre toohello enlazado VIP pública de un ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-121">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="610a8-122">455:  **puerto obligatorio** utilizado por la infraestructura de Azure para administrar y mantener App Service Environment a través de SSL.</span><span class="sxs-lookup"><span data-stu-id="610a8-122">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="610a8-123">No se bloquee el puerto de toothis de tráfico.</span><span class="sxs-lookup"><span data-stu-id="610a8-123">Do not block traffic toothis port.</span></span>  <span data-ttu-id="610a8-124">Este puerto es siempre toohello enlazado VIP pública de un ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-124">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="610a8-125">80: el puerto de entrada tooapps de tráfico HTTP se ejecuta en los planes de servicio de aplicación en un entorno de servicio de aplicaciones predeterminado.</span><span class="sxs-lookup"><span data-stu-id="610a8-125">80:  Default port for inbound HTTP traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="610a8-126">En un ASE habilitado ILB, este puerto es la dirección ILB de toohello enlazado de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-126">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="610a8-127">443: el puerto de entrada tooapps de tráfico SSL ejecutando en los planes de servicio de aplicación en un entorno de servicio de aplicaciones predeterminado.</span><span class="sxs-lookup"><span data-stu-id="610a8-127">443: Default port for inbound SSL traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="610a8-128">En un ASE habilitado ILB, este puerto es la dirección ILB de toohello enlazado de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-128">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="610a8-129">21: canal de control para FTP.</span><span class="sxs-lookup"><span data-stu-id="610a8-129">21:  Control channel for FTP.</span></span>  <span data-ttu-id="610a8-130">Este puerto se puede bloquear de forma segura si no se utiliza FTP.</span><span class="sxs-lookup"><span data-stu-id="610a8-130">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="610a8-131">En un ASE habilitado ILB, este puerto puede ser la dirección ILB de toohello enlazado para un ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-131">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="610a8-132">990: canal de control para FTPS.</span><span class="sxs-lookup"><span data-stu-id="610a8-132">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="610a8-133">Este puerto se puede bloquear de forma segura si no se utiliza FTPS.</span><span class="sxs-lookup"><span data-stu-id="610a8-133">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="610a8-134">En un ASE habilitado ILB, este puerto puede ser la dirección ILB de toohello enlazado para un ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-134">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="610a8-135">10001-10020: canales de datos para FTP.</span><span class="sxs-lookup"><span data-stu-id="610a8-135">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="610a8-136">Como con canal de control de hello, estos puertos pueden ser sin ningún riesgo bloqueados si no se utiliza FTP.</span><span class="sxs-lookup"><span data-stu-id="610a8-136">As with hello control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="610a8-137">En un ASE habilitado ILB, este puerto puede ser la dirección ILB de toohello dependiente del ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-137">On an ILB-enabled ASE, this port can be bound toohello ASE's ILB address.</span></span>
* <span data-ttu-id="610a8-138">4016: usado para la depuración remota con Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="610a8-138">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="610a8-139">Este puerto se puede bloquear de forma segura si no se utiliza la característica de Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-139">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="610a8-140">En un ASE habilitado ILB, este puerto es la dirección ILB de toohello enlazado de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-140">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="610a8-141">4018: usado para la depuración remota con Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="610a8-141">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="610a8-142">Este puerto se puede bloquear de forma segura si no se utiliza la característica de Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-142">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="610a8-143">En un ASE habilitado ILB, este puerto es la dirección ILB de toohello enlazado de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-143">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="610a8-144">4020: usado para la depuración remota con Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="610a8-144">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="610a8-145">Este puerto se puede bloquear de forma segura si no se utiliza la característica de Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-145">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="610a8-146">En un ASE habilitado ILB, este puerto es la dirección ILB de toohello enlazado de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-146">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="610a8-147">Requisitos de DNS y conectividad saliente</span><span class="sxs-lookup"><span data-stu-id="610a8-147">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="610a8-148">Para un entorno de servicio de aplicaciones toofunction correctamente, también se necesita puntos de conexión de acceso de salida toovarious.</span><span class="sxs-lookup"><span data-stu-id="610a8-148">For an App Service Environment toofunction properly, it also requires outbound access toovarious endpoints.</span></span> <span data-ttu-id="610a8-149">Una lista completa de extremos externos Hola utilizado por un ASE está en la sección "Requiere conectividad de red" de Hola Hola [configuración de red para ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) artículo.</span><span class="sxs-lookup"><span data-stu-id="610a8-149">A full list of hello external endpoints used by an ASE is in hello "Required Network Connectivity" section of hello [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="610a8-150">Los entornos del servicio de aplicación requieren una infraestructura DNS válida configurada para la red virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-150">App Service Environments require a valid DNS infrastructure configured for hello virtual network.</span></span>  <span data-ttu-id="610a8-151">Si para cualquier hello motivo se cambia la configuración de DNS después de crear un entorno de servicio de aplicaciones, los desarrolladores pueden forzar una toopick entono la nueva configuración de DNS Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-151">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="610a8-152">Desencadenar un reinicio gradual de entorno usando Hola "Reiniciar" icono encuentra final Hola de hoja de administración de entorno de servicio de aplicación Hola Hola [portal de Azure] [ NewPortal] provocará Hola entorno toopick la nueva configuración de DNS Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-152">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="610a8-153">También se recomienda que los servidores DNS personalizados en red virtual de hello sea el programa de instalación antes de tiempo anterior toocreating un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-153">It is also recommended that any custom DNS servers on hello vnet be setup ahead of time prior toocreating an App Service Environment.</span></span>  <span data-ttu-id="610a8-154">Si se cambia la configuración de DNS de una red virtual mientras se crea un entorno de servicio de aplicaciones, que producirá errores de proceso de creación de hello entorno del servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-154">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in hello App Service Environment creation process failing.</span></span>  <span data-ttu-id="610a8-155">En un modo similar, si existe un servidor DNS personalizado en hello otro extremo de una puerta de enlace VPN y el servidor DNS de hello es inaccesible o no está disponible, hello también se producirá un error del proceso de creación del entorno del servicio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="610a8-155">In a similar vein, if a custom DNS server exists on hello other end of a VPN gateway, and hello DNS server is unreachable or unavailable, hello App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="610a8-156">Creación de un grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="610a8-156">Creating a Network Security Group</span></span>
<span data-ttu-id="610a8-157">Para obtener detalles completos sobre cómo funcionan los grupos de seguridad de red, consulte siguiente hello [información][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="610a8-157">For full details on how network security groups work see hello following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="610a8-158">ejemplo de administración de servicios de Azure de Hello siguiente en los últimos retoques resalta de grupos de seguridad de red, con un enfoque sobre cómo configurar y aplicar una subred de tooa de grupo de seguridad de red que contiene un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-158">hello Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group tooa subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="610a8-159">**Nota:** grupos de seguridad de red se pueden configurar gráficamente mediante hello [Portal de Azure](https://portal.azure.com) o a través de PowerShell de Azure.</span><span class="sxs-lookup"><span data-stu-id="610a8-159">**Note:** Network security groups can be configured graphically using hello [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="610a8-160">Los grupos de seguridad de red se crean por primera vez como una entidad independiente asociada a una suscripción.</span><span class="sxs-lookup"><span data-stu-id="610a8-160">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="610a8-161">Puesto que se crean grupos de seguridad de red en una región de Azure, asegúrese de ese grupo de seguridad de red de hello es creado en hello mismo región como lo Hola entorno del servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-161">Since network security groups are created in an Azure region, ensure that hello network security group is created in hello same region as hello App Service Environment.</span></span>

<span data-ttu-id="610a8-162">siguiente Hello muestra cómo crear un grupo de seguridad de red:</span><span class="sxs-lookup"><span data-stu-id="610a8-162">hello following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="610a8-163">Una vez que se crea un grupo de seguridad de red, una o varias reglas de seguridad de red se agregan tooit.</span><span class="sxs-lookup"><span data-stu-id="610a8-163">Once a network security group is created, one or more network security rules are added tooit.</span></span>  <span data-ttu-id="610a8-164">Puesto que el conjunto de Hola de reglas puede cambiar con el tiempo, se recomienda toospace out Hola esquema de numeración usado para la regla prioridades toomake reglas adicionales tooinsert fácil con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="610a8-164">Since hello set of rules may change over time, it is recommended toospace out hello numbering scheme used for rule priorities toomake it easy tooinsert additional rules over time.</span></span>

<span data-ttu-id="610a8-165">ejemplo de Hola siguiente muestra una regla que concede los puertos de administración de acceso toohello necesarios toomanage de infraestructura de Azure de hello explícitamente y mantener un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-165">hello example below shows a rule that explicitly grants access toohello management ports needed by hello Azure infrastructure toomanage and maintain an App Service Environment.</span></span>  <span data-ttu-id="610a8-166">Tenga en cuenta que todo el tráfico de administración fluye a través de SSL y se protege mediante certificados de cliente, por lo que, aunque estén abiertos los puertos de hello son inaccesibles por cualquier entidad que no sea la infraestructura de administración de Azure.</span><span class="sxs-lookup"><span data-stu-id="610a8-166">Note that all management traffic flows over SSL and is secured by client certificates, so even though hello ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="610a8-167">Al bloquear el acceso tooport 80 y 443 demasiado "oculta" un entorno de servicio de aplicación detrás de dispositivos de nivel superior o servicios, necesitará la dirección IP de nivel superior de tooknow Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-167">When locking down access tooport 80 and 443 too"hide" an App Service Environment behind upstream devices or services, you will need tooknow hello upstream IP address.</span></span>  <span data-ttu-id="610a8-168">Por ejemplo, si está utilizando un servidor de aplicaciones web (WAFS), Hola WAFS tendrá su propia dirección IP (o direcciones) que usa cuando un proxy tráfico tooa entorno del servicio de aplicación de nivel inferior.</span><span class="sxs-lookup"><span data-stu-id="610a8-168">For example, if you are using a web application firewall (WAF), hello WAF will have its own IP address (or addresses) which it uses when proxying traffic tooa downstream App Service Environment.</span></span>  <span data-ttu-id="610a8-169">Necesitará toouse esta dirección IP en hello *SourceAddressPrefix* parámetro de una regla de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="610a8-169">You will need toouse this IP address in hello *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="610a8-170">En el siguiente ejemplo de Hola, explícitamente se permite el tráfico entrante procedente de una dirección IP de nivel superior específica.</span><span class="sxs-lookup"><span data-stu-id="610a8-170">In hello example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="610a8-171">Hola dirección *1.2.3.4* se utiliza como un marcador de posición para la dirección IP de Hola de un nivel superior WAFS.</span><span class="sxs-lookup"><span data-stu-id="610a8-171">hello address *1.2.3.4* is used as a placeholder for hello IP address of an upstream WAF.</span></span>  <span data-ttu-id="610a8-172">Cambiar Hola valor toomatch Hola dirección usada por su servicio o un dispositivo de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="610a8-172">Change hello value toomatch hello address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="610a8-173">Si se desea compatibilidad con FTP, Hola siguiendo reglas puede utilizarse como un puerto de control de plantilla toogrant acceso toohello FTP y los puertos de canal de datos.</span><span class="sxs-lookup"><span data-stu-id="610a8-173">If FTP support is desired, hello following rules can be used as a template toogrant access toohello FTP control port and data channel ports.</span></span>  <span data-ttu-id="610a8-174">Puesto que FTP es un protocolo con estado, es posible no que pueda tooroute FTP el tráfico a través de un dispositivo de firewall o proxy tradicional de HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="610a8-174">Since FTP is a stateful protocol, you may not be able tooroute FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="610a8-175">En este caso deberá hello tooset *SourceAddressPrefix* tooa valor diferente: por ejemplo Hola IP direcciones intervalo de desarrollador o implementación de máquinas en que FTP, los clientes están ejecutando.</span><span class="sxs-lookup"><span data-stu-id="610a8-175">In this case you will need tooset hello *SourceAddressPrefix* tooa different value - for example hello IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="610a8-176">(**Nota:** puede cambiar el intervalo de puertos de canal de datos de Hola durante el período de vista previa de Hola.)</span><span class="sxs-lookup"><span data-stu-id="610a8-176">(**Note:**  hello data channel port range may change during hello preview period.)</span></span>

<span data-ttu-id="610a8-177">Si se utiliza la depuración remota con Visual Studio, Hola siguiendo las reglas en el que se muestra cómo tener acceso toogrant.</span><span class="sxs-lookup"><span data-stu-id="610a8-177">If remote debugging with Visual Studio is used, hello following rules demonstrate how toogrant access.</span></span>  <span data-ttu-id="610a8-178">Puesto que cada versión usa un puerto diferente para la depuración remota, hay una regla distinta para cada versión compatible de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="610a8-178">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="610a8-179">Al igual que ocurre con el acceso FTP, es posible que el tráfico de depuración remoto no fluya correctamente a través de un dispositivo de proxy o WAF tradicional.</span><span class="sxs-lookup"><span data-stu-id="610a8-179">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="610a8-180">Hola *SourceAddressPrefix* en su lugar, se puede establecer toohello intervalo de direcciones IP de los equipos de desarrollador ejecutando Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="610a8-180">hello *SourceAddressPrefix* can instead be set toohello IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-tooa-subnet"></a><span data-ttu-id="610a8-181">Asignación de una subred tooa de grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="610a8-181">Assigning a Network Security Group tooa Subnet</span></span>
<span data-ttu-id="610a8-182">Un grupo de seguridad de red tiene una regla de seguridad predeterminada que se deniega el acceso tooall el tráfico externo.</span><span class="sxs-lookup"><span data-stu-id="610a8-182">A network security group has a default security rule which denies access tooall external traffic.</span></span>  <span data-ttu-id="610a8-183">Hola resultado de la combinación de reglas de seguridad de red de Hola se ha descrito anteriormente y Hola regla de seguridad predeterminada que bloquee el tráfico entrante, es que únicamente el tráfico de intervalos de direcciones de origen asociado con un *permitir* podrá realizar acción toosend tooapps de tráfico ejecuta en un entorno de servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-183">hello result from combining hello network security rules described above, and hello default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able toosend traffic tooapps running in an App Service Environment.</span></span>

<span data-ttu-id="610a8-184">Después de un grupo de seguridad de red se rellena con las reglas de seguridad, debe toobe asignado toohello subred que contiene Hola entorno del servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="610a8-184">After a network security group is populated with security rules, it needs toobe assigned toohello subnet containing hello App Service Environment.</span></span>  <span data-ttu-id="610a8-185">comando de asignación de Hello hace referencia tanto el nombre de red virtual de Hola donde reside Hola entorno del servicio de aplicaciones, así como nombre de Hola de subred Hola donde se creó el entorno del servicio de aplicación Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-185">hello assignment command references both hello name of hello virtual network where hello App Service Environment resides, as well as hello name of hello subnet where hello App Service Environment was created.</span></span>  

<span data-ttu-id="610a8-186">ejemplo de Hola siguiente muestra un grupo de seguridad de red que se va a asignar tooa subred y red virtual:</span><span class="sxs-lookup"><span data-stu-id="610a8-186">hello example below shows a network security group being assigned tooa subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="610a8-187">Una vez realizada correctamente la asignación de grupo de seguridad de red hello (asignación de hello es una operación de larga duración y puede tardar unos toocomplete minutos), sólo de entrada tráfico que coincide con *permitir* reglas correctamente llegará a aplicaciones en la aplicación hello Entorno del servicio.</span><span class="sxs-lookup"><span data-stu-id="610a8-187">Once hello network security group assignment succeeds (hello assignment is a long-running operations and can take a few minutes toocomplete), only inbound traffic matching *Allow* rules will successfully reach apps in hello App Service Environment.</span></span>

<span data-ttu-id="610a8-188">Para Hola de integridad en el ejemplo siguiente se muestra cómo tooremove y, por tanto, asociar DIS Hola red grupo de seguridad de la subred de hello:</span><span class="sxs-lookup"><span data-stu-id="610a8-188">For completeness hello following example shows how tooremove and thus dis-associate hello network security group from hello subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="610a8-189">Consideraciones especiales para IP-SSL explícito</span><span class="sxs-lookup"><span data-stu-id="610a8-189">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="610a8-190">Si una aplicación está configurada con una dirección IP SSL explícita (aplicable *sólo* tooASEs que tienen una VIP pública), en lugar de usar la dirección IP de hello predeterminada de hello entorno del servicio de aplicaciones, HTTP y HTTPS flujos en la subred de Hola de tráfico a través de un conjunto diferente de puertos que no sean los puertos 80 y 443.</span><span class="sxs-lookup"><span data-stu-id="610a8-190">If an app is configured with an explicit IP-SSL address (applicable *only* tooASEs that have a public VIP), instead of using hello default IP address of hello App Service Environment, both HTTP and HTTPS traffic flows into hello subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="610a8-191">par individual de Hola de puertos utilizados por cada dirección IP SSL puede encontrarse en la interfaz de usuario del portal de Hola de hoja UX de detalles del entorno del servicio de aplicación Hola.</span><span class="sxs-lookup"><span data-stu-id="610a8-191">hello individual pair of ports used by each IP-SSL address can be found in hello portal user interface from hello App Service Environment's details UX blade.</span></span>  <span data-ttu-id="610a8-192">Seleccione Toda la configuración > Direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="610a8-192">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="610a8-193">hoja de "direcciones IP" Hello muestra una tabla de todas las direcciones IP SSL configuradas explícitamente Hola entorno del servicio de aplicación, junto con el par de puertos especiales de Hola que es usado tooroute tráfico HTTP y HTTPS asociado a cada dirección IP SSL.</span><span class="sxs-lookup"><span data-stu-id="610a8-193">hello "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for hello App Service Environment, along with hello special port pair that is used tooroute HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="610a8-194">Es este par de puertos que necesita toobe utiliza para los parámetros de DestinationPortRange de hello al configurar las reglas en un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="610a8-194">It is this port pair that needs toobe used for hello DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="610a8-195">Cuando una aplicación en un ASE es toouse configurado SSL de IP, los clientes externos no podrán ver y no necesitan tooworry sobre la asignación de par de hello especial de puerto.</span><span class="sxs-lookup"><span data-stu-id="610a8-195">When an app on an ASE is configured toouse IP-SSL, external customers will not see and do not need tooworry about hello special port pair mapping.</span></span>  <span data-ttu-id="610a8-196">Aplicaciones de toohello tráfico fluirá normalmente toohello configurado SSL de IP dirección.</span><span class="sxs-lookup"><span data-stu-id="610a8-196">Traffic toohello apps will flow normally toohello configured IP-SSL address.</span></span>  <span data-ttu-id="610a8-197">par de puerto especial de Hello traducción toohello automáticamente ocurre internamente durante la autenticación mutua final de Hola de enrutamiento del tráfico en Hola Hola de contenedor de subred ASE.</span><span class="sxs-lookup"><span data-stu-id="610a8-197">hello translation toohello special port pair automatically happens internally during hello final leg of routing traffic into hello subnet containing hello ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="610a8-198">Introducción</span><span class="sxs-lookup"><span data-stu-id="610a8-198">Getting started</span></span>
<span data-ttu-id="610a8-199">tooget iniciado con el entorno de servicio de aplicación, consulte [Introducción tooApp entorno del servicio][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="610a8-199">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="610a8-200">Todos los artículos y cómo-para para entornos del servicio de aplicación están disponibles en hello [archivo Léame para entornos de aplicaciones de servicio](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="610a8-200">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="610a8-201">Para obtener más información en aplicaciones que se conecten de forma segura toobackend recursos desde un entorno de servicio de aplicaciones, consulte [conectarse de forma segura tooBackend recursos desde un entorno de servicio de aplicaciones][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="610a8-201">For details around apps securely connecting toobackend resource from an App Service Environment, see [Securely connecting tooBackend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="610a8-202">Para obtener más información acerca de la plataforma de servicio de aplicaciones de Azure de hello, consulte [servicio de aplicaciones de Azure][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="610a8-202">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->


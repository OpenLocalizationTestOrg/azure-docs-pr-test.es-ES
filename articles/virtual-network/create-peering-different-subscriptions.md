---
title: 'Crear un emparejamiento de redes virtuales de Azure: Resource Manager, suscripciones diferentes | Microsoft Docs'
description: Aprenda a crear un emparejamiento de redes virtuales entre redes virtuales creadas mediante Resource Manager que existen en diferentes suscripciones de Azure.
services: virtual-network
documentationcenter: 
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/17/2017
ms.author: jdial;narayan;annahar
ms.openlocfilehash: 84bbf90257f038fb5f3e964b7b35419acd77fc6d
ms.sourcegitcommit: 422efcbac5b6b68295064bd545132fcc98349d01
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/29/2017
---
# <a name="create-a-virtual-network-peering---resource-manager-different-subscriptions"></a><span data-ttu-id="a41a3-103">Crear un emparejamiento de redes virtuales: Resource Manager, suscripciones diferentes</span><span class="sxs-lookup"><span data-stu-id="a41a3-103">Create a virtual network peering - Resource Manager, different subscriptions</span></span> 

<span data-ttu-id="a41a3-104">En este tutorial aprenderá a crear un emparejamiento de redes virtuales entre dos redes virtuales creadas mediante Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a41a3-104">In this tutorial, you learn to create a virtual network peering between virtual networks created through Resource Manager.</span></span> <span data-ttu-id="a41a3-105">Las redes virtuales se encuentran en suscripciones diferentes.</span><span class="sxs-lookup"><span data-stu-id="a41a3-105">The virtual networks exist in different subscriptions.</span></span> <span data-ttu-id="a41a3-106">Emparejar dos redes virtuales permite que los recursos en distintas redes virtuales se comuniquen entre sí con el mismo ancho de banda y latencia que tendrían los recursos si estuvieran en la misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="a41a3-106">Peering two virtual networks enables resources in different virtual networks to communicate with each other with the same bandwidth and latency as though the resources were in the same virtual network.</span></span> <span data-ttu-id="a41a3-107">Obtenga más información sobre el [Emparejamiento de redes virtuales](virtual-network-peering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a41a3-107">Learn more about [Virtual network peering](virtual-network-peering-overview.md).</span></span> 

<span data-ttu-id="a41a3-108">Los pasos para crear un emparejamiento de redes virtuales cambian en función de si las redes virtuales se encuentran en la misma suscripción o en suscripciones diferentes, y en función del [modelo de implementación de Azure](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) con el que se han creado las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-108">The steps to create a virtual network peering are different, depending on whether the virtual networks are in the same, or different, subscriptions, and which [Azure deployment model](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) the virtual networks are created through.</span></span> <span data-ttu-id="a41a3-109">Para más información sobre cómo crear un emparejamiento de redes virtuales en otros escenarios, haga clic en el escenario en la tabla siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-109">Learn how to create a virtual network peering in other scenarios by clicking the scenario from the following table:</span></span>

|<span data-ttu-id="a41a3-110">Modelo de implementación de Azure</span><span class="sxs-lookup"><span data-stu-id="a41a3-110">Azure deployment model</span></span>  | <span data-ttu-id="a41a3-111">Suscripción de Azure</span><span class="sxs-lookup"><span data-stu-id="a41a3-111">Azure subscription</span></span>  |
|--------- |---------|
|[<span data-ttu-id="a41a3-112">Ambas mediante Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a41a3-112">Both Resource Manager</span></span>](virtual-network-create-peering.md) |<span data-ttu-id="a41a3-113">Iguales</span><span class="sxs-lookup"><span data-stu-id="a41a3-113">Same</span></span>|
|[<span data-ttu-id="a41a3-114">Una mediante Resource Manager y la otra clásica</span><span class="sxs-lookup"><span data-stu-id="a41a3-114">One Resource Manager, one classic</span></span>](create-peering-different-deployment-models.md) |<span data-ttu-id="a41a3-115">Iguales</span><span class="sxs-lookup"><span data-stu-id="a41a3-115">Same</span></span>|
|[<span data-ttu-id="a41a3-116">Una mediante Resource Manager y la otra, clásico</span><span class="sxs-lookup"><span data-stu-id="a41a3-116">One Resource Manager, one classic</span></span>](create-peering-different-deployment-models-subscriptions.md) |<span data-ttu-id="a41a3-117">Diferentes</span><span class="sxs-lookup"><span data-stu-id="a41a3-117">Different</span></span>|

<span data-ttu-id="a41a3-118">No se puede crear un emparejamiento de redes virtuales entre dos redes virtuales implementadas mediante el modelo de implementación clásico.</span><span class="sxs-lookup"><span data-stu-id="a41a3-118">A virtual network peering cannot be created between two virtual networks deployed through the classic deployment model.</span></span> <span data-ttu-id="a41a3-119">Un emparejamiento de redes virtuales solo se puede crear entre dos redes virtuales que existen en la misma región de Azure.</span><span class="sxs-lookup"><span data-stu-id="a41a3-119">A virtual network peering can only be created between two virtual networks that exist in the same Azure region.</span></span> <span data-ttu-id="a41a3-120">Al crear un emparejamiento de redes virtuales entre redes virtuales que se encuentran en suscripciones diferentes, las suscripciones deben estar asociadas al mismo inquilino de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a41a3-120">When creating a virtual network peering between virtual networks that exist in different subscriptions, the subscriptions must both be associated to the same Azure Active Directory tenant.</span></span> <span data-ttu-id="a41a3-121">Si todavía no tiene un inquilino de Azure Active Directory, puede [crear uno](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch) rápidamente.</span><span class="sxs-lookup"><span data-stu-id="a41a3-121">If you don't already have an Azure Active Directory tenant, you can quickly [create one](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch).</span></span> <span data-ttu-id="a41a3-122">Si necesita conectar redes virtuales que se han creado mediante el modelo de implementación clásico, que se encuentran en regiones de Azure diferentes o que se encuentran en suscripciones asociadas a inquilinos diferentes de Azure Active Directory, puede usar [Azure VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) para conectar las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-122">If you need to connect virtual networks that were both created through the classic deployment model, or that exist in different Azure regions, or that exist in subscriptions associated to different Azure Active Directory tenants, you can use an Azure [VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) to connect the virtual networks.</span></span> 

<span data-ttu-id="a41a3-123">Puede usar [Azure Portal](#portal), la [interfaz de la línea de comandos](#cli) (CLI) de Azure o Azure [PowerShell](#powershell) para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-123">You can use the [Azure portal](#portal), the Azure [command-line interface](#cli) (CLI), or Azure [PowerShell](#powershell) to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-124">Haga clic en cualquiera de los vínculos anteriores de herramientas para ir directamente a los pasos para crear un emparejamiento de redes virtuales con la herramienta de su preferencia.</span><span class="sxs-lookup"><span data-stu-id="a41a3-124">Click any of the previous tool links to go directly to the steps for creating a virtual network peering using your tool of choice.</span></span>

## <span data-ttu-id="a41a3-125"><a name="portal"></a>Creación de emparejamiento: Azure Portal</span><span class="sxs-lookup"><span data-stu-id="a41a3-125"><a name="portal"></a>Create peering - Azure portal</span></span>

<span data-ttu-id="a41a3-126">En este tutorial se usan cuentas diferentes para cada suscripción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-126">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="a41a3-127">Si está usando una cuenta que tiene permisos para ambas suscripciones puede usar la misma cuenta para todos los pasos, y omitir los pasos para cerrar sesión en el portal y para asignar a otro usuario permisos para las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-127">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of the portal, and skip the steps for assigning another user permissions to the virtual networks.</span></span>

1. <span data-ttu-id="a41a3-128">Inicie sesión en [Azure Portal](https://portal.azure.com) como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-128">Log in to the [Azure portal](https://portal.azure.com) as UserA.</span></span> <span data-ttu-id="a41a3-129">La cuenta con la que inicie sesión debe tener todos los permisos necesarios para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-129">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-130">Para detalles, consulte la sección [Permisos](#permissions) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-130">See the [Permissions](#permissions) section of this article for details.</span></span>
2. <span data-ttu-id="a41a3-131">Haga clic en **+ Nuevo**, **Redes** y, luego, en **Red virtual**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-131">Click **+ New**, click **Networking**, then click **Virtual network**.</span></span>
3. <span data-ttu-id="a41a3-132">En la hoja **Crear red virtual**, escriba o seleccione valores para la configuración siguiente y, luego, haga clic en **Crear**:</span><span class="sxs-lookup"><span data-stu-id="a41a3-132">In the **Create virtual network** blade, enter, or select values for the following settings, then click **Create**:</span></span>
    - <span data-ttu-id="a41a3-133">**Nombre**: *myVnetA*</span><span class="sxs-lookup"><span data-stu-id="a41a3-133">**Name**: *myVnetA*</span></span>
    - <span data-ttu-id="a41a3-134">**Espacio de direcciones**: *10.0.0.0/16*</span><span class="sxs-lookup"><span data-stu-id="a41a3-134">**Address space**: *10.0.0.0/16*</span></span>
    - <span data-ttu-id="a41a3-135">**Nombre de subred**: *default*</span><span class="sxs-lookup"><span data-stu-id="a41a3-135">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="a41a3-136">**Intervalo de direcciones de subred**: *10.0.0.0/24*</span><span class="sxs-lookup"><span data-stu-id="a41a3-136">**Subnet address range**: *10.0.0.0/24*</span></span>
    - <span data-ttu-id="a41a3-137">**Suscripción**: seleccione la suscripción A</span><span class="sxs-lookup"><span data-stu-id="a41a3-137">**Subscription**: Select subscription A.</span></span>
    - <span data-ttu-id="a41a3-138">**Grupo de recursos**: seleccione **Crear nuevo** y escriba *myResourceGroupA*</span><span class="sxs-lookup"><span data-stu-id="a41a3-138">**Resource group**: Select **Create new** and enter *myResourceGroupA*</span></span>
    - <span data-ttu-id="a41a3-139">**Ubicación**: *este de EE. UU.*</span><span class="sxs-lookup"><span data-stu-id="a41a3-139">**Location**: *East US*</span></span>
4. <span data-ttu-id="a41a3-140">En el cuadro **Buscar recursos** en la parte superior del portal, escriba *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="a41a3-140">In the **Search resources** box at the top of the portal, type *myVnetA*.</span></span> <span data-ttu-id="a41a3-141">Haga clic en **myVnetA** cuando aparezca en los resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="a41a3-141">Click **myVnetA** when it appears in the search results.</span></span> <span data-ttu-id="a41a3-142">Aparece una hoja para la red virtual **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-142">A blade appears for the **myVnetA** virtual network.</span></span>
5. <span data-ttu-id="a41a3-143">En la hoja **myVnetA** que aparece, haga clic en **Control de acceso (IAM)** en la lista vertical de opciones que aparece a la izquierda de la hoja.</span><span class="sxs-lookup"><span data-stu-id="a41a3-143">In the **myVnetA** blade that appears, click **Access control (IAM)** from the vertical list of options on the left side of the blade.</span></span>
6. <span data-ttu-id="a41a3-144">En la hoja **myVnetA - Control de acceso (IAM)** que aparece, haga clic en **+ Agregar**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-144">In the **myVnetA - Access control (IAM)** blade that appears, click **+ Add**.</span></span>
7. <span data-ttu-id="a41a3-145">En la hoja **Agregar permisos** que aparece, seleccione **Colaborador de la red** en el cuadro **Rol**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-145">In the **Add permissions** blade that appears, select **Network contributor** in the **Role** box.</span></span>
8. <span data-ttu-id="a41a3-146">En el cuadro **Seleccionar**, seleccione otro usuario (UserB) o escriba la dirección de correo electrónico de UserB para buscarlo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-146">In the **Select** box, select a UserB, or type UserB's email address to search for it.</span></span> <span data-ttu-id="a41a3-147">La lista de usuario que se muestra proviene del mismo inquilino de Azure Active Directory que la red virtual para la que configura el emparejamiento.</span><span class="sxs-lookup"><span data-stu-id="a41a3-147">The list of users shown is from the same Azure Active Directory tenant as the virtual network you're setting up the peering for.</span></span>
9. <span data-ttu-id="a41a3-148">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-148">Click **Save**.</span></span>
10. <span data-ttu-id="a41a3-149">En la hoja **myVnetA - Control de acceso (IAM)** que aparece, haga clic en **Propiedades** en la lista vertical de opciones que aparece a la izquierda de la hoja.</span><span class="sxs-lookup"><span data-stu-id="a41a3-149">In the **myVnetA - Access control (IAM)** blade, click **Properties** from the vertical list of options on the left side of the blade.</span></span> <span data-ttu-id="a41a3-150">Copie el **ID. DE RECURSO**, ya que se usará en un paso posterior.</span><span class="sxs-lookup"><span data-stu-id="a41a3-150">Copy the **RESOURCE ID**, which is used in a later step.</span></span> <span data-ttu-id="a41a3-151">El identificador de recurso es similar al ejemplo siguiente: /subscriptions/<Subscription Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/virtualNetworks/myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-151">The resource ID is similar to the following example: /subscriptions/<Subscription Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/virtualNetworks/myVnetA.</span></span>
11. <span data-ttu-id="a41a3-152">Cierre sesión en el portal como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-152">Log out of the portal as UserA, then log in as UserB.</span></span>
12. <span data-ttu-id="a41a3-153">Complete los pasos del 2 al 3 y especifique o seleccione los valores siguientes en el paso 3:</span><span class="sxs-lookup"><span data-stu-id="a41a3-153">Complete steps 2-3, entering or selecting the following values in step 3:</span></span>

    - <span data-ttu-id="a41a3-154">**Nombre**: *myVnetB*</span><span class="sxs-lookup"><span data-stu-id="a41a3-154">**Name**: *myVnetB*</span></span>
    - <span data-ttu-id="a41a3-155">**Espacio de direcciones**: *10.1.0.0/16*</span><span class="sxs-lookup"><span data-stu-id="a41a3-155">**Address space**: *10.1.0.0/16*</span></span>
    - <span data-ttu-id="a41a3-156">**Nombre de subred**: *default*</span><span class="sxs-lookup"><span data-stu-id="a41a3-156">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="a41a3-157">**Intervalo de direcciones de subred**: *10.1.0.0/24*</span><span class="sxs-lookup"><span data-stu-id="a41a3-157">**Subnet address range**: *10.1.0.0/24*</span></span>
    - <span data-ttu-id="a41a3-158">**Suscripción**: seleccione la suscripción B</span><span class="sxs-lookup"><span data-stu-id="a41a3-158">**Subscription**: Select subscription B.</span></span>
    - <span data-ttu-id="a41a3-159">**Grupo de recursos**: seleccione **Crear nuevo** y escriba *myResourceGroupB*</span><span class="sxs-lookup"><span data-stu-id="a41a3-159">**Resource group**: Select **Create new** and enter *myResourceGroupB*</span></span>
    - <span data-ttu-id="a41a3-160">**Ubicación**: *este de EE. UU.*</span><span class="sxs-lookup"><span data-stu-id="a41a3-160">**Location**: *East US*</span></span>

13. <span data-ttu-id="a41a3-161">En el cuadro **Buscar recursos** en la parte superior del portal, escriba *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="a41a3-161">In the **Search resources** box at the top of the portal, type *myVnetB*.</span></span> <span data-ttu-id="a41a3-162">Haga clic en **myVnetB** cuando aparezca en los resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="a41a3-162">Click **myVnetB** when it appears in the search results.</span></span> <span data-ttu-id="a41a3-163">Aparece una hoja para la red virtual **myVnetB**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-163">A blade appears for the **myVnetB** virtual network.</span></span>
14. <span data-ttu-id="a41a3-164">En la hoja **myVnetB** que aparece, haga clic en **Propiedades** en la lista vertical de opciones que aparece a la izquierda de la hoja.</span><span class="sxs-lookup"><span data-stu-id="a41a3-164">In the **myVnetB** blade that appears, click **Properties** from the vertical list of options on the left side of the blade.</span></span> <span data-ttu-id="a41a3-165">Copie el **ID. DE RECURSO**, ya que se usará en un paso posterior.</span><span class="sxs-lookup"><span data-stu-id="a41a3-165">Copy the **RESOURCE ID**, which is used in a later step.</span></span> <span data-ttu-id="a41a3-166">El identificador de recurso es similar al ejemplo siguiente: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-166">The resource ID is similar to the following example: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB.</span></span>
15. <span data-ttu-id="a41a3-167">Haga clic en **Control de acceso (IAM)** en la hoja **myVnetB** y complete los pasos del 5 al 10 para myVnetB (en el paso 8, escriba **UserA**).</span><span class="sxs-lookup"><span data-stu-id="a41a3-167">Click **Access control (IAM)** in the **myVnetB** blade and then complete steps 5-10 for myVnetB, entering **UserA** in step 8.</span></span>
16. <span data-ttu-id="a41a3-168">Cierre sesión en el portal como UserB e inicie sesión como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-168">Log out of the portal as UserB and log in as UserA.</span></span>
17. <span data-ttu-id="a41a3-169">En el cuadro **Buscar recursos** en la parte superior del portal, escriba *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="a41a3-169">In the **Search resources** box at the top of the portal, type *myVnetA*.</span></span> <span data-ttu-id="a41a3-170">Haga clic en **myVnetA** cuando aparezca en los resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="a41a3-170">Click **myVnetA** when it appears in the search results.</span></span> <span data-ttu-id="a41a3-171">Aparece una hoja para la red virtual **myVnet**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-171">A blade appears for the **myVnet** virtual network.</span></span>
18. <span data-ttu-id="a41a3-172">Haga clic en **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-172">Click **myVnetA**.</span></span>
19. <span data-ttu-id="a41a3-173">En la hoja **myVnetA** que aparece, haga clic en **Emparejamientos** en la lista vertical de opciones que aparece a la izquierda de la hoja.</span><span class="sxs-lookup"><span data-stu-id="a41a3-173">In the **myVnetA** blade that appears, click **Peerings** from the vertical list of options on the left side of the blade.</span></span>
20. <span data-ttu-id="a41a3-174">En la hoja **myVnetA - Emparejamientos** que aparece, haga clic en **+ Agregar**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-174">In the **myVnetA - Peerings** blade that appeared, click **+ Add**</span></span>
21. <span data-ttu-id="a41a3-175">En la hoja **Agregar emparejamiento** que aparece, escriba o seleccione las opciones siguientes y, luego, haga clic en **Aceptar**:</span><span class="sxs-lookup"><span data-stu-id="a41a3-175">In the **Add peering** blade that appears, enter, or select the following options, then click **OK**:</span></span>
     - <span data-ttu-id="a41a3-176">**Nombre**: *myVnetAToMyVnetB*</span><span class="sxs-lookup"><span data-stu-id="a41a3-176">**Name**: *myVnetAToMyVnetB*</span></span>
     - <span data-ttu-id="a41a3-177">**Modelo de implementación de red virtual**: seleccione **Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-177">**Virtual network deployment model**:  Select **Resource Manager**.</span></span>
     - <span data-ttu-id="a41a3-178">**Conozco mi id. de recurso**: active esta casilla.</span><span class="sxs-lookup"><span data-stu-id="a41a3-178">**I know my resource ID**: Check this box.</span></span>
     - <span data-ttu-id="a41a3-179">**Id. de recurso**: escriba el identificador de recurso del paso 14.</span><span class="sxs-lookup"><span data-stu-id="a41a3-179">**Resource ID**: Enter the resource ID from step 14.</span></span>
     - <span data-ttu-id="a41a3-180">**Permitir acceso a red virtual:** asegúrese de que esté seleccionada la opción **Habilitado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-180">**Allow virtual network access:** Ensure that **Enabled** is selected.</span></span>
    <span data-ttu-id="a41a3-181">En este tutorial no se usa ninguna otra configuración.</span><span class="sxs-lookup"><span data-stu-id="a41a3-181">No other settings are used in this tutorial.</span></span> <span data-ttu-id="a41a3-182">Para conocer todas las configuraciones de emparejamiento, lea [Manage virtual network peerings](virtual-network-manage-peering.md#create-a-peering) (Administración de emparejamientos de redes virtuales).</span><span class="sxs-lookup"><span data-stu-id="a41a3-182">To learn about all peering settings, read [Manage virtual network peerings](virtual-network-manage-peering.md#create-a-peering).</span></span>
22. <span data-ttu-id="a41a3-183">Una vez que haga clic en **Aceptar** en el paso anterior, se cerrará la hoja **Agregar emparejamiento** y se volverá a mostrar la hoja **myVnetA - Emparejamientos**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-183">After clicking **OK** in the previous step, the **Add peering** blade closes and you see the **myVnetA - Peerings** blade again.</span></span> <span data-ttu-id="a41a3-184">Unos segundos después, el emparejamiento que creó aparece en la hoja.</span><span class="sxs-lookup"><span data-stu-id="a41a3-184">After a few seconds, the peering you created appears in the blade.</span></span> <span data-ttu-id="a41a3-185">El estado **Iniciado** aparece en la columna **ESTADO DE EMPAREJAMIENTO** correspondiente al emparejamiento **myVnetAToMyVnetB** que ha creado.</span><span class="sxs-lookup"><span data-stu-id="a41a3-185">**Initiated** is listed in the **PEERING STATUS** column for the **myVnetAToMyVnetB** peering you created.</span></span> <span data-ttu-id="a41a3-186">Ha emparejado myVnetA con myVnetB, pero ahora debe emparejar myVnetB con myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-186">You've peered myVnetA to myVnetB, but now you must peer myVnetB to myVnetA.</span></span> <span data-ttu-id="a41a3-187">Debe crear el emparejamiento en ambas direcciones para permitir que los recursos de las redes virtuales se comuniquen entre sí.</span><span class="sxs-lookup"><span data-stu-id="a41a3-187">The peering must be created in both directions to enable resources in the virtual networks to communicate with each other.</span></span>
23. <span data-ttu-id="a41a3-188">Cierre sesión en el portal como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-188">Log out of the portal as UserA and log in as UserB.</span></span>
24. <span data-ttu-id="a41a3-189">Complete nuevamente los pasos del 17 al 21 para MyVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-189">Complete steps 17-21 again for myVnetB.</span></span> <span data-ttu-id="a41a3-190">En el paso 21, asigne al emparejamiento el nombre *myVnetBToMyVnetA*, seleccione *myVnetA* para **Red Virtual** y escriba el identificador del paso 10 en el cuadro **Id. de recurso**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-190">In step 21, name the peering *myVnetBToMyVnetA*, select *myVnetA* for **Virtual network**, and enter the ID from step 10 in the **Resource ID** box.</span></span>
25. <span data-ttu-id="a41a3-191">Unos segundos después de hacer clic en **Aceptar** para crear el emparejamiento de myVnetB, el emparejamiento **myVnetBToMyVnetA** que acaba de crear aparece con el estado **Conectado** en la columna **ESTADO DE EMPAREJAMIENTO**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-191">A few seconds after clicking **OK** to create the peering for myVnetB, the **myVnetBToMyVnetA** peering you just created is listed with **Connected** in the **PEERING STATUS** column.</span></span>
26. <span data-ttu-id="a41a3-192">Cierre sesión en el portal como UserB e inicie sesión como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-192">Log out of the portal as UserB and log in as UserA.</span></span>
27. <span data-ttu-id="a41a3-193">Complete nuevamente los pasos del 17 al 19.</span><span class="sxs-lookup"><span data-stu-id="a41a3-193">Complete steps 17-19 again.</span></span> <span data-ttu-id="a41a3-194">El **ESTADO DE EMPAREJAMIENTO** correspondiente al emparejamiento **myVnetAToVNetB** ahora también aparece como **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-194">The **PEERING STATUS** for the **myVnetAToVNetB** peering is now also **Connected**.</span></span> <span data-ttu-id="a41a3-195">El emparejamiento se establece correctamente una vez que ve el estado **Conectado** en la columna **ESTADO DE EMPAREJAMIENTO** para las dos redes virtuales del emparejamiento.</span><span class="sxs-lookup"><span data-stu-id="a41a3-195">The peering is successfully established after you see **Connected** in the **PEERING STATUS** column for both virtual networks in the peering.</span></span> <span data-ttu-id="a41a3-196">Los recursos de Azure que cree en cualquiera de las redes virtuales ahora se pueden comunicar entre sí mediante sus direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="a41a3-196">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="a41a3-197">Si usa la resolución de nombres predeterminada de Azure para las redes virtuales, los recursos de las redes virtuales no pueden resolver nombres entre las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-197">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="a41a3-198">Si desea resolver nombres entre las redes virtuales de un emparejamiento, debe crear su propio servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="a41a3-198">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="a41a3-199">Obtenga información sobre cómo configurar la [resolución de nombres mediante su propio servidor DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="a41a3-199">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>
28. <span data-ttu-id="a41a3-200">**Opcional**: Si bien este tutorial no aborda la creación de máquinas virtuales, puede crear una máquina virtual en cada red virtual y conectar de una máquina virtual a la otra para así validar la conectividad.</span><span class="sxs-lookup"><span data-stu-id="a41a3-200">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
29. <span data-ttu-id="a41a3-201">**Opcional**: Para eliminar los recursos que crea en este tutorial, complete los pasos que aparecen en la sección [Eliminación de recursos](#delete-portal) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-201">**Optional**: To delete the resources that you create in this tutorial, complete the steps in the [Delete resources](#delete-portal) section of this article.</span></span>

## <span data-ttu-id="a41a3-202"><a name="cli"></a>Creación de emparejamiento: CLI de Azure</span><span class="sxs-lookup"><span data-stu-id="a41a3-202"><a name="cli"></a>Create peering - Azure CLI</span></span>

<span data-ttu-id="a41a3-203">En este tutorial se usan cuentas diferentes para cada suscripción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-203">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="a41a3-204">Si está usando una cuenta que tiene permisos para ambas suscripciones, puede usar la misma cuenta para todos los pasos, omitir los pasos para cerrar sesión en Azure y quitar las líneas del script que crean las asignaciones de roles de usuario.</span><span class="sxs-lookup"><span data-stu-id="a41a3-204">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of Azure, and remove the lines of script that create user role assignments.</span></span> <span data-ttu-id="a41a3-205">Reemplace UserA@azure.com y UserB@azure.com en todos los scripts siguientes por los nombres de usuario que está usando para UserA y UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-205">Replace UserA@azure.com and UserB@azure.com in all of the following scripts with the usernames you're using for UserA and UserB.</span></span>

<span data-ttu-id="a41a3-206">El script siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-206">The following script:</span></span>

- <span data-ttu-id="a41a3-207">Requiere la versión 2.0.4 o posterior de la CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="a41a3-207">Requires the Azure CLI version 2.0.4 or later.</span></span> <span data-ttu-id="a41a3-208">Para encontrar la versión ejecute `az --version`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-208">To find the version, run `az --version`.</span></span> <span data-ttu-id="a41a3-209">Si necesita actualizarla, consulte [Instalación de la CLI de Azure 2.0](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a41a3-209">If you need to upgrade, see [Install Azure CLI 2.0](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
- <span data-ttu-id="a41a3-210">Funciona en un shell de Bash.</span><span class="sxs-lookup"><span data-stu-id="a41a3-210">Works in a Bash shell.</span></span> <span data-ttu-id="a41a3-211">Para ver las opciones de ejecución de scripts de la CLI de Azure en un cliente Windows, consulte [Using the Azure CLI on Windows](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Uso de la CLI de Azure en Windows).</span><span class="sxs-lookup"><span data-stu-id="a41a3-211">For options on running Azure CLI scripts on Windows client, see [Running the Azure CLI in Windows](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> 

<span data-ttu-id="a41a3-212">En lugar de instalar la CLI y sus dependencias, puede usar Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="a41a3-212">Instead of installing the CLI and its dependencies, you can use the Azure Cloud Shell.</span></span> <span data-ttu-id="a41a3-213">Azure Cloud Shell es un shell de Bash gratuito que se puede ejecutar directamente en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="a41a3-213">The Azure Cloud Shell is a free Bash shell that you can run directly within the Azure portal.</span></span> <span data-ttu-id="a41a3-214">Tiene la CLI de Azure preinstalada y configurada para utilizar con su cuenta.</span><span class="sxs-lookup"><span data-stu-id="a41a3-214">It has the Azure CLI preinstalled and configured to use with your account.</span></span> <span data-ttu-id="a41a3-215">Haga clic en el botón **Pruébelo** en el script siguiente, que invoca un Cloud Shell en el que puede iniciar sesión con su cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="a41a3-215">Click the **Try it** button in the script that follows, which invokes a Cloud Shell that you can log in to your Azure account with.</span></span> 

1. <span data-ttu-id="a41a3-216">Abra una sesión de la CLI e inicie sesión en Azure como UserA mediante el comando `azure login`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-216">Open a CLI session and log in to Azure as UserA using the `azure login` command.</span></span> <span data-ttu-id="a41a3-217">La cuenta con la que inicie sesión debe tener todos los permisos necesarios para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-217">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-218">Para detalles, consulte la sección [Permisos](#permissions) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-218">See the [Permissions](#permissions) section of this article for details.</span></span>
2. <span data-ttu-id="a41a3-219">Copie el script siguiente en un editor de texto del equipo, reemplace `<SubscriptionA-Id>` por el identificador de SubscriptionA, copie el script modificado, péguelo en la sesión de la CLI y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-219">Copy the following script to a text editor on your PC, replace `<SubscriptionA-Id>` with the ID of SubscriptionA, then copy the modified script, paste it in your CLI session, and press `Enter`.</span></span> <span data-ttu-id="a41a3-220">Si no conoce el identificador de la suscripción, escriba el comando "az account show".</span><span class="sxs-lookup"><span data-stu-id="a41a3-220">If you don't know your subscription Id, enter the 'az account show\` command.</span></span> <span data-ttu-id="a41a3-221">El valor de **id** en la salida es el identificador de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-221">The value for **id** in the output is your subscription Id.</span></span>

    ```azurecli-interactive
    # Create a resource group.
    az group create \
      --name myResourceGroupA \
      --location eastus

    # Create virtual network A.
    az network vnet create \
      --name myVnetA \
      --resource-group myResourceGroupA \
      --location eastus \
      --address-prefix 10.0.0.0/16

    # Assign UserB permissions to virtual network A.
    az role assignment create \
      --assignee UserB@azure.com \
      --role "Network Contributor" \
      --scope /subscriptions/<SubscriptionA-Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/VirtualNetworks/myVnetA
    ```
    
     <span data-ttu-id="a41a3-222">No es necesaria la asignación de permisos para UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-222">The permission assignment for UserB is not a requirement.</span></span> <span data-ttu-id="a41a3-223">El emparejamiento se puede establecer aunque los usuarios realicen individualmente solicitudes de emparejamiento para sus respectivas redes virtuales, siempre y cuando las solicitudes coincidan.</span><span class="sxs-lookup"><span data-stu-id="a41a3-223">Peering can be established even if users individually raise peering requests for their respective virtual networks, as long as the requests match.</span></span> <span data-ttu-id="a41a3-224">La configuración resulta más fácil si se agrega un usuario con privilegios de myVNetB como colaborador de red en la red virtual local.</span><span class="sxs-lookup"><span data-stu-id="a41a3-224">Adding a privileged user of myVNetB as a network contributor in the local virtual network makes it easier to do the setup.</span></span>
3. <span data-ttu-id="a41a3-225">Cierre sesión en Azure como UserA mediante el comando `az logout` e inicie sesión en Azure como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-225">Log out of Azure as UserA using the `az logout` command, then log in to Azure as UserB.</span></span> <span data-ttu-id="a41a3-226">La cuenta con la que inicie sesión debe tener todos los permisos necesarios para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-226">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-227">Para detalles, consulte la sección [Permisos](#permissions) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-227">See the [Permissions](#permissions) section of this article for details.</span></span>
4. <span data-ttu-id="a41a3-228">Cree myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-228">Create myVnetB.</span></span> <span data-ttu-id="a41a3-229">Copie el contenido del script del paso 2 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-229">Copy the script contents in step 2 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-230">Reemplace `<SubscriptionA-Id>` por el identificador de SubscriptionB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-230">Replace `<SubscriptionA-Id>` with the ID of SubscriptionB.</span></span> <span data-ttu-id="a41a3-231">Cambie 10.0.0.0/16 a 10.1.0.0/16, y reemplace todas las apariciones de A por B, y todas las apariciones de B por A. Copie el script modificado, péguelo en la sesión de la CLI y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-231">Change 10.0.0.0/16 to 10.1.0.0/16, change all As to B, and all Bs to A. Copy the modified script, paste it in to your CLI session, and press `Enter`.</span></span> 
5. <span data-ttu-id="a41a3-232">Cierre sesión en Azure como UserB e inicie sesión en Azure como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-232">Log out of Azure as UserB and log in to Azure as UserA.</span></span>
6. <span data-ttu-id="a41a3-233">Cree un emparejamiento de redes virtuales myVnetA a myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-233">Create a virtual network peering from myVnetA to myVnetB.</span></span> <span data-ttu-id="a41a3-234">Copie el contenido del script siguiente en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-234">Copy the following script contents to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-235">Reemplace `<SubscriptionB-Id>` por el identificador de SubscriptionB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-235">Replace `<SubscriptionB-Id>` with the ID of SubscriptionB.</span></span> <span data-ttu-id="a41a3-236">Para ejecutar el script, copie el script modificado, péguelo en la sesión de la CLI y pulse ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="a41a3-236">To execute the script, copy the modified script, paste it into your CLI session, and press Enter.</span></span>
 
    ```azurecli-interactive
        # Get the id for myVnetA.
        vnetAId=$(az network vnet show \
          --resource-group myResourceGroupA \
          --name myVnetA \
          --query id --out tsv)
    
        # Peer myVNetA to myVNetB.
        az network vnet peering create \
          --name myVnetAToMyVnetB \
          --resource-group myResourceGroupA \
          --vnet-name myVnetA \
          --remote-vnet-id /subscriptions/<SubscriptionB-Id>/resourceGroups/myResourceGroupB/providers/Microsoft.Network/VirtualNetworks/myVnetB \
          --allow-vnet-access
    ```

7. <span data-ttu-id="a41a3-237">Compruebe el estado de emparejamiento de myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-237">View the peering state of myVnetA.</span></span>

    ```azurecli-interactive
    az network vnet peering list \
      --resource-group myResourceGroupA \
      --vnet-name myVnetA \
      --output table
    ```

    <span data-ttu-id="a41a3-238">El estado es **Iniciado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-238">The state is **Initiated**.</span></span> <span data-ttu-id="a41a3-239">Cuando haya creado el emparejamiento a myVnetA desde myVnetB, cambiará a **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-239">It changes to **Connected** once you create the peering to myVnetA from myVnetB.</span></span>

8. <span data-ttu-id="a41a3-240">Cierre sesión en Azure como UserA e inicie sesión en Azure como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-240">Log out UserA from Azure and log in to Azure as UserB.</span></span>
9. <span data-ttu-id="a41a3-241">Cree el emparejamiento de myVnetB a myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-241">Create the peering from myVnetB to myVnetA.</span></span> <span data-ttu-id="a41a3-242">Copie el contenido del script del paso 6 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-242">Copy the script contents in step 6 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-243">Reemplace `<SubscriptionB-Id>` por el identificador de SubscriptionA, todas las apariciones de A por B, y todas las apariciones de B por A. Una vez realizados los cambios, copie el script modificado, péguelo en la sesión de la CLI y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-243">Replace `<SubscriptionB-Id>` with the ID for SubscriptionA and change all As to B and all Bs to A. Once you've made the changes, copy the modified script, paste it into your CLI session, and press `Enter`.</span></span>
10. <span data-ttu-id="a41a3-244">Compruebe el estado de emparejamiento de myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-244">View the peering state of myVnetB.</span></span> <span data-ttu-id="a41a3-245">Copie el contenido del script del paso 7 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-245">Copy the script contents in step 7 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-246">Reemplace A por B en el nombre del grupo de recursos y de la red virtual, copie el script, pegue el script modificado en la sesión de la CLI y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-246">Change A to B for the resource group and virtual network names, copy the script, paste the modified script in to your CLI session, and then press `Enter`.</span></span> <span data-ttu-id="a41a3-247">El estado de emparejamiento es **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-247">The peering state is **Connected**.</span></span> <span data-ttu-id="a41a3-248">El estado de emparejamiento de myVnetA cambiará a **Conectado** después de que haya creado el emparejamiento de myVnetB a myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-248">The peering state of myVnetA changes to **Connected** after you've created the peering from myVnetB to myVnetA.</span></span> <span data-ttu-id="a41a3-249">Puede volver a iniciar sesión como UserA en Azure y realizar el paso 7 de nuevo para comprobar el estado de emparejamiento de myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-249">You can log UserA back in to Azure and complete step 7 again to verify the peering state of myVnetA.</span></span> 

    > [!NOTE]
    > <span data-ttu-id="a41a3-250">El emparejamiento no se habrá establecido mientras el estado de emparejamiento de ambas redes virtuales no sea **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-250">The peering is not established until the peering state is **Connected** for both virtual networks.</span></span>

11. <span data-ttu-id="a41a3-251">**Opcional**: Si bien este tutorial no aborda la creación de máquinas virtuales, puede crear una máquina virtual en cada red virtual y conectar de una máquina virtual a la otra para así validar la conectividad.</span><span class="sxs-lookup"><span data-stu-id="a41a3-251">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
12. <span data-ttu-id="a41a3-252">**Opcional**: para eliminar los recursos que crea en este tutorial, complete los pasos que aparecen en la sección [Eliminar recursos](#delete-cli) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-252">**Optional**: To delete the resources that you create in this tutorial, complete the steps in [Delete resources](#delete-cli) in this article.</span></span>

<span data-ttu-id="a41a3-253">Los recursos de Azure que cree en cualquiera de las redes virtuales ahora se pueden comunicar entre sí mediante sus direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="a41a3-253">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="a41a3-254">Si usa la resolución de nombres predeterminada de Azure para las redes virtuales, los recursos de las redes virtuales no pueden resolver nombres entre las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-254">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="a41a3-255">Si desea resolver nombres entre las redes virtuales de un emparejamiento, debe crear su propio servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="a41a3-255">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="a41a3-256">Obtenga información sobre cómo configurar la [resolución de nombres mediante su propio servidor DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="a41a3-256">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>
 
## <span data-ttu-id="a41a3-257"><a name="powershell"></a>Creación de emparejamiento: PowerShell</span><span class="sxs-lookup"><span data-stu-id="a41a3-257"><a name="powershell"></a>Create peering - PowerShell</span></span>

<span data-ttu-id="a41a3-258">En este tutorial se usan cuentas diferentes para cada suscripción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-258">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="a41a3-259">Si está usando una cuenta que tiene permisos para ambas suscripciones, puede usar la misma cuenta para todos los pasos, omitir los pasos para cerrar sesión en Azure y quitar las líneas del script que crean las asignaciones de roles de usuario.</span><span class="sxs-lookup"><span data-stu-id="a41a3-259">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of Azure, and remove the lines of script that create user role assignments.</span></span> <span data-ttu-id="a41a3-260">Reemplace UserA@azure.com y UserB@azure.com en todos los scripts siguientes por los nombres de usuario que está usando para UserA y UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-260">Replace UserA@azure.com and UserB@azure.com in all of the following scripts with the usernames you're using for UserA and UserB.</span></span>

1. <span data-ttu-id="a41a3-261">Instale la versión más reciente del módulo [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a41a3-261">Install the latest version of the PowerShell [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) module.</span></span> <span data-ttu-id="a41a3-262">Si no está familiarizado con Azure PowerShell, consulte [Introducción a Azure PowerShell](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a41a3-262">If you're new to Azure PowerShell, see [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
2. <span data-ttu-id="a41a3-263">Inicie una sesión de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a41a3-263">Start a PowerShell session.</span></span>
3. <span data-ttu-id="a41a3-264">En PowerShell, inicie sesión en Azure como UserA. Para ello, escriba el comando `login-azurermaccount`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-264">In PowerShell, log in to Azure as UserA by entering the `login-azurermaccount` command.</span></span> <span data-ttu-id="a41a3-265">La cuenta con la que inicie sesión debe tener todos los permisos necesarios para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-265">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-266">Para detalles, consulte la sección [Permisos](#permissions) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-266">See the [Permissions](#permissions) section of this article for details.</span></span>
4. <span data-ttu-id="a41a3-267">Cree un grupo de recursos y una red virtual A. Copie el script siguiente en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-267">Create a resource group and virtual network A. Copy the following script to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-268">Reemplace `<SubscriptionA-Id>` por el identificador de SubscriptionA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-268">Replace `<SubscriptionA-Id>` with the ID of SubscriptionA.</span></span> <span data-ttu-id="a41a3-269">Si no conoce el identificador de la suscripción, escriba el comando `Get-AzureRmSubscription` para verlo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-269">If you don't know your subscription Id, enter the `Get-AzureRmSubscription` command to view it.</span></span> <span data-ttu-id="a41a3-270">El valor de **id** en la salida devuelta es el identificador de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-270">The value for **Id** in the returned output is your subscription ID.</span></span> <span data-ttu-id="a41a3-271">Para ejecutar el script, copie el script modificado, péguelo en PowerShell y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-271">To execute the script, copy the modified script, paste it in to PowerShell, and then press `Enter`.</span></span>

    ```powershell
    # Create a resource group.
    New-AzureRmResourceGroup `
      -Name MyResourceGroupA `
      -Location eastus

    # Create virtual network A.
    $vNetA = New-AzureRmVirtualNetwork `
      -ResourceGroupName MyResourceGroupA `
      -Name 'myVnetA' `
      -AddressPrefix '10.0.0.0/16' `
      -Location eastus

    # Assign UserB permissions to myVnetA.
    New-AzureRmRoleAssignment `
      -SignInName UserB@azure.com `
      -RoleDefinitionName "Network Contributor" `
      -Scope /subscriptions/<SubscriptionA-Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/VirtualNetworks/myVnetA
    ```

    <span data-ttu-id="a41a3-272">No es necesaria la asignación de permisos para UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-272">The permission assignment for UserB is not a requirement.</span></span> <span data-ttu-id="a41a3-273">El emparejamiento se puede establecer aunque los usuarios realicen individualmente solicitudes de emparejamiento para sus respectivas redes virtuales, siempre y cuando las solicitudes coincidan.</span><span class="sxs-lookup"><span data-stu-id="a41a3-273">Peering can be established even if users individually raise peering requests for their respective virtual networks, as long as the requests match.</span></span> <span data-ttu-id="a41a3-274">La configuración resulta más fácil si se agrega un usuario con privilegios de la otra red virtual como usuario en la red virtual local.</span><span class="sxs-lookup"><span data-stu-id="a41a3-274">Adding a privileged user of the other virtual network as a user in the local virtual network makes it easier to do the setup.</span></span>
5. <span data-ttu-id="a41a3-275">Cierre sesión en Azure como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-275">Log out UserA from Azure and log in UserB.</span></span> <span data-ttu-id="a41a3-276">La cuenta con la que inicie sesión debe tener todos los permisos necesarios para crear un emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-276">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="a41a3-277">Para detalles, consulte la sección [Permisos](#permissions) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-277">See the [Permissions](#permissions) section of this article for details.</span></span>
6. <span data-ttu-id="a41a3-278">Copie el contenido del script del paso 4 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-278">Copy the script contents in step 4 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-279">Reemplace `<SubscriptionA-Id>` por el identificador de SubscriptionB. Cambie 10.0.0.0/16 a 10.1.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="a41a3-279">Replace `<SubscriptionA-Id>` with the ID for subscription B. Change 10.0.0.0/16 to 10.1.0.0/16.</span></span> <span data-ttu-id="a41a3-280">Reemplace todas las apariciones de A por B, y todas las apariciones de B por A. Para ejecutar el script, copie el script modificado, péguelo en PowerShell y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-280">Change all As to B and all Bs to A. To execute the script, copy the modified script, paste into PowerShell, and then press `Enter`.</span></span>
7. <span data-ttu-id="a41a3-281">Cierre sesión como UserB en Azure e inicie sesión como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-281">Log out UserB from Azure and log in UserA.</span></span>
8. <span data-ttu-id="a41a3-282">Cree el emparejamiento de myVnetA a myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-282">Create the peering from myVnetA to myVnetB.</span></span> <span data-ttu-id="a41a3-283">Copie el script siguiente en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-283">Copy the following script to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-284">Reemplace `<SubscriptionB-Id>` por el identificador de SubscriptionB. Para ejecutar el script, copie el script modificado, péguelo en PowerShell y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-284">Replace `<SubscriptionB-Id>` with the ID of subscription B. To execute the script, copy the modified script, paste in to PowerShell, and then press `Enter`.</span></span>
 
    ```powershell
    # Peer myVnetA to myVnetB.
    $vNetA=Get-AzureRmVirtualNetwork -Name myVnetA -ResourceGroupName myResourceGroupA
    Add-AzureRmVirtualNetworkPeering `
      -Name 'myVnetAToMyVnetB' `
      -VirtualNetwork $vNetA `
      -RemoteVirtualNetworkId "/subscriptions/<SubscriptionB-Id>/resourceGroups/myResourceGroupB/providers/Microsoft.Network/virtualNetworks/myVnetB"
    ```

9. <span data-ttu-id="a41a3-285">Compruebe el estado de emparejamiento de myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-285">View the peering state of myVnetA.</span></span>

    ```powershell
    Get-AzureRmVirtualNetworkPeering `
      -ResourceGroupName myResourceGroupA `
      -VirtualNetworkName myVnetA `
      | Format-Table VirtualNetworkName, PeeringState
    ```

    <span data-ttu-id="a41a3-286">El estado es **Iniciado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-286">The state is **Initiated**.</span></span> <span data-ttu-id="a41a3-287">Cuando haya configurado el emparejamiento a myVnetA desde myVnetB, cambiará a **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-287">It changes to **Connected** once you setup the peering to myVnetA from myVnetB.</span></span>

10. <span data-ttu-id="a41a3-288">Cierre sesión en Azure como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-288">Log out UserA from Azure and log in UserB.</span></span>
11. <span data-ttu-id="a41a3-289">Cree el emparejamiento de myVnetB a myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-289">Create the peering from myVnetB to myVnetA.</span></span> <span data-ttu-id="a41a3-290">Copie el contenido del script del paso 8 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-290">Copy the script contents in step 8 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-291">Reemplace `<SubscriptionB-Id>` por el identificador de SubscriptionA, todas las apariciones de A por B, y todas las apariciones de B por A. Para ejecutar el script, copie el script modificado, péguelo en PowerShell y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-291">Replace `<SubscriptionB-Id>` with the ID of subscription A and change all A's to B and all B's to A. To execute the script, copy the modified script, paste it in to PowerShell, and then press `Enter`.</span></span>
12. <span data-ttu-id="a41a3-292">Compruebe el estado de emparejamiento de myVnetB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-292">View the peering state of myVnetB.</span></span> <span data-ttu-id="a41a3-293">Copie el contenido del script del paso 9 en un editor de texto del equipo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-293">Copy the script contents in step 9 to a text editor on your PC.</span></span> <span data-ttu-id="a41a3-294">Reemplace A por B en el nombre del grupo de recursos y de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="a41a3-294">Change A to B for the resource group and virtual network names.</span></span> <span data-ttu-id="a41a3-295">Para ejecutar el script, pegue el script modificado en PowerShell y pulse `Enter`.</span><span class="sxs-lookup"><span data-stu-id="a41a3-295">To execute the script, paste the modified script into PowerShell, and then press `Enter`.</span></span> <span data-ttu-id="a41a3-296">El estado es **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-296">The state is **Connected**.</span></span> <span data-ttu-id="a41a3-297">El estado de emparejamiento de **myVnetA** cambiará a **Conectado** después de que haya creado el emparejamiento de **myVnetB** a **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-297">The peering state of **myVnetA** changes to **Connected** after you've created the peering from **myVnetB** to **myVnetA**.</span></span> <span data-ttu-id="a41a3-298">Puede volver a iniciar sesión como UserA en Azure y realizar el paso 9 de nuevo para comprobar el estado de emparejamiento de myVnetA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-298">You can log UserA back in to Azure and complete step 9 again to verify the peering state of myVnetA.</span></span> 

    > [!NOTE]
    > <span data-ttu-id="a41a3-299">El emparejamiento no se habrá establecido mientras el estado de emparejamiento de ambas redes virtuales no sea **Conectado**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-299">The peering is not established until the peering state is **Connected** for both virtual networks.</span></span>

    <span data-ttu-id="a41a3-300">Los recursos de Azure que cree en cualquiera de las redes virtuales ahora se pueden comunicar entre sí mediante sus direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="a41a3-300">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="a41a3-301">Si usa la resolución de nombres predeterminada de Azure para las redes virtuales, los recursos de las redes virtuales no pueden resolver nombres entre las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-301">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="a41a3-302">Si desea resolver nombres entre las redes virtuales de un emparejamiento, debe crear su propio servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="a41a3-302">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="a41a3-303">Obtenga información sobre cómo configurar la [resolución de nombres mediante su propio servidor DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="a41a3-303">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

13. <span data-ttu-id="a41a3-304">**Opcional**: Si bien este tutorial no aborda la creación de máquinas virtuales, puede crear una máquina virtual en cada red virtual y conectar de una máquina virtual a la otra para así validar la conectividad.</span><span class="sxs-lookup"><span data-stu-id="a41a3-304">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
14. <span data-ttu-id="a41a3-305">**Opcional**: para eliminar los recursos que crea en este tutorial, complete los pasos que aparecen en la sección [Eliminar recursos](#delete-powershell) de este artículo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-305">**Optional**: To delete the resources that you create in this tutorial, complete the steps in [Delete resources](#delete-powershell) in this article.</span></span>

## <span data-ttu-id="a41a3-306"><a name="permissions"></a>Permisos</span><span class="sxs-lookup"><span data-stu-id="a41a3-306"><a name="permissions"></a>Permissions</span></span>

<span data-ttu-id="a41a3-307">Las cuentas que use para crear un emparejamiento de redes virtuales deben tener el rol o los permisos necesarios.</span><span class="sxs-lookup"><span data-stu-id="a41a3-307">The accounts you use to create a virtual network peering must have the necessary role or permissions.</span></span> <span data-ttu-id="a41a3-308">Por ejemplo, si está emparejando dos redes virtuales denominadas **myVnetA** y **myVnetB**, su cuenta debe tener asignado el rol o los permisos mínimos siguientes para cada red virtual:</span><span class="sxs-lookup"><span data-stu-id="a41a3-308">For example, if you were peering two virtual networks named **myVnetA** and **myVnetB**, your account must be assigned the following minimum role or permissions for each virtual network:</span></span>
    
|<span data-ttu-id="a41a3-309">Red virtual</span><span class="sxs-lookup"><span data-stu-id="a41a3-309">Virtual network</span></span>|<span data-ttu-id="a41a3-310">Rol</span><span class="sxs-lookup"><span data-stu-id="a41a3-310">Role</span></span>|<span data-ttu-id="a41a3-311">Permisos</span><span class="sxs-lookup"><span data-stu-id="a41a3-311">Permissions</span></span>|
|---|---|---|
|<span data-ttu-id="a41a3-312">myVnetA</span><span class="sxs-lookup"><span data-stu-id="a41a3-312">myVnetA</span></span>|[<span data-ttu-id="a41a3-313">Colaborador de la red</span><span class="sxs-lookup"><span data-stu-id="a41a3-313">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="a41a3-314">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span><span class="sxs-lookup"><span data-stu-id="a41a3-314">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span></span>|
|<span data-ttu-id="a41a3-315">myVnetB</span><span class="sxs-lookup"><span data-stu-id="a41a3-315">myVnetB</span></span>|[<span data-ttu-id="a41a3-316">Colaborador de la red</span><span class="sxs-lookup"><span data-stu-id="a41a3-316">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="a41a3-317">Microsoft.Network/virtualNetworks/peer</span><span class="sxs-lookup"><span data-stu-id="a41a3-317">Microsoft.Network/virtualNetworks/peer</span></span>|

<span data-ttu-id="a41a3-318">Obtenga más información sobre los [roles integrados](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) y la asignación de permisos específicos a [roles personalizados](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (solo Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="a41a3-318">Learn more about [built-in roles](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) and assigning specific permissions to [custom roles](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Resource Manager only).</span></span>

## <span data-ttu-id="a41a3-319"><a name="delete"></a>Eliminación de recursos</span><span class="sxs-lookup"><span data-stu-id="a41a3-319"><a name="delete"></a>Delete resources</span></span>
<span data-ttu-id="a41a3-320">Cuando haya terminado este tutorial, es posible que quiera eliminar los recursos que creó en el tutorial, para no incurrir en gastos de uso.</span><span class="sxs-lookup"><span data-stu-id="a41a3-320">When you've finished this tutorial, you might want to delete the resources you created in the tutorial, so you don't incur usage charges.</span></span> <span data-ttu-id="a41a3-321">Al eliminar un grupo de recursos se eliminan también todos los recursos contenidos en el mismo.</span><span class="sxs-lookup"><span data-stu-id="a41a3-321">Deleting a resource group also deletes all resources that are in the resource group.</span></span>

### <span data-ttu-id="a41a3-322"><a name="delete-portal"></a>Azure Portal</span><span class="sxs-lookup"><span data-stu-id="a41a3-322"><a name="delete-portal"></a>Azure portal</span></span>

1. <span data-ttu-id="a41a3-323">Inicie sesión en Azure Portal como UserA.</span><span class="sxs-lookup"><span data-stu-id="a41a3-323">Log in to the Azure portal as UserA.</span></span>
2. <span data-ttu-id="a41a3-324">En el cuadro de búsqueda del portal, escriba **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-324">In the portal search box, enter **myResourceGroupA**.</span></span> <span data-ttu-id="a41a3-325">En los resultados de la búsqueda, haga clic en **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-325">In the search results, click **myResourceGroupA**.</span></span>
3. <span data-ttu-id="a41a3-326">En la hoja **myResourceGroupA**, haga clic en el icono **Eliminar**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-326">On the **myResourceGroupA** blade, click the **Delete** icon.</span></span>
4. <span data-ttu-id="a41a3-327">Para confirmar la eliminación, en el cuadro **ESCRIBA EL NOMBRE DEL GRUPO DE RECURSOS**, escriba **myResourceGroupA** y, luego, haga clic en **Eliminar**.</span><span class="sxs-lookup"><span data-stu-id="a41a3-327">To confirm the deletion, in the **TYPE THE RESOURCE GROUP NAME** box, enter **myResourceGroupA**, and then click **Delete**.</span></span>
5. <span data-ttu-id="a41a3-328">Cierre sesión en el portal como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-328">Log out of the portal as UserA and log in as UserB.</span></span>
6. <span data-ttu-id="a41a3-329">Complete los pasos del 2 al 4 para myResourceGroupB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-329">Complete steps 2-4 for myResourceGroupB.</span></span>

### <span data-ttu-id="a41a3-330"><a name="delete-cli"></a>Azure CLI</span><span class="sxs-lookup"><span data-stu-id="a41a3-330"><a name="delete-cli"></a>Azure CLI</span></span>

1. <span data-ttu-id="a41a3-331">Inicie sesión en Azure como UserA y ejecute el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-331">Log in to Azure as UserA and execute the following command:</span></span>

    ```azurecli-interactive
    az group delete --name myResourceGroupA --yes
    ```
2. <span data-ttu-id="a41a3-332">Cierre sesión en Azure como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-332">Log out of Azure as UserA and log in as UserB.</span></span>
3. <span data-ttu-id="a41a3-333">Ejecute el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-333">Execute the following command:</span></span>

    ```azurecli-interactive
    az group delete --name myResourceGroupB --yes
    ```

### <span data-ttu-id="a41a3-334"><a name="delete-powershell"></a>PowerShell</span><span class="sxs-lookup"><span data-stu-id="a41a3-334"><a name="delete-powershell"></a>PowerShell</span></span>

1. <span data-ttu-id="a41a3-335">Inicie sesión en Azure como UserA y ejecute el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-335">Log in to Azure as UserA and execute the following command:</span></span>

    ```powershell
    Remove-AzureRmResourceGroup -Name myResourceGroupA -force
    ```

2. <span data-ttu-id="a41a3-336">Cierre sesión en Azure como UserA e inicie sesión como UserB.</span><span class="sxs-lookup"><span data-stu-id="a41a3-336">Log out of Azure as UserA and log in as UserB.</span></span>
3. <span data-ttu-id="a41a3-337">Ejecute el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="a41a3-337">Execute the following command:</span></span>

    ```powershell
    Remove-AzureRmResourceGroup -Name myResourceGroupB -force
    ```

## <a name="next-steps"></a><span data-ttu-id="a41a3-338">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a41a3-338">Next steps</span></span>

- <span data-ttu-id="a41a3-339">Conozca en profundidad las [restricciones y comportamientos importantes del emparejamiento de redes virtuales](virtual-network-manage-peering.md#requirements-and-constraints) antes de crear un emparejamiento de redes virtuales para su uso en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="a41a3-339">Thoroughly familiarize yourself with important [virtual network peering constraints and behaviors](virtual-network-manage-peering.md#requirements-and-constraints) before creating a virtual network peering for production use.</span></span>
- <span data-ttu-id="a41a3-340">Conozca toda la [configuración de emparejamiento de redes virtuales](virtual-network-manage-peering.md#create-a-peering).</span><span class="sxs-lookup"><span data-stu-id="a41a3-340">Learn about all [virtual network peering settings](virtual-network-manage-peering.md#create-a-peering).</span></span>
- <span data-ttu-id="a41a3-341">Obtenga información sobre cómo [crear una topología de red de concentrador y radio](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) con emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="a41a3-341">Learn how to [create a hub and spoke network topology](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) with virtual network peering.</span></span>

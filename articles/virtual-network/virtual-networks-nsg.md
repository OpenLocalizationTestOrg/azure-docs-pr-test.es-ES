---
title: aaaNetwork grupos de seguridad de Azure | Documentos de Microsoft
description: "Obtenga información acerca de cómo fluyen tooisolate y controlar el tráfico dentro de las redes virtuales con firewall de hello distribuida en Azure con grupos de seguridad de red."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: 3528ce833dab17977327c3c9ae0e78316e5e6a05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="6774d-103">Filtrado del tráfico de red con grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="6774d-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="6774d-104">Un grupo de seguridad de red (NSG) contiene una lista de reglas de seguridad que permiten o deniegan tooresources de tráfico de red conectados a redes virtuales tooAzure (VNet).</span><span class="sxs-lookup"><span data-stu-id="6774d-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic tooresources connected tooAzure Virtual Networks (VNet).</span></span> <span data-ttu-id="6774d-105">Los NSG pueden ser toosubnets asociado, máquinas virtuales individuales (clásico), o interfaces de red individuales (NIC) adjunta tooVMs (Administrador de recursos).</span><span class="sxs-lookup"><span data-stu-id="6774d-105">NSGs can be associated toosubnets, individual VMs (classic), or individual network interfaces (NIC) attached tooVMs (Resource Manager).</span></span> <span data-ttu-id="6774d-106">Cuando un NSG está asociado tooa subred, Hola reglas aplican tooall recursos toohello conectado subred.</span><span class="sxs-lookup"><span data-stu-id="6774d-106">When an NSG is associated tooa subnet, hello rules apply tooall resources connected toohello subnet.</span></span> <span data-ttu-id="6774d-107">Tráfico puede restringir aún más mediante la asociación también un tooa NSG VM o NIC.</span><span class="sxs-lookup"><span data-stu-id="6774d-107">Traffic can further be restricted by also associating an NSG tooa VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="6774d-108">Azure tiene dos modelos de implementación diferentes para crear recursos y trabajar con ellos: [Resource Manager y el clásico](../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="6774d-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="6774d-109">Este artículo incluye el uso de ambos modelos, pero Microsoft recomienda más nuevas implementaciones de usar el modelo del Administrador de recursos de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-109">This article covers using both models, but Microsoft recommends that most new deployments use hello Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="6774d-110">Recurso NSG</span><span class="sxs-lookup"><span data-stu-id="6774d-110">NSG resource</span></span>
<span data-ttu-id="6774d-111">Los NSG contienen Hola propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="6774d-111">NSGs contain hello following properties:</span></span>

| <span data-ttu-id="6774d-112">Propiedad</span><span class="sxs-lookup"><span data-stu-id="6774d-112">Property</span></span> | <span data-ttu-id="6774d-113">Description</span><span class="sxs-lookup"><span data-stu-id="6774d-113">Description</span></span> | <span data-ttu-id="6774d-114">Restricciones</span><span class="sxs-lookup"><span data-stu-id="6774d-114">Constraints</span></span> | <span data-ttu-id="6774d-115">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="6774d-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="6774d-116">Nombre</span><span class="sxs-lookup"><span data-stu-id="6774d-116">Name</span></span> |<span data-ttu-id="6774d-117">Nombre de hello NSG</span><span class="sxs-lookup"><span data-stu-id="6774d-117">Name for hello NSG</span></span> |<span data-ttu-id="6774d-118">Debe ser único dentro de la región de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-118">Must be unique within hello region.</span></span><br/><span data-ttu-id="6774d-119">Puede incluir letras, números, caracteres de subrayado, puntos y guiones.</span><span class="sxs-lookup"><span data-stu-id="6774d-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="6774d-120">Debe empezar por una letra o un número.</span><span class="sxs-lookup"><span data-stu-id="6774d-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="6774d-121">Debe finalizar en una letra, un número o un carácter de subrayado.</span><span class="sxs-lookup"><span data-stu-id="6774d-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="6774d-122">No puede superar los 80 caracteres.</span><span class="sxs-lookup"><span data-stu-id="6774d-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="6774d-123">Puesto que puede que necesite toocreate varios NSG, asegúrese de que tiene una convención de nomenclatura que facilita la función de hello tooidentify fácil de sus NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-123">Since you may need toocreate several NSGs, make sure you have a naming convention that makes it easy tooidentify hello function of your NSGs.</span></span> |
| <span data-ttu-id="6774d-124">Region</span><span class="sxs-lookup"><span data-stu-id="6774d-124">Region</span></span> |<span data-ttu-id="6774d-125">Azure [región](https://azure.microsoft.com/regions) donde hello NSG se crea.</span><span class="sxs-lookup"><span data-stu-id="6774d-125">Azure [region](https://azure.microsoft.com/regions) where hello NSG is created.</span></span> |<span data-ttu-id="6774d-126">Los NSG solo pueden ser tooresources asociado dentro de hello misma región que hello NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-126">NSGs can only be associated tooresources within hello same region as hello NSG.</span></span> |<span data-ttu-id="6774d-127">toolearn sobre cuántos NSG puede tener por región, leer hello [Azure tiene una limitación](../azure-subscription-service-limits.md#virtual-networking-limits-classic) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-127">toolearn about how many NSGs you can have per region, read hello [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="6774d-128">Grupos de recursos</span><span class="sxs-lookup"><span data-stu-id="6774d-128">Resource group</span></span> |<span data-ttu-id="6774d-129">Hola [grupo de recursos](../azure-resource-manager/resource-group-overview.md#resource-groups) hello NSG existe en.</span><span class="sxs-lookup"><span data-stu-id="6774d-129">hello [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) hello NSG exists in.</span></span> |<span data-ttu-id="6774d-130">Aunque un NSG existe en un grupo de recursos, puede ser tooresources asociados en un grupo de recursos, como recurso de hello forma parte del programa Hola misma región de Azure como hello NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-130">Although an NSG exists in a resource group, it can be associated tooresources in any resource group, as long as hello resource is part of hello same Azure region as hello NSG.</span></span> |<span data-ttu-id="6774d-131">Grupos de recursos es toomanage usa varios recursos de forma conjunto como una unidad de implementación.</span><span class="sxs-lookup"><span data-stu-id="6774d-131">Resource groups are used toomanage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="6774d-132">Considere la agrupación hello NSG con está asociado a los recursos.</span><span class="sxs-lookup"><span data-stu-id="6774d-132">You may consider grouping hello NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="6774d-133">Reglas</span><span class="sxs-lookup"><span data-stu-id="6774d-133">Rules</span></span> |<span data-ttu-id="6774d-134">Las reglas de entrada o de salida que definen qué tráfico se permite o deniega.</span><span class="sxs-lookup"><span data-stu-id="6774d-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="6774d-135">Vea hello [reglas del NSG](#Nsg-rules) sección de este artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-135">See hello [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="6774d-136">Las ACL basadas en el punto de conexión y seguridad de red no se admiten grupos en Hola la misma instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="6774d-136">Endpoint-based ACLs and network security groups are not supported on hello same VM instance.</span></span> <span data-ttu-id="6774d-137">Si desea toouse un NSG y tiene un punto de conexión ACL ya en su lugar, primero quite el extremo de hello ACL.</span><span class="sxs-lookup"><span data-stu-id="6774d-137">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="6774d-138">toolearn cómo leer tooremove una ACL hello [administrar Access Control Lists (ACL) para extremos usando PowerShell](virtual-networks-acl-powershell.md) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-138">toolearn how tooremove an ACL, read hello [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="6774d-139">Reglas de grupo de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="6774d-139">NSG rules</span></span>
<span data-ttu-id="6774d-140">Reglas NSG contienen Hola propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="6774d-140">NSG rules contain hello following properties:</span></span>

| <span data-ttu-id="6774d-141">Propiedad</span><span class="sxs-lookup"><span data-stu-id="6774d-141">Property</span></span> | <span data-ttu-id="6774d-142">Description</span><span class="sxs-lookup"><span data-stu-id="6774d-142">Description</span></span> | <span data-ttu-id="6774d-143">Restricciones</span><span class="sxs-lookup"><span data-stu-id="6774d-143">Constraints</span></span> | <span data-ttu-id="6774d-144">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="6774d-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="6774d-145">**Name**</span><span class="sxs-lookup"><span data-stu-id="6774d-145">**Name**</span></span> |<span data-ttu-id="6774d-146">Nombre de regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-146">Name for hello rule.</span></span> |<span data-ttu-id="6774d-147">Debe ser único dentro de la región de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-147">Must be unique within hello region.</span></span><br/><span data-ttu-id="6774d-148">Puede incluir letras, números, caracteres de subrayado, puntos y guiones.</span><span class="sxs-lookup"><span data-stu-id="6774d-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="6774d-149">Debe empezar por una letra o un número.</span><span class="sxs-lookup"><span data-stu-id="6774d-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="6774d-150">Debe finalizar en una letra, un número o un carácter de subrayado.</span><span class="sxs-lookup"><span data-stu-id="6774d-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="6774d-151">No puede superar los 80 caracteres.</span><span class="sxs-lookup"><span data-stu-id="6774d-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="6774d-152">Puede tener varias reglas dentro de un NSG, por lo tanto, asegúrese de que seguir una convención de nomenclatura que permite la función de Hola de tooidentify de la regla.</span><span class="sxs-lookup"><span data-stu-id="6774d-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you tooidentify hello function of your rule.</span></span> |
| <span data-ttu-id="6774d-153">**Protocolo**</span><span class="sxs-lookup"><span data-stu-id="6774d-153">**Protocol**</span></span> |<span data-ttu-id="6774d-154">Protocolo toomatch de regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-154">Protocol toomatch for hello rule.</span></span> |<span data-ttu-id="6774d-155">TCP, UDP o *.</span><span class="sxs-lookup"><span data-stu-id="6774d-155">TCP, UDP, or *</span></span> |<span data-ttu-id="6774d-156">Utilizar * como un protocolo incluye ICMP (solo el tráfico este-oeste), como así como UDP y TCP y puede reducir el número de Hola de reglas que necesita.</span><span class="sxs-lookup"><span data-stu-id="6774d-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce hello number of rules you need.</span></span><br/><span data-ttu-id="6774d-157">Hola al mismo tiempo, con * podría ser demasiado amplio un enfoque, por lo que se recomienda que utilice * solo cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="6774d-157">At hello same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="6774d-158">**Intervalo de puertos de origen**</span><span class="sxs-lookup"><span data-stu-id="6774d-158">**Source port range**</span></span> |<span data-ttu-id="6774d-159">Toomatch de intervalo de puerto de origen para la regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-159">Source port range toomatch for hello rule.</span></span> |<span data-ttu-id="6774d-160">Solo el número de puerto de 1 too65535, intervalo de puertos (ejemplo: 1-65535), o * (para todos los puertos).</span><span class="sxs-lookup"><span data-stu-id="6774d-160">Single port number from 1 too65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="6774d-161">Los puertos de origen podrían ser transitorios.</span><span class="sxs-lookup"><span data-stu-id="6774d-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="6774d-162">A menos que el programa cliente use un puerto concreto, utilice * en la mayoría de los casos.</span><span class="sxs-lookup"><span data-stu-id="6774d-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="6774d-163">Intente intervalos de puertos de toouse tooavoid posible Hola imprescindible para varias reglas.</span><span class="sxs-lookup"><span data-stu-id="6774d-163">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="6774d-164">Los distintos puertos o intervalos de puertos no se pueden agrupar mediante una coma.</span><span class="sxs-lookup"><span data-stu-id="6774d-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="6774d-165">**Intervalo de puertos de destino**</span><span class="sxs-lookup"><span data-stu-id="6774d-165">**Destination port range**</span></span> |<span data-ttu-id="6774d-166">Toomatch de intervalo de puerto de destino para la regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-166">Destination port range toomatch for hello rule.</span></span> |<span data-ttu-id="6774d-167">Solo el número de puerto de 1 too65535, intervalo de puertos (ejemplo: 1-65535), o \* (para todos los puertos).</span><span class="sxs-lookup"><span data-stu-id="6774d-167">Single port number from 1 too65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="6774d-168">Intente intervalos de puertos de toouse tooavoid posible Hola imprescindible para varias reglas.</span><span class="sxs-lookup"><span data-stu-id="6774d-168">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="6774d-169">Los distintos puertos o intervalos de puertos no se pueden agrupar mediante una coma.</span><span class="sxs-lookup"><span data-stu-id="6774d-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="6774d-170">**Prefijo de dirección de origen**</span><span class="sxs-lookup"><span data-stu-id="6774d-170">**Source address prefix**</span></span> |<span data-ttu-id="6774d-171">Origen dirección prefijo o etiqueta toomatch de regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-171">Source address prefix or tag toomatch for hello rule.</span></span> |<span data-ttu-id="6774d-172">Dirección IP única (ejemplo: 10.10.10.10), subred IP (ejemplo: 192.168.1.0/24), [etiqueta predeterminada](#default-tags) o * (para todas las direcciones).</span><span class="sxs-lookup"><span data-stu-id="6774d-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="6774d-173">Considere el uso de intervalos, las etiquetas predeterminadas, y * número de hello tooreduce de reglas.</span><span class="sxs-lookup"><span data-stu-id="6774d-173">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="6774d-174">**Prefijo de dirección de destino**</span><span class="sxs-lookup"><span data-stu-id="6774d-174">**Destination address prefix**</span></span> |<span data-ttu-id="6774d-175">Destino dirección prefijo o etiqueta toomatch de regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-175">Destination address prefix or tag toomatch for hello rule.</span></span> | <span data-ttu-id="6774d-176">Dirección IP única (ejemplo: 10.10.10.10), subred IP (ejemplo: 192.168.1.0/24), [etiqueta predeterminada](#default-tags) o * (para todas las direcciones).</span><span class="sxs-lookup"><span data-stu-id="6774d-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="6774d-177">Considere el uso de intervalos, las etiquetas predeterminadas, y * número de hello tooreduce de reglas.</span><span class="sxs-lookup"><span data-stu-id="6774d-177">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="6774d-178">**Dirección**</span><span class="sxs-lookup"><span data-stu-id="6774d-178">**Direction**</span></span> |<span data-ttu-id="6774d-179">Dirección del tráfico toomatch de regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-179">Direction of traffic toomatch for hello rule.</span></span> |<span data-ttu-id="6774d-180">De entrada o de salida.</span><span class="sxs-lookup"><span data-stu-id="6774d-180">Inbound or outbound.</span></span> |<span data-ttu-id="6774d-181">Las reglas de entrada y de salida se procesan por separado, en función de la dirección.</span><span class="sxs-lookup"><span data-stu-id="6774d-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="6774d-182">**Prioridad**</span><span class="sxs-lookup"><span data-stu-id="6774d-182">**Priority**</span></span> |<span data-ttu-id="6774d-183">Se comprueban las reglas en orden de Hola de prioridad.</span><span class="sxs-lookup"><span data-stu-id="6774d-183">Rules are checked in hello order of priority.</span></span> <span data-ttu-id="6774d-184">Una vez que se aplica una regla, no se comprueba si las demás coinciden.</span><span class="sxs-lookup"><span data-stu-id="6774d-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="6774d-185">Número entre 100 y 4096.</span><span class="sxs-lookup"><span data-stu-id="6774d-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="6774d-186">Considere la posibilidad de crear reglas de salto prioridades por 100 por cada espacio de tooleave de regla para las nuevas reglas que puede crear en hello futuras.</span><span class="sxs-lookup"><span data-stu-id="6774d-186">Consider creating rules jumping priorities by 100 for each rule tooleave space for new rules you might create in hello future.</span></span> |
| <span data-ttu-id="6774d-187">**Access**</span><span class="sxs-lookup"><span data-stu-id="6774d-187">**Access**</span></span> |<span data-ttu-id="6774d-188">Tipo de acceso tooapply si coincide con la regla de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-188">Type of access tooapply if hello rule matches.</span></span> | <span data-ttu-id="6774d-189">Permítalo o deniéguelo.</span><span class="sxs-lookup"><span data-stu-id="6774d-189">Allow or deny.</span></span> | <span data-ttu-id="6774d-190">Tenga en cuenta que si no se encuentra una regla de permiso para un paquete, paquete de saludo se quita.</span><span class="sxs-lookup"><span data-stu-id="6774d-190">Keep in mind that if an allow rule is not found for a packet, hello packet is dropped.</span></span> |

<span data-ttu-id="6774d-191">Los grupos de seguridad de red contienen dos tipos de reglas: de entrada y de salida.</span><span class="sxs-lookup"><span data-stu-id="6774d-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="6774d-192">prioridad de Hola para una regla debe ser único dentro de cada conjunto.</span><span class="sxs-lookup"><span data-stu-id="6774d-192">hello priority for a rule must be unique within each set.</span></span> 

![Procesamiento de reglas de NSG](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="6774d-194">imagen de Hello anterior muestra cómo se procesan las reglas NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-194">hello previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="6774d-195">Etiquetas predeterminadas</span><span class="sxs-lookup"><span data-stu-id="6774d-195">Default Tags</span></span>
<span data-ttu-id="6774d-196">Etiquetas predeterminadas son identificadores proporcionados por el sistema tooaddress una categoría de direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="6774d-196">Default tags are system-provided identifiers tooaddress a category of IP addresses.</span></span> <span data-ttu-id="6774d-197">Puede utilizar las etiquetas predeterminadas en hello **prefijo de dirección de origen** y **prefijo de dirección de destino** propiedades de cualquier regla.</span><span class="sxs-lookup"><span data-stu-id="6774d-197">You can use default tags in hello **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="6774d-198">Hay tres etiquetas predeterminadas que puede utilizar:</span><span class="sxs-lookup"><span data-stu-id="6774d-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="6774d-199">**VirtualNetwork** (Administrador de recursos) (**VIRTUAL_NETWORK** para clásico): esta etiqueta incluye el espacio de direcciones de red virtual de hello (intervalos CIDR definidos en Azure), todos conectados espacios de direcciones local y conectado Redes virtuales Azure (redes locales).</span><span class="sxs-lookup"><span data-stu-id="6774d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes hello virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="6774d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** para el modelo clásico): esta etiqueta denota el equilibrador de carga de la infraestructura de Azure.</span><span class="sxs-lookup"><span data-stu-id="6774d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="6774d-201">etiqueta de Hello traduce tooan IP de centro de datos Azure comprobaciones de mantenimiento de Azure donde se originan.</span><span class="sxs-lookup"><span data-stu-id="6774d-201">hello tag translates tooan Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="6774d-202">**Internet** (Administrador de recursos) (**INTERNET** para clásico): esta etiqueta denota el espacio de direcciones IP de Hola que está fuera de la red virtual de Hola y es accesible por Internet pública.</span><span class="sxs-lookup"><span data-stu-id="6774d-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes hello IP address space that is outside hello virtual network and reachable by public Internet.</span></span> <span data-ttu-id="6774d-203">intervalo de Hello incluye hello [Azure propiedad espacio de IP públicas](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="6774d-203">hello range includes hello [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="6774d-204">Reglas predeterminadas</span><span class="sxs-lookup"><span data-stu-id="6774d-204">Default rules</span></span>
<span data-ttu-id="6774d-205">Todos los grupos de seguridad de red contienen un conjunto de reglas predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="6774d-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="6774d-206">no se puede eliminar las reglas predeterminadas de Hello, pero dado que se asignan prioridad más baja de hello, pueden reemplazarse por reglas de Hola que cree.</span><span class="sxs-lookup"><span data-stu-id="6774d-206">hello default rules cannot be deleted, but because they are assigned hello lowest priority, they can be overridden by hello rules that you create.</span></span> 

<span data-ttu-id="6774d-207">las reglas predeterminadas de Hello permiten y denegar el tráfico como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="6774d-207">hello default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="6774d-208">**Red virtual:** el tráfico que se origina y termina en una red virtual se permite en las direcciones tanto de entrada como de salida.</span><span class="sxs-lookup"><span data-stu-id="6774d-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="6774d-209">**Internet:** se permite el tráfico saliente, pero se bloquea el entrante.</span><span class="sxs-lookup"><span data-stu-id="6774d-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="6774d-210">**El equilibrador de carga:** estado hello tooprobe de equilibrador de carga de Azure permiten de las máquinas virtuales y las instancias de rol.</span><span class="sxs-lookup"><span data-stu-id="6774d-210">**Load balancer:** Allow Azure’s load balancer tooprobe hello health of your VMs and role instances.</span></span> <span data-ttu-id="6774d-211">Si no va a usar un conjunto con equilibrio de carga, puede invalidar esta regla.</span><span class="sxs-lookup"><span data-stu-id="6774d-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="6774d-212">**Reglas predeterminadas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-212">**Inbound default rules**</span></span>

| <span data-ttu-id="6774d-213">Nombre</span><span class="sxs-lookup"><span data-stu-id="6774d-213">Name</span></span> | <span data-ttu-id="6774d-214">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-214">Priority</span></span> | <span data-ttu-id="6774d-215">IP de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-215">Source IP</span></span> | <span data-ttu-id="6774d-216">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-216">Source Port</span></span> | <span data-ttu-id="6774d-217">IP de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-217">Destination IP</span></span> | <span data-ttu-id="6774d-218">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-218">Destination Port</span></span> | <span data-ttu-id="6774d-219">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-219">Protocol</span></span> | <span data-ttu-id="6774d-220">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="6774d-221">AllowVNetInBound</span></span> |<span data-ttu-id="6774d-222">65000</span><span class="sxs-lookup"><span data-stu-id="6774d-222">65000</span></span> | <span data-ttu-id="6774d-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="6774d-223">VirtualNetwork</span></span> | * | <span data-ttu-id="6774d-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="6774d-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="6774d-225">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-225">Allow</span></span> |
| <span data-ttu-id="6774d-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="6774d-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="6774d-227">65001</span><span class="sxs-lookup"><span data-stu-id="6774d-227">65001</span></span> | <span data-ttu-id="6774d-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="6774d-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="6774d-229">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-229">Allow</span></span> |
| <span data-ttu-id="6774d-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="6774d-230">DenyAllInBound</span></span> |<span data-ttu-id="6774d-231">65500</span><span class="sxs-lookup"><span data-stu-id="6774d-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="6774d-232">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-232">Deny</span></span> |

<span data-ttu-id="6774d-233">**Reglas predeterminadas de salida**</span><span class="sxs-lookup"><span data-stu-id="6774d-233">**Outbound default rules**</span></span>

| <span data-ttu-id="6774d-234">Nombre</span><span class="sxs-lookup"><span data-stu-id="6774d-234">Name</span></span> | <span data-ttu-id="6774d-235">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-235">Priority</span></span> | <span data-ttu-id="6774d-236">IP de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-236">Source IP</span></span> | <span data-ttu-id="6774d-237">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-237">Source Port</span></span> | <span data-ttu-id="6774d-238">IP de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-238">Destination IP</span></span> | <span data-ttu-id="6774d-239">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-239">Destination Port</span></span> | <span data-ttu-id="6774d-240">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-240">Protocol</span></span> | <span data-ttu-id="6774d-241">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="6774d-242">AllowVnetOutBound</span></span> | <span data-ttu-id="6774d-243">65000</span><span class="sxs-lookup"><span data-stu-id="6774d-243">65000</span></span> | <span data-ttu-id="6774d-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="6774d-244">VirtualNetwork</span></span> | * | <span data-ttu-id="6774d-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="6774d-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="6774d-246">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-246">Allow</span></span> |
| <span data-ttu-id="6774d-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="6774d-247">AllowInternetOutBound</span></span> | <span data-ttu-id="6774d-248">65001</span><span class="sxs-lookup"><span data-stu-id="6774d-248">65001</span></span> | * | * | <span data-ttu-id="6774d-249">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-249">Internet</span></span> | * | * | <span data-ttu-id="6774d-250">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-250">Allow</span></span> |
| <span data-ttu-id="6774d-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="6774d-251">DenyAllOutBound</span></span> | <span data-ttu-id="6774d-252">65500</span><span class="sxs-lookup"><span data-stu-id="6774d-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="6774d-253">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="6774d-254">Asociación de grupos de seguridad de red </span><span class="sxs-lookup"><span data-stu-id="6774d-254">Associating NSGs</span></span>
<span data-ttu-id="6774d-255">Puede asociar un NSG tooVMs, NIC y subredes, según el modelo de implementación de hello que usa, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="6774d-255">You can associate an NSG tooVMs, NICs, and subnets, depending on hello deployment model you are using, as follows:</span></span>

* <span data-ttu-id="6774d-256">**Máquina virtual (solo clásico):** se aplican las reglas de seguridad tooall tráfico hacia y desde Hola VM.</span><span class="sxs-lookup"><span data-stu-id="6774d-256">**VM (classic only):** Security rules are applied tooall traffic to/from hello VM.</span></span> 
* <span data-ttu-id="6774d-257">**NIC (solo el Administrador de recursos):** se aplican las reglas de seguridad tooall tráfico hacia y desde Hola Hola NIC NSG está asociado a.</span><span class="sxs-lookup"><span data-stu-id="6774d-257">**NIC (Resource Manager only):** Security rules are applied tooall traffic to/from hello NIC hello NSG is associated to.</span></span> <span data-ttu-id="6774d-258">En una VM de varias NIC, puede aplicar diferentes (u Hola igual) NSG tooeach NIC individualmente.</span><span class="sxs-lookup"><span data-stu-id="6774d-258">In a multi-NIC VM, you can apply different (or hello same) NSG tooeach NIC individually.</span></span> 
* <span data-ttu-id="6774d-259">**Subred (Administrador de recursos y clásico):** se aplican las reglas de seguridad tooany tráfico hacia y desde los recursos conectado toohello red virtual.</span><span class="sxs-lookup"><span data-stu-id="6774d-259">**Subnet (Resource Manager and classic):** Security rules are applied tooany traffic to/from any resources connected toohello VNet.</span></span>

<span data-ttu-id="6774d-260">Puede asociar diferentes NSG tooa VM (o NIC, según el modelo de implementación de hello) y Hola subred que una NIC o la máquina virtual está conectado a.</span><span class="sxs-lookup"><span data-stu-id="6774d-260">You can associate different NSGs tooa VM (or NIC, depending on hello deployment model) and hello subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="6774d-261">Reglas de seguridad de tráfico de toohello aplicado, por prioridad, en cada NSG, Hola siguientes está orden:</span><span class="sxs-lookup"><span data-stu-id="6774d-261">Security rules are applied toohello traffic, by priority, in each NSG, in hello following order:</span></span>

- <span data-ttu-id="6774d-262">**Tráfico de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="6774d-263">**NSG aplica toosubnet:** si una subred NSG tiene un tráfico de toodeny regla coincidente, se quita el paquete de saludo.</span><span class="sxs-lookup"><span data-stu-id="6774d-263">**NSG applied toosubnet:** If a subnet NSG has a matching rule toodeny traffic, hello packet is dropped.</span></span>

  2. <span data-ttu-id="6774d-264">**NSG aplica tooNIC** (Administrador de recursos) o la máquina virtual (clásica): NSG VM\NIC si tiene una regla de coincidencia que deniega el tráfico, los paquetes se quitan en hello VM\NIC, aun cuando un NSG de subred tiene una regla de coincidencia que permita el tráfico.</span><span class="sxs-lookup"><span data-stu-id="6774d-264">**NSG applied tooNIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at hello VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="6774d-265">**Tráfico de salida**</span><span class="sxs-lookup"><span data-stu-id="6774d-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="6774d-266">**NSG aplica tooNIC** (Administrador de recursos) o la máquina virtual (clásica): si un NSG VM\NIC tiene una regla de coincidencia que deniega el tráfico, se quitan los paquetes.</span><span class="sxs-lookup"><span data-stu-id="6774d-266">**NSG applied tooNIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="6774d-267">**NSG aplica toosubnet:** si una subred NSG tiene una regla de coincidencia que deniega el tráfico, se quitan los paquetes, aun cuando un NSG VM\NIC tiene una regla de coincidencia que permita el tráfico.</span><span class="sxs-lookup"><span data-stu-id="6774d-267">**NSG applied toosubnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="6774d-268">Aunque sólo se puede asociar una única subred tooa NSG, VM o NIC; puede asociar Hola mismo tooas NSG muchos recursos, como desee.</span><span class="sxs-lookup"><span data-stu-id="6774d-268">Although you can only associate a single NSG tooa subnet, VM, or NIC; you can associate hello same NSG tooas many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="6774d-269">Implementación</span><span class="sxs-lookup"><span data-stu-id="6774d-269">Implementation</span></span>
<span data-ttu-id="6774d-270">Puede implementar los NSG de Hola Administrador de recursos o modelos de implementación clásica mediante Hola siguientes herramientas:</span><span class="sxs-lookup"><span data-stu-id="6774d-270">You can implement NSGs in hello Resource Manager or classic deployment models using hello following tools:</span></span>

| <span data-ttu-id="6774d-271">Herramienta de implementación</span><span class="sxs-lookup"><span data-stu-id="6774d-271">Deployment tool</span></span> | <span data-ttu-id="6774d-272">Clásico</span><span class="sxs-lookup"><span data-stu-id="6774d-272">Classic</span></span> | <span data-ttu-id="6774d-273">Resource Manager</span><span class="sxs-lookup"><span data-stu-id="6774d-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6774d-274">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="6774d-274">Azure portal</span></span>   | <span data-ttu-id="6774d-275">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-275">Yes</span></span> | [<span data-ttu-id="6774d-276">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="6774d-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="6774d-277">PowerShell</span></span>     | [<span data-ttu-id="6774d-278">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="6774d-279">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="6774d-280">CLI de Azure **V1**</span><span class="sxs-lookup"><span data-stu-id="6774d-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="6774d-281">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="6774d-282">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="6774d-283">CLI de Azure **V2**</span><span class="sxs-lookup"><span data-stu-id="6774d-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="6774d-284">No</span><span class="sxs-lookup"><span data-stu-id="6774d-284">No</span></span> | [<span data-ttu-id="6774d-285">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="6774d-286">Plantilla del Administrador de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="6774d-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="6774d-287">No</span><span class="sxs-lookup"><span data-stu-id="6774d-287">No</span></span>  | [<span data-ttu-id="6774d-288">Sí</span><span class="sxs-lookup"><span data-stu-id="6774d-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="6774d-289">Planificación</span><span class="sxs-lookup"><span data-stu-id="6774d-289">Planning</span></span>
<span data-ttu-id="6774d-290">Antes de implementar los NSG, necesita hello tooanswer siguientes preguntas:</span><span class="sxs-lookup"><span data-stu-id="6774d-290">Before implementing NSGs, you need tooanswer hello following questions:</span></span>

1. <span data-ttu-id="6774d-291">¿Qué tipos de recursos desea toofilter tráfico tooor de?</span><span class="sxs-lookup"><span data-stu-id="6774d-291">What types of resources do you want toofilter traffic tooor from?</span></span> <span data-ttu-id="6774d-292">Puede conectarse a recursos como interfaces de red (Resource Manager), máquinas virtuales (clásicas), Cloud Services, entornos de servicio de aplicación y conjuntos de escalado de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="6774d-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="6774d-293">¿Son los recursos de hello desea toofilter tráfico hacia/desde toosubnets conectado en redes virtuales existentes?</span><span class="sxs-lookup"><span data-stu-id="6774d-293">Are hello resources you want toofilter traffic to/from connected toosubnets in existing VNets?</span></span>

<span data-ttu-id="6774d-294">Para obtener más información sobre la planeación de seguridad de red en Azure, lea hello [servicios de nube y seguridad de red](../best-practices-network-security.md) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-294">For more information on planning for network security in Azure, read hello [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="6774d-295">Consideraciones de diseño</span><span class="sxs-lookup"><span data-stu-id="6774d-295">Design considerations</span></span>
<span data-ttu-id="6774d-296">Una vez que sepa respuestas hello toohello preguntas en hello [planificación](#Planning) sección, revise hello las secciones siguientes antes de definir sus NSG:</span><span class="sxs-lookup"><span data-stu-id="6774d-296">Once you know hello answers toohello questions in hello [Planning](#Planning) section, review hello following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="6774d-297">límites</span><span class="sxs-lookup"><span data-stu-id="6774d-297">Limits</span></span>
<span data-ttu-id="6774d-298">Hay límites de número de toohello de NSG puede tener en una suscripción y el número de reglas por NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-298">There are limits toohello number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="6774d-299">toolearn más acerca de los límites de hello, leer hello [Azure tiene una limitación](../azure-subscription-service-limits.md#networking-limits) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-299">toolearn more about hello limits, read hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="6774d-300">Diseño de red virtual y subred</span><span class="sxs-lookup"><span data-stu-id="6774d-300">VNet and subnet design</span></span>
<span data-ttu-id="6774d-301">Puesto que los NSG pueden ser toosubnets aplicado, se puede minimizar el número de Hola de NSG agrupar los recursos de subred, y aplicando los NSG toosubnets.</span><span class="sxs-lookup"><span data-stu-id="6774d-301">Since NSGs can be applied toosubnets, you can minimize hello number of NSGs by grouping your resources by subnet, and applying NSGs toosubnets.</span></span>  <span data-ttu-id="6774d-302">Si decide tooapply NSG toosubnets, es posible que redes virtuales existentes y las subredes que tiene no se definieron con NSG en mente.</span><span class="sxs-lookup"><span data-stu-id="6774d-302">If you decide tooapply NSGs toosubnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="6774d-303">Puede necesita toodefine toosupport de redes virtuales y subredes de nuevo el diseño NSG e implementar las nuevos recursos tooyour nuevas subredes.</span><span class="sxs-lookup"><span data-stu-id="6774d-303">You may need toodefine new VNets and subnets toosupport your NSG design and deploy your new resources tooyour new subnets.</span></span> <span data-ttu-id="6774d-304">A continuación, podría definir una toomove de estrategia de migración existente toohello nuevas subredes de recursos.</span><span class="sxs-lookup"><span data-stu-id="6774d-304">You could then define a migration strategy toomove existing resources toohello new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="6774d-305">Reglas especiales</span><span class="sxs-lookup"><span data-stu-id="6774d-305">Special rules</span></span>
<span data-ttu-id="6774d-306">Si bloquea el tráfico permitido por hello siguiendo las reglas, la infraestructura no puede comunicarse con servicios esenciales de Azure:</span><span class="sxs-lookup"><span data-stu-id="6774d-306">If you block traffic allowed by hello following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="6774d-307">**Dirección IP virtual del nodo de host de hello:** servicios de infraestructura básica, como DHCP, DNS y supervisión de estado se proporcionan a través del host virtualizado Hola dirección IP 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="6774d-307">**Virtual IP of hello host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through hello virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="6774d-308">Esta dirección IP pública pertenece tooMicrosoft y es Hola única dirección IP virtualizada utilizado en todas las regiones para este propósito.</span><span class="sxs-lookup"><span data-stu-id="6774d-308">This public IP address belongs tooMicrosoft and is hello only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="6774d-309">Esta dirección IP asigna toohello dirección IP física del equipo del servidor hello (nodo de host) Hola VM de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="6774d-309">This IP address maps toohello physical IP address of hello server machine (host node) hosting hello VM.</span></span> <span data-ttu-id="6774d-310">nodo de host de Hello actúa como retransmisión DHCP de hello, resolución recursiva de DNS de Hola y origen de sondeo de Hola para hello cargan sondeo del equilibrador de mantenimiento y sondeo de estado de máquina de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-310">hello host node acts as hello DHCP relay, hello DNS recursive resolver, and hello probe source for hello load balancer health probe and hello machine health probe.</span></span> <span data-ttu-id="6774d-311">Dirección IP de toothis de comunicación no es un ataque.</span><span class="sxs-lookup"><span data-stu-id="6774d-311">Communication toothis IP address is not an attack.</span></span>
* <span data-ttu-id="6774d-312">**Licencias (Servicio de administración de claves):** las imágenes de Windows que se ejecutan en máquinas virtuales deben contar con licencia.</span><span class="sxs-lookup"><span data-stu-id="6774d-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="6774d-313">tooensure licencias, una solicitud se envía a servidores de host de servicio de administración de claves de toohello que administran dichas consultas.</span><span class="sxs-lookup"><span data-stu-id="6774d-313">tooensure licensing, a request is sent toohello Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="6774d-314">Hola se solicita saliente a través del puerto 1688.</span><span class="sxs-lookup"><span data-stu-id="6774d-314">hello request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="6774d-315">Tráfico ICMP</span><span class="sxs-lookup"><span data-stu-id="6774d-315">ICMP traffic</span></span>
<span data-ttu-id="6774d-316">reglas Hola actuales del NSG solo permiten los protocolos *TCP* o *UDP*.</span><span class="sxs-lookup"><span data-stu-id="6774d-316">hello current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="6774d-317">No hay una etiqueta específica para *ICMP*.</span><span class="sxs-lookup"><span data-stu-id="6774d-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="6774d-318">Sin embargo, se permite el tráfico ICMP dentro de una red virtual ninguna regla de hello AllowVNetInBound predeterminado, que permite tooand de tráfico de cualquier puerto y protocolo de red virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-318">However, ICMP traffic is allowed within a VNet by hello AllowVNetInBound default rule, that allows traffic tooand from any port and protocol within hello VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="6774d-319">Subredes</span><span class="sxs-lookup"><span data-stu-id="6774d-319">Subnets</span></span>
* <span data-ttu-id="6774d-320">Tenga en cuenta el número de Hola de niveles que requiere la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6774d-320">Consider hello number of tiers your workload requires.</span></span> <span data-ttu-id="6774d-321">Cada nivel se pueden aislar mediante el uso de una subred, con una subred de toohello NSG aplica.</span><span class="sxs-lookup"><span data-stu-id="6774d-321">Each tier can be isolated by using a subnet, with an NSG applied toohello subnet.</span></span> 
* <span data-ttu-id="6774d-322">Si necesita tooimplement una subred de puerta de enlace VPN o de circuito de ExpressRoute, **no** una subred de toothat NSG se aplican.</span><span class="sxs-lookup"><span data-stu-id="6774d-322">If you need tooimplement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG toothat subnet.</span></span> <span data-ttu-id="6774d-323">Si lo hace, es posible que la conectividad entre entornos locales o entre redes virtuales no funcione.</span><span class="sxs-lookup"><span data-stu-id="6774d-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="6774d-324">Si necesita un dispositivo de red virtual (NVA) tooimplement, conectar propia subred de hello NVA tooits y crear rutas definidas por el usuario (UDR) tooand de hello NVA.</span><span class="sxs-lookup"><span data-stu-id="6774d-324">If you need tooimplement a network virtual appliance (NVA), connect hello NVA tooits own subnet and create user-defined routes (UDR) tooand from hello NVA.</span></span> <span data-ttu-id="6774d-325">Puede implementar un nivel de subred tráfico de toofilter NSG dentro y fuera de esta subred.</span><span class="sxs-lookup"><span data-stu-id="6774d-325">You can implement a subnet level NSG toofilter traffic in and out of this subnet.</span></span> <span data-ttu-id="6774d-326">más información acerca de UDRs, leer hello toolearn [rutas definidas por el usuario](virtual-networks-udr-overview.md) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-326">toolearn more about UDRs, read hello [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="6774d-327">Equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="6774d-327">Load balancers</span></span>
* <span data-ttu-id="6774d-328">Considere la posibilidad de dirección de red y el equilibrio de carga de hello las reglas de conversión (NAT) para cada equilibrador de carga utilizados por cada una de las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6774d-328">Consider hello load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="6774d-329">Las reglas NAT son grupo back-end de tooa enlazado que contiene instancias de rol de servicios en la nube y máquinas virtuales (clásicas) o NICs (Administrador de recursos).</span><span class="sxs-lookup"><span data-stu-id="6774d-329">NAT rules are bound tooa back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="6774d-330">Considere la posibilidad de crear un NSG para cada grupo back-end, lo que permite solo el tráfico asignado a través de reglas de hello implementadas en los equilibradores de carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through hello rules implemented in hello load balancers.</span></span> <span data-ttu-id="6774d-331">Crear un NSG para cada grupo back-end, se garantiza que el tráfico que llegue grupo back-end de toohello directamente (en lugar de a través del equilibrador de carga de hello), también se filtra.</span><span class="sxs-lookup"><span data-stu-id="6774d-331">Creating an NSG for each back-end pool guarantees that traffic coming toohello back-end pool directly (rather than through hello load balancer), is also filtered.</span></span>
* <span data-ttu-id="6774d-332">En las implementaciones de clásicas, cree los extremos que se asignan los puertos en un tooports de equilibrador de carga en sus máquinas virtuales o instancias de rol.</span><span class="sxs-lookup"><span data-stu-id="6774d-332">In classic deployments, you create endpoints that map ports on a load balancer tooports on your VMs or role instances.</span></span> <span data-ttu-id="6774d-333">También puede crear su propio equilibrador de carga de acceso público individual mediante Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6774d-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="6774d-334">puerto de destino de Hello para el tráfico entrante es el puerto real de Hola Hola máquina virtual o instancia de rol, no es puerto Hola expuesto por un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="6774d-334">hello destination port for incoming traffic is hello actual port in hello VM or role instance, not hello port exposed by a load balancer.</span></span> <span data-ttu-id="6774d-335">puerto de origen de Hola y dirección Hola conexión toohello en que VM es un puerto y dirección Hola equipo remoto en hello Internet, no el puerto de Hola y la dirección expuestos por el equilibrador de carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-335">hello source port and address for hello connection toohello VM is a port and address on hello remote computer in hello Internet, not hello port and address exposed by hello load balancer.</span></span>
* <span data-ttu-id="6774d-336">Cuando se crea el tráfico de toofilter NSG que llegue a través de un equilibrador de carga interno (ILB), intervalo de puerto y la dirección de la fuente de hello aplica provienen de Hola, equipo, no el equilibrador de carga Hola de origen.</span><span class="sxs-lookup"><span data-stu-id="6774d-336">When you create NSGs toofilter traffic coming through an internal load balancer (ILB), hello source port and address range applied are  from hello originating computer, not hello load balancer.</span></span> <span data-ttu-id="6774d-337">intervalo de puerto y la dirección de destino de Hello son aquellos Hola equipo de destino, no el equilibrador de carga Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-337">hello destination port and address range are those of hello destination computer, not hello load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="6774d-338">Otros</span><span class="sxs-lookup"><span data-stu-id="6774d-338">Other</span></span>
* <span data-ttu-id="6774d-339">Listas de control de punto de conexión de acceso (ACL) y los NSG no se admiten en hello misma instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="6774d-339">Endpoint-based access control lists (ACL) and NSGs are not supported on hello same VM instance.</span></span> <span data-ttu-id="6774d-340">Si desea toouse un NSG y tiene un punto de conexión ACL ya en su lugar, primero quite el extremo de hello ACL.</span><span class="sxs-lookup"><span data-stu-id="6774d-340">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="6774d-341">Para obtener información acerca de cómo tooremove un extremo ACL, vea hello [administrar las ACL de extremo](virtual-networks-acl-powershell.md) artículo.</span><span class="sxs-lookup"><span data-stu-id="6774d-341">For information about how tooremove an endpoint ACL, see hello [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="6774d-342">En el Administrador de recursos, puede usar un tooa NSG asociado NIC para las máquinas virtuales con varias NIC tooenable administración (acceso remoto) en una base por cada NIC.</span><span class="sxs-lookup"><span data-stu-id="6774d-342">In Resource Manager, you can use an NSG associated tooa NIC for VMs with multiple NICs tooenable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="6774d-343">Asociar único NSG tooeach NIC permite la separación de tipos de tráfico a través de la NIC.</span><span class="sxs-lookup"><span data-stu-id="6774d-343">Associating unique NSGs tooeach NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="6774d-344">Use toohello similar de equilibradores de carga, cuando se filtran el tráfico de otras redes virtuales, debe usar el intervalo de direcciones de origen Hola del equipo remoto hello, no Hola puerta de enlace de conexión Hola redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="6774d-344">Similar toohello use of load balancers, when filtering traffic from other VNets, you must use hello source address range of hello remote computer, not hello gateway connecting hello VNets.</span></span>
* <span data-ttu-id="6774d-345">Muchos servicios de Azure no pueden ser tooVNets conectado.</span><span class="sxs-lookup"><span data-stu-id="6774d-345">Many Azure services cannot be connected tooVNets.</span></span> <span data-ttu-id="6774d-346">Si un recurso de Azure no está conectado tooa red virtual, no puede usar un recurso de toohello NSG toofilter tráfico.</span><span class="sxs-lookup"><span data-stu-id="6774d-346">If an Azure resource is not connected tooa VNet, you cannot use an NSG toofilter traffic toohello resource.</span></span>  <span data-ttu-id="6774d-347">Leer documentación de Hola para los servicios de hello utilizarás toodetermine si el servicio de hello puede estar conectado tooa red virtual.</span><span class="sxs-lookup"><span data-stu-id="6774d-347">Read hello documentation for hello services you use toodetermine whether hello service can be connected tooa VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="6774d-348">Ejemplo de implementación</span><span class="sxs-lookup"><span data-stu-id="6774d-348">Sample deployment</span></span>
<span data-ttu-id="6774d-349">aplicación de hello tooillustrate de información de hello en este artículo, considere un escenario común de una aplicación de dos niveles se muestra en hello después de imagen:</span><span class="sxs-lookup"><span data-stu-id="6774d-349">tooillustrate hello application of hello information in this article, consider a common scenario of a two tier application shown in hello following picture:</span></span>

![Grupos de seguridad de red](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="6774d-351">Como se muestra en el diagrama de hello, Hola *Web1* y *Web2* máquinas virtuales están conectada toohello *front-end* hello y subred *DB1* y *DB2* máquinas virtuales están conectada toohello *back-end* subred.</span><span class="sxs-lookup"><span data-stu-id="6774d-351">As shown in hello diagram, hello *Web1* and *Web2* VMs are connected toohello *FrontEnd* subnet, and hello *DB1* and *DB2* VMs are connected toohello *BackEnd* subnet.</span></span>  <span data-ttu-id="6774d-352">Ambas subredes forman parte del programa Hola a *TestVNet* red virtual.</span><span class="sxs-lookup"><span data-stu-id="6774d-352">Both subnets are part of hello *TestVNet* VNet.</span></span> <span data-ttu-id="6774d-353">componentes de aplicación de Hello cada ejecutarán dentro de una red virtual de máquina virtual de Azure conectada tooa.</span><span class="sxs-lookup"><span data-stu-id="6774d-353">hello application components each run within an Azure VM connected tooa VNet.</span></span> <span data-ttu-id="6774d-354">escenario de Hello tiene Hola según los requisitos:</span><span class="sxs-lookup"><span data-stu-id="6774d-354">hello scenario has hello following requirements:</span></span>

1. <span data-ttu-id="6774d-355">Separación del tráfico entre hello WEB y servidores de base de datos.</span><span class="sxs-lookup"><span data-stu-id="6774d-355">Separation of traffic between hello WEB and DB servers.</span></span>
2. <span data-ttu-id="6774d-356">Reenvíe el tráfico de servidores web tooall de equilibrador de carga de hello en el puerto 80 reglas de equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="6774d-356">Load balancing rules forward traffic from hello load balancer tooall web servers on port 80.</span></span>
3. <span data-ttu-id="6774d-357">La carga del tráfico de reenvíos equilibrador NAT reglas entran equilibrador de carga de hello en tooport 50001 puerto 3389 en hello VM WEB1.</span><span class="sxs-lookup"><span data-stu-id="6774d-357">Load balancer NAT rules forward traffic coming into hello load balancer on port 50001 tooport 3389 on hello WEB1 VM.</span></span>
4. <span data-ttu-id="6774d-358">Ningún acceso toohello máquinas virtuales de front-end o back-end de hello Internet, excepto los requisitos de 2 y 3.</span><span class="sxs-lookup"><span data-stu-id="6774d-358">No access toohello front-end or back-end VMs from hello Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="6774d-359">Sin el acceso a Internet de servidores WEB o de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-359">No outbound Internet access from hello WEB or DB servers.</span></span>
6. <span data-ttu-id="6774d-360">Se permite el acceso de la subred de front-end de hello tooport 3389 de cualquier servidor web.</span><span class="sxs-lookup"><span data-stu-id="6774d-360">Access from hello FrontEnd subnet is allowed tooport 3389 of any web server.</span></span>
7. <span data-ttu-id="6774d-361">Se permite el acceso de la subred de front-end de hello tooport 3389 de cualquier servidor de base de datos.</span><span class="sxs-lookup"><span data-stu-id="6774d-361">Access from hello FrontEnd subnet is allowed tooport 3389 of any DB server.</span></span>
8. <span data-ttu-id="6774d-362">Se permite el acceso de la subred de front-end de hello tooport 1433 de todos los servidores de base de datos.</span><span class="sxs-lookup"><span data-stu-id="6774d-362">Access from hello FrontEnd subnet is allowed tooport 1433 of all DB servers.</span></span>
9. <span data-ttu-id="6774d-363">Separación del tráfico de administración (puerto 3389) y el de base de datos (1433) en diferentes interfaces de red en servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="6774d-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="6774d-364">Requisitos de 1 a 6 (excepto los requerimientos 3 y 4) son todos los espacios toosubnet reducidos.</span><span class="sxs-lookup"><span data-stu-id="6774d-364">Requirements 1-6 (except requirements 3 and 4) are all confined toosubnet spaces.</span></span> <span data-ttu-id="6774d-365">Hello NSG siguientes sus requisitos Hola anterior, y reduce su número de Hola de NSG requerido:</span><span class="sxs-lookup"><span data-stu-id="6774d-365">hello following NSGs meet hello previous requirements, while minimizing hello number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="6774d-366">FrontEnd</span><span class="sxs-lookup"><span data-stu-id="6774d-366">FrontEnd</span></span>
<span data-ttu-id="6774d-367">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-367">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-368">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-368">Rule</span></span> | <span data-ttu-id="6774d-369">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-369">Access</span></span> | <span data-ttu-id="6774d-370">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-370">Priority</span></span> | <span data-ttu-id="6774d-371">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-371">Source address range</span></span> | <span data-ttu-id="6774d-372">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-372">Source port</span></span> | <span data-ttu-id="6774d-373">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-373">Destination address range</span></span> | <span data-ttu-id="6774d-374">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-374">Destination port</span></span> | <span data-ttu-id="6774d-375">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-376">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="6774d-377">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-377">Allow</span></span> | <span data-ttu-id="6774d-378">100</span><span class="sxs-lookup"><span data-stu-id="6774d-378">100</span></span> | <span data-ttu-id="6774d-379">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-379">Internet</span></span> | * | * | <span data-ttu-id="6774d-380">80</span><span class="sxs-lookup"><span data-stu-id="6774d-380">80</span></span> | <span data-ttu-id="6774d-381">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-381">TCP</span></span> |
| <span data-ttu-id="6774d-382">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="6774d-383">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-383">Allow</span></span> | <span data-ttu-id="6774d-384">200</span><span class="sxs-lookup"><span data-stu-id="6774d-384">200</span></span> | <span data-ttu-id="6774d-385">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-385">Internet</span></span> | * | * | <span data-ttu-id="6774d-386">3389</span><span class="sxs-lookup"><span data-stu-id="6774d-386">3389</span></span> | <span data-ttu-id="6774d-387">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-387">TCP</span></span> |
| <span data-ttu-id="6774d-388">Deny-Inbound-All</span><span class="sxs-lookup"><span data-stu-id="6774d-388">Deny-Inbound-All</span></span> | <span data-ttu-id="6774d-389">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-389">Deny</span></span> | <span data-ttu-id="6774d-390">300</span><span class="sxs-lookup"><span data-stu-id="6774d-390">300</span></span> | <span data-ttu-id="6774d-391">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-391">Internet</span></span> | * | * | * | <span data-ttu-id="6774d-392">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-392">TCP</span></span> |

<span data-ttu-id="6774d-393">**Reglas de salida**</span><span class="sxs-lookup"><span data-stu-id="6774d-393">**Outbound rules**</span></span>

| <span data-ttu-id="6774d-394">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-394">Rule</span></span> | <span data-ttu-id="6774d-395">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-395">Access</span></span> | <span data-ttu-id="6774d-396">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-396">Priority</span></span> | <span data-ttu-id="6774d-397">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-397">Source address range</span></span> | <span data-ttu-id="6774d-398">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-398">Source port</span></span> | <span data-ttu-id="6774d-399">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-399">Destination address range</span></span> | <span data-ttu-id="6774d-400">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-400">Destination port</span></span> | <span data-ttu-id="6774d-401">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-402">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="6774d-402">Deny-Internet-All</span></span> |<span data-ttu-id="6774d-403">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-403">Deny</span></span> |<span data-ttu-id="6774d-404">100</span><span class="sxs-lookup"><span data-stu-id="6774d-404">100</span></span> | * | * | <span data-ttu-id="6774d-405">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="6774d-406">BackEnd</span><span class="sxs-lookup"><span data-stu-id="6774d-406">BackEnd</span></span>
<span data-ttu-id="6774d-407">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-407">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-408">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-408">Rule</span></span> | <span data-ttu-id="6774d-409">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-409">Access</span></span> | <span data-ttu-id="6774d-410">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-410">Priority</span></span> | <span data-ttu-id="6774d-411">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-411">Source address range</span></span> | <span data-ttu-id="6774d-412">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-412">Source port</span></span> | <span data-ttu-id="6774d-413">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-413">Destination address range</span></span> | <span data-ttu-id="6774d-414">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-414">Destination port</span></span> | <span data-ttu-id="6774d-415">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-416">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="6774d-416">Deny-Internet-All</span></span> | <span data-ttu-id="6774d-417">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-417">Deny</span></span> | <span data-ttu-id="6774d-418">100</span><span class="sxs-lookup"><span data-stu-id="6774d-418">100</span></span> | <span data-ttu-id="6774d-419">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="6774d-420">**Reglas de salida**</span><span class="sxs-lookup"><span data-stu-id="6774d-420">**Outbound rules**</span></span>

| <span data-ttu-id="6774d-421">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-421">Rule</span></span> | <span data-ttu-id="6774d-422">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-422">Access</span></span> | <span data-ttu-id="6774d-423">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-423">Priority</span></span> | <span data-ttu-id="6774d-424">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-424">Source address range</span></span> | <span data-ttu-id="6774d-425">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-425">Source port</span></span> | <span data-ttu-id="6774d-426">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-426">Destination address range</span></span> | <span data-ttu-id="6774d-427">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-427">Destination port</span></span> | <span data-ttu-id="6774d-428">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-429">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="6774d-429">Deny-Internet-All</span></span> | <span data-ttu-id="6774d-430">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-430">Deny</span></span> | <span data-ttu-id="6774d-431">100</span><span class="sxs-lookup"><span data-stu-id="6774d-431">100</span></span> | * | * | <span data-ttu-id="6774d-432">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-432">Internet</span></span> | * | * |

<span data-ttu-id="6774d-433">Hola NSG siguientes se crean y asociados tooNICs Hola después de las máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="6774d-433">hello following NSGs are created and associated tooNICs in hello following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="6774d-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="6774d-434">WEB1</span></span>
<span data-ttu-id="6774d-435">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-435">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-436">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-436">Rule</span></span> | <span data-ttu-id="6774d-437">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-437">Access</span></span> | <span data-ttu-id="6774d-438">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-438">Priority</span></span> | <span data-ttu-id="6774d-439">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-439">Source address range</span></span> | <span data-ttu-id="6774d-440">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-440">Source port</span></span> | <span data-ttu-id="6774d-441">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-441">Destination address range</span></span> | <span data-ttu-id="6774d-442">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-442">Destination port</span></span> | <span data-ttu-id="6774d-443">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-444">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="6774d-445">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-445">Allow</span></span> | <span data-ttu-id="6774d-446">100</span><span class="sxs-lookup"><span data-stu-id="6774d-446">100</span></span> | <span data-ttu-id="6774d-447">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-447">Internet</span></span> | * | * | <span data-ttu-id="6774d-448">3389</span><span class="sxs-lookup"><span data-stu-id="6774d-448">3389</span></span> | <span data-ttu-id="6774d-449">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-449">TCP</span></span> |
| <span data-ttu-id="6774d-450">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="6774d-451">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-451">Allow</span></span> | <span data-ttu-id="6774d-452">200</span><span class="sxs-lookup"><span data-stu-id="6774d-452">200</span></span> | <span data-ttu-id="6774d-453">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-453">Internet</span></span> | * | * | <span data-ttu-id="6774d-454">80</span><span class="sxs-lookup"><span data-stu-id="6774d-454">80</span></span> | <span data-ttu-id="6774d-455">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="6774d-456">intervalo de direcciones de origen de Hola para las reglas anteriores de hello es **Internet**, no Hola una dirección IP virtual del equilibrador de carga de Hola.</span><span class="sxs-lookup"><span data-stu-id="6774d-456">hello source address range for hello previous rules is **Internet**, not hello virtual IP address of for hello load balancer.</span></span> <span data-ttu-id="6774d-457">puerto de origen de Hello es *, no 500001.</span><span class="sxs-lookup"><span data-stu-id="6774d-457">hello source port is *, not 500001.</span></span> <span data-ttu-id="6774d-458">Las reglas NAT de equilibradores de carga no se Hola igual que las reglas de seguridad NSG.</span><span class="sxs-lookup"><span data-stu-id="6774d-458">NAT rules for load balancers are not hello same as NSG security rules.</span></span> <span data-ttu-id="6774d-459">Las reglas de seguridad NSG son siempre toohello relacionados de origen y destino final de tráfico, **no** equilibrador de carga de hello entre Hola dos.</span><span class="sxs-lookup"><span data-stu-id="6774d-459">NSG security rules are always related toohello original source and final destination of traffic, **not** hello load balancer between hello two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="6774d-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="6774d-460">WEB2</span></span>
<span data-ttu-id="6774d-461">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-461">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-462">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-462">Rule</span></span> | <span data-ttu-id="6774d-463">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-463">Access</span></span> | <span data-ttu-id="6774d-464">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-464">Priority</span></span> | <span data-ttu-id="6774d-465">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-465">Source address range</span></span> | <span data-ttu-id="6774d-466">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-466">Source port</span></span> | <span data-ttu-id="6774d-467">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-467">Destination address range</span></span> | <span data-ttu-id="6774d-468">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-468">Destination port</span></span> | <span data-ttu-id="6774d-469">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-470">Deny-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="6774d-471">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="6774d-471">Deny</span></span> | <span data-ttu-id="6774d-472">100</span><span class="sxs-lookup"><span data-stu-id="6774d-472">100</span></span> | <span data-ttu-id="6774d-473">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-473">Internet</span></span> | * | * | <span data-ttu-id="6774d-474">3389</span><span class="sxs-lookup"><span data-stu-id="6774d-474">3389</span></span> | <span data-ttu-id="6774d-475">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-475">TCP</span></span> |
| <span data-ttu-id="6774d-476">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="6774d-477">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-477">Allow</span></span> | <span data-ttu-id="6774d-478">200</span><span class="sxs-lookup"><span data-stu-id="6774d-478">200</span></span> | <span data-ttu-id="6774d-479">Internet</span><span class="sxs-lookup"><span data-stu-id="6774d-479">Internet</span></span> | * | * | <span data-ttu-id="6774d-480">80</span><span class="sxs-lookup"><span data-stu-id="6774d-480">80</span></span> | <span data-ttu-id="6774d-481">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="6774d-482">Servidores de bases de datos (interfaz de red de administración)</span><span class="sxs-lookup"><span data-stu-id="6774d-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="6774d-483">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-483">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-484">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-484">Rule</span></span> | <span data-ttu-id="6774d-485">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-485">Access</span></span> | <span data-ttu-id="6774d-486">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-486">Priority</span></span> | <span data-ttu-id="6774d-487">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-487">Source address range</span></span> | <span data-ttu-id="6774d-488">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-488">Source port</span></span> | <span data-ttu-id="6774d-489">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-489">Destination address range</span></span> | <span data-ttu-id="6774d-490">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-490">Destination port</span></span> | <span data-ttu-id="6774d-491">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-492">Allow-Inbound-RDP-Front-end</span><span class="sxs-lookup"><span data-stu-id="6774d-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="6774d-493">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-493">Allow</span></span> | <span data-ttu-id="6774d-494">100</span><span class="sxs-lookup"><span data-stu-id="6774d-494">100</span></span> | <span data-ttu-id="6774d-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="6774d-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="6774d-496">3389</span><span class="sxs-lookup"><span data-stu-id="6774d-496">3389</span></span> | <span data-ttu-id="6774d-497">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="6774d-498">Servidores de bases de datos (interfaz de red de tráfico de base de datos)</span><span class="sxs-lookup"><span data-stu-id="6774d-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="6774d-499">**Reglas de entrada**</span><span class="sxs-lookup"><span data-stu-id="6774d-499">**Inbound rules**</span></span>

| <span data-ttu-id="6774d-500">Regla</span><span class="sxs-lookup"><span data-stu-id="6774d-500">Rule</span></span> | <span data-ttu-id="6774d-501">Access</span><span class="sxs-lookup"><span data-stu-id="6774d-501">Access</span></span> | <span data-ttu-id="6774d-502">Prioridad</span><span class="sxs-lookup"><span data-stu-id="6774d-502">Priority</span></span> | <span data-ttu-id="6774d-503">Intervalo de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-503">Source address range</span></span> | <span data-ttu-id="6774d-504">Puerto de origen</span><span class="sxs-lookup"><span data-stu-id="6774d-504">Source port</span></span> | <span data-ttu-id="6774d-505">Intervalo de direcciones de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-505">Destination address range</span></span> | <span data-ttu-id="6774d-506">Puerto de destino</span><span class="sxs-lookup"><span data-stu-id="6774d-506">Destination port</span></span> | <span data-ttu-id="6774d-507">Protocolo</span><span class="sxs-lookup"><span data-stu-id="6774d-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6774d-508">Allow-Inbound-SQL-Front-end</span><span class="sxs-lookup"><span data-stu-id="6774d-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="6774d-509">PERMITIR</span><span class="sxs-lookup"><span data-stu-id="6774d-509">Allow</span></span> | <span data-ttu-id="6774d-510">100</span><span class="sxs-lookup"><span data-stu-id="6774d-510">100</span></span> | <span data-ttu-id="6774d-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="6774d-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="6774d-512">1433</span><span class="sxs-lookup"><span data-stu-id="6774d-512">1433</span></span> | <span data-ttu-id="6774d-513">TCP</span><span class="sxs-lookup"><span data-stu-id="6774d-513">TCP</span></span> |

<span data-ttu-id="6774d-514">Puesto que algunos de los NSG Hola son tooindividual asociado de NIC, reglas de hello están destinadas a los recursos implementados a través del Administrador de recursos.</span><span class="sxs-lookup"><span data-stu-id="6774d-514">Since some of hello NSGs are associated tooindividual NICs, hello rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="6774d-515">Las reglas se combinan para la subred y la interfaz de red, en función de cómo estén asociadas.</span><span class="sxs-lookup"><span data-stu-id="6774d-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="6774d-516">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="6774d-516">Next steps</span></span>
* <span data-ttu-id="6774d-517">[Implementación de grupos de seguridad de red (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="6774d-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="6774d-518">[Implementación de grupos de seguridad de red (clásicos)](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="6774d-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="6774d-519">[Administración de registros de grupo de seguridad de red](virtual-network-nsg-manage-log.md).</span><span class="sxs-lookup"><span data-stu-id="6774d-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="6774d-520">[Solución de problemas de grupo de seguridad de red] (virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="6774d-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>

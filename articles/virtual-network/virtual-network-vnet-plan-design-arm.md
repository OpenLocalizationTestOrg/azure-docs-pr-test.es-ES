---
title: "Guía de planeamiento y diseño de Azure Virtual Network (red virtual) | Microsoft Docs"
description: "Obtenga información sobre cómo planear y diseñar redes virtuales en Azure según los requisitos de aislamiento, conectividad y ubicación."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 3a4a9aea-7608-4d2e-bb3c-40de2e537200
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/08/2016
ms.author: jdial
ms.openlocfilehash: 9a0126235c9ff3fec05d7709bdee95ab4832a33b
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="plan-and-design-azure-virtual-networks"></a><span data-ttu-id="0a7be-103">Planeación y diseño de redes virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="0a7be-103">Plan and design Azure Virtual Networks</span></span>
<span data-ttu-id="0a7be-104">Crear una red virtual con la cual experimentar es bastante sencillo, pero es probable que, con el tiempo, implemente varias redes virtuales para satisfacer las necesidades de producción que tiene su organización.</span><span class="sxs-lookup"><span data-stu-id="0a7be-104">Creating a VNet to experiment with is easy enough, but chances are, you will deploy multiple VNets over time to support the production needs of your organization.</span></span> <span data-ttu-id="0a7be-105">Si aplica cierta planeación y diseño, podrá implementar redes virtuales y conectar los recursos que necesita de manera más eficaz.</span><span class="sxs-lookup"><span data-stu-id="0a7be-105">With some planning and design, you will be able to deploy VNets and connect the resources you need more effectively.</span></span> <span data-ttu-id="0a7be-106">Si no conoce las redes virtuales, le recomendamos que [obtenga información sobre ellas](virtual-networks-overview.md) y aprenda [a implementar](virtual-networks-create-vnet-arm-pportal.md) una antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-106">If you are not familiar with VNets, it's recommended that you [learn about VNets](virtual-networks-overview.md) and [how to deploy](virtual-networks-create-vnet-arm-pportal.md) one before proceeding.</span></span>

## <a name="plan"></a><span data-ttu-id="0a7be-107">Plan</span><span class="sxs-lookup"><span data-stu-id="0a7be-107">Plan</span></span>
<span data-ttu-id="0a7be-108">Un conocimiento detallado de las suscripciones, las regiones y los recursos de red de Azure resulta fundamental para obtener éxito.</span><span class="sxs-lookup"><span data-stu-id="0a7be-108">A thorough understanding of Azure subscriptions, regions, and network resources is critical for success.</span></span> <span data-ttu-id="0a7be-109">Como punto de partida, puede usar la lista de consideraciones que aparece a continuación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-109">You can use the list of considerations below as a starting point.</span></span> <span data-ttu-id="0a7be-110">Una vez que compra esas consideraciones, podrá definir los requisitos para el diseño de la red.</span><span class="sxs-lookup"><span data-stu-id="0a7be-110">Once you understand those considerations, you can define the requirements for your network design.</span></span>

### <a name="considerations"></a><span data-ttu-id="0a7be-111">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="0a7be-111">Considerations</span></span>
<span data-ttu-id="0a7be-112">Antes de responder las preguntas relacionadas con la planeación que aparecen más adelante, considere lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="0a7be-112">Before answering the planning questions below, consider the following:</span></span>

* <span data-ttu-id="0a7be-113">Todo lo que se crea en Azure consta de uno o más recursos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-113">Everything you create in Azure is composed of one or more resources.</span></span> <span data-ttu-id="0a7be-114">Una máquina virtual (VM) es un recurso, la interfaz de adaptador de red (NIC) que una máquina virtual usa es un recurso, la dirección IP pública que una NIC usa es un recurso, la red virtual a la que se conecta la NIC también lo es.</span><span class="sxs-lookup"><span data-stu-id="0a7be-114">A virtual machine (VM) is a resource, the network adapter interface (NIC) used by a VM is a resource, the public IP address used by a NIC is a resource, the VNet the NIC is connected to is a resource.</span></span>
* <span data-ttu-id="0a7be-115">Puede crear recursos dentro de una suscripción y una [región de Azure](https://azure.microsoft.com/regions/#services) .</span><span class="sxs-lookup"><span data-stu-id="0a7be-115">You create resources within an [Azure region](https://azure.microsoft.com/regions/#services) and subscription.</span></span> <span data-ttu-id="0a7be-116">Los recursos solo se pueden conectar a una red virtual que existe en la misma región y suscripción en que se encuentran.</span><span class="sxs-lookup"><span data-stu-id="0a7be-116">Resources can only be connected to a virtual network that exists in the same region and subscription the resource is in.</span></span>
* <span data-ttu-id="0a7be-117">Puede conectar redes virtuales entre sí mediante:</span><span class="sxs-lookup"><span data-stu-id="0a7be-117">You can connect virtual networks to each other by using:</span></span>
    * <span data-ttu-id="0a7be-118">**[Emparejamiento de red virtual](virtual-network-peering-overview.md)**: las redes virtuales deben existir en la misma región de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-118">**[Virtual network peering](virtual-network-peering-overview.md)**: The virtual networks must exist in the same Azure region.</span></span> <span data-ttu-id="0a7be-119">El ancho de banda entre los recursos de redes virtuales emparejadas es el mismo que si los recursos estuvieran conectados a la misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-119">Bandwidth between resources in peered virtual networks is the same as if the resources were connected to the same virtual network.</span></span>
    * <span data-ttu-id="0a7be-120">**Azure [VPN Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: las redes virtuales pueden estar en la misma región de Azure o en regiones distintas.</span><span class="sxs-lookup"><span data-stu-id="0a7be-120">**An Azure [VPN Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: The virtual networks can exist in the same, or different Azure regions.</span></span> <span data-ttu-id="0a7be-121">El ancho de banda entre los recursos en redes virtuales conectadas a través de VPN Gateway está limitado por el ancho de banda de VPN Gateway.</span><span class="sxs-lookup"><span data-stu-id="0a7be-121">Bandwidth between resources in virtual networks connected through a VPN Gateway is limited by the bandwidth of the VPN Gateway.</span></span>
* <span data-ttu-id="0a7be-122">Puede conectar redes virtuales a la red local mediante una de las [opciones de conectividad](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) disponibles en Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-122">You can connect VNets to your on-premises network by using one of the [connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) available in Azure.</span></span>
* <span data-ttu-id="0a7be-123">Es posible agrupar distintos recursos en los [grupos de recursos](../azure-resource-manager/resource-group-overview.md#resource-groups), lo que permite facilitar la administración del recurso como una unidad.</span><span class="sxs-lookup"><span data-stu-id="0a7be-123">Different resources can be grouped together in [resource groups](../azure-resource-manager/resource-group-overview.md#resource-groups), making it easier to manage the resource as a unit.</span></span> <span data-ttu-id="0a7be-124">Un grupo de recursos puede contener recursos provenientes de varias regiones, siempre que estos pertenezcan a la misma suscripción.</span><span class="sxs-lookup"><span data-stu-id="0a7be-124">A resource group can contain resources from multiple regions, as long as the resources belong to the same subscription.</span></span>

### <a name="define-requirements"></a><span data-ttu-id="0a7be-125">Definición de los requisitos</span><span class="sxs-lookup"><span data-stu-id="0a7be-125">Define requirements</span></span>
<span data-ttu-id="0a7be-126">Use las siguientes preguntas como punto de partida para diseñar la red de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-126">Use the questions below as a starting point for your Azure network design.</span></span>    

1. <span data-ttu-id="0a7be-127">¿Qué ubicaciones de Azure usará para hospedar las redes virtuales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-127">What Azure locations will you use to host VNets?</span></span>
2. <span data-ttu-id="0a7be-128">¿Necesita proporcionar comunicación entre estas ubicaciones de Azure?</span><span class="sxs-lookup"><span data-stu-id="0a7be-128">Do you need to provide communication between these Azure locations?</span></span>
3. <span data-ttu-id="0a7be-129">¿Necesita proporcionar comunicación entre las redes virtuales de Azure y los centros de datos locales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-129">Do you need to provide communication between your Azure VNet(s) and your on-premises datacenter(s)?</span></span>
4. <span data-ttu-id="0a7be-130">¿Cuántas máquinas virtuales de infraestructura como servicio (IaaS), roles de servicios en la nube y aplicaciones web necesita para su solución?</span><span class="sxs-lookup"><span data-stu-id="0a7be-130">How many Infrastructure as a Service (IaaS) VMs, cloud services roles, and web apps do you need for your solution?</span></span>
5. <span data-ttu-id="0a7be-131">¿Necesita aislar el tráfico según los grupos de máquinas virtuales (es decir, servidores front-end web y servidores de base de datos back-end)?</span><span class="sxs-lookup"><span data-stu-id="0a7be-131">Do you need to isolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>
6. <span data-ttu-id="0a7be-132">¿Necesita controlar el flujo de tráfico mediante aplicaciones virtuales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-132">Do you need to control traffic flow using virtual appliances?</span></span>
7. <span data-ttu-id="0a7be-133">¿Los usuarios necesitan distintos conjuntos de permisos para los diferentes recursos de Azure?</span><span class="sxs-lookup"><span data-stu-id="0a7be-133">Do users need different sets of permissions to different Azure resources?</span></span>

### <a name="understand-vnet-and-subnet-properties"></a><span data-ttu-id="0a7be-134">Descripción de las propiedades de las redes virtuales y las subredes</span><span class="sxs-lookup"><span data-stu-id="0a7be-134">Understand VNet and subnet properties</span></span>
<span data-ttu-id="0a7be-135">Los recursos de las redes virtuales y las subredes ayudan a definir un límite de seguridad para las cargas de trabajo que se ejecutan en Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-135">VNet and subnets resources help define a security boundary for workloads running in Azure.</span></span> <span data-ttu-id="0a7be-136">Una red virtual se caracteriza por una colección de espacios de direcciones, también denominados bloques CIDR.</span><span class="sxs-lookup"><span data-stu-id="0a7be-136">A VNet is characterized by a collection of address spaces, defined as CIDR blocks.</span></span>

> [!NOTE]
> <span data-ttu-id="0a7be-137">Los administradores de red ya están familiarizados con la notación CIDR.</span><span class="sxs-lookup"><span data-stu-id="0a7be-137">Network administrators are familiar with CIDR notation.</span></span> <span data-ttu-id="0a7be-138">Si no está familiarizado con el formato CIDR, [puede obtener más información](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="0a7be-138">If you are not familiar with CIDR, [learn more about it](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="0a7be-139">Las Redes virtuales contienen las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="0a7be-139">VNets contain the following properties.</span></span>

| <span data-ttu-id="0a7be-140">Propiedad</span><span class="sxs-lookup"><span data-stu-id="0a7be-140">Property</span></span> | <span data-ttu-id="0a7be-141">Description</span><span class="sxs-lookup"><span data-stu-id="0a7be-141">Description</span></span> | <span data-ttu-id="0a7be-142">Restricciones</span><span class="sxs-lookup"><span data-stu-id="0a7be-142">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0a7be-143">**name**</span><span class="sxs-lookup"><span data-stu-id="0a7be-143">**name**</span></span> |<span data-ttu-id="0a7be-144">Nombre de red virtual</span><span class="sxs-lookup"><span data-stu-id="0a7be-144">VNet name</span></span> |<span data-ttu-id="0a7be-145">Cadena de hasta 80 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0a7be-145">String of up to 80 characters.</span></span> <span data-ttu-id="0a7be-146">Puede incluir letras, números, caracteres de subrayado, puntos o guiones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-146">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="0a7be-147">Debe empezar por una letra o un número.</span><span class="sxs-lookup"><span data-stu-id="0a7be-147">Must start with a letter or number.</span></span> <span data-ttu-id="0a7be-148">Debe finalizar en una letra, un número o un carácter de subrayado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-148">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="0a7be-149">Puede incluir letras mayúsculas o minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0a7be-149">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="0a7be-150">**ubicación**</span><span class="sxs-lookup"><span data-stu-id="0a7be-150">**location**</span></span> |<span data-ttu-id="0a7be-151">La ubicación de Azure (también conocida como región).</span><span class="sxs-lookup"><span data-stu-id="0a7be-151">Azure location (also referred to as region).</span></span> |<span data-ttu-id="0a7be-152">Debe ser una de las ubicaciones válidas de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-152">Must be one of the valid Azure locations.</span></span> |
| <span data-ttu-id="0a7be-153">**addressSpace**</span><span class="sxs-lookup"><span data-stu-id="0a7be-153">**addressSpace**</span></span> |<span data-ttu-id="0a7be-154">Es la colección de prefijos de direcciones que conforman la red virtual en la notación CIDR.</span><span class="sxs-lookup"><span data-stu-id="0a7be-154">Collection of address prefixes that make up the VNet in CIDR notation.</span></span> |<span data-ttu-id="0a7be-155">Debe ser una matriz de bloques de direcciones CIDR válidos, incluidos intervalos de direcciones IP públicas.</span><span class="sxs-lookup"><span data-stu-id="0a7be-155">Must be an array of valid CIDR address blocks, including public IP address ranges.</span></span> |
| <span data-ttu-id="0a7be-156">**subredes**</span><span class="sxs-lookup"><span data-stu-id="0a7be-156">**subnets**</span></span> |<span data-ttu-id="0a7be-157">Es la colección de subredes que constituyen la red virtual</span><span class="sxs-lookup"><span data-stu-id="0a7be-157">Collection of subnets that make up the VNet</span></span> |<span data-ttu-id="0a7be-158">Consulte la tabla de propiedades de subred que aparece a continuación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-158">see the subnet properties table below.</span></span> |
| <span data-ttu-id="0a7be-159">**dhcpOptions**</span><span class="sxs-lookup"><span data-stu-id="0a7be-159">**dhcpOptions**</span></span> |<span data-ttu-id="0a7be-160">El objeto que contiene una propiedad requerida única llamada **dnsServers**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-160">Object that contains a single required property named **dnsServers**.</span></span> | |
| <span data-ttu-id="0a7be-161">**dnsServers**</span><span class="sxs-lookup"><span data-stu-id="0a7be-161">**dnsServers**</span></span> |<span data-ttu-id="0a7be-162">La matriz de servidores DNS que la red virtual usa.</span><span class="sxs-lookup"><span data-stu-id="0a7be-162">Array of DNS servers used by the VNet.</span></span> <span data-ttu-id="0a7be-163">Si no se especifica ningún servidor, se usa la resolución interna de nombres de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-163">If no server is specified, Azure internal name resolution is used.</span></span> |<span data-ttu-id="0a7be-164">Debe ser una matriz de hasta 10 servidores DNS por dirección IP.</span><span class="sxs-lookup"><span data-stu-id="0a7be-164">Must be an array of up to 10 DNS servers, by IP address.</span></span> |

<span data-ttu-id="0a7be-165">Una subred es un recurso secundario de una red virtual que le ayudará a definir segmentos de espacios de direcciones dentro de un bloque CIDR mediante prefijos de direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="0a7be-165">A subnet is a child resource of a VNet, and helps define segments of address spaces within a CIDR block, using IP address prefixes.</span></span> <span data-ttu-id="0a7be-166">Las NIC pueden agregarse a subredes y conectarse a máquinas virtuales, lo cual le proporciona conectividad a varias cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="0a7be-166">NICs can be added to subnets, and connected to VMs, providing connectivity for various workloads.</span></span>

<span data-ttu-id="0a7be-167">Las subredes contienen las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="0a7be-167">Subnets contain the following properties.</span></span>

| <span data-ttu-id="0a7be-168">Propiedad</span><span class="sxs-lookup"><span data-stu-id="0a7be-168">Property</span></span> | <span data-ttu-id="0a7be-169">Description</span><span class="sxs-lookup"><span data-stu-id="0a7be-169">Description</span></span> | <span data-ttu-id="0a7be-170">Restricciones</span><span class="sxs-lookup"><span data-stu-id="0a7be-170">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0a7be-171">**name**</span><span class="sxs-lookup"><span data-stu-id="0a7be-171">**name**</span></span> |<span data-ttu-id="0a7be-172">Nombre de subred</span><span class="sxs-lookup"><span data-stu-id="0a7be-172">Subnet name</span></span> |<span data-ttu-id="0a7be-173">Cadena de hasta 80 caracteres.</span><span class="sxs-lookup"><span data-stu-id="0a7be-173">String of up to 80 characters.</span></span> <span data-ttu-id="0a7be-174">Puede incluir letras, números, caracteres de subrayado, puntos o guiones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-174">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="0a7be-175">Debe empezar por una letra o un número.</span><span class="sxs-lookup"><span data-stu-id="0a7be-175">Must start with a letter or number.</span></span> <span data-ttu-id="0a7be-176">Debe finalizar en una letra, un número o un carácter de subrayado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-176">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="0a7be-177">Puede incluir letras mayúsculas o minúsculas.</span><span class="sxs-lookup"><span data-stu-id="0a7be-177">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="0a7be-178">**ubicación**</span><span class="sxs-lookup"><span data-stu-id="0a7be-178">**location**</span></span> |<span data-ttu-id="0a7be-179">La ubicación de Azure (también conocida como región).</span><span class="sxs-lookup"><span data-stu-id="0a7be-179">Azure location (also referred to as region).</span></span> |<span data-ttu-id="0a7be-180">Debe ser una de las ubicaciones válidas de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-180">Must be one of the valid Azure locations.</span></span> |
| <span data-ttu-id="0a7be-181">**addressPrefix**</span><span class="sxs-lookup"><span data-stu-id="0a7be-181">**addressPrefix**</span></span> |<span data-ttu-id="0a7be-182">Es el prefijo de dirección única que constituye la subred en la notación de CIDR</span><span class="sxs-lookup"><span data-stu-id="0a7be-182">Single address prefix that make up the subnet in CIDR notation</span></span> |<span data-ttu-id="0a7be-183">Debe ser un bloque CIDR único que forme parte de uno de los espacios de direcciones de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-183">Must be a single CIDR block that is part of one of the VNet's address spaces.</span></span> |
| <span data-ttu-id="0a7be-184">**networkSecurityGroup**</span><span class="sxs-lookup"><span data-stu-id="0a7be-184">**networkSecurityGroup**</span></span> |<span data-ttu-id="0a7be-185">Es el grupo de seguridad de red aplicado a la subred</span><span class="sxs-lookup"><span data-stu-id="0a7be-185">NSG applied to the subnet</span></span> | |
| <span data-ttu-id="0a7be-186">**routeTable**</span><span class="sxs-lookup"><span data-stu-id="0a7be-186">**routeTable**</span></span> |<span data-ttu-id="0a7be-187">Es la tabla de ruta que se aplica a la subred</span><span class="sxs-lookup"><span data-stu-id="0a7be-187">Route table applied to the subnet</span></span> | |
| <span data-ttu-id="0a7be-188">**ipConfigurations**</span><span class="sxs-lookup"><span data-stu-id="0a7be-188">**ipConfigurations**</span></span> |<span data-ttu-id="0a7be-189">Es la colección de objetos de configuración IP que usan las NIC conectadas a la subred.</span><span class="sxs-lookup"><span data-stu-id="0a7be-189">Collection of IP configuration objects used by NICs connected to the subnet</span></span> | |

### <a name="name-resolution"></a><span data-ttu-id="0a7be-190">Resolución de nombres</span><span class="sxs-lookup"><span data-stu-id="0a7be-190">Name resolution</span></span>
<span data-ttu-id="0a7be-191">De manera predeterminada, la red virtual usa la [resolución de nombres proporcionada por Azure](virtual-networks-name-resolution-for-vms-and-role-instances.md) para resolver los nombres dentro de la red virtual y en la red pública de Internet.</span><span class="sxs-lookup"><span data-stu-id="0a7be-191">By default, your VNet uses [Azure-provided name resolution](virtual-networks-name-resolution-for-vms-and-role-instances.md) to resolve names inside the VNet, and on the public Internet.</span></span> <span data-ttu-id="0a7be-192">Sin embargo, si conecta las redes virtuales a los centros de datos locales, necesita proporcionar [su propio servidor DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md) para resolver los nombres entre sus redes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-192">However, if you connect your VNets to your on-premises data centers, you need to provide [your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md) to resolve names between your networks.</span></span>  

### <a name="limits"></a><span data-ttu-id="0a7be-193">límites</span><span class="sxs-lookup"><span data-stu-id="0a7be-193">Limits</span></span>
<span data-ttu-id="0a7be-194">Revise los límites de red en el artículo sobre [límites de Azure](../azure-subscription-service-limits.md#networking-limits) para asegurarse de que su diseño no entra en conflicto con cualquiera de los límites.</span><span class="sxs-lookup"><span data-stu-id="0a7be-194">Review the networking limits in the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article to ensure that your design doesn't conflict with any of the limits.</span></span> <span data-ttu-id="0a7be-195">Algunos límites se pueden aumentar con la apertura de una incidencia de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="0a7be-195">Some limits can be increased by opening a support ticket.</span></span>

### <a name="role-based-access-control-rbac"></a><span data-ttu-id="0a7be-196">Control de acceso basado en rol (RBAC)</span><span class="sxs-lookup"><span data-stu-id="0a7be-196">Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="0a7be-197">Puede usar el [RBAC de Azure](../active-directory/role-based-access-built-in-roles.md) para controlar el nivel de acceso que distintos usuarios pueden tener a los diferentes recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-197">You can use [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) to control the level of access different users may have to different resources in Azure.</span></span> <span data-ttu-id="0a7be-198">De esta forma, puede separar el trabajo que realiza su equipo según sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="0a7be-198">That way you can segregate the work done by your team based on their needs.</span></span>

<span data-ttu-id="0a7be-199">En lo que respecta a las redes virtuales, los usuarios que cuentan con el rol **Colaborador de la red** tienen el control total sobre los recursos de la red virtual del Administrador de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-199">As far as virtual networks are concerned, users in the **Network Contributor** role have full control over Azure Resource Manager virtual network resources.</span></span> <span data-ttu-id="0a7be-200">De manera similar, los usuarios que cuentan con el rol **Colaborador de la red clásica** tienen el control total sobre los recursos de la red virtual clásica.</span><span class="sxs-lookup"><span data-stu-id="0a7be-200">Similarly, users in the **Classic Network Contributor** role have full control over classic virtual network resources.</span></span>

> [!NOTE]
> <span data-ttu-id="0a7be-201">También puede [crear sus propios roles](../active-directory/role-based-access-control-configure.md) para separar sus necesidades de administración.</span><span class="sxs-lookup"><span data-stu-id="0a7be-201">You can also [create your own roles](../active-directory/role-based-access-control-configure.md) to separate your administrative needs.</span></span>
>
>

## <a name="design"></a><span data-ttu-id="0a7be-202">Diseño</span><span class="sxs-lookup"><span data-stu-id="0a7be-202">Design</span></span>
<span data-ttu-id="0a7be-203">Una vez que sepa las respuestas a las preguntas de la sección [Planeación](#Plan) , revise los siguientes puntos antes de definir las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-203">Once you know the answers to the questions in the [Plan](#Plan) section, review the following before defining your VNets.</span></span>

### <a name="number-of-subscriptions-and-vnets"></a><span data-ttu-id="0a7be-204">Cantidad de suscripciones y redes virtuales</span><span class="sxs-lookup"><span data-stu-id="0a7be-204">Number of subscriptions and VNets</span></span>
<span data-ttu-id="0a7be-205">Debe considerar la posibilidad de crear varias redes virtuales en los siguientes escenarios:</span><span class="sxs-lookup"><span data-stu-id="0a7be-205">You should consider creating multiple VNets in the following scenarios:</span></span>

* <span data-ttu-id="0a7be-206">**Las máquinas virtuales que deben existir en las distintas ubicaciones de Azure**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-206">**VMs that need to be placed in different Azure locations**.</span></span> <span data-ttu-id="0a7be-207">Las redes virtuales de Azure son regionales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-207">VNets in Azure are regional.</span></span> <span data-ttu-id="0a7be-208">No pueden abarcar ubicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-208">They cannot span locations.</span></span> <span data-ttu-id="0a7be-209">Por lo tanto, se necesita, como mínimo, una red virtual para cada ubicación de Azure en la que desea hospedar las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-209">Therefore you need at least one VNet for each Azure location you want to host VMs in.</span></span>
* <span data-ttu-id="0a7be-210">**Las cargas de trabajo que deben estar completamente aisladas entre sí**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-210">**Workloads that need to be completely isolated from one another**.</span></span> <span data-ttu-id="0a7be-211">Puede crear redes virtuales independientes, que incluso usen los mismos espacios de direcciones IP, para aislar las distintas cargas de trabajo entre sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-211">You can create separate VNets, that even use the same IP address spaces, to isolate different workloads from one another.</span></span>

<span data-ttu-id="0a7be-212">Tenga en cuenta que los límites ya indicados son por región, por suscripción.</span><span class="sxs-lookup"><span data-stu-id="0a7be-212">Keep in mind that the limits you see above are per region, per subscription.</span></span> <span data-ttu-id="0a7be-213">Esto significa que puede usar varias suscripciones para aumentar el límite de los recursos que puede mantener en Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-213">That means you can use multiple subscriptions to increase the limit of resources you can maintain in Azure.</span></span> <span data-ttu-id="0a7be-214">Puede usar una VPN sitio a sitio o un circuito de ExpressRoute para conectar redes virtuales en distintas suscripciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-214">You can use a site-to-site VPN, or an ExpressRoute circuit, to connect VNets in different subscriptions.</span></span>

### <a name="subscription-and-vnet-design-patterns"></a><span data-ttu-id="0a7be-215">Patrones de diseño de redes virtuales y suscripciones</span><span class="sxs-lookup"><span data-stu-id="0a7be-215">Subscription and VNet design patterns</span></span>
<span data-ttu-id="0a7be-216">La siguiente tabla muestra algunos patrones de diseño comunes para usar las suscripciones y las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-216">The table below shows some common design patterns for using subscriptions and VNets.</span></span>

| <span data-ttu-id="0a7be-217">Escenario</span><span class="sxs-lookup"><span data-stu-id="0a7be-217">Scenario</span></span> | <span data-ttu-id="0a7be-218">Diagrama</span><span class="sxs-lookup"><span data-stu-id="0a7be-218">Diagram</span></span> | <span data-ttu-id="0a7be-219">Ventajas</span><span class="sxs-lookup"><span data-stu-id="0a7be-219">Pros</span></span> | <span data-ttu-id="0a7be-220">Desventajas</span><span class="sxs-lookup"><span data-stu-id="0a7be-220">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0a7be-221">Suscripción única, dos redes virtuales por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-221">Single subscription, two VNets per app</span></span> |![Suscripción única](./media/virtual-network-vnet-plan-design-arm/figure1.png) |<span data-ttu-id="0a7be-223">Solo una suscripción que administrar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-223">Only one subscription to manage.</span></span> |<span data-ttu-id="0a7be-224">Número máximo de redes virtuales por región de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-224">Maximum number of VNets per Azure region.</span></span> <span data-ttu-id="0a7be-225">Necesita más suscripciones después de ese límite.</span><span class="sxs-lookup"><span data-stu-id="0a7be-225">You need more subscriptions after that.</span></span> <span data-ttu-id="0a7be-226">Revise el artículo sobre los [límites de Azure](../azure-subscription-service-limits.md#networking-limits) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="0a7be-226">Review the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="0a7be-227">Una suscripción por aplicación, dos redes virtuales por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-227">One subscription per app, two VNets per app</span></span> |![Suscripción única](./media/virtual-network-vnet-plan-design-arm/figure2.png) |<span data-ttu-id="0a7be-229">Usa solo dos redes virtuales por suscripción.</span><span class="sxs-lookup"><span data-stu-id="0a7be-229">Uses only two VNets per subscription.</span></span> |<span data-ttu-id="0a7be-230">Es más difícil de administrar cuando hay demasiadas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-230">Harder to manage when there are too many apps.</span></span> |
| <span data-ttu-id="0a7be-231">Una suscripción por unidad de negocio, dos redes virtuales por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-231">One subscription per business unit, two VNets per app.</span></span> |![Suscripción única](./media/virtual-network-vnet-plan-design-arm/figure3.png) |<span data-ttu-id="0a7be-233">Equilibrio entre la cantidad de suscripciones y las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-233">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="0a7be-234">Número máximo de redes virtuales por unidad de negocio (suscripción).</span><span class="sxs-lookup"><span data-stu-id="0a7be-234">Maximum number of VNets per business unit (subscription).</span></span> <span data-ttu-id="0a7be-235">Revise el artículo sobre los [límites de Azure](../azure-subscription-service-limits.md#networking-limits) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="0a7be-235">Review the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="0a7be-236">Una suscripción por unidad de negocio, dos redes virtuales por grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-236">One subscription per business unit, two VNets per group of apps.</span></span> |![Suscripción única](./media/virtual-network-vnet-plan-design-arm/figure4.png) |<span data-ttu-id="0a7be-238">Equilibrio entre la cantidad de suscripciones y las redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-238">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="0a7be-239">Las aplicaciones se deben aislar mediante subredes y NSG.</span><span class="sxs-lookup"><span data-stu-id="0a7be-239">Apps must be isolated by using subnets and NSGs.</span></span> |

### <a name="number-of-subnets"></a><span data-ttu-id="0a7be-240">Cantidad de subredes</span><span class="sxs-lookup"><span data-stu-id="0a7be-240">Number of subnets</span></span>
<span data-ttu-id="0a7be-241">Debe considerar la posibilidad de tener varias subredes en una red virtual en los siguientes escenarios:</span><span class="sxs-lookup"><span data-stu-id="0a7be-241">You should consider multiple subnets in a VNet in the following scenarios:</span></span>

* <span data-ttu-id="0a7be-242">**No hay direcciones IP privadas suficientes para todas las NIC de una subred**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-242">**Not enough private IP addresses for all NICs in a subnet**.</span></span> <span data-ttu-id="0a7be-243">Si el espacio de direcciones de subred no contiene direcciones IP suficientes para la cantidad de NIC de la subred, deberá crear varias subredes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-243">If your subnet address space does not contain enough IP addresses for the number of NICs in the subnet, you need to create multiple subnets.</span></span> <span data-ttu-id="0a7be-244">Tenga en cuenta que Azure reserva 5 direcciones IP privadas desde cada subred que no se pueden usar: la primera y la última dirección del espacio de direcciones (para la dirección de subred y multidifusión) y 3 direcciones que se usarán internamente (para DHCP y DNS).</span><span class="sxs-lookup"><span data-stu-id="0a7be-244">Keep in mind that Azure reserves 5 private IP addresses from each subnet that cannot be used: the first and last addresses of the address space (for the subnet address, and multicast) and 3 addresses to be used internally (for DHCP and DNS purposes).</span></span>
* <span data-ttu-id="0a7be-245">**Seguridad**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-245">**Security**.</span></span> <span data-ttu-id="0a7be-246">Puede usar subredes para separar los grupos de máquinas virtuales entre sí para las cargas de trabajo que tengan una estructura de varios niveles y aplicar distintos [grupos de seguridad de red (NSG)](virtual-networks-nsg.md#subnets) para esa subredes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-246">You can use subnets to separate groups of VMs from one another for workloads that have a multi-layer structure, and apply different [network security groups (NSGs)](virtual-networks-nsg.md#subnets) for those subnets.</span></span>
* <span data-ttu-id="0a7be-247">**Conectividad híbrida**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-247">**Hybrid connectivity**.</span></span> <span data-ttu-id="0a7be-248">Puede utilizar puertas de enlace de VPN y circuitos de ExpressRoute para [conectar](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) las redes virtuales entre sí y con sus centros de datos locales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-248">You can use VPN gateways and ExpressRoute circuits to [connect](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) your VNets to one another, and to your on-premises data center(s).</span></span> <span data-ttu-id="0a7be-249">Las puertas de enlace de VPN y los circuitos de ExpressRoute requieren la creación de una subred propia.</span><span class="sxs-lookup"><span data-stu-id="0a7be-249">VPN gateways and ExpressRoute circuits require a subnet of their own to be created.</span></span>
* <span data-ttu-id="0a7be-250">**Aplicaciones virtuales**.</span><span class="sxs-lookup"><span data-stu-id="0a7be-250">**Virtual appliances**.</span></span> <span data-ttu-id="0a7be-251">Puede utilizar una aplicación virtual, como un firewall, un acelerador de WAN o una puerta de enlace de VPN en una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-251">You can use a virtual appliance, such as a firewall, WAN accelerator, or VPN gateway in an Azure VNet.</span></span> <span data-ttu-id="0a7be-252">Cuando lo haga, deberá [enrutar el tráfico](virtual-networks-udr-overview.md) a esas aplicaciones y aislarlas en su propia subred.</span><span class="sxs-lookup"><span data-stu-id="0a7be-252">When you do so, you need to [route traffic](virtual-networks-udr-overview.md) to those appliances and isolate them in their own subnet.</span></span>

### <a name="subnet-and-nsg-design-patterns"></a><span data-ttu-id="0a7be-253">Patrones de diseño de subredes y NSG</span><span class="sxs-lookup"><span data-stu-id="0a7be-253">Subnet and NSG design patterns</span></span>
<span data-ttu-id="0a7be-254">La siguiente tabla muestra algunos patrones de diseño comunes para usar las subredes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-254">The table below shows some common design patterns for using subnets.</span></span>

| <span data-ttu-id="0a7be-255">Escenario</span><span class="sxs-lookup"><span data-stu-id="0a7be-255">Scenario</span></span> | <span data-ttu-id="0a7be-256">Diagrama</span><span class="sxs-lookup"><span data-stu-id="0a7be-256">Diagram</span></span> | <span data-ttu-id="0a7be-257">Ventajas</span><span class="sxs-lookup"><span data-stu-id="0a7be-257">Pros</span></span> | <span data-ttu-id="0a7be-258">Desventajas</span><span class="sxs-lookup"><span data-stu-id="0a7be-258">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0a7be-259">Una sola subred, NSG por nivel de aplicación, por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-259">Single subnet, NSGs per application layer, per app</span></span> |![Subred única](./media/virtual-network-vnet-plan-design-arm/figure5.png) |<span data-ttu-id="0a7be-261">Solo una subred que administrar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-261">Only one subnet to manage.</span></span> |<span data-ttu-id="0a7be-262">Varios NSG necesarios para aislar cada aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-262">Multiple NSGs necessary to isolate each application.</span></span> |
| <span data-ttu-id="0a7be-263">Una subred por aplicación, NSG por nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-263">One subnet per app, NSGs per application layer</span></span> |![Subred por aplicación](./media/virtual-network-vnet-plan-design-arm/figure6.png) |<span data-ttu-id="0a7be-265">Menos NSG que administrar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-265">Fewer NSGs to manage.</span></span> |<span data-ttu-id="0a7be-266">Varias subredes que administrar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-266">Multiple subnets to manage.</span></span> |
| <span data-ttu-id="0a7be-267">Una sola subred por nivel de aplicación, NSG por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-267">One subnet per application layer, NSGs per app.</span></span> |![Subred por nivel](./media/virtual-network-vnet-plan-design-arm/figure7.png) |<span data-ttu-id="0a7be-269">Equilibrio entre la cantidad de subredes y los NSG.</span><span class="sxs-lookup"><span data-stu-id="0a7be-269">Balance between number of subnets and NSGs.</span></span> |<span data-ttu-id="0a7be-270">Número máximo de NSG por suscripción.</span><span class="sxs-lookup"><span data-stu-id="0a7be-270">Maximum number of NSGs per subscription.</span></span> <span data-ttu-id="0a7be-271">Revise el artículo sobre los [límites de Azure](../azure-subscription-service-limits.md#networking-limits) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="0a7be-271">Review the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="0a7be-272">Una subred por nivel de aplicación, por aplicación, NSG por subred.</span><span class="sxs-lookup"><span data-stu-id="0a7be-272">One subnet per application layer, per app, NSGs per subnet</span></span> |![Subred por nivel por aplicación](./media/virtual-network-vnet-plan-design-arm/figure8.png) |<span data-ttu-id="0a7be-274">Posiblemente, una cantidad menor de NSG.</span><span class="sxs-lookup"><span data-stu-id="0a7be-274">Possibly smaller number of NSGs.</span></span> |<span data-ttu-id="0a7be-275">Varias subredes que administrar.</span><span class="sxs-lookup"><span data-stu-id="0a7be-275">Multiple subnets to manage.</span></span> |

## <a name="sample-design"></a><span data-ttu-id="0a7be-276">Ejemplo de diseño</span><span class="sxs-lookup"><span data-stu-id="0a7be-276">Sample design</span></span>
<span data-ttu-id="0a7be-277">Para mostrar cómo aplicar la información que aparece en este artículo, considere el escenario siguiente.</span><span class="sxs-lookup"><span data-stu-id="0a7be-277">To illustrate the application of the information in this article, consider the following scenario.</span></span>

<span data-ttu-id="0a7be-278">Trabaja para una empresa que tiene 2 centros de datos en Norteamérica y dos centros de datos en Europa.</span><span class="sxs-lookup"><span data-stu-id="0a7be-278">You work for a company that has 2 data centers in North America, and two data centers Europe.</span></span> <span data-ttu-id="0a7be-279">Identificó 6 aplicaciones distintas para el cliente que son mantenidas por 2 unidades de negocio diferentes que desea migrar a Azure como plan piloto.</span><span class="sxs-lookup"><span data-stu-id="0a7be-279">You identified 6 different customer facing applications maintained by 2 different business units that you want to migrate to Azure as a pilot.</span></span> <span data-ttu-id="0a7be-280">La arquitectura básica de las aplicaciones es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="0a7be-280">The basic architecture for the applications are as follows:</span></span>

* <span data-ttu-id="0a7be-281">App1, App2, App3 y App4 son aplicaciones web hospedadas en servidores Linux que ejecutan Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="0a7be-281">App1, App2, App3, and App4 are web applications hosted on Linux servers running Ubuntu.</span></span> <span data-ttu-id="0a7be-282">Cada aplicación se conecta a un servidor de aplicaciones independiente que hospeda servicios RESTful en servidores Linux.</span><span class="sxs-lookup"><span data-stu-id="0a7be-282">Each application connects to a separate application server that hosts RESTful services on Linux servers.</span></span> <span data-ttu-id="0a7be-283">Los servicios RESTful se conectan a una base de datos MySQL back-end.</span><span class="sxs-lookup"><span data-stu-id="0a7be-283">The RESTful services connect to a back end MySQL database.</span></span>
* <span data-ttu-id="0a7be-284">App5 y App6 son aplicaciones web hospedadas en servidores Windows que ejecutan Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a7be-284">App5 and App6 are web applications hosted on Windows servers running Windows Server 2012 R2.</span></span> <span data-ttu-id="0a7be-285">Cada aplicación se conecta a una base de datos SQL Server back-end.</span><span class="sxs-lookup"><span data-stu-id="0a7be-285">Each application connects to a back end SQL Server database.</span></span>
* <span data-ttu-id="0a7be-286">Actualmente, todas las aplicaciones está hospedadas en uno de los centros de datos de la empresa en Norteamérica.</span><span class="sxs-lookup"><span data-stu-id="0a7be-286">All apps are currently hosted in one of the company's data centers in North America.</span></span>
* <span data-ttu-id="0a7be-287">Los centros de datos locales usan el espacio de direcciones 10.0.0.0/8.</span><span class="sxs-lookup"><span data-stu-id="0a7be-287">The on-premises data centers use the 10.0.0.0/8 address space.</span></span>

<span data-ttu-id="0a7be-288">Debe diseñar una solución de red virtual que cumple los siguientes requisitos:</span><span class="sxs-lookup"><span data-stu-id="0a7be-288">You need to design a virtual network solution that meets the following requirements:</span></span>

* <span data-ttu-id="0a7be-289">El consumo de recursos de las unidades de negocio no debería afectar a ninguna otra unidad de negocio.</span><span class="sxs-lookup"><span data-stu-id="0a7be-289">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="0a7be-290">Deberá minimizar la cantidad de redes virtuales y subredes para facilitar la administración.</span><span class="sxs-lookup"><span data-stu-id="0a7be-290">You should minimize the amount of VNets and subnets to make management easier.</span></span>
* <span data-ttu-id="0a7be-291">Cada unidad de negocio debe tener una sola red virtual de prueba/desarrollo para usar para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-291">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="0a7be-292">Cada aplicación se hospeda en 2 centros de datos de Azure distintos por continente (Norteamérica y Europa).</span><span class="sxs-lookup"><span data-stu-id="0a7be-292">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>
* <span data-ttu-id="0a7be-293">Las aplicaciones están completamente aisladas entre sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-293">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="0a7be-294">Los clientes pueden tener acceso a cada aplicación a través de Internet, mediante el protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="0a7be-294">Each application can be accessed by customers over the Internet using HTTP.</span></span>
* <span data-ttu-id="0a7be-295">Los usuarios conectados a los centros de datos locales pueden tener acceso a cada aplicación mediante un túnel cifrado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-295">Each application can be accessed by users connected to the on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="0a7be-296">La conexión a los centros de datos locales debe usar dispositivos VPN existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-296">Connection to on-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="0a7be-297">El grupo de redes de la empresa debe tener el control total de la configuración de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-297">The company's networking group should have full control over the VNet configuration.</span></span>
* <span data-ttu-id="0a7be-298">Los desarrolladores de cada unidad de negocio solo deberían poder implementar máquinas virtuales en las subredes existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-298">Developers in each business unit should only be able to deploy VMs to existing subnets.</span></span>
* <span data-ttu-id="0a7be-299">Todas las aplicaciones se migrarán tal como están a Azure ("levantar y mover").</span><span class="sxs-lookup"><span data-stu-id="0a7be-299">All applications will be migrated as they are to Azure (lift-and-shift).</span></span>
* <span data-ttu-id="0a7be-300">Las bases de datos de cada ubicación se deberán replicar en otras ubicaciones de Azure una vez al día.</span><span class="sxs-lookup"><span data-stu-id="0a7be-300">The databases in each location should replicate to other Azure locations once a day.</span></span>
* <span data-ttu-id="0a7be-301">Cada aplicación deberá usar 5 servidores front-end web, 2 servidores de aplicaciones (cuando corresponda) y 2 servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-301">Each application should use 5 front end web servers, 2 application servers (when necessary), and 2 database servers.</span></span>

### <a name="plan"></a><span data-ttu-id="0a7be-302">Plan</span><span class="sxs-lookup"><span data-stu-id="0a7be-302">Plan</span></span>
<span data-ttu-id="0a7be-303">Para comenzar a planear el diseño, deberá responder la pregunta que aparece en la sección [Definición de los requisitos](#Define-requirements) , tal como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-303">You should start your design planning by answering the question in the [Define requirements](#Define-requirements) section as shown below.</span></span>

1. <span data-ttu-id="0a7be-304">¿Qué ubicaciones de Azure usará para hospedar las redes virtuales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-304">What Azure locations will you use to host VNets?</span></span>

    <span data-ttu-id="0a7be-305">2 ubicaciones en Norteamérica y 2 ubicaciones en Europa.</span><span class="sxs-lookup"><span data-stu-id="0a7be-305">2 locations in North America, and 2 locations in Europe.</span></span> <span data-ttu-id="0a7be-306">Debe elegirla según la ubicación física de los centros de datos locales existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-306">You should pick those based on the physical location of your existing on-premises data centers.</span></span> <span data-ttu-id="0a7be-307">De ese modo, la conexión desde las ubicaciones físicas a Azure tendrá una mejor latencia.</span><span class="sxs-lookup"><span data-stu-id="0a7be-307">That way your connection from your physical locations to Azure will have a better latency.</span></span>
2. <span data-ttu-id="0a7be-308">¿Necesita proporcionar comunicación entre estas ubicaciones de Azure?</span><span class="sxs-lookup"><span data-stu-id="0a7be-308">Do you need to provide communication between these Azure locations?</span></span>

    <span data-ttu-id="0a7be-309">Sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-309">Yes.</span></span> <span data-ttu-id="0a7be-310">Debido a que las bases de datos se deben replicar a todas las ubicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-310">Since the databases must be replicated to all locations.</span></span>
3. <span data-ttu-id="0a7be-311">¿Necesita proporcionar comunicación entre las redes virtuales de Azure y los centros de datos locales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-311">Do you need to provide communication between your Azure VNet(s) and your on-premises data center(s)?</span></span>

    <span data-ttu-id="0a7be-312">Sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-312">Yes.</span></span> <span data-ttu-id="0a7be-313">Debido a que los usuarios conectados con los centros de datos locales deberían poder tener acceso a las aplicaciones a través de un túnel cifrado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-313">Since users connected to the on-premises data centers must be able to access the applications through an encrypted tunnel.</span></span>
4. <span data-ttu-id="0a7be-314">¿Cuántas máquinas virtuales IaaS necesita para su solución?</span><span class="sxs-lookup"><span data-stu-id="0a7be-314">How many IaaS VMs do you need for your solution?</span></span>

    <span data-ttu-id="0a7be-315">200 máquinas virtuales IaaS.</span><span class="sxs-lookup"><span data-stu-id="0a7be-315">200 IaaS VMs.</span></span> <span data-ttu-id="0a7be-316">App1, App2, App3 y App4 requieren, cada una, 5 servidores web, 2 servidores de aplicaciones y 2 servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-316">App1, App2, App3, and App4 require 5 web servers each, 2 applications servers each, and 2 database servers each.</span></span> <span data-ttu-id="0a7be-317">Hablamos de un total de 9 máquinas virtuales IaaS por aplicación, es decir, 36 máquinas virtuales IaaS.</span><span class="sxs-lookup"><span data-stu-id="0a7be-317">That's a total of 9 IaaS VMs per application, or 36 IaaS VMs.</span></span> <span data-ttu-id="0a7be-318">App5 y App6 requieren, cada una, 5 servidores web y 2 servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-318">App5 and App6 require 5 web servers and 2 database servers each.</span></span> <span data-ttu-id="0a7be-319">Hablamos de un total de 7 máquinas virtuales IaaS por aplicación, es decir, 14 máquinas virtuales IaaS.</span><span class="sxs-lookup"><span data-stu-id="0a7be-319">That's a total of 7 IaaS VMs per application, or 14 IaaS VMs.</span></span> <span data-ttu-id="0a7be-320">Por lo tanto, necesita 50 máquinas virtuales IaaS para todas las aplicaciones en cada una de las regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7be-320">Therefore, you need 50 IaaS VMs for all applications in each Azure region.</span></span> <span data-ttu-id="0a7be-321">Debido a que necesitamos usar 4 regiones, serán 200 máquinas virtuales IaaS.</span><span class="sxs-lookup"><span data-stu-id="0a7be-321">Since we need to use 4 regions, there will be 200 IaaS VMs.</span></span>

    <span data-ttu-id="0a7be-322">También deberá proporcionar servidores DNS en cada red virtual o en los centros de datos locales para resolver los nombres entre las máquinas virtuales IaaS de Azure y la red local.</span><span class="sxs-lookup"><span data-stu-id="0a7be-322">You will also need to provide DNS servers in each VNet, or in your on-premises data centers to resolve name between your Azure IaaS VMs and your on-premises network.</span></span>
5. <span data-ttu-id="0a7be-323">¿Necesita aislar el tráfico según los grupos de máquinas virtuales (es decir, servidores front-end web y servidores de base de datos back-end)?</span><span class="sxs-lookup"><span data-stu-id="0a7be-323">Do you need to isolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>

    <span data-ttu-id="0a7be-324">Sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-324">Yes.</span></span> <span data-ttu-id="0a7be-325">Todas las aplicaciones deberán estar completamente aisladas entre sí y cada nivel de aplicación también deberá estar aislado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-325">Each application should be completely isolated from each other, and each application layer should also be isolated.</span></span>
6. <span data-ttu-id="0a7be-326">¿Necesita controlar el flujo de tráfico mediante aplicaciones virtuales?</span><span class="sxs-lookup"><span data-stu-id="0a7be-326">Do you need to control traffic flow using virtual appliances?</span></span>

    <span data-ttu-id="0a7be-327">No.</span><span class="sxs-lookup"><span data-stu-id="0a7be-327">No.</span></span> <span data-ttu-id="0a7be-328">Se pueden usar aplicaciones virtuales para brindar más control sobre el flujo de tráfico, incluido el registro del plano de datos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-328">Virtual appliances can be used to provide more control over traffic flow, including more detailed data plane logging.</span></span>
7. <span data-ttu-id="0a7be-329">¿Los usuarios necesitan distintos conjuntos de permisos para los diferentes recursos de Azure?</span><span class="sxs-lookup"><span data-stu-id="0a7be-329">Do users need different sets of permissions to different Azure resources?</span></span>

    <span data-ttu-id="0a7be-330">Sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-330">Yes.</span></span> <span data-ttu-id="0a7be-331">El equipo de red necesita tener el control completo de la configuración de las redes virtuales, mientras que los desarrolladores solo debería poder implementar sus máquinas virtuales en las subredes existentes previamente.</span><span class="sxs-lookup"><span data-stu-id="0a7be-331">The networking team needs full control on the virtual networking settings, while developers should only be able to deploy their VMs to pre-existing subnets.</span></span>

### <a name="design"></a><span data-ttu-id="0a7be-332">Diseño</span><span class="sxs-lookup"><span data-stu-id="0a7be-332">Design</span></span>
<span data-ttu-id="0a7be-333">Deberá cumplir con las suscripciones, redes virtuales, subredes y NSG especificados en el diseño.</span><span class="sxs-lookup"><span data-stu-id="0a7be-333">You should follow the design specifying subscriptions, VNets, subnets, and NSGs.</span></span> <span data-ttu-id="0a7be-334">Si bien aquí los analizaremos, deberá obtener más información sobre los [NSG](virtual-networks-nsg.md) antes de finalizar el diseño.</span><span class="sxs-lookup"><span data-stu-id="0a7be-334">We will discuss NSGs here, but you should learn more about [NSGs](virtual-networks-nsg.md) before finishing your design.</span></span>

<span data-ttu-id="0a7be-335">**Cantidad de suscripciones y redes virtuales**</span><span class="sxs-lookup"><span data-stu-id="0a7be-335">**Number of subscriptions and VNets**</span></span>

<span data-ttu-id="0a7be-336">Los siguientes requisitos están relacionados con las suscripciones y las redes virtuales:</span><span class="sxs-lookup"><span data-stu-id="0a7be-336">The following requirements are related to subscriptions and VNets:</span></span>

* <span data-ttu-id="0a7be-337">El consumo de recursos de las unidades de negocio no debería afectar a ninguna otra unidad de negocio.</span><span class="sxs-lookup"><span data-stu-id="0a7be-337">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="0a7be-338">Deberá minimizar la cantidad de redes virtuales y las subredes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-338">You should minimize the amount of VNets and subnets.</span></span>
* <span data-ttu-id="0a7be-339">Cada unidad de negocio debe tener una sola red virtual de prueba/desarrollo para usar para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a7be-339">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="0a7be-340">Cada aplicación se hospeda en 2 centros de datos de Azure distintos por continente (Norteamérica y Europa).</span><span class="sxs-lookup"><span data-stu-id="0a7be-340">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>

<span data-ttu-id="0a7be-341">Según esos requisitos, necesitará una suscripción para cada unidad de negocio.</span><span class="sxs-lookup"><span data-stu-id="0a7be-341">Based on those requirements, you need a subscription for each business unit.</span></span> <span data-ttu-id="0a7be-342">De ese modo, el consumo de recursos de una unidad de negocio no se contará de cara a los límites de otras unidades de negocio.</span><span class="sxs-lookup"><span data-stu-id="0a7be-342">That way, consumption of resources from a business unit will not count towards limits for other business units.</span></span> <span data-ttu-id="0a7be-343">Además, dado que desea minimizar la cantidad de redes virtuales, deberá considerar la posibilidad de usar el patrón **una suscripción por unidad de negocio, dos redes virtuales por grupo de aplicaciones** , tal como aparece a continuación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-343">And since you want to minimize the number of VNets, you should consider using the **one subscription per business unit, two VNets per group of apps** pattern as seen below.</span></span>

![Suscripción única](./media/virtual-network-vnet-plan-design-arm/figure9.png)

<span data-ttu-id="0a7be-345">También deberá especificar el espacio de direcciones para cada red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-345">You also need to specify the address space for each VNet.</span></span> <span data-ttu-id="0a7be-346">Dado que necesita tener conectividad entre los centros de datos locales y las regiones de Azure, el espacio de direcciones que las redes virtuales de Azure usan no puede tener un conflicto con la red local y el espacio de direcciones que usa cada red virtual no debería tener conflictos con ninguna otra red virtual existente.</span><span class="sxs-lookup"><span data-stu-id="0a7be-346">Since you need connectivity between the on-premises data centers and the Azure regions, the address space used for Azure VNets cannot clash with the on-premises network, and the address space used by each VNet should not clash with other existing VNets.</span></span> <span data-ttu-id="0a7be-347">Puede usar los espacios de direcciones de la tabla siguiente para cumplir estos requisitos.</span><span class="sxs-lookup"><span data-stu-id="0a7be-347">You could use the address spaces in the table below to satisfy these requirements.</span></span>  

| <span data-ttu-id="0a7be-348">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="0a7be-348">**Subscription**</span></span> | <span data-ttu-id="0a7be-349">**Red virtual**</span><span class="sxs-lookup"><span data-stu-id="0a7be-349">**VNet**</span></span> | <span data-ttu-id="0a7be-350">**Región de Azure**</span><span class="sxs-lookup"><span data-stu-id="0a7be-350">**Azure region**</span></span> | <span data-ttu-id="0a7be-351">**Espacio de direcciones**</span><span class="sxs-lookup"><span data-stu-id="0a7be-351">**Address space**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0a7be-352">BU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-352">BU1</span></span> |<span data-ttu-id="0a7be-353">ProdBU1US1</span><span class="sxs-lookup"><span data-stu-id="0a7be-353">ProdBU1US1</span></span> |<span data-ttu-id="0a7be-354">Oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-354">West US</span></span> |<span data-ttu-id="0a7be-355">172.16.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-355">172.16.0.0/16</span></span> |
| <span data-ttu-id="0a7be-356">BU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-356">BU1</span></span> |<span data-ttu-id="0a7be-357">ProdBU1US2</span><span class="sxs-lookup"><span data-stu-id="0a7be-357">ProdBU1US2</span></span> |<span data-ttu-id="0a7be-358">Este de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-358">East US</span></span> |<span data-ttu-id="0a7be-359">172.17.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-359">172.17.0.0/16</span></span> |
| <span data-ttu-id="0a7be-360">BU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-360">BU1</span></span> |<span data-ttu-id="0a7be-361">ProdBU1EU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-361">ProdBU1EU1</span></span> |<span data-ttu-id="0a7be-362">Europa del Norte</span><span class="sxs-lookup"><span data-stu-id="0a7be-362">North Europe</span></span> |<span data-ttu-id="0a7be-363">172.18.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-363">172.18.0.0/16</span></span> |
| <span data-ttu-id="0a7be-364">BU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-364">BU1</span></span> |<span data-ttu-id="0a7be-365">ProdBU1EU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-365">ProdBU1EU2</span></span> |<span data-ttu-id="0a7be-366">Europa occidental</span><span class="sxs-lookup"><span data-stu-id="0a7be-366">West Europe</span></span> |<span data-ttu-id="0a7be-367">172.19.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-367">172.19.0.0/16</span></span> |
| <span data-ttu-id="0a7be-368">BU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-368">BU1</span></span> |<span data-ttu-id="0a7be-369">TestDevBU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-369">TestDevBU1</span></span> |<span data-ttu-id="0a7be-370">Oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-370">West US</span></span> |<span data-ttu-id="0a7be-371">172.20.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-371">172.20.0.0/16</span></span> |
| <span data-ttu-id="0a7be-372">BU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-372">BU2</span></span> |<span data-ttu-id="0a7be-373">TestDevBU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-373">TestDevBU2</span></span> |<span data-ttu-id="0a7be-374">Oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-374">West US</span></span> |<span data-ttu-id="0a7be-375">172.21.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-375">172.21.0.0/16</span></span> |
| <span data-ttu-id="0a7be-376">BU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-376">BU2</span></span> |<span data-ttu-id="0a7be-377">ProdBU2US1</span><span class="sxs-lookup"><span data-stu-id="0a7be-377">ProdBU2US1</span></span> |<span data-ttu-id="0a7be-378">Oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-378">West US</span></span> |<span data-ttu-id="0a7be-379">172.22.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-379">172.22.0.0/16</span></span> |
| <span data-ttu-id="0a7be-380">BU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-380">BU2</span></span> |<span data-ttu-id="0a7be-381">ProdBU2US2</span><span class="sxs-lookup"><span data-stu-id="0a7be-381">ProdBU2US2</span></span> |<span data-ttu-id="0a7be-382">Este de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="0a7be-382">East US</span></span> |<span data-ttu-id="0a7be-383">172.23.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-383">172.23.0.0/16</span></span> |
| <span data-ttu-id="0a7be-384">BU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-384">BU2</span></span> |<span data-ttu-id="0a7be-385">ProdBU2EU1</span><span class="sxs-lookup"><span data-stu-id="0a7be-385">ProdBU2EU1</span></span> |<span data-ttu-id="0a7be-386">Europa del Norte</span><span class="sxs-lookup"><span data-stu-id="0a7be-386">North Europe</span></span> |<span data-ttu-id="0a7be-387">172.24.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-387">172.24.0.0/16</span></span> |
| <span data-ttu-id="0a7be-388">BU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-388">BU2</span></span> |<span data-ttu-id="0a7be-389">ProdBU2EU2</span><span class="sxs-lookup"><span data-stu-id="0a7be-389">ProdBU2EU2</span></span> |<span data-ttu-id="0a7be-390">Europa occidental</span><span class="sxs-lookup"><span data-stu-id="0a7be-390">West Europe</span></span> |<span data-ttu-id="0a7be-391">172.25.0.0/16</span><span class="sxs-lookup"><span data-stu-id="0a7be-391">172.25.0.0/16</span></span> |

<span data-ttu-id="0a7be-392">**Cantidad de subredes y NSG**</span><span class="sxs-lookup"><span data-stu-id="0a7be-392">**Number of subnets and NSGs**</span></span>

<span data-ttu-id="0a7be-393">Los siguientes requisitos están relacionados con las subredes y los NSG:</span><span class="sxs-lookup"><span data-stu-id="0a7be-393">The following requirements are related to subnets and NSGs:</span></span>

* <span data-ttu-id="0a7be-394">Deberá minimizar la cantidad de redes virtuales y las subredes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-394">You should minimize the amount of VNets and subnets.</span></span>
* <span data-ttu-id="0a7be-395">Las aplicaciones están completamente aisladas entre sí.</span><span class="sxs-lookup"><span data-stu-id="0a7be-395">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="0a7be-396">Los clientes pueden tener acceso a cada aplicación a través de Internet, mediante el protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="0a7be-396">Each application can be accessed by customers over the Internet using HTTP.</span></span>
* <span data-ttu-id="0a7be-397">Los usuarios conectados a los centros de datos locales pueden tener acceso a cada aplicación mediante un túnel cifrado.</span><span class="sxs-lookup"><span data-stu-id="0a7be-397">Each application can be accessed by users connected to the on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="0a7be-398">La conexión a los centros de datos locales debe usar dispositivos VPN existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-398">Connection to on-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="0a7be-399">Las bases de datos de cada ubicación se deberán replicar en otras ubicaciones de Azure una vez al día.</span><span class="sxs-lookup"><span data-stu-id="0a7be-399">The databases in each location should replicate to other Azure locations once a day.</span></span>

<span data-ttu-id="0a7be-400">Según esos requisitos, podría usar una subred por nivel de aplicación y usar NSG para filtrar el tráfico por aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a7be-400">Based on those requirements, you could use one subnet per application layer, and use NSGs to filter traffic per application.</span></span> <span data-ttu-id="0a7be-401">De ese modo, solo tiene 3 subredes en cada red virtual (front-end, nivel de aplicación y nivel de datos) y un NSG por aplicación por subred.</span><span class="sxs-lookup"><span data-stu-id="0a7be-401">That way, you only have 3 subnets in each VNet (front end, application layer, and data layer) and one NSG per application per subnet.</span></span> <span data-ttu-id="0a7be-402">En este caso, deberá considerar la posibilidad de usar el patrón de diseño **una subred por nivel de aplicación, NSG por aplicación** .</span><span class="sxs-lookup"><span data-stu-id="0a7be-402">In this case, you should consider using the **one subnet per application layer, NSGs per app** design pattern.</span></span> <span data-ttu-id="0a7be-403">La siguiente ilustración muestra cómo se usa el patrón de diseño que representa la red virtual **ProdBU1US1** .</span><span class="sxs-lookup"><span data-stu-id="0a7be-403">The figure below shows the use of the design pattern representing the **ProdBU1US1** VNet.</span></span>

![Una subred por nivel, un NSG por aplicación por nivel](./media/virtual-network-vnet-plan-design-arm/figure11.png)

<span data-ttu-id="0a7be-405">Sin embargo, también necesita crear una subred adicional para la conectividad de VPN entre las redes virtuales y los centros de datos locales.</span><span class="sxs-lookup"><span data-stu-id="0a7be-405">However, you also need to create an extra subnet for the VPN connectivity between the VNets, and your on-premises data centers.</span></span> <span data-ttu-id="0a7be-406">También deberá especificar el espacio de direcciones para cada subred.</span><span class="sxs-lookup"><span data-stu-id="0a7be-406">And you need to specify the address space for each subnet.</span></span> <span data-ttu-id="0a7be-407">La siguiente ilustración muestra una solución de ejemplo para la red virtual **ProdBU1US1** .</span><span class="sxs-lookup"><span data-stu-id="0a7be-407">The figure below shows a sample solution for **ProdBU1US1** VNet.</span></span> <span data-ttu-id="0a7be-408">Este escenario se podría replicar para cada red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-408">You would replicate this scenario for each VNet.</span></span> <span data-ttu-id="0a7be-409">Cada color representa una aplicación distinta.</span><span class="sxs-lookup"><span data-stu-id="0a7be-409">Each color represents a different application.</span></span>

![Red virtual de ejemplo](./media/virtual-network-vnet-plan-design-arm/figure10.png)

<span data-ttu-id="0a7be-411">**Control de acceso**</span><span class="sxs-lookup"><span data-stu-id="0a7be-411">**Access Control**</span></span>

<span data-ttu-id="0a7be-412">Los siguientes requisitos están relacionados con el control de acceso:</span><span class="sxs-lookup"><span data-stu-id="0a7be-412">The following requirements are related to access control:</span></span>

* <span data-ttu-id="0a7be-413">El grupo de redes de la empresa debe tener el control total de la configuración de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="0a7be-413">The company's networking group should have full control over the VNet configuration.</span></span>
* <span data-ttu-id="0a7be-414">Los desarrolladores de cada unidad de negocio solo deberían poder implementar máquinas virtuales en las subredes existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-414">Developers in each business unit should only be able to deploy VMs to existing subnets.</span></span>

<span data-ttu-id="0a7be-415">Según esos requisitos, podría agregar usuarios desde el equipo de red al rol **Colaborador de la red** integrado en cada suscripción y, además, crear un rol personalizado para los desarrolladores de aplicaciones en cada suscripción y otorgarles derechos para agregar máquinas virtuales a las subredes existentes.</span><span class="sxs-lookup"><span data-stu-id="0a7be-415">Based on those requirements, you could add users from the networking team to the built-in **Network Contributor** role in each subscription; and create a custom role for the application developers in each subscription giving them rights to add VMs to existing subnets.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0a7be-416">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0a7be-416">Next steps</span></span>
* <span data-ttu-id="0a7be-417">[Implementar una red virtual](virtual-networks-create-vnet-arm-template-click.md) en función de un escenario.</span><span class="sxs-lookup"><span data-stu-id="0a7be-417">[Deploy a virtual network](virtual-networks-create-vnet-arm-template-click.md) based on a scenario.</span></span>
* <span data-ttu-id="0a7be-418">Comprender cómo [equilibrar la carga](../load-balancer/load-balancer-overview.md) de las máquinas virtuales IaaS y [administrar el enrutamiento en varias regiones de Azure](../traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0a7be-418">Understand how to [load balance](../load-balancer/load-balancer-overview.md) IaaS VMs and [manage routing over multiple Azure regions](../traffic-manager/traffic-manager-overview.md).</span></span>
* <span data-ttu-id="0a7be-419">Obtener más información sobre los [NSG y cómo planear y diseñar](virtual-networks-nsg.md) una solución de NSG.</span><span class="sxs-lookup"><span data-stu-id="0a7be-419">Learn more about [NSGs and how to plan and design](virtual-networks-nsg.md) an NSG solution.</span></span>
* <span data-ttu-id="0a7be-420">Obtener más información sobre las [opciones de conectividad local y redes virtuales](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span><span class="sxs-lookup"><span data-stu-id="0a7be-420">Learn more about your [cross-premises and VNet connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span></span>

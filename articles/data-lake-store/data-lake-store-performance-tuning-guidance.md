---
title: "Directrices de ajuste de rendimiento de datos Lake almacén aaaAzure | Documentos de Microsoft"
description: "Directrices para la optimización del rendimiento de Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="61f51-103">Optimización del rendimiento de Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="61f51-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="61f51-104">Data Lake Store permite un alto rendimiento en el movimiento de datos y el análisis de consumo de la entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="61f51-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="61f51-105">En el almacén de Data Lake de Azure, el uso de rendimiento disponible: cantidad de Hola de datos que pueden leer o escritos por segundo: es un rendimiento óptimo hello tooget importante.</span><span class="sxs-lookup"><span data-stu-id="61f51-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="61f51-106">Se consigue realizando tantas lecturas y escrituras en paralelo como sea posible.</span><span class="sxs-lookup"><span data-stu-id="61f51-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Rendimiento de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="61f51-108">Almacén de Azure Data Lake puede escalar tooprovide hello es necesario el rendimiento para todos los escenario de análisis.</span><span class="sxs-lookup"><span data-stu-id="61f51-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="61f51-109">De forma predeterminada, una cuenta de almacén de Data Lake de Azure proporciona automáticamente suficiente rendimiento necesidades de hello toomeet de una categoría amplia de casos de uso.</span><span class="sxs-lookup"><span data-stu-id="61f51-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="61f51-110">Para los casos de Hola donde los clientes se ejecutan en el límite predeterminado de hello, Hola cuenta ADLS puede ser tooprovide configurado más rendimiento por ponerse en contacto con soporte técnico de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="61f51-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="61f51-111">Ingesta de datos</span><span class="sxs-lookup"><span data-stu-id="61f51-111">Data ingestion</span></span>

<span data-ttu-id="61f51-112">Cuando se recopila datos de un tooADLS de sistema de origen, es importante tooconsider que Hola tooADLS de conectividad de red, hardware de red de origen y hardware de origen puede ser un cuello de botella de Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Rendimiento de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="61f51-114">Es importante tooensure que Hola movimiento de datos no se ve afectado por estos factores.</span><span class="sxs-lookup"><span data-stu-id="61f51-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="61f51-115">Hardware de origen</span><span class="sxs-lookup"><span data-stu-id="61f51-115">Source Hardware</span></span>

<span data-ttu-id="61f51-116">Si usas máquinas locales o máquinas virtuales en Azure, debe seleccionar cuidadosamente hardware adecuado Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="61f51-117">Para Hardware de disco de origen, prefiera SSD tooHDDs y elegir el hardware del disco con ejes más rápidos.</span><span class="sxs-lookup"><span data-stu-id="61f51-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="61f51-118">Para el Hardware de red de origen, utilice más rápido posible de NIC Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="61f51-119">En Azure, se recomienda que las máquinas virtuales de Azure D14 que tienen disco adecuadamente eficaz de Hola y hardware de red.</span><span class="sxs-lookup"><span data-stu-id="61f51-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="61f51-120">Almacén de Data Lake de tooAzure de conectividad de red</span><span class="sxs-lookup"><span data-stu-id="61f51-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="61f51-121">conectividad de red de Hello entre los datos de origen y el almacén de Azure Data Lake a veces puede ser un cuello de botella de Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="61f51-122">Cuando los datos de origen están en local, considere el uso de un vínculo dedicado con [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="61f51-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="61f51-123">Si los datos de origen están en Azure, el rendimiento de hello será mejor cuando los datos de Hola Hola misma región de Azure como almacén de Data Lake Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="61f51-124">Configuración de herramientas de ingesta de datos para lograr una paralelización máxima</span><span class="sxs-lookup"><span data-stu-id="61f51-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="61f51-125">Una vez que se ha solucionado el hardware de origen de Hola y anteriores cuellos de botella de conectividad de red, está listo tooconfigure las herramientas de recopilación.</span><span class="sxs-lookup"><span data-stu-id="61f51-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="61f51-126">Hello tabla siguiente resume las opciones de clave de hello varias herramientas de ingesta populares y ofrece un rendimiento detallado para la optimización de artículos para ellos.</span><span class="sxs-lookup"><span data-stu-id="61f51-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="61f51-127">toolearn más acerca de qué herramienta toouse para su escenario, visite este [artículo](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="61f51-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="61f51-128">Herramienta</span><span class="sxs-lookup"><span data-stu-id="61f51-128">Tool</span></span>               | <span data-ttu-id="61f51-129">Configuración</span><span class="sxs-lookup"><span data-stu-id="61f51-129">Settings</span></span>     | <span data-ttu-id="61f51-130">Más detalles</span><span class="sxs-lookup"><span data-stu-id="61f51-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="61f51-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="61f51-131">Powershell</span></span>       | <span data-ttu-id="61f51-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="61f51-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="61f51-133">Vínculo</span><span class="sxs-lookup"><span data-stu-id="61f51-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="61f51-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="61f51-134">AdlCopy</span></span>    | <span data-ttu-id="61f51-135">Unidades de Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="61f51-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="61f51-136">Vínculo</span><span class="sxs-lookup"><span data-stu-id="61f51-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="61f51-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="61f51-137">DistCp</span></span>            | <span data-ttu-id="61f51-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="61f51-138">-m (mapper)</span></span>   | [<span data-ttu-id="61f51-139">Vínculo</span><span class="sxs-lookup"><span data-stu-id="61f51-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="61f51-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="61f51-140">Azure Data Factory</span></span>| <span data-ttu-id="61f51-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="61f51-141">parallelCopies</span></span>    | [<span data-ttu-id="61f51-142">Vínculo</span><span class="sxs-lookup"><span data-stu-id="61f51-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="61f51-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="61f51-143">Sqoop</span></span>           | <span data-ttu-id="61f51-144">fs.azure.block.size, -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="61f51-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="61f51-145">Vínculo</span><span class="sxs-lookup"><span data-stu-id="61f51-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="61f51-146">Estructuración del conjunto de datos</span><span class="sxs-lookup"><span data-stu-id="61f51-146">Structure your data set</span></span>

<span data-ttu-id="61f51-147">Cuando los datos se almacenan en el almacén de Data Lake, tamaño del archivo hello, número de archivos y la estructura de carpetas tiene un impacto en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="61f51-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="61f51-148">Hello siguiente sección describe los procedimientos recomendados en estas áreas.</span><span class="sxs-lookup"><span data-stu-id="61f51-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="61f51-149">Tamaño de archivo</span><span class="sxs-lookup"><span data-stu-id="61f51-149">File size</span></span>

<span data-ttu-id="61f51-150">Normalmente, los motores de análisis como HDInsight y Azure Data Lake Analytics tienen una sobrecarga por cada archivo.</span><span class="sxs-lookup"><span data-stu-id="61f51-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="61f51-151">Si los datos se almacenan en muchos archivos pequeños, puede afectar desfavorablemente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="61f51-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="61f51-152">En general, organice los datos en archivos de un tamaño mayor para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="61f51-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="61f51-153">Como regla general, organice los conjuntos de datos en archivos de 256 MB o más.</span><span class="sxs-lookup"><span data-stu-id="61f51-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="61f51-154">En algunos casos, como imágenes y datos binarios, no es posible tooprocess ellas en paralelo.</span><span class="sxs-lookup"><span data-stu-id="61f51-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="61f51-155">En estos casos, se recomienda archivos individuales de tookeep menos de 2GB.</span><span class="sxs-lookup"><span data-stu-id="61f51-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="61f51-156">A veces, las canalizaciones de datos tiene un control limitado sobre datos sin procesar de hello, que tiene una gran cantidad de archivos pequeños.</span><span class="sxs-lookup"><span data-stu-id="61f51-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="61f51-157">Se recomienda toohave proceso "cocina" que genera más grandes archivos toouse para aplicaciones de nivel inferior.</span><span class="sxs-lookup"><span data-stu-id="61f51-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="61f51-158">Organización de los datos de serie temporal en carpetas</span><span class="sxs-lookup"><span data-stu-id="61f51-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="61f51-159">Las cargas de trabajo de Hive y ADLA, eliminación de la partición de datos de series temporales puede ayudar a algunas consultas solo un subconjunto de datos de Hola que mejora el rendimiento de lectura.</span><span class="sxs-lookup"><span data-stu-id="61f51-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="61f51-160">Aquellas canalizaciones que ingieren datos de serie temporal suelen ubicar sus archivos con una nomenclatura muy estructurada para los archivos y las carpetas.</span><span class="sxs-lookup"><span data-stu-id="61f51-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="61f51-161">A continuación se muestra un ejemplo muy común para los datos estructurados por fecha:</span><span class="sxs-lookup"><span data-stu-id="61f51-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="61f51-162">Observe que la información de fecha y hora de hello aparece como carpetas y en el nombre de archivo de Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="61f51-163">Fecha y hora, de hello aquí te mostramos un patrón común</span><span class="sxs-lookup"><span data-stu-id="61f51-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="61f51-164">De nuevo, elección de Hola que haga con la organización de carpetas y archivos de hello debería optimizar para los tamaños de archivo más grandes de Hola y un número razonable de archivos de cada carpeta.</span><span class="sxs-lookup"><span data-stu-id="61f51-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="61f51-165">Optimización de trabajos con muchas operaciones de E/S en las cargas de trabajo de Hadoop y Spark en HDInsight</span><span class="sxs-lookup"><span data-stu-id="61f51-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="61f51-166">Los trabajos se dividen en uno de los siguientes tres categorías de hello:</span><span class="sxs-lookup"><span data-stu-id="61f51-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="61f51-167">**Gran uso de CPU.**</span><span class="sxs-lookup"><span data-stu-id="61f51-167">**CPU intensive.**</span></span>  <span data-ttu-id="61f51-168">Estos trabajos tienen tiempos de cálculo largos con tiempos de E/S mínimos.</span><span class="sxs-lookup"><span data-stu-id="61f51-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="61f51-169">Algunos ejemplos son los trabajos de procesamiento del lenguaje natural y el aprendizaje automático.</span><span class="sxs-lookup"><span data-stu-id="61f51-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="61f51-170">**Gran uso de memoria.**</span><span class="sxs-lookup"><span data-stu-id="61f51-170">**Memory intensive.**</span></span>  <span data-ttu-id="61f51-171">Estos trabajos usan una gran cantidad de memoria.</span><span class="sxs-lookup"><span data-stu-id="61f51-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="61f51-172">Algunos ejemplos son los trabajos de análisis en tiempo real y PageRank.</span><span class="sxs-lookup"><span data-stu-id="61f51-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="61f51-173">**Gran uso de operaciones de E/S.**</span><span class="sxs-lookup"><span data-stu-id="61f51-173">**I/O intensive.**</span></span>  <span data-ttu-id="61f51-174">Estos trabajos dedican la mayor parte de su tiempo a realizar operaciones de E/S.</span><span class="sxs-lookup"><span data-stu-id="61f51-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="61f51-175">Un ejemplo común es un trabajo de copia que solo realice operaciones de lectura y escritura.</span><span class="sxs-lookup"><span data-stu-id="61f51-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="61f51-176">Otros ejemplos incluyen los trabajos de preparación de datos que leer una gran cantidad de datos, realice alguna transformación de datos y, a continuación, escribe Hola almacén de datos de back-toohello.</span><span class="sxs-lookup"><span data-stu-id="61f51-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="61f51-177">Hola instrucciones es solo es aplicable tooI/O intensivo los trabajos.</span><span class="sxs-lookup"><span data-stu-id="61f51-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="61f51-178">Consideraciones generales para un clúster de HDInsight</span><span class="sxs-lookup"><span data-stu-id="61f51-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="61f51-179">**Versiones de HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="61f51-179">**HDInsight versions.**</span></span> <span data-ttu-id="61f51-180">Para obtener el mejor rendimiento, usar Hola última versión de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="61f51-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="61f51-181">**Regiones.**</span><span class="sxs-lookup"><span data-stu-id="61f51-181">**Regions.**</span></span> <span data-ttu-id="61f51-182">Coloque el almacén de Data Lake de hello en hello misma región que el clúster de HDInsight Hola.</span><span class="sxs-lookup"><span data-stu-id="61f51-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="61f51-183">Un clúster de HDInsight se compone de dos nodos principales y algunos nodos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="61f51-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="61f51-184">Cada nodo de trabajo proporciona un número específico de núcleos y memoria, lo que viene determinada por hello tipo de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="61f51-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="61f51-185">Cuando se ejecuta un trabajo, YARN es negociador de recursos de Hola que asigna memoria disponible de Hola y contenedores de toocreate de núcleos.</span><span class="sxs-lookup"><span data-stu-id="61f51-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="61f51-186">Cada contenedor ejecuta trabajo Hola de hello tareas toocomplete necesarios.</span><span class="sxs-lookup"><span data-stu-id="61f51-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="61f51-187">Los contenedores se ejecutan en paralelo tooprocess tareas rápidamente.</span><span class="sxs-lookup"><span data-stu-id="61f51-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="61f51-188">Por lo tanto, el rendimiento se mejora ejecutando tantos contenedores en paralelo como sea posible.</span><span class="sxs-lookup"><span data-stu-id="61f51-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="61f51-189">Hay tres capas dentro de un clúster de HDInsight que pueden estar atento tooincrease Hola número de contenedores y usar rendimiento todas disponible.</span><span class="sxs-lookup"><span data-stu-id="61f51-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="61f51-190">**Nivel físico**</span><span class="sxs-lookup"><span data-stu-id="61f51-190">**Physical layer**</span></span>
* <span data-ttu-id="61f51-191">**Nivel de YARN**</span><span class="sxs-lookup"><span data-stu-id="61f51-191">**YARN layer**</span></span>
* <span data-ttu-id="61f51-192">**Nivel de carga de trabajo**</span><span class="sxs-lookup"><span data-stu-id="61f51-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="61f51-193">Nivel físico</span><span class="sxs-lookup"><span data-stu-id="61f51-193">Physical Layer</span></span>

<span data-ttu-id="61f51-194">**Ejecute el clúster con más nodos o máquinas virtuales de un tamaño mayor.**</span><span class="sxs-lookup"><span data-stu-id="61f51-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="61f51-195">Un clúster mayor permitirá toorun más contenedores YARN tal como se muestra en figura Hola siguiente.</span><span class="sxs-lookup"><span data-stu-id="61f51-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Rendimiento de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="61f51-197">**Use máquinas virtuales con más ancho de banda de red.**</span><span class="sxs-lookup"><span data-stu-id="61f51-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="61f51-198">cantidad de Hola de ancho de banda de red puede ser un cuello de botella si hay menos ancho de banda de red que el rendimiento de almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="61f51-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="61f51-199">Diferentes máquinas virtuales tendrán varios tamaños de ancho de banda de red.</span><span class="sxs-lookup"><span data-stu-id="61f51-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="61f51-200">Elija un tipo de máquina virtual que tiene hello más grande posible el ancho de banda.</span><span class="sxs-lookup"><span data-stu-id="61f51-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="61f51-201">Nivel de YARN</span><span class="sxs-lookup"><span data-stu-id="61f51-201">YARN Layer</span></span>

<span data-ttu-id="61f51-202">**Use contenedores de YARN menores.**</span><span class="sxs-lookup"><span data-stu-id="61f51-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="61f51-203">Reducir tamaño de Hola de cada toocreate de contenedor YARN más contenedores con hello misma cantidad de recursos.</span><span class="sxs-lookup"><span data-stu-id="61f51-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Rendimiento de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="61f51-205">En función de la carga de trabajo, siempre habrá un tamaño de contenedor de YARN mínimo que se necesite.</span><span class="sxs-lookup"><span data-stu-id="61f51-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="61f51-206">Si elige un contenedor demasiado pequeño, los trabajos no tendrán memoria suficiente.</span><span class="sxs-lookup"><span data-stu-id="61f51-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="61f51-207">Normalmente, los contenedores de YARN no deben ser menores de 1 GB.</span><span class="sxs-lookup"><span data-stu-id="61f51-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="61f51-208">Es común contenedores YARN de toosee / 3GB.</span><span class="sxs-lookup"><span data-stu-id="61f51-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="61f51-209">Para algunas cargas de trabajo, puede que necesite contenedores de YARN mayores.</span><span class="sxs-lookup"><span data-stu-id="61f51-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="61f51-210">**Aumente los núcleos para cada contenedor de YARN.**</span><span class="sxs-lookup"><span data-stu-id="61f51-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="61f51-211">Aumentar el número de Hola de núcleos tooeach contenedor tooincrease Hola número de tareas en paralelo que se ejecutan en cada contenedor asignado.</span><span class="sxs-lookup"><span data-stu-id="61f51-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="61f51-212">Funciona en las aplicaciones como Spark que ejecutan varias tareas por contenedor.</span><span class="sxs-lookup"><span data-stu-id="61f51-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="61f51-213">Para aplicaciones como Hive que ejecutan un solo subproceso en cada contenedor, es mejor toohave más contenedores en lugar de varios núcleos por contenedor.</span><span class="sxs-lookup"><span data-stu-id="61f51-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="61f51-214">Nivel de carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="61f51-214">Workload Layer</span></span>

<span data-ttu-id="61f51-215">**Use todos los contenedores disponibles.**</span><span class="sxs-lookup"><span data-stu-id="61f51-215">**Use all available containers.**</span></span>  <span data-ttu-id="61f51-216">Establecer número de Hola de tareas toobe igual o mayor que el número de Hola de contenedores disponibles para que se utilizan todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="61f51-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Rendimiento de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="61f51-218">**Los errores de las tareas son costosos.**</span><span class="sxs-lookup"><span data-stu-id="61f51-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="61f51-219">Si cada tarea tiene una gran cantidad de datos tooprocess, a continuación, error de una tarea produce un reintento costoso.</span><span class="sxs-lookup"><span data-stu-id="61f51-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="61f51-220">Por lo tanto, es mejor toocreate más tareas, cada uno de ellos procesa una pequeña cantidad de datos.</span><span class="sxs-lookup"><span data-stu-id="61f51-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="61f51-221">En suma toohello general directrices indicadas anteriormente, cada aplicación tiene parámetros diferentes tootune disponibles para esa aplicación específica.</span><span class="sxs-lookup"><span data-stu-id="61f51-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="61f51-222">tabla de Hello siguiente muestra algunas de hello tooget de parámetros y los vínculos a trabajar con el ajuste del rendimiento para cada aplicación.</span><span class="sxs-lookup"><span data-stu-id="61f51-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="61f51-223">Carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="61f51-223">Workload</span></span>               | <span data-ttu-id="61f51-224">Tareas de tooset de parámetro</span><span class="sxs-lookup"><span data-stu-id="61f51-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="61f51-225">Spark en HDInisight</span><span class="sxs-lookup"><span data-stu-id="61f51-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="61f51-226">Num-executors</span><span class="sxs-lookup"><span data-stu-id="61f51-226">Num-executors</span></span></li><li><span data-ttu-id="61f51-227">Memoria del ejecutor</span><span class="sxs-lookup"><span data-stu-id="61f51-227">Executor-memory</span></span></li><li><span data-ttu-id="61f51-228">Executor-cores</span><span class="sxs-lookup"><span data-stu-id="61f51-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="61f51-229">Hive en HDInsight</span><span class="sxs-lookup"><span data-stu-id="61f51-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="61f51-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="61f51-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="61f51-231">MapReduce en HDInsight</span><span class="sxs-lookup"><span data-stu-id="61f51-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="61f51-232">Mapreduce.map.memory</span><span class="sxs-lookup"><span data-stu-id="61f51-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="61f51-233">Mapreduce.job.maps</span><span class="sxs-lookup"><span data-stu-id="61f51-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="61f51-234">Mapreduce.reduce.memory</span><span class="sxs-lookup"><span data-stu-id="61f51-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="61f51-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="61f51-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="61f51-236">Storm en HDInsight</span><span class="sxs-lookup"><span data-stu-id="61f51-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="61f51-237">Número de procesos de trabajo</span><span class="sxs-lookup"><span data-stu-id="61f51-237">Number of worker processes</span></span></li><li><span data-ttu-id="61f51-238">Número de instancias de ejecutor de spout</span><span class="sxs-lookup"><span data-stu-id="61f51-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="61f51-239">Número de instancias de ejecutor de bolt</span><span class="sxs-lookup"><span data-stu-id="61f51-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="61f51-240">Número de tareas de spout</span><span class="sxs-lookup"><span data-stu-id="61f51-240">Number of spout tasks</span></span></li><li><span data-ttu-id="61f51-241">Número de tareas de bolt</span><span class="sxs-lookup"><span data-stu-id="61f51-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="61f51-242">Consulte también</span><span class="sxs-lookup"><span data-stu-id="61f51-242">See also</span></span>
* [<span data-ttu-id="61f51-243">Información general del Almacén de Azure Data Lake</span><span class="sxs-lookup"><span data-stu-id="61f51-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="61f51-244">Tutorial: Introducción a Análisis de Azure Data Lake mediante el Portal de vista previa de Azure</span><span class="sxs-lookup"><span data-stu-id="61f51-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)

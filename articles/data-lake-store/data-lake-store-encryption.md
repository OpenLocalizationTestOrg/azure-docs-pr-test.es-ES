---
title: "aaaEncryption en almacén de Azure Data Lake | Documentos de Microsoft"
description: "Descripción del funcionamiento del cifrado y la rotación de claves en Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="cc92f-103">Cifrado de datos en Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="cc92f-104">El cifrado en Azure Data Lake Store le ayuda a proteger sus datos, implementar directivas de seguridad de empresa y satisfacer los requisitos de cumplimiento normativo.</span><span class="sxs-lookup"><span data-stu-id="cc92f-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="cc92f-105">En este artículo se proporciona información general de diseño de Hola y se describe algunos de los aspectos técnicos de Hola de implementación.</span><span class="sxs-lookup"><span data-stu-id="cc92f-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="cc92f-106">Data Lake Store admite el cifrado de datos tanto en reposo como en tránsito.</span><span class="sxs-lookup"><span data-stu-id="cc92f-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="cc92f-107">En el caso de datos en reposo, Data Lake Store admite el cifrado transparente "activado de forma predeterminada".</span><span class="sxs-lookup"><span data-stu-id="cc92f-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="cc92f-108">Con más detalle, esto significa:</span><span class="sxs-lookup"><span data-stu-id="cc92f-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="cc92f-109">**De forma predeterminada**: cuando se crea una nueva cuenta de almacén de Data Lake, el valor predeterminado es Hola habilita el cifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="cc92f-110">Por lo tanto, los datos que se almacenan en el almacén de Data Lake siempre están toostoring anterior cifrado en medios persistentes.</span><span class="sxs-lookup"><span data-stu-id="cc92f-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="cc92f-111">Este es el comportamiento de Hola para todos los datos y no se puede cambiar después de crear una cuenta.</span><span class="sxs-lookup"><span data-stu-id="cc92f-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="cc92f-112">**Transparente**: almacén de Data Lake automáticamente cifra datos anteriores toopersisting y descifra los datos anteriores tooretrieval.</span><span class="sxs-lookup"><span data-stu-id="cc92f-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="cc92f-113">cifrado de Hola se configura y administra en el nivel de almacén de Data Lake Hola por un administrador.</span><span class="sxs-lookup"><span data-stu-id="cc92f-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="cc92f-114">No se realizan cambios datos toohello acceder a las API.</span><span class="sxs-lookup"><span data-stu-id="cc92f-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="cc92f-115">Por lo tanto, no se requiere ningún cambio en las aplicaciones y los servicios que interactúan con Data Lake Store a causa del cifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="cc92f-116">Los datos en tránsito (también conocidos como datos en movimiento) también se cifran siempre en Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="cc92f-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="cc92f-117">Por otra parte media toopersistent de tooencrypting datos toostoring anterior, Hola datos están protegidos también siempre a través de HTTPS en tránsito.</span><span class="sxs-lookup"><span data-stu-id="cc92f-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="cc92f-118">HTTPS es Hola único protocolo admitido para hello que REST de almacén de datos Lake interfaces.</span><span class="sxs-lookup"><span data-stu-id="cc92f-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="cc92f-119">Hello diagrama siguiente muestra cómo se convierte en cifra los datos en el almacén de Data Lake:</span><span class="sxs-lookup"><span data-stu-id="cc92f-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagrama de cifrado de datos en Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="cc92f-121">Configuración del cifrado con Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="cc92f-122">El cifrado para Data Lake Store se configura durante la creación de la cuenta y siempre está habilitado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="cc92f-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="cc92f-123">Puede administrar las claves de hello usted mismo o permitir que el almacén de Data Lake toomanage para que (Esto es predeterminado de hello).</span><span class="sxs-lookup"><span data-stu-id="cc92f-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="cc92f-124">Para más información, consulte [Introducción](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="cc92f-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="cc92f-125">Funcionamiento del cifrado en Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="cc92f-126">Hello siguiente información cubre cómo claves de cifrado maestra toomanage y explica Hola tres tipos diferentes de teclas que puede utilizar en el cifrado de datos de almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="cc92f-127">Claves de cifrado maestras</span><span class="sxs-lookup"><span data-stu-id="cc92f-127">Master encryption keys</span></span>

<span data-ttu-id="cc92f-128">Data Lake Store proporciona dos modos de administración de claves de cifrado maestras (MEK).</span><span class="sxs-lookup"><span data-stu-id="cc92f-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="cc92f-129">Por ahora, suponga que clave de cifrado maestra hello es clave de nivel superior de Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="cc92f-130">Clave de cifrado maestra toohello de acceso es necesario toodecrypt los datos almacenados en el almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="cc92f-131">modos de Hello dos para administrar la clave de cifrado maestra Hola son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="cc92f-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="cc92f-132">Claves administradas por el servicio</span><span class="sxs-lookup"><span data-stu-id="cc92f-132">Service managed keys</span></span>
*   <span data-ttu-id="cc92f-133">Claves administradas por el cliente</span><span class="sxs-lookup"><span data-stu-id="cc92f-133">Customer managed keys</span></span>

<span data-ttu-id="cc92f-134">En ambos modos, clave de cifrado maestra Hola se protege mediante el almacenamiento en el almacén de claves de Azure.</span><span class="sxs-lookup"><span data-stu-id="cc92f-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="cc92f-135">El almacén de claves es un servicio completamente administrado y altamente seguro en Azure que puede ser claves criptográficas toosafeguard usado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="cc92f-136">Para más información, consulte [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="cc92f-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="cc92f-137">Ésta es una breve comparación de capacidades que proporcionan dos modos de Hola de administrar MEKs Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="cc92f-138">Claves administradas por el servicio</span><span class="sxs-lookup"><span data-stu-id="cc92f-138">Service managed keys</span></span> | <span data-ttu-id="cc92f-139">Claves administradas por el cliente</span><span class="sxs-lookup"><span data-stu-id="cc92f-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="cc92f-140">¿Cómo se almacenan los datos?</span><span class="sxs-lookup"><span data-stu-id="cc92f-140">How is data stored?</span></span>|<span data-ttu-id="cc92f-141">Siempre cifrado toobeing anterior almacenado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="cc92f-142">Siempre cifrado toobeing anterior almacenado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="cc92f-143">¿Dónde se almacena la clave de cifrado maestra Hola?</span><span class="sxs-lookup"><span data-stu-id="cc92f-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="cc92f-144">Key Vault</span><span class="sxs-lookup"><span data-stu-id="cc92f-144">Key Vault</span></span>|<span data-ttu-id="cc92f-145">Key Vault</span><span class="sxs-lookup"><span data-stu-id="cc92f-145">Key Vault</span></span>|
|<span data-ttu-id="cc92f-146">¿Son cualquier cifrado de claves almacenadas en hello borrar fuera de almacén de claves?</span><span class="sxs-lookup"><span data-stu-id="cc92f-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="cc92f-147">No</span><span class="sxs-lookup"><span data-stu-id="cc92f-147">No</span></span>|<span data-ttu-id="cc92f-148">No</span><span class="sxs-lookup"><span data-stu-id="cc92f-148">No</span></span>|
|<span data-ttu-id="cc92f-149">¿Hola MEK se puede recuperar el almacén de claves?</span><span class="sxs-lookup"><span data-stu-id="cc92f-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="cc92f-150">No.</span><span class="sxs-lookup"><span data-stu-id="cc92f-150">No.</span></span> <span data-ttu-id="cc92f-151">Después de hello que MEK se almacena en el almacén de claves, solo se puede utilizar para el cifrado y descifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="cc92f-152">No.</span><span class="sxs-lookup"><span data-stu-id="cc92f-152">No.</span></span> <span data-ttu-id="cc92f-153">Después de hello que MEK se almacena en el almacén de claves, solo se puede utilizar para el cifrado y descifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="cc92f-154">¿Quién posee instancia del almacén de claves de Hola y Hola MEK?</span><span class="sxs-lookup"><span data-stu-id="cc92f-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="cc92f-155">Hola servicio de almacén de Data Lake</span><span class="sxs-lookup"><span data-stu-id="cc92f-155">hello Data Lake Store service</span></span>|<span data-ttu-id="cc92f-156">Es propietario de instancia de almacén de claves de hello, que pertenece a su propia suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="cc92f-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="cc92f-157">Hola MEK en el almacén de claves puede administrarse mediante software o hardware.</span><span class="sxs-lookup"><span data-stu-id="cc92f-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="cc92f-158">¿Puede revocar el acceso toohello MEK para hello servicio de almacén de Data Lake?</span><span class="sxs-lookup"><span data-stu-id="cc92f-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="cc92f-159">No</span><span class="sxs-lookup"><span data-stu-id="cc92f-159">No</span></span>|<span data-ttu-id="cc92f-160">Sí.</span><span class="sxs-lookup"><span data-stu-id="cc92f-160">Yes.</span></span> <span data-ttu-id="cc92f-161">Puede administrar listas de control de acceso en el almacén de claves y quitar la identidad del servicio de toohello acceso control entradas para el servicio de almacén de Data Lake Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="cc92f-162">¿Puede eliminar permanentemente hello MEK?</span><span class="sxs-lookup"><span data-stu-id="cc92f-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="cc92f-163">No</span><span class="sxs-lookup"><span data-stu-id="cc92f-163">No</span></span>|<span data-ttu-id="cc92f-164">Sí.</span><span class="sxs-lookup"><span data-stu-id="cc92f-164">Yes.</span></span> <span data-ttu-id="cc92f-165">Si elimina hello MEK desde el almacén de claves, no se puede descifrar datos Hola Hola cuenta de almacén de Data Lake por cualquier usuario, incluido el servicio de almacén de Data Lake Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="cc92f-166">Si explícitamente hecho hello MEK anterior toodeleting, desde el almacén de claves, se puede restaurar hello MEK y, a continuación, se pueden recuperar datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="cc92f-167">Sin embargo, si no no hecho hello MEK anterior toodeleting, desde el almacén de claves, Hola Hola cuenta de almacén de Data Lake no pueden nunca se descifran datos a partir de ahí.</span><span class="sxs-lookup"><span data-stu-id="cc92f-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="cc92f-168">Además de esta diferencia de que administra hello MEK e instancia de almacén de claves de hello en el que reside, rest Hola de diseño de Hola Hola mismo para ambos modos.</span><span class="sxs-lookup"><span data-stu-id="cc92f-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="cc92f-169">Es importante tooremember siguiente de hello cuando se elige el modo de Hola para hello las claves de cifrado maestra:</span><span class="sxs-lookup"><span data-stu-id="cc92f-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="cc92f-170">Puede elegir si toouse administradas por el cliente claves o servicio administrado al aprovisionar una cuenta de almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="cc92f-171">Después de aprovisiona una cuenta de almacén de Data Lake, no se puede cambiar el modo de saludo.</span><span class="sxs-lookup"><span data-stu-id="cc92f-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="cc92f-172">Cifrado y descifrado de datos</span><span class="sxs-lookup"><span data-stu-id="cc92f-172">Encryption and decryption of data</span></span>

<span data-ttu-id="cc92f-173">Hay tres tipos de claves que se utilizan en el diseño de Hola de cifrado de datos.</span><span class="sxs-lookup"><span data-stu-id="cc92f-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="cc92f-174">Hello en la tabla siguiente proporciona un resumen:</span><span class="sxs-lookup"><span data-stu-id="cc92f-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="cc92f-175">Clave</span><span class="sxs-lookup"><span data-stu-id="cc92f-175">Key</span></span>                   | <span data-ttu-id="cc92f-176">Abreviatura</span><span class="sxs-lookup"><span data-stu-id="cc92f-176">Abbreviation</span></span> | <span data-ttu-id="cc92f-177">Asociada a</span><span class="sxs-lookup"><span data-stu-id="cc92f-177">Associated with</span></span> | <span data-ttu-id="cc92f-178">Ubicación de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="cc92f-178">Storage location</span></span>                             | <span data-ttu-id="cc92f-179">Escriba</span><span class="sxs-lookup"><span data-stu-id="cc92f-179">Type</span></span>       | <span data-ttu-id="cc92f-180">Notas</span><span class="sxs-lookup"><span data-stu-id="cc92f-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cc92f-181">Clave de cifrado maestra</span><span class="sxs-lookup"><span data-stu-id="cc92f-181">Master Encryption Key</span></span> | <span data-ttu-id="cc92f-182">MEK</span><span class="sxs-lookup"><span data-stu-id="cc92f-182">MEK</span></span>          | <span data-ttu-id="cc92f-183">Cuenta de Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-183">A Data Lake Store account</span></span> | <span data-ttu-id="cc92f-184">Key Vault</span><span class="sxs-lookup"><span data-stu-id="cc92f-184">Key Vault</span></span>                              | <span data-ttu-id="cc92f-185">Asimétrica</span><span class="sxs-lookup"><span data-stu-id="cc92f-185">Asymmetric</span></span> | <span data-ttu-id="cc92f-186">Puede administrarla Data Lake Store o usted.</span><span class="sxs-lookup"><span data-stu-id="cc92f-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="cc92f-187">Clave de cifrado de datos</span><span class="sxs-lookup"><span data-stu-id="cc92f-187">Data Encryption Key</span></span>   | <span data-ttu-id="cc92f-188">DEK</span><span class="sxs-lookup"><span data-stu-id="cc92f-188">DEK</span></span>          | <span data-ttu-id="cc92f-189">Cuenta de Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-189">A Data Lake Store account</span></span> | <span data-ttu-id="cc92f-190">Almacenamiento persistente, administrada por el servicio Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="cc92f-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="cc92f-191">Simétrica</span><span class="sxs-lookup"><span data-stu-id="cc92f-191">Symmetric</span></span>  | <span data-ttu-id="cc92f-192">Hola DEK se cifra mediante hello MEK.</span><span class="sxs-lookup"><span data-stu-id="cc92f-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="cc92f-193">Hola que DEK cifrada es lo que se almacena en medios persistentes.</span><span class="sxs-lookup"><span data-stu-id="cc92f-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="cc92f-194">Clave de cifrado de bloque</span><span class="sxs-lookup"><span data-stu-id="cc92f-194">Block Encryption Key</span></span>  | <span data-ttu-id="cc92f-195">BEK</span><span class="sxs-lookup"><span data-stu-id="cc92f-195">BEK</span></span>          | <span data-ttu-id="cc92f-196">Un bloque de datos</span><span class="sxs-lookup"><span data-stu-id="cc92f-196">A block of data</span></span> | <span data-ttu-id="cc92f-197">None</span><span class="sxs-lookup"><span data-stu-id="cc92f-197">None</span></span>                                         | <span data-ttu-id="cc92f-198">Simétrica</span><span class="sxs-lookup"><span data-stu-id="cc92f-198">Symmetric</span></span>  | <span data-ttu-id="cc92f-199">Hola BEK se deriva de bloque de datos de Hola y de saludo DEK.</span><span class="sxs-lookup"><span data-stu-id="cc92f-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="cc92f-200">Hola siguiente diagrama muestra estos conceptos:</span><span class="sxs-lookup"><span data-stu-id="cc92f-200">hello following diagram illustrates these concepts:</span></span>

![Claves de cifrado de datos](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="cc92f-202">Algoritmo de seudoprueba si hay un archivo toobe descifrado:</span><span class="sxs-lookup"><span data-stu-id="cc92f-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="cc92f-203">Comprobar si Hola DEK para cuenta de almacén de Data Lake hello es almacenada en caché y preparado para su uso.</span><span class="sxs-lookup"><span data-stu-id="cc92f-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="cc92f-204">Si no es así, leer Hola cifra la DEK desde el almacenamiento persistente y enviarlo tooKey almacén toobe descifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="cc92f-205">Hola de caché descifra la DEK en memoria.</span><span class="sxs-lookup"><span data-stu-id="cc92f-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="cc92f-206">Ahora está listo toouse.</span><span class="sxs-lookup"><span data-stu-id="cc92f-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="cc92f-207">Para cada bloque de datos en el archivo hello:</span><span class="sxs-lookup"><span data-stu-id="cc92f-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="cc92f-208">Hola de lectura cifrarse bloque de datos desde el almacenamiento persistente.</span><span class="sxs-lookup"><span data-stu-id="cc92f-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="cc92f-209">Generar hello BEK de hello DEK y bloque cifrado de Hola de datos.</span><span class="sxs-lookup"><span data-stu-id="cc92f-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="cc92f-210">Usar datos de hello BEK toodecrypt.</span><span class="sxs-lookup"><span data-stu-id="cc92f-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="cc92f-211">Algoritmo de seudoprueba cuando un bloque de datos cifrado de toobe:</span><span class="sxs-lookup"><span data-stu-id="cc92f-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="cc92f-212">Comprobar si Hola DEK para cuenta de almacén de Data Lake hello es almacenada en caché y preparado para su uso.</span><span class="sxs-lookup"><span data-stu-id="cc92f-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="cc92f-213">Si no es así, leer Hola cifra la DEK desde el almacenamiento persistente y enviarlo tooKey almacén toobe descifrado.</span><span class="sxs-lookup"><span data-stu-id="cc92f-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="cc92f-214">Hola de caché descifra la DEK en memoria.</span><span class="sxs-lookup"><span data-stu-id="cc92f-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="cc92f-215">Ahora está listo toouse.</span><span class="sxs-lookup"><span data-stu-id="cc92f-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="cc92f-216">Generar un BEK único para el bloque de Hola de datos a partir de hello DEK.</span><span class="sxs-lookup"><span data-stu-id="cc92f-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="cc92f-217">Cifrar el bloque de datos de hello con hello BEK, mediante el uso de cifrado AES-256.</span><span class="sxs-lookup"><span data-stu-id="cc92f-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="cc92f-218">Bloque de datos cifrados de Hola de almacén de datos en el almacenamiento persistente.</span><span class="sxs-lookup"><span data-stu-id="cc92f-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="cc92f-219">Por motivos de rendimiento Hola borrar DEK Hola se almacena en caché en memoria durante un período corto e inmediatamente se borra después.</span><span class="sxs-lookup"><span data-stu-id="cc92f-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="cc92f-220">En medios persistentes, siempre se almacena cifrada mediante hello MEK.</span><span class="sxs-lookup"><span data-stu-id="cc92f-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="cc92f-221">Rotación de claves</span><span class="sxs-lookup"><span data-stu-id="cc92f-221">Key rotation</span></span>

<span data-ttu-id="cc92f-222">Cuando se usa claves administradas por el cliente, puede girar hello MEK.</span><span class="sxs-lookup"><span data-stu-id="cc92f-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="cc92f-223">toolearn tooset una cuenta de almacén de Data Lake con claves administradas por el cliente, vea [Introducción](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="cc92f-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="cc92f-224">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="cc92f-224">Prerequisites</span></span>

<span data-ttu-id="cc92f-225">Al configurar la cuenta de almacén de Data Lake hello, eligió toouse sus propias claves.</span><span class="sxs-lookup"><span data-stu-id="cc92f-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="cc92f-226">Esta opción no se puede cambiar una vez creada la cuenta de hello.</span><span class="sxs-lookup"><span data-stu-id="cc92f-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="cc92f-227">Hello pasos siguientes se supone que se utilizan claves administradas por el cliente (es decir, que haya elegido sus propias claves de almacén de claves).</span><span class="sxs-lookup"><span data-stu-id="cc92f-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="cc92f-228">Tenga en cuenta que si utiliza opciones predeterminadas de hello para el cifrado, los datos siempre se cifran mediante claves administradas por el almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="cc92f-229">En esta opción, no tiene claves de toorotate de capacidad de hello, que son administrados por el almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="cc92f-230">¿Cómo toorotate Hola MEK en almacén de Data Lake</span><span class="sxs-lookup"><span data-stu-id="cc92f-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="cc92f-231">Inicie sesión en toohello [portal de Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="cc92f-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="cc92f-232">Examinar la instancia del almacén de claves toohello que almacena las claves asociadas a su cuenta de almacén de Data Lake.</span><span class="sxs-lookup"><span data-stu-id="cc92f-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="cc92f-233">Seleccione **Claves**.</span><span class="sxs-lookup"><span data-stu-id="cc92f-233">Select **Keys**.</span></span>

    ![Captura de pantalla de Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="cc92f-235">Seleccionar clave de hello asociada con su cuenta de almacén de Data Lake y crear una nueva versión de esta clave.</span><span class="sxs-lookup"><span data-stu-id="cc92f-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="cc92f-236">Tenga en cuenta que almacén de Data Lake actualmente solo admite la rotación de claves tooa nueva versión de una clave.</span><span class="sxs-lookup"><span data-stu-id="cc92f-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="cc92f-237">No es compatible con la rotación tooa otra clave.</span><span class="sxs-lookup"><span data-stu-id="cc92f-237">It doesn't support rotating tooa different key.</span></span>

   ![Captura de pantalla de la ventana Claves, donde se resalta Nueva versión](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="cc92f-239">Busque la cuenta de almacenamiento de almacén de Data Lake toohello y seleccione **cifrado**.</span><span class="sxs-lookup"><span data-stu-id="cc92f-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Captura de pantalla de la ventana de la cuenta de almacenamiento de Data Lake Store, con Cifrado resaltado](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="cc92f-241">Un mensaje le notifica que hay una nueva versión de clave de la clave de Hola.</span><span class="sxs-lookup"><span data-stu-id="cc92f-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="cc92f-242">Haga clic en **rotar la clave de** toohello clave nueva versión de hello de tooupdate.</span><span class="sxs-lookup"><span data-stu-id="cc92f-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Captura de pantalla de la ventana Data Lake Store con el mensaje y Rotar clave resaltado](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="cc92f-244">Esta operación tardará menos de dos minutos y no hay ningún tiempo de inactividad previsto debido tookey rotación.</span><span class="sxs-lookup"><span data-stu-id="cc92f-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="cc92f-245">Una vez completada la operación de hello, la nueva versión de hello de clave de hello está en uso.</span><span class="sxs-lookup"><span data-stu-id="cc92f-245">After hello operation is complete, hello new version of hello key is in use.</span></span>

---
title: "Autenticación entre servicios: Data Lake Store con Azure Active Directory | Microsoft Docs"
description: "Aprenda a realizar la autenticación entre servicios con Data Lake Store mediante Azure Active Directory."
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 820b7c5d-4863-4225-9bd1-df4d8f515537
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/21/2017
ms.author: nitinme
ms.openlocfilehash: 27ec0a4f48115d44da98dd048868b044aedf173c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="service-to-service-authentication-with-data-lake-store-using-azure-active-directory"></a><span data-ttu-id="f3046-103">Autenticación entre servicios con Data Lake Store mediante Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f3046-103">Service-to-service authentication with Data Lake Store using Azure Active Directory</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="f3046-104">Autenticación entre servicios</span><span class="sxs-lookup"><span data-stu-id="f3046-104">Service-to-service authentication</span></span>](data-lake-store-authenticate-using-active-directory.md)
> * [<span data-ttu-id="f3046-105">Autenticación de usuario final</span><span class="sxs-lookup"><span data-stu-id="f3046-105">End-user authentication</span></span>](data-lake-store-end-user-authenticate-using-active-directory.md)
> 
> 

<span data-ttu-id="f3046-106">Azure Data Lake Store usa Azure Active Directory para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="f3046-106">Azure Data Lake Store uses Azure Active Directory for authentication.</span></span> <span data-ttu-id="f3046-107">Antes de crear una aplicación que funcione con Azure Data Lake Store o Azure Data Lake Analytics, debe determinar cómo desea autenticar la aplicación con Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="f3046-107">Before authoring an application that works with Azure Data Lake Store or Azure Data Lake Analytics, you must first decide how you would like to authenticate your application with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="f3046-108">Las dos principales opciones disponibles son:</span><span class="sxs-lookup"><span data-stu-id="f3046-108">The two main options available are:</span></span>

* <span data-ttu-id="f3046-109">Autenticación de usuario final</span><span class="sxs-lookup"><span data-stu-id="f3046-109">End-user authentication</span></span> 
* <span data-ttu-id="f3046-110">Autenticación entre servicios (este artículo)</span><span class="sxs-lookup"><span data-stu-id="f3046-110">Service-to-service authentication (this article)</span></span> 

<span data-ttu-id="f3046-111">Con ambas opciones, la aplicación recibe un token de OAuth 2.0 que se adjunta a cada solicitud realizada a Azure Data Lake Store o Azure Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="f3046-111">Both these options result in your application being provided with an OAuth 2.0 token, which gets attached to each request made to Azure Data Lake Store or Azure Data Lake Analytics.</span></span>

<span data-ttu-id="f3046-112">En este artículo se habla de cómo crear una **aplicación web de Azure AD para la autenticación entre servicios**.</span><span class="sxs-lookup"><span data-stu-id="f3046-112">This article talks about how create an **Azure AD web application for service-to-service authentication**.</span></span> <span data-ttu-id="f3046-113">Para obtener instrucciones sobre la configuración de la aplicación de Azure AD para la autenticación entre servicios, vea [Autenticación de usuario final con Data Lake Store mediante Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="f3046-113">For instructions on Azure AD application configuration for end-user authentication see [End-user authentication with Data Lake Store using Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f3046-114">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f3046-114">Prerequisites</span></span>
* <span data-ttu-id="f3046-115">Una suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="f3046-115">An Azure subscription.</span></span> <span data-ttu-id="f3046-116">Vea [Obtener evaluación gratuita de Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="f3046-116">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

## <a name="step-1-create-an-active-directory-web-application"></a><span data-ttu-id="f3046-117">Paso 1: Crear una aplicación web de Active Directory</span><span class="sxs-lookup"><span data-stu-id="f3046-117">Step 1: Create an Active Directory web application</span></span>

<span data-ttu-id="f3046-118">Cree y configure una aplicación web de Azure AD para la autenticación entre servicios con Azure Data Lake Store mediante Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f3046-118">Create and configure an Azure AD web application for service-to-service authentication with Azure Data Lake Store using Azure Active Directory.</span></span> <span data-ttu-id="f3046-119">Para obtener instrucciones, vea cómo [crear una aplicación de Azure AD](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f3046-119">For instructions, see [Create an Azure AD application](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span></span>

<span data-ttu-id="f3046-120">Al seguir las instrucciones que aparecen en el vínculo anterior, asegúrese de seleccionar **Aplicación web/API** para el tipo de aplicación, como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="f3046-120">While following the instructions at the above link, make sure you select **Web App / API** for application type, as shown in the screenshot below.</span></span>

<span data-ttu-id="f3046-121">![Crear aplicación web](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Crear aplicación web")</span><span class="sxs-lookup"><span data-stu-id="f3046-121">![Create web app](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Create web app")</span></span>

## <a name="step-2-get-application-id-authentication-key-and-tenant-id"></a><span data-ttu-id="f3046-122">Paso 2: obtención del identificador, la clave de autenticación y el identificador de inquilino de la aplicación</span><span class="sxs-lookup"><span data-stu-id="f3046-122">Step 2: Get application id, authentication key, and tenant id</span></span>
<span data-ttu-id="f3046-123">Al iniciar sesión mediante programación, necesitará el identificador de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f3046-123">When programmatically logging in, you need the id for your application.</span></span> <span data-ttu-id="f3046-124">Si esta se ejecuta con sus propias credenciales, también precisará una clave de autenticación.</span><span class="sxs-lookup"><span data-stu-id="f3046-124">If the application runs under its own credentials, you will also need an authentication key.</span></span>

* <span data-ttu-id="f3046-125">Para obtener instrucciones sobre cómo recuperar el identificador y la clave de autenticación de la aplicación, consulte [Obtención del id. y la clave de autenticación de la aplicación](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span><span class="sxs-lookup"><span data-stu-id="f3046-125">For instructions on how to retrieve the application ID and authentication key (also called the client secret) for your application, see [Get application ID and authentication key](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span></span>

* <span data-ttu-id="f3046-126">Para obtener instrucciones sobre cómo recuperar el identificador de inquilino, consulte [Obtención del identificador de inquilino](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span><span class="sxs-lookup"><span data-stu-id="f3046-126">For instructions on how to retrieve the tenant ID, see [Get tenant ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span></span>

## <a name="step-3-assign-the-azure-ad-application-to-the-azure-data-lake-store-account-file-or-folder-only-for-service-to-service-authentication"></a><span data-ttu-id="f3046-127">Paso 3: Asignación de la aplicación de Azure AD al archivo o la carpeta de la cuenta de Azure Data Lake Store (solo para la autenticación entre servicios)</span><span class="sxs-lookup"><span data-stu-id="f3046-127">Step 3: Assign the Azure AD application to the Azure Data Lake Store account file or folder (only for service-to-service authentication)</span></span>
1. <span data-ttu-id="f3046-128">Inicie sesión en el nuevo [Azure Portal](https://portal.azure.com) y abra la cuenta de Azure Data Lake Store que desea asociar a la aplicación de Azure Active Directory que creó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f3046-128">Sign on to the new [Azure portal](https://portal.azure.com) and open the Azure Data Lake Store account that you want to associate with the Azure Active Directory application you created earlier.</span></span>
2. <span data-ttu-id="f3046-129">En la hoja de su cuenta de Almacén de Data Lake, haga clic en **Explorador de datos**.</span><span class="sxs-lookup"><span data-stu-id="f3046-129">In your Data Lake Store account blade, click **Data Explorer**.</span></span>
   
    <span data-ttu-id="f3046-130">![Creación de directorios en una cuenta de Data Lake Store](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Creación de directorios en una cuenta de Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="f3046-130">![Create directories in Data Lake Store account](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Create directories in Data Lake account")</span></span>
3. <span data-ttu-id="f3046-131">En la hoja **Explorador de datos**, haga clic en el archivo o la carpeta para los que desea proporcionar acceso a la aplicación de Azure AD y, después, haga clic en **Acceso**.</span><span class="sxs-lookup"><span data-stu-id="f3046-131">In the **Data Explorer** blade, click the file or folder for which you want to provide access to the Azure AD application, and then click **Access**.</span></span> <span data-ttu-id="f3046-132">Para configurar el acceso a un archivo, debe hacer clic en la opción **Acceso** de la hoja de **vista previa de archivos**.</span><span class="sxs-lookup"><span data-stu-id="f3046-132">To configure access to a file, you must click **Access** from the **File Preview** blade.</span></span>
   
    <span data-ttu-id="f3046-133">![Configuración de ACL en el sistema de archivos de Data Lake](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Configuración de ACL en el sistema de archivos de Data Lake")</span><span class="sxs-lookup"><span data-stu-id="f3046-133">![Set ACLs on Data Lake file system](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Set ACLs on Data Lake file system")</span></span>
4. <span data-ttu-id="f3046-134">La hoja **Acceso** enumera el acceso estándar y el acceso personalizado ya asignados a la raíz.</span><span class="sxs-lookup"><span data-stu-id="f3046-134">The **Access** blade lists the standard access and custom access already assigned to the root.</span></span> <span data-ttu-id="f3046-135">Haga clic en el icono **Agregar** para agregar las ACL de nivel personalizado.</span><span class="sxs-lookup"><span data-stu-id="f3046-135">Click the **Add** icon to add custom-level ACLs.</span></span>
   
    <span data-ttu-id="f3046-136">![Lista de accesos estándar y personalizados](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "Lista de accesos estándar y personalizados")</span><span class="sxs-lookup"><span data-stu-id="f3046-136">![List standard and custom access](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "List standard and custom access")</span></span>
5. <span data-ttu-id="f3046-137">Haga clic en el icono **Agregar** para abrir la hoja **Agregar acceso personalizado**.</span><span class="sxs-lookup"><span data-stu-id="f3046-137">Click the **Add** icon to open the **Add Custom Access** blade.</span></span> <span data-ttu-id="f3046-138">En esta hoja, haga clic en **Seleccionar usuario o grupo** y, después, en la hoja **Seleccionar usuario o grupo**, busque la aplicación de Azure Active Directory que creó antes.</span><span class="sxs-lookup"><span data-stu-id="f3046-138">In this blade, click **Select User or Group**, and then in **Select User or Group** blade, look for the Azure Active Directory application you created earlier.</span></span> <span data-ttu-id="f3046-139">Si tiene muchos grupos en los que buscar, use el cuadro de texto en la parte superior para filtrar según el nombre del grupo.</span><span class="sxs-lookup"><span data-stu-id="f3046-139">If you have a lot of groups to search from, use the text box at the top to filter on the group name.</span></span> <span data-ttu-id="f3046-140">Haga clic en el grupo que desee agregar y después en **Seleccionar**.</span><span class="sxs-lookup"><span data-stu-id="f3046-140">Click the group you want to add and then click **Select**.</span></span>
   
    <span data-ttu-id="f3046-141">![Incorporación de un grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Incorporación de un grupo")</span><span class="sxs-lookup"><span data-stu-id="f3046-141">![Add a group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Add a group")</span></span>
6. <span data-ttu-id="f3046-142">Haga clic en **Seleccionar permisos**, seleccione los permisos y si desea asignarlos como una ACL predeterminada, ACL de acceso o ambos.</span><span class="sxs-lookup"><span data-stu-id="f3046-142">Click **Select Permissions**, select the permissions and whether you want to assign the permissions as a default ACL, access ACL, or both.</span></span> <span data-ttu-id="f3046-143">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f3046-143">Click **OK**.</span></span>
   
    <span data-ttu-id="f3046-144">![Asignación de permisos a un grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Asignación de permisos a un grupo")</span><span class="sxs-lookup"><span data-stu-id="f3046-144">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Assign permissions to group")</span></span>
   
    <span data-ttu-id="f3046-145">Para obtener más información sobre los permisos de Data Lake Store y ACL y las ACL predeterminadas y de acceso, consulte [Control de acceso en Data Lake Store](data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="f3046-145">For more information about permissions in Data Lake Store, and Default/Access ACLs, see [Access Control in Data Lake Store](data-lake-store-access-control.md).</span></span>
7. <span data-ttu-id="f3046-146">En la hoja **Agregar acceso personalizado**, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f3046-146">In the **Add Custom Access** blade, click **OK**.</span></span> <span data-ttu-id="f3046-147">El grupo recién agregado, con los permisos asociados, se mostrará ahora en la hoja **Acceso** .</span><span class="sxs-lookup"><span data-stu-id="f3046-147">The newly added group, with the associated permissions, will now be listed in the **Access** blade.</span></span>
   
    <span data-ttu-id="f3046-148">![Asignación de permisos a un grupo](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Asignación de permisos a un grupo")</span><span class="sxs-lookup"><span data-stu-id="f3046-148">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Assign permissions to group")</span></span>

## <a name="step-4-get-the-oauth-20-token-endpoint-only-for-java-based-applications"></a><span data-ttu-id="f3046-149">Paso 4: Obtener el punto de conexión del token de OAuth 2.0 (solo para aplicaciones basadas en Java)</span><span class="sxs-lookup"><span data-stu-id="f3046-149">Step 4: Get the OAuth 2.0 token endpoint (only for Java-based applications)</span></span>

1. <span data-ttu-id="f3046-150">Inicie sesión en el nuevo [Azure Portal](https://portal.azure.com) y haga clic en Active Directory en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="f3046-150">Sign on to the new [Azure portal](https://portal.azure.com) and click Active Directory from the left pane.</span></span>

2. <span data-ttu-id="f3046-151">En el panel izquierdo, haga clic en **Registros de aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="f3046-151">From the left pane, click **App registrations**.</span></span>

3. <span data-ttu-id="f3046-152">En la parte superior de la hoja Registros de aplicaciones, haga clic en **Puntos de conexión**.</span><span class="sxs-lookup"><span data-stu-id="f3046-152">From the top of the App registrations blade, click **Endpoints**.</span></span>

    <span data-ttu-id="f3046-153">![Punto de conexión de token de OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "Punto de conexión de token de OAuth")</span><span class="sxs-lookup"><span data-stu-id="f3046-153">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span></span>

4. <span data-ttu-id="f3046-154">En la lista de puntos de conexión, copie el correspondiente al token de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f3046-154">From the list of endpoints, copy the OAuth 2.0 token endpoint.</span></span>

    <span data-ttu-id="f3046-155">![Punto de conexión de token de OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "Punto de conexión de token de OAuth")</span><span class="sxs-lookup"><span data-stu-id="f3046-155">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span></span>   

## <a name="next-steps"></a><span data-ttu-id="f3046-156">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f3046-156">Next steps</span></span>
<span data-ttu-id="f3046-157">En este artículo creó una aplicación web de Azure AD y recopiló la información que necesita en las aplicaciones cliente que cree mediante SDK con .NET, SDK de Java, etc. Ahora puede continuar en los artículos siguientes, que hablan de cómo usar la aplicación web de Azure AD para autenticarse primero en Data Lake Store y luego realizar otras operaciones en el almacén.</span><span class="sxs-lookup"><span data-stu-id="f3046-157">In this article you created an Azure AD web application and gathered the information you need in your client applications that you author using .NET SDK, Java SDK, etc. You can now proceed to the following articles that talk about how to use the Azure AD web application to first authenticate with Data Lake Store and then perform other operations on the store.</span></span>

* [<span data-ttu-id="f3046-158">Introducción al Almacén de Azure Data Lake mediante SDK de .NET</span><span class="sxs-lookup"><span data-stu-id="f3046-158">Get started with Azure Data Lake Store using .NET SDK</span></span>](data-lake-store-get-started-net-sdk.md)
* [<span data-ttu-id="f3046-159">Introducción a Azure Data Lake Store con el SDK de Java</span><span class="sxs-lookup"><span data-stu-id="f3046-159">Get started with Azure Data Lake Store using Java SDK</span></span>](data-lake-store-get-started-java-sdk.md)

<span data-ttu-id="f3046-160">En este artículo, ha recorrido los pasos necesarios para crear una entidad de seguridad de un usuario y ejecutarla en su aplicación.</span><span class="sxs-lookup"><span data-stu-id="f3046-160">This article walked you through the basic steps needed to get a user principal up and running for your application.</span></span> <span data-ttu-id="f3046-161">Para más información, puede consultar los siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="f3046-161">You can look at the following articles to get further information:</span></span>
* [<span data-ttu-id="f3046-162">Uso de PowerShell para crear una entidad de servicio</span><span class="sxs-lookup"><span data-stu-id="f3046-162">Use PowerShell to create service principal</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal)
* [<span data-ttu-id="f3046-163">Uso de certificados para la autenticación de la entidad de servicio</span><span class="sxs-lookup"><span data-stu-id="f3046-163">Use certificate authentication for service principal authentication</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal#create-service-principal-with-certificate)
* [<span data-ttu-id="f3046-164">Otros métodos de autenticación de Azure AD</span><span class="sxs-lookup"><span data-stu-id="f3046-164">Other methods to authenticate to Azure AD</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios)



---
title: "Uso de la regresión lineal en Machine Learning | Microsoft Docs"
description: "Una comparación de los modelos de regresión lineal en Excel y en Estudio de aprendizaje automático de Azure"
metakeywords: 
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 417ae6ab-de4f-4bdd-957a-d96133234656
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.author: kbaroni;garye
ms.openlocfilehash: 7feb5d62415850e66f8eb7e22b9ada0d25a7058e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="using-linear-regression-in-azure-machine-learning"></a><span data-ttu-id="ed453-103">Uso de regresión lineal en Aprendizaje automático de Azure</span><span class="sxs-lookup"><span data-stu-id="ed453-103">Using linear regression in Azure Machine Learning</span></span>
> <span data-ttu-id="ed453-104">*Kate Baroni* y *Ben Boatman* son arquitectos de soluciones para empresas del Centro de Excelencia de Perspectivas sobre los datos de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ed453-104">*Kate Baroni* and *Ben Boatman* are enterprise solution architects in Microsoft’s Data Insights Center of Excellence.</span></span> <span data-ttu-id="ed453-105">En este artículo, se describe su experiencia al migrar un conjunto existente de análisis de regresión a una solución basada en la nube mediante Aprendizaje automático (ML) de Azure.</span><span class="sxs-lookup"><span data-stu-id="ed453-105">In this article, they describe their experience migrating an existing regression analysis suite to a cloud-based solution using Azure Machine Learning.</span></span> 
> 
> 

&nbsp; 

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="goal"></a><span data-ttu-id="ed453-106">Objetivo</span><span class="sxs-lookup"><span data-stu-id="ed453-106">Goal</span></span>
<span data-ttu-id="ed453-107">Nuestro proyecto se inició con dos objetivos en mente:</span><span class="sxs-lookup"><span data-stu-id="ed453-107">Our project started with two goals in mind:</span></span> 

1. <span data-ttu-id="ed453-108">Usar el análisis predictivo para mejorar la exactitud de las proyecciones de ingresos mensuales de la organización.</span><span class="sxs-lookup"><span data-stu-id="ed453-108">Use predictive analytics to improve the accuracy of our organization’s monthly revenue projections</span></span> 
2. <span data-ttu-id="ed453-109">Usar Azure Machine Learning para confirmar, optimizar, aumentar la velocidad y escalar los resultados.</span><span class="sxs-lookup"><span data-stu-id="ed453-109">Use Azure Machine Learning to confirm, optimize, increase velocity, and scale of our results.</span></span> 

<span data-ttu-id="ed453-110">Como muchas empresas, nuestra organización pasa por un proceso de previsión de ingresos mensuales.</span><span class="sxs-lookup"><span data-stu-id="ed453-110">Like many businesses, our organization goes through a monthly revenue forecasting process.</span></span> <span data-ttu-id="ed453-111">Nuestro pequeño equipo de analistas de negocios se encarga de usar Azure Machine Learning para respaldar el proceso y mejorar la precisión de la previsión.</span><span class="sxs-lookup"><span data-stu-id="ed453-111">Our small team of business analysts was tasked with using Azure Machine Learning to support the process and improve forecast accuracy.</span></span> <span data-ttu-id="ed453-112">El equipo dedicó varios meses a recopilar los datos de varios orígenes y ejecutar los atributos de datos a través de análisis estadísticos a fin de identificar los atributos claves relevantes para la previsión de ventas de servicios.</span><span class="sxs-lookup"><span data-stu-id="ed453-112">The team spent several months collecting data from multiple sources and running the data attributes through statistical analysis identifying key attributes relevant to services sales forecasting.</span></span> <span data-ttu-id="ed453-113">El paso siguiente consistía en comenzar el prototipo de los modelos de regresión estadística de los datos en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-113">The next step was to begin prototyping statistical regression models on the data in Excel.</span></span> <span data-ttu-id="ed453-114">En unas semanas, tuvimos un modelo de regresión de Excel que superaba los procesos actuales de previsión de finanzas y de campo.</span><span class="sxs-lookup"><span data-stu-id="ed453-114">Within a few weeks, we had an Excel regression model that was outperforming the current field and finance forecasting processes.</span></span> <span data-ttu-id="ed453-115">Esto se convirtió en el resultado de la predicción de la línea de base.</span><span class="sxs-lookup"><span data-stu-id="ed453-115">This became the baseline prediction result.</span></span> 

<span data-ttu-id="ed453-116">A continuación, el siguiente paso consistió en pasar nuestro análisis predictivo a Azure Machine Learning para averiguar cómo se podría mejorar el rendimiento de las predicciones con Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-116">We then took the next step to moving our predictive analytics over to Azure Machine Learning to find out how Machine Learning could improve on predictive performance.</span></span>

## <a name="achieving-predictive-performance-parity"></a><span data-ttu-id="ed453-117">Consecución de la paridad en el rendimiento predictivo</span><span class="sxs-lookup"><span data-stu-id="ed453-117">Achieving predictive performance parity</span></span>
<span data-ttu-id="ed453-118">Nuestra prioridad era lograr la paridad entre los modelos de regresión de Excel y de Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-118">Our first priority was to achieve parity between Machine Learning and Excel regression models.</span></span> <span data-ttu-id="ed453-119">Teniendo en cuenta los mismos datos y la misma división de datos de prueba (test) y entrenamiento (train), queríamos conseguir la paridad de rendimiento predictivo entre Excel y Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-119">Given the same data, and the same split for training and testing data, we wanted to achieve predictive performance parity between Excel and Machine Learning.</span></span> <span data-ttu-id="ed453-120">Al principio no lo conseguimos.</span><span class="sxs-lookup"><span data-stu-id="ed453-120">Initially we failed.</span></span> <span data-ttu-id="ed453-121">El modelo de Excel superaba al de Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-121">The Excel model outperformed the Machine Learning model.</span></span> <span data-ttu-id="ed453-122">El error se debía a una falta de conocimiento de la configuración de la herramienta base en Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-122">The failure was due to a lack of understanding of the base tool setting in Machine Learning.</span></span> <span data-ttu-id="ed453-123">Después de una sincronización con el equipo de producto de Machine Learning, se consiguió una mejor comprensión de la configuración base necesaria para nuestros conjuntos de datos, y se logró la paridad entre los dos modelos.</span><span class="sxs-lookup"><span data-stu-id="ed453-123">After a sync with the Machine Learning product team, we gained a better understanding of the base setting required for our data sets, and achieved parity between the two models.</span></span> 

### <a name="create-regression-model-in-excel"></a><span data-ttu-id="ed453-124">Creación de un modelo de regresión en Excel</span><span class="sxs-lookup"><span data-stu-id="ed453-124">Create regression model in Excel</span></span>
<span data-ttu-id="ed453-125">La regresión de Excel utilizaba el modelo de regresión lineal estándar de Excel Analysis ToolPak.</span><span class="sxs-lookup"><span data-stu-id="ed453-125">Our Excel Regression used the standard linear regression model found in the Excel Analysis ToolPak.</span></span> 

<span data-ttu-id="ed453-126">Calculamos el *porcentaje de error medio absoluto* y se utilizó como medida de rendimiento para el modelo.</span><span class="sxs-lookup"><span data-stu-id="ed453-126">We calculated *Mean Absolute % Error* and used it as the performance measure for the model.</span></span> <span data-ttu-id="ed453-127">Tardamos 3 meses en conseguir un modelo operativo con Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-127">It took 3 months to arrive at a working model using Excel.</span></span> <span data-ttu-id="ed453-128">Aplicamos gran parte de lo aprendido al experimento con Machine Learning Studio, lo que, en última instancia, era una ventaja a la hora de conocer los requisitos.</span><span class="sxs-lookup"><span data-stu-id="ed453-128">We brought much of the learning into the Machine Learning Studio experiment which ultimately was beneficial in understanding requirements.</span></span>

### <a name="create-comparable-experiment-in-azure-machine-learning"></a><span data-ttu-id="ed453-129">Creación de un experimento comparable en Aprendizaje automático de Azure</span><span class="sxs-lookup"><span data-stu-id="ed453-129">Create comparable experiment in Azure Machine Learning</span></span>
<span data-ttu-id="ed453-130">Seguimos estos pasos para crear nuestro experimento en Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="ed453-130">We followed these steps to create our experiment in Machine Learning Studio:</span></span> 

1. <span data-ttu-id="ed453-131">Cargamos el conjunto de datos como un archivo csv en Machine Learning Studio (archivo muy pequeño).</span><span class="sxs-lookup"><span data-stu-id="ed453-131">Uploaded the dataset as a csv file to Machine Learning Studio (very small file)</span></span>
2. <span data-ttu-id="ed453-132">Hemos creado un nuevo experimento y hemos usado el módulo [Seleccionar columnas de conjunto de datos][select-columns] para seleccionar las mismas características de datos que se usaron en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-132">Created a new experiment and used the [Select Columns in Dataset][select-columns] module to select the same data features used in Excel</span></span> 
3. <span data-ttu-id="ed453-133">Usamos el módulo [Dividir datos][split] (con el modo *Expresión relativa*) para dividir los datos en los mismos conjuntos de datos de entrenamiento, tal y como se habría realizado en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-133">Used the [Split Data][split] module (with *Relative Expression* mode) to divide the data into the same training datasets as had been done in Excel</span></span> 
4. <span data-ttu-id="ed453-134">Realizamos experimentos con el módulo [Regresión lineal][linear-regression] (solo opciones predeterminadas), documentamos el proceso y comparamos los resultados con el modelo de regresión de Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-134">Experimented with the [Linear Regression][linear-regression] module (default options only), documented, and compared the results to our Excel regression model</span></span>

### <a name="review-initial-results"></a><span data-ttu-id="ed453-135">Revisión de los resultados iniciales</span><span class="sxs-lookup"><span data-stu-id="ed453-135">Review initial results</span></span>
<span data-ttu-id="ed453-136">Al principio, el modelo de Excel superaba claramente al de Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="ed453-136">At first, the Excel model clearly outperformed the Machine Learning Studio model:</span></span> 

|  | <span data-ttu-id="ed453-137">Excel</span><span class="sxs-lookup"><span data-stu-id="ed453-137">Excel</span></span> | <span data-ttu-id="ed453-138">Estudio</span><span class="sxs-lookup"><span data-stu-id="ed453-138">Studio</span></span> |
| --- |:---:|:---:|
| <span data-ttu-id="ed453-139">Rendimiento</span><span class="sxs-lookup"><span data-stu-id="ed453-139">Performance</span></span> | | |
| <ul style="list-style-type: none;"><li><span data-ttu-id="ed453-140">R cuadrado ajustado</span><span class="sxs-lookup"><span data-stu-id="ed453-140">Adjusted R Square</span></span></li></ul> |<span data-ttu-id="ed453-141">0,96</span><span class="sxs-lookup"><span data-stu-id="ed453-141">0.96</span></span> |<span data-ttu-id="ed453-142">N/D</span><span class="sxs-lookup"><span data-stu-id="ed453-142">N/A</span></span> |
| <ul style="list-style-type: none;"><li><span data-ttu-id="ed453-143">Coeficiente de</span><span class="sxs-lookup"><span data-stu-id="ed453-143">Coefficient of</span></span> <br /><span data-ttu-id="ed453-144">Determinación</span><span class="sxs-lookup"><span data-stu-id="ed453-144">Determination</span></span></li></ul> |<span data-ttu-id="ed453-145">N/D</span><span class="sxs-lookup"><span data-stu-id="ed453-145">N/A</span></span> |<span data-ttu-id="ed453-146">0,78</span><span class="sxs-lookup"><span data-stu-id="ed453-146">0.78</span></span><br /><span data-ttu-id="ed453-147">(baja precisión)</span><span class="sxs-lookup"><span data-stu-id="ed453-147">(low accuracy)</span></span> |
| <span data-ttu-id="ed453-148">Error medio absoluto</span><span class="sxs-lookup"><span data-stu-id="ed453-148">Mean Absolute Error</span></span> |<span data-ttu-id="ed453-149">9,5 millones de $</span><span class="sxs-lookup"><span data-stu-id="ed453-149">$9.5M</span></span> |<span data-ttu-id="ed453-150">19,4 millones de $</span><span class="sxs-lookup"><span data-stu-id="ed453-150">$ 19.4M</span></span> |
| <span data-ttu-id="ed453-151">Error medio absoluto (%)</span><span class="sxs-lookup"><span data-stu-id="ed453-151">Mean Absolute Error (%)</span></span> |<span data-ttu-id="ed453-152">6,03 %</span><span class="sxs-lookup"><span data-stu-id="ed453-152">6.03%</span></span> |<span data-ttu-id="ed453-153">12,2 %</span><span class="sxs-lookup"><span data-stu-id="ed453-153">12.2%</span></span> |

<span data-ttu-id="ed453-154">Cuando ejecutamos el proceso y los resultados para los desarrolladores y científicos de datos del equipo de Machine Learning, rápidamente nos proporcionaron algunas sugerencias útiles.</span><span class="sxs-lookup"><span data-stu-id="ed453-154">When we ran our process and results by the developers and data scientists on the Machine Learning team, they quickly provided some useful tips.</span></span> 

* <span data-ttu-id="ed453-155">Cuando se usa el módulo [Regresión lineal][linear-regression] en Machine Learning Studio, se proporcionan dos métodos:</span><span class="sxs-lookup"><span data-stu-id="ed453-155">When you use the [Linear Regression][linear-regression] module in Machine Learning Studio, two methods are provided:</span></span>
  * <span data-ttu-id="ed453-156">Descenso de gradiente en línea: pueden resultar más adecuado para los problemas a mayor escala.</span><span class="sxs-lookup"><span data-stu-id="ed453-156">Online Gradient Descent: May be more suitable for larger-scale problems</span></span>
  * <span data-ttu-id="ed453-157">Ordinaria de mínimos cuadrados: este es el método en el que se suele pensar cuando se habla de la regresión lineal.</span><span class="sxs-lookup"><span data-stu-id="ed453-157">Ordinary Least Squares: This is the method most people think of when they hear linear regression.</span></span> <span data-ttu-id="ed453-158">Para los conjuntos de datos más pequeños, la regresión ordinaria de mínimos cuadrados puede ser una opción más adecuada.</span><span class="sxs-lookup"><span data-stu-id="ed453-158">For small datasets, Ordinary Least Squares can be a more optimal choice.</span></span>
* <span data-ttu-id="ed453-159">Considere la posibilidad de ajustar el parámetro Peso de regularización L2 para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ed453-159">Consider tweaking the L2 Regularization Weight parameter to improve performance.</span></span> <span data-ttu-id="ed453-160">Está establecido en 0,001 de forma predeterminada, pero para nuestro pequeño conjunto de datos, lo establecimos en 0,005 para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ed453-160">It is set to 0.001 by default, but for our small data set we set it to 0.005 to improve performance.</span></span> 

### <a name="mystery-solved"></a><span data-ttu-id="ed453-161">¡Misterio resuelto!</span><span class="sxs-lookup"><span data-stu-id="ed453-161">Mystery solved!</span></span>
<span data-ttu-id="ed453-162">Al aplicar las recomendaciones, logramos el mismo rendimiento de línea de base en Machine Learning Studio que con Excel:</span><span class="sxs-lookup"><span data-stu-id="ed453-162">When we applied the recommendations, we achieved the same baseline performance in Machine Learning Studio as with Excel:</span></span> 

|  | <span data-ttu-id="ed453-163">Excel</span><span class="sxs-lookup"><span data-stu-id="ed453-163">Excel</span></span> | <span data-ttu-id="ed453-164">Studio (inicial)</span><span class="sxs-lookup"><span data-stu-id="ed453-164">Studio (Initial)</span></span> | <span data-ttu-id="ed453-165">Studio con mínimos cuadrados</span><span class="sxs-lookup"><span data-stu-id="ed453-165">Studio w/ Least Squares</span></span> |
| --- |:---:|:---:|:---:|
| <span data-ttu-id="ed453-166">Valor etiquetado</span><span class="sxs-lookup"><span data-stu-id="ed453-166">Labeled value</span></span> |<span data-ttu-id="ed453-167">Valores reales (numéricos)</span><span class="sxs-lookup"><span data-stu-id="ed453-167">Actuals (numeric)</span></span> |<span data-ttu-id="ed453-168">same</span><span class="sxs-lookup"><span data-stu-id="ed453-168">same</span></span> |<span data-ttu-id="ed453-169">same</span><span class="sxs-lookup"><span data-stu-id="ed453-169">same</span></span> |
| <span data-ttu-id="ed453-170">Objetivo del aprendizaje</span><span class="sxs-lookup"><span data-stu-id="ed453-170">Learner</span></span> |<span data-ttu-id="ed453-171">Excel -> Análisis de datos -> Regresión</span><span class="sxs-lookup"><span data-stu-id="ed453-171">Excel -> Data Analysis -> Regression</span></span> |<span data-ttu-id="ed453-172">Regresión lineal</span><span class="sxs-lookup"><span data-stu-id="ed453-172">Linear Regression.</span></span> |<span data-ttu-id="ed453-173">Regresión lineal</span><span class="sxs-lookup"><span data-stu-id="ed453-173">Linear Regression</span></span> |
| <span data-ttu-id="ed453-174">Opciones del objetivo del aprendizaje</span><span class="sxs-lookup"><span data-stu-id="ed453-174">Learner options</span></span> |<span data-ttu-id="ed453-175">N/D</span><span class="sxs-lookup"><span data-stu-id="ed453-175">N/A</span></span> |<span data-ttu-id="ed453-176">Valores predeterminados</span><span class="sxs-lookup"><span data-stu-id="ed453-176">Defaults</span></span> |<span data-ttu-id="ed453-177">ordinaria de mínimos cuadrados</span><span class="sxs-lookup"><span data-stu-id="ed453-177">ordinary least squares</span></span><br /><span data-ttu-id="ed453-178">L2 = 0,005</span><span class="sxs-lookup"><span data-stu-id="ed453-178">L2 = 0.005</span></span> |
| <span data-ttu-id="ed453-179">Conjunto de datos</span><span class="sxs-lookup"><span data-stu-id="ed453-179">Data Set</span></span> |<span data-ttu-id="ed453-180">26 filas, 3 características, 1 etiqueta.</span><span class="sxs-lookup"><span data-stu-id="ed453-180">26 rows, 3 features, 1 label.</span></span> <span data-ttu-id="ed453-181">Todas numéricas.</span><span class="sxs-lookup"><span data-stu-id="ed453-181">All numeric.</span></span> |<span data-ttu-id="ed453-182">same</span><span class="sxs-lookup"><span data-stu-id="ed453-182">same</span></span> |<span data-ttu-id="ed453-183">same</span><span class="sxs-lookup"><span data-stu-id="ed453-183">same</span></span> |
| <span data-ttu-id="ed453-184">División: aprendizaje</span><span class="sxs-lookup"><span data-stu-id="ed453-184">Split: Train</span></span> |<span data-ttu-id="ed453-185">Excel entrenado en las primeras 18 filas; probado en las últimas 8 filas.</span><span class="sxs-lookup"><span data-stu-id="ed453-185">Excel trained on the first 18 rows, tested on the last 8 rows.</span></span> |<span data-ttu-id="ed453-186">same</span><span class="sxs-lookup"><span data-stu-id="ed453-186">same</span></span> |<span data-ttu-id="ed453-187">same</span><span class="sxs-lookup"><span data-stu-id="ed453-187">same</span></span> |
| <span data-ttu-id="ed453-188">División: prueba</span><span class="sxs-lookup"><span data-stu-id="ed453-188">Split: Test</span></span> |<span data-ttu-id="ed453-189">Fórmula de regresión de Excel aplicada a las últimas 8 filas.</span><span class="sxs-lookup"><span data-stu-id="ed453-189">Excel regression formula applied to the last 8 rows</span></span> |<span data-ttu-id="ed453-190">same</span><span class="sxs-lookup"><span data-stu-id="ed453-190">same</span></span> |<span data-ttu-id="ed453-191">same</span><span class="sxs-lookup"><span data-stu-id="ed453-191">same</span></span> |
| <span data-ttu-id="ed453-192">**Rendimiento**</span><span class="sxs-lookup"><span data-stu-id="ed453-192">**Performance**</span></span> | | | |
| <span data-ttu-id="ed453-193">R cuadrado ajustado</span><span class="sxs-lookup"><span data-stu-id="ed453-193">Adjusted R Square</span></span> |<span data-ttu-id="ed453-194">0,96</span><span class="sxs-lookup"><span data-stu-id="ed453-194">0.96</span></span> |<span data-ttu-id="ed453-195">N/D</span><span class="sxs-lookup"><span data-stu-id="ed453-195">N/A</span></span> | |
| <span data-ttu-id="ed453-196">Coeficiente de determinación</span><span class="sxs-lookup"><span data-stu-id="ed453-196">Coefficient of Determination</span></span> |<span data-ttu-id="ed453-197">N/D</span><span class="sxs-lookup"><span data-stu-id="ed453-197">N/A</span></span> |<span data-ttu-id="ed453-198">0,78</span><span class="sxs-lookup"><span data-stu-id="ed453-198">0.78</span></span> |<span data-ttu-id="ed453-199">0,952049</span><span class="sxs-lookup"><span data-stu-id="ed453-199">0.952049</span></span> |
| <span data-ttu-id="ed453-200">Error medio absoluto</span><span class="sxs-lookup"><span data-stu-id="ed453-200">Mean Absolute Error</span></span> |<span data-ttu-id="ed453-201">9,5 millones de $</span><span class="sxs-lookup"><span data-stu-id="ed453-201">$9.5M</span></span> |<span data-ttu-id="ed453-202">19,4 millones de $</span><span class="sxs-lookup"><span data-stu-id="ed453-202">$ 19.4M</span></span> |<span data-ttu-id="ed453-203">9,5 millones de $</span><span class="sxs-lookup"><span data-stu-id="ed453-203">$9.5M</span></span> |
| <span data-ttu-id="ed453-204">Error medio absoluto (%)</span><span class="sxs-lookup"><span data-stu-id="ed453-204">Mean Absolute Error (%)</span></span> |<span data-ttu-id="ed453-205"><span style="background-color: 00FF00;"> 6,03 %</span></span><span class="sxs-lookup"><span data-stu-id="ed453-205"><span style="background-color: 00FF00;"> 6.03%</span></span></span> |<span data-ttu-id="ed453-206">12,2 %</span><span class="sxs-lookup"><span data-stu-id="ed453-206">12.2%</span></span> |<span data-ttu-id="ed453-207"><span style="background-color: 00FF00;"> 6,03 %</span></span><span class="sxs-lookup"><span data-stu-id="ed453-207"><span style="background-color: 00FF00;"> 6.03%</span></span></span> |

<span data-ttu-id="ed453-208">Además, los coeficientes de Excel son muy similares a los pesos de la característica en el modelo de entrenamiento de Azure:</span><span class="sxs-lookup"><span data-stu-id="ed453-208">In addition, the Excel coefficients compared well to the feature weights in the Azure trained model:</span></span>

|  | <span data-ttu-id="ed453-209">Coeficientes de Excel</span><span class="sxs-lookup"><span data-stu-id="ed453-209">Excel Coefficients</span></span> | <span data-ttu-id="ed453-210">Ponderaciones de la característica de Azure</span><span class="sxs-lookup"><span data-stu-id="ed453-210">Azure Feature Weights</span></span> |
| --- |:---:|:---:|
| <span data-ttu-id="ed453-211">Intersección/sesgo</span><span class="sxs-lookup"><span data-stu-id="ed453-211">Intercept/Bias</span></span> |<span data-ttu-id="ed453-212">19 470 209,88</span><span class="sxs-lookup"><span data-stu-id="ed453-212">19470209.88</span></span> |<span data-ttu-id="ed453-213">19 328 500</span><span class="sxs-lookup"><span data-stu-id="ed453-213">19328500</span></span> |
| <span data-ttu-id="ed453-214">Característica A</span><span class="sxs-lookup"><span data-stu-id="ed453-214">Feature A</span></span> |<span data-ttu-id="ed453-215">0,832653063</span><span class="sxs-lookup"><span data-stu-id="ed453-215">0.832653063</span></span> |<span data-ttu-id="ed453-216">0,834156</span><span class="sxs-lookup"><span data-stu-id="ed453-216">0.834156</span></span> |
| <span data-ttu-id="ed453-217">Característica B</span><span class="sxs-lookup"><span data-stu-id="ed453-217">Feature B</span></span> |<span data-ttu-id="ed453-218">11 071 967,08</span><span class="sxs-lookup"><span data-stu-id="ed453-218">11071967.08</span></span> |<span data-ttu-id="ed453-219">11 007 300</span><span class="sxs-lookup"><span data-stu-id="ed453-219">11007300</span></span> |
| <span data-ttu-id="ed453-220">Característica C</span><span class="sxs-lookup"><span data-stu-id="ed453-220">Feature C</span></span> |<span data-ttu-id="ed453-221">25 383 318,09</span><span class="sxs-lookup"><span data-stu-id="ed453-221">25383318.09</span></span> |<span data-ttu-id="ed453-222">25 140 800</span><span class="sxs-lookup"><span data-stu-id="ed453-222">25140800</span></span> |

## <a name="next-steps"></a><span data-ttu-id="ed453-223">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="ed453-223">Next Steps</span></span>
<span data-ttu-id="ed453-224">Queríamos consumir el servicio web Machine Learning en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-224">We wanted to consume the Machine Learning web service within Excel.</span></span> <span data-ttu-id="ed453-225">Nuestros analistas de negocios se basan en Excel y necesitábamos una manera de llamar al servicio web Machine Learning con una fila de datos de Excel y obtener el valor esperado para Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-225">Our business analysts rely on Excel and we needed a way to call the Machine Learning web service with a row of Excel data and have it return the predicted value to Excel.</span></span> 

<span data-ttu-id="ed453-226">También queríamos optimizar nuestro modelo utilizando las opciones y los algoritmos disponibles en Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ed453-226">We also wanted to optimize our model, using the options and algorithms available in Machine Learning Studio.</span></span>

### <a name="integration-with-excel"></a><span data-ttu-id="ed453-227">Integración con Excel</span><span class="sxs-lookup"><span data-stu-id="ed453-227">Integration with Excel</span></span>
<span data-ttu-id="ed453-228">Nuestra solución fue instrumentar nuestro modelo de regresión de Machine Learning mediante la creación de un servicio web desde el modelo entrenado.</span><span class="sxs-lookup"><span data-stu-id="ed453-228">Our solution was to operationalize our Machine Learning regression model by creating a web service from the trained model.</span></span> <span data-ttu-id="ed453-229">En unos minutos, se creó el servicio web y pudimos llamarlo directamente desde Excel para obtener el valor de ingresos previstos.</span><span class="sxs-lookup"><span data-stu-id="ed453-229">Within a few minutes, the web service was created and we could call it directly from Excel to return a predicted revenue value.</span></span> 

<span data-ttu-id="ed453-230">La sección *Panel de servicios web* incluye un libro de Excel descargable.</span><span class="sxs-lookup"><span data-stu-id="ed453-230">The *Web Services Dashboard* section includes a downloadable Excel workbook.</span></span> <span data-ttu-id="ed453-231">El libro contiene información predefinida sobre el esquema y la API de servicio web incrustada.</span><span class="sxs-lookup"><span data-stu-id="ed453-231">The workbook comes pre-formatted with the web service API and schema information embedded.</span></span> <span data-ttu-id="ed453-232">Al hacer clic en *Descargar el libro de Excel*, el libro se abre y puede guardarlo en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="ed453-232">When you click *Download Excel Workbook*, the workbook opens and you can save it to your local computer.</span></span> 

![][1]

<span data-ttu-id="ed453-233">Con el libro abierto, copie los parámetros predefinidos en la sección de parámetros de color azul, como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="ed453-233">With the workbook open, copy your predefined parameters into the blue Parameter section as shown below.</span></span> <span data-ttu-id="ed453-234">Una vez que se especifican los parámetros, Excel llama al servicio web Machine Learning y las etiquetas puntuadas previstas se mostrarán en la sección de valores de predicción de color verde.</span><span class="sxs-lookup"><span data-stu-id="ed453-234">Once the parameters are entered, Excel calls out to the Machine Learning web service and the predicted scored labels will display in the green Predicted Values section.</span></span> <span data-ttu-id="ed453-235">El libro continuará creando predicciones para los parámetros basándose en el modelo entrenado para todos los elementos de fila especificados en los parámetros.</span><span class="sxs-lookup"><span data-stu-id="ed453-235">The workbook will continue to create predictions for parameters based on your trained model for all row items entered under Parameters.</span></span> <span data-ttu-id="ed453-236">Para obtener más información sobre cómo usar esta característica, consulte [Consumo de un servicio web de Aprendizaje automático de Azure de Excel](machine-learning-consuming-from-excel.md).</span><span class="sxs-lookup"><span data-stu-id="ed453-236">For more information on how to use this feature, see [Consuming an Azure Machine Learning Web Service from Excel](machine-learning-consuming-from-excel.md).</span></span> 

![][2]

### <a name="optimization-and-further-experiments"></a><span data-ttu-id="ed453-237">Optimización y otros experimentos</span><span class="sxs-lookup"><span data-stu-id="ed453-237">Optimization and further experiments</span></span>
<span data-ttu-id="ed453-238">Ahora que teníamos una línea de base con nuestro modelo de Excel, dimos un paso más para optimizar nuestro modelo de regresión lineal de Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed453-238">Now that we had a baseline with our Excel model, we moved ahead to optimize our Machine Learning Linear Regression Model.</span></span> <span data-ttu-id="ed453-239">Usamos el módulo [Selección de características basada en filtros][filter-based-feature-selection] para mejorar nuestra selección de datos iniciales de elementos. Ello nos ayudó a lograr una mejora del rendimiento del 4,6 % en el error medio absoluto.</span><span class="sxs-lookup"><span data-stu-id="ed453-239">We used the module [Filter-Based Feature Selection][filter-based-feature-selection] to improve on our selection of initial data elements and it helped us achieve a performance improvement of 4.6% Mean Absolute Error.</span></span> <span data-ttu-id="ed453-240">Para proyectos futuros, utilizaremos esta característica que nos permitirá ahorrar semanas de iteración en los atributos de los datos para buscar el conjunto correcto de características que se utilizará para el modelado.</span><span class="sxs-lookup"><span data-stu-id="ed453-240">For future projects we will use this feature which could save us weeks in iterating through data attributes to find the right set of features to use for modelling.</span></span> 

<span data-ttu-id="ed453-241">A continuación, tenemos previsto incluir algoritmos adicionales como [bayesianos][bayesian-linear-regression] o [árboles de decisiones incrementados][boosted-decision-tree-regression] en nuestro experimento para comparar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ed453-241">Next we plan to include additional algorithms like [Bayesian][bayesian-linear-regression] or [Boosted Decision Trees][boosted-decision-tree-regression] in our experiment to compare performance.</span></span> 

<span data-ttu-id="ed453-242">Si desea experimentar con regresión, un buen conjunto de datos para probar es el conjunto de datos de ejemplo de Energy Efficiency Regression, que tiene muchos atributos numéricos.</span><span class="sxs-lookup"><span data-stu-id="ed453-242">If you want to experiment with regression, a good dataset to try is the Energy Efficiency Regression sample dataset, which has lots of numerical attributes.</span></span> <span data-ttu-id="ed453-243">El conjunto de datos se proporciona como parte de los conjuntos de datos de muestra en Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ed453-243">The dataset is provided as part of the sample datasets in Machine Learning Studio.</span></span> <span data-ttu-id="ed453-244">Puede usar diversos módulos de entrenamiento para predecir la carga de calefacción o refrigeración.</span><span class="sxs-lookup"><span data-stu-id="ed453-244">You can use a variety of learning modules to predict either Heating Load or Cooling Load.</span></span> <span data-ttu-id="ed453-245">En el gráfico siguiente, se muestra una comparación de distintos entrenamientos de regresión efectuados con el conjunto de datos Energy Efficiency para predecir una variable de destino sobre la carga de refrigeración:</span><span class="sxs-lookup"><span data-stu-id="ed453-245">The chart below is a performance comparison of different regression learns against the Energy Efficiency dataset predicting for the target variable Cooling Load:</span></span> 

| <span data-ttu-id="ed453-246">Modelo</span><span class="sxs-lookup"><span data-stu-id="ed453-246">Model</span></span> | <span data-ttu-id="ed453-247">Error medio absoluto</span><span class="sxs-lookup"><span data-stu-id="ed453-247">Mean Absolute Error</span></span> | <span data-ttu-id="ed453-248">Error cuadrático medio</span><span class="sxs-lookup"><span data-stu-id="ed453-248">Root Mean Squared Error</span></span> | <span data-ttu-id="ed453-249">Error absoluto relativo</span><span class="sxs-lookup"><span data-stu-id="ed453-249">Relative Absolute Error</span></span> | <span data-ttu-id="ed453-250">Error cuadrático relativo</span><span class="sxs-lookup"><span data-stu-id="ed453-250">Relative Squared Error</span></span> | <span data-ttu-id="ed453-251">Coeficiente de determinación</span><span class="sxs-lookup"><span data-stu-id="ed453-251">Coefficient of Determination</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ed453-252">Árbol de decisiones incrementados</span><span class="sxs-lookup"><span data-stu-id="ed453-252">Boosted Decision Tree</span></span> |<span data-ttu-id="ed453-253">0,930113</span><span class="sxs-lookup"><span data-stu-id="ed453-253">0.930113</span></span> |<span data-ttu-id="ed453-254">1,4239</span><span class="sxs-lookup"><span data-stu-id="ed453-254">1.4239</span></span> |<span data-ttu-id="ed453-255">0,106647</span><span class="sxs-lookup"><span data-stu-id="ed453-255">0.106647</span></span> |<span data-ttu-id="ed453-256">0,021662</span><span class="sxs-lookup"><span data-stu-id="ed453-256">0.021662</span></span> |<span data-ttu-id="ed453-257">0,978338</span><span class="sxs-lookup"><span data-stu-id="ed453-257">0.978338</span></span> |
| <span data-ttu-id="ed453-258">Regresión lineal (descenso de gradiente)</span><span class="sxs-lookup"><span data-stu-id="ed453-258">Linear Regression (Gradient Descent)</span></span> |<span data-ttu-id="ed453-259">2,035693</span><span class="sxs-lookup"><span data-stu-id="ed453-259">2.035693</span></span> |<span data-ttu-id="ed453-260">2,98006</span><span class="sxs-lookup"><span data-stu-id="ed453-260">2.98006</span></span> |<span data-ttu-id="ed453-261">0,233414</span><span class="sxs-lookup"><span data-stu-id="ed453-261">0.233414</span></span> |<span data-ttu-id="ed453-262">0,094881</span><span class="sxs-lookup"><span data-stu-id="ed453-262">0.094881</span></span> |<span data-ttu-id="ed453-263">0,905119</span><span class="sxs-lookup"><span data-stu-id="ed453-263">0.905119</span></span> |
| <span data-ttu-id="ed453-264">Regresión de red neuronal</span><span class="sxs-lookup"><span data-stu-id="ed453-264">Neural Network Regression</span></span> |<span data-ttu-id="ed453-265">1,548195</span><span class="sxs-lookup"><span data-stu-id="ed453-265">1.548195</span></span> |<span data-ttu-id="ed453-266">2,114617</span><span class="sxs-lookup"><span data-stu-id="ed453-266">2.114617</span></span> |<span data-ttu-id="ed453-267">0,177517</span><span class="sxs-lookup"><span data-stu-id="ed453-267">0.177517</span></span> |<span data-ttu-id="ed453-268">0,047774</span><span class="sxs-lookup"><span data-stu-id="ed453-268">0.047774</span></span> |<span data-ttu-id="ed453-269">0,952226</span><span class="sxs-lookup"><span data-stu-id="ed453-269">0.952226</span></span> |
| <span data-ttu-id="ed453-270">Regresión lineal (ordinaria de mínimos cuadrados)</span><span class="sxs-lookup"><span data-stu-id="ed453-270">Linear Regression (Ordinary Least Squares)</span></span> |<span data-ttu-id="ed453-271">1,428273</span><span class="sxs-lookup"><span data-stu-id="ed453-271">1.428273</span></span> |<span data-ttu-id="ed453-272">1,984461</span><span class="sxs-lookup"><span data-stu-id="ed453-272">1.984461</span></span> |<span data-ttu-id="ed453-273">0,163767</span><span class="sxs-lookup"><span data-stu-id="ed453-273">0.163767</span></span> |<span data-ttu-id="ed453-274">0,042074</span><span class="sxs-lookup"><span data-stu-id="ed453-274">0.042074</span></span> |<span data-ttu-id="ed453-275">0,957926</span><span class="sxs-lookup"><span data-stu-id="ed453-275">0.957926</span></span> |

## <a name="key-takeaways"></a><span data-ttu-id="ed453-276">Puntos clave</span><span class="sxs-lookup"><span data-stu-id="ed453-276">Key Takeaways</span></span>
<span data-ttu-id="ed453-277">Hemos aprendido mucho al ejecutar experimentos de regresión en Excel y en Aprendizaje automático de Azure de forma paralela.</span><span class="sxs-lookup"><span data-stu-id="ed453-277">We learned a lot by from running Excel regression and Azure Machine Learning experiments in parallel.</span></span> <span data-ttu-id="ed453-278">El hecho de crear un modelo de línea de base en Excel y compararlo con modelos usando la [regresión lineal][linear-regression] de Machine Learning nos permitió aprender sobre Azure Machine Learning. Además, descubrimos oportunidades para mejorar la selección de datos y el modelo de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ed453-278">Creating the baseline model in Excel and comparing it to models using Machine Learning [Linear Regression][linear-regression] helped us learn Azure Machine Learning, and we discovered opportunities to improve data selection and model performance.</span></span> 

<span data-ttu-id="ed453-279">También descubrimos que es aconsejable utilizar la [Selección de características basada en filtros][filter-based-feature-selection] para acelerar los proyectos futuros de predicción.</span><span class="sxs-lookup"><span data-stu-id="ed453-279">We also found that it is advisable to use [Filter-Based Feature Selection][filter-based-feature-selection] to accelerate future prediction projects.</span></span> <span data-ttu-id="ed453-280">Al aplicar la selección de características a los datos, se puede crear un modelo mejorado en Machine Learning con un mejor rendimiento general.</span><span class="sxs-lookup"><span data-stu-id="ed453-280">By applying feature selection to your data, you can create an improved model in Machine Learning with better overall performance.</span></span> 

<span data-ttu-id="ed453-281">La capacidad de transferir sistemáticamente la predicción analítica de previsión desde Machine Learning hasta Excel permite aumentar significativamente la capacidad de proporcionar resultados correctos a una extensa audiencia de usuarios empresariales.</span><span class="sxs-lookup"><span data-stu-id="ed453-281">The ability to transfer the predictive analytic forecasting from Machine Learning to Excel systemically allows a significant increase in the ability to successfully provide results to a broad business user audience.</span></span> 

## <a name="resources"></a><span data-ttu-id="ed453-282">Recursos</span><span class="sxs-lookup"><span data-stu-id="ed453-282">Resources</span></span>
<span data-ttu-id="ed453-283">A continuación, encontrará algunos recursos que le ayudarán a trabajar con la regresión:</span><span class="sxs-lookup"><span data-stu-id="ed453-283">Here are some resources for helping you work with regression:</span></span> 

* <span data-ttu-id="ed453-284">Regresión en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-284">Regression in Excel.</span></span> <span data-ttu-id="ed453-285">Si nunca ha intentado realizar la regresión en Excel, este tutorial le facilitará el trabajo: [http://www.excel-easy.com/examples/regression.html](http://www.excel-easy.com/examples/regression.html)</span><span class="sxs-lookup"><span data-stu-id="ed453-285">If you’ve never tried regression in Excel, this tutorial makes it easy: [http://www.excel-easy.com/examples/regression.html](http://www.excel-easy.com/examples/regression.html)</span></span>
* <span data-ttu-id="ed453-286">Regresión frente a previsión.</span><span class="sxs-lookup"><span data-stu-id="ed453-286">Regression vs forecasting.</span></span> <span data-ttu-id="ed453-287">Tyler Chessman escribió un artículo de blog que explica cómo realizar una serie de previsiones de tiempo en Excel.</span><span class="sxs-lookup"><span data-stu-id="ed453-287">Tyler Chessman wrote a blog article explaining how to do time series forecasting in Excel, which contains a good beginner’s description of linear regression.</span></span> [<span data-ttu-id="ed453-288">http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts</span><span class="sxs-lookup"><span data-stu-id="ed453-288">http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts</span></span>](http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts) 
* <span data-ttu-id="ed453-289">Regresión lineal ordinaria con mínimos cuadrados: errores, problemas y riesgos.</span><span class="sxs-lookup"><span data-stu-id="ed453-289">Ordinary Least Squares Linear Regression: Flaws, Problems and Pitfalls.</span></span> <span data-ttu-id="ed453-290">Introducción y análisis sobre la regresión: [http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/ ](http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/)</span><span class="sxs-lookup"><span data-stu-id="ed453-290">For an introduction and discussion of Regression: [http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/ ](http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/)</span></span>

[1]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-1.png
[2]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-2.png


<!-- Module References -->
[bayesian-linear-regression]: https://msdn.microsoft.com/library/azure/ee12de50-2b34-4145-aec0-23e0485da308/
[boosted-decision-tree-regression]: https://msdn.microsoft.com/library/azure/0207d252-6c41-4c77-84c3-73bdf1ac5960/
[filter-based-feature-selection]: https://msdn.microsoft.com/library/azure/918b356b-045c-412b-aa12-94a1d2dad90f/
[linear-regression]: https://msdn.microsoft.com/library/azure/31960a6f-789b-4cf7-88d6-2e1152c0bd1a/
[select-columns]: https://msdn.microsoft.com/library/azure/1ec722fa-b623-4e26-a44e-a50c6d726223/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/


---
title: "Optimización de algoritmos de Azure Machine Learning | Microsoft Docs"
description: "Explica cómo elegir el parámetro óptimo establecido para un algoritmo de Aprendizaje automático de Azure."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6717e30e-b8d8-4cc1-ad0b-1d4727928d32
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: b3be7f31ac31c656744fb809e3972af0ac4ad4f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="choose-parameters-to-optimize-your-algorithms-in-azure-machine-learning"></a><span data-ttu-id="3fe04-103">Elegir parámetros para optimizar los algoritmos de Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="3fe04-103">Choose parameters to optimize your algorithms in Azure Machine Learning</span></span>
<span data-ttu-id="3fe04-104">En este tema se describe cómo elegir el hiperparámetro adecuado establecido para un algoritmo en Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="3fe04-104">This topic describes how to choose the right hyperparameter set for an algorithm in Azure Machine Learning.</span></span> <span data-ttu-id="3fe04-105">La mayoría de los algoritmos de aprendizaje automático tienen parámetros para configurar.</span><span class="sxs-lookup"><span data-stu-id="3fe04-105">Most machine learning algorithms have parameters to set.</span></span> <span data-ttu-id="3fe04-106">Cuando entrena un modelo, tiene que especificar valores para esos parámetros.</span><span class="sxs-lookup"><span data-stu-id="3fe04-106">When you train a model, you need to provide values for those parameters.</span></span> <span data-ttu-id="3fe04-107">La eficacia del modelo entrenado depende de los parámetros del modelo que elija.</span><span class="sxs-lookup"><span data-stu-id="3fe04-107">The efficacy of the trained model depends on the model parameters that you choose.</span></span> <span data-ttu-id="3fe04-108">El proceso de encontrar el conjunto óptimo de parámetros se conoce como *selección del modelo*.</span><span class="sxs-lookup"><span data-stu-id="3fe04-108">The process of finding the optimal set of parameters is known as *model selection*.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="3fe04-109">Existen varias maneras de realizar la selección del modelo.</span><span class="sxs-lookup"><span data-stu-id="3fe04-109">There are various ways to do model selection.</span></span> <span data-ttu-id="3fe04-110">En Machine Learning, la validación cruzada es uno de los métodos más usados para la selección del modelo, y es el mecanismo de selección de modelo predeterminado en Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="3fe04-110">In machine learning, cross-validation is one of the most widely used methods for model selection, and it is the default model selection mechanism in Azure Machine Learning.</span></span> <span data-ttu-id="3fe04-111">Como R y Python son compatibles con Azure Machine Learning, siempre puede implementar sus propios mecanismos de selección de modelo mediante R o Python.</span><span class="sxs-lookup"><span data-stu-id="3fe04-111">Because Azure Machine Learning supports both R and Python, you can always implement their own model selection mechanisms by using either R or Python.</span></span>

<span data-ttu-id="3fe04-112">Hay cuatro pasos en el proceso de encontrar el mejor conjunto de parámetros:</span><span class="sxs-lookup"><span data-stu-id="3fe04-112">There are four steps in the process of finding the best parameter set:</span></span>

1. <span data-ttu-id="3fe04-113">**Definir el espacio de parámetro**: para el algoritmo, primero decida los valores de parámetro exactos que quiere tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="3fe04-113">**Define the parameter space**: For the algorithm, first decide the exact parameter values you want to consider.</span></span>
2. <span data-ttu-id="3fe04-114">**Definir la configuración de validación cruzada**: para el conjunto de datos, decida cómo elegir los plegamientos de validación cruzada.</span><span class="sxs-lookup"><span data-stu-id="3fe04-114">**Define the cross-validation settings**: Decide how to choose cross-validation folds for the dataset.</span></span>
3. <span data-ttu-id="3fe04-115">**Definir la métrica**: decida qué métrica se va a usar para determinar el mejor conjunto de parámetros, por ejemplo, la precisión, el error cuadrático medio raíz, la precisión, la recuperación o la puntuación f.</span><span class="sxs-lookup"><span data-stu-id="3fe04-115">**Define the metric**: Decide what metric to use for determining the best set of parameters, such as accuracy, root mean squared error, precision, recall, or f-score.</span></span>
4. <span data-ttu-id="3fe04-116">**Formar, evaluar y comparar**: para cada combinación única de los valores de parámetro, se lleva a cabo la validación cruzada y se basa en la métrica de error que defina.</span><span class="sxs-lookup"><span data-stu-id="3fe04-116">**Train, evaluate, and compare**: For each unique combination of the parameter values, cross-validation is carried out by and based on the error metric you define.</span></span> <span data-ttu-id="3fe04-117">Después de la evaluación y la comparación, puede elegir el modelo de máximo rendimiento.</span><span class="sxs-lookup"><span data-stu-id="3fe04-117">After evaluation and comparison, you can choose the best-performing model.</span></span>

<span data-ttu-id="3fe04-118">En la imagen siguiente se muestra cómo se puede lograr esto en Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="3fe04-118">The following image illustrates shows how this can be achieved in Azure Machine Learning.</span></span>

![Encontrar el mejor conjunto de parámetros](./media/machine-learning-algorithm-parameters-optimize/fig1.png)

## <a name="define-the-parameter-space"></a><span data-ttu-id="3fe04-120">Definir el espacio de parámetros</span><span class="sxs-lookup"><span data-stu-id="3fe04-120">Define the parameter space</span></span>
<span data-ttu-id="3fe04-121">Puede definir el conjunto de parámetros en el paso de inicialización del modelo.</span><span class="sxs-lookup"><span data-stu-id="3fe04-121">You can define the parameter set at the model initialization step.</span></span> <span data-ttu-id="3fe04-122">El panel de parámetros de todos los algoritmos de Machine Learning tiene dos modos de aprendizaje: de *único parámetro* y de *intervalo de parámetros*.</span><span class="sxs-lookup"><span data-stu-id="3fe04-122">The parameter pane of all machine learning algorithms has two trainer modes: *Single Parameter* and *Parameter Range*.</span></span> <span data-ttu-id="3fe04-123">Elija el modo del intervalo de parámetros.</span><span class="sxs-lookup"><span data-stu-id="3fe04-123">Choose Parameter Range mode.</span></span> <span data-ttu-id="3fe04-124">En el modo del intervalo de parámetros, puede escribir varios valores para cada parámetro.</span><span class="sxs-lookup"><span data-stu-id="3fe04-124">In Parameter Range mode, you can enter multiple values for each parameter.</span></span> <span data-ttu-id="3fe04-125">Puede escribir valores separados por comas en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="3fe04-125">You can enter comma-separated values in the text box.</span></span>

![Árbol de decisión ampliado de dos clases, único parámetro](./media/machine-learning-algorithm-parameters-optimize/fig2.png)

 <span data-ttu-id="3fe04-127">De manera alternativa, puede definir los puntos máximos y mínimos de la cuadrícula y el número total de puntos que se va a generar con **Usar generador de intervalo**.</span><span class="sxs-lookup"><span data-stu-id="3fe04-127">Alternately, you can define the maximum and minimum points of the grid and the total number of points to be generated with **Use Range Builder**.</span></span> <span data-ttu-id="3fe04-128">De manera predeterminada, se generan los valores de parámetro en una escala lineal.</span><span class="sxs-lookup"><span data-stu-id="3fe04-128">By default, the parameter values are generated on a linear scale.</span></span> <span data-ttu-id="3fe04-129">Pero si el cuadro **Escala logarítmica** está activado, los valores se generan en la escala logarítmica (es decir, la relación de los puntos adyacentes es constante en lugar de su diferencia).</span><span class="sxs-lookup"><span data-stu-id="3fe04-129">But if **Log Scale** is checked, the values are generated in the log scale (that is, the ratio of the adjacent points is constant instead of their difference).</span></span> <span data-ttu-id="3fe04-130">Para los parámetros de número entero, puede definir un intervalo con un guión.</span><span class="sxs-lookup"><span data-stu-id="3fe04-130">For integer parameters, you can define a range by using a hyphen.</span></span> <span data-ttu-id="3fe04-131">Por ejemplo, “1-10” significa que todos los valores enteros entre 1 y 10 (ambos inclusive) forman el conjunto de parámetros.</span><span class="sxs-lookup"><span data-stu-id="3fe04-131">For example, “1-10” means that all integers between 1 and 10 (both inclusive) form the parameter set.</span></span> <span data-ttu-id="3fe04-132">También se admite un modo mixto.</span><span class="sxs-lookup"><span data-stu-id="3fe04-132">A mixed mode is also supported.</span></span> <span data-ttu-id="3fe04-133">Por ejemplo, el conjunto de parámetros “1-10, 20, 50” incluirá números enteros de 1-10, 20 y 50.</span><span class="sxs-lookup"><span data-stu-id="3fe04-133">For example, the parameter set “1-10, 20, 50” would include integers 1-10, 20, and 50.</span></span>

![Árbol de decisión ampliado de dos clases, intervalo de parámetros](./media/machine-learning-algorithm-parameters-optimize/fig3.png)

## <a name="define-cross-validation-folds"></a><span data-ttu-id="3fe04-135">Definir los plegamientos de validación cruzada</span><span class="sxs-lookup"><span data-stu-id="3fe04-135">Define cross-validation folds</span></span>
<span data-ttu-id="3fe04-136">El módulo de [partición y ejemplo][partition-and-sample] se puede usar para asignar pliegues a los datos de forma aleatoria.</span><span class="sxs-lookup"><span data-stu-id="3fe04-136">The [Partition and Sample][partition-and-sample] module can be used to randomly assign folds to the data.</span></span> <span data-ttu-id="3fe04-137">En la siguiente configuración de ejemplo del módulo, definimos cinco plegamientos y asignamos aleatoriamente un número de plegamientos a las instancias de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="3fe04-137">In the following sample configuration for the module, we define five folds and randomly assign a fold number to the sample instances.</span></span>

![Partición y ejemplo](./media/machine-learning-algorithm-parameters-optimize/fig4.png)

## <a name="define-the-metric"></a><span data-ttu-id="3fe04-139">Definir la métrica</span><span class="sxs-lookup"><span data-stu-id="3fe04-139">Define the metric</span></span>
<span data-ttu-id="3fe04-140">El módulo [Optimizar el modelo Hiperparámetros][tune-model-hyperparameters] proporciona compatibilidad para elegir empíricamente el mejor conjunto de parámetros para un algoritmo determinado y el conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="3fe04-140">The [Tune Model Hyperparameters][tune-model-hyperparameters] module provides support for empirically choosing the best set of parameters for a given algorithm and dataset.</span></span> <span data-ttu-id="3fe04-141">El panel **Propiedades** de este módulo incluye, además de otra información referente a entrenar el modelo, la métrica para determinar el mejor conjunto de parámetros.</span><span class="sxs-lookup"><span data-stu-id="3fe04-141">In addition to other information regarding training the model, the **Properties** pane of this module includes the metric for determining the best parameter set.</span></span> <span data-ttu-id="3fe04-142">Tiene dos cuadros de lista desplegables diferentes para los algoritmos de clasificación y regresión, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="3fe04-142">It has two different drop-down list boxes for classification and regression algorithms, respectively.</span></span> <span data-ttu-id="3fe04-143">Si el algoritmo en cuestión es un algoritmo de clasificación, se ignorará la métrica de regresión y viceversa.</span><span class="sxs-lookup"><span data-stu-id="3fe04-143">If the algorithm under consideration is a classification algorithm, the regression metric is ignored and vice versa.</span></span> <span data-ttu-id="3fe04-144">En este ejemplo concreto, la métrica es **Precisión**.</span><span class="sxs-lookup"><span data-stu-id="3fe04-144">In this specific example, the metric is **Accuracy**.</span></span>   

![Limpiar parámetros](./media/machine-learning-algorithm-parameters-optimize/fig5.png)

## <a name="train-evaluate-and-compare"></a><span data-ttu-id="3fe04-146">Formar, evaluar y comparar</span><span class="sxs-lookup"><span data-stu-id="3fe04-146">Train, evaluate, and compare</span></span>
<span data-ttu-id="3fe04-147">El mismo módulo [Optimizar los hiperparámetros de modelo][tune-model-hyperparameters] entrena todos los modelos correspondientes al conjunto de parámetros, evalúa varias métricas y, después, genera el mejor modelo entrenado en función de la métrica que haya elegido.</span><span class="sxs-lookup"><span data-stu-id="3fe04-147">The same [Tune Model Hyperparameters][tune-model-hyperparameters] module trains all the models that correspond to the parameter set, evaluates various metrics, and then creates the best-trained model based on the metric you choose.</span></span> <span data-ttu-id="3fe04-148">Este módulo contiene dos entradas obligatorias:</span><span class="sxs-lookup"><span data-stu-id="3fe04-148">This module has two mandatory inputs:</span></span>

* <span data-ttu-id="3fe04-149">El aprendiz no formado</span><span class="sxs-lookup"><span data-stu-id="3fe04-149">The untrained learner</span></span>
* <span data-ttu-id="3fe04-150">El conjunto de datos</span><span class="sxs-lookup"><span data-stu-id="3fe04-150">The dataset</span></span>

<span data-ttu-id="3fe04-151">El módulo también tiene una entrada de conjunto de datos opcional.</span><span class="sxs-lookup"><span data-stu-id="3fe04-151">The module also has an optional dataset input.</span></span> <span data-ttu-id="3fe04-152">Conecte el conjunto de datos con la información de plegamientos a la entrada del conjunto de datos obligatorio.</span><span class="sxs-lookup"><span data-stu-id="3fe04-152">Connect the dataset with fold information to the mandatory dataset input.</span></span> <span data-ttu-id="3fe04-153">Si el conjunto de datos no se asigna a ninguna información de plegamientos, se ejecuta automáticamente una validación cruzada 10 veces más rápida de manera predeterminada.</span><span class="sxs-lookup"><span data-stu-id="3fe04-153">If the dataset is not assigned any fold information, then a 10-fold cross-validation is automatically executed by default.</span></span> <span data-ttu-id="3fe04-154">Si no se realiza la asignación de plegamientos y se proporciona un conjunto de datos de validación en el puerto opcional del conjunto de datos, se usa un modo de prueba de aprendizaje elegido y el primer conjunto de datos para entrenar el modelo para cada combinación de parámetros.</span><span class="sxs-lookup"><span data-stu-id="3fe04-154">If the fold assignment is not done and a validation dataset is provided at the optional dataset port, then a train-test mode is chosen and the first dataset is used to train the model for each parameter combination.</span></span>

![Clasificador del árbol de decisión ampliado](./media/machine-learning-algorithm-parameters-optimize/fig6a.png)

<span data-ttu-id="3fe04-156">Después, el modelo se evalúa en el conjunto de datos de validación.</span><span class="sxs-lookup"><span data-stu-id="3fe04-156">The model is then evaluated on the validation dataset.</span></span> <span data-ttu-id="3fe04-157">El puerto de salida izquierdo del módulo muestra métricas diferentes como funciones de los valores del parámetro.</span><span class="sxs-lookup"><span data-stu-id="3fe04-157">The left output port of the module shows different metrics as functions of parameter values.</span></span> <span data-ttu-id="3fe04-158">El puerto de salida derecho proporciona el modelo entrenado correspondiente al modelo de máximo rendimiento según la métrica elegida (**Precisión** en este caso).</span><span class="sxs-lookup"><span data-stu-id="3fe04-158">The right output port gives the trained model that corresponds to the best-performing model according to the chosen metric (**Accuracy** in this case).</span></span>  

![Conjunto de datos de validación](./media/machine-learning-algorithm-parameters-optimize/fig6b.png)

<span data-ttu-id="3fe04-160">Puede ver los parámetros exactos elegidos mediante la visualización del puerto de salida derecho.</span><span class="sxs-lookup"><span data-stu-id="3fe04-160">You can see the exact parameters chosen by visualizing the right output port.</span></span> <span data-ttu-id="3fe04-161">Este modelo puede utilizarse para determinar la puntuación de un conjunto de pruebas o en un servicio web de operaciones después de guardarlo como un modelo formado.</span><span class="sxs-lookup"><span data-stu-id="3fe04-161">This model can be used in scoring a test set or in an operationalized web service after saving as a trained model.</span></span>

<!-- Module References -->
[partition-and-sample]: https://msdn.microsoft.com/library/azure/a8726e34-1b3e-4515-b59a-3e4a475654b8/
[tune-model-hyperparameters]: https://msdn.microsoft.com/library/azure/038d91b6-c2f2-42a1-9215-1f2c20ed1b40/

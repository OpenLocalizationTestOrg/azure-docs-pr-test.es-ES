---
title: "Integración del código fuente de Azure Automation con GitHub Enterprise | Microsoft Docs"
description: "Se describen los detalles de cómo configurar la integración con GitHub Enterprise para el control del código fuente de Runbooks de Automation."
services: automation
documentationCenter: 
authors: mgoedtel
manager: jwhit
editor: 
ms.assetid: e01d817c-7d38-421c-adf5-647a4b526eb4
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: magoedte
ms.openlocfilehash: 62793dcdbbf4c83161e95d1c165d5c231245f7c6
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-github-enterprise"></a><span data-ttu-id="542ec-103">Escenario de Azure Automation: integración del control del código fuente de Automation con GitHub Enterprise</span><span class="sxs-lookup"><span data-stu-id="542ec-103">Azure Automation scenario - Automation source control integration with GitHub Enterprise</span></span>

<span data-ttu-id="542ec-104">Automation admite actualmente la integración del control del código fuente, que permite asociar Runbooks de su cuenta de Automation a un repositorio de control del código fuente de GitHub.</span><span class="sxs-lookup"><span data-stu-id="542ec-104">Automation currently supports source control integration, which allows you to associate runbooks in your Automation account to a GitHub source control repository.</span></span>  <span data-ttu-id="542ec-105">Sin embargo, los clientes que han implementado [GitHub Enterprise](https://enterprise.github.com/home) para permitir la compatibilidad con sus prácticas de DevOps, también lo quieren usar para administrar el ciclo de vida de los Runbooks desarrollados para automatizar los procesos de negocio y las operaciones de administración de servicios.</span><span class="sxs-lookup"><span data-stu-id="542ec-105">However, customers who have deployed [GitHub Enterprise](https://enterprise.github.com/home) to support their DevOps practices, also want to use it to manage the lifecycle of runbooks that are developed to automate business processes and service management operations.</span></span>  

<span data-ttu-id="542ec-106">En este escenario, tendrá un equipo Windows en su centro de datos configurado como un Hybrid Runbook Worker que tiene instalados los módulos de Azure Resource Manager y herramientas de Git.</span><span class="sxs-lookup"><span data-stu-id="542ec-106">In this scenario, you have a Windows computer in your data center configured as a Hybrid Runbook Worker with the Azure Resource Manager modules and Git tools installed.</span></span>  <span data-ttu-id="542ec-107">La máquina de Hybrid Worker tendrá un clon del repositorio de GIT local.</span><span class="sxs-lookup"><span data-stu-id="542ec-107">The Hybrid worker machine has a clone of the local Git repository.</span></span>  <span data-ttu-id="542ec-108">Cuando el Runbook se ejecuta en el Hybrid Worker, el directorio de GIT se sincroniza y el contenido de los archivos del Runbook se importa en la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-108">When the runbook is run on the hybrid worker, the Git directory is synchronized and the runbook file contents are imported into the Automation account.</span></span>

<span data-ttu-id="542ec-109">En este artículo se describe cómo realizar esta configuración en el entorno de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-109">This article describes how to set up this configuration in your Azure Automation environment.</span></span> <span data-ttu-id="542ec-110">Para comenzar, se configurará Automation con las credenciales de seguridad, los Runbooks necesarios para admitir este escenario y la implementación de un Hybrid Runbook Worker en su centro de datos para ejecutar los Runbooks y acceder al repositorio de GitHub Enterprise para sincronizarlos con la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-110">We start by configuring Automation with the security credentials, runbooks required to support this scenario, and deployment of a Hybrid Runbook Worker in your data center to run the runbooks and access your GitHub Enterprise repository to synchronize runbooks with your Automation account.</span></span>  


## <a name="getting-the-scenario"></a><span data-ttu-id="542ec-111">Obtención del escenario</span><span class="sxs-lookup"><span data-stu-id="542ec-111">Getting the scenario</span></span>

<span data-ttu-id="542ec-112">Este escenario consta de dos Runbooks de PowerShell que puede importar directamente desde la [Galería de Runbooks](automation-runbook-gallery.md) en Azure Portal o descargar de la [Galería de PowerShell](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="542ec-112">This scenario consists of two PowerShell runbooks that you can import directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal or download from the [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="542ec-113">Runbooks</span><span class="sxs-lookup"><span data-stu-id="542ec-113">Runbooks</span></span>

<span data-ttu-id="542ec-114">Runbook</span><span class="sxs-lookup"><span data-stu-id="542ec-114">Runbook</span></span> | <span data-ttu-id="542ec-115">Descripción</span><span class="sxs-lookup"><span data-stu-id="542ec-115">Description</span></span>| 
--------|------------|
<span data-ttu-id="542ec-116">Export-RunAsCertificateToHybridWorker</span><span class="sxs-lookup"><span data-stu-id="542ec-116">Export-RunAsCertificateToHybridWorker</span></span> | <span data-ttu-id="542ec-117">El Runbook exportará un certificado de ejecución desde una cuenta de Automation a un Hybrid Worker de forma que los Runbooks de trabajo puedan autenticarse con Azure a fin de importarlos en la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-117">Runbook exports a RunAs certificate from an Automation account to a hybrid worker so that runbooks on the worker can authenticate with Azure in order to import runbooks into the Automation account.</span></span>| 
<span data-ttu-id="542ec-118">Sync-LocalGitFolderToAutomationAccount</span><span class="sxs-lookup"><span data-stu-id="542ec-118">Sync-LocalGitFolderToAutomationAccount</span></span> | <span data-ttu-id="542ec-119">El Runbook sincronizará la carpeta GIT local de la máquina híbrida y luego importará los archivos de Runbook (*.ps1) en la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-119">Runbook syncs the local Git folder on the hybrid machine and then import the runbook files (*.ps1) into the Automation account.</span></span>|

### <a name="credentials"></a><span data-ttu-id="542ec-120">Credenciales</span><span class="sxs-lookup"><span data-stu-id="542ec-120">Credentials</span></span>

<span data-ttu-id="542ec-121">Credential:</span><span class="sxs-lookup"><span data-stu-id="542ec-121">Credential</span></span> | <span data-ttu-id="542ec-122">Descripción</span><span class="sxs-lookup"><span data-stu-id="542ec-122">Description</span></span>|
-----------|------------|
<span data-ttu-id="542ec-123">GitHRWCredential</span><span class="sxs-lookup"><span data-stu-id="542ec-123">GitHRWCredential</span></span> | <span data-ttu-id="542ec-124">El recurso de credencial que creará que contiene el nombre de usuario y la contraseña de un usuario con permisos para Hybrid Worker.</span><span class="sxs-lookup"><span data-stu-id="542ec-124">Credential asset you create to contain the username and password for a user with permissions to the hybrid worker.</span></span>|

## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="542ec-125">Instalación y configuración de este escenario</span><span class="sxs-lookup"><span data-stu-id="542ec-125">Installing and configuring this scenario</span></span>

### <a name="prerequisites"></a><span data-ttu-id="542ec-126">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="542ec-126">Prerequisites</span></span>

1. <span data-ttu-id="542ec-127">El Runbook Sync-LocalGitFolderToAutomationAccount se autentica mediante la [cuenta de ejecución de Azure](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="542ec-127">The Sync-LocalGitFolderToAutomationAccount runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span> 

2. <span data-ttu-id="542ec-128">También se necesita un área de trabajo de Microsoft Operations Management Suite (OMS) con la solución Azure Automation habilitada y configurada.</span><span class="sxs-lookup"><span data-stu-id="542ec-128">A Microsoft Operations Management Suite (OMS) workspace with the Azure Automation solution enabled and configured is also required.</span></span>  <span data-ttu-id="542ec-129">Si no tiene una asociada con la cuenta de Automation usada para instalar y configurar este escenario, se creará y configurará automáticamente al ejecutar el script **New-OnPremiseHybridWorker.ps1** desde Hybrid Runbook Worker.</span><span class="sxs-lookup"><span data-stu-id="542ec-129">If you do not have one that is associated with the Automation account used to install and configure this scenario, it is created and configured for you when you execute the **New-OnPremiseHybridWorker.ps1** script from the hybrid runbook worker.</span></span>        

    > [!NOTE]
    > <span data-ttu-id="542ec-130">Actualmente, solo las siguientes regiones admiten la integración de Automation con OMS: **sudeste de Australia**, **este de EE. UU. 2**, **Sudeste Asiático** y **Europa Occidental**.</span><span class="sxs-lookup"><span data-stu-id="542ec-130">Currently the following regions only support Automation integration with OMS - **Australia Southeast**, **East US 2**, **Southeast Asia**, and **West Europe**.</span></span> 

3. <span data-ttu-id="542ec-131">Un equipo que puede funcionar como Hybrid Runbook Worker dedicado que también hospedará el software de GitHub y mantendrá los archivos de Runbook (*runbook*.ps1) en un directorio de origen en el sistema de archivos para sincronizarlos entre GitHub y la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-131">A computer that can serve as a dedicated Hybrid Runbook Worker that will also host the GitHub software and maintain the runbook files (*runbook*.ps1) in a source directory on the file system to synchronize between GitHub and your Automation account.</span></span>

### <a name="import-and-publish-the-runbooks"></a><span data-ttu-id="542ec-132">Instalación y publicación de los Runbooks</span><span class="sxs-lookup"><span data-stu-id="542ec-132">Import and publish the runbooks</span></span>

<span data-ttu-id="542ec-133">Para importar los Runbooks *Export-RunAsCertificateToHybridWorker* y *Sync-LocalGitFolderToAutomationAccount* desde la Galería de Runbooks de su cuenta de Automation en Azure Portal, siga los procedimientos que se describen en [Importación de Runbooks desde la Galería de Runbooks](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal).</span><span class="sxs-lookup"><span data-stu-id="542ec-133">To import the *Export-RunAsCertificateToHybridWorker* and *Sync-LocalGitFolderToAutomationAccount* runbooks from the Runbook Gallery from your Automation account in the Azure portal, follow the procedures in [Import Runbook from the Runbook Gallery](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal).</span></span> <span data-ttu-id="542ec-134">Publique los Runbooks después de que se hayan importado correctamente en su cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-134">Publish the runbooks after they have been successfully imported into your Automation account.</span></span>

### <a name="deploy-and-configure-hybrid-runbook-worker"></a><span data-ttu-id="542ec-135">Implementación y configuración de Hybrid Runbook Worker</span><span class="sxs-lookup"><span data-stu-id="542ec-135">Deploy and Configure Hybrid Runbook Worker</span></span>

<span data-ttu-id="542ec-136">Si no tiene ya implementada una solución Hybrid Runbook Worker en su centro de datos, debe revisar los requisitos y seguir los pasos de instalación automatizada mediante el procedimiento que se describe en [Azure Automation Hybrid Runbook Workers: automatización de la instalación y la configuración](automation-hybrid-runbook-worker.md#automated-deployment).</span><span class="sxs-lookup"><span data-stu-id="542ec-136">If you do not have a Hybrid Runbook Worker already deployed in your data center, you should review the requirements and follow the automated installation steps using the procedure in [Azure Automation Hybrid Runbook Workers - Automate Install and Configuration](automation-hybrid-runbook-worker.md#automated-deployment).</span></span>  <span data-ttu-id="542ec-137">Cuando haya instalado correctamente el Hybrid Worker en un equipo, realice los siguientes pasos para completar su configuración y hacer posible este escenario.</span><span class="sxs-lookup"><span data-stu-id="542ec-137">Once you have successfully installed the hybrid worker on a computer, perform the following steps to complete its configuration to support this scenario.</span></span>

1. <span data-ttu-id="542ec-138">Inicie sesión en el equipo que hospeda el rol Hybrid Runbook Worker con una cuenta que tenga derechos administrativos y cree un directorio que contenga los archivos de Runbook de GIT.</span><span class="sxs-lookup"><span data-stu-id="542ec-138">Sign on to the computer hosting the Hybrid Runbook Worker role with an account that has local administrative rights and create a directory to hold the Git runbook files.</span></span>  <span data-ttu-id="542ec-139">Clone el repositorio de GIT interno en el directorio.</span><span class="sxs-lookup"><span data-stu-id="542ec-139">Clone  the internal Git repository to the directory.</span></span>
2. <span data-ttu-id="542ec-140">Si aún no tiene una cuenta de ejecución creada o quiere crear una nueva dedicada para este fin, en Azure Portal, vaya a las cuentas de Automation, seleccione su cuenta de Automation y cree un [recurso de credencial](automation-credentials.md) que contenga el nombre de usuario y la contraseña de un usuario con permisos para el Hybrid Worker.</span><span class="sxs-lookup"><span data-stu-id="542ec-140">If you do not already have a RunAs account created or you want to create a new one dedicated for this purpose, from the Azure portal navigate to Automation accounts, select your Automation account and create a [credential asset](automation-credentials.md) that contains the username and password for a user with permissions to the hybrid worker.</span></span>  
3. <span data-ttu-id="542ec-141">Desde su cuenta de Automation, [edit el Runbook](automation-edit-textual-runbook.md) **Export-RunAsCertificateToHybridWorker** y modifique el valor de la variable *$Password* con una contraseña segura.</span><span class="sxs-lookup"><span data-stu-id="542ec-141">From your Automation account, [edit the runbook](automation-edit-textual-runbook.md)  **Export-RunAsCertificateToHybridWorker** and modify the value for the variable *$Password* with a strong password.</span></span>  <span data-ttu-id="542ec-142">Después de modificar el valor, haga clic en **Publicar** para publicar la versión de borrador del Runbook.</span><span class="sxs-lookup"><span data-stu-id="542ec-142">After you modify the value, click **Publish** to have the draft version of the runbook published.</span></span> 
5. <span data-ttu-id="542ec-143">Inicie el Runbook **Export-RunAsCertificateToHybridWorker**, y en la hoja **Start Runbook** (Iniciar Runbook), en la opción **Parámetros de ejecución**, seleccione la opción **Hybrid Worker**. En la lista desplegable, seleccione el grupo de Hybrid Worker que creó anteriormente para este escenario.</span><span class="sxs-lookup"><span data-stu-id="542ec-143">Start the runbook **Export-RunAsCertificateToHybridWorker**, and in the **Start Runbook** blade, under the option **Run settings** select the option **Hybrid Worker** and in the drop-down list select the Hybrid worker group you created earlier for this scenario.</span></span>  

    <span data-ttu-id="542ec-144">Esta acción exportará un certificado al Hybrid Worker para que los Runbooks de trabajo puedan autenticarse con Azure mediante la conexión de ejecución para administrar los recursos de Azure (para este escenario en concreto, importe los Runbooks en la cuenta de Automation).</span><span class="sxs-lookup"><span data-stu-id="542ec-144">This exports a certificate to the hybrid worker so that runbooks on the worker can authenticate with Azure using the Run As connection in order to manage Azure resources (in particular for this scenario - import runbooks to the Automation account).</span></span>

4. <span data-ttu-id="542ec-145">En su cuenta de Automation, seleccione el grupo de Hybrid Worker creado anteriormente y [especifique una cuenta de ejecución](automation-hrw-run-runbooks.md#runas-account) para él; a continuación, elija el recurso de credencial que ya había creado o que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="542ec-145">From your Automation account, select the Hybrid worker group created earlier and [specify a RunAs account](automation-hrw-run-runbooks.md#runas-account) for the Hybrid worker group, and chose the credential asset you just or already have created.</span></span>  <span data-ttu-id="542ec-146">Esto garantiza que el Runbook de sincronización puede ejecutar comandos de GIT.</span><span class="sxs-lookup"><span data-stu-id="542ec-146">This assures that the Sync runbook can run Git commands.</span></span> 
5. <span data-ttu-id="542ec-147">Inicie el Runbook **Sync-LocalGitFolderToAutomationAccount**, proporcione los siguientes valores de parámetros de entrada necesarios y, en la hoja **Start Runbook** (Iniciar Runbook), en la opción **Parámetros de ejecución**, seleccione la opción **Hybrid Worker**. En la lista desplegable, seleccione el grupo de Hybrid Worker que creó anteriormente para este escenario:</span><span class="sxs-lookup"><span data-stu-id="542ec-147">Start the runbook **Sync-LocalGitFolderToAutomationAccount**, provide the following required input parameter values and in the **Start Runbook** blade, under the option **Run settings** select the option **Hybrid Worker** and in the drop-down list select the Hybrid worker group you created earlier for this scenario:</span></span>
    * <span data-ttu-id="542ec-148">*ResourceGroup*: el nombre del grupo de recursos asociado con la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-148">*ResourceGroup* - the name of your resource group associated with your Automation account</span></span>
    * <span data-ttu-id="542ec-149">*AutomationAccountName* : el nombre de la cuenta de Automatización.</span><span class="sxs-lookup"><span data-stu-id="542ec-149">*AutomationAccountName* - the name of your Automation account</span></span>
    * <span data-ttu-id="542ec-150">*GitPath*: la carpeta local o el archivo en el Hybrid Runbook Worker donde está configurado GIT para extraer los últimos cambios.</span><span class="sxs-lookup"><span data-stu-id="542ec-150">*GitPath* - The local folder or file on the Hybrid Runbook Worker where Git is set up to pull latest changes into</span></span>

    <span data-ttu-id="542ec-151">La carpeta de GIT local se sincronizará en el equipo de Hybrid Worker y luego se importarán los archivos .ps1 desde el directorio de origen hasta la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="542ec-151">This will sync the local Git folder on the hybrid worker computer and then import the .ps1 files from the source directory to the Automation account.</span></span>

    ![Start Sync-LocalGitFolderToAutomationAccount Runbook](media/automation-scenario-source-control-integration-with-github-ent/start-runbook-synclocalgitfoldertoautoacct.png)<br>

7. <span data-ttu-id="542ec-153">Vea los detalles de resumen del trabajo del runbook; para ello, selecciónelo en la hoja **Runbooks** de su cuenta de Automation y luego seleccione el icono **Trabajos**.</span><span class="sxs-lookup"><span data-stu-id="542ec-153">View job summary details for the runbook by selecting it from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="542ec-154">Para confirmar que se ha completado correctamente, seleccione el icono **All logs** (Todos los registros) y revise la secuencia de registro detallada.</span><span class="sxs-lookup"><span data-stu-id="542ec-154">Confirm it completed successfully by selecting the **All logs** tile and reviewing the detailed log stream.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="542ec-155">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="542ec-155">Next steps</span></span>

-  <span data-ttu-id="542ec-156">Para obtener más información sobre los tipos de Runbook, sus ventajas y sus limitaciones, consulte [Tipos de runbooks de Automatización de Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="542ec-156">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
-  <span data-ttu-id="542ec-157">Para obtener más información sobre la característica de compatibilidad con scripts de PowerShell, consulte [Announcing Native PowerShell Script Support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="542ec-157">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

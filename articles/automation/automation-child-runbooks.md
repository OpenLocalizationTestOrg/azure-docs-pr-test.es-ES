---
title: "aaaChild runbooks en automatización de Azure | Documentos de Microsoft"
description: "Describe las diferentes maneras de hello para iniciar un runbook en automatización de Azure desde otro runbook y compartir información entre ellos."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: d3d06818d344b565d53cc4f4705b41dcfcf9a376
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="dc67b-103">Runbooks secundarios en la Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="dc67b-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="dc67b-104">Es un procedimiento recomendado en automatización de Azure toowrite runbooks reutilizables, modulares, con una función independiente que se puede usar por otros runbooks.</span><span class="sxs-lookup"><span data-stu-id="dc67b-104">It is a best practice in Azure Automation toowrite reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="dc67b-105">Un runbook primario a menudo llamará a uno o varios runbooks secundarios tooperform requerido funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="dc67b-105">A parent runbook will often call one or more child runbooks tooperform required functionality.</span></span> <span data-ttu-id="dc67b-106">Hay dos toocall formas un runbook secundario, y cada una presenta diferencias que debe conocer para que pueda determinar cuál es la mejor para los diferentes escenarios.</span><span class="sxs-lookup"><span data-stu-id="dc67b-106">There are two ways toocall a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="dc67b-107">Invocación de un runbook secundario mediante la ejecución en línea</span><span class="sxs-lookup"><span data-stu-id="dc67b-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="dc67b-108">tooinvoke un runbook insertado desde otro runbook, utilice Hola nombre de runbook de Hola y proporcione valores para sus parámetros exactamente igual que haría una actividad o un cmdlet.</span><span class="sxs-lookup"><span data-stu-id="dc67b-108">tooinvoke a runbook inline from another runbook, you use hello name of hello runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="dc67b-109">Hola a todos los runbooks en la misma cuenta de automatización es tooall disponible otros toobe usadas de esta manera.</span><span class="sxs-lookup"><span data-stu-id="dc67b-109">All runbooks in hello same Automation account are available tooall others toobe used in this manner.</span></span> <span data-ttu-id="dc67b-110">Hola el runbook primario esperará Hola secundarios runbook toocomplete antes de mover la línea siguiente toohello y se devuelve ningún resultado directamente toohello primario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-110">hello parent runbook will wait for hello child runbook toocomplete before moving toohello next line, and any output is returned directly toohello parent.</span></span>

<span data-ttu-id="dc67b-111">Cuando se invoca un runbook insertado, se ejecuta en hello mismo trabajo como Hola el runbook primario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-111">When you invoke a runbook inline, it runs in hello same job as hello parent runbook.</span></span> <span data-ttu-id="dc67b-112">No habrá ninguna indicación en el historial de trabajos de hello del runbook secundario de Hola que se ejecutó.</span><span class="sxs-lookup"><span data-stu-id="dc67b-112">There will be no indication in hello job history of hello child runbook that it ran.</span></span> <span data-ttu-id="dc67b-113">Las excepciones y las salidas del runbook secundario de hello flujos se asociarán con primario Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-113">Any exceptions and any stream output from hello child runbook will be associated with hello parent.</span></span> <span data-ttu-id="dc67b-114">Esto da como resultado menos trabajos y facilita tootrack y tootroubleshoot desde cualquier excepción producida por el runbook secundario hello y cualquiera de sus resultados de la secuencia se asocian de trabajo primario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-114">This results in fewer jobs and makes them easier tootrack and tootroubleshoot since any exceptions thrown by hello child runbook and any of its stream output are associated with hello parent job.</span></span>

<span data-ttu-id="dc67b-115">Cuando se publica un runbook, cualquier runbook secundario al que llame deberá estar ya estar publicado.</span><span class="sxs-lookup"><span data-stu-id="dc67b-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="dc67b-116">Esto es así porque la Automatización de Azure crea una asociación con los runbooks secundarios cuando se compila un runbook.</span><span class="sxs-lookup"><span data-stu-id="dc67b-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="dc67b-117">Si no, el runbook primario Hola aparecerá toopublish correctamente, pero generará una excepción cuando se inicie.</span><span class="sxs-lookup"><span data-stu-id="dc67b-117">If they aren’t, hello parent runbook will appear toopublish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="dc67b-118">Si esto ocurre, puede volver a publicar el runbook primario de hello en orden tooproperly referencia Hola secundarios runbooks.</span><span class="sxs-lookup"><span data-stu-id="dc67b-118">If this happens, you can republish hello parent runbook in order tooproperly reference hello child runbooks.</span></span> <span data-ttu-id="dc67b-119">No es necesario toorepublish Hola primario runbook si se cambia cualquiera de los runbooks secundarios Hola porque ya se habrá creado Hola asociación.</span><span class="sxs-lookup"><span data-stu-id="dc67b-119">You do not need toorepublish hello parent runbook if any of hello child runbooks are changed because hello association will have already been created.</span></span>

<span data-ttu-id="dc67b-120">parámetros de Hola de un runbook secundario llamado en línea pueden ser cualquier tipo de datos, incluidos objetos complejos y no hay ningún [serialización JSON](automation-starting-a-runbook.md#runbook-parameters) como al iniciar runbook hello mediante Hola Portal de administración de Azure o con hello Cmdlet de inicio AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="dc67b-120">hello parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start hello runbook using hello Azure Management Portal or with hello Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="dc67b-121">Tipos de runbook</span><span class="sxs-lookup"><span data-stu-id="dc67b-121">Runbook types</span></span>
<span data-ttu-id="dc67b-122">Qué tipos pueden llamarse entre sí:</span><span class="sxs-lookup"><span data-stu-id="dc67b-122">Which types can call each other:</span></span>

* <span data-ttu-id="dc67b-123">Un [runbook de PowerShell](automation-runbook-types.md#powershell-runbooks) y los [runbooks gráficos](automation-runbook-types.md#graphical-runbooks) pueden llamarse entre sí en línea (ambos se basan en PowerShell).</span><span class="sxs-lookup"><span data-stu-id="dc67b-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="dc67b-124">Un [runbook de flujo de trabajo de PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) y los runbooks gráficos de flujo de trabajo de PowerShell pueden llamarse entre sí en línea (ambos tipos se basan en el flujo de trabajo de PowerShell).</span><span class="sxs-lookup"><span data-stu-id="dc67b-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="dc67b-125">tipos de PowerShell de Hola y Hola que tipos de flujo de trabajo de PowerShell no puede llamar a alineadas entre sí y debe utilizar AzureRmAutomationRunbook de inicio.</span><span class="sxs-lookup"><span data-stu-id="dc67b-125">hello PowerShell types and hello PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="dc67b-126">Cuándo es importante el orden de publicación:</span><span class="sxs-lookup"><span data-stu-id="dc67b-126">When does publish order matter:</span></span>

* <span data-ttu-id="dc67b-127">Hola publicar runbooks solo es importante orden de runbooks de flujo de trabajo de PowerShell y flujo de trabajo de PowerShell gráfica.</span><span class="sxs-lookup"><span data-stu-id="dc67b-127">hello publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="dc67b-128">Cuando se llama a un runbook secundario gráficos o flujo de trabajo de PowerShell con una ejecución en línea, usa solo Hola de runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use hello name of hello runbook.</span></span>  <span data-ttu-id="dc67b-129">Cuando se llama a un runbook secundario de PowerShell, debe precedido a su nombre *.\\*  toospecify que hello secuencia de comandos se encuentra en el directorio local de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* toospecify that hello script is located in hello local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="dc67b-130">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="dc67b-130">Example</span></span>
<span data-ttu-id="dc67b-131">Hola siguiente ejemplo, invoca un runbook secundario de prueba que acepta tres parámetros, un objeto complejo, un entero y un valor booleano.</span><span class="sxs-lookup"><span data-stu-id="dc67b-131">hello following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="dc67b-132">salida de Hello de hello el runbook secundario se asigna tooa variable.</span><span class="sxs-lookup"><span data-stu-id="dc67b-132">hello output of hello child runbook is assigned tooa variable.</span></span>  <span data-ttu-id="dc67b-133">En este caso, el runbook secundario hello es un runbook de flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="dc67b-133">In this case, hello child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="dc67b-134">Aquí te mostramos Hola mismo ejemplo con un runbook de PowerShell como elemento secundario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-134">Following is hello same example using a PowerShell runbook as hello child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="dc67b-135">Inicio de un runbook secundario mediante un cmdlet</span><span class="sxs-lookup"><span data-stu-id="dc67b-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="dc67b-136">Puede usar hello [inicio AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) toostart cmdlet un runbook tal como se describe en [toostart un runbook con Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="dc67b-136">You can use hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart a runbook as described in [toostart a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="dc67b-137">Existen dos modos de usar este cmdlet.</span><span class="sxs-lookup"><span data-stu-id="dc67b-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="dc67b-138">En un modo Hola cmdlet devuelve Id. de trabajo de hello en cuanto se crea el trabajo de secundarios de hello runbook secundario se Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-138">In one mode, hello cmdlet returns hello job id as soon as hello child job is created for hello child runbook.</span></span>  <span data-ttu-id="dc67b-139">En Hola otro modo, que se habilita mediante la especificación de hello **-espere** parámetro, el cmdlet de hello esperará hasta secundarios Hola trabajo finaliza y devolverá la salida de hello del runbook secundario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-139">In hello other mode, which you enable by specifying hello **-wait** parameter, hello cmdlet will wait until hello child job finishes and will return hello output from hello child runbook.</span></span>

<span data-ttu-id="dc67b-140">trabajo de Hola de un runbook secundario iniciado con un cmdlet se ejecutará en un trabajo independiente desde el runbook primario Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-140">hello job from a child runbook started with a cmdlet will run in a separate job from hello parent runbook.</span></span> <span data-ttu-id="dc67b-141">Esto da como resultado el número de trabajos que cuando se invoca Hola runbook insertado y hace más difícil tootrack.</span><span class="sxs-lookup"><span data-stu-id="dc67b-141">This results in more jobs than invoking hello runbook inline and makes them more difficult tootrack.</span></span> <span data-ttu-id="dc67b-142">primario Hola puede iniciar varios runbooks secundarios de forma asincrónica sin tener que esperar cada toocomplete.</span><span class="sxs-lookup"><span data-stu-id="dc67b-142">hello parent can start multiple child runbooks asynchronously without waiting for each toocomplete.</span></span> <span data-ttu-id="dc67b-143">Para ese mismo tipo de ejecución en paralelo al llamar a runbooks secundarios de hello en línea, Hola el runbook primario necesitaría hello toouse [palabra clave parallel](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="dc67b-143">For that same kind of parallel execution calling hello child runbooks inline, hello parent runbook would need toouse hello [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="dc67b-144">Los parámetros de un runbook secundario iniciado con un cmdlet se proporcionan como una tabla hash, tal y como se describe en [Parámetros de runbook](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="dc67b-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="dc67b-145">Solo pueden usarse los tipos de datos simples.</span><span class="sxs-lookup"><span data-stu-id="dc67b-145">Only simple data types can be used.</span></span> <span data-ttu-id="dc67b-146">Si runbook hello tiene un parámetro con un tipo de datos complejos, a continuación, debe llamarse en línea.</span><span class="sxs-lookup"><span data-stu-id="dc67b-146">If hello runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="dc67b-147">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="dc67b-147">Example</span></span>
<span data-ttu-id="dc67b-148">Hello en el ejemplo siguiente se inicia un runbook secundario con parámetros y, a continuación, espera a que se toocomplete con hello AzureRmAutomationRunbook inicio-espera el parámetro.</span><span class="sxs-lookup"><span data-stu-id="dc67b-148">hello following example starts a child runbook with parameters and then waits for it toocomplete using hello Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="dc67b-149">Una vez completado, se recopila su salida del runbook secundario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-149">Once completed, its output is collected from hello child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="dc67b-150">Comparación de métodos para llamar a un runbook secundario</span><span class="sxs-lookup"><span data-stu-id="dc67b-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="dc67b-151">Hello siguiente tabla resume las diferencias de hello entre dos métodos de Hola para llamar a un runbook desde otro runbook.</span><span class="sxs-lookup"><span data-stu-id="dc67b-151">hello following table summarizes hello differences between hello two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="dc67b-152">En línea</span><span class="sxs-lookup"><span data-stu-id="dc67b-152">Inline</span></span> | <span data-ttu-id="dc67b-153">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="dc67b-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="dc67b-154">Trabajo</span><span class="sxs-lookup"><span data-stu-id="dc67b-154">Job</span></span> |<span data-ttu-id="dc67b-155">Runbooks secundarios se ejecutan en hello mismo trabajo como elemento primario de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-155">Child runbooks run in hello same job as hello parent.</span></span> |<span data-ttu-id="dc67b-156">Se crea un trabajo independiente para el runbook secundario Hola.</span><span class="sxs-lookup"><span data-stu-id="dc67b-156">A separate job is created for hello child runbook.</span></span> |
| <span data-ttu-id="dc67b-157">Ejecución</span><span class="sxs-lookup"><span data-stu-id="dc67b-157">Execution</span></span> |<span data-ttu-id="dc67b-158">El runbook primario espera Hola secundarios runbook toocomplete antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="dc67b-158">Parent runbook waits for hello child runbook toocomplete before continuing.</span></span> |<span data-ttu-id="dc67b-159">El runbook primario continúa inmediatamente después de que se inicie el runbook secundario *o* runbook primario espera Hola secundarios trabajo toofinish.</span><span class="sxs-lookup"><span data-stu-id="dc67b-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for hello child job toofinish.</span></span> |
| <span data-ttu-id="dc67b-160">Salida</span><span class="sxs-lookup"><span data-stu-id="dc67b-160">Output</span></span> |<span data-ttu-id="dc67b-161">El runbook primario puede obtener los resultados directamente del runbook secundario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="dc67b-162">El runbook primario debe obtener los resultados directamente del trabajo de runbook secundario *o* el runbook primario puede obtener los resultados directamente del runbook secundario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="dc67b-163">parameters</span><span class="sxs-lookup"><span data-stu-id="dc67b-163">Parameters</span></span> |<span data-ttu-id="dc67b-164">Valores de parámetros del runbook secundario Hola se especifican por separado y pueden usar cualquier tipo de datos.</span><span class="sxs-lookup"><span data-stu-id="dc67b-164">Values for hello child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="dc67b-165">Valores de hello secundarios runbook parámetros deben combinarse en una sola tabla hash y solo pueden incluir el simple, de matriz y tipos de datos que utilicen la serialización JSON de objeto.</span><span class="sxs-lookup"><span data-stu-id="dc67b-165">Values for hello child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="dc67b-166">Cuenta de automatización</span><span class="sxs-lookup"><span data-stu-id="dc67b-166">Automation Account</span></span> |<span data-ttu-id="dc67b-167">El runbook primario solo puede usar runbook secundario Hola misma cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="dc67b-167">Parent runbook can only use child runbook in hello same automation account.</span></span> |<span data-ttu-id="dc67b-168">El runbook primario puede usar runbook secundario desde cualquier cuenta de automatización de hello misma suscripción de Azure e incluso de otra suscripción si tiene una tooit de conexión.</span><span class="sxs-lookup"><span data-stu-id="dc67b-168">Parent runbook can use child runbook from any automation account from hello same Azure subscription and even a different subscription if you have a connection tooit.</span></span> |
| <span data-ttu-id="dc67b-169">Publicación</span><span class="sxs-lookup"><span data-stu-id="dc67b-169">Publishing</span></span> |<span data-ttu-id="dc67b-170">El runbook secundario debe publicarse antes de publicar el runbook primario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="dc67b-171">El runbook secundario debe publicarse en cualquier momento antes de iniciar el runbook primario.</span><span class="sxs-lookup"><span data-stu-id="dc67b-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="dc67b-172">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="dc67b-172">Next steps</span></span>
* [<span data-ttu-id="dc67b-173">Inicio de un runbook en Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="dc67b-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="dc67b-174">Salidas de runbook y mensajes en la Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="dc67b-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)


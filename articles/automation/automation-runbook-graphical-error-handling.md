---
title: "aaaError control en runbooks gráficos de automatización de Azure | Documentos de Microsoft"
description: "Este artículo se describe cómo error tooimplement lógica en runbooks gráficos de automatización de Azure de control."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="dbb21-103">Control de errores en runbooks gráficos de Azure Automation</span><span class="sxs-lookup"><span data-stu-id="dbb21-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="dbb21-104">Un tooconsider principal de diseño clave runbook está identificando problemas diferentes que puede experimentar un runbook.</span><span class="sxs-lookup"><span data-stu-id="dbb21-104">A key runbook design principal tooconsider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="dbb21-105">Dichos problemas pueden incluir condiciones de correcto, estados de error esperado y condiciones de error inesperado.</span><span class="sxs-lookup"><span data-stu-id="dbb21-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="dbb21-106">Los runbooks deben incluir el control de errores.</span><span class="sxs-lookup"><span data-stu-id="dbb21-106">Runbooks should include error handling.</span></span> <span data-ttu-id="dbb21-107">toovalidate Hola de salida de una actividad o administrar un error con runbooks gráficos, puede usar una actividad de código de Windows PowerShell, defina la lógica condicional en el vínculo de salida de hello de actividad de Hola o aplicar otro método.</span><span class="sxs-lookup"><span data-stu-id="dbb21-107">toovalidate hello output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on hello output link of hello activity, or apply another method.</span></span>          

<span data-ttu-id="dbb21-108">A menudo, si se produce un error de no terminación que se produce con una actividad de runbook, se procesa cualquier actividad que siga sin tener en cuenta el error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dbb21-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of hello error.</span></span> <span data-ttu-id="dbb21-109">error de Hello es toogenerate es probable que una excepción, pero actividad siguiente Hola se sigue permitiendo que toorun.</span><span class="sxs-lookup"><span data-stu-id="dbb21-109">hello error is likely toogenerate an exception, but hello next activity is still allowed toorun.</span></span> <span data-ttu-id="dbb21-110">Esta es manera Hola que PowerShell está diseñado toohandle errores.</span><span class="sxs-lookup"><span data-stu-id="dbb21-110">This is hello way that PowerShell is designed toohandle errors.</span></span>    

<span data-ttu-id="dbb21-111">tipos de Hola de errores de PowerShell que se pueden producir durante la ejecución se finaliza o no terminación.</span><span class="sxs-lookup"><span data-stu-id="dbb21-111">hello types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="dbb21-112">diferencias de Hello entre errores de terminación y de no terminación son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="dbb21-112">hello differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="dbb21-113">**Error de terminación**: un error grave durante la ejecución que se detiene completamente comando hello (o ejecución del script).</span><span class="sxs-lookup"><span data-stu-id="dbb21-113">**Terminating error**: A serious error during execution that halts hello command (or script execution) completely.</span></span> <span data-ttu-id="dbb21-114">Entre los ejemplos se incluyen cmdlets inexistentes, errores de sintaxis que impiden la ejecución de un cmdlet u otros errores irrecuperables.</span><span class="sxs-lookup"><span data-stu-id="dbb21-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="dbb21-115">**Error de no terminación**: un error no grave que permite la ejecución toocontinue a pesar del error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dbb21-115">**Non-terminating error**: A non-serious error that allows execution toocontinue despite hello failure.</span></span> <span data-ttu-id="dbb21-116">Entre los ejemplos se incluyen errores operativos, como los errores de archivos no encontrados y problemas de permisos.</span><span class="sxs-lookup"><span data-stu-id="dbb21-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="dbb21-117">Automatización de Azure se han mejorado runbooks gráficos con control de errores de hello capacidad tooinclude.</span><span class="sxs-lookup"><span data-stu-id="dbb21-117">Azure Automation graphical runbooks have been improved with hello capability tooinclude error handling.</span></span> <span data-ttu-id="dbb21-118">Ahora es posible convertir las excepciones en errores de no terminación y crear vínculos de error entre las actividades.</span><span class="sxs-lookup"><span data-stu-id="dbb21-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="dbb21-119">Este proceso permite al autor de un runbook toocatch errores y administra las condiciones realizadas o inesperadas.</span><span class="sxs-lookup"><span data-stu-id="dbb21-119">This process allows a runbook author toocatch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-toouse-error-handling"></a><span data-ttu-id="dbb21-120">Cuando el control de errores toouse</span><span class="sxs-lookup"><span data-stu-id="dbb21-120">When toouse error handling</span></span>

<span data-ttu-id="dbb21-121">Siempre que hay una actividad crítica que produce un error o una excepción, es importante tooprevent Hola siguiente actividad del runbook de procesamiento y toohandle error Hola adecuadamente.</span><span class="sxs-lookup"><span data-stu-id="dbb21-121">Whenever there is a critical activity that throws an error or exception, it's important tooprevent hello next activity in your runbook from processing and toohandle hello error appropriately.</span></span> <span data-ttu-id="dbb21-122">Esto es especialmente crítico cuando los runbooks dan soporte a un proceso de operaciones de un negocio o un servicio.</span><span class="sxs-lookup"><span data-stu-id="dbb21-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="dbb21-123">Para todas las actividades que pueden producir un error, el autor del runbook de hello puede agregar un vínculo de error que señala tooany otra actividad.</span><span class="sxs-lookup"><span data-stu-id="dbb21-123">For each activity that can produce an error, hello runbook author can add an error link pointing tooany other activity.</span></span>  <span data-ttu-id="dbb21-124">actividad de destino de Hello puede ser de cualquier tipo, incluidas las actividades de código, la invocación de un cmdlet, invocar otro runbook y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="dbb21-124">hello destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="dbb21-125">Además, la actividad de destino de hello también puede tener vínculos salientes.</span><span class="sxs-lookup"><span data-stu-id="dbb21-125">In addition, hello destination activity can also have outgoing links.</span></span> <span data-ttu-id="dbb21-126">Dichos vínculos pueden ser normales o de error,</span><span class="sxs-lookup"><span data-stu-id="dbb21-126">These links can be regular links or error links.</span></span> <span data-ttu-id="dbb21-127">Esto significa que el autor del runbook de hello puede implementar lógica compleja de control de errores sin ordenar de nuevo tooa actividad de código.</span><span class="sxs-lookup"><span data-stu-id="dbb21-127">This means hello runbook author can implement complex error-handling logic without resorting tooa code activity.</span></span> <span data-ttu-id="dbb21-128">Hola recomienda práctica es toocreate un runbook de control de errores dedicado con funcionalidad común, pero no es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="dbb21-128">hello recommended practice is toocreate a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="dbb21-129">Lógica de control de errores en una actividad de código de PowerShell no es Hola solo opción.</span><span class="sxs-lookup"><span data-stu-id="dbb21-129">Error-handling logic in a PowerShell code activity it isn't hello only option.</span></span>  

<span data-ttu-id="dbb21-130">Por ejemplo, considere la posibilidad de un runbook que intenta toostart una máquina virtual e instale una aplicación en él.</span><span class="sxs-lookup"><span data-stu-id="dbb21-130">For example, consider a runbook that tries toostart a VM and install an application on it.</span></span> <span data-ttu-id="dbb21-131">Si hello VM no se inicia correctamente, realiza dos acciones:</span><span class="sxs-lookup"><span data-stu-id="dbb21-131">If hello VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="dbb21-132">Envía una notificación acerca de este problema.</span><span class="sxs-lookup"><span data-stu-id="dbb21-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="dbb21-133">Inicia otro runbook que aprovisiona automáticamente una nueva máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dbb21-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="dbb21-134">Una solución es toohave un vínculo de error que señala la actividad de tooan que controla el paso uno.</span><span class="sxs-lookup"><span data-stu-id="dbb21-134">One solution is toohave an error link pointing tooan activity that handles step one.</span></span> <span data-ttu-id="dbb21-135">Por ejemplo, podría conectarse hello **Write-Warning** cmdlet tooan actividad para el paso dos, por ejemplo, hello **AzureRmAutomationRunbook inicio** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="dbb21-135">For example, you could connect hello **Write-Warning** cmdlet tooan activity for step two, such as hello **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="dbb21-136">También puede generalizar este comportamiento para su uso en número de runbooks colocando estas dos actividades en un runbook de control de errores independiente y la siguiente directriz de hello sugerido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="dbb21-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following hello guidance suggested earlier.</span></span> <span data-ttu-id="dbb21-137">Antes de llamar a este runbook de control de errores, puede construir un mensaje personalizado de datos Hola Hola original runbook y, a continuación, páselo como un runbook de control de errores de parámetro toohello.</span><span class="sxs-lookup"><span data-stu-id="dbb21-137">Before calling this error-handling runbook, you could construct a custom message from hello data in hello original runbook, and then pass it as a parameter toohello error-handling runbook.</span></span>

## <a name="how-toouse-error-handling"></a><span data-ttu-id="dbb21-138">Cómo el control de errores toouse</span><span class="sxs-lookup"><span data-stu-id="dbb21-138">How toouse error handling</span></span>

<span data-ttu-id="dbb21-139">Todas las actividades tienen una opción de configuración que convierte las excepciones en errores que no provocan la terminación.</span><span class="sxs-lookup"><span data-stu-id="dbb21-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="dbb21-140">De manera predeterminada esta opción está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="dbb21-140">By default, this setting is disabled.</span></span> <span data-ttu-id="dbb21-141">Se recomienda que habilite a esta configuración en cualquier actividad que desea que los errores de toohandle.</span><span class="sxs-lookup"><span data-stu-id="dbb21-141">We recommend that you enable this setting on any activity where you want toohandle errors.</span></span>  

<span data-ttu-id="dbb21-142">Al habilitar esta configuración, se le asegura que los errores de terminación y de no terminación en actividad hello se tratan como errores de no terminación y pueden controlarse con un vínculo de error.</span><span class="sxs-lookup"><span data-stu-id="dbb21-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in hello activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="dbb21-143">Después de configurar esta opción, crear una actividad que controla el error de Hola.</span><span class="sxs-lookup"><span data-stu-id="dbb21-143">After configuring this setting, you create an activity that handles hello error.</span></span> <span data-ttu-id="dbb21-144">Si produce algún error en una actividad, Hola, a continuación, error saliente se siguen los vínculos y vínculos regulares de hello no es así, son aunque actividad hello genera así la salida normal.</span><span class="sxs-lookup"><span data-stu-id="dbb21-144">If an activity produces any error, then hello outgoing error links are followed, and hello regular links are not, even if hello activity produces regular output as well.</span></span><br><br> ![Ejemplo de vínculo de error de runbook de Automation](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="dbb21-146">En el siguiente ejemplo de Hola, un runbook recupera una variable que contiene el nombre del equipo Hola de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="dbb21-146">In hello following example, a runbook retrieves a variable that contains hello computer name of a virtual machine.</span></span> <span data-ttu-id="dbb21-147">A continuación, intentar toostart Hola virtual machine con la siguiente actividad de Hola.</span><span class="sxs-lookup"><span data-stu-id="dbb21-147">It then attempts toostart hello virtual machine with hello next activity.</span></span><br><br> ![Ejemplo de control de errores de runbook de Automation](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="dbb21-149">Hola **Get-AutomationVariable** actividad y **AzureRmVm inicio** son tooconvert configurado excepciones tooerrors.</span><span class="sxs-lookup"><span data-stu-id="dbb21-149">hello **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured tooconvert exceptions tooerrors.</span></span>  <span data-ttu-id="dbb21-150">Si hay problemas para conseguir saludo inicial o variable Hola VM, a continuación, se generan errores.</span><span class="sxs-lookup"><span data-stu-id="dbb21-150">If there are problems getting hello variable or starting hello VM, then errors are generated.</span></span><br><br> <span data-ttu-id="dbb21-151">![Configuración de la actividad de control de errores de runbook de Automation](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="dbb21-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="dbb21-152">Fluyan de vínculos de errores de estos tooa de actividades único **la administración de errores** actividad (actividad de código).</span><span class="sxs-lookup"><span data-stu-id="dbb21-152">Error links flow from these activities tooa single **error management** activity (a code activity).</span></span> <span data-ttu-id="dbb21-153">Esta actividad se configura con una expresión simple de PowerShell que usa hello *Throw* toostop palabra clave de procesamiento, junto con *$Error.Exception.Message* tooget mensaje de Hola que describe Hola excepción actual.</span><span class="sxs-lookup"><span data-stu-id="dbb21-153">This activity is configured with a simple PowerShell expression that uses hello *Throw* keyword toostop processing, along with *$Error.Exception.Message* tooget hello message that describes hello current exception.</span></span><br><br> <span data-ttu-id="dbb21-154">![Ejemplo de código de control de errores de runbook de Automation](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="dbb21-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="dbb21-155">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="dbb21-155">Next steps</span></span>

* <span data-ttu-id="dbb21-156">toolearn más información acerca de los vínculos y tipos de vínculo en runbooks gráficos, consulte [edición gráfica en automatización de Azure](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="dbb21-156">toolearn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="dbb21-157">más información acerca de la ejecución de un runbook, cómo toomonitor runbook trabajos y otros detalles técnicos, consulte toolearn [realizar un seguimiento de un trabajo de runbook](automation-runbook-execution.md).</span><span class="sxs-lookup"><span data-stu-id="dbb21-157">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>

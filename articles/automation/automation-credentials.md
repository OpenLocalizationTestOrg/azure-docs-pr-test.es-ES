---
title: Recursos de credenciales en Azure Automation | Microsoft Docs
description: "Los recursos de credenciales en Automatización de Azure contienen credenciales de seguridad que se pueden usar para realizar la autenticación a los recursos a los que tiene acceso el runbook o configuración de DSC. En este artículo se describe cómo crear recursos de credenciales y usarlos en un runbook o una configuración de DSC."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 3209bf73-c208-425e-82b6-df49860546dd
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: bwren
ms.openlocfilehash: e2857515f3842a875ef7b5a9327392818931168f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="credential-assets-in-azure-automation"></a><span data-ttu-id="d68ac-104">Recursos de credenciales en Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="d68ac-104">Credential assets in Azure Automation</span></span>
<span data-ttu-id="d68ac-105">Un recurso de credencial de Automation contiene un objeto [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) que contiene credenciales de seguridad, como un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="d68ac-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span></span> <span data-ttu-id="d68ac-106">Los runbooks y las configuraciones de DSC pueden usar cmdlets que aceptan un objeto PSCredential para autenticación, o bien pueden extraer el nombre de usuario y la contraseña el objeto PSCredential para proporcionarlos a alguna aplicación o servicio que requiere autenticación.</span><span class="sxs-lookup"><span data-stu-id="d68ac-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract the username and password of the PSCredential object to provide to some application or service requiring authentication.</span></span> <span data-ttu-id="d68ac-107">Las propiedades de una credencial se almacenan de manera segura en Automatización de Azure y es posible tener acceso a ellas en el runbook o la configuración de DSC con la actividad [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) .</span><span class="sxs-lookup"><span data-stu-id="d68ac-107">The properties for a credential are stored securely in Azure Automation and can be accessed in the runbook or DSC configuration with the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span></span>

> [!NOTE]
> <span data-ttu-id="d68ac-108">Los recursos protegidos en Automatización de Azure incluyen credenciales, certificados, conexiones y variables cifradas.</span><span class="sxs-lookup"><span data-stu-id="d68ac-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span></span> <span data-ttu-id="d68ac-109">Estos recursos se cifran y se almacenan en Automatización de Azure con una clave única que se genera para cada cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="d68ac-109">These assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</span></span> <span data-ttu-id="d68ac-110">Esta clave se cifra mediante un certificado maestro y se almacena en Automatización de Azure.</span><span class="sxs-lookup"><span data-stu-id="d68ac-110">This key is encrypted by a master certificate and stored in Azure Automation.</span></span> <span data-ttu-id="d68ac-111">Antes de almacenar un recurso seguro, la clave de la cuenta de automatización se descifra con el certificado maestro y, a continuación, se utiliza para cifrar el recurso.</span><span class="sxs-lookup"><span data-stu-id="d68ac-111">Before storing a secure asset, the key for the automation account is decrypted using the master certificate and then used to encrypt the asset.</span></span>  

## <a name="windows-powershell-cmdlets"></a><span data-ttu-id="d68ac-112">Cmdlets de Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="d68ac-112">Windows PowerShell cmdlets</span></span>
<span data-ttu-id="d68ac-113">Los cmdlets de la tabla siguiente se usan para crear y administrar recursos de credenciales de Automatización con Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d68ac-113">The cmdlets in the following table are used to create and manage automation credential assets with Windows PowerShell.</span></span>  <span data-ttu-id="d68ac-114">Se incluyen como parte del [módulo Azure PowerShell](/powershell/azure/overview) que está disponible para su uso en las configuraciones de DSC y los runbooks de Automatización.</span><span class="sxs-lookup"><span data-stu-id="d68ac-114">They ship as part of the [Azure PowerShell module](/powershell/azure/overview) which is available for use in Automation runbooks and DSC configurations.</span></span>

| <span data-ttu-id="d68ac-115">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="d68ac-115">Cmdlets</span></span> | <span data-ttu-id="d68ac-116">Descripción</span><span class="sxs-lookup"><span data-stu-id="d68ac-116">Description</span></span> |
|:--- |:--- |
| [<span data-ttu-id="d68ac-117">Get-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d68ac-117">Get-AzureAutomationCredential</span></span>](/powershell/module/azure/get-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d68ac-118">Recupera información acerca de un recurso de credencial.</span><span class="sxs-lookup"><span data-stu-id="d68ac-118">Retrieves information about a credential asset.</span></span> <span data-ttu-id="d68ac-119">Solo puede recuperar la propia credencial desde la actividad **Get-AutomationPSCredential** .</span><span class="sxs-lookup"><span data-stu-id="d68ac-119">You can only retrieve the credential itself from **Get-AutomationPSCredential** activity.</span></span> |
| [<span data-ttu-id="d68ac-120">New-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d68ac-120">New-AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d68ac-121">Crea una nueva credencial de Automatización.</span><span class="sxs-lookup"><span data-stu-id="d68ac-121">Creates a new Automation credential.</span></span> |
| [<span data-ttu-id="d68ac-122">Remove- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d68ac-122">Remove- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d68ac-123">Quita una credencial de Automatización.</span><span class="sxs-lookup"><span data-stu-id="d68ac-123">Removes an Automation credential.</span></span> |
| [<span data-ttu-id="d68ac-124">Set- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d68ac-124">Set- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d68ac-125">Establece las propiedades para una credencial de Automatización existente.</span><span class="sxs-lookup"><span data-stu-id="d68ac-125">Sets the properties for an existing Automation credential.</span></span> |

## <a name="runbook-activities"></a><span data-ttu-id="d68ac-126">Actividades de runbook</span><span class="sxs-lookup"><span data-stu-id="d68ac-126">Runbook activities</span></span>
<span data-ttu-id="d68ac-127">Las actividades de la tabla siguiente se usan para tener acceso a las credenciales de un runbook y configuraciones de DSC.</span><span class="sxs-lookup"><span data-stu-id="d68ac-127">The activities in the following table are used to access credentials in a runbook and DSC configurations.</span></span>

| <span data-ttu-id="d68ac-128">Actividades</span><span class="sxs-lookup"><span data-stu-id="d68ac-128">Activities</span></span> | <span data-ttu-id="d68ac-129">Descripción</span><span class="sxs-lookup"><span data-stu-id="d68ac-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d68ac-130">Get-AutomationPSCredential</span><span class="sxs-lookup"><span data-stu-id="d68ac-130">Get-AutomationPSCredential</span></span> |<span data-ttu-id="d68ac-131">Obtiene una credencial para usarla en un runbook o una configuración de DSC.</span><span class="sxs-lookup"><span data-stu-id="d68ac-131">Gets a credential to use in a runbook or DSC configuration.</span></span> <span data-ttu-id="d68ac-132">Devuelve un objeto [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) .</span><span class="sxs-lookup"><span data-stu-id="d68ac-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span></span> |

> [!NOTE]
> <span data-ttu-id="d68ac-133">Debe evitar el uso de variables en el parámetro –Name de Get-AutomationPSCredential, debido a que esto podría complicar la detección de las dependencias entre runbooks o configuraciones de DSC, y recursos de credenciales en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="d68ac-133">You should avoid using variables in the –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span></span>
> 
> 

## <a name="creating-a-new-credential-asset"></a><span data-ttu-id="d68ac-134">Creación de un nuevo recurso de credencial</span><span class="sxs-lookup"><span data-stu-id="d68ac-134">Creating a new credential asset</span></span>

### <a name="to-create-a-new-credential-asset-with-the-azure-portal"></a><span data-ttu-id="d68ac-135">Para crear un nuevo recurso de credencial con el Portal de Azure</span><span class="sxs-lookup"><span data-stu-id="d68ac-135">To create a new credential asset with the Azure portal</span></span>
1. <span data-ttu-id="d68ac-136">En la cuenta de automatización, haga clic en la parte **Recursos** para abrir la hoja **Recursos**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-136">From your automation account, click the **Assets** part to open the **Assets** blade.</span></span>
2. <span data-ttu-id="d68ac-137">Haga clic en la parte de **Credenciales** para abrir la hoja **Credenciales**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-137">Click the **Credentials** part to open the **Credentials** blade.</span></span>
3. <span data-ttu-id="d68ac-138">Haga clic en **Agregar una credencial** en la parte superior de la hoja.</span><span class="sxs-lookup"><span data-stu-id="d68ac-138">Click **Add a credential** at the top of the blade.</span></span>
4. <span data-ttu-id="d68ac-139">Complete el formulario y haga clic en **Crear** para guardar la nueva credencial.</span><span class="sxs-lookup"><span data-stu-id="d68ac-139">Complete the form and click **Create** to save the new credential.</span></span>

### <a name="to-create-a-new-credential-asset-with-windows-powershell"></a><span data-ttu-id="d68ac-140">Para crear un nuevo recurso de credencial con Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="d68ac-140">To create a new credential asset with Windows PowerShell</span></span>
<span data-ttu-id="d68ac-141">Los comandos de ejemplo siguientes muestran cómo crear una nueva credencial de automatización.</span><span class="sxs-lookup"><span data-stu-id="d68ac-141">The following sample commands show how to create a new automation credential.</span></span> <span data-ttu-id="d68ac-142">Primero se crea un objeto PSCredential con el nombre y la contraseña y, a continuación, se usa para crear el recurso de credencial.</span><span class="sxs-lookup"><span data-stu-id="d68ac-142">A PSCredential object is first created with the name and password and then used to create the credential asset.</span></span> <span data-ttu-id="d68ac-143">De manera alternativa, podría usar el cmdlet **Get-Credential** para que se le solicite escribir un nombre y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="d68ac-143">Alternatively, you could use the **Get-Credential** cmdlet to be prompted to type in a name and password.</span></span>

    $user = "MyDomain\MyUser"
    $pw = ConvertTo-SecureString "PassWord!" -AsPlainText -Force
    $cred = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $user, $pw
    New-AzureAutomationCredential -AutomationAccountName "MyAutomationAccount" -Name "MyCredential" -Value $cred

### <a name="to-create-a-new-credential-asset-with-the-azure-classic-portal"></a><span data-ttu-id="d68ac-144">Para crear un nuevo recurso de credencial con el Portal de Azure clásico</span><span class="sxs-lookup"><span data-stu-id="d68ac-144">To create a new credential asset with the Azure classic portal</span></span>
1. <span data-ttu-id="d68ac-145">En la cuenta de Automatización, haga clic en **Recursos** en la parte superior de la ventana.</span><span class="sxs-lookup"><span data-stu-id="d68ac-145">From your automation account, click **Assets** at the top of the window.</span></span>
2. <span data-ttu-id="d68ac-146">En la parte inferior de la ventana, haga clic en **Agregar configuración**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-146">At the bottom of the window, click **Add Setting**.</span></span>
3. <span data-ttu-id="d68ac-147">Haga clic en **Agregar credencial**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-147">Click **Add Credential**.</span></span>
4. <span data-ttu-id="d68ac-148">En el menú desplegable **Tipo de credenciales**, seleccione **Credencial de PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-148">In the **Credential Type** dropdown, select **PowerShell Credential**.</span></span>
5. <span data-ttu-id="d68ac-149">Realice los pasos del asistente y haga clic en la casilla para guardar la nueva credencial.</span><span class="sxs-lookup"><span data-stu-id="d68ac-149">Complete the wizard and click the checkbox to save the new credential.</span></span>

## <a name="using-a-powershell-credential"></a><span data-ttu-id="d68ac-150">Uso de una credencial de PowerShell</span><span class="sxs-lookup"><span data-stu-id="d68ac-150">Using a PowerShell credential</span></span>
<span data-ttu-id="d68ac-151">Puede recuperar un activo de credencial en un runbook o una configuración de DSC con la actividad **Get-AutomationPSCredential** .</span><span class="sxs-lookup"><span data-stu-id="d68ac-151">You retrieve a credential asset in a runbook or DSC configuration with the **Get-AutomationPSCredential** activity.</span></span> <span data-ttu-id="d68ac-152">Esto devuelve un [objeto PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) que puede usar con una actividad o cmdlet que requiere un parámetro PSCredential.</span><span class="sxs-lookup"><span data-stu-id="d68ac-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span></span> <span data-ttu-id="d68ac-153">También puede recuperar las propiedades del objeto de credencial para usarlas individualmente.</span><span class="sxs-lookup"><span data-stu-id="d68ac-153">You can also retrieve the properties of the credential object to use individually.</span></span> <span data-ttu-id="d68ac-154">El objeto tiene una propiedad para el nombre de usuario y la contraseña segura, o bien puede usar el método **GetNetworkCredential** para devolver un objeto [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) que proporcionará una versión no protegida de la contraseña.</span><span class="sxs-lookup"><span data-stu-id="d68ac-154">The object has a property for the username and the secure password, or you can use the **GetNetworkCredential** method to return a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of the password.</span></span>

### <a name="textual-runbook-sample"></a><span data-ttu-id="d68ac-155">Ejemplo de runbook de texto</span><span class="sxs-lookup"><span data-stu-id="d68ac-155">Textual runbook sample</span></span>
<span data-ttu-id="d68ac-156">Los comandos de ejemplo siguientes muestran cómo usar una credencial de PowerShell en un runbook.</span><span class="sxs-lookup"><span data-stu-id="d68ac-156">The following sample commands show how to use a PowerShell credential in a runbook.</span></span> <span data-ttu-id="d68ac-157">En este ejemplo, se recupera la contraseña y su nombre de usuario y contraseña se asignan a variables.</span><span class="sxs-lookup"><span data-stu-id="d68ac-157">In this example, the credential is retrieved and its username and password assigned to variables.</span></span>

    $myCredential = Get-AutomationPSCredential -Name 'MyCredential'
    $userName = $myCredential.UserName
    $securePassword = $myCredential.Password
    $password = $myCredential.GetNetworkCredential().Password


### <a name="graphical-runbook-sample"></a><span data-ttu-id="d68ac-158">Ejemplo de runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="d68ac-158">Graphical runbook sample</span></span>
<span data-ttu-id="d68ac-159">Para agregar una actividad **Get-AutomationPSCredential** a un runbook gráfico, haga clic con el botón derecho en la credencial en el panel Biblioteca del editor gráfico y, después, seleccione **Agregar a lienzo**.</span><span class="sxs-lookup"><span data-stu-id="d68ac-159">You add a **Get-AutomationPSCredential** activity to a graphical runbook by right-clicking on the credential in the Library pane of the graphical editor and selecting **Add to canvas**.</span></span>

![Agregar credencial a lienzo](media/automation-credentials/credential-add-canvas.png)

<span data-ttu-id="d68ac-161">La imagen siguiente muestra un ejemplo de cómo usar una credencial en un runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="d68ac-161">The following image shows an example of using a credential in a graphical runbook.</span></span>  <span data-ttu-id="d68ac-162">En este caso, se usa para proporcionar la autenticación de un runbook a los recursos de Azure, tal como se describe en [Autenticación de Runbooks con Administración de servicios de Azure y Resource Manager](automation-create-aduser-account.md).</span><span class="sxs-lookup"><span data-stu-id="d68ac-162">In this case, it is being used to provide authentication for a runbook to Azure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span></span>  <span data-ttu-id="d68ac-163">La primera actividad recupera la credencial que tiene acceso a la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="d68ac-163">The first activity retrieves the credential that has access to the Azure subscription.</span></span>  <span data-ttu-id="d68ac-164">A continuación, la actividad **Add-AzureAccount** usa esta credencial para proporcionar autenticación para cualquier actividad que venga después.</span><span class="sxs-lookup"><span data-stu-id="d68ac-164">The **Add-AzureAccount** activity then uses this credential to provide authentication for any activities that come after it.</span></span>  <span data-ttu-id="d68ac-165">Aquí se encuentra un [vínculo de canalización](automation-graphical-authoring-intro.md#links-and-workflow) , debido a que **Get-AutomationPSCredential** espera un solo objeto.</span><span class="sxs-lookup"><span data-stu-id="d68ac-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span></span>  

![Agregar credencial a lienzo](media/automation-credentials/get-credential.png)

## <a name="using-a-powershell-credential-in-dsc"></a><span data-ttu-id="d68ac-167">Uso de una credencial de PowerShell en DSC</span><span class="sxs-lookup"><span data-stu-id="d68ac-167">Using a PowerShell credential in DSC</span></span>
<span data-ttu-id="d68ac-168">Mientras las configuraciones DSC en Automatización de Azure pueden hacer referencia a los activos de credenciales a través de **Get-AutomationPSCredential**, los activos de credenciales también se pueden pasar, si se desea, a través de los parámetros.</span><span class="sxs-lookup"><span data-stu-id="d68ac-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span></span> <span data-ttu-id="d68ac-169">Para obtener más información, consulte [Compilación de configuraciones en DSC de Automatización de Azure](automation-dsc-compile.md#credential-assets).</span><span class="sxs-lookup"><span data-stu-id="d68ac-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d68ac-170">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d68ac-170">Next Steps</span></span>
* <span data-ttu-id="d68ac-171">Para obtener más información acerca de los vínculos en creación gráfica, consulte [Vínculos en Creación gráfica](automation-graphical-authoring-intro.md#links-and-workflow)</span><span class="sxs-lookup"><span data-stu-id="d68ac-171">To learn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span></span>
* <span data-ttu-id="d68ac-172">Para entender los distintos métodos de autenticación con la automatización, vea [Seguridad de Automatización de Azure](automation-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="d68ac-172">To understand the different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span></span>
* <span data-ttu-id="d68ac-173">Para empezar a trabajar con runbooks gráficos, consulte [Mi primer runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="d68ac-173">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="d68ac-174">Para empezar a trabajar con runbooks de flujo de trabajo de PowerShell, consulte [Mi primer runbook de flujo de trabajo de PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="d68ac-174">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 


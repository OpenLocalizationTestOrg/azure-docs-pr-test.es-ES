---
title: "Creación gráfica en Azure Automation | Microsoft Docs"
description: "Creación gráfica le permite crear runbooks para Automatización de Azure sin trabajar con el código. Este artículo brinda una introducción a la creación gráfica y todos los detalles necesarios para comenzar a crear un runbook gráfico."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 4b6f840c-e941-4293-a728-b33407317943
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 417fceb0961165d96ece000f95c8a3f973f4f75b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="graphical-authoring-in-azure-automation"></a><span data-ttu-id="a002a-104">Creación gráfica en Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="a002a-104">Graphical authoring in Azure Automation</span></span>
## <a name="introduction"></a><span data-ttu-id="a002a-105">Introducción</span><span class="sxs-lookup"><span data-stu-id="a002a-105">Introduction</span></span>
<span data-ttu-id="a002a-106">Creación gráfica permite crear runbooks para Automatización de Azure sin las complejidades del código subyacente de Windows PowerShell o del flujo de trabajo de esta herramienta.</span><span class="sxs-lookup"><span data-stu-id="a002a-106">Graphical Authoring allows you to create runbooks for Azure Automation without the complexities of the underlying Windows PowerShell or PowerShell Workflow code.</span></span> <span data-ttu-id="a002a-107">Puede agregar actividades a los lienzos de una biblioteca de cmdlets y runbooks, vincularlas y configurarlas para conformar un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a002a-107">You add activities to the canvas from a library of cmdlets and runbooks, link them together and configure to form a workflow.</span></span>  <span data-ttu-id="a002a-108">Si alguna vez ha utilizado System Center Orchestrator o Service Management Automation (SMA), el proceso le debería resultar familiar.</span><span class="sxs-lookup"><span data-stu-id="a002a-108">If you have ever worked with System Center Orchestrator or Service Management Automation (SMA), then this should look familiar to you.</span></span>   

<span data-ttu-id="a002a-109">Este artículo proporciona una introducción a la creación gráfica y los conceptos que necesita para comenzar a crear un runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="a002a-109">This article provides an introduction to graphical authoring and the concepts you need to get started in creating a graphical runbook.</span></span>

## <a name="graphical-runbooks"></a><span data-ttu-id="a002a-110">Runbooks gráficos</span><span class="sxs-lookup"><span data-stu-id="a002a-110">Graphical runbooks</span></span>
<span data-ttu-id="a002a-111">Todos los runbooks de Automatización de Azure son flujos de trabajo de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-111">All runbooks in Azure Automation are Windows PowerShell Workflows.</span></span>  <span data-ttu-id="a002a-112">Los runbooks gráficos y los runbooks gráficos de flujo de trabajo PowerShell generan código de PowerShell que ejecutan los trabajos de Automatización de Azure, pero no se pueden ver ni modificar directamente.</span><span class="sxs-lookup"><span data-stu-id="a002a-112">Graphical and Graphical PowerShell Workflow runbooks generate PowerShell code that is run by the Automation workers, but you are not able to view it or directly modify it.</span></span>  <span data-ttu-id="a002a-113">Un runbook gráfico se puede convertir en un runbook gráfico de flujo de trabajo de PowerShell y viceversa, pero no se pueden convertir en un runbook textual.</span><span class="sxs-lookup"><span data-stu-id="a002a-113">A Graphical runbook can be converted to a Graphical PowerShell Workflow runbook and vice-versa, but they cannot be converted to a textual runbook.</span></span> <span data-ttu-id="a002a-114">Los runbooks de texto existentes no se pueden importar en el editor de gráficos.</span><span class="sxs-lookup"><span data-stu-id="a002a-114">An existing textual runbook cannot be imported into the graphical editor.</span></span>  

## <a name="overview-of-graphical-editor"></a><span data-ttu-id="a002a-115">Información general del editor de gráficos</span><span class="sxs-lookup"><span data-stu-id="a002a-115">Overview of graphical editor</span></span>
<span data-ttu-id="a002a-116">Puede abrir el editor de gráficos en el Portal de Azure a través de la creación o la edición de un Runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="a002a-116">You can open the graphical editor in the Azure portal by creating or editing a graphical runbook.</span></span>

![Área de trabajo gráfica](media/automation-graphical-authoring-intro/runbook-graphical-editor.png)

<span data-ttu-id="a002a-118">Las secciones siguientes describen los controles del editor de gráficos.</span><span class="sxs-lookup"><span data-stu-id="a002a-118">The following sections describe the controls in the graphical editor.</span></span>

### <a name="canvas"></a><span data-ttu-id="a002a-119">Lienzo</span><span class="sxs-lookup"><span data-stu-id="a002a-119">Canvas</span></span>
<span data-ttu-id="a002a-120">El lienzo es donde se diseña su runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-120">The Canvas is where you design your runbook.</span></span>  <span data-ttu-id="a002a-121">Puede agregar actividades desde los nodos del control de Biblioteca al runbook y conectarlas con vínculos para definir la lógica del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-121">You add activities from the nodes in the Library control to the runbook and connect them with links to define the logic of the runbook.</span></span>

<span data-ttu-id="a002a-122">Puede utilizar los controles en la parte inferior del lienzo para acercar y alejar.</span><span class="sxs-lookup"><span data-stu-id="a002a-122">You can use the controls at the bottom of the canvas to zoom in and out.</span></span>

![Área de trabajo gráfica](media/automation-graphical-authoring-intro/runbook-canvas-controls.png)

### <a name="library-control"></a><span data-ttu-id="a002a-124">Control de Biblioteca</span><span class="sxs-lookup"><span data-stu-id="a002a-124">Library control</span></span>
<span data-ttu-id="a002a-125">El control de Biblioteca es donde selecciona las [actividades](#activities) para agregar a su runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-125">The Library control is where you select [activities](#activities) to add to your runbook.</span></span>  <span data-ttu-id="a002a-126">Puede agregarlas al lienzo donde las conecta a otras actividades.</span><span class="sxs-lookup"><span data-stu-id="a002a-126">You add them to the canvas where you connect them to other activities.</span></span>  <span data-ttu-id="a002a-127">Incluye cuatro secciones que se describen en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-127">It includes four sections described in the following table.</span></span>

| <span data-ttu-id="a002a-128">Sección</span><span class="sxs-lookup"><span data-stu-id="a002a-128">Section</span></span> | <span data-ttu-id="a002a-129">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a002a-130">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="a002a-130">Cmdlets</span></span> |<span data-ttu-id="a002a-131">Incluye todos los cmdlets que se pueden usar en su runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-131">Includes all the cmdlets that can be used in your runbook.</span></span>  <span data-ttu-id="a002a-132">Los cmdlets se organizan por módulo.</span><span class="sxs-lookup"><span data-stu-id="a002a-132">Cmdlets are organized by module.</span></span>  <span data-ttu-id="a002a-133">Estarán disponibles todos los módulos que ha instalado en su cuenta de Automatización.</span><span class="sxs-lookup"><span data-stu-id="a002a-133">All of the modules that you have installed in your automation account will be available.</span></span> |
| <span data-ttu-id="a002a-134">Runbooks</span><span class="sxs-lookup"><span data-stu-id="a002a-134">Runbooks</span></span> |<span data-ttu-id="a002a-135">Incluye los runbooks de la cuenta de Automatización de Azure.</span><span class="sxs-lookup"><span data-stu-id="a002a-135">Includes the runbooks in your automation account.</span></span> <span data-ttu-id="a002a-136">Estos runbooks se pueden agregar al lienzo para usarse como runbooks secundarios.</span><span class="sxs-lookup"><span data-stu-id="a002a-136">These runbooks can be added to the canvas to be used as child runbooks.</span></span> <span data-ttu-id="a002a-137">Solo se muestran los runbooks del mismo tipo básico que el del runbook que se está editando; para los runbooks gráficos, solo se muestran los basados en PowerShell, mientras que para los runbooks gráficos de flujo de trabajo de PowerShell, solo se muestran los basados en el flujo de trabajo de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-137">Only runbooks of the same core type as the runbook being edited are shown; for Graphical runbooks only PowerShell-based runbooks are shown, while for Graphical PowerShell Workflow runbooks only PowerShell-Workflow-based runbooks are shown.</span></span> |
| <span data-ttu-id="a002a-138">Recursos</span><span class="sxs-lookup"><span data-stu-id="a002a-138">Assets</span></span> |<span data-ttu-id="a002a-139">Incluye los [recursos de Automatización](http://msdn.microsoft.com/library/dn939988.aspx) de su cuenta de Automatización que se pueden usar en el runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-139">Includes the [automation assets](http://msdn.microsoft.com/library/dn939988.aspx) in your automation account that can be used in your runbook.</span></span>  <span data-ttu-id="a002a-140">Cuando un recurso se carga en un runbook, agregará una actividad de flujo de trabajo que obtiene el recurso seleccionado.</span><span class="sxs-lookup"><span data-stu-id="a002a-140">When you add an asset to a runbook, it will add a workflow activity that gets the selected asset.</span></span>  <span data-ttu-id="a002a-141">En el caso de los recursos de variables, puede seleccionar si agregar una actividad para obtener o seleccionar la variable.</span><span class="sxs-lookup"><span data-stu-id="a002a-141">In the case of variable assets, you can select whether to add an activity to get the variable or set the variable.</span></span> |
| <span data-ttu-id="a002a-142">Control de Runbook</span><span class="sxs-lookup"><span data-stu-id="a002a-142">Runbook Control</span></span> |<span data-ttu-id="a002a-143">Incluye las actividades de control de runbook que se pueden usar en el runbook actual.</span><span class="sxs-lookup"><span data-stu-id="a002a-143">Includes runbook control activities that can be used in your current runbook.</span></span> <span data-ttu-id="a002a-144">Una *unión* toma varias entradas y espera hasta que todas se completen antes de continuar con el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a002a-144">A *Junction* takes multiple inputs and waits until all have completed before continuing the workflow.</span></span> <span data-ttu-id="a002a-145">Una actividad de *código* ejecuta una o varias líneas de código de PowerShell o de flujo de trabajo de esta herramienta, en función del tipo de runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="a002a-145">A *Code* activity runs one or more lines of PowerShell or PowerShell Workflow code depending on the graphical runbook type.</span></span>  <span data-ttu-id="a002a-146">Puede usar esta actividad para ejecutar código personalizado o utilizar funcionalidades que sean difíciles de obtener con otras actividades.</span><span class="sxs-lookup"><span data-stu-id="a002a-146">You can use this activity for custom code or for functionality that is difficult to achieve with other activities.</span></span> |

### <a name="configuration-control"></a><span data-ttu-id="a002a-147">Control de Configuración</span><span class="sxs-lookup"><span data-stu-id="a002a-147">Configuration control</span></span>
<span data-ttu-id="a002a-148">En Control de configuración se proporcionan los detalles de un objeto seleccionado del lienzo.</span><span class="sxs-lookup"><span data-stu-id="a002a-148">The Configuration control is where you provide details for an object selected on the canvas.</span></span> <span data-ttu-id="a002a-149">Las propiedades disponibles en este control dependerán del tipo de objeto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="a002a-149">The properties available in this control will depend on the type of object selected.</span></span>  <span data-ttu-id="a002a-150">Cuando selecciona una opción en el control de Configuración, se abrirán hojas adicionales para proporcionar más información.</span><span class="sxs-lookup"><span data-stu-id="a002a-150">When you select an option in the Configuration control, it will open additional blades in order to provide additional information.</span></span>

### <a name="test-control"></a><span data-ttu-id="a002a-151">Control de Prueba</span><span class="sxs-lookup"><span data-stu-id="a002a-151">Test control</span></span>
<span data-ttu-id="a002a-152">El control de Prueba no aparece cuando se inicia por primera vez el editor de gráficos.</span><span class="sxs-lookup"><span data-stu-id="a002a-152">The Test control is not displayed when the graphical editor is first started.</span></span> <span data-ttu-id="a002a-153">Se abre cuando [prueba un runbook gráfico](#graphical-runbook-procedures)de manera interactiva.</span><span class="sxs-lookup"><span data-stu-id="a002a-153">It is opened when you interactively [test a graphical runbook](#graphical-runbook-procedures).</span></span>  

## <a name="graphical-runbook-procedures"></a><span data-ttu-id="a002a-154">Procedimientos de runbook gráficos</span><span class="sxs-lookup"><span data-stu-id="a002a-154">Graphical runbook procedures</span></span>
### <a name="exporting-and-importing-a-graphical-runbook"></a><span data-ttu-id="a002a-155">Exportación e importación de un runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="a002a-155">Exporting and importing a graphical runbook</span></span>
<span data-ttu-id="a002a-156">Solo puede exportar la versión publicada de un runbook gráfico.</span><span class="sxs-lookup"><span data-stu-id="a002a-156">You can only export the published version of a graphical runbook.</span></span>  <span data-ttu-id="a002a-157">Si el runbook no se ha publicado todavía, se deshabilitará el botón **Exportar publicados** .</span><span class="sxs-lookup"><span data-stu-id="a002a-157">If the runbook has not yet been published, then the **Export published** button will be disabled.</span></span>  <span data-ttu-id="a002a-158">Al hacer clic en el **Exportar publicados** , el runbook se descargará en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="a002a-158">When you click the **Export published** button, the runbook is downloaded to your local computer.</span></span>  <span data-ttu-id="a002a-159">El nombre del archivo coincide con el nombre del runbook con una extensión *graphrunbook* .</span><span class="sxs-lookup"><span data-stu-id="a002a-159">The name of the file matches the name of the runbook with a *graphrunbook* extension.</span></span>

![Exportar publicados](media/automation-graphical-authoring-intro/runbook-export.png)

<span data-ttu-id="a002a-161">Para importar un archivo de runbook gráfico o de runbook gráfico de flujo de trabajo de PowerShell, seleccione la opción **Importar** al agregar un runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-161">You can import a Graphical or Graphical PowerShell Workflow runbook file by selecting the **Import** option when adding a runbook.</span></span>   <span data-ttu-id="a002a-162">Al seleccionar el archivo para importar, puede mantener el mismo **Nombre** o proporcionar otro nuevo.</span><span class="sxs-lookup"><span data-stu-id="a002a-162">When you select the file to import, you can keep the same **Name** or provide a new one.</span></span>  <span data-ttu-id="a002a-163">El campo Tipo de Runbook mostrará el tipo de runbook después de que evalúe el archivo seleccionado. Además, si trata de elegir otro tipo que no es correcto, se presentará un mensaje donde se indica que hay posibles conflictos y que pueden producirse errores de sintaxis durante la conversión.</span><span class="sxs-lookup"><span data-stu-id="a002a-163">The Runbook Type field will display the type of runbook after it assesses the file selected and if you attempt to select a different type that is not correct, a message will be presented noting there are potential conflicts and during conversion, there could be syntax errors.</span></span>  

![Importar runbook](media/automation-graphical-authoring-intro/runbook-import-revised20165.png)

### <a name="testing-a-graphical-runbook"></a><span data-ttu-id="a002a-165">Prueba de un runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="a002a-165">Testing a graphical runbook</span></span>
<span data-ttu-id="a002a-166">Puede probar la versión de borrador de un Runbook en el Portal de Azure mientras deja sin modificación la versión publicada del Runbook, o bien puede probar un Runbook nuevo antes de su publicación.</span><span class="sxs-lookup"><span data-stu-id="a002a-166">You can test the Draft version of a runbook in the Azure portal while leaving the published version of the runbook unchanged, or you can test a new runbook before it has been published.</span></span> <span data-ttu-id="a002a-167">Esto permite comprobar que el runbook se ejecute correctamente antes de reemplazar la versión publicada.</span><span class="sxs-lookup"><span data-stu-id="a002a-167">This allows you to verify that the runbook is working correctly before replacing the published version.</span></span> <span data-ttu-id="a002a-168">Cuando se prueba un runbook, se ejecuta el runbook de borrador y se completan todas las acciones que realiza.</span><span class="sxs-lookup"><span data-stu-id="a002a-168">When you test a runbook, the Draft runbook is executed and any actions that it performs are completed.</span></span> <span data-ttu-id="a002a-169">No se crea ningún historial de trabajos, pero sí se muestran los resultados en el Panel de resultados de prueba.</span><span class="sxs-lookup"><span data-stu-id="a002a-169">No job history is created, but output is displayed in the Test Output Pane.</span></span> 

<span data-ttu-id="a002a-170">Para abrir el control de Prueba de un runbook, abra el runbook para editarlo y, a continuación, haga clic en el botón **Panel de prueba** .</span><span class="sxs-lookup"><span data-stu-id="a002a-170">Open the Test control for a runbook by opening the runbook for edit and then click on the **Test pane** button.</span></span>

![Botón Panel de prueba](media/automation-graphical-authoring-intro/runbook-edit-test-pane.png)

<span data-ttu-id="a002a-172">El control de Prueba solicitará cualquier parámetro de entrada y podrá iniciar el runbook si hace clic en el botón **Comenzar** .</span><span class="sxs-lookup"><span data-stu-id="a002a-172">The Test control will prompt for any input parameters, and you can start the runbook by clicking on the **Start** button.</span></span>

![Botones Control de Prueba](media/automation-graphical-authoring-intro/runbook-test-start.png)

### <a name="publishing-a-graphical-runbook"></a><span data-ttu-id="a002a-174">Publicación de un runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="a002a-174">Publishing a graphical runbook</span></span>
<span data-ttu-id="a002a-175">Cada runbook de Automatización de Azure tiene una versión de borrador y una versión publicada.</span><span class="sxs-lookup"><span data-stu-id="a002a-175">Each runbook in Azure Automation has a Draft and a Published version.</span></span> <span data-ttu-id="a002a-176">Solo es posible ejecutar la versión publicada y solo es posible editar la versión de borrador.</span><span class="sxs-lookup"><span data-stu-id="a002a-176">Only the Published version is available to be run, and only the Draft version can be edited.</span></span> <span data-ttu-id="a002a-177">Los cambios realizados en la versión de borrador no afectan la versión publicada.</span><span class="sxs-lookup"><span data-stu-id="a002a-177">The Published version is unaffected by any changes to the Draft version.</span></span> <span data-ttu-id="a002a-178">Cuando la versión de borrador está lista para su disponibilidad, puede publicarla, lo que sobrescribirá la versión publicada con la versión de borrador.</span><span class="sxs-lookup"><span data-stu-id="a002a-178">When the Draft version is ready to be available, then you publish it which overwrites the Published version with the Draft version.</span></span>

<span data-ttu-id="a002a-179">Para publicar un runbook gráfico, abra el runbook para editarlo y, a continuación, haga clic en el botón **Publicar** .</span><span class="sxs-lookup"><span data-stu-id="a002a-179">You can publish a graphical runbook by opening the runbook for editing and then clicking on the **Publish** button.</span></span>

![Botón Publicar](media/automation-graphical-authoring-intro/runbook-edit-publish.png)

<span data-ttu-id="a002a-181">Cuando todavía no se ha publicado un runbook, tiene un estado de **Nuevo**.</span><span class="sxs-lookup"><span data-stu-id="a002a-181">When a runbook has not yet been published, it has a status of **New**.</span></span>  <span data-ttu-id="a002a-182">Cuando se publica, su estado es **Publicado**.</span><span class="sxs-lookup"><span data-stu-id="a002a-182">When it is published, it has a status of **Published**.</span></span>  <span data-ttu-id="a002a-183">Si edita el runbook después de haberlo publicado y la versión de borrador y la versión publicada son distintas, el runbook tiene un estado de **En edición**.</span><span class="sxs-lookup"><span data-stu-id="a002a-183">If you edit the runbook after it has been published, and the Draft and Published versions are different, the runbook has a status of **In edit**.</span></span>

![Estados de runbooks](media/automation-graphical-authoring-intro/runbook-statuses-revised20165.png) 

<span data-ttu-id="a002a-185">También tiene la opción de revertir a la versión publicada de un runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-185">You also have the option to revert to the Published version of a runbook.</span></span>  <span data-ttu-id="a002a-186">Esto descarta los cambios realizados desde la última publicación del runbook y reemplaza la versión de borrador del runbook por la versión publicada.</span><span class="sxs-lookup"><span data-stu-id="a002a-186">This throws away any changes made since the runbook was last published and replaces the Draft version of the runbook with the Published version.</span></span>

![Revertir al botón de publicación](media/automation-graphical-authoring-intro/runbook-edit-revert-published.png)

## <a name="activities"></a><span data-ttu-id="a002a-188">actividades</span><span class="sxs-lookup"><span data-stu-id="a002a-188">Activities</span></span>
<span data-ttu-id="a002a-189">Las actividades son los bloques de creación de un runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-189">Activities are the building blocks of a runbook.</span></span>  <span data-ttu-id="a002a-190">Una actividad puede ser un cmdlet de PowerShell, un runbook secundario o una actividad de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a002a-190">An activity can be a PowerShell cmdlet, a child runbook, or a workflow activity.</span></span>  <span data-ttu-id="a002a-191">Para agregar una actividad al runbook, haga clic con el botón derecho en él en el control de Biblioteca y seleccione **Agregar a lienzo**.</span><span class="sxs-lookup"><span data-stu-id="a002a-191">You add an activity to the runbook by right clicking it in the Library control and selecting **Add to canvas**.</span></span>  <span data-ttu-id="a002a-192">Luego puede hacer clic en la actividad y arrastrarla para colocarla en cualquier lugar del lienzo que desee.</span><span class="sxs-lookup"><span data-stu-id="a002a-192">You can then click and drag the activity to place it anywhere on the canvas that you like.</span></span>  <span data-ttu-id="a002a-193">La ubicación de la actividad en el lienzo no afecta de ningún modo la operación del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-193">The location of the of the activity on the canvas does not effect the operation of the runbook in any way.</span></span>  <span data-ttu-id="a002a-194">Puede distribuir el runbook de la manera que considere más adecuada para visualizar su operación.</span><span class="sxs-lookup"><span data-stu-id="a002a-194">You can layout your runbook however you find it most suitable to visualize its operation.</span></span> 

![Agregar a lienzo](media/automation-graphical-authoring-intro/add-to-canvas-revised20165.png)

<span data-ttu-id="a002a-196">Seleccione la actividad en el lienzo para configurar sus propiedades y parámetros en la hoja Configuración.</span><span class="sxs-lookup"><span data-stu-id="a002a-196">Select the activity on the canvas to configure its properties and parameters in the Configuration blade.</span></span>  <span data-ttu-id="a002a-197">Puede cambiar la **Etiqueta** de la actividad a algo que sea descriptivo.</span><span class="sxs-lookup"><span data-stu-id="a002a-197">You can change the **Label** of the activity to something that is descriptive to you.</span></span>  <span data-ttu-id="a002a-198">El cmdlet original sigue en ejecución; simplemente se cambia el nombre para mostrar que se usará en el editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="a002a-198">The original cmdlet is still being run, you are simply changing its display name that will be used in the graphical editor.</span></span>  <span data-ttu-id="a002a-199">La etiqueta debe ser única dentro del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-199">The label must be unique within the runbook.</span></span> 

### <a name="parameter-sets"></a><span data-ttu-id="a002a-200">Conjuntos de parámetros</span><span class="sxs-lookup"><span data-stu-id="a002a-200">Parameter sets</span></span>
<span data-ttu-id="a002a-201">Un conjunto de parámetros define los parámetros obligatorios y opcionales que aceptarán valores para un cmdlet determinado.</span><span class="sxs-lookup"><span data-stu-id="a002a-201">A parameter set defines the mandatory and optional parameters that will accept values for a particular cmdlet.</span></span>  <span data-ttu-id="a002a-202">Todos los cmdlets tienen, al menos, un conjunto de parámetros y algunos tienen varios.</span><span class="sxs-lookup"><span data-stu-id="a002a-202">All cmdlets have at least one parameter set, and some have multiple.</span></span>  <span data-ttu-id="a002a-203">Si un cmdlet tiene varios conjuntos de parámetros, debe seleccionar el que usará antes de poder configurar los parámetros.</span><span class="sxs-lookup"><span data-stu-id="a002a-203">If a cmdlet has multiple parameter sets, then you must select which one you will use before you can configure parameters.</span></span>  <span data-ttu-id="a002a-204">Los parámetros que puede configurar dependerán del conjunto de parámetros que elija.</span><span class="sxs-lookup"><span data-stu-id="a002a-204">The parameters that you can configure will depend on the parameter set that you choose.</span></span>  <span data-ttu-id="a002a-205">Puede cambiar el conjunto de parámetros que una actividad usa mediante la selección de **Conjunto de parámetros** y luego de otro conjunto.</span><span class="sxs-lookup"><span data-stu-id="a002a-205">You can change the parameter set used by an activity by selecting **Parameter Set** and selecting another set.</span></span>  <span data-ttu-id="a002a-206">En este caso, se pierden todos los valores de parámetro que configuró.</span><span class="sxs-lookup"><span data-stu-id="a002a-206">In this case, any parameter values that you configured are lost.</span></span>

<span data-ttu-id="a002a-207">En el ejemplo siguiente, el cmdlet Get-AzureRmVM tiene tres conjuntos de parámetros.</span><span class="sxs-lookup"><span data-stu-id="a002a-207">In the following example, the Get-AzureRmVM cmdlet has three parameter sets.</span></span>  <span data-ttu-id="a002a-208">No es posible configurar valores de parámetro hasta que seleccione uno de los conjuntos de parámetros.</span><span class="sxs-lookup"><span data-stu-id="a002a-208">You cannot configure parameter values until you select one of the parameter sets.</span></span>  <span data-ttu-id="a002a-209">El conjunto de parámetros ListVirtualMachineInResourceGroupParamSet se utiliza para devolver todas las máquinas virtuales de un grupo de recursos. Solo tiene un parámetro opcional.</span><span class="sxs-lookup"><span data-stu-id="a002a-209">The ListVirtualMachineInResourceGroupParamSet parameter set is for returning all virtual machines in a resource group and has a single optional parameter.</span></span>  <span data-ttu-id="a002a-210">GetVirtualMachineInResourceGroupParamSet se utiliza para especificar la máquina virtual que quiere que se devuelva. Tiene dos parámetros obligatorios y uno opcional.</span><span class="sxs-lookup"><span data-stu-id="a002a-210">The GetVirtualMachineInResourceGroupParamSet is for specifying the virtual machine you want to return and has two mandatory and one optional parameter.</span></span>

![Conjunto de parámetros](media/automation-graphical-authoring-intro/get-azurermvm-parameter-sets.png)

#### <a name="parameter-values"></a><span data-ttu-id="a002a-212">Valores de parámetro</span><span class="sxs-lookup"><span data-stu-id="a002a-212">Parameter values</span></span>
<span data-ttu-id="a002a-213">Cuando especifica un valor para un parámetro, selecciona un origen de datos para determinar cómo se especificará el valor.</span><span class="sxs-lookup"><span data-stu-id="a002a-213">When you specify a value for a parameter, you select a data source to determine how the value will be specified.</span></span>  <span data-ttu-id="a002a-214">Los orígenes de datos disponibles para un parámetro determinado dependerán de los valores válidos para ese parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-214">The data sources that are available for a particular parameter will depend on the valid values for that parameter.</span></span>  <span data-ttu-id="a002a-215">Por ejemplo, Null no será una opción disponible para un parámetro que no permite valores nulos.</span><span class="sxs-lookup"><span data-stu-id="a002a-215">For example, Null will not be an available option for a parameter that does not allow null values.</span></span>

| <span data-ttu-id="a002a-216">Origen de datos</span><span class="sxs-lookup"><span data-stu-id="a002a-216">Data Source</span></span> | <span data-ttu-id="a002a-217">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-217">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a002a-218">Valor constante</span><span class="sxs-lookup"><span data-stu-id="a002a-218">Constant Value</span></span> |<span data-ttu-id="a002a-219">Escriba un valor para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-219">Type in a value for the parameter.</span></span>  <span data-ttu-id="a002a-220">Este solo se encuentra disponible para los siguientes tipos de datos: Int32, Int64, String, Boolean, DateTime, Switch.</span><span class="sxs-lookup"><span data-stu-id="a002a-220">This is only available for the following data types: Int32,Int64,String,Boolean,DateTime,Switch.</span></span> |
| <span data-ttu-id="a002a-221">Salida de la actividad</span><span class="sxs-lookup"><span data-stu-id="a002a-221">Activity Output</span></span> |<span data-ttu-id="a002a-222">Salida de una actividad que precede la actividad actual en el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a002a-222">Output from an activity that precedes the current activity in the workflow.</span></span>  <span data-ttu-id="a002a-223">Se mostrarán todas las actividades válidas.</span><span class="sxs-lookup"><span data-stu-id="a002a-223">All valid activities will be listed.</span></span>  <span data-ttu-id="a002a-224">Seleccione solo la actividad para usar su salida en el valor de parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-224">Select just the activity to use its output for the parameter value.</span></span>  <span data-ttu-id="a002a-225">Si la actividad genera un objeto con varias propiedades, puede escribir el nombre de la propiedad después de seleccionar la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-225">If the activity outputs an object with multiple properties, then you can type in the name of the property after selecting the activity.</span></span> |
| <span data-ttu-id="a002a-226">Entrada de Runbook</span><span class="sxs-lookup"><span data-stu-id="a002a-226">Runbook Input</span></span> |<span data-ttu-id="a002a-227">Seleccione un parámetro de entrada runbook como entrada para el parámetro de actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-227">Select a runbook input parameter as input to the activity parameter.</span></span> |
| <span data-ttu-id="a002a-228">Activo de variable</span><span class="sxs-lookup"><span data-stu-id="a002a-228">Variable Asset</span></span> |<span data-ttu-id="a002a-229">Seleccione una variable de Automatización como entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-229">Select an Automation Variable as input.</span></span> |
| <span data-ttu-id="a002a-230">Activo de credencial</span><span class="sxs-lookup"><span data-stu-id="a002a-230">Credential Asset</span></span> |<span data-ttu-id="a002a-231">Seleccione una credencial de Automatización como entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-231">Select an Automation Credential as input.</span></span> |
| <span data-ttu-id="a002a-232">Activo de certificado</span><span class="sxs-lookup"><span data-stu-id="a002a-232">Certificate Asset</span></span> |<span data-ttu-id="a002a-233">Seleccione un certificado de Automatización como entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-233">Select an Automation Certificate as input.</span></span> |
| <span data-ttu-id="a002a-234">Activo de conexión</span><span class="sxs-lookup"><span data-stu-id="a002a-234">Connection Asset</span></span> |<span data-ttu-id="a002a-235">Seleccione una conexión de Automatización como entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-235">Select an Automation Connection as input.</span></span> |
| <span data-ttu-id="a002a-236">Expresión de PowerShell</span><span class="sxs-lookup"><span data-stu-id="a002a-236">PowerShell Expression</span></span> |<span data-ttu-id="a002a-237">Especifique una [expresión de PowerShell](#powershell-expressions)simple.</span><span class="sxs-lookup"><span data-stu-id="a002a-237">Specify simple [PowerShell expression](#powershell-expressions).</span></span>  <span data-ttu-id="a002a-238">La expresión se evaluará antes de la actividad y el resultado se usará en el valor del parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-238">The expression will be evaluated before the activity and the result used for the parameter value.</span></span>  <span data-ttu-id="a002a-239">Puede usar variables para consultar la salida de una actividad o un parámetro de entrada de runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-239">You can use variables to refer to the output of an activity or a runbook input parameter.</span></span> |
| <span data-ttu-id="a002a-240">Sin configurar</span><span class="sxs-lookup"><span data-stu-id="a002a-240">Not configured</span></span> |<span data-ttu-id="a002a-241">Borrar cualquier valor configurado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="a002a-241">Clears any value that was previously configured.</span></span> |

#### <a name="optional-additional-parameters"></a><span data-ttu-id="a002a-242">Parámetros adicionales opcionales</span><span class="sxs-lookup"><span data-stu-id="a002a-242">Optional additional parameters</span></span>
<span data-ttu-id="a002a-243">Todos los cmdlets tendrán la opción de proporcionar parámetros adicionales.</span><span class="sxs-lookup"><span data-stu-id="a002a-243">All cmdlets will have the option to provide additional parameters.</span></span>  <span data-ttu-id="a002a-244">Se trata de parámetros comunes de PowerShell u otros parámetros personalizados.</span><span class="sxs-lookup"><span data-stu-id="a002a-244">These are PowerShell common parameters or other custom parameters.</span></span>  <span data-ttu-id="a002a-245">Aparecerá un cuadro de texto en el que podrá proporcionar parámetros con la sintaxis de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-245">You are presented with a text box where you can provide parameters using PowerShell syntax.</span></span>  <span data-ttu-id="a002a-246">Por ejemplo, para usar el parámetro común **Verbose**, debiera especificar **"-Verbose:$True"**.</span><span class="sxs-lookup"><span data-stu-id="a002a-246">For example, to use the **Verbose** common parameter, you would specify **"-Verbose:$True"**.</span></span>

### <a name="retry-activity"></a><span data-ttu-id="a002a-247">Vuelva a intentar la actividad</span><span class="sxs-lookup"><span data-stu-id="a002a-247">Retry activity</span></span>
<span data-ttu-id="a002a-248">**Comportamiento de reintento** permite que una actividad se ejecute varias veces hasta que se cumpla una condición determinada.</span><span class="sxs-lookup"><span data-stu-id="a002a-248">**Retry Behavior** allows an activity to be run multiple times until a particular condition is met, much like a loop.</span></span>  <span data-ttu-id="a002a-249">Puede utilizar esta característica en las actividades que deben ejecutarse varias veces, que son propensas a errores y que pueden requerir más de un intento para realizarse correctamente, o bien para probar que los datos de la información de salida son válidos.</span><span class="sxs-lookup"><span data-stu-id="a002a-249">You can use this feature for activities that should run multiple times, are error prone and may need more than one attempt for success, or test the output information of the activity for valid data.</span></span>    

<span data-ttu-id="a002a-250">Cuando se habilita el reintento de una actividad, puede establecer un retraso y una condición.</span><span class="sxs-lookup"><span data-stu-id="a002a-250">When you enable retry for an activity, you can set a delay and a condition.</span></span>  <span data-ttu-id="a002a-251">El retraso es el tiempo (medido en segundos o minutos) que el runbook esperará antes de que se ejecute la actividad de nuevo.</span><span class="sxs-lookup"><span data-stu-id="a002a-251">The delay is the time (measured in seconds or minutes) that the runbook will wait before it runs the activity again.</span></span>  <span data-ttu-id="a002a-252">Si no se especifica ningún retraso, la actividad se ejecutará de nuevo inmediatamente después de que se complete.</span><span class="sxs-lookup"><span data-stu-id="a002a-252">If no delay is specified, then the activity will run again immediately after it completes.</span></span> 

![Retraso de reintento de actividades](media/automation-graphical-authoring-intro/retry-delay.png)

<span data-ttu-id="a002a-254">La condición de reintento es una expresión de PowerShell que se evalúa cada vez que se ejecuta la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-254">The retry condition is a PowerShell expression that is evaluated after each time the activity runs.</span></span>  <span data-ttu-id="a002a-255">Si la expresión se resuelve como True, la actividad se vuelve a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="a002a-255">If the expression resolves to True, then the activity runs again.</span></span>  <span data-ttu-id="a002a-256">Si la expresión se resuelve en False, la actividad no se vuelve a ejecutar y el runbook se mueve a la actividad siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-256">If the expression resolves to False then the activity does not run again, and the runbook moves on to the next activity.</span></span> 

![Retraso de reintento de actividades](media/automation-graphical-authoring-intro/retry-condition.png)

<span data-ttu-id="a002a-258">La condición de reintento puede utilizar una variable denominada $RetryData que proporciona acceso a información sobre los reintentos de actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-258">The retry condition can use a variable called $RetryData that provides access to information about the activity retries.</span></span>  <span data-ttu-id="a002a-259">Esta variable tiene las propiedades de la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-259">This variable has the properties in the following table.</span></span>

| <span data-ttu-id="a002a-260">Propiedad</span><span class="sxs-lookup"><span data-stu-id="a002a-260">Property</span></span> | <span data-ttu-id="a002a-261">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-261">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a002a-262">NumberOfAttempts</span><span class="sxs-lookup"><span data-stu-id="a002a-262">NumberOfAttempts</span></span> |<span data-ttu-id="a002a-263">Número de veces que se ha ejecutado la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-263">Number of times that the activity has been run.</span></span> |
| <span data-ttu-id="a002a-264">Salida</span><span class="sxs-lookup"><span data-stu-id="a002a-264">Output</span></span> |<span data-ttu-id="a002a-265">Salida de la última ejecución de la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-265">Output from the last run of the activity.</span></span> |
| <span data-ttu-id="a002a-266">TotalDuration</span><span class="sxs-lookup"><span data-stu-id="a002a-266">TotalDuration</span></span> |<span data-ttu-id="a002a-267">Tiempo transcurrido desde la primera vez que se inició la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-267">Timed elapsed since the activity was started the first time.</span></span> |
| <span data-ttu-id="a002a-268">StartedAt</span><span class="sxs-lookup"><span data-stu-id="a002a-268">StartedAt</span></span> |<span data-ttu-id="a002a-269">Hora en formato UTC a la que se inició la actividad por primera vez.</span><span class="sxs-lookup"><span data-stu-id="a002a-269">Time in UTC format the activity was first started.</span></span> |

<span data-ttu-id="a002a-270">A continuación se muestran ejemplos de las condiciones de reintento de actividades.</span><span class="sxs-lookup"><span data-stu-id="a002a-270">Following are examples of activity retry conditions.</span></span>

    # Run the activity exactly 10 times.
    $RetryData.NumberOfAttempts -ge 10 

    # Run the activity repeatedly until it produces any output.
    $RetryData.Output.Count -ge 1 

    # Run the activity repeatedly until 2 minutes has elapsed. 
    $RetryData.TotalDuration.TotalMinutes -ge 2

<span data-ttu-id="a002a-271">Después de configurar una condición de reintento en una actividad, esta incluirá dos indicaciones visuales que sirven de recordatorio.</span><span class="sxs-lookup"><span data-stu-id="a002a-271">After you configure a retry condition for an activity, the activity includes two visual cues to remind you.</span></span>  <span data-ttu-id="a002a-272">Una se muestra en la actividad y la otra, cuando revise la configuración de la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-272">One is presented in the activity and the other is when you review the configuration of the activity.</span></span>

![Indicadores visuales de reintento de actividades](media/automation-graphical-authoring-intro/runbook-activity-retry-visual-cue.png)

### <a name="workflow-script-control"></a><span data-ttu-id="a002a-274">Control de Script de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="a002a-274">Workflow Script control</span></span>
<span data-ttu-id="a002a-275">Un control de código es una actividad especial que acepta scripts de PowerShell o de flujo de trabajo de esta herramienta en función del tipo de runbook gráfico que vaya a crearse. El objetivo es proporcionar una funcionalidad que, de otro modo, podría no estar disponible.</span><span class="sxs-lookup"><span data-stu-id="a002a-275">A Code control is a special activity that accepts PowerShell or PowerShell Workflow script depending on the type of graphical runbook being authored in order to provide functionality that may otherwise not be available.</span></span>  <span data-ttu-id="a002a-276">No puede aceptar parámetros, pero puede usar variables para los parámetros de entrada de runbook y de salida de actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-276">It cannot accept parameters, but it can use variables for activity output and runbook input parameters.</span></span>  <span data-ttu-id="a002a-277">Cualquier salida de la actividad se agrega al bus de datos, a menos que no tenga un vínculo de salida, en cuyo caso se agrega a la salida del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-277">Any output of the activity is added to the databus unless it has no outgoing link in which case it is added to the output of the runbook.</span></span>

<span data-ttu-id="a002a-278">Por ejemplo, el código siguiente realiza cálculos de fecha con una variable de entrada de runbook llamada $NumberOfDays.</span><span class="sxs-lookup"><span data-stu-id="a002a-278">For example the following code performs date calculations using a runbook input variable called $NumberOfDays.</span></span>  <span data-ttu-id="a002a-279">Luego envía una fecha y hora calculadas como salida para su uso por parte de actividades subsiguientes en el runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-279">It then sends a calculated date time as output to be used by subsequent activities in the runbook.</span></span>

    $DateTimeNow = (Get-Date).ToUniversalTime()
    $DateTimeStart = ($DateTimeNow).AddDays(-$NumberOfDays)}
    $DateTimeStart


## <a name="links-and-workflow"></a><span data-ttu-id="a002a-280">Vínculos y flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="a002a-280">Links and workflow</span></span>
<span data-ttu-id="a002a-281">Un **vínculo** en un runbook gráfico conecta dos actividades.</span><span class="sxs-lookup"><span data-stu-id="a002a-281">A **link** in a graphical runbook connects two activities.</span></span>  <span data-ttu-id="a002a-282">Se muestra en el lienzo como una flecha que apunta desde la actividad de origen hasta la actividad de destino.</span><span class="sxs-lookup"><span data-stu-id="a002a-282">It is displayed on the canvas as an arrow pointing from the source activity to the destination activity.</span></span>  <span data-ttu-id="a002a-283">Las actividades se ejecutan en la dirección de la flecha y la actividad de destino se inicia una vez que se completa la actividad de origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-283">The activities run in the direction of the arrow with the destination activity starting after the source activity completes.</span></span>  

### <a name="create-a-link"></a><span data-ttu-id="a002a-284">Creación de un vínculo</span><span class="sxs-lookup"><span data-stu-id="a002a-284">Create a link</span></span>
<span data-ttu-id="a002a-285">Para crear un vínculo entre dos actividades, seleccione la actividad de origen y haga clic en el círculo que aparece en la parte inferior de la forma.</span><span class="sxs-lookup"><span data-stu-id="a002a-285">Create a link between two activities by selecting the source activity and clicking the circle at the bottom of the shape.</span></span>  <span data-ttu-id="a002a-286">Arrastre la flecha a la actividad de destino y suéltela.</span><span class="sxs-lookup"><span data-stu-id="a002a-286">Drag the arrow to the destination activity and release.</span></span>

![Creación de un vínculo](media/automation-graphical-authoring-intro/create-link-revised20165.png)

<span data-ttu-id="a002a-288">Seleccione el vínculo para configurar sus propiedades en la hoja Configuración.</span><span class="sxs-lookup"><span data-stu-id="a002a-288">Select the link to configure its properties in the Configuration blade.</span></span>  <span data-ttu-id="a002a-289">Esto incluirá el tipo de vínculo que se describe en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-289">This will include the link type which is described in the following table.</span></span>

| <span data-ttu-id="a002a-290">Tipo de vínculo</span><span class="sxs-lookup"><span data-stu-id="a002a-290">Link Type</span></span> | <span data-ttu-id="a002a-291">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-291">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a002a-292">Canalización</span><span class="sxs-lookup"><span data-stu-id="a002a-292">Pipeline</span></span> |<span data-ttu-id="a002a-293">La actividad de destino se ejecuta una vez para cada salida de objeto desde la actividad de origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-293">The destination activity is run once for each object output from the source activity.</span></span>  <span data-ttu-id="a002a-294">La actividad de destino no se ejecuta si la actividad de origen no genera salida.</span><span class="sxs-lookup"><span data-stu-id="a002a-294">The destination activity does not run if the source activity results in no output.</span></span>  <span data-ttu-id="a002a-295">La salida de la actividad de origen está disponible como objeto.</span><span class="sxs-lookup"><span data-stu-id="a002a-295">Output from the source activity is available as an object.</span></span> |
| <span data-ttu-id="a002a-296">Secuencia</span><span class="sxs-lookup"><span data-stu-id="a002a-296">Sequence</span></span> |<span data-ttu-id="a002a-297">La actividad de destino se ejecuta solo una vez.</span><span class="sxs-lookup"><span data-stu-id="a002a-297">The destination activity runs only once.</span></span>  <span data-ttu-id="a002a-298">Recibe una matriz de objetos desde la actividad de origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-298">It receives an array of objects from the source activity.</span></span>  <span data-ttu-id="a002a-299">La salida de la actividad de origen está disponible como una matriz de objetos.</span><span class="sxs-lookup"><span data-stu-id="a002a-299">Output from the source activity is available as an array of objects.</span></span> |

### <a name="starting-activity"></a><span data-ttu-id="a002a-300">Actividad de inicio</span><span class="sxs-lookup"><span data-stu-id="a002a-300">Starting activity</span></span>
<span data-ttu-id="a002a-301">Un runbook gráfico se iniciará con cualquier actividad que no tenga un vínculo entrante.</span><span class="sxs-lookup"><span data-stu-id="a002a-301">A graphical runbook will start with any activities that do not have an incoming link.</span></span>  <span data-ttu-id="a002a-302">A menudo, esta será solo una actividad que podría servir como la actividad de inicio del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-302">This will often be only one activity which would act as the starting activity for the runbook.</span></span>  <span data-ttu-id="a002a-303">Si son varias las actividades que no tienen un vínculo entrante, el runbook se iniciará al ejecutarlas en paralelo.</span><span class="sxs-lookup"><span data-stu-id="a002a-303">If multiple activities do not have an incoming link, then the runbook will start by running them in parallel.</span></span>  <span data-ttu-id="a002a-304">A continuación, el runbook seguirá los vínculos para ejecutar otras actividades a medida que se finaliza cada una.</span><span class="sxs-lookup"><span data-stu-id="a002a-304">It will then follow the links to run other activities as each completes.</span></span>

### <a name="conditions"></a><span data-ttu-id="a002a-305">Condiciones</span><span class="sxs-lookup"><span data-stu-id="a002a-305">Conditions</span></span>
<span data-ttu-id="a002a-306">Cuando especifica una condición en un vínculo, la actividad de destino solo se ejecuta si la condición se resuelve como verdadera.</span><span class="sxs-lookup"><span data-stu-id="a002a-306">When you specify a condition on a link, the destination activity is only run if the condition resolves to true.</span></span>  <span data-ttu-id="a002a-307">Normalmente usará una variable $ActivityOutput en una condición para recuperar la salida desde la actividad de origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-307">You will typically use an $ActivityOutput variable in a condition to retrieve the output from the source activity.</span></span>  

<span data-ttu-id="a002a-308">Para un vínculo de canalización, especifique una condición para un solo objeto y la actividad de origen evaluará la condición para cada salida de objeto.</span><span class="sxs-lookup"><span data-stu-id="a002a-308">For a pipeline link, you specify a condition for a single object, and the condition is evaluated for each object output by the source activity.</span></span>  <span data-ttu-id="a002a-309">A continuación, se ejecuta la actividad de destino para cada objeto que cumple con la condición.</span><span class="sxs-lookup"><span data-stu-id="a002a-309">The destination activity is then run for each object that satisfies the condition.</span></span>  <span data-ttu-id="a002a-310">Por ejemplo, con una actividad de origen de Get-AzureRmVm, podría usarse la siguiente sintaxis para que un vínculo de canalización condicional recupere solo las máquinas virtuales del grupo de recursos denominado " *Group1*".</span><span class="sxs-lookup"><span data-stu-id="a002a-310">For example, with a source activity of Get-AzureRmVm, the following syntax could be used for a conditional pipeline link to retrieve only virtual machines in the resource group named *Group1*.</span></span>  

    $ActivityOutput['Get Azure VMs'].Name -match "Group1"

<span data-ttu-id="a002a-311">En el caso de un vínculo de secuencia, la condición solo se evalúa una vez, debido que se devuelve una sola matriz que contiene la salida de todos los objetos desde la actividad de origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-311">For a sequence link, the condition is only evaluated once since a single array is returned containing all objects output from the source activity.</span></span>  <span data-ttu-id="a002a-312">Debido a esto, no es posible usar un vínculo de secuencia para filtrar como un vínculo de canalización, sino que simplemente se determinará si la actividad siguiente se ejecuta o no.</span><span class="sxs-lookup"><span data-stu-id="a002a-312">Because of this, a sequence link cannot be used for filtering like a pipeline link but will simply determine whether or not the next activity is run.</span></span> <span data-ttu-id="a002a-313">Tomemos como ejemplo el siguiente conjunto de actividades de nuestro runbook para iniciar máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="a002a-313">Take for example the following set of activities in our Start VM runbook.</span></span><br> <span data-ttu-id="a002a-314">![Vínculo condicional con secuencias](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span><span class="sxs-lookup"><span data-stu-id="a002a-314">![Conditional Link with Sequences](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span></span><br>
<span data-ttu-id="a002a-315">Hay tres vínculos con secuencias distintas que comprueban los valores que se proporcionaron a dos parámetros de entrada de runbook que representan el nombre de la máquina virtual y el del grupo de recursos con el fin de determinar cuál es la mejor acción que se puede realizar: iniciar una sola máquina virtual, todas las del grupo de recursos del sistema o todas las de una suscripción.</span><span class="sxs-lookup"><span data-stu-id="a002a-315">There are three different sequence links that are verifying values were provided to two runbook input parameters representing VM name and Resource Group name in order to determine which is the appropriate action to take - start a single VM, start all VMs in the resouce group, or all VMs in a subscription.</span></span>  <span data-ttu-id="a002a-316">A continuación, se muestra la lógica de condición del vínculo de secuencia entre la actividad de conexión a Azure y la de obtención de una sola máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="a002a-316">For the sequence link between Connect to Azure and Get single VM, here is the condition logic:</span></span>

    <# 
    Both VMName and ResourceGroupName runbook input parameters have values 
    #>
    (
    (($VMName -ne $null) -and ($VMName.Length -gt 0))
    ) -and (
    (($ResourceGroupName -ne $null) -and ($ResourceGroupName.Length -gt 0))
    )

<span data-ttu-id="a002a-317">Cuando usa un vínculo condicional, los datos disponibles desde la actividad de origen a otras actividades en esa rama se filtrarán según la condición.</span><span class="sxs-lookup"><span data-stu-id="a002a-317">When you use a conditional link, the data available from the source activity to other activities in that branch will be filtered by the condition.</span></span>  <span data-ttu-id="a002a-318">Si una actividad es el origen de varios vínculos, los datos disponibles para las actividades en cada rama dependerán de la condición del vínculo que se conecta a esa rama.</span><span class="sxs-lookup"><span data-stu-id="a002a-318">If an activity is the source to multiple links, then the data available to activities in each branch will depend on the condition in the link connecting to that branch.</span></span>

<span data-ttu-id="a002a-319">Por ejemplo, la actividad **Start-AzureRmVm** del siguiente runbook inicia todas las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="a002a-319">For example, the **Start-AzureRmVm** activity in the runbook below starts all virtual machines.</span></span>  <span data-ttu-id="a002a-320">Además, tiene dos vínculos condicionales.</span><span class="sxs-lookup"><span data-stu-id="a002a-320">It has two conditional links.</span></span>  <span data-ttu-id="a002a-321">El primer vínculo condicional usa la expresión *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* para filtrar si la actividad Start-AzureRmVm se ha completado correctamente.</span><span class="sxs-lookup"><span data-stu-id="a002a-321">The first conditional link uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* to filter if the Start-AzureRmVm activity completed successfully.</span></span>  <span data-ttu-id="a002a-322">El segundo usa la expresión *$ActivityOutput ['Start-AzureRmVM']. IsSuccessStatusCode - ne $true* para filtrar si la actividad Start-AzureRmVm no pudo iniciar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="a002a-322">The second uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* to filter if the Start-AzureRmVm activity failed to start the virtual machine.</span></span>  

![Ejemplo de vínculo condicional](media/automation-graphical-authoring-intro/runbook-conditional-links.png)

<span data-ttu-id="a002a-324">Una actividad que sigue el primer vínculo y usa la salida de la actividad desde Get-AzureVM solo obtendrá las máquinas virtuales iniciadas en el momento en que se ejecutó Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="a002a-324">Any activity that follows the first link and uses the activity output from Get-AzureVM will only get the virtual machines that were started at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="a002a-325">Toda actividad que siga el segundo vínculo solo obtendrá las máquinas virtuales detenidas en el momento en que se ejecutó Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="a002a-325">Any activity that follows the second link will only get the the virtual machines that were stopped at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="a002a-326">Toda actividad que siga el tercer vínculo obtendrá todas las máquinas virtuales, sin importar su estado de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a002a-326">Any activity following the third link will get all virtual machines regardless of their running state.</span></span>

### <a name="junctions"></a><span data-ttu-id="a002a-327">Uniones</span><span class="sxs-lookup"><span data-stu-id="a002a-327">Junctions</span></span>
<span data-ttu-id="a002a-328">Una unión es una actividad especial que esperará hasta que se hayan completado todas las ramas entrantes.</span><span class="sxs-lookup"><span data-stu-id="a002a-328">A junction is a special activity that will wait until all incoming branches have completed.</span></span>  <span data-ttu-id="a002a-329">Esto le permite ejecutar varias actividades en paralelo y garantizar que todas se hayan completado antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="a002a-329">This allows you to run multiple activities in parallel and ensure that all have completed before moving on.</span></span>

<span data-ttu-id="a002a-330">A pesar de que una unión puede tener una cantidad ilimitada de vínculos entrantes, solo uno de esos vínculos puede ser una canalización.</span><span class="sxs-lookup"><span data-stu-id="a002a-330">While a junction can have an unlimited number of incoming links, not more than one of those links can be a pipeline.</span></span>  <span data-ttu-id="a002a-331">No se limita la cantidad de vínculos entrantes de secuencia.</span><span class="sxs-lookup"><span data-stu-id="a002a-331">The number of incoming sequence links is not constrained.</span></span>  <span data-ttu-id="a002a-332">Podrá crear la unión con varios vínculos entrantes de canalización y guardar el runbook, pero se producirá un error cuando esté en ejecución.</span><span class="sxs-lookup"><span data-stu-id="a002a-332">You will be allowed to create the junction with multiple incoming pipeline links and save the runbook, but it will fail when it is run.</span></span>

<span data-ttu-id="a002a-333">El ejemplo siguiente forma parte de un runbook que inicia un conjunto de máquinas virtuales, a la vez que descarga revisiones para aplicarlas a esas máquinas.</span><span class="sxs-lookup"><span data-stu-id="a002a-333">The example below is part of a runbook that starts a set of virtual machines while simultaneously downloading patches to be applied to those machines.</span></span>  <span data-ttu-id="a002a-334">Una unión se usa para garantizar que ambos procesos se completen antes de que el runbook continúe.</span><span class="sxs-lookup"><span data-stu-id="a002a-334">A junction is used to ensure that both processes are completed before the runbook continues.</span></span>

![unión](media/automation-graphical-authoring-intro/runbook-junction.png)

### <a name="cycles"></a><span data-ttu-id="a002a-336">Ciclos</span><span class="sxs-lookup"><span data-stu-id="a002a-336">Cycles</span></span>
<span data-ttu-id="a002a-337">Un ciclo es cuando una actividad de destino se vincula de vuelta a su actividad de origen o a otra actividad que, al final, se vincule a su origen.</span><span class="sxs-lookup"><span data-stu-id="a002a-337">A cycle is when a destination activity links back to its source activity or to another activity that eventually links back to its source.</span></span>  <span data-ttu-id="a002a-338">La creación gráfica no permite actualmente los ciclos.</span><span class="sxs-lookup"><span data-stu-id="a002a-338">Cycles are currently not allowed in graphical authoring.</span></span>  <span data-ttu-id="a002a-339">Si el runbook tiene un ciclo, lo guardará como corresponde, pero recibirá un error cuando se ejecute.</span><span class="sxs-lookup"><span data-stu-id="a002a-339">If your runbook has a cycle, it will save properly but will receive an error when it runs.</span></span>

![Ciclo](media/automation-graphical-authoring-intro/runbook-cycle.png)

### <a name="sharing-data-between-activities"></a><span data-ttu-id="a002a-341">Uso compartido de datos entre actividades</span><span class="sxs-lookup"><span data-stu-id="a002a-341">Sharing data between activities</span></span>
<span data-ttu-id="a002a-342">Todo dato generado por una actividad con un vínculo saliente se escribe en el *bus de datos* del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-342">Any data that is output by an activity with an outgoing link is written to the *databus* for the runbook.</span></span>  <span data-ttu-id="a002a-343">Toda actividad del runbook puede usar datos del bus de datos para rellenar los valores de parámetros o para incluirlos en el código de script.</span><span class="sxs-lookup"><span data-stu-id="a002a-343">Any activity in the runbook can use data on the databus to populate parameter values or include in script code.</span></span>  <span data-ttu-id="a002a-344">Una actividad puede tener acceso a la salida de cualquier actividad anterior en el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a002a-344">An activity can access the output of any previous activity in the workflow.</span></span>     

<span data-ttu-id="a002a-345">La manera en que los datos se escriben en el bus de datos depende del tipo de vínculo en la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-345">How the data is written to the databus depends on the type of link on the activity.</span></span>  <span data-ttu-id="a002a-346">En el caso de una **canalización**, los datos se generan como varios objetos.</span><span class="sxs-lookup"><span data-stu-id="a002a-346">For a **pipeline**, the data is output as multiples objects.</span></span>  <span data-ttu-id="a002a-347">En el caso de un vínculo de **secuencia** , los datos se generan como una matriz.</span><span class="sxs-lookup"><span data-stu-id="a002a-347">For a **sequence** link, the data is output as an array.</span></span>  <span data-ttu-id="a002a-348">Si solo existe un valor, se generará como una matriz de un solo elemento.</span><span class="sxs-lookup"><span data-stu-id="a002a-348">If there is only one value, it will be output as a single element array.</span></span>

<span data-ttu-id="a002a-349">Puede tener acceso al bus de datos si usa uno de estos dos métodos.</span><span class="sxs-lookup"><span data-stu-id="a002a-349">You can access data on the databus using one of two methods.</span></span>  <span data-ttu-id="a002a-350">El primer método es usar un origen de datos **Salida de actividad** para rellenar un parámetro de otra actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-350">First is using an **Activity Output** data source to populate a parameter of another activity.</span></span>  <span data-ttu-id="a002a-351">Si la salida es un objeto, puede especificar una propiedad.</span><span class="sxs-lookup"><span data-stu-id="a002a-351">If the output is an object, you can specify a single property.</span></span>

![Salida de la actividad](media/automation-graphical-authoring-intro/activity-output-datasource-revised20165.png)

<span data-ttu-id="a002a-353">También puede recuperar la salida de una actividad en un origen de datos **Expresión de PowerShell** o desde una actividad de **script de flujo de trabajo** con una variable ActivityOutput.</span><span class="sxs-lookup"><span data-stu-id="a002a-353">You can also retrieve the output of an activity in a **PowerShell Expression** data source or from a **Workflow Script** activity with an ActivityOutput variable.</span></span>  <span data-ttu-id="a002a-354">Si la salida es un objeto, puede especificar una propiedad.</span><span class="sxs-lookup"><span data-stu-id="a002a-354">If the output is an object, you can specify a single property.</span></span>  <span data-ttu-id="a002a-355">Las variables ActivityOutput usan la siguiente sintaxis.</span><span class="sxs-lookup"><span data-stu-id="a002a-355">ActivityOutput variables use the following syntax.</span></span>

    $ActivityOutput['Activity Label']
    $ActivityOutput['Activity Label'].PropertyName 

### <a name="checkpoints"></a><span data-ttu-id="a002a-356">Puntos de control</span><span class="sxs-lookup"><span data-stu-id="a002a-356">Checkpoints</span></span>
<span data-ttu-id="a002a-357">Puede establecer [puntos de control](automation-powershell-workflow.md#checkpoints) en un runbook gráfico de flujo de trabajo de PowerShell; para ello, seleccione *Runbook de punto de control* en cualquier actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-357">You can set [checkpoints](automation-powershell-workflow.md#checkpoints) in a Graphical PowerShell Workflow runbook by selecting *Checkpoint runbook* on any activity.</span></span>  <span data-ttu-id="a002a-358">Esto permite establecer un punto de control después de que se ejecuta la actividad.</span><span class="sxs-lookup"><span data-stu-id="a002a-358">This causes a checkpoint to be set after the activity runs.</span></span>

![Punto de control](media/automation-graphical-authoring-intro/set-checkpoint.png)

<span data-ttu-id="a002a-360">Los puntos de control solo se habilitan en los runbooks gráficos de flujo de trabajo de PowerShell; no están disponibles en los runbooks gráficos.</span><span class="sxs-lookup"><span data-stu-id="a002a-360">Checkpoints are only enabled in Graphical PowerShell Workflow runbooks, it is not available in Graphical runbooks.</span></span>  <span data-ttu-id="a002a-361">Si el runbook usa cmdlets de Azure, debe seguir cualquier actividad establecida con puntos de control con un AzureRMAccount en caso de suspender el runbook y de reiniciarlo a partir de dicho punto de control en un trabajo diferente.</span><span class="sxs-lookup"><span data-stu-id="a002a-361">If the runbook uses Azure cmdlets, you should follow any checkpointed activity with an Add-AzureRMAccount in case the runbook is suspended and restarts from this checkpoint on a different worker.</span></span> 

## <a name="authenticating-to-azure-resources"></a><span data-ttu-id="a002a-362">Autenticación a los recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="a002a-362">Authenticating to Azure resources</span></span>
<span data-ttu-id="a002a-363">Los runbooks de Automatización de Azure que administran recursos de Azure requerirán tendrán que autenticarse en Azure.</span><span class="sxs-lookup"><span data-stu-id="a002a-363">Runbooks in Azure Automation that manage Azure resources will require authentication to Azure.</span></span>  <span data-ttu-id="a002a-364">La característica de [cuenta de ejecución](automation-offering-get-started.md#creating-an-automation-account) (también denominada entidad de servicio) es el método predeterminado para acceder a los recursos de Azure Resource Manager de la suscripción con los runbooks de Automation.</span><span class="sxs-lookup"><span data-stu-id="a002a-364">The [Run As account](automation-offering-get-started.md#creating-an-automation-account) (also referred to as a service principal) is the default method to access Azure Resource Manager resources in your subscription with Automation runbooks.</span></span>  <span data-ttu-id="a002a-365">Puede agregar esta funcionalidad a un runbook gráfico incorporando el activo de conexión **AzureRunAsConnection**, que utiliza el cmdlet [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) de PowerShell, y el cmdlet [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) al lienzo.</span><span class="sxs-lookup"><span data-stu-id="a002a-365">You can add this functionality to a graphical runbook by adding the **AzureRunAsConnection** Connection asset, which is using the PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) cmdlet, and [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet to the canvas.</span></span> <span data-ttu-id="a002a-366">Esto se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-366">This is illustrated in the following example.</span></span><br><span data-ttu-id="a002a-367">![Actividades de autenticación de ejecución](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span><span class="sxs-lookup"><span data-stu-id="a002a-367">![Run As Authentication Activities](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span></span><br>
<span data-ttu-id="a002a-368">La actividad de obtención de conexión de ejecución (es decir, Get-AutomationConnection) se configura con un origen de datos de valor constante denominado "AzureRunAsConnection".</span><span class="sxs-lookup"><span data-stu-id="a002a-368">The Get Run As Connection activity (i.e. Get-AutomationConnection), is configured with a constant value data source named AzureRunAsConnection.</span></span><br><span data-ttu-id="a002a-369">![Configuración de la conexión de ejecución](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span><span class="sxs-lookup"><span data-stu-id="a002a-369">![Run As Connection Configuration](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span></span><br>
<span data-ttu-id="a002a-370">La siguiente actividad, Add-AzureRmAccount, agrega la cuenta de ejecución autenticada para que pueda utilizarse en el runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-370">The next activity, Add-AzureRmAccount, adds the authenticated Run As account for use in the runbook.</span></span><br><span data-ttu-id="a002a-371">
![Conjunto de parámetros Add-AzureRmAccount](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span><span class="sxs-lookup"><span data-stu-id="a002a-371">
![Add-AzureRmAccount Parameter Set](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span></span><br>
<span data-ttu-id="a002a-372">Para los parámetros **APPLICATIONID**, **CERTIFICATETHUMBPRINT** y **TENANTID**, tendrá que especificar el nombre de la propiedad de la ruta acceso de campo, ya que la actividad genera un objeto con varias propiedades.</span><span class="sxs-lookup"><span data-stu-id="a002a-372">For the parameters **APPLICATIONID**, **CERTIFICATETHUMBPRINT**, and **TENANTID** you will need to specify the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>  <span data-ttu-id="a002a-373">De lo contrario, al ejecutar el runbook, el intento de autenticación no se realizará correctamente.</span><span class="sxs-lookup"><span data-stu-id="a002a-373">Otherwise when you execute the runbook, it will fail attempting to authenticate.</span></span>  <span data-ttu-id="a002a-374">Estos son los requisitos mínimos para autenticar el runbook con la cuenta de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a002a-374">This is what you need at a minimum to authenticate your runbook with the Run As account.</span></span>

<span data-ttu-id="a002a-375">Para que la compatibilidad con versiones anteriores siga estando disponible para los suscriptores que hayan creado una cuenta de Automation con una [cuenta de usuario de Azure AD](automation-create-aduser-account.md) con el objetivo de administrar recursos de implementación clásica de Azure o de Azure Resource Manager, el método de autenticación será el cmdlet Add-AzureAccount con un [activo de credencial](automation-credentials.md) que representa un usuario de Active Directory con acceso a la cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="a002a-375">To maintain backwards compatibility for subscribers who have created an Automation account using an [Azure AD User account](automation-create-aduser-account.md) to manage Azure classic deployment or for Azure Resource Manager resources, the method to authenticate is the Add-AzureAccount cmdlet with a [credential asset](automation-credentials.md) that represents an Active Directory user with access to the Azure account.</span></span>

<span data-ttu-id="a002a-376">Puede agregar esta funcionalidad a un runbook gráfico si agrega un recurso de credencial al lienzo, seguido de una actividad Add-AzureAccount.</span><span class="sxs-lookup"><span data-stu-id="a002a-376">You can add this functionality to a graphical runbook by adding a credential asset to the canvas followed by an Add-AzureAccount activity.</span></span>  <span data-ttu-id="a002a-377">Add-AzureAccount usa la actividad de credencial para su entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-377">Add-AzureAccount uses the credential activity for its input.</span></span>  <span data-ttu-id="a002a-378">Esto se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="a002a-378">This is illustrated in the following example.</span></span>

![Actividades de autenticación](media/automation-graphical-authoring-intro/authentication-activities.png)

<span data-ttu-id="a002a-380">Tiene que realizar la autenticación al comienzo del runbook y después de cada punto de control.</span><span class="sxs-lookup"><span data-stu-id="a002a-380">You have to authenticate at the start of the runbook and after each checkpoint.</span></span>  <span data-ttu-id="a002a-381">Esto significa agregar una actividad Add-AzureAccount adicional después de toda actividad Checkpoint-Workflow.</span><span class="sxs-lookup"><span data-stu-id="a002a-381">This means adding an addition Add-AzureAccount activity after any Checkpoint-Workflow activity.</span></span> <span data-ttu-id="a002a-382">No necesita una actividad de credencial adicional, porque puede usar la misma.</span><span class="sxs-lookup"><span data-stu-id="a002a-382">You do not need an addition credential activity since you can use the same</span></span> 

![Salida de la actividad](media/automation-graphical-authoring-intro/authentication-activity-output.png)

## <a name="runbook-input-and-output"></a><span data-ttu-id="a002a-384">Entrada y salida de runbook</span><span class="sxs-lookup"><span data-stu-id="a002a-384">Runbook input and output</span></span>
### <a name="runbook-input"></a><span data-ttu-id="a002a-385">Entrada de Runbook</span><span class="sxs-lookup"><span data-stu-id="a002a-385">Runbook input</span></span>
<span data-ttu-id="a002a-386">Un Runbook puede requerir una entrada, ya sea de un usuario (cuando el Runbook se inicia mediante el Portal de Azure) o de otro Runbook (si el actual se usa como secundario).</span><span class="sxs-lookup"><span data-stu-id="a002a-386">A runbook may require input either from a user when they start the runbook through the Azure portal or from another runbook if the current one is used as a child.</span></span>
<span data-ttu-id="a002a-387">Por ejemplo, si tiene un runbook que crea una máquina virtual, es posible que deba proporcionar información, como el nombre de la máquina virtual y otras propiedades cada vez que inicie el runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-387">For example, if you have a runbook that creates a virtual machine, you may need to provide information such as the name of the virtual machine and other properties each time you start the runbook.</span></span>  

<span data-ttu-id="a002a-388">Para aceptar entradas para un runbook, defina uno o más parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-388">You accept input for a runbook by defining one or more input parameters.</span></span>  <span data-ttu-id="a002a-389">Debe proporcionar valores para estos parámetros cada vez que se inicie el runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-389">You provide values for these parameters each time the runbook is started.</span></span>  <span data-ttu-id="a002a-390">Cuando se inicia un Runbook con el Portal de Azure, se le solicitará que proporcione valores para cada uno de los parámetros de entrada del Runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-390">When you start a runbook with the Azure portal, it will prompt you to provide values for the each of the runbook's input parameters.</span></span>

<span data-ttu-id="a002a-391">Para tener acceso a los parámetros de entrada correspondientes a un runbook, haga clic en el botón **Entrada y salida** en la barra de herramientas del runbook.</span><span class="sxs-lookup"><span data-stu-id="a002a-391">You can access input parameters for a runbook by clicking the **Input and output** button on the runbook toolbar.</span></span>  

![Entrada y salida de runbooks](media/automation-graphical-authoring-intro/runbook-edit-input-output.png) 

<span data-ttu-id="a002a-393">Con esto se abre el control **Entrada y salida**, donde puede editar un parámetro de entrada existente o crear uno nuevo, mediante un clic en **Agregar entrada**.</span><span class="sxs-lookup"><span data-stu-id="a002a-393">This opens the **Input and Output** control where you can edit an existing input parameter or create a new one by clicking **Add input**.</span></span> 

![Agregar entrada](media/automation-graphical-authoring-intro/runbook-edit-add-input.png)

<span data-ttu-id="a002a-395">Las propiedades de la siguiente tabla definen cada parámetro de entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-395">Each input parameter is defined by the properties in the following table.</span></span>

| <span data-ttu-id="a002a-396">Propiedad</span><span class="sxs-lookup"><span data-stu-id="a002a-396">Property</span></span> | <span data-ttu-id="a002a-397">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-397">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a002a-398">Nombre</span><span class="sxs-lookup"><span data-stu-id="a002a-398">Name</span></span> |<span data-ttu-id="a002a-399">El nombre único del parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-399">The unique name of the parameter.</span></span>  <span data-ttu-id="a002a-400">Solo puede contener caracteres alfanuméricos y no puede contener un espacio.</span><span class="sxs-lookup"><span data-stu-id="a002a-400">This can only contain alpha numeric characters and cannot contain a space.</span></span> |
| <span data-ttu-id="a002a-401">Descripción</span><span class="sxs-lookup"><span data-stu-id="a002a-401">Description</span></span> |<span data-ttu-id="a002a-402">Una descripción opcional del parámetro de entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-402">An optional description for the input parameter.</span></span> |
| <span data-ttu-id="a002a-403">Tipo</span><span class="sxs-lookup"><span data-stu-id="a002a-403">Type</span></span> |<span data-ttu-id="a002a-404">El tipo de datos que se espera para el valor del parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-404">Data type expected for the parameter value.</span></span>  <span data-ttu-id="a002a-405">El Portal de Azure proporcionará un control adecuado para el tipo de datos de cada parámetro cuando se solicite una entrada.</span><span class="sxs-lookup"><span data-stu-id="a002a-405">The Azure portal will provide an appropriate control for the data type for each parameter when prompting for input.</span></span> |
| <span data-ttu-id="a002a-406">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a002a-406">Mandatory</span></span> |<span data-ttu-id="a002a-407">Especifica si se debe proporcionar un valor para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-407">Specifies whether a value must be provided for the parameter.</span></span>  <span data-ttu-id="a002a-408">No es posible iniciar el runbook si no se proporciona un valor para cada parámetro obligatorio que no tiene definido un valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="a002a-408">The runbook cannot be started if you do not provide a value for each mandatory parameter that does not have a default value defined.</span></span> |
| <span data-ttu-id="a002a-409">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="a002a-409">Default Value</span></span> |<span data-ttu-id="a002a-410">Especifica el valor que se usa para el parámetro si no se brinda alguno.</span><span class="sxs-lookup"><span data-stu-id="a002a-410">Specifies what value is used for the parameter if one is not provided.</span></span>  <span data-ttu-id="a002a-411">Puede ser Null o un valor específico.</span><span class="sxs-lookup"><span data-stu-id="a002a-411">This can either be Null or a specific value.</span></span> |

### <a name="runbook-output"></a><span data-ttu-id="a002a-412">Salida de runbook</span><span class="sxs-lookup"><span data-stu-id="a002a-412">Runbook output</span></span>
<span data-ttu-id="a002a-413">Los datos que crea alguna actividad que no tienen un vínculo saliente se agregarán a la [salida del runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span><span class="sxs-lookup"><span data-stu-id="a002a-413">Data created by any activity that does not have an outgoing link will be added to the [output of the runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span></span>  <span data-ttu-id="a002a-414">La salida se guarda con el trabajo del runbook y queda a disposición de un runbook principal cuando el runbook se usa como secundario.</span><span class="sxs-lookup"><span data-stu-id="a002a-414">The output is saved with the runbook job and is available to a parent runbook when the runbook is used as a child.</span></span>  

## <a name="powershell-expressions"></a><span data-ttu-id="a002a-415">Expresiones de PowerShell</span><span class="sxs-lookup"><span data-stu-id="a002a-415">PowerShell expressions</span></span>
<span data-ttu-id="a002a-416">Una de las ventajas de la creación gráfica es que proporciona la capacidad de crear un runbook teniendo mínimos conocimientos de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-416">One of the advantages of graphical authoring is providing you with the ability to build a runbook with minimal knowledge of PowerShell.</span></span>  <span data-ttu-id="a002a-417">No obstante, actualmente es necesario conocer un poco PowerShell para rellenar determinados [valores de parámetro](#activities) y para configurar [condiciones de vínculo](#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="a002a-417">Currently, you do need to know a bit of PowerShell though for populating certain [parameter values](#activities) and for setting [link conditions](#links-and-workflow).</span></span>  <span data-ttu-id="a002a-418">En esta sección se proporciona una introducción rápida a las expresiones de PowerShell para aquellos usuarios que quizás no estén familiarizados con esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="a002a-418">This section provides a quick introduction to PowerShell expressions for those users who may not be familiar with it.</span></span>  <span data-ttu-id="a002a-419">En [Scripting con Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx)están disponibles todos los detalles sobre PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-419">Full details of PowerShell are available at [Scripting with Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span></span> 

### <a name="powershell-expression-data-source"></a><span data-ttu-id="a002a-420">Origen de datos de expresiones de PowerShell</span><span class="sxs-lookup"><span data-stu-id="a002a-420">PowerShell expression data source</span></span>
<span data-ttu-id="a002a-421">Puede usar una expresión de PowerShell como origen de datos para rellenar el valor de un [parámetro de actividad](#activities) con los resultados de algún código de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a002a-421">You can use a PowerShell expression as a data source to populate the value of an [activity parameter](#activities) with the results of some PowerShell code.</span></span>  <span data-ttu-id="a002a-422">Podría tratarse de una sola línea de código que realizara alguna función simple o varias líneas que desarrollaran cierta lógica compleja.</span><span class="sxs-lookup"><span data-stu-id="a002a-422">This could be a single line of code that performs some simple function or multiple lines that perform some complex logic.</span></span>  <span data-ttu-id="a002a-423">La salida de un comando que no está asignado a una variable se envía al valor del parámetro.</span><span class="sxs-lookup"><span data-stu-id="a002a-423">Any output from a command that is not assigned to a variable is output to the parameter value.</span></span> 

<span data-ttu-id="a002a-424">Por ejemplo, el siguiente comando generaría la fecha actual.</span><span class="sxs-lookup"><span data-stu-id="a002a-424">For example, the following command would output the current date.</span></span> 

    Get-Date

<span data-ttu-id="a002a-425">Los siguientes comandos crean una cadena a partir de la fecha actual y la asignan a una variable.</span><span class="sxs-lookup"><span data-stu-id="a002a-425">The following commands build a string from the current date and assign it to a variable.</span></span>  <span data-ttu-id="a002a-426">Después, el contenido de la variable se envía a la salida.</span><span class="sxs-lookup"><span data-stu-id="a002a-426">The contents of the variable are then sent to the output</span></span> 

    $string = "The current date is " + (Get-Date)
    $string

<span data-ttu-id="a002a-427">Los siguientes comandos evalúan la fecha actual y devuelven una cadena que indica si el día actual cae en fin de semana o es un día entre semana.</span><span class="sxs-lookup"><span data-stu-id="a002a-427">The following commands evaluate the current date and return a string indicating whether the current day is a weekend or weekday.</span></span> 

    $date = Get-Date
    if (($date.DayOfWeek = "Saturday") -or ($date.DayOfWeek = "Sunday")) { "Weekend" }
    else { "Weekday" }


### <a name="activity-output"></a><span data-ttu-id="a002a-428">Salida de la actividad</span><span class="sxs-lookup"><span data-stu-id="a002a-428">Activity output</span></span>
<span data-ttu-id="a002a-429">Para usar la salida de una actividad anterior en el runbook, use la variable $ActivityOutput con la siguiente sintaxis.</span><span class="sxs-lookup"><span data-stu-id="a002a-429">To use the output from a previous activity in the runbook, use the $ActivityOutput variable with the following syntax.</span></span>

    $ActivityOutput['Activity Label'].PropertyName

<span data-ttu-id="a002a-430">Por ejemplo, puede tener una actividad con una propiedad que requiere el nombre de una máquina virtual, en cuyo caso podría usar la siguiente expresión.</span><span class="sxs-lookup"><span data-stu-id="a002a-430">For example, you may have an activity with a property that requires the name of a virtual machine in which case you could use the following expression.</span></span>

    $ActivityOutput['Get-AzureVm'].Name

<span data-ttu-id="a002a-431">Si la propiedad necesitaba el objeto de máquina virtual en lugar de solo una propiedad, se devolvería el objeto completo mediante la siguiente sintaxis.</span><span class="sxs-lookup"><span data-stu-id="a002a-431">If the property that required the virtual machine object instead of just a property, then you would return the entire object using the following syntax.</span></span>

    $ActivityOutput['Get-AzureVm']

<span data-ttu-id="a002a-432">También puede usar la salida de una actividad en una expresión más compleja, como la siguiente, que concatena texto al nombre de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="a002a-432">You can also use the output of an activity in a more complex expression such as the following that concatenates text to the virtual machine name.</span></span>

    "The computer name is " + $ActivityOutput['Get-AzureVm'].Name


### <a name="conditions"></a><span data-ttu-id="a002a-433">Condiciones</span><span class="sxs-lookup"><span data-stu-id="a002a-433">Conditions</span></span>
<span data-ttu-id="a002a-434">Utilice [operadores de comparación](https://technet.microsoft.com/library/hh847759.aspx) para comparar valores o determinar si un valor coincide con un patrón especificado.</span><span class="sxs-lookup"><span data-stu-id="a002a-434">Use [comparison operators](https://technet.microsoft.com/library/hh847759.aspx) to compare values or determine if a value matches a specified pattern.</span></span>  <span data-ttu-id="a002a-435">Una comparación devuelve un valor de $true o $false.</span><span class="sxs-lookup"><span data-stu-id="a002a-435">A comparison returns a value of either $true or $false.</span></span>

<span data-ttu-id="a002a-436">Por ejemplo, la siguiente condición determina si la máquina virtual de una actividad denominada *Get-AzureVM* está actualmente *detenida*.</span><span class="sxs-lookup"><span data-stu-id="a002a-436">For example, the following condition determines whether the virtual machine from an activity named *Get-AzureVM* is currently *stopped*.</span></span> 

    $ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped"

<span data-ttu-id="a002a-437">La siguiente condición comprueba si la misma máquina virtual está en cualquier estado distinto de *detenida*.</span><span class="sxs-lookup"><span data-stu-id="a002a-437">The following condition checks whether the same virtual machine is in any state other than *stopped*.</span></span>

    $ActivityOutput["Get-AzureVM"].PowerState –ne "Stopped"

<span data-ttu-id="a002a-438">Puede combinar varias condiciones, mediante un [operador lógico](https://technet.microsoft.com/library/hh847789.aspx) como **-and** u**-or**.</span><span class="sxs-lookup"><span data-stu-id="a002a-438">You can join multiple conditions using a [logical operator](https://technet.microsoft.com/library/hh847789.aspx) such as **-and** or **-or**.</span></span>  <span data-ttu-id="a002a-439">Por ejemplo, la siguiente condición comprueba si la misma máquina virtual del ejemplo anterior se encuentra en un estado de *detenida* o *deteniéndose*.</span><span class="sxs-lookup"><span data-stu-id="a002a-439">For example, the following condition checks whether the same virtual machine in the previous example is in a state of *stopped* or *stopping*.</span></span>

    ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped") -or ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopping") 


### <a name="hashtables"></a><span data-ttu-id="a002a-440">Tablas hash</span><span class="sxs-lookup"><span data-stu-id="a002a-440">Hashtables</span></span>
<span data-ttu-id="a002a-441">[Tablas hash](http://technet.microsoft.com/library/hh847780.aspx) son pares de nombre-valor que son útiles para devolver un conjunto de valores.</span><span class="sxs-lookup"><span data-stu-id="a002a-441">[Hashtables](http://technet.microsoft.com/library/hh847780.aspx) are name/value pairs that are useful for returning a set of values.</span></span>  <span data-ttu-id="a002a-442">Las propiedades de ciertas actividades pueden esperar una tabla hash en lugar de un valor simple.</span><span class="sxs-lookup"><span data-stu-id="a002a-442">Properties for certain activities may expect a hashtable instead of a simple value.</span></span>  <span data-ttu-id="a002a-443">También puede ver cómo se hace referencia a una tabla hash como un diccionario.</span><span class="sxs-lookup"><span data-stu-id="a002a-443">You may also see as hashtable referred to as a dictionary.</span></span> 

<span data-ttu-id="a002a-444">Una tabla hash se crea con la siguiente sintaxis.</span><span class="sxs-lookup"><span data-stu-id="a002a-444">You create a hashtable with the following syntax.</span></span>  <span data-ttu-id="a002a-445">Una tabla hash puede contener cualquier número de entradas, pero cada una se define mediante un nombre y valor.</span><span class="sxs-lookup"><span data-stu-id="a002a-445">A hashtable can contain any number of entries but each is defined by a name and value.</span></span>

    @{ <name> = <value>; [<name> = <value> ] ...}

<span data-ttu-id="a002a-446">Por ejemplo, la siguiente expresión crea una tabla hash que se usará en el origen de datos para un parámetro de actividad que espera una tabla hash con valores para una búsqueda en Internet.</span><span class="sxs-lookup"><span data-stu-id="a002a-446">For example, the following expression creates a hashtable to be used in the data source for an activity parameter that expected a hashtable with values for an internet search.</span></span>

    $query = "Azure Automation"
    $count = 10
    $h = @{'q'=$query; 'lr'='lang_ja';  'count'=$Count}
    $h

<span data-ttu-id="a002a-447">En el ejemplo siguiente se usa la salida de una actividad llamada *Get Twitter Connection* para rellenar una tabla hash.</span><span class="sxs-lookup"><span data-stu-id="a002a-447">The following example uses output from an activity called *Get Twitter Connection* to populate a hashtable.</span></span>

    @{'ApiKey'=$ActivityOutput['Get Twitter Connection'].ConsumerAPIKey;
      'ApiSecret'=$ActivityOutput['Get Twitter Connection'].ConsumerAPISecret;
      'AccessToken'=$ActivityOutput['Get Twitter Connection'].AccessToken;
      'AccessTokenSecret'=$ActivityOutput['Get Twitter Connection'].AccessTokenSecret}



## <a name="next-steps"></a><span data-ttu-id="a002a-448">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a002a-448">Next Steps</span></span>
* <span data-ttu-id="a002a-449">Para empezar a trabajar con runbooks de flujo de trabajo de PowerShell, consulte [Mi primer runbook de flujo de trabajo de PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="a002a-449">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 
* <span data-ttu-id="a002a-450">Para empezar a trabajar con runbooks gráficos, consulte [Mi primer runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="a002a-450">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="a002a-451">Para obtener más información sobre los tipos de runbook, sus ventajas y sus limitaciones, consulte [Tipos de runbooks de Automatización de Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="a002a-451">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="a002a-452">Para comprender cómo autenticarse con la cuenta de ejecución de Automatización de Azure, consulte [Autenticación de Runbooks con una cuenta de ejecución de Azure](automation-sec-configure-azure-runas-account.md)</span><span class="sxs-lookup"><span data-stu-id="a002a-452">To understand how to authenticate using the Automation Run As account, see [Configure Azure Run As Account](automation-sec-configure-azure-runas-account.md)</span></span>


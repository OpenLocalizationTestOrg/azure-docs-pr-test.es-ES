---
title: "Mi primer runbook gráfico en Azure Automation | Microsoft Docs"
description: "Tutorial que le guiará a través de la creación, prueba y publicación de un runbook gráfico simple."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "runbook, plantilla de runbook, automatización de runbooks, runbook de azure"
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 9d4b28416376482247127698bec7c99b83308885
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="69e25-104">Mi primer runbook gráfico</span><span class="sxs-lookup"><span data-stu-id="69e25-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="69e25-105">Gráfico</span><span class="sxs-lookup"><span data-stu-id="69e25-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="69e25-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="69e25-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="69e25-107">Flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="69e25-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="69e25-108">Este tutorial le guiará por la creación de un [runbook gráfico](automation-runbook-types.md#graphical-runbooks) en Automatización de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-108">This tutorial walks you through the creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="69e25-109">Comenzaremos con un runbook simple que prueba y publica, y explicaremos cómo hacer un seguimiento del estado del trabajo del runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-109">We start with a simple runbook that tests and publishes while we explain how to track the status of the runbook job.</span></span>  <span data-ttu-id="69e25-110">A continuación, modificaremos el runbook para administrar recursos de Azure, en este caso, iniciar una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="69e25-111">Después, para completar el tutorial, haremos el runbook más sólido con la adición de parámetros de runbook y vínculos condicionales.</span><span class="sxs-lookup"><span data-stu-id="69e25-111">Then we complete the tutorial by making the runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="69e25-112">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="69e25-112">Prerequisites</span></span>
<span data-ttu-id="69e25-113">Para completar este tutorial, necesitará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="69e25-113">To complete this tutorial, you will need the following.</span></span>

* <span data-ttu-id="69e25-114">Suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-114">Azure subscription.</span></span>  <span data-ttu-id="69e25-115">Si aún no tiene ninguna, puede [activar las ventajas de la suscripción a MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) o <a href="/pricing/free-account/" target="_blank">[registrarse para obtener una cuenta gratis](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="69e25-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="69e25-116">[Cuenta de Azure Automation](automation-sec-configure-azure-runas-account.md) para contener el runbook y autenticarse en recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="69e25-117">Esta cuenta debe tener permiso para iniciar y detener la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="69e25-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="69e25-118">Una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-118">An Azure virtual machine.</span></span>  <span data-ttu-id="69e25-119">Detendremos e iniciaremos esta máquina, por lo que no debería ser de producción.</span><span class="sxs-lookup"><span data-stu-id="69e25-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="69e25-120">Paso 1: Creación del runbook</span><span class="sxs-lookup"><span data-stu-id="69e25-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="69e25-121">Empezamos creando un runbook simple cuya salida sea el texto *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="69e25-121">We start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="69e25-122">En el Portal de Azure, abra su cuenta de Automatización.</span><span class="sxs-lookup"><span data-stu-id="69e25-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="69e25-123">La página de la cuenta de Automatización proporciona una vista rápida de los recursos que hay en esa cuenta.</span><span class="sxs-lookup"><span data-stu-id="69e25-123">The Automation account page gives you a quick view of the resources in this account.</span></span>  <span data-ttu-id="69e25-124">Ya debería tener algunos recursos.</span><span class="sxs-lookup"><span data-stu-id="69e25-124">You should already have some Assets.</span></span>  <span data-ttu-id="69e25-125">Muchas de ellos son los módulos que se incluyen automáticamente en una cuenta nueva de Automatización.</span><span class="sxs-lookup"><span data-stu-id="69e25-125">Most of those are the modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="69e25-126">También debe tener el recurso de credencial que se menciona en los [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="69e25-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="69e25-127">Haga clic en el icono **Runbooks** para abrir la lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="69e25-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br> <span data-ttu-id="69e25-128">![Control de runbooks](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="69e25-129">Para crear un runbook, haga clic en el botón **Agregar un runbook** y en **Crear un nuevo runbook**.</span><span class="sxs-lookup"><span data-stu-id="69e25-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="69e25-130">Asigne al runbook el nombre *MyFirstRunbook-Graphical*.</span><span class="sxs-lookup"><span data-stu-id="69e25-130">Give the runbook the name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="69e25-131">En este caso, vamos a crear un [runbook gráfico](automation-graphical-authoring-intro.md), así que seleccione **Gráfico** en **Tipo de runbook**.</span><span class="sxs-lookup"><span data-stu-id="69e25-131">In this case, we're going to create a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="69e25-132">![Nuevo runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="69e25-133">Haga clic en **Crear** para crear el runbook y abrir el editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="69e25-133">Click **Create** to create the runbook and open the graphical editor.</span></span>

## <a name="step-2---add-activities-to-the-runbook"></a><span data-ttu-id="69e25-134">Paso 2:  agregar actividades al runbook</span><span class="sxs-lookup"><span data-stu-id="69e25-134">Step 2 - Add activities to the runbook</span></span>
<span data-ttu-id="69e25-135">El control Biblioteca en la parte izquierda del editor permite seleccionar actividades para agregarlas al Runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-135">The Library control on the left side of the editor allows you to select activities to add to your runbook.</span></span>  <span data-ttu-id="69e25-136">Vamos a agregar un cmdlet **Write-Output** para generar el texto desde el Runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-136">We're going to add a **Write-Output** cmdlet to output text from the runbook.</span></span>

1. <span data-ttu-id="69e25-137">En el control Biblioteca, haga clic en el cuadro de texto de búsqueda y escriba **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="69e25-137">In the Library control, click in the search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="69e25-138">A continuación se mostrarán los resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="69e25-138">The search results will be displayed below.</span></span> <br> <span data-ttu-id="69e25-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="69e25-140">Desplácese hasta la parte inferior de la lista.</span><span class="sxs-lookup"><span data-stu-id="69e25-140">Scroll down to the bottom of the list.</span></span>  <span data-ttu-id="69e25-141">Haga clic con el botón derecho en **Write-Output** y seleccione **Agregar al lienzo** o haga clic en los puntos suspensivos junto al cmdlet y seleccione **Agregar al lienzo**.</span><span class="sxs-lookup"><span data-stu-id="69e25-141">You can either right-click **Write-Output** and select **Add to canvas** or click the ellipse next to the cmdlet and then select **Add to canvas**.</span></span>
3. <span data-ttu-id="69e25-142">Haga clic en la actividad **Write-Output** en el lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-142">Click the **Write-Output** activity on the canvas.</span></span>  <span data-ttu-id="69e25-143">Se abre la hoja Control de configuración, que permite configurar la actividad.</span><span class="sxs-lookup"><span data-stu-id="69e25-143">This opens the Configuration control blade, which allows you to configure the activity.</span></span>
4. <span data-ttu-id="69e25-144">El campo **Etiqueta** tiene como valor predeterminado el nombre del cmdlet, pero se puede cambiar a algo más descriptivo.</span><span class="sxs-lookup"><span data-stu-id="69e25-144">The **Label** defaults to the name of the cmdlet, but we can change it to something more friendly.</span></span> <span data-ttu-id="69e25-145">Cámbielo a *Escribir Hello World para la salida*.</span><span class="sxs-lookup"><span data-stu-id="69e25-145">Change it to *Write Hello World to output*.</span></span>
5. <span data-ttu-id="69e25-146">Haga clic en **Parámetros** para especificar los valores de los parámetros del cmdlet.</span><span class="sxs-lookup"><span data-stu-id="69e25-146">Click **Parameters** to provide values for the cmdlet's parameters.</span></span>  
   <span data-ttu-id="69e25-147">Algunos cmdlets tienen varios conjuntos de parámetros; debe seleccionar el que usará.</span><span class="sxs-lookup"><span data-stu-id="69e25-147">Some cmdlets have multiple parameter sets, and you need to select which you one to use.</span></span> <span data-ttu-id="69e25-148">En este caso, **Write-Output** solo tiene un conjunto de parámetros, por lo que no es necesario seleccionar uno.</span><span class="sxs-lookup"><span data-stu-id="69e25-148">In this case, **Write-Output** has only one parameter set, so you don't need to select one.</span></span> <br> <span data-ttu-id="69e25-149">![Propiedades Write-Output](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="69e25-150">Seleccione el parámetro **InputObject** .</span><span class="sxs-lookup"><span data-stu-id="69e25-150">Select the **InputObject** parameter.</span></span>  <span data-ttu-id="69e25-151">Este es el parámetro donde especificamos el texto que se va a enviar al flujo de salida.</span><span class="sxs-lookup"><span data-stu-id="69e25-151">This is the parameter where we specify the text to send to the output stream.</span></span>
7. <span data-ttu-id="69e25-152">En la lista desplegable **Origen de datos**, seleccione **PowerShell expression** (Expresión de PowerShell).</span><span class="sxs-lookup"><span data-stu-id="69e25-152">In the **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="69e25-153">La lista desplegable **Origen de datos** proporciona diferentes orígenes que se usan para rellenar un valor de parámetro.</span><span class="sxs-lookup"><span data-stu-id="69e25-153">The **Data source** dropdown provides different sources that you use to populate a parameter value.</span></span>  
   <span data-ttu-id="69e25-154">Puede usar la salida de esos orígenes como otra actividad, un recurso de Automatización o una expresión de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="69e25-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="69e25-155">En este caso, solo deseamos generar el texto *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="69e25-155">In this case, we just want to output the text *Hello World*.</span></span> <span data-ttu-id="69e25-156">Podemos usar una expresión de PowerShell y especificar una cadena.</span><span class="sxs-lookup"><span data-stu-id="69e25-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="69e25-157">En el cuadro **Expresión**, escriba *"Hello World"* y haga clic en **Aceptar** dos veces para volver al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-157">In the **Expression** box, type *"Hello World"* and then click **OK** twice to return to the canvas.</span></span><br> <span data-ttu-id="69e25-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="69e25-159">Guarde el Runbook, para lo que debe hacer clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-159">Save the runbook by clicking **Save**.</span></span><br> <span data-ttu-id="69e25-160">![Guardar runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="69e25-161">Paso 3: probar el runbook</span><span class="sxs-lookup"><span data-stu-id="69e25-161">Step 3 - Test the runbook</span></span>
<span data-ttu-id="69e25-162">Antes de que publiquemos el runbook para que esté disponible en producción, queremos probarlo para asegurarnos de que funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="69e25-162">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span>  <span data-ttu-id="69e25-163">Cuando se prueba un runbook, se ejecuta su versión **Borrador** y se visualizan sus resultados de forma interactiva.</span><span class="sxs-lookup"><span data-stu-id="69e25-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="69e25-164">Haga clic en **Panel de prueba** para abrir la hoja Prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-164">Click **Test pane** to open the Test blade.</span></span><br> <span data-ttu-id="69e25-165">![Panel Prueba](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="69e25-166">Haga clic en **Iniciar** para iniciar la prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-166">Click **Start** to start the test.</span></span>  <span data-ttu-id="69e25-167">Esta debe ser la única opción habilitada.</span><span class="sxs-lookup"><span data-stu-id="69e25-167">This should be the only enabled option.</span></span>
3. <span data-ttu-id="69e25-168">Se crea un [trabajo de runbook](automation-runbook-execution.md) y su estado se muestra en el panel.</span><span class="sxs-lookup"><span data-stu-id="69e25-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in the pane.</span></span>  
   <span data-ttu-id="69e25-169">El estado del trabajo se inicia como *En cola*, lo que indica que está esperando a que haya disponible un trabajo de runbook en la nube.</span><span class="sxs-lookup"><span data-stu-id="69e25-169">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to become available.</span></span>  <span data-ttu-id="69e25-170">Su estado cambia a *Iniciando* cuando un trabajo de runbook solicita el trabajo. Cuando el runbook comienza a ejecutarse realmente, el estado es *En ejecución*.</span><span class="sxs-lookup"><span data-stu-id="69e25-170">It then moves to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="69e25-171">Cuando se complete el trabajo del runbook, se mostrará su resultado.</span><span class="sxs-lookup"><span data-stu-id="69e25-171">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="69e25-172">En nuestro caso, deberíamos ver *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="69e25-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="69e25-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="69e25-174">Cierre la hoja Probar para volver al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-174">Close the Test blade to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="69e25-175">Paso 4: publicar e iniciar el runbook</span><span class="sxs-lookup"><span data-stu-id="69e25-175">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="69e25-176">El runbook que acabamos de crear aún está en modo borrador.</span><span class="sxs-lookup"><span data-stu-id="69e25-176">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="69e25-177">Tenemos que publicarlo antes de que podamos ejecutarlo en producción.</span><span class="sxs-lookup"><span data-stu-id="69e25-177">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="69e25-178">Al publicar un runbook, se sobrescribe la versión publicada existente con la versión de borrador.</span><span class="sxs-lookup"><span data-stu-id="69e25-178">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="69e25-179">En nuestro caso, no tenemos una versión publicada aún porque acabamos de crear el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-179">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="69e25-180">Haga clic en **Publicar** para publicar el runbook y en **Sí** cuando se le solicite.</span><span class="sxs-lookup"><span data-stu-id="69e25-180">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="69e25-181">![Publicar](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="69e25-182">Si se desplaza a la izquierda para ver el runbook en la hoja **Runbooks**, se muestra **Publicado** en **Estado de creación**.</span><span class="sxs-lookup"><span data-stu-id="69e25-182">If you scroll left to view the runbook in the **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="69e25-183">Vuelva a desplazarse a la derecha para ver la hoja de **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="69e25-183">Scroll back to the right to view the blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="69e25-184">Las opciones en la parte superior nos permiten iniciar el runbook, programarlo para que se inicie en algún momento en el futuro o crear un [webhook](automation-webhooks.md) para que se inicie a través de una llamada HTTP.</span><span class="sxs-lookup"><span data-stu-id="69e25-184">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="69e25-185">Queremos iniciar el runbook, por lo que debe hacer clic en **Iniciar** y en **Sí** cuando se le solicite.</span><span class="sxs-lookup"><span data-stu-id="69e25-185">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="69e25-186">![Iniciar runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="69e25-187">Se abre una hoja de trabajo para el trabajo de runbook que hemos creado.</span><span class="sxs-lookup"><span data-stu-id="69e25-187">A job blade is opened for the runbook job that we created.</span></span>  <span data-ttu-id="69e25-188">Podemos cerrar esta hoja, pero en este caso la dejamos abierta para ver el progreso del trabajo.</span><span class="sxs-lookup"><span data-stu-id="69e25-188">We can close this blade, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="69e25-189">El estado del trabajo se muestra en **Resumen del trabajo** y coincide con los estados que vimos cuando probamos el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-189">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br> <span data-ttu-id="69e25-190">![Resumen del trabajo](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="69e25-191">Cuando el estado del runbook aparezca como *Completado*, haga clic en **Salida**.</span><span class="sxs-lookup"><span data-stu-id="69e25-191">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="69e25-192">Se abre la hoja **Salida** y vemos nuestro texto *Hello World* en el panel.</span><span class="sxs-lookup"><span data-stu-id="69e25-192">The **Output** blade is opened, and we can see our *Hello World* in the pane.</span></span><br> <span data-ttu-id="69e25-193">![Resumen del trabajo](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="69e25-194">Cierre la hoja Salida.</span><span class="sxs-lookup"><span data-stu-id="69e25-194">Close the Output blade.</span></span>
9. <span data-ttu-id="69e25-195">Haga clic en **Todos los registros** para abrir la hoja Transmisiones para el trabajo de Runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-195">Click **All Logs** to open the Streams blade for the runbook job.</span></span>  <span data-ttu-id="69e25-196">Solo deberíamos ver *Hello World* en el flujo de salida, pero se pueden mostrar otras transmisiones de un trabajo de Runbook como Detallado y Error si el Runbook escribe en ellas.</span><span class="sxs-lookup"><span data-stu-id="69e25-196">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br> <span data-ttu-id="69e25-197">![Resumen del trabajo](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="69e25-198">Cierre las hojas Todos los registros y Trabajo para volver a la hoja MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-198">Close the All Logs blade and the Job blade to return to the MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="69e25-199">Haga clic en **Trabajos** para abrir la hoja Trabajos de este Runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-199">Click **Jobs** to open the Jobs blade for this runbook.</span></span>  <span data-ttu-id="69e25-200">Enumera todos los trabajos creados por este runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-200">This lists all the jobs created by this runbook.</span></span> <span data-ttu-id="69e25-201">Solo deberíamos ver un trabajo en la lista ya que solo ejecutamos el trabajo una vez.</span><span class="sxs-lookup"><span data-stu-id="69e25-201">We should only see one job listed since we only ran the job once.</span></span><br> <span data-ttu-id="69e25-202">![Trabajos](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="69e25-203">Puede hacer clic en esta tarea para abrir el mismo panel Trabajo que vimos cuando se inició el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-203">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span>  <span data-ttu-id="69e25-204">Esto permite volver atrás en el tiempo y ver los detalles de cualquier trabajo que se creó para un runbook determinado.</span><span class="sxs-lookup"><span data-stu-id="69e25-204">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="69e25-205">Paso 5: Creación de recursos de variables</span><span class="sxs-lookup"><span data-stu-id="69e25-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="69e25-206">Hemos probado y publicado nuestro runbook, pero hasta ahora no hace nada útil.</span><span class="sxs-lookup"><span data-stu-id="69e25-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="69e25-207">Queremos que administre recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="69e25-207">We want to have it manage Azure resources.</span></span>  <span data-ttu-id="69e25-208">Antes de configurar el runbook que se va a autenticar, creamos una variable que contenga el identificador de suscripción y haga referencia a él después de configurar la actividad que se va a autenticar en el paso 6 a continuación.</span><span class="sxs-lookup"><span data-stu-id="69e25-208">Before we configure the runbook to authenticate, we  create a variable to hold the subscription ID and reference it after we set up the activity to authenticate in step 6 below.</span></span>  <span data-ttu-id="69e25-209">Incluir una referencia al contexto de la suscripción le permite trabajar fácilmente entre varias suscripciones.</span><span class="sxs-lookup"><span data-stu-id="69e25-209">Including a reference to the subscription context allows you to easily work between multiple subscriptions.</span></span>  <span data-ttu-id="69e25-210">Antes de continuar, copie el identificador de suscripción de la opción Suscripciones en el panel Navegación.</span><span class="sxs-lookup"><span data-stu-id="69e25-210">Before proceeding, copy your subscription ID from the Subscriptions option off the Navigation pane.</span></span>  

1. <span data-ttu-id="69e25-211">En la hoja Cuentas de Automation, haga clic en el icono **Recursos** para abrir la hoja **Recursos**.</span><span class="sxs-lookup"><span data-stu-id="69e25-211">In the Automation Accounts blade, click the **Assets** tile and the **Assets** blade is opened.</span></span>
2. <span data-ttu-id="69e25-212">En la hoja Recursos, haga clic en el icono **Variables**.</span><span class="sxs-lookup"><span data-stu-id="69e25-212">In the Assets blade, click the **Variables** tile.</span></span>
3. <span data-ttu-id="69e25-213">En la hoja Variables, haga clic en **Add a variable** (Agregar una variable).</span><span class="sxs-lookup"><span data-stu-id="69e25-213">On the Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="69e25-214">![Variable de Automatización](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="69e25-215">En la hoja Nueva variable, en el cuadro **Nombre**, escriba **AzureSubscriptionId** y en el cuadro **Valor** escriba su identificador de suscripción.</span><span class="sxs-lookup"><span data-stu-id="69e25-215">In the New variable blade, in the **Name** box, enter **AzureSubscriptionId** and in the **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="69e25-216">Mantenga *cadena* como **Tipo** y el valor predeterminado en **Cifrado**.</span><span class="sxs-lookup"><span data-stu-id="69e25-216">Keep *string* for the **Type** and the default value for **Encryption**.</span></span>  
5. <span data-ttu-id="69e25-217">Haga clic en **Crear** para crear la variable.</span><span class="sxs-lookup"><span data-stu-id="69e25-217">Click **Create** to create the variable.</span></span>  

## <a name="step-6---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="69e25-218">Paso 6: Adición de autenticación para administrar recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="69e25-218">Step 6 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="69e25-219">Ahora que tenemos una variable que contiene el identificador de suscripción, podemos configurar nuestro Runbook para que se autentique con las credenciales de ejecución a las que se hace referencia en los [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="69e25-219">Now that we have a variable to hold our subscription ID, we can configure our runbook to authenticate with the Run As credentials that are referred to in the [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="69e25-220">Lo hacemos al agregar la conexión de ejecución de Azure como **Recurso** y el cmdlet **Add-AzureRMAccount** al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-220">We do that by adding the Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet to the canvas.</span></span>  

1. <span data-ttu-id="69e25-221">Para abrir el editor gráfico, haga clic en **Editar** en la hoja MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-221">Open the graphical editor by clicking **Edit** on the MyFirstRunbook blade.</span></span><br> <span data-ttu-id="69e25-222">![Editar runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="69e25-223">Ya no necesitamos **Escribir Hello World para la salida**, así que haga clic con el botón derecho en él y seleccione **Eliminar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-223">We don't need the **Write Hello World to output** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="69e25-224">En el control Biblioteca, expanda **Conexiones** y agregue **AzureRunAsConnection** al lienzo mediante la selección de **Agregar a lienzo**.</span><span class="sxs-lookup"><span data-stu-id="69e25-224">In the Library control, expand **Connections** and add **AzureRunAsConnection** to the canvas by selecting **Add to canvas**.</span></span>
4. <span data-ttu-id="69e25-225">En el lienzo, seleccione **AzureRunAsConnection** y, en el panel Control de configuración, escriba **Get Run As Connection** (Obtener conexión de ejecución) en el cuadro de texto **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="69e25-225">On the canvas, select **AzureRunAsConnection** and in the Configuration control pane, type **Get Run As Connection** in the **Label** textbox.</span></span>  <span data-ttu-id="69e25-226">Esta es la conexión</span><span class="sxs-lookup"><span data-stu-id="69e25-226">This is the connection</span></span>
5. <span data-ttu-id="69e25-227">En el control Biblioteca, escriba **Add-AzureRmAccount** en el cuadro de texto de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="69e25-227">In the Library control, type **Add-AzureRmAccount** in the search textbox.</span></span>
6. <span data-ttu-id="69e25-228">Agregue **Agregue-AzureRmAccount** al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-228">Add **Add-AzureRmAccount** to the canvas.</span></span><br> <span data-ttu-id="69e25-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="69e25-230">Mantenga el puntero sobre **Get Run As Connection** (Obtener conexión de ejecución) hasta que aparezca un círculo en la parte inferior de la forma.</span><span class="sxs-lookup"><span data-stu-id="69e25-230">Hover over **Get Run As Connection** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="69e25-231">Haga clic en el círculo y arrastre la flecha hasta **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="69e25-231">Click the circle and drag the arrow to **Add-AzureRmAccount**.</span></span>  <span data-ttu-id="69e25-232">La flecha que ha creado es un *vínculo*.</span><span class="sxs-lookup"><span data-stu-id="69e25-232">The arrow that you created is a *link*.</span></span>  <span data-ttu-id="69e25-233">Se inicia el runbook con **Get Run As Connection** (Obtener conexión de ejecución); después, ejecute **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="69e25-233">The runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="69e25-234">![Crear vínculo entre actividades](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="69e25-235">En el lienzo, seleccione **Add-AzureRmAccount** y, en el panel Control de configuración, escriba **Login to Azure** (Iniciar sesión en Azure) en el cuadro de texto **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="69e25-235">On the canvas, select **Add-AzureRmAccount** and in the Configuration control pane type **Login to Azure** in the **Label** textbox.</span></span>
9. <span data-ttu-id="69e25-236">Haga clic en **Parámetros** ; aparece la hoja Configuración de parámetros de la actividad.</span><span class="sxs-lookup"><span data-stu-id="69e25-236">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="69e25-237">**Add-AzureRmAccount** tiene varios conjuntos de parámetros, por lo que necesitamos seleccionar uno antes de poder proporcionar valores de los parámetros.</span><span class="sxs-lookup"><span data-stu-id="69e25-237">**Add-AzureRmAccount** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="69e25-238">Haga clic en **Conjunto de parámetros** y seleccione el conjunto de parámetros **ServicePrincipalCertificatewithSubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="69e25-238">Click **Parameter Set** and then select the **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="69e25-239">Una vez seleccionado el conjunto de parámetros, los parámetros se muestran en la hoja Activity Parameter Configuration (Configuración de parámetros de actividad).</span><span class="sxs-lookup"><span data-stu-id="69e25-239">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="69e25-240">Haga clic en **APPLICATIONID**.</span><span class="sxs-lookup"><span data-stu-id="69e25-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="69e25-241">![Agregar parámetros de cuenta de Azure Resource Manager](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="69e25-242">En la hoja Valor de parámetro, seleccione **Activity output** (Salida de la actividad) en **Origen de datos**, seleccione **Get Run As Connection** (Obtener conexión de ejecución) en la lista, en el cuadro de texto **Field path** (Ruta de acceso de campo), escriba **ApplicationId** y, finalmente, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-242">In the Parameter Value blade, select **Activity output** for the **Data source** and select **Get Run As Connection** from the list, in the **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="69e25-243">Estamos especificando el nombre de la propiedad para la ruta de acceso del campo porque la actividad genera un objeto con varias propiedades.</span><span class="sxs-lookup"><span data-stu-id="69e25-243">We are specifying the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="69e25-244">Haga clic en **CERTIFICATETHUMBPRINT** y, en la hoja Valor de parámetro, seleccione **Activity output** (Salida de la actividad) en **Origen de datos**.</span><span class="sxs-lookup"><span data-stu-id="69e25-244">Click **CERTIFICATETHUMBPRINT**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="69e25-245">Seleccione **Get Run As Connection** (Obtener conexión de ejecución) en la lista; en el cuadro de texto **Field path** (Ruta de acceso de campo), escriba **CertificateThumbprint** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-245">Select **Get Run As Connection** from the list, in the **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="69e25-246">Haga clic en **SERVICEPRINCIPAL** y, en la hoja Valor de parámetro, seleccione **ConstantValue** en **Origen de datos**, haga clic en la opción **Verdadero** y en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-246">Click **SERVICEPRINCIPAL**, and in the Parameter Value blade, select **ConstantValue** for the **Data source**, click the option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="69e25-247">Haga clic en **TENANTID** y, en la hoja Valor de parámetro, seleccione **Activity output** (Salida de la actividad) en **Origen de datos**.</span><span class="sxs-lookup"><span data-stu-id="69e25-247">Click **TENANTID**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="69e25-248">Seleccione **Get Run As Connection** (Obtener conexión de ejecución) en la lista; en el cuadro de texto **Field path** (Ruta de acceso de campo), escriba **TenantId** y haga clic en **Aceptar** dos veces.</span><span class="sxs-lookup"><span data-stu-id="69e25-248">Select **Get Run As Connection** from the list, in the **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="69e25-249">En el control Biblioteca, escriba **Set-AzureRmContext** en el cuadro de texto de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="69e25-249">In the Library control, type **Set-AzureRmContext** in the search textbox.</span></span>
17. <span data-ttu-id="69e25-250">Agregue **Set-AzureRmContext** al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-250">Add **Set-AzureRmContext** to the canvas.</span></span>
18. <span data-ttu-id="69e25-251">En el lienzo, seleccione **Set-AzureRmContext** y, en el panel Control de configuración, escriba **Specify Subscription Id** (Especificar id. de suscripción) en el cuadro de texto **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="69e25-251">On the canvas, select **Set-AzureRmContext** and in the Configuration control pane type **Specify Subscription Id** in the **Label** textbox.</span></span>
19. <span data-ttu-id="69e25-252">Haga clic en **Parámetros** ; aparece la hoja Configuración de parámetros de la actividad.</span><span class="sxs-lookup"><span data-stu-id="69e25-252">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="69e25-253">**Set-AzureRmContext** tiene varios conjuntos de parámetros, por lo que necesitamos seleccionar uno antes de poder proporcionar valores de los parámetros.</span><span class="sxs-lookup"><span data-stu-id="69e25-253">**Set-AzureRmContext** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="69e25-254">Haga clic en **Conjunto de parámetros** y seleccione el conjunto de parámetros **SubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="69e25-254">Click **Parameter Set** and then select the **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="69e25-255">Una vez seleccionado el conjunto de parámetros, los parámetros se muestran en la hoja Activity Parameter Configuration (Configuración de parámetros de actividad).</span><span class="sxs-lookup"><span data-stu-id="69e25-255">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="69e25-256">Haga clic en **SubscriptionID**</span><span class="sxs-lookup"><span data-stu-id="69e25-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="69e25-257">En la hoja Valor de parámetro, seleccione **Recurso de variable** en **Origen de datos** y seleccione **AzureSubscriptionId** en la lista y haga clic en **Aceptar** dos veces.</span><span class="sxs-lookup"><span data-stu-id="69e25-257">In the Parameter Value blade, select **Variable Asset** for the **Data source** and select **AzureSubscriptionId** from the list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="69e25-258">Mantenga el puntero sobre **Login to Azure** (Iniciar sesión en Azure) hasta que aparezca un círculo en la parte inferior de la forma.</span><span class="sxs-lookup"><span data-stu-id="69e25-258">Hover over **Login to Azure** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="69e25-259">Haga clic en el círculo y arrastre la flecha hasta **Specify Subscription Id** (Especificar id. de suscripción).</span><span class="sxs-lookup"><span data-stu-id="69e25-259">Click the circle and drag the arrow to **Specify Subscription Id**.</span></span>

<span data-ttu-id="69e25-260">En este punto, el Runbook debe tener el siguiente aspecto: </span><span class="sxs-lookup"><span data-stu-id="69e25-260">Your runbook should look like the following at this point:</span></span> <br>![Configuración de autenticación de Runbook](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-to-start-a-virtual-machine"></a><span data-ttu-id="69e25-262">Paso 7: Adición de una actividad para iniciar una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="69e25-262">Step 7 - Add activity to start a virtual machine</span></span>
<span data-ttu-id="69e25-263">Aquí agregaremos una actividad **Start-AzureRmVM** para iniciar una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="69e25-263">Here we add a **Start-AzureRmVM** activity to start a virtual machine.</span></span>  <span data-ttu-id="69e25-264">Puede seleccionar cualquier máquina virtual en su suscripción de Azure. Por ahora, va a codificar ese nombre en el cmdlet.</span><span class="sxs-lookup"><span data-stu-id="69e25-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into the cmdlet.</span></span>

1. <span data-ttu-id="69e25-265">En el control Biblioteca, escriba **Start-AzureRm** en el cuadro de texto de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="69e25-265">In the Library control, type **Start-AzureRm** in the search textbox.</span></span>
2. <span data-ttu-id="69e25-266">Agregue **Start-AzureRmVM** al lienzo y haga clic y arrástrelo para colocarlo debajo de **Specify Subscription Id** (Especificar id. de suscripción).</span><span class="sxs-lookup"><span data-stu-id="69e25-266">Add **Start-AzureRmVM** to the canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="69e25-267">Mantenga el puntero sobre **Specify Subscription Id** (Especificar id. de suscripción) hasta que aparezca un círculo en la parte inferior de la forma.</span><span class="sxs-lookup"><span data-stu-id="69e25-267">Hover over **Specify Subscription Id** until a circle appears on the bottom of the shape.</span></span>  <span data-ttu-id="69e25-268">Haga clic en el círculo y arrastre la flecha hasta **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-268">Click the circle and drag the arrow to **Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="69e25-269">Seleccione **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="69e25-270">Haga clic en **Parámetros** y en **Conjunto de parámetros** para ver los conjuntos de **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-270">Click **Parameters** and then **Parameter Set** to view the sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="69e25-271">Seleccione el conjunto de parámetros **ResourceGroupNameParameterSetName** .</span><span class="sxs-lookup"><span data-stu-id="69e25-271">Select the **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="69e25-272">Tenga en cuenta que **ResourceGroupName** y **Name** tienen signos de exclamación al lado.</span><span class="sxs-lookup"><span data-stu-id="69e25-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="69e25-273">Esto indica que son parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="69e25-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="69e25-274">Tenga en cuenta que ambos esperan valores de cadena.</span><span class="sxs-lookup"><span data-stu-id="69e25-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="69e25-275">Seleccione **Name**.</span><span class="sxs-lookup"><span data-stu-id="69e25-275">Select **Name**.</span></span>  <span data-ttu-id="69e25-276">Seleccione **Expresión de PowerShell** como **Origen de datos** y escriba el nombre, entre comillas dobles, de la máquina virtual que iniciamos con este runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-276">Select **PowerShell expression** for the **Data source** and type in the name of the virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="69e25-277">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-277">Click **OK**.</span></span><br><span data-ttu-id="69e25-278">![Valor del parámetro de nombre Start-AzureRmVM](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="69e25-279">Seleccione **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="69e25-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="69e25-280">Utilice **Expresión de PowerShell** como **Origen de datos** y escriba el nombre del grupo de recursos entre comillas dobles.</span><span class="sxs-lookup"><span data-stu-id="69e25-280">Use **PowerShell expression** for the **Data source** and type in the name of the resource group surrounded with double quotes.</span></span>  <span data-ttu-id="69e25-281">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-281">Click **OK**.</span></span><br> <span data-ttu-id="69e25-282">![Parámetros Start-AzureRmVM](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="69e25-283">Haga clic en el panel Prueba para que podemos probar el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-283">Click Test pane so that we can test the runbook.</span></span>
8. <span data-ttu-id="69e25-284">Haga clic en **Iniciar** para iniciar la prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-284">Click **Start** to start the test.</span></span>  <span data-ttu-id="69e25-285">Cuando haya terminado, compruebe que la máquina virtual se ha iniciado.</span><span class="sxs-lookup"><span data-stu-id="69e25-285">Once it completes, check that the virtual machine was started.</span></span>

<span data-ttu-id="69e25-286">En este punto, el Runbook debe tener el siguiente aspecto: </span><span class="sxs-lookup"><span data-stu-id="69e25-286">Your runbook should look like the following at this point:</span></span> <br>![Configuración de autenticación de Runbook](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-to-the-runbook"></a><span data-ttu-id="69e25-288">Paso 8: Adición de parámetros de entrada adicionales al Runbook</span><span class="sxs-lookup"><span data-stu-id="69e25-288">Step 8 - Add additional input parameters to the runbook</span></span>
<span data-ttu-id="69e25-289">Actualmente, el runbook inicia la máquina virtual en el grupo de recursos que especificamos en el cmdlet **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-289">Our runbook currently starts the virtual machine in the resource group that we specified in the **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="69e25-290">Nuestro runbook sería más útil si pudiéramos especificar ambos cuando se inicia el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-290">Our runbook would be more useful if we could specify both when the runbook is started.</span></span>  <span data-ttu-id="69e25-291">Ahora agregamos parámetros de entrada al runbook para proporcionar esa funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="69e25-291">We now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="69e25-292">Abra el editor gráfico haciendo clic en **Editar** en el panel **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="69e25-292">Open the graphical editor by clicking **Edit** on the **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="69e25-293">Haga clic en **Entrada y salida**, y en **Agregar entrada** para abrir el panel Parámetro de entrada de runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-293">Click **Input and output** and then **Add input** to open the Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="69e25-294">![Entrada y salida de runbook](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="69e25-295">Especifique *VMName* para el campo **Name**.</span><span class="sxs-lookup"><span data-stu-id="69e25-295">Specify *VMName* for the **Name**.</span></span>  <span data-ttu-id="69e25-296">Mantenga *cadena* en **Tipo** y cambie **Obligatorio** a *Sí*.</span><span class="sxs-lookup"><span data-stu-id="69e25-296">Keep *string* for the **Type**, but change **Mandatory** to *Yes*.</span></span>  <span data-ttu-id="69e25-297">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-297">Click **OK**.</span></span>
4. <span data-ttu-id="69e25-298">Cree un segundo parámetro de entrada obligatorio denominado *ResourceGroupName* y haga clic en **Aceptar** para cerrar el panel **Entrada y salida**.</span><span class="sxs-lookup"><span data-stu-id="69e25-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** to close the **Input and Output** pane.</span></span><br> <span data-ttu-id="69e25-299">![Parámetros de entrada de runbook](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="69e25-300">Seleccione la actividad **Start-AzureRmVM** y haga clic en **Parámetros**.</span><span class="sxs-lookup"><span data-stu-id="69e25-300">Select the **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="69e25-301">Cambie **Origen de datos** de **Nombre** a **Entrada de runbook** y seleccione **VMName**.</span><span class="sxs-lookup"><span data-stu-id="69e25-301">Change the **Data source** for **Name** to **Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="69e25-302">Cambie **Origen de datos** de **ResourceGroupName** a **Entrada de runbook** y seleccione **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="69e25-302">Change the **Data source** for **ResourceGroupName** to **Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="69e25-303">![Parámetros Start-AzureVM](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="69e25-304">Guarde el runbook y abra el panel Prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-304">Save the runbook and open the Test pane.</span></span>  <span data-ttu-id="69e25-305">Tenga en cuenta que ahora puede proporcionar valores para las dos variables de entrada que se usan en la prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-305">Note that you can now provide values for the two input variables that you use in the test.</span></span>
9. <span data-ttu-id="69e25-306">Cierre el panel Prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-306">Close the Test pane.</span></span>
10. <span data-ttu-id="69e25-307">Haga clic en **Publicar** para publicar la nueva versión del runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-307">Click **Publish** to publish the new version of the runbook.</span></span>
11. <span data-ttu-id="69e25-308">Detenga la máquina virtual que inició en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="69e25-308">Stop the virtual machine that you started in the previous step.</span></span>
12. <span data-ttu-id="69e25-309">Haga clic en **Iniciar** para iniciar el runbook.</span><span class="sxs-lookup"><span data-stu-id="69e25-309">Click **Start** to start the runbook.</span></span>  <span data-ttu-id="69e25-310">Escriba el valor de **VMName** y **ResourceGroupName** para la máquina virtual que va a iniciar.</span><span class="sxs-lookup"><span data-stu-id="69e25-310">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br> <span data-ttu-id="69e25-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="69e25-312">Cuando se complete el runbook, compruebe que la máquina virtual se ha iniciado.</span><span class="sxs-lookup"><span data-stu-id="69e25-312">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="69e25-313">Paso 9: Creación de un vínculo condicional</span><span class="sxs-lookup"><span data-stu-id="69e25-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="69e25-314">Ahora modificamos el runbook para que solo intente iniciar la máquina virtual si aún no se ha iniciado.</span><span class="sxs-lookup"><span data-stu-id="69e25-314">We now modify the runbook so that it only attempts to start the virtual machine if it is not already started.</span></span>  <span data-ttu-id="69e25-315">Para hacerlo, agregamos al runbook un cmdlet **Get-AzureRmVM**, con el que se obtiene el estado de nivel de instancia de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="69e25-315">You do this by adding a **Get-AzureRmVM** cmdlet to the runbook that gets the instance level status of the virtual machine.</span></span> <span data-ttu-id="69e25-316">A continuación, agregue un módulo de código de Flujo de trabajo de PowerShell denominado **Get Status** con un fragmento de código de PowerShell para determinar si la máquina virtual está en ejecución o detenida.</span><span class="sxs-lookup"><span data-stu-id="69e25-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code to determine if the virtual machine state is running or stopped.</span></span>  <span data-ttu-id="69e25-317">Un vínculo condicional desde el módulo **Get Status** solo ejecuta **Start-AzureRmVM** si el estado de ejecución actual es detenido.</span><span class="sxs-lookup"><span data-stu-id="69e25-317">A conditional link from the **Get Status** module only runs **Start-AzureRmVM** if the current running state is stopped.</span></span>  <span data-ttu-id="69e25-318">Por último, se muestra un mensaje que indica si la máquina virtual se inició correctamente o no mediante el cmdlet Write-Output de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="69e25-318">Finally, we output a message to inform you if the VM was successfully started or not using the PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="69e25-319">Abra **MyFirstRunbook** en el editor gráfico.</span><span class="sxs-lookup"><span data-stu-id="69e25-319">Open **MyFirstRunbook** in the graphical editor.</span></span>
2. <span data-ttu-id="69e25-320">Para quitar el vínculo entre **Specify Subscription Id** (Especificar id. de suscripción) y **Start-AzureRmVM**, haga clic en él y presione la tecla *Suprimir*.</span><span class="sxs-lookup"><span data-stu-id="69e25-320">Remove the link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing the *Delete* key.</span></span>
3. <span data-ttu-id="69e25-321">En el control Biblioteca, escriba **Get-AzureRm** en el cuadro de texto de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="69e25-321">In the Library control, type **Get-AzureRm** in the search textbox.</span></span>
4. <span data-ttu-id="69e25-322">Agregue **Get-AzureRmVM** al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-322">Add **Get-AzureRmVM** to the canvas.</span></span>
5. <span data-ttu-id="69e25-323">Seleccione **Get-AzureRmVM** y después **Conjunto de parámetros** para ver los conjuntos de **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-323">Select **Get-AzureRmVM** and then **Parameter Set** to view the sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="69e25-324">Seleccione el conjunto de parámetros **GetVirtualMachineInResourceGroupNameParamSet** .</span><span class="sxs-lookup"><span data-stu-id="69e25-324">Select the **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="69e25-325">Tenga en cuenta que **ResourceGroupName** y **Name** tienen signos de exclamación al lado.</span><span class="sxs-lookup"><span data-stu-id="69e25-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="69e25-326">Esto indica que son parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="69e25-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="69e25-327">Tenga en cuenta que ambos esperan valores de cadena.</span><span class="sxs-lookup"><span data-stu-id="69e25-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="69e25-328">En **Origen de datos** de **Nombre**, seleccione **Entrada de runbook** y **VMName**.</span><span class="sxs-lookup"><span data-stu-id="69e25-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="69e25-329">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-329">Click **OK**.</span></span>
7. <span data-ttu-id="69e25-330">En **Origen de datos** de **ResourceGroupName**, seleccione **Entrada de runbook** y **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="69e25-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="69e25-331">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-331">Click **OK**.</span></span>
8. <span data-ttu-id="69e25-332">En **Origen de datos** para **Estado**, seleccione **Valor constante** y haga clic en **Verdadero**.</span><span class="sxs-lookup"><span data-stu-id="69e25-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="69e25-333">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="69e25-333">Click **OK**.</span></span>  
9. <span data-ttu-id="69e25-334">Cree un vínculo de **Specify Subscription Id** (Especificar id. de suscripción) a **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-334">Create a link from **Specify Subscription Id** to **Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="69e25-335">En el control Biblioteca, expanda **Control de Runbook** y agregue **Código** al lienzo.</span><span class="sxs-lookup"><span data-stu-id="69e25-335">In the library control, expand **Runbook Control** and add **Code** to the canvas.</span></span>  
11. <span data-ttu-id="69e25-336">Cree un vínculo de **Get-AzureRmVM** a **Código**.</span><span class="sxs-lookup"><span data-stu-id="69e25-336">Create a link from **Get-AzureRmVM** to **Code**.</span></span>  
12. <span data-ttu-id="69e25-337">Haga clic en **Código** y, en el panel Configuración, cambie la etiqueta a **Get Status**.</span><span class="sxs-lookup"><span data-stu-id="69e25-337">Click **Code** and in the Configuration pane, change label to **Get Status**.</span></span>
13. <span data-ttu-id="69e25-338">Seleccione el parámetro **Código**; aparece la hoja **Editor de código**.</span><span class="sxs-lookup"><span data-stu-id="69e25-338">Select **Code** parameter, and the **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="69e25-339">En el editor de código, pegue el siguiente fragmento de código:</span><span class="sxs-lookup"><span data-stu-id="69e25-339">In the code editor, paste the following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="69e25-340">Cree un vínculo de **Get Status** a **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="69e25-340">Create a link from **Get Status** to **Start-AzureRmVM**.</span></span><br> <span data-ttu-id="69e25-341">![Runbook con el módulo de código](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="69e25-342">Seleccione el vínculo y, en el panel Configuración, cambie **Aplicar condición** a **Sí**.</span><span class="sxs-lookup"><span data-stu-id="69e25-342">Select the link and in the Configuration pane, change **Apply condition** to **Yes**.</span></span>   <span data-ttu-id="69e25-343">Tenga en cuenta que el vínculo se convierte en una línea discontinua que indica que la actividad de destino solo se ejecuta si la condición se resuelve como verdadera.</span><span class="sxs-lookup"><span data-stu-id="69e25-343">Note the link turns to a dashed line indicating that the target activity only runs if the condition resolves to true.</span></span>  
17. <span data-ttu-id="69e25-344">En **Expresión de condición**, escriba *$ActivityOutput['Get Status'] -eq "Stopped"*.</span><span class="sxs-lookup"><span data-stu-id="69e25-344">For the **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="69e25-345">**Start-AzureRmVM** ahora solo se ejecuta si la máquina virtual está detenida.</span><span class="sxs-lookup"><span data-stu-id="69e25-345">**Start-AzureRmVM** now only runs if the virtual machine is stopped.</span></span>
18. <span data-ttu-id="69e25-346">En el control Biblioteca, expanda **Cmdlets** y **Microsoft.PowerShell.Utility**.</span><span class="sxs-lookup"><span data-stu-id="69e25-346">In the Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="69e25-347">Agregue **Write-Output** al lienzo dos veces.</span><span class="sxs-lookup"><span data-stu-id="69e25-347">Add **Write-Output** to the canvas twice.</span></span><br> <span data-ttu-id="69e25-348">![Runbook con Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="69e25-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="69e25-349">En el primer control **Write-Output**, haga clic en **Parámetros** y cambie el valor de **Etiqueta** a *Notify VM Started* (Notificar VM iniciada).</span><span class="sxs-lookup"><span data-stu-id="69e25-349">On the first **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Started*.</span></span>
21. <span data-ttu-id="69e25-350">Para **InputObject**, cambie **Origen de datos** a **PowerShell expression** (Expresión de PowerShell) y escriba la expresión *"$VMName successfully started."* ($VMName iniciada correctamente).</span><span class="sxs-lookup"><span data-stu-id="69e25-350">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="69e25-351">En el segundo control **Write-Output**, haga clic en **Parámetros** y cambie el valor de **Etiqueta** a *Notify VM Start Failed* (Notificar error al iniciar VM).</span><span class="sxs-lookup"><span data-stu-id="69e25-351">On the second **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Start Failed*</span></span>
23. <span data-ttu-id="69e25-352">En **InputObject**, cambie **Origen de datos** a **PowerShell expression** (Expresión de PowerShell) y escriba la expresión *"$VMName could not start."* ($VMName no se pudo iniciar).</span><span class="sxs-lookup"><span data-stu-id="69e25-352">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="69e25-353">Cree un vínculo de **Start-AzureRmVM** a **Notify VM Started** (Notificar VM iniciada) y **Notify VM Start Failed** (Notificar error al iniciar VM).</span><span class="sxs-lookup"><span data-stu-id="69e25-353">Create a link from **Start-AzureRmVM** to **Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="69e25-354">Seleccione el vínculo a **Notify VM Started** (Notificar VM iniciada) y cambie **Aplicar condición** a **Verdadero**.</span><span class="sxs-lookup"><span data-stu-id="69e25-354">Select the link to **Notify VM Started** and change **Apply condition** to **True**.</span></span>
26. <span data-ttu-id="69e25-355">En **Expresión de condición**, escriba *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span><span class="sxs-lookup"><span data-stu-id="69e25-355">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="69e25-356">Este control Write-Output ahora se ejecuta solo si la máquina virtual se ha iniciado correctamente.</span><span class="sxs-lookup"><span data-stu-id="69e25-356">This Write-Output control now only runs if the virtual machine is successfully started.</span></span>
27. <span data-ttu-id="69e25-357">Seleccione el vínculo a **Notify VM Start Failed** (Notificar error al iniciar VM) y cambie **Aplicar condición** a **Verdadero**.</span><span class="sxs-lookup"><span data-stu-id="69e25-357">Select the link to **Notify VM Start Failed** and change **Apply condition** to **True**.</span></span>
28. <span data-ttu-id="69e25-358">En **Expresión de condición**, escriba *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span><span class="sxs-lookup"><span data-stu-id="69e25-358">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="69e25-359">Este control Write-Output ahora se ejecuta solo si la máquina virtual no se ha iniciado correctamente.</span><span class="sxs-lookup"><span data-stu-id="69e25-359">This Write-Output control now only runs if the virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="69e25-360">Guarde el runbook y abra el panel Prueba.</span><span class="sxs-lookup"><span data-stu-id="69e25-360">Save the runbook and open the Test pane.</span></span>
30. <span data-ttu-id="69e25-361">Inicie el runbook con la máquina virtual detenida- Se debería iniciar.</span><span class="sxs-lookup"><span data-stu-id="69e25-361">Start the runbook with the virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="69e25-362">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="69e25-362">Next steps</span></span>
* <span data-ttu-id="69e25-363">Para obtener más información sobre la creación de gráficos, consulte [Creación gráfica en Automatización de Azure](automation-graphical-authoring-intro.md)</span><span class="sxs-lookup"><span data-stu-id="69e25-363">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="69e25-364">Para empezar a trabajar con Runbooks de PowerShell, consulte [Mi primer Runbook de PowerShell](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="69e25-364">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="69e25-365">Para empezar a trabajar con Runbooks de flujo de trabajo de PowerShell, consulte [Mi primer Runbook de flujo de trabajo de PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="69e25-365">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>


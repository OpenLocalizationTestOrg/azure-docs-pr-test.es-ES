---
title: "aaaMy primer PowerShell runbook en automatización de Azure | Documentos de Microsoft"
description: "Tutorial que le guía por la creación de hello, probar y publicar de un runbook simple de PowerShell."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "powershell de Azure, tutorial de scripts de powershell, automatización de powershell"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;sngun
ms.openlocfilehash: abff94abe666cd8423c35b970b4162ba9247bcf8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-runbook"></a><span data-ttu-id="07be0-104">Mi primer runbook de PowerShell</span><span class="sxs-lookup"><span data-stu-id="07be0-104">My first PowerShell runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="07be0-105">Gráfico</span><span class="sxs-lookup"><span data-stu-id="07be0-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="07be0-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="07be0-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="07be0-107">Flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="07be0-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="07be0-108">Este tutorial le guía por la creación de hello de un [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) en automatización de Azure.</span><span class="sxs-lookup"><span data-stu-id="07be0-108">This tutorial walks you through hello creation of a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) in Azure Automation.</span></span> <span data-ttu-id="07be0-109">Empezaremos con un runbook simple que se pruebe y publique mientras explicamos cómo tootrack Hola estado de trabajo de runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-109">We start with a simple runbook that we test and publish while we explain how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="07be0-110">Después se modifique Hola runbook tooactually administrar recursos de Azure, en este caso a partir de una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="07be0-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="07be0-111">Por último, hacemos Hola runbook más sólido mediante la adición de parámetros del runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-111">Lastly, we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="07be0-112">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="07be0-112">Prerequisites</span></span>
<span data-ttu-id="07be0-113">toocomplete este tutorial, necesita Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="07be0-113">toocomplete this tutorial, you need hello following:</span></span>

* <span data-ttu-id="07be0-114">Suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="07be0-114">Azure subscription.</span></span> <span data-ttu-id="07be0-115">Si aún no tiene ninguna, puede [activar las ventajas de la suscripción a MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) o <a href="/pricing/free-account/" target="_blank">[registrarse para obtener una cuenta gratis](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="07be0-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="07be0-116">[Cuenta de automatización](automation-sec-configure-azure-runas-account.md) toohold Hola runbook y autenticar tooAzure recursos.</span><span class="sxs-lookup"><span data-stu-id="07be0-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="07be0-117">Esta cuenta debe tener permiso toostart y detener la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="07be0-118">Una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="07be0-118">An Azure virtual machine.</span></span> <span data-ttu-id="07be0-119">Detendremos e iniciaremos esta máquina, por lo que no debería ser una máquina virtual de producción.</span><span class="sxs-lookup"><span data-stu-id="07be0-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="07be0-120">Paso 1: crear nuevo runbook</span><span class="sxs-lookup"><span data-stu-id="07be0-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="07be0-121">Comenzaremos creando un runbook simple que genera texto hello *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="07be0-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="07be0-122">Hola portal de Azure, abra su cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="07be0-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="07be0-123">página cuenta de automatización de Hello ofrece una vista rápida de los recursos de hello en esta cuenta.</span><span class="sxs-lookup"><span data-stu-id="07be0-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="07be0-124">Ya debería tener algunos recursos.</span><span class="sxs-lookup"><span data-stu-id="07be0-124">You should already have some assets.</span></span> <span data-ttu-id="07be0-125">La mayoría de los que es módulos de Hola que se incluyen automáticamente en una nueva cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="07be0-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="07be0-126">También debe tener activo de credencial de Hola que se menciona en hello [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="07be0-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="07be0-127">Haga clic en hello **Runbooks** icono tooopen Hola lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="07be0-127">Click hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="07be0-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span></span>  
3. <span data-ttu-id="07be0-129">Crear un nuevo runbook, haga clic en hello **agregar un runbook** botón y, a continuación, **crear un nuevo runbook**.</span><span class="sxs-lookup"><span data-stu-id="07be0-129">Create a new runbook by clicking hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="07be0-130">Asigne Hola runbook Hola nombre *MyFirstRunbook PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="07be0-130">Give hello runbook hello name *MyFirstRunbook-PowerShell*.</span></span>
5. <span data-ttu-id="07be0-131">En este caso, vamos toocreate una [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) así que seleccione **Powershell** para **tipo de Runbook**.</span><span class="sxs-lookup"><span data-stu-id="07be0-131">In this case, we're going toocreate a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) so select **Powershell** for **Runbook type**.</span></span><br><br> <span data-ttu-id="07be0-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span></span>  
6. <span data-ttu-id="07be0-133">Haga clic en **crear** toocreate Hola runbook y editor de texto hello abierto.</span><span class="sxs-lookup"><span data-stu-id="07be0-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="07be0-134">Paso 2: agregar código toohello runbook</span><span class="sxs-lookup"><span data-stu-id="07be0-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="07be0-135">Puede cualquier código de tipo directamente en runbook hello, o puede seleccionar cmdlets, runbooks y activos de hello control de la biblioteca y se les agregado toohello runbook con los parámetros relacionados.</span><span class="sxs-lookup"><span data-stu-id="07be0-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="07be0-136">En este tutorial, escriba directamente en hello runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-136">For this walkthrough, we type directly in hello runbook.</span></span>

1. <span data-ttu-id="07be0-137">Nuestro Runbook ahora está vacío, escriba *Write-Output "Hello World"*.</span><span class="sxs-lookup"><span data-stu-id="07be0-137">Our runbook is currently empty, type *Write-Output "Hello World."*.</span></span><br><br> <span data-ttu-id="07be0-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span></span>  
2. <span data-ttu-id="07be0-139">Guardar Hola runbook haciendo clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="07be0-139">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="07be0-140">![Botón Guardar](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-140">![Save Button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span></span>  

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="07be0-141">Paso 3: Hola runbook de prueba</span><span class="sxs-lookup"><span data-stu-id="07be0-141">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="07be0-142">Antes de que publicamos Hola runbook toomake está disponible en producción, queremos tootest se toomake seguro de que funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="07be0-142">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="07be0-143">Cuando se prueba un runbook, se ejecuta su versión **Borrador** y se visualizan sus resultados de forma interactiva.</span><span class="sxs-lookup"><span data-stu-id="07be0-143">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="07be0-144">Haga clic en **panel prueba** panel de prueba de tooopen Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-144">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="07be0-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span></span>  
2. <span data-ttu-id="07be0-146">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="07be0-146">Click **Start** toostart hello test.</span></span> <span data-ttu-id="07be0-147">Esto debería ser la opción de hello solo está habilitado.</span><span class="sxs-lookup"><span data-stu-id="07be0-147">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="07be0-148">Se crea un [trabajo de runbook](automation-runbook-execution.md) y se muestra su estado.</span><span class="sxs-lookup"><span data-stu-id="07be0-148">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="07be0-149">estado del trabajo Hola se inicia como *en cola* que indica que está esperando un runbook worker en hello toocome de nube disponible.</span><span class="sxs-lookup"><span data-stu-id="07be0-149">hello job status starts as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="07be0-150">A continuación, moverá demasiado*iniciando* cuando un trabajador notificaciones trabajo hello y, a continuación, *ejecuta* cuando se inicia realmente Hola runbook ejecuta.</span><span class="sxs-lookup"><span data-stu-id="07be0-150">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="07be0-151">Cuando se completa el trabajo de runbook de hello, se muestra su salida.</span><span class="sxs-lookup"><span data-stu-id="07be0-151">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="07be0-152">En nuestro caso, deberíamos ver *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="07be0-152">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="07be0-153">![Salida del panel de prueba](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-153">![Test Pane Output](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span></span>  
5. <span data-ttu-id="07be0-154">Cierre tooreturn toohello lienzo de hello prueba panel.</span><span class="sxs-lookup"><span data-stu-id="07be0-154">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="07be0-155">Paso 4: publicar e iniciar runbook Hola</span><span class="sxs-lookup"><span data-stu-id="07be0-155">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="07be0-156">runbook Hola que hemos creado aún está en modo de borrador.</span><span class="sxs-lookup"><span data-stu-id="07be0-156">hello runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="07be0-157">Necesitamos toopublish antes de poder ejecutarlo en producción.</span><span class="sxs-lookup"><span data-stu-id="07be0-157">We need toopublish it before we can run it in production.</span></span>  <span data-ttu-id="07be0-158">Cuando se publica un runbook, sobrescribir versión publicada actual de hello con versión de borrador de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-158">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span>  <span data-ttu-id="07be0-159">En nuestro caso, no tenemos una versión publicada aún dado que acabamos de crear runbooks Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-159">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="07be0-160">Haga clic en **publicar** toopublish Hola runbook y, a continuación, **Sí** cuando se le solicite.</span><span class="sxs-lookup"><span data-stu-id="07be0-160">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="07be0-161">![Botón Publicar](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-161">![Publish button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span></span>  
2. <span data-ttu-id="07be0-162">Si se desplaza tooview izquierdo Hola runbook Hola **Runbooks** panel ahora, mostrará un **estado de creación de** de **publicada**.</span><span class="sxs-lookup"><span data-stu-id="07be0-162">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="07be0-163">Panel de desplazamiento toohello atrás tooview derecho Hola para **MyFirstRunbook PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="07be0-163">Scroll back toohello right tooview hello pane for **MyFirstRunbook-PowerShell**.</span></span>  
   <span data-ttu-id="07be0-164">Hello opciones a través de la parte superior de Hola nos permitirá toostart Hola runbook, ver runbook hello, programar toostart en algún momento futuro hello o crear un [webhook](automation-webhooks.md) por lo que puede iniciarse a través de una llamada HTTP.</span><span class="sxs-lookup"><span data-stu-id="07be0-164">hello options across hello top allow us toostart hello runbook, view hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="07be0-165">Se desea toostart Hola runbook, haga clic en **iniciar** y, a continuación, haga clic en **Aceptar** cuando se abre la hoja de hello iniciar Runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-165">We want toostart hello runbook, so click **Start** and then click **Ok** when hello Start Runbook blade opens.</span></span><br><br> <span data-ttu-id="07be0-166">![Botón Iniciar](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-166">![Start button](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span></span><br>    
5. <span data-ttu-id="07be0-167">Se abre un panel de trabajo para el trabajo de runbook de Hola que hemos creado.</span><span class="sxs-lookup"><span data-stu-id="07be0-167">A job pane is opened for hello runbook job that we created.</span></span> <span data-ttu-id="07be0-168">Podemos cerrar este panel, pero en este caso se dejarla abierta por lo que podemos ver progreso del trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-168">We can close this pane, but in this case we leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="07be0-169">se muestra el estado del trabajo de Hello en **resumen de trabajos** y coincidencias Hola Estados que hemos visto cuando probamos Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-169">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="07be0-170">![Resumen del trabajo](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-170">![Job Summary](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span></span><br>  
7. <span data-ttu-id="07be0-171">Una vez Hola runbook estado muestra *completado*, haga clic en **salida**.</span><span class="sxs-lookup"><span data-stu-id="07be0-171">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="07be0-172">se abre el panel de salida de Hello y podemos ver nuestros *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="07be0-172">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="07be0-173">![Salida de trabajo](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-173">![Job Output](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span></span><br> 
8. <span data-ttu-id="07be0-174">Panel de salida de hello cerrar.</span><span class="sxs-lookup"><span data-stu-id="07be0-174">Close hello Output pane.</span></span>
9. <span data-ttu-id="07be0-175">Haga clic en **todos los registros de** panel de tooopen Hola flujos de trabajo de runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-175">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="07be0-176">Sólo deberíamos ver *Hello World* en la salida de hello secuencia, pero esto puede mostrar otros flujos de un trabajo de runbook como detallado y de Error si Hola runbook escribe toothem.</span><span class="sxs-lookup"><span data-stu-id="07be0-176">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="07be0-177">![Todos los registros](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-177">![All Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span></span><br>   
10. <span data-ttu-id="07be0-178">Cerrar el panel de secuencias de Hola y Hola trabajo tooreturn toohello MyFirstRunbook PowerShell panel.</span><span class="sxs-lookup"><span data-stu-id="07be0-178">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook-PowerShell pane.</span></span>
11. <span data-ttu-id="07be0-179">Haga clic en **trabajos** panel de trabajos de hello tooopen para este runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-179">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="07be0-180">Esto muestra todos los trabajos de hello creados por este runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-180">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="07be0-181">Sólo deberíamos ver un trabajo enumeran dado que solo ejecutamos trabajo Hola una vez.</span><span class="sxs-lookup"><span data-stu-id="07be0-181">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="07be0-182">![Lista de trabajos](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-182">![Job List](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span></span>  
12. <span data-ttu-id="07be0-183">Puede hacer clic en este trabajo tooopen Hola mismo panel de trabajo que se ve cuando se inicia runbook Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-183">You can click this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="07be0-184">Esto le permite toogo en el tiempo y ver los detalles de Hola de cualquier trabajo que se ha creado para un runbook determinado.</span><span class="sxs-lookup"><span data-stu-id="07be0-184">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="07be0-185">Paso 5: agregar autenticación toomanage recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="07be0-185">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="07be0-186">Hemos probado y publicado nuestro runbook, pero hasta ahora no hace nada útil.</span><span class="sxs-lookup"><span data-stu-id="07be0-186">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="07be0-187">Queremos toohave que administrar recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="07be0-187">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="07be0-188">No será capaz de toodo que aunque a menos que se tienen que autenticarse con credenciales de Hola que son referencia hello tooin [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="07be0-188">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="07be0-189">Esto lo haremos con hello **AzureRmAccount agregar** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="07be0-189">We do that with hello **Add-AzureRmAccount** cmdlet.</span></span>

1. <span data-ttu-id="07be0-190">Editor de texto hello abierto haciendo clic en **editar** en el panel de hello MyFirstRunbook PowerShell.</span><span class="sxs-lookup"><span data-stu-id="07be0-190">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-PowerShell pane.</span></span><br><br> <span data-ttu-id="07be0-191">![Editar runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-191">![Edit Runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span></span><br>   
2. <span data-ttu-id="07be0-192">No es necesario hello **Write-Output** ya de línea, por lo que continúe y elimínelo.</span><span class="sxs-lookup"><span data-stu-id="07be0-192">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="07be0-193">Escriba o copie y pegue Hola después el código que controla la autenticación de hello con la automatización de la cuenta de ejecución:</span><span class="sxs-lookup"><span data-stu-id="07be0-193">Type or copy and paste hello following code that handles hello authentication with your Automation Run As account:</span></span>
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
   <br>
4. <span data-ttu-id="07be0-194">Haga clic en **panel prueba** por lo que podemos probar Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-194">Click **Test pane** so that we can test hello runbook.</span></span>
5. <span data-ttu-id="07be0-195">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="07be0-195">Click **Start** toostart hello test.</span></span> <span data-ttu-id="07be0-196">Una vez que se complete, debería recibir resultados similares toohello después, mostrar información básica de su cuenta.</span><span class="sxs-lookup"><span data-stu-id="07be0-196">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="07be0-197">Esto confirma que esa credencial hello es válida.</span><span class="sxs-lookup"><span data-stu-id="07be0-197">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="07be0-198">![Autenticar](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-198">![Authenticate](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="07be0-199">Paso 6: agregar código toostart una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="07be0-199">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="07be0-200">Ahora que el runbook está autenticando tooour suscripción de Azure, podemos administrar recursos.</span><span class="sxs-lookup"><span data-stu-id="07be0-200">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="07be0-201">Agregamos una toostart comando una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="07be0-201">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="07be0-202">Puede elegir cualquier máquina virtual en su suscripción de Azure, y por ahora le enviaremos codificar ese nombre en hello runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-202">You can pick any virtual machine in your Azure subscription, and for now we will hardcode that name in hello runbook.</span></span>

1. <span data-ttu-id="07be0-203">Después de *agregar AzureRmAccount*, tipo *AzureRmVM inicio-nombre 'VMName' - ResourceGroupName 'NameofResourceGroup'* proporcionan Hola nombre y grupo de recursos de hello toostart de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="07be0-203">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   ```
   <br>
2. <span data-ttu-id="07be0-204">Guardar Hola runbook y, a continuación, haga clic en **panel prueba** para que se pueda probar.</span><span class="sxs-lookup"><span data-stu-id="07be0-204">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="07be0-205">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="07be0-205">Click **Start** toostart hello test.</span></span> <span data-ttu-id="07be0-206">Una vez que se complete, compruebe que la máquina virtual Hola se inició.</span><span class="sxs-lookup"><span data-stu-id="07be0-206">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="07be0-207">Paso 7: agregar un runbook de toohello del parámetro de entrada</span><span class="sxs-lookup"><span data-stu-id="07be0-207">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="07be0-208">Actualmente se inicia el runbook Hola virtual automático que nos codificado de forma rígida en runbook hello, pero sería más útil si se especifica la máquina virtual de Hola cuando se inicie el runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-208">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="07be0-209">Ahora agregaremos a parámetros de entrada toohello runbook tooprovide esa funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="07be0-209">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="07be0-210">Agregar parámetros para *VMName* y *ResourceGroupName* toohello runbook y usar estas variables con hello **AzureRmVM inicio** cmdlet como en el siguiente ejemplo de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-210">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>  
   
   ```
   Param(
    [string]$VMName,
    [string]$ResourceGroupName
   )
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   ```
   <br>
2. <span data-ttu-id="07be0-211">Guarde Hola runbook y abra el panel de prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-211">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="07be0-212">Ahora puede proporcionar valores para hello dos variables de entrada que se utilizan en pruebas de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-212">You can now provide values for hello two input variables that are used in hello test.</span></span>
3. <span data-ttu-id="07be0-213">Panel de prueba de hello cerrar.</span><span class="sxs-lookup"><span data-stu-id="07be0-213">Close hello Test pane.</span></span>
4. <span data-ttu-id="07be0-214">Haga clic en **publicar** toopublish Hola nueva versión de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-214">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="07be0-215">Detener la máquina virtual de Hola que ha iniciado en el paso anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-215">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="07be0-216">Haga clic en **iniciar** toostart Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="07be0-216">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="07be0-217">Tipo de hello **VMName** y **ResourceGroupName** para la máquina virtual de Hola que se vayan toostart.</span><span class="sxs-lookup"><span data-stu-id="07be0-217">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="07be0-218">![Pasar parámetro](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="07be0-218">![Pass Parameter](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="07be0-219">Cuando se completa el runbook de hello, compruebe que la máquina virtual Hola se inició.</span><span class="sxs-lookup"><span data-stu-id="07be0-219">When hello runbook completes, check that hello virtual machine was started.</span></span>

## <a name="differences-from-powershell-workflow"></a><span data-ttu-id="07be0-220">Diferencias del flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="07be0-220">Differences from PowerShell Workflow</span></span>
<span data-ttu-id="07be0-221">PowerShell runbooks ha Hola mismo ciclo de vida, capacidades y la administración como runbooks de flujo de trabajo de PowerShell, pero hay algunas diferencias y limitaciones:</span><span class="sxs-lookup"><span data-stu-id="07be0-221">PowerShell runbooks have hello same lifecycle, capabilities, and management as PowerShell Workflow runbooks but there are some differences and limitations:</span></span>

1. <span data-ttu-id="07be0-222">PowerShell runbooks ejecutan tooPowerShell comparado rápido runbooks de flujo de trabajo tengan el paso de compilación.</span><span class="sxs-lookup"><span data-stu-id="07be0-222">PowerShell runbooks run fast compared tooPowerShell Workflow runbooks as they don’t have compilation step.</span></span>
2. <span data-ttu-id="07be0-223">Runbooks de flujo de trabajo de PowerShell admite puntos de control, mediante los puntos de control, puede reanudar runbooks de flujo de trabajo de PowerShell de cualquier punto del runbook de hello, mientras que PowerShell runbooks solo puede reanudar desde el principio de Hola.</span><span class="sxs-lookup"><span data-stu-id="07be0-223">PowerShell Workflow runbooks support checkpoints, using checkpoints, PowerShell Workflow runbooks can resume from any point in hello runbook whereas PowerShell runbooks can only resume from hello beginning.</span></span>
3. <span data-ttu-id="07be0-224">Los runbooks de flujo de trabajo de PowerShell admiten la ejecución en serie y en paralelo, mientras que los runbooks de PowerShell solo puede ejecutar comandos en serie.</span><span class="sxs-lookup"><span data-stu-id="07be0-224">PowerShell Workflow runbooks support parallel and serial execution whereas PowerShell runbooks can only execute commands serially.</span></span>
4. <span data-ttu-id="07be0-225">En un runbook de flujo de trabajo de PowerShell, una actividad, un comando o un bloque de script pueden tener su propio espacio de ejecución, mientras que en un runbook de PowerShell todo lo que hay en el script se ejecuta en un único espacio de ejecución.</span><span class="sxs-lookup"><span data-stu-id="07be0-225">In a PowerShell Workflow runbook, an activity, a command, or a script block can have its own runspace whereas in a PowerShell runbook, everything in a script runs in a single runspace.</span></span> <span data-ttu-id="07be0-226">También se observan algunas [diferencias sintácticas](https://technet.microsoft.com/magazine/dn151046.aspx) entre un runbook de PowerShell nativo y un runbook de flujo de trabajo de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="07be0-226">There are also some [syntactic differences](https://technet.microsoft.com/magazine/dn151046.aspx) between a native PowerShell runbook and a PowerShell Workflow runbook.</span></span>

## <a name="next-steps"></a><span data-ttu-id="07be0-227">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="07be0-227">Next steps</span></span>
* <span data-ttu-id="07be0-228">tooget a trabajar con runbooks gráficos, consulte [mi primer runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="07be0-228">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="07be0-229">tooget a trabajar con runbooks de flujo de trabajo de PowerShell, consulte [mi primer runbook de flujo de trabajo de PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="07be0-229">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>
* <span data-ttu-id="07be0-230">tooknow más información acerca de los tipos de runbook, sus ventajas y limitaciones, consulte [tipos de runbook de automatización de Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="07be0-230">tooknow more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="07be0-231">Para obtener más información sobre la característica de compatibilidad con scripts de PowerShell, consulte [Announcing Native PowerShell Script Support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="07be0-231">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>


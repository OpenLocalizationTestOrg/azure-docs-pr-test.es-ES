---
title: "aaaMy primer flujo de trabajo de PowerShell runbook en automatización de Azure | Documentos de Microsoft"
description: "Tutorial que le guía por la creación de hello, probar y publicar de un runbook de texto simple con flujo de trabajo de PowerShell."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: flujo de trabajo de powershell, ejemplos de flujo de trabajo de powershell, powershell para flujos de trabajo
ms.assetid: 0002d7f7-e2b5-46e3-b5eb-4596b84fd526
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;bwren
ms.openlocfilehash: b5a34d363ef4865878f3f68119833367b5280f83
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-workflow-runbook"></a><span data-ttu-id="e35c2-104">Mi primer runbook de flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="e35c2-104">My first PowerShell Workflow runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="e35c2-105">Gráfico</span><span class="sxs-lookup"><span data-stu-id="e35c2-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="e35c2-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e35c2-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="e35c2-107">Flujo de trabajo de PowerShell</span><span class="sxs-lookup"><span data-stu-id="e35c2-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="e35c2-108">Este tutorial le guía por la creación de hello de un [runbook de flujo de trabajo de PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) en automatización de Azure.</span><span class="sxs-lookup"><span data-stu-id="e35c2-108">This tutorial walks you through hello creation of a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) in Azure Automation.</span></span> <span data-ttu-id="e35c2-109">Empezaremos con un runbook simple que se pruebe y publique al explicar cómo tootrack Hola estado de trabajo de runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-109">We start with a simple runbook that we test and publish while explaining how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="e35c2-110">Después se modifique Hola runbook tooactually administrar recursos de Azure, en este caso a partir de una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="e35c2-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="e35c2-111">Por último hacemos Hola runbook más sólido mediante la adición de parámetros del runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-111">Lastly we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e35c2-112">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="e35c2-112">Prerequisites</span></span>
<span data-ttu-id="e35c2-113">toocomplete este tutorial, necesitará Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="e35c2-113">toocomplete this tutorial, you will need hello following:</span></span>

* <span data-ttu-id="e35c2-114">Suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="e35c2-114">Azure subscription.</span></span> <span data-ttu-id="e35c2-115">Si aún no tiene ninguna, puede [activar las ventajas de la suscripción a MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) o <a href="/pricing/free-account/" target="_blank">[registrarse para obtener una cuenta gratis](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="e35c2-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="e35c2-116">[Cuenta de automatización](automation-sec-configure-azure-runas-account.md) toohold Hola runbook y autenticar tooAzure recursos.</span><span class="sxs-lookup"><span data-stu-id="e35c2-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="e35c2-117">Esta cuenta debe tener permiso toostart y detener la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="e35c2-118">Una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="e35c2-118">An Azure virtual machine.</span></span> <span data-ttu-id="e35c2-119">Detendremos e iniciaremos esta máquina, por lo que no debería ser una máquina virtual de producción.</span><span class="sxs-lookup"><span data-stu-id="e35c2-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="e35c2-120">Paso 1: crear nuevo runbook</span><span class="sxs-lookup"><span data-stu-id="e35c2-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="e35c2-121">Comenzaremos creando un runbook simple que genera texto hello *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e35c2-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="e35c2-122">Hola portal de Azure, abra su cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="e35c2-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="e35c2-123">página cuenta de automatización de Hello ofrece una vista rápida de los recursos de hello en esta cuenta.</span><span class="sxs-lookup"><span data-stu-id="e35c2-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="e35c2-124">Ya debería tener algunos recursos.</span><span class="sxs-lookup"><span data-stu-id="e35c2-124">You should already have some assets.</span></span> <span data-ttu-id="e35c2-125">La mayoría de los que es módulos de Hola que se incluyen automáticamente en una nueva cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="e35c2-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="e35c2-126">También debe tener activo de credencial de Hola que se menciona en hello [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e35c2-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="e35c2-127">Haga clic en hello **Runbooks** icono tooopen Hola lista de runbooks.</span><span class="sxs-lookup"><span data-stu-id="e35c2-127">Click on hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="e35c2-128">![Control de runbooks](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-128">![Runbooks control](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span></span>
3. <span data-ttu-id="e35c2-129">Crear un nuevo runbook haciendo clic en hello **agregar un runbook** botón y, a continuación, **crear un nuevo runbook**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-129">Create a new runbook by clicking on hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="e35c2-130">Asigne Hola runbook Hola nombre *MyFirstRunbook flujo de trabajo*.</span><span class="sxs-lookup"><span data-stu-id="e35c2-130">Give hello runbook hello name *MyFirstRunbook-Workflow*.</span></span>
5. <span data-ttu-id="e35c2-131">En este caso, vamos toocreate una [runbook de flujo de trabajo de PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) así que seleccione **flujo de trabajo de Powershell** para **tipo de Runbook**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-131">In this case, we're going toocreate a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) so select **Powershell Workflow** for **Runbook type**.</span></span><br><br> <span data-ttu-id="e35c2-132">![Nuevo runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-132">![New runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span></span>
6. <span data-ttu-id="e35c2-133">Haga clic en **crear** toocreate Hola runbook y editor de texto hello abierto.</span><span class="sxs-lookup"><span data-stu-id="e35c2-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="e35c2-134">Paso 2: agregar código toohello runbook</span><span class="sxs-lookup"><span data-stu-id="e35c2-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="e35c2-135">Puede cualquier código de tipo directamente en runbook hello, o puede seleccionar cmdlets, runbooks y activos de hello control de la biblioteca y se les agregado toohello runbook con los parámetros relacionados.</span><span class="sxs-lookup"><span data-stu-id="e35c2-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="e35c2-136">En este tutorial, se tendrá que escribir directamente en hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-136">For this walkthrough, we'll type directly into hello runbook.</span></span>

1. <span data-ttu-id="e35c2-137">Nuestro runbook está vacía actualmente con solo hello necesario *flujo de trabajo* palabra clave, el nombre de Hola de nuestros runbook y llaves de Hola que se encase flujo de trabajo completo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-137">Our runbook is currently empty with only hello required *workflow* keyword, hello name of our runbook, and hello braces that will encase hello entire workflow.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   }
   ```
2. <span data-ttu-id="e35c2-138">Escriba *Write-Output "Hello World."*</span><span class="sxs-lookup"><span data-stu-id="e35c2-138">Type *Write-Output "Hello World."*</span></span> <span data-ttu-id="e35c2-139">entre llaves Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-139">between hello braces.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   Write-Output "Hello World"
   }
   ```
3. <span data-ttu-id="e35c2-140">Guardar Hola runbook haciendo clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-140">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="e35c2-141">![Guardar runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-141">![Save runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span></span>

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="e35c2-142">Paso 3: Hola runbook de prueba</span><span class="sxs-lookup"><span data-stu-id="e35c2-142">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="e35c2-143">Antes de que publicamos Hola runbook toomake está disponible en producción, queremos tootest se toomake seguro de que funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="e35c2-143">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="e35c2-144">Cuando se prueba un runbook, se ejecuta su versión **Borrador** y se visualizan sus resultados de forma interactiva.</span><span class="sxs-lookup"><span data-stu-id="e35c2-144">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="e35c2-145">Haga clic en **panel prueba** panel de prueba de tooopen Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-145">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="e35c2-146">![Panel Prueba](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-146">![Test pane](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span></span>
2. <span data-ttu-id="e35c2-147">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e35c2-147">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e35c2-148">Esto debería ser la opción de hello solo está habilitado.</span><span class="sxs-lookup"><span data-stu-id="e35c2-148">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="e35c2-149">Se crea un [trabajo de runbook](automation-runbook-execution.md) y se muestra su estado.</span><span class="sxs-lookup"><span data-stu-id="e35c2-149">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="e35c2-150">estado del trabajo Hola se iniciará como *en cola* que indica que está esperando un runbook worker en hello toocome de nube disponible.</span><span class="sxs-lookup"><span data-stu-id="e35c2-150">hello job status will start as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="e35c2-151">A continuación, moverá demasiado*iniciando* cuando un trabajador notificaciones trabajo hello y, a continuación, *ejecuta* cuando se inicia realmente Hola runbook ejecuta.</span><span class="sxs-lookup"><span data-stu-id="e35c2-151">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="e35c2-152">Cuando se completa el trabajo de runbook de hello, se muestra su salida.</span><span class="sxs-lookup"><span data-stu-id="e35c2-152">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="e35c2-153">En nuestro caso, deberíamos ver *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e35c2-153">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="e35c2-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span></span>
5. <span data-ttu-id="e35c2-155">Cierre tooreturn toohello lienzo de hello prueba panel.</span><span class="sxs-lookup"><span data-stu-id="e35c2-155">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="e35c2-156">Paso 4: publicar e iniciar runbook Hola</span><span class="sxs-lookup"><span data-stu-id="e35c2-156">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="e35c2-157">runbook Hola que acabamos de crear aún está en modo de borrador.</span><span class="sxs-lookup"><span data-stu-id="e35c2-157">hello runbook that we just created is still in Draft mode.</span></span> <span data-ttu-id="e35c2-158">Necesitamos toopublish antes de poder ejecutarlo en producción.</span><span class="sxs-lookup"><span data-stu-id="e35c2-158">We need toopublish it before we can run it in production.</span></span> <span data-ttu-id="e35c2-159">Cuando se publica un runbook, sobrescribir versión publicada actual de hello con versión de borrador de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-159">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span> <span data-ttu-id="e35c2-160">En nuestro caso, no tenemos una versión publicada aún dado que acabamos de crear runbooks Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-160">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="e35c2-161">Haga clic en **publicar** toopublish Hola runbook y, a continuación, **Sí** cuando se le solicite.</span><span class="sxs-lookup"><span data-stu-id="e35c2-161">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="e35c2-162">![Publicar](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-162">![Publish](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span></span>
2. <span data-ttu-id="e35c2-163">Si se desplaza tooview izquierdo Hola runbook Hola **Runbooks** panel ahora, mostrará un **estado de creación de** de **publicada**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-163">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="e35c2-164">Panel de desplazamiento toohello atrás tooview derecho Hola para **MyFirstRunbook flujo de trabajo**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-164">Scroll back toohello right tooview hello pane for **MyFirstRunbook-Workflow**.</span></span>  
   <span data-ttu-id="e35c2-165">Hello opciones a través de la parte superior de hello nos permitirá toostart Hola runbook, programar toostart en algún momento futuro hello o cree una [webhook](automation-webhooks.md) por lo que puede iniciarse a través de una llamada HTTP.</span><span class="sxs-lookup"><span data-stu-id="e35c2-165">hello options across hello top allow us toostart hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="e35c2-166">Solo queremos toostart Hola runbook, haga clic en **iniciar** y, a continuación, **Sí** cuando se le solicite.</span><span class="sxs-lookup"><span data-stu-id="e35c2-166">We just want toostart hello runbook so click **Start** and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="e35c2-167">![Iniciar runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-167">![Start runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span></span>
5. <span data-ttu-id="e35c2-168">Se abre un panel de trabajo para el trabajo de runbook de Hola que acabamos de crear.</span><span class="sxs-lookup"><span data-stu-id="e35c2-168">A job pane is opened for hello runbook job that we just created.</span></span> <span data-ttu-id="e35c2-169">Podemos cerrar este panel, pero en este caso le dejaremos abierto por lo que podemos ver progreso del trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-169">We can close this pane, but in this case we'll leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="e35c2-170">se muestra el estado del trabajo de Hello en **resumen de trabajos** y coincidencias Hola Estados que hemos visto cuando probamos Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-170">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="e35c2-171">![Resumen del trabajo](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-171">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span></span>
7. <span data-ttu-id="e35c2-172">Una vez Hola runbook estado muestra *completado*, haga clic en **salida**.</span><span class="sxs-lookup"><span data-stu-id="e35c2-172">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="e35c2-173">se abre el panel de salida de Hello y podemos ver nuestros *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e35c2-173">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="e35c2-174">![Resumen del trabajo](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-174">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span></span>  
8. <span data-ttu-id="e35c2-175">Panel de salida de hello cerrar.</span><span class="sxs-lookup"><span data-stu-id="e35c2-175">Close hello Output pane.</span></span>
9. <span data-ttu-id="e35c2-176">Haga clic en **todos los registros de** panel de tooopen Hola flujos de trabajo de runbook de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-176">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="e35c2-177">Sólo deberíamos ver *Hello World* en la salida de hello secuencia, pero esto puede mostrar otros flujos de un trabajo de runbook como detallado y de Error si Hola runbook escribe toothem.</span><span class="sxs-lookup"><span data-stu-id="e35c2-177">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="e35c2-178">![Resumen del trabajo](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-178">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span></span>
10. <span data-ttu-id="e35c2-179">Cerrar el panel de secuencias de Hola y Hola trabajo tooreturn toohello MyFirstRunbook panel.</span><span class="sxs-lookup"><span data-stu-id="e35c2-179">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook pane.</span></span>
11. <span data-ttu-id="e35c2-180">Haga clic en **trabajos** panel de trabajos de hello tooopen para este runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-180">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="e35c2-181">Esto muestra todos los trabajos de hello creados por este runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-181">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="e35c2-182">Sólo deberíamos ver un trabajo enumeran dado que solo ejecutamos trabajo Hola una vez.</span><span class="sxs-lookup"><span data-stu-id="e35c2-182">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="e35c2-183">![Trabajos](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-183">![Jobs](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span></span>
12. <span data-ttu-id="e35c2-184">Puede hacer clic en este Hola de tooopen trabajo mismo panel de trabajo que se ve cuando se inicia runbook Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-184">You can click on this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="e35c2-185">Esto le permite toogo en el tiempo y ver los detalles de Hola de cualquier trabajo que se ha creado para un runbook determinado.</span><span class="sxs-lookup"><span data-stu-id="e35c2-185">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="e35c2-186">Paso 5: agregar autenticación toomanage recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="e35c2-186">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="e35c2-187">Hemos probado y publicado nuestro runbook, pero hasta ahora no hace nada útil.</span><span class="sxs-lookup"><span data-stu-id="e35c2-187">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="e35c2-188">Queremos toohave que administrar recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="e35c2-188">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="e35c2-189">No será capaz de toodo que aunque a menos que se tienen que autenticarse con credenciales de Hola que son referencia hello tooin [requisitos previos](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e35c2-189">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="e35c2-190">Esto lo haremos con hello **AzureRMAccount agregar** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e35c2-190">We do that with hello **Add-AzureRMAccount** cmdlet.</span></span>

1. <span data-ttu-id="e35c2-191">Editor de texto hello abierto haciendo clic en **editar** en el panel de hello MyFirstRunbook flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="e35c2-191">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-Workflow pane.</span></span><br><br> <span data-ttu-id="e35c2-192">![Editar runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-192">![Edit runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span></span>
2. <span data-ttu-id="e35c2-193">No es necesario hello **Write-Output** ya de línea, por lo que continúe y elimínelo.</span><span class="sxs-lookup"><span data-stu-id="e35c2-193">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="e35c2-194">Sitúe el cursor de hello en una línea en blanco entre llaves Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-194">Position hello cursor on a blank line between hello braces.</span></span>
4. <span data-ttu-id="e35c2-195">Escriba o copie y pegue Hola después el código que controlará la autenticación Hola con la automatización de la cuenta de ejecución:</span><span class="sxs-lookup"><span data-stu-id="e35c2-195">Type or copy and paste hello following code that will handle hello authentication with your Automation Run As account:</span></span>

   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
5. <span data-ttu-id="e35c2-196">Haga clic en **panel prueba** por lo que podemos probar Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-196">Click **Test pane** so that we can test hello runbook.</span></span>
6. <span data-ttu-id="e35c2-197">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e35c2-197">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e35c2-198">Una vez que se complete, debería recibir resultados similares toohello después, mostrar información básica de su cuenta.</span><span class="sxs-lookup"><span data-stu-id="e35c2-198">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="e35c2-199">Esto confirma que esa credencial hello es válida.</span><span class="sxs-lookup"><span data-stu-id="e35c2-199">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="e35c2-200">![Autenticar](media/automation-first-runbook-textual/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-200">![Authenticate](media/automation-first-runbook-textual/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="e35c2-201">Paso 6: agregar código toostart una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e35c2-201">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="e35c2-202">Ahora que el runbook está autenticando tooour suscripción de Azure, podemos administrar recursos.</span><span class="sxs-lookup"><span data-stu-id="e35c2-202">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="e35c2-203">Agregamos una toostart comando una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="e35c2-203">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="e35c2-204">Puede elegir cualquier máquina virtual en su suscripción de Azure y, por ahora nos pondremos codificar ese nombre en hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-204">You can pick any virtual machine in your Azure subscription, and for now we will be hardcoding that name in hello runbook.</span></span>

1. <span data-ttu-id="e35c2-205">Después de *agregar AzureRmAccount*, tipo *AzureRmVM inicio-nombre 'VMName' - ResourceGroupName 'NameofResourceGroup'* proporcionan Hola nombre y grupo de recursos de hello toostart de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="e35c2-205">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  

   ```
   workflow MyFirstRunbook-Workflow
   {
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   }
   ```
2. <span data-ttu-id="e35c2-206">Guardar Hola runbook y, a continuación, haga clic en **panel prueba** para que se pueda probar.</span><span class="sxs-lookup"><span data-stu-id="e35c2-206">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="e35c2-207">Haga clic en **iniciar** prueba de hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e35c2-207">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e35c2-208">Una vez que se complete, compruebe que la máquina virtual Hola se inició.</span><span class="sxs-lookup"><span data-stu-id="e35c2-208">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="e35c2-209">Paso 7: agregar un runbook de toohello del parámetro de entrada</span><span class="sxs-lookup"><span data-stu-id="e35c2-209">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="e35c2-210">Actualmente se inicia el runbook Hola virtual automático que nos codificado de forma rígida en runbook hello, pero sería más útil si al iniciar runbook Hola podríamos especificamos máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-210">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we could specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="e35c2-211">Ahora agregaremos a parámetros de entrada toohello runbook tooprovide esa funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="e35c2-211">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="e35c2-212">Agregar parámetros para *VMName* y *ResourceGroupName* toohello runbook y usar estas variables con hello **AzureRmVM inicio** cmdlet como en el siguiente ejemplo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-212">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>

   ```
   workflow MyFirstRunbook-Workflow
   {
    Param(
     [string]$VMName,
     [string]$ResourceGroupName
    )  
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   }
   ```
2. <span data-ttu-id="e35c2-213">Guarde Hola runbook y abra el panel de prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-213">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="e35c2-214">Tenga en cuenta que puede ahora proporciona valores para hello dos variables de entrada que se utilizarán en la prueba de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-214">Note that you can now provide values for hello two input variables that will be used in hello test.</span></span>
3. <span data-ttu-id="e35c2-215">Panel de prueba de hello cerrar.</span><span class="sxs-lookup"><span data-stu-id="e35c2-215">Close hello Test pane.</span></span>
4. <span data-ttu-id="e35c2-216">Haga clic en **publicar** toopublish Hola nueva versión de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-216">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="e35c2-217">Detener la máquina virtual de Hola que ha iniciado en el paso anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="e35c2-217">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="e35c2-218">Haga clic en **iniciar** toostart Hola runbook.</span><span class="sxs-lookup"><span data-stu-id="e35c2-218">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="e35c2-219">Tipo de hello **VMName** y **ResourceGroupName** para la máquina virtual de Hola que se vayan toostart.</span><span class="sxs-lookup"><span data-stu-id="e35c2-219">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="e35c2-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="e35c2-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="e35c2-221">Cuando se completa el runbook de hello, compruebe que la máquina virtual Hola se inició.</span><span class="sxs-lookup"><span data-stu-id="e35c2-221">When hello runbook completes, check that hello virtual machine was started.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="e35c2-222">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e35c2-222">Next steps</span></span>
* <span data-ttu-id="e35c2-223">tooget a trabajar con runbooks gráficos, consulte [mi primer runbook gráfico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="e35c2-223">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="e35c2-224">tooget a trabajar con runbooks de PowerShell, consulte [mi primer runbook de PowerShell](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="e35c2-224">tooget started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="e35c2-225">toolearn más información acerca de los tipos de runbook, sus ventajas y limitaciones, consulte [tipos de runbook de automatización de Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="e35c2-225">toolearn more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="e35c2-226">Para obtener más información sobre la característica de compatibilidad con scripts de PowerShell, consulte [Announcing Native PowerShell Script Support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="e35c2-226">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

---
title: "Reenvío de datos de informes de DSC de Azure Automation a Log Analytics de OMS | Microsoft Docs"
description: "En este artículo se muestra cómo enviar datos de los informes de Desired State Configuration (DSC) a Log Analytics de Microsoft Operations Management Suite para ofrecer mayor información y administración."
services: automation
documentationcenter: 
author: eslesar
manager: carmonm
editor: tysonn
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/24/2017
ms.author: eslesar
ms.openlocfilehash: 316031c5297a0201c8db4a9e177298c78962c673
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="forward-azure-automation-dsc-reporting-data-to-oms-log-analytics"></a><span data-ttu-id="d1307-103">Reenvío de datos de informes de DSC de Azure Automation a Log Analytics de OMS</span><span class="sxs-lookup"><span data-stu-id="d1307-103">Forward Azure Automation DSC reporting data to OMS Log Analytics</span></span>

<span data-ttu-id="d1307-104">Automation datos del estado de los nodos de DSC al área de trabajo de Log Analytics de Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="d1307-104">Automation can send DSC node status data to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  
<span data-ttu-id="d1307-105">El estado de cumplimiento se puede ver en Azure Portal, o con PowerShell, tanto para los nodos como para los recursos de DSC individuales en las configuraciones de los nodos.</span><span class="sxs-lookup"><span data-stu-id="d1307-105">Compliance status is visible in the Azure portal, or with PowerShell, for nodes and for individual DSC resources in node configurations.</span></span> <span data-ttu-id="d1307-106">Con Log Analytics puede:</span><span class="sxs-lookup"><span data-stu-id="d1307-106">With Log Analytics you can:</span></span>

* <span data-ttu-id="d1307-107">Obtener información de cumplimiento de nodos administrados y recursos individuales</span><span class="sxs-lookup"><span data-stu-id="d1307-107">Get compliance information for managed nodes and individual resources</span></span>
* <span data-ttu-id="d1307-108">Desencadenar un correo electrónico o una alerta basados en el estado de cumplimiento</span><span class="sxs-lookup"><span data-stu-id="d1307-108">Trigger an email or alert based on compliance status</span></span>
* <span data-ttu-id="d1307-109">Escribir consultas avanzadas en los nodos administrados</span><span class="sxs-lookup"><span data-stu-id="d1307-109">Write advanced queries across your managed nodes</span></span>
* <span data-ttu-id="d1307-110">Correlacionar el estado de cumplimiento en las cuentas de Automation</span><span class="sxs-lookup"><span data-stu-id="d1307-110">Correlate compliance status across Automation accounts</span></span>
* <span data-ttu-id="d1307-111">Visualizar el historial de cumplimiento de los nodo con el paso del tiempo</span><span class="sxs-lookup"><span data-stu-id="d1307-111">Visualize your node compliance history over time</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d1307-112">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="d1307-112">Prerequisites</span></span>

<span data-ttu-id="d1307-113">Para empezar a enviar los registros de 
DSC de Automation a Log Analytics, necesita:</span><span class="sxs-lookup"><span data-stu-id="d1307-113">To start sending your Automation DSC reports to Log Analytics, you need:</span></span>

* <span data-ttu-id="d1307-114">La versión de noviembre de 2016, o una posterior, de [Azure PowerShell](/powershell/azure/overview) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="d1307-114">The November 2016 or later release of [Azure PowerShell](/powershell/azure/overview) (v2.3.0).</span></span>
* <span data-ttu-id="d1307-115">Una cuenta de Automatización de Azure</span><span class="sxs-lookup"><span data-stu-id="d1307-115">An Azure Automation account.</span></span> <span data-ttu-id="d1307-116">Para más información, consulte [Introducción a Azure Automation](automation-offering-get-started.md)</span><span class="sxs-lookup"><span data-stu-id="d1307-116">For more information, see [Getting Started with Azure Automation](automation-offering-get-started.md)</span></span>
* <span data-ttu-id="d1307-117">Un área de trabajo de Log Analytics con una oferta de servicio de **Automation & Control**.</span><span class="sxs-lookup"><span data-stu-id="d1307-117">A Log Analytics workspace with an **Automation & Control** service offering.</span></span> <span data-ttu-id="d1307-118">Para más información, consulte [Introducción a Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="d1307-118">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span>
* <span data-ttu-id="d1307-119">Al menos un nodo de DSC de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-119">At least one Azure Automation DSC node.</span></span> <span data-ttu-id="d1307-120">Para más información, consulte [Incorporación de máquinas para administrarlas con DSC de Azure Automation](automation-dsc-onboarding.md)</span><span class="sxs-lookup"><span data-stu-id="d1307-120">For more information, see [Onboarding machines for management by Azure Automation DSC](automation-dsc-onboarding.md)</span></span> 

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="d1307-121">Configuración de la integración con Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d1307-121">Set up integration with Log Analytics</span></span>

<span data-ttu-id="d1307-122">Para comenzar a importar datos de DSC de Azure Automation en Log Analytics, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d1307-122">To begin importing data from Azure Automation DSC into Log Analytics, complete the following steps:</span></span>

1. <span data-ttu-id="d1307-123">Inicie sesión en su cuenta de Azure en PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d1307-123">Log in to your Azure account in PowerShell.</span></span> <span data-ttu-id="d1307-124">Consulte [Inicio de sesión con Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0)</span><span class="sxs-lookup"><span data-stu-id="d1307-124">See [Log in with Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0)</span></span>
1. <span data-ttu-id="d1307-125">Obtenga el valor de _ResourceId_ de su cuenta de Automation mediante la ejecución del siguiente comando de PowerShell: (si tiene más de una cuenta de Automation, elija el valor de _ResourceID_ de la cuenta que desea configurar).</span><span class="sxs-lookup"><span data-stu-id="d1307-125">Get the _ResourceId_ of your automation account by running the following PowerShell command: (if you have more than one automation account, choose the _ResourceID_ for the account you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Automation Account
  Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"
  ```
1. <span data-ttu-id="d1307-126">Obtenga el valor de _ResourceId_ del espacio de trabajo de Log Analytics mediante la ejecución del siguiente comando de PowerShell: (si tiene más de un espacio de trabajo, elija el valor de _ResourceID_ del espacio de trabajo que desea configurar).</span><span class="sxs-lookup"><span data-stu-id="d1307-126">Get the _ResourceId_ of your Log Analytics workspace by running the following PowerShell command: (if you have more than one workspace, choose the _ResourceID_ for the workspace you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Log Analytics workspace
  Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
  ```
1. <span data-ttu-id="d1307-127">Ejecute el siguiente comando de PowerShell, pero reemplace `<AutomationResourceId>` y `<WorkspaceResourceId>` por los valores de _ResourceId_ valores de cada uno de los pasos anteriores:</span><span class="sxs-lookup"><span data-stu-id="d1307-127">Run the following PowerShell command, replacing `<AutomationResourceId>` and `<WorkspaceResourceId>` with the _ResourceId_ values from each of the previous steps:</span></span>

  ```powershell
  Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $true -Categories "DscNodeStatus"
  ```

<span data-ttu-id="d1307-128">Si desea detener la importación de datos de DSC de Azure Automation en Log Analytics, ejecute el siguiente comando de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d1307-128">If you want to stop importing data from Azure Automation DSC into Log Analytics, run the following PowerShell command.</span></span>

```powershell
Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $false -Categories "DscNodeStatus"
```

## <a name="view-the-dsc-logs"></a><span data-ttu-id="d1307-129">Visualización de los registros de DSC</span><span class="sxs-lookup"><span data-stu-id="d1307-129">View the DSC logs</span></span>

<span data-ttu-id="d1307-130">Después de configurar la integración con Log Analytics para los datos de DSC de Automation, aparecerá un botón **Búsqueda de registros** en la hoja **Nodos DSC** de la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-130">After you set up integration with Log Analytics for your Automation DSC data, a **Log search** button will appear on the **DSC Nodes** blade of your automation account.</span></span> <span data-ttu-id="d1307-131">Haga clic en el botón **Búsqueda de registros** para ver los registros de los datos del nodo DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-131">Click the **Log Search** button to view the logs for DSC node data.</span></span>

![Botón Búsqueda de registros](media/automation-dsc-diagnostics/log-search-button.png)

<span data-ttu-id="d1307-133">Se abre la hoja **Búsqueda de registros**, donde se ve una operación **DscNodeStatusData** para cada nodo DSC y una operación **DscResourceStatusData** para cada [recurso de DSC](https://msdn.microsoft.com/powershell/dsc/resources) llamado en la configuración que se aplica a un nodo.</span><span class="sxs-lookup"><span data-stu-id="d1307-133">The **Log Search** blade opens, and you see a **DscNodeStatusData** operation for each DSC node, and a **DscResourceStatusData** operation for each [DSC resource](https://msdn.microsoft.com/powershell/dsc/resources) called in the Node configuration applied to that node.</span></span>

<span data-ttu-id="d1307-134">La operación **DscResourceStatusData** contiene información de los recursos de DSC en que se produjeron errores.</span><span class="sxs-lookup"><span data-stu-id="d1307-134">The **DscResourceStatusData** operation contains error information for any DSC resources that failed.</span></span>

<span data-ttu-id="d1307-135">Haga clic en la operación que desee de la lista para ver los datos de la misma.</span><span class="sxs-lookup"><span data-stu-id="d1307-135">Click each operation in the list to see the data for that operation.</span></span>

<span data-ttu-id="d1307-136">Para ver los registros, realice la búsqueda en Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="d1307-136">You can also view the logs by [searching in Log Analytics.</span></span> <span data-ttu-id="d1307-137">Consulte [Búsqueda de datos mediante búsquedas de registros](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="d1307-137">See [Find data using log searches](../log-analytics/log-analytics-log-searches.md).</span></span>
<span data-ttu-id="d1307-138">Escriba la siguiente consulta para buscar los registros de DSC:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span><span class="sxs-lookup"><span data-stu-id="d1307-138">Type the following query to find your DSC logs: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span></span>

<span data-ttu-id="d1307-139">La consulta también se puede restringir por nombre de operación.</span><span class="sxs-lookup"><span data-stu-id="d1307-139">You can also narrow the query by the operation name.</span></span> <span data-ttu-id="d1307-140">Por ejemplo: \`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData"</span><span class="sxs-lookup"><span data-stu-id="d1307-140">For example: \`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData"</span></span>

### <a name="send-an-email-when-a-dsc-compliance-check-fails"></a><span data-ttu-id="d1307-141">Envío de un correo electrónico cuando se produce un error en cualquier comprobación de cumplimiento de DSC</span><span class="sxs-lookup"><span data-stu-id="d1307-141">Send an email when a DSC compliance check fails</span></span>

<span data-ttu-id="d1307-142">Uno de nuestros principales clientes solicita la capacidad para enviar un correo electrónico o un mensaje de texto cuando aparece algún problema en una configuración de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-142">One of our top customer requests is for the ability to send an email or a text when something goes wrong with a DSC configuration.</span></span>   

<span data-ttu-id="d1307-143">Para crear una regla de alerta, primero debe crear una búsqueda de registros para los registros del informe de DSC que deben invocar la alerta.</span><span class="sxs-lookup"><span data-stu-id="d1307-143">To create an alert rule, you start by creating a log search for the DSC report records that should invoke the alert.</span></span>  <span data-ttu-id="d1307-144">Haga clic en el botón **Alerta** para crear y configurar la regla de alerta.</span><span class="sxs-lookup"><span data-stu-id="d1307-144">Click the **Alert** button to create and configure the alert rule.</span></span>

1. <span data-ttu-id="d1307-145">En la página de información general de Log Analytics, haga clic en **Búsqueda de registros**.</span><span class="sxs-lookup"><span data-stu-id="d1307-145">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="d1307-146">Cree una consulta de búsqueda de registros para la alerta; para ello, escriba la siguiente búsqueda en el campo de la consulta: `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`</span><span class="sxs-lookup"><span data-stu-id="d1307-146">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`</span></span>

  <span data-ttu-id="d1307-147">Si ha configurado registros de más de una cuenta de Automation o suscripción a su área de trabajo, puede agrupar las alertas por suscripción o cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-147">If you have set up logs from more than one Automation account or subscription to your workspace, you can group your alerts by subscription and Automation account.</span></span>  
  <span data-ttu-id="d1307-148">El nombre de la cuenta de Automation puede derivarse del campo Resource (Recurso) en la búsqueda de DscNodeStatusData.</span><span class="sxs-lookup"><span data-stu-id="d1307-148">Automation account name can be derived from the Resource field in the search of DscNodeStatusData.</span></span>  
1. <span data-ttu-id="d1307-149">Para abrir la pantalla **Agregar regla de alerta**, haga clic en **Alerta** en la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="d1307-149">To open the **Add Alert Rule** screen, click **Alert** at the top of the page.</span></span> <span data-ttu-id="d1307-150">Para más información acerca de las opciones para configurar la alerta, consulte [Información sobre alertas en Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="d1307-150">For more information on the options to configure the alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-failed-dsc-resources-across-all-nodes"></a><span data-ttu-id="d1307-151">Búsqueda de recursos de DSC con errores en todos los nodos</span><span class="sxs-lookup"><span data-stu-id="d1307-151">Find failed DSC resources across all nodes</span></span>

<span data-ttu-id="d1307-152">Una ventaja de usar Log Analytics es que es posible buscar comprobaciones con errores en todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="d1307-152">One advantage of using Log Analytics is that you can search for failed checks across nodes.</span></span>
<span data-ttu-id="d1307-153">Para buscar todas las instancias de recursos de DSC con errores:</span><span class="sxs-lookup"><span data-stu-id="d1307-153">To find all instances of DSC resources that failed.</span></span>

1. <span data-ttu-id="d1307-154">En la página de información general de Log Analytics, haga clic en **Búsqueda de registros**.</span><span class="sxs-lookup"><span data-stu-id="d1307-154">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="d1307-155">Cree una consulta de búsqueda de registros para la alerta; para ello, escriba la siguiente búsqueda en el campo de la consulta: `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`</span><span class="sxs-lookup"><span data-stu-id="d1307-155">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`</span></span>

### <a name="view-historical-dsc-node-status"></a><span data-ttu-id="d1307-156">Visualización del historial de estado del nodo de DSC</span><span class="sxs-lookup"><span data-stu-id="d1307-156">View historical DSC node status</span></span>

<span data-ttu-id="d1307-157">Por último, puede desear visualizar el historial de estado del nodo de DSC con el paso del tiempo.</span><span class="sxs-lookup"><span data-stu-id="d1307-157">Finally, you may want to visualize your DSC node status history over time.</span></span>  
<span data-ttu-id="d1307-158">Esta consulta se puede usar para buscar el estado del nodos de DSC con el paso del tiempo.</span><span class="sxs-lookup"><span data-stu-id="d1307-158">You can use this query to search for the status of your DSC node status over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=DscNodeStatus NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  

<span data-ttu-id="d1307-159">Se mostrará un gráfico del estado del nodo con el paso del tiempo.</span><span class="sxs-lookup"><span data-stu-id="d1307-159">This will display a chart of the node status over time.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="d1307-160">Registros de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d1307-160">Log Analytics records</span></span>

<span data-ttu-id="d1307-161">Diagnostics, de Azure Automation, crea dos categorías de registros en Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="d1307-161">Diagnostics from Azure Automation creates two categories of records in Log Analytics.</span></span>

### <a name="dscnodestatusdata"></a><span data-ttu-id="d1307-162">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="d1307-162">DscNodeStatusData</span></span>

| <span data-ttu-id="d1307-163">Propiedad</span><span class="sxs-lookup"><span data-stu-id="d1307-163">Property</span></span> | <span data-ttu-id="d1307-164">Descripción</span><span class="sxs-lookup"><span data-stu-id="d1307-164">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1307-165">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="d1307-165">TimeGenerated</span></span> |<span data-ttu-id="d1307-166">Fecha y hora en que se ejecutó la comprobación de cumplimiento.</span><span class="sxs-lookup"><span data-stu-id="d1307-166">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="d1307-167">nombreOperación</span><span class="sxs-lookup"><span data-stu-id="d1307-167">OperationName</span></span> |<span data-ttu-id="d1307-168">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="d1307-168">DscNodeStatusData</span></span> |
| <span data-ttu-id="d1307-169">ResultType</span><span class="sxs-lookup"><span data-stu-id="d1307-169">ResultType</span></span> |<span data-ttu-id="d1307-170">Si el nodo es compatible.</span><span class="sxs-lookup"><span data-stu-id="d1307-170">Whether the node is compliant.</span></span> |
| <span data-ttu-id="d1307-171">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-171">NodeName_s</span></span> |<span data-ttu-id="d1307-172">El nombre del nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-172">The name of the managed node.</span></span> |
| <span data-ttu-id="d1307-173">NodeComplianceStatus_s</span><span class="sxs-lookup"><span data-stu-id="d1307-173">NodeComplianceStatus_s</span></span> |<span data-ttu-id="d1307-174">Si el nodo es compatible.</span><span class="sxs-lookup"><span data-stu-id="d1307-174">Whether the node is compliant.</span></span> |
| <span data-ttu-id="d1307-175">DscReportStatus</span><span class="sxs-lookup"><span data-stu-id="d1307-175">DscReportStatus</span></span> |<span data-ttu-id="d1307-176">Si la comprobación de cumplimiento se ejecutó correctamente.</span><span class="sxs-lookup"><span data-stu-id="d1307-176">Whether the compliance check ran successfully.</span></span> |
| <span data-ttu-id="d1307-177">ConfigurationMode</span><span class="sxs-lookup"><span data-stu-id="d1307-177">ConfigurationMode</span></span> | <span data-ttu-id="d1307-178">Cómo se aplica la configuración al nodo.</span><span class="sxs-lookup"><span data-stu-id="d1307-178">How the configuration is applied to the node.</span></span> <span data-ttu-id="d1307-179">Los valores posibles son __"ApplyOnly"__, __"ApplyandMonitior"__ y __"ApplyandAutoCorrect"__.</span><span class="sxs-lookup"><span data-stu-id="d1307-179">Possible values are __"ApplyOnly"__,__"ApplyandMonitior"__, and __"ApplyandAutoCorrect"__.</span></span> <ul><li><span data-ttu-id="d1307-180">__ApplyOnly__: DSC se aplica la configuración y es lo único que hace, salvo que se inserte una nueva configuración en el nodo de destino o cuando se extrae una nueva configuración de un servidor.</span><span class="sxs-lookup"><span data-stu-id="d1307-180">__ApplyOnly__: DSC applies the configuration and does nothing further unless a new configuration is pushed to the target node or when a new configuration is pulled from a server.</span></span> <span data-ttu-id="d1307-181">Después de la aplicación inicial de una nueva configuración, DSC no comprueba si se ha producido una desviación desde un estado configurado previamente.</span><span class="sxs-lookup"><span data-stu-id="d1307-181">After initial application of a new configuration, DSC does not check for drift from a previously configured state.</span></span> <span data-ttu-id="d1307-182">DSC intenta aplicar la configuración hasta que sea la correcta antes de __ApplyOnly__ surta efecto.</span><span class="sxs-lookup"><span data-stu-id="d1307-182">DSC attempts to apply the configuration until it is successful before __ApplyOnly__ takes effect.</span></span> </li><li> <span data-ttu-id="d1307-183">__ObjectID__: es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="d1307-183">__ApplyAndMonitor__: This is the default value.</span></span> <span data-ttu-id="d1307-184">El LCM aplica las nuevas configuraciones.</span><span class="sxs-lookup"><span data-stu-id="d1307-184">The LCM applies any new configurations.</span></span> <span data-ttu-id="d1307-185">Después de la aplicación inicial de una nueva configuración, si el nodo de destino se desvía del estado deseado, DSC notifica la discrepancia en los registros.</span><span class="sxs-lookup"><span data-stu-id="d1307-185">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="d1307-186">DSC intenta aplicar la configuración hasta que sea la correcta antes de __ApplyAndMonitor__ surta efecto.</span><span class="sxs-lookup"><span data-stu-id="d1307-186">DSC attempts to apply the configuration until it is successful before __ApplyAndMonitor__ takes effect.</span></span></li><li><span data-ttu-id="d1307-187">__ApplyAndAutoCorrect__: DSC aplica las configuraciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="d1307-187">__ApplyAndAutoCorrect__: DSC applies any new configurations.</span></span> <span data-ttu-id="d1307-188">Después de la aplicación inicial de una nueva configuración, si el nodo de destino se desvía del estado deseado, DSC notifica la discrepancia en los registros y vuelve a aplicar la configuración actual.</span><span class="sxs-lookup"><span data-stu-id="d1307-188">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs, and then reapplies the current configuration.</span></span></li></ul> |
| <span data-ttu-id="d1307-189">HostName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-189">HostName_s</span></span> | <span data-ttu-id="d1307-190">El nombre del nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-190">The name of the managed node.</span></span> |
| <span data-ttu-id="d1307-191">IPAddress</span><span class="sxs-lookup"><span data-stu-id="d1307-191">IPAddress</span></span> | <span data-ttu-id="d1307-192">La dirección IPv4 del nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-192">The IPv4 address of the managed node.</span></span> |
| <span data-ttu-id="d1307-193">Categoría</span><span class="sxs-lookup"><span data-stu-id="d1307-193">Category</span></span> | <span data-ttu-id="d1307-194">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="d1307-194">DscNodeStatus</span></span> |
| <span data-ttu-id="d1307-195">Recurso</span><span class="sxs-lookup"><span data-stu-id="d1307-195">Resource</span></span> | <span data-ttu-id="d1307-196">El nombre de la cuenta de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-196">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="d1307-197">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="d1307-197">Tenant_g</span></span> | <span data-ttu-id="d1307-198">GUID que identifica al inquilino para el llamador.</span><span class="sxs-lookup"><span data-stu-id="d1307-198">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="d1307-199">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="d1307-199">NodeId_g</span></span> |<span data-ttu-id="d1307-200">GUID que identifica el nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-200">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="d1307-201">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="d1307-201">DscReportId_g</span></span> |<span data-ttu-id="d1307-202">GUID que identifica el informe.</span><span class="sxs-lookup"><span data-stu-id="d1307-202">GUID that identifies the report.</span></span> |
| <span data-ttu-id="d1307-203">LastSeenTime_t</span><span class="sxs-lookup"><span data-stu-id="d1307-203">LastSeenTime_t</span></span> |<span data-ttu-id="d1307-204">Fecha y hora en que el informe se vio por última vez.</span><span class="sxs-lookup"><span data-stu-id="d1307-204">Date and time when the report was last viewed.</span></span> |
| <span data-ttu-id="d1307-205">ReportStartTime_t</span><span class="sxs-lookup"><span data-stu-id="d1307-205">ReportStartTime_t</span></span> |<span data-ttu-id="d1307-206">Fecha y hora en que el informe se inició.</span><span class="sxs-lookup"><span data-stu-id="d1307-206">Date and time when the report was started.</span></span> |
| <span data-ttu-id="d1307-207">ReportEndTime_t</span><span class="sxs-lookup"><span data-stu-id="d1307-207">ReportEndTime_t</span></span> |<span data-ttu-id="d1307-208">Fecha y hora en que el informe se completó.</span><span class="sxs-lookup"><span data-stu-id="d1307-208">Date and time when the report completed.</span></span> |
| <span data-ttu-id="d1307-209">NumberOfResources_d</span><span class="sxs-lookup"><span data-stu-id="d1307-209">NumberOfResources_d</span></span> |<span data-ttu-id="d1307-210">El número de recursos de DSC que se llama en la configuración que se aplica al nodo.</span><span class="sxs-lookup"><span data-stu-id="d1307-210">The number of DSC resources called in the configuration applied to the node.</span></span> |
| <span data-ttu-id="d1307-211">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="d1307-211">SourceSystem</span></span> | <span data-ttu-id="d1307-212">Cómo Log Analytics ha recopilado los datos.</span><span class="sxs-lookup"><span data-stu-id="d1307-212">How Log Analytics collected the data.</span></span> <span data-ttu-id="d1307-213">Siempre *Azure* para Diagnósticos de Azure.</span><span class="sxs-lookup"><span data-stu-id="d1307-213">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="d1307-214">ResourceId</span><span class="sxs-lookup"><span data-stu-id="d1307-214">ResourceId</span></span> |<span data-ttu-id="d1307-215">Especifica la cuenta de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-215">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="d1307-216">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="d1307-216">ResultDescription</span></span> | <span data-ttu-id="d1307-217">La descripción de esta operación.</span><span class="sxs-lookup"><span data-stu-id="d1307-217">The description for this operation.</span></span> |
| <span data-ttu-id="d1307-218">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="d1307-218">SubscriptionId</span></span> | <span data-ttu-id="d1307-219">El identificador de la suscripción de Azure (GUID) para la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-219">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="d1307-220">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="d1307-220">ResourceGroup</span></span> | <span data-ttu-id="d1307-221">Nombre del grupo de recursos de la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-221">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="d1307-222">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="d1307-222">ResourceProvider</span></span> | <span data-ttu-id="d1307-223">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="d1307-223">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="d1307-224">ResourceType</span><span class="sxs-lookup"><span data-stu-id="d1307-224">ResourceType</span></span> | <span data-ttu-id="d1307-225">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="d1307-225">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="d1307-226">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="d1307-226">CorrelationId</span></span> |<span data-ttu-id="d1307-227">GUID que es el identificador de correlación del informe de cumplimiento.</span><span class="sxs-lookup"><span data-stu-id="d1307-227">GUID that is the Correlation Id of the compliance report.</span></span> |

### <a name="dscresourcestatusdata"></a><span data-ttu-id="d1307-228">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="d1307-228">DscResourceStatusData</span></span>

| <span data-ttu-id="d1307-229">Propiedad</span><span class="sxs-lookup"><span data-stu-id="d1307-229">Property</span></span> | <span data-ttu-id="d1307-230">Descripción</span><span class="sxs-lookup"><span data-stu-id="d1307-230">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d1307-231">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="d1307-231">TimeGenerated</span></span> |<span data-ttu-id="d1307-232">Fecha y hora en que se ejecutó la comprobación de cumplimiento.</span><span class="sxs-lookup"><span data-stu-id="d1307-232">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="d1307-233">nombreOperación</span><span class="sxs-lookup"><span data-stu-id="d1307-233">OperationName</span></span> |<span data-ttu-id="d1307-234">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="d1307-234">DscResourceStatusData</span></span>|
| <span data-ttu-id="d1307-235">ResultType</span><span class="sxs-lookup"><span data-stu-id="d1307-235">ResultType</span></span> |<span data-ttu-id="d1307-236">Si el recurso es compatible.</span><span class="sxs-lookup"><span data-stu-id="d1307-236">Whether the resource is compliant.</span></span> |
| <span data-ttu-id="d1307-237">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-237">NodeName_s</span></span> |<span data-ttu-id="d1307-238">El nombre del nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-238">The name of the managed node.</span></span> |
| <span data-ttu-id="d1307-239">Categoría</span><span class="sxs-lookup"><span data-stu-id="d1307-239">Category</span></span> | <span data-ttu-id="d1307-240">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="d1307-240">DscNodeStatus</span></span> |
| <span data-ttu-id="d1307-241">Recurso</span><span class="sxs-lookup"><span data-stu-id="d1307-241">Resource</span></span> | <span data-ttu-id="d1307-242">El nombre de la cuenta de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-242">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="d1307-243">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="d1307-243">Tenant_g</span></span> | <span data-ttu-id="d1307-244">GUID que identifica al inquilino para el llamador.</span><span class="sxs-lookup"><span data-stu-id="d1307-244">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="d1307-245">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="d1307-245">NodeId_g</span></span> |<span data-ttu-id="d1307-246">GUID que identifica el nodo administrado.</span><span class="sxs-lookup"><span data-stu-id="d1307-246">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="d1307-247">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="d1307-247">DscReportId_g</span></span> |<span data-ttu-id="d1307-248">GUID que identifica el informe.</span><span class="sxs-lookup"><span data-stu-id="d1307-248">GUID that identifies the report.</span></span> |
| <span data-ttu-id="d1307-249">DscResourceId_s</span><span class="sxs-lookup"><span data-stu-id="d1307-249">DscResourceId_s</span></span> |<span data-ttu-id="d1307-250">El nombre de la instancia del recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-250">The name of the DSC resource instance.</span></span> |
| <span data-ttu-id="d1307-251">DscResourceName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-251">DscResourceName_s</span></span> |<span data-ttu-id="d1307-252">El nombre del recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-252">The name of the DSC resource.</span></span> |
| <span data-ttu-id="d1307-253">DscResourceStatus_s</span><span class="sxs-lookup"><span data-stu-id="d1307-253">DscResourceStatus_s</span></span> |<span data-ttu-id="d1307-254">Si el recurso de DSC es compatible.</span><span class="sxs-lookup"><span data-stu-id="d1307-254">Whether the DSC resource is in compliance.</span></span> |
| <span data-ttu-id="d1307-255">DscModuleName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-255">DscModuleName_s</span></span> |<span data-ttu-id="d1307-256">El nombre del módulo de PowerShell que contiene el recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-256">The name of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="d1307-257">DscModuleVersion_s</span><span class="sxs-lookup"><span data-stu-id="d1307-257">DscModuleVersion_s</span></span> |<span data-ttu-id="d1307-258">La versión del módulo de PowerShell que contiene el recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-258">The version of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="d1307-259">DscConfigurationName_s</span><span class="sxs-lookup"><span data-stu-id="d1307-259">DscConfigurationName_s</span></span> |<span data-ttu-id="d1307-260">El nombre de la configuración aplicada al nodo.</span><span class="sxs-lookup"><span data-stu-id="d1307-260">The name of the configuration applied to the node.</span></span> |
| <span data-ttu-id="d1307-261">ErrorCode_s</span><span class="sxs-lookup"><span data-stu-id="d1307-261">ErrorCode_s</span></span> | <span data-ttu-id="d1307-262">El código de error si se produjo un error en el recurso.</span><span class="sxs-lookup"><span data-stu-id="d1307-262">The error code if the resource failed.</span></span> |
| <span data-ttu-id="d1307-263">ErrorMessage_s</span><span class="sxs-lookup"><span data-stu-id="d1307-263">ErrorMessage_s</span></span> |<span data-ttu-id="d1307-264">El mensaje de error si se produjo un error en el recurso.</span><span class="sxs-lookup"><span data-stu-id="d1307-264">The error message if the resource failed.</span></span> |
| <span data-ttu-id="d1307-265">DscResourceDuration_d</span><span class="sxs-lookup"><span data-stu-id="d1307-265">DscResourceDuration_d</span></span> |<span data-ttu-id="d1307-266">El tiempo, en segundos, durante el que se ejecutó el recurso de DSC.</span><span class="sxs-lookup"><span data-stu-id="d1307-266">The time, in seconds, that the DSC resource ran.</span></span> |
| <span data-ttu-id="d1307-267">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="d1307-267">SourceSystem</span></span> | <span data-ttu-id="d1307-268">Cómo Log Analytics ha recopilado los datos.</span><span class="sxs-lookup"><span data-stu-id="d1307-268">How Log Analytics collected the data.</span></span> <span data-ttu-id="d1307-269">Siempre *Azure* para Diagnósticos de Azure.</span><span class="sxs-lookup"><span data-stu-id="d1307-269">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="d1307-270">ResourceId</span><span class="sxs-lookup"><span data-stu-id="d1307-270">ResourceId</span></span> |<span data-ttu-id="d1307-271">Especifica la cuenta de Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-271">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="d1307-272">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="d1307-272">ResultDescription</span></span> | <span data-ttu-id="d1307-273">La descripción de esta operación.</span><span class="sxs-lookup"><span data-stu-id="d1307-273">The description for this operation.</span></span> |
| <span data-ttu-id="d1307-274">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="d1307-274">SubscriptionId</span></span> | <span data-ttu-id="d1307-275">El identificador de la suscripción de Azure (GUID) para la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-275">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="d1307-276">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="d1307-276">ResourceGroup</span></span> | <span data-ttu-id="d1307-277">Nombre del grupo de recursos de la cuenta de Automation.</span><span class="sxs-lookup"><span data-stu-id="d1307-277">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="d1307-278">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="d1307-278">ResourceProvider</span></span> | <span data-ttu-id="d1307-279">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="d1307-279">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="d1307-280">ResourceType</span><span class="sxs-lookup"><span data-stu-id="d1307-280">ResourceType</span></span> | <span data-ttu-id="d1307-281">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="d1307-281">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="d1307-282">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="d1307-282">CorrelationId</span></span> |<span data-ttu-id="d1307-283">GUID que es el identificador de correlación del informe de cumplimiento.</span><span class="sxs-lookup"><span data-stu-id="d1307-283">GUID that is the Correlation Id of the compliance report.</span></span> |

## <a name="summary"></a><span data-ttu-id="d1307-284">Resumen</span><span class="sxs-lookup"><span data-stu-id="d1307-284">Summary</span></span>

<span data-ttu-id="d1307-285">Al enviar los datos de DSC de Automation a Log Analytics, puede obtener más información del estado de los nodos de DSC de Automation mediante las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="d1307-285">By sending your Automation DSC data to Log Analytics, you can get better insight into the status of your Automation DSC nodes by:</span></span>

* <span data-ttu-id="d1307-286">Establecimiento de alertas que le notificarán cuando haya un problema</span><span class="sxs-lookup"><span data-stu-id="d1307-286">Setting up alerts to notify you when there is an issue</span></span>
* <span data-ttu-id="d1307-287">Uso de vistas personalizadas y de consultas de búsqueda para visualizar los resultados de runbook, el estado del trabajo de runbook y otras métricas o indicadores clave relacionados.</span><span class="sxs-lookup"><span data-stu-id="d1307-287">Using custom views and search queries to visualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="d1307-288">Log Analytics proporciona mayor visibilidad operativa para los datos de DSC de Automation y puede ayudar a resolver incidentes con mayor rapidez.</span><span class="sxs-lookup"><span data-stu-id="d1307-288">Log Analytics provides greater operational visibility to your Automation DSC data and can help address incidents more quickly.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="d1307-289">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d1307-289">Next steps</span></span>

* <span data-ttu-id="d1307-290">Para aprender a crear diferentes consultas de búsqueda y a revisar los registros de DSC de Automation con Log Analytics, consulte el artículo [Búsqueda de datos mediante búsquedas de registros](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="d1307-290">To learn more about how to construct different search queries and review the Automation DSC logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="d1307-291">Para más información acerca del uso de DSC de Azure Automation, consulte [Introducción al DSC de Automatización de Azure](automation-dsc-getting-started.md)</span><span class="sxs-lookup"><span data-stu-id="d1307-291">To learn more about using Azure Automation DSC, see [Getting started with Azure Automation DSC](automation-dsc-getting-started.md)</span></span>
* <span data-ttu-id="d1307-292">Para más información acerca de Log Analytics de OMS y de los orígenes de recopilación de datos, consulte [Conexión de Almacenamiento de Azure con Log Analytics](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="d1307-292">To learn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>


---
title: "aaaIntegrate automatización de Azure con control de código fuente de Visual Studio Team Services | Documentos de Microsoft"
description: "Escenario que le lleva por la configuración de la integración con una cuenta de Azure Automation y el control de código fuente de Visual Studio Team Services."
services: automation
documentationcenter: 
author: eamono
manager: 
editor: 
keywords: "azure powershell, VSTS, control de código fuente, automation"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2017
ms.openlocfilehash: 8f6faa596a5ad1f8b72e820ca320b3e103d83579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-visual-studio-team-services"></a><span data-ttu-id="97e1c-104">Escenario de Azure Automation: integración del control del código fuente de Automation con Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="97e1c-104">Azure Automation scenario - Automation source control integration with Visual Studio Team Services</span></span>

<span data-ttu-id="97e1c-105">En este escenario, tiene un proyecto de Visual Studio Team Services que está usando toomanage runbooks de automatización de Azure o las configuraciones de DSC bajo control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="97e1c-105">In this scenario, you have a Visual Studio Team Services project that you are using toomanage Azure Automation runbooks or DSC configurations under source control.</span></span>
<span data-ttu-id="97e1c-106">Este artículo se describe cómo toointegrate VSTS con su entorno de automatización de Azure, por lo que ocurre que la integración continua para cada protección.</span><span class="sxs-lookup"><span data-stu-id="97e1c-106">This article describes how toointegrate VSTS with your Azure Automation environment so that continuous integration happens for each check-in.</span></span>

## <a name="getting-hello-scenario"></a><span data-ttu-id="97e1c-107">Introducción al escenario de Hola</span><span class="sxs-lookup"><span data-stu-id="97e1c-107">Getting hello scenario</span></span>

<span data-ttu-id="97e1c-108">Este escenario consta de dos runbooks de PowerShell que se pueden importar directamente desde hello [Galería de runbooks](automation-runbook-gallery.md) en Hola portal de Azure o descargar desde hello [Galería de PowerShell](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="97e1c-108">This scenario consists of two PowerShell runbooks that you can import directly from hello [Runbook Gallery](automation-runbook-gallery.md) in hello Azure portal or download from hello [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="97e1c-109">Runbooks</span><span class="sxs-lookup"><span data-stu-id="97e1c-109">Runbooks</span></span>

<span data-ttu-id="97e1c-110">Runbook</span><span class="sxs-lookup"><span data-stu-id="97e1c-110">Runbook</span></span> | <span data-ttu-id="97e1c-111">Descripción</span><span class="sxs-lookup"><span data-stu-id="97e1c-111">Description</span></span>| 
--------|------------|
<span data-ttu-id="97e1c-112">Sync-VSTS</span><span class="sxs-lookup"><span data-stu-id="97e1c-112">Sync-VSTS</span></span> | <span data-ttu-id="97e1c-113">Importa runbooks o configuraciones de control de código fuente de VSTS cuando se realiza una inserción en el repositorio.</span><span class="sxs-lookup"><span data-stu-id="97e1c-113">Import runbooks or configurations from VSTS source control when a check-in is done.</span></span> <span data-ttu-id="97e1c-114">Si ejecuta manualmente, importará y publicar todos los runbooks o configuraciones en hello cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-114">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>| 
<span data-ttu-id="97e1c-115">Sync-VSTSGit</span><span class="sxs-lookup"><span data-stu-id="97e1c-115">Sync-VSTSGit</span></span> | <span data-ttu-id="97e1c-116">Importa runbooks o configuraciones de VSTS bajo control de código fuente de GIT cuando se realiza una inserción en el repositorio.</span><span class="sxs-lookup"><span data-stu-id="97e1c-116">Import runbooks or configurations from VSTS under Git source control when a check-in is done.</span></span> <span data-ttu-id="97e1c-117">Si ejecuta manualmente, importará y publicar todos los runbooks o configuraciones en hello cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-117">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>|

### <a name="variables"></a><span data-ttu-id="97e1c-118">variables</span><span class="sxs-lookup"><span data-stu-id="97e1c-118">Variables</span></span>

<span data-ttu-id="97e1c-119">Variable</span><span class="sxs-lookup"><span data-stu-id="97e1c-119">Variable</span></span> | <span data-ttu-id="97e1c-120">Descripción</span><span class="sxs-lookup"><span data-stu-id="97e1c-120">Description</span></span>|
-----------|------------|
<span data-ttu-id="97e1c-121">VSToken</span><span class="sxs-lookup"><span data-stu-id="97e1c-121">VSToken</span></span> | <span data-ttu-id="97e1c-122">Activo de variable seguro creará que contiene el token de acceso personal de VSTS Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-122">Secure variable asset you will create that contains hello VSTS personal access token.</span></span> <span data-ttu-id="97e1c-123">Aprenderá cómo toocreate un personal VSTS acceso token en hello [página de autenticación de VSTS](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span><span class="sxs-lookup"><span data-stu-id="97e1c-123">You can learn how toocreate a VSTS personal access token on hello [VSTS authentication page](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span></span> 
## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="97e1c-124">Instalación y configuración de este escenario</span><span class="sxs-lookup"><span data-stu-id="97e1c-124">Installing and configuring this scenario</span></span>

<span data-ttu-id="97e1c-125">Crear un [token de acceso personal](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) en VSTS que va a usar toosync Hola runbooks o configuraciones en su cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-125">Create a [personal access token](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) in VSTS that you will use toosync hello runbooks or configurations into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPersonalToken.png) 

<span data-ttu-id="97e1c-126">Crear un [variable $secure](automation-variables.md) en su Hola de toohold de automatización de la cuenta de acceso personal token para que pueda autenticar Hola runbook tooVSTS y sincronización runbooks Hola o configuraciones en hello cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-126">Create a [secure variable](automation-variables.md) in your automation account toohold hello personal access token so that hello runbook can authenticate tooVSTS and sync hello runbooks or configurations into hello Automation account.</span></span> <span data-ttu-id="97e1c-127">Puede llamarla VSToken.</span><span class="sxs-lookup"><span data-stu-id="97e1c-127">You can name this VSToken.</span></span> 

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSTokenVariable.png)

<span data-ttu-id="97e1c-128">Importar runbook de Hola que sincronizará los runbooks o configuraciones en la cuenta de automatización de Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-128">Import hello runbook that will sync your runbooks or configurations into hello automation account.</span></span> <span data-ttu-id="97e1c-129">Puede usar hello [runbook de ejemplo VSTS](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) o hello [VSTS con runbook de ejemplo Git] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) de hello PowerShellGallery.com dependiendo de si usas VSTS VSTS con Git o control de origen e implementar tooyour cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-129">You can use hello [VSTS sample runbook](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) or hello [VSTS with Git sample runbook] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) from hello PowerShellGallery.com depending on if you use VSTS source control or VSTS with Git and deploy tooyour automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPowerShellGallery.png)

<span data-ttu-id="97e1c-130">Ahora puede [publicar](automation-creating-importing-runbook.md#publishing-a-runbook) este runbook y así crear un webhook.</span><span class="sxs-lookup"><span data-stu-id="97e1c-130">You can now [publish](automation-creating-importing-runbook.md#publishing-a-runbook) this runbook so you can create a webhook.</span></span> 
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPublishRunbook.png)

<span data-ttu-id="97e1c-131">Crear un [webhook](automation-webhooks.md) para este runbook VSTS de sincronización y el relleno en parámetros de hello tal y como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="97e1c-131">Create a [webhook](automation-webhooks.md) for this Sync-VSTS runbook and fill in hello parameters as shown below.</span></span> <span data-ttu-id="97e1c-132">Asegúrese de que copiar dirección url del webhook hello, ya que será necesario para un enlace de servicio en VSTS.</span><span class="sxs-lookup"><span data-stu-id="97e1c-132">Make sure you copy hello webhook url as you will need it for a service hook in VSTS.</span></span> <span data-ttu-id="97e1c-133">Hola VSAccessTokenVariableName es el nombre de hello (VSToken) de variable $secure Hola que creó el token de acceso personal de hello toohold anterior.</span><span class="sxs-lookup"><span data-stu-id="97e1c-133">hello VSAccessTokenVariableName is hello name (VSToken) of hello secure variable that you created earlier toohold hello personal access token.</span></span> 

<span data-ttu-id="97e1c-134">Integración con VSTS (sincronización VSTS.ps1) tardará Hola parámetros siguientes.</span><span class="sxs-lookup"><span data-stu-id="97e1c-134">Integrating with VSTS (Sync-VSTS.ps1) will take hello following parameters.</span></span>
### <a name="sync-vsts-parameters"></a><span data-ttu-id="97e1c-135">Parámetros de Sync-VSTS</span><span class="sxs-lookup"><span data-stu-id="97e1c-135">Sync-VSTS Parameters</span></span>

<span data-ttu-id="97e1c-136">Parámetro</span><span class="sxs-lookup"><span data-stu-id="97e1c-136">Parameter</span></span> | <span data-ttu-id="97e1c-137">Descripción</span><span class="sxs-lookup"><span data-stu-id="97e1c-137">Description</span></span>| 
--------|------------|
<span data-ttu-id="97e1c-138">WebhookData</span><span class="sxs-lookup"><span data-stu-id="97e1c-138">WebhookData</span></span> | <span data-ttu-id="97e1c-139">Contendrá información de registro de hello enviada desde el enlace de servicio VSTS Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-139">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="97e1c-140">Este parámetro se debe dejar en blanco.</span><span class="sxs-lookup"><span data-stu-id="97e1c-140">You should leave this parameter blank.</span></span>| 
<span data-ttu-id="97e1c-141">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="97e1c-141">ResourceGroup</span></span> | <span data-ttu-id="97e1c-142">Este es el nombre de Hola Hola del grupo de recursos que la cuenta de automatización de hello es en.</span><span class="sxs-lookup"><span data-stu-id="97e1c-142">This is hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="97e1c-143">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="97e1c-143">AutomationAccountName</span></span> | <span data-ttu-id="97e1c-144">nombre de Hola de cuenta de automatización de Hola que se sincronizará con VSTS.</span><span class="sxs-lookup"><span data-stu-id="97e1c-144">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="97e1c-145">VSFolder</span><span class="sxs-lookup"><span data-stu-id="97e1c-145">VSFolder</span></span> | <span data-ttu-id="97e1c-146">El nombre de carpeta de hello en VSTS donde existen Hola runbooks y las configuraciones.</span><span class="sxs-lookup"><span data-stu-id="97e1c-146">The name of hello folder in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="97e1c-147">VSAccount</span><span class="sxs-lookup"><span data-stu-id="97e1c-147">VSAccount</span></span> | <span data-ttu-id="97e1c-148">nombre de Hola de hello cuenta de Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="97e1c-148">hello name of hello Visual Studio Team Services account.</span></span>| 
<span data-ttu-id="97e1c-149">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="97e1c-149">VSAccessTokenVariableName</span></span> | <span data-ttu-id="97e1c-150">nombre de Hola de variable seguros de hello (VSToken) que contiene el token de acceso personal de VSTS Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-150">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>| 


![](media/automation-scenario-source-control-integration-with-VSTS/VSTSWebhook.png)

<span data-ttu-id="97e1c-151">Si usas VSTS con GIT (sincronización VSTSGit.ps1) tardará Hola parámetros siguientes.</span><span class="sxs-lookup"><span data-stu-id="97e1c-151">If you are using VSTS with GIT (Sync-VSTSGit.ps1) it will take hello following parameters.</span></span>

<span data-ttu-id="97e1c-152">Parámetro</span><span class="sxs-lookup"><span data-stu-id="97e1c-152">Parameter</span></span> | <span data-ttu-id="97e1c-153">Descripción</span><span class="sxs-lookup"><span data-stu-id="97e1c-153">Description</span></span>|
--------|------------|
<span data-ttu-id="97e1c-154">WebhookData</span><span class="sxs-lookup"><span data-stu-id="97e1c-154">WebhookData</span></span> | <span data-ttu-id="97e1c-155">Contendrá información de registro de hello enviada desde el enlace de servicio VSTS Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-155">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="97e1c-156">Este parámetro se debe dejar en blanco.</span><span class="sxs-lookup"><span data-stu-id="97e1c-156">You should leave this parameter blank.</span></span>| <span data-ttu-id="97e1c-157">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="97e1c-157">ResourceGroup</span></span> | <span data-ttu-id="97e1c-158">Este nombre de Hola Hola del grupo de recursos que la cuenta de automatización de hello es en.</span><span class="sxs-lookup"><span data-stu-id="97e1c-158">This hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="97e1c-159">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="97e1c-159">AutomationAccountName</span></span> | <span data-ttu-id="97e1c-160">nombre de Hola de cuenta de automatización de Hola que se sincronizará con VSTS.</span><span class="sxs-lookup"><span data-stu-id="97e1c-160">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="97e1c-161">VSAccount</span><span class="sxs-lookup"><span data-stu-id="97e1c-161">VSAccount</span></span> | <span data-ttu-id="97e1c-162">nombre de Hola de hello cuenta de Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="97e1c-162">hello name of hello Visual Studio Team Services account.</span></span>|
<span data-ttu-id="97e1c-163">VSProject</span><span class="sxs-lookup"><span data-stu-id="97e1c-163">VSProject</span></span> | <span data-ttu-id="97e1c-164">nombre de Hello del proyecto de hello en VSTS donde existen Hola runbooks y las configuraciones.</span><span class="sxs-lookup"><span data-stu-id="97e1c-164">hello name of hello project in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="97e1c-165">GitRepo</span><span class="sxs-lookup"><span data-stu-id="97e1c-165">GitRepo</span></span> | <span data-ttu-id="97e1c-166">nombre de Hello del repositorio de Git Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-166">hello name of hello Git repository.</span></span>|
<span data-ttu-id="97e1c-167">GitBranch</span><span class="sxs-lookup"><span data-stu-id="97e1c-167">GitBranch</span></span> | <span data-ttu-id="97e1c-168">nombre de Hola de bifurcación de hello en el repositorio de Git de VSTS.</span><span class="sxs-lookup"><span data-stu-id="97e1c-168">hello name of hello branch in VSTS Git repository.</span></span>|
<span data-ttu-id="97e1c-169">Carpeta</span><span class="sxs-lookup"><span data-stu-id="97e1c-169">Folder</span></span> | <span data-ttu-id="97e1c-170">nombre de Hola de carpeta de hello en VSTS Git bifurcación.</span><span class="sxs-lookup"><span data-stu-id="97e1c-170">hello name of hello folder in VSTS Git branch.</span></span>|
<span data-ttu-id="97e1c-171">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="97e1c-171">VSAccessTokenVariableName</span></span> | <span data-ttu-id="97e1c-172">nombre de Hola de variable seguros de hello (VSToken) que contiene el token de acceso personal de VSTS Hola.</span><span class="sxs-lookup"><span data-stu-id="97e1c-172">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>|

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSGitWebhook.png)

<span data-ttu-id="97e1c-173">Crear un enlace de servicio en VSTS para las carpetas de toohello protecciones que desencadena esta webhook en el repositorio de código.</span><span class="sxs-lookup"><span data-stu-id="97e1c-173">Create a service hook in VSTS for check-ins toohello folder that triggers this webhook on code check-in.</span></span> <span data-ttu-id="97e1c-174">Seleccione enlaces Web como Hola servicio toointegrate con cuando se crea una nueva suscripción.</span><span class="sxs-lookup"><span data-stu-id="97e1c-174">Select Web Hooks as hello service toointegrate with when you create a new subscription.</span></span> <span data-ttu-id="97e1c-175">Puede aprender más sobre los enlaces de servicio en la [documentación de enlaces de servicio de VSTS](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span><span class="sxs-lookup"><span data-stu-id="97e1c-175">You can learn more about service hooks on [VSTS Service Hooks documentation](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span></span>
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSServiceHook.png)

<span data-ttu-id="97e1c-176">Debe ahora ser capaz de toodo todas las protecciones de los runbooks y las configuraciones en VSTS y hacer que éstas automáticamente sincronizar tenía en su cuenta de automatización.</span><span class="sxs-lookup"><span data-stu-id="97e1c-176">You should now be able toodo all check-ins of your runbooks and configurations into VSTS and have these automatically sync’d into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSSyncRunbookOutput.png)

<span data-ttu-id="97e1c-177">Si ejecuta este runbook manualmente sin que se desencadena por VSTS, puede dejar vacío parámetro webhookdata de hello y realizará una sincronización completa de carpeta VSTS Hola especificada.</span><span class="sxs-lookup"><span data-stu-id="97e1c-177">If you run this runbook manually without being triggered by VSTS, you can leave hello webhookdata parameter empty and it will do a full sync from hello VSTS folder specified.</span></span>

<span data-ttu-id="97e1c-178">Si desea que el escenario de hello toouninstall, quite el enlace de servicio de Hola de VSTS, elimine runbook Hola y Hola VSToken variable.</span><span class="sxs-lookup"><span data-stu-id="97e1c-178">If you wish toouninstall hello scenario, remove hello service hook from VSTS, delete hello runbook, and hello VSToken variable.</span></span>

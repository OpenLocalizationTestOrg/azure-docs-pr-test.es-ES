---
title: "proceso intensivo aaaUse máquinas virtuales de Azure con lote | Documentos de Microsoft"
description: "¿Cómo cambia el tamaño de tootake ventaja de la máquina virtual compatible con RDMA o basadas en la GPU en grupos de Azure Batch"
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="27d74-103">Uso de instancias compatibles con RDMA o habilitadas para GPU en grupos de Batch</span><span class="sxs-lookup"><span data-stu-id="27d74-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="27d74-104">toorun determinados trabajos por lotes, puede querer tootake aprovechar los tamaños de máquina virtual de Azure diseñados para el cálculo a gran escala.</span><span class="sxs-lookup"><span data-stu-id="27d74-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="27d74-105">Por ejemplo, toorun varias instancias [las cargas de trabajo MPI](batch-mpi.md), puede elegir A8, A9, o tamaños H-series que tienen una red de la interfaz de acceso de memoria directa remota (RDMA).</span><span class="sxs-lookup"><span data-stu-id="27d74-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="27d74-106">Estos tamaños conectan tooan InfiniBand red para la comunicación entre nodos, que puede acelerar las aplicaciones de MPI.</span><span class="sxs-lookup"><span data-stu-id="27d74-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="27d74-107">O bien, para aplicaciones CUDA, puede elegir tamaños de la serie N que incluyen tarjetas de unidad de procesamiento gráfico (GPU) de NVIDIA Tesla.</span><span class="sxs-lookup"><span data-stu-id="27d74-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="27d74-108">Este artículo proporciona instrucciones y ejemplos toouse algunos de los tamaños especializados de Azure en grupos por lotes.</span><span class="sxs-lookup"><span data-stu-id="27d74-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="27d74-109">Para especificaciones e información preliminar, consulte:</span><span class="sxs-lookup"><span data-stu-id="27d74-109">For specs and background, see:</span></span>

* <span data-ttu-id="27d74-110">Tamaños de VM de proceso de alto rendimiento ([Linux](../virtual-machines/linux/sizes-hpc.md) y [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="27d74-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="27d74-111">Tamaños de VM habilitados para GPU ([Linux](../virtual-machines/linux/sizes-gpu.md) y [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="27d74-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="27d74-112">Límites de la cuenta y la suscripción</span><span class="sxs-lookup"><span data-stu-id="27d74-112">Subscription and account limits</span></span>

* <span data-ttu-id="27d74-113">**Las cuotas** -una o varias de las cuotas de Azure pueden limitar número de Hola o el tipo de nodos se puede agregar grupo de lote de tooa.</span><span class="sxs-lookup"><span data-stu-id="27d74-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="27d74-114">Es más probable que toobe limitado al elegir compatible con RDMA, basadas en la GPU u otros tamaños de máquinas virtuales con varios núcleos.</span><span class="sxs-lookup"><span data-stu-id="27d74-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="27d74-115">Según el tipo de saludo de la cuenta de lote que ha creado, pudieron aplicar cuotas de hello propia toohello cuenta o suscripción tooyour.</span><span class="sxs-lookup"><span data-stu-id="27d74-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="27d74-116">Si ha creado su cuenta de lote en hello **por lotes servicio** configuración, está limitado por hello [cuota de núcleos dedicados por cuenta de lote](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="27d74-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="27d74-117">De forma predeterminada, esta cuota es de 20 núcleos.</span><span class="sxs-lookup"><span data-stu-id="27d74-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="27d74-118">Se aplica una cuota independiente demasiado[máquinas virtuales de prioridad baja](batch-low-pri-vms.md), si los usa.</span><span class="sxs-lookup"><span data-stu-id="27d74-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="27d74-119">Si ha creado la cuenta de hello en hello **suscripción usuario** configuración, su suscripción limita el número de Hola de núcleos VM por región.</span><span class="sxs-lookup"><span data-stu-id="27d74-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="27d74-120">Vea [Límites, cuotas y restricciones de suscripción y servicios de Microsoft Azure](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="27d74-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="27d74-121">La suscripción también aplica un tamaños de VM de cuota regional toocertain, incluidas las instancias HPC y GPU.</span><span class="sxs-lookup"><span data-stu-id="27d74-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="27d74-122">En la configuración de suscripción de usuario de hello, sin cuotas adicionales aplican toohello cuenta de lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="27d74-123">Tendrá que tooincrease las cuotas de uno o más cuando se utiliza un tamaño de memoria virtual especializado en lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="27d74-124">toorequest un aumento de la cuota, abra un [solicitud de soporte técnico al cliente en línea](../azure-supportability/how-to-create-azure-support-request.md) sin cargo.</span><span class="sxs-lookup"><span data-stu-id="27d74-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="27d74-125">**Disponibilidad de la región** : proceso intensivo máquinas virtuales podrían no estar disponibles en regiones de Hola donde crear las cuentas de lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="27d74-126">toocheck que un tamaño está disponible, consulte [productos disponibles por región](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="27d74-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="27d74-127">Dependencias</span><span class="sxs-lookup"><span data-stu-id="27d74-127">Dependencies</span></span>

<span data-ttu-id="27d74-128">Hola RDMA y capacidades GPU de tamaños de proceso intensivo solo se admiten en algunos sistemas operativos.</span><span class="sxs-lookup"><span data-stu-id="27d74-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="27d74-129">Dependiendo del sistema operativo, tal vez necesite tooinstall o configurar el controlador adicional u otro software.</span><span class="sxs-lookup"><span data-stu-id="27d74-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="27d74-130">Hola las tablas siguientes resume estas dependencias.</span><span class="sxs-lookup"><span data-stu-id="27d74-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="27d74-131">Consulte los artículos vinculados para más información.</span><span class="sxs-lookup"><span data-stu-id="27d74-131">See linked articles for details.</span></span> <span data-ttu-id="27d74-132">Para grupos de opciones tooconfigure por lotes, vea más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="27d74-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="27d74-133">Grupos de Linux: configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="27d74-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="27d74-134">Tamaño</span><span class="sxs-lookup"><span data-stu-id="27d74-134">Size</span></span> | <span data-ttu-id="27d74-135">Capacidad</span><span class="sxs-lookup"><span data-stu-id="27d74-135">Capability</span></span> | <span data-ttu-id="27d74-136">Sistemas operativos</span><span class="sxs-lookup"><span data-stu-id="27d74-136">Operating systems</span></span> | <span data-ttu-id="27d74-137">Requisitos de software</span><span class="sxs-lookup"><span data-stu-id="27d74-137">Required software</span></span> | <span data-ttu-id="27d74-138">Configuración del grupo</span><span class="sxs-lookup"><span data-stu-id="27d74-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="27d74-139">H16r, H16mr, A8 y A9</span><span class="sxs-lookup"><span data-stu-id="27d74-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="27d74-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="27d74-140">RDMA</span></span> | <span data-ttu-id="27d74-141">HPC SUSE Linux Enterprise Server 12 o</span><span class="sxs-lookup"><span data-stu-id="27d74-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="27d74-142">HPC basado en CentOS</span><span class="sxs-lookup"><span data-stu-id="27d74-142">CentOS-based HPC</span></span><br/><span data-ttu-id="27d74-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-143">(Azure Marketplace)</span></span> | <span data-ttu-id="27d74-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="27d74-144">Intel MPI 5</span></span> | <span data-ttu-id="27d74-145">Habilitar la comunicación entre nodos y deshabilitar la ejecución de tareas simultáneas</span><span class="sxs-lookup"><span data-stu-id="27d74-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="27d74-146">Serie NC*</span><span class="sxs-lookup"><span data-stu-id="27d74-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="27d74-147">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="27d74-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="27d74-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="27d74-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="27d74-149">Red Hat Enterprise Linux 7.3 o</span><span class="sxs-lookup"><span data-stu-id="27d74-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="27d74-150">Basado en CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="27d74-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="27d74-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-151">(Azure Marketplace)</span></span> | <span data-ttu-id="27d74-152">Controladores de NVIDIA CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="27d74-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="27d74-153">N/D</span><span class="sxs-lookup"><span data-stu-id="27d74-153">N/A</span></span> | 
| [<span data-ttu-id="27d74-154">Serie NV</span><span class="sxs-lookup"><span data-stu-id="27d74-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="27d74-155">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="27d74-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="27d74-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="27d74-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="27d74-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="27d74-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="27d74-158">Basado en CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="27d74-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="27d74-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-159">(Azure Marketplace)</span></span> | <span data-ttu-id="27d74-160">Controladores de NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="27d74-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="27d74-161">N/D</span><span class="sxs-lookup"><span data-stu-id="27d74-161">N/A</span></span> |

<span data-ttu-id="27d74-162">*La conectividad de RDMA en VM NC24r se admite en HPC basado en CentOS 7.3 con Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="27d74-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="27d74-163">Grupos de Windows: configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="27d74-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="27d74-164">Tamaño</span><span class="sxs-lookup"><span data-stu-id="27d74-164">Size</span></span> | <span data-ttu-id="27d74-165">Capacidad</span><span class="sxs-lookup"><span data-stu-id="27d74-165">Capability</span></span> | <span data-ttu-id="27d74-166">Sistemas operativos</span><span class="sxs-lookup"><span data-stu-id="27d74-166">Operating systems</span></span> | <span data-ttu-id="27d74-167">Requisitos de software</span><span class="sxs-lookup"><span data-stu-id="27d74-167">Required software</span></span> | <span data-ttu-id="27d74-168">Configuración del grupo</span><span class="sxs-lookup"><span data-stu-id="27d74-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="27d74-169">H16r, H16mr, A8 y A9</span><span class="sxs-lookup"><span data-stu-id="27d74-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="27d74-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="27d74-170">RDMA</span></span> | <span data-ttu-id="27d74-171">Windows Server 2012 R2 o</span><span class="sxs-lookup"><span data-stu-id="27d74-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="27d74-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="27d74-173">Microsoft MPI 2012 R2 o posterior, o</span><span class="sxs-lookup"><span data-stu-id="27d74-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="27d74-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="27d74-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="27d74-175">Extensión HpcVMDrivers para VM de Azure</span><span class="sxs-lookup"><span data-stu-id="27d74-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="27d74-176">Habilitar la comunicación entre nodos y deshabilitar la ejecución de tareas simultáneas</span><span class="sxs-lookup"><span data-stu-id="27d74-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="27d74-177">Serie NC*</span><span class="sxs-lookup"><span data-stu-id="27d74-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="27d74-178">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="27d74-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="27d74-179">Windows Server 2016 o</span><span class="sxs-lookup"><span data-stu-id="27d74-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="27d74-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="27d74-181">Controladores de NVIDIA Tesla o de CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="27d74-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="27d74-182">N/D</span><span class="sxs-lookup"><span data-stu-id="27d74-182">N/A</span></span> | 
| [<span data-ttu-id="27d74-183">Serie NV</span><span class="sxs-lookup"><span data-stu-id="27d74-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="27d74-184">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="27d74-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="27d74-185">Windows Server 2016 o</span><span class="sxs-lookup"><span data-stu-id="27d74-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="27d74-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="27d74-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="27d74-187">Controladores de NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="27d74-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="27d74-188">N/D</span><span class="sxs-lookup"><span data-stu-id="27d74-188">N/A</span></span> |

<span data-ttu-id="27d74-189">*La conectividad de RDMA en VM NC24r se admite en Windows Server 2012 R2 con la extensión HpcVMDrivers y Microsoft MPI o Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="27d74-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="27d74-190">Grupos de Windows: configuración de servicios en la nube</span><span class="sxs-lookup"><span data-stu-id="27d74-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="27d74-191">No se admiten tamaños de N-series en grupos de lote con la configuración de servicios de nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="27d74-192">Tamaño</span><span class="sxs-lookup"><span data-stu-id="27d74-192">Size</span></span> | <span data-ttu-id="27d74-193">Capacidad</span><span class="sxs-lookup"><span data-stu-id="27d74-193">Capability</span></span> | <span data-ttu-id="27d74-194">Sistemas operativos</span><span class="sxs-lookup"><span data-stu-id="27d74-194">Operating systems</span></span> | <span data-ttu-id="27d74-195">Requisitos de software</span><span class="sxs-lookup"><span data-stu-id="27d74-195">Required software</span></span> | <span data-ttu-id="27d74-196">Configuración del grupo</span><span class="sxs-lookup"><span data-stu-id="27d74-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="27d74-197">H16r, H16mr, A8 y A9</span><span class="sxs-lookup"><span data-stu-id="27d74-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="27d74-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="27d74-198">RDMA</span></span> | <span data-ttu-id="27d74-199">Windows Server 2012 R2,</span><span class="sxs-lookup"><span data-stu-id="27d74-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="27d74-200">Windows Server 2012 o</span><span class="sxs-lookup"><span data-stu-id="27d74-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="27d74-201">Windows Server 2008 R2 (familia del SO invitado)</span><span class="sxs-lookup"><span data-stu-id="27d74-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="27d74-202">Microsoft MPI 2012 R2 o posterior, o</span><span class="sxs-lookup"><span data-stu-id="27d74-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="27d74-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="27d74-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="27d74-204">Extensión HpcVMDrivers para VM de Azure</span><span class="sxs-lookup"><span data-stu-id="27d74-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="27d74-205">Habilitar la comunicación entre nodos y</span><span class="sxs-lookup"><span data-stu-id="27d74-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="27d74-206">deshabilitar la ejecución de tareas simultáneas</span><span class="sxs-lookup"><span data-stu-id="27d74-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="27d74-207">Opciones de configuración de grupos</span><span class="sxs-lookup"><span data-stu-id="27d74-207">Pool configuration options</span></span>

<span data-ttu-id="27d74-208">tooconfigure un tamaño de memoria virtual especializado para su grupo de lote, hello las API de lote y herramientas proporcionan varios software tooinstall necesario de opciones o controladores, incluidos:</span><span class="sxs-lookup"><span data-stu-id="27d74-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="27d74-209">[Iniciar tarea](batch-api-basics.md#start-task) -cargar un paquete de instalación como un tooan de archivo de recursos cuenta de almacenamiento de Azure en hello misma región que Hola cuenta de lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="27d74-210">Crear un archivo de recursos de inicio tareas línea de comandos tooinstall hello en modo silencioso cuando se inicia el grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="27d74-211">Para obtener más información, vea hello [documentación de la API de REST](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="27d74-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="27d74-212">tarea de inicio de Hello debe ejecutar con permisos elevados (Administrador) y debe esperar a correcto.</span><span class="sxs-lookup"><span data-stu-id="27d74-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="27d74-213">[Paquete de aplicación](batch-application-packages.md) : agregar un tooyour de paquete de instalación comprimido cuenta de lote y configurar una referencia de paquete en el grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="27d74-214">Esta configuración se carga y descomprime el paquete de hello en todos los nodos de grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="27d74-215">Si el paquete de hello es un instalador, crear una aplicación de Hola de instalación de inicio tareas línea de comandos toosilently en todos los nodos de grupo.</span><span class="sxs-lookup"><span data-stu-id="27d74-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="27d74-216">Opcionalmente, instalar paquetes de saludo cuando una tarea está programada toorun en un nodo.</span><span class="sxs-lookup"><span data-stu-id="27d74-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="27d74-217">[Imagen del grupo personalizado](batch-api-basics.md#pool) : crear personalizados de Windows o imagen de VM de Linux que contiene los controladores, software u otra configuración necesaria para hello tamaño de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="27d74-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="27d74-218">Si ha creado su cuenta de lote en configuración de suscripción de usuario de hello, especificar imagen personalizada de hello para el grupo de lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="27d74-219">(Las imágenes personalizadas no se admiten en las cuentas en la configuración de servicio de lote de Hola.) Imágenes personalizadas sólo pueden utilizarse con los grupos de configuración de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="27d74-220">En grupos de Batch, actualmente no puede usar una imagen personalizada creada con discos de Managed Disks o con Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="27d74-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="27d74-221">[Procesar por lotes astilleros](https://github.com/Azure/batch-shipyard) configura automáticamente Hola GPU y RDMA toowork de forma transparente con cargas de trabajo en contenedores en Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="27d74-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="27d74-222">Batch Shipyard se controla por completo con archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="27d74-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="27d74-223">Hay muchas ejemplo receta configuraciones disponibles que permiten a las cargas de trabajo GPU y RDMA como hello [CNTK GPU receta](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) que preconfigura controladores de GPU en máquinas virtuales de serie de N y carga de software de Microsoft cognitivos Toolkit como una imagen de Docker.</span><span class="sxs-lookup"><span data-stu-id="27d74-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="27d74-224">Ejemplo: Microsoft MPI en un grupo de VM A8</span><span class="sxs-lookup"><span data-stu-id="27d74-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="27d74-225">toorun las aplicaciones de MPI de Windows en un grupo de nodos de Azure A8, deberá tooinstall una implementación de MPI compatible.</span><span class="sxs-lookup"><span data-stu-id="27d74-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="27d74-226">Estos son tooinstall de pasos de ejemplo [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) en una ventana de bloque con un paquete de aplicación de lote.</span><span class="sxs-lookup"><span data-stu-id="27d74-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="27d74-227">Descargar hello [el paquete de instalación](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) para la versión más reciente de Hola de Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="27d74-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="27d74-228">Crear un archivo zip del paquete de saludo.</span><span class="sxs-lookup"><span data-stu-id="27d74-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="27d74-229">Cargar la cuenta de lote de hello paquete tooyour.</span><span class="sxs-lookup"><span data-stu-id="27d74-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="27d74-230">Para conocer los pasos, vea hello [paquetes de aplicación](batch-application-packages.md) instrucciones.</span><span class="sxs-lookup"><span data-stu-id="27d74-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="27d74-231">Especifique un identificador de aplicación (por ejemplo, *MSMPI*) y una versión (por ejemplo, *8.1*).</span><span class="sxs-lookup"><span data-stu-id="27d74-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="27d74-232">Mediante las API de lote de Hola o portal de Azure, cree un grupo en configuración de servicios de nube de hello con número de hello deseado de nodos y la escala.</span><span class="sxs-lookup"><span data-stu-id="27d74-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="27d74-233">Hello tabla siguiente muestran tooset de configuración de ejemplo de MPI en modo desatendido mediante una tarea de inicio:</span><span class="sxs-lookup"><span data-stu-id="27d74-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="27d74-234">Configuración</span><span class="sxs-lookup"><span data-stu-id="27d74-234">Setting</span></span> | <span data-ttu-id="27d74-235">Valor</span><span class="sxs-lookup"><span data-stu-id="27d74-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="27d74-236">**Tipo de imagen**</span><span class="sxs-lookup"><span data-stu-id="27d74-236">**Image Type**</span></span> | <span data-ttu-id="27d74-237">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="27d74-237">Cloud Services</span></span> |
| <span data-ttu-id="27d74-238">**Familia de SO**</span><span class="sxs-lookup"><span data-stu-id="27d74-238">**OS family**</span></span> | <span data-ttu-id="27d74-239">Windows Server 2012 R2 (familia 4 de SO)</span><span class="sxs-lookup"><span data-stu-id="27d74-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="27d74-240">**Tamaño del nodo**</span><span class="sxs-lookup"><span data-stu-id="27d74-240">**Node size**</span></span> | <span data-ttu-id="27d74-241">Estándar A8</span><span class="sxs-lookup"><span data-stu-id="27d74-241">A8 Standard</span></span> |
| <span data-ttu-id="27d74-242">**Comunicación entre nodos habilitada**</span><span class="sxs-lookup"><span data-stu-id="27d74-242">**Internode communication enabled**</span></span> | <span data-ttu-id="27d74-243">True</span><span class="sxs-lookup"><span data-stu-id="27d74-243">True</span></span> |
| <span data-ttu-id="27d74-244">**Número máximo de tareas por nodo**</span><span class="sxs-lookup"><span data-stu-id="27d74-244">**Max tasks per node**</span></span> | <span data-ttu-id="27d74-245">1</span><span class="sxs-lookup"><span data-stu-id="27d74-245">1</span></span> |
| <span data-ttu-id="27d74-246">**Referencias de paquetes de aplicación**</span><span class="sxs-lookup"><span data-stu-id="27d74-246">**Application package references**</span></span> | <span data-ttu-id="27d74-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="27d74-247">MSMPI</span></span> |
| <span data-ttu-id="27d74-248">**Tarea de inicio habilitada**</span><span class="sxs-lookup"><span data-stu-id="27d74-248">**Start task enabled**</span></span> | <span data-ttu-id="27d74-249">True</span><span class="sxs-lookup"><span data-stu-id="27d74-249">True</span></span><br><span data-ttu-id="27d74-250">**Línea de comandos** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="27d74-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="27d74-251">**Identidad del usuario**: Usuario automático de grupo, administrador</span><span class="sxs-lookup"><span data-stu-id="27d74-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="27d74-252">**Esperar operación correcta**: True</span><span class="sxs-lookup"><span data-stu-id="27d74-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="27d74-253">Ejemplo: Controladores de NVIDIA Tesla en el grupo de VM NC</span><span class="sxs-lookup"><span data-stu-id="27d74-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="27d74-254">aplicaciones de CUDA toorun en un grupo de nodos de contexto de nomenclatura de Linux, deberá tooinstall CUDA Kit de herramientas 8.0 en nodos de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="27d74-255">Hola Kit de herramientas instala a controladores de GPU de NVIDIA Tesla necesarios Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="27d74-256">Estos son los pasos de ejemplo toodeploy una imagen de Ubuntu 16.04 LTS personalizada con controladores de GPU de Hola:</span><span class="sxs-lookup"><span data-stu-id="27d74-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="27d74-257">Implemente una VM NC6 de Azure en la que se ejecute Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="27d74-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="27d74-258">Por ejemplo, crear Hola VM en hello nos sur región Central.</span><span class="sxs-lookup"><span data-stu-id="27d74-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="27d74-259">Asegúrese de que crea Hola VM con el almacenamiento estándar, y *sin* discos administrados.</span><span class="sxs-lookup"><span data-stu-id="27d74-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="27d74-260">Siga Hola pasos tooconnect toohello VM y [instalar controladores CUDA](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="27d74-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="27d74-261">Cancelar el aprovisionamiento de agente de Linux de hello y, a continuación, capturar imagen de VM de Linux con comandos de hello 1.0 de CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="27d74-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="27d74-262">Para conocer los pasos, consulte [Captura de una máquina virtual Linux que se ejecuta en Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="27d74-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="27d74-263">Tome nota del URI de la imagen de Hola.</span><span class="sxs-lookup"><span data-stu-id="27d74-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="27d74-264">No utilice imagen de Hola de toocapture de comandos de CLI de Azure 2.0 para el lote de Azure.</span><span class="sxs-lookup"><span data-stu-id="27d74-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="27d74-265">Comandos de CLI 2.0 Hola sólo captura actualmente máquinas virtuales creadas mediante discos administrados.</span><span class="sxs-lookup"><span data-stu-id="27d74-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="27d74-266">Crear una cuenta de lote, con la configuración de suscripción de usuario hello, en una región que admite NC las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="27d74-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="27d74-267">Utilizando las API de lote de Hola o portal de Azure, cree un grupo con una imagen personalizada hello y con hello número deseado de nodos y la escala.</span><span class="sxs-lookup"><span data-stu-id="27d74-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="27d74-268">Hello tabla siguiente muestran valores de grupo de ejemplo para la imagen de hello:</span><span class="sxs-lookup"><span data-stu-id="27d74-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="27d74-269">Configuración</span><span class="sxs-lookup"><span data-stu-id="27d74-269">Setting</span></span> | <span data-ttu-id="27d74-270">Valor</span><span class="sxs-lookup"><span data-stu-id="27d74-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="27d74-271">**Tipo de imagen**</span><span class="sxs-lookup"><span data-stu-id="27d74-271">**Image Type**</span></span> | <span data-ttu-id="27d74-272">Imagen personalizada</span><span class="sxs-lookup"><span data-stu-id="27d74-272">Custom Image</span></span> |
| <span data-ttu-id="27d74-273">**Imagen personalizada**</span><span class="sxs-lookup"><span data-stu-id="27d74-273">**Custom Image**</span></span> | <span data-ttu-id="27d74-274">URI del formulario de saludo de la imagen`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="27d74-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="27d74-275">**SKU de agente del nodo**</span><span class="sxs-lookup"><span data-stu-id="27d74-275">**Node agent SKU**</span></span> | <span data-ttu-id="27d74-276">batch.node.ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="27d74-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="27d74-277">**Tamaño del nodo**</span><span class="sxs-lookup"><span data-stu-id="27d74-277">**Node size**</span></span> | <span data-ttu-id="27d74-278">Estándar NC6</span><span class="sxs-lookup"><span data-stu-id="27d74-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="27d74-279">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="27d74-279">Next steps</span></span>

* <span data-ttu-id="27d74-280">trabajos MPI de toorun en un grupo de lote de Azure, vea hello [Windows](batch-mpi.md) o [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) ejemplos.</span><span class="sxs-lookup"><span data-stu-id="27d74-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="27d74-281">Para obtener ejemplos de las cargas de trabajo GPU en lote, vea hello [lote astilleros](https://github.com/Azure/batch-shipyard/) recetas.</span><span class="sxs-lookup"><span data-stu-id="27d74-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>

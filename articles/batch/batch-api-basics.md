---
title: "Introducción a Azure Batch para desarrolladores | Microsoft Docs"
description: "Conozca las características del servicio Batch y sus API desde el punto de vista del desarrollo."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c2f2a878414e4efd626d674ef9a182ae52eeb1ff
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="f187d-103">Desarrollo de soluciones de procesos paralelos a gran escala con Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="f187d-104">En este artículo se proporciona información general acerca los componentes principales del servicio Azure Batch y se describen los principales recursos y características del servicio que pueden usar los desarrolladores de Batch para crear soluciones de proceso en paralelo a gran escala.</span><span class="sxs-lookup"><span data-stu-id="f187d-104">In this overview of the core components of the Azure Batch service, we discuss the primary service features and resources that Batch developers can use to build large-scale parallel compute solutions.</span></span>

<span data-ttu-id="f187d-105">Utilizará muchos de los recursos y las características que se describen en este artículo, tanto si está desarrollando una aplicación informática distribuida o un servicio que emita llamadas directas a la [API de REST][batch_rest_api], como si usa uno de los [SDK de Batch](batch-apis-tools.md#azure-accounts-for-batch-development).</span><span class="sxs-lookup"><span data-stu-id="f187d-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of the [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of the resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="f187d-106">Para ver una introducción de nivel superior sobre el servicio Batch, consulte [Datos básicos de Azure Batch](batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-106">For a higher-level introduction to the Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="f187d-107">Flujo de trabajo del servicio Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-107">Batch service workflow</span></span>
<span data-ttu-id="f187d-108">El siguiente flujo de trabajo general es típico de casi todas las aplicaciones y los servicios que usan el servicio Batch para procesar cargas de trabajo paralelas:</span><span class="sxs-lookup"><span data-stu-id="f187d-108">The following high-level workflow is typical of nearly all applications and services that use the Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="f187d-109">Cargue los **archivos de datos** que desee procesar en una cuenta de [Azure Storage][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="f187d-109">Upload the **data files** that you want to process to an [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="f187d-110">Batch incluye compatibilidad integrada con el acceso a Azure Blob Storage y, cuando se ejecutan, las tareas pueden descargar estos archivos a [nodos de proceso](#compute-node).</span><span class="sxs-lookup"><span data-stu-id="f187d-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files to [compute nodes](#compute-node) when the tasks are run.</span></span>
2. <span data-ttu-id="f187d-111">Cargue los **archivos de la aplicación** que las tareas ejecutarán.</span><span class="sxs-lookup"><span data-stu-id="f187d-111">Upload the **application files** that your tasks will run.</span></span> <span data-ttu-id="f187d-112">Estos archivos pueden ser binarios o scripts y sus dependencias, y los ejecutan las tareas de los trabajos.</span><span class="sxs-lookup"><span data-stu-id="f187d-112">These files can be binaries or scripts and their dependencies, and are executed by the tasks in your jobs.</span></span> <span data-ttu-id="f187d-113">Las tareas pueden descargar estos archivos desde la cuenta de Storage, o bien puede usar la característica de [paquetes de aplicación](#application-packages) en Batch para la implementación y la administración de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f187d-113">Your tasks can download these files from your Storage account, or you can use the [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="f187d-114">Cree un [grupo](#pool) de nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="f187d-115">Cuando cree un grupo, especifique el número de nodos de proceso para el grupo, su tamaño y el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="f187d-115">When you create a pool, you specify the number of compute nodes for the pool, their size, and the operating system.</span></span> <span data-ttu-id="f187d-116">Cuando se ejecutan las tareas de su trabajo, estas se asignan para que se ejecuten en uno de los nodos del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-116">When each task in your job runs, it's assigned to execute on one of the nodes in your pool.</span></span>
4. <span data-ttu-id="f187d-117">Creación de un [trabajo](#job).</span><span class="sxs-lookup"><span data-stu-id="f187d-117">Create a [job](#job).</span></span> <span data-ttu-id="f187d-118">Un trabajo administra una colección de tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="f187d-119">Se asocia cada trabajo a un grupo específico donde se ejecutarán las tareas de dicho trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-119">You associate each job to a specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="f187d-120">Agregue [tareas](#task) al trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-120">Add [tasks](#task) to the job.</span></span> <span data-ttu-id="f187d-121">Cada tarea ejecuta la aplicación o el script que haya cargado para procesar los archivos de datos que descarga de la cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="f187d-121">Each task runs the application or script that you uploaded to process the data files it downloads from your Storage account.</span></span> <span data-ttu-id="f187d-122">A medida que se complete cada tarea, puede cargar su resultado a Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f187d-122">As each task completes, it can upload its output to Azure Storage.</span></span>
6. <span data-ttu-id="f187d-123">Supervise el progreso del trabajo y recupere el resultado de la tarea de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f187d-123">Monitor job progress and retrieve the task output from Azure Storage.</span></span>

<span data-ttu-id="f187d-124">Las secciones siguientes tratan estos, y otros, recursos de Batch que permitirán que haya un escenario de cálculo distribuido.</span><span class="sxs-lookup"><span data-stu-id="f187d-124">The following sections discuss these and the other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="f187d-125">Necesitará una [cuenta de Batch](#account) para utilizar este servicio.</span><span class="sxs-lookup"><span data-stu-id="f187d-125">You need a [Batch account](#account) to use the Batch service.</span></span> <span data-ttu-id="f187d-126">Casi todas las soluciones de Batch usan una cuenta de [Azure Storage][azure_storage] para el almacenamiento y la recuperación de archivos.</span><span class="sxs-lookup"><span data-stu-id="f187d-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="f187d-127">Actualmente, Batch solo admite el tipo de cuenta de almacenamiento **de uso general**, como se describe en el paso 5 de la sección [Crear una cuenta de almacenamiento](../storage/common/storage-create-storage-account.md#create-a-storage-account) del artículo [Acerca de las cuentas de almacenamiento de Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-127">Batch currently supports only the **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="f187d-128">Recursos del servicio Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-128">Batch service resources</span></span>
<span data-ttu-id="f187d-129">Algunos de los siguientes recursos son necesarios para todas las soluciones que usan el servicio Batch: cuentas, nodos de proceso, grupos, trabajos, tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-129">Some of the following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use the Batch service.</span></span> <span data-ttu-id="f187d-130">Otros, como las programaciones de los trabajos y los paquetes de aplicación, son características útiles, pero opcionales.</span><span class="sxs-lookup"><span data-stu-id="f187d-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="f187d-131">Cuenta</span><span class="sxs-lookup"><span data-stu-id="f187d-131">Account</span></span>](#account)
* [<span data-ttu-id="f187d-132">Nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="f187d-133">Grupo</span><span class="sxs-lookup"><span data-stu-id="f187d-133">Pool</span></span>](#pool)
* [<span data-ttu-id="f187d-134">Trabajo</span><span class="sxs-lookup"><span data-stu-id="f187d-134">Job</span></span>](#job)

  * [<span data-ttu-id="f187d-135">Programaciones del trabajo</span><span class="sxs-lookup"><span data-stu-id="f187d-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="f187d-136">Task</span><span class="sxs-lookup"><span data-stu-id="f187d-136">Task</span></span>](#task)

  * [<span data-ttu-id="f187d-137">Tarea de inicio</span><span class="sxs-lookup"><span data-stu-id="f187d-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="f187d-138">Tareas del Administrador de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="f187d-139">Tareas de preparación y liberación de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="f187d-140">Tarea de instancias múltiples (MPI)</span><span class="sxs-lookup"><span data-stu-id="f187d-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="f187d-141">Dependencias de las tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="f187d-142">Paquetes de aplicación</span><span class="sxs-lookup"><span data-stu-id="f187d-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="f187d-143">Cuenta</span><span class="sxs-lookup"><span data-stu-id="f187d-143">Account</span></span>
<span data-ttu-id="f187d-144">Una cuenta de Batch es una entidad identificada de forma exclusiva en el servicio Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-144">A Batch account is a uniquely identified entity within the Batch service.</span></span> <span data-ttu-id="f187d-145">Todo el procesamiento se asocia con una cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="f187d-146">Puede crear una cuenta de Azure Batch mediante [Azure Portal](batch-account-create-portal.md) o mediante programación, como con la [biblioteca .NET de administración de lotes](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-146">You can create an Azure Batch account using the [Azure portal](batch-account-create-portal.md) or programmatically, such as with the [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="f187d-147">Al crear la cuenta, puede asociar una cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="f187d-147">When creating the account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="f187d-148">Modo de asignación de grupos</span><span class="sxs-lookup"><span data-stu-id="f187d-148">Pool allocation mode</span></span>

<span data-ttu-id="f187d-149">Cuando se crea una cuenta de Batch, puede especificar cómo se asignan los [grupos](#pool) de nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="f187d-150">Puede asignar los grupos de nodos de proceso en una suscripción administrada por Azure Batch, o bien puede asignarlos en su propia suscripción.</span><span class="sxs-lookup"><span data-stu-id="f187d-150">You can choose to allocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="f187d-151">La propiedad *pool allocation mode* de la cuenta determina qué grupos se asignan.</span><span class="sxs-lookup"><span data-stu-id="f187d-151">The *pool allocation mode* property for the account determines where pools are allocated.</span></span> 

<span data-ttu-id="f187d-152">Para decidir qué modo de asignación de grupos va a utilizar, piense cuál se adapta mejor a su escenario:</span><span class="sxs-lookup"><span data-stu-id="f187d-152">To decide which pool allocation mode to use, consider which best fits your scenario:</span></span>

* <span data-ttu-id="f187d-153">**Servicio Batch**: Servicio Batch es el modo de asignación de grupos predeterminado, que asigna los grupos en segundo plano en suscripciones administradas por Azure.</span><span class="sxs-lookup"><span data-stu-id="f187d-153">**Batch Service**: Batch Service is the default pool allocation mode, in which pools are allocated behind the scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="f187d-154">Tenga en cuenta estos puntos clave acerca del modo de asignación de grupos Servicio Batch:</span><span class="sxs-lookup"><span data-stu-id="f187d-154">Keep in mind these key points about the Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="f187d-155">El modo de asignación de grupos Servicio Batch admite grupos de Cloud Services y de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f187d-155">The Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="f187d-156">El modo de asignación de grupos Servicio Batch admite la autenticación de clave compartida o la [autenticación de Azure Active Directory](batch-aad-auth.md) (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="f187d-156">The Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="f187d-157">Puede usar nodos de proceso dedicados o de baja prioridad en grupos asignados con el modo de asignación de grupos Servicio Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-157">You can use either dedicated or low-priority compute nodes in pools allocated with the Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="f187d-158">No use el modo de asignación de grupos Servicio Batch si tiene previsto crear grupos de máquinas virtuales de Azure a partir de imágenes de máquinas virtuales personalizadas o si prevé utilizar una red virtual.</span><span class="sxs-lookup"><span data-stu-id="f187d-158">Do not use the Batch Service pool allocation mode if you plan to create Azure virtual machine pools from custom VM images, or if you plan to use a virtual network.</span></span> <span data-ttu-id="f187d-159">En su lugar, cree la cuenta con el modo de asignación de grupos Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-159">Create your account with the User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="f187d-160">Los grupos de máquinas virtuales aprovisionados en una cuenta creada con el modo de asignación de grupos Servicio Batch se deben crear a partir de imágenes de [Azure Virtual Machines Marketplace][ vm_marketplace].</span><span class="sxs-lookup"><span data-stu-id="f187d-160">Virtual Machine pools provisioned in an account created with the Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="f187d-161">**Suscripción de usuario**: con el modo de asignación de grupos Suscripción de usuario, los grupos de Batch se asignan en la suscripción de Azure donde se crea la cuenta.</span><span class="sxs-lookup"><span data-stu-id="f187d-161">**User subscription**: With the User Subscription pool allocation mode, Batch pools are allocated in the Azure subscription where the account is created.</span></span> <span data-ttu-id="f187d-162">Tenga en cuenta estos puntos clave acerca del modo de asignación de grupos Suscripción de usuario:</span><span class="sxs-lookup"><span data-stu-id="f187d-162">Keep in mind these key points about the User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="f187d-163">El modo de asignación de grupos Suscripción de usuario solo admite grupos de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f187d-163">The User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="f187d-164">No admite grupos de Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="f187d-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="f187d-165">Para crear grupos de máquinas virtuales a partir de imágenes de máquinas virtuales personalizadas o para usar una red virtual con grupos de máquinas virtuales, debe usar el modo de asignación de grupos Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-165">To create Virtual Machine pools from custom VM images or to use a virtual network with Virtual Machine pools, you must use the User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="f187d-166">Debe usar la [autenticación de Azure Active Directory](batch-aad-auth.md) con los grupos que se asignan en la suscripción del usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in the user subscription.</span></span> 
    - <span data-ttu-id="f187d-167">Debe configurar un almacén de claves de Azure para su cuenta de Batch si el modo de asignación de grupos se establece en Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-167">You must set up an Azure key vault for your Batch account if the pool allocation mode is set to User Subscription.</span></span> 
    - <span data-ttu-id="f187d-168">Solo puede usar nodos de proceso dedicados en grupos en una cuenta creada con el modo de asignación de grupos Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-168">You can use only dedicated compute nodes in pools in an account created with the User Subscription pool allocation mode.</span></span> <span data-ttu-id="f187d-169">No se admiten nodos de prioridad baja.</span><span class="sxs-lookup"><span data-stu-id="f187d-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="f187d-170">Los grupos de máquinas virtuales aprovisionados en una cuenta con el modo de asignación de grupos Suscripción de usuario se deben crear a partir de imágenes de [Azure Virtual Machines Marketplace][ vm_marketplace] o a partir de las imágenes personalizadas que proporcione.</span><span class="sxs-lookup"><span data-stu-id="f187d-170">Virtual Machine pools provisioned in an account with the User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="f187d-171">En la tabla siguiente se comparan los modos de asignación de grupos Servicio Batch y Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-171">The following table compares the Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="f187d-172">**Modo de asignación de grupos**</span><span class="sxs-lookup"><span data-stu-id="f187d-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="f187d-173">**Servicio Batch**</span><span class="sxs-lookup"><span data-stu-id="f187d-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="f187d-174">**Suscripción de usuario**</span><span class="sxs-lookup"><span data-stu-id="f187d-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="f187d-175">**Los grupos se asignan en**</span><span class="sxs-lookup"><span data-stu-id="f187d-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="f187d-176">Una suscripción administrada por Azure</span><span class="sxs-lookup"><span data-stu-id="f187d-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="f187d-177">La suscripción del usuario donde se crea la cuenta de Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-177">The user subscription in which the Batch account is created</span></span>                        |
| <span data-ttu-id="f187d-178">**Configuraciones admitidas**</span><span class="sxs-lookup"><span data-stu-id="f187d-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="f187d-179">Configuración de servicio en la nube</span><span class="sxs-lookup"><span data-stu-id="f187d-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="f187d-180">Configuración de máquina virtual (Linux y Windows)</span><span class="sxs-lookup"><span data-stu-id="f187d-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="f187d-181">Configuración de máquina virtual (Linux y Windows)</span><span class="sxs-lookup"><span data-stu-id="f187d-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="f187d-182">**Imágenes de máquina virtual admitidas**</span><span class="sxs-lookup"><span data-stu-id="f187d-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="f187d-183">Imágenes de Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="f187d-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="f187d-184">Imágenes de Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="f187d-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="f187d-185">Imágenes personalizadas</span><span class="sxs-lookup"><span data-stu-id="f187d-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="f187d-186">**Tipos de nodo de proceso admitidos**</span><span class="sxs-lookup"><span data-stu-id="f187d-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="f187d-187">Nodos dedicados</span><span class="sxs-lookup"><span data-stu-id="f187d-187">Dedicated nodes</span></span></li><li><span data-ttu-id="f187d-188">Nodos de prioridad baja</span><span class="sxs-lookup"><span data-stu-id="f187d-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="f187d-189">Nodos dedicados</span><span class="sxs-lookup"><span data-stu-id="f187d-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="f187d-190">**Autenticación admitida**</span><span class="sxs-lookup"><span data-stu-id="f187d-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="f187d-191">Clave compartida</span><span class="sxs-lookup"><span data-stu-id="f187d-191">Shared Key</span></span></li><li><span data-ttu-id="f187d-192">Azure AD</span><span class="sxs-lookup"><span data-stu-id="f187d-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="f187d-193">Azure AD</span><span class="sxs-lookup"><span data-stu-id="f187d-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="f187d-194">**Azure Key Vault requerido**</span><span class="sxs-lookup"><span data-stu-id="f187d-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="f187d-195">No</span><span class="sxs-lookup"><span data-stu-id="f187d-195">No</span></span>                                                                                                      | <span data-ttu-id="f187d-196">Sí</span><span class="sxs-lookup"><span data-stu-id="f187d-196">Yes</span></span>                                                                                |
| <span data-ttu-id="f187d-197">**Cuota de núcleos**</span><span class="sxs-lookup"><span data-stu-id="f187d-197">**Core quota**</span></span>                           | <span data-ttu-id="f187d-198">Determinado por la cuota de núcleos de Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="f187d-199">Determinado por la cuota de núcleos de la suscripción</span><span class="sxs-lookup"><span data-stu-id="f187d-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="f187d-200">**Compatibilidad con redes virtuales de Azure**</span><span class="sxs-lookup"><span data-stu-id="f187d-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="f187d-201">Grupos creados con la configuración del servicio en la nube</span><span class="sxs-lookup"><span data-stu-id="f187d-201">Pools created with the Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="f187d-202">Para los grupos creados con la configuración de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="f187d-202">Pools created with the Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="f187d-203">**Modelo de implementación de red virtual admitido**</span><span class="sxs-lookup"><span data-stu-id="f187d-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="f187d-204">Redes virtuales creadas con el modelo de implementación clásico</span><span class="sxs-lookup"><span data-stu-id="f187d-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="f187d-205">Redes virtuales creadas con el modelo de implementación clásico o de Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f187d-205">Vnets created with either the classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="f187d-206">Cuenta de almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="f187d-206">Azure Storage account</span></span>

<span data-ttu-id="f187d-207">La mayoría de las soluciones de Batch usan Azure Storage para almacenar los archivos de recursos y los archivos de salida.</span><span class="sxs-lookup"><span data-stu-id="f187d-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="f187d-208">Actualmente, Batch solo admite el tipo de cuenta de almacenamiento de uso general, como se describe en el paso 5 de la sección [Crear una cuenta de almacenamiento](../storage/common/storage-create-storage-account.md#create-a-storage-account) del artículo [Acerca de las cuentas de almacenamiento de Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-208">Batch currently supports only the general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="f187d-209">Las tareas de Batch (incluidas las tareas estándar, las de inicio, las de preparación de trabajos y las de liberación de trabajos) deben especificar archivos de recursos que residan en cuentas de almacenamiento de uso general.</span><span class="sxs-lookup"><span data-stu-id="f187d-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="f187d-210">Nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-210">Compute node</span></span>
<span data-ttu-id="f187d-211">Un nodo de proceso es una máquina virtual de Azure o una máquina virtual de servicio en la nube dedicada al proceso de una parte de la carga de trabajo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f187d-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated to processing a portion of your application's workload.</span></span> <span data-ttu-id="f187d-212">El tamaño de un nodo determina el número de núcleos de CPU, la capacidad de memoria y el tamaño del sistema de archivos local que se asignan al nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-212">The size of a node determines the number of CPU cores, memory capacity, and local file system size that is allocated to the node.</span></span> <span data-ttu-id="f187d-213">Puede crear grupos de nodos de Windows o Linux mediante Azure Cloud Services, imágenes de [Azure Virtual Machines Marketplace][vm_marketplace] o imágenes personalizadas que prepare.</span><span class="sxs-lookup"><span data-stu-id="f187d-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from the [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="f187d-214">Consulte la sección [Grupo](#pool) a continuación para más información sobre estas opciones.</span><span class="sxs-lookup"><span data-stu-id="f187d-214">See the following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="f187d-215">Los nodos pueden ejecutar cualquier archivo ejecutable o script compatible con el entorno de sistema operativo del nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-215">Nodes can run any executable or script that is supported by the operating system environment of the node.</span></span> <span data-ttu-id="f187d-216">Esto incluye scripts \*.exe, \*.cmd, \*.bat y de PowerShell para Windows, además de archivos binarios y scripts de shell y de Python para Linux.</span><span class="sxs-lookup"><span data-stu-id="f187d-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="f187d-217">Todos los nodos de proceso en Batch también incluyen:</span><span class="sxs-lookup"><span data-stu-id="f187d-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="f187d-218">Una [estructura de carpetas](#files-and-directories) estándar y [variables de entorno](#environment-settings-for-tasks) asociadas, disponibles para que las tareas hagan referencia a ellas.</span><span class="sxs-lookup"><span data-stu-id="f187d-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="f187d-219">**firewall** para controlar el acceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-219">**Firewall** settings that are configured to control access.</span></span>
* <span data-ttu-id="f187d-220">[Acceso remoto](#connecting-to-compute-nodes) a nodos de Windows (Protocolo de escritorio remoto (RDP)) y nodos de Linux (Secure Shell (SSH)).</span><span class="sxs-lookup"><span data-stu-id="f187d-220">[Remote access](#connecting-to-compute-nodes) to both Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="f187d-221">grupo</span><span class="sxs-lookup"><span data-stu-id="f187d-221">Pool</span></span>
<span data-ttu-id="f187d-222">Un grupo es una colección de nodos en la que se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f187d-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="f187d-223">El usuario lo puede crear manualmente, o bien el servicio Batch lo crea automáticamente cuando se especifica el trabajo que se debe realizar.</span><span class="sxs-lookup"><span data-stu-id="f187d-223">The pool can be created manually by you, or automatically by the Batch service when you specify the work to be done.</span></span> <span data-ttu-id="f187d-224">Puede crear y administrar un grupo que satisfaga los requisitos de recursos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="f187d-224">You can create and manage a pool that meets the resource requirements of your application.</span></span> <span data-ttu-id="f187d-225">Un grupo solo se puede usar con la cuenta de Batch en la que se creó.</span><span class="sxs-lookup"><span data-stu-id="f187d-225">A pool can be used only by the Batch account in which it was created.</span></span> <span data-ttu-id="f187d-226">Una cuenta de Batch puede tener más de un grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="f187d-227">Los grupos de Azure Batch se basan en la plataforma de proceso principal de Azure.</span><span class="sxs-lookup"><span data-stu-id="f187d-227">Azure Batch pools build on top of the core Azure compute platform.</span></span> <span data-ttu-id="f187d-228">y proporcionan asignación a gran escala, instalación de aplicaciones, distribución de datos, supervisión de estado y ajuste flexible del número de nodos de proceso en un grupo ([escalado](#scaling-compute-resources)).</span><span class="sxs-lookup"><span data-stu-id="f187d-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of the number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="f187d-229">A cada nodo que se agrega a un grupo se le asigna un nombre y una dirección IP únicos.</span><span class="sxs-lookup"><span data-stu-id="f187d-229">Every node that is added to a pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="f187d-230">Cuando se quita un nodo de un grupo, los cambios realizados en el sistema operativo o los archivos se pierden, y su nombre y dirección IP se liberan para usarlos en un futuro.</span><span class="sxs-lookup"><span data-stu-id="f187d-230">When a node is removed from a pool, any changes that are made to the operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="f187d-231">Cuando un nodo abandona un grupo, su vigencia finaliza.</span><span class="sxs-lookup"><span data-stu-id="f187d-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="f187d-232">Cuando se crea un grupo, puede especificar los siguientes atributos:</span><span class="sxs-lookup"><span data-stu-id="f187d-232">When you create a pool, you can specify the following attributes.</span></span> <span data-ttu-id="f187d-233">Algunas opciones de configuración difieren, según el modo de asignación de grupo de la [cuenta](#account) de Batch:</span><span class="sxs-lookup"><span data-stu-id="f187d-233">Some settings differ, depending on the pool allocation mode of the Batch [account](#account):</span></span>

- <span data-ttu-id="f187d-234">Sistema operativo y versión de nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-234">Compute node operating system and version</span></span>
- <span data-ttu-id="f187d-235">Tipo de nodo de proceso y número de nodos de destino</span><span class="sxs-lookup"><span data-stu-id="f187d-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="f187d-236">Tamaño de los nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-236">Size of the compute nodes</span></span>
- <span data-ttu-id="f187d-237">Directiva de escalado</span><span class="sxs-lookup"><span data-stu-id="f187d-237">Scaling policy</span></span>
- <span data-ttu-id="f187d-238">Directiva de programación de tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-238">Task scheduling policy</span></span>
- <span data-ttu-id="f187d-239">Estado de comunicación para nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="f187d-240">Tareas de inicio para nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="f187d-241">paquetes de aplicación</span><span class="sxs-lookup"><span data-stu-id="f187d-241">Application packages</span></span>
- <span data-ttu-id="f187d-242">Network configuration (Configuración de red)</span><span class="sxs-lookup"><span data-stu-id="f187d-242">Network configuration</span></span>

<span data-ttu-id="f187d-243">Cada uno de estos valores se describe con más detalle en las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="f187d-243">Each of these settings is described in more detail in the following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f187d-244">Las cuentas de Batch creadas con el modo de asignación de grupos Servicio Batch tienen una cuota predeterminada que limita el número de núcleos en una cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-244">Batch accounts created with the Batch Service pool allocation mode have a default quota that limits the number of cores in a Batch account.</span></span> <span data-ttu-id="f187d-245">El número de núcleos corresponde al número de nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-245">The number of cores corresponds to the number of compute nodes.</span></span> <span data-ttu-id="f187d-246">Tanto las cuotas predeterminadas como las instrucciones para [aumentar una cuota](batch-quota-limit.md#increase-a-quota) se pueden encontrar en [Límites y cuotas del servicio de Batch de Azure](batch-quota-limit.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-246">You can find the default quotas and instructions on how to [increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for the Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="f187d-247">Si el grupo no está consiguiendo su número de nodos de destino, la causa podría ser la cuota básica.</span><span class="sxs-lookup"><span data-stu-id="f187d-247">If your pool is not achieving its target number of nodes, the core quota might be the reason.</span></span>
>
><span data-ttu-id="f187d-248">Las cuentas de Batch que se crean con el modo de asignación de grupos Suscripción de usuario no tienen en cuenta las cuotas del servicio Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-248">Batch accounts created with the User Subscription pool allocation mode do not observe the Batch service quotas.</span></span> <span data-ttu-id="f187d-249">En su lugar, comparten la cuota básica de la suscripción especificada.</span><span class="sxs-lookup"><span data-stu-id="f187d-249">Instead, they share in the core quota for the specified subscription.</span></span> <span data-ttu-id="f187d-250">Para más información, consulte [Límites de Virtual Machines](../azure-subscription-service-limits.md#virtual-machines-limits) en [Límites, cuotas y restricciones de suscripción y servicios de Microsoft Azure](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="f187d-251">Sistema operativo y versión de nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-251">Compute node operating system and version</span></span>

<span data-ttu-id="f187d-252">Al crear un grupo de Batch, puede especificar la configuración de máquina virtual de Azure y el tipo de sistema operativo que desea ejecutar en cada nodo de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-252">When you create a Batch pool, you can specify the Azure virtual machine configuration and the type of operating system you want to run on each compute node in the pool.</span></span> <span data-ttu-id="f187d-253">Los dos tipos de configuraciones disponibles en Batch son:</span><span class="sxs-lookup"><span data-stu-id="f187d-253">The two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="f187d-254">La **configuración de máquina virtual**, que especifica que el grupo está formado por máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="f187d-254">The **Virtual Machine Configuration**, which specifies that the pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="f187d-255">Estas máquinas virtuales pueden crearse a partir de imágenes de Linux o Windows.</span><span class="sxs-lookup"><span data-stu-id="f187d-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="f187d-256">Cuando crea un grupo basado en la configuración de máquina virtual, debe especificar no solo el tamaño de los nodos y el origen de las imágenes utilizadas para crearlos, sino también la **referencia de la imagen de máquina virtual** y la **SKU del agente de nodo** de Batch que desea instalar en los nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-256">When you create a pool based on the Virtual Machine Configuration, you must specify not only the size of the nodes and the source of the images used to create them, but also the **virtual machine image reference** and the Batch **node agent SKU** to be installed on the nodes.</span></span> <span data-ttu-id="f187d-257">Para más información sobre cómo especificar estas propiedades del grupo, consulte [Aprovisionamiento de nodos de proceso de Linux en grupos del servicio Azure Batch](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="f187d-258">La **configuración de Cloud Services**, que especifica que el grupo está formado por nodos de Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="f187d-258">The **Cloud Services Configuration**, which specifies that the pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="f187d-259">Cloud Services proporciona *solo* nodos de proceso Windows.</span><span class="sxs-lookup"><span data-stu-id="f187d-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="f187d-260">La lista de los sistemas operativos disponibles para los grupos de configuración de Cloud Services aparece en [Matriz de compatibilidad del SDK y versiones del SO invitado de Azure](../cloud-services/cloud-services-guestos-update-matrix.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-260">Available operating systems for Cloud Services Configuration pools are listed in the [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="f187d-261">Cuando crea un grupo que contiene nodos de Cloud Services, debe especificar el tamaño del nodo y su *familia de sistema operativo*.</span><span class="sxs-lookup"><span data-stu-id="f187d-261">When you create a pool that contains Cloud Services nodes, you need to specify the node size and its *OS Family*.</span></span> <span data-ttu-id="f187d-262">Cloud Services se implementa en Azure de forma más rápida que las máquinas virtuales que ejecutan Windows.</span><span class="sxs-lookup"><span data-stu-id="f187d-262">Cloud Services are deployed to Azure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="f187d-263">Si desea grupos de nodos de proceso Windows, es posible que Cloud Services proporcione una mejora en el rendimiento en términos de tiempo de implementación.</span><span class="sxs-lookup"><span data-stu-id="f187d-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="f187d-264">La *familia de sistema operativo* también determina qué versiones de .NET se instalan con el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="f187d-264">The *OS Family* also determines which versions of .NET are installed with the OS.</span></span>
    * <span data-ttu-id="f187d-265">Al igual que con los roles de trabajo en Cloud Services, es posible especificar la *versión del sistema operativo* (para más información sobre los roles de trabajo, consulte la sección [Información sobre Cloud Services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) en la [introducción a Cloud Services](../cloud-services/cloud-services-choose-me.md)).</span><span class="sxs-lookup"><span data-stu-id="f187d-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see the [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in the [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="f187d-266">Como con los roles de trabajo, se recomienda que se especifique `*` para la *versión del sistema operativo* de forma que los nodos se actualicen automáticamente; así no es necesario realizar ningún trabajo para las versiones recién publicadas.</span><span class="sxs-lookup"><span data-stu-id="f187d-266">As with worker roles, we recommend that you specify `*` for the *OS Version* so that the nodes are automatically upgraded, and there is no work required to cater to newly released versions.</span></span> <span data-ttu-id="f187d-267">El principal caso de uso para seleccionar una versión específica del sistema operativo es asegurarse de la compatibilidad de las aplicaciones; debe ser posible realizar pruebas de compatibilidad con versiones anteriores antes de permitir la actualización de la versión.</span><span class="sxs-lookup"><span data-stu-id="f187d-267">The primary use case for selecting a specific OS version is to ensure application compatibility, which allows backward compatibility testing to be performed before allowing the version to be updated.</span></span> <span data-ttu-id="f187d-268">Después de la validación, se puede actualizar la *versión del sistema operativo* para el grupo e instalar la nueva imagen del sistema operativo. Cualquier tarea en ejecución se interrumpirá y se volverá a poner en cola.</span><span class="sxs-lookup"><span data-stu-id="f187d-268">After validation, the *OS Version* for the pool can be updated and the new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="f187d-269">Cuando crea un grupo, debe seleccionar la opción **nodeAgentSkuId** apropiada, en función del sistema operativo de la imagen base de su VHD.</span><span class="sxs-lookup"><span data-stu-id="f187d-269">When you create a pool, you need to select the appropriate **nodeAgentSkuId**, depending on the OS of the base image of your VHD.</span></span> <span data-ttu-id="f187d-270">Puede obtener una asignación de identificadores de SKU de agentes de nodos disponibles a sus referencias de imágenes del sistema operativo mediante una llamada a la operación [List supported node agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) (Lista de SKU admitidas de agentes de nodos).</span><span class="sxs-lookup"><span data-stu-id="f187d-270">You can get a mapping of available node agent SKU ID's to their OS Image references by calling the [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="f187d-271">Consulte la sección [Cuenta](#account) para obtener información acerca de cómo establecer el modo de asignación del grupo al crear una cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-271">See the [Account](#account) section for information on setting the pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="f187d-272">Imágenes personalizadas de grupos de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="f187d-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="f187d-273">Para utilizar imágenes personalizadas para aprovisionar los grupos de máquinas virtuales, cree la cuenta de Batch con el modo de asignación de grupos Suscripción de usuario.</span><span class="sxs-lookup"><span data-stu-id="f187d-273">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription pool allocation mode.</span></span> <span data-ttu-id="f187d-274">Con este modo, los grupos de Batch se asignan en la suscripción en la que reside la cuenta.</span><span class="sxs-lookup"><span data-stu-id="f187d-274">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="f187d-275">Consulte la sección [Cuenta](#account) para obtener información acerca de cómo establecer el modo de asignación del grupo al crear una cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-275">See the [Account](#account) section for information on setting the pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="f187d-276">Para utilizar una imagen personalizada, debe generalizarla para prepararla.</span><span class="sxs-lookup"><span data-stu-id="f187d-276">To use a custom image, you'll need to prepare the image by generalizing it.</span></span> <span data-ttu-id="f187d-277">Para más información acerca de cómo preparar imágenes personalizadas de Linux desde máquinas virtuales de Azure, consulte [Captura de una máquina virtual Linux para usarla como una plantilla](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM to use as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="f187d-278">Para más información acerca de cómo preparar imágenes de Windows personalizadas a partir de máquinas virtuales de Azure, consulte [Crear imágenes de máquina virtual personalizadas con Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="f187d-279">Al preparar la imagen personalizada, tenga en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f187d-279">When preparing your custom image, keep in mind the following:</span></span>
> - <span data-ttu-id="f187d-280">Asegúrese de que la imagen del sistema operativo base que se use para aprovisionar los grupos de Batch no tenga extensiones de Azure preinstaladas, como la extensión de script personalizado.</span><span class="sxs-lookup"><span data-stu-id="f187d-280">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="f187d-281">Si la imagen contiene una extensión preinstalada, Azure podría experimentar problemas al implementar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f187d-281">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="f187d-282">Asegúrese de que la imagen del sistema operativo base proporcionada usa la unidad temporal predeterminada, porque el agente de nodo de Batch espera la unidad temporal predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f187d-282">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="f187d-283">Para crear un grupo de configuración de máquinas virtuales con una imagen personalizada, necesitará una o varias cuentas de Azure Storage estándares para almacenar imágenes VHD personalizadas.</span><span class="sxs-lookup"><span data-stu-id="f187d-283">To create a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts to store your custom VHD images.</span></span> <span data-ttu-id="f187d-284">Las imágenes personalizadas se almacenan como blobs.</span><span class="sxs-lookup"><span data-stu-id="f187d-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="f187d-285">Para hacer referencia a sus imágenes personalizadas al crear un grupo, especifique los URI de los blobs VHD de imágenes personalizadas para la propiedad [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) de la propiedad [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf).</span><span class="sxs-lookup"><span data-stu-id="f187d-285">To reference your custom images when you create a pool, specify the URIs of the custom image VHD blobs for the [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of the [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="f187d-286">Asegúrese de que las cuentas de almacenamiento cumplen los criterios siguientes:</span><span class="sxs-lookup"><span data-stu-id="f187d-286">Make sure that your storage accounts meet the following criteria:</span></span>   

- <span data-ttu-id="f187d-287">Las cuentas de almacenamiento que contienen los blobs VHD de imágenes personalizadas deben estar en la misma suscripción que la cuenta de Batch (la suscripción de usuario).</span><span class="sxs-lookup"><span data-stu-id="f187d-287">The storage accounts containing the custom image VHD blobs need to be in the same subscription as the Batch account (the user subscription).</span></span>
- <span data-ttu-id="f187d-288">Las cuentas de almacenamiento especificadas deben estar en la misma región que la cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-288">The specified storage accounts need to be in the same region as the Batch account.</span></span>
- <span data-ttu-id="f187d-289">Actualmente, solo se admiten las cuentas de almacenamiento estándar de uso general.</span><span class="sxs-lookup"><span data-stu-id="f187d-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="f187d-290">En un futuro, se admitirá Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f187d-290">Azure Premium storage will be supported in the future.</span></span>
- <span data-ttu-id="f187d-291">Puede especificar una cuenta de almacenamiento con varios blobs VHD personalizados o varias cuentas de almacenamiento, que tenga cada una un único blob.</span><span class="sxs-lookup"><span data-stu-id="f187d-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="f187d-292">Se recomienda usar varias cuentas de almacenamiento para obtener un mejor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f187d-292">We recommend you to use multiple storage accounts to get a better performance.</span></span>
- <span data-ttu-id="f187d-293">Un único blob VHD de imágenes personalizadas puede admitir hasta 40 instancias de máquinas virtuales Linux o 20 instancias de máquinas virtuales Windows.</span><span class="sxs-lookup"><span data-stu-id="f187d-293">One unique custom image VHD blob can support up to 40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="f187d-294">Deberá crear copias del blob VHD para crear grupos con más máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f187d-294">You will need to create copies of the VHD blob to create pools with more VMs.</span></span> <span data-ttu-id="f187d-295">Por ejemplo, un grupo con 200 máquinas virtuales Windows necesita 10 blobs VHD únicos especificados para la propiedad **osDisk**.</span><span class="sxs-lookup"><span data-stu-id="f187d-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for the **osDisk** property.</span></span>

<span data-ttu-id="f187d-296">Para crear un grupo a partir de una imagen personalizada mediante Azure Portal:</span><span class="sxs-lookup"><span data-stu-id="f187d-296">To create a pool from a custom image using the Azure portal:</span></span>

1. <span data-ttu-id="f187d-297">Vaya a la cuenta de Batch en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f187d-297">Navigate to your Batch account in the Azure portal.</span></span>
2. <span data-ttu-id="f187d-298">En la hoja **Configuración**, seleccione el elemento de menú **Grupos**.</span><span class="sxs-lookup"><span data-stu-id="f187d-298">On the **Settings** blade, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="f187d-299">En la hoja **Grupos**, seleccione el comando **Agregar**, tras lo que aparecerá la hoja **Agregar grupo**.</span><span class="sxs-lookup"><span data-stu-id="f187d-299">On the **Pools** blade, select the **Add** command; the **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="f187d-300">Seleccione **Imagen personalizada (Linux/Windows)** en la lista desplegable **Tipo de imagen**.</span><span class="sxs-lookup"><span data-stu-id="f187d-300">Select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="f187d-301">El portal muestra el selector **Imagen personalizada**.</span><span class="sxs-lookup"><span data-stu-id="f187d-301">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="f187d-302">Elija uno o más VHD en el mismo contenedor y haga clic en el botón **Seleccionar**.</span><span class="sxs-lookup"><span data-stu-id="f187d-302">Choose one or more VHDs from the same container and click the **Select** button.</span></span> 
    <span data-ttu-id="f187d-303">En el futuro, se agregará compatibilidad con varios VHD de diferentes cuentas de almacenamiento y contenedores.</span><span class="sxs-lookup"><span data-stu-id="f187d-303">Support for multiple VHDs from different storage accounts and different containers will be added in the future.</span></span>
5. <span data-ttu-id="f187d-304">Seleccione el valor correcto de **Publicador/Oferta/SKU** para los VHD personalizados, elija el modo de **Almacenamiento en caché** que desee y rellene el resto de los parámetros para el grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-304">Select the correct **Publisher/Offer/Sku** for your custom VHDs, select the desired **Caching** mode, then fill in all the other parameters for the pool.</span></span>
6. <span data-ttu-id="f187d-305">Para comprobar si un grupo se basa en una imagen personalizada, vea la propiedad **Operating System** en la sección del resumen de recursos de la hoja **Grupo**.</span><span class="sxs-lookup"><span data-stu-id="f187d-305">To check if a pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** blade.</span></span> <span data-ttu-id="f187d-306">El valor de esta propiedad debe ser **Custom VM image**.</span><span class="sxs-lookup"><span data-stu-id="f187d-306">The value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="f187d-307">Todos los VHD personalizados asociados a un grupo se muestran en la hoja **Propiedades** del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-307">All custom VHDs associated with a pool are displayed on the pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="f187d-308">Tipo de nodo de proceso y número de nodos de destino</span><span class="sxs-lookup"><span data-stu-id="f187d-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="f187d-309">Al crear un grupo, puede especificar los tipos de nodos de proceso que le interesan y un número de destino para cada uno.</span><span class="sxs-lookup"><span data-stu-id="f187d-309">When you create a pool, you can specify which types of compute nodes you want and the target number for each.</span></span> <span data-ttu-id="f187d-310">Los dos tipos de nodos de proceso son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="f187d-310">The two types of compute nodes are:</span></span>

- <span data-ttu-id="f187d-311">**Nodos de proceso dedicados.**</span><span class="sxs-lookup"><span data-stu-id="f187d-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="f187d-312">Los nodos de proceso dedicados están reservados para las cargas de trabajo que usted tenga.</span><span class="sxs-lookup"><span data-stu-id="f187d-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="f187d-313">Son más caros que los nodos de prioridad baja, pero se garantiza que nunca se verán reemplazados.</span><span class="sxs-lookup"><span data-stu-id="f187d-313">They are more expensive than low-priority nodes, but they are guaranteed to never be preempted.</span></span>

- <span data-ttu-id="f187d-314">**Nodos de proceso de prioridad baja.**</span><span class="sxs-lookup"><span data-stu-id="f187d-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="f187d-315">Los nodos de prioridad baja aprovechan la capacidad sobrante en Azure para ejecutar las cargas de trabajo de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-315">Low-priority nodes take advantage of surplus capacity in Azure to run your Batch workloads.</span></span> <span data-ttu-id="f187d-316">Los nodos de prioridad baja son menos costosos por hora que los nodos dedicados y habilitan las cargas de trabajo que requieren una gran potencia de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="f187d-317">Para obtener más información, vea [Use low-priority VMs with Batch](batch-low-pri-vms.md) (Usar máquinas virtuales de prioridad baja con Batch).</span><span class="sxs-lookup"><span data-stu-id="f187d-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="f187d-318">Los nodos de proceso de prioridad baja pueden verse reemplazados cuando Azure no tiene una capacidad sobrante suficiente.</span><span class="sxs-lookup"><span data-stu-id="f187d-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="f187d-319">Si se reemplaza un nodo mientras ejecuta tareas, las tareas se vuelven a poner en cola y se ejecutan de nuevo en cuanto está disponible un nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-319">If a node is preempted while running tasks, the tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="f187d-320">Los nodos de prioridad baja son una buena opción para las cargas de trabajo en las que el tiempo de finalización del trabajo es flexible y el trabajo se distribuye entre muchos nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-320">Low-priority nodes are a good option for workloads where the job completion time is flexible and the work is distributed across many nodes.</span></span> <span data-ttu-id="f187d-321">Antes de decidirse a usar nodos de prioridad baja para un escenario, asegúrese de que los trabajos perdidos debido a la preferencia sean mínimos y fáciles de volver a crear.</span><span class="sxs-lookup"><span data-stu-id="f187d-321">Before you decide to use low-priority nodes for your scenario, make sure that any work lost due to preemption will be minimal and easy to recreate.</span></span>

    <span data-ttu-id="f187d-322">Los nodos de proceso de prioridad baja solo están disponibles para las cuentas de Batch creadas con el modo de asignación de grupo establecido en **Servicio Batch**.</span><span class="sxs-lookup"><span data-stu-id="f187d-322">Low-priority compute nodes are available only for Batch accounts created with the pool allocation mode set to **Batch Service**.</span></span>

<span data-ttu-id="f187d-323">Puede tener nodos de proceso de prioridad baja y dedicados en el mismo grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-323">You can have both low-priority and dedicated compute nodes in the same pool.</span></span> <span data-ttu-id="f187d-324">Cada tipo de nodo (prioridad baja y dedicado) tiene su propia configuración de destino, para la que puede especificar el número deseado de nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify the desired number of nodes.</span></span> 
    
<span data-ttu-id="f187d-325">El número de nodos de proceso se conoce como *destino* porque, en algunas situaciones, es posible que el grupo no alcance el número deseado de nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-325">The number of compute nodes is referred to as a *target* because, in some situations, your pool might not reach the desired number of nodes.</span></span> <span data-ttu-id="f187d-326">Por ejemplo, un grupo podría no alcanzar el destino si alcanza primero la [cuota de núcleos](batch-quota-limit.md) de la cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-326">For example, a pool might not achieve the target if it reaches the [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="f187d-327">O bien, el grupo podría no alcanzar el destino si ha aplicado una fórmula de escalado automático al grupo que limita el número máximo de nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-327">Or, the pool might not achieve the target if you have applied an auto-scaling formula to the pool that limits the maximum number of nodes.</span></span>

<span data-ttu-id="f187d-328">Para obtener información sobre los precios de los nodos de proceso de prioridad baja y dedicados, vea [Precios de Batch](https://azure.microsoft.com/pricing/details/batch/).</span><span class="sxs-lookup"><span data-stu-id="f187d-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-the-compute-nodes"></a><span data-ttu-id="f187d-329">Tamaño de los nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-329">Size of the compute nodes</span></span>

<span data-ttu-id="f187d-330">**Configuración de Cloud Services** aparecen en [Tamaños de los servicios en la nube](../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="f187d-331">Batch admite todos los tamaños de Cloud Services excepto `ExtraSmall`, `STANDARD_A1_V2` y `STANDARD_A2_V2`.</span><span class="sxs-lookup"><span data-stu-id="f187d-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="f187d-332">Los tamaños de los nodos de proceso de la **configuración de máquina virtual** se muestran en [Tamaños de las máquinas virtuales Linux en Azure](../virtual-machines/linux/sizes.md) y [Tamaños de las máquinas virtuales Windows en Azure](../virtual-machines/windows/sizes.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="f187d-333">Batch admite todos los tamaños de máquina virtual de Azure excepto `STANDARD_A0` y aquellos con Premium Storage (series `STANDARD_GS`, `STANDARD_DS` y `STANDARD_DSV2`).</span><span class="sxs-lookup"><span data-stu-id="f187d-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="f187d-334">Al seleccionar un tamaño de nodo de proceso, tenga en cuenta las características y los requisitos de las aplicaciones que se van a ejecutar en los nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-334">When selecting a compute node size, consider the characteristics and requirements of the applications you'll run on the nodes.</span></span> <span data-ttu-id="f187d-335">Aspectos tales como si la aplicación es multiproceso y cuánta memoria consume pueden ayudar a determinar el tamaño de nodo más adecuado y rentable.</span><span class="sxs-lookup"><span data-stu-id="f187d-335">Aspects like whether the application is multithreaded and how much memory it consumes can help determine the most suitable and cost-effective node size.</span></span> <span data-ttu-id="f187d-336">Normalmente, se selecciona un tamaño de nodo bajo el supuesto de que se ejecutará una sola tarea en un nodo cada vez.</span><span class="sxs-lookup"><span data-stu-id="f187d-336">It's typical to select a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="f187d-337">No obstante, es posible [ejecutar en paralelo](batch-parallel-node-tasks.md) varias tareas y, por tanto, varias instancias de la aplicación, en varios nodos de proceso durante la ejecución del trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-337">However, it is possible to have multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="f187d-338">En este caso, es habitual elegir un tamaño de nodo más grande para acomodar el aumento de la demanda por la ejecución de tareas en paralelo.</span><span class="sxs-lookup"><span data-stu-id="f187d-338">In this case, it is common to choose a larger node size to accommodate the increased demand of parallel task execution.</span></span> <span data-ttu-id="f187d-339">Para más información, consulte [Directiva de programación de tareas](#task-scheduling-policy).</span><span class="sxs-lookup"><span data-stu-id="f187d-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="f187d-340">Todos los nodos de un grupo son del mismo tamaño.</span><span class="sxs-lookup"><span data-stu-id="f187d-340">All of the nodes in a pool are the same size.</span></span> <span data-ttu-id="f187d-341">Si va a ejecutar aplicaciones con requisitos del sistema o niveles de carga diferentes, es recomendable usar grupos separados.</span><span class="sxs-lookup"><span data-stu-id="f187d-341">If you intend to run applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="f187d-342">Directiva de escalado</span><span class="sxs-lookup"><span data-stu-id="f187d-342">Scaling policy</span></span>

<span data-ttu-id="f187d-343">Para cargas de trabajo dinámicas, puede escribir y aplicar una [fórmula de escalado automático](#scaling-compute-resources) a un grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) to a pool.</span></span> <span data-ttu-id="f187d-344">El servicio Batch evalúa periódicamente la fórmula y ajusta el número de nodos dentro del grupo en función de los diversos parámetros de grupo, trabajo y tarea que especifique.</span><span class="sxs-lookup"><span data-stu-id="f187d-344">The Batch service periodically evaluates your formula and adjusts the number of nodes within the pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="f187d-345">Directiva de programación de tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-345">Task scheduling policy</span></span>

<span data-ttu-id="f187d-346">La opción de configuración [Máximo de tareas por nodo](batch-parallel-node-tasks.md) determina la cantidad máxima de tareas que se pueden ejecutar en paralelo en cada nodo de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-346">The [max tasks per node](batch-parallel-node-tasks.md) configuration option determines the maximum number of tasks that can be run in parallel on each compute node within the pool.</span></span>

<span data-ttu-id="f187d-347">La configuración predeterminada especifica que se ejecuta una sola tarea al mismo tiempo en un nodo. Sin embargo, hay situaciones en las que resulta ventajoso que se ejecuten simultáneamente dos o más tareas en un nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-347">The default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial to have two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="f187d-348">Consulte el [escenario de ejemplo](batch-parallel-node-tasks.md#example-scenario) en el artículo sobre [tareas simultáneas de nodo](batch-parallel-node-tasks.md) para ver cómo puede beneficiarse de la ejecución de varias tareas por nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-348">See the [example scenario](batch-parallel-node-tasks.md#example-scenario) in the [concurrent node tasks](batch-parallel-node-tasks.md) article to see how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="f187d-349">También puede especificar un *tipo de relleno* que determina si el servicio Batch distribuye las tareas uniformemente entre todos los nodos de un grupo o llena cada uno con el número máximo de tareas antes de asignar tareas a otro.</span><span class="sxs-lookup"><span data-stu-id="f187d-349">You can also specify a *fill type* which determines whether Batch spreads the tasks evenly across all nodes in a pool, or packs each node with the maximum number of tasks before assigning tasks to another node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="f187d-350">Estado de comunicación para nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-350">Communication status for compute nodes</span></span>

<span data-ttu-id="f187d-351">En la mayoría de los escenarios, las tareas funcionan de forma independiente y no necesitan comunicarse entre sí.</span><span class="sxs-lookup"><span data-stu-id="f187d-351">In most scenarios, tasks operate independently and do not need to communicate with one another.</span></span> <span data-ttu-id="f187d-352">Sin embargo, hay algunas aplicaciones en las que las tareas deben comunicarse, como en los [escenarios MPI](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="f187d-353">Puede configurar un grupo que permita la **comunicación entre nodos**, de manera que los nodos de un grupo se puedan comunicar en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="f187d-353">You can configure a pool to allow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="f187d-354">Cuando se habilita la comunicación entre nodos, los nodos en grupos de configuración de Cloud Services pueden comunicarse entre sí en los puertos superiores a 1100, mientras que los grupos de configuración de máquina virtual no restringen el tráfico en ningún puerto.</span><span class="sxs-lookup"><span data-stu-id="f187d-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="f187d-355">Tenga en cuenta que habilitar la comunicación entre nodos también afecta a la colocación de los nodos dentro de los clústeres y puede limitar el número máximo de nodos en un grupo a causa de las restricciones de implementación.</span><span class="sxs-lookup"><span data-stu-id="f187d-355">Note that enabling internode communication also impacts the placement of the nodes within clusters and might limit the maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="f187d-356">Si la aplicación no requiere comunicación entre los nodos, el servicio Batch puede asignar un número potencialmente alto de nodos al grupo desde muchos clústeres y centros de datos diferentes para permitir el aumento de la potencia del procesamiento paralelo.</span><span class="sxs-lookup"><span data-stu-id="f187d-356">If your application does not require communication between nodes, the Batch service can allocate a potentially large number of nodes to the pool from many different clusters and datacenters to enable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="f187d-357">Tareas de inicio para nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="f187d-358">La *tarea de inicio* opcional se ejecuta en cada nodo cuando dicho nodo se une al grupo y cada vez que se reinicia un nodo o se restablece su imagen inicial.</span><span class="sxs-lookup"><span data-stu-id="f187d-358">The optional *start task* executes on each node as that node joins the pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="f187d-359">La tarea de inicio resulta especialmente útil para preparar los nodos de proceso para la ejecución de tareas, como la instalación de las aplicaciones que las tareas ejecutan en los nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-359">The start task is especially useful for preparing compute nodes for the execution of tasks, like installing the applications that your tasks run on the compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="f187d-360">paquetes de aplicación</span><span class="sxs-lookup"><span data-stu-id="f187d-360">Application packages</span></span>

<span data-ttu-id="f187d-361">Puede especificar los [paquetes de aplicación](#application-packages) que se implementarán en los nodos de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-361">You can specify [application packages](#application-packages) to deploy to the compute nodes in the pool.</span></span> <span data-ttu-id="f187d-362">Los paquetes de aplicación proporcionan una implementación simplificada y el control de las versiones de las aplicaciones que ejecutan las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-362">Application packages provide simplified deployment and versioning of the applications that your tasks run.</span></span> <span data-ttu-id="f187d-363">Los paquetes de aplicación que se especifiquen para un grupo se instalarán en todos los nodos que se unan al grupo cada vez que un nodo se reinicie o se restablezca la imagen inicial.</span><span class="sxs-lookup"><span data-stu-id="f187d-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="f187d-364">Los paquetes de aplicaciones se admiten en todos los grupos de Batch creados después del 5 de julio de 2017.</span><span class="sxs-lookup"><span data-stu-id="f187d-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="f187d-365">Se admiten en los grupos de Batch creados entre el 10 de marzo de 2016 y el 5 de julio de 2017 únicamente si el grupo se creó mediante una configuración de Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="f187d-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if the pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="f187d-366">Los grupos de Batch creados antes del 10 de marzo de 2016 no admiten los paquetes de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f187d-366">Batch pools created prior to 10 March 2016 do not support application packages.</span></span> <span data-ttu-id="f187d-367">Para más información sobre el uso de los paquetes de aplicación para implementar las aplicaciones en los nodos de Batch, consulte [Implementación de aplicaciones en nodos de proceso con paquetes de aplicaciones de Batch](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-367">For more information about using application packages to deploy your applications to your Batch nodes, see [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="f187d-368">Network configuration (Configuración de red)</span><span class="sxs-lookup"><span data-stu-id="f187d-368">Network configuration</span></span>

<span data-ttu-id="f187d-369">Puede especificar la subred de una [red virtual (VNet)](../virtual-network/virtual-networks-overview.md) de Azure en la que se deben crear los nodos de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-369">You can specify the subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which the pool's compute nodes should be created.</span></span> <span data-ttu-id="f187d-370">Consulte la sección [Configuración de la red del grupo](#pool-network-configuration) para más información.</span><span class="sxs-lookup"><span data-stu-id="f187d-370">See the [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="f187d-371">Trabajo</span><span class="sxs-lookup"><span data-stu-id="f187d-371">Job</span></span>
<span data-ttu-id="f187d-372">Un trabajo es una colección de tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-372">A job is a collection of tasks.</span></span> <span data-ttu-id="f187d-373">El trabajo administra cómo sus tareas realizan el cálculo en los nodos de proceso de un grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-373">It manages how computation is performed by its tasks on the compute nodes in a pool.</span></span>

* <span data-ttu-id="f187d-374">El trabajo especifica el **grupo** en el que se va a ejecutar el trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-374">The job specifies the **pool** in which the work is to be run.</span></span> <span data-ttu-id="f187d-375">Puede crear un grupo para cada trabajo o usar uno solo para muchos de ellos.</span><span class="sxs-lookup"><span data-stu-id="f187d-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="f187d-376">Puede crear un grupo para cada trabajo asociado con una programación de trabajo o para todos los trabajos asociados con ella.</span><span class="sxs-lookup"><span data-stu-id="f187d-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="f187d-377">Puede especificar una **prioridad del trabajo**opcional.</span><span class="sxs-lookup"><span data-stu-id="f187d-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="f187d-378">Cuando se envía un trabajo con una prioridad más alta que la de otros trabajos actualmente en curso, las tareas del trabajo de prioridad más alta se insertan en la cola por delante de las tareas del trabajo de prioridad más baja.</span><span class="sxs-lookup"><span data-stu-id="f187d-378">When a job is submitted with a higher priority than jobs that are currently in progress, the tasks for the higher-priority job are inserted into the queue ahead of tasks for the lower-priority jobs.</span></span> <span data-ttu-id="f187d-379">No adelantarán a las tareas de trabajos de prioridad más baja que ya estén en ejecución.</span><span class="sxs-lookup"><span data-stu-id="f187d-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="f187d-380">Puede utilizar **restricciones** de trabajo para fijar determinados límites para sus trabajos:</span><span class="sxs-lookup"><span data-stu-id="f187d-380">You can use job **constraints** to specify certain limits for your jobs:</span></span>

    <span data-ttu-id="f187d-381">Puede establecer un **tiempo de reloj máximo**, de modo que si un trabajo lleva más tiempo que el especificado, el trabajo y todas sus tareas se finalizarán.</span><span class="sxs-lookup"><span data-stu-id="f187d-381">You can set a **maximum wallclock time**, so that if a job runs for longer than the maximum wallclock time that is specified, the job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="f187d-382">Batch puede detectar tareas con errores y después volver a intentarlas.</span><span class="sxs-lookup"><span data-stu-id="f187d-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="f187d-383">Puede especificar el **número máximo de reintentos de tarea** como restricción. Puede incluso especificar si una tarea se debe reintentar *siempre* o no se debe reintentar *nunca*.</span><span class="sxs-lookup"><span data-stu-id="f187d-383">You can specify the **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="f187d-384">Volver a intentar una tarea significa que la tarea se vuelve a poner en cola para ejecutarse de nuevo.</span><span class="sxs-lookup"><span data-stu-id="f187d-384">Retrying a task means that the task is requeued to be run again.</span></span>
* <span data-ttu-id="f187d-385">La aplicación cliente puede agregar tareas a un trabajo o puede especificar una [tarea del administrador de trabajos](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="f187d-385">Your client application can add tasks to a job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="f187d-386">Una tarea del administrador de trabajos contiene la información necesaria para crear las tareas que se requieren para un trabajo. Estas tareas se ejecutan en uno de los nodos de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-386">A job manager task contains the information that is necessary to create the required tasks for a job, with the job manager task being run on one of the compute nodes in the pool.</span></span> <span data-ttu-id="f187d-387">El servicio Batch controla específicamente las tareas del administrador de trabajos: las pone en cola en cuanto se crea el trabajo y las reinicia si se produce un error.</span><span class="sxs-lookup"><span data-stu-id="f187d-387">The job manager task is handled specifically by Batch--it is queued as soon as the job is created, and is restarted if it fails.</span></span> <span data-ttu-id="f187d-388">Se *requiere* una tarea del administrador de trabajos para los trabajos creados mediante una [programación de trabajo](#scheduled-jobs), ya que es la única manera de definir las tareas antes de que se cree una instancia del trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is the only way to define the tasks before the job is instantiated.</span></span>
* <span data-ttu-id="f187d-389">De manera predeterminada, los trabajos permanecen en estado activo cuando se completan todas las tareas que contienen.</span><span class="sxs-lookup"><span data-stu-id="f187d-389">By default, jobs remain in the active state when all tasks within the job are complete.</span></span> <span data-ttu-id="f187d-390">Este comportamiento se puede cambiar, con el fin de que el trabajo finalice automáticamente cuando se completen todas sus tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-390">You can change this behavior so that the job is automatically terminated when all tasks in the job are complete.</span></span> <span data-ttu-id="f187d-391">Establezca la propiedad **onAllTasksComplete** ([OnAllTasksComplete][net_onalltaskscomplete] en .NET de Batch) en *terminatejob* para que el trabajo finalice automáticamente cuando todas sus tareas estén en estado completado.</span><span class="sxs-lookup"><span data-stu-id="f187d-391">Set the job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) to *terminatejob* to automatically terminate the job when all of its tasks are in the completed state.</span></span>

    <span data-ttu-id="f187d-392">Tenga en cuenta que el servicio Batch considera que un trabajo *sin* tareas tiene todas sus tareas completadas.</span><span class="sxs-lookup"><span data-stu-id="f187d-392">Note that the Batch service considers a job with *no* tasks to have all of its tasks completed.</span></span> <span data-ttu-id="f187d-393">Por lo tanto, esta opción se utiliza normalmente con una [tarea del administrador de trabajos](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="f187d-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="f187d-394">Si desea usar la finalización automática de trabajos sin un administrador de trabajos, debe establecer inicialmente la propiedad **onAllTasksComplete** de cada trabajo nuevo en *noaction* y, después, establecerla en *terminatejob*, pero solo después de que haya terminado de agregar tareas al trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-394">If you want to use automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property to *noaction*, then set it to *terminatejob* only after you've finished adding tasks to the job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="f187d-395">prioridad del trabajo</span><span class="sxs-lookup"><span data-stu-id="f187d-395">Job priority</span></span>
<span data-ttu-id="f187d-396">Puede asignar una prioridad a los trabajos que cree en Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-396">You can assign a priority to jobs that you create in Batch.</span></span> <span data-ttu-id="f187d-397">El servicio Batch usa el valor de prioridad del trabajo para determinar el orden de programación de trabajos dentro de una cuenta (esto no se debe confundir con un [trabajo programado](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="f187d-397">The Batch service uses the priority value of the job to determine the order of job scheduling within an account (this is not to be confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="f187d-398">Los valores de prioridad pueden oscilar entre -1000 y 1000, siendo -1000 la prioridad más baja y 1000 la más alta.</span><span class="sxs-lookup"><span data-stu-id="f187d-398">The priority values range from -1000 to 1000, with -1000 being the lowest priority and 1000 being the highest.</span></span> <span data-ttu-id="f187d-399">Para actualizar la prioridad de un trabajo, llame a la operación [Actualizar las propiedades de un trabajo][rest_update_job] (REST de Batch) o modifique la propiedad [CloudJob.Priority][net_cloudjob_priority] (.NET de Batch).</span><span class="sxs-lookup"><span data-stu-id="f187d-399">To update the priority of a job, call the [Update the properties of a job][rest_update_job] operation (Batch REST), or modify the [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="f187d-400">Dentro de la misma cuenta, los trabajos de mayor prioridad tienen precedencia de programación sobre los trabajos con menor prioridad.</span><span class="sxs-lookup"><span data-stu-id="f187d-400">Within the same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="f187d-401">Un trabajo con un valor de prioridad mayor en una cuenta no tiene precedencia de programación sobre otro trabajo con un valor de prioridad inferior de una cuenta diferente.</span><span class="sxs-lookup"><span data-stu-id="f187d-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="f187d-402">La programación de trabajos entre los grupos es independiente.</span><span class="sxs-lookup"><span data-stu-id="f187d-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="f187d-403">Entre grupos diferentes, no se garantiza que un trabajo con una prioridad más alta se programe antes si el grupo asociado tiene pocos nodos inactivos.</span><span class="sxs-lookup"><span data-stu-id="f187d-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="f187d-404">En el mismo grupo, los trabajos con el mismo nivel de prioridad tienen la misma probabilidad de ser programados.</span><span class="sxs-lookup"><span data-stu-id="f187d-404">In the same pool, jobs with the same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="f187d-405">Scheduled jobs</span><span class="sxs-lookup"><span data-stu-id="f187d-405">Scheduled jobs</span></span>
<span data-ttu-id="f187d-406">Las [programaciones de trabajos][rest_job_schedules] permiten crear trabajos recurrentes dentro del servicio Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-406">[Job schedules][rest_job_schedules] enable you to create recurring jobs within the Batch service.</span></span> <span data-ttu-id="f187d-407">Una programación de trabajo especifica cuándo se deben ejecutar los trabajos e incluye las especificaciones de los trabajos que se van a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="f187d-407">A job schedule specifies when to run jobs and includes the specifications for the jobs to be run.</span></span> <span data-ttu-id="f187d-408">Puede especificar la duración de la programación (cuánto dura y cuándo está vigente), y con qué frecuencia se crean trabajos durante el período programado.</span><span class="sxs-lookup"><span data-stu-id="f187d-408">You can specify the duration of the schedule--how long and when the schedule is in effect--and how frequently jobs are created during the scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="f187d-409">Tarea</span><span class="sxs-lookup"><span data-stu-id="f187d-409">Task</span></span>
<span data-ttu-id="f187d-410">Una tarea es una unidad de cálculo que está asociada con un trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="f187d-411">Se ejecuta en un nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-411">It runs on a node.</span></span> <span data-ttu-id="f187d-412">Las tareas se asignan a un nodo para su ejecución o se ponen en cola hasta que quede libre un nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-412">Tasks are assigned to a node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="f187d-413">Es decir, una tarea ejecuta uno o más programas o scripts en un nodo de proceso para llevar a cabo el trabajo necesario.</span><span class="sxs-lookup"><span data-stu-id="f187d-413">Put simply, a task runs one or more programs or scripts on a compute node to perform the work you need done.</span></span>

<span data-ttu-id="f187d-414">Cuando crea una tarea, puede especificar:</span><span class="sxs-lookup"><span data-stu-id="f187d-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="f187d-415">La **línea de comandos** de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-415">The **command line** for the task.</span></span> <span data-ttu-id="f187d-416">Se trata de la línea de comandos que ejecuta la aplicación o el script en el nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-416">This is the command line that runs your application or script on the compute node.</span></span>

    <span data-ttu-id="f187d-417">Es importante comprobar que la línea de comandos no se ejecute realmente en un shell.</span><span class="sxs-lookup"><span data-stu-id="f187d-417">It is important to note that the command line does not actually run under a shell.</span></span> <span data-ttu-id="f187d-418">Por tanto, no se podrá beneficiar de forma nativa de las características de shell como la expansión de [variables de entorno](#environment-settings-for-tasks) (esto incluye `PATH`).</span><span class="sxs-lookup"><span data-stu-id="f187d-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes the `PATH`).</span></span> <span data-ttu-id="f187d-419">Para beneficiarse de estas características, debe invocar el shell en la línea de comandos, por ejemplo, iniciando `cmd.exe` en nodos de Windows o `/bin/sh` en Linux:</span><span class="sxs-lookup"><span data-stu-id="f187d-419">To take advantage of such features, you must invoke the shell in the command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="f187d-420">Si las tareas deben ejecutar una aplicación o un script que no se encuentra en `PATH` en el nodo o en las variables de entorno de referencia, invoque el shell explícitamente en la línea de comandos de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-420">If your tasks need to run an application or script that is not in the node's `PATH` or reference environment variables, invoke the shell explicitly in the task command line.</span></span>
* <span data-ttu-id="f187d-421">**archivos de recursos** que contienen los datos que se procesan.</span><span class="sxs-lookup"><span data-stu-id="f187d-421">**Resource files** that contain the data to be processed.</span></span> <span data-ttu-id="f187d-422">Estos archivos se copian automáticamente en el nodo desde Blob Storage en una cuenta de Azure Storage de uso general antes de que se ejecute la línea de comandos de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-422">These files are automatically copied to the node from Blob storage in a general-purpose Azure Storage account before the task's command line is executed.</span></span> <span data-ttu-id="f187d-423">Para más información, consulte las secciones [Tarea de inicio](#start-task) y [Archivos y directorios](#files-and-directories).</span><span class="sxs-lookup"><span data-stu-id="f187d-423">For more information, see the sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="f187d-424">Las **variables de entorno** que requiere la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f187d-424">The **environment variables** that are required by your application.</span></span> <span data-ttu-id="f187d-425">Para más información, consulte la sección [Configuración del entorno para las tareas](#environment-settings-for-tasks) .</span><span class="sxs-lookup"><span data-stu-id="f187d-425">For more information, see the [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="f187d-426">Las **restricciones** con que se debe ejecutar la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-426">The **constraints** under which the task should execute.</span></span> <span data-ttu-id="f187d-427">Por ejemplo, las restricciones incluyen el tiempo máximo que se permite que la tarea se ejecute, el número máximo de veces que se debe volver a intentar una tarea si se produce un error y el tiempo máximo que se conservan los archivos en el directorio de trabajo de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-427">For example, constraints include the maximum time that the task is allowed to run, the maximum number of times a failed task should be retried, and the maximum time that files in the task's working directory are retained.</span></span>
* <span data-ttu-id="f187d-428">**Paquetes de aplicación** que se implementan en el nodo de proceso en el que está programado que se ejecute la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-428">**Application packages** to deploy to the compute node on which the task is scheduled to run.</span></span> <span data-ttu-id="f187d-429">Los [paquetes de aplicación](#application-packages) proporcionan una implementación simplificada y el control de las versiones de las aplicaciones que ejecutan las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-429">[Application packages](#application-packages) provide simplified deployment and versioning of the applications that your tasks run.</span></span> <span data-ttu-id="f187d-430">Los paquetes de aplicaciones de nivel de tarea son especialmente útiles en entornos de grupo compartido, donde los distintos trabajos se ejecutan en un grupo que no se elimina cuando se completa un trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and the pool is not deleted when a job is completed.</span></span> <span data-ttu-id="f187d-431">Si el trabajo tiene menos tareas que nodos en el grupo, los paquetes de aplicación de las tareas pueden minimizar la transferencia de datos, ya que la aplicación se implementa solo en los nodos que ejecutan tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-431">If your job has fewer tasks than nodes in the pool, task application packages can minimize data transfer since your application is deployed only to the nodes that run tasks.</span></span>

<span data-ttu-id="f187d-432">Además de las tareas que se definen para realizar cálculos en un nodo, el servicio Batch también proporciona las siguientes tareas especiales:</span><span class="sxs-lookup"><span data-stu-id="f187d-432">In addition to tasks you define to perform computation on a node, the following special tasks are also provided by the Batch service:</span></span>

* [<span data-ttu-id="f187d-433">Tarea de inicio</span><span class="sxs-lookup"><span data-stu-id="f187d-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="f187d-434">Tareas del Administrador de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="f187d-435">Tareas de preparación y liberación de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="f187d-436">Tareas de instancias múltiples (MPI)</span><span class="sxs-lookup"><span data-stu-id="f187d-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="f187d-437">Dependencias de las tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="f187d-438">Tarea de inicio</span><span class="sxs-lookup"><span data-stu-id="f187d-438">Start task</span></span>
<span data-ttu-id="f187d-439">Al asociar una **tarea de inicio** con un grupo, puede preparar el entorno operativo de sus nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-439">By associating a **start task** with a pool, you can prepare the operating environment of its nodes.</span></span> <span data-ttu-id="f187d-440">Por ejemplo, puede realizar acciones como instalar las aplicaciones que las tareas ejecutarán o iniciar procesos en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="f187d-440">For example, you can perform actions like installing the applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="f187d-441">La tarea de inicio se ejecuta cada vez que se inicia un nodo, siempre y cuando dicho nodo permanezca en el grupo. Aquí se incluye también la primera vez que el nodo se agrega al grupo o cuando se reinicia o se restablece su imagen inicial.</span><span class="sxs-lookup"><span data-stu-id="f187d-441">The start task runs every time a node starts, for as long as it remains in the pool--including when the node is first added to the pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="f187d-442">Una de las principales ventajas de la tarea de inicio es que contiene toda la información necesaria para configurar un nodo de proceso e instalar las aplicaciones necesarias para ejecutar tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-442">A primary benefit of the start task is that it can contain all of the information that is necessary to configure a compute node and install the applications that are required for task execution.</span></span> <span data-ttu-id="f187d-443">Por lo tanto, aumentar el número de nodos en un grupo es tan simple como especificar el nuevo número de nodos de destino.</span><span class="sxs-lookup"><span data-stu-id="f187d-443">Therefore, increasing the number of nodes in a pool is as simple as specifying the new target node count.</span></span> <span data-ttu-id="f187d-444">La tarea de inicio proporciona al servicio Batch la información que se necesita para configurar los nuevos nodos y prepararlos para aceptar tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-444">The start task provides the Batch service the information that is needed to configure the new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="f187d-445">Como con cualquier tarea de Azure Batch, se puede especificar una lista de **archivos de recursos** en [Azure Storage][azure_storage], además de una **línea de comandos** para ejecutar.</span><span class="sxs-lookup"><span data-stu-id="f187d-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition to a **command line** to be executed.</span></span> <span data-ttu-id="f187d-446">El servicio Batch copia primero los archivos de recursos desde Azure Storage al nodo y después ejecuta la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="f187d-446">The Batch service first copies the resource files to the node from Azure Storage, and then runs the command line.</span></span> <span data-ttu-id="f187d-447">Para una tarea de inicio de grupo, la lista de archivos contiene normalmente la aplicación de la tarea y sus dependencias.</span><span class="sxs-lookup"><span data-stu-id="f187d-447">For a pool start task, the file list typically contains the task application and its dependencies.</span></span>

<span data-ttu-id="f187d-448">Sin embargo, la tarea de inicio también puede incluir datos de referencia que se utilizarán en todas las tareas que se ejecuten en el nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-448">However, the start task could also include reference data to be used by all tasks that are running on the compute node.</span></span> <span data-ttu-id="f187d-449">Por ejemplo, la línea de comandos de una tarea de inicio podría realizar una operación `robocopy` para copiar los archivos de la aplicación (que se especificaron como archivos de recursos y se descargaron en el nodo) del [directorio de trabajo](#files-and-directories) de la tarea de inicio a la [carpeta compartida](#files-and-directories) y después ejecutar un archivo MSI o `setup.exe`.</span><span class="sxs-lookup"><span data-stu-id="f187d-449">For example, a start task's command line could perform a `robocopy` operation to copy application files (which were specified as resource files and downloaded to the node) from the start task's [working directory](#files-and-directories) to the [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="f187d-450">Habitualmente, es conveniente que el servicio Batch espere a que la tarea de inicio finalice antes de considerar que el nodo está listo para asignarle tareas, pero este procedimiento se puede configurar.</span><span class="sxs-lookup"><span data-stu-id="f187d-450">It is typically desirable for the Batch service to wait for the start task to complete before considering the node ready to be assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="f187d-451">Si una tarea de inicio da error en un nodo de proceso, el estado del nodo se actualiza para reflejar el error y no se le asigna al nodo ninguna tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-451">If a start task fails on a compute node, then the state of the node is updated to reflect the failure, and the node is not assigned any tasks.</span></span> <span data-ttu-id="f187d-452">Una tarea de inicio puede generar un error si existe un problema al copiar sus archivos de recursos desde el almacenamiento o si el proceso ejecutado mediante su línea de comandos devuelve un código de salida distinto de cero.</span><span class="sxs-lookup"><span data-stu-id="f187d-452">A start task can fail if there is an issue copying its resource files from storage, or if the process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="f187d-453">Si agrega una tarea de inicio a un grupo existente o la actualiza, debe reiniciar sus nodos de proceso para que la tarea de inicio se les aplique.</span><span class="sxs-lookup"><span data-stu-id="f187d-453">If you add or update the start task for an existing pool, you must reboot its compute nodes for the start task to be applied to the nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="f187d-454">El tamaño total de una tarea de inicio debe ser menor o igual a 32 768 caracteres, incluidos los archivos de recursos y las variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="f187d-454">The total size of a start task must be less than or equal to 32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="f187d-455">Para garantizar que la tarea de inicio cumple este requisito, puede usar uno de estos dos enfoques:</span><span class="sxs-lookup"><span data-stu-id="f187d-455">To ensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="f187d-456">Puede utilizar paquetes de aplicación para distribuir las aplicaciones o los datos por los nodos del grupo de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-456">You can use application packages to distribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="f187d-457">Para más información sobre los paquetes de aplicación, consulte [Implementación de aplicaciones en nodos de proceso con paquetes de aplicaciones de Batch](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-457">For more information about application packages, see [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="f187d-458">Puede crear manualmente un archivo comprimido que contenga los archivos de aplicación.</span><span class="sxs-lookup"><span data-stu-id="f187d-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="f187d-459">Cargue el archivo comprimido en Azure Storage como blob.</span><span class="sxs-lookup"><span data-stu-id="f187d-459">Upload your zipped archive to Azure Storage as a blob.</span></span> <span data-ttu-id="f187d-460">Defina el archivo comprimido como archivo de recursos para la tarea de inicio.</span><span class="sxs-lookup"><span data-stu-id="f187d-460">Specify the zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="f187d-461">Antes de ejecutar la línea de comandos para la tarea de inicio, descomprima el archivo desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="f187d-461">Before you run the command line for your start task, unzip the archive from the command line.</span></span> 
>
>    <span data-ttu-id="f187d-462">Para ello, puede usar la herramienta de archivado que prefiera.</span><span class="sxs-lookup"><span data-stu-id="f187d-462">To unzip the archive, you can use the archiving tool of your choice.</span></span> <span data-ttu-id="f187d-463">Debe incluir la herramienta que utilice para descomprimir el archivo como archivo de recursos para la tarea de inicio.</span><span class="sxs-lookup"><span data-stu-id="f187d-463">You will need to include the tool that you use to unzip the archive as a resource file for the start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="f187d-464">Tareas del Administrador de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-464">Job manager task</span></span>
<span data-ttu-id="f187d-465">Normalmente, se utiliza una **tarea del administrador de trabajos** para controlar y supervisar la ejecución del trabajo: por ejemplo, para crear y enviar las tareas de un trabajo, determinar las tareas adicionales que se deben ejecutar y determinar si el trabajo ha finalizado.</span><span class="sxs-lookup"><span data-stu-id="f187d-465">You typically use a **job manager task** to control and/or monitor job execution--for example, to create and submit the tasks for a job, determine additional tasks to run, and determine when work is complete.</span></span> <span data-ttu-id="f187d-466">Sin embargo, una tarea del administrador de trabajos no se limita a estas actividades.</span><span class="sxs-lookup"><span data-stu-id="f187d-466">However, a job manager task is not restricted to these activities.</span></span> <span data-ttu-id="f187d-467">Es una tarea completa que puede realizar todas las acciones que se requieren para el trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-467">It is a fully fledged task that can perform any actions that are required for the job.</span></span> <span data-ttu-id="f187d-468">Por ejemplo, una tarea del administrador de trabajos podría descargar un archivo especificado como un parámetro, analizar el contenido de ese archivo y enviar tareas adicionales en función de ese contenido.</span><span class="sxs-lookup"><span data-stu-id="f187d-468">For example, a job manager task might download a file that is specified as a parameter, analyze the contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="f187d-469">Una tarea del administrador de trabajos se inicia antes que cualquier otra.</span><span class="sxs-lookup"><span data-stu-id="f187d-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="f187d-470">Ofrece las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="f187d-470">It provides the following features:</span></span>

* <span data-ttu-id="f187d-471">Se envía automáticamente como una tarea mediante el servicio Batch cuando se crea el trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-471">It is automatically submitted as a task by the Batch service when the job is created.</span></span>
* <span data-ttu-id="f187d-472">Está programada para ejecutarse antes que las otras tareas de un trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-472">It is scheduled to execute before the other tasks in a job.</span></span>
* <span data-ttu-id="f187d-473">Su nodo asociado es el último en eliminarse de un grupo cuando se reduce el tamaño del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-473">Its associated node is the last to be removed from a pool when the pool is being downsized.</span></span>
* <span data-ttu-id="f187d-474">Su finalización se puede vincular a la finalización de todas las tareas en el trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-474">Its termination can be tied to the termination of all tasks in the job.</span></span>
* <span data-ttu-id="f187d-475">A una tarea del administrador de trabajos se le otorga la más alta prioridad cuando es necesario reiniciarla.</span><span class="sxs-lookup"><span data-stu-id="f187d-475">A job manager task is given the highest priority when it needs to be restarted.</span></span> <span data-ttu-id="f187d-476">Si un nodo inactivo no está disponible, el servicio Batch puede finalizar una de las otras tareas en ejecución del grupo para dejar espacio para la ejecución de la tarea del administrador de trabajos.</span><span class="sxs-lookup"><span data-stu-id="f187d-476">If an idle node is not available, the Batch service might terminate one of the other running tasks in the pool to make room for the job manager task to run.</span></span>
* <span data-ttu-id="f187d-477">Una tarea del Administrador de trabajos de un trabajo no tiene prioridad sobre las tareas de otros trabajos.</span><span class="sxs-lookup"><span data-stu-id="f187d-477">A job manager task in one job does not have priority over the tasks of other jobs.</span></span> <span data-ttu-id="f187d-478">Entre trabajos, solo se tienen en cuenta las prioridades de nivel de trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="f187d-479">Tareas de preparación y liberación de trabajos</span><span class="sxs-lookup"><span data-stu-id="f187d-479">Job preparation and release tasks</span></span>
<span data-ttu-id="f187d-480">El servicio Batch proporciona la tarea de preparación del trabajo para la configuración de ejecución previa al trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="f187d-481">Tareas de liberación del trabajo para el mantenimiento o la limpieza posteriores al trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="f187d-482">**Tarea de preparación del trabajo**: una tarea de preparación del trabajo se ejecuta en todos los nodos de proceso programados para ejecutar tareas, antes de que se ejecute ninguna otra tarea del trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled to run tasks, before any of the other job tasks are executed.</span></span> <span data-ttu-id="f187d-483">Por ejemplo, puede usar una tarea de preparación del trabajo para copiar los datos compartidos por todas las tareas, pero que sean únicos para el trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-483">You can use a job preparation task to copy data that is shared by all tasks, but is unique to the job, for example.</span></span>
* <span data-ttu-id="f187d-484">**Tarea de liberación del trabajo**: cuando un trabajo se ha completado, la tarea de liberación del trabajo se ejecuta en cada nodo del grupo que ejecutó al menos una tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-484">**Job release task**: When a job has completed, a job release task runs on each node in the pool that executed at least one task.</span></span> <span data-ttu-id="f187d-485">Por ejemplo, puede usar la tarea de liberación del trabajo para eliminar los datos copiados por la tarea de preparación del trabajo, o comprimir y cargar los datos del registro de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="f187d-485">You can use a job release task to delete data that is copied by the job preparation task, or to compress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="f187d-486">Tanto para la tarea de preparación del trabajo como para las de liberación, puede especificar una línea de comandos que se ejecute cuando se invoque la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-486">Both job preparation and release tasks allow you to specify a command line to run when the task is invoked.</span></span> <span data-ttu-id="f187d-487">Las tareas ofrecen características tales como descarga de archivos, ejecución con elevación de privilegios, variables de entorno personalizadas, duración máxima de ejecución, número de reintentos y tiempo de retención de archivo.</span><span class="sxs-lookup"><span data-stu-id="f187d-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="f187d-488">Para obtener más información sobre las tareas de preparación y liberación del trabajo, consulte [Ejecución de las tareas de preparación y realización de trabajos en los nodos de proceso de Azure Batch](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="f187d-489">Tarea de instancias múltiples</span><span class="sxs-lookup"><span data-stu-id="f187d-489">Multi-instance task</span></span>
<span data-ttu-id="f187d-490">Una [tarea de instancias múltiples](batch-mpi.md) es aquella que está configurada para ejecutarse simultáneamente en varios nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-490">A [multi-instance task](batch-mpi.md) is a task that is configured to run on more than one compute node simultaneously.</span></span> <span data-ttu-id="f187d-491">Con tareas de instancias múltiples, puede habilitar escenarios de informática de alto rendimiento que requieren tener un grupo de nodos de proceso asignados juntos para procesar una carga de trabajo única como, por ejemplo, la interfaz de paso de mensajes (MPI).</span><span class="sxs-lookup"><span data-stu-id="f187d-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together to process a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="f187d-492">Para ver una explicación detallada sobre la ejecución de trabajos de MPI en el servicio Batch mediante la biblioteca .NET de Batch, consulte [Uso de tareas de instancias múltiples para ejecutar aplicaciones de la Interfaz de paso de mensajes (MPI) en Azure Batch](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-492">For a detailed discussion on running MPI jobs in Batch by using the Batch .NET library, check out [Use multi-instance tasks to run Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="f187d-493">Dependencias de las tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-493">Task dependencies</span></span>
<span data-ttu-id="f187d-494">Las [dependencias de tareas](batch-task-dependencies.md), como el propio nombre implica, permiten especificar que una tarea depende de que se completen otras tareas antes de su ejecución.</span><span class="sxs-lookup"><span data-stu-id="f187d-494">[Task dependencies](batch-task-dependencies.md), as the name implies, allow you to specify that a task depends on the completion of other tasks before its execution.</span></span> <span data-ttu-id="f187d-495">Esta característica proporciona compatibilidad con aquellas situaciones en las que una tarea "de bajada" consume el resultado de una tarea "del canal de subida", o cuando una tarea del canal de subida realiza alguna inicialización requerida por una tarea de bajada.</span><span class="sxs-lookup"><span data-stu-id="f187d-495">This feature provides support for situations in which a "downstream" task consumes the output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="f187d-496">Para utilizar esta característica, primero debe habilitar las dependencias de tareas en su trabajo de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-496">To use this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="f187d-497">Luego, en cada tarea que dependa de otra (o de muchas otras), especifique las tareas de las que depende dicha tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-497">Then, for each task that depends on another (or many others), you specify the tasks which that task depends on.</span></span>

<span data-ttu-id="f187d-498">Con las dependencias de tareas, se pueden configurar escenarios como los siguientes:</span><span class="sxs-lookup"><span data-stu-id="f187d-498">With task dependencies, you can configure scenarios like the following:</span></span>

* <span data-ttu-id="f187d-499">*taskB* depende de *taskA* (la ejecución de *taskB* no se iniciará hasta que *taskA* se haya completado).</span><span class="sxs-lookup"><span data-stu-id="f187d-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="f187d-500">*taskC* depende de *taskA* y *taskB*.</span><span class="sxs-lookup"><span data-stu-id="f187d-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="f187d-501">*taskD* depende de un intervalo de tareas, como las tareas de *1* a *10*, antes de ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="f187d-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="f187d-502">Consulte [Dependencias de tareas en Azure Batch](batch-task-dependencies.md) y el código de ejemplo de [TaskDependencies][github_sample_taskdeps] en el repositorio de ejemplos de GitHub [azure-batch-samples][github_samples] para información más detallada acerca de esta característica.</span><span class="sxs-lookup"><span data-stu-id="f187d-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and the [TaskDependencies][github_sample_taskdeps] code sample in the [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="f187d-503">Configuración del entorno para las tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-503">Environment settings for tasks</span></span>
<span data-ttu-id="f187d-504">Cada tarea que ejecuta el servicio Batch tiene acceso a las variables de entorno que establece en los nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-504">Each task executed by the Batch service has access to environment variables that it sets on compute nodes.</span></span> <span data-ttu-id="f187d-505">Esto incluye las variables de entorno definidas por el servicio Batch ([definidas por el servicio][msdn_env_vars]) y las variables de entorno personalizadas que se pueden definir para las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-505">This includes environment variables defined by the Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="f187d-506">Las aplicaciones y los scripts que ejecutan las tareas tienen acceso a estas variables de entorno durante la ejecución.</span><span class="sxs-lookup"><span data-stu-id="f187d-506">The applications and scripts your tasks execute have access to these environment variables during execution.</span></span>

<span data-ttu-id="f187d-507">Puede establecer variables de entorno personalizadas en el nivel de tarea o de trabajo rellenando la propiedad *environment settings* de estas entidades.</span><span class="sxs-lookup"><span data-stu-id="f187d-507">You can set custom environment variables at the task or job level by populating the *environment settings* property for these entities.</span></span> <span data-ttu-id="f187d-508">Por ejemplo, consulte la operación [Add a task to a job][rest_add_task] (Incorporación de una tarea a un trabajo) (API de REST de Batch) o las propiedades [CloudTask.EnvironmentSettings][net_cloudtask_env] y [CloudJob.CommonEnvironmentSettings][net_job_env] en .NET de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-508">For example, see the [Add a task to a job][rest_add_task] operation (Batch REST API), or the [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="f187d-509">La aplicación cliente o el servicio pueden obtener las variables de entorno de una tarea, tanto las definidas por el servicio como las personalizadas, mediante la operación [Get information about a task][rest_get_task_info] (Obtener información acerca de una tarea) (REST de Batch) o accediendo a la propiedad [CloudTask.EnvironmentSettings][net_cloudtask_env] (.NET de Batch).</span><span class="sxs-lookup"><span data-stu-id="f187d-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using the [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing the [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="f187d-510">Los procesos que se ejecutan en un nodo de proceso pueden acceder a estas y a otras variables de entorno en el nodo, por ejemplo mediante la conocida sintaxis de `%VARIABLE_NAME%` (Windows) o `$VARIABLE_NAME` (Linux).</span><span class="sxs-lookup"><span data-stu-id="f187d-510">Processes executing on a compute node can access these and other environment variables on the node, for example, by using the familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="f187d-511">Puede encontrar una lista completa de las variables de entorno definidas por el servicio en [Compute node environment variables][msdn_env_vars] (Variables de entorno en los nodos de proceso).</span><span class="sxs-lookup"><span data-stu-id="f187d-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="f187d-512">Archivos y directorios</span><span class="sxs-lookup"><span data-stu-id="f187d-512">Files and directories</span></span>
<span data-ttu-id="f187d-513">Cada tarea tiene un *directorio de trabajo* en el que se crean ninguno o más archivos y directorios.</span><span class="sxs-lookup"><span data-stu-id="f187d-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="f187d-514">Este directorio de trabajo se puede usar para almacenar el programa que va a ejecuta la tarea, los datos que procesa y el resultado del procesamiento que realiza.</span><span class="sxs-lookup"><span data-stu-id="f187d-514">This working directory can be used for storing the program that is run by the task, the data that it processes, and the output of the processing it performs.</span></span> <span data-ttu-id="f187d-515">Todos los archivos y directorios de una tarea son propiedad del usuario de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-515">All files and directories of a task are owned by the task user.</span></span>

<span data-ttu-id="f187d-516">El servicio Batch expone parte del sistema de archivos en un nodo como *directorio raíz*.</span><span class="sxs-lookup"><span data-stu-id="f187d-516">The Batch service exposes a portion of the file system on a node as the *root directory*.</span></span> <span data-ttu-id="f187d-517">Las tareas pueden acceder al directorio raíz haciendo referencia a la variable de entorno `AZ_BATCH_NODE_ROOT_DIR` .</span><span class="sxs-lookup"><span data-stu-id="f187d-517">Tasks can access the root directory by referencing the `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="f187d-518">Para obtener más información sobre el uso de variables de entorno, consulte [Configuración del entorno para las tareas](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="f187d-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="f187d-519">El directorio raíz contiene la siguiente estructura de directorio:</span><span class="sxs-lookup"><span data-stu-id="f187d-519">The root directory contains the following directory structure:</span></span>

![Estructura de directorio de nodo de proceso][1]

* <span data-ttu-id="f187d-521">**shared**: este directorio proporciona acceso de lectura y escritura a *todas* las tareas que se ejecutan en un nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-521">**shared**: This directory provides read/write access to *all* tasks that run on a node.</span></span> <span data-ttu-id="f187d-522">Toda tarea que se ejecute en el nodo puede crear, leer, actualizar y eliminar archivos en este directorio.</span><span class="sxs-lookup"><span data-stu-id="f187d-522">Any task that runs on the node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="f187d-523">Las tareas pueden acceder a este directorio haciendo referencia a la variable de entorno `AZ_BATCH_NODE_SHARED_DIR` .</span><span class="sxs-lookup"><span data-stu-id="f187d-523">Tasks can access this directory by referencing the `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="f187d-524">**startup**: una tarea de inicio usa este directorio como directorio de trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="f187d-525">Aquí se almacenan todos los archivos que la tarea de inicio descarga en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-525">All of the files that are downloaded to the node by the start task are stored here.</span></span> <span data-ttu-id="f187d-526">La tarea de inicio puede crear, leer, actualizar y eliminar archivos en este directorio.</span><span class="sxs-lookup"><span data-stu-id="f187d-526">The start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="f187d-527">Las tareas pueden acceder a este directorio haciendo referencia a la variable de entorno `AZ_BATCH_NODE_STARTUP_DIR` .</span><span class="sxs-lookup"><span data-stu-id="f187d-527">Tasks can access this directory by referencing the `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="f187d-528">**Tasks**: se crea un directorio para cada tarea que se ejecuta en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-528">**Tasks**: A directory is created for each task that runs on the node.</span></span> <span data-ttu-id="f187d-529">Se puede acceder a este directorio haciendo referencia a la variable de entorno `AZ_BATCH_TASK_DIR` .</span><span class="sxs-lookup"><span data-stu-id="f187d-529">It is accessed by referencing the `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="f187d-530">Dentro de cada directorio de la tarea, el servicio Batch crea un directorio de trabajo (`wd`) cuya ruta de acceso único se especifica con la variable de entorno `AZ_BATCH_TASK_WORKING_DIR`.</span><span class="sxs-lookup"><span data-stu-id="f187d-530">Within each task directory, the Batch service creates a working directory (`wd`) whose unique path is specified by the `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="f187d-531">Este directorio proporciona acceso de lectura y escritura a la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-531">This directory provides read/write access to the task.</span></span> <span data-ttu-id="f187d-532">La tarea puede crear, leer, actualizar y eliminar archivos en este directorio.</span><span class="sxs-lookup"><span data-stu-id="f187d-532">The task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="f187d-533">Este directorio se conserva en función de la restricción *RetentionTime* especificada para la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-533">This directory is retained based on the *RetentionTime* constraint that is specified for the task.</span></span>

    <span data-ttu-id="f187d-534">`stdout.txt` y `stderr.txt`: estos archivos se escriben en la carpeta de la tarea durante la ejecución de esta.</span><span class="sxs-lookup"><span data-stu-id="f187d-534">`stdout.txt` and `stderr.txt`: These files are written to the task folder during the execution of the task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f187d-535">Cuando se quita un nodo del grupo, se quitan *todos* los archivos que están almacenados en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-535">When a node is removed from the pool, *all* of the files that are stored on the node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="f187d-536">paquetes de aplicación</span><span class="sxs-lookup"><span data-stu-id="f187d-536">Application packages</span></span>
<span data-ttu-id="f187d-537">La característica de [paquetes de aplicación](batch-application-packages.md) permite administrar e implementar fácilmente aplicaciones en los nodos de proceso de los grupos.</span><span class="sxs-lookup"><span data-stu-id="f187d-537">The [application packages](batch-application-packages.md) feature provides easy management and deployment of applications to the compute nodes in your pools.</span></span> <span data-ttu-id="f187d-538">Puede cargar y administrar fácilmente varias versiones de las aplicaciones que ejecutan las tareas, incluidos sus archivos binarios y auxiliares.</span><span class="sxs-lookup"><span data-stu-id="f187d-538">You can upload and manage multiple versions of the applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="f187d-539">A continuación, se pueden implementar automáticamente una o varias de estas aplicaciones en los nodos de proceso del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-539">Then you can automatically deploy one or more of these applications to the compute nodes in your pool.</span></span>

<span data-ttu-id="f187d-540">Los paquetes de aplicaciones se pueden especificar a nivel de grupo y de tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-540">You can specify application packages at the pool and task level.</span></span> <span data-ttu-id="f187d-541">Si se especifican paquetes de aplicación de grupo, la aplicación se implementa en todos los nodos del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-541">When you specify pool application packages, the application is deployed to every node in the pool.</span></span> <span data-ttu-id="f187d-542">Si se especifican paquetes de aplicación de tarea, la aplicación se implementa solo en los nodos que tienen programado ejecutar al menos una de las tareas del trabajo, inmediatamente antes que se ejecute la línea de comandos de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-542">When you specify task application packages, the application is deployed only to nodes that are scheduled to run at least one of the job's tasks, just before the task's command line is run.</span></span>

<span data-ttu-id="f187d-543">Batch controla los detalles del trabajo con Azure Storage para almacenar los paquetes de aplicación e implementarlos en los nodos de proceso, por lo que tanto el código como la sobrecarga de administración se pueden simplificar.</span><span class="sxs-lookup"><span data-stu-id="f187d-543">Batch handles the details of working with Azure Storage to store your application packages and deploy them to compute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="f187d-544">Para más información sobre la característica de paquete de aplicación, consulte [Implementación de aplicaciones en nodos de proceso con paquetes de aplicaciones de Batch](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-544">To find out more about the application package feature, check out [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f187d-545">Si se agregan paquetes de aplicación de grupo a un grupo *existente* , es preciso reiniciar los nodos de proceso de los paquetes de aplicación que se van a implementar en los nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-545">If you add pool application packages to an *existing* pool, you must reboot its compute nodes for the application packages to be deployed to the nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="f187d-546">Vigencia de grupo y nodo de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="f187d-547">Al diseñar la solución de Azure Batch, se debe tomar una decisión de diseño con respecto a cómo y cuándo se crean los grupos y cuánto tiempo se mantendrán disponibles los nodos de proceso dentro de esos grupos.</span><span class="sxs-lookup"><span data-stu-id="f187d-547">When you design your Azure Batch solution, you have to make a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="f187d-548">Por una parte, puede crear un grupo para cada trabajo que envíe el trabajo y eliminarlo a medida que se terminen de ejecutar las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-548">On one end of the spectrum, you can create a pool for each job that you submit, and delete the pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="f187d-549">De esta manera, se maximiza su uso dado que los nodos solo se asignan cuando es necesario y se apagan en cuanto se vuelven inactivos.</span><span class="sxs-lookup"><span data-stu-id="f187d-549">This maximizes utilization because the nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="f187d-550">Aunque esto significa que el trabajo debe esperar a que se asignen los nodos, es importante tener en cuenta que las tareas se programarán para su ejecución tan pronto como los nodos estén disponibles de forma individual, se asignen y se haya completado la tarea de inicio.</span><span class="sxs-lookup"><span data-stu-id="f187d-550">While this means that the job must wait for the nodes to be allocated, it's important to note that tasks are scheduled for execution as soon as nodes are individually available, allocated, and the start task has completed.</span></span> <span data-ttu-id="f187d-551">Batch *no* espera a que todos los nodos de un grupo estén disponibles antes de asignarles tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks to the nodes.</span></span> <span data-ttu-id="f187d-552">Esto garantiza la utilización máxima de todos los nodos disponibles.</span><span class="sxs-lookup"><span data-stu-id="f187d-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="f187d-553">Por otro lado, si lo más importante es que los trabajos se inicien inmediatamente, se puede crear un grupo antes de tiempo y hacer que sus nodos estén disponibles antes de que se envíen los trabajos.</span><span class="sxs-lookup"><span data-stu-id="f187d-553">At the other end of the spectrum, if having jobs start immediately is the highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="f187d-554">En este escenario, las tareas se pueden iniciar inmediatamente, pero los nodos permanecerán inactivos mientras esperan a que se les asignen las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them to be assigned.</span></span>

<span data-ttu-id="f187d-555">Normalmente, se utiliza un enfoque combinado para controlar una carga variable, pero en curso.</span><span class="sxs-lookup"><span data-stu-id="f187d-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="f187d-556">Puede tener un grupo al que se envíen varios trabajos y puede aumentar o reducir el número de nodos según la carga de trabajo (consulte [Escalado de recursos de proceso](#scaling-compute-resources) en la sección siguiente).</span><span class="sxs-lookup"><span data-stu-id="f187d-556">You can have a pool that multiple jobs are submitted to, but can scale the number of nodes up or down according to the job load (see [Scaling compute resources](#scaling-compute-resources) in the following section).</span></span> <span data-ttu-id="f187d-557">Puede realizar esto de manera reactiva, según la carga actual o de forma anticipada si se puede predecir la carga.</span><span class="sxs-lookup"><span data-stu-id="f187d-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="f187d-558">Configuración de red virtual y de firewall</span><span class="sxs-lookup"><span data-stu-id="f187d-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="f187d-559">Cuando se aprovisiona un grupo de nodos de proceso en Azure Batch, puede asociar el grupo a una subred de una [red virtual](../virtual-network/virtual-networks-overview.md) de Azure.</span><span class="sxs-lookup"><span data-stu-id="f187d-559">When you provision a pool of compute nodes in Azure Batch, you can associate the pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="f187d-560">Para más información acerca de cómo crear una red virtual con subredes, consulte [Creación de una red virtual con varias subredes](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-560">To learn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="f187d-561">La red virtual asociada a un grupo debe ser:</span><span class="sxs-lookup"><span data-stu-id="f187d-561">The VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="f187d-562">Estar en la misma **región** de Azure que la cuenta de Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-562">In the same Azure **region** as the Azure Batch account.</span></span>
   * <span data-ttu-id="f187d-563">Estar en la misma **suscripción** que la cuenta de Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-563">In the same **subscription** as the Azure Batch account.</span></span>

* <span data-ttu-id="f187d-564">El tipo de red virtual que se admite depende de la forma en que se asignan los grupos en la cuenta de Batch:</span><span class="sxs-lookup"><span data-stu-id="f187d-564">The type of VNet supported depends on how pools are being allocated for the Batch account:</span></span>

    - <span data-ttu-id="f187d-565">Si el modo de asignación de grupos de su cuenta de Batch está establecido en Servicio Batch, puede asignar una red virtual solo a los grupos creados con la **configuración de Cloud Services**.</span><span class="sxs-lookup"><span data-stu-id="f187d-565">If the pool allocation mode for your Batch account is set to Batch Service, then you can assign a VNet only to pools created with the **Cloud Services Configuration**.</span></span> <span data-ttu-id="f187d-566">Además, la red virtual especificada debe crearse con el modelo de implementación clásico.</span><span class="sxs-lookup"><span data-stu-id="f187d-566">Additionally, the specified VNet must be created with the classic deployment model.</span></span> <span data-ttu-id="f187d-567">No se admiten redes virtuales creadas con el modelo de implementación de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f187d-567">VNets created with the Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="f187d-568">Si el modo de asignación de grupos de su cuenta de Batch está establecido en Suscripción de usuario, puede asignar una red virtual solo a los grupos creados con la **configuración de máquina virtual**.</span><span class="sxs-lookup"><span data-stu-id="f187d-568">If the pool allocation mode for your Batch account is set to User Subscription, then you can assign a VNet only to pools created with the **Virtual Machine Configuration**.</span></span> <span data-ttu-id="f187d-569">No se admiten los grupos creados con la **configuración de servicio en la nube**.</span><span class="sxs-lookup"><span data-stu-id="f187d-569">Pools created with the **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="f187d-570">La red virtual asociada puede crearse con el modelo de implementación de Azure Resource Manager o el modelo de implementación clásico.</span><span class="sxs-lookup"><span data-stu-id="f187d-570">The associated VNet may be created with either the Azure Resource Manager deployment model or the classic deployment model.</span></span>

    <span data-ttu-id="f187d-571">Para ver una tabla que resume la compatibilidad con las redes virtuales según el modo de asignación de grupos, consulte la sección [Modo de asignación de grupos](#pool-allocation-mode).</span><span class="sxs-lookup"><span data-stu-id="f187d-571">For a table summarizing VNet support according to pool allocation mode, see the [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="f187d-572">Si el modo de asignación de grupos de la cuenta de Batch está establecida en Batch Service, debe proporcionar permisos para que la entidad de servicio de Batch tenga acceso a la red virtual.</span><span class="sxs-lookup"><span data-stu-id="f187d-572">If the pool allocation mode for your Batch account is set to Batch Service, then you must provide permissions for the Batch service principal to access the VNet.</span></span> <span data-ttu-id="f187d-573">La red virtual debe asignar el rol [Colaborador de la máquina virtual clásica de Control de acceso basado en roles (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) a la entidad de servicio de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-573">The VNet must assign the [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role to the Batch service principal.</span></span> <span data-ttu-id="f187d-574">Si no se proporciona el rol de RBAC especificado, el servicio Batch devuelve 400 (Solicitud incorrecta).</span><span class="sxs-lookup"><span data-stu-id="f187d-574">If the specified RBAC role is not provided, the Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="f187d-575">Para agregar el rol en Azure Portal:</span><span class="sxs-lookup"><span data-stu-id="f187d-575">To add the role in the Azure portal:</span></span>

    1. <span data-ttu-id="f187d-576">Seleccione la **red virtual** y, a continuación, **Control de acceso (IAM)** > **Roles** > **Colaborador de la máquina virtual** > **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="f187d-576">Select the **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="f187d-577">En la hoja **Agregar permisos**, seleccione el rol **Colaborador de la máquina virtual**.</span><span class="sxs-lookup"><span data-stu-id="f187d-577">On the **Add permissions** blade, select the **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="f187d-578">En la hoja **Agregar permisos**, busque Batch API.</span><span class="sxs-lookup"><span data-stu-id="f187d-578">On the **Add permissions** blade, search for the Batch API.</span></span> <span data-ttu-id="f187d-579">Busque cada una de estas cadenas en orden hasta que encuentre la API:</span><span class="sxs-lookup"><span data-stu-id="f187d-579">Search for each of these strings in turn until you find the API:</span></span>
        1. <span data-ttu-id="f187d-580">**MicrosoftAzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="f187d-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="f187d-581">**Microsoft Azure Batch**.</span><span class="sxs-lookup"><span data-stu-id="f187d-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="f187d-582">Los inquilinos más recientes de Azure AD pueden utilizar este nombre.</span><span class="sxs-lookup"><span data-stu-id="f187d-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="f187d-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** es el identificador de Batch API.</span><span class="sxs-lookup"><span data-stu-id="f187d-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is the ID for the Batch API.</span></span> 
    3. <span data-ttu-id="f187d-584">Seleccione la entidad de servicio de Batch API.</span><span class="sxs-lookup"><span data-stu-id="f187d-584">Select the Batch API service principal.</span></span> 
    4. <span data-ttu-id="f187d-585">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="f187d-585">Click **Save**.</span></span>

        ![Asignación del rol Colaborador de la máquina virtual a la entidad de servicio de Batch](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="f187d-587">La subred especificada debe disponer de suficientes **direcciones IP** libres para alojar el número total de nodos de destino; es decir, la suma de las propiedades `targetDedicatedNodes` y `targetLowPriorityNodes` del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-587">The specified subnet should have enough free **IP addresses** to accommodate the total number of target nodes; that is, the sum of the `targetDedicatedNodes` and `targetLowPriorityNodes` properties of the pool.</span></span> <span data-ttu-id="f187d-588">Si la subred no tiene suficientes direcciones IP libres, el servicio Batch asigna parcialmente los nodos de proceso en el grupo y devuelve un error de cambio de tamaño.</span><span class="sxs-lookup"><span data-stu-id="f187d-588">If the subnet doesn't have enough free IP addresses, the Batch service partially allocates the compute nodes in the pool and returns a resize error.</span></span>

* <span data-ttu-id="f187d-589">La subred especificada debe permitir la comunicación del servicio Batch para poder programar tareas en los nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-589">The specified subnet must allow communication from the Batch service to be able to schedule tasks on the compute nodes.</span></span> <span data-ttu-id="f187d-590">Si un **grupo de seguridad de red (NSG)** asociado a la red virtual deniega la comunicación con los nodos de proceso, el servicio Batch establece el estado de dichos nodos en **No utilizable**.</span><span class="sxs-lookup"><span data-stu-id="f187d-590">If communication to the compute nodes is denied by a **Network Security Group (NSG)** associated with the VNet, then the Batch service sets the state of the compute nodes to **unusable**.</span></span>

* <span data-ttu-id="f187d-591">Si la red virtual especificada tiene **grupos de seguridad de red (NSG)** o un **firewall** asociados, será preciso habilitar varios puertos del sistema reservados para las comunicaciones entrantes:</span><span class="sxs-lookup"><span data-stu-id="f187d-591">If the specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="f187d-592">Para los grupos creados con una configuración de máquina virtual, habilite los puertos 29876 y 29877, así como el puerto 22 para Linux y el 3389 para Windows.</span><span class="sxs-lookup"><span data-stu-id="f187d-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="f187d-593">Para los grupos creados con una configuración de servicio en la nube, habilite los puertos 10100, 20100 y 30100.</span><span class="sxs-lookup"><span data-stu-id="f187d-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="f187d-594">Habilite las conexiones salientes a Azure Storage en el puerto 443.</span><span class="sxs-lookup"><span data-stu-id="f187d-594">Enable outbound connections to Azure Storage on port 443.</span></span> <span data-ttu-id="f187d-595">Además, asegúrese de que todos los servidores DNS personalizados que dan servicio a red virtual pueden resolver el punto de conexión de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f187d-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="f187d-596">En concreto, las direcciones URL del tipo `<account>.table.core.windows.net` debe poderse resolver.</span><span class="sxs-lookup"><span data-stu-id="f187d-596">Specifically, a URL of the form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="f187d-597">En la tabla siguiente se describen los puertos de entrada que debe habilitar para los grupos que ha creado con la configuración de la máquina virtual:</span><span class="sxs-lookup"><span data-stu-id="f187d-597">The following table describes the inbound ports that you need to enable for pools that you created with the virtual machine configuration:</span></span>

    |    <span data-ttu-id="f187d-598">Puertos de destino</span><span class="sxs-lookup"><span data-stu-id="f187d-598">Destination Port(s)</span></span>    |    <span data-ttu-id="f187d-599">Dirección IP de origen</span><span class="sxs-lookup"><span data-stu-id="f187d-599">Source IP address</span></span>      |    <span data-ttu-id="f187d-600">¿Agrega Batch los grupos de seguridad de red?</span><span class="sxs-lookup"><span data-stu-id="f187d-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="f187d-601">¿Es necesario para que la máquina virtual se pueda usar?</span><span class="sxs-lookup"><span data-stu-id="f187d-601">Required for VM to be usable?</span></span>    |    <span data-ttu-id="f187d-602">Acción del usuario</span><span class="sxs-lookup"><span data-stu-id="f187d-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="f187d-603">Para los grupos creados con la configuración de máquina virtual 29876 y 29877</span><span class="sxs-lookup"><span data-stu-id="f187d-603">For pools created with the virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="f187d-604">Para los grupos creados con la configuración de servicio en la nube 10100, 20100 y 30100</span><span class="sxs-lookup"><span data-stu-id="f187d-604">For pools created with the cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="f187d-605">Solo direcciones IP de rol de servicio de Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="f187d-606">Sí.</span><span class="sxs-lookup"><span data-stu-id="f187d-606">Yes.</span></span> <span data-ttu-id="f187d-607">Batch agrega los grupos de seguridad de red en el nivel de las interfaces de red (NIC) que se conectan a las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f187d-607">Batch adds NSGs at the level of network interfaces (NIC) attached to VMs.</span></span> <span data-ttu-id="f187d-608">Estos grupos de seguridad de red permiten el tráfico únicamente desde las direcciones IP de rol de servicio de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="f187d-609">Aunque abra estos puertos para todo el sitio web, el tráfico se bloqueará en la NIC.</span><span class="sxs-lookup"><span data-stu-id="f187d-609">Even if you open these ports for the  entire web, the traffic will get blocked at the NIC.</span></span> |    <span data-ttu-id="f187d-610">Sí</span><span class="sxs-lookup"><span data-stu-id="f187d-610">Yes</span></span>  |  <span data-ttu-id="f187d-611">No es necesario especificar un grupo de seguridad de red, ya que Batch solo permite direcciones IP de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-611">You do not need to specify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="f187d-612">Sin embargo, si lo hace, asegúrese de que estos puertos estén abiertos al tráfico entrante.</span><span class="sxs-lookup"><span data-stu-id="f187d-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="f187d-613">Si especifica * como dirección IP de origen en el grupo de seguridad de red, Batch seguirá agregando grupos de seguridad de red en el nivel de la NIC conectada a las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f187d-613">If you specify * as the source IP in your NSG, Batch still adds NSGs at the level of NIC attached to VMs.</span></span> |
    |    <span data-ttu-id="f187d-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="f187d-614">3389, 22</span></span>               |    <span data-ttu-id="f187d-615">Máquinas de usuario de depuración, para poder acceder a la máquina virtual de manera remota.</span><span class="sxs-lookup"><span data-stu-id="f187d-615">User machines, used for debugging purposes, so that you can remotely access the VM.</span></span>    |    <span data-ttu-id="f187d-616">No</span><span class="sxs-lookup"><span data-stu-id="f187d-616">No</span></span>                                    |    <span data-ttu-id="f187d-617">No</span><span class="sxs-lookup"><span data-stu-id="f187d-617">No</span></span>                     |    <span data-ttu-id="f187d-618">Agregue grupos de seguridad de red si desea permitir el acceso remoto (RDP/SSH) a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f187d-618">Add NSGs if you want to permit remote access (RDP/SSH) to the VM.</span></span>   |                 

    <span data-ttu-id="f187d-619">En la tabla siguiente se describe el puerto de salida que se debe habilitar para permitir el acceso a Azure Storage:</span><span class="sxs-lookup"><span data-stu-id="f187d-619">The following table describes the outbound port that you need to enable to permit access to Azure Storage:</span></span>

    |    <span data-ttu-id="f187d-620">Puertos de salida</span><span class="sxs-lookup"><span data-stu-id="f187d-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="f187d-621">Destino</span><span class="sxs-lookup"><span data-stu-id="f187d-621">Destination</span></span>    |    <span data-ttu-id="f187d-622">¿Agrega Batch los grupos de seguridad de red?</span><span class="sxs-lookup"><span data-stu-id="f187d-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="f187d-623">¿Es necesario para que la máquina virtual se pueda usar?</span><span class="sxs-lookup"><span data-stu-id="f187d-623">Required for VM to be usable?</span></span>    |    <span data-ttu-id="f187d-624">Acción del usuario</span><span class="sxs-lookup"><span data-stu-id="f187d-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="f187d-625">443</span><span class="sxs-lookup"><span data-stu-id="f187d-625">443</span></span>    |    <span data-ttu-id="f187d-626">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="f187d-626">Azure Storage</span></span>    |    <span data-ttu-id="f187d-627">No</span><span class="sxs-lookup"><span data-stu-id="f187d-627">No</span></span>    |    <span data-ttu-id="f187d-628">Sí</span><span class="sxs-lookup"><span data-stu-id="f187d-628">Yes</span></span>    |    <span data-ttu-id="f187d-629">Si agrega algún grupo de seguridad de red, asegúrese de que este puerto esté abierto al tráfico saliente.</span><span class="sxs-lookup"><span data-stu-id="f187d-629">If you add any NSGs, then ensure that this port is open to outbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="f187d-630">Escalado de recursos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-630">Scaling compute resources</span></span>
<span data-ttu-id="f187d-631">Con el [escalado automático](batch-automatic-scaling.md), el servicio Batch puede ajustar dinámicamente el número de nodos de proceso de un grupo según la carga de trabajo actual y el uso de los recursos en el escenario de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-631">With [automatic scaling](batch-automatic-scaling.md), you can have the Batch service dynamically adjust the number of compute nodes in a pool according to the current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="f187d-632">Esto le permite reducir el costo general de la ejecución de la aplicación usando solo los recursos que necesita, y liberando los que no.</span><span class="sxs-lookup"><span data-stu-id="f187d-632">This allows you to lower the overall cost of running your application by using only the resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="f187d-633">Para habilitar el escalado automático, escriba una [fórmula de escalado automático](batch-automatic-scaling.md#automatic-scaling-formulas) y asóciela con un grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="f187d-634">El servicio Batch usa la fórmula para determinar el número objetivo de nodos del grupo para el siguiente intervalo de escalado (un intervalo que puede configurar).</span><span class="sxs-lookup"><span data-stu-id="f187d-634">The Batch service uses the formula to determine the target number of nodes in the pool for the next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="f187d-635">Puede especificar la configuración de escalado automático para un grupo cuando lo cree o habilitar el escalado en un grupo más adelante.</span><span class="sxs-lookup"><span data-stu-id="f187d-635">You can specify the automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="f187d-636">También puede actualizar la configuración de escalado en un grupo habilitado para el escalado.</span><span class="sxs-lookup"><span data-stu-id="f187d-636">You can also update the scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="f187d-637">Como ejemplo, quizás un trabajo requiera que envíe un gran número de tareas para que se ejecuten.</span><span class="sxs-lookup"><span data-stu-id="f187d-637">As an example, perhaps a job requires that you submit a very large number of tasks to be executed.</span></span> <span data-ttu-id="f187d-638">Puede asignar al grupo una fórmula de escalado que ajuste el número de nodos del grupo en función del número actual de tareas en cola y la tasa de finalización de las tareas del trabajo.</span><span class="sxs-lookup"><span data-stu-id="f187d-638">You can assign a scaling formula to the pool that adjusts the number of nodes in the pool based on the current number of queued tasks and the completion rate of the tasks in the job.</span></span> <span data-ttu-id="f187d-639">El servicio Batch evalúa periódicamente la fórmula y cambia el tamaño del grupo en función de la carga de trabajo y del resto de ajustes de configuración de la fórmula.</span><span class="sxs-lookup"><span data-stu-id="f187d-639">The Batch service periodically evaluates the formula and resizes the pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="f187d-640">El servicio agrega nodos según sea necesario cuando haya un gran número de tareas en cola y quita los nodos cuando no haya ninguna tarea en cola o en ejecución.</span><span class="sxs-lookup"><span data-stu-id="f187d-640">The service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="f187d-641">Una fórmula de escalado puede basarse en las siguientes métricas:</span><span class="sxs-lookup"><span data-stu-id="f187d-641">A scaling formula can be based on the following metrics:</span></span>

* <span data-ttu-id="f187d-642">**Métricas de tiempo** : se basan en las estadísticas recopiladas cada cinco minutos en el número especificado de horas.</span><span class="sxs-lookup"><span data-stu-id="f187d-642">**Time metrics** are based on statistics collected every five minutes in the specified number of hours.</span></span>
* <span data-ttu-id="f187d-643">**Métricas de recursos** : se basan en el uso de CPU, ancho de banda y memoria y en el número de nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="f187d-644">**Métricas de tareas**: se basan en el estado de la tarea, como *Activa* (en cola), *En ejecución* o *Completada*.</span><span class="sxs-lookup"><span data-stu-id="f187d-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="f187d-645">Cuando el escalado automático reduce el número de nodos de proceso en un grupo, debe considerar cómo administrará las tareas que se están ejecutando en el momento en que se realiza la operación de reducción.</span><span class="sxs-lookup"><span data-stu-id="f187d-645">When automatic scaling decreases the number of compute nodes in a pool, you must consider how to handle tasks that are running at the time of the decrease operation.</span></span> <span data-ttu-id="f187d-646">Para ello, Batch proporciona una *opción de desasignación de nodos* que se puede incluir en las fórmulas.</span><span class="sxs-lookup"><span data-stu-id="f187d-646">To accommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="f187d-647">Por ejemplo, puede especificar que las tareas en ejecución se detengan de inmediato, se detengan de inmediato y después se vuelvan a poner en cola para ejecutarlas en otro nodo o se dejen finalizar antes de que se quite el nodo del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed to finish before the node is removed from the pool.</span></span>

<span data-ttu-id="f187d-648">Para obtener más información sobre cómo escalar automáticamente una aplicación, consulte [Escalado automático de nodos de proceso en un grupo de Azure Batch](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="f187d-649">Para maximizar el uso de los recursos de proceso, establezca en cero el número objetivo de nodos al final de un trabajo, pero permita que las tareas en ejecución finalicen.</span><span class="sxs-lookup"><span data-stu-id="f187d-649">To maximize compute resource utilization, set the target number of nodes to zero at the end of a job, but allow running tasks to finish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="f187d-650">Seguridad con certificados</span><span class="sxs-lookup"><span data-stu-id="f187d-650">Security with certificates</span></span>
<span data-ttu-id="f187d-651">Normalmente necesitará usar certificados al cifrar o descifrar información confidencial para las tareas, como la clave de una [cuenta de Azure Storage][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="f187d-651">You typically need to use certificates when you encrypt or decrypt sensitive information for tasks, like the key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="f187d-652">Para ello, puede instalar certificados en los nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-652">To support this, you can install certificates on nodes.</span></span> <span data-ttu-id="f187d-653">Los secretos cifrados se pasan a las tareas mediante parámetros de línea de comandos o se insertan en uno de los recursos de tarea, y los certificados instalados se pueden usar para descifrarlos.</span><span class="sxs-lookup"><span data-stu-id="f187d-653">Encrypted secrets are passed to tasks via command-line parameters or embedded in one of the task resources, and the installed certificates can be used to decrypt them.</span></span>

<span data-ttu-id="f187d-654">Use la operación [Agregar certificado][rest_add_cert] (REST de Batch) o el método [CertificateOperations.CreateCertificate][net_create_cert] (.NET de Batch) para agregar un certificado a una cuenta de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-654">You use the [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) to add a certificate to a Batch account.</span></span> <span data-ttu-id="f187d-655">Se puede asociar el certificado a un grupo nuevo o existente.</span><span class="sxs-lookup"><span data-stu-id="f187d-655">You can then associate the certificate with a new or existing pool.</span></span> <span data-ttu-id="f187d-656">Cuando se asocia un certificado a un grupo, el servicio Batch instala el certificado en cada nodo del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-656">When a certificate is associated with a pool, the Batch service installs the certificate on each node in the pool.</span></span> <span data-ttu-id="f187d-657">El servicio Batch instala los certificados adecuados cuando se inicia el nodo, antes de iniciar ninguna tarea (incluidas la de inicio y la del administrador de trabajos).</span><span class="sxs-lookup"><span data-stu-id="f187d-657">The Batch service installs the appropriate certificates when the node starts up, before launching any tasks (including the start task and job manager task).</span></span>

<span data-ttu-id="f187d-658">Si se agregan certificados a un grupo *existente* , es preciso reiniciar los nodos de proceso de los certificados que se van a aplicar a los nodos.</span><span class="sxs-lookup"><span data-stu-id="f187d-658">If you add certificates to an *existing* pool, you must reboot its compute nodes for the certificates to be applied to the nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="f187d-659">Control de errores</span><span class="sxs-lookup"><span data-stu-id="f187d-659">Error handling</span></span>
<span data-ttu-id="f187d-660">Esta operación puede ser necesaria para controlar los errores de las tareas y las aplicaciones en la solución de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-660">You might find it necessary to handle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="f187d-661">Control de errores de tareas</span><span class="sxs-lookup"><span data-stu-id="f187d-661">Task failure handling</span></span>
<span data-ttu-id="f187d-662">Los errores de las tareas se incluyen en estas categorías:</span><span class="sxs-lookup"><span data-stu-id="f187d-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="f187d-663">**Errores de procesamiento previo**</span><span class="sxs-lookup"><span data-stu-id="f187d-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="f187d-664">Si una tarea no se inicia, se establece un error de procesamiento previo para la misma.</span><span class="sxs-lookup"><span data-stu-id="f187d-664">If a task fails to start, a pre-processing error is set for the task.</span></span>  

    <span data-ttu-id="f187d-665">Se pueden producir errores de procesamiento previo si se han movido los archivos de recursos de la tarea, la cuenta de Storage deja de estar disponible u ha surgido algún otro problema que ha impedido la copia correcta de los archivos en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-665">Pre-processing errors can occur if the task's resource files have moved, the Storage account is no longer available, or another issue was encountered that prevented the successful copying of files to the node.</span></span>

* <span data-ttu-id="f187d-666">**Errores de carga de archivos**</span><span class="sxs-lookup"><span data-stu-id="f187d-666">**File upload failures**</span></span>

    <span data-ttu-id="f187d-667">Si por cualquier motivo no se realiza la carga de archivos especificados para una tarea, se establece un error de carga de archivos para la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for the task.</span></span>

    <span data-ttu-id="f187d-668">Los errores de carga de archivos se pueden producir si el SAS suministrado para acceder a Azure Storage no es válido o no proporciona permisos de escritura, si la cuenta de Storage no está disponible o si ha surgido cualquier otro problema que ha impedido la copia correcta de los archivos desde el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-668">File upload errors can occur if the SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if the storage account is no longer available, or if another issue was encountered that prevented the successful copying of files from the node.</span></span>    

* <span data-ttu-id="f187d-669">**Errores de aplicación**</span><span class="sxs-lookup"><span data-stu-id="f187d-669">**Application failures**</span></span>

    <span data-ttu-id="f187d-670">El proceso especificado por la línea de comandos de la tarea también puede presentar errores.</span><span class="sxs-lookup"><span data-stu-id="f187d-670">The process that is specified by the task's command line can also fail.</span></span> <span data-ttu-id="f187d-671">Se considera que el proceso ha generado un error cuando el proceso ejecutado por la tarea devuelve un código de salida distinto de cero (consulte *Códigos de salida de la tarea* en la siguiente sección).</span><span class="sxs-lookup"><span data-stu-id="f187d-671">The process is deemed to have failed when a nonzero exit code is returned by the process that is executed by the task (see *Task exit codes* in the next section).</span></span>

    <span data-ttu-id="f187d-672">Para los errores de aplicaciones, puede configurar el servicio Batch para volver a intentar automáticamente la tarea hasta un número especificado de veces.</span><span class="sxs-lookup"><span data-stu-id="f187d-672">For application failures, you can configure Batch to automatically retry the task up to a specified number of times.</span></span>

* <span data-ttu-id="f187d-673">**Errores de restricción**</span><span class="sxs-lookup"><span data-stu-id="f187d-673">**Constraint failures**</span></span>

    <span data-ttu-id="f187d-674">Puede establecer una restricción que especifique la duración máxima de ejecución de un trabajo o una tarea con *maxWallClockTime*.</span><span class="sxs-lookup"><span data-stu-id="f187d-674">You can set a constraint that specifies the maximum execution duration for a job or task, the *maxWallClockTime*.</span></span> <span data-ttu-id="f187d-675">Esto puede ser útil para terminar las tareas que no avanzan.</span><span class="sxs-lookup"><span data-stu-id="f187d-675">This can be useful for terminating tasks that fail to progress.</span></span>

    <span data-ttu-id="f187d-676">Cuando se supere la cantidad máxima de tiempo, la tarea se marcará como *completada* pero el código de salida se establecerá en `0xC000013A` y el campo *schedulingError* se marcará como `{ category:"ServerError", code="TaskEnded"}`.</span><span class="sxs-lookup"><span data-stu-id="f187d-676">When the maximum amount of time has been exceeded, the task is marked as *completed*, but the exit code is set to `0xC000013A` and the *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="f187d-677">Depuración de errores de aplicación</span><span class="sxs-lookup"><span data-stu-id="f187d-677">Debugging application failures</span></span>
* <span data-ttu-id="f187d-678">`stderr` y `stdout`</span><span class="sxs-lookup"><span data-stu-id="f187d-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="f187d-679">Durante la ejecución, una aplicación produce resultados de diagnóstico que se pueden usar para la solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="f187d-679">During execution, an application might produce diagnostic output that you can use to troubleshoot issues.</span></span> <span data-ttu-id="f187d-680">Como se mencionó en la sección anterior llamada [Archivos y directorios](#files-and-directories), el servicio Batch escribe resultados de salida estándar y error estándar en los archivos `stdout.txt` y `stderr.txt` ubicados en el directorio de la tarea en el nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-680">As mentioned in the earlier section [Files and directories](#files-and-directories), the Batch service writes standard output and standard error output to `stdout.txt` and `stderr.txt` files in the task directory on the compute node.</span></span> <span data-ttu-id="f187d-681">Para descargar estos archivos, puede usar Azure Portal, o bien uno de los SDK de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-681">You can use the Azure portal or one of the Batch SDKs to download these files.</span></span> <span data-ttu-id="f187d-682">Por ejemplo, puede recuperar estos y otros archivos para solucionar problemas con [ComputeNode.GetNodeFile][net_getfile_node] y [CloudTask.GetNodeFile][net_getfile_task] en la biblioteca .NET de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in the Batch .NET library.</span></span>

* <span data-ttu-id="f187d-683">**Códigos de salida de la tarea**</span><span class="sxs-lookup"><span data-stu-id="f187d-683">**Task exit codes**</span></span>

    <span data-ttu-id="f187d-684">Como ya se mencionó anteriormente, el servicio Batch marcará una tarea como con errores si el proceso ejecutado por la tarea devuelve un código de salida distinto de cero.</span><span class="sxs-lookup"><span data-stu-id="f187d-684">As mentioned earlier, a task is marked as failed by the Batch service if the process that is executed by the task returns a nonzero exit code.</span></span> <span data-ttu-id="f187d-685">Cuando una tarea ejecuta un proceso, Batch rellena la propiedad de código de salida de la tarea con el *código de retorno del proceso*.</span><span class="sxs-lookup"><span data-stu-id="f187d-685">When a task executes a process, Batch populates the task's exit code property with the *return code of the process*.</span></span> <span data-ttu-id="f187d-686">Es importante tener en cuenta que el código de salida de una tarea **no** lo determina el servicio Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-686">It is important to note that a task's exit code is **not** determined by the Batch service.</span></span> <span data-ttu-id="f187d-687">El código de salida de una tarea lo determina el proceso en sí o el sistema operativo en que se ejecuta el proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-687">A task's exit code is determined by the process itself or the operating system on which the process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="f187d-688">Consideraciones sobre errores o interrupciones</span><span class="sxs-lookup"><span data-stu-id="f187d-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="f187d-689">En ocasiones, las tareas pueden presentar errores o interrumpirse.</span><span class="sxs-lookup"><span data-stu-id="f187d-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="f187d-690">Se podría producir un error en la propia aplicación de la tarea, se podría reiniciar el nodo donde se ejecuta la tarea o se podría quitar el nodo del grupo durante una operación de cambio de tamaño si la directiva de desasignación del grupo está configurada para quitar los nodos de inmediato, sin esperar a que finalicen las tareas.</span><span class="sxs-lookup"><span data-stu-id="f187d-690">The task application itself might fail, the node on which the task is running might be rebooted, or the node might be removed from the pool during a resize operation if the pool's deallocation policy is set to remove nodes immediately without waiting for tasks to finish.</span></span> <span data-ttu-id="f187d-691">En todos los casos, el servicio Batch puede volver a poner la tarea automáticamente en la cola para ejecutarla en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-691">In all cases, the task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="f187d-692">También es posible que un problema intermitente haga que una tarea deje de responder o tarde demasiado tiempo en ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="f187d-692">It is also possible for an intermittent issue to cause a task to hang or take too long to execute.</span></span> <span data-ttu-id="f187d-693">Puede establecer el intervalo de ejecución máximo para una tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-693">You can set the maximum execution interval for a task.</span></span> <span data-ttu-id="f187d-694">Si se supera, el servicio Batch interrumpe la aplicación de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-694">If the maximum execution interval is exceeded, the Batch service interrupts the task application.</span></span>

### <a name="connecting-to-compute-nodes"></a><span data-ttu-id="f187d-695">Conexión a los nodos de proceso</span><span class="sxs-lookup"><span data-stu-id="f187d-695">Connecting to compute nodes</span></span>
<span data-ttu-id="f187d-696">Puede realizar tareas adicionales de depuración y solución de problemas si se inicia una sesión remota en un nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="f187d-696">You can perform additional debugging and troubleshooting by signing in to a compute node remotely.</span></span> <span data-ttu-id="f187d-697">Puede usar Azure Portal para descargar un protocolo de escritorio remoto (RDP) para los nodos de Windows y obtener información de conexión de Secure Shell (SSH) para los nodos de Linux.</span><span class="sxs-lookup"><span data-stu-id="f187d-697">You can use the Azure portal to download a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="f187d-698">También puede hacer esto con las API de Batch, como [.NET de Batch][net_rdpfile] o [Python de Batch](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span><span class="sxs-lookup"><span data-stu-id="f187d-698">You can also do this by using the Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f187d-699">Para conectarse a un nodo a través de RDP o SSH, primero debe crear un usuario en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-699">To connect to a node via RDP or SSH, you must first create a user on the node.</span></span> <span data-ttu-id="f187d-700">Para ello, puede usar Azure Portal, [agregar una cuenta de usuario a un nodo][rest_create_user] con la API de REST de Batch y llamar al método [ComputeNode.CreateComputeNodeUser][net_create_user] en .NET de Batch o al método [add_user][py_add_user] en el módulo Python de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-700">To do this, you can use the Azure portal, [add a user account to a node][rest_create_user] by using the Batch REST API, call the [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call the [add_user][py_add_user] method in the Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="f187d-701">Solución de problemas de nodos de proceso problemáticos</span><span class="sxs-lookup"><span data-stu-id="f187d-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="f187d-702">Si algunas de las tareas producen errores, el servicio o la aplicación de cliente de Batch pueden examinar los metadatos de las tareas con errores para identificar un nodo con un comportamiento incorrecto.</span><span class="sxs-lookup"><span data-stu-id="f187d-702">In situations where some of your tasks are failing, your Batch client application or service can examine the metadata of the failed tasks to identify a misbehaving node.</span></span> <span data-ttu-id="f187d-703">Cada nodo de un grupo recibe un identificador único y el nodo en el que se ejecuta una tarea se incluye en los metadatos de la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-703">Each node in a pool is given a unique ID, and the node on which a task runs is included in the task metadata.</span></span> <span data-ttu-id="f187d-704">Una vez que haya identificado un "nodo problemático", puede llevar a cabo varias acciones con él:</span><span class="sxs-lookup"><span data-stu-id="f187d-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="f187d-705">**Reiniciar el nodo** ([REST][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="f187d-705">**Reboot the node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="f187d-706">Algunas veces, reiniciar el nodo puede solucionar problemas latentes tales como los procesos bloqueados.</span><span class="sxs-lookup"><span data-stu-id="f187d-706">Restarting the node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="f187d-707">Tenga en cuenta que si su grupo usa una tarea de inicio o el trabajo usa una tarea de preparación de trabajo, se ejecutarán cuando el nodo se reinicie.</span><span class="sxs-lookup"><span data-stu-id="f187d-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when the node restarts.</span></span>
* <span data-ttu-id="f187d-708">**Restablecer la imagen inicial del nodo** ([REST][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="f187d-708">**Reimage the node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="f187d-709">Esto reinstala el sistema operativo en el nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-709">This reinstalls the operating system on the node.</span></span> <span data-ttu-id="f187d-710">Al igual que al reiniciar un nodo, las tareas de inicio y las tareas de preparación del trabajo se vuelven a ejecutar después de restablecer la imagen inicial del nodo.</span><span class="sxs-lookup"><span data-stu-id="f187d-710">As with rebooting a node, start tasks and job preparation tasks are rerun after the node has been reimaged.</span></span>
* <span data-ttu-id="f187d-711">**Quitar el nodo del grupo** ([REST][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="f187d-711">**Remove the node from the pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="f187d-712">A veces es necesario quitar completamente el nodo del grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-712">Sometimes it is necessary to completely remove the node from the pool.</span></span>
* <span data-ttu-id="f187d-713">**Deshabilitar la programación de tareas en el nodo** ([REST][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="f187d-713">**Disable task scheduling on the node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="f187d-714">Esto desconecta el nodo para que no se le asigne ninguna tarea adicional, pero permite que el nodo permanezca en ejecución y en el grupo.</span><span class="sxs-lookup"><span data-stu-id="f187d-714">This effectively takes the node offline so that no further tasks are assigned to it, but allows the node to remain running and in the pool.</span></span> <span data-ttu-id="f187d-715">Esto permite seguir investigando la causa de los errores sin perder los datos de la tarea con errores, y sin que el nodo produzca más errores en la tarea.</span><span class="sxs-lookup"><span data-stu-id="f187d-715">This enables you to perform further investigation into the cause of the failures without losing the failed task's data, and without the node causing additional task failures.</span></span> <span data-ttu-id="f187d-716">Por ejemplo, puede deshabilitar la programación de tareas en el nodo y después [iniciar una sesión remota](#connecting-to-compute-nodes) para examinar los registros de eventos del nodo o solucionar otros problemas.</span><span class="sxs-lookup"><span data-stu-id="f187d-716">For example, you can disable task scheduling on the node, then [sign in remotely](#connecting-to-compute-nodes) to examine the node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="f187d-717">Una vez que haya terminado la investigación, puede volver a conectar el nodo, para lo que debe habilitar la programación de tareas ([REST][rest_online] | [.NET][net_online]), o bien puede realizar una de las otras acciones mencionadas antes.</span><span class="sxs-lookup"><span data-stu-id="f187d-717">After you've finished your investigation, you can then bring the node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of the other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f187d-718">Con cada una de las acciones descritas en esta sección (reiniciar, restablecer la imagen inicial, quitar, deshabilitar la programación de tareas), puede especificar cómo se controlan las tareas que se están ejecutando en el nodo al realizar la acción.</span><span class="sxs-lookup"><span data-stu-id="f187d-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able to specify how tasks currently running on the node are handled when you perform the action.</span></span> <span data-ttu-id="f187d-719">Por ejemplo, cuando deshabilita la programación de tareas en un nodo con la biblioteca de cliente .NET de Batch, puede indicar un valor de enumeración [DisableComputeNodeSchedulingOption][net_offline_option] para especificar si se finalizarán las tareas en ejecución (**Terminate**), si se volverán a poner en la cola para que se programen en otros nodos (**Requeue**) o si se permitirá que se completen antes de realizar la acción (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="f187d-719">For example, when you disable task scheduling on a node by using the Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value to specify whether to **Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks to complete before performing the action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="f187d-720">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f187d-720">Next steps</span></span>
* <span data-ttu-id="f187d-721">Obtenga información acerca de las [API y herramientas de Batch](batch-apis-tools.md) disponibles para la creación de soluciones de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-721">Learn about the [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="f187d-722">Recorra paso a paso una aplicación de Batch de ejemplo en [Introducción a la biblioteca de Azure Batch para .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-722">Walk through a sample Batch application step-by-step in [Get started with the Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="f187d-723">También existe una [versión para Python](batch-python-tutorial.md) del tutorial, en la que se ejecuta una carga de trabajo en nodos de proceso de Linux.</span><span class="sxs-lookup"><span data-stu-id="f187d-723">There is also a [Python version](batch-python-tutorial.md) of the tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="f187d-724">Descargue y compile el proyecto de ejemplo [Batch Explorer][github_batchexplorer] para usarlo mientras desarrolla sus soluciones de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-724">Download and build the [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="f187d-725">Mediante Batch Explorer puede realizar lo siguiente y mucho más:</span><span class="sxs-lookup"><span data-stu-id="f187d-725">Using the Batch Explorer, you can perform the following and more:</span></span>

  * <span data-ttu-id="f187d-726">Supervisar y manipular grupos, trabajos y tareas dentro de su cuenta de Batch</span><span class="sxs-lookup"><span data-stu-id="f187d-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="f187d-727">Descargar `stdout.txt`, `stderr.txt`, y otros archivos de los nodos</span><span class="sxs-lookup"><span data-stu-id="f187d-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="f187d-728">Crear usuarios en los nodos y descargar archivos RDP para el inicio de sesión remoto.</span><span class="sxs-lookup"><span data-stu-id="f187d-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="f187d-729">Aprenda a [crear grupos de nodos de proceso de Linux](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="f187d-729">Learn how to [create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="f187d-730">Visite el [foro de Azure Batch][batch_forum] en MSDN.</span><span class="sxs-lookup"><span data-stu-id="f187d-730">Visit the [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="f187d-731">El foro es un buen lugar donde plantear preguntas tanto si está aprendiendo como si tiene experiencia en el uso de Batch.</span><span class="sxs-lookup"><span data-stu-id="f187d-731">The forum is a good place to ask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/

---
title: aaaMonitor progreso del trabajo por el recuento de las tareas por estado - Azure Batch | Documentos de Microsoft
description: "Supervisar el progreso de Hola de un trabajo mediante una llamada a operación obtener recuentos de tarea de hello toocount tareas para un trabajo. Puede obtener un recuento de las tareas activas, en ejecución y completadas, y de las tareas que se realizaron correctamente o no."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/02/2017
ms.author: tamram
ms.openlocfilehash: 03957d8a3d678bf44587f3bc7f988a76885c2af0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="count-tasks-by-state-toomonitor-a-jobs-progress-preview"></a><span data-ttu-id="78754-104">Recuento de tareas por estado toomonitor progreso del trabajo (vista previa)</span><span class="sxs-lookup"><span data-stu-id="78754-104">Count tasks by state toomonitor a job's progress (Preview)</span></span>

<span data-ttu-id="78754-105">Lote de Azure proporciona un progreso de hello toomonitor de manera eficaz de un trabajo mientras se ejecuta sus tareas.</span><span class="sxs-lookup"><span data-stu-id="78754-105">Azure Batch provides an efficient way toomonitor hello progress of a job as it runs its tasks.</span></span> <span data-ttu-id="78754-106">Puede llamar a hello [obtener recuentos de tarea] [ rest_get_task_counts] toofind operación cuántas tareas están en un estado activo, ejecución o completado, y el número tenga concluyó correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="78754-106">You can call hello [Get Task Counts][rest_get_task_counts] operation toofind out how many tasks are in an active, running, or completed state, and how many have succeeded or failed.</span></span> <span data-ttu-id="78754-107">Contando el número de Hola de tareas en cada estado, más fácilmente puede mostrar el usuario de tooa de progreso del trabajo de Hola o detectar retrasos inesperados o errores que pueden afectar al trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-107">By counting hello number of tasks in each state, you can more easily display hello job's progress tooa user, or detect unexpected delays or failures that may affect hello job.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="78754-108">Hola operación obtener recuentos de tareas está actualmente en vista previa y aún no está disponible en la administración pública de Azure y Azure China, Alemania de Azure.</span><span class="sxs-lookup"><span data-stu-id="78754-108">hello Get Task Counts operation is currently in preview, and is not yet available in Azure Government, Azure China, and Azure Germany.</span></span> 
>
>

## <a name="how-tasks-are-counted"></a><span data-ttu-id="78754-109">Recuento de las tareas</span><span class="sxs-lookup"><span data-stu-id="78754-109">How tasks are counted</span></span>

<span data-ttu-id="78754-110">Hola operación obtener recuentos de tarea cuenta tareas por estado, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="78754-110">hello Get Task Counts operation counts tasks by state, as follows:</span></span>

- <span data-ttu-id="78754-111">Una tarea se cuenta como **active** cuando está en cola y puede toorun, pero no está asignado actualmente tooa de nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="78754-111">A task is counted as **active** when it is queued and able toorun, but is not currently assigned tooa compute node.</span></span> <span data-ttu-id="78754-112">También se considera una tarea como **activa** si depende de una tarea primaria que no se ha completado.</span><span class="sxs-lookup"><span data-stu-id="78754-112">A task is also counted as **active** if it is dependent on a parent task that has not yet completed.</span></span> <span data-ttu-id="78754-113">Para obtener más información sobre las dependencias entre tareas, consulte [crear dependencias entre tareas toorun tareas que dependen de otras tareas](batch-task-dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="78754-113">For more information on task dependencies, see [Create task dependencies toorun tasks that depend on other tasks](batch-task-dependencies.md).</span></span> 
- <span data-ttu-id="78754-114">Una tarea se cuenta como **ejecuta** cuando se ha asignado el nodo de proceso de tooa, pero no se ha completado.</span><span class="sxs-lookup"><span data-stu-id="78754-114">A task is counted as **running** when it has been assigned tooa compute node, but has not yet completed.</span></span> <span data-ttu-id="78754-115">Una tarea se cuenta como **ejecutando** cuando su estado sea `preparing` o `running`, como se indica por hello [obtener información acerca de una tarea] [ rest_get_task] operación.</span><span class="sxs-lookup"><span data-stu-id="78754-115">A task is counted as **running** when its state is either `preparing` or `running`, as indicated by hello [Get information about a task][rest_get_task] operation.</span></span>
- <span data-ttu-id="78754-116">Una tarea se cuenta como **completado** cuando ya no es elegible toorun.</span><span class="sxs-lookup"><span data-stu-id="78754-116">A task is counted as **completed** when it is no longer eligible toorun.</span></span> <span data-ttu-id="78754-117">Una tarea que se cuenta como **completada** normalmente ha finalizado correctamente, o ha finalizado de forma incorrecta pero ha agotado su límite de reintentos.</span><span class="sxs-lookup"><span data-stu-id="78754-117">A task counted as **completed** has typically either finished successfully, or has finished unsuccessfully and has also exhausted its retry limit.</span></span> 

<span data-ttu-id="78754-118">Hola operación obtener recuentos de tareas también informa de cuántas tareas se realizó correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="78754-118">hello Get Task Counts operation also reports how many tasks have succeeded or failed.</span></span> <span data-ttu-id="78754-119">Lote determina si una tarea ha se ha realizado correctamente o no comprobando hello **resultado** propiedad de hello [executionInfo] [https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] propiedad:</span><span class="sxs-lookup"><span data-stu-id="78754-119">Batch determines whether a task has succeeded or failed by checking hello **result** property of hello [executionInfo][https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] property:</span></span>

    - <span data-ttu-id="78754-120">Una tarea se cuenta como **se realizó correctamente** si el resultado de hello de ejecución de la tarea es `success`.</span><span class="sxs-lookup"><span data-stu-id="78754-120">A task is counted as **succeeded** if hello result of task execution is `success`.</span></span>
    - <span data-ttu-id="78754-121">Una tarea se cuenta como **no se pudo** si el resultado de hello de ejecución de la tarea es `failure`.</span><span class="sxs-lookup"><span data-stu-id="78754-121">A task is counted as **failed** if hello result of task execution is `failure`.</span></span>

<span data-ttu-id="78754-122">Para más información sobre los estados de las tareas, consulte [Obtención de información sobre una tarea][rest_get_task].</span><span class="sxs-lookup"><span data-stu-id="78754-122">For more information about task states, see [Get information about a task][rest_get_task].</span></span>

<span data-ttu-id="78754-123">Hello .NET código siguiente muestra cómo tooretrieve tarea recuentos por estado:</span><span class="sxs-lookup"><span data-stu-id="78754-123">hello following .NET code sample shows how tooretrieve task counts by state:</span></span> 

```csharp
var taskCounts = await batchClient.JobOperations.GetTaskCountsAsync("job-1");

Console.WriteLine("Task count in active state: {0}", taskCounts.Active);
Console.WriteLine("Task count in preparing or running state: {0}", taskCounts.Running);
Console.WriteLine("Task count in completed state: {0}", taskCounts.Completed);
Console.WriteLine("Succeeded task count: {0}", taskCounts.Succeeded);
Console.WriteLine("Failed task count: {0}", taskCounts.Failed);
Console.WriteLine("ValidationStatus: {0}", taskCounts.ValidationStatus);
```

> [!NOTE]
> <span data-ttu-id="78754-124">Puede usar un patrón similar para REST y otros lenguajes compatibles tooget tarea recuentos para un trabajo.</span><span class="sxs-lookup"><span data-stu-id="78754-124">You can use a similar pattern for REST and other supported languages tooget task counts for a job.</span></span> 
> 
> 

## <a name="consistency-checking-for-task-counts"></a><span data-ttu-id="78754-125">Comprobación de coherencia de los recuentos de tareas</span><span class="sxs-lookup"><span data-stu-id="78754-125">Consistency checking for task counts</span></span>

<span data-ttu-id="78754-126">servicio de lote de Hello agrega recuentos de tarea mediante la recopilación de datos de varias partes de un sistema distribuido asincrónico.</span><span class="sxs-lookup"><span data-stu-id="78754-126">hello Batch service aggregates task counts by gathering data from multiple parts of an asynchronous distributed system.</span></span> <span data-ttu-id="78754-127">tooensure esa tarea recuentos son correctos, lote proporciona una validación adicional para los recuentos de estado mediante la realización de comprobaciones de coherencia en varios componentes del sistema de Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-127">tooensure that task counts are correct, Batch provides additional validation for state counts by performing consistency checks against multiple components of hello system.</span></span> <span data-ttu-id="78754-128">Lote realiza estas comprobaciones de coherencia mientras hay menos de 200.000 tareas en el trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-128">Batch performs these consistency checks as long as there are fewer than 200,000 tasks in hello job.</span></span> <span data-ttu-id="78754-129">En hello improbable que la comprobación de coherencia Hola encuentra errores, lote corrige resultado de hello de operación de obtener recuentos de las tareas de hello en función de los resultados de Hola Hola de comprobación de coherencia.</span><span class="sxs-lookup"><span data-stu-id="78754-129">In hello unlikely event that hello consistency check finds errors, Batch corrects hello result of hello Get Tasks Counts operation based on hello results of hello consistency check.</span></span> <span data-ttu-id="78754-130">Hola comprobación de coherencia es un tooensure medida adicional que los clientes que se basan en hello operación obtener recuentos de tarea obtienen información adecuada de Hola que necesita para su solución.</span><span class="sxs-lookup"><span data-stu-id="78754-130">hello consistency check is an extra measure tooensure that customers who rely on hello Get Task Counts operation get hello right information they need for their solution.</span></span>

<span data-ttu-id="78754-131">Hola **validationStatus** propiedad en la respuesta de hello indica si el lote ha realizado la comprobación de coherencia Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-131">hello **validationStatus** property in hello response indicates whether Batch has performed hello consistency check.</span></span> <span data-ttu-id="78754-132">Si el lote no ha sido toocheck capaz de recuentos de estado con Estados real Hola mantenidos en el sistema de hello, Hola **validationStatus** propiedad se establece demasiado`unvalidated`.</span><span class="sxs-lookup"><span data-stu-id="78754-132">If Batch has not been able toocheck state counts against hello actual states held in hello system, then hello **validationStatus** property is set too`unvalidated`.</span></span> <span data-ttu-id="78754-133">Por motivos de rendimiento por lotes no realizará la comprobación de coherencia de hello si Hola trabajo incluye más de 200.000 tareas, Hola así **validationStatus** propiedad puede establecerse demasiado`unvalidated` en este caso.</span><span class="sxs-lookup"><span data-stu-id="78754-133">For performance reasons, Batch will not perform hello consistency check if hello job includes more than 200,000 tasks, so hello **validationStatus** property may be set too`unvalidated` in this case.</span></span> <span data-ttu-id="78754-134">Sin embargo, recuento de tareas de hello no es necesariamente incorrecto en este caso, tal y como es muy improbable que incluso una pérdida de datos muy limitados.</span><span class="sxs-lookup"><span data-stu-id="78754-134">However, hello task count is not necessarily wrong in this case, as even a very limited data loss is highly unlikely.</span></span> 

<span data-ttu-id="78754-135">Cuando una tarea cambia de estado, canalización de agregación de hello procesa el cambio de hello en pocos segundos.</span><span class="sxs-lookup"><span data-stu-id="78754-135">When a task changes state, hello aggregation pipeline processes hello change within few seconds.</span></span> <span data-ttu-id="78754-136">Hola operación obtener recuentos de tarea refleja recuentos de tarea hello actualizado dentro de ese período.</span><span class="sxs-lookup"><span data-stu-id="78754-136">hello Get Task Counts operation reflects hello updated task counts within that period.</span></span> <span data-ttu-id="78754-137">Sin embargo, si un cambio en un estado de la tarea de errores de canalización de agregación de hello, a continuación, cambio no es registra hasta el siguiente paso de validación Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-137">However, if hello aggregation pipeline misses a change in a task state, then that change is not registered until hello next validation pass.</span></span> <span data-ttu-id="78754-138">Durante este tiempo, recuentos de tareas pueden resultar ligeramente imprecisos debido toohello eventos que faltan, pero se ha corregido en el paso de validación siguiente Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-138">During this time, task counts may be slightly inaccurate due toohello missed event, but they are corrected on hello next validation pass.</span></span>

## <a name="best-practices-for-counting-a-jobs-tasks"></a><span data-ttu-id="78754-139">Procedimientos recomendados para el recuento de las tareas de un trabajo</span><span class="sxs-lookup"><span data-stu-id="78754-139">Best practices for counting a job's tasks</span></span>

<span data-ttu-id="78754-140">Llamar a la operación obtener recuentos de tarea de hello es tooreturn de manera más eficaz de hello un recuento básico de las tareas de un trabajo por estado.</span><span class="sxs-lookup"><span data-stu-id="78754-140">Calling hello Get Task Counts operation is hello most efficient way tooreturn a basic count of a job's tasks by state.</span></span> <span data-ttu-id="78754-141">Si está utilizando la versión de servicio de lote de 2017-06-01.5.1, se recomienda escribir o actualizar su toouse código obtener recuentos de tarea.</span><span class="sxs-lookup"><span data-stu-id="78754-141">If you are using Batch service version 2017-06-01.5.1, we recommend writing or updating your code toouse Get Task Counts.</span></span>

<span data-ttu-id="78754-142">Hola operación obtener recuentos de tarea no está disponible en las versiones de servicio de lote anteriores a 2017-06-01.5.1.</span><span class="sxs-lookup"><span data-stu-id="78754-142">hello Get Task Counts operation is not available in Batch service versions earlier than 2017-06-01.5.1.</span></span> <span data-ttu-id="78754-143">Si está utilizando una versión anterior del servicio de hello, a continuación, utilice una lista de tareas de toocount de consulta en un trabajo en su lugar.</span><span class="sxs-lookup"><span data-stu-id="78754-143">If you are using an older version of hello service, then use a list query toocount tasks in a job instead.</span></span> <span data-ttu-id="78754-144">Para obtener más información, consulte [crear consultas eficazmente los recursos de proceso por lotes toolist](batch-efficient-list-queries.md).</span><span class="sxs-lookup"><span data-stu-id="78754-144">For more information, see [Create queries toolist Batch resources efficiently](batch-efficient-list-queries.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="78754-145">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="78754-145">Next steps</span></span>

* <span data-ttu-id="78754-146">Vea hello [Introducción a la característica por lotes](batch-api-basics.md) toolearn más información sobre características y conceptos del servicio por lotes.</span><span class="sxs-lookup"><span data-stu-id="78754-146">See hello [Batch feature overview](batch-api-basics.md) toolearn more about Batch service concepts and features.</span></span> <span data-ttu-id="78754-147">Hola artículo describe los recursos de proceso por lotes principales hello como grupos, los nodos de proceso, trabajos y tareas y proporciona información general de las características del servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="78754-147">hello article discusses hello primary Batch resources such as pools, compute nodes, jobs, and tasks, and provides an overview of hello service's features.</span></span>
* <span data-ttu-id="78754-148">Información sobre conceptos básicos de Hola de desarrollar una aplicación habilitada por lotes con hello [biblioteca de cliente .NET de lote](batch-dotnet-get-started.md) o [Python](batch-python-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="78754-148">Learn hello basics of developing a Batch-enabled application using hello [Batch .NET client library](batch-dotnet-get-started.md) or [Python](batch-python-tutorial.md).</span></span> <span data-ttu-id="78754-149">Estos artículos introductorios guiarán a través de una aplicación que utiliza tooexecute de servicio de lote de hello una carga de trabajo en varios nodos de ejecución.</span><span class="sxs-lookup"><span data-stu-id="78754-149">These introductory articles guide you through a working application that uses hello Batch service tooexecute a workload on multiple compute nodes.</span></span>


[rest_get_task_counts]: https://docs.microsoft.com/rest/api/batchservice/get-the-task-counts-for-a-job
[rest_get_task]: https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task
[rest_list_tasks]: https://docs.microsoft.com/rest/api/batchservice/list-the-tasks-associated-with-a-job

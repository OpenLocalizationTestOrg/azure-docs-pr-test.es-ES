---
title: "aaaInput validación - herramienta de modelado de amenazas de Microsoft - Azure | Documentos de Microsoft"
description: mitigaciones en busca de amenazas que se exponen en hello herramienta de modelado de amenazas
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="4717d-103">Marco de seguridad: Validación de entrada | Mitigaciones</span><span class="sxs-lookup"><span data-stu-id="4717d-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="4717d-104">Producto o servicio</span><span class="sxs-lookup"><span data-stu-id="4717d-104">Product/Service</span></span> | <span data-ttu-id="4717d-105">Artículo</span><span class="sxs-lookup"><span data-stu-id="4717d-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="4717d-106">**Aplicación web**</span><span class="sxs-lookup"><span data-stu-id="4717d-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="4717d-107">Deshabilite el scripting XSLT para todas las transformaciones mediante hojas de estilos no de confianza</span><span class="sxs-lookup"><span data-stu-id="4717d-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="4717d-108">Compruebe que cada página que pueda incluir contenido controlable por el usuario quede excluida del rastreo de MIME automático</span><span class="sxs-lookup"><span data-stu-id="4717d-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="4717d-109">Proteja o deshabilite la resolución de entidades XML</span><span class="sxs-lookup"><span data-stu-id="4717d-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="4717d-110">Las aplicaciones que usan http.sys realizan la comprobación de canonización de URL</span><span class="sxs-lookup"><span data-stu-id="4717d-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="4717d-111">Asegúrese de que los controles adecuados estén en vigor al aceptar archivos de usuarios</span><span class="sxs-lookup"><span data-stu-id="4717d-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="4717d-112">Asegúrese de que se usen parámetros con seguridad de tipos en la aplicación web para el acceso a datos</span><span class="sxs-lookup"><span data-stu-id="4717d-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="4717d-113">Usar las clases de enlace de modelo independiente o una vulnerabilidad de tooprevent MVC asignación masivo de listas de filtros de enlace</span><span class="sxs-lookup"><span data-stu-id="4717d-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="4717d-114">Codificar toorendering anteriores de salida de web no es de confianza</span><span class="sxs-lookup"><span data-stu-id="4717d-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="4717d-115">Lleve a cabo la validación de entrada y el filtrado para todas las propiedades de modelo de tipo cadena</span><span class="sxs-lookup"><span data-stu-id="4717d-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="4717d-116">Se debería aplicar la comprobación de estado a los campos de formulario que acepten todos los caracteres, por ejemplo, editor de texto enriquecido</span><span class="sxs-lookup"><span data-stu-id="4717d-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="4717d-117">No se asignan toosinks de elementos DOM que no tienen una codificación integradas</span><span class="sxs-lookup"><span data-stu-id="4717d-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="4717d-118">Todas las validar redirecciones dentro de la aplicación hello están cerradas o se realiza de forma segura</span><span class="sxs-lookup"><span data-stu-id="4717d-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="4717d-119">Implemente la validación de entrada en todos los parámetros de tipo cadena aceptados por métodos de controlador</span><span class="sxs-lookup"><span data-stu-id="4717d-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="4717d-120">Establecer tiempo de espera de límite superior para procesar DoS tooprevent debido a las expresiones regulares toobad de expresión regular</span><span class="sxs-lookup"><span data-stu-id="4717d-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="4717d-121">No use Html.Raw en las vistas Razor</span><span class="sxs-lookup"><span data-stu-id="4717d-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="4717d-122">**Base de datos**</span><span class="sxs-lookup"><span data-stu-id="4717d-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="4717d-123">No use consultas dinámicas en procedimientos almacenados</span><span class="sxs-lookup"><span data-stu-id="4717d-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="4717d-124">**API web**</span><span class="sxs-lookup"><span data-stu-id="4717d-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="4717d-125">Asegúrese de que se lleve a cabo la validación del modelo en métodos de API web</span><span class="sxs-lookup"><span data-stu-id="4717d-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="4717d-126">Implemente la validación de entrada en todos los parámetros de tipo cadena aceptados por métodos de API web</span><span class="sxs-lookup"><span data-stu-id="4717d-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="4717d-127">Asegúrese de que se usen parámetros con seguridad de tipos en la API web para el acceso a datos</span><span class="sxs-lookup"><span data-stu-id="4717d-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="4717d-128">**Azure Document DB**</span><span class="sxs-lookup"><span data-stu-id="4717d-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="4717d-129">Use consultas SQL parametrizadas para DocumentDB</span><span class="sxs-lookup"><span data-stu-id="4717d-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="4717d-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="4717d-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="4717d-131">Validación de entrada de WCF mediante enlaces de esquema</span><span class="sxs-lookup"><span data-stu-id="4717d-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="4717d-132">Validación de entrada de WCF mediante inspectores de parámetros</span><span class="sxs-lookup"><span data-stu-id="4717d-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="4717d-133"><a id="disable-xslt"></a>Deshabilite el scripting XSLT para todas las transformaciones mediante hojas de estilos no de confianza</span><span class="sxs-lookup"><span data-stu-id="4717d-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="4717d-134">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-134">Title</span></span>                   | <span data-ttu-id="4717d-135">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-136">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-136">**Component**</span></span>               | <span data-ttu-id="4717d-137">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-137">Web Application</span></span> | 
| <span data-ttu-id="4717d-138">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-138">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-139">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-139">Build</span></span> |  
| <span data-ttu-id="4717d-140">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-140">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-141">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-141">Generic</span></span> |
| <span data-ttu-id="4717d-142">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-142">**Attributes**</span></span>              | <span data-ttu-id="4717d-143">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-143">N/A</span></span>  |
| <span data-ttu-id="4717d-144">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-144">**References**</span></span>              | <span data-ttu-id="4717d-145">[Seguridad XSLT](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [Propiedad XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="4717d-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="4717d-146">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-146">**Steps**</span></span> | <span data-ttu-id="4717d-147">XSLT es compatible con scripting dentro de hojas de estilos utilizando hello `<msxml:script>` elemento.</span><span class="sxs-lookup"><span data-stu-id="4717d-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="4717d-148">Esto permite toobe de funciones personalizadas que se usa en una transformación XSLT.</span><span class="sxs-lookup"><span data-stu-id="4717d-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="4717d-149">Hola script se ejecuta en contexto de hello del proceso de hello realizar transformación Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="4717d-150">Secuencia de comandos XSLT debe deshabilitarse en una ejecución de tooprevent de entorno de confianza del código no seguro.</span><span class="sxs-lookup"><span data-stu-id="4717d-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="4717d-151">*Si usa .NET:* el script XSLT está deshabilitado de forma predeterminada; sin embargo, debe asegurarse de que no se está explícitamente habilitada a través de hello `XsltSettings.EnableScript` propiedad.</span><span class="sxs-lookup"><span data-stu-id="4717d-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="4717d-152">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="4717d-153">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-153">Example</span></span>
<span data-ttu-id="4717d-154">Si se usa con MSXML 6.0, el script XSLT está deshabilitado de forma predeterminada; Sin embargo, debe asegurarse de que no se está explícitamente habilitada a través de la propiedad de objeto DOM XML de hello AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="4717d-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="4717d-155">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-155">Example</span></span>
<span data-ttu-id="4717d-156">Si usa MSXML 5 o una versión anterior, el scripting XSLT está habilitado de forma predeterminada y debe deshabilitarlo explícitamente.</span><span class="sxs-lookup"><span data-stu-id="4717d-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="4717d-157">Establecer Hola DOM XML objeto propiedad AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="4717d-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="4717d-158"><a id="out-sniffing"></a>Compruebe que cada página que pueda incluir contenido controlable por el usuario quede excluida del rastreo de MIME automático</span><span class="sxs-lookup"><span data-stu-id="4717d-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="4717d-159">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-159">Title</span></span>                   | <span data-ttu-id="4717d-160">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-161">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-161">**Component**</span></span>               | <span data-ttu-id="4717d-162">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-162">Web Application</span></span> | 
| <span data-ttu-id="4717d-163">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-163">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-164">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-164">Build</span></span> |  
| <span data-ttu-id="4717d-165">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-165">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-166">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-166">Generic</span></span> |
| <span data-ttu-id="4717d-167">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-167">**Attributes**</span></span>              | <span data-ttu-id="4717d-168">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-168">N/A</span></span>  |
| <span data-ttu-id="4717d-169">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-169">**References**</span></span>              | <span data-ttu-id="4717d-170">[IE8 Security Part V - Comprehensive Protection](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx) (Seguridad de IE8 (parte V): Protección completa)</span><span class="sxs-lookup"><span data-stu-id="4717d-170">[IE8 Security Part V - Comprehensive Protection](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)</span></span>  |
| <span data-ttu-id="4717d-171">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-171">**Steps**</span></span> | <p><span data-ttu-id="4717d-172">Para cada página que podría incluir contenido controlable de usuario, debe usar hello encabezado HTTP `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="4717d-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="4717d-173">toocomply con este requisito, puede cualquier encabezado necesaria del conjunto Hola de página por página para únicamente aquellas páginas que podrían incluir contenido controlable por el usuario, o puede establecer globalmente para todas las páginas de aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="4717d-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="4717d-174">Cada tipo de archivo que se vaya a entregar desde un servidor web tiene asociado un [tipo MIME](http://en.wikipedia.org/wiki/Mime_type) (también denominado una *tipo de contenido*) que describe la naturaleza de Hola de contenido de hello (es decir, imagen, texto, aplicación, etcetera.)</span><span class="sxs-lookup"><span data-stu-id="4717d-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="4717d-175">encabezado de Hello X-contenido-opciones de tipo es un encabezado HTTP que permite a los desarrolladores toospecify que su contenido no debería estar examinan MIME.</span><span class="sxs-lookup"><span data-stu-id="4717d-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="4717d-176">Este encabezado es toomitigate diseñada ataques de examen de MIME.</span><span class="sxs-lookup"><span data-stu-id="4717d-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="4717d-177">Se agregó compatibilidad con este encabezado en Internet Explorer 8 (IE8).</span><span class="sxs-lookup"><span data-stu-id="4717d-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="4717d-178">Los únicos que se beneficiarán de X-Content-Type-Options son los usuarios de Internet Explorer 8 (IE8).</span><span class="sxs-lookup"><span data-stu-id="4717d-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="4717d-179">Las versiones anteriores de Internet Explorer no respetan actualmente el encabezado X-contenido-opciones de tipo de Hola</span><span class="sxs-lookup"><span data-stu-id="4717d-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="4717d-180">Internet Explorer 8 (y versiones posterior) son Hola principales exploradores tooimplement un examen de MIME Cancelar voluntariamente la característica.</span><span class="sxs-lookup"><span data-stu-id="4717d-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="4717d-181">Cuando otros exploradores principales (Firefox, Safari, Chrome) implementan características similares, esta recomendación será sintaxis tooinclude actualizada para dichos exploradores también</span><span class="sxs-lookup"><span data-stu-id="4717d-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="4717d-182">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-182">Example</span></span>
<span data-ttu-id="4717d-183">encabezado necesario de Hola de tooenable globalmente para todas las páginas de aplicación hello, siga uno de los siguientes hello:</span><span class="sxs-lookup"><span data-stu-id="4717d-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="4717d-184">Agregar encabezado de hello en el archivo web.config de hello si aplicación hello está hospedado por Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="4717d-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="4717d-185">Agregar encabezado de Hola a través de hello global de la aplicación\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="4717d-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="4717d-186">Implemente un módulo HTTP personalizado</span><span class="sxs-lookup"><span data-stu-id="4717d-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="4717d-187">Puede habilitar el encabezado necesario de hello solo para páginas específicas mediante la adición de las respuestas de tooindividual:</span><span class="sxs-lookup"><span data-stu-id="4717d-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="4717d-188"><a id="xml-resolution"></a>Proteja o deshabilite la resolución de entidades XML</span><span class="sxs-lookup"><span data-stu-id="4717d-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="4717d-189">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-189">Title</span></span>                   | <span data-ttu-id="4717d-190">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-191">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-191">**Component**</span></span>               | <span data-ttu-id="4717d-192">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-192">Web Application</span></span> | 
| <span data-ttu-id="4717d-193">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-193">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-194">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-194">Build</span></span> |  
| <span data-ttu-id="4717d-195">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-195">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-196">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-196">Generic</span></span> |
| <span data-ttu-id="4717d-197">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-197">**Attributes**</span></span>              | <span data-ttu-id="4717d-198">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-198">N/A</span></span>  |
| <span data-ttu-id="4717d-199">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-199">**References**</span></span>              | <span data-ttu-id="4717d-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html) (Expansión de entidad XML), [Ataques por denegación de servicio y defensas XML](http://msdn.microsoft.com/magazine/ee335713.aspx), [Información general de seguridad MSXML](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Prácticas recomendadas para proteger el código MSXML](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html) (Referencia del protocolo NSXMLParserDelegate), [Resolver recursos externos](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="4717d-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="4717d-201">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-201">**Steps**</span></span>| <p><span data-ttu-id="4717d-202">Aunque no se usa ampliamente, hay una característica de XML que permite tooexpand de analizador XML de hello entidades de macro con valores definidos en el propio documento Hola o de orígenes externos.</span><span class="sxs-lookup"><span data-stu-id="4717d-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="4717d-203">Por ejemplo, documento Hola podría definir una entidad "companyname" con el valor de Hola "Microsoft", para que cada vez Hola texto "&companyname;" aparece en el documento de hello, será sustituido automáticamente con el texto hello Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4717d-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="4717d-204">O bien, documento Hola podría definir una entidad "MSFTStock", lo que hace referencia a un web externo servicio toofetch Hola valor actual de acciones de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4717d-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="4717d-205">A continuación, en cualquier momento "&MSFTStock;" aparece en el documento hello, será sustituido automáticamente con el precio de las acciones por hello actual.</span><span class="sxs-lookup"><span data-stu-id="4717d-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="4717d-206">Sin embargo, esta funcionalidad puede ser toocreate abusa condiciones de denegación de servicio (DoS).</span><span class="sxs-lookup"><span data-stu-id="4717d-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="4717d-207">Un atacante puede anidar varias entidades toocreate una bomba XML de expansión exponencial que consuma toda la memoria disponible en el sistema de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="4717d-208">Como alternativa, puede crear una referencia externa que transmita por secuencias back una cantidad infinita de datos o simplemente bloquea el subproceso de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="4717d-209">Como resultado, deben deshabilitar todos los equipos interna o externa resolución de entidad XML completamente si su aplicación no usar, o manualmente limitar la cantidad de Hola de memoria y tiempo de aplicación hello puede consumir para la resolución de entidad si esta funcionalidad es sea absolutamente necesario.</span><span class="sxs-lookup"><span data-stu-id="4717d-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="4717d-210">Si la aplicación no necesita la resolución de entidades, deshabilítela.</span><span class="sxs-lookup"><span data-stu-id="4717d-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="4717d-211">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-211">Example</span></span>
<span data-ttu-id="4717d-212">Para el código de .NET Framework, puede usar Hola siguientes enfoques:</span><span class="sxs-lookup"><span data-stu-id="4717d-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="4717d-213">Tenga en cuenta que este valor predeterminado Hola de `ProhibitDtd` en `XmlReaderSettings` es true, pero en `XmlTextReader` es false.</span><span class="sxs-lookup"><span data-stu-id="4717d-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="4717d-214">Si usas XmlReaderSettings, no es necesario tooset ProhibitDtd tootrue explícitamente, pero se recomienda que realice para simplificar de seguridad.</span><span class="sxs-lookup"><span data-stu-id="4717d-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="4717d-215">También tenga en cuenta que Hola clase XmlDocument permite que la resolución de entidad de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="4717d-216">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-216">Example</span></span>
<span data-ttu-id="4717d-217">resolución de entidades de toodisable para XmlDocuments, use hello `XmlDocument.Load(XmlReader)` sobrecarga de hello Load (método) y establecer Hola propiedades correspondientes en la resolución de toodisable de argumento de XmlReader hello, como se muestra en el siguiente código de hello:</span><span class="sxs-lookup"><span data-stu-id="4717d-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="4717d-218">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-218">Example</span></span>
<span data-ttu-id="4717d-219">Si no es posible que la aplicación deshabilitar resolución de entidades, establezca hello XmlReaderSettings.MaxCharactersFromEntities propiedad tooa valor razonable según las necesidades de la aplicación tooyour.</span><span class="sxs-lookup"><span data-stu-id="4717d-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="4717d-220">Esto limitará el impacto de Hola de posibles ataques de denegación de expansión exponencial.</span><span class="sxs-lookup"><span data-stu-id="4717d-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="4717d-221">Hola siguiente código proporciona un ejemplo de este enfoque:</span><span class="sxs-lookup"><span data-stu-id="4717d-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="4717d-222">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-222">Example</span></span>
<span data-ttu-id="4717d-223">Si necesita tooresolve alineado entidades, pero no es necesario tooresolve las entidades externas, establezca hello XmlReaderSettings.XmlResolver propiedad toonull.</span><span class="sxs-lookup"><span data-stu-id="4717d-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="4717d-224">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="4717d-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="4717d-225">Tenga en cuenta que en MSXML6, ProhibitDTD se establece tootrue (deshabilitar el procesamiento de DTD) de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="4717d-226">Para el código de Apple OSX e iOS, puede usar uno de estos dos analizadores XML: NSXMLParser y libXML2.</span><span class="sxs-lookup"><span data-stu-id="4717d-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="4717d-227"><a id="app-verification"></a>Las aplicaciones que usan http.sys realizan la comprobación de canonización de URL</span><span class="sxs-lookup"><span data-stu-id="4717d-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="4717d-228">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-228">Title</span></span>                   | <span data-ttu-id="4717d-229">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-230">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-230">**Component**</span></span>               | <span data-ttu-id="4717d-231">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-231">Web Application</span></span> | 
| <span data-ttu-id="4717d-232">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-232">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-233">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-233">Build</span></span> |  
| <span data-ttu-id="4717d-234">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-234">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-235">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-235">Generic</span></span> |
| <span data-ttu-id="4717d-236">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-236">**Attributes**</span></span>              | <span data-ttu-id="4717d-237">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-237">N/A</span></span>  |
| <span data-ttu-id="4717d-238">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-238">**References**</span></span>              | <span data-ttu-id="4717d-239">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-239">N/A</span></span>  |
| <span data-ttu-id="4717d-240">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-240">**Steps**</span></span> | <p><span data-ttu-id="4717d-241">Cualquier aplicación que use http.sys debe seguir estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="4717d-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="4717d-242">Limitar toono de longitud de dirección URL de hello más de 16.384 caracteres (ASCII o Unicode).</span><span class="sxs-lookup"><span data-stu-id="4717d-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="4717d-243">Se trata de hello absoluta URL longitud máxima en función de configuración de Internet Information Services (IIS) 6 de hello predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="4717d-244">Se debe procurar que los sitios web usen direcciones URL más cortas, de ser posible.</span><span class="sxs-lookup"><span data-stu-id="4717d-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="4717d-245">Utilizar clases de E/S de archivos de .NET Framework estándares de hello (por ejemplo, FileStream) como estos aprovechará hello las reglas de canonización en hello .NET FX</span><span class="sxs-lookup"><span data-stu-id="4717d-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="4717d-246">Cree explícitamente una lista de nombres de archivo conocidos permitidos.</span><span class="sxs-lookup"><span data-stu-id="4717d-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="4717d-247">Rechace de forma explícita los tipos de archivo conocidos a los que no servirá rechazos de UrlScan: archivos exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, ini, pol, dat y de impresora.</span><span class="sxs-lookup"><span data-stu-id="4717d-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="4717d-248">Detectar Hola siguientes excepciones:</span><span class="sxs-lookup"><span data-stu-id="4717d-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="4717d-249">System.ArgumentException (para nombres de dispositivo)</span><span class="sxs-lookup"><span data-stu-id="4717d-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="4717d-250">System.NotSupportedException (para flujos de datos)</span><span class="sxs-lookup"><span data-stu-id="4717d-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="4717d-251">System.IO.FileNotFoundException (para nombres de archivo con escape no válidos)</span><span class="sxs-lookup"><span data-stu-id="4717d-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="4717d-252">System.IO.DirectoryNotFoundException (para directorios con escape no válidos)</span><span class="sxs-lookup"><span data-stu-id="4717d-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="4717d-253">*No* destacar tooWin32 archivo I/O APIs.</span><span class="sxs-lookup"><span data-stu-id="4717d-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="4717d-254">En una dirección URL no válida devolver correctamente un usuario de 400 error toohello y registrar error real Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="4717d-255"><a id="controls-users"></a>Asegúrese de que los controles adecuados estén en vigor al aceptar archivos de usuarios</span><span class="sxs-lookup"><span data-stu-id="4717d-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="4717d-256">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-256">Title</span></span>                   | <span data-ttu-id="4717d-257">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-258">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-258">**Component**</span></span>               | <span data-ttu-id="4717d-259">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-259">Web Application</span></span> | 
| <span data-ttu-id="4717d-260">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-260">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-261">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-261">Build</span></span> |  
| <span data-ttu-id="4717d-262">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-262">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-263">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-263">Generic</span></span> |
| <span data-ttu-id="4717d-264">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-264">**Attributes**</span></span>              | <span data-ttu-id="4717d-265">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-265">N/A</span></span>  |
| <span data-ttu-id="4717d-266">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-266">**References**</span></span>              | <span data-ttu-id="4717d-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload) (Carga de archivos sin restricciones), [File Signature Table](http://www.garykessler.net/library/file_sigs.html) (Tabla de firmas de archivo)</span><span class="sxs-lookup"><span data-stu-id="4717d-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="4717d-268">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-268">**Steps**</span></span> | <p><span data-ttu-id="4717d-269">Los archivos cargados representan un riesgo significativo tooapplications.</span><span class="sxs-lookup"><span data-stu-id="4717d-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="4717d-270">primer paso de Hello en muchos ataques es tooget atacada algunos toobe de sistema de toohello de código.</span><span class="sxs-lookup"><span data-stu-id="4717d-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="4717d-271">A continuación, ataque Hola solo necesita toofind ejecuta un código de hello tooget de manera.</span><span class="sxs-lookup"><span data-stu-id="4717d-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="4717d-272">El uso de una carga de archivos ayuda a atacante Hola realizar el primer paso de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="4717d-273">pueden variar consecuencias Hola de carga de archivos sin restricciones, incluyendo adquisición de sistema completo, un sistema de archivos sobrecargado o la base de datos, tooback los sistemas de ataques y simple asalto de reenvío.</span><span class="sxs-lookup"><span data-stu-id="4717d-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="4717d-274">Depende de la aplicación hello no con el archivo hello cargado y especialmente donde se almacena.</span><span class="sxs-lookup"><span data-stu-id="4717d-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="4717d-275">Falta la validación del lado servidor para las cargas de archivos.</span><span class="sxs-lookup"><span data-stu-id="4717d-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="4717d-276">Se deberían implementar los siguientes controles de seguridad para la funcionalidad de carga de archivos:</span><span class="sxs-lookup"><span data-stu-id="4717d-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="4717d-277">Comprobación de la extensión del archivo (solo se debe aceptar un conjunto válido de tipos de archivo permitidos)</span><span class="sxs-lookup"><span data-stu-id="4717d-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="4717d-278">Límite máximo de tamaño de archivo</span><span class="sxs-lookup"><span data-stu-id="4717d-278">Maximum file size limit</span></span></li><li><span data-ttu-id="4717d-279">Archivo no debe estar cargado toowebroot; ubicación de Hello debe ser un directorio en la unidad del sistema no</span><span class="sxs-lookup"><span data-stu-id="4717d-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="4717d-280">Convención de nomenclatura debe seguir esa hello nombre del archivo cargado tienen algunas aleatoriedad, por lo que como tooprevent sobrescribe el archivo</span><span class="sxs-lookup"><span data-stu-id="4717d-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="4717d-281">Se deben analizar archivos de programa antivirus antes de escribir en disco toohello</span><span class="sxs-lookup"><span data-stu-id="4717d-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="4717d-282">Asegúrese de que el nombre de archivo de Hola y cualquier otro metadato (p. ej., ruta de acceso de archivo) se validan para caracteres malintencionados</span><span class="sxs-lookup"><span data-stu-id="4717d-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="4717d-283">Debe comprobarse la firma del archivo de formato, un usuario de cargar un archivo enmascarado tooprevent (p. ej., cargando un archivo exe cambiando tootxt de extensión)</span><span class="sxs-lookup"><span data-stu-id="4717d-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="4717d-284">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-284">Example</span></span>
<span data-ttu-id="4717d-285">Para el último punto de hello relacionado con la validación de firma de formato de archivo, consulte la clase toohello a continuación para obtener más información:</span><span class="sxs-lookup"><span data-stu-id="4717d-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="4717d-286"><a id="typesafe"></a>Asegúrese de que se usen parámetros con seguridad de tipos en la aplicación web para el acceso a datos</span><span class="sxs-lookup"><span data-stu-id="4717d-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="4717d-287">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-287">Title</span></span>                   | <span data-ttu-id="4717d-288">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-289">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-289">**Component**</span></span>               | <span data-ttu-id="4717d-290">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-290">Web Application</span></span> | 
| <span data-ttu-id="4717d-291">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-291">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-292">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-292">Build</span></span> |  
| <span data-ttu-id="4717d-293">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-293">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-294">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-294">Generic</span></span> |
| <span data-ttu-id="4717d-295">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-295">**Attributes**</span></span>              | <span data-ttu-id="4717d-296">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-296">N/A</span></span>  |
| <span data-ttu-id="4717d-297">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-297">**References**</span></span>              | <span data-ttu-id="4717d-298">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-298">N/A</span></span>  |
| <span data-ttu-id="4717d-299">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-299">**Steps**</span></span> | <p><span data-ttu-id="4717d-300">Si utiliza la colección de parámetros de hello, SQL trata Hola entrada es como un valor literal en lugar de en código ejecutable.</span><span class="sxs-lookup"><span data-stu-id="4717d-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="4717d-301">Hola colección de parámetros puede ser tooenforce usado las restricciones de tipo y longitud de los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="4717d-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="4717d-302">Valores fuera de intervalo de hello desencadenan una excepción.</span><span class="sxs-lookup"><span data-stu-id="4717d-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="4717d-303">Si no se utilizan parámetros SQL de seguridad de tipos, los atacantes podrían tooexecute capaz de ataques de inyección que se incrustan en la entrada de hello sin filtrar.</span><span class="sxs-lookup"><span data-stu-id="4717d-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="4717d-304">Usar parámetros de tipo seguro cuando construir SQL las consultas tooavoid posibles ataques de inyección SQL que pueden producirse con una entrada sin filtrar.</span><span class="sxs-lookup"><span data-stu-id="4717d-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="4717d-305">Puede usar parámetros con seguridad de tipos con procedimientos almacenados e instrucciones SQL dinámicas.</span><span class="sxs-lookup"><span data-stu-id="4717d-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="4717d-306">Los parámetros se tratan como valores literales por base de datos de hello y no como código ejecutable.</span><span class="sxs-lookup"><span data-stu-id="4717d-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="4717d-307">También se comprueban el tipo y la longitud de los parámetros.</span><span class="sxs-lookup"><span data-stu-id="4717d-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="4717d-308">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-308">Example</span></span> 
<span data-ttu-id="4717d-309">Hello código siguiente muestra cómo toouse parámetros de tipo seguros con hello SqlParameterCollection al llamar a un procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="4717d-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="4717d-310">Hola anterior ejemplo de código, el valor de entrada de hello no puede ser más de 11 caracteres.</span><span class="sxs-lookup"><span data-stu-id="4717d-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="4717d-311">Si no ajustan datos hello toohello tipo o la longitud definida por el parámetro hello, Hola SqlParameter (clase) inicia una excepción.</span><span class="sxs-lookup"><span data-stu-id="4717d-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="4717d-312"><a id="binding-mvc"></a>Usar las clases de enlace de modelo independiente o una vulnerabilidad de tooprevent MVC asignación masivo de listas de filtros de enlace</span><span class="sxs-lookup"><span data-stu-id="4717d-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="4717d-313">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-313">Title</span></span>                   | <span data-ttu-id="4717d-314">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-315">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-315">**Component**</span></span>               | <span data-ttu-id="4717d-316">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-316">Web Application</span></span> | 
| <span data-ttu-id="4717d-317">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-317">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-318">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-318">Build</span></span> |  
| <span data-ttu-id="4717d-319">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-319">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-320">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-321">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-321">**Attributes**</span></span>              | <span data-ttu-id="4717d-322">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-322">N/A</span></span>  |
| <span data-ttu-id="4717d-323">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-323">**References**</span></span>              | <span data-ttu-id="4717d-324">[Atributos de metadatos](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [pública clave de seguridad y mitigación de vulnerabilidades](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [tooMass guía completa la asignación en ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Introducción a EF mediante MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="4717d-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="4717d-325">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-325">**Steps**</span></span> | <ul><li><span data-ttu-id="4717d-326">**¿Cuándo debería buscar vulnerabilidades por publicación excesiva?** Las vulnerabilidades por publicación excesiva se pueden producir en cualquier lugar donde se enlacen clases de modelo desde la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="4717d-327">Los marcos de trabajo como MVC pueden representar datos de usuario en clases .NET personalizadas, incluidos los objetos CLR estándar (POCO).</span><span class="sxs-lookup"><span data-stu-id="4717d-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="4717d-328">MVC rellena automáticamente estas clases de modelo con datos de solicitud de hello, que proporciona una representación adecuada para tratar los proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="4717d-329">Cuando estas clases incluyen propiedades que no se deben establecer usuario hello, aplicación hello puede ser vulnerables ataques tooover registro, que permiten el control de usuario de datos que nunca la aplicación hello diseñada.</span><span class="sxs-lookup"><span data-stu-id="4717d-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="4717d-330">Como el enlace de modelo MVC, tecnologías de acceso de la base de datos como objeto/relacional asignadores como Entity Framework a menudo también admiten el uso POCO objetos toorepresent bases de datos.</span><span class="sxs-lookup"><span data-stu-id="4717d-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="4717d-331">Estas clases de modelo de datos proporcionan Hola mismo comodidad en tratar con datos de la base de datos como MVC hace para manejar de proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="4717d-332">Porque la base de datos de hello y MVC admite modelos similares, como los objetos POCO, parece hello tooreuse fácil mismo clases ambos fines.</span><span class="sxs-lookup"><span data-stu-id="4717d-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="4717d-333">Se produce un error en esta práctica toopreserve separación de aspectos y es un área común donde imprevistos propiedades son expuestas toomodel enlace, habilitar el registro excesivo ataques.</span><span class="sxs-lookup"><span data-stu-id="4717d-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="4717d-334">**¿¿Por qué no usar mis clases de modelo de base de datos sin filtrar como acciones de MVC toomy parámetros? -** Enlace del modelo MVC porque se enlazará nada en esa clase.</span><span class="sxs-lookup"><span data-stu-id="4717d-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="4717d-335">Incluso si los datos no aparecen en la vista, que un usuario malintencionado puede enviar una solicitud HTTP con estos datos incluidos de Hola y MVC con gusto enlazará, porque la acción indica que la clase de base de datos es forma Hola de los datos debe aceptar proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="4717d-336">**¿Por qué debo preocuparme forma Hola usada para el enlace del modelo? -** Enlace de modelos de uso de ASP.NET MVC con modelos demasiado amplios expone un ataques de tooover-registro de aplicación.</span><span class="sxs-lookup"><span data-stu-id="4717d-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="4717d-337">Registro excesivo podría permitir a datos de la aplicación de los atacantes toochange más allá de qué developer Hola prevista, como reemplazar precio Hola un elemento o hello privilegios de seguridad de una cuenta.</span><span class="sxs-lookup"><span data-stu-id="4717d-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="4717d-338">Las aplicaciones deben utilizar tooprovide de enlace de modelos (o listas de filtros de propiedad admitidos específico) específicos para la acción un contrato explícito para qué tooallow de entrada no es de confianza a través del enlace del modelo.</span><span class="sxs-lookup"><span data-stu-id="4717d-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="4717d-339">**¿Tener modelos de enlace independientes sirve solo para duplicar el código?** No, es cuestión de separar los aspectos.</span><span class="sxs-lookup"><span data-stu-id="4717d-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="4717d-340">Si vuelve a usar modelos de base de datos en los métodos de acción, se que indica que cualquier propiedad (o secundario) en que la clase se puede establecer por usuario de hello en una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="4717d-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="4717d-341">Si no lo que desea es toodo MVC, se necesita una lista de filtros o un tooshow de forma independiente de clase MVC qué datos pueden proceder de entrada en su lugar del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="4717d-342">**Si dispongo de modelos de enlace independiente proporcionados por el usuario, ¿tengo tooduplicate mi atributos de anotación de datos? -** No necesariamente.</span><span class="sxs-lookup"><span data-stu-id="4717d-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="4717d-343">Puede usar MetadataTypeAttribute en hello base de datos modelo clase toolink toohello metadatos en una clase de enlace del modelo.</span><span class="sxs-lookup"><span data-stu-id="4717d-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="4717d-344">Solo tenga en cuenta que Hola Hola MetadataTypeAttribute al que hace referencia el tipo debe ser un subconjunto de Hola que hacen referencia a tipo (puede tener menos propiedades, pero no más).</span><span class="sxs-lookup"><span data-stu-id="4717d-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="4717d-345">**Mover los datos entre los modelos de entrada de usuario y los modelos de base de datos es una tarea tediosa. ¿Puedo simplemente copiar todas las propiedades mediante reflexión?** Sí.</span><span class="sxs-lookup"><span data-stu-id="4717d-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="4717d-346">Hello solo las propiedades que aparecen en los modelos de enlace de hello son hello las que consideras toobe seguro para la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="4717d-347">No hay ninguna razón de seguridad que impide el uso de reflexión toocopy sobre todas las propiedades que existen en común entre estos dos modelos.</span><span class="sxs-lookup"><span data-stu-id="4717d-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="4717d-348">**¿Y [Bind(Exclude ="â€¦")]? ¿Lo puedo usar en lugar de tener modelos de enlace independientes?** No se recomienda este enfoque.</span><span class="sxs-lookup"><span data-stu-id="4717d-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="4717d-349">Si se usa [Bind(Exclude ="â€¦")], quiere decir que cualquier propiedad nueva se puede enlazar de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="4717d-350">Cuando se agrega una nueva propiedad, hay un cosas de paso adicional tooremember tookeep seguro, en lugar de tener diseño Hola ser seguro de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="4717d-351">Función de desarrollador de Hola comprobación cada vez que se agrega una propiedad de esta lista es arriesgada.</span><span class="sxs-lookup"><span data-stu-id="4717d-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="4717d-352">**¿Es [Bind(Include ="â€¦")] útil para las operaciones de edición?** No.</span><span class="sxs-lookup"><span data-stu-id="4717d-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="4717d-353">[Bind(Include ="â€¦")] solo vale para las operaciones de estilo INSERT (agregar datos nuevos).</span><span class="sxs-lookup"><span data-stu-id="4717d-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="4717d-354">Para las operaciones de actualización estilo (revisión de los datos existentes), utilice otra aproximación posible, al igual que con modelos de enlace independientes o pasar una lista de propiedades permitidas tooUpdateModel o TryUpdateModel explícita.</span><span class="sxs-lookup"><span data-stu-id="4717d-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="4717d-355">Agregar un [enlazar (Include = "â...")] significa que el atributo en una operación de edición que MVC creará una instancia de objeto y establecerá solo Hola enumera las propiedades, dejando el resto en sus valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="4717d-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="4717d-356">Cuando se mantienen los datos de hello, reemplazará completamente entidad existente hello, restablecer los valores de hello para cualquier parámetro predeterminado tootheir de propiedades se omite.</span><span class="sxs-lookup"><span data-stu-id="4717d-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="4717d-357">Por ejemplo, si se omite IsAdmin desde un [enlazar (Include = "â...")] atributo en una operación de edición, cualquier usuario cuyo nombre se ha editado a través de esta acción sería restablecimiento tooIsAdmin = false (cualquier usuario editado perdería estado de administrador).</span><span class="sxs-lookup"><span data-stu-id="4717d-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="4717d-358">Si desea tooprevent actualiza las propiedades de toocertain, utilice uno de hello otros enfoques anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4717d-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="4717d-359">Tenga en cuenta que algunas versiones de las herramientas de MVC generan clases de controlador con [Bind(Include ="â€¦")] en acciones de edición e indican que la eliminación de una propiedad de esa lista impedirá los ataques por publicación excesiva.</span><span class="sxs-lookup"><span data-stu-id="4717d-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="4717d-360">Sin embargo, como se describió anteriormente, este enfoque no funciona según lo previsto y en su lugar, se restablecerán los datos en los valores predeterminados de hello omitida propiedades tootheir.</span><span class="sxs-lookup"><span data-stu-id="4717d-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="4717d-361">**Para las operaciones Create, ¿hay alguna advertencia sobre el uso de [Bind(Include ="â€¦")] en lugar de modelos de enlace independientes? -** Sí.</span><span class="sxs-lookup"><span data-stu-id="4717d-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="4717d-362">En primer lugar, este enfoque no funciona para los escenarios de edición, por lo que es necesario mantener dos enfoques independientes para mitigar todas las vulnerabilidades por publicación excesiva.</span><span class="sxs-lookup"><span data-stu-id="4717d-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="4717d-363">Modelos de enlace en segundo lugar, independiente imponga la separación de intereses entre la forma de hello utilizada para la forma de hello y entrada de usuario utilizada para la persistencia, algo [enlazar (Include = "â...")] no lleva a cabo.</span><span class="sxs-lookup"><span data-stu-id="4717d-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="4717d-364">En tercer lugar, tenga en cuenta que [enlazar (Include = "â...")] solo puede controlar propiedades de nivel superior; no se permiten solo algunas partes de subpropiedades (por ejemplo, "Details.Name") en el atributo de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="4717d-365">Por último y quizás lo más importante, usar [enlazar (Include = "â...")] agrega un paso adicional que se debe recordar cualquier clase de Hola de tiempo se utiliza para el enlace de modelos.</span><span class="sxs-lookup"><span data-stu-id="4717d-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="4717d-366">Si un nuevo método de acción enlaza la clase de datos de toohello directamente y olvida tooinclude un [enlazar (Include = "â...")] atributo, puede ser vulnerable tooover contabilización ataques, por lo que Hola [enlazar (Include = "â...")] enfoque es algo menos seguro de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="4717d-367">Si usas [enlazar (Include = "â...")], tenga siempre cuidado tooremember toospecify, cada vez que las clases de datos aparecen como parámetros de método de acción.</span><span class="sxs-lookup"><span data-stu-id="4717d-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="4717d-368">**¿Para operaciones de creación, lo que acerca de cómo colocar Hola [enlazar (Include = "â...")] atributo en la propia clase de modelo Hola? ¿Puede evitar Hola necesidad tooremember poner Hola atributo en cada método de acción no este enfoque? -** Este enfoque funciona en algunos casos.</span><span class="sxs-lookup"><span data-stu-id="4717d-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="4717d-369">Usar [enlazar (Include = "â...")] en el propio tipo de modelo hello (en lugar de en parámetros de acción mediante esta clase), evitar la necesidad de Hola tooremember tooinclude Hola [enlazar (Include = "â...")] atributo en cada método de acción.</span><span class="sxs-lookup"><span data-stu-id="4717d-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="4717d-370">El uso de atributo de hello directamente en la clase hello eficazmente, crea un área expuesta independiente de esta clase para fines de enlace de modelo.</span><span class="sxs-lookup"><span data-stu-id="4717d-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="4717d-371">Sin embargo, este enfoque solo permite una forma de enlace de modelos por cada clase de modelo.</span><span class="sxs-lookup"><span data-stu-id="4717d-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="4717d-372">Si un método de acción debe tooallow enlace del modelo de un campo (por ejemplo, un solo administrador acción que actualiza los roles de usuario) y otras acciones deben tooprevent enlace del modelo de este campo, este enfoque no funcionará.</span><span class="sxs-lookup"><span data-stu-id="4717d-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="4717d-373">Cada clase puede tener solamente una forma de enlace de modelo; Si las diferentes acciones necesitan formas de enlace de modelo diferente, deberá toorepresent estos separan formas mediante cualquier clases de enlace de modelo independiente o separan [enlazar (Include = "â...")] atributos en los métodos de acción de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="4717d-374">**¿Qué son los modelos de enlace? ¿Son que Hola lo mismo que ver modelos? -** Se trata de dos conceptos relacionados.</span><span class="sxs-lookup"><span data-stu-id="4717d-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="4717d-375">modelo de enlace hace referencia la clase de modelo de tooa usada en una acción de término de Hello es la lista de parámetros (forma de hello pasado desde el método de acción de MVC modelo enlace toohello).</span><span class="sxs-lookup"><span data-stu-id="4717d-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="4717d-376">modelo de vista de Hello término hace referencia a clase del modelo tooa pasado de una vista de tooa de método de acción.</span><span class="sxs-lookup"><span data-stu-id="4717d-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="4717d-377">Con un modelo específico de la vista es un enfoque común para pasar datos de una vista de tooa de método de acción.</span><span class="sxs-lookup"><span data-stu-id="4717d-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="4717d-378">A menudo, esta forma también es adecuada para el enlace de modelos y modelo de vista de hello término puede ser hello toorefer usado mismo modelo se utiliza en ambos lugares.</span><span class="sxs-lookup"><span data-stu-id="4717d-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="4717d-379">toobe precisa, este procedimiento se comunica específicamente sobre el enlace de modelos, centrándose en forma de hello pasado toohello acción, que es lo que realmente importa para fines de asignación masivo.</span><span class="sxs-lookup"><span data-stu-id="4717d-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="4717d-380"><a id="rendering"></a>Codificar toorendering anteriores de salida de web no es de confianza</span><span class="sxs-lookup"><span data-stu-id="4717d-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="4717d-381">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-381">Title</span></span>                   | <span data-ttu-id="4717d-382">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-383">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-383">**Component**</span></span>               | <span data-ttu-id="4717d-384">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-384">Web Application</span></span> | 
| <span data-ttu-id="4717d-385">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-385">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-386">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-386">Build</span></span> |  
| <span data-ttu-id="4717d-387">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-387">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-388">Genérico, formularios Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-389">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-389">**Attributes**</span></span>              | <span data-ttu-id="4717d-390">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-390">N/A</span></span>  |
| <span data-ttu-id="4717d-391">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-391">**References**</span></span>              | <span data-ttu-id="4717d-392">[¿Cómo tooprevent Cross-site scripting en ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [el Scripting entre sitios](http://cwe.mitre.org/data/definitions/79.html), [hoja de referencia rápida de prevención de XSS (Cross Site Scripting)](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="4717d-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="4717d-393">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-393">**Steps**</span></span> | <span data-ttu-id="4717d-394">Scripting entre sitios (normalmente abreviado como XSS) es un vector de ataque de servicios en línea o cualquier aplicación o el componente que procesa entradas desde web Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="4717d-395">Vulnerabilidades XSS pueden permitir que un atacante tooexecute script en el equipo del otro usuario a través de una aplicación web sea vulnerable.</span><span class="sxs-lookup"><span data-stu-id="4717d-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="4717d-396">Scripts malintencionados pueden toosteal usa cookies y alterar en caso contrario, un equipo infectado a través de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="4717d-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="4717d-397">Se impide el XSS mediante la validación de la entrada del usuario para asegurarse de que esté bien formada y codificada antes de representarla en una página web.</span><span class="sxs-lookup"><span data-stu-id="4717d-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="4717d-398">La validación de la entrada y la codificación de la salida se pueden realizar con Web Protection Library.</span><span class="sxs-lookup"><span data-stu-id="4717d-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="4717d-399">Para código administrado (C\#, VB.net, etc.), utilice uno o más adecuados los métodos de codificación de hello biblioteca Web protección (Anti-XSS), según el contexto de Hola donde obtiene manifiesta Hola proporcionados por el usuario:</span><span class="sxs-lookup"><span data-stu-id="4717d-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="4717d-400">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="4717d-401"><a id="typemodel"></a>Lleve a cabo la validación de entrada y el filtrado para todas las propiedades de modelo de tipo cadena</span><span class="sxs-lookup"><span data-stu-id="4717d-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="4717d-402">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-402">Title</span></span>                   | <span data-ttu-id="4717d-403">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-404">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-404">**Component**</span></span>               | <span data-ttu-id="4717d-405">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-405">Web Application</span></span> | 
| <span data-ttu-id="4717d-406">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-406">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-407">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-407">Build</span></span> |  
| <span data-ttu-id="4717d-408">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-408">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-409">Genérico, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-410">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-410">**Attributes**</span></span>              | <span data-ttu-id="4717d-411">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-411">N/A</span></span>  |
| <span data-ttu-id="4717d-412">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-412">**References**</span></span>              | <span data-ttu-id="4717d-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation) (Incorporación de validación), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Validación de datos de modelo en una aplicación de MVC), [Principios orientativos para las aplicaciones de ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="4717d-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="4717d-414">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-414">**Steps**</span></span> | <p><span data-ttu-id="4717d-415">Todos los parámetros de entrada de hello deben validarse antes de que se utilizan en tooensure de aplicación Hola que aplicación hello protegida frente a las entradas de usuario malintencionado.</span><span class="sxs-lookup"><span data-stu-id="4717d-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="4717d-416">Validar valores de entrada de hello mediante validaciones de expresión regular en el lado del servidor con una estrategia de validación de la lista blanca.</span><span class="sxs-lookup"><span data-stu-id="4717d-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="4717d-417">Unsanitized entradas de usuario / parámetros pasados a métodos de toohello pueden originar código vulnerabilidades por inyección de código.</span><span class="sxs-lookup"><span data-stu-id="4717d-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="4717d-418">Para las aplicaciones web, los puntos de entrada también pueden ser campos de formulario, QueryStrings, cookies, encabezados HTTP y parámetros de servicio web.</span><span class="sxs-lookup"><span data-stu-id="4717d-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="4717d-419">Hello siguientes comprobaciones de validación de entrada se deben realizar en el enlace de modelos:</span><span class="sxs-lookup"><span data-stu-id="4717d-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="4717d-420">propiedades del modelo Hola deben anotarse con la anotación de expresión regular, para aceptar caracteres permitidos y la longitud máxima permitida</span><span class="sxs-lookup"><span data-stu-id="4717d-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="4717d-421">los métodos de controlador de Hello deben realizar ModelState validez</span><span class="sxs-lookup"><span data-stu-id="4717d-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="4717d-422"><a id="richtext"></a>Se debería aplicar la comprobación de estado a los campos de formulario que acepten todos los caracteres, por ejemplo, editor de texto enriquecido</span><span class="sxs-lookup"><span data-stu-id="4717d-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="4717d-423">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-423">Title</span></span>                   | <span data-ttu-id="4717d-424">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-425">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-425">**Component**</span></span>               | <span data-ttu-id="4717d-426">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-426">Web Application</span></span> | 
| <span data-ttu-id="4717d-427">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-427">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-428">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-428">Build</span></span> |  
| <span data-ttu-id="4717d-429">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-429">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-430">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-430">Generic</span></span> |
| <span data-ttu-id="4717d-431">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-431">**Attributes**</span></span>              | <span data-ttu-id="4717d-432">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-432">N/A</span></span>  |
| <span data-ttu-id="4717d-433">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-433">**References**</span></span>              | <span data-ttu-id="4717d-434">[Codificación de la entrada no segura](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTMLSanitizer](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="4717d-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="4717d-435">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-435">**Steps**</span></span> | <p><span data-ttu-id="4717d-436">Identifique todas las etiquetas de marcado estático que desea toouse.</span><span class="sxs-lookup"><span data-stu-id="4717d-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="4717d-437">Una práctica común es toorestrict elementos de formato toosafe HTML, como `<b>` (negrita) y `<i>` (cursiva).</span><span class="sxs-lookup"><span data-stu-id="4717d-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="4717d-438">Antes de escribir datos de hello, codificar en HTML.</span><span class="sxs-lookup"><span data-stu-id="4717d-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="4717d-439">Esto hace que cualquier script malintencionado seguro haciendo toobe trata como texto, no como código ejecutable.</span><span class="sxs-lookup"><span data-stu-id="4717d-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="4717d-440">Deshabilitar la solicitud ASP.NET validación agregando Hola Hola ValidateRequest = "false" atributo toohello directiva @ Page</span><span class="sxs-lookup"><span data-stu-id="4717d-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="4717d-441">Codificar la entrada de cadena de hello con método hello</span><span class="sxs-lookup"><span data-stu-id="4717d-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="4717d-442">Utilizar un StringBuilder y una llamada a su tooselectively de método de reemplazo quitar Hola codificación en elementos de hello HTML que desea toopermit</span><span class="sxs-lookup"><span data-stu-id="4717d-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="4717d-443">Hola Hola en página referencias deshabilita la validación de solicitudes ASP.NET estableciendo `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="4717d-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="4717d-444">Se codifica en HTML Hola de entrada y permite de forma selectiva hello `<b>` y `<i>` o bien, una biblioteca de .NET para la comprobación de estado HTML también puede utilizarse.</span><span class="sxs-lookup"><span data-stu-id="4717d-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="4717d-445">HtmlSanitizer es una biblioteca de .NET para la limpieza de documentos de construcciones que pueden dar lugar a ataques de tooXSS y fragmentos HTML.</span><span class="sxs-lookup"><span data-stu-id="4717d-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="4717d-446">Usa AngleSharp tooparse, manipular y presentar HTML y CSS.</span><span class="sxs-lookup"><span data-stu-id="4717d-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="4717d-447">HtmlSanitizer puede instalarse como un paquete de NuGet, y se pueden pasar Hola proporcionados por el usuario a través de HTML o CSS inmunización métodos pertinentes, según corresponda, en el lado del servidor de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="4717d-448">Tenga en cuenta que la comprobación de estado como control de seguridad se debe considerar la última opción.</span><span class="sxs-lookup"><span data-stu-id="4717d-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="4717d-449">La validación de entrada y la codificación de salida son los controles de seguridad que se consideran mejores.</span><span class="sxs-lookup"><span data-stu-id="4717d-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="4717d-450"><a id="inbuilt-encode"></a>No se asignan toosinks de elementos DOM que no tienen una codificación integradas</span><span class="sxs-lookup"><span data-stu-id="4717d-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="4717d-451">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-451">Title</span></span>                   | <span data-ttu-id="4717d-452">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-453">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-453">**Component**</span></span>               | <span data-ttu-id="4717d-454">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-454">Web Application</span></span> | 
| <span data-ttu-id="4717d-455">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-455">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-456">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-456">Build</span></span> |  
| <span data-ttu-id="4717d-457">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-457">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-458">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-458">Generic</span></span> |
| <span data-ttu-id="4717d-459">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-459">**Attributes**</span></span>              | <span data-ttu-id="4717d-460">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-460">N/A</span></span>  |
| <span data-ttu-id="4717d-461">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-461">**References**</span></span>              | <span data-ttu-id="4717d-462">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-462">N/A</span></span>  |
| <span data-ttu-id="4717d-463">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-463">**Steps**</span></span> | <span data-ttu-id="4717d-464">Muchas funciones JavaScript no codifican de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4717d-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="4717d-465">Al asignar elementos de tooDOM de entrada no es de confianza a través de estas funciones, puede producir entre ejecuciones de secuencias de comandos (XSS) de sitio.</span><span class="sxs-lookup"><span data-stu-id="4717d-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="4717d-466">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-466">Example</span></span>
<span data-ttu-id="4717d-467">Los siguientes son ejemplos inseguros:</span><span class="sxs-lookup"><span data-stu-id="4717d-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="4717d-468">No utilice `innerHtml`; en su lugar, use `innerText`.</span><span class="sxs-lookup"><span data-stu-id="4717d-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="4717d-469">Igualmente, en lugar de `$("#elm").html()`, use `$("#elm").text()`.</span><span class="sxs-lookup"><span data-stu-id="4717d-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="4717d-470"><a id="redirect-safe"></a>Todas las validar redirecciones dentro de la aplicación hello están cerradas o se realiza de forma segura</span><span class="sxs-lookup"><span data-stu-id="4717d-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="4717d-471">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-471">Title</span></span>                   | <span data-ttu-id="4717d-472">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-473">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-473">**Component**</span></span>               | <span data-ttu-id="4717d-474">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-474">Web Application</span></span> | 
| <span data-ttu-id="4717d-475">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-475">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-476">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-476">Build</span></span> |  
| <span data-ttu-id="4717d-477">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-477">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-478">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-478">Generic</span></span> |
| <span data-ttu-id="4717d-479">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-479">**Attributes**</span></span>              | <span data-ttu-id="4717d-480">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-480">N/A</span></span>  |
| <span data-ttu-id="4717d-481">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-481">**References**</span></span>              | [<span data-ttu-id="4717d-482">Hola marco de autorización de OAuth 2.0 - redirectores abierto</span><span class="sxs-lookup"><span data-stu-id="4717d-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="4717d-483">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-483">**Steps**</span></span> | <p><span data-ttu-id="4717d-484">Diseño de aplicaciones que requieren la ubicación de redirección tooa proporcionado por el usuario debe restringir Hola redirección posibles destinos tooa "seguro" lista predefinida de sitios o dominios.</span><span class="sxs-lookup"><span data-stu-id="4717d-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="4717d-485">Todas las redirecciones de la aplicación hello deben ser cerrado o seguridad.</span><span class="sxs-lookup"><span data-stu-id="4717d-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="4717d-486">toodo esto:</span><span class="sxs-lookup"><span data-stu-id="4717d-486">toodo this:</span></span></p><ul><li><span data-ttu-id="4717d-487">Identifique todos los redireccionamientos.</span><span class="sxs-lookup"><span data-stu-id="4717d-487">Identify all redirects</span></span></li><li><span data-ttu-id="4717d-488">Implemente una mitigación adecuada para cada tipo de redireccionamiento.</span><span class="sxs-lookup"><span data-stu-id="4717d-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="4717d-489">Entre las mitigaciones adecuadas, se incluye la lista de redireccionamientos permitidos o la confirmación del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="4717d-490">Si un sitio web o servicio con una vulnerabilidad de redireccionamiento abierto usa proveedores de identidades de Facebook, OAuth u OpenID, un atacante puede robar el token de inicio de sesión de un usuario y suplantarle.</span><span class="sxs-lookup"><span data-stu-id="4717d-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="4717d-491">Esto es un riesgo inherente al utilizar OAuth, que se describe en RFC 6749 "hello marco de autorización OAuth 2.0", sección 10.15 "abrir redirige" de forma similar, las credenciales de los usuarios pueden estar en peligro por ataques de suplantación de identidad de ataques mediante redirecciones abiertas</span><span class="sxs-lookup"><span data-stu-id="4717d-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="4717d-492"><a id="string-method"></a>Implemente la validación de entrada en todos los parámetros de tipo cadena aceptados por métodos de controlador</span><span class="sxs-lookup"><span data-stu-id="4717d-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="4717d-493">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-493">Title</span></span>                   | <span data-ttu-id="4717d-494">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-495">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-495">**Component**</span></span>               | <span data-ttu-id="4717d-496">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-496">Web Application</span></span> | 
| <span data-ttu-id="4717d-497">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-497">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-498">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-498">Build</span></span> |  
| <span data-ttu-id="4717d-499">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-499">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-500">Genérico, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-501">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-501">**Attributes**</span></span>              | <span data-ttu-id="4717d-502">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-502">N/A</span></span>  |
| <span data-ttu-id="4717d-503">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-503">**References**</span></span>              | <span data-ttu-id="4717d-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Validación de datos de modelo en una aplicación de MVC), [Principios orientativos para las aplicaciones de ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="4717d-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="4717d-505">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-505">**Steps**</span></span> | <span data-ttu-id="4717d-506">Para los métodos que solo acepten el tipo primitivo de datos como argumento, pero no modelos, se debe realizar la validación de entrada mediante expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="4717d-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="4717d-507">Aquí se debería usar Regex.IsMatch con un patrón de regex válido.</span><span class="sxs-lookup"><span data-stu-id="4717d-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="4717d-508">Si no coincide con la entrada de Hola Hola expresión Regular especificada, control no debe continuar y se debe mostrar una advertencia adecuada con respecto a los errores de validación.</span><span class="sxs-lookup"><span data-stu-id="4717d-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="4717d-509"><a id="dos-expression"></a>Establecer tiempo de espera de límite superior para procesar DoS tooprevent debido a las expresiones regulares toobad de expresión regular</span><span class="sxs-lookup"><span data-stu-id="4717d-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="4717d-510">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-510">Title</span></span>                   | <span data-ttu-id="4717d-511">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-512">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-512">**Component**</span></span>               | <span data-ttu-id="4717d-513">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-513">Web Application</span></span> | 
| <span data-ttu-id="4717d-514">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-514">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-515">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-515">Build</span></span> |  
| <span data-ttu-id="4717d-516">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-516">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-517">Genérico, formularios Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="4717d-518">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-518">**Attributes**</span></span>              | <span data-ttu-id="4717d-519">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-519">N/A</span></span>  |
| <span data-ttu-id="4717d-520">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-520">**References**</span></span>              | [<span data-ttu-id="4717d-521">Propiedad DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="4717d-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="4717d-522">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-522">**Steps**</span></span> | <span data-ttu-id="4717d-523">tooensure ataques por denegación de servicio contra mal crear expresiones regulares, que provocan grandes tiempos de retroceso, establecer el tiempo de espera de hello predeterminado global.</span><span class="sxs-lookup"><span data-stu-id="4717d-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="4717d-524">Si el tiempo de procesamiento de hello tarda más tiempo de hello define el límite superior, produciría una excepción de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="4717d-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="4717d-525">Si se configura nada, tiempo de espera de hello sería infinito.</span><span class="sxs-lookup"><span data-stu-id="4717d-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="4717d-526">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-526">Example</span></span>
<span data-ttu-id="4717d-527">Por ejemplo, hello configuración siguiente producirá un RegexMatchTimeoutException, si el procesamiento de hello tarda más de 5 segundos:</span><span class="sxs-lookup"><span data-stu-id="4717d-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="4717d-528"><a id="html-razor"></a>No use Html.Raw en las vistas Razor</span><span class="sxs-lookup"><span data-stu-id="4717d-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="4717d-529">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-529">Title</span></span>                   | <span data-ttu-id="4717d-530">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-531">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-531">**Component**</span></span>               | <span data-ttu-id="4717d-532">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="4717d-532">Web Application</span></span> | 
| <span data-ttu-id="4717d-533">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-533">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-534">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-534">Build</span></span> |  
| <span data-ttu-id="4717d-535">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-535">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-536">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-537">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-537">**Attributes**</span></span>              | <span data-ttu-id="4717d-538">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-538">N/A</span></span>  |
| <span data-ttu-id="4717d-539">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-539">**References**</span></span>              | <span data-ttu-id="4717d-540">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-540">N/A</span></span>  |
| <span data-ttu-id="4717d-541">Paso</span><span class="sxs-lookup"><span data-stu-id="4717d-541">Step</span></span> | <span data-ttu-id="4717d-542">Las páginas Web ASP.Net (Razor) realizan la codificación de HTML automáticamente.</span><span class="sxs-lookup"><span data-stu-id="4717d-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="4717d-543">Todas las cadenas impresas por fragmentos de código insertados (bloques @) se codifican en HTML de forma automática.</span><span class="sxs-lookup"><span data-stu-id="4717d-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="4717d-544">Sin embargo, cuando se invoca el método `HtmlHelper.Raw`, devuelve marcado que no está codificado en HTML.</span><span class="sxs-lookup"><span data-stu-id="4717d-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="4717d-545">Si `Html.Raw()` se utiliza el método auxiliar, omite Hola codificación la protección automática que proporciona Razor.</span><span class="sxs-lookup"><span data-stu-id="4717d-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="4717d-546">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-546">Example</span></span>
<span data-ttu-id="4717d-547">El siguiente ejemplo es inseguro:</span><span class="sxs-lookup"><span data-stu-id="4717d-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="4717d-548">No utilice `Html.Raw()` a menos que necesite toodisplay marcado.</span><span class="sxs-lookup"><span data-stu-id="4717d-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="4717d-549">Este método no realiza la codificación de salida implícitamente.</span><span class="sxs-lookup"><span data-stu-id="4717d-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="4717d-550">Use otros métodos auxiliares de ASP.NET, como `@Html.DisplayFor()`.</span><span class="sxs-lookup"><span data-stu-id="4717d-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="4717d-551"><a id="stored-proc"></a>No use consultas dinámicas en procedimientos almacenados</span><span class="sxs-lookup"><span data-stu-id="4717d-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="4717d-552">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-552">Title</span></span>                   | <span data-ttu-id="4717d-553">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-554">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-554">**Component**</span></span>               | <span data-ttu-id="4717d-555">Base de datos</span><span class="sxs-lookup"><span data-stu-id="4717d-555">Database</span></span> | 
| <span data-ttu-id="4717d-556">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-556">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-557">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-557">Build</span></span> |  
| <span data-ttu-id="4717d-558">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-558">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-559">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-559">Generic</span></span> |
| <span data-ttu-id="4717d-560">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-560">**Attributes**</span></span>              | <span data-ttu-id="4717d-561">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-561">N/A</span></span>  |
| <span data-ttu-id="4717d-562">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-562">**References**</span></span>              | <span data-ttu-id="4717d-563">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-563">N/A</span></span>  |
| <span data-ttu-id="4717d-564">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-564">**Steps**</span></span> | <p><span data-ttu-id="4717d-565">Un ataque de inyección de SQL aprovecha las vulnerabilidades en comandos arbitrarios de validación de entrada toorun en base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="4717d-566">Puede producirse cuando la aplicación utiliza la entrada tooconstruct dinámica tooaccess de instrucciones SQL Hola base de datos.</span><span class="sxs-lookup"><span data-stu-id="4717d-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="4717d-567">También puede producirse si el código usa procedimientos almacenados a los que se pasan cadenas que contienen entrada de usuario sin procesar.</span><span class="sxs-lookup"><span data-stu-id="4717d-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="4717d-568">Mediante Hola ataque de inyección de SQL, atacante Hola puede ejecutar comandos arbitrarios en la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="4717d-569">Todas las instrucciones de SQL (incluidas las instrucciones de SQL de hello en los procedimientos almacenados) deben tener parámetros.</span><span class="sxs-lookup"><span data-stu-id="4717d-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="4717d-570">Instrucciones SQL parametrizadas aceptará caracteres que tienen un significado especial tooSQL (por ejemplo, las comillas simples) sin problemas porque están fuertemente tipados.</span><span class="sxs-lookup"><span data-stu-id="4717d-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="4717d-571">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-571">Example</span></span>
<span data-ttu-id="4717d-572">El ejemplo siguiente es de un procedimiento almacenado dinámico inseguro:</span><span class="sxs-lookup"><span data-stu-id="4717d-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="4717d-573">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-573">Example</span></span>
<span data-ttu-id="4717d-574">Aquí te mostramos Hola mismo procedimiento almacenado se implementa de forma segura:</span><span class="sxs-lookup"><span data-stu-id="4717d-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="4717d-575"><a id="validation-api"></a>Asegúrese de que se lleve a cabo la validación del modelo en métodos de API web</span><span class="sxs-lookup"><span data-stu-id="4717d-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="4717d-576">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-576">Title</span></span>                   | <span data-ttu-id="4717d-577">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-578">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-578">**Component**</span></span>               | <span data-ttu-id="4717d-579">API Web</span><span class="sxs-lookup"><span data-stu-id="4717d-579">Web API</span></span> | 
| <span data-ttu-id="4717d-580">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-580">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-581">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-581">Build</span></span> |  
| <span data-ttu-id="4717d-582">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-582">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-583">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="4717d-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="4717d-584">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-584">**Attributes**</span></span>              | <span data-ttu-id="4717d-585">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-585">N/A</span></span>  |
| <span data-ttu-id="4717d-586">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-586">**References**</span></span>              | <span data-ttu-id="4717d-587">[Model Validation in ASP.NET Web API](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) (Validación de modelo en ASP.NET Web API)</span><span class="sxs-lookup"><span data-stu-id="4717d-587">[Model Validation in ASP.NET Web API ](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api)</span></span> |
| <span data-ttu-id="4717d-588">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-588">**Steps**</span></span> | <span data-ttu-id="4717d-589">Cuando un cliente envía API web de tooa de datos, son obligatorios toovalidate Hola datos antes de realizar cualquier procesamiento.</span><span class="sxs-lookup"><span data-stu-id="4717d-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="4717d-590">Para ASP.NET Web API que aceptan modelos como entrada, utilice las anotaciones de datos en las reglas de validación de modelos tooset en Propiedades de Hola de modelo de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="4717d-591">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-591">Example</span></span>
<span data-ttu-id="4717d-592">Hola siguiente código de muestra de Hola mismo:</span><span class="sxs-lookup"><span data-stu-id="4717d-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="4717d-593">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-593">Example</span></span>
<span data-ttu-id="4717d-594">En el método de acción de Hola de controladores de API de Hola, validez del modelo de hello tiene toobe comprueban explícitamente como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="4717d-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="4717d-595"><a id="string-api"></a>Implemente la validación de entrada en todos los parámetros de tipo cadena aceptados por métodos de API web</span><span class="sxs-lookup"><span data-stu-id="4717d-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="4717d-596">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-596">Title</span></span>                   | <span data-ttu-id="4717d-597">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-598">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-598">**Component**</span></span>               | <span data-ttu-id="4717d-599">API Web</span><span class="sxs-lookup"><span data-stu-id="4717d-599">Web API</span></span> | 
| <span data-ttu-id="4717d-600">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-600">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-601">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-601">Build</span></span> |  
| <span data-ttu-id="4717d-602">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-602">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-603">Genérico, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="4717d-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="4717d-604">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-604">**Attributes**</span></span>              | <span data-ttu-id="4717d-605">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-605">N/A</span></span>  |
| <span data-ttu-id="4717d-606">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-606">**References**</span></span>              | <span data-ttu-id="4717d-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Validación de datos de modelo en una aplicación de MVC), [Principios orientativos para las aplicaciones de ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="4717d-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="4717d-608">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-608">**Steps**</span></span> | <span data-ttu-id="4717d-609">Para los métodos que solo acepten el tipo primitivo de datos como argumento, pero no modelos, se debe realizar la validación de entrada mediante expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="4717d-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="4717d-610">Aquí se debería usar Regex.IsMatch con un patrón de regex válido.</span><span class="sxs-lookup"><span data-stu-id="4717d-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="4717d-611">Si no coincide con la entrada de Hola Hola expresión Regular especificada, control no debe continuar y se debe mostrar una advertencia adecuada con respecto a los errores de validación.</span><span class="sxs-lookup"><span data-stu-id="4717d-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="4717d-612"><a id="typesafe-api"></a>Asegúrese de que se usen parámetros con seguridad de tipos en la API web para el acceso a datos</span><span class="sxs-lookup"><span data-stu-id="4717d-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="4717d-613">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-613">Title</span></span>                   | <span data-ttu-id="4717d-614">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-615">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-615">**Component**</span></span>               | <span data-ttu-id="4717d-616">API Web</span><span class="sxs-lookup"><span data-stu-id="4717d-616">Web API</span></span> | 
| <span data-ttu-id="4717d-617">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-617">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-618">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-618">Build</span></span> |  
| <span data-ttu-id="4717d-619">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-619">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-620">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-620">Generic</span></span> |
| <span data-ttu-id="4717d-621">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-621">**Attributes**</span></span>              | <span data-ttu-id="4717d-622">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-622">N/A</span></span>  |
| <span data-ttu-id="4717d-623">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-623">**References**</span></span>              | <span data-ttu-id="4717d-624">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-624">N/A</span></span>  |
| <span data-ttu-id="4717d-625">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-625">**Steps**</span></span> | <p><span data-ttu-id="4717d-626">Si utiliza la colección de parámetros de hello, SQL trata Hola entrada es como un valor literal en lugar de en código ejecutable.</span><span class="sxs-lookup"><span data-stu-id="4717d-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="4717d-627">Hola colección de parámetros puede ser tooenforce usado las restricciones de tipo y longitud de los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="4717d-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="4717d-628">Valores fuera de intervalo de hello desencadenan una excepción.</span><span class="sxs-lookup"><span data-stu-id="4717d-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="4717d-629">Si no se utilizan parámetros SQL de seguridad de tipos, los atacantes podrían tooexecute capaz de ataques de inyección que se incrustan en la entrada de hello sin filtrar.</span><span class="sxs-lookup"><span data-stu-id="4717d-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="4717d-630">Usar parámetros de tipo seguro cuando construir SQL las consultas tooavoid posibles ataques de inyección SQL que pueden producirse con una entrada sin filtrar.</span><span class="sxs-lookup"><span data-stu-id="4717d-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="4717d-631">Puede usar parámetros con seguridad de tipos con procedimientos almacenados e instrucciones SQL dinámicas.</span><span class="sxs-lookup"><span data-stu-id="4717d-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="4717d-632">Los parámetros se tratan como valores literales por base de datos de hello y no como código ejecutable.</span><span class="sxs-lookup"><span data-stu-id="4717d-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="4717d-633">También se comprueban el tipo y la longitud de los parámetros.</span><span class="sxs-lookup"><span data-stu-id="4717d-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="4717d-634">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4717d-634">Example</span></span>
<span data-ttu-id="4717d-635">Hello código siguiente muestra cómo toouse parámetros de tipo seguros con hello SqlParameterCollection al llamar a un procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="4717d-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="4717d-636">Hola anterior ejemplo de código, el valor de entrada de hello no puede ser más de 11 caracteres.</span><span class="sxs-lookup"><span data-stu-id="4717d-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="4717d-637">Si no ajustan datos hello toohello tipo o la longitud definida por el parámetro hello, Hola SqlParameter (clase) inicia una excepción.</span><span class="sxs-lookup"><span data-stu-id="4717d-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="4717d-638"><a id="sql-docdb"></a>Uso de consultas SQL parametrizadas con Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="4717d-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="4717d-639">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-639">Title</span></span>                   | <span data-ttu-id="4717d-640">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-641">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-641">**Component**</span></span>               | <span data-ttu-id="4717d-642">Azure DocumentDB</span><span class="sxs-lookup"><span data-stu-id="4717d-642">Azure Document DB</span></span> | 
| <span data-ttu-id="4717d-643">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-643">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-644">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-644">Build</span></span> |  
| <span data-ttu-id="4717d-645">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-645">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-646">Genérico</span><span class="sxs-lookup"><span data-stu-id="4717d-646">Generic</span></span> |
| <span data-ttu-id="4717d-647">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-647">**Attributes**</span></span>              | <span data-ttu-id="4717d-648">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-648">N/A</span></span>  |
| <span data-ttu-id="4717d-649">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-649">**References**</span></span>              | <span data-ttu-id="4717d-650">[Announcing SQL Parameterization in DocumentDB](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) (Anuncio de la parametrización de SQL en DocumentDB)</span><span class="sxs-lookup"><span data-stu-id="4717d-650">[Announcing SQL Parameterization in DocumentDB](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/)</span></span> |
| <span data-ttu-id="4717d-651">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-651">**Steps**</span></span> | <span data-ttu-id="4717d-652">Aunque DocumentDB solo admite consultas de solo lectura, todavía es posible inyectar código SQL si las consultas se crean mediante la concatenación con la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="4717d-653">Es posible que un toodata de acceso de usuario toogain que no deberían tener acceso a dentro de Hola misma colección diseñando consultas SQL malintencionadas.</span><span class="sxs-lookup"><span data-stu-id="4717d-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="4717d-654">Use consultas SQL parametrizadas si las consultas se construyen tomando como base la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4717d-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="4717d-655"><a id="schema-binding"></a>Validación de entrada de WCF mediante enlaces de esquema</span><span class="sxs-lookup"><span data-stu-id="4717d-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="4717d-656">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-656">Title</span></span>                   | <span data-ttu-id="4717d-657">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-658">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-658">**Component**</span></span>               | <span data-ttu-id="4717d-659">WCF</span><span class="sxs-lookup"><span data-stu-id="4717d-659">WCF</span></span> | 
| <span data-ttu-id="4717d-660">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-660">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-661">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-661">Build</span></span> |  
| <span data-ttu-id="4717d-662">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-662">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-663">Genérico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="4717d-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="4717d-664">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-664">**Attributes**</span></span>              | <span data-ttu-id="4717d-665">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-665">N/A</span></span>  |
| <span data-ttu-id="4717d-666">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-666">**References**</span></span>              | [<span data-ttu-id="4717d-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="4717d-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="4717d-668">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-668">**Steps**</span></span> | <p><span data-ttu-id="4717d-669">Falta de validación da lugar a ataques de inyección de código de tipo toodifferent.</span><span class="sxs-lookup"><span data-stu-id="4717d-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="4717d-670">Validación del mensaje representa una línea de defensa para la protección de saludo de la aplicación de WCF.</span><span class="sxs-lookup"><span data-stu-id="4717d-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="4717d-671">Con este enfoque, validar mensajes mediante operaciones de servicio WCF de esquemas tooprotect contra los ataques de un cliente malintencionado.</span><span class="sxs-lookup"><span data-stu-id="4717d-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="4717d-672">Validar todos los mensajes recibidos por hello tooprotect Hola cliente contra los ataques por un servicio malintencionado.</span><span class="sxs-lookup"><span data-stu-id="4717d-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="4717d-673">Validación del mensaje hace posible toovalidate mensajes cuando las operaciones de consumir contratos de mensajes o contratos de datos, lo que no se puede realizar mediante la validación de parámetros.</span><span class="sxs-lookup"><span data-stu-id="4717d-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="4717d-674">Validación de mensajes le permite toocreate lógica de validación en esquemas, con lo que se proporciona más flexibilidad y reducir el tiempo de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="4717d-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="4717d-675">Los esquemas se pueden reutilizar en las distintas aplicaciones dentro de la organización de hello, creación de estándares para la representación de datos.</span><span class="sxs-lookup"><span data-stu-id="4717d-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="4717d-676">Además, validación de mensajes le permite operaciones de tooprotect cuando usan tipos de datos más complejos que implican contratos que representa la lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="4717d-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="4717d-677">validación del mensaje tooperform, primero cree un esquema que representa las operaciones de Hola de los tipos de datos de hello y servicio utilizados por esas operaciones.</span><span class="sxs-lookup"><span data-stu-id="4717d-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="4717d-678">A continuación, cree una clase de .NET que implementa un inspector de mensajes de cliente personalizada y distribuidor personalizado de mensajes inspector toovalidate Hola de mensajes enviados o recibidos desde el servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="4717d-679">A continuación, implemente una validación de mensajes de tooenable de comportamiento de extremo personalizado en el cliente de Hola y el servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="4717d-680">Por último, implementar un elemento de configuración personalizada en una clase hello que permite tooexpose hello extendido comportamiento de extremo personalizado en archivo de configuración de hello del servicio de Hola o cliente de hello"</span><span class="sxs-lookup"><span data-stu-id="4717d-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="4717d-681"><a id="parameters"></a>Validación de entrada de WCF mediante inspectores de parámetros</span><span class="sxs-lookup"><span data-stu-id="4717d-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="4717d-682">Título</span><span class="sxs-lookup"><span data-stu-id="4717d-682">Title</span></span>                   | <span data-ttu-id="4717d-683">Detalles</span><span class="sxs-lookup"><span data-stu-id="4717d-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4717d-684">**Componente**</span><span class="sxs-lookup"><span data-stu-id="4717d-684">**Component**</span></span>               | <span data-ttu-id="4717d-685">WCF</span><span class="sxs-lookup"><span data-stu-id="4717d-685">WCF</span></span> | 
| <span data-ttu-id="4717d-686">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="4717d-686">**SDL Phase**</span></span>               | <span data-ttu-id="4717d-687">Compilación</span><span class="sxs-lookup"><span data-stu-id="4717d-687">Build</span></span> |  
| <span data-ttu-id="4717d-688">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="4717d-688">**Applicable Technologies**</span></span> | <span data-ttu-id="4717d-689">Genérico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="4717d-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="4717d-690">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="4717d-690">**Attributes**</span></span>              | <span data-ttu-id="4717d-691">N/D</span><span class="sxs-lookup"><span data-stu-id="4717d-691">N/A</span></span>  |
| <span data-ttu-id="4717d-692">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="4717d-692">**References**</span></span>              | [<span data-ttu-id="4717d-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="4717d-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="4717d-694">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="4717d-694">**Steps**</span></span> | <p><span data-ttu-id="4717d-695">Entrada y validación de datos representa una línea de defensa en protección de saludo de la aplicación WCF importante.</span><span class="sxs-lookup"><span data-stu-id="4717d-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="4717d-696">Debe validar todos los parámetros que se exponen en el servicio WCF servicio operations tooprotect Hola contra los ataques mediante un cliente malintencionado.</span><span class="sxs-lookup"><span data-stu-id="4717d-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="4717d-697">A la inversa, también debe validar todos los valores devueltos recibidos por hello tooprotect Hola cliente contra los ataques por un servicio malintencionado</span><span class="sxs-lookup"><span data-stu-id="4717d-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="4717d-698">WCF ofrece puntos de extensibilidad diferentes que permiten el comportamiento de tiempo de ejecución WCF de hello toocustomize mediante la creación de extensiones personalizadas.</span><span class="sxs-lookup"><span data-stu-id="4717d-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="4717d-699">Los inspectores y los inspectores de parámetros son dos mecanismos de extensibilidad de mensaje utiliza toogain mayor control sobre los datos de hello pasar entre un cliente y un servicio.</span><span class="sxs-lookup"><span data-stu-id="4717d-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="4717d-700">Debe usar los inspectores de parámetros para la validación de entrada y usar los inspectores de mensaje sólo cuando sea necesario que fluyen dentro y fuera de un servicio de todo mensaje tooinspect Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="4717d-701">tooperform la validación de entrada, generará una clase .NET e implementar un inspector de parámetros personalizado en los parámetros de toovalidate de orden de las operaciones en el servicio.</span><span class="sxs-lookup"><span data-stu-id="4717d-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="4717d-702">A continuación, implementará una validación de tooenable del comportamiento de extremo personalizado en el cliente de Hola y el servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="4717d-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="4717d-703">Por último, implementará un elemento de configuración personalizado en una clase hello que permite tooexpose hello extendido comportamiento de extremo personalizado en archivo de configuración de hello del servicio de Hola o cliente de Hola</span><span class="sxs-lookup"><span data-stu-id="4717d-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|

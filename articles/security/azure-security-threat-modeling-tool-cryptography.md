---
title: "Criptografía: Microsoft Threat Modeling Tool (Azure) | Microsoft Docs"
description: mitigaciones para amenazas expuestas en Threat Modeling Tool
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 96e74371fe51a8050a91c86215e3eefab07bbed8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-cryptography--mitigations"></a><span data-ttu-id="10a17-103">Marco de seguridad: Criptografía | Mitigaciones</span><span class="sxs-lookup"><span data-stu-id="10a17-103">Security Frame: Cryptography | Mitigations</span></span> 
| <span data-ttu-id="10a17-104">Producto o servicio</span><span class="sxs-lookup"><span data-stu-id="10a17-104">Product/Service</span></span> | <span data-ttu-id="10a17-105">Artículo</span><span class="sxs-lookup"><span data-stu-id="10a17-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="10a17-106">**Aplicación web**</span><span class="sxs-lookup"><span data-stu-id="10a17-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="10a17-107">Use solamente los cifrados de bloques simétricos y longitudes de clave aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-107">Use only approved symmetric block ciphers and key lengths</span></span>](#cipher-length)</li><li>[<span data-ttu-id="10a17-108">Use modos aprobados de cifrado de bloques y vectores de inicialización apropiados para los cifrados simétricos</span><span class="sxs-lookup"><span data-stu-id="10a17-108">Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>](#vector-ciphers)</li><li>[<span data-ttu-id="10a17-109">Use algoritmos asimétricos, longitudes de clave y rellenos aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-109">Use approved asymmetric algorithms, key lengths, and padding</span></span>](#padding)</li><li>[<span data-ttu-id="10a17-110">Use generadores de números aleatorios aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-110">Use approved random number generators</span></span>](#numgen)</li><li>[<span data-ttu-id="10a17-111">No use cifrados de flujo simétricos</span><span class="sxs-lookup"><span data-stu-id="10a17-111">Do not use symmetric stream ciphers</span></span>](#stream-ciphers)</li><li>[<span data-ttu-id="10a17-112">Use los algoritmos hash con clave MAC o HMAC aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-112">Use approved MAC/HMAC/keyed hash algorithms</span></span>](#mac-hash)</li><li>[<span data-ttu-id="10a17-113">Use solamente las funciones hash criptográficas aprobadas</span><span class="sxs-lookup"><span data-stu-id="10a17-113">Use only approved cryptographic hash functions</span></span>](#hash-functions)</li></ul> |
| <span data-ttu-id="10a17-114">**Base de datos**</span><span class="sxs-lookup"><span data-stu-id="10a17-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="10a17-115">Use algoritmos de cifrado de alta seguridad para cifrar los datos de la base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-115">Use strong encryption algorithms to encrypt data in the database</span></span>](#strong-db)</li><li>[<span data-ttu-id="10a17-116">Los paquetes SSIS deben cifrarse y firmarse digitalmente</span><span class="sxs-lookup"><span data-stu-id="10a17-116">SSIS packages should be encrypted and digitally signed</span></span>](#ssis-signed)</li><li>[<span data-ttu-id="10a17-117">Agregue una firma digital a los elementos protegibles críticos de base de datos </span><span class="sxs-lookup"><span data-stu-id="10a17-117">Add digital signature to critical database securables</span></span>](#securables-db)</li><li>[<span data-ttu-id="10a17-118">Use la administración extensible de claves (EKM) de SQL Server para proteger las claves de cifrado</span><span class="sxs-lookup"><span data-stu-id="10a17-118">Use SQL server EKM to protect encryption keys</span></span>](#ekm-keys)</li><li>[<span data-ttu-id="10a17-119">Use la característica AlwaysEncrypted si las claves de cifrado no deben mostrarse al motor de base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-119">Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span></span>](#keys-engine)</li></ul> |
| <span data-ttu-id="10a17-120">**Dispositivo de IoT**</span><span class="sxs-lookup"><span data-stu-id="10a17-120">**IoT Device**</span></span> | <ul><li>[<span data-ttu-id="10a17-121">Almacene las claves criptográficas de forma segura en dispositivos IoT</span><span class="sxs-lookup"><span data-stu-id="10a17-121">Store Cryptographic Keys securely on IoT Device</span></span>](#keys-iot)</li></ul> | 
| <span data-ttu-id="10a17-122">**Puerta de enlace de nube de IoT**</span><span class="sxs-lookup"><span data-stu-id="10a17-122">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="10a17-123">Genere una clave simétrica aleatoria de longitud suficiente para la autenticación en IoT Hub</span><span class="sxs-lookup"><span data-stu-id="10a17-123">Generate a random symmetric key of sufficient length for authentication to IoT Hub</span></span>](#random-hub)</li></ul> | 
| <span data-ttu-id="10a17-124">**Cliente para dispositivos móviles de Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="10a17-124">**Dynamics CRM Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="10a17-125">Asegúrese de que hay una directiva de administración de dispositivos que requiere el uso de un PIN y permite el borrado remoto</span><span class="sxs-lookup"><span data-stu-id="10a17-125">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>](#pin-remote)</li></ul> | 
| <span data-ttu-id="10a17-126">**Cliente de Outlook de Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="10a17-126">**Dynamics CRM Outlook Client**</span></span> | <ul><li>[<span data-ttu-id="10a17-127">Asegúrese de que hay una directiva de administración de dispositivos que requiere un bloqueo automático con PIN o contraseña, y cifra todos los datos (por ejemplo, Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="10a17-127">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>](#bitlocker)</li></ul> | 
| <span data-ttu-id="10a17-128">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="10a17-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="10a17-129">Asegúrese de que las claves de firma se sustituyen cuando se usa Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-129">Ensure that signing keys are rolled over when using Identity Server</span></span>](#rolled-server)</li><li>[<span data-ttu-id="10a17-130">Asegúrese de que se usan un identificador de cliente y un secreto de cliente de alta seguridad criptográfica en Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-130">Ensure that cryptographically strong client ID, client secret are used in Identity Server</span></span>](#client-server)</li></ul> | 

## <span data-ttu-id="10a17-131"><a id="cipher-length"></a>Use solamente los cifrados de bloques simétricos y longitudes de clave aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-131"><a id="cipher-length"></a>Use only approved symmetric block ciphers and key lengths</span></span>

| <span data-ttu-id="10a17-132">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-132">Title</span></span>                   | <span data-ttu-id="10a17-133">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-133">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-134">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-134">**Component**</span></span>               | <span data-ttu-id="10a17-135">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-135">Web Application</span></span> | 
| <span data-ttu-id="10a17-136">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-136">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-137">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-137">Build</span></span> |  
| <span data-ttu-id="10a17-138">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-138">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-139">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-139">Generic</span></span> |
| <span data-ttu-id="10a17-140">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-140">**Attributes**</span></span>              | <span data-ttu-id="10a17-141">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-141">N/A</span></span>  |
| <span data-ttu-id="10a17-142">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-142">**References**</span></span>              | <span data-ttu-id="10a17-143">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-143">N/A</span></span>  |
| <span data-ttu-id="10a17-144">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-144">**Steps**</span></span> | <p><span data-ttu-id="10a17-145">Los productos tienen que usar solo los cifrados de bloques simétricos y las longitudes de clave asociadas que haya aprobado de forma explícita el asesor de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-145">Products must use only those symmetric block ciphers and associated key lengths which have been explicitly approved by the Crypto Advisor in your organization.</span></span> <span data-ttu-id="10a17-146">Los algoritmos simétricos aprobados de Microsoft incluyen los cifrados de bloques siguientes:</span><span class="sxs-lookup"><span data-stu-id="10a17-146">Approved symmetric algorithms at Microsoft include the following block ciphers:</span></span></p><ul><li><span data-ttu-id="10a17-147">Para el nuevo código son aceptables AES-128, AES-192 y AES-256</span><span class="sxs-lookup"><span data-stu-id="10a17-147">For new code AES-128, AES-192, and AES-256 are acceptable</span></span></li><li><span data-ttu-id="10a17-148">Para mantener la compatibilidad con el código existente, el algoritmo 3DES de tres claves es aceptable</span><span class="sxs-lookup"><span data-stu-id="10a17-148">For backward compatibility with existing code, three-key 3DES is acceptable</span></span></li><li><span data-ttu-id="10a17-149">Para los productos con cifrados de bloques simétricos:</span><span class="sxs-lookup"><span data-stu-id="10a17-149">For products using symmetric block ciphers:</span></span><ul><li><span data-ttu-id="10a17-150">El estándar de cifrado avanzado (AES) es necesario para el nuevo código</span><span class="sxs-lookup"><span data-stu-id="10a17-150">Advanced Encryption Standard (AES) is required for new code</span></span></li><li><span data-ttu-id="10a17-151">El estándar de cifrado de datos triple (3DES) con tres claves está permitido en el código existente para proporcionar la compatibilidad con versiones anteriores</span><span class="sxs-lookup"><span data-stu-id="10a17-151">Three-key triple Data Encryption Standard (3DES) is permissible in existing code for backward compatibility</span></span></li><li><span data-ttu-id="10a17-152">Todos los demás cifrados de bloques, como RC2, DES, 3DES de dos claves, DESX y Skipjack, solo pueden usarse para descifrar datos antiguos y tienen que reemplazarse si se usan para el cifrado</span><span class="sxs-lookup"><span data-stu-id="10a17-152">All other block ciphers, including RC2, DES, 2 Key 3DES, DESX, and Skipjack, may only be used for decrypting old data, and must be replaced if used for encryption</span></span></li></ul></li><li><span data-ttu-id="10a17-153">Para los algoritmos de cifrado de bloques simétrico, se requiere una longitud de clave mínima de 128 bits.</span><span class="sxs-lookup"><span data-stu-id="10a17-153">For symmetric block encryption algorithms, a minimum key length of 128 bits is required.</span></span> <span data-ttu-id="10a17-154">El único algoritmo de cifrado de bloques recomendado para el nuevo código es AES (AES-128, AES-192 y AES-256 son aceptables)</span><span class="sxs-lookup"><span data-stu-id="10a17-154">The only block encryption algorithm recommended for new code is AES (AES-128, AES-192 and AES-256 are all acceptable)</span></span></li><li><span data-ttu-id="10a17-155">El algoritmo 3DES de tres claves se acepta actualmente si ya está en uso en el código existente; se recomienda la transición al algoritmo AES.</span><span class="sxs-lookup"><span data-stu-id="10a17-155">Three-key 3DES is currently acceptable if already in use in existing code; transition to AES is recommended.</span></span> <span data-ttu-id="10a17-156">DES, DESX, RC2 y Skipjack ya no se consideran seguros.</span><span class="sxs-lookup"><span data-stu-id="10a17-156">DES, DESX, RC2, and Skipjack are no longer considered secure.</span></span> <span data-ttu-id="10a17-157">Estos algoritmos solo pueden utilizarse para descifrar datos existentes por motivos de compatibilidad con versiones anteriores, y los datos se deben volver a cifrar mediante uno de los cifrados de bloques recomendados</span><span class="sxs-lookup"><span data-stu-id="10a17-157">These algorithms may only be used for decrypting existing data for the sake of backward-compatibility, and data should be re-encrypted using a recommended block cipher</span></span></li></ul><p><span data-ttu-id="10a17-158">Tenga en cuenta que todos los cifrados de bloques simétricos tienen que usarse con un modo de cifrado aprobado, lo que requiere el uso de un vector de inicialización (IV) adecuado.</span><span class="sxs-lookup"><span data-stu-id="10a17-158">Please note that all symmetric block ciphers must be used with an approved cipher mode, which requires use of an appropriate initialization vector (IV).</span></span> <span data-ttu-id="10a17-159">Un vector de inicialización adecuado, suele ser un número aleatorio y nunca un valor constante</span><span class="sxs-lookup"><span data-stu-id="10a17-159">An appropriate IV, is typically a random number and never a constant value</span></span></p><p><span data-ttu-id="10a17-160">El uso de algoritmos criptográficos heredados o no aprobados, y de longitudes de clave más pequeñas con el fin de leer los datos existentes (no de escribir nuevos datos), se puede permitir una vez que la junta de criptografía de su organización lo revise.</span><span class="sxs-lookup"><span data-stu-id="10a17-160">The use of legacy or otherwise unapproved crypto algorithms and smaller key lengths for reading existing data (as opposed to writing new data) may be permitted after your organization's Crypto Board review.</span></span> <span data-ttu-id="10a17-161">Sin embargo, debe solicitar una excepción en contra de este requisito.</span><span class="sxs-lookup"><span data-stu-id="10a17-161">However, you must file for an exception against this requirement.</span></span> <span data-ttu-id="10a17-162">Además, en las implementaciones empresariales, los productos deben considerar advertir a los administradores cuando se use una criptografía no segura para leer los datos.</span><span class="sxs-lookup"><span data-stu-id="10a17-162">Additionally, in enterprise deployments, products should consider warning administrators when weak crypto is used to read data.</span></span> <span data-ttu-id="10a17-163">Dichas advertencias deben ser explicativas y prácticas.</span><span class="sxs-lookup"><span data-stu-id="10a17-163">Such warnings should be explanatory and actionable.</span></span> <span data-ttu-id="10a17-164">En algunos casos, puede ser adecuado, establecer una directiva de grupo para controlar el uso de criptografía no segura</span><span class="sxs-lookup"><span data-stu-id="10a17-164">In some cases, it may be appropriate to have Group Policy control the use of weak crypto</span></span></p><p><span data-ttu-id="10a17-165">Algoritmos .NET permitidos para criptografía personal administrada (en orden de preferencia)</span><span class="sxs-lookup"><span data-stu-id="10a17-165">Allowed .NET algorithms for managed crypto agility (in order of preference)</span></span></p><ul><li><span data-ttu-id="10a17-166">AesCng (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-166">AesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-167">AuthenticatedAesCng (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-167">AuthenticatedAesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-168">AESCryptoServiceProvider (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-168">AESCryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-169">AESManaged (no compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-169">AESManaged (non-FIPS-compliant)</span></span></li></ul><p><span data-ttu-id="10a17-170">Tenga en cuenta que ninguno de estos algoritmos se puede especificar a través de los métodos `SymmetricAlgorithm.Create` o `CryptoConfig.CreateFromName` sin realizar cambios en el archivo machine.config.</span><span class="sxs-lookup"><span data-stu-id="10a17-170">Please note that none of these algorithms can be specified via the `SymmetricAlgorithm.Create` or `CryptoConfig.CreateFromName` methods without making changes to the machine.config file.</span></span> <span data-ttu-id="10a17-171">Además, tenga también en cuenta que AES, en las versiones de .NET anteriores a .NET 3.5, se denomina `RijndaelManaged`, y que `AesCng` y `AuthenticatedAesCng` están > disponibles a través de CodePlex y requieren CNG en el sistema operativo subyacente</span><span class="sxs-lookup"><span data-stu-id="10a17-171">Also, note that AES in versions of .NET prior to .NET 3.5 is named `RijndaelManaged`, and `AesCng` and `AuthenticatedAesCng` are >available through CodePlex and require CNG in the underlying OS</span></span></p>

## <span data-ttu-id="10a17-172"><a id="vector-ciphers"></a>Use modos aprobados de cifrado de bloques y vectores de inicialización apropiados para los cifrados simétricos</span><span class="sxs-lookup"><span data-stu-id="10a17-172"><a id="vector-ciphers"></a>Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>

| <span data-ttu-id="10a17-173">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-173">Title</span></span>                   | <span data-ttu-id="10a17-174">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-174">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-175">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-175">**Component**</span></span>               | <span data-ttu-id="10a17-176">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-176">Web Application</span></span> | 
| <span data-ttu-id="10a17-177">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-177">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-178">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-178">Build</span></span> |  
| <span data-ttu-id="10a17-179">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-179">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-180">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-180">Generic</span></span> |
| <span data-ttu-id="10a17-181">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-181">**Attributes**</span></span>              | <span data-ttu-id="10a17-182">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-182">N/A</span></span>  |
| <span data-ttu-id="10a17-183">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-183">**References**</span></span>              | <span data-ttu-id="10a17-184">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-184">N/A</span></span>  |
| <span data-ttu-id="10a17-185">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-185">**Steps**</span></span> | <span data-ttu-id="10a17-186">Todos los cifrados de bloques simétricos tienen que utilizarse con un modo de cifrado simétrico aprobado.</span><span class="sxs-lookup"><span data-stu-id="10a17-186">All symmetric block ciphers must be used with an approved symmetric cipher mode.</span></span> <span data-ttu-id="10a17-187">Los únicos modos aprobados son CBC y CTS.</span><span class="sxs-lookup"><span data-stu-id="10a17-187">The only approved modes are CBC and CTS.</span></span> <span data-ttu-id="10a17-188">En concreto, debe evitarse el modo de libro de códigos electrónico (ECB); el uso de ECB requiere revisión por parte de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-188">In particular, the electronic code book (ECB) mode of operation should be avoided; use of ECB requires your organization's Crypto Board review.</span></span> <span data-ttu-id="10a17-189">Todo posible uso de OFB, CFB, CTR, CCM y GCM o cualquier otro modo de cifrado tiene que revisarlo la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-189">All usage of OFB, CFB, CTR, CCM, and GCM or any other encryption mode must be reviewed by your organization's Crypto Board.</span></span> <span data-ttu-id="10a17-190">Reutilizar el mismo vector de inicialización (IV) con el cifrado de bloques en "modos de cifrados de flujo" como CTR, puede provocar que se muestren los datos cifrados.</span><span class="sxs-lookup"><span data-stu-id="10a17-190">Reusing the same initialization vector (IV) with block ciphers in "streaming ciphers modes," such as CTR, may cause encrypted data to be revealed.</span></span> <span data-ttu-id="10a17-191">Todos los cifrados de bloques simétricos tienen que utilizarse también con un vector de inicialización (IV) adecuado.</span><span class="sxs-lookup"><span data-stu-id="10a17-191">All symmetric block ciphers must also be used with an appropriate initialization vector (IV).</span></span> <span data-ttu-id="10a17-192">Un vector de inicialización adecuado es un número aleatorio de alta seguridad criptográfica y nunca un valor constante.</span><span class="sxs-lookup"><span data-stu-id="10a17-192">An appropriate IV is a cryptographically strong, random number and never a constant value.</span></span> |

## <span data-ttu-id="10a17-193"><a id="padding"></a>Use algoritmos asimétricos, longitudes de clave y rellenos aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-193"><a id="padding"></a>Use approved asymmetric algorithms, key lengths, and padding</span></span>

| <span data-ttu-id="10a17-194">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-194">Title</span></span>                   | <span data-ttu-id="10a17-195">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-195">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-196">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-196">**Component**</span></span>               | <span data-ttu-id="10a17-197">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-197">Web Application</span></span> | 
| <span data-ttu-id="10a17-198">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-198">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-199">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-199">Build</span></span> |  
| <span data-ttu-id="10a17-200">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-200">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-201">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-201">Generic</span></span> |
| <span data-ttu-id="10a17-202">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-202">**Attributes**</span></span>              | <span data-ttu-id="10a17-203">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-203">N/A</span></span>  |
| <span data-ttu-id="10a17-204">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-204">**References**</span></span>              | <span data-ttu-id="10a17-205">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-205">N/A</span></span>  |
| <span data-ttu-id="10a17-206">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-206">**Steps**</span></span> | <p><span data-ttu-id="10a17-207">El uso de algoritmos criptográficos prohibidos supone un riesgo significativo para la seguridad de los productos y debe evitarse.</span><span class="sxs-lookup"><span data-stu-id="10a17-207">The use of banned cryptographic algorithms introduces significant risk to product security and must be avoided.</span></span> <span data-ttu-id="10a17-208">Los productos tienen que usar solo los algoritmos criptográficos, las longitudes de clave y los rellenos que la junta de criptografía de su organización haya aprobado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="10a17-208">Products must use only those cryptographic algorithms and associated key lengths and padding that have been explicitly approved by your organization's Crypto Board.</span></span></p><ul><li><span data-ttu-id="10a17-209">**RSA:** puede utilizarse para el cifrado, el intercambio de claves y la firma.</span><span class="sxs-lookup"><span data-stu-id="10a17-209">**RSA-** may be used for encryption, key exchange and signature.</span></span> <span data-ttu-id="10a17-210">El cifrado RSA tiene que usar solo los modos de relleno OAEP o RSA-KEM.</span><span class="sxs-lookup"><span data-stu-id="10a17-210">RSA encryption must use only the OAEP or RSA-KEM padding modes.</span></span> <span data-ttu-id="10a17-211">El código existente puede utilizar el modo de relleno PKCS #1 v1.5 solo si es necesario para garantizar la compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="10a17-211">Existing code may use PKCS #1 v1.5 padding mode for compatibility only.</span></span> <span data-ttu-id="10a17-212">El uso de relleno nulo está explícitamente prohibido.</span><span class="sxs-lookup"><span data-stu-id="10a17-212">Use of null padding is explicitly banned.</span></span> <span data-ttu-id="10a17-213">El nuevo código requiere claves de 2048 bits o más.</span><span class="sxs-lookup"><span data-stu-id="10a17-213">Keys >= 2048 bits is required for new code.</span></span> <span data-ttu-id="10a17-214">El código existente puede admitir claves de menos de 2048 bits solamente para garantizar la compatibilidad con versiones anteriores, y después de una revisión por parte de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-214">Existing code may support keys < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span></span> <span data-ttu-id="10a17-215">La claves de menos de 1024 bits se pueden usar únicamente para descifrar o verificar datos antiguos, y tienen que remplazarse si se utilizan para operaciones de cifrado o firma</span><span class="sxs-lookup"><span data-stu-id="10a17-215">Keys < 1024 bits may only be used for decrypting/verifying old data, and must be replaced if used for encryption or signing operations</span></span></li><li><span data-ttu-id="10a17-216">**ECDSA:** puede utilizarse solo para la firma.</span><span class="sxs-lookup"><span data-stu-id="10a17-216">**ECDSA-** may be used for signature only.</span></span> <span data-ttu-id="10a17-217">El nuevo código requiere ECDSA con claves de 256 bits o más.</span><span class="sxs-lookup"><span data-stu-id="10a17-217">ECDSA with >=256-bit keys is required for new code.</span></span> <span data-ttu-id="10a17-218">Las firmas basadas en ECDSA tienen que utilizar una de las tres curvas NIST aprobadas (p-256, p-384 o P521).</span><span class="sxs-lookup"><span data-stu-id="10a17-218">ECDSA-based signatures must use one of the three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="10a17-219">Las curvas que se han analizado exhaustivamente pueden utilizarse solo después de una revisión por parte de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-219">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="10a17-220">**ECDH:** puede utilizarse solamente para el intercambio de claves.</span><span class="sxs-lookup"><span data-stu-id="10a17-220">**ECDH-** may be used for key exchange only.</span></span> <span data-ttu-id="10a17-221">El nuevo código requiere ECDH con claves de 256 bits o más.</span><span class="sxs-lookup"><span data-stu-id="10a17-221">ECDH with >=256-bit keys is required for new code.</span></span> <span data-ttu-id="10a17-222">El intercambio de claves de ECDH tiene que utilizar una de las tres curvas NIST aprobadas (p-256, p-384 o P521).</span><span class="sxs-lookup"><span data-stu-id="10a17-222">ECDH-based key exchange must use one of the three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="10a17-223">Las curvas que se han analizado exhaustivamente pueden utilizarse solo después de una revisión por parte de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-223">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="10a17-224">**DSA:** puede ser aceptable después de la revisión y aprobación por parte de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-224">**DSA-** may be acceptable after review and approval from your organization's Crypto Board.</span></span> <span data-ttu-id="10a17-225">Póngase en contacto con su asesor de seguridad para programar la revisión de la junta de criptografía de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-225">Contact your security advisor to schedule your organization's Crypto Board review.</span></span> <span data-ttu-id="10a17-226">Si se aprueba el uso de DSA, tenga en cuenta que tiene que prohibir el uso de claves de menos de 2048 bits de longitud.</span><span class="sxs-lookup"><span data-stu-id="10a17-226">If your use of DSA is approved, note that you will need to prohibit use of keys less than 2048 bits in length.</span></span> <span data-ttu-id="10a17-227">CNG admite longitudes de clave de 2048 bits y superiores a partir de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="10a17-227">CNG supports 2048-bit and greater key lengths as of Windows 8.</span></span></li><li><span data-ttu-id="10a17-228">**Diffie-Hellman:** se puede usar para la administración de claves de sesión únicamente.</span><span class="sxs-lookup"><span data-stu-id="10a17-228">**Diffie-Hellman-** may be used for session key management only.</span></span> <span data-ttu-id="10a17-229">El nuevo código requiere claves con una longitud de 2048 bits o más.</span><span class="sxs-lookup"><span data-stu-id="10a17-229">Key length >= 2048 bits is required for new code.</span></span> <span data-ttu-id="10a17-230">El código existente puede admitir claves con una longitud inferior a 2048 bits solo para garantizar la compatibilidad con versiones anteriores y después de una revisión por parte de la junta de criptografía de la organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-230">Existing code may support key lengths < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span></span> <span data-ttu-id="10a17-231">La claves de menos de 1024 no se pueden usar.</span><span class="sxs-lookup"><span data-stu-id="10a17-231">Keys < 1024 bits may not be used.</span></span></li><ul>

## <span data-ttu-id="10a17-232"><a id="numgen"></a>Use generadores de números aleatorios aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-232"><a id="numgen"></a>Use approved random number generators</span></span>

| <span data-ttu-id="10a17-233">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-233">Title</span></span>                   | <span data-ttu-id="10a17-234">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-234">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-235">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-235">**Component**</span></span>               | <span data-ttu-id="10a17-236">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-236">Web Application</span></span> | 
| <span data-ttu-id="10a17-237">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-237">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-238">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-238">Build</span></span> |  
| <span data-ttu-id="10a17-239">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-239">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-240">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-240">Generic</span></span> |
| <span data-ttu-id="10a17-241">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-241">**Attributes**</span></span>              | <span data-ttu-id="10a17-242">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-242">N/A</span></span>  |
| <span data-ttu-id="10a17-243">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-243">**References**</span></span>              | <span data-ttu-id="10a17-244">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-244">N/A</span></span>  |
| <span data-ttu-id="10a17-245">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-245">**Steps**</span></span> | <p><span data-ttu-id="10a17-246">Los productos tienen que usar generadores de números aleatorios aprobados.</span><span class="sxs-lookup"><span data-stu-id="10a17-246">Products must use approved random number generators.</span></span> <span data-ttu-id="10a17-247">Las funciones pseudoaleatorias, como la función en tiempo de ejecución de C, la clase de .NET Framework System.Random, o funciones del sistema como GetTickCount no deben por lo tanto usarse nunca en este código.</span><span class="sxs-lookup"><span data-stu-id="10a17-247">Pseudorandom functions such as the C runtime function rand, the .NET Framework class System.Random, or system functions such as GetTickCount must, therefore, never be used in such code.</span></span> <span data-ttu-id="10a17-248">Se prohíbe el uso del algoritmo (DUAL_EC_DRBG) del generador de números aleatorios de curva elíptica dual</span><span class="sxs-lookup"><span data-stu-id="10a17-248">Use of the dual elliptic curve random number generator (DUAL_EC_DRBG) algorithm is prohibited</span></span></p><ul><li><span data-ttu-id="10a17-249">**CNG:** BCryptGenRandom (uso de la marca BCRYPT_USE_SYSTEM_PREFERRED_RNG recomendado a menos que el llamador pueda ejecutarse en cualquier IRQL mayor que 0 [es decir, PASSIVE_LEVEL])</span><span class="sxs-lookup"><span data-stu-id="10a17-249">**CNG-** BCryptGenRandom(use of the BCRYPT_USE_SYSTEM_PREFERRED_RNG flag recommended unless the caller might run at any IRQL greater than 0 [that is, PASSIVE_LEVEL])</span></span></li><li><span data-ttu-id="10a17-250">**CAPI:** cryptGenRandom</span><span class="sxs-lookup"><span data-stu-id="10a17-250">**CAPI-** cryptGenRandom</span></span></li><li><span data-ttu-id="10a17-251">**Win32/64:** RtlGenRandom (las implementaciones nuevas deben utilizar BCryptGenRandom o CryptGenRandom) * rand_s * SystemPrng (para el modo de kernel)</span><span class="sxs-lookup"><span data-stu-id="10a17-251">**Win32/64-** RtlGenRandom (new implementations should use BCryptGenRandom or CryptGenRandom) * rand_s * SystemPrng (for kernel mode)</span></span></li><li><span data-ttu-id="10a17-252">**.NET:** RNGCryptoServiceProvider o RNGCng</span><span class="sxs-lookup"><span data-stu-id="10a17-252">**.NET-** RNGCryptoServiceProvider or RNGCng</span></span></li><li><span data-ttu-id="10a17-253">**Aplicaciones de la Tienda Windows:** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom o .GenerateRandomNumber</span><span class="sxs-lookup"><span data-stu-id="10a17-253">**Windows Store Apps-** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom or .GenerateRandomNumber</span></span></li><li><span data-ttu-id="10a17-254">**Apple OS X (10.7+)/iOS(2.0+):** int SecRandomCopyBytes (SecRandomRef random, size_t count, uint8_t *bytes )</li><li>**Apple OS X (<10.7)-** Use /dev/random para recuperar números aleatorios</span><span class="sxs-lookup"><span data-stu-id="10a17-254">**Apple OS X (10.7+)/iOS(2.0+)-** int SecRandomCopyBytes (SecRandomRef random, size_t count, uint8_t *bytes )</li><li>**Apple OS X (<10.7)-** Use /dev/random to retrieve random numbers</span></span></li><li><span data-ttu-id="10a17-255">**Java (incluido código Google Android Java) -** java.security.SecureRandom clase.</span><span class="sxs-lookup"><span data-stu-id="10a17-255">**Java(including Google Android Java code)-** java.security.SecureRandom class.</span></span> <span data-ttu-id="10a17-256">Tenga en cuenta que para Android 4.3 (Jelly Bean), los desarrolladores tienen que seguir la solución alternativa recomendada por Android y actualizar sus aplicaciones para inicializar explícitamente PRNG con la entropía de /dev/urandom o /dev/Random</span><span class="sxs-lookup"><span data-stu-id="10a17-256">Note that for Android 4.3 (Jelly Bean), developers must follow the Android recommended workaround and update their applications to explicitly initialize the PRNG with entropy from /dev/urandom or /dev/random</span></span></li></ul>|

## <span data-ttu-id="10a17-257"><a id="stream-ciphers"></a>No use cifrados de flujo simétricos</span><span class="sxs-lookup"><span data-stu-id="10a17-257"><a id="stream-ciphers"></a>Do not use symmetric stream ciphers</span></span>

| <span data-ttu-id="10a17-258">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-258">Title</span></span>                   | <span data-ttu-id="10a17-259">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-259">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-260">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-260">**Component**</span></span>               | <span data-ttu-id="10a17-261">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-261">Web Application</span></span> | 
| <span data-ttu-id="10a17-262">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-262">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-263">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-263">Build</span></span> |  
| <span data-ttu-id="10a17-264">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-264">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-265">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-265">Generic</span></span> |
| <span data-ttu-id="10a17-266">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-266">**Attributes**</span></span>              | <span data-ttu-id="10a17-267">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-267">N/A</span></span>  |
| <span data-ttu-id="10a17-268">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-268">**References**</span></span>              | <span data-ttu-id="10a17-269">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-269">N/A</span></span>  |
| <span data-ttu-id="10a17-270">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-270">**Steps**</span></span> | <span data-ttu-id="10a17-271">No pueden usarse cifrados de flujos simétricos, como RC4.</span><span class="sxs-lookup"><span data-stu-id="10a17-271">Symmetric stream ciphers, such as RC4, must not be used.</span></span> <span data-ttu-id="10a17-272">En lugar de cifrados de flujos simétricos, los productos deberían utilizar un cifrado por bloques, específicamente AES con una longitud de clave de 128 bits como mínimo.</span><span class="sxs-lookup"><span data-stu-id="10a17-272">Instead of symmetric stream ciphers, products should use a block cipher, specifically AES with a key length of at least 128 bits.</span></span> |

## <span data-ttu-id="10a17-273"><a id="mac-hash"></a>Use los algoritmos hash con clave MAC o HMAC aprobados</span><span class="sxs-lookup"><span data-stu-id="10a17-273"><a id="mac-hash"></a>Use approved MAC/HMAC/keyed hash algorithms</span></span>

| <span data-ttu-id="10a17-274">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-274">Title</span></span>                   | <span data-ttu-id="10a17-275">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-275">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-276">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-276">**Component**</span></span>               | <span data-ttu-id="10a17-277">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-277">Web Application</span></span> | 
| <span data-ttu-id="10a17-278">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-278">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-279">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-279">Build</span></span> |  
| <span data-ttu-id="10a17-280">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-280">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-281">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-281">Generic</span></span> |
| <span data-ttu-id="10a17-282">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-282">**Attributes**</span></span>              | <span data-ttu-id="10a17-283">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-283">N/A</span></span>  |
| <span data-ttu-id="10a17-284">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-284">**References**</span></span>              | <span data-ttu-id="10a17-285">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-285">N/A</span></span>  |
| <span data-ttu-id="10a17-286">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-286">**Steps**</span></span> | <p><span data-ttu-id="10a17-287">Los productos deben usar solo los algoritmos aprobados de código de autenticación de mensajes (MAC) o código de autenticación de mensajes basado en hash (HMAC).</span><span class="sxs-lookup"><span data-stu-id="10a17-287">Products must use only approved message authentication code (MAC) or hash-based message authentication code (HMAC) algorithms.</span></span></p><p><span data-ttu-id="10a17-288">Un código de autenticación de mensajes (MAC) es un fragmento de información que se adjunta a un mensaje, y que le permite a su destinatario comprobar la autenticidad del remitente y la integridad del mensaje mediante una clave secreta.</span><span class="sxs-lookup"><span data-stu-id="10a17-288">A message authentication code (MAC) is a piece of information attached to a message that allows its recipient to verify both the authenticity of the sender and the integrity of the message using a secret key.</span></span> <span data-ttu-id="10a17-289">El uso o bien de un MAC basado en hash ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) o [MAC basado en el cifrado de bloques](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf) está permitido siempre todos los hash subyacentes o algoritmos de cifrado simétrico estén también aprobados para su uso; actualmente esto incluye las funciones de HMAC-SHA2 (HMAC-SHA256, HMAC-SHA384 y HMAC-SHA512) y los MAC basados en cifrado por bloques CMAC/OMAC1 y OMAC2 (estos se basan en AES).</span><span class="sxs-lookup"><span data-stu-id="10a17-289">The use of either a hash-based MAC ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) or [block-cipher-based MAC](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf) is permissible as long as all underlying hash or symmetric encryption algorithms are also approved for use; currently this includes the HMAC-SHA2 functions (HMAC-SHA256, HMAC-SHA384 and HMAC-SHA512) and the CMAC/OMAC1 and OMAC2 block cipher-based MACs (these are based on AES).</span></span></p><p><span data-ttu-id="10a17-290">El uso de HMAC-SHA1 puede estar autorizado para la compatibilidad con plataformas, pero tendrá que solicitar una excepción para este procedimiento y someterse a una revisión de cifrado de su organización.</span><span class="sxs-lookup"><span data-stu-id="10a17-290">Use of HMAC-SHA1 may be permissible for platform compatibility, but you will be required to file an exception to this procedure and undergo your organization's Crypto review.</span></span> <span data-ttu-id="10a17-291">No se permite el truncamiento de los HMAC por debajo de los 128 bits.</span><span class="sxs-lookup"><span data-stu-id="10a17-291">Truncation of HMACs to less than 128 bits is not permitted.</span></span> <span data-ttu-id="10a17-292">El uso de métodos de cliente para producir valores hash de una clave y datos no está aprobado, y tiene que someterse a la revisión de la junta de criptografía de su organización antes de su uso.</span><span class="sxs-lookup"><span data-stu-id="10a17-292">Using customer methods to hash a key and data is not approved, and must undergo your organization's Crypto Board review prior to use.</span></span></p>|

## <span data-ttu-id="10a17-293"><a id="hash-functions"></a>Use solamente las funciones hash criptográficas aprobadas</span><span class="sxs-lookup"><span data-stu-id="10a17-293"><a id="hash-functions"></a>Use only approved cryptographic hash functions</span></span>

| <span data-ttu-id="10a17-294">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-294">Title</span></span>                   | <span data-ttu-id="10a17-295">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-295">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-296">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-296">**Component**</span></span>               | <span data-ttu-id="10a17-297">Aplicación web</span><span class="sxs-lookup"><span data-stu-id="10a17-297">Web Application</span></span> | 
| <span data-ttu-id="10a17-298">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-298">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-299">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-299">Build</span></span> |  
| <span data-ttu-id="10a17-300">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-300">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-301">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-301">Generic</span></span> |
| <span data-ttu-id="10a17-302">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-302">**Attributes**</span></span>              | <span data-ttu-id="10a17-303">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-303">N/A</span></span>  |
| <span data-ttu-id="10a17-304">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-304">**References**</span></span>              | <span data-ttu-id="10a17-305">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-305">N/A</span></span>  |
| <span data-ttu-id="10a17-306">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-306">**Steps**</span></span> | <p><span data-ttu-id="10a17-307">Los productos deben utilizar la familia SHA-2 de algoritmos hash (SHA256, SHA384 y SHA512).</span><span class="sxs-lookup"><span data-stu-id="10a17-307">Products must use the SHA-2 family of hash algorithms (SHA256, SHA384, and SHA512).</span></span> <span data-ttu-id="10a17-308">Si se necesita un hash más corto, por ejemplo, una longitud de la salida de 128 bits para ajustar una estructura de datos diseñada pensando en el hash MD5 más corto, los equipos del producto pueden truncar uno de los valores de hash de SHA2 (normalmente SHA256).</span><span class="sxs-lookup"><span data-stu-id="10a17-308">If a shorter hash is needed, such as a 128-bit output length in order to fit a data structure designed with the shorter MD5 hash in mind, product teams may truncate one of the SHA2 hashes (typically SHA256).</span></span> <span data-ttu-id="10a17-309">Tenga en cuenta que SHA384 es una versión truncada de SHA512.</span><span class="sxs-lookup"><span data-stu-id="10a17-309">Note that SHA384 is a truncated version of SHA512.</span></span> <span data-ttu-id="10a17-310">No se permite el truncamiento de los algoritmos hash criptográficos por debajo de los 128 bits por motivos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="10a17-310">Truncation of cryptographic hashes for security purposes to less than 128 bits is not permitted.</span></span> <span data-ttu-id="10a17-311">El nuevo código no debe usar los algoritmos hash MD2, MD4, MD5, SHA-0, SHA-1 o RIPEMD.</span><span class="sxs-lookup"><span data-stu-id="10a17-311">New code must not use the MD2, MD4, MD5, SHA-0, SHA-1, or RIPEMD hash algorithms.</span></span> <span data-ttu-id="10a17-312">Las colisiones de hash son factibles desde el punto de vista computacional para estos algoritmos, lo que de forma efectiva supone su ruptura.</span><span class="sxs-lookup"><span data-stu-id="10a17-312">Hash collisions are computationally feasible for these algorithms, which effectively breaks them.</span></span></p><p><span data-ttu-id="10a17-313">Algoritmos hash de .NET permitidos para criptografía personal administrada (en orden de preferencia):</span><span class="sxs-lookup"><span data-stu-id="10a17-313">Allowed .NET hash algorithms for managed crypto agility (in order of preference):</span></span></p><ul><li><span data-ttu-id="10a17-314">SHA512Cng (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-314">SHA512Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-315">SHA384Cng (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-315">SHA384Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-316">SHA256Cng (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-316">SHA256Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-317">SHA512Managed (no compatible FIPS) (use SHA512 como nombre del algoritmo en las llamadas a HashAlgorithm.Create o CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="10a17-317">SHA512Managed (non-FIPS-compliant) (use SHA512 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="10a17-318">SHA384Managed (no compatible FIPS) (use SHA384 como nombre del algoritmo en las llamadas a HashAlgorithm.Create o CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="10a17-318">SHA384Managed (non-FIPS-compliant) (use SHA384 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="10a17-319">SHA256Managed (no compatible FIPS) (use SHA256 como nombre del algoritmo en las llamadas a HashAlgorithm.Create o CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="10a17-319">SHA256Managed (non-FIPS-compliant) (use SHA256 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="10a17-320">SHA512CryptoServiceProvider (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-320">SHA512CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-321">SHA256CryptoServiceProvider (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-321">SHA256CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="10a17-322">SHA384CryptoServiceProvider (compatible con FIPS)</span><span class="sxs-lookup"><span data-stu-id="10a17-322">SHA384CryptoServiceProvider (FIPS compliant)</span></span></li></ul>| 

## <span data-ttu-id="10a17-323"><a id="strong-db"></a>Use algoritmos de cifrado de alta seguridad para cifrar los datos de la base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-323"><a id="strong-db"></a>Use strong encryption algorithms to encrypt data in the database</span></span>

| <span data-ttu-id="10a17-324">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-324">Title</span></span>                   | <span data-ttu-id="10a17-325">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-325">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-326">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-326">**Component**</span></span>               | <span data-ttu-id="10a17-327">Base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-327">Database</span></span> | 
| <span data-ttu-id="10a17-328">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-328">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-329">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-329">Build</span></span> |  
| <span data-ttu-id="10a17-330">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-330">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-331">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-331">Generic</span></span> |
| <span data-ttu-id="10a17-332">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-332">**Attributes**</span></span>              | <span data-ttu-id="10a17-333">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-333">N/A</span></span>  |
| <span data-ttu-id="10a17-334">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-334">**References**</span></span>              | <span data-ttu-id="10a17-335">[Elegir un algoritmo de cifrado](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span><span class="sxs-lookup"><span data-stu-id="10a17-335">[Choosing an encryption algorithm](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span></span> |
| <span data-ttu-id="10a17-336">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-336">**Steps**</span></span> | <span data-ttu-id="10a17-337">Los algoritmos de cifrado definen las transformaciones de datos que los usuarios no autorizados no pueden revertir fácilmente.</span><span class="sxs-lookup"><span data-stu-id="10a17-337">Encryption algorithms define data transformations that cannot be easily reversed by unauthorized users.</span></span> <span data-ttu-id="10a17-338">SQL Server permite a los administradores y programadores elegir entre varios algoritmos, incluidos DES, Triple DES, TRIPLE_DES_3KEY, RC2, RC4, RC4 de 128 bits, DESX, AES de 128 bits, AES de 192 bits y AES de 256 bits</span><span class="sxs-lookup"><span data-stu-id="10a17-338">SQL Server allows administrators and developers to choose from among several algorithms, including DES, Triple DES, TRIPLE_DES_3KEY, RC2, RC4, 128-bit RC4, DESX, 128-bit AES, 192-bit AES, and 256-bit AES</span></span> |

## <span data-ttu-id="10a17-339"><a id="ssis-signed"></a>Los paquetes SSIS deben cifrarse y firmarse digitalmente</span><span class="sxs-lookup"><span data-stu-id="10a17-339"><a id="ssis-signed"></a>SSIS packages should be encrypted and digitally signed</span></span>

| <span data-ttu-id="10a17-340">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-340">Title</span></span>                   | <span data-ttu-id="10a17-341">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-341">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-342">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-342">**Component**</span></span>               | <span data-ttu-id="10a17-343">Base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-343">Database</span></span> | 
| <span data-ttu-id="10a17-344">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-344">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-345">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-345">Build</span></span> |  
| <span data-ttu-id="10a17-346">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-346">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-347">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-347">Generic</span></span> |
| <span data-ttu-id="10a17-348">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-348">**Attributes**</span></span>              | <span data-ttu-id="10a17-349">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-349">N/A</span></span>  |
| <span data-ttu-id="10a17-350">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-350">**References**</span></span>              | <span data-ttu-id="10a17-351">[Identificar el origen de paquetes con firmas digitales](https://msdn.microsoft.com/library/ms141174.aspx), [Amenaza y mitigación de vulnerabilidades (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span><span class="sxs-lookup"><span data-stu-id="10a17-351">[Identify the Source of Packages with Digital Signatures](https://msdn.microsoft.com/library/ms141174.aspx), [Threat and Vulnerability Mitigation (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span></span> |
| <span data-ttu-id="10a17-352">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-352">**Steps**</span></span> | <span data-ttu-id="10a17-353">El origen de un paquete es la persona u organización que creó el paquete.</span><span class="sxs-lookup"><span data-stu-id="10a17-353">The source of a package is the individual or organization that created the package.</span></span> <span data-ttu-id="10a17-354">Ejecutar un paquete desde un origen desconocido o en el que no se confía puede ser arriesgado.</span><span class="sxs-lookup"><span data-stu-id="10a17-354">Running a package from an unknown or untrusted source might be risky.</span></span> <span data-ttu-id="10a17-355">Para evitar la modificación no autorizada de paquetes SSIS, deben usarse firmas digitales.</span><span class="sxs-lookup"><span data-stu-id="10a17-355">To prevent unauthorized tampering of SSIS packages, digital signatures should be used.</span></span> <span data-ttu-id="10a17-356">Además, para garantizar la confidencialidad de los paquetes durante el tránsito o almacenamiento, los paquetes SSIS tienen que cifrarse</span><span class="sxs-lookup"><span data-stu-id="10a17-356">Also, to ensure the confidentiality of the packages during storage/transit, SSIS packages have to be encrypted</span></span> |

## <span data-ttu-id="10a17-357"><a id="securables-db"></a>Agregue una firma digital a los elementos protegibles críticos de base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-357"><a id="securables-db"></a>Add digital signature to critical database securables</span></span>

| <span data-ttu-id="10a17-358">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-358">Title</span></span>                   | <span data-ttu-id="10a17-359">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-359">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-360">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-360">**Component**</span></span>               | <span data-ttu-id="10a17-361">Base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-361">Database</span></span> | 
| <span data-ttu-id="10a17-362">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-362">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-363">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-363">Build</span></span> |  
| <span data-ttu-id="10a17-364">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-364">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-365">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-365">Generic</span></span> |
| <span data-ttu-id="10a17-366">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-366">**Attributes**</span></span>              | <span data-ttu-id="10a17-367">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-367">N/A</span></span>  |
| <span data-ttu-id="10a17-368">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-368">**References**</span></span>              | <span data-ttu-id="10a17-369">[ADD SIGNATURE (Transact-SQL)](https://msdn.microsoft.com/library/ms181700)[Agregar firma (Transact-SQL)]</span><span class="sxs-lookup"><span data-stu-id="10a17-369">[ADD SIGNATURE (Transact-SQL)](https://msdn.microsoft.com/library/ms181700)</span></span> |
| <span data-ttu-id="10a17-370">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-370">**Steps**</span></span> | <span data-ttu-id="10a17-371">En casos donde la integridad de una base de datos crítica protegible tiene que comprobarse, deben usarse firmas digitales.</span><span class="sxs-lookup"><span data-stu-id="10a17-371">In cases where the integrity of a critical database securable has to be verified, digital signatures should be used.</span></span> <span data-ttu-id="10a17-372">Los elementos protegibles de una base de datos, como un procedimiento almacenado, una función, un ensamblado o un desencadenador pueden firmarse digitalmente.</span><span class="sxs-lookup"><span data-stu-id="10a17-372">Database securables such as a stored procedure, function, assembly, or trigger can be digitally signed.</span></span> <span data-ttu-id="10a17-373">A continuación se muestra un ejemplo en el que esto puede resultar útil: supongamos que un ISV (fabricante de software independiente) ha proporcionado soporte técnico para un software que ha entregado a uno de sus clientes.</span><span class="sxs-lookup"><span data-stu-id="10a17-373">Below is an example of when this can be useful: Let us say an ISV (Independent Software Vendor) has provided support to a software delivered to one of their customers.</span></span> <span data-ttu-id="10a17-374">Antes de proporcionar soporte técnico, el ISV debería asegurarse de que un elemento protegible en la base de datos del software no se alteró por error o a través de un intento malicioso.</span><span class="sxs-lookup"><span data-stu-id="10a17-374">Before providing support, the ISV would want to ensure that a database securable in the software was not tampered either by mistake or by a malicious attempt.</span></span> <span data-ttu-id="10a17-375">Si el elemento protegible está firmado digitalmente, el ISV puede comprobar la firma digital y validar su integridad.</span><span class="sxs-lookup"><span data-stu-id="10a17-375">If the securable is digitally signed, the ISV can verify its digital signature and validate its integrity.</span></span>| 

## <span data-ttu-id="10a17-376"><a id="ekm-keys"></a>Use la administración extensible de claves (EKM) de SQL Server para proteger las claves de cifrado</span><span class="sxs-lookup"><span data-stu-id="10a17-376"><a id="ekm-keys"></a>Use SQL server EKM to protect encryption keys</span></span>

| <span data-ttu-id="10a17-377">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-377">Title</span></span>                   | <span data-ttu-id="10a17-378">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-378">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-379">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-379">**Component**</span></span>               | <span data-ttu-id="10a17-380">Base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-380">Database</span></span> | 
| <span data-ttu-id="10a17-381">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-381">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-382">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-382">Build</span></span> |  
| <span data-ttu-id="10a17-383">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-383">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-384">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-384">Generic</span></span> |
| <span data-ttu-id="10a17-385">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-385">**Attributes**</span></span>              | <span data-ttu-id="10a17-386">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-386">N/A</span></span>  |
| <span data-ttu-id="10a17-387">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-387">**References**</span></span>              | <span data-ttu-id="10a17-388">[Administración extensible de claves (EKM) de SQL Server](https://msdn.microsoft.com/library/bb895340), [Administración extensible de claves con Azure Key Vault (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span><span class="sxs-lookup"><span data-stu-id="10a17-388">[SQL Server Extensible Key Management (EKM)](https://msdn.microsoft.com/library/bb895340), [Extensible Key Management Using Azure Key Vault (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span></span> |
| <span data-ttu-id="10a17-389">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-389">**Steps**</span></span> | <span data-ttu-id="10a17-390">La Administración extensible de claves de SQL Server permite que las claves de cifrado que protegen los archivos de base de datos se almacenen en un dispositivo externo, como una tarjeta inteligente, un dispositivo USB o un módulo EKM/HSM.</span><span class="sxs-lookup"><span data-stu-id="10a17-390">SQL Server Extensible Key Management enables the encryption keys that protect the database files to be stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span></span> <span data-ttu-id="10a17-391">Esto también permite la protección de datos de los administradores de bases de datos (exceptuando a los miembros del grupo sysadmin).</span><span class="sxs-lookup"><span data-stu-id="10a17-391">This also enables data protection from database administrators (except members of the sysadmin group).</span></span> <span data-ttu-id="10a17-392">Los datos se pueden cifrar mediante el uso de claves de cifrado a las que solo el usuario de base de datos tiene acceso en el módulo EKM/HSM externo.</span><span class="sxs-lookup"><span data-stu-id="10a17-392">Data can be encrypted by using encryption keys that only the database user has access to on the external EKM/HSM module.</span></span> |

## <span data-ttu-id="10a17-393"><a id="keys-engine"></a>Use la característica AlwaysEncrypted si las claves de cifrado no deben mostrarse al motor de base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-393"><a id="keys-engine"></a>Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span></span>

| <span data-ttu-id="10a17-394">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-394">Title</span></span>                   | <span data-ttu-id="10a17-395">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-396">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-396">**Component**</span></span>               | <span data-ttu-id="10a17-397">Base de datos</span><span class="sxs-lookup"><span data-stu-id="10a17-397">Database</span></span> | 
| <span data-ttu-id="10a17-398">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-398">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-399">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-399">Build</span></span> |  
| <span data-ttu-id="10a17-400">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-400">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-401">SQL Azure, OnPrem</span><span class="sxs-lookup"><span data-stu-id="10a17-401">SQL Azure, OnPrem</span></span> |
| <span data-ttu-id="10a17-402">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-402">**Attributes**</span></span>              | <span data-ttu-id="10a17-403">Versión de SQL: V12, MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="10a17-403">SQL Version - V12, MsSQL2016</span></span> |
| <span data-ttu-id="10a17-404">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-404">**References**</span></span>              | [<span data-ttu-id="10a17-405">Always Encrypted (motor de base de datos)</span><span class="sxs-lookup"><span data-stu-id="10a17-405">Always Encrypted (Database Engine)</span></span>](https://msdn.microsoft.com/library/mt163865) |
| <span data-ttu-id="10a17-406">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-406">**Steps**</span></span> | <span data-ttu-id="10a17-407">Always Encrypted es una característica creada para proteger la información confidencial, como números de tarjetas de crédito o números de identificación nacionales (por ejemplo, números de la seguridad social de EE. UU.), almacenados en bases de datos de Azure SQL Database o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="10a17-407">Always Encrypted is a feature designed to protect sensitive data, such as credit card numbers or national identification numbers (e.g. U.S. social security numbers), stored in Azure SQL Database or SQL Server databases.</span></span> <span data-ttu-id="10a17-408">Always Encrypted permite a los clientes cifrar información confidencial dentro de aplicaciones cliente y no revelar las claves de cifrado al motor de base de datos (SQL Database o SQL Server).</span><span class="sxs-lookup"><span data-stu-id="10a17-408">Always Encrypted allows clients to encrypt sensitive data inside client applications and never reveal the encryption keys to the Database Engine (SQL Database or SQL Server).</span></span> <span data-ttu-id="10a17-409">En consecuencia, Always Encrypted proporciona una separación entre quienes poseen los datos (y pueden verlos) y quienes administran los datos (pero no deben tener acceso a los mismos)</span><span class="sxs-lookup"><span data-stu-id="10a17-409">As a result, Always Encrypted provides a separation between those who own the data (and can view it) and those who manage the data (but should have no access)</span></span> |

## <span data-ttu-id="10a17-410"><a id="keys-iot"></a>Almacene las claves criptográficas de forma segura en dispositivos IoT</span><span class="sxs-lookup"><span data-stu-id="10a17-410"><a id="keys-iot"></a>Store Cryptographic Keys securely on IoT Device</span></span>

| <span data-ttu-id="10a17-411">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-411">Title</span></span>                   | <span data-ttu-id="10a17-412">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-412">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-413">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-413">**Component**</span></span>               | <span data-ttu-id="10a17-414">Dispositivo IoT</span><span class="sxs-lookup"><span data-stu-id="10a17-414">IoT Device</span></span> | 
| <span data-ttu-id="10a17-415">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-415">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-416">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-416">Build</span></span> |  
| <span data-ttu-id="10a17-417">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-417">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-418">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-418">Generic</span></span> |
| <span data-ttu-id="10a17-419">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-419">**Attributes**</span></span>              | <span data-ttu-id="10a17-420">Sistema operativo del dispositivo: Windows IoT Core, Conectividad de dispositivos: SDK de dispositivo IoT de Azure</span><span class="sxs-lookup"><span data-stu-id="10a17-420">Device OS - Windows IoT Core, Device Connectivity - Azure IoT device SDKs</span></span> |
| <span data-ttu-id="10a17-421">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-421">**References**</span></span>              | <span data-ttu-id="10a17-422">[TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/docs/tpm) (TPM en Windows IoT Core), [Configuración de TPM en Windows IoT Core](https://developer.microsoft.com/windows/iot/win10/setuptpm), [TPM con SDK de dispositivo IoT de Azure](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span><span class="sxs-lookup"><span data-stu-id="10a17-422">[TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/docs/tpm), [Set up TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/win10/setuptpm), [Azure IoT Device SDK TPM](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span></span> |
| <span data-ttu-id="10a17-423">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-423">**Steps**</span></span> | <span data-ttu-id="10a17-424">Claves privadas de certificado o simétricas en un almacenamiento protegido de hardware como chips TPM o de tarjeta inteligente.</span><span class="sxs-lookup"><span data-stu-id="10a17-424">Symmetric or Certificate Private keys securely in a hardware protected storage like TPM or Smart Card chips.</span></span> <span data-ttu-id="10a17-425">Windows 10 IoT Core es compatible con el usuario de un TPM y se pueden usar varios TPM compatibles: https://developer.microsoft.com/windows/iot/win10/tpm.</span><span class="sxs-lookup"><span data-stu-id="10a17-425">Windows 10 IoT Core supports the user of a TPM and there are several compatible TPMs that can be used: https://developer.microsoft.com/windows/iot/win10/tpm.</span></span> <span data-ttu-id="10a17-426">Se recomienda usar un TPM discreto o de firmware.</span><span class="sxs-lookup"><span data-stu-id="10a17-426">It is recommended to use a Firmware or Discrete TPM.</span></span> <span data-ttu-id="10a17-427">Un TPM de software solo se debe usar con fines de desarrollo y prueba.</span><span class="sxs-lookup"><span data-stu-id="10a17-427">A Software TPM should only be used for development and testing purposes.</span></span> <span data-ttu-id="10a17-428">Una vez que un TPM está disponible y se aprovisiona con las claves, se debe escribir el código que genera el token sin codificar de forma rígida ninguna información confidencial en él.</span><span class="sxs-lookup"><span data-stu-id="10a17-428">Once a TPM is available and the keys are provisioned in it, the code that generates the token should be written without hard coding any sensitive information in it.</span></span> | 

### <a name="example"></a><span data-ttu-id="10a17-429">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a17-429">Example</span></span>
```
TpmDevice myDevice = new TpmDevice(0);
// Use logical device 0 on the TPM 
string hubUri = myDevice.GetHostName(); 
string deviceId = myDevice.GetDeviceId(); 
string sasToken = myDevice.GetSASToken(); 

var deviceClient = DeviceClient.Create( hubUri, AuthenticationMethodFactory. CreateAuthenticationWithToken(deviceId, sasToken), TransportType.Amqp); 
```
<span data-ttu-id="10a17-430">Como se puede ver, la clave principal de dispositivo no está presente en el código.</span><span class="sxs-lookup"><span data-stu-id="10a17-430">As can be seen, the device primary key is not present in the code.</span></span> <span data-ttu-id="10a17-431">En su lugar, se almacena en el TPM en la ranura 0.</span><span class="sxs-lookup"><span data-stu-id="10a17-431">Instead, it is stored in the TPM at slot 0.</span></span> <span data-ttu-id="10a17-432">El dispositivo TPM genera un token SAS de corta duración que se utiliza para conectar con IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="10a17-432">TPM device generates a short-lived SAS token that is then used to connect to the IoT Hub.</span></span> 

## <span data-ttu-id="10a17-433"><a id="random-hub"></a>Genere una clave simétrica aleatoria de longitud suficiente para la autenticación en IoT Hub</span><span class="sxs-lookup"><span data-stu-id="10a17-433"><a id="random-hub"></a>Generate a random symmetric key of sufficient length for authentication to IoT Hub</span></span>

| <span data-ttu-id="10a17-434">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-434">Title</span></span>                   | <span data-ttu-id="10a17-435">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-435">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-436">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-436">**Component**</span></span>               | <span data-ttu-id="10a17-437">Puerta de enlace de la nube de IoT</span><span class="sxs-lookup"><span data-stu-id="10a17-437">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="10a17-438">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-438">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-439">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-439">Build</span></span> |  
| <span data-ttu-id="10a17-440">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-440">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-441">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-441">Generic</span></span> |
| <span data-ttu-id="10a17-442">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-442">**Attributes**</span></span>              | <span data-ttu-id="10a17-443">Elección de puerta de enlace: Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="10a17-443">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="10a17-444">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-444">**References**</span></span>              | <span data-ttu-id="10a17-445">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-445">N/A</span></span>  |
| <span data-ttu-id="10a17-446">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-446">**Steps**</span></span> | <span data-ttu-id="10a17-447">IoT Hub contiene un registro de identidad del dispositivo y durante el aprovisionamiento de un dispositivo genera automáticamente una clave simétrica aleatoria.</span><span class="sxs-lookup"><span data-stu-id="10a17-447">IoT Hub contains a device Identity Registry and while provisioning a device, automatically generates a random Symmetric key.</span></span> <span data-ttu-id="10a17-448">Se recomienda utilizar esta característica de registro de identidad de Azure IoT Hub para generar la clave usada para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="10a17-448">It is recommended to use this feature of the Azure IoT Hub Identity Registry to generate the key used for authentication.</span></span> <span data-ttu-id="10a17-449">IoT Hub también permite que se especifique una clave al crear el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="10a17-449">IoT Hub also allows for a key to be specified while creating the device.</span></span> <span data-ttu-id="10a17-450">Si se genera una clave fuera de IoT Hub durante el aprovisionamiento de dispositivos, se recomienda crear una clave simétrica aleatoria de al menos de 256 bits.</span><span class="sxs-lookup"><span data-stu-id="10a17-450">If a key is generated outside of IoT Hub during device provisioning, it is recommended to create a random symmetric key or at least 256 bits.</span></span> |

## <span data-ttu-id="10a17-451"><a id="pin-remote"></a>Asegúrese de que hay una directiva de administración de dispositivos que requiere el uso de un PIN y permite el borrado remoto</span><span class="sxs-lookup"><span data-stu-id="10a17-451"><a id="pin-remote"></a>Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>

| <span data-ttu-id="10a17-452">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-452">Title</span></span>                   | <span data-ttu-id="10a17-453">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-453">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-454">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-454">**Component**</span></span>               | <span data-ttu-id="10a17-455">Cliente móvil de Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="10a17-455">Dynamics CRM Mobile Client</span></span> | 
| <span data-ttu-id="10a17-456">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-456">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-457">Implementación</span><span class="sxs-lookup"><span data-stu-id="10a17-457">Deployment</span></span> |  
| <span data-ttu-id="10a17-458">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-458">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-459">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-459">Generic</span></span> |
| <span data-ttu-id="10a17-460">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-460">**Attributes**</span></span>              | <span data-ttu-id="10a17-461">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-461">N/A</span></span>  |
| <span data-ttu-id="10a17-462">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-462">**References**</span></span>              | <span data-ttu-id="10a17-463">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-463">N/A</span></span>  |
| <span data-ttu-id="10a17-464">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-464">**Steps**</span></span> | <span data-ttu-id="10a17-465">Asegúrese de que hay una directiva de administración de dispositivos que requiere el uso de un PIN y permite el borrado remoto</span><span class="sxs-lookup"><span data-stu-id="10a17-465">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span> |

## <span data-ttu-id="10a17-466"><a id="bitlocker"></a>Asegúrese de que hay una directiva de administración de dispositivos que requiere un bloqueo automático con PIN o contraseña y cifra todos los datos (por ejemplo, Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="10a17-466"><a id="bitlocker"></a>Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>

| <span data-ttu-id="10a17-467">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-467">Title</span></span>                   | <span data-ttu-id="10a17-468">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-468">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-469">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-469">**Component**</span></span>               | <span data-ttu-id="10a17-470">Cliente de Outlook de Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="10a17-470">Dynamics CRM Outlook Client</span></span> | 
| <span data-ttu-id="10a17-471">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-471">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-472">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-472">Build</span></span> |  
| <span data-ttu-id="10a17-473">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-473">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-474">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-474">Generic</span></span> |
| <span data-ttu-id="10a17-475">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-475">**Attributes**</span></span>              | <span data-ttu-id="10a17-476">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-476">N/A</span></span>  |
| <span data-ttu-id="10a17-477">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-477">**References**</span></span>              | <span data-ttu-id="10a17-478">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-478">N/A</span></span>  |
| <span data-ttu-id="10a17-479">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-479">**Steps**</span></span> | <span data-ttu-id="10a17-480">Asegúrese de que hay una directiva de administración de dispositivos que requiere un bloqueo automático con PIN o contraseña y cifra todos los datos (por ejemplo, Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="10a17-480">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span> |

## <span data-ttu-id="10a17-481"><a id="rolled-server"></a>Asegúrese de que las claves de firma se sustituyen cuando se usa Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-481"><a id="rolled-server"></a>Ensure that signing keys are rolled over when using Identity Server</span></span>

| <span data-ttu-id="10a17-482">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-482">Title</span></span>                   | <span data-ttu-id="10a17-483">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-483">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-484">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-484">**Component**</span></span>               | <span data-ttu-id="10a17-485">Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-485">Identity Server</span></span> | 
| <span data-ttu-id="10a17-486">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-486">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-487">Implementación</span><span class="sxs-lookup"><span data-stu-id="10a17-487">Deployment</span></span> |  
| <span data-ttu-id="10a17-488">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-488">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-489">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-489">Generic</span></span> |
| <span data-ttu-id="10a17-490">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-490">**Attributes**</span></span>              | <span data-ttu-id="10a17-491">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-491">N/A</span></span>  |
| <span data-ttu-id="10a17-492">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-492">**References**</span></span>              | [<span data-ttu-id="10a17-493">Identity Server: claves, firmas y cifrado</span><span class="sxs-lookup"><span data-stu-id="10a17-493">Identity Server - Keys, Signatures and Cryptography </span></span>](https://identityserver.github.io/Documentation/docsv2/configuration/crypto.html) |
| <span data-ttu-id="10a17-494">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-494">**Steps**</span></span> | <span data-ttu-id="10a17-495">Asegúrese de las claves de firma se sustituyen cuando se usa Identity Server.</span><span class="sxs-lookup"><span data-stu-id="10a17-495">Ensure that signing keys are rolled over when using Identity Server.</span></span> <span data-ttu-id="10a17-496">El vínculo en la sección de referencias explica cómo debe planearse esta acción sin causar interrupciones en las aplicaciones basadas en Identity Server.</span><span class="sxs-lookup"><span data-stu-id="10a17-496">The link in the references section explains how this should be planned without causing outages to applications relying on Identity Server.</span></span> |

## <span data-ttu-id="10a17-497"><a id="client-server"></a>Asegúrese de que se usan un identificador de cliente y un secreto de cliente de alta seguridad criptográfica en Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-497"><a id="client-server"></a>Ensure that cryptographically strong client ID, client secret are used in Identity Server</span></span>

| <span data-ttu-id="10a17-498">Título</span><span class="sxs-lookup"><span data-stu-id="10a17-498">Title</span></span>                   | <span data-ttu-id="10a17-499">Detalles</span><span class="sxs-lookup"><span data-stu-id="10a17-499">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="10a17-500">**Componente**</span><span class="sxs-lookup"><span data-stu-id="10a17-500">**Component**</span></span>               | <span data-ttu-id="10a17-501">Identity Server</span><span class="sxs-lookup"><span data-stu-id="10a17-501">Identity Server</span></span> | 
| <span data-ttu-id="10a17-502">**Fase de SDL**</span><span class="sxs-lookup"><span data-stu-id="10a17-502">**SDL Phase**</span></span>               | <span data-ttu-id="10a17-503">Compilación</span><span class="sxs-lookup"><span data-stu-id="10a17-503">Build</span></span> |  
| <span data-ttu-id="10a17-504">**Tecnologías aplicables**</span><span class="sxs-lookup"><span data-stu-id="10a17-504">**Applicable Technologies**</span></span> | <span data-ttu-id="10a17-505">Genérico</span><span class="sxs-lookup"><span data-stu-id="10a17-505">Generic</span></span> |
| <span data-ttu-id="10a17-506">**Atributos**</span><span class="sxs-lookup"><span data-stu-id="10a17-506">**Attributes**</span></span>              | <span data-ttu-id="10a17-507">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-507">N/A</span></span>  |
| <span data-ttu-id="10a17-508">**Referencias**</span><span class="sxs-lookup"><span data-stu-id="10a17-508">**References**</span></span>              | <span data-ttu-id="10a17-509">N/D</span><span class="sxs-lookup"><span data-stu-id="10a17-509">N/A</span></span>  |
| <span data-ttu-id="10a17-510">**Pasos**</span><span class="sxs-lookup"><span data-stu-id="10a17-510">**Steps**</span></span> | <p><span data-ttu-id="10a17-511">Asegúrese de que se usan un identificador de cliente y un secreto de cliente de alta seguridad criptográfica en Identity Server.</span><span class="sxs-lookup"><span data-stu-id="10a17-511">Ensure that cryptographically strong client ID, client secret are used in Identity Server.</span></span> <span data-ttu-id="10a17-512">Las siguientes directrices se deben usar al generar un identificador y un secreto de cliente:</span><span class="sxs-lookup"><span data-stu-id="10a17-512">The following guidelines should be used while generating a client ID and secret:</span></span></p><ul><li><span data-ttu-id="10a17-513">Generar un GUID aleatorio como el identificador de cliente</span><span class="sxs-lookup"><span data-stu-id="10a17-513">Generate a random GUID as the client ID</span></span></li><li><span data-ttu-id="10a17-514">Generar una clave de 256 bits criptográficamente aleatoria como secreto</span><span class="sxs-lookup"><span data-stu-id="10a17-514">Generate a cryptographically random 256-bit key as the secret</span></span></li></ul>|
---
title: "Guía de solución de problemas de Azure Stream Analytics | Microsoft Docs"
description: "Solución de problemas de los trabajos de Stream Analytics"
keywords: "guía de solución de problemas"
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 8ecf279047f06691cef1bc0db06888974405a9f0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshooting-guide-for-azure-stream-analytics"></a><span data-ttu-id="eb364-104">Guía de solución de problemas de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-104">Troubleshooting guide for Azure Stream Analytics</span></span>

<span data-ttu-id="eb364-105">A primera vista, la solución de problemas de Azure Stream Analytics puede parecer una tarea compleja.</span><span class="sxs-lookup"><span data-stu-id="eb364-105">Azure Stream Analytics troubleshooting can appear to be a complex effort at first glance.</span></span> <span data-ttu-id="eb364-106">Después de trabajar con muchos usuarios, hemos creado esta guía para ayudar a acelerar el proceso y eliminar las ideas preconcebidas sobre sus entradas, salidas, consultas y funciones.</span><span class="sxs-lookup"><span data-stu-id="eb364-106">After working with many users, we have created this guide to help streamline the process and remove the guesswork about your inputs, outputs, queries, and functions.</span></span>

## <a name="troubleshoot-your-stream-analytics-job"></a><span data-ttu-id="eb364-107">Solución de problemas de los trabajos de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-107">Troubleshoot your Stream Analytics job</span></span>

<span data-ttu-id="eb364-108">Para obtener mejores resultados en la solución de problemas de los trabajos de Stream Analytics, siga estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="eb364-108">For best results in troubleshooting your Stream Analytics job, use the following guidelines:</span></span>

1.  <span data-ttu-id="eb364-109">Pruebe la conectividad:</span><span class="sxs-lookup"><span data-stu-id="eb364-109">Test your connectivity:</span></span>
    - <span data-ttu-id="eb364-110">Compruebe la conectividad a entradas y salidas con el botón **Probar conexión** para cada entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="eb364-110">Verify connectivity to inputs and outputs by using the **Test Connection** button for each input and output.</span></span>

2.  <span data-ttu-id="eb364-111">Examine los datos de entrada:</span><span class="sxs-lookup"><span data-stu-id="eb364-111">Examine your input data:</span></span>
    - <span data-ttu-id="eb364-112">Para comprobar si los datos de entrada pasan al Centro de eventos, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) (Explorador de Service Bus) para conectarse al centro de eventos de Azure (si se usa la entrada de centro de eventos).</span><span class="sxs-lookup"><span data-stu-id="eb364-112">To verify that input data is flowing into Event Hub, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) to connect to Azure Event Hub (if Event Hub input is used).</span></span>  
    - <span data-ttu-id="eb364-113">Use el botón [**Datos de ejemplo**](stream-analytics-sample-data-input.md) para cada entrada y descargue los datos de ejemplo de entrada.</span><span class="sxs-lookup"><span data-stu-id="eb364-113">Use the [**Sample Data**](stream-analytics-sample-data-input.md) button for each input, and download the input sample data.</span></span>
    - <span data-ttu-id="eb364-114">Inspeccione los datos de ejemplo para entender la forma de los datos: el esquema y los [tipos de datos](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span><span class="sxs-lookup"><span data-stu-id="eb364-114">Inspect the sample data to understand the shape of the data: the schema and the [data types](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span></span>

3.  <span data-ttu-id="eb364-115">Pruebe la consulta:</span><span class="sxs-lookup"><span data-stu-id="eb364-115">Test your query:</span></span>
    - <span data-ttu-id="eb364-116">En la pestaña **Consulta**, use el botón **Probar** para probar la consulta, y use los datos de ejemplo descargados para [probar la consulta](stream-analytics-test-query.md).</span><span class="sxs-lookup"><span data-stu-id="eb364-116">On the **Query** tab, use the **Test** button to test the query, and use the downloaded sample data to [test the query](stream-analytics-test-query.md).</span></span> <span data-ttu-id="eb364-117">Examine los errores e intente corregirlos.</span><span class="sxs-lookup"><span data-stu-id="eb364-117">Examine any errors and attempt to correct them.</span></span>
    - <span data-ttu-id="eb364-118">Si usa [**Marca de tiempo por**](https://msdn.microsoft.com/library/azure/mt573293.aspx), asegúrese de que los eventos tengan marcas de tiempo mayores que la [hora de inicio del trabajo](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="eb364-118">If you use [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), verify that the events have timestamps greater than the [job start time](stream-analytics-out-of-order-and-late-events.md).</span></span>

4.  <span data-ttu-id="eb364-119">Depure la consulta:</span><span class="sxs-lookup"><span data-stu-id="eb364-119">Debug your query:</span></span>
    - <span data-ttu-id="eb364-120">Vuelva a compilar la consulta progresivamente a partir de una instrucción select simple para agregados más complejos mediante pasos.</span><span class="sxs-lookup"><span data-stu-id="eb364-120">Rebuild the query progressively from simple select statement to more complex aggregates by using steps.</span></span> <span data-ttu-id="eb364-121">Para crear la lógica de consulta paso a paso, use cláusulas [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx).</span><span class="sxs-lookup"><span data-stu-id="eb364-121">To build up the query logic step by step, use [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) clauses.</span></span>
    - <span data-ttu-id="eb364-122">Use [SELECT INTO](stream-analytics-select-into.md) para depurar los pasos de consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-122">Use [SELECT INTO](stream-analytics-select-into.md) to debug query steps.</span></span>

5.  <span data-ttu-id="eb364-123">Elimine los errores comunes, como:</span><span class="sxs-lookup"><span data-stu-id="eb364-123">Eliminate common pitfalls, such as:</span></span>
    - <span data-ttu-id="eb364-124">Una cláusula [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) en la consulta filtrada por todos los eventos, que impide que se genere alguna salida.</span><span class="sxs-lookup"><span data-stu-id="eb364-124">A [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) clause in the query filtered out all events, preventing any output from being generated.</span></span>
    - <span data-ttu-id="eb364-125">Cuando use funciones de ventana, espere la duración entera de la ventana para ver una salida de la consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-125">When you use window functions, wait for the entire window duration to see an output from the query.</span></span>
    - <span data-ttu-id="eb364-126">La marca de tiempo de los eventos es anterior a la hora de inicio del trabajo y, por tanto, los eventos se descartan.</span><span class="sxs-lookup"><span data-stu-id="eb364-126">The timestamp for events precedes the job start time and, therefore, events are being dropped.</span></span>

6.  <span data-ttu-id="eb364-127">Use la ordenación de eventos:</span><span class="sxs-lookup"><span data-stu-id="eb364-127">Use event ordering:</span></span>
    - <span data-ttu-id="eb364-128">Si todos los pasos anteriores han funcionado bien, vaya a la hoja **Configuración** y seleccione [**Ordenación de eventos**](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="eb364-128">If all the previous steps worked fine, go to the **Settings** blade and select [**Event Ordering**](stream-analytics-out-of-order-and-late-events.md).</span></span> <span data-ttu-id="eb364-129">Compruebe que esta directiva está configurada de acuerdo con su escenario.</span><span class="sxs-lookup"><span data-stu-id="eb364-129">Verify that this policy is configured for what makes sense in your scenario.</span></span> <span data-ttu-id="eb364-130">La directiva *no* se aplica cuando usa el botón **Probar** para probar la consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-130">The policy is *not* applied when you use the **Test** button to test the query.</span></span> <span data-ttu-id="eb364-131">El resultado es una diferencia entre probar en el explorador frente a ejecutar el trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="eb364-131">This result is one difference between testing in-browser versus running the job in production.</span></span>

7.  <span data-ttu-id="eb364-132">Depure mediante métricas:</span><span class="sxs-lookup"><span data-stu-id="eb364-132">Debug by using metrics:</span></span>
    - <span data-ttu-id="eb364-133">Si no obtiene ninguna salida tras la duración prevista (basada en la consulta), intente lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="eb364-133">If you obtain no output after the expected duration (based on the query), try the following:</span></span>
        - <span data-ttu-id="eb364-134">Examine las [**métricas de supervisión**](stream-analytics-monitoring.md) en la pestaña **Monitor**. Dado que los valores se agregan, las métricas se retrasan unos minutos.</span><span class="sxs-lookup"><span data-stu-id="eb364-134">Look at [**Monitoring Metrics**](stream-analytics-monitoring.md) on the **Monitor** tab. Because the values are aggregated, the metrics are delayed by a few minutes.</span></span>
            - <span data-ttu-id="eb364-135">Si Eventos de entrada > 0, el trabajo puede leer los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="eb364-135">If Input Events > 0, the job is able to read input data.</span></span> <span data-ttu-id="eb364-136">Si Eventos de entrada no es > 0, entonces:</span><span class="sxs-lookup"><span data-stu-id="eb364-136">If Input Events is not > 0, then:</span></span>
                - <span data-ttu-id="eb364-137">Para ver si el origen de datos contiene datos válidos, compruébelo mediante el [Explorador de Service Bus](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span><span class="sxs-lookup"><span data-stu-id="eb364-137">To see whether the data source has valid data, check it by using [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span></span> <span data-ttu-id="eb364-138">Esta comprobación se aplica si el trabajo usa un centro de eventos como entrada.</span><span class="sxs-lookup"><span data-stu-id="eb364-138">This check applies if the job is using Event Hub as input.</span></span>
                - <span data-ttu-id="eb364-139">Compruebe si el formato de serialización de datos y la codificación de datos son los esperados.</span><span class="sxs-lookup"><span data-stu-id="eb364-139">Check to see whether the data serialization format and data encoding are as expected.</span></span>
                - <span data-ttu-id="eb364-140">Si el trabajo usa un centro de eventos, compruebe si el cuerpo del mensaje es *Null*.</span><span class="sxs-lookup"><span data-stu-id="eb364-140">If the job is using an Event Hub, check to see whether the body of the message is *Null*.</span></span>
            - <span data-ttu-id="eb364-141">Si Errores de conversión de datos > 0 y subiendo, puede cumplirse lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="eb364-141">If Data Conversion Errors > 0 and climbing, the following might be true:</span></span>
                - <span data-ttu-id="eb364-142">El trabajo podría no ser capaz de deserializar los eventos.</span><span class="sxs-lookup"><span data-stu-id="eb364-142">The job might not be able to de-serialize the events.</span></span>
                - <span data-ttu-id="eb364-143">El esquema de eventos podría no coincidir con el esquema definido o esperado de los eventos en la consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-143">The event schema might not match the defined or expected schema of the events in the query.</span></span>
                - <span data-ttu-id="eb364-144">Los tipos de datos de algunos de los campos del evento podrían no coincidir con las expectativas.</span><span class="sxs-lookup"><span data-stu-id="eb364-144">The datatypes of some of the fields in the event might not match expectations.</span></span>
            - <span data-ttu-id="eb364-145">Si Errores en tiempo de ejecución > 0, significa que el trabajo puede recibir los datos, pero genera errores al procesar la consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-145">If Runtime Errors > 0, it means that the job can receive the data but is generating errors while processing the query.</span></span>
                - <span data-ttu-id="eb364-146">Para encontrar los errores, vaya a los [registros de auditoría](../azure-resource-manager/resource-group-audit.md) y filtre por el estado *Error*.</span><span class="sxs-lookup"><span data-stu-id="eb364-146">To find the errors, go to the [Audit Logs](../azure-resource-manager/resource-group-audit.md) and filter on *Failed* status.</span></span>
            - <span data-ttu-id="eb364-147">Si Eventos de entrada > 0 y Eventos de salida = 0, significa que se cumple uno de los siguientes casos:</span><span class="sxs-lookup"><span data-stu-id="eb364-147">If InputEvents > 0 and OutputEvents = 0, it means that one of the following is true:</span></span>
                - <span data-ttu-id="eb364-148">El procesamiento de consultas no ha generado ningún evento de salida.</span><span class="sxs-lookup"><span data-stu-id="eb364-148">Query processing resulted in zero output events.</span></span>
                - <span data-ttu-id="eb364-149">Los eventos o sus campos pueden tener un formato incorrecto, por lo que no se genera ninguna salida después de procesar la consulta.</span><span class="sxs-lookup"><span data-stu-id="eb364-149">Events or its fields might be malformed, resulting in zero output after query processing.</span></span>
                - <span data-ttu-id="eb364-150">El trabajo no pudo insertar datos en el [receptor de salida](stream-analytics-select-into.md) por motivos de autenticación o conectividad.</span><span class="sxs-lookup"><span data-stu-id="eb364-150">The job was unable to push data to the [output sink](stream-analytics-select-into.md) for connectivity or authentication reasons.</span></span>
        - <span data-ttu-id="eb364-151">En todos los casos de error mencionados anteriormente, los mensajes de registro de operaciones explican detalles adicionales (como lo que está sucediendo), salvo en casos en que la lógica de la consulta filtra todos los eventos.</span><span class="sxs-lookup"><span data-stu-id="eb364-151">In all the previously mentioned error cases, operations log messages explain additional details (including what is happening), except in cases where the query logic filtered out all events.</span></span> <span data-ttu-id="eb364-152">Si el procesamiento de varios eventos genera errores, Stream Analytics registra los tres primeros mensajes de error del mismo tipo al cabo de 10 minutos en los registros de operaciones.</span><span class="sxs-lookup"><span data-stu-id="eb364-152">If the processing of multiple events generates errors, Stream Analytics logs the first three error messages of the same type within 10 minutes to Operations logs.</span></span> <span data-ttu-id="eb364-153">Luego, suprime los errores idénticos adicionales con un mensaje que dice "Los errores se producen demasiado rápido y se están suprimiendo".</span><span class="sxs-lookup"><span data-stu-id="eb364-153">It then suppresses additional identical errors with a message that reads “Errors are happening too rapidly, these are being suppressed.”</span></span>

8. <span data-ttu-id="eb364-154">Depure mediante auditorías y registros de diagnóstico:</span><span class="sxs-lookup"><span data-stu-id="eb364-154">Debug by using audit and diagnostic logs:</span></span>
    - <span data-ttu-id="eb364-155">Use [Registros de auditoría](../azure-resource-manager/resource-group-audit.md) y filtre para identificar y depurar errores.</span><span class="sxs-lookup"><span data-stu-id="eb364-155">Use [Audit Logs](../azure-resource-manager/resource-group-audit.md), and filter to identify and debug errors.</span></span>
    - <span data-ttu-id="eb364-156">Use [registros de diagnóstico de trabajo](stream-analytics-job-diagnostic-logs.md) para identificar y depurar errores.</span><span class="sxs-lookup"><span data-stu-id="eb364-156">Use [job diagnostic logs](stream-analytics-job-diagnostic-logs.md) to identify and debug errors.</span></span>

9. <span data-ttu-id="eb364-157">Examine las salidas:</span><span class="sxs-lookup"><span data-stu-id="eb364-157">Examine the outputs:</span></span>
    - <span data-ttu-id="eb364-158">Cuando el estado del trabajo es *En ejecución* y, en función de la duración que esté estipulada en la consulta, puede ver la salida en el origen de datos del receptor.</span><span class="sxs-lookup"><span data-stu-id="eb364-158">When the job status is *Running*, depending on the duration that's stipulated in the query, you can see the output in the sink data source.</span></span>
    - <span data-ttu-id="eb364-159">Si no puede ver salidas que van a un tipo de salida específica, rediríjalas a un tipo de salida que sea menos compleja, como un blob de Azure.</span><span class="sxs-lookup"><span data-stu-id="eb364-159">If you cannot see outputs that are going to a specific output type, redirect them to an output type that is less complex, such as an Azure Blob.</span></span> <span data-ttu-id="eb364-160">Mediante el Explorador de Storage, compruebe si se puede ver la salida.</span><span class="sxs-lookup"><span data-stu-id="eb364-160">By using Storage Explorer, check to see whether the output can be seen.</span></span> <span data-ttu-id="eb364-161">Además, compruebe si existen limitaciones en la salida que impidan que se reciban los datos.</span><span class="sxs-lookup"><span data-stu-id="eb364-161">Additionally, verify whether throttling limits at the output are preventing data from being received.</span></span>

10. <span data-ttu-id="eb364-162">Use el análisis de flujo de datos con las métricas de diagrama de trabajo:</span><span class="sxs-lookup"><span data-stu-id="eb364-162">Use data-flow analysis with job diagram metrics:</span></span>
    - <span data-ttu-id="eb364-163">Para analizar el flujo de datos e identificar los problemas, use el [diagrama de trabajo con métricas](stream-analytics-job-diagram-with-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="eb364-163">To analyze data flow and identify issues, use the [job diagram with metrics](stream-analytics-job-diagram-with-metrics.md).</span></span>

11. <span data-ttu-id="eb364-164">Abra un caso de soporte técnico:</span><span class="sxs-lookup"><span data-stu-id="eb364-164">Open a support case:</span></span>
    - <span data-ttu-id="eb364-165">Por último, si todo lo demás no funciona, abra un caso de soporte técnico de Microsoft con el id. de suscripción que contiene el trabajo.</span><span class="sxs-lookup"><span data-stu-id="eb364-165">Finally, if all else fails, open a Microsoft support case by using the SubscriptionID that contains your job.</span></span>

## <a name="get-help"></a><span data-ttu-id="eb364-166">Obtener ayuda</span><span class="sxs-lookup"><span data-stu-id="eb364-166">Get help</span></span>

<span data-ttu-id="eb364-167">Para obtener ayuda adicional, pruebe nuestro [foro de Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="eb364-167">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="eb364-168">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="eb364-168">Next steps</span></span>

* [<span data-ttu-id="eb364-169">Introducción a Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-169">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="eb364-170">Introducción al uso de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-170">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="eb364-171">Escalación de trabajos de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-171">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="eb364-172">Referencia del lenguaje de consulta de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-172">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="eb364-173">Referencia de API de REST de administración de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="eb364-173">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="60bc0-101">Introducción al uso de Análisis de transmisiones de Azure: detección de fraudes en tiempo real</span><span class="sxs-lookup"><span data-stu-id="60bc0-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="60bc0-102">Este tutorial proporciona una ilustración to-end de cómo toouse análisis de transmisiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="60bc0-103">Aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="60bc0-103">You learn how to:</span></span> 

* <span data-ttu-id="60bc0-104">Incorporar eventos de streaming a una instancia de Azure Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="60bc0-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="60bc0-105">En este tutorial, usará una aplicación que le ofrecemos que simula un flujo de registros de metadatos de teléfono móvil.</span><span class="sxs-lookup"><span data-stu-id="60bc0-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="60bc0-106">Escribir datos de tootransform análisis de transmisiones similar a SQL las consultas, agregar información o buscar patrones.</span><span class="sxs-lookup"><span data-stu-id="60bc0-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="60bc0-107">Verá cómo toouse una tooexamine consulta hello secuencia entrante y busque las llamadas que podrían ser fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="60bc0-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="60bc0-108">Enviar Hola el receptor de salida de tooan de resultados (almacenamiento) que pueda analizar información adicional.</span><span class="sxs-lookup"><span data-stu-id="60bc0-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="60bc0-109">En este caso, enviaremos el almacenamiento de blobs de hello llamada sospechosa datos tooAzure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="60bc0-110">En este tutorial, usamos el ejemplo hello de detección de fraudes en tiempo real en función de los datos de llamada de teléfono.</span><span class="sxs-lookup"><span data-stu-id="60bc0-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="60bc0-111">Pero técnica Hola que se muestran también es ideal para otros tipos de detección de fraudes, por ejemplo, tarjeta de crédito fraude o robo de identidad.</span><span class="sxs-lookup"><span data-stu-id="60bc0-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="60bc0-112">Escenario: telecomunicaciones y detección de fraudes de SIM en tiempo real</span><span class="sxs-lookup"><span data-stu-id="60bc0-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="60bc0-113">Una empresa de telecomunicaciones tiene un gran volumen de datos en llamadas entrantes.</span><span class="sxs-lookup"><span data-stu-id="60bc0-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="60bc0-114">compañía de Hello desea toodetect fraudulenta llama en tiempo real para que puedan notificar a los clientes o apagar el servicio durante un número específico.</span><span class="sxs-lookup"><span data-stu-id="60bc0-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="60bc0-115">Un tipo de fraude SIM implica varias llamadas de hello misma identidad alrededor de hello mismo tiempo pero en ubicaciones geográficamente diferentes.</span><span class="sxs-lookup"><span data-stu-id="60bc0-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="60bc0-116">toodetect este tipo de fraude, Hola registros entrantes de teléfono de la compañía necesidades tooexamine y buscar patrones específicos, en este caso, para las llamadas realizadas alrededor de hello mismo tiempo en distintos países.</span><span class="sxs-lookup"><span data-stu-id="60bc0-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="60bc0-117">Las entradas de teléfono que entran en esta categoría se escriben toostorage para su análisis posterior.</span><span class="sxs-lookup"><span data-stu-id="60bc0-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="60bc0-118">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="60bc0-118">Prerequisites</span></span>

<span data-ttu-id="60bc0-119">En este tutorial, simulará datos de llamadas telefónicas mediante una aplicación cliente que genera metadatos de llamada telefónica de muestra.</span><span class="sxs-lookup"><span data-stu-id="60bc0-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="60bc0-120">Algunos de los registros de Hola que Hola aplicación genera aspecto llamadas fraudulentos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="60bc0-121">Antes de empezar, asegúrese de que tiene Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="60bc0-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="60bc0-122">Una cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-122">An Azure account.</span></span>
* <span data-ttu-id="60bc0-123">aplicación del generador de evento de llamada de Hello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-123">hello call-event generator app.</span></span> <span data-ttu-id="60bc0-124">Puede obtener mediante la descarga de hello [TelcoGenerator.zip archivo](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) de hello Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="60bc0-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="60bc0-125">Descomprima este paquete un una carpeta en el equipo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="60bc0-126">Si desea código fuente de toosee hello y aplicación de hello de ejecución en un depurador, puede obtener el código fuente de aplicación Hola de [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="60bc0-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="60bc0-127">Windows pueden bloquear el archivo .zip de hello descargado.</span><span class="sxs-lookup"><span data-stu-id="60bc0-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="60bc0-128">Si no se descomprímalo, haga clic en el archivo de Hola y seleccione **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="60bc0-129">Si ve Hola mensaje "este archivo procede de otro equipo y podría ser bloqueado toohelp proteger este equipo", seleccione hello **Unblock** opción y, a continuación, haga clic en **aplicar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="60bc0-130">Si desea que los resultados de hello tooexamine de trabajo de análisis de transmisión por secuencias de hello, también necesita una herramienta de visualización del contenido de Hola de un contenedor de almacenamiento de blobs de Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="60bc0-131">Si utiliza Visual Studio, puede usar [Azure Tools para Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) o [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="60bc0-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="60bc0-132">También puede instalar herramientas independientes, tales como [Explorador de Azure Storage](http://storageexplorer.com/) y [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="60bc0-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="60bc0-133">Crear un evento Azure tooingest de los concentradores de eventos</span><span class="sxs-lookup"><span data-stu-id="60bc0-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="60bc0-134">tooanalyze un flujo de datos, se *Introducción* en Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="60bc0-135">Una forma habitual de datos de tooingest es toouse [centros de eventos de Azure](../event-hubs/event-hubs-what-is-event-hubs.md), que le permite introducir millones de eventos por segundo y, a continuación, procesar y almacenar información sobre eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="60bc0-136">Para este tutorial, crea un centro de eventos y, a continuación, tiene Hola evento de llamada generador aplicación envío llamada datos toothat concentrador de eventos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="60bc0-137">Para obtener más información acerca de los centros de eventos, vea hello [documentación de Service Bus de Azure](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="60bc0-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="60bc0-138">Para obtener una versión más detallada de este procedimiento, consulte [crear un espacio de nombres de los centros de eventos y un concentrador de eventos mediante Hola portal de Azure](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="60bc0-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="60bc0-139">Creación de un espacio de nombres y un centro de eventos</span><span class="sxs-lookup"><span data-stu-id="60bc0-139">Create a namespace and event hub</span></span>
<span data-ttu-id="60bc0-140">En este procedimiento, primero cree un espacio de nombres del centro de eventos y, a continuación, agregue un namepsace de toothat de concentrador de eventos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="60bc0-141">Los espacios de nombres del concentrador de eventos se utilizan instancias de bus de eventos relacionados con el grupo de toologically.</span><span class="sxs-lookup"><span data-stu-id="60bc0-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="60bc0-142">Inicie sesión en el portal de Azure de Hola y haga clic en **New** > **Internet de las cosas** > **concentrador de eventos**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="60bc0-143">Hola **crear espacio de nombres** hoja, escriba un nombre de espacio de nombres como `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="60bc0-144">Puede utilizar cualquier nombre de espacio de nombres de hello, pero Hola nombre debe ser válido para una dirección URL y debe ser único en Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="60bc0-145">Seleccione una suscripción y cree o elija un grupo de recursos. Luego haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Creación de un espacio de nombres del centro de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="60bc0-147">Cuando el espacio de nombres de hello ha terminado de implementar, buscar espacio de nombres del concentrador de eventos de hello en la lista de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="60bc0-148">Haga clic en nuevo espacio de nombres Hola y en la hoja de espacio de nombres de hello, haga clic en  **+ &nbsp;concentrador de eventos**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="60bc0-149">botón de agregar el concentrador de eventos de Hola para crear un nuevo centro de eventos</span><span class="sxs-lookup"><span data-stu-id="60bc0-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="60bc0-150">Nuevo centro de eventos de nombre hello `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="60bc0-151">Puede usar otro nombre.</span><span class="sxs-lookup"><span data-stu-id="60bc0-151">You can use a different name.</span></span> <span data-ttu-id="60bc0-152">Si lo hace, tome nota del mismo, porque necesita Hola nombre más adelante.</span><span class="sxs-lookup"><span data-stu-id="60bc0-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="60bc0-153">No es necesario tooset cualquier otra opción de concentrador de eventos de hello ahora mismo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Hoja para la creación de un centro de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="60bc0-155">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="60bc0-156">Conceda el concentrador de eventos de acceso toohello y obtener una cadena de conexión</span><span class="sxs-lookup"><span data-stu-id="60bc0-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="60bc0-157">Antes de que un proceso puede enviar el concentrador de eventos de datos tooan, centro de eventos de hello debe tener una directiva que permita el acceso adecuado.</span><span class="sxs-lookup"><span data-stu-id="60bc0-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="60bc0-158">Directiva de acceso de Hello genera una cadena de conexión que incluya la información de autorización.</span><span class="sxs-lookup"><span data-stu-id="60bc0-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="60bc0-159">En la hoja de espacio de nombres de evento de hello, haga clic en **centros de eventos** y, a continuación, haga clic en nombre de Hola de su nuevo concentrador de eventos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="60bc0-160">En la hoja de concentrador de eventos de hello, haga clic en **directivas de acceso compartido** y, a continuación, haga clic en  **+ &nbsp;agregar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="60bc0-161">Asegúrese de que está trabajando con el concentrador de eventos de hello, no Hola eventos concentrador espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="60bc0-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="60bc0-162">Agregue una directiva denominada `sa-policy-manage-demo` y, en **Notificación**, seleccione **Administrar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Hoja para la creación de una directiva de acceso al centro de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="60bc0-164">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-164">Click **Create**.</span></span>

5.  <span data-ttu-id="60bc0-165">Después de que se ha implementado la directiva de hello, haga clic en la lista de Hola de directivas de acceso compartido.</span><span class="sxs-lookup"><span data-stu-id="60bc0-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="60bc0-166">Cuadro de búsqueda Hola etiquetado **clave principal de la cadena de conexión** y haga clic en la cadena de conexión de hello copia botón siguiente toohello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Copiar la clave de cadena de conexión principal de Hola Hola directiva de acceso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="60bc0-168">Pegue la cadena de conexión de hello en un editor de texto.</span><span class="sxs-lookup"><span data-stu-id="60bc0-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="60bc0-169">Necesita esta cadena de conexión para la sección siguiente de hello, después de realizar algunos tooit pequeñas modificaciones.</span><span class="sxs-lookup"><span data-stu-id="60bc0-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="60bc0-170">cadena de conexión de Hello tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="60bc0-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="60bc0-171">Tenga en cuenta que la cadena de conexión de hello contiene varios pares de clave y valor, separados por punto y coma: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, y `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="60bc0-172">Configurar e iniciar la aplicación de generador de eventos de hello</span><span class="sxs-lookup"><span data-stu-id="60bc0-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="60bc0-173">Antes de iniciar la aplicación de hello TelcoGenerator, configúrelo para que enviará el concentrador de eventos de llamada registros toohello que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="60bc0-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="60bc0-174">Configurar hello TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="60bc0-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="60bc0-175">En el editor de Hola donde copió la cadena de conexión de hello, tome nota de hello `EntityPath` valor y, a continuación, quite hello `EntityPath` par (no olvide tooremove Hola por punto y coma que lo precede).</span><span class="sxs-lookup"><span data-stu-id="60bc0-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="60bc0-176">En carpeta de Hola donde descomprimió el archivo de TelcoGenerator.zip hello, abra el archivo de telcodatagen.exe.config de hello en un editor.</span><span class="sxs-lookup"><span data-stu-id="60bc0-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="60bc0-177">(Hay más de un archivo .config, por tanto, asegúrese de que abra derecha hello).</span><span class="sxs-lookup"><span data-stu-id="60bc0-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="60bc0-178">Hola `<appSettings>` elemento, hacer esto:</span><span class="sxs-lookup"><span data-stu-id="60bc0-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="60bc0-179">Establecer valor de Hola de hello `EventHubName` nombre centro de eventos clave toohello (es decir, el valor de toohello de ruta de acceso de hello entidad).</span><span class="sxs-lookup"><span data-stu-id="60bc0-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="60bc0-180">Establecer valor de Hola de hello `Microsoft.ServiceBus.ConnectionString` clave de cadena de conexión toohello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="60bc0-181">Hola `<appSettings>` sección tendrá un aspecto como el siguiente ejemplo de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="60bc0-182">(Para mayor claridad, se ajustan las líneas de Hola y quitan algunos caracteres de token de autorización de Hola.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Archivo de configuración de aplicación de TelcoGenerator que muestra la cadena de conexión y nombre de la base de datos central del evento Hola](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="60bc0-184">Guarde el archivo hello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="60bc0-185">Iniciar aplicación hello</span><span class="sxs-lookup"><span data-stu-id="60bc0-185">Start hello app</span></span>
1.  <span data-ttu-id="60bc0-186">Abra una ventana de comandos y cambie la carpeta toohello donde se descomprime hello TelcoGenerator aplicación.</span><span class="sxs-lookup"><span data-stu-id="60bc0-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="60bc0-187">Escriba el siguiente comando de hello:</span><span class="sxs-lookup"><span data-stu-id="60bc0-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="60bc0-188">Hola parámetros son:</span><span class="sxs-lookup"><span data-stu-id="60bc0-188">hello parameters are:</span></span> 

    * <span data-ttu-id="60bc0-189">Número de registros CDR por hora.</span><span class="sxs-lookup"><span data-stu-id="60bc0-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="60bc0-190">Probabilidad de fraude de tarjeta SIM: La frecuencia, como un porcentaje de todas las llamadas, esa aplicación hello debe simular una llamada fraudulenta.</span><span class="sxs-lookup"><span data-stu-id="60bc0-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="60bc0-191">valor de Hello.2 significa que aproximadamente el 20% de los registros de llamada de hello tendrá un aspecto fraudulento.</span><span class="sxs-lookup"><span data-stu-id="60bc0-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="60bc0-192">Duración en horas.</span><span class="sxs-lookup"><span data-stu-id="60bc0-192">Duration in hours.</span></span> <span data-ttu-id="60bc0-193">número de Hola de horas que Hola aplicación debe ejecutar.</span><span class="sxs-lookup"><span data-stu-id="60bc0-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="60bc0-194">También puede detener aplicación hello cualquier momento presionando Ctrl + C en línea de comandos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="60bc0-195">Después de unos segundos, aplicación hello comienza a mostrar los registros de llamada de teléfono en la pantalla de bienvenida tal y como lo envía toohello concentrador de eventos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="60bc0-196">Algunos de los campos de clave de Hola que va a usar en esta aplicación de detección de fraudes en tiempo real son siguientes de hello:</span><span class="sxs-lookup"><span data-stu-id="60bc0-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="60bc0-197">**Registro**</span><span class="sxs-lookup"><span data-stu-id="60bc0-197">**Record**</span></span>|<span data-ttu-id="60bc0-198">**Definición**</span><span class="sxs-lookup"><span data-stu-id="60bc0-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="60bc0-199">hora de inicio de la marca de tiempo de Hola de llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="60bc0-200">modificador de teléfono de Hello usa llamadas de hello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="60bc0-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="60bc0-201">En este ejemplo, conmutadores de hello son cadenas que representan el país de Hola de origen (Estados Unidos, China, del Reino Unido, Alemania o Australia).</span><span class="sxs-lookup"><span data-stu-id="60bc0-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="60bc0-202">número de teléfono de Hello del autor de llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="60bc0-203">Hola identidad del suscriptor móvil internacional (IMSI).</span><span class="sxs-lookup"><span data-stu-id="60bc0-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="60bc0-204">Se trata de un identificador único de hello del autor de llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="60bc0-205">número de teléfono de Hello del destinatario de la llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="60bc0-206">Identidad del suscriptor móvil internacional (IMSI).</span><span class="sxs-lookup"><span data-stu-id="60bc0-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="60bc0-207">Se trata de un identificador único de hello del destinatario de la llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="60bc0-208">Crear un toomanage de trabajo de análisis de transmisiones transmisión de datos</span><span class="sxs-lookup"><span data-stu-id="60bc0-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="60bc0-209">Ahora que tiene un flujo de eventos de llamada, puede configurar un trabajo de Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="60bc0-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="60bc0-210">trabajo de Hello leerá los datos desde el concentrador de eventos de Hola que configuró.</span><span class="sxs-lookup"><span data-stu-id="60bc0-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="60bc0-211">Crear trabajo de Hola</span><span class="sxs-lookup"><span data-stu-id="60bc0-211">Create hello job</span></span> 

1. <span data-ttu-id="60bc0-212">Hola portal de Azure, haga clic en **New** > **Internet de las cosas** > **trabajo de análisis de transmisiones**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="60bc0-213">Nombre de trabajo de hello `sa_frauddetection_job_demo`, especifique una suscripción, el grupo de recursos y la ubicación.</span><span class="sxs-lookup"><span data-stu-id="60bc0-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="60bc0-214">Es una buena idea tooplace Hola hello y trabajo Centro de eventos en hello misma región para optimizar el rendimiento y lo que no hay tootransfer datos entre regiones.</span><span class="sxs-lookup"><span data-stu-id="60bc0-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Creación de un trabajo de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="60bc0-216">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-216">Click **Create**.</span></span>

    <span data-ttu-id="60bc0-217">se crea el trabajo de Hola y portal de hello muestra detalles del trabajo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="60bc0-218">Nada está ejecutando todavía, sin embargo, tiene tooconfigure Hola trabajo antes de que se puede iniciar.</span><span class="sxs-lookup"><span data-stu-id="60bc0-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="60bc0-219">Configuración de la entrada del trabajo</span><span class="sxs-lookup"><span data-stu-id="60bc0-219">Configure job input</span></span>

1. <span data-ttu-id="60bc0-220">En el panel de Hola o hello **todos los recursos** hoja, busque y seleccione hello `sa_frauddetection_job_demo` trabajo de análisis de transmisiones.</span><span class="sxs-lookup"><span data-stu-id="60bc0-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="60bc0-221">Hola **trabajo topología** sección de hello hoja de trabajo de análisis de transmisiones, haga clic en hello **entrada** cuadro.</span><span class="sxs-lookup"><span data-stu-id="60bc0-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Cuadro de entrada en la topología en la hoja de trabajo de análisis de transmisión por secuencias de Hola](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="60bc0-223">Haga clic en  **+ &nbsp;agregar** y, a continuación, rellene hoja Hola con estos valores:</span><span class="sxs-lookup"><span data-stu-id="60bc0-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="60bc0-224">**Alias de entrada**: usar el nombre de hello `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="60bc0-225">Si usa otro nombre, anótelo porque lo necesitará más adelante.</span><span class="sxs-lookup"><span data-stu-id="60bc0-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="60bc0-226">**Tipo de origen**: seleccione **Flujo de datos**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="60bc0-227">(**Hacen referencia a datos** hace referencia a datos de búsqueda de toostatic, que no usan en este tutorial.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="60bc0-228">**Origen**: seleccione **Centro de eventos**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="60bc0-229">**Opción de importación**: seleccione **Usar centro de eventos de la suscripción actual**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="60bc0-230">**Espacio de nombres de bus de servicio**: seleccione el espacio de nombres de la base de datos central de eventos de Hola que creó anteriormente (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="60bc0-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="60bc0-231">**Centro de eventos**: Centro de eventos de hello Select que creó anteriormente (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="60bc0-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="60bc0-232">**Nombre de directiva de centro de eventos**: seleccione la directiva de acceso de Hola que creó anteriormente (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="60bc0-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Creación de una entrada del trabajo de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="60bc0-234">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="60bc0-235">Crear consultas de datos en tiempo real de tootransform</span><span class="sxs-lookup"><span data-stu-id="60bc0-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="60bc0-236">En este punto, tiene un trabajo de análisis de transmisiones configurar tooread un flujo de datos entrante.</span><span class="sxs-lookup"><span data-stu-id="60bc0-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="60bc0-237">Hola siguiente paso es toocreate una transformación que analiza los datos de hello en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="60bc0-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="60bc0-238">Para ello, cree una consulta.</span><span class="sxs-lookup"><span data-stu-id="60bc0-238">You do this by creating a query.</span></span> <span data-ttu-id="60bc0-239">Stream Analytics admite un modelo de consulta declarativo sencillo que describe las transformaciones para el procesamiento en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="60bc0-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="60bc0-240">las consultas de Hello utilizan un lenguaje parecido a SQL que tiene algunos análisis toostream específico de extensiones.</span><span class="sxs-lookup"><span data-stu-id="60bc0-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="60bc0-241">Una consulta muy simple simplemente podría leer todos los datos entrantes de saludo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="60bc0-242">Sin embargo, a menudo se crean consultas que buscan para datos específicos o para las relaciones en datos Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="60bc0-243">En esta sección del tutorial de hello, creará y probará varias consultas toolearn varias maneras en que puede transformar una secuencia de entrada para el análisis.</span><span class="sxs-lookup"><span data-stu-id="60bc0-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="60bc0-244">las consultas de Hola que se crean aquí solo mostrará pantalla de bienvenida datos transformados toohello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="60bc0-245">En una sección posterior, configurará un receptor de salida y una consulta que escribe Hola datos transformados toothat receptor.</span><span class="sxs-lookup"><span data-stu-id="60bc0-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="60bc0-246">toolearn más información acerca del lenguaje de hello, vea hello [referencia de lenguaje de consulta de análisis de transmisiones de Azure](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="60bc0-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="60bc0-247">Obtención de datos de muestra para probar las consultas</span><span class="sxs-lookup"><span data-stu-id="60bc0-247">Get sample data for testing queries</span></span>

<span data-ttu-id="60bc0-248">Hola TelcoGenerator aplicación está enviando concentrador de eventos de llamada registros toohello, y el trabajo de análisis de transmisiones está tooread configurado de concentrador de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="60bc0-249">Puede usar una consulta tootest Hola trabajo toomake seguro de que está leyendo correctamente.</span><span class="sxs-lookup"><span data-stu-id="60bc0-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="60bc0-250">demasiado probar una consulta en hello consola de Azure, necesita los datos de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="60bc0-251">En este tutorial, podrá extraer datos de ejemplo de secuencia de Hola que procede a centro de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="60bc0-252">Asegúrese de que hello TelcoGenerator aplicación se esté ejecutando y generar registros de llamada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="60bc0-253">En el portal de hello, devolver la hoja de trabajo de análisis de transmisión por secuencias de toohello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="60bc0-254">(Si lo ha cerrado hoja hello, busque `sa_frauddetection_job_demo` en hello **todos los recursos** hoja.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="60bc0-255">Haga clic en hello **consulta** cuadro.</span><span class="sxs-lookup"><span data-stu-id="60bc0-255">Click hello **Query** box.</span></span> <span data-ttu-id="60bc0-256">Azure muestra entradas de Hola y salidas que se configuran para el trabajo de Hola y le permite crear una consulta que permite transforman flujo de entrada de hello mientras envía toohello salida.</span><span class="sxs-lookup"><span data-stu-id="60bc0-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="60bc0-257">Hola **consulta** hoja, haga clic en hello puntos siguiente toohello `CallStream` de entrada y, a continuación, seleccione **datos a partir de datos de ejemplo**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Menú Opciones toouse datos de ejemplo de Hola entrada de trabajo de análisis de transmisión por secuencias, con "Datos de ejemplo de entrada" seleccionados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="60bc0-259">Se abrirá una hoja que le permite especificar la cantidad tooget de datos de ejemplo, definido en términos de cuánto tiempo tooread hello secuencia de entrada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="60bc0-260">Establecer **minutos** too3 y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Opciones de muestreo de flujo de entrada de hello, con "3 minutos" seleccionados.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="60bc0-262">Azure muestrea los datos del flujo de entrada de hello correspondientes a tres minutos y le avisa cuando los datos de ejemplo de Hola están listos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="60bc0-263">(Tardará unos minutos).</span><span class="sxs-lookup"><span data-stu-id="60bc0-263">(This takes a short while.)</span></span> 

<span data-ttu-id="60bc0-264">datos de ejemplo de Hola se almacenan temporalmente y están disponibles mientras tiene la ventana de consulta de hello abierto.</span><span class="sxs-lookup"><span data-stu-id="60bc0-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="60bc0-265">Si cierra la ventana de consulta de hello, se descartan los datos de ejemplo de Hola y tendrá toocreate un nuevo conjunto de datos de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="60bc0-266">Como alternativa, puede obtener un archivo .json que contiene los datos de ejemplo [desde GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)y, a continuación, cargar ese toouse de archivo .json como datos de ejemplo de Hola `CallStream` entrada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="60bc0-267">Prueba con una consulta de paso a través</span><span class="sxs-lookup"><span data-stu-id="60bc0-267">Test using a pass-through query</span></span>

<span data-ttu-id="60bc0-268">Si desea tooarchive todos los eventos, puede usar una consulta de paso a través de tooread todos los campos de hello en carga Hola de evento de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="60bc0-269">En la ventana de consulta de hello, escriba esta consulta:</span><span class="sxs-lookup"><span data-stu-id="60bc0-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="60bc0-270">Al igual que con SQL, las palabras clave no distinguen entre mayúsculas y minúsculas y un espacio en blanco no es significativo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="60bc0-271">En esta consulta, `CallStream` es Hola alias que especificó cuando creó la entrada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="60bc0-272">Si ha usado otro alias, use ese nombre en su lugar.</span><span class="sxs-lookup"><span data-stu-id="60bc0-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="60bc0-273">Haga clic en **Probar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-273">Click **Test**.</span></span>

    <span data-ttu-id="60bc0-274">trabajo de análisis de transmisiones de Hola ejecuta la consulta de hello con datos de ejemplo de Hola y muestra el resultado de hello en parte inferior de Hola de ventana hello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="60bc0-275">Esto indica que concentrador de eventos de Hola y de trabajo de análisis de transmisión por secuencias de hello están configuradas correctamente.</span><span class="sxs-lookup"><span data-stu-id="60bc0-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="60bc0-276">(Como se indicó, más adelante podrá crear un receptor de salida que Hola consulta puede escribir datos en.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Salida del trabajo de Stream Analytics que muestra 73 registros generados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="60bc0-278">número exacto de Hola de registros que aparecen depende de cuántos registros se han capturado en el ejemplo de 3 minutos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="60bc0-279">Reducir el número de Hola de campos utilizando una proyección de columna</span><span class="sxs-lookup"><span data-stu-id="60bc0-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="60bc0-280">En muchos casos, el análisis no necesita todas las columnas de Hola Hola flujo de entrada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="60bc0-281">Puede usar un tooproject consulta un conjunto más pequeño de devuelve campos que en la consulta de paso a través de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="60bc0-282">Cambie la consulta de hello en hello código editor toohello que sigue:</span><span class="sxs-lookup"><span data-stu-id="60bc0-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="60bc0-283">Haga clic de nuevo en **Probar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-283">Click **Test** again.</span></span> 

    ![Salida del trabajo de Stream Analytics correspondiente a la proyección que muestra 25 registros generados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="60bc0-285">Recuento de llamadas entrantes por región: ventana de saltos de tamaño constante con agregación</span><span class="sxs-lookup"><span data-stu-id="60bc0-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="60bc0-286">Suponga que desea toocount Hola número de llamadas entrantes por región.</span><span class="sxs-lookup"><span data-stu-id="60bc0-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="60bc0-287">En la transmisión de datos, cuando desee que las funciones de agregado de tooperform como el recuento, necesita toosegment Hola flujo en unidades temporales (puesto que propio flujo de datos hello es eficazmente sin fin).</span><span class="sxs-lookup"><span data-stu-id="60bc0-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="60bc0-288">Para ello, use una [función de ventana](stream-analytics-window-functions.md) de Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="60bc0-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="60bc0-289">A continuación, puede trabajar con datos de saludo dentro de esa ventana como una unidad.</span><span class="sxs-lookup"><span data-stu-id="60bc0-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="60bc0-290">Para esta transformación, se busca una secuencia de ventanas temporales que no se superpongan; cada ventana tendrá un conjunto discreto de datos que se pueden agrupar y agregar.</span><span class="sxs-lookup"><span data-stu-id="60bc0-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="60bc0-291">Este tipo de ventana es tooas que se hace referencia una *ventana de saltos de tamaño constante* .</span><span class="sxs-lookup"><span data-stu-id="60bc0-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="60bc0-292">En la ventana de saltos de tamaño constante de hello, puede obtener un recuento de llamadas entrantes de hello agrupados por `SwitchNum`, que representa el país de Hola donde se originó la llamada de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="60bc0-293">Cambie la consulta de hello en hello código editor toohello que sigue:</span><span class="sxs-lookup"><span data-stu-id="60bc0-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="60bc0-294">Esta consulta utiliza hello `Timestamp By` palabra clave en hello `FROM` toospecify cláusula qué campo de marca de tiempo en hello ventana de saltos de tamaño constante de hello de toodefine de toouse de flujo de entrada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="60bc0-295">En este caso, ventana hello divide los datos de hello en segmentos por hello `CallRecTime` campo en cada registro.</span><span class="sxs-lookup"><span data-stu-id="60bc0-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="60bc0-296">(Si no se especifica ningún campo, la operación de ventana hello utiliza tiempo Hola que cada evento llega al centro de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="60bc0-297">Vea "Tiempo de llegada frente a tiempo de aplicación" en [Referencia de lenguaje de consulta de Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="60bc0-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="60bc0-298">proyección de Hello incluye `System.Timestamp`, que devuelve una marca de tiempo para el fin de Hola de cada ventana.</span><span class="sxs-lookup"><span data-stu-id="60bc0-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="60bc0-299">toospecify que desea toouse una ventana de saltos de tamaño constante, usas hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) función Hola `GROUP BY `cláusula.</span><span class="sxs-lookup"><span data-stu-id="60bc0-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="60bc0-300">En función de hello, especifique una unidad de tiempo (en cualquier parte de un día de tooa microsegundos) y un tamaño de ventana (el número de unidades).</span><span class="sxs-lookup"><span data-stu-id="60bc0-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="60bc0-301">En este ejemplo, ventana de saltos de tamaño constante de hello consta de intervalos de 5 segundos, por lo que se obtendrá un recuento por país para llamadas correspondientes a cada 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="60bc0-302">Haga clic de nuevo en **Probar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-302">Click **Test** again.</span></span> <span data-ttu-id="60bc0-303">En los resultados de hello, tenga en cuenta que las marcas de tiempo de hello en **WindowEnd** en incrementos de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Salida del trabajo de Stream Analytics correspondiente a la agregación que muestra 13 registros generados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="60bc0-305">Detección de fraudes de SIM mediante una autocombinación</span><span class="sxs-lookup"><span data-stu-id="60bc0-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="60bc0-306">En este ejemplo, podemos consideramos uso fraudulento toobe llamadas que se originan en hello mismo usuario, pero en diferentes ubicaciones en 5 segundos entre sí.</span><span class="sxs-lookup"><span data-stu-id="60bc0-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="60bc0-307">Por ejemplo, hello mismo usuario no puede legítimamente realizar una llamada de hello Estados Unidos y Australia en hello mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="60bc0-308">toocheck para estos casos, puede utilizar una autocombinación de transmisión por secuencias datos toojoin hello secuencia tooitself en función de Hola de hello `CallRecTime` valor.</span><span class="sxs-lookup"><span data-stu-id="60bc0-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="60bc0-309">A continuación, puede buscar de llamada registra donde hello `CallingIMSI` valor (Hola número original) es Hola mismo pero Hola `SwitchNum` valor (país de origen) no es Hola igual.</span><span class="sxs-lookup"><span data-stu-id="60bc0-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="60bc0-310">Cuando se usa una combinación con la transmisión de datos, debe proporcionar combinación Hola algunas limitaciones en la diferencia entre Hola hacer coincidir las filas se pueden separar en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="60bc0-311">(Tal y como se indicó anteriormente, Hola transmisión de datos es eficaz sin fin). se especifican los límites de tiempo de Hello para la relación de Hola de hello `ON` cláusula de combinación de hello, con hello `DATEDIFF` función.</span><span class="sxs-lookup"><span data-stu-id="60bc0-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="60bc0-312">En este caso, la combinación de Hola se basa en un intervalo de 5 segundos de datos de la llamada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="60bc0-313">Cambie la consulta de hello en hello código editor toohello que sigue:</span><span class="sxs-lookup"><span data-stu-id="60bc0-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="60bc0-314">Esta consulta es similar a cualquier combinación SQL excepto hello `DATEDIFF` función de combinación de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="60bc0-315">Se trata de una versión de `DATEDIFF` tooStreaming específico de análisis, y debe aparecer en hello `ON...BETWEEN` cláusula.</span><span class="sxs-lookup"><span data-stu-id="60bc0-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="60bc0-316">parámetros de Hello son alias de Hola de dos orígenes de Hola para una combinación de hello y una unidad de tiempo (en segundos en este ejemplo).</span><span class="sxs-lookup"><span data-stu-id="60bc0-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="60bc0-317">(Esto es diferente de Hola SQL estándar `DATEDIFF` función.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="60bc0-318">Hola `WHERE` cláusula incluye condición Hola que marca llamada fraudulentas hello: conmutadores origen hello no son Hola igual.</span><span class="sxs-lookup"><span data-stu-id="60bc0-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="60bc0-319">Haga clic de nuevo en **Probar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-319">Click **Test** again.</span></span> 

    ![Salida del trabajo de Stream Analytics correspondiente a la autocombinación que muestra seis registros generados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="60bc0-321">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-321">Click **Save**.</span></span> <span data-ttu-id="60bc0-322">Esto ahorra la consulta de autocombinación de hello como parte del trabajo de análisis de transmisión por secuencias de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="60bc0-323">(No guardar los datos de ejemplo de Hola.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-323">(It doesn't save hello sample data.)</span></span>

    ![Almacenamiento del trabajo de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="60bc0-325">Crear un receptor de salida toostore transformar datos</span><span class="sxs-lookup"><span data-stu-id="60bc0-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="60bc0-326">Se ha definido un flujo de eventos, una entrada tooingest de concentrador de eventos y un tooperform consulta una transformación en secuencia Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="60bc0-327">Hola último paso es toodefine un receptor de salida para el trabajo de hello, es decir, un Hola de toowrite lugar transforma flujo a.</span><span class="sxs-lookup"><span data-stu-id="60bc0-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="60bc0-328">Puede usar muchos recursos como receptores de salida: una base de datos de SQL Server, Table Storage, Data Lake Store, Power BI e incluso otro centro de eventos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="60bc0-329">Para este tutorial, escribirá hello secuencia tooAzure almacenamiento de blobs, que es una opción típica para recopilar información de eventos para su análisis posterior, ya que se adapta a los datos no estructurados.</span><span class="sxs-lookup"><span data-stu-id="60bc0-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="60bc0-330">Si ya tiene una cuenta de Blob Storage, puede utilizarla.</span><span class="sxs-lookup"><span data-stu-id="60bc0-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="60bc0-331">Para este tutorial, le mostraremos cómo toocreate un nueva cuenta de almacenamiento, solo para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="60bc0-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="60bc0-332">Creación de una cuenta de Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="60bc0-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="60bc0-333">Hola portal de Azure, devolver la hoja de trabajo de análisis de transmisión por secuencias de toohello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="60bc0-334">(Si lo ha cerrado hoja hello, busque `sa_frauddetection_job_demo` en hello **todos los recursos** hoja.)</span><span class="sxs-lookup"><span data-stu-id="60bc0-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="60bc0-335">Hola **trabajo topología** sección, haga clic en hello **salida** cuadro.</span><span class="sxs-lookup"><span data-stu-id="60bc0-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="60bc0-336">Hola **salidas** hoja, haga clic en  **+ &nbsp;agregar** y, a continuación, rellene hoja Hola con estos valores:</span><span class="sxs-lookup"><span data-stu-id="60bc0-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="60bc0-337">**Alias de salida**: usar el nombre de hello `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="60bc0-338">**Receptor**: seleccione **Blob Storage**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="60bc0-339">**Opciones de importación**: seleccione **Usar almacenamiento de blobs de la suscripción actual**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="60bc0-340">**Cuenta de Storage**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-340">**Storage account**.</span></span> <span data-ttu-id="60bc0-341">Seleccione **Crear nueva cuenta de almacenamiento**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="60bc0-342">**Cuenta de Storage** (segundo cuadro).</span><span class="sxs-lookup"><span data-stu-id="60bc0-342">**Storage account** (second box).</span></span> <span data-ttu-id="60bc0-343">Escriba `YOURNAMEsademo`, donde `YOURNAME` sea su nombre u otra cadena única.</span><span class="sxs-lookup"><span data-stu-id="60bc0-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="60bc0-344">nombre de Hello puede usar solo letras minúsculas y números, y debe ser único en Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="60bc0-345">**Contenedor**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-345">**Container**.</span></span> <span data-ttu-id="60bc0-346">Escriba `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="60bc0-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="60bc0-347">nombre de cuenta de almacenamiento de Hola y el nombre del contenedor son tooprovide junto usa un URI para el almacenamiento de blobs de hello, similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="60bc0-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Hoja "Nueva salida" del trabajo de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="60bc0-349">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-349">Click **Create**.</span></span> 

    <span data-ttu-id="60bc0-350">Azure crea la cuenta de almacenamiento de Hola y genera una clave automáticamente.</span><span class="sxs-lookup"><span data-stu-id="60bc0-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="60bc0-351">Hola cerrar **salidas** hoja.</span><span class="sxs-lookup"><span data-stu-id="60bc0-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="60bc0-352">Iniciar trabajo de análisis de transmisión por secuencias de Hola</span><span class="sxs-lookup"><span data-stu-id="60bc0-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="60bc0-353">trabajo de Hello ya está configurada.</span><span class="sxs-lookup"><span data-stu-id="60bc0-353">hello job is now configured.</span></span> <span data-ttu-id="60bc0-354">Ha especificado una entrada (centro de eventos de hello), una transformación (hello toolook de consulta para las llamadas fraudulentas) y una salida (almacenamiento de blobs).</span><span class="sxs-lookup"><span data-stu-id="60bc0-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="60bc0-355">Ahora puede iniciar el trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="60bc0-356">Asegúrese de que está ejecutando la aplicación de hello TelcoGenerator.</span><span class="sxs-lookup"><span data-stu-id="60bc0-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="60bc0-357">En la hoja de trabajo de hello, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-357">In hello job blade, click **Start**.</span></span>

    ![Iniciar el trabajo de análisis de transmisiones de Hola](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="60bc0-359">Hola **Start job** hoja, de hora de inicio de salida trabajo, seleccione **ahora**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="60bc0-360">Haga clic en **Iniciar**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-360">Click **Start**.</span></span> 

    !["Iniciar el trabajo" hoja de trabajo de análisis de transmisiones de Hola](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="60bc0-362">Azure le avisa cuando ha iniciado el trabajo de Hola y de hoja de trabajo de hello, estado de Hola se muestra como **ejecutando**.</span><span class="sxs-lookup"><span data-stu-id="60bc0-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Estado del trabajo de Stream Analytics que muestra "En ejecución"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="60bc0-364">Examinar los datos de hello transformado</span><span class="sxs-lookup"><span data-stu-id="60bc0-364">Examine hello transformed data</span></span>

<span data-ttu-id="60bc0-365">Ya dispone de un trabajo de Stream Analytics completo.</span><span class="sxs-lookup"><span data-stu-id="60bc0-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="60bc0-366">trabajo de Hello es examinar un flujo de metadatos de la llamada de teléfono, buscando fraudulentas llamadas telefónicas en tiempo real y escribir la información sobre esos toostorage llamadas fraudulentos.</span><span class="sxs-lookup"><span data-stu-id="60bc0-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="60bc0-367">toocomplete este tutorial, puede querer toolook datos Hola captura si el trabajo de análisis de transmisión por secuencias de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="60bc0-368">Hola los datos se escriben tooAzure almacenamiento de blobs en fragmentos (archivos).</span><span class="sxs-lookup"><span data-stu-id="60bc0-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="60bc0-369">Puede usar cualquier herramienta que lea Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="60bc0-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="60bc0-370">Como se indicó en la sección Requisitos previos de hello, puede usar las extensiones de Azure en Visual Studio, o puede usar una herramienta como [Azure Storage Explorer](http://storageexplorer.com/) o [explorador Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="60bc0-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="60bc0-371">Cuando examine el contenido de Hola de un archivo de almacenamiento de blobs, verá algo parecido a Hola siguiente:</span><span class="sxs-lookup"><span data-stu-id="60bc0-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Azure Blob Storage con salida de Streaming Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="60bc0-373">Limpieza de recursos</span><span class="sxs-lookup"><span data-stu-id="60bc0-373">Clean up resources</span></span>

<span data-ttu-id="60bc0-374">Tenemos otros artículos que continúe con el escenario de detección de fraudes de Hola y que usan recursos de Hola que ha creado en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="60bc0-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="60bc0-375">Si desea toocontinue, consulte sugerencias de hello en **pasos siguientes** más tarde.</span><span class="sxs-lookup"><span data-stu-id="60bc0-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="60bc0-376">Sin embargo, si ha terminado y no necesita recursos Hola que ha creado, puede eliminarlos para que no se incurre en cobros innecesarios a Azure.</span><span class="sxs-lookup"><span data-stu-id="60bc0-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="60bc0-377">En ese caso, se recomienda que Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="60bc0-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="60bc0-378">Detener el trabajo de análisis de transmisión por secuencias de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="60bc0-379">Hola **trabajos** hoja, haga clic en **detener** en la parte superior de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="60bc0-380">Detener la aplicación del generador de telecomunicaciones hello.</span><span class="sxs-lookup"><span data-stu-id="60bc0-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="60bc0-381">En la ventana de comandos de Hola donde se inició la aplicación hello, presione CTRL+c.</span><span class="sxs-lookup"><span data-stu-id="60bc0-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="60bc0-382">Si ha creado una cuenta de Blob Storage exclusivamente para este tutorial, elimínela.</span><span class="sxs-lookup"><span data-stu-id="60bc0-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="60bc0-383">Eliminar trabajo de análisis de transmisión por secuencias de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="60bc0-384">Eliminar el concentrador de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="60bc0-385">Eliminar espacio de nombres del concentrador de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="60bc0-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="60bc0-386">Obtención de soporte técnico</span><span class="sxs-lookup"><span data-stu-id="60bc0-386">Get support</span></span>

<span data-ttu-id="60bc0-387">Para obtener más ayuda, pruebe nuestro [foro de Análisis de transmisiones de Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="60bc0-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="60bc0-388">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="60bc0-388">Next steps</span></span>

<span data-ttu-id="60bc0-389">Puede seguir este tutorial con hello siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="60bc0-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="60bc0-390">[Stream Analytics y Power BI: panel de análisis en tiempo real de flujo de datos](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="60bc0-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="60bc0-391">Este artículo muestra cómo toosend Hola salida de telecomunicaciones de análisis de transmisiones de hello trabajo tooPower BI para su visualización en tiempo real y análisis.</span><span class="sxs-lookup"><span data-stu-id="60bc0-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="60bc0-392">[¿Cómo toostore datos de análisis de transmisiones de Azure en una caché en Redis de Azure mediante las funciones de Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="60bc0-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="60bc0-393">Este artículo muestra cómo toouse funciones de Azure toowrite fraudulenta llama tooan caché de Redis de Azure a través de una cola de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="60bc0-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="60bc0-394">Para más información sobre Stream Analytics en general, examine los siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="60bc0-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="60bc0-395">Introducción tooAzure análisis de transmisiones</span><span class="sxs-lookup"><span data-stu-id="60bc0-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="60bc0-396">Escalación de trabajos de Análisis de transmisiones de Azure</span><span class="sxs-lookup"><span data-stu-id="60bc0-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="60bc0-397">Referencia del lenguaje de consulta de Análisis de transmisiones de Azure</span><span class="sxs-lookup"><span data-stu-id="60bc0-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="60bc0-398">Referencia de API de REST de administración de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="60bc0-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

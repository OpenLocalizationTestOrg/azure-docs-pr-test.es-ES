---
title: "aaaHandling orden de eventos y tardanza con análisis de transmisiones de Azure | Documentos de Microsoft"
description: "Aprenda cómo funciona Stream Analytics con eventos desordenados o atrasados en flujos de datos."
keywords: desordenados, atrasados, eventos
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 87c028662fbafbf4f72f57f215d017f65bb649f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="a858e-104">Control del orden de los eventos de Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a858e-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="a858e-105">En un flujo de datos temporales de eventos, se registra cada evento con hora Hola se recibe ese evento Hola.</span><span class="sxs-lookup"><span data-stu-id="a858e-105">In a temporal data stream of events, each event is recorded with hello time that hello event is received.</span></span> <span data-ttu-id="a858e-106">Algunas condiciones podrían producir secuencias de eventos de recepción toooccasionally algunos eventos en un orden diferente a la que se enviaron.</span><span class="sxs-lookup"><span data-stu-id="a858e-106">Some conditions might cause event streams toooccasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="a858e-107">Un simple TCP retransmitir, o incluso un sesgo de reloj entre Hola enviar hello recibir centro de eventos y dispositivos puede provocar este toooccur.</span><span class="sxs-lookup"><span data-stu-id="a858e-107">A simple TCP retransmit, or even a clock skew between hello sending device and hello receiving event hub might cause this toooccur.</span></span> <span data-ttu-id="a858e-108">Eventos de "Puntuación" también se agregan tooreceived secuencias de eventos, tiempo de hello tooadvance en ausencia de Hola de llegadas de eventos.</span><span class="sxs-lookup"><span data-stu-id="a858e-108">“Punctuation” events also are added tooreceived event streams, tooadvance hello time in hello absence of event arrivals.</span></span> <span data-ttu-id="a858e-109">Estos son necesarios en escenarios como "Avisarme cuando no se produzca ningún inicio de sesión durante 3 minutos".</span><span class="sxs-lookup"><span data-stu-id="a858e-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="a858e-110">Los flujos de entrada que no están en orden:</span><span class="sxs-lookup"><span data-stu-id="a858e-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="a858e-111">Se ordenan (y, por tanto, se **retrasan**).</span><span class="sxs-lookup"><span data-stu-id="a858e-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="a858e-112">Ajustar sistema hello, según la directiva de tooa especificado por el usuario.</span><span class="sxs-lookup"><span data-stu-id="a858e-112">Adjusted by hello system, according tooa user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="a858e-113">Tolerancia a la tardanza</span><span class="sxs-lookup"><span data-stu-id="a858e-113">Lateness tolerance</span></span>
<span data-ttu-id="a858e-114">Stream Analytics tolera estos tipos de escenarios.</span><span class="sxs-lookup"><span data-stu-id="a858e-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="a858e-115">Stream Analytics tiene control de eventos "desordenados" y "atrasados".</span><span class="sxs-lookup"><span data-stu-id="a858e-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="a858e-116">Controla estos eventos en hello siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="a858e-116">It handles these events in hello following ways:</span></span>

* <span data-ttu-id="a858e-117">Los eventos que llegan sin orden pero dentro de hello establecer tolerancia son **ordenar por marca de tiempo**.</span><span class="sxs-lookup"><span data-stu-id="a858e-117">Events that arrive out of order but within hello set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="a858e-118">Los eventos que llegan más tarde que la tolerancia se **descartan o ajustan**.</span><span class="sxs-lookup"><span data-stu-id="a858e-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="a858e-119">**Ajustar**: toohave tooappear ajustada llegó a hello más reciente tiempo aceptable.</span><span class="sxs-lookup"><span data-stu-id="a858e-119">**Adjusted**: Adjusted tooappear toohave arrived at hello latest acceptable time.</span></span>
    * <span data-ttu-id="a858e-120">**Descartados**: los eventos descartados.</span><span class="sxs-lookup"><span data-stu-id="a858e-120">**Dropped**: Discarded.</span></span>

![Control de eventos de Stream Analytics](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-hello-number-of-out-of-order-events"></a><span data-ttu-id="a858e-122">Reducir el número de Hola de eventos de fuera de servicio</span><span class="sxs-lookup"><span data-stu-id="a858e-122">Reduce hello number of out-of-order events</span></span>

<span data-ttu-id="a858e-123">Como Stream Analytics aplica una transformación temporal cuando procesa los eventos entrantes (por ejemplo, para agregados en ventana o uniones temporales), Stream Analytics ordena los eventos entrantes por orden de marca de tiempo.</span><span class="sxs-lookup"><span data-stu-id="a858e-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="a858e-124">Cuando es la palabra clave "timestamp por" hello **no** utiliza, hora de poner en cola de evento de hello centros de eventos de Azure se utiliza de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a858e-124">When hello “timestamp by” keyword is **not** used, hello Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="a858e-125">Los concentradores de eventos garantiza monotonicity de marca de tiempo de hello en cada partición del concentrador de eventos de Hola.</span><span class="sxs-lookup"><span data-stu-id="a858e-125">Event Hubs guarantees monotonicity of hello timestamp on each partition of hello event hub.</span></span> <span data-ttu-id="a858e-126">También garantiza que eventos de todas las particiones se combinan en orden de marca de tiempo.</span><span class="sxs-lookup"><span data-stu-id="a858e-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="a858e-127">Estas dos garantías de Event Hubs aseguran que no hay eventos desordenados.</span><span class="sxs-lookup"><span data-stu-id="a858e-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="a858e-128">A veces, es importante para la marca de tiempo se toouse Hola del remitente.</span><span class="sxs-lookup"><span data-stu-id="a858e-128">Sometimes, it’s important for you toouse hello sender’s timestamp.</span></span> <span data-ttu-id="a858e-129">En ese caso, se elige una marca de tiempo de carga del evento hello mediante el uso de "marca de tiempo por".</span><span class="sxs-lookup"><span data-stu-id="a858e-129">In that case, a timestamp from hello event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="a858e-130">En estos escenarios, se podrían introducir uno o más orígenes de desórdenes de eventos:</span><span class="sxs-lookup"><span data-stu-id="a858e-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="a858e-131">Los productores de eventos tienen sesgos de reloj.</span><span class="sxs-lookup"><span data-stu-id="a858e-131">Event producers have clock skews.</span></span> <span data-ttu-id="a858e-132">Esto es común cuando los productores provienen de equipos diferentes, por lo que tienen relojes diferentes.</span><span class="sxs-lookup"><span data-stu-id="a858e-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="a858e-133">Hay un retraso de red de origen Hola de concentrador de eventos de destino de hello eventos toohello.</span><span class="sxs-lookup"><span data-stu-id="a858e-133">There's a network delay from hello source of hello events toohello destination event hub.</span></span>
* <span data-ttu-id="a858e-134">Existen sesgos de reloj entre particiones de centro de eventos.</span><span class="sxs-lookup"><span data-stu-id="a858e-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="a858e-135">Stream Analytics ordena primero los eventos de todas las particiones del centro de eventos por tiempo de puesta en cola del evento.</span><span class="sxs-lookup"><span data-stu-id="a858e-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="a858e-136">A continuación, examina flujo de datos hello misordered eventos.</span><span class="sxs-lookup"><span data-stu-id="a858e-136">Then, it examines hello data stream for misordered events.</span></span>

<span data-ttu-id="a858e-137">En la ficha de configuración de hello, vea Hola después de los valores predeterminados:</span><span class="sxs-lookup"><span data-stu-id="a858e-137">On hello configuration tab, you see hello following defaults:</span></span>

![Control de desorden de Stream Analytics](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="a858e-139">Si usa 0 segundos como período de tolerancia de fuera de servicio de hello, que está validando que todos los eventos están en orden todo tiempo Hola.</span><span class="sxs-lookup"><span data-stu-id="a858e-139">If you use 0 seconds as hello out-of-order tolerance window, you are asserting that all events are in order all hello time.</span></span> <span data-ttu-id="a858e-140">Dados los orígenes de hello tres de los eventos misordered, es probable que esto es cierto.</span><span class="sxs-lookup"><span data-stu-id="a858e-140">Given hello three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="a858e-141">toocorrect de análisis de transmisiones de tooallow misorder de un evento, puede especificar un período de tolerancia de fuera de servicio distinto de cero.</span><span class="sxs-lookup"><span data-stu-id="a858e-141">tooallow Stream Analytics toocorrect an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="a858e-142">Eventos de búferes de análisis de flujo toothat ventana y, a continuación, pedidos repetidos que ellos mediante Hola marca de tiempo que eligió.</span><span class="sxs-lookup"><span data-stu-id="a858e-142">Stream Analytics buffers events up toothat window, and then reorders them by using hello timestamp you chose.</span></span> <span data-ttu-id="a858e-143">A continuación, aplica la transformación temporal de Hola.</span><span class="sxs-lookup"><span data-stu-id="a858e-143">It then applies hello temporal transformation.</span></span> <span data-ttu-id="a858e-144">Puede comenzar con una ventana de 3 segundos y número de Hola Hola valor tooreduce de eventos que se ajusta a la hora de optimizar.</span><span class="sxs-lookup"><span data-stu-id="a858e-144">You can start with a 3-second window, and tune hello value tooreduce hello number of events that are time-adjusted.</span></span> 

<span data-ttu-id="a858e-145">Un efecto secundario de almacenamiento en búfer de hello es que el resultado de hello es **demoró Hola mismo período de tiempo**.</span><span class="sxs-lookup"><span data-stu-id="a858e-145">A side effect of hello buffering is that hello output is **delayed by hello same amount of time**.</span></span> <span data-ttu-id="a858e-146">Puede ajustar el número de Hola Hola valor tooreduce de eventos fuera de servicio y mantener baja latencia de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="a858e-146">You can tune hello value tooreduce hello number of out-of-order events, and keep hello job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="a858e-147">Obtener ayuda</span><span class="sxs-lookup"><span data-stu-id="a858e-147">Get help</span></span>
<span data-ttu-id="a858e-148">Para obtener más ayuda, pruebe nuestro [foro de Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="a858e-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a858e-149">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a858e-149">Next steps</span></span>
* [<span data-ttu-id="a858e-150">Introducción tooStream análisis</span><span class="sxs-lookup"><span data-stu-id="a858e-150">Introduction tooStream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="a858e-151">Introducción a Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a858e-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="a858e-152">Escalado de trabajos de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a858e-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="a858e-153">Referencia de lenguaje de consulta de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a858e-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="a858e-154">Referencia de API de REST de administración de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a858e-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
---
title: aaaHow tooupdate un servicio en la nube | Documentos de Microsoft
description: "Obtenga información acerca de cómo servicios en la nube tooupdate en Azure. Obtenga información acerca de cómo realiza una actualización en un servicio de nube tooensure disponibilidad."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 7e4c8bd46e51a555b4309ea8927d120e8efcf0ea
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooupdate-a-cloud-service"></a><span data-ttu-id="26e89-104">¿Cómo tooupdate un servicio de nube</span><span class="sxs-lookup"><span data-stu-id="26e89-104">How tooupdate a cloud service</span></span>

<span data-ttu-id="26e89-105">La actualización de un servicio en la nube, incluidos sus roles y el sistema operativo invitado, es un proceso de tres pasos.</span><span class="sxs-lookup"><span data-stu-id="26e89-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="26e89-106">En primer lugar, los archivos binarios de Hola y archivos de configuración de hello nuevo servicio en la nube o se debe cargar la versión del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="26e89-106">First, hello binaries and configuration files for hello new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="26e89-107">A continuación, Azure reserva los recursos y de red para el servicio de nube de hello en función de los requisitos de hello de la nueva versión del servicio de nube para Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-107">Next, Azure reserves compute and network resources for hello cloud service based on hello requirements of hello new cloud service version.</span></span> <span data-ttu-id="26e89-108">Por último, Azure realiza una gradual tooincrementally actualización Hola inquilino toohello nueva versión de actualización o el sistema operativo invitado conservando su disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="26e89-108">Finally, Azure performs a rolling upgrade tooincrementally update hello tenant toohello new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="26e89-109">En este artículo se trata detalles de Hola de este último paso: Hola actualización gradual.</span><span class="sxs-lookup"><span data-stu-id="26e89-109">This article discusses hello details of this last step – hello rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="26e89-110">Actualización de un servicio de Azure</span><span class="sxs-lookup"><span data-stu-id="26e89-110">Update an Azure Service</span></span>
<span data-ttu-id="26e89-111">Azure organiza las instancias de rol en agrupaciones lógicas denominadas dominios de actualización (UD).</span><span class="sxs-lookup"><span data-stu-id="26e89-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="26e89-112">Los dominios de actualización (UD) son conjuntos lógicos de instancias de rol que se actualizan como un grupo.</span><span class="sxs-lookup"><span data-stu-id="26e89-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="26e89-113">Azure actualiza una nube de servicio uno UD a la vez, lo que permite a instancias de otro toocontinue ud que sirve al tráfico.</span><span class="sxs-lookup"><span data-stu-id="26e89-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs toocontinue serving traffic.</span></span>

<span data-ttu-id="26e89-114">número predeterminado de Hola de dominios de actualización es 5.</span><span class="sxs-lookup"><span data-stu-id="26e89-114">hello default number of upgrade domains is 5.</span></span> <span data-ttu-id="26e89-115">Puede especificar un número diferente de dominios de actualización mediante la inclusión de atributo de upgradeDomainCount hello en el archivo de definición del servicio de hello (.csdef).</span><span class="sxs-lookup"><span data-stu-id="26e89-115">You can specify a different number of upgrade domains by including hello upgradeDomainCount attribute in hello service’s definition file (.csdef).</span></span> <span data-ttu-id="26e89-116">Para obtener más información sobre el atributo de upgradeDomainCount hello, consulte [esquema WebRole](https://msdn.microsoft.com/library/azure/gg557553.aspx) o [esquema WorkerRole](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="26e89-116">For more information about hello upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="26e89-117">Cuando se realiza una actualización en contexto de uno o varios roles en el servicio, Azure actualiza los conjuntos de instancias de rol según toohello toowhich de dominio de actualización al que pertenecen.</span><span class="sxs-lookup"><span data-stu-id="26e89-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according toohello upgrade domain toowhich they belong.</span></span> <span data-ttu-id="26e89-118">Las actualizaciones de Azure todos de instancias de hello en un dominio de actualización determinado: deteniéndolas, actualizándolas, poniéndolas de nuevo en línea, a continuación, se desplaza al siguiente dominio de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-118">Azure updates all of hello instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto hello next domain.</span></span> <span data-ttu-id="26e89-119">Deteniendo solo Hola instancias que se ejecutan en hello actual dominio de actualización, Azure se asegura de que se produce una actualización con hello menos posible impacto toohello ejecuta el servicio.</span><span class="sxs-lookup"><span data-stu-id="26e89-119">By stopping only hello instances running in hello current upgrade domain, Azure makes sure that an update occurs with hello least possible impact toohello running service.</span></span> <span data-ttu-id="26e89-120">Para obtener más información, consulte [cómo tiene lugar la actualización de hello](#howanupgradeproceeds) más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="26e89-120">For more information, see [How hello update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="26e89-121">Mientras que los términos de hello **actualizar** y **actualizar** tienen un significado ligeramente diferente en el contexto de hello Azure, pueden usarse indistintamente para procesos de Hola y descripciones de características de hello en este documento.</span><span class="sxs-lookup"><span data-stu-id="26e89-121">While hello terms **update** and **upgrade** have slightly different meaning in hello context Azure, they can be used interchangeably for hello processes and descriptions of hello features in this document.</span></span>
>
>

<span data-ttu-id="26e89-122">El servicio debe definir al menos dos instancias de un rol para ese rol toobe actualizar en contexto sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="26e89-122">Your service must define at least two instances of a role for that role toobe updated in-place without downtime.</span></span> <span data-ttu-id="26e89-123">Si el servicio Hola consta de una única instancia de un rol, el servicio dejará de estar disponible hasta que hello actualización en contexto haya finalizado.</span><span class="sxs-lookup"><span data-stu-id="26e89-123">If hello service consists of only one instance of one role, your service will be unavailable until hello in-place update has finished.</span></span>

<span data-ttu-id="26e89-124">En este tema se trata Hola después de obtener información acerca de las actualizaciones de Azure:</span><span class="sxs-lookup"><span data-stu-id="26e89-124">This topic covers hello following information about Azure updates:</span></span>

* [<span data-ttu-id="26e89-125">Cambios de servicio permitidos durante una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="26e89-126">Cómo se realiza una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="26e89-127">Reversión de una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="26e89-128">Iniciación de varias operaciones mutantes en una implementación en curso</span><span class="sxs-lookup"><span data-stu-id="26e89-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="26e89-129">Distribución de roles entre dominios de actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="26e89-130">Cambios de servicio permitidos durante una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-130">Allowed service changes during an update</span></span>
<span data-ttu-id="26e89-131">Hello tabla siguiente se muestran Hola permite cambios tooa servicio durante una actualización:</span><span class="sxs-lookup"><span data-stu-id="26e89-131">hello following table shows hello allowed changes tooa service during an update:</span></span>

| <span data-ttu-id="26e89-132">Cambios permitidos toohosting, servicios y roles</span><span class="sxs-lookup"><span data-stu-id="26e89-132">Changes permitted toohosting, services, and roles</span></span> | <span data-ttu-id="26e89-133">Actualización local</span><span class="sxs-lookup"><span data-stu-id="26e89-133">In-place update</span></span> | <span data-ttu-id="26e89-134">Por etapas (intercambio de VIP)</span><span class="sxs-lookup"><span data-stu-id="26e89-134">Staged (VIP swap)</span></span> | <span data-ttu-id="26e89-135">Eliminar y volver a implementar</span><span class="sxs-lookup"><span data-stu-id="26e89-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="26e89-136">Versión del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="26e89-136">Operating system version</span></span> |<span data-ttu-id="26e89-137">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-137">Yes</span></span> |<span data-ttu-id="26e89-138">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-138">Yes</span></span> |<span data-ttu-id="26e89-139">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-139">Yes</span></span> |
| <span data-ttu-id="26e89-140">Nivel de confianza de .NET</span><span class="sxs-lookup"><span data-stu-id="26e89-140">.NET trust level</span></span> |<span data-ttu-id="26e89-141">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-141">Yes</span></span> |<span data-ttu-id="26e89-142">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-142">Yes</span></span> |<span data-ttu-id="26e89-143">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-143">Yes</span></span> |
| <span data-ttu-id="26e89-144">Tamaño de la máquina virtual<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="26e89-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="26e89-145">Sí<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="26e89-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="26e89-146">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-146">Yes</span></span> |<span data-ttu-id="26e89-147">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-147">Yes</span></span> |
| <span data-ttu-id="26e89-148">Configuración de almacenamiento local</span><span class="sxs-lookup"><span data-stu-id="26e89-148">Local storage settings</span></span> |<span data-ttu-id="26e89-149">Solo aumentar<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="26e89-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="26e89-150">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-150">Yes</span></span> |<span data-ttu-id="26e89-151">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-151">Yes</span></span> |
| <span data-ttu-id="26e89-152">Agregar o quitar roles en un servicio</span><span class="sxs-lookup"><span data-stu-id="26e89-152">Add or remove roles in a service</span></span> |<span data-ttu-id="26e89-153">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-153">Yes</span></span> |<span data-ttu-id="26e89-154">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-154">Yes</span></span> |<span data-ttu-id="26e89-155">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-155">Yes</span></span> |
| <span data-ttu-id="26e89-156">Número de instancias de un rol concreto</span><span class="sxs-lookup"><span data-stu-id="26e89-156">Number of instances of a particular role</span></span> |<span data-ttu-id="26e89-157">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-157">Yes</span></span> |<span data-ttu-id="26e89-158">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-158">Yes</span></span> |<span data-ttu-id="26e89-159">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-159">Yes</span></span> |
| <span data-ttu-id="26e89-160">Número o tipo de puntos de conexión de un servicio</span><span class="sxs-lookup"><span data-stu-id="26e89-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="26e89-161">Sí<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="26e89-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="26e89-162">No</span><span class="sxs-lookup"><span data-stu-id="26e89-162">No</span></span> |<span data-ttu-id="26e89-163">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-163">Yes</span></span> |
| <span data-ttu-id="26e89-164">Nombres y valores de configuración</span><span class="sxs-lookup"><span data-stu-id="26e89-164">Names and values of configuration settings</span></span> |<span data-ttu-id="26e89-165">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-165">Yes</span></span> |<span data-ttu-id="26e89-166">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-166">Yes</span></span> |<span data-ttu-id="26e89-167">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-167">Yes</span></span> |
| <span data-ttu-id="26e89-168">Valores (pero no nombres) de configuración</span><span class="sxs-lookup"><span data-stu-id="26e89-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="26e89-169">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-169">Yes</span></span> |<span data-ttu-id="26e89-170">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-170">Yes</span></span> |<span data-ttu-id="26e89-171">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-171">Yes</span></span> |
| <span data-ttu-id="26e89-172">Incorporación de nuevos certificados</span><span class="sxs-lookup"><span data-stu-id="26e89-172">Add new certificates</span></span> |<span data-ttu-id="26e89-173">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-173">Yes</span></span> |<span data-ttu-id="26e89-174">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-174">Yes</span></span> |<span data-ttu-id="26e89-175">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-175">Yes</span></span> |
| <span data-ttu-id="26e89-176">Cambio de certificados existentes</span><span class="sxs-lookup"><span data-stu-id="26e89-176">Change existing certificates</span></span> |<span data-ttu-id="26e89-177">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-177">Yes</span></span> |<span data-ttu-id="26e89-178">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-178">Yes</span></span> |<span data-ttu-id="26e89-179">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-179">Yes</span></span> |
| <span data-ttu-id="26e89-180">Implementación de nuevo código</span><span class="sxs-lookup"><span data-stu-id="26e89-180">Deploy new code</span></span> |<span data-ttu-id="26e89-181">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-181">Yes</span></span> |<span data-ttu-id="26e89-182">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-182">Yes</span></span> |<span data-ttu-id="26e89-183">Sí</span><span class="sxs-lookup"><span data-stu-id="26e89-183">Yes</span></span> |

<span data-ttu-id="26e89-184"><sup>1</sup> cambio de tamaño limitado toohello subconjunto de los tamaños disponibles para el servicio de nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-184"><sup>1</sup> Size change limited toohello subset of sizes available for hello cloud service.</span></span>

<span data-ttu-id="26e89-185"><sup>2</sup> Requiere Azure SDK 1.5 o versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="26e89-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="26e89-186">Cambiar el tamaño de la máquina virtual de hello destruirá datos locales.</span><span class="sxs-lookup"><span data-stu-id="26e89-186">Changing hello virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="26e89-187">Hola siguientes elementos no se admite durante una actualización:</span><span class="sxs-lookup"><span data-stu-id="26e89-187">hello following items are not supported during an update:</span></span>

* <span data-ttu-id="26e89-188">Cambiar nombre de Hola de un rol.</span><span class="sxs-lookup"><span data-stu-id="26e89-188">Changing hello name of a role.</span></span> <span data-ttu-id="26e89-189">Quitar y, a continuación, agregar rol de hello con hello nuevo nombre.</span><span class="sxs-lookup"><span data-stu-id="26e89-189">Remove and then add hello role with hello new name.</span></span>
* <span data-ttu-id="26e89-190">Cambio de hello recuento de actualización del dominio.</span><span class="sxs-lookup"><span data-stu-id="26e89-190">Changing of hello Upgrade Domain count.</span></span>
* <span data-ttu-id="26e89-191">Reducir el tamaño de Hola de recursos locales de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-191">Decreasing hello size of hello local resources.</span></span>

<span data-ttu-id="26e89-192">Si va a realizar otras actualizaciones de definición del servicio de tooyour, como reducir el tamaño de hello del recurso local, debe realizar una actualización de intercambio de VIP en su lugar.</span><span class="sxs-lookup"><span data-stu-id="26e89-192">If you are making other updates tooyour service's definition, such as decreasing hello size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="26e89-193">Para obtener más información, consulte [Intercambiar implementaciones](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="26e89-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="26e89-194">Cómo se realiza una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-194">How an upgrade proceeds</span></span>
<span data-ttu-id="26e89-195">Puede decidir si desea que tooupdate todos los roles de hello en el servicio o un único rol en el servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-195">You can decide whether you want tooupdate all of hello roles in your service or a single role in hello service.</span></span> <span data-ttu-id="26e89-196">En cualquier caso, todas las instancias de cada rol que se está actualizando y deben pertenecer toohello primer dominio de actualización se detiene, se actualizará y se vuelve a poner en línea.</span><span class="sxs-lookup"><span data-stu-id="26e89-196">In either case, all instances of each role that is being upgraded and belong toohello first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="26e89-197">Una vez que se vuelve a estar conectados, hello instancias en el segundo dominio de actualización de Hola se detiene, actualizar y poner en línea.</span><span class="sxs-lookup"><span data-stu-id="26e89-197">Once they are back online, hello instances in hello second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="26e89-198">Un servicio en la nube puede tener como mucho una actualización activa a la vez.</span><span class="sxs-lookup"><span data-stu-id="26e89-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="26e89-199">actualización de Hola se realiza siempre en la versión más reciente de hello del servicio de nube de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-199">hello upgrade is always performed against hello latest version of hello cloud service.</span></span>

<span data-ttu-id="26e89-200">Hello siguiente diagrama muestra cómo se realiza Hola actualización si va a actualizar todos los roles de hello en el servicio de Hola de:</span><span class="sxs-lookup"><span data-stu-id="26e89-200">hello following diagram illustrates how hello upgrade proceeds if you are upgrading all of hello roles in hello service:</span></span>

<span data-ttu-id="26e89-201">![Actualizar servicio](media/cloud-services-update-azure-service/IC345879.png "Actualizar servicio")</span><span class="sxs-lookup"><span data-stu-id="26e89-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="26e89-202">En el diagrama siguiente muestra cómo se realiza la actualización de hello si va a actualizar un único rol:</span><span class="sxs-lookup"><span data-stu-id="26e89-202">This next diagram illustrates how hello update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="26e89-203">![Actualizar rol](media/cloud-services-update-azure-service/IC345880.png "Actualizar rol")</span><span class="sxs-lookup"><span data-stu-id="26e89-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="26e89-204">Durante una actualización automática, hello Azure Fabric Controller evalúa periódicamente mantenimiento Hola de toodetermine de servicio de nube de hello cuando su toowalk seguro Hola UD siguiente.</span><span class="sxs-lookup"><span data-stu-id="26e89-204">During an automatic update, hello Azure Fabric Controller periodically evaluates hello health of hello cloud service toodetermine when it’s safe toowalk hello next UD.</span></span> <span data-ttu-id="26e89-205">Esta evaluación de mantenimiento se realiza en una base por rol y considera que solo las instancias en la versión más reciente de hello (es decir, instancias de ud que ya se ha visto).</span><span class="sxs-lookup"><span data-stu-id="26e89-205">This health evaluation is performed on a per-role basis and considers only instances in hello latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="26e89-206">Comprueba que un número mínimo de instancias de rol, para cada rol, hayan alcanzado un estado terminal satisfactorio.</span><span class="sxs-lookup"><span data-stu-id="26e89-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="26e89-207">Tiempo de espera de inicio de la instancia de rol</span><span class="sxs-lookup"><span data-stu-id="26e89-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="26e89-208">Controlador de tejido de Hello esperará 30 minutos para cada tooreach de instancia de rol un estado iniciado.</span><span class="sxs-lookup"><span data-stu-id="26e89-208">hello Fabric Controller will wait 30 minutes for each role instance tooreach a Started state.</span></span> <span data-ttu-id="26e89-209">Si transcurre la duración del tiempo de espera de hello, controlador de tejido de Hola continuará recorrer toohello siguiente instancia de rol.</span><span class="sxs-lookup"><span data-stu-id="26e89-209">If hello timeout duration elapses, hello Fabric Controller will continue walking toohello next role instance.</span></span>

### <a name="impact-toodrive-data-during-cloud-service-upgrades"></a><span data-ttu-id="26e89-210">Datos de impacto de toodrive durante las actualizaciones de servicio en la nube</span><span class="sxs-lookup"><span data-stu-id="26e89-210">Impact toodrive data during Cloud Service upgrades</span></span>

<span data-ttu-id="26e89-211">Al actualizar un servicio desde una instancia de toomultiple de instancia única se desactivará su servicio mientras se realiza la actualización de hello debido forma toohello que Azure actualiza los servicios.</span><span class="sxs-lookup"><span data-stu-id="26e89-211">When upgrading a service from a single instance toomultiple instances your service will be brought down while hello upgrade is performed due toohello way Azure upgrades services.</span></span> <span data-ttu-id="26e89-212">disponibilidad de servicio garantiza de contrato de nivel de servicio de Hello solo aplica tooservices que se implementan con más de una instancia.</span><span class="sxs-lookup"><span data-stu-id="26e89-212">hello service level agreement guaranteeing service availability only applies tooservices that are deployed with more than one instance.</span></span> <span data-ttu-id="26e89-213">Hello lista siguiente describe cómo afectan los datos de hello en cada unidad de distintos escenarios de actualización de servicio de Azure:</span><span class="sxs-lookup"><span data-stu-id="26e89-213">hello following list describes how hello data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="26e89-214">Escenario</span><span class="sxs-lookup"><span data-stu-id="26e89-214">Scenario</span></span>|<span data-ttu-id="26e89-215">Unidad C</span><span class="sxs-lookup"><span data-stu-id="26e89-215">C Drive</span></span>|<span data-ttu-id="26e89-216">Unidad D</span><span class="sxs-lookup"><span data-stu-id="26e89-216">D Drive</span></span>|<span data-ttu-id="26e89-217">Unidad E</span><span class="sxs-lookup"><span data-stu-id="26e89-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="26e89-218">Reinicio de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="26e89-218">VM reboot</span></span>|<span data-ttu-id="26e89-219">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-219">Preserved</span></span>|<span data-ttu-id="26e89-220">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-220">Preserved</span></span>|<span data-ttu-id="26e89-221">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-221">Preserved</span></span>|
|<span data-ttu-id="26e89-222">Reinicio del Portal</span><span class="sxs-lookup"><span data-stu-id="26e89-222">Portal reboot</span></span>|<span data-ttu-id="26e89-223">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-223">Preserved</span></span>|<span data-ttu-id="26e89-224">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-224">Preserved</span></span>|<span data-ttu-id="26e89-225">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-225">Destroyed</span></span>|
|<span data-ttu-id="26e89-226">Restablecimiento de la imagen inicial del portal</span><span class="sxs-lookup"><span data-stu-id="26e89-226">Portal reimage</span></span>|<span data-ttu-id="26e89-227">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-227">Preserved</span></span>|<span data-ttu-id="26e89-228">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-228">Destroyed</span></span>|<span data-ttu-id="26e89-229">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-229">Destroyed</span></span>|
|<span data-ttu-id="26e89-230">Actualización local</span><span class="sxs-lookup"><span data-stu-id="26e89-230">In-Place Upgrade</span></span>|<span data-ttu-id="26e89-231">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-231">Preserved</span></span>|<span data-ttu-id="26e89-232">Conservado</span><span class="sxs-lookup"><span data-stu-id="26e89-232">Preserved</span></span>|<span data-ttu-id="26e89-233">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-233">Destroyed</span></span>|
|<span data-ttu-id="26e89-234">Migración de nodos</span><span class="sxs-lookup"><span data-stu-id="26e89-234">Node migration</span></span>|<span data-ttu-id="26e89-235">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-235">Destroyed</span></span>|<span data-ttu-id="26e89-236">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-236">Destroyed</span></span>|<span data-ttu-id="26e89-237">Destruido</span><span class="sxs-lookup"><span data-stu-id="26e89-237">Destroyed</span></span>|

<span data-ttu-id="26e89-238">Tenga en cuenta que, en Hola por encima de la lista representa la unidad raíz del rol de Hola Hola unidad E: y no debe estar codificado de forma rígida.</span><span class="sxs-lookup"><span data-stu-id="26e89-238">Note that, in hello above list, hello E: drive represents hello role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="26e89-239">En su lugar, use hello **% RoleRoot %** unidad de hello toorepresent variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="26e89-239">Instead, use hello **%RoleRoot%** environment variable toorepresent hello drive.</span></span>

<span data-ttu-id="26e89-240">toominimize Hola el tiempo de inactividad al actualizar un servicio de instancia única, implemente un servidor provisional de varias instancias servicio toohello nuevo y realice un intercambio de VIP.</span><span class="sxs-lookup"><span data-stu-id="26e89-240">toominimize hello downtime when upgrading a single-instance service, deploy a new multi-instance service toohello staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="26e89-241">Reversión de una actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-241">Rollback of an update</span></span>
<span data-ttu-id="26e89-242">Azure proporciona flexibilidad en la administración de servicios durante una actualización que le permite iniciar operaciones adicionales en un servicio, una vez se acepta la solicitud de actualización inicial de Hola por hello controlador de tejido de Azure.</span><span class="sxs-lookup"><span data-stu-id="26e89-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after hello initial update request is accepted by hello Azure Fabric Controller.</span></span> <span data-ttu-id="26e89-243">Solo se puede realizar una reversión cuando una actualización (cambio de configuración) o la actualización está en hello **en curso** estado de implementación de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-243">A rollback can only be performed when an update (configuration change) or upgrade is in hello **in progress** state on hello deployment.</span></span> <span data-ttu-id="26e89-244">Una actualización o una actualización se considera toobe en curso, siempre que hay al menos una instancia del servicio de Hola que aún no ha sido actualizada toohello nueva versión.</span><span class="sxs-lookup"><span data-stu-id="26e89-244">An update or upgrade is considered toobe in-progress as long as there is at least one instance of hello service which has not yet been updated toohello new version.</span></span> <span data-ttu-id="26e89-245">tootest si se permite una reversión, compruebe valor Hola de marca de RollbackAllowed hello, devuelto por [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) y [obtener propiedades del servicio de nube](https://msdn.microsoft.com/library/azure/ee460806.aspx) operaciones, se establece tootrue.</span><span class="sxs-lookup"><span data-stu-id="26e89-245">tootest whether a rollback is allowed, check hello value of hello RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set tootrue.</span></span>

> [!NOTE]
> <span data-ttu-id="26e89-246">Sólo tiene sentido toocall Rollback en un **in situ** actualizar o actualizar debido a las actualizaciones del intercambio de VIP implican reemplazar una instancia en ejecución completa de su servicio con otro.</span><span class="sxs-lookup"><span data-stu-id="26e89-246">It only makes sense toocall Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="26e89-247">Reversión de una actualización en curso tiene Hola siguientes efectos en la implementación de hello:</span><span class="sxs-lookup"><span data-stu-id="26e89-247">Rollback of an in-progress update has hello following effects on hello deployment:</span></span>

* <span data-ttu-id="26e89-248">Las instancias de rol que no se hubiera aún toohello actualizadas nueva versión no se actualizan o actualizar, porque dichas instancias ya están ejecutando la versión de destino de hello del servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-248">Any role instances which had not yet been updated or upgraded toohello new version are not updated or upgraded, because those instances are already running hello target version of hello service.</span></span>
* <span data-ttu-id="26e89-249">Cualquier rol instancias ya que hubiera actualizado o actualizado toohello nueva versión del paquete de servicio de hello (\*.cspkg) Hola o archivo de configuración del servicio (\*.cscfg) archivo (o ambos archivos) están toohello revertida versión previa a la actualización de estos archivos.</span><span class="sxs-lookup"><span data-stu-id="26e89-249">Any role instances which had already been updated or upgraded toohello new version of hello service package (\*.cspkg) file or hello service configuration (\*.cscfg) file (or both files) are reverted toohello pre-upgrade version of these files.</span></span>

<span data-ttu-id="26e89-250">Esta funcionalidad la proporcionan Hola siguientes características:</span><span class="sxs-lookup"><span data-stu-id="26e89-250">This functionally is provided by hello following features:</span></span>

* <span data-ttu-id="26e89-251">Hola [reversión actualizar o actualizar](https://msdn.microsoft.com/library/azure/hh403977.aspx) operación, que se puede llamar en una actualización de la configuración (desencadenada al llamar a [cambiar la configuración de implementación](https://msdn.microsoft.com/library/azure/ee460809.aspx)) o una actualización (desencadenada al llamar a [ Actualizar implementación](https://msdn.microsoft.com/library/azure/ee460793.aspx)) siempre que hay al menos una instancia de servicio de Hola que no se ha recibido actualizado a la versión nueva de toohello.</span><span class="sxs-lookup"><span data-stu-id="26e89-251">hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in hello service which has not yet been updated toohello new version.</span></span>
* <span data-ttu-id="26e89-252">Hola bloqueada y hello RollbackAllowed elemento, que se devuelven como parte del cuerpo de respuesta de Hola de hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) y [obtener propiedades del servicio de nube](https://msdn.microsoft.com/library/azure/ee460806.aspx) operaciones:</span><span class="sxs-lookup"><span data-stu-id="26e89-252">hello Locked element and hello RollbackAllowed element, which are returned as part of hello response body of hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="26e89-253">Hola bloqueado elemento le permite toodetect, cuando una operación de mutación se puede invocar en una implementación determinada.</span><span class="sxs-lookup"><span data-stu-id="26e89-253">hello Locked element allows you toodetect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="26e89-254">Hello RollbackAllowed elemento le permite toodetect cuando hello [revertir actualización o actualizar](https://msdn.microsoft.com/library/azure/hh403977.aspx) operación puede llamarse en una implementación determinada.</span><span class="sxs-lookup"><span data-stu-id="26e89-254">hello RollbackAllowed element allows you toodetect when hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="26e89-255">En orden tooperform una reversión, no tiene toocheck Hola bloqueada tanto Hola RollbackAllowed elementos.</span><span class="sxs-lookup"><span data-stu-id="26e89-255">In order tooperform a rollback, you do not have toocheck both hello Locked and hello RollbackAllowed elements.</span></span> <span data-ttu-id="26e89-256">Es suficiente con tooconfirm que RollbackAllowed se establece tootrue.</span><span class="sxs-lookup"><span data-stu-id="26e89-256">It suffices tooconfirm that RollbackAllowed is set tootrue.</span></span> <span data-ttu-id="26e89-257">Estos elementos solo se devuelven si estos métodos se invocan utilizando el encabezado de solicitud de hello establecido demasiado "x-ms-version: 2011-10-01" o una versión posterior.</span><span class="sxs-lookup"><span data-stu-id="26e89-257">These elements are only returned if these methods are invoked by using hello request header set too“x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="26e89-258">Para obtener más información acerca de los encabezados de control de versiones, consulte [Control de versiones de la administración del servicio](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="26e89-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="26e89-259">Hay algunas situaciones en las que no se admite la reversión de una actualización, estas son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="26e89-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="26e89-260">Reducción de recursos locales: si Hola actualización aumenta Hola recursos locales para un rol Hola plataforma Windows Azure no permite la reversión.</span><span class="sxs-lookup"><span data-stu-id="26e89-260">Reduction in local resources - If hello update increases hello local resources for a role hello Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="26e89-261">Limitaciones de cuota: si actualización Hola estaba una escala hacia abajo de la operación, puede que no tenga suficientes proceso cuota toocomplete Hola de reversión.</span><span class="sxs-lookup"><span data-stu-id="26e89-261">Quota limitations - If hello update was a scale down operation you may no longer have sufficient compute quota toocomplete hello rollback operation.</span></span> <span data-ttu-id="26e89-262">Cada suscripción de Azure tiene una cuota asociada que especifica el número máximo de Hola de núcleos que puede ser utilizado por todos los servicios hospedados que pertenecen toothat suscripción.</span><span class="sxs-lookup"><span data-stu-id="26e89-262">Each Azure subscription has a quota associated with it that specifies hello maximum number of cores which can be consumed by all hosted services that belong toothat subscription.</span></span> <span data-ttu-id="26e89-263">Si la reversión de una determinada actualización hace que su suscripción supere la cuota asignada, no se habilitará dicha reversión.</span><span class="sxs-lookup"><span data-stu-id="26e89-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="26e89-264">Condición de carrera: si ha completado la actualización inicial de hello, no es posible una operación de deshacer.</span><span class="sxs-lookup"><span data-stu-id="26e89-264">Race condition - If hello initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="26e89-265">Un ejemplo de cuando la reversión Hola de una actualización puede resultar útil es si usas hello [actualizar implementación](https://msdn.microsoft.com/library/azure/ee460793.aspx) se implanta operación en velocidad de hello toocontrol de modo manual en el que un tooyour de actualización en contexto principal Azure servicio hospedado.</span><span class="sxs-lookup"><span data-stu-id="26e89-265">An example of when hello rollback of an update might be useful is if you are using hello [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode toocontrol hello rate at which a major in-place upgrade tooyour Azure hosted service is rolled out.</span></span>

<span data-ttu-id="26e89-266">Durante la implementación de Hola de actualización de Hola llaman a [actualizar implementación](https://msdn.microsoft.com/library/azure/ee460793.aspx) en modo manual y empezar a dominios de actualización de toowalk.</span><span class="sxs-lookup"><span data-stu-id="26e89-266">During hello rollout of hello upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin toowalk upgrade domains.</span></span> <span data-ttu-id="26e89-267">Si en algún momento, como supervisar actualización hello, tenga en cuenta algunas instancias de rol en los primeros dominios de actualización Hola que examinar han dejado de responder, puede llamar a hello [revertir actualización o actualizar](https://msdn.microsoft.com/library/azure/hh403977.aspx) operación de implementación de hello, que sale de instancias de hello intactos que aún no se han actualizado y actualizar las instancias de reversión que habría sido toohello paquete de servicio anterior y la configuración.</span><span class="sxs-lookup"><span data-stu-id="26e89-267">If at some point, as you monitor hello upgrade, you note some role instances in hello first upgrade domains that you examine have become unresponsive, you can call hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on hello deployment, which will leave untouched hello instances which had not yet been upgraded and rollback instances which had been upgraded toohello previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="26e89-268">Iniciación de varias operaciones mutantes en una implementación en curso</span><span class="sxs-lookup"><span data-stu-id="26e89-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="26e89-269">En algunos casos puede que desee tooinitiate varias operaciones simultáneas de mutación en una implementación en curso.</span><span class="sxs-lookup"><span data-stu-id="26e89-269">In some cases you may want tooinitiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="26e89-270">Por ejemplo, puede realizar una actualización de servicio y, mientras que la actualización se está implantando a través de su servicio, desea toomake algún cambio, por ejemplo, tooroll Hola actualización, aplicar otra actualización o incluso eliminar la implementación de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want toomake some change, e.g. tooroll hello update back, apply a different update, or even delete hello deployment.</span></span> <span data-ttu-id="26e89-271">Un caso en el que esto podría ser necesario es si una actualización de servicio contiene código con errores que causa un bloqueo de toorepeatedly de instancia de rol actualizada.</span><span class="sxs-lookup"><span data-stu-id="26e89-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance toorepeatedly crash.</span></span> <span data-ttu-id="26e89-272">En este caso, Hola controlador de tejido de Azure no será toomake capaz de progreso en la aplicación de actualización, ya que un número insuficiente de instancias en el dominio de actualización de hello está en buen estado.</span><span class="sxs-lookup"><span data-stu-id="26e89-272">In this case, hello Azure Fabric Controller will not be able toomake progress in applying that upgrade because an insufficient number of instances in hello upgraded domain are healthy.</span></span> <span data-ttu-id="26e89-273">Este estado es tooas que se hace referencia una *implementación bloqueada*.</span><span class="sxs-lookup"><span data-stu-id="26e89-273">This state is referred tooas a *stuck deployment*.</span></span> <span data-ttu-id="26e89-274">Implementación de Hola para desbloquear revertir la actualización de Hola o aplicando una nueva actualización encima de hello producen errores en uno.</span><span class="sxs-lookup"><span data-stu-id="26e89-274">You can unstick hello deployment by rolling back hello update or applying a fresh update over top of hello failing one.</span></span>

<span data-ttu-id="26e89-275">Una vez que ha recibido el servicio de Hola de tooupdate o actualización de solicitud inicial de Hola Hola controlador de tejido de Azure, puede iniciar las operaciones de mutación posteriores.</span><span class="sxs-lookup"><span data-stu-id="26e89-275">Once hello initial request tooupdate or upgrade hello service has been received by hello Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="26e89-276">Es decir, no es necesario toowait para saludo inicial operación toocomplete antes de empezar otra operación de mutación.</span><span class="sxs-lookup"><span data-stu-id="26e89-276">That is, you do not have toowait for hello initial operation toocomplete before you can start another mutating operation.</span></span>

<span data-ttu-id="26e89-277">Iniciar una segunda operación de actualización mientras se está realizando la primera actualización de hello llevará a cabo una operación de reversión toohello similar.</span><span class="sxs-lookup"><span data-stu-id="26e89-277">Initiating a second update operation while hello first update is ongoing will perform similar toohello rollback operation.</span></span> <span data-ttu-id="26e89-278">Si Hola segunda actualización está en modo automático, Hola primer dominio de actualización se actualizará inmediatamente, lo que probablemente ocasionará tooinstances desde varios dominios de actualización estén sin conexión en hello mismo momento dado.</span><span class="sxs-lookup"><span data-stu-id="26e89-278">If hello second update is in automatic mode, hello first upgrade domain will be upgraded immediately, possibly leading tooinstances from multiple upgrade domains being offline at hello same point in time.</span></span>

<span data-ttu-id="26e89-279">Hello operaciones de mutación son las siguientes: [cambiar la configuración de implementación](https://msdn.microsoft.com/library/azure/ee460809.aspx), [actualizar implementación](https://msdn.microsoft.com/library/azure/ee460793.aspx), [estado de implementación de actualización](https://msdn.microsoft.com/library/azure/ee460808.aspx), [eliminar Implementación](https://msdn.microsoft.com/library/azure/ee460815.aspx), y [revertir actualización o actualizar](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="26e89-279">hello mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="26e89-280">Las dos operaciones, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) y [obtener propiedades del servicio de nube](https://msdn.microsoft.com/library/azure/ee460806.aspx), devuelve una marca de bloqueado Hola que puede ser examinado toodetermine si una operación de mutación se puede invocar en una implementación determinada.</span><span class="sxs-lookup"><span data-stu-id="26e89-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return hello Locked flag which can be examined toodetermine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="26e89-281">En orden toocall Hola versión de estos métodos que devuelve la marca de hello bloqueada, debe establecer el encabezado de solicitud demasiado "x-ms-version: 2011-10-01" o una posterior.</span><span class="sxs-lookup"><span data-stu-id="26e89-281">In order toocall hello version of these methods which returns hello Locked flag, you must set request header too“x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="26e89-282">Para obtener más información acerca de los encabezados de control de versiones, consulte [Control de versiones de la administración del servicio](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="26e89-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="26e89-283">Distribución de roles entre dominios de actualización</span><span class="sxs-lookup"><span data-stu-id="26e89-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="26e89-284">Azure distribuye las instancias de un rol uniformemente entre un número determinado de dominios de actualización, que se pueden configurar como parte del archivo de definición (.csdef) del servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of hello service definition (.csdef) file.</span></span> <span data-ttu-id="26e89-285">Hola número máximo de dominios de actualización es 20 y Hola predeterminado es 5.</span><span class="sxs-lookup"><span data-stu-id="26e89-285">hello max number of upgrade domains is 20 and hello default is 5.</span></span> <span data-ttu-id="26e89-286">Para obtener más información acerca de cómo toomodify Hola archivo de definición de servicio, consulte [esquema de definición de servicio de Azure (archivo de .csdef)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="26e89-286">For more information about how toomodify hello service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="26e89-287">Por ejemplo, si su rol tiene diez instancias, de forma predeterminada cada dominio de actualización contiene dos instancias.</span><span class="sxs-lookup"><span data-stu-id="26e89-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="26e89-288">Si su rol tiene 14 instancias, cuatro Hola dominios de actualización contienen tres instancias y quinto dominio contiene dos.</span><span class="sxs-lookup"><span data-stu-id="26e89-288">If your role has 14 instances, then four of hello upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="26e89-289">Dominios de actualización se identifican mediante un índice basado en cero: Hola primer dominio de actualización tiene un identificador de 0 y el segundo dominio de actualización de hello tiene un Id. de 1 y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="26e89-289">Upgrade domains are identified with a zero-based index: hello first upgrade domain has an ID of 0, and hello second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="26e89-290">Hello diagrama siguiente ilustra cómo se distribuyen un servicio que contiene dos funciones al servicio de hello define dos dominios de actualización.</span><span class="sxs-lookup"><span data-stu-id="26e89-290">hello following diagram illustrates how a service than contains two roles are distributed when hello service defines two upgrade domains.</span></span> <span data-ttu-id="26e89-291">servicio de Hello está ejecutando ocho instancias del rol web de Hola y nueve instancias de rol de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="26e89-291">hello service is running eight instances of hello web role and nine instances of hello worker role.</span></span>

<span data-ttu-id="26e89-292">![Distribución de dominios de actualización](media/cloud-services-update-azure-service/IC345533.png "Distribución de dominios de actualización")</span><span class="sxs-lookup"><span data-stu-id="26e89-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="26e89-293">Tenga en cuenta que Azure controla cómo se asignan las instancias en los dominios de actualización.</span><span class="sxs-lookup"><span data-stu-id="26e89-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="26e89-294">No es posible toospecify las instancias que se asignan toowhich dominio.</span><span class="sxs-lookup"><span data-stu-id="26e89-294">It's not possible toospecify which instances are allocated toowhich domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="26e89-295">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="26e89-295">Next steps</span></span>
[<span data-ttu-id="26e89-296">Cómo tooManage los servicios de nube</span><span class="sxs-lookup"><span data-stu-id="26e89-296">How tooManage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="26e89-297">Cómo tooMonitor los servicios de nube</span><span class="sxs-lookup"><span data-stu-id="26e89-297">How tooMonitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="26e89-298">Cómo tooConfigure los servicios de nube</span><span class="sxs-lookup"><span data-stu-id="26e89-298">How tooConfigure Cloud Services</span></span>](cloud-services-how-to-configure.md)  

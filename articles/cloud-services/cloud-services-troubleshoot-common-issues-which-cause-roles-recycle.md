---
title: hace que aaaCommon de reciclaje de roles de servicio en la nube | Documentos de Microsoft
description: Un rol del servicio en la nube que se recicla repentinamente puede causar un considerable tiempo de inactividad. Estas son algunas causas comunes que provocan toobe roles reciclada, que puede ayudar a reducir el tiempo de inactividad.
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: 8fa152b33d2b22a8a02f834d4bc38519b4272f7b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="common-issues-that-cause-roles-toorecycle"></a><span data-ttu-id="c26c1-104">Problemas comunes que hacen toorecycle de roles</span><span class="sxs-lookup"><span data-stu-id="c26c1-104">Common issues that cause roles toorecycle</span></span>
<span data-ttu-id="c26c1-105">En este artículo se describen algunas de las causas comunes de problemas de implementación de Hola y proporciona sugerencias de solución de problemas toohelp resolver estos problemas.</span><span class="sxs-lookup"><span data-stu-id="c26c1-105">This article discusses some of hello common causes of deployment problems and provides troubleshooting tips toohelp you resolve these problems.</span></span> <span data-ttu-id="c26c1-106">Una indicación de que existe un problema con una aplicación es cuando se produce un error en la instancia de rol de hello toostart, o cuando entra en los Estados de inicializar, ocupado y deteniendo Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-106">An indication that a problem exists with an application is when hello role instance fails toostart, or it cycles between hello initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="c26c1-107">Dependencias en tiempo de ejecución que faltan</span><span class="sxs-lookup"><span data-stu-id="c26c1-107">Missing runtime dependencies</span></span>
<span data-ttu-id="c26c1-108">Si un rol de la aplicación se basa en cualquier ensamblado que no forma parte del programa Hola biblioteca administrada de .NET Framework o hello Azure, debe incluir explícitamente ese ensamblado en paquete de aplicación Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-108">If a role in your application relies on any assembly that is not part of hello .NET Framework or hello Azure managed library, you must explicitly include that assembly in hello application package.</span></span> <span data-ttu-id="c26c1-109">Tenga presente que otros marcos de trabajo de Microsoft no están disponibles en Azure de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="c26c1-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="c26c1-110">Si su rol se basa en un marco de trabajo, debe agregar el paquete de la aplicación toohello de esos ensamblados.</span><span class="sxs-lookup"><span data-stu-id="c26c1-110">If your role relies on such a framework, you must add those assemblies toohello application package.</span></span>

<span data-ttu-id="c26c1-111">Antes de compilar y empaquetar la aplicación, compruebe Hola siguiente:</span><span class="sxs-lookup"><span data-stu-id="c26c1-111">Before you build and package your application, verify hello following:</span></span>

* <span data-ttu-id="c26c1-112">Si utiliza Visual studio, que seguro Hola **Copy Local** propiedad se establece demasiado**True** para cada uno de ellos al que hace referencia el ensamblado en el proyecto que no forma parte del programa Hola a Azure SDK u Hola .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="c26c1-112">If using Visual studio, make sure hello **Copy Local** property is set too**True** for each referenced assembly in your project that is not part of hello Azure SDK or hello .NET Framework.</span></span>
* <span data-ttu-id="c26c1-113">Asegúrese de que el archivo web.config de hello no hace referencia a los ensamblados no usados en el elemento de compilación de Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-113">Make sure hello web.config file does not reference any unused assemblies in hello compilation element.</span></span>
* <span data-ttu-id="c26c1-114">Hola **acción de compilación** de cada .cshtml se establece demasiado archivo**contenido**.</span><span class="sxs-lookup"><span data-stu-id="c26c1-114">hello **Build Action** of every .cshtml file is set too**Content**.</span></span> <span data-ttu-id="c26c1-115">Esto garantiza que los archivos Hola aparezcan correctamente en el paquete de Hola y permite que otros tooappear de archivos que se hace referencia en el paquete de Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-115">This ensures that hello files will appear correctly in hello package and enables other referenced files tooappear in hello package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="c26c1-116">El ensamblado tiene como destino la plataforma equivocada</span><span class="sxs-lookup"><span data-stu-id="c26c1-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="c26c1-117">Azure es un entorno de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="c26c1-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="c26c1-118">Por lo tanto, los ensamblados de .NET compilados para un destino de 32 bits no funcionarán en Azure.</span><span class="sxs-lookup"><span data-stu-id="c26c1-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="c26c1-119">El rol genera excepciones no controladas cuando se inicializa o se detiene</span><span class="sxs-lookup"><span data-stu-id="c26c1-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="c26c1-120">Las excepciones producidas por los métodos de Hola de hello [RoleEntryPoint] (clase), que incluye hello [OnStart], [OnStop], y [ejecutar]métodos, son las excepciones no controladas.</span><span class="sxs-lookup"><span data-stu-id="c26c1-120">Any exceptions that are thrown by hello methods of hello [RoleEntryPoint] class, which includes hello [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="c26c1-121">Si se produce una excepción no controlada en uno de estos métodos, se reciclará el rol de Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-121">If an unhandled exception occurs in one of these methods, hello role will recycle.</span></span> <span data-ttu-id="c26c1-122">Si el rol de Hola se recicla de forma repetida, puede producir una excepción no controlada cada vez que intente toostart.</span><span class="sxs-lookup"><span data-stu-id="c26c1-122">If hello role is recycling repeatedly, it may be throwing an unhandled exception each time it tries toostart.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="c26c1-123">El rol se devuelve del método Run</span><span class="sxs-lookup"><span data-stu-id="c26c1-123">Role returns from Run method</span></span>
<span data-ttu-id="c26c1-124">Hola [ejecutar] método está previsto toorun indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="c26c1-124">hello [Run] method is intended toorun indefinitely.</span></span> <span data-ttu-id="c26c1-125">Si el código invalida hello [ejecutar] método, debe estar en espera indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="c26c1-125">If your code overrides hello [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="c26c1-126">Si hello [ejecutar] método vuelve, Hola rol se recicla.</span><span class="sxs-lookup"><span data-stu-id="c26c1-126">If hello [Run] method returns, hello role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="c26c1-127">Configuración incorrecta de DiagnosticsConnectionString</span><span class="sxs-lookup"><span data-stu-id="c26c1-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="c26c1-128">Si la aplicación utiliza diagnóstico de Azure, el archivo de configuración de servicio debe especificar hello `DiagnosticsConnectionString` opción de configuración.</span><span class="sxs-lookup"><span data-stu-id="c26c1-128">If application uses Azure Diagnostics, your service configuration file must specify hello `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="c26c1-129">Este valor debe especificar una cuenta de almacenamiento de tooyour de conexión HTTPS en Azure.</span><span class="sxs-lookup"><span data-stu-id="c26c1-129">This setting should specify an HTTPS connection tooyour storage account in Azure.</span></span>

<span data-ttu-id="c26c1-130">tooensure que su `DiagnosticsConnectionString` configuración sea correcta antes de implementar su tooAzure de paquete de aplicación, compruebe Hola siguiente:</span><span class="sxs-lookup"><span data-stu-id="c26c1-130">tooensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package tooAzure, verify hello following:</span></span>  

* <span data-ttu-id="c26c1-131">Hola `DiagnosticsConnectionString` establecer puntos de cuenta de almacenamiento válida tooa en Azure.</span><span class="sxs-lookup"><span data-stu-id="c26c1-131">hello `DiagnosticsConnectionString` setting points tooa valid storage account in Azure.</span></span>  
  <span data-ttu-id="c26c1-132">De forma predeterminada, este valor apunta toohello emulada cuenta de almacenamiento, por lo que se debe cambiar explícitamente esta configuración antes de implementar el paquete de aplicación.</span><span class="sxs-lookup"><span data-stu-id="c26c1-132">By default, this setting points toohello emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="c26c1-133">Si no cambia esta configuración, se produce una excepción cuando trate de instancia de rol de hello toostart monitor de diagnóstico de Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-133">If you do not change this setting, an exception is thrown when hello role instance attempts toostart hello diagnostic monitor.</span></span> <span data-ttu-id="c26c1-134">Esto puede provocar toorecycle de instancia de rol de hello indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="c26c1-134">This may cause hello role instance toorecycle indefinitely.</span></span>
* <span data-ttu-id="c26c1-135">Hello especifica cadena de conexión es siguiente hello [formato](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="c26c1-135">hello connection string is specified in hello following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="c26c1-136">(el protocolo de hello debe especificarse como HTTPS). Reemplace *MyAccountName* con el nombre de saludo de la cuenta de almacenamiento y *MyAccountKey* con su clave de acceso:</span><span class="sxs-lookup"><span data-stu-id="c26c1-136">(hello protocol must be specified as HTTPS.) Replace *MyAccountName* with hello name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="c26c1-137">Si está desarrollando la aplicación con Azure Tools para Microsoft Visual Studio, puede usar tooset de páginas de propiedades de hello este valor.</span><span class="sxs-lookup"><span data-stu-id="c26c1-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use hello property pages tooset this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="c26c1-138">El certificado exportado no incluye una clave privada</span><span class="sxs-lookup"><span data-stu-id="c26c1-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="c26c1-139">toorun un rol web con SSL, debe asegurarse de que el certificado de administración exportado incluye la clave privada de Hola.</span><span class="sxs-lookup"><span data-stu-id="c26c1-139">toorun a web role under SSL, you must ensure that your exported management certificate includes hello private key.</span></span> <span data-ttu-id="c26c1-140">Si usas hello *Administrador de certificados de Windows* tooexport certificado de hello, ser seguro tooselect **Sí** para hello **clave privada de exportación hello** opción.</span><span class="sxs-lookup"><span data-stu-id="c26c1-140">If you use hello *Windows Certificate Manager* tooexport hello certificate, be sure tooselect **Yes** for hello **Export hello private key** option.</span></span> <span data-ttu-id="c26c1-141">certificado de Hello debe exportarse en formato PFX de hello, que es Hola formato solo admitida actualmente.</span><span class="sxs-lookup"><span data-stu-id="c26c1-141">hello certificate must be exported in hello PFX format, which is hello only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c26c1-142">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="c26c1-142">Next steps</span></span>
<span data-ttu-id="c26c1-143">Vea más [artículos de solución de problemas](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) para servicios en la nube.</span><span class="sxs-lookup"><span data-stu-id="c26c1-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="c26c1-144">En la [series de blogs de Kevin Williamson](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx)puede ver más escenarios de reciclaje de roles.</span><span class="sxs-lookup"><span data-stu-id="c26c1-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[ejecutar]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx

---
title: Servicios en la nube con Application Insights aaaTroubleshoot | Documentos de Microsoft
description: "Obtenga información acerca de cómo emite tootroubleshoot servicio en la nube mediante el uso de datos de Application Insights tooprocess diagnósticos de Azure."
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 972924d9e6d1fe33d5c19b006d482de52ffb0ef7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="558d3-103">Solucionar problemas de Servicios en la nube con Application Insights</span><span class="sxs-lookup"><span data-stu-id="558d3-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="558d3-104">Con [Azure SDK 2.8](https://azure.microsoft.com/downloads/) y 1.5 de extensión de diagnósticos de Azure, puede enviar datos de diagnóstico de Azure para su servicio en la nube directamente tooApplication visión.</span><span class="sxs-lookup"><span data-stu-id="558d3-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly tooApplication Insights.</span></span> <span data-ttu-id="558d3-105">Hola registros recopilados con diagnósticos de Azure&mdash;incluidos los registros de aplicaciones, los registros de eventos de Windows, registros de ETW y los contadores de rendimiento&mdash;pueden enviarse tooApplication visión.</span><span class="sxs-lookup"><span data-stu-id="558d3-105">hello logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent tooApplication Insights.</span></span> <span data-ttu-id="558d3-106">A continuación, puede visualizar esta información en el portal de Application Insights Hola interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="558d3-106">You can then visualize this information in hello Application Insights portal UI.</span></span> <span data-ttu-id="558d3-107">A continuación, puede usar Hola Application Insights SDK tooget visiones métricas y los registros que proceden de su aplicación, así como sistema de Hola y datos de nivel de infraestructura que provienen de diagnósticos de Azure.</span><span class="sxs-lookup"><span data-stu-id="558d3-107">You can then use hello Application Insights SDK tooget insights into metrics and logs that come from your application, as well as hello system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-toosend-data-tooapplication-insights"></a><span data-ttu-id="558d3-108">Configurar diagnósticos de Azure toosend datos tooApplication visión</span><span class="sxs-lookup"><span data-stu-id="558d3-108">Configure Azure Diagnostics toosend data tooApplication Insights</span></span>
<span data-ttu-id="558d3-109">Siga estos tooset de pasos de la nube servicio proyecto toosend diagnósticos de Azure datos tooApplication visión.</span><span class="sxs-lookup"><span data-stu-id="558d3-109">Follow these steps tooset up your cloud service project toosend Azure Diagnostics data tooApplication Insights.</span></span>

1. <span data-ttu-id="558d3-110">En el Explorador de soluciones de Visual Studio, haga clic en un rol y seleccione **propiedades** Diseñador de roles de tooopen Hola.</span><span class="sxs-lookup"><span data-stu-id="558d3-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** tooopen hello Role designer.</span></span>

    ![Propiedades de rol del Explorador de soluciones][1]

2. <span data-ttu-id="558d3-112">Hola **diagnósticos** sección Hola del Diseñador de roles, seleccione hello **enviar datos de diagnóstico tooApplication visión** opción.</span><span class="sxs-lookup"><span data-stu-id="558d3-112">In hello **Diagnostics** section of hello Role designer, select hello **Send diagnostics data tooApplication Insights** option.</span></span>

    ![Diseñador de roles enviar diagnósticos información sobre los datos tooapplication][2]

3. <span data-ttu-id="558d3-114">En el cuadro de diálogo de Hola que aparece, seleccione el recurso de Application Insights de Hola que desea que los datos de diagnóstico de Azure toosend Hola a.</span><span class="sxs-lookup"><span data-stu-id="558d3-114">In hello dialog box that pops up, select hello Application Insights resource that you want toosend hello Azure diagnostics data to.</span></span> <span data-ttu-id="558d3-115">cuadro de diálogo de Hello permite tooselect un recurso de Application Insights existente desde su suscripción o toomanually especificar una clave de instrumentación para un recurso de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="558d3-115">hello dialog box allows you tooselect an existing Application Insights resource from your subscription or toomanually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="558d3-116">Para más información sobre la creación de un recurso de Application Insights, consulte [Creación de recursos en Application Insights](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="558d3-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![seleccionar recurso de application insights][3]

    <span data-ttu-id="558d3-118">Cuando haya agregado el recurso de Application Insights hello, clave de instrumentación de Hola para ese recurso se almacena como un valor de configuración de servicio con el nombre de hello **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="558d3-118">Once you have added hello Application Insights resource, hello instrumentation key for that resource is stored as a service configuration setting with hello name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="558d3-119">Puede cambiar esta opción para cada configuración de servicio o de entorno.</span><span class="sxs-lookup"><span data-stu-id="558d3-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="558d3-120">toodo por lo tanto, seleccione una configuración diferente de hello **configuración del servicio** lista y especificar una nueva clave de instrumentación para dicha configuración.</span><span class="sxs-lookup"><span data-stu-id="558d3-120">toodo so, select a different configuration from hello **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![seleccionar configuración de servicio][4]

    <span data-ttu-id="558d3-122">Hola **APPINSIGHTS_INSTRUMENTATIONKEY** valor de configuración se utiliza por extensión de diagnósticos de Visual Studio tooconfigure Hola con información de recursos de Application Insights adecuada de Hola durante la publicación.</span><span class="sxs-lookup"><span data-stu-id="558d3-122">hello **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="558d3-123">valor de configuración de Hello es una manera cómoda de definir las claves de instrumentación distintos para diferentes configuraciones del servicio.</span><span class="sxs-lookup"><span data-stu-id="558d3-123">hello configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="558d3-124">Visual Studio se traduzca esa configuración e insertarlo en hello diagnósticos pública configuración de la extensión durante Hola proceso de publicación.</span><span class="sxs-lookup"><span data-stu-id="558d3-124">Visual Studio will translate that setting and insert it into hello diagnostics extension public configuration during hello publish process.</span></span> <span data-ttu-id="558d3-125">proceso de hello toosimplify de configuración de extensión de diagnósticos de hello con PowerShell, salida del paquete Hola desde Visual Studio también contiene Hola XML de configuración pública con clave de instrumentación de Application Insights adecuado de Hola.</span><span class="sxs-lookup"><span data-stu-id="558d3-125">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML with hello appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="558d3-126">archivos de configuración pública de Hola se crean en la carpeta de extensiones de Hola y seguir el patrón de hello *PaaSDiagnostics.&lt; RoleName&gt;. PubConfig.xml*.</span><span class="sxs-lookup"><span data-stu-id="558d3-126">hello public config files are created in hello Extensions folder and follow hello pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="558d3-127">Todas las implementaciones basadas en PowerShell pueden usar este patrón toomap cada rol de tooa de configuración.</span><span class="sxs-lookup"><span data-stu-id="558d3-127">Any PowerShell-based deployments can use this pattern toomap each configuration tooa role.</span></span>

4) <span data-ttu-id="558d3-128">tooconfigure diagnósticos de Azure toosend todos los registros de nivel de error y los contadores de rendimiento recopilados por hello diagnósticos de Azure agente tooApplication visión, habilitar hello **enviar datos de diagnóstico tooApplication visión** opción.</span><span class="sxs-lookup"><span data-stu-id="558d3-128">tooconfigure Azure diagnostics toosend all performance counters and error-level logs collected by hello Azure diagnostics agent tooApplication Insights, enable hello **Send diagnostics data tooApplication Insights** option.</span></span> 

    <span data-ttu-id="558d3-129">Si desea que toofurther configurar qué datos se envían información de tooApplication, debe editar manualmente hello *diagnostics.wadcfgx* archivo para cada rol.</span><span class="sxs-lookup"><span data-stu-id="558d3-129">If you want toofurther configure what data is sent tooApplication Insights, you must manually edit hello *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="558d3-130">Vea [configurar diagnósticos de Azure toosend datos tooApplication visión](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn más sobre cómo actualizar manualmente la configuración de Hola.</span><span class="sxs-lookup"><span data-stu-id="558d3-130">See [Configure Azure Diagnostics toosend data tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn more about manually updating hello configuration.</span></span>

<span data-ttu-id="558d3-131">Al servicio de nube de hello toosend configurado los diagnósticos de Azure datos tooapplication visión, puede implementarla tooAzure normalmente, asegurándose de hello extensión de diagnósticos de Azure está habilitada.</span><span class="sxs-lookup"><span data-stu-id="558d3-131">When hello cloud service is configured toosend Azure diagnostics data tooapplication insights, you can deploy it tooAzure normally, making sure hello Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="558d3-132">Para más información, consulte el artículo de [Publicación de un servicio en la nube con Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="558d3-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="558d3-133">Visualización de datos de Diagnósticos de Azure en Application Insights</span><span class="sxs-lookup"><span data-stu-id="558d3-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="558d3-134">Hola telemetría de diagnóstico de Azure se muestra en hello Application Insights recurso configurado para el servicio de nube.</span><span class="sxs-lookup"><span data-stu-id="558d3-134">hello Azure diagnostic telemetry shows up in hello Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="558d3-135">Tipos de registro de diagnósticos de Azure asignan conceptos de visión tooApplication de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="558d3-135">Azure diagnostics log types map tooApplication Insights concepts in these ways:</span></span>

* <span data-ttu-id="558d3-136">Los contadores de rendimiento se muestran como métricas personalizadas en Application Insights.</span><span class="sxs-lookup"><span data-stu-id="558d3-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="558d3-137">Los registros de eventos de Windows se muestran como seguimientos y eventos personalizados en Application Insights.</span><span class="sxs-lookup"><span data-stu-id="558d3-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="558d3-138">Los registros de aplicación, los registros de ETW y los registros de infraestructura de diagnóstico se muestran como seguimientos en Application Insights.</span><span class="sxs-lookup"><span data-stu-id="558d3-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="558d3-139">tooview datos de diagnóstico de Azure en Application Insights, siga uno de los procedimientos de hello:</span><span class="sxs-lookup"><span data-stu-id="558d3-139">tooview Azure diagnostics data in Application Insights, do one of hello following:</span></span>

* <span data-ttu-id="558d3-140">Use [explorer métricas](../application-insights/app-insights-metrics-explorer.md) toovisualize cualquier rendimiento personalizados contadores o los recuentos de diferentes tipos de eventos de registro de eventos de Windows.</span><span class="sxs-lookup"><span data-stu-id="558d3-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Métricas personalizadas en el Explorador de métricas][5]

* <span data-ttu-id="558d3-142">Use [búsqueda](../application-insights/app-insights-diagnostic-search.md) toosearch a través de los registros de seguimiento de hello enviados por diagnósticos de Azure.</span><span class="sxs-lookup"><span data-stu-id="558d3-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) toosearch across hello  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="558d3-143">Por ejemplo, si ha provocado una excepción no controlada Hola rol toocrash y reciclaje, obtener información acerca de la excepción de Hola aparecerá en hello *aplicación* canal de *registro de eventos de Windows*.</span><span class="sxs-lookup"><span data-stu-id="558d3-143">For example, if an unhandled exception has caused hello role toocrash and recycle, information about hello exception shows up in hello *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="558d3-144">Puede usar búsqueda toolook en hello error de registro de eventos de Windows y realizar seguimiento de pila completo de Hola para hello excepción toohelp buscar Hola causa del problema de Hola.</span><span class="sxs-lookup"><span data-stu-id="558d3-144">You can use search toolook at hello Windows Event Log error and get hello full stack trace for hello exception toohelp find hello cause of hello issue.</span></span>

    ![Buscar seguimientos][6]

## <a name="next-steps"></a><span data-ttu-id="558d3-146">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="558d3-146">Next Steps</span></span>
* <span data-ttu-id="558d3-147">[Agregar servicio de nube de hello Application Insights SDK tooyour](../application-insights/app-insights-cloudservices.md) toosend datos acerca de las solicitudes, excepciones, las dependencias y cualquier telemetría personalizada de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="558d3-147">[Add hello Application Insights SDK tooyour cloud service](../application-insights/app-insights-cloudservices.md) toosend data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="558d3-148">Cuando se combina con datos de diagnóstico de Azure de hello, esta información se puede obtener una vista completa de la aplicación y del sistema, todo ello en Hola mismo recurso de Application Insight.</span><span class="sxs-lookup"><span data-stu-id="558d3-148">When combined with hello Azure Diagnostics data, this information you can get a complete view of your application and system, all in hello same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png

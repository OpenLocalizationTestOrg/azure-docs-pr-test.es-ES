---
title: "Azure Active Directory Domain Services: Habilitación de la delegación restringida de kerberos | Microsoft Docs"
description: "En este artículo se explica cómo habilitar la delegación restringida de kerberos en dominios administrados de Azure Active Directory Domain Services."
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: d32547c8018dd1f99c992e95a01d2711d460a261
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="af01a-103">Configuración de la delegación restringida de kerberos (KCD) en un dominio administrado</span><span class="sxs-lookup"><span data-stu-id="af01a-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="af01a-104">Muchas aplicaciones necesitan recursos tooaccess en contexto de saludo del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="af01a-104">Many applications need tooaccess resources in hello context of hello user.</span></span> <span data-ttu-id="af01a-105">Active Directory admite un mecanismo denominado "delegación de kerberos", que posibilita este caso de uso.</span><span class="sxs-lookup"><span data-stu-id="af01a-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="af01a-106">Además, puede restringir la delegación para que sólo recursos específicos son accesibles en el contexto de Hola de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="af01a-106">Further, you can restrict delegation so that only specific resources can be accessed in hello context of hello user.</span></span> <span data-ttu-id="af01a-107">Los dominios administrados de Azure AD Domain Services son diferentes de los tradicionales de Active Directory, puesto que se bloquean de forma más segura.</span><span class="sxs-lookup"><span data-stu-id="af01a-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="af01a-108">Este artículo muestra cómo tooconfigure kerberos había restringida la delegación en un dominio administrado de los servicios de dominio de AD de Azure.</span><span class="sxs-lookup"><span data-stu-id="af01a-108">This article shows you how tooconfigure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="af01a-109">Delegación restringida de kerberos (KCD)</span><span class="sxs-lookup"><span data-stu-id="af01a-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="af01a-110">La delegación de Kerberos permite una tooimpersonate cuenta recursos de tooaccess principal (por ejemplo, un usuario) de seguridad de otro.</span><span class="sxs-lookup"><span data-stu-id="af01a-110">Kerberos delegation enables an account tooimpersonate another security principal (such as a user) tooaccess resources.</span></span> <span data-ttu-id="af01a-111">Considere la posibilidad de una aplicación web que tiene acceso a una API de back-end web en el contexto de Hola de un usuario.</span><span class="sxs-lookup"><span data-stu-id="af01a-111">Consider a web application that accesses a back-end web API in hello context of a user.</span></span> <span data-ttu-id="af01a-112">En este ejemplo, hello aplicación web (que se ejecuta en el contexto de Hola de una cuenta de servicio o una cuenta de equipo) suplanta a Hola usuario al tener acceso a recursos de hello (API de back-end web).</span><span class="sxs-lookup"><span data-stu-id="af01a-112">In this example, hello web application (running in hello context of a service account or a computer/machine account) impersonates hello user when accessing hello resource (back-end web API).</span></span> <span data-ttu-id="af01a-113">La delegación de Kerberos es insegura porque no restringe Hola Hola recursos suplantando la cuenta puede tener acceso a en contexto de saludo del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="af01a-113">Kerberos delegation is insecure since it does not restrict hello resources hello impersonating account can access in hello context of hello user.</span></span>

<span data-ttu-id="af01a-114">Delegación limitada de Kerberos (KCD) restringe Hola servidor especificado de servicios y recursos toowhich Hola puede actuar en nombre de Hola de un usuario.</span><span class="sxs-lookup"><span data-stu-id="af01a-114">Kerberos constrained delegation (KCD) restricts hello services/resources toowhich hello specified server can act on hello behalf of a user.</span></span> <span data-ttu-id="af01a-115">KCD tradicionales requiere tooconfigure de privilegios de administrador de dominio una cuenta de dominio para un servicio y restringe tooa único dominio de cuenta de hello.</span><span class="sxs-lookup"><span data-stu-id="af01a-115">Traditional KCD requires domain administrator privileges tooconfigure a domain account for a service and it restricts hello account tooa single domain.</span></span>

<span data-ttu-id="af01a-116">Asimismo, tiene algunos problemas inherentes.</span><span class="sxs-lookup"><span data-stu-id="af01a-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="af01a-117">En versiones anteriores del sistema operativo donde el administrador del dominio de hello configurado servicio Hola, Administrador de servicios de Hola no tenía ningún tooknow de manera útil qué servicios front-end delegada toohello servicios de recurso que poseían.</span><span class="sxs-lookup"><span data-stu-id="af01a-117">In earlier operating systems where hello domain administrator configured hello service, hello service administrator had no useful way tooknow which front-end services delegated toohello resource services they owned.</span></span> <span data-ttu-id="af01a-118">Y cualquier servicio front-end que podía delegar tooa el servicio de recursos representaba un punto de ataque potencial.</span><span class="sxs-lookup"><span data-stu-id="af01a-118">And any front-end service that could delegate tooa resource service represented a potential attack point.</span></span> <span data-ttu-id="af01a-119">Si se pone en peligro un servidor que hospeda un servicio front-end y estaba configurado toodelegate tooresource services, servicios de recurso de hello también podían verse comprometidos.</span><span class="sxs-lookup"><span data-stu-id="af01a-119">If a server that hosted a front-end service was compromised, and it was configured toodelegate tooresource services, hello resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="af01a-120">En un dominio administrado de Azure AD Domain Services, no tiene privilegios de administrador de dominios.</span><span class="sxs-lookup"><span data-stu-id="af01a-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="af01a-121">Por lo tanto, **la KCD tradicional no se puede configurar en un dominio administrado**.</span><span class="sxs-lookup"><span data-stu-id="af01a-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="af01a-122">Use la KCD basada en recursos, como se describe en este artículo.</span><span class="sxs-lookup"><span data-stu-id="af01a-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="af01a-123">Este mecanismo también es más seguro.</span><span class="sxs-lookup"><span data-stu-id="af01a-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="af01a-124">Delegación restringida de kerberos basada en recursos</span><span class="sxs-lookup"><span data-stu-id="af01a-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="af01a-125">En Windows Server 2012 R2 y Windows Server 2012, se ha transferido delegación de hello capacidad tooconfigure limitada para servicio de Hola desde Administrador de servicios de toohello de administrador de dominio de Hola.</span><span class="sxs-lookup"><span data-stu-id="af01a-125">In Windows Server 2012 R2 and Windows Server 2012, hello ability tooconfigure constrained delegation for hello service has been transferred from hello domain administrator toohello service administrator.</span></span> <span data-ttu-id="af01a-126">De esta manera, el administrador del servicio back-end de hello puede permitir o denegar servicios front-end.</span><span class="sxs-lookup"><span data-stu-id="af01a-126">In this way, hello back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="af01a-127">Este modelo se conoce como **delegación restringida de kerberos basada en recursos**.</span><span class="sxs-lookup"><span data-stu-id="af01a-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="af01a-128">La KCD basada en recursos se configura mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="af01a-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="af01a-129">Usar Set-ADComputer de Hola o los cmdlets Set-ADUser, dependiendo de si Hola suplantando la cuenta es una cuenta de equipo o una cuenta de servicio o cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="af01a-129">You use hello Set-ADComputer or Set-ADUser cmdlets, depending on whether hello impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="af01a-130">Configuración de la KCD basada en recursos para una cuenta de equipo de un dominio administrado</span><span class="sxs-lookup"><span data-stu-id="af01a-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="af01a-131">Suponga que tiene una aplicación web que se ejecuta en el equipo de hello ' contoso100-webapp.contoso100.com'.</span><span class="sxs-lookup"><span data-stu-id="af01a-131">Assume you have a web app running on hello computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="af01a-132">Necesita recursos de hello tooaccess (una API web que se ejecutan en ' contoso100-api.contoso100.com') en el contexto de Hola de usuarios del dominio.</span><span class="sxs-lookup"><span data-stu-id="af01a-132">It needs tooaccess hello resource (a web API running on 'contoso100-api.contoso100.com') in hello context of domain users.</span></span> <span data-ttu-id="af01a-133">Este es el procedimiento para configurar la KCD basada en recursos para este escenario.</span><span class="sxs-lookup"><span data-stu-id="af01a-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="af01a-134">Configuración de la KCD basada en recursos para una cuenta de usuario de un dominio administrado</span><span class="sxs-lookup"><span data-stu-id="af01a-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="af01a-135">Suponga que tiene una aplicación web que se ejecuta como una cuenta de servicio 'appsvc' y necesita recursos de hello tooaccess (una API web que se ejecuta como una cuenta de servicio: 'backendsvc') en el contexto de Hola de usuarios del dominio.</span><span class="sxs-lookup"><span data-stu-id="af01a-135">Assume you have a web app running as a service account 'appsvc' and it needs tooaccess hello resource (a web API running as a service account - 'backendsvc') in hello context of domain users.</span></span> <span data-ttu-id="af01a-136">Este es el procedimiento para configurar la KCD basada en recursos para este escenario.</span><span class="sxs-lookup"><span data-stu-id="af01a-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="af01a-137">Contenido relacionado</span><span class="sxs-lookup"><span data-stu-id="af01a-137">Related Content</span></span>
* [<span data-ttu-id="af01a-138">Introducción a Azure AD Domain Services</span><span class="sxs-lookup"><span data-stu-id="af01a-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="af01a-139">Introducción a la delegación limitada de kerberos</span><span class="sxs-lookup"><span data-stu-id="af01a-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)

---
title: "Migrar las redes virtuales asociado de ExpressRoute de tooResource clásico Manager: Azure: PowerShell | Documentos de Microsoft"
description: "Esta página describe cómo toomigrate había asociado redes virtuales tooResource Manager después de mover el circuito."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="444aa-103">Migrar las redes virtuales asociado de ExpressRoute de tooResource clásico Manager</span><span class="sxs-lookup"><span data-stu-id="444aa-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="444aa-104">Este artículo explica cómo toomigrate ExpressRoute de Azure había asociado redes virtuales de modelo de implementación de Azure Resource Manager de toohello modelo de implementación clásica de hello después de mover el circuito de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="444aa-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="444aa-105">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="444aa-105">Before you begin</span></span>
* <span data-ttu-id="444aa-106">Compruebe que dispone de versión más reciente de Hola de módulos de PowerShell de Azure de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="444aa-107">Para obtener más información, consulte [cómo tooinstall y configurar Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="444aa-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="444aa-108">Asegúrese de que ha revisado hello [requisitos previos](expressroute-prerequisites.md), [requisitos de enrutamiento](expressroute-routing.md), y [flujos de trabajo](expressroute-workflows.md) antes de comenzar la configuración.</span><span class="sxs-lookup"><span data-stu-id="444aa-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="444aa-109">Revise la información de Hola que se proporciona en [mover un circuito de ExpressRoute de tooResource clásico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="444aa-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="444aa-110">Asegúrese de que entiende totalmente Hola límites y limitaciones.</span><span class="sxs-lookup"><span data-stu-id="444aa-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="444aa-111">Compruebe que el circuito de hello es totalmente operativo en el modelo de implementación clásica de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="444aa-112">Asegúrese de que tiene un grupo de recursos que se creó en el modelo de implementación del Administrador de recursos de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="444aa-113">Revisar Hola siguiendo documentación de migración del recurso:</span><span class="sxs-lookup"><span data-stu-id="444aa-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="444aa-114">Migración admitida por la plataforma de recursos de IaaS de tooAzure clásico Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="444aa-115">Técnica de fondo admitida por la plataforma de migración de clásico tooAzure el Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="444aa-116">Preguntas más frecuentes: Admitida por la plataforma de migración de los recursos de IaaS de tooAzure clásico Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="444aa-117">Revisión de los errores y mitigaciones más comunes en la migración</span><span class="sxs-lookup"><span data-stu-id="444aa-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="444aa-118">Escenarios admitidos y no admitidos</span><span class="sxs-lookup"><span data-stu-id="444aa-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="444aa-119">Un circuito ExpressRoute puede mover desde el entorno de administrador de recursos de hello toohello clásico sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="444aa-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="444aa-120">Puede mover cualquier circuito de ExpressRoute de hello clásico toohello entorno de administrador de recursos sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="444aa-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="444aa-121">Siga las instrucciones de hello en [mover circuitos ExpressRoute de modelo de implementación de administrador de recursos hello toohello clásico mediante PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="444aa-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="444aa-122">Se trata de una red virtual de requisitos previos toomove recursos toohello conectado.</span><span class="sxs-lookup"><span data-stu-id="444aa-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="444aa-123">Redes virtuales, puertas de enlace y las implementaciones asociadas dentro de la red virtual de Hola que están conectado tooan circuito de ExpressRoute en hello puede ser la misma suscripción migran toohello entorno de administrador de recursos sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="444aa-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="444aa-124">Puede seguir Hola pasos se describe más adelante toomigrate recursos tales como redes virtuales, las puertas de enlace y máquinas virtuales implementadas dentro de la red virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="444aa-125">Debe asegurarse de que las redes virtuales Hola estén configuradas correctamente antes de su migración.</span><span class="sxs-lookup"><span data-stu-id="444aa-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="444aa-126">Redes virtuales, las puertas de enlace e implementaciones asociadas dentro de la red virtual de Hola que no están en Hola misma suscripción como Hola circuito ExpressRoute requieren algunos migración de hello toocomplete de tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="444aa-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="444aa-127">Hola última sección de hello documento describe Hola pasos toobe seguido toomigrate recursos.</span><span class="sxs-lookup"><span data-stu-id="444aa-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="444aa-128">No se puede migrar una red virtual con la puerta de enlace de ExpressRoute y VPN Gateway.</span><span class="sxs-lookup"><span data-stu-id="444aa-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="444aa-129">Mover un circuito de ExpressRoute de tooResource clásico Manager</span><span class="sxs-lookup"><span data-stu-id="444aa-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="444aa-130">Debe mover un circuito de ExpressRoute de hello clásico toohello entorno de administrador de recursos antes de intentar toomigrate recursos que están conectados toohello circuito de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="444aa-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="444aa-131">tooaccomplish esta tarea, vea Hola siguientes artículos:</span><span class="sxs-lookup"><span data-stu-id="444aa-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="444aa-132">Revise la información de Hola que se proporciona en [mover un circuito de ExpressRoute de tooResource clásico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="444aa-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="444aa-133">[Mover un circuito de tooResource clásico administrador mediante Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="444aa-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="444aa-134">Usar el portal de administración de servicios de Azure de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="444aa-135">Puede seguir el flujo de trabajo de hello demasiado[crear un nuevo circuito de ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) y seleccione la opción de importación de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="444aa-136">Esta operación no requiere tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="444aa-136">This operation does not involve downtime.</span></span> <span data-ttu-id="444aa-137">Puede continuar tootransfer datos entre las instalaciones locales y Microsoft mientras la migración de hello está en curso.</span><span class="sxs-lookup"><span data-stu-id="444aa-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="444aa-138">Migración de redes virtuales, puertas de enlace e implementaciones asociadas</span><span class="sxs-lookup"><span data-stu-id="444aa-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="444aa-139">Hello pasos que seguir toomigrate dependen de si los recursos están en hello misma suscripción, distintas suscripciones o ambos.</span><span class="sxs-lookup"><span data-stu-id="444aa-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="444aa-140">Migrar las redes virtuales, las puertas de enlace, y las implementaciones asociadas en Hola misma suscripción como Hola circuito de ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="444aa-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="444aa-141">Esta sección describen Hola pasos toobe seguido toomigrate una red virtual, puerta de enlace y las implementaciones asociadas en Hola misma suscripción como Hola circuito de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="444aa-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="444aa-142">No hay tiempo de inactividad asociado a esta migración.</span><span class="sxs-lookup"><span data-stu-id="444aa-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="444aa-143">Puede continuar toouse todos los recursos a través del proceso de migración de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="444aa-144">plano de administración de Hola se bloquea mientras la migración de hello está en curso.</span><span class="sxs-lookup"><span data-stu-id="444aa-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="444aa-145">Asegúrese de que se ha movido el circuito de ExpressRoute de hello del entorno de administrador de recursos de hello toohello clásico.</span><span class="sxs-lookup"><span data-stu-id="444aa-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="444aa-146">Asegúrese de que red virtual Hola se preparó correctamente para la migración de Hola.</span><span class="sxs-lookup"><span data-stu-id="444aa-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="444aa-147">Registre la suscripción para la migración de recursos.</span><span class="sxs-lookup"><span data-stu-id="444aa-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="444aa-148">tooregister su suscripción para la migración de recursos, Hola de uso siguiente fragmento de código de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="444aa-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="444aa-149">Valide, prepare y migre.</span><span class="sxs-lookup"><span data-stu-id="444aa-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="444aa-150">toomove Hola red virtual, Hola de uso siguiente fragmento de código de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="444aa-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="444aa-151">También puede anular la migración mediante la ejecución de hello siguiente cmdlet de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="444aa-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="444aa-152">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="444aa-152">Next steps</span></span>
* [<span data-ttu-id="444aa-153">Migración admitida por la plataforma de recursos de IaaS de tooAzure clásico Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="444aa-154">Técnica de fondo admitida por la plataforma de migración de clásico tooAzure el Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="444aa-155">Preguntas más frecuentes: Admitida por la plataforma de migración de los recursos de IaaS de tooAzure clásico Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="444aa-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="444aa-156">Revisión de los errores y mitigaciones más comunes en la migración</span><span class="sxs-lookup"><span data-stu-id="444aa-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

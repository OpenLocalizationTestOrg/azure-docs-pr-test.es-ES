---
title: "aaaHow tooconfigure Redis agrupación en clústeres para una caché en Redis de Azure Premium | Documentos de Microsoft"
description: "Obtenga información acerca de cómo toocreate y administrar instancias de caché en Redis de Azure de clústeres para el nivel Premium de Redis"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="dd2c7-103">¿Cómo tooconfigure Redis agrupación en clústeres para una caché en Redis de Azure Premium</span><span class="sxs-lookup"><span data-stu-id="dd2c7-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="dd2c7-104">Caché en Redis de Azure tiene diferentes ofertas de caché, lo que proporciona flexibilidad en la elección de Hola de tamaño de caché y las características, incluidas las características de nivel Premium como de agrupación en clústeres, la persistencia y la compatibilidad de red virtual.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="dd2c7-105">Este artículo describe cómo tooconfigure agrupación en clústeres en una prima Redis de Azure caché de instancia.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="dd2c7-106">Para obtener información sobre otras características de caché premium, consulte [nivel Premium de caché de Redis de Azure de introducción toohello](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="dd2c7-107">¿Qué es Clúster Redis?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-107">What is Redis Cluster?</span></span>
<span data-ttu-id="dd2c7-108">Caché en Redis de Azure ofrece clúster de Redis como [implementado en Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="dd2c7-109">Con clúster de Redis, obtendrá Hola siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="dd2c7-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="dd2c7-110">Hola tooautomatically capacidad dividir el conjunto de datos entre varios nodos.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="dd2c7-111">Hola capacidad toocontinue operaciones cuando un subconjunto de nodos de hello es experimentando errores o no se puede toocommunicate con el resto de Hola de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="dd2c7-112">Más rendimiento: rendimiento aumenta linealmente a medida que aumente el número de Hola de particiones.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="dd2c7-113">Aumentar el tamaño de memoria: aumenta linealmente a medida que aumente el número de Hola de particiones.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="dd2c7-114">Para obtener información sobre el tamaño, el rendimiento y el ancho de banda con memorias caché premium, vea [¿Qué oferta y tamaño de Caché en Redis debo utilizar?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="dd2c7-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="dd2c7-115">En Azure, se ofrece Redis clúster como un modelo de réplica principal donde cada partición tiene un par de réplica principal con la replicación donde se administra la replicación de Hola por el servicio de caché de Redis de Azure.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="dd2c7-116">Agrupación en clústeres</span><span class="sxs-lookup"><span data-stu-id="dd2c7-116">Clustering</span></span>
<span data-ttu-id="dd2c7-117">Agrupación en clústeres está habilitada en hello **nueva caché en Redis** hoja durante la creación de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="dd2c7-118">Agrupación en clústeres se configura en hello **Redis clúster** hoja.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Agrupación en clústeres][redis-cache-clustering]

<span data-ttu-id="dd2c7-120">Puede tener hasta too10 particiones en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="dd2c7-121">Haga clic en **habilitado** y deslice el control deslizante de Hola o escriba un número entre 1 y 10 para **número de particiones** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="dd2c7-122">Cada partición es un par de caché de la réplica principal administrado por Azure y tamaño total de Hola de caché de Hola se calcula multiplicando el número de Hola de particiones por tamaño de caché de hello seleccionado en el nivel de precios de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Agrupación en clústeres][redis-cache-clustering-selected]

<span data-ttu-id="dd2c7-124">Una vez que se crea una caché Hola conectarse tooit y usar simplemente como una memoria caché no agrupado y Redis distribuye los datos de Hola a lo largo de particiones de memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="dd2c7-125">Si diagnósticos es [habilitado](cache-how-to-monitor.md#enable-cache-diagnostics), las métricas capturadas por separado para cada partición y puede ser [ver](cache-how-to-monitor.md) en hello caché en Redis hoja.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="dd2c7-126">Hay algunas diferencias menores necesarias en la aplicación cliente cuando se configura la agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="dd2c7-127">Para obtener más información, vea [¿necesito toomake cualquier toouse de aplicación de cliente de cambios toomy de agrupación en clústeres?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="dd2c7-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="dd2c7-128">Para el código de ejemplo sobre cómo trabajar con la agrupación en clústeres con cliente de StackExchange.Redis hello, vea hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte de hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) ejemplo.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="dd2c7-129">Cambiar el tamaño de clúster de hello en un ejecución caché premium</span><span class="sxs-lookup"><span data-stu-id="dd2c7-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="dd2c7-130">tamaño del clúster de hello toochange en una ejecución premium almacenar en memoria caché con un clic habilitado, agrupación en clústeres **Redis tamaño del clúster** de hello **menú recursos**.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="dd2c7-131">Mientras hello Azure Redis caché Premium nivel ha sido liberado tooGeneral disponibilidad, característica de tamaño de clúster Redis Hola está actualmente en vista previa.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Tamaño del Clúster en Redis][redis-cache-redis-cluster-size]

<span data-ttu-id="dd2c7-133">tamaño de clúster de toochange hello, utilice el control deslizante de Hola o escriba un número entre 1 y 10 en hello **número de particiones** cuadro de texto y haga clic en **Aceptar** toosave.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="dd2c7-134">Ajuste de escala en un clúster ejecuta hello [migrar](https://redis.io/commands/migrate) comando, que es un comando costoso, por lo que para minimizar el impacto, considere la posibilidad de realizar esta operación durante horas de poca actividad.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="dd2c7-135">Durante el proceso de migración de hello, verá un pico de carga del servidor.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="dd2c7-136">Ajuste de escala en un clúster tiene un valor largo proceso y cantidad de Hola de tiempo que se tarda depende Hola número de claves y el tamaño de los valores de hello asociados a esas claves.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="dd2c7-137">P+F de agrupación en clústeres</span><span class="sxs-lookup"><span data-stu-id="dd2c7-137">Clustering FAQ</span></span>
<span data-ttu-id="dd2c7-138">Hello lista siguiente contiene toocommonly respuestas preguntas más frecuentes acerca de los clústeres de caché en Redis de Azure.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="dd2c7-139">¿Es necesario toomake cualquier toouse de aplicación de cliente de cambios toomy de agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="dd2c7-140">¿Cómo se distribuyen las claves en un clúster?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="dd2c7-141">¿Cuál es el mayor tamaño de caché Hola que puedo crear?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="dd2c7-142">¿Todos los clientes de Redis admiten la agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="dd2c7-143">¿Cómo conecto toomy caché cuando se habilita la agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="dd2c7-144">¿Puedo conectar directamente toohello particiones individuales de la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="dd2c7-145">¿Puedo configurar la agrupación en clústeres para una memoria caché creada anteriormente?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="dd2c7-146">¿Puedo configurar la agrupación en clústeres para una caché básica o estándar?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="dd2c7-147">¿Puedo usar la agrupación en clústeres con proveedores de estado de sesión de ASP.NET de Redis y almacenamiento en caché de salida de hello?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="dd2c7-148">Estoy recibiendo excepciones MOVE al usar StackExchange.Redis y agrupaciones en clústeres, ¿qué debo hacer?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="dd2c7-149">¿Es necesario toomake cualquier toouse de aplicación de cliente de cambios toomy de agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="dd2c7-150">Cuando la agrupación en clústeres está habilitada, solo está disponible la base de datos 0.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="dd2c7-151">Si la aplicación cliente usa varias bases de datos e intenta tooread escritura tooa base de datos o distinto de 0, hello siguiente excepción se produce.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="dd2c7-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->``StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="dd2c7-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="dd2c7-153">Para obtener más información, consulte [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset)(Especificación de clúster en Redis: subconjunto implementado).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="dd2c7-154">Si usa [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), debe usar la versión 1.0.481 o posterior.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="dd2c7-155">Conectar toohello caché usando Hola mismo [puntos de conexión, los puertos y las claves](cache-configure.md#properties) que usar cuando se conecta la memoria caché de tooa que no tiene habilitado de agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="dd2c7-156">Hola única diferencia es que todas las lecturas y escrituras deben hacerse toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="dd2c7-157">Otros clientes pueden tener requisitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-157">Other clients may have different requirements.</span></span> <span data-ttu-id="dd2c7-158">Vea [¿Todos los clientes de Redis admiten la agrupación en clústeres?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="dd2c7-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="dd2c7-159">Si la aplicación usa varias operaciones claves por lotes en un único comando, todas las claves deben estar ubicadas en hello misma partición.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="dd2c7-160">¿las claves de toolocate en Hola la misma partición, vea [cómo se distribuyen las claves en un clúster?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="dd2c7-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="dd2c7-161">Si está usando el proveedor de estado de sesión de ASP.NET de Redis, debe usar 2.0.1 o posterior.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="dd2c7-162">¿Vea [puedo usar clústeres con proveedores de estado de sesión de ASP.NET de Redis y almacenamiento en caché de salida de hello?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="dd2c7-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="dd2c7-163">¿Cómo se distribuyen las claves en un clúster?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="dd2c7-164">Por hello Redis [modelo de distribución de claves](http://redis.io/topics/cluster-spec#keys-distribution-model) documentación: espacio de claves de Hola se divide en las ranuras de 16384.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="dd2c7-165">Cada clave se aplica un algoritmo hash y asigna tooone de estas zonas, que se distribuyen en hello nodos de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="dd2c7-166">Puede configurar qué parte de la clave de hello es tooensure con algoritmo hash que se encuentran varias claves en Hola misma partición mediante etiquetas de hash.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="dd2c7-167">Claves con una etiqueta de hash: si se incluye a cualquier parte de la clave de hello en `{` y `}`, se aplica un algoritmo hash sólo esa parte de la clave de Hola para fines de Hola de determinar la ranura de hash de Hola de una clave.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="dd2c7-168">Por ejemplo, hello siguientes 3 claves debería encontrarse en hello misma partición: `{key}1`, `{key}2`, y `{key}3` desde sólo hello `key` parte del nombre de Hola se aplica un algoritmo hash.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="dd2c7-169">Para obtener una lista completa de especificaciones de etiquetas hash de claves, consulte [Etiquetas hash de claves](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="dd2c7-170">Claves sin una etiqueta de hash: nombre de clave completo de Hola se utiliza para crear valores hash.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="dd2c7-171">Esto produce una distribución uniforme estadísticamente entre las particiones de Hola de caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="dd2c7-172">Para optimizar el rendimiento y el rendimiento, se recomienda distribuir las claves de hello uniformemente.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="dd2c7-173">Si usa claves con una etiqueta de hash es que las claves de la aplicación hello responsabilidad tooensure Hola se distribuyen uniformemente.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="dd2c7-174">Para obtener más información, consulte [Modelo de distribución de claves](http://redis.io/topics/cluster-spec#keys-distribution-model), [Particionamiento de datos de clúster Redis](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding) y [Etiquetas hash de claves](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="dd2c7-175">Para el código de ejemplo sobre cómo trabajar con la agrupación en clústeres y buscar las claves en hello mismo particionamiento con cliente de StackExchange.Redis hello, vea hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte de hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) ejemplo.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="dd2c7-176">¿Cuál es el mayor tamaño de caché Hola que puedo crear?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="dd2c7-177">tamaño de caché premium más grande de Hello es 53 GB.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="dd2c7-178">Puede crear hasta particiones too10 ofrecerle un tamaño máximo de 530 GB.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="dd2c7-179">Si necesita un tamaño mayor, puede [solicitar más](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="dd2c7-180">Para obtener más información, consulte [Precios de Caché en Redis de Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="dd2c7-181">¿Todos los clientes de Redis admiten la agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="dd2c7-182">En hello no todos los clientes admiten la hora actual Redis agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="dd2c7-183">StackExchange.Redis es uno de los que los admiten.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="dd2c7-184">Para obtener más información sobre otros clientes, consulte hello [jugando con clúster de hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) sección de hello [tutorial de clúster de Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="dd2c7-185">Si está utilizando StackExchange.Redis como el cliente, asegúrese de que usa la versión más reciente de Hola de [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 o una versión posterior de agrupación en clústeres toowork correctamente.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="dd2c7-186">Si tiene problemas con las excepciones move, consulte la explicación sobre [excepciones move](#move-exceptions) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="dd2c7-187">¿Cómo conecto toomy caché cuando se habilita la agrupación en clústeres?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="dd2c7-188">Puede conectarse tooyour caché usando Hola mismo [extremos](cache-configure.md#properties), [puertos](cache-configure.md#properties), y [claves](cache-configure.md#access-keys) que usar cuando se conecta la memoria caché de tooa que no tiene habilitado de agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="dd2c7-189">Redis administra Hola agrupación en clústeres en hello back-end para que no tenga toomanage desde el cliente.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="dd2c7-190">¿Puedo conectar directamente toohello particiones individuales de la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="dd2c7-191">Esto no se admite oficialmente.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-191">This is not officially supported.</span></span> <span data-ttu-id="dd2c7-192">Dicho esto, cada partición consta de un par de caché principal/réplica que se conoce colectivamente como una instancia de caché.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="dd2c7-193">Puede conectar toothese instancias de caché mediante la utilidad de redis cli de Hola Hola [inestable](http://redis.io/download) rama del repositorio de Redis hello en GitHub.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="dd2c7-194">Esta versión implementa la compatibilidad básica cuando se inició con hello `-c` cambiar.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="dd2c7-195">Para obtener más información, consulte [jugando con clúster de hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) en [http://redis.io](http://redis.io) en hello [tutorial de clúster de Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="dd2c7-196">Para no ssl, use Hola siga los comandos.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="dd2c7-197">Para ssl, reemplace `1300N` por `1500N`.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="dd2c7-198">¿Puedo configurar la agrupación en clústeres para una memoria caché creada anteriormente?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="dd2c7-199">En este momento solo puede habilitar la agrupación en clústeres cuando cree una memoria caché.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="dd2c7-200">Puede cambiar el tamaño del clúster Hola después de que se crea una caché hello, pero no se puede agregar memoria caché premium de agrupación en clústeres tooa o quitar el clúster de una caché premium después de que se crea una caché Hola.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="dd2c7-201">Una caché premium con clústeres habilitado y solo una partición es diferente de una caché premium de hello mismo tamaño con ninguna agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="dd2c7-202">¿Puedo configurar la agrupación en clústeres para una caché básica o estándar?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="dd2c7-203">La agrupación en clústeres solo está disponible para las memorias cachés premium.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="dd2c7-204">¿Puedo usar la agrupación en clústeres con proveedores de estado de sesión de ASP.NET de Redis y almacenamiento en caché de salida de hello?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="dd2c7-205">**Proveedor de caché de salida de Redis** : no se requieren cambios.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="dd2c7-206">**Proveedor de estado de sesión de Redis** -toouse agrupación en clústeres, debe usar [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 o superior o una excepción se produce.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="dd2c7-207">Este es un cambio importante. Para obtener más información, consulte [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details) (Detalles sobre cambios importantes de la versión 2.0.0).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="dd2c7-208">Estoy recibiendo excepciones MOVE al usar StackExchange.Redis y agrupaciones en clústeres, ¿qué debo hacer?</span><span class="sxs-lookup"><span data-stu-id="dd2c7-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="dd2c7-209">Si utiliza StackExchange.Redis y recibe `MOVE` excepciones al emplear agrupaciones en clústeres, asegúrese de que está utilizando la versión [1.1.603 de StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) o posterior.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="dd2c7-210">Para obtener instrucciones acerca de cómo configurar su toouse de las aplicaciones de .NET StackExchange.Redis, consulte [configurar clientes de caché de hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="dd2c7-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="dd2c7-211">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="dd2c7-211">Next steps</span></span>
<span data-ttu-id="dd2c7-212">Obtenga información acerca de cómo toouse premium más características de caché.</span><span class="sxs-lookup"><span data-stu-id="dd2c7-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="dd2c7-213">Nivel de introducción toohello Premium de caché de Redis de Azure</span><span class="sxs-lookup"><span data-stu-id="dd2c7-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png








---
title: "persistencia de los datos aaaHow tooconfigure para una caché de Redis de Azure Premium"
description: "Obtenga información acerca de cómo tooconfigure y administrar las instancias de caché en Redis de Azure de nivel Premium de persistencia de datos"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="6605b-103">¿Cómo tooconfigure persistencia de los datos de una caché en Redis de Azure Premium</span><span class="sxs-lookup"><span data-stu-id="6605b-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="6605b-104">Caché en Redis de Azure tiene ofertas de caché diferentes que proporcionan flexibilidad en la elección de Hola de tamaño de caché y las características, incluidas las características de nivel Premium como de agrupación en clústeres, la persistencia y la compatibilidad de red virtual.</span><span class="sxs-lookup"><span data-stu-id="6605b-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="6605b-105">Este artículo describe cómo tooconfigure persistencia en un premium Redis de Azure caché de instancia.</span><span class="sxs-lookup"><span data-stu-id="6605b-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="6605b-106">Para obtener información sobre otras características de caché premium, consulte [nivel Premium de caché de Redis de Azure de introducción toohello](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="6605b-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="6605b-107">¿Qué es la persistencia de datos?</span><span class="sxs-lookup"><span data-stu-id="6605b-107">What is data persistence?</span></span>
<span data-ttu-id="6605b-108">[Redis persistencia](https://redis.io/topics/persistence) permite toopersist los datos almacenados en Redis.</span><span class="sxs-lookup"><span data-stu-id="6605b-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="6605b-109">También puede tomar instantáneas y realizar copias de seguridad de los datos de hello, que puede cargar en el caso de un error de hardware.</span><span class="sxs-lookup"><span data-stu-id="6605b-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="6605b-110">Se trata de una enorme ventaja con respecto a Basic o nivel estándar donde Hola a todos los datos se almacena en memoria y puede haber pérdida potencial de datos en caso de error donde los nodos de memoria caché están inactivos.</span><span class="sxs-lookup"><span data-stu-id="6605b-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="6605b-111">Caché en Redis de Azure ofrece persistencia Redis con hello después de modelos:</span><span class="sxs-lookup"><span data-stu-id="6605b-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="6605b-112">**Persistencia de RDB** -persistencia cuando RDB (base de datos de Redis) está configurada, Azure Redis Cache persiste una instantánea de memoria caché de Redis de hello en un formato binario toodisk tomando como base una frecuencia de copia de seguridad configurable de Redis.</span><span class="sxs-lookup"><span data-stu-id="6605b-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="6605b-113">Si se produce un evento grave que deshabilita la caché de réplica y de saludo principal, se reconstruye caché hello mediante Hola la instantánea más reciente.</span><span class="sxs-lookup"><span data-stu-id="6605b-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="6605b-114">Obtener más información sobre hello [ventajas](https://redis.io/topics/persistence#rdb-advantages) y [desventajas](https://redis.io/topics/persistence#rdb-disadvantages) de persistencia de RDB.</span><span class="sxs-lookup"><span data-stu-id="6605b-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="6605b-115">**Persistencia de AOF** -persistencia cuando AOF (archivo solo anexar) está configurada, Azure Redis Cache guarda cada registro de tooa de operaciones de escritura que se ha guardado al menos una vez por segundo en una cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="6605b-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="6605b-116">Si se produce un evento grave que deshabilita la caché de réplica y de saludo principal, se reconstruye caché hello mediante las operaciones de escritura de hello almacenado.</span><span class="sxs-lookup"><span data-stu-id="6605b-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="6605b-117">Obtener más información sobre hello [ventajas](https://redis.io/topics/persistence#aof-advantages) y [desventajas](https://redis.io/topics/persistence#aof-disadvantages) de persistencia AOF.</span><span class="sxs-lookup"><span data-stu-id="6605b-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="6605b-118">Persistencia se configura de hello **nueva caché en Redis** hoja durante la creación de la memoria caché y en hello **menú recursos** Premium existente almacena en memoria caché.</span><span class="sxs-lookup"><span data-stu-id="6605b-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="6605b-119">Una vez se selecciona un plan de tarifa premium, haga clic en **Persistencia de Redis**.</span><span class="sxs-lookup"><span data-stu-id="6605b-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Persistencia de Redis][redis-cache-persistence]

<span data-ttu-id="6605b-121">Hello en los pasos en la sección siguiente Hola describe cómo tooconfigure Redis persistencia en la nueva caché premium.</span><span class="sxs-lookup"><span data-stu-id="6605b-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="6605b-122">Una vez configurada la persistencia de Redis, haga clic en **crear** toocreate su premium nuevo la caché con Redis persistencia.</span><span class="sxs-lookup"><span data-stu-id="6605b-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="6605b-123">Habilitación de la persistencia de Redis</span><span class="sxs-lookup"><span data-stu-id="6605b-123">Enable Redis persistence</span></span>

<span data-ttu-id="6605b-124">Redis se habilita la persistencia en hello **Redis persistencia de los datos** hoja seleccionando cualquiera **RDB** o **AOF** persistencia.</span><span class="sxs-lookup"><span data-stu-id="6605b-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="6605b-125">Memoria caché de nuevo, esta hoja se tiene acceso durante el proceso de creación de la memoria caché de hello, como se describe en la sección anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="6605b-126">Para las memorias caché existentes, Hola **Redis persistencia de los datos** hoja se obtiene acceso desde hello **menú recursos** de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="6605b-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Configuración de Redis][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="6605b-128">Configuración de la persistencia de RDB</span><span class="sxs-lookup"><span data-stu-id="6605b-128">Configure RDB persistence</span></span>

<span data-ttu-id="6605b-129">persistencia de RDB tooenable, haga clic en **RDB**.</span><span class="sxs-lookup"><span data-stu-id="6605b-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="6605b-130">persistencia de RDB toodisable en una caché premium habilitados anteriormente, haga clic en **deshabilitado**.</span><span class="sxs-lookup"><span data-stu-id="6605b-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Persistencia de RDB en Redis][redis-cache-rdb-persistence]

<span data-ttu-id="6605b-132">intervalo copia de seguridad de saludo de tooconfigure, seleccione un **frecuencia de copia de seguridad** de lista desplegable de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="6605b-133">Las opciones disponibles son: **15 minutos**, **30 minutos**, **60 minutos**, **6 horas**, **12 horas** y **24 horas**.</span><span class="sxs-lookup"><span data-stu-id="6605b-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="6605b-134">Este intervalo comienza a contar hacia abajo después de operación de copia de seguridad anterior de Hola se complete correctamente y cuando ha transcurrido se inicia una nueva copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6605b-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="6605b-135">Haga clic en **cuenta de almacenamiento** tooselect Hola toouse de cuenta de almacenamiento y elija cualquiera hello **clave principal** o **clave secundaria** toouse de hello **almacenamiento Clave** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="6605b-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="6605b-136">Debe elegir una cuenta de almacenamiento de hello misma región que la memoria caché de hello y un **almacenamiento Premium** cuenta se recomienda porque almacenamiento premium tiene un mayor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="6605b-137">Si se vuelve a generar clave de almacenamiento de Hola para su cuenta de persistencia, debe volver a configurar clave deseado Hola Hola **clave de almacenamiento** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="6605b-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="6605b-138">Haga clic en **Aceptar** configuración de persistencia de toosave Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="6605b-139">siguiente copia de seguridad de Hello (o primera copia de seguridad para las cachés nuevas) se inicia una vez que transcurre el intervalo de frecuencia de copia de seguridad de saludo.</span><span class="sxs-lookup"><span data-stu-id="6605b-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="6605b-140">Configuración de la persistencia de AOF</span><span class="sxs-lookup"><span data-stu-id="6605b-140">Configure AOF persistence</span></span>

<span data-ttu-id="6605b-141">persistencia de AOF tooenable, haga clic en **AOF**.</span><span class="sxs-lookup"><span data-stu-id="6605b-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="6605b-142">persistencia de AOF toodisable en una caché premium habilitados anteriormente, haga clic en **deshabilitado**.</span><span class="sxs-lookup"><span data-stu-id="6605b-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Persistencia de AOF en Redis][redis-cache-aof-persistence]

<span data-ttu-id="6605b-144">persistencia de AOF tooconfigure, especifique un **primera cuenta de almacenamiento**.</span><span class="sxs-lookup"><span data-stu-id="6605b-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="6605b-145">Esta cuenta de almacenamiento debe encontrarse en hello misma región que la memoria caché de hello y un **almacenamiento Premium** cuenta se recomienda porque almacenamiento premium tiene un mayor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="6605b-146">También puede configurar una cuenta de almacenamiento adicional denominada **Segunda cuenta de almacenamiento**.</span><span class="sxs-lookup"><span data-stu-id="6605b-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="6605b-147">Si se configura una segunda cuenta de almacenamiento, hello escrituras toohello réplica caché se escriben toothis una segunda cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="6605b-148">Para cada cuenta de almacenamiento configurada, elija cualquier hello **clave principal** o **clave secundaria** toouse de hello **clave de almacenamiento** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="6605b-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="6605b-149">Si se vuelve a generar clave de almacenamiento de Hola para su cuenta de persistencia, debe volver a configurar clave deseado Hola Hola **clave de almacenamiento** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="6605b-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="6605b-150">Cuando se habilita la persistencia de AOF, escribir la caché de toohello de operaciones se guardan toohello designado de la cuenta de almacenamiento (o cuentas si ha configurado una segunda cuenta de almacenamiento).</span><span class="sxs-lookup"><span data-stu-id="6605b-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="6605b-151">En caso de hello de un error catastrófico que toma hacia abajo ambos Hola principal y caché de réplica, hello almacenado AOF registro es usan caché de hello toorebuild.</span><span class="sxs-lookup"><span data-stu-id="6605b-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="6605b-152">P+F de persistencia</span><span class="sxs-lookup"><span data-stu-id="6605b-152">Persistence FAQ</span></span>
<span data-ttu-id="6605b-153">Hello lista siguiente contiene toocommonly respuestas preguntas más frecuentes sobre la persistencia de caché en Redis de Azure.</span><span class="sxs-lookup"><span data-stu-id="6605b-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="6605b-154">¿Puedo habilitar la persistencia en una memoria caché creada anteriormente?</span><span class="sxs-lookup"><span data-stu-id="6605b-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="6605b-155">¿Se puede habilitar la persistencia AOF y RDB en hello mismo tiempo?</span><span class="sxs-lookup"><span data-stu-id="6605b-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="6605b-156">¿Qué modelo de persistencia debería elegir?</span><span class="sxs-lookup"><span data-stu-id="6605b-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="6605b-157">¿Qué ocurre si he escalar tooa diferentes tamaños y se restaura una copia de seguridad realizada antes de la operación de escalado de hello?</span><span class="sxs-lookup"><span data-stu-id="6605b-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="6605b-158">Persistencia de RDB</span><span class="sxs-lookup"><span data-stu-id="6605b-158">RDB persistence</span></span>
* [<span data-ttu-id="6605b-159">¿Puedo cambiar frecuencia de copia de seguridad de hello RDB después de crear caché Hola?</span><span class="sxs-lookup"><span data-stu-id="6605b-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="6605b-160">¿Por qué si tengo una frecuencia de copia de seguridad de RDB de 60 minutos hay más de 60 minutos entre las copias de seguridad?</span><span class="sxs-lookup"><span data-stu-id="6605b-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="6605b-161">Copias de seguridad RDB antiguas toohello ¿qué ocurre cuando se realiza una copia de seguridad?</span><span class="sxs-lookup"><span data-stu-id="6605b-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="6605b-162">Persistencia de AOF</span><span class="sxs-lookup"><span data-stu-id="6605b-162">AOF persistence</span></span>
* [<span data-ttu-id="6605b-163">¿Cuándo debo usar una segunda cuenta de almacenamiento?</span><span class="sxs-lookup"><span data-stu-id="6605b-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="6605b-164">¿Afecta la persistencia de AOF a la productividad, la latencia o el rendimiento de la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="6605b-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="6605b-165">¿Cómo puedo quitar cuenta de almacenamiento de segundo de hello?</span><span class="sxs-lookup"><span data-stu-id="6605b-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="6605b-166">¿Qué es una reescritura y cómo afecta a la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="6605b-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="6605b-167">¿Qué debo esperar al escalar una memoria caché con AOF habilitado?</span><span class="sxs-lookup"><span data-stu-id="6605b-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="6605b-168">¿Cómo se organizan los datos de AOF en el almacenamiento?</span><span class="sxs-lookup"><span data-stu-id="6605b-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="6605b-169">¿Puedo habilitar la persistencia en una memoria caché creada anteriormente?</span><span class="sxs-lookup"><span data-stu-id="6605b-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="6605b-170">Sí, la persistencia de Redis puede configurarse tanto durante la creación de la memoria caché como en las memorias caché premium existente.</span><span class="sxs-lookup"><span data-stu-id="6605b-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="6605b-171">¿Se puede habilitar la persistencia AOF y RDB en hello mismo tiempo?</span><span class="sxs-lookup"><span data-stu-id="6605b-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="6605b-172">No, puede habilitar solo RDB o AOF, pero no ambos al Hola mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="6605b-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="6605b-173">¿Qué modelo de persistencia debería elegir?</span><span class="sxs-lookup"><span data-stu-id="6605b-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="6605b-174">Persistencia de AOF guarda cada registro de tooa de escritura, que tiene algún impacto en el rendimiento, en comparación con RDB persistencia que guarda las copias de seguridad en función de hello configurado intervalo de copia de seguridad, con un impacto mínimo en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="6605b-175">Elija persistencia AOF si su objetivo principal es la pérdida de datos de toominimize y puede controlar una disminución del rendimiento de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="6605b-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="6605b-176">Elija la persistencia de RDB si desea toomaintain un rendimiento óptimo en la memoria caché, pero todavía desea un mecanismo para la recuperación de datos.</span><span class="sxs-lookup"><span data-stu-id="6605b-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="6605b-177">Obtener más información sobre hello [ventajas](https://redis.io/topics/persistence#rdb-advantages) y [desventajas](https://redis.io/topics/persistence#rdb-disadvantages) de persistencia de RDB.</span><span class="sxs-lookup"><span data-stu-id="6605b-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="6605b-178">Obtener más información sobre hello [ventajas](https://redis.io/topics/persistence#aof-advantages) y [desventajas](https://redis.io/topics/persistence#aof-disadvantages) de persistencia AOF.</span><span class="sxs-lookup"><span data-stu-id="6605b-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="6605b-179">Para más información sobre el rendimiento al usar la persistencia de AOF, vea [¿Afecta la persistencia de AOF a la productividad, la latencia o el rendimiento de la memoria caché?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="6605b-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="6605b-180">¿Qué ocurre si he escalar tooa diferentes tamaños y se restaura una copia de seguridad realizada antes de la operación de escalado de hello?</span><span class="sxs-lookup"><span data-stu-id="6605b-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="6605b-181">Para la persistencia de RDB y AOF:</span><span class="sxs-lookup"><span data-stu-id="6605b-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="6605b-182">Si ha escalado tooa mayor tamaño, no hay ningún impacto.</span><span class="sxs-lookup"><span data-stu-id="6605b-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="6605b-183">Si ha escalado tooa menor tamaño, y tiene un personalizado [bases de datos](cache-configure.md#databases) establece que es mayor que hello [límite de bases de datos](cache-configure.md#databases) para el nuevo tamaño, no es restaurar datos en esas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="6605b-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="6605b-184">Para más información, consulte [¿Mi configuración de bases de datos personalizada se ve afectada durante el escalado?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="6605b-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="6605b-185">Si ha escalado tooa menor tamaño, y no hay espacio suficiente en hello menor tamaño toohold todos los datos de Hola desde la última copia de seguridad, clave de Hola se expulsen durante el proceso de restauración de Hola, normalmente mediante hello [allkeys lru](http://redis.io/topics/lru-cache) expulsión Directiva.</span><span class="sxs-lookup"><span data-stu-id="6605b-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="6605b-186">¿Puedo cambiar frecuencia de copia de seguridad de hello RDB después de crear caché Hola?</span><span class="sxs-lookup"><span data-stu-id="6605b-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="6605b-187">Sí, puede cambiar la frecuencia de copia de seguridad de hello para la persistencia de RDB en hello **Redis persistencia de los datos** hoja.</span><span class="sxs-lookup"><span data-stu-id="6605b-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="6605b-188">Para instrucciones, vea [Configurar la persistencia de Redis](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="6605b-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="6605b-189">¿Por qué si tengo una frecuencia de copia de seguridad de RDB de 60 minutos hay más de 60 minutos entre las copias de seguridad?</span><span class="sxs-lookup"><span data-stu-id="6605b-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="6605b-190">intervalo de frecuencia de copia de seguridad de persistencia de Hello RDB no se inicia hasta que el proceso de copia de seguridad anterior de Hola se ha completado correctamente.</span><span class="sxs-lookup"><span data-stu-id="6605b-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="6605b-191">Si la frecuencia de copia de seguridad de hello es 60 minutos y tarda un toosuccessfully de 15 minutos de proceso de copia de seguridad completa, copia de seguridad siguiente hello no se inicia hasta 75 minutos después de hello hora de inicio de copia de seguridad anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="6605b-192">Copias de seguridad RDB antiguas toohello ¿qué ocurre cuando se realiza una copia de seguridad?</span><span class="sxs-lookup"><span data-stu-id="6605b-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="6605b-193">Todas las copias de seguridad de persistencia de RDB excepto hello más reciente se eliminan automáticamente.</span><span class="sxs-lookup"><span data-stu-id="6605b-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="6605b-194">Es posible que esta eliminación no se produzca inmediatamente pero las copias de seguridad anteriores no se guardan de manera indefinida.</span><span class="sxs-lookup"><span data-stu-id="6605b-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="6605b-195">¿Cuándo debo usar una segunda cuenta de almacenamiento?</span><span class="sxs-lookup"><span data-stu-id="6605b-195">When should I use a second storage account?</span></span>

<span data-ttu-id="6605b-196">Debe usar una segunda cuenta de almacenamiento para la persistencia de AOF cuando crea que tiene mayor que las operaciones de conjunto esperado en la memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="6605b-197">Configuración de cuenta de almacenamiento secundaria Hola ayuda a garantizar que la memoria caché no alcanza los límites de ancho de banda de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="6605b-198">¿Afecta la persistencia de AOF a la productividad, la latencia o el rendimiento de la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="6605b-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="6605b-199">Persistencia AOF afecta al rendimiento por aproximadamente 15-20% al caché Hola está por debajo de la carga máxima (CPU y servidor de carga de ambos en un 90%).</span><span class="sxs-lookup"><span data-stu-id="6605b-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="6605b-200">No debería haber problemas de latencia al caché Hola esté dentro de estos límites.</span><span class="sxs-lookup"><span data-stu-id="6605b-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="6605b-201">Sin embargo, caché Hola alcanzará estos límites antes con AOF habilitado.</span><span class="sxs-lookup"><span data-stu-id="6605b-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="6605b-202">¿Cómo puedo quitar cuenta de almacenamiento de segundo de hello?</span><span class="sxs-lookup"><span data-stu-id="6605b-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="6605b-203">Puede quitar la cuenta de almacenamiento secundaria de persistencia de hello AOF estableciendo la segunda cuenta de almacenamiento Hola Hola toobe mismo como primera cuenta de almacenamiento Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="6605b-204">Para obtener instrucciones, vea [Configuración de la persistencia de AOF](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="6605b-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="6605b-205">¿Qué es una reescritura y cómo afecta a la memoria caché?</span><span class="sxs-lookup"><span data-stu-id="6605b-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="6605b-206">Cuando el archivo de hello AOF pasa a ser lo suficientemente grande, una reescritura automáticamente se pone en cola en memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="6605b-207">archivo AOF de hello Hello reescritura cambia de tamaño con el conjunto mínimo de hello operaciones necesarias toocreate Hola actual del conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="6605b-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="6605b-208">Durante la reescribe, esperar límites de rendimiento de tooreach antes especialmente cuando se trabaja con grandes conjuntos de datos.</span><span class="sxs-lookup"><span data-stu-id="6605b-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="6605b-209">Reescribe menor produce a menudo como archivo de hello AOF se vuelve mayor, pero tendrá una gran cantidad de tiempo cuando se produce.</span><span class="sxs-lookup"><span data-stu-id="6605b-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="6605b-210">¿Qué debo esperar al escalar una memoria caché con AOF habilitado?</span><span class="sxs-lookup"><span data-stu-id="6605b-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="6605b-211">Si el archivo AOF de hello en tiempo de Hola de ajuste de escala es considerablemente grande, a continuación, espera hello tootake de operación de escalado más de lo esperado desde que se puede volver a cargar archivo hello una vez finalizada la escala.</span><span class="sxs-lookup"><span data-stu-id="6605b-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="6605b-212">Para obtener más información sobre cómo ampliar, consulte [¿qué ocurre si he escalar tooa diferentes tamaños y se restaura una copia de seguridad realizada antes de la operación de escalado de hello?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="6605b-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="6605b-213">¿Cómo se organizan los datos de AOF en el almacenamiento?</span><span class="sxs-lookup"><span data-stu-id="6605b-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="6605b-214">Datos almacenados en archivos AOF se dividen en varios blobs de página por el rendimiento del proceso de guardar Hola datos toostorage tooincrease del nodo.</span><span class="sxs-lookup"><span data-stu-id="6605b-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="6605b-215">Hello siguiente tabla muestra cuántas blobs de página se utilizan para cada nivel de precios:</span><span class="sxs-lookup"><span data-stu-id="6605b-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="6605b-216">Nivel Premium</span><span class="sxs-lookup"><span data-stu-id="6605b-216">Premium tier</span></span> | <span data-ttu-id="6605b-217">Blobs</span><span class="sxs-lookup"><span data-stu-id="6605b-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="6605b-218">P1</span><span class="sxs-lookup"><span data-stu-id="6605b-218">P1</span></span>           | <span data-ttu-id="6605b-219">4 por partición</span><span class="sxs-lookup"><span data-stu-id="6605b-219">4 per shard</span></span>    |
| <span data-ttu-id="6605b-220">P2</span><span class="sxs-lookup"><span data-stu-id="6605b-220">P2</span></span>           | <span data-ttu-id="6605b-221">8 por partición</span><span class="sxs-lookup"><span data-stu-id="6605b-221">8 per shard</span></span>    |
| <span data-ttu-id="6605b-222">P3</span><span class="sxs-lookup"><span data-stu-id="6605b-222">P3</span></span>           | <span data-ttu-id="6605b-223">16 por partición</span><span class="sxs-lookup"><span data-stu-id="6605b-223">16 per shard</span></span>   |
| <span data-ttu-id="6605b-224">P4</span><span class="sxs-lookup"><span data-stu-id="6605b-224">P4</span></span>           | <span data-ttu-id="6605b-225">20 por partición</span><span class="sxs-lookup"><span data-stu-id="6605b-225">20 per shard</span></span>   |

<span data-ttu-id="6605b-226">Cuando se habilita la agrupación en clústeres, cada partición de memoria caché de hello tiene su propio conjunto de blobs de página, como se indica en la tabla anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="6605b-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="6605b-227">Por ejemplo, una caché P2 con tres particiones distribuye su archivo AOF entre 24 blobs en páginas (8 blobs por partición, con 3 particiones).</span><span class="sxs-lookup"><span data-stu-id="6605b-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="6605b-228">Después de una reescritura, hay dos conjuntos de archivos AOF en el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="6605b-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="6605b-229">Reescribe se produce en segundo plano de Hola y anexa toohello primer conjunto de archivos, mientras que las operaciones de conjunto que se envían toohello caché durante la reescritura de hello anexan toohello segundo conjunto.</span><span class="sxs-lookup"><span data-stu-id="6605b-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="6605b-230">Durante las operaciones de reescritura se almacena de forma temporal una copia de seguridad por si hubiera un error, pero se elimina inmediatamente después de que finalice la reescritura.</span><span class="sxs-lookup"><span data-stu-id="6605b-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="6605b-231">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="6605b-231">Next steps</span></span>
<span data-ttu-id="6605b-232">Obtenga información acerca de cómo toouse premium más características de caché.</span><span class="sxs-lookup"><span data-stu-id="6605b-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="6605b-233">Nivel de introducción toohello Premium de caché de Redis de Azure</span><span class="sxs-lookup"><span data-stu-id="6605b-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png

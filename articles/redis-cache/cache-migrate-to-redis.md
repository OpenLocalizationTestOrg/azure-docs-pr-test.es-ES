---
title: "aaaMigrate tooRedis de aplicaciones de servicio de caché administrado - Azure | Documentos de Microsoft"
description: "Obtenga información acerca de cómo toomigrate administra el servicio de caché y caché en rol de aplicaciones tooAzure caché en Redis"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="29545-103">Migrar desde el servicio de caché administrado tooAzure caché en Redis</span><span class="sxs-lookup"><span data-stu-id="29545-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="29545-104">Migrar las aplicaciones que usan el servicio de caché administrado de Azure tooAzure caché en Redis se puede lograr con cambios mínimos tooyour aplicación, en función características del servicio de caché administrado de Hola usadas por la aplicación de almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="29545-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="29545-105">Aunque Hola API no son exactamente Hola mismo son similares y gran parte del código existente que utiliza el servicio de caché administrado tooaccess una memoria caché se puede reutilizar con cambios mínimos.</span><span class="sxs-lookup"><span data-stu-id="29545-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="29545-106">En este tema muestra cómo configuración de aplicación y toomake Hola necesarios cambia toomigrate su toouse de aplicaciones de servicio de caché administrado caché en Redis de Azure y muestra cómo algunas de las características de Hola de caché en Redis de Azure pueden ser usado tooimplement Hola funcionalidad de una memoria caché del servicio de caché administrado.</span><span class="sxs-lookup"><span data-stu-id="29545-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="29545-107">Managed Cache Service e In-Role Cache se [retiraron](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) el 30 de noviembre de 2016.</span><span class="sxs-lookup"><span data-stu-id="29545-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="29545-108">Si dispone de todas las implementaciones de caché en rol que desea toomigrate tooAzure caché en Redis, puede seguir los pasos de hello en este artículo.</span><span class="sxs-lookup"><span data-stu-id="29545-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="29545-109">Pasos de migración</span><span class="sxs-lookup"><span data-stu-id="29545-109">Migration Steps</span></span>
<span data-ttu-id="29545-110">Hola pasos es necesario toomigrate una toouse de aplicación de servicio de caché administrado caché en Redis de Azure.</span><span class="sxs-lookup"><span data-stu-id="29545-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="29545-111">Asignar tooAzure de características de servicio de caché administrado caché en Redis</span><span class="sxs-lookup"><span data-stu-id="29545-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="29545-112">Elegir una oferta de caché</span><span class="sxs-lookup"><span data-stu-id="29545-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="29545-113">Creación de una caché</span><span class="sxs-lookup"><span data-stu-id="29545-113">Create a Cache</span></span>
* <span data-ttu-id="29545-114">Configurar a clientes de caché de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="29545-115">Quitar la configuración del servicio de caché administrado de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="29545-116">Configurar a un cliente de caché mediante Hola paquete de NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="29545-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="29545-117">Migración del código del Servicio de caché administrado</span><span class="sxs-lookup"><span data-stu-id="29545-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="29545-118">Conectarse mediante la clase ConnectionMultiplexer de hello de caché de toohello</span><span class="sxs-lookup"><span data-stu-id="29545-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="29545-119">Tipos de datos primitivos de acceso en la memoria caché de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="29545-120">Trabajar con objetos de .NET en memoria caché de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="29545-121">Migrar el estado de sesión de ASP.NET y tooAzure caché en Redis de caché de resultados</span><span class="sxs-lookup"><span data-stu-id="29545-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="29545-122">Asignar tooAzure de características de servicio de caché administrado caché en Redis</span><span class="sxs-lookup"><span data-stu-id="29545-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="29545-123">El Servicio de caché administrado de Azure y Caché en Redis de Azure guardan ciertas semejanzas pero implementan algunas de sus características de formas diferentes.</span><span class="sxs-lookup"><span data-stu-id="29545-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="29545-124">En esta sección se describe algunas de las diferencias de Hola y proporciona instrucciones sobre cómo implementar características de Hola de servicio de caché administrado en caché en Redis de Azure.</span><span class="sxs-lookup"><span data-stu-id="29545-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="29545-125">Características del Servicio de caché administrado</span><span class="sxs-lookup"><span data-stu-id="29545-125">Managed Cache Service feature</span></span> | <span data-ttu-id="29545-126">Compatibilidad con el Servicio de caché administrado</span><span class="sxs-lookup"><span data-stu-id="29545-126">Managed Cache Service support</span></span> | <span data-ttu-id="29545-127">Compatibilidad con Caché en Redis de Azure</span><span class="sxs-lookup"><span data-stu-id="29545-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="29545-128">Cachés con nombre</span><span class="sxs-lookup"><span data-stu-id="29545-128">Named caches</span></span> |<span data-ttu-id="29545-129">Una memoria caché predeterminada está configurada y en hello pueden configurarse ofertas estándar y Premium, la toonine adicional cachés con nombre si lo desea.</span><span class="sxs-lookup"><span data-stu-id="29545-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="29545-130">Las memorias caché de Redis de Azure tienen un número configurable de bases de datos (valor predeterminado de 16) que pueden ser utilizado tooimplement almacena en memoria caché en un toonamed funcionalidad similar.</span><span class="sxs-lookup"><span data-stu-id="29545-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="29545-131">Para más información, consulte [What are Redis databases?](cache-faq.md#what-are-redis-databases) (¿Qué son las bases de datos de Redis?) y [Configuración predeterminada del servidor Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="29545-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="29545-132">Alta disponibilidad</span><span class="sxs-lookup"><span data-stu-id="29545-132">High Availability</span></span> |<span data-ttu-id="29545-133">Proporciona alta disponibilidad para los elementos en caché de hello en hello ofertas estándar y Premium.</span><span class="sxs-lookup"><span data-stu-id="29545-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="29545-134">Si los elementos se pierde debido a error tooa, copias de seguridad de elementos de hello en memoria caché de hello siguen estando disponibles.</span><span class="sxs-lookup"><span data-stu-id="29545-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="29545-135">Escribe la caché secundaria toohello se realiza sincrónicamente.</span><span class="sxs-lookup"><span data-stu-id="29545-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="29545-136">Alta disponibilidad está disponible en hello ofertas estándar y Premium, que tienen una configuración de la réplica principal de dos nodos (cada partición en una caché Premium tiene un par de réplica principal).</span><span class="sxs-lookup"><span data-stu-id="29545-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="29545-137">Escrituras toohello réplica se realizan de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="29545-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="29545-138">Para obtener más información, consulte [Precios de Azure Redis Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="29545-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="29545-139">Notificaciones</span><span class="sxs-lookup"><span data-stu-id="29545-139">Notifications</span></span> |<span data-ttu-id="29545-140">Permite que se producen notificaciones asincrónicas de los clientes tooreceive cuando una serie de operaciones de caché en una caché con nombre.</span><span class="sxs-lookup"><span data-stu-id="29545-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="29545-141">Aplicaciones cliente pueden utilizar Redis pub/sub o [las notificaciones de Keyspace](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve un toonotifications funcionalidad similar.</span><span class="sxs-lookup"><span data-stu-id="29545-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="29545-142">Caché local</span><span class="sxs-lookup"><span data-stu-id="29545-142">Local cache</span></span> |<span data-ttu-id="29545-143">Almacena una copia de los objetos almacenados en caché localmente en el cliente de Hola para un acceso muy rápido.</span><span class="sxs-lookup"><span data-stu-id="29545-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="29545-144">Las aplicaciones cliente necesitaría tooimplement esta funcionalidad mediante un diccionario o una estructura de datos similar.</span><span class="sxs-lookup"><span data-stu-id="29545-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="29545-145">Directiva de expulsión</span><span class="sxs-lookup"><span data-stu-id="29545-145">Eviction Policy</span></span> |<span data-ttu-id="29545-146">Ninguna o LRU.</span><span class="sxs-lookup"><span data-stu-id="29545-146">None or LRU.</span></span> <span data-ttu-id="29545-147">directiva predeterminada de Hello es LRU.</span><span class="sxs-lookup"><span data-stu-id="29545-147">hello default policy is LRU.</span></span> |<span data-ttu-id="29545-148">Caché en Redis de Azure admite las siguientes directivas de expulsión de hello: volatile-lru, lru allkeys, volátil aleatorio, allkeys aleatorio volátil-ttl, noeviction.</span><span class="sxs-lookup"><span data-stu-id="29545-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="29545-149">directiva predeterminada de Hello es volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="29545-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="29545-150">Para obtener más información, consulte [Configuración de servidor predeterminada en Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="29545-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="29545-151">Directiva de caducidad</span><span class="sxs-lookup"><span data-stu-id="29545-151">Expiration Policy</span></span> |<span data-ttu-id="29545-152">Directiva de caducidad de Hello predeterminada es Absolute e intervalo de expiración de saludo predeterminado es de diez minutos.</span><span class="sxs-lookup"><span data-stu-id="29545-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="29545-153">También hay directivas variable y Nunca.</span><span class="sxs-lookup"><span data-stu-id="29545-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="29545-154">De forma predeterminada no expiran los elementos en caché de hello, pero una expiración puede configurarse de forma por escritura mediante sobrecargas de conjunto de caché.</span><span class="sxs-lookup"><span data-stu-id="29545-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="29545-155">Para obtener más información, consulte [agregar y recuperar objetos de caché de hello](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="29545-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="29545-156">Regiones y etiquetado</span><span class="sxs-lookup"><span data-stu-id="29545-156">Regions and Tagging</span></span> |<span data-ttu-id="29545-157">Las regiones son subgrupos de elementos en caché.</span><span class="sxs-lookup"><span data-stu-id="29545-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="29545-158">Las regiones admiten también anotación Hola de elementos almacenados en caché con cadenas descriptivas adicionales llamadas etiquetas.</span><span class="sxs-lookup"><span data-stu-id="29545-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="29545-159">Las regiones admiten operaciones de búsqueda de tooperform de capacidad de hello en elementos etiquetados en dicha región.</span><span class="sxs-lookup"><span data-stu-id="29545-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="29545-160">Todos los elementos dentro de una región se encuentran dentro de un único nodo del clúster de caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="29545-161">Una caché en Redis consta de un solo nodo (a menos que se habilite Redis clúster) por lo que no hay ningún concepto de Hola de regiones de servicio de caché administrado.</span><span class="sxs-lookup"><span data-stu-id="29545-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="29545-162">Redis admite búsqueda y operaciones de caracteres comodín al recuperar las claves para que etiquetas descriptivas se pueden incrustar en los nombres de clave de Hola y usan elementos de hello tooretrieve más adelante.</span><span class="sxs-lookup"><span data-stu-id="29545-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="29545-163">Para ver un ejemplo de la implementación de una solución de etiquetado con Redis, consulte [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/)(Implementación del etiquetado de caché con Redis).</span><span class="sxs-lookup"><span data-stu-id="29545-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="29545-164">Serialización</span><span class="sxs-lookup"><span data-stu-id="29545-164">Serialization</span></span> |<span data-ttu-id="29545-165">Caché administrada admite NetDataContractSerializer, BinaryFormatter y uso de Hola de serializadores personalizados.</span><span class="sxs-lookup"><span data-stu-id="29545-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="29545-166">valor predeterminado de Hello es NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="29545-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="29545-167">Es responsabilidad de Hola Hola aplicación tooserialize .NET de objetos de cliente antes de colocarlos en la memoria caché de hello, con la elección de Hola de serializador de hello seguridad toohello programador de aplicaciones de cliente.</span><span class="sxs-lookup"><span data-stu-id="29545-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="29545-168">Para obtener más información y código de ejemplo, vea [trabajar con objetos de .NET en memoria caché de hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="29545-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="29545-169">Emulador de caché</span><span class="sxs-lookup"><span data-stu-id="29545-169">Cache emulator</span></span> |<span data-ttu-id="29545-170">El servicio de caché administrado ofrece un emulador de la memoria caché local.</span><span class="sxs-lookup"><span data-stu-id="29545-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="29545-171">Caché en Redis de Azure no tiene un emulador, pero puede [crear hello MSOpenTech de redis server.exe localmente](cache-faq.md#cache-emulator) tooprovide una experiencia con el emulador.</span><span class="sxs-lookup"><span data-stu-id="29545-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="29545-172">Elegir una oferta de caché</span><span class="sxs-lookup"><span data-stu-id="29545-172">Choose a Cache Offering</span></span>
<span data-ttu-id="29545-173">Caché en Redis de Microsoft Azure está disponible en hello siguientes niveles:</span><span class="sxs-lookup"><span data-stu-id="29545-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="29545-174">**Básico** – Nodo único.</span><span class="sxs-lookup"><span data-stu-id="29545-174">**Basic** – Single node.</span></span> <span data-ttu-id="29545-175">Varios tamaños de too53 GB.</span><span class="sxs-lookup"><span data-stu-id="29545-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="29545-176">**Estándar**: principal/réplica de dos nodos.</span><span class="sxs-lookup"><span data-stu-id="29545-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="29545-177">Varios tamaños de too53 GB.</span><span class="sxs-lookup"><span data-stu-id="29545-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="29545-178">Contrato de nivel de servicio del 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="29545-178">99.9% SLA.</span></span>
* <span data-ttu-id="29545-179">**Premium** : dos nodos principal/réplica con too10 particiones.</span><span class="sxs-lookup"><span data-stu-id="29545-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="29545-180">Varios tamaños de 6 GB too530 GB.</span><span class="sxs-lookup"><span data-stu-id="29545-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="29545-181">Todas las características del nivel Estándar y algunas otras características son compatibles con los [clústeres de Redis](cache-how-to-premium-clustering.md), la [persistencia de Redis](cache-how-to-premium-persistence.md) y [Azure Virtual Network](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="29545-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="29545-182">Contrato de nivel de servicio del 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="29545-182">99.9% SLA.</span></span>

<span data-ttu-id="29545-183">Estos niveles difieren en las características y el precio.</span><span class="sxs-lookup"><span data-stu-id="29545-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="29545-184">Hello características se tratan más adelante en esta guía y para obtener más información sobre los precios, consulte [detalles de precios de caché](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="29545-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="29545-185">Un punto de partida para la migración es toopick Hola tamaño que coincide con el tamaño de hello de la caché de servicio de caché administrado anterior y, a continuación, escalar hacia arriba o hacia abajo según los requisitos de saludo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="29545-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="29545-186">Para obtener instrucciones sobre cómo elegir Hola derecho oferta de caché en Redis de Azure, vea [qué oferta de caché de Redis y tamaño debo usar?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="29545-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="29545-187">Creación de una caché</span><span class="sxs-lookup"><span data-stu-id="29545-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="29545-188">Configurar a clientes de caché de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="29545-189">Una vez creada y configurada la memoria caché de hello, paso siguiente hello es configuración de servicio de caché administrado de hello tooremove y agregar Hola Agregar configuración de caché en Redis de Azure de Hola y las referencias para que los clientes de caché pueden tener acceso a la memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="29545-190">Quitar la configuración del servicio de caché administrado de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="29545-191">Configurar a un cliente de caché mediante Hola paquete de NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="29545-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="29545-192">Quitar la configuración del servicio de caché administrado de Hola</span><span class="sxs-lookup"><span data-stu-id="29545-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="29545-193">Antes de hello las aplicaciones cliente pueden configurarse para caché en Redis de Azure, configuración de servicio de caché administrado de hello existente y se deben quitar las referencias de ensamblado desinstalando paquete de NuGet del servicio de caché administrado de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="29545-194">Hola toouninstall paquete de NuGet del servicio de caché administrado, haga clic en proyecto de cliente de hello en **el Explorador de soluciones** y elija **administrar paquetes de NuGet**.</span><span class="sxs-lookup"><span data-stu-id="29545-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="29545-195">Seleccione hello **paquetes instalados** nodo y tipo W**indowsAzure.Caching** en hello búsqueda instalado cuadro paquetes.</span><span class="sxs-lookup"><span data-stu-id="29545-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="29545-196">Seleccione **Windows** **caché de Azure** (o **Windows** **Caching de Azure** según versión Hola de paquete de NuGet hello), haga clic en  **Desinstalar**y, a continuación, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="29545-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Desinstalar paquetes NuGet de Azure Managed Cache Service](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="29545-198">Desinstalar paquete de NuGet del servicio de caché administrado de hello quita ensamblados de servicio de caché administrado de Hola y las entradas del servicio de caché administrado de hello en hello app.config o web.config de la aplicación de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="29545-199">Porque no se pueden quitar algunas opciones personalizadas cuando se desinstala el paquete de NuGet hello, abra web.config o app.config y asegúrese de que Hola siguientes elementos se quitan por completo.</span><span class="sxs-lookup"><span data-stu-id="29545-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="29545-200">Asegúrese de que hello `dataCacheClients` entrada se elimina de hello `configSections` elemento.</span><span class="sxs-lookup"><span data-stu-id="29545-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="29545-201">No quite todo hello `configSections` elemento; simplemente quitar hello `dataCacheClients` entrada, si está presente.</span><span class="sxs-lookup"><span data-stu-id="29545-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="29545-202">Asegúrese de que hello `dataCacheClients` se quita la sección.</span><span class="sxs-lookup"><span data-stu-id="29545-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="29545-203">Hola `dataCacheClients` sección será similar toohello siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="29545-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="29545-204">Una vez que se quita la configuración del servicio de caché administrado de hello, puede configurar el cliente de caché de Hola tal y como se describe en los pasos de la sección de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="29545-205">Configurar a un cliente de caché mediante Hola paquete de NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="29545-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="29545-206">Migración del código del Servicio de caché administrado</span><span class="sxs-lookup"><span data-stu-id="29545-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="29545-207">API de Hello para el cliente de caché de StackExchange.Redis Hola es toohello similar el servicio de caché administrado.</span><span class="sxs-lookup"><span data-stu-id="29545-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="29545-208">Esta sección proporciona información general sobre las diferencias de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="29545-209">Conectarse mediante la clase ConnectionMultiplexer de hello de caché de toohello</span><span class="sxs-lookup"><span data-stu-id="29545-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="29545-210">En el servicio de caché administrado, Hola administró caché de conexiones toohello `DataCacheFactory` y `DataCache` clases.</span><span class="sxs-lookup"><span data-stu-id="29545-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="29545-211">En la caché en Redis de Azure, estas conexiones se administrarán hello `ConnectionMultiplexer` clase.</span><span class="sxs-lookup"><span data-stu-id="29545-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="29545-212">Agregue Hola siguientes mediante la instrucción toohello superior de cualquier archivo del que desea tooaccess Hola caché.</span><span class="sxs-lookup"><span data-stu-id="29545-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="29545-213">Si no se resuelve este espacio de nombres, asegúrese de que ha agregado Hola paquete de StackExchange.Redis NuGet tal y como se describe en [configurar clientes de caché de hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="29545-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="29545-214">Tenga en cuenta que el cliente hello StackExchange.Redis requiere .NET Framework 4 o posterior.</span><span class="sxs-lookup"><span data-stu-id="29545-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="29545-215">instancia del servicio Azure Redis Cache tooconnect tooan, llamada Hola estático `ConnectionMultiplexer.Connect` método y pase el extremo de Hola y la clave.</span><span class="sxs-lookup"><span data-stu-id="29545-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="29545-216">Un enfoque toosharing una `ConnectionMultiplexer` las instancias de la aplicación es toohave una propiedad estática que devuelve una instancia conectada, similar toohello siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="29545-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="29545-217">Esto proporciona una manera segura para subprocesos tooinitialize sólo un único conectado `ConnectionMultiplexer` instancia.</span><span class="sxs-lookup"><span data-stu-id="29545-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="29545-218">En este ejemplo `abortConnect` es toofalse de conjunto, lo que significa que llamada Hola tendrá éxito aun cuando no se establece una memoria caché toohello de conexión.</span><span class="sxs-lookup"><span data-stu-id="29545-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="29545-219">Una característica clave de `ConnectionMultiplexer` es que automáticamente restaurará la memoria caché de conectividad toohello una vez que el problema de red de Hola o por otros motivos se resuelven.</span><span class="sxs-lookup"><span data-stu-id="29545-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="29545-220">Hello extremo de la caché, las claves y los puertos pueden obtenerse de hello **caché en Redis** hoja para la instancia de caché.</span><span class="sxs-lookup"><span data-stu-id="29545-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="29545-221">Para obtener más información, consulte [Propiedades de Caché en Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="29545-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="29545-222">Una vez establecida la conexión de hello, devolver una base de datos de caché de referencia toohello Redis Hola llamada `ConnectionMultiplexer.GetDatabase` método.</span><span class="sxs-lookup"><span data-stu-id="29545-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="29545-223">Devuelve el objeto de Hola de hello `GetDatabase` método es un objeto ligero de acceso directo y no es necesario toobe almacenado.</span><span class="sxs-lookup"><span data-stu-id="29545-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="29545-224">cliente de StackExchange.Redis de Hello usa hello `RedisKey` y `RedisValue` tipos para tener acceso a elementos y almacenarlos en caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="29545-225">Estos tipos se asignan a tipos de lenguajes más primitivos, como la cadena, y no suelen usarse directamente.</span><span class="sxs-lookup"><span data-stu-id="29545-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="29545-226">Redis cadenas son Hola clase más básica del valor de Redis y pueden contener muchos tipos de datos, incluidas secuencias binarias serializadas, y aunque no puede usar tipo hello directamente, usará métodos que contienen `String` en nombre de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="29545-227">Para los tipos de datos primitivos más almacenar y recuperar elementos de caché de hello utilizando hello `StringSet` y `StringGet` métodos, a menos que se va a almacenar colecciones u otros tipos de datos de Redis en memoria caché de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="29545-228">`StringSet`y `StringGet` son muy similar toohello servicio de caché administrado `Put` y `Get` métodos, con la principal diferencia radica en que antes de establecer y obtener un objeto .NET en la memoria caché de Hola debe serializar en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="29545-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="29545-229">Al llamar a `StringGet`, si existe un objeto hello, se devuelve y si no es así, se devuelve null.</span><span class="sxs-lookup"><span data-stu-id="29545-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="29545-230">En este caso puede recuperar el valor de Hola Hola deseado origen de datos y almacenar en memoria caché de Hola para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="29545-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="29545-231">Esto se conoce como modelo de cache-aside Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="29545-232">expiración de hello toospecify de un elemento en caché de hello, use hello `TimeSpan` parámetro de `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="29545-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="29545-233">Caché en Redis de Azure puede trabajar con objetos .NET, así como con tipos de datos primitivos; sin embargo, antes de poder almacenar en caché un objeto .NET, se debe serializar.</span><span class="sxs-lookup"><span data-stu-id="29545-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="29545-234">Esto es responsabilidad de hello del desarrollador de la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="29545-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="29545-235">Esto proporciona flexibilidad de desarrollador de hello en la elección de Hola de serializador de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="29545-236">Para obtener más información y código de ejemplo, vea [trabajar con objetos de .NET en memoria caché de hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="29545-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="29545-237">Migrar el estado de sesión de ASP.NET y tooAzure caché en Redis de caché de resultados</span><span class="sxs-lookup"><span data-stu-id="29545-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="29545-238">Caché en Redis de Azure cuenta con proveedores de estado de sesión ASP.NET y almacenamiento en caché de los resultados de las páginas.</span><span class="sxs-lookup"><span data-stu-id="29545-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="29545-239">toomigrate la aplicación que utiliza las versiones de servicio de caché administrado de Hola de estos proveedores, quite primero hello las secciones existentes del archivo web.config y, a continuación, configurar versiones de caché en Redis de Azure de Hola de proveedores de Hola.</span><span class="sxs-lookup"><span data-stu-id="29545-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="29545-240">Para obtener instrucciones sobre el uso de hello proveedores de ASP.NET de caché de Redis de Azure, consulte [proveedor de estado de sesión de ASP.NET para caché en Redis de Azure](cache-aspnet-session-state-provider.md) y [proveedor de caché de resultados de ASP.NET para caché en Redis de Azure](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="29545-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="29545-241">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="29545-241">Next steps</span></span>
<span data-ttu-id="29545-242">Explorar hello [documentación de Azure Redis Cache](https://azure.microsoft.com/documentation/services/cache/) para tutoriales, ejemplos y vídeos entre otros.</span><span class="sxs-lookup"><span data-stu-id="29545-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>


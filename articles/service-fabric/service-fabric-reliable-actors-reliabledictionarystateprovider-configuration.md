---
title: "Cambio de la configuración de ReliableDictionaryActorStateProvider en microservicios de Azure | Microsoft Docs"
description: "Obtenga información sobre cómo configurar los actores con estado de Azure Service Fabric del tipo ReliableDictionaryActorStateProvider."
services: Service-Fabric
documentationcenter: .net
author: sumukhs
manager: timlt
editor: 
ms.assetid: 79b48ffa-2474-4f1c-a857-3471f9590ded
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 6/29/2017
ms.author: sumukhs
ms.openlocfilehash: 2b5359412ebb4ea42f3e9c22db944aea9a666bb1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="configuring-reliable-actors--reliabledictionaryactorstateprovider"></a><span data-ttu-id="9360b-103">Configuración de Reliable Actors: ReliableDictionaryActorStateProvider</span><span class="sxs-lookup"><span data-stu-id="9360b-103">Configuring Reliable Actors--ReliableDictionaryActorStateProvider</span></span>
<span data-ttu-id="9360b-104">Puede modificar configuración predeterminada de ReliableDictionaryActorStateProvider cambiando el archivo settings.xml que se genera en la raíz del paquete de Visual Studio en la carpeta Config del actor especificado.</span><span class="sxs-lookup"><span data-stu-id="9360b-104">You can modify the default configuration of ReliableDictionaryActorStateProvider by changing the settings.xml file generated in the Visual Studio package root under the Config folder for the specified actor.</span></span>

<span data-ttu-id="9360b-105">El tiempo de ejecución de Azure Service Fabric busca los nombres de sección predefinidos en el archivo settings.xml y usa los valores de configuración mientras crea los componentes en tiempo de ejecución subyacentes.</span><span class="sxs-lookup"><span data-stu-id="9360b-105">The Azure Service Fabric runtime looks for predefined section names in the settings.xml file and consumes the configuration values while creating the underlying runtime components.</span></span>

> [!NOTE]
> <span data-ttu-id="9360b-106">**No** elimine o modifique los nombres de sección de las siguientes configuraciones en el archivo settings.xml que se genera en la solución de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9360b-106">Do **not** delete or modify the section names of the following configurations in the settings.xml file that is generated in the Visual Studio solution.</span></span>
> 
> 

<span data-ttu-id="9360b-107">También hay configuraciones globales que afectan a la configuración de ReliableDictionaryActorStateProvider.</span><span class="sxs-lookup"><span data-stu-id="9360b-107">There are also global settings that affect the configuration of ReliableDictionaryActorStateProvider.</span></span>

## <a name="global-configuration"></a><span data-ttu-id="9360b-108">Configuración global</span><span class="sxs-lookup"><span data-stu-id="9360b-108">Global Configuration</span></span>
<span data-ttu-id="9360b-109">La configuración global se especifica en el manifiesto de clúster para el clúster de la sección KtlLogger.</span><span class="sxs-lookup"><span data-stu-id="9360b-109">The global configuration is specified in the cluster manifest for the cluster under the KtlLogger section.</span></span> <span data-ttu-id="9360b-110">Permite la configuración del tamaño y la ubicación del registro compartido, así como los límites de memoria global usados por el registrador.</span><span class="sxs-lookup"><span data-stu-id="9360b-110">It allows configuration of the shared log location and size plus the global memory limits used by the logger.</span></span> <span data-ttu-id="9360b-111">Tenga en cuenta que los cambios en el manifiesto de clúster afectan a todos los servicios que usan ReliableDictionaryActorStateProvider y servicios con estado confiables.</span><span class="sxs-lookup"><span data-stu-id="9360b-111">Note that changes in the cluster manifest affect all services that use ReliableDictionaryActorStateProvider and reliable stateful services.</span></span>

<span data-ttu-id="9360b-112">El manifiesto de clúster es un único archivo XML que contiene los valores y las configuraciones que se aplican a todos los nodos y servicios del clúster.</span><span class="sxs-lookup"><span data-stu-id="9360b-112">The cluster manifest is a single XML file that holds settings and configurations that apply to all nodes and services in the cluster.</span></span> <span data-ttu-id="9360b-113">El archivo suele llamarse ClusterManifest.xml.</span><span class="sxs-lookup"><span data-stu-id="9360b-113">The file is typically called ClusterManifest.xml.</span></span> <span data-ttu-id="9360b-114">Puede ver el manifiesto de clúster para su clúster usando el comando de PowerShell Get-ServiceFabricClusterManifest.</span><span class="sxs-lookup"><span data-stu-id="9360b-114">You can see the cluster manifest for your cluster using the Get-ServiceFabricClusterManifest powershell command.</span></span>

### <a name="configuration-names"></a><span data-ttu-id="9360b-115">Nombres de configuración</span><span class="sxs-lookup"><span data-stu-id="9360b-115">Configuration names</span></span>
| <span data-ttu-id="9360b-116">Nombre</span><span class="sxs-lookup"><span data-stu-id="9360b-116">Name</span></span> | <span data-ttu-id="9360b-117">Unidad</span><span class="sxs-lookup"><span data-stu-id="9360b-117">Unit</span></span> | <span data-ttu-id="9360b-118">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="9360b-118">Default value</span></span> | <span data-ttu-id="9360b-119">Comentarios</span><span class="sxs-lookup"><span data-stu-id="9360b-119">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9360b-120">WriteBufferMemoryPoolMinimumInKB</span><span class="sxs-lookup"><span data-stu-id="9360b-120">WriteBufferMemoryPoolMinimumInKB</span></span> |<span data-ttu-id="9360b-121">Kilobytes</span><span class="sxs-lookup"><span data-stu-id="9360b-121">Kilobytes</span></span> |<span data-ttu-id="9360b-122">8388608</span><span class="sxs-lookup"><span data-stu-id="9360b-122">8388608</span></span> |<span data-ttu-id="9360b-123">Número mínimo de KB que se van a asignar en modo kernel al grupo de memoria del búfer de escritura del registrador.</span><span class="sxs-lookup"><span data-stu-id="9360b-123">Minimum number of KB to allocate in kernel mode for the logger write buffer memory pool.</span></span> <span data-ttu-id="9360b-124">Este grupo de memoria se usa para almacenar en caché la información de estado antes de escribir en el disco.</span><span class="sxs-lookup"><span data-stu-id="9360b-124">This memory pool is used for caching state information before writing to disk.</span></span> |
| <span data-ttu-id="9360b-125">WriteBufferMemoryPoolMaximumInKB</span><span class="sxs-lookup"><span data-stu-id="9360b-125">WriteBufferMemoryPoolMaximumInKB</span></span> |<span data-ttu-id="9360b-126">Kilobytes</span><span class="sxs-lookup"><span data-stu-id="9360b-126">Kilobytes</span></span> |<span data-ttu-id="9360b-127">Ilimitado</span><span class="sxs-lookup"><span data-stu-id="9360b-127">No Limit</span></span> |<span data-ttu-id="9360b-128">Tamaño máximo al que puede aumentar el grupo de memoria del búfer de escritura del registrador.</span><span class="sxs-lookup"><span data-stu-id="9360b-128">Maximum size to which the logger write buffer memory pool can grow.</span></span> |
| <span data-ttu-id="9360b-129">SharedLogId</span><span class="sxs-lookup"><span data-stu-id="9360b-129">SharedLogId</span></span> |<span data-ttu-id="9360b-130">GUID</span><span class="sxs-lookup"><span data-stu-id="9360b-130">GUID</span></span> |<span data-ttu-id="9360b-131">""</span><span class="sxs-lookup"><span data-stu-id="9360b-131">""</span></span> |<span data-ttu-id="9360b-132">Especifica un GUID único que se usará para identificar el archivo de registro compartido predeterminado que usan todos los servicios de confianza en todos los nodos del clúster que no especifican SharedLogId en su configuración específica del servicio.</span><span class="sxs-lookup"><span data-stu-id="9360b-132">Specifies a unique GUID to use for identifying the default shared log file used by all reliable services on all nodes in the cluster that do not specify the SharedLogId in their service specific configuration.</span></span> <span data-ttu-id="9360b-133">Si se especifica SharedLogId, también se debe especificar SharedLogPath.</span><span class="sxs-lookup"><span data-stu-id="9360b-133">If SharedLogId is specified, then SharedLogPath must also be specified.</span></span> |
| <span data-ttu-id="9360b-134">SharedLogPath</span><span class="sxs-lookup"><span data-stu-id="9360b-134">SharedLogPath</span></span> |<span data-ttu-id="9360b-135">Nombre de ruta de acceso completo</span><span class="sxs-lookup"><span data-stu-id="9360b-135">Fully qualified path name</span></span> |<span data-ttu-id="9360b-136">""</span><span class="sxs-lookup"><span data-stu-id="9360b-136">""</span></span> |<span data-ttu-id="9360b-137">Especifica la ruta de acceso completa donde se encuentra el archivo de registro compartido que usan todos los servicios de confianza en todos los nodos del clúster que no especifican SharedLogPath en su configuración específica del servicio.</span><span class="sxs-lookup"><span data-stu-id="9360b-137">Specifies the fully qualified path where the shared log file used by all reliable services on all nodes in the cluster that do not specify the SharedLogPath in their service specific configuration.</span></span> <span data-ttu-id="9360b-138">Sin embargo, si se especifica SharedLogPath, también se debe especificar SharedLogId.</span><span class="sxs-lookup"><span data-stu-id="9360b-138">However, if SharedLogPath is specified, then SharedLogId must also be specified.</span></span> |
| <span data-ttu-id="9360b-139">SharedLogSizeInMB</span><span class="sxs-lookup"><span data-stu-id="9360b-139">SharedLogSizeInMB</span></span> |<span data-ttu-id="9360b-140">Megabytes</span><span class="sxs-lookup"><span data-stu-id="9360b-140">Megabytes</span></span> |<span data-ttu-id="9360b-141">8192</span><span class="sxs-lookup"><span data-stu-id="9360b-141">8192</span></span> |<span data-ttu-id="9360b-142">Especifica el número de MB de espacio en disco que se va a asignar estáticamente para el registro compartido.</span><span class="sxs-lookup"><span data-stu-id="9360b-142">Specifies the number of MB of disk space to statically allocate for the shared log.</span></span> <span data-ttu-id="9360b-143">El valor deber ser 2048 o superior.</span><span class="sxs-lookup"><span data-stu-id="9360b-143">The value must be 2048 or larger.</span></span> |

### <a name="sample-cluster-manifest-section"></a><span data-ttu-id="9360b-144">Ejemplo de sección de manifiesto de clúster</span><span class="sxs-lookup"><span data-stu-id="9360b-144">Sample cluster manifest section</span></span>
```xml
   <Section Name="KtlLogger">
     <Parameter Name="WriteBufferMemoryPoolMinimumInKB" Value="8192" />
     <Parameter Name="WriteBufferMemoryPoolMaximumInKB" Value="8192" />
     <Parameter Name="SharedLogId" Value="{7668BB54-FE9C-48ed-81AC-FF89E60ED2EF}"/>
     <Parameter Name="SharedLogPath" Value="f:\SharedLog.Log"/>
     <Parameter Name="SharedLogSizeInMB" Value="16383"/>
   </Section>
```

### <a name="remarks"></a><span data-ttu-id="9360b-145">Comentarios</span><span class="sxs-lookup"><span data-stu-id="9360b-145">Remarks</span></span>
<span data-ttu-id="9360b-146">El registrador tiene un grupo global de memoria asignado desde la memoria del kernel no paginada que está disponible para todos los servicios de confianza en un nodo para almacenar en caché los datos de estado antes de que se escriban en el registro específico asociado con la réplica del servicio de confianza.</span><span class="sxs-lookup"><span data-stu-id="9360b-146">The logger has a global pool of memory allocated from non paged kernel memory that is available to all reliable services on a node for caching state data before being written to the dedicated log associated with the reliable service replica.</span></span> <span data-ttu-id="9360b-147">El tamaño del grupo se controla mediante las opciones WriteBufferMemoryPoolMinimumInKB y WriteBufferMemoryPoolMaximumInKB.</span><span class="sxs-lookup"><span data-stu-id="9360b-147">The pool size is controlled by the WriteBufferMemoryPoolMinimumInKB and WriteBufferMemoryPoolMaximumInKB settings.</span></span> <span data-ttu-id="9360b-148">WriteBufferMemoryPoolMinimumInKB especifica el tamaño inicial de este grupo de memoria y el tamaño mínimo al que se puede reducir el grupo de memoria.</span><span class="sxs-lookup"><span data-stu-id="9360b-148">WriteBufferMemoryPoolMinimumInKB specifies both the initial size of this memory pool and the lowest size to which the memory pool may shrink.</span></span> <span data-ttu-id="9360b-149">WriteBufferMemoryPoolMaximumInKB es el tamaño máximo que puede alcanzar el grupo de memoria.</span><span class="sxs-lookup"><span data-stu-id="9360b-149">WriteBufferMemoryPoolMaximumInKB is the highest size to which the memory pool may grow.</span></span> <span data-ttu-id="9360b-150">Cada réplica de un servicio de confianza que está abierta puede aumentar el tamaño del grupo de memoria en una cantidad que determina el sistema hasta WriteBufferMemoryPoolMaximumInKB.</span><span class="sxs-lookup"><span data-stu-id="9360b-150">Each reliable service replica that is opened may increase the size of the memory pool by a system determined amount up to WriteBufferMemoryPoolMaximumInKB.</span></span> <span data-ttu-id="9360b-151">Si el grupo de memoria demanda más memoria de la que hay disponible, las solicitudes de memoria se retrasarán hasta que haya memoria disponible.</span><span class="sxs-lookup"><span data-stu-id="9360b-151">If there is more demand for memory from the memory pool than is available, requests for memory will be delayed until memory is available.</span></span> <span data-ttu-id="9360b-152">Por lo tanto, si el grupo de memoria del búfer de escritura es demasiado pequeño para una configuración concreta, el rendimiento se puede ver afectado.</span><span class="sxs-lookup"><span data-stu-id="9360b-152">Therefore if the write buffer memory pool is too small for a particular configuration then performance may suffer.</span></span>

<span data-ttu-id="9360b-153">Los parámetros SharedLogId y SharedLogPath siempre se usan juntos para definir el GUID y la ubicación del registro compartido predeterminado de todos los nodos del clúster.</span><span class="sxs-lookup"><span data-stu-id="9360b-153">The SharedLogId and SharedLogPath settings are always used together to define the GUID and location for the default shared log for all nodes in the cluster.</span></span> <span data-ttu-id="9360b-154">El registro compartido predeterminado se usa para todos los servicios de confianza que no especifican los valores de configuración en el archivo settings.xml para el servicio específico.</span><span class="sxs-lookup"><span data-stu-id="9360b-154">The default shared log is used for all reliable services that do not specify the settings in the settings.xml for the specific service.</span></span> <span data-ttu-id="9360b-155">Para obtener un mejor rendimiento, los archivos de registro compartidos deben colocarse en discos que se usen únicamente para el archivo de registro compartido, de modo que se reduzca la contención.</span><span class="sxs-lookup"><span data-stu-id="9360b-155">For best performance, shared log files should be placed on disks that are used solely for the shared log file to reduce contention.</span></span>

<span data-ttu-id="9360b-156">SharedLogSizeInMB especifica la cantidad de espacio en disco que se va a preasignar para el registro compartido predeterminado en todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="9360b-156">SharedLogSizeInMB specifies the amount of disk space to preallocate for the default shared log on all nodes.</span></span>  <span data-ttu-id="9360b-157">No es necesario especificar SharedLogId y SharedLogPath para poder especificar SharedLogSizeInMB.</span><span class="sxs-lookup"><span data-stu-id="9360b-157">SharedLogId and SharedLogPath do not need to be specified in order for SharedLogSizeInMB to be specified.</span></span>

## <a name="replicator-security-configuration"></a><span data-ttu-id="9360b-158">Configuración de seguridad del replicador</span><span class="sxs-lookup"><span data-stu-id="9360b-158">Replicator security configuration</span></span>
<span data-ttu-id="9360b-159">Las configuraciones de seguridad del replicador se usan para proteger el canal de comunicación que se usa durante la replicación.</span><span class="sxs-lookup"><span data-stu-id="9360b-159">Replicator security configurations are used to secure the communication channel that is used during replication.</span></span> <span data-ttu-id="9360b-160">Esto significa que los servicios no ven el tráfico de replicación de unos y los otros, lo que garantiza que los datos de alta disponibilidad también están protegidos.</span><span class="sxs-lookup"><span data-stu-id="9360b-160">This means that services cannot see each other's replication traffic, ensuring the data that is made highly available is also secure.</span></span>
<span data-ttu-id="9360b-161">De forma predeterminada, una sección de configuración de seguridad vacía impide la seguridad de replicación.</span><span class="sxs-lookup"><span data-stu-id="9360b-161">By default, an empty security configuration section prevents replication security.</span></span>

### <a name="section-name"></a><span data-ttu-id="9360b-162">Nombre de sección</span><span class="sxs-lookup"><span data-stu-id="9360b-162">Section name</span></span>
<span data-ttu-id="9360b-163">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span><span class="sxs-lookup"><span data-stu-id="9360b-163">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span></span>

## <a name="replicator-configuration"></a><span data-ttu-id="9360b-164">Configuración de replicador</span><span class="sxs-lookup"><span data-stu-id="9360b-164">Replicator configuration</span></span>
<span data-ttu-id="9360b-165">Las configuraciones del replicador se usan para configurar el replicador que es responsable de hacer que el proveedor de estado del actor resulte altamente confiable mediante la replicación y la conservación del estado de forma local.</span><span class="sxs-lookup"><span data-stu-id="9360b-165">Replicator configurations are used to configure the replicator that is responsible for making the Actor State Provider state highly reliable by replicating and persisting the state locally.</span></span>
<span data-ttu-id="9360b-166">La configuración predeterminada es generada por la plantilla de Visual Studio y debe ser suficiente.</span><span class="sxs-lookup"><span data-stu-id="9360b-166">The default configuration is generated by the Visual Studio template and should suffice.</span></span> <span data-ttu-id="9360b-167">En esta sección se habla sobre las configuraciones adicionales que están disponibles para optimizar el replicador.</span><span class="sxs-lookup"><span data-stu-id="9360b-167">This section talks about additional configurations that are available to tune the replicator.</span></span>

### <a name="section-name"></a><span data-ttu-id="9360b-168">Nombre de sección</span><span class="sxs-lookup"><span data-stu-id="9360b-168">Section name</span></span>
<span data-ttu-id="9360b-169">&lt;ActorName&gt;ServiceReplicatorConfig</span><span class="sxs-lookup"><span data-stu-id="9360b-169">&lt;ActorName&gt;ServiceReplicatorConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="9360b-170">Nombres de configuración</span><span class="sxs-lookup"><span data-stu-id="9360b-170">Configuration names</span></span>
| <span data-ttu-id="9360b-171">Nombre</span><span class="sxs-lookup"><span data-stu-id="9360b-171">Name</span></span> | <span data-ttu-id="9360b-172">Unidad</span><span class="sxs-lookup"><span data-stu-id="9360b-172">Unit</span></span> | <span data-ttu-id="9360b-173">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="9360b-173">Default value</span></span> | <span data-ttu-id="9360b-174">Comentarios</span><span class="sxs-lookup"><span data-stu-id="9360b-174">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9360b-175">BatchAcknowledgementInterval</span><span class="sxs-lookup"><span data-stu-id="9360b-175">BatchAcknowledgementInterval</span></span> |<span data-ttu-id="9360b-176">Segundos</span><span class="sxs-lookup"><span data-stu-id="9360b-176">Seconds</span></span> |<span data-ttu-id="9360b-177">0.015</span><span class="sxs-lookup"><span data-stu-id="9360b-177">0.015</span></span> |<span data-ttu-id="9360b-178">Período de tiempo durante el que el replicador del secundario espera después de recibir una operación antes de enviar una confirmación al principal.</span><span class="sxs-lookup"><span data-stu-id="9360b-178">Time period for which the replicator at the secondary waits after receiving an operation before sending back an acknowledgement to the primary.</span></span> <span data-ttu-id="9360b-179">El resto de confirmaciones que se enviarán para las operaciones que se procesan dentro de este intervalo se envían como una respuesta.</span><span class="sxs-lookup"><span data-stu-id="9360b-179">Any other acknowledgements to be sent for operations processed within this interval are sent as one response.</span></span> |
| <span data-ttu-id="9360b-180">ReplicatorEndpoint</span><span class="sxs-lookup"><span data-stu-id="9360b-180">ReplicatorEndpoint</span></span> |<span data-ttu-id="9360b-181">N/D</span><span class="sxs-lookup"><span data-stu-id="9360b-181">N/A</span></span> |<span data-ttu-id="9360b-182">Ningún valor predeterminado: parámetro obligatorio</span><span class="sxs-lookup"><span data-stu-id="9360b-182">No default--required parameter</span></span> |<span data-ttu-id="9360b-183">Dirección IP y puerto que usará el replicador principal y secundario para comunicarse con otros replicadores del conjunto de réplicas.</span><span class="sxs-lookup"><span data-stu-id="9360b-183">IP address and port that the primary/secondary replicator will use to communicate with other replicators in the replica set.</span></span> <span data-ttu-id="9360b-184">Esto debe hacer referencia a un punto de conexión de recursos de TCP en el manifiesto de servicio.</span><span class="sxs-lookup"><span data-stu-id="9360b-184">This should reference a TCP resource endpoint in the service manifest.</span></span> <span data-ttu-id="9360b-185">Consulte [Recursos del manifiesto de servicio](service-fabric-service-manifest-resources.md) para obtener más información sobre cómo definir recursos de punto de conexión en el manifiesto de servicio.</span><span class="sxs-lookup"><span data-stu-id="9360b-185">Refer to [Service manifest resources](service-fabric-service-manifest-resources.md) to read more about defining endpoint resources in service manifest.</span></span> |
| <span data-ttu-id="9360b-186">MaxReplicationMessageSize</span><span class="sxs-lookup"><span data-stu-id="9360b-186">MaxReplicationMessageSize</span></span> |<span data-ttu-id="9360b-187">Bytes</span><span class="sxs-lookup"><span data-stu-id="9360b-187">Bytes</span></span> |<span data-ttu-id="9360b-188">50 MB</span><span class="sxs-lookup"><span data-stu-id="9360b-188">50 MB</span></span> |<span data-ttu-id="9360b-189">Tamaño máximo de los datos de replicación que se puede transmitir en un único mensaje.</span><span class="sxs-lookup"><span data-stu-id="9360b-189">Maximum size of replication data that can be transmitted in a single message.</span></span> |
| <span data-ttu-id="9360b-190">MaxPrimaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="9360b-190">MaxPrimaryReplicationQueueSize</span></span> |<span data-ttu-id="9360b-191">Número de operaciones</span><span class="sxs-lookup"><span data-stu-id="9360b-191">Number of operations</span></span> |<span data-ttu-id="9360b-192">8192</span><span class="sxs-lookup"><span data-stu-id="9360b-192">8192</span></span> |<span data-ttu-id="9360b-193">Número máximo de operaciones de la cola principal.</span><span class="sxs-lookup"><span data-stu-id="9360b-193">Maximum number of operations in the primary queue.</span></span> <span data-ttu-id="9360b-194">Una operación se libera después de que el replicador principal reciba una confirmación de todos los replicadores secundarios.</span><span class="sxs-lookup"><span data-stu-id="9360b-194">An operation is freed up after the primary replicator receives an acknowledgement from all the secondary replicators.</span></span> <span data-ttu-id="9360b-195">Este valor debe ser mayor que 64 y una potencia de 2.</span><span class="sxs-lookup"><span data-stu-id="9360b-195">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="9360b-196">MaxSecondaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="9360b-196">MaxSecondaryReplicationQueueSize</span></span> |<span data-ttu-id="9360b-197">Número de operaciones</span><span class="sxs-lookup"><span data-stu-id="9360b-197">Number of operations</span></span> |<span data-ttu-id="9360b-198">16384</span><span class="sxs-lookup"><span data-stu-id="9360b-198">16384</span></span> |<span data-ttu-id="9360b-199">Número máximo de operaciones de la cola secundaria.</span><span class="sxs-lookup"><span data-stu-id="9360b-199">Maximum number of operations in the secondary queue.</span></span> <span data-ttu-id="9360b-200">Una operación se libera después de que su estado pase a ser de alta disponibilidad mediante persistencia.</span><span class="sxs-lookup"><span data-stu-id="9360b-200">An operation is freed up after making its state highly available through persistence.</span></span> <span data-ttu-id="9360b-201">Este valor debe ser mayor que 64 y una potencia de 2.</span><span class="sxs-lookup"><span data-stu-id="9360b-201">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="9360b-202">CheckpointThresholdInMB</span><span class="sxs-lookup"><span data-stu-id="9360b-202">CheckpointThresholdInMB</span></span> |<span data-ttu-id="9360b-203">MB</span><span class="sxs-lookup"><span data-stu-id="9360b-203">MB</span></span> |<span data-ttu-id="9360b-204">200</span><span class="sxs-lookup"><span data-stu-id="9360b-204">200</span></span> |<span data-ttu-id="9360b-205">Cantidad del espacio del archivo de registro después de que se compruebe el estado.</span><span class="sxs-lookup"><span data-stu-id="9360b-205">Amount of log file space after which the state is checkpointed.</span></span> |
| <span data-ttu-id="9360b-206">MaxRecordSizeInKB</span><span class="sxs-lookup"><span data-stu-id="9360b-206">MaxRecordSizeInKB</span></span> |<span data-ttu-id="9360b-207">KB</span><span class="sxs-lookup"><span data-stu-id="9360b-207">KB</span></span> |<span data-ttu-id="9360b-208">1024</span><span class="sxs-lookup"><span data-stu-id="9360b-208">1024</span></span> |<span data-ttu-id="9360b-209">Tamaño del registro de mayor tamaño el replicador que puede escribir en el registro.</span><span class="sxs-lookup"><span data-stu-id="9360b-209">Largest record size that the replicator may write in the log.</span></span> <span data-ttu-id="9360b-210">Este valor debe ser un múltiplo de 4 y superior a 16.</span><span class="sxs-lookup"><span data-stu-id="9360b-210">This value must be a multiple of 4 and greater than 16.</span></span> |
| <span data-ttu-id="9360b-211">OptimizeLogForLowerDiskUsage</span><span class="sxs-lookup"><span data-stu-id="9360b-211">OptimizeLogForLowerDiskUsage</span></span> |<span data-ttu-id="9360b-212">Booleano</span><span class="sxs-lookup"><span data-stu-id="9360b-212">Boolean</span></span> |<span data-ttu-id="9360b-213">true</span><span class="sxs-lookup"><span data-stu-id="9360b-213">true</span></span> |<span data-ttu-id="9360b-214">Cuando su valor es true, el registro se configura para que el archivo de registro específico de la réplica se cree usando un archivo disperso de NTFS.</span><span class="sxs-lookup"><span data-stu-id="9360b-214">When true, the log is configured so that the replica's dedicated log file is created by using an NTFS sparse file.</span></span> <span data-ttu-id="9360b-215">Esto reduce el uso del espacio en disco real del archivo.</span><span class="sxs-lookup"><span data-stu-id="9360b-215">This lowers the actual disk space usage for the file.</span></span> <span data-ttu-id="9360b-216">Cuando es false, el archivo se crea con asignaciones fijas, que ofrecen el mejor rendimiento de escritura.</span><span class="sxs-lookup"><span data-stu-id="9360b-216">When false, the file is created with fixed allocations, which provide the best write performance.</span></span> |
| <span data-ttu-id="9360b-217">SharedLogId</span><span class="sxs-lookup"><span data-stu-id="9360b-217">SharedLogId</span></span> |<span data-ttu-id="9360b-218">GUID</span><span class="sxs-lookup"><span data-stu-id="9360b-218">guid</span></span> |<span data-ttu-id="9360b-219">""</span><span class="sxs-lookup"><span data-stu-id="9360b-219">""</span></span> |<span data-ttu-id="9360b-220">Especifica un guid único que debe usarse para identificar el archivo de registro compartido que se usa con esta réplica.</span><span class="sxs-lookup"><span data-stu-id="9360b-220">Specifies a unique guid to use for identifying the shared log file used with this replica.</span></span> <span data-ttu-id="9360b-221">Normalmente, los servicios no deben usar esta opción de configuración.</span><span class="sxs-lookup"><span data-stu-id="9360b-221">Typically, services should not use this setting.</span></span> <span data-ttu-id="9360b-222">Sin embargo, si se especifica SharedLogId, también se debe especificar SharedLogPath.</span><span class="sxs-lookup"><span data-stu-id="9360b-222">However, if SharedLogId is specified, then SharedLogPath must also be specified.</span></span> |
| <span data-ttu-id="9360b-223">SharedLogPath</span><span class="sxs-lookup"><span data-stu-id="9360b-223">SharedLogPath</span></span> |<span data-ttu-id="9360b-224">Nombre de ruta de acceso completo</span><span class="sxs-lookup"><span data-stu-id="9360b-224">Fully qualified path name</span></span> |<span data-ttu-id="9360b-225">""</span><span class="sxs-lookup"><span data-stu-id="9360b-225">""</span></span> |<span data-ttu-id="9360b-226">Especifica la ruta de acceso completa donde se creará el archivo de registro compartido para esta réplica.</span><span class="sxs-lookup"><span data-stu-id="9360b-226">Specifies the fully qualified path where the shared log file for this replica will be created.</span></span> <span data-ttu-id="9360b-227">Normalmente, los servicios no deben usar esta opción de configuración.</span><span class="sxs-lookup"><span data-stu-id="9360b-227">Typically, services should not use this setting.</span></span> <span data-ttu-id="9360b-228">Sin embargo, si se especifica SharedLogPath, también se debe especificar SharedLogId.</span><span class="sxs-lookup"><span data-stu-id="9360b-228">However, if SharedLogPath is specified, then SharedLogId must also be specified.</span></span> |

## <a name="sample-configuration-file"></a><span data-ttu-id="9360b-229">Archivo de configuración de muestra</span><span class="sxs-lookup"><span data-stu-id="9360b-229">Sample configuration file</span></span>
```xml
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <Section Name="MyActorServiceReplicatorConfig">
      <Parameter Name="ReplicatorEndpoint" Value="MyActorServiceReplicatorEndpoint" />
      <Parameter Name="BatchAcknowledgementInterval" Value="0.05"/>
      <Parameter Name="CheckpointThresholdInMB" Value="180" />
   </Section>
   <Section Name="MyActorServiceReplicatorSecurityConfig">
      <Parameter Name="CredentialType" Value="X509" />
      <Parameter Name="FindType" Value="FindByThumbprint" />
      <Parameter Name="FindValue" Value="9d c9 06 b1 69 dc 4f af fd 16 97 ac 78 1e 80 67 90 74 9d 2f" />
      <Parameter Name="StoreLocation" Value="LocalMachine" />
      <Parameter Name="StoreName" Value="My" />
      <Parameter Name="ProtectionLevel" Value="EncryptAndSign" />
      <Parameter Name="AllowedCommonNames" Value="My-Test-SAN1-Alice,My-Test-SAN1-Bob" />
   </Section>
</Settings>
```

## <a name="remarks"></a><span data-ttu-id="9360b-230">Comentarios</span><span class="sxs-lookup"><span data-stu-id="9360b-230">Remarks</span></span>
<span data-ttu-id="9360b-231">El parámetro BatchAcknowledgementInterval controla la latencia de replicación.</span><span class="sxs-lookup"><span data-stu-id="9360b-231">The BatchAcknowledgementInterval parameter controls replication latency.</span></span> <span data-ttu-id="9360b-232">Un valor de "0" ofrecerá la menor latencia posible, a costa del rendimiento (como deben enviarse y procesarse más mensajes de confirmación, cada uno con menos confirmaciones).</span><span class="sxs-lookup"><span data-stu-id="9360b-232">A value of '0' results in the lowest possible latency, at the cost of throughput (as more acknowledgement messages must be sent and processed, each containing fewer acknowledgements).</span></span>
<span data-ttu-id="9360b-233">Cuanto mayor sea el valor de BatchAcknowledgementInterval, mayor será el rendimiento general de la replicación a costa de una mayor latencia de la operación.</span><span class="sxs-lookup"><span data-stu-id="9360b-233">The larger the value for BatchAcknowledgementInterval, the higher the overall replication throughput, at the cost of higher operation latency.</span></span> <span data-ttu-id="9360b-234">Esto se traduce directamente en la latencia de transacciones confirmadas.</span><span class="sxs-lookup"><span data-stu-id="9360b-234">This directly translates to the latency of transaction commits.</span></span>

<span data-ttu-id="9360b-235">El valor del parámetro CheckpointThresholdInMB controla la cantidad de espacio en disco que el replicador puede usar para almacenar información de estado en el archivo de registro específico de la réplica.</span><span class="sxs-lookup"><span data-stu-id="9360b-235">The CheckpointThresholdInMB parameter controls the amount of disk space that the replicator can use to store state information in the replica's dedicated log file.</span></span> <span data-ttu-id="9360b-236">Aumentar este valor a un valor mayor que el valor predeterminado puede provocar tiempos de reconfiguración cuando se agrega una nueva réplica para el conjunto.</span><span class="sxs-lookup"><span data-stu-id="9360b-236">Increasing this to a higher value than the default could result in faster reconfiguration times when a new replica is added to the set.</span></span> <span data-ttu-id="9360b-237">Esto se debe a la transferencia de estado parcial que tiene lugar debido a la disponibilidad de mayor cantidad de historial de operaciones en el registro.</span><span class="sxs-lookup"><span data-stu-id="9360b-237">This is due to the partial state transfer that takes place due to the availability of more history of operations in the log.</span></span> <span data-ttu-id="9360b-238">Esto podría aumentar el tiempo de recuperación de una réplica después de un error.</span><span class="sxs-lookup"><span data-stu-id="9360b-238">This can potentially increase the recovery time of a replica after a crash.</span></span>

<span data-ttu-id="9360b-239">Si establece OptimizeForLowerDiskUsage en true, el espacio del archivo de registro se sobreaprovisionará para que las réplicas activas puedan almacenar más información de estado en sus archivos de registro, mientras que las réplicas inactivas usarán menos espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9360b-239">If you set OptimizeForLowerDiskUsage to true, log file space will be over-provisioned so that active replicas can store more state information in their log files, while inactive replicas will use less disk space.</span></span> <span data-ttu-id="9360b-240">Esto permite hospedar más réplicas en un nodo.</span><span class="sxs-lookup"><span data-stu-id="9360b-240">This makes it possible to host more replicas on a node.</span></span> <span data-ttu-id="9360b-241">Si establece OptimizeForLowerDiskUsage en false, la información de estado se escribe en los archivos de registro más rápidamente.</span><span class="sxs-lookup"><span data-stu-id="9360b-241">If you set OptimizeForLowerDiskUsage to false, the state information is written to the log files more quickly.</span></span>

<span data-ttu-id="9360b-242">El parámetro MaxRecordSizeInKB define el tamaño máximo de un registro que el replicador puede escribir en el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="9360b-242">The MaxRecordSizeInKB setting defines the maximum size of a record that can be written by the replicator into the log file.</span></span> <span data-ttu-id="9360b-243">En la mayoría de los casos, el tamaño predeterminado de 1024 KB del registro es óptimo.</span><span class="sxs-lookup"><span data-stu-id="9360b-243">In most cases, the default 1024-KB record size is optimal.</span></span> <span data-ttu-id="9360b-244">Sin embargo, si el servicio hace que elementos de datos de mayor tamaño formen parte de la información de estado, es posible que este valor se tenga que aumentar.</span><span class="sxs-lookup"><span data-stu-id="9360b-244">However, if the service is causing larger data items to be part of the state information, then this value might need to be increased.</span></span> <span data-ttu-id="9360b-245">Hay pocas ventajas en cambiar MaxRecordSizeInKB para que tenga un tamaño inferior a 1024, ya que los registros más pequeños solamente usan el espacio necesario para el registro más pequeño.</span><span class="sxs-lookup"><span data-stu-id="9360b-245">There is little benefit in making MaxRecordSizeInKB smaller than 1024, as smaller records use only the space needed for the smaller record.</span></span> <span data-ttu-id="9360b-246">Se espera que este valor solo tuviera que cambiarse en raras ocasiones.</span><span class="sxs-lookup"><span data-stu-id="9360b-246">We expect that this value would need to be changed only in rare cases.</span></span>

<span data-ttu-id="9360b-247">Los parámetros SharedLogId y SharedLogPath siempre se usan en conjunto para obligar a un servicio a usar un registro compartido independiente del registro compartido predeterminado del nodo.</span><span class="sxs-lookup"><span data-stu-id="9360b-247">The SharedLogId and SharedLogPath settings are always used together to make a service use a separate shared log from the default shared log for the node.</span></span> <span data-ttu-id="9360b-248">Para obtener una mayor eficacia, todos los servicios posibles deben especificar el mismo registro compartido.</span><span class="sxs-lookup"><span data-stu-id="9360b-248">For best efficiency, as many services as possible should specify the same shared log.</span></span> <span data-ttu-id="9360b-249">Para reducir la contención del movimiento de encabezados, los archivos de registro compartido deben colocarse en discos que se usen únicamente para el archivo de registro compartido </span><span class="sxs-lookup"><span data-stu-id="9360b-249">Shared log files should be placed on disks that are used solely for the shared log file, to reduce head movement contention.</span></span> <span data-ttu-id="9360b-250">Se espera que estos valores solo tuvieran que cambiarse en raras ocasiones.</span><span class="sxs-lookup"><span data-stu-id="9360b-250">We expect that these values would need to be changed only in rare cases.</span></span>


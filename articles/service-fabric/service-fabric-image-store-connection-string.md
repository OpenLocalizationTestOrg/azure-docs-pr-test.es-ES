---
title: "Cadena de conexión del almacén de imágenes de Azure Service Fabric | Microsoft Docs"
description: "Descripción de la cadena de conexión del almacén de imágenes"
services: service-fabric
documentationcenter: .net
author: alexwun
manager: timlt
editor: 
ms.assetid: 00f8059d-9d53-4cb8-b44a-b25149de3030
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/07/2017
ms.author: alexwun
ms.openlocfilehash: f497006a8ba48da0032b82113702d8014952ca20
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="understand-the-imagestoreconnectionstring-setting"></a><span data-ttu-id="7bc2e-103">Descripción del valor ImageStoreConnectionString</span><span class="sxs-lookup"><span data-stu-id="7bc2e-103">Understand the ImageStoreConnectionString setting</span></span>

<span data-ttu-id="7bc2e-104">En alguna parte de nuestra documentación, se menciona brevemente la existencia de un parámetro "ImageStoreConnectionString" sin describir lo que realmente significa.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-104">In some of our documentation, we briefly mention the existence of an "ImageStoreConnectionString" parameter without describing what it really means.</span></span> <span data-ttu-id="7bc2e-105">Y después de pasar por un artículo como [Implementación y eliminación de aplicaciones con PowerShell][10], parece que todo lo que hace es copiar y pegar el valor tal y como aparece en el manifiesto de clúster del clúster de destino.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-105">And after going through an article like [Deploy and remove applications using PowerShell][10], it looks like all you do is copy/paste the value as it appears in the cluster manifest of the target cluster.</span></span> <span data-ttu-id="7bc2e-106">Por tanto, el valor se debe configurar por clúster, pero cuando se crea un clúster a través de [Azure Portal][11], no hay ninguna opción para configurar este valor y siempre es "fabric:ImageStore".</span><span class="sxs-lookup"><span data-stu-id="7bc2e-106">So the setting must be configurable per cluster, but when you create a cluster through the [Azure portal][11], there's no option to configure this setting and it's always "fabric:ImageStore".</span></span> <span data-ttu-id="7bc2e-107">Entonces, ¿cuál es la finalidad de este valor?</span><span class="sxs-lookup"><span data-stu-id="7bc2e-107">What's the purpose of this setting then?</span></span>

![Manifiesto de clúster][img_cm]

<span data-ttu-id="7bc2e-109">Service Fabric comenzó como una plataforma para consumo interno de Microsoft por numerosos y diferentes equipos, por lo que algunos aspectos de la misma son muy personalizables (por ejemplo, el "almacén de imágenes").</span><span class="sxs-lookup"><span data-stu-id="7bc2e-109">Service Fabric started off as a platform for internal Microsoft consumption by many diverse teams, so some aspects of it are highly customizable - the "Image Store" is one such aspect.</span></span> <span data-ttu-id="7bc2e-110">En esencia, el almacén de imágenes es un repositorio conectable para almacenar paquetes de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-110">Essentially, the Image Store is a pluggable repository for storing application packages.</span></span> <span data-ttu-id="7bc2e-111">Cuando la aplicación se implementa en un nodo del clúster, dicho nodo descarga el contenido del paquete de aplicación desde el almacén de imágenes.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-111">When your application is deployed to a node in the cluster, that node downloads the contents of your application package from the Image Store.</span></span> <span data-ttu-id="7bc2e-112">ImageStoreConnectionString es un valor que incluye toda la información necesaria para los clientes y nodos para buscar el almacén de imágenes correcto para un clúster determinado.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-112">The ImageStoreConnectionString is a setting that includes all the necessary information for both clients and nodes to find the correct Image Store for a given cluster.</span></span>

<span data-ttu-id="7bc2e-113">Actualmente existen tres posibles tipos de proveedores de almacenes de imágenes y sus correspondientes cadenas de conexión son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="7bc2e-113">There are currently three possible kinds of Image Store providers and their corresponding connection strings are as follows:</span></span>

1. <span data-ttu-id="7bc2e-114">Servicio de almacén de imágenes: "fabric:ImageStore"</span><span class="sxs-lookup"><span data-stu-id="7bc2e-114">Image Store Service: "fabric:ImageStore"</span></span>

2. <span data-ttu-id="7bc2e-115">Sistema de archivos: "file:[ruta de acceso al sistema de archivos]"</span><span class="sxs-lookup"><span data-stu-id="7bc2e-115">File System: "file:[file system path]"</span></span>

3. <span data-ttu-id="7bc2e-116">Azure Storage: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span><span class="sxs-lookup"><span data-stu-id="7bc2e-116">Azure Storage: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span></span>

<span data-ttu-id="7bc2e-117">El tipo de proveedor utilizado en producción es el servicio de almacén de imágenes, que es un servicio de sistema persistente con estado que puede ver en Service Fabric Explorer.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-117">The provider type used in production is the Image Store Service, which is a stateful persisted system service that you can see from Service Fabric Explorer.</span></span> 

![Servicio de almacén de imágenes][img_is]

<span data-ttu-id="7bc2e-119">El hospedaje del almacén de imágenes en un servicio de sistema dentro del propio clúster elimina dependencias externas para el repositorio de paquetes y nos proporciona mayor control sobre la localidad del almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-119">Hosting the Image Store in a system service within the cluster itself eliminates external dependencies for the package repository and gives us more control over the locality of storage.</span></span> <span data-ttu-id="7bc2e-120">Es probable que las futuras mejoras para el almacén de imágenes se centren primero, si no exclusivamente, en el proveedor de dicho almacén.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-120">Future improvements around the Image Store are likely to target the Image Store provider first, if not exclusively.</span></span> <span data-ttu-id="7bc2e-121">La cadena de conexión para el proveedor del servicio de almacén de imágenes no tiene ninguna información exclusiva puesto que el cliente ya está conectado al clúster de destino.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-121">The connection string for the Image Store Service provider doesn't have any unique information since the client is already connected to the target cluster.</span></span> <span data-ttu-id="7bc2e-122">El cliente solo debe saber que se deben usar protocolos cuyo destino sea el servicio del sistema.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-122">The client only needs to know that protocols targeting the system service should be used.</span></span>

<span data-ttu-id="7bc2e-123">El proveedor del sistema de archivos se utiliza en lugar del servicio de almacén de imágenes para los clústeres one-box locales durante el desarrollo para arrancar el clúster un poco más rápido.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-123">The File System provider is used instead of the Image Store Service for local one-box clusters during development to bootstrap the cluster slightly faster.</span></span> <span data-ttu-id="7bc2e-124">La diferencia es generalmente pequeña, pero es una optimización útil para la mayoría de la gente durante el desarrollo.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-124">The difference is typically small, but it's a useful optimization for most folks during development.</span></span> <span data-ttu-id="7bc2e-125">Es posible implementar también un clúster one-box local con los otros tipos de proveedor de almacenamiento, pero normalmente no hay ninguna razón para hacerlo ya que el flujo de trabajo de desarrollo y pruebas sigue siendo el mismo independientemente del proveedor.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-125">It's possible to deploy a local one-box cluster with the other storage provider types as well, but there's usually no reason to do so since the develop/test workflow remains the same regardless of provider.</span></span> <span data-ttu-id="7bc2e-126">Aparte de este uso, los proveedores de sistema de archivos y de Azure Storage solo existen para la compatibilidad heredada.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-126">Other than this usage, the File System and Azure Storage providers only exist for legacy support.</span></span>

<span data-ttu-id="7bc2e-127">Por lo tanto, aunque ImageStoreConnectionString se puede configurar, generalmente solo se usa el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-127">So while the ImageStoreConnectionString is configurable, you generally just use the default setting.</span></span> <span data-ttu-id="7bc2e-128">Al publicar en Azure a través de [Visual Studio][12], el parámetro se establece automáticamente en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-128">When publishing to Azure through [Visual Studio][12], the parameter is automatically set for you accordingly.</span></span> <span data-ttu-id="7bc2e-129">Para la implementación mediante programación en clústeres hospedados en Azure, la cadena de conexión siempre es "fabric:ImageStore".</span><span class="sxs-lookup"><span data-stu-id="7bc2e-129">For programmatic deployment to clusters hosted in Azure, the connection string is always "fabric:ImageStore".</span></span> <span data-ttu-id="7bc2e-130">Sin embargo, en caso de duda, su valor siempre se puede comprobar recuperando el manifiesto de clúster mediante [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx) o [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span><span class="sxs-lookup"><span data-stu-id="7bc2e-130">Though when in doubt, its value can always be verified by retrieving the cluster manifest by [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx), or [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span></span> <span data-ttu-id="7bc2e-131">Tanto los clústeres de producción como de prueba locales siempre deben configurarse para usar también el proveedor de servicio de almacén de imágenes.</span><span class="sxs-lookup"><span data-stu-id="7bc2e-131">Both on-premises test and production clusters should always be configured to use the Image Store Service provider as well.</span></span>

### <a name="next-steps"></a><span data-ttu-id="7bc2e-132">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="7bc2e-132">Next steps</span></span>
<span data-ttu-id="7bc2e-133">[Implementación y eliminación de aplicaciones con PowerShell][10]</span><span class="sxs-lookup"><span data-stu-id="7bc2e-133">[Deploy and remove applications using PowerShell][10]</span></span>

<!--Image references-->
[img_is]: ./media/service-fabric-image-store-connection-string/image_store_service.png
[img_cm]: ./media/service-fabric-image-store-connection-string/cluster_manifest.png

[10]: service-fabric-deploy-remove-applications.md
[11]: service-fabric-cluster-creation-via-portal.md
[12]: service-fabric-publish-app-remote-cluster.md

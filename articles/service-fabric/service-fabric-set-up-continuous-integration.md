---
title: "Configuración de la integración continua de microservicios de Azure | Microsoft Docs"
description: "Obtenga información general sobre cómo configurar la integración continua y la implementación para una aplicación de Service Fabric mediante Visual Studio Team Services (VSTS)."
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 76a1e013e824910c7a489e345b6563ae3951378f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="5db5b-103">Configuración de la integración continua y la implementación de Service Fabric con Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="5db5b-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="5db5b-104">En este artículo se describen los pasos necesarios para configurar la integración continua y la implementación de una aplicación de Azure Service Fabric mediante Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="5db5b-104">This article describes the steps to set up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="5db5b-105">Este documento refleja el procedimiento actual y se espera que cambie con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="5db5b-105">This document reflects the current procedure and is expected to change over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5db5b-106">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="5db5b-106">Prerequisites</span></span>
<span data-ttu-id="5db5b-107">Para comenzar, asegúrese de lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5db5b-107">To get started, follow these steps:</span></span>

1. <span data-ttu-id="5db5b-108">Tiene acceso a una cuenta de Team Services; en caso contrario, [cree una](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) .</span><span class="sxs-lookup"><span data-stu-id="5db5b-108">Ensure that you have access to a Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="5db5b-109">Puede acceder a un proyecto de equipo de Team Services; en caso contrario, [cree uno](https://www.visualstudio.com/docs/setup-admin/create-team-project) .</span><span class="sxs-lookup"><span data-stu-id="5db5b-109">Ensure that you have access to a Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="5db5b-110">Cuenta con un clúster de Service Fabric en el que puede implementar la aplicación; en caso contrario, cree uno mediante [Azure Portal](service-fabric-cluster-creation-via-portal.md), una [plantilla de Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) o [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="5db5b-110">Ensure that you have a Service Fabric cluster to which you can deploy your application or create one using the [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="5db5b-111">Ya ha creado un proyecto de aplicación de Service Fabric (.sfproj).</span><span class="sxs-lookup"><span data-stu-id="5db5b-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="5db5b-112">Debe tener un proyecto creado o actualizado con el SDK de Service Fabric 2.1 o una versión posterior (el archivo .sfproj debe contener un valor de propiedad ProjectVersion de 1.1 o superior).</span><span class="sxs-lookup"><span data-stu-id="5db5b-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (the .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="5db5b-113">Ya no se requieren agentes de compilación personalizados.</span><span class="sxs-lookup"><span data-stu-id="5db5b-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="5db5b-114">Ahora, los agentes hospedados de Team Services vienen preinstalados con el software de administración de clústeres de Service Fabric, con lo que las aplicaciones pueden implementarse directamente desde dichos agentes.</span><span class="sxs-lookup"><span data-stu-id="5db5b-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="5db5b-115">Configuración y uso compartido de los archivos de origen</span><span class="sxs-lookup"><span data-stu-id="5db5b-115">Configure and share your source files</span></span>
<span data-ttu-id="5db5b-116">En primer lugar, se recomienda preparar un perfil de publicación que se utilice durante el proceso de implementación que se ejecuta en Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-116">The first thing you want to do is prepare a publish profile for use by the deployment process that executes within Team Services.</span></span>  <span data-ttu-id="5db5b-117">El perfil de publicación debe configurarse para que tenga como destino el clúster que preparó anteriormente:</span><span class="sxs-lookup"><span data-stu-id="5db5b-117">The publish profile should be configured to target the cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="5db5b-118">Elija un perfil de publicación en el proyecto de aplicación que quiera usar para el flujo de trabajo de integración continua.</span><span class="sxs-lookup"><span data-stu-id="5db5b-118">Choose a publish profile within your Application project that you want to use for your continuous integration workflow.</span></span> <span data-ttu-id="5db5b-119">Siga las [instrucciones de publicación](service-fabric-publish-app-remote-cluster.md) sobre cómo publicar una aplicación en un clúster remoto.</span><span class="sxs-lookup"><span data-stu-id="5db5b-119">Follow the [publish instructions](service-fabric-publish-app-remote-cluster.md) on how to publish an application to a remote cluster.</span></span> <span data-ttu-id="5db5b-120">En realidad, no hace falta publicar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-120">You don't actually need to publish your application though.</span></span> <span data-ttu-id="5db5b-121">Puede hacer clic en el hipervínculo **Guardar** del cuadro de diálogo Publicar cuando haya configurado correctamente las opciones.</span><span class="sxs-lookup"><span data-stu-id="5db5b-121">You can click the **Save** hyperlink in the publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="5db5b-122">Si quiere que la aplicación se actualice durante cada implementación que se realice en Team Services, tendrá que configurar el perfil de publicación para habilitar la opción de actualización.</span><span class="sxs-lookup"><span data-stu-id="5db5b-122">If you want your application to be upgraded for each deployment that occurs within Team Services, you want to configure the publish profile to enable upgrade.</span></span> <span data-ttu-id="5db5b-123">En el mismo cuadro de diálogo Publicar del paso 1, asegúrese de activar la casilla **Actualizar la aplicación** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-123">In the same publish dialog used in step 1, ensure that the **Upgrade the Application** checkbox is checked.</span></span>  <span data-ttu-id="5db5b-124">Obtenga más información sobre [cómo configurar más opciones de actualización](service-fabric-visualstudio-configure-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="5db5b-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="5db5b-125">Haga clic en el hipervínculo **Guardar** para guardar la configuración en el perfil de publicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-125">Click the **Save** hyperlink to save the settings to the publish profile.</span></span>
3. <span data-ttu-id="5db5b-126">No se olvide de guardar los cambios en el perfil de publicación y de hacer clic en la opción Cancelar del cuadro de diálogo Publicar.</span><span class="sxs-lookup"><span data-stu-id="5db5b-126">Ensure that you've saved your changes to the publish profile and cancel the publish dialog.</span></span>
4. <span data-ttu-id="5db5b-127">Ya puede [compartir los archivos de origen del proyecto de aplicación](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) con Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-127">Now it's time to [share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="5db5b-128">Cuando pueda acceder a los archivos de origen en Team Services, podrá avanzar al paso siguiente sobre generación de compilaciones.</span><span class="sxs-lookup"><span data-stu-id="5db5b-128">Once your source files are accessible in Team Services, you can now move on to the next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="5db5b-129">Creación de una definición de compilación</span><span class="sxs-lookup"><span data-stu-id="5db5b-129">Create a build definition</span></span>
<span data-ttu-id="5db5b-130">Una definición de compilación de Team Services describe un flujo de trabajo compuesto por una serie de pasos de compilación que se ejecutan de manera secuencial.</span><span class="sxs-lookup"><span data-stu-id="5db5b-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="5db5b-131">El objetivo de la definición de compilación que se va a crear es generar un paquete de aplicación de Service Fabric y otros artefactos, que pueden usarse para implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-131">The goal of the build definition that you are creating is to produce a Service Fabric application package, and other artifacts, that can be used to deploy the application.</span></span> <span data-ttu-id="5db5b-132">Obtenga más información sobre las [definiciones de compilación](https://www.visualstudio.com/docs/build/define/create)de Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-the-build-template"></a><span data-ttu-id="5db5b-133">Creación de una definición de la plantilla de compilación</span><span class="sxs-lookup"><span data-stu-id="5db5b-133">Create a definition from the build template</span></span>
1. <span data-ttu-id="5db5b-134">Abra el proyecto de equipo en Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="5db5b-135">Seleccione la pestaña **Compilar** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-135">Select the **Build** tab.</span></span>
3. <span data-ttu-id="5db5b-136">Haga clic en el signo **+** verde para crear una nueva definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-136">Select the green **+** sign to create a new build definition.</span></span>
4. <span data-ttu-id="5db5b-137">En el cuadro de diálogo que se abre, seleccione la opción **Aplicación de Azure Service Fabric** en la categoría de plantillas **Compilar**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-137">In the dialog that opens, select **Azure Service Fabric Application** within the **Build** template category.</span></span>
5. <span data-ttu-id="5db5b-138">Seleccione **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-138">Select **Next**.</span></span>
6. <span data-ttu-id="5db5b-139">Seleccione el repositorio y la rama asociados a la aplicación de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5db5b-139">Select the repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="5db5b-140">Seleccione la cola del agente que quiera usar.</span><span class="sxs-lookup"><span data-stu-id="5db5b-140">Select the agent queue you wish to use.</span></span> <span data-ttu-id="5db5b-141">Se admiten agentes hospedados.</span><span class="sxs-lookup"><span data-stu-id="5db5b-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="5db5b-142">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-142">Select **Create**.</span></span>
9. <span data-ttu-id="5db5b-143">Guarde la definición de compilación y asígnele un nombre.</span><span class="sxs-lookup"><span data-stu-id="5db5b-143">Save the build definition and provide a name.</span></span>
10. <span data-ttu-id="5db5b-144">El siguiente párrafo es una descripción de los pasos de compilación que se generan con la plantilla:</span><span class="sxs-lookup"><span data-stu-id="5db5b-144">The following paragraph is a description of the build steps generated by the template:</span></span>

| <span data-ttu-id="5db5b-145">Paso de compilación</span><span class="sxs-lookup"><span data-stu-id="5db5b-145">Build step</span></span> | <span data-ttu-id="5db5b-146">Descripción</span><span class="sxs-lookup"><span data-stu-id="5db5b-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5db5b-147">NuGet restore</span><span class="sxs-lookup"><span data-stu-id="5db5b-147">NuGet restore</span></span> |<span data-ttu-id="5db5b-148">Restaura los paquetes de NuGet de la solución.</span><span class="sxs-lookup"><span data-stu-id="5db5b-148">Restores the NuGet packages for the solution.</span></span> |
| <span data-ttu-id="5db5b-149">Build solution \*.sln (Compilar solución *.sln)</span><span class="sxs-lookup"><span data-stu-id="5db5b-149">Build solution \*.sln</span></span> |<span data-ttu-id="5db5b-150">Compila la solución completa.</span><span class="sxs-lookup"><span data-stu-id="5db5b-150">Builds the entire solution.</span></span> |
| <span data-ttu-id="5db5b-151">Build solution \*.sfproj (Compilar solución *.sfproj)</span><span class="sxs-lookup"><span data-stu-id="5db5b-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="5db5b-152">Genera el paquete de aplicación de Service Fabric que se usará para implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-152">Generates the Service Fabric application package that is used to deploy the application.</span></span> <span data-ttu-id="5db5b-153">La ubicación del paquete de aplicación estará en el directorio de artefactos de la compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-153">The application package location is specified to be within the build's artifact directory.</span></span> |
| <span data-ttu-id="5db5b-154">Update Service Fabric App Versions (Actualizar versiones de la aplicación de Service Fabric)</span><span class="sxs-lookup"><span data-stu-id="5db5b-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="5db5b-155">Actualiza los valores de versión de los archivos de manifiesto del paquete de aplicación para habilitar la opción de actualización.</span><span class="sxs-lookup"><span data-stu-id="5db5b-155">Updates the version values contained in the application package's manifest files to allow for upgrade support.</span></span> <span data-ttu-id="5db5b-156">Para obtener más información, consulte la [página de documentación de tareas](https://go.microsoft.com/fwlink/?LinkId=820529) .</span><span class="sxs-lookup"><span data-stu-id="5db5b-156">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="5db5b-157">Copiar archivos</span><span class="sxs-lookup"><span data-stu-id="5db5b-157">Copy Files</span></span> |<span data-ttu-id="5db5b-158">Copia los archivos de parámetros de la aplicación y el perfil de publicación en los artefactos de la compilación para que puedan usarse durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-158">Copies the publish profile and application parameters files to the build's artifacts to be consumed for deployment.</span></span> |
| <span data-ttu-id="5db5b-159">Publish Artifact (Publicar artefacto)</span><span class="sxs-lookup"><span data-stu-id="5db5b-159">Publish Artifact</span></span> |<span data-ttu-id="5db5b-160">Publica los artefactos de la compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-160">Publishes the build's artifacts.</span></span> <span data-ttu-id="5db5b-161">Permite que las definiciones de versión consuman los artefactos de la compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-161">Allows a release definition to consume the build's artifacts.</span></span> |

### <a name="verify-the-default-set-of-tasks"></a><span data-ttu-id="5db5b-162">Comprobación del conjunto predeterminado de tareas</span><span class="sxs-lookup"><span data-stu-id="5db5b-162">Verify the default set of tasks</span></span>
1. <span data-ttu-id="5db5b-163">Compruebe el campo de entrada **Solución** de los pasos de compilación **Nuget restore** (Restauración de NuGet) y **Build solution** (Compilar solución).</span><span class="sxs-lookup"><span data-stu-id="5db5b-163">Verify the **Solution** input field for the **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="5db5b-164">De forma predeterminada, estos pasos de compilación se ejecutarán en todos los archivos de solución del repositorio asociado.</span><span class="sxs-lookup"><span data-stu-id="5db5b-164">By default, these build steps execute upon all solution files that are contained in the associated repository.</span></span>  <span data-ttu-id="5db5b-165">Si solo quiere que la definición de compilación se utilice en uno de los archivos de solución, debe actualizar expresamente la ruta a dicho archivo.</span><span class="sxs-lookup"><span data-stu-id="5db5b-165">If you only want the build definition to operate on one of those solution files, you need to explicitly update the path to that file.</span></span>
2. <span data-ttu-id="5db5b-166">Compruebe el campo de entrada **Solución** del paso de compilación **Package application** (Empaquetar aplicación).</span><span class="sxs-lookup"><span data-stu-id="5db5b-166">Verify the **Solution** input field for the **Package application** build step.</span></span>  <span data-ttu-id="5db5b-167">De forma predeterminada, en este paso de compilación se da por hecho que solo hay un proyecto de aplicación de Service Fabric (.sfproj) en el repositorio.</span><span class="sxs-lookup"><span data-stu-id="5db5b-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in the repository.</span></span>  <span data-ttu-id="5db5b-168">Si tiene varios archivos de este tipo en el repositorio y solo quiere seleccionar como destino uno de ellos en esta definición de compilación, debe actualizar expresamente la ruta a ese archivo.</span><span class="sxs-lookup"><span data-stu-id="5db5b-168">If you have multiple such files in your repository and want to target only one of them for this build definition, you need to explicitly update the path to that file.</span></span>  <span data-ttu-id="5db5b-169">Si quiere empaquetar varios proyectos de aplicación en el repositorio, debe crear más pasos de **compilación de Visual Studio** en las definiciones de compilación que tengan como destino un proyecto de aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-169">If you want to package multiple Application projects in your repository, you need to create additional **Visual Studio Build** steps in the build definition that each target an Application project.</span></span>  <span data-ttu-id="5db5b-170">Después, tendría que actualizar el campo **MSBuild Arguments** de cada uno de esos pasos de compilación para que la ubicación del paquete sea única en cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="5db5b-170">You would then also need to update the **MSBuild Arguments** field for each of those build steps so that the package location is unique for each of them.</span></span>
3. <span data-ttu-id="5db5b-171">Compruebe el comportamiento de control de versiones definido en el paso de compilación **Update Service Fabric App Versions** (Actualizar versiones de la aplicación de Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="5db5b-171">Verify the versioning behavior defined in the **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="5db5b-172">De forma predeterminada, en este paso de compilación se anexa el número de compilación a todos los valores de versión de los archivos de manifiesto del paquete de aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-172">By default, this build step appends the build number to all version values in the application package's manifest files.</span></span> <span data-ttu-id="5db5b-173">Para obtener más información, consulte la [página de documentación de tareas](https://go.microsoft.com/fwlink/?LinkId=820529) .</span><span class="sxs-lookup"><span data-stu-id="5db5b-173">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="5db5b-174">Esto resulta útil para habilitar la opción de actualización de la aplicación, ya que cada implementación de actualización requiere valores de versión distintos de la implementación anterior.</span><span class="sxs-lookup"><span data-stu-id="5db5b-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from the previous deployment.</span></span> <span data-ttu-id="5db5b-175">Si no pretende usar la opción de actualización de la aplicación en el flujo de trabajo, puede plantearse deshabilitar este paso de compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-175">If you're not intending to use application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="5db5b-176">Debe deshabilitarla si su intención es generar una compilación que pueda usarse para sobrescribir una aplicación existente de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="5db5b-176">It must be disabled if your intention is to produce a build that can be used to overwrite an existing Service Fabric application.</span></span> <span data-ttu-id="5db5b-177">Si la versión de la aplicación generada por la compilación no coincide con la versión de la aplicación en el clúster, se produce un error en la implementación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-177">The deployment fails if the version of the application produced by the build does not match the version of the application in the cluster.</span></span>
4. <span data-ttu-id="5db5b-178">Si la solución contiene un proyecto de .NET Core, debe asegurarse de que la definición de compilación contenga un paso de compilación que restaure las dependencias.</span><span class="sxs-lookup"><span data-stu-id="5db5b-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores the dependencies:</span></span>
   1. <span data-ttu-id="5db5b-179">Seleccione **Agregar el paso de compilación**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="5db5b-180">Busque la **línea de comandos** dentro de la pestaña Utilidad y haga clic en el botón Agregar.</span><span class="sxs-lookup"><span data-stu-id="5db5b-180">Locate the **Command-Line** task within the Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="5db5b-181">Para los campos de entrada de la tarea, utilice los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="5db5b-181">For the task's input fields, use the following values:</span></span>
   4. <span data-ttu-id="5db5b-182">Herramienta: dotnet</span><span class="sxs-lookup"><span data-stu-id="5db5b-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="5db5b-183">Argumentos: restore</span><span class="sxs-lookup"><span data-stu-id="5db5b-183">Arguments: restore</span></span>
   6. <span data-ttu-id="5db5b-184">Arrastre la tarea para que esté inmediatamente después del paso **Nuget restore** (Restauración de NuGet).</span><span class="sxs-lookup"><span data-stu-id="5db5b-184">Drag the task so that it is immediately after the **NuGet restore** step.</span></span>
5. <span data-ttu-id="5db5b-185">Guarde los cambios realizados en la definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-185">Save any changes you've made to the build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="5db5b-186">Pruébelo</span><span class="sxs-lookup"><span data-stu-id="5db5b-186">Try it</span></span>
<span data-ttu-id="5db5b-187">Seleccione **Poner compilación en cola** para iniciar manualmente una compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-187">Select **Queue Build** to manually start a build.</span></span> <span data-ttu-id="5db5b-188">Las compilaciones también se desencadenan después de una inserción o una protección.</span><span class="sxs-lookup"><span data-stu-id="5db5b-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="5db5b-189">Cuando haya comprobado que la compilación se ejecuta correctamente, podrá avanzar al paso de creación de una definición de versión que implemente la aplicación en un clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-189">Once you've verified that the build is executing successfully, you can now move on to defining a release definition that deploys your application to a cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="5db5b-190">Creación de una definición de versión</span><span class="sxs-lookup"><span data-stu-id="5db5b-190">Create a release definition</span></span>
<span data-ttu-id="5db5b-191">Una definición de versión de Team Services describe un flujo de trabajo compuesto por una serie de tareas que se ejecutan de manera secuencial.</span><span class="sxs-lookup"><span data-stu-id="5db5b-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="5db5b-192">El objetivo de la definición de versión que va a crear consiste en seleccionar un paquete de aplicación e implementarlo en un clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-192">The goal of the release definition that you are creating is to take an application package and deploy it to a cluster.</span></span> <span data-ttu-id="5db5b-193">Cuando se usan juntas, la definición de compilación y la de versión pueden ejecutar el flujo de trabajo completo empezando por los archivos de origen y terminando por la ejecución de una aplicación en el clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-193">When used together, the build definition and release definition can execute the entire workflow from starting with source files to ending with a running application in your cluster.</span></span> <span data-ttu-id="5db5b-194">Obtenga más información sobre las [definiciones de versión](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition)de Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-the-release-template"></a><span data-ttu-id="5db5b-195">Creación de una definición de la plantilla de versión</span><span class="sxs-lookup"><span data-stu-id="5db5b-195">Create a definition from the release template</span></span>
1. <span data-ttu-id="5db5b-196">Abra el proyecto en Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="5db5b-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="5db5b-197">Seleccione la pestaña **Versión** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-197">Select the **Release** tab.</span></span>
3. <span data-ttu-id="5db5b-198">Haga clic en el signo **+** verde para generar una nueva definición de versión y seleccione **Crear definición de versión** en el menú.</span><span class="sxs-lookup"><span data-stu-id="5db5b-198">Select the green **+** sign to create a new release definition and select **Create release definition** in the menu.</span></span>
4. <span data-ttu-id="5db5b-199">En el cuadro de diálogo que se abre, seleccione la opción **Implementación de Azure Service Fabric** en la categoría de plantillas **Implementación**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-199">In the dialog that opens, select **Azure Service Fabric Deployment** within the **Deployment** template category.</span></span>
5. <span data-ttu-id="5db5b-200">Seleccione **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-200">Select **Next**.</span></span>
6. <span data-ttu-id="5db5b-201">Seleccione la definición de compilación que quiera utilizar como origen de esta definición de versión.</span><span class="sxs-lookup"><span data-stu-id="5db5b-201">Select the build definition you want to use as the source of this release definition.</span></span>  <span data-ttu-id="5db5b-202">La definición de versión hace referencia a los artefactos que se crearon con la definición de compilación seleccionada.</span><span class="sxs-lookup"><span data-stu-id="5db5b-202">The release definition references the artifacts that were produced by the selected build definition.</span></span>
7. <span data-ttu-id="5db5b-203">Active la casilla **Implementación continua** si quiere que Team Services cree automáticamente una nueva versión e implemente la aplicación de Service Fabric cuando se complete una compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-203">Check the **Continuous deployment** check box if you wish to have Team Services automatically create a new release and deploy the Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="5db5b-204">Seleccione la cola del agente que quiera usar.</span><span class="sxs-lookup"><span data-stu-id="5db5b-204">Select the agent queue you wish to use.</span></span> <span data-ttu-id="5db5b-205">Se admiten agentes hospedados.</span><span class="sxs-lookup"><span data-stu-id="5db5b-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="5db5b-206">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-206">Select **Create**.</span></span>
10. <span data-ttu-id="5db5b-207">Edite el nombre de la definición haciendo clic en el icono de lápiz de la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="5db5b-207">Edit the definition name by clicking the pencil icon at the top of the page.</span></span>
11. <span data-ttu-id="5db5b-208">En el campo de entrada **Conexión de clúster** de la tarea, seleccione el clúster donde desea implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-208">Select the cluster to which your application should be deployed from the **Cluster Connection** input field of the task.</span></span> <span data-ttu-id="5db5b-209">La conexión de clúster proporciona la información necesaria que permite que la tarea de implementación se conecte al clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-209">The cluster connection provides the necessary information that allows the deployment task to connect to the cluster.</span></span> <span data-ttu-id="5db5b-210">Si aún no tiene una conexión de clúster para el clúster, seleccione el hipervínculo **Administrar** junto al campo para agregar uno.</span><span class="sxs-lookup"><span data-stu-id="5db5b-210">If you do not yet have a cluster connection for your cluster, select the **Manage** hyperlink next to the field to add one.</span></span> <span data-ttu-id="5db5b-211">En la página que se abre, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="5db5b-211">On the page that opens, perform the following steps:</span></span>
    1. <span data-ttu-id="5db5b-212">Seleccione **Nuevo punto de conexión de servicio** y, después, elija **Azure Service Fabric** en el menú.</span><span class="sxs-lookup"><span data-stu-id="5db5b-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from the menu.</span></span>
    2. <span data-ttu-id="5db5b-213">Seleccione el tipo de autenticación que utilizará el clúster que tiene como destino este punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="5db5b-213">Select the type of authentication being used by the cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="5db5b-214">Defina un nombre para la conexión en el campo **Nombre de la conexión** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-214">Define a name for your connection in the **Connection Name** field.</span></span>  <span data-ttu-id="5db5b-215">Normalmente, utilizará el nombre del clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-215">Typically, you would use the name of your cluster.</span></span>
    4. <span data-ttu-id="5db5b-216">Defina la URL del punto de conexión del cliente en el campo **Punto de conexión de clúster** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-216">Define the client connection endpoint URL in the **Cluster Endpoint** field.</span></span>  <span data-ttu-id="5db5b-217">Ejemplo: tcp://contoso.westus.cloudapp.azure.com:19000.</span><span class="sxs-lookup"><span data-stu-id="5db5b-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="5db5b-218">En los campos **Nombre de usuario** y **Contraseña**, defina las credenciales de Azure Active Directory que quiera usar para conectarse al clúster.</span><span class="sxs-lookup"><span data-stu-id="5db5b-218">For Azure Active Directory credentials, define the credentials you want to use to connect to the cluster in the **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="5db5b-219">Para la autenticación basada en certificados, defina la codificación Base64 del archivo de certificado de cliente en el campo **Certificado de cliente** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-219">For Certificate Based authentication, define the Base64 encoding of the client certificate file in the **Client Certificate** field.</span></span>  <span data-ttu-id="5db5b-220">Consulte la ventana emergente de ayuda de ese campo para saber cómo obtener ese valor.</span><span class="sxs-lookup"><span data-stu-id="5db5b-220">See the help pop-up on that field for info on how to get that value.</span></span>  <span data-ttu-id="5db5b-221">Si el certificado está protegido por contraseña, defina la contraseña en el campo **Contraseña** .</span><span class="sxs-lookup"><span data-stu-id="5db5b-221">If your certificate is password-protected, define the password in the **Password** field.</span></span>
    7. <span data-ttu-id="5db5b-222">Confirme los cambios haciendo clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="5db5b-223">Cuando regrese al paso de definición de versión, haga clic en el icono de actualización del campo **Cluster Connection** (Conexión de clúster) para ver el punto de conexión que acaba de agregar.</span><span class="sxs-lookup"><span data-stu-id="5db5b-223">After navigating back to your release definition, click the refresh icon on the **Cluster Connection** field to see the endpoint you just added.</span></span>
12. <span data-ttu-id="5db5b-224">Guarde la definición de versión.</span><span class="sxs-lookup"><span data-stu-id="5db5b-224">Save the release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="5db5b-225">Cuentas de Microsoft (por ejemplo, @hotmail.com o @outlook.com) no se admiten con la autenticación de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5db5b-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="5db5b-226">La definición que se crea está formada por una tarea de tipo **Deploy Service Fabric Application**(Implementar aplicación de Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="5db5b-226">The definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="5db5b-227">Para obtener más información sobre esta tarea, consulte la [página de documentación de tareas](https://go.microsoft.com/fwlink/?LinkId=820528) .</span><span class="sxs-lookup"><span data-stu-id="5db5b-227">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-the-template-defaults"></a><span data-ttu-id="5db5b-228">Comprobación de los valores predeterminados de la plantilla</span><span class="sxs-lookup"><span data-stu-id="5db5b-228">Verify the template defaults</span></span>
1. <span data-ttu-id="5db5b-229">Compruebe el campo de entrada **Perfil de publicación** de la tarea **Implementar aplicación de Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-229">Verify the **Publish Profile** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="5db5b-230">De forma predeterminada, este campo hace referencia a un perfil de publicación denominado "Cloud.xml" que se encuentra en los artefactos de la compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-230">By default, this field references a publish profile named Cloud.xml contained in the build's artifacts.</span></span> <span data-ttu-id="5db5b-231">Si quiere hacer referencia a otro perfil de publicación o si la compilación contiene varios paquetes de aplicación en los artefactos, debe actualizar la ruta de forma adecuada.</span><span class="sxs-lookup"><span data-stu-id="5db5b-231">If you want to reference a different publish profile or if the build contains multiple application packages in its artifacts, you need to update the path appropriately.</span></span>
2. <span data-ttu-id="5db5b-232">Compruebe el campo de entrada **Paquete de la aplicación** de la tarea **Implementar aplicación de Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-232">Verify the **Application Package** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="5db5b-233">De forma predeterminada, este campo hace referencia a la ruta predeterminada del paquete de aplicación que se usa en la plantilla de definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-233">By default, this field references the default application package path used in the build definition template.</span></span>  <span data-ttu-id="5db5b-234">Si ha modificado la ruta predeterminada del paquete de aplicación en la definición de compilación, aquí también debe actualizar la ruta de forma adecuada.</span><span class="sxs-lookup"><span data-stu-id="5db5b-234">If you've modified the default application package path in the build definition, you need to update the path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="5db5b-235">Pruébelo</span><span class="sxs-lookup"><span data-stu-id="5db5b-235">Try it</span></span>
<span data-ttu-id="5db5b-236">Seleccione la opción **Crear versión** del menú de botón **Versión** para generar manualmente una versión.</span><span class="sxs-lookup"><span data-stu-id="5db5b-236">Select **Create Release** from the **Release** button menu to manually create a release.</span></span> <span data-ttu-id="5db5b-237">En el cuadro de diálogo que se abre, seleccione la compilación en la que quiera basar la versión; después, haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="5db5b-237">In the dialog that opens, select the build that you want to base the release on and then click **Create**.</span></span> <span data-ttu-id="5db5b-238">Si habilitó la implementación continua, también se crearán versiones automáticamente cuando la definición de compilación asociada realice una compilación.</span><span class="sxs-lookup"><span data-stu-id="5db5b-238">If you enabled continuous deployment, releases will be created automatically when the associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5db5b-239">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="5db5b-239">Next steps</span></span>
<span data-ttu-id="5db5b-240">Para obtener más información sobre la integración continua con las aplicaciones de Service Fabric, lea los artículos siguientes:</span><span class="sxs-lookup"><span data-stu-id="5db5b-240">To learn more about continuous integration with Service Fabric applications, read the following articles:</span></span>

* [<span data-ttu-id="5db5b-241">Página de inicio de la documentación de Team Services</span><span class="sxs-lookup"><span data-stu-id="5db5b-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="5db5b-242">Administración de compilaciones en Team Services</span><span class="sxs-lookup"><span data-stu-id="5db5b-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="5db5b-243">Administración de versiones en Team Services</span><span class="sxs-lookup"><span data-stu-id="5db5b-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)


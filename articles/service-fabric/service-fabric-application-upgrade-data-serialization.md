---
title: "Actualización de la aplicación: serialización de datos| Microsoft Docs"
description: "Prácticas recomendadas para la serialización de datos y cómo afectan a las sucesivas actualizaciones de la aplicación."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="8b175-103">Información sobre cómo la serialización afecta a una actualización de aplicación</span><span class="sxs-lookup"><span data-stu-id="8b175-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="8b175-104">En un [aplicación actualización gradual](service-fabric-application-upgrade.md), actualización de hello es tooa aplicado subconjunto de nodos, un dominio de actualización a la vez.</span><span class="sxs-lookup"><span data-stu-id="8b175-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="8b175-105">Durante este proceso, algunos dominios de actualización están en la versión más reciente de saludo de la aplicación y algunos dominios de actualización están en una versión anterior de la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="8b175-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="8b175-106">Durante la implementación de hello, Hola nueva versión de la aplicación debe ser capaz de tooread Hola antiguo de los datos y Hola antigua versión de la aplicación debe ser capaz de tooread Hola nueva de los datos.</span><span class="sxs-lookup"><span data-stu-id="8b175-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="8b175-107">Si el formato de datos de Hola no es hacia delante y hacia atrás actualización Hola compatible, pueden producirá un error o, incluso peor, datos podría estar perdido o dañado.</span><span class="sxs-lookup"><span data-stu-id="8b175-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="8b175-108">En este artículo se analiza qué constituye su formato de datos y ofrece prácticas recomendadas para garantizar que sus datos sean compatibles con las versiones anteriores y nuevas.</span><span class="sxs-lookup"><span data-stu-id="8b175-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="8b175-109">¿Qué conforma su formato de datos?</span><span class="sxs-lookup"><span data-stu-id="8b175-109">What makes up your data format?</span></span>
<span data-ttu-id="8b175-110">En Azure Service Fabric, datos de Hola que se guardan y se replican proceden de las clases de C#.</span><span class="sxs-lookup"><span data-stu-id="8b175-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="8b175-111">Para las aplicaciones que utilizan [colecciones confiable](service-fabric-reliable-services-reliable-collections.md), que los datos son objetos de hello en diccionarios confiable de Hola y colas.</span><span class="sxs-lookup"><span data-stu-id="8b175-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="8b175-112">Para las aplicaciones que utilizan [Reliable Actors](service-fabric-reliable-actors-introduction.md), es decir Hola realizar una copia de estado de actor Hola.</span><span class="sxs-lookup"><span data-stu-id="8b175-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="8b175-113">Estas clases de C# deben ser serializables toobe conservarse y replicarse.</span><span class="sxs-lookup"><span data-stu-id="8b175-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="8b175-114">Por lo tanto, el formato de datos de Hola se define mediante Hola campos y propiedades que se serializan, así como el modo en se serializan.</span><span class="sxs-lookup"><span data-stu-id="8b175-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="8b175-115">Por ejemplo, en un `IReliableDictionary<int, MyClass>` datos hello están un número de serie `int` y un número de serie `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="8b175-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="8b175-116">Cambios de código que dan como resultado un cambio de formato de datos</span><span class="sxs-lookup"><span data-stu-id="8b175-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="8b175-117">Puesto que el formato de datos de hello viene determinado por las clases de C#, las clases de toohello de cambios pueden producir un cambio de formato de datos.</span><span class="sxs-lookup"><span data-stu-id="8b175-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="8b175-118">Se debe tener cuidado tooensure que pueda controlar una actualización gradual cambio de formato de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="8b175-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="8b175-119">Ejemplos que pueden provocar cambios del formato de datos:</span><span class="sxs-lookup"><span data-stu-id="8b175-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="8b175-120">Adición o eliminación de campos o propiedades</span><span class="sxs-lookup"><span data-stu-id="8b175-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="8b175-121">Cambio de nombre de campos o propiedades</span><span class="sxs-lookup"><span data-stu-id="8b175-121">Renaming fields or properties</span></span>
* <span data-ttu-id="8b175-122">Cambiar los tipos de Hola de campos o propiedades</span><span class="sxs-lookup"><span data-stu-id="8b175-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="8b175-123">Cambiar el nombre de clase de Hola o espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="8b175-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="8b175-124">Contrato de datos como Hola serializador predeterminado</span><span class="sxs-lookup"><span data-stu-id="8b175-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="8b175-125">serializador de Hello es suele ser responsable de leer los datos de Hola y deserializar en la versión actual de hello, incluso si los datos de hello están en una anterior o *más reciente* versión.</span><span class="sxs-lookup"><span data-stu-id="8b175-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="8b175-126">Hello serializador predeterminado es hello [serializador de contrato de datos](https://msdn.microsoft.com/library/ms733127.aspx), que tiene reglas de control de versiones bien definido.</span><span class="sxs-lookup"><span data-stu-id="8b175-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="8b175-127">Colecciones confiables permiten Hola serializador toobe que se reemplaza, pero Reliable Actors actualmente no tienen que serlo.</span><span class="sxs-lookup"><span data-stu-id="8b175-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="8b175-128">serializador de datos de Hello desempeña un papel importante en la habilitación de las actualizaciones sucesivas.</span><span class="sxs-lookup"><span data-stu-id="8b175-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="8b175-129">serializador de contrato de datos de Hello es serializador Hola que se recomienda para las aplicaciones de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8b175-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="8b175-130">Cómo afecta el formato de datos de Hola a una actualización gradual</span><span class="sxs-lookup"><span data-stu-id="8b175-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="8b175-131">Durante una actualización gradual, hay dos escenarios principales donde serializador Hola puede encontrar un más antiguo o *más reciente* versión de los datos:</span><span class="sxs-lookup"><span data-stu-id="8b175-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="8b175-132">Después de que un nodo se actualiza y copia de seguridad se inicia, serializador nuevo Hola cargará los datos de Hola que estaba toodisk persistente por la versión anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="8b175-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="8b175-133">Durante la actualización gradual de hello, clúster de hello contienen una mezcla de versiones de hello antigua y nueva del código.</span><span class="sxs-lookup"><span data-stu-id="8b175-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="8b175-134">Dado que las réplicas pueden colocarse en diferentes dominios de actualización y las réplicas envían datos tooeach otras hello nuevo o antiguo versión de los datos se puede encontrar por versión de Hola nuevo o antiguo del serializador.</span><span class="sxs-lookup"><span data-stu-id="8b175-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="8b175-135">Hola "nueva versión" y "versión antigua" aquí, consulte toohello versión del código que se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="8b175-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="8b175-136">Hola "serializador nuevo" refiere toohello código de serializador que se está ejecutando en la nueva versión de hello de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8b175-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="8b175-137">Hola "nuevos datos" hace referencia a clase C# toohello serializado de nueva versión de hello de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8b175-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="8b175-138">Hola dos versiones del código y el formato de datos debe ser hacia delante y hacia atrás compatible.</span><span class="sxs-lookup"><span data-stu-id="8b175-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="8b175-139">Si no son compatibles, puede producir un error en la actualización gradual de Hola o se podrían perder datos.</span><span class="sxs-lookup"><span data-stu-id="8b175-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="8b175-140">Hola actualización gradual puede producir un error debido a código de hello o serializador puede producir excepciones o un error cuando encuentra Hola otra versión.</span><span class="sxs-lookup"><span data-stu-id="8b175-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="8b175-141">Si, por ejemplo, se ha agregado una nueva propiedad pero serializador antiguo Hola lo descarta durante la deserialización, podrían perderse datos.</span><span class="sxs-lookup"><span data-stu-id="8b175-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="8b175-142">Contrato de datos es hello recomendada soluciones para garantizar que los datos sean compatibles.</span><span class="sxs-lookup"><span data-stu-id="8b175-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="8b175-143">Tiene reglas de versiones bien definidas para agregar, quitar y cambiar campos.</span><span class="sxs-lookup"><span data-stu-id="8b175-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="8b175-144">También tiene compatibilidad para trabajar con campos desconocidos, enlazar con el proceso de serialización y deserialización de Hola y trabaja con herencia de clases.</span><span class="sxs-lookup"><span data-stu-id="8b175-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="8b175-145">Para obtener más información, consulte [Uso de contrato de datos](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b175-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8b175-146">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8b175-146">Next steps</span></span>
<span data-ttu-id="8b175-147">[actualización de aplicaciones usando Visual Studio](service-fabric-application-upgrade-tutorial.md) ofrece información para actualizar una aplicación mediante Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8b175-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="8b175-148">[actualización de aplicaciones mediante PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) se explica en detalle lo que tiene que hacer para actualizar una aplicación mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b175-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="8b175-149">Puede controlar cómo se actualiza una aplicación usando [parámetros de actualización](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="8b175-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="8b175-150">Obtenga información acerca de cómo toouse funcionalidad avanzada al actualizar la aplicación, se hace referencia demasiado[temas avanzados](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="8b175-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="8b175-151">Solucione problemas habituales en las actualizaciones de aplicaciones, se hace referencia a pasos toohello en [solución de problemas de las actualizaciones de aplicaciones ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="8b175-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>


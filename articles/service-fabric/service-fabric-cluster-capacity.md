---
title: "Consideraciones de planeación de capacidad del clúster de Service Fabric | Microsoft Docs"
description: "Consideraciones de planeación de capacidad del clúster de Service Fabric Tipos de nodos, durabilidad y niveles de confiabilidad"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: 4c584f4a-cb1f-400c-b61f-1f797f11c982
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/24/2017
ms.author: chackdan
ms.openlocfilehash: 36b96360fabdcc64ffd2356540c580594637d48e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="service-fabric-cluster-capacity-planning-considerations"></a><span data-ttu-id="20c27-104">Consideraciones de planeación de capacidad del clúster de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="20c27-104">Service Fabric cluster capacity planning considerations</span></span>
<span data-ttu-id="20c27-105">En cualquier implementación de producción, la planeación de capacidad es un paso importante.</span><span class="sxs-lookup"><span data-stu-id="20c27-105">For any production deployment, capacity planning is an important step.</span></span> <span data-ttu-id="20c27-106">Estos son algunos de los elementos que se deben tener en cuenta como parte de ese proceso.</span><span class="sxs-lookup"><span data-stu-id="20c27-106">Here are some of the items that you have to consider as a part of that process.</span></span>

* <span data-ttu-id="20c27-107">Número de tipos de nodos con los que el clúster tiene que empezar</span><span class="sxs-lookup"><span data-stu-id="20c27-107">The number of node types your cluster needs to start out with</span></span>
* <span data-ttu-id="20c27-108">Propiedades de cada tipo de nodo (tamaño, principal, accesible desde Internet, número de máquinas virtuales, etc.)</span><span class="sxs-lookup"><span data-stu-id="20c27-108">The properties of each of node type (size, primary, internet facing, number of VMs, etc.)</span></span>
* <span data-ttu-id="20c27-109">Características de confiabilidad y durabilidad del clúster</span><span class="sxs-lookup"><span data-stu-id="20c27-109">The reliability and durability characteristics of the cluster</span></span>

<span data-ttu-id="20c27-110">Repasemos brevemente cada uno de estos elementos.</span><span class="sxs-lookup"><span data-stu-id="20c27-110">Let us briefly review each of these items.</span></span>

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a><span data-ttu-id="20c27-111">Número de tipos de nodos con los que el clúster tiene que empezar</span><span class="sxs-lookup"><span data-stu-id="20c27-111">The number of node types your cluster needs to start out with</span></span>
<span data-ttu-id="20c27-112">En primer lugar, tiene que averiguar para qué se va a usar el clúster que está creando y qué tipos de aplicaciones piensa implementar en este clúster.</span><span class="sxs-lookup"><span data-stu-id="20c27-112">First, you need to figure out what the cluster you are creating is going to be used for and what kinds of applications you are planning to deploy into this cluster.</span></span> <span data-ttu-id="20c27-113">Si no tiene clara la finalidad del clúster, es muy probable que todavía no está listo para especificar el proceso de planeación de capacidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-113">If you are not clear on the purpose of the cluster, you are most likely not yet ready to enter the capacity planning process.</span></span>

<span data-ttu-id="20c27-114">Establezca el número de tipos de nodos con los que el clúster tiene que empezar.</span><span class="sxs-lookup"><span data-stu-id="20c27-114">Establish the number of node types your cluster needs to start out with.</span></span>  <span data-ttu-id="20c27-115">Cada tipo de nodo se asigna a un conjunto de escalado de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="20c27-115">Each node type is mapped to a Virtual Machine Scale Set.</span></span> <span data-ttu-id="20c27-116">Cada tipo de nodo se puede escalar o reducir verticalmente de forma independiente. Cada uno tiene diferentes conjuntos de puertos abiertos y puede tener distintas métricas de capacidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-116">Each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="20c27-117">Por lo que la decisión del número de tipos de nodo depende esencialmente de las consideraciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="20c27-117">So the decision of the number of node types essentially comes down to the following considerations:</span></span>

* <span data-ttu-id="20c27-118">¿Tiene la aplicación varios servicios y alguno de ellos ha de ser público o accesible desde Internet?</span><span class="sxs-lookup"><span data-stu-id="20c27-118">Does your application have multiple services, and do any of them need to be public or internet facing?</span></span> <span data-ttu-id="20c27-119">Las aplicaciones típicas contienen un servicio front-end de puerta de enlace que recibe entrada de un cliente, así como uno o varios servicios back-end que se comunican con los servicios front-end.</span><span class="sxs-lookup"><span data-stu-id="20c27-119">Typical applications contain a front-end gateway service that receives input from a client, and one or more back-end services that communicate with the front-end services.</span></span> <span data-ttu-id="20c27-120">Por lo que en este caso, acaba teniendo al menos dos tipos de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-120">So in this case, you end up having at least two node types.</span></span>
* <span data-ttu-id="20c27-121">¿Tienen los servicios (que componen la aplicación) distintos requisitos de infraestructura, como, por ejemplo, una RAM mayor o un número más alto de ciclos de CPU?</span><span class="sxs-lookup"><span data-stu-id="20c27-121">Do your services (that make up your application) have different infrastructure needs such as greater RAM or higher CPU cycles?</span></span> <span data-ttu-id="20c27-122">Por ejemplo, supongamos que la aplicación que desea implementar contiene un servicio front-end y un servicio back-end.</span><span class="sxs-lookup"><span data-stu-id="20c27-122">For example, let us assume that the application that you want to deploy contains a front-end service and a back-end service.</span></span> <span data-ttu-id="20c27-123">El servicio front-end se puede ejecutar en máquinas virtuales más pequeñas (tamaños de VM como D2) que tienen puertos abiertos a Internet.</span><span class="sxs-lookup"><span data-stu-id="20c27-123">The front-end service can run on smaller VMs (VM sizes like D2) that have ports open to the internet.</span></span>  <span data-ttu-id="20c27-124">Pero el servicio back-end es de cálculo intensivo y tiene que ejecutarse en máquinas virtuales más grandes (con tamaños de VM como D4, D6 o D15) que no son accesibles desde Internet.</span><span class="sxs-lookup"><span data-stu-id="20c27-124">The back-end service, however, is computation intensive and needs to run on larger VMs (with VM sizes like D4, D6, D15) that are not internet facing.</span></span>
  
  <span data-ttu-id="20c27-125">En este ejemplo, aunque puede optar por colocar todos los servicios en un tipo de nodo, se recomienda colocarlos en un clúster con dos tipos de nodos.</span><span class="sxs-lookup"><span data-stu-id="20c27-125">In this example, although you can decide to put all the services on one node type, we recommended that you place them in a cluster with two node types.</span></span>  <span data-ttu-id="20c27-126">Esto permite que cada tipo de nodo pueda tener distintas propiedades, como por ejemplo, conectividad a Internet o tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="20c27-126">This allows for each node type to have distinct properties such as internet connectivity or VM size.</span></span> <span data-ttu-id="20c27-127">El número de máquinas virtuales también se puede escalar de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="20c27-127">The number of VMs can be scaled independently, as well.</span></span>  
* <span data-ttu-id="20c27-128">Puesto que no puede predecir el futuro, parta de hechos que conozca y decida el número de tipos de nodo que con el que deben empezar las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="20c27-128">Since you cannot predict the future, go with facts you know of and decide on the number of node types that your applications need to start with.</span></span> <span data-ttu-id="20c27-129">Siempre puede agregar o quitar tipos de nodos más adelante.</span><span class="sxs-lookup"><span data-stu-id="20c27-129">You can always add or remove node types later.</span></span> <span data-ttu-id="20c27-130">Un clúster de Service Fabric debe tener como mínimo un tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-130">A Service Fabric cluster must have at least one node type.</span></span>

## <a name="the-properties-of-each-node-type"></a><span data-ttu-id="20c27-131">Las propiedades de cada tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-131">The properties of each node type</span></span>
<span data-ttu-id="20c27-132">El **tipo de nodo** puede considerarse similar a los roles de Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="20c27-132">The **node type** can be seen as equivalent to roles in Cloud Services.</span></span> <span data-ttu-id="20c27-133">Los tipos de nodos definen los tamaños de máquina virtual, el número de máquinas virtuales y sus propiedades.</span><span class="sxs-lookup"><span data-stu-id="20c27-133">Node types define the VM sizes, the number of VMs, and their properties.</span></span> <span data-ttu-id="20c27-134">Cada tipo de nodo que se define en un clúster de Service Fabric está configurado como un conjunto de escalado de máquinas virtuales independiente.</span><span class="sxs-lookup"><span data-stu-id="20c27-134">Every node type that is defined in a Service Fabric cluster is set up as a separate virtual machine scale set.</span></span> <span data-ttu-id="20c27-135">Los conjuntos de escalado de máquinas virtuales son un recurso de proceso de Azure que se puede usar para implementar y administrar una colección de máquinas virtuales de forma conjunta.</span><span class="sxs-lookup"><span data-stu-id="20c27-135">Virtual machine scale set is an Azure compute resource you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="20c27-136">Al definirse como diferentes conjuntos de escalado de máquinas virtuales, cada tipo de nodo se puede escalar o reducir verticalmente de forma independiente, tener diferentes conjuntos de puertos abiertos y puede tener distintas métricas de capacidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-136">Being defined as distinct virtual machine scale set, each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span>

<span data-ttu-id="20c27-137">Lea [este documento](service-fabric-cluster-nodetypes.md) para más información sobre la relación de Nodetypes con el conjunto de escalado de máquinas virtuales, cómo usar el protocolo RDP en una de las instancias, abrir nuevos puertos, etc.</span><span class="sxs-lookup"><span data-stu-id="20c27-137">Read [this document](service-fabric-cluster-nodetypes.md) for more details on the relationship of Nodetypes to virtual machine scale set, how to RDP into one of the instances, open new ports etc.</span></span>

<span data-ttu-id="20c27-138">El clúster puede tener más de un tipo de nodo, pero el tipo de nodo principal (el primero que se define en el portal) debe tener al menos cinco máquinas virtuales para los clústeres que se usan en cargas de trabajo de producción (o al menos tres máquinas virtuales en clústeres de prueba).</span><span class="sxs-lookup"><span data-stu-id="20c27-138">Your cluster can have more than one node type, but the primary node type (the first one that you define on the portal) must have at least five VMs for clusters used for production workloads (or at least three VMs for test clusters).</span></span> <span data-ttu-id="20c27-139">Si va a crear el clúster mediante una plantilla de Resource Manager, busque el atributo **Es principal** en la definición del tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-139">If you are creating the cluster using a Resource Manager template, then look for **is Primary** attribute under the node type definition.</span></span> <span data-ttu-id="20c27-140">El tipo de nodo principal es el tipo de nodo en que se colocan los servicios del sistema de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="20c27-140">The primary node type is the node type where Service Fabric system services are placed.</span></span>  

### <a name="primary-node-type"></a><span data-ttu-id="20c27-141">Tipo de nodo principal</span><span class="sxs-lookup"><span data-stu-id="20c27-141">Primary node type</span></span>
<span data-ttu-id="20c27-142">En el caso de un clúster con varios tipos de nodo, tendrá elegir uno de ellos como principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-142">For a cluster with multiple node types, you need to choose one of them to be primary.</span></span> <span data-ttu-id="20c27-143">Estas son las características de un tipo de nodo principal:</span><span class="sxs-lookup"><span data-stu-id="20c27-143">Here are the characteristics of a primary node type:</span></span>

* <span data-ttu-id="20c27-144">El **tamaño mínimo de las máquinas virtuales** del tipo de nodo principal se determina mediante el **nivel de durabilidad** que se elija.</span><span class="sxs-lookup"><span data-stu-id="20c27-144">The **minimum size of VMs** for the primary node type is determined by the **durability tier** you choose.</span></span> <span data-ttu-id="20c27-145">El valor predeterminado del nivel de durabilidad es Bronze.</span><span class="sxs-lookup"><span data-stu-id="20c27-145">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="20c27-146">Desplácese hacia abajo para más información sobre el nivel de durabilidad y los valores que puede adoptar.</span><span class="sxs-lookup"><span data-stu-id="20c27-146">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="20c27-147">El **número mínimo de máquinas virtuales** del tipo de nodo principal se determina mediante el **nivel de confiabilidad** que se elija.</span><span class="sxs-lookup"><span data-stu-id="20c27-147">The **minimum number of VMs** for the primary node type is determined by the **reliability tier** you choose.</span></span> <span data-ttu-id="20c27-148">El valor predeterminado del nivel de confiabilidad es Silver.</span><span class="sxs-lookup"><span data-stu-id="20c27-148">The default for the reliability tier is Silver.</span></span> <span data-ttu-id="20c27-149">Desplácese hacia abajo para más información sobre el nivel de confiabilidad y los valores que puede adoptar.</span><span class="sxs-lookup"><span data-stu-id="20c27-149">Scroll down for details on what the reliability tier is and the values it can take.</span></span> 


* <span data-ttu-id="20c27-150">Los servicios del sistema de Service Fabric (por ejemplo, el servicio Administrador de clústeres o el servicio de almacén de imágenes) se colocan en el tipo de nodo principal y así la confiabilidad y la durabilidad del clúster se determinan mediante el valor de nivel de confiabilidad y el valor de nivel de durabilidad que se seleccionen para el tipo de nodo principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-150">The Service Fabric system services (for example, the Cluster Manager service or Image Store service) are placed on the primary node type and so the reliability and durability of the cluster is determined by the reliability tier value and durability tier value you select for the primary node type.</span></span>

![<span data-ttu-id="20c27-151">Captura de pantalla de un clúster que tiene dos tipos de nodos</span><span class="sxs-lookup"><span data-stu-id="20c27-151">Screen shot of a cluster that has two Node Types</span></span> ][SystemServices]

### <a name="non-primary-node-type"></a><span data-ttu-id="20c27-152">Tipo de nodo no principal</span><span class="sxs-lookup"><span data-stu-id="20c27-152">Non-primary node type</span></span>
<span data-ttu-id="20c27-153">Para un clúster con varios tipos de nodos, hay un tipo de nodo principal y los demás son de tipo no principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-153">For a cluster with multiple node types, there is one primary node type and the rest of them are non-primary.</span></span> <span data-ttu-id="20c27-154">Estas son las características de un tipo de nodo no principal:</span><span class="sxs-lookup"><span data-stu-id="20c27-154">Here are the characteristics of a non-primary node type:</span></span>

* <span data-ttu-id="20c27-155">El tamaño mínimo de las máquinas virtuales para este tipo de nodo se determina mediante el nivel de durabilidad que se elija.</span><span class="sxs-lookup"><span data-stu-id="20c27-155">The minimum size of VMs for this node type is determined by the durability tier you choose.</span></span> <span data-ttu-id="20c27-156">El valor predeterminado del nivel de durabilidad es Bronze.</span><span class="sxs-lookup"><span data-stu-id="20c27-156">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="20c27-157">Desplácese hacia abajo para más información sobre el nivel de durabilidad y los valores que puede adoptar.</span><span class="sxs-lookup"><span data-stu-id="20c27-157">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="20c27-158">El número mínimo de máquinas virtuales para este tipo de nodo puede ser uno.</span><span class="sxs-lookup"><span data-stu-id="20c27-158">The minimum number of VMs for this node type can be one.</span></span> <span data-ttu-id="20c27-159">Pero este número se debe elegir en función del número de réplicas de la aplicación o de servicios que desea ejecutar en este tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-159">However you should choose this number based on the number of replicas of the application/services that you would like to run in this node type.</span></span> <span data-ttu-id="20c27-160">Después de implementar el clúster, se puede aumentar el número de máquinas virtuales de un tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-160">The number of VMs in a node type can be increased after you have deployed the cluster.</span></span>

## <a name="the-durability-characteristics-of-the-cluster"></a><span data-ttu-id="20c27-161">Características de durabilidad del clúster</span><span class="sxs-lookup"><span data-stu-id="20c27-161">The durability characteristics of the cluster</span></span>
<span data-ttu-id="20c27-162">El nivel de durabilidad se usa para indicar al sistema los privilegios que tienen las máquinas virtuales con la infraestructura subyacente de Azure.</span><span class="sxs-lookup"><span data-stu-id="20c27-162">The durability tier is used to indicate to the system the privileges that your VMs have with the underlying Azure infrastructure.</span></span> <span data-ttu-id="20c27-163">En el tipo de nodo principal, este privilegio permite que Service Fabric pause cualquier solicitud de la infraestructura de nivel de máquina virtual (por ejemplo, reinicio de máquina virtual, restablecimiento de la imagen inicial de máquina virtual o migración de máquina virtual) que afecte a los requisitos de quórum de los servicios del sistema y los servicios con estado.</span><span class="sxs-lookup"><span data-stu-id="20c27-163">In the primary node type, this privilege allows Service Fabric to pause any VM level infrastructure request (such as a VM reboot, VM reimage, or VM migration) that impact the quorum requirements for the system services and your stateful services.</span></span> <span data-ttu-id="20c27-164">En el tipo de nodo no principal, este privilegio permite que Service Fabric pause cualquier solicitud de la infraestructura de nivel de máquina virtual (por ejemplo, reinicio de máquina virtual, restablecimiento de la imagen inicial de máquina virtual o migración de máquina virtual) que afecte a los requisitos de quórum de los servicios con estado que se ejecuten en él.</span><span class="sxs-lookup"><span data-stu-id="20c27-164">In the non-primary node types, this privilege allows Service Fabric to pause any VM level infrastructure requests like VM reboot, VM reimage, VM migration etc., that impact the quorum requirements for your stateful services running in it.</span></span>

<span data-ttu-id="20c27-165">Este privilegio se expresa con los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="20c27-165">This privilege is expressed in the following values:</span></span>

* <span data-ttu-id="20c27-166">Gold: los trabajos de infraestructura se pueden pausar dos horas por cada UD.</span><span class="sxs-lookup"><span data-stu-id="20c27-166">Gold - The infrastructure Jobs can be paused for a duration of two hours per UD.</span></span> <span data-ttu-id="20c27-167">La durabilidad de Gold solo puede habilitarse en las SKU de la máquina virtual del nodo completo, como D15_V2, G5, etc.</span><span class="sxs-lookup"><span data-stu-id="20c27-167">Gold durability can be enabled only on full node VM skus like D15_V2, G5 etc.</span></span>
* <span data-ttu-id="20c27-168">Silver: los trabajos de infraestructura se pueden pausar 10 minutos por cada UD y están disponibles en todas las máquinas virtuales estándares de un solo núcleo y superiores.</span><span class="sxs-lookup"><span data-stu-id="20c27-168">Silver - The infrastructure Jobs can be paused for a duration of 10 minutes per UD and is available on all standard VMs of single core and above.</span></span>
* <span data-ttu-id="20c27-169">Bronze: sin privilegios.</span><span class="sxs-lookup"><span data-stu-id="20c27-169">Bronze - No privileges.</span></span> <span data-ttu-id="20c27-170">Este es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="20c27-170">This is the default.</span></span> <span data-ttu-id="20c27-171">Utilice solo este nivel de durabilidad en los tipos de nodos que ejecutan _exclusivamente_ cargas de trabajo sin estado.</span><span class="sxs-lookup"><span data-stu-id="20c27-171">Only use this durability level for Node Types that run _only_ stateless workloads.</span></span> 

> [!WARNING]
> <span data-ttu-id="20c27-172">Los tipos de nodos que se ejecutan con la durabilidad Bronze no obtienen _privilegios_.</span><span class="sxs-lookup"><span data-stu-id="20c27-172">NodeTypes running with Bronze durability obtain _no privileges_.</span></span> <span data-ttu-id="20c27-173">Es decir, los trabajos de infraestructura que afectan a las cargas de trabajo sin estado no se detendrán ni retrasarán.</span><span class="sxs-lookup"><span data-stu-id="20c27-173">This means that infrastructure jobs that impact your stateless workloads will not be stopped or delayed.</span></span> <span data-ttu-id="20c27-174">Es posible que estos trabajos todavía pueden afectar a las cargas de trabajo, de forma que generen tiempos de inactividad u otros problemas.</span><span class="sxs-lookup"><span data-stu-id="20c27-174">It is possible that such jobs can still impact your workloads, causing downtime or other issues.</span></span> <span data-ttu-id="20c27-175">Se recomienda la durabilidad Silver para cualquier tipo de carga de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="20c27-175">For any sort of production workload, running with at least Silver is recommended.</span></span> 
> 

<span data-ttu-id="20c27-176">Puede elegir el nivel de durabilidad de todos los tipos de nodos. Puede elegir que un tipo de nodo tenga un nivel de durabilidad Gold o Silver, mientras que el otro tiene un nivel Bronze en el mismo clúster. **Debe mantener un número mínimo de 5 nodos en cualquier tipo de nodo que tenga una durabilidad Gold o Silver**.</span><span class="sxs-lookup"><span data-stu-id="20c27-176">You get to choose durability level for each of your node-types.You can choose one node-type to have a durability level of Gold or silver and the other have Bronze in the same cluster.**You must maintain a minimum count of 5 nodes for any node-type that has a durability of Gold or silver**.</span></span> 

<span data-ttu-id="20c27-177">**Ventajas del uso de los niveles de durabilidad Silver o Gold**</span><span class="sxs-lookup"><span data-stu-id="20c27-177">**Advantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="20c27-178">Reduce el número de pasos necesarios en una operación de reducción horizontal (es decir, se llama automáticamente a la desactivación del nodo y a Remove-ServiceFabricNodeState)</span><span class="sxs-lookup"><span data-stu-id="20c27-178">Reduces the number of required steps in a scale-in operation (that is, node deactivation and Remove-ServiceFabricNodeState is called automatically)</span></span>
2. <span data-ttu-id="20c27-179">Reduce el riesgo de pérdida de datos debido a una operación de cambio de SKU en máquinas virtuales locales iniciada por el cliente o a operaciones en la infraestructura de Azure.</span><span class="sxs-lookup"><span data-stu-id="20c27-179">Reduces the risk of data loss due to a customer-initiated in-place VM SKU change operation or Azure infrastructure operations.</span></span>
     
<span data-ttu-id="20c27-180">**Desventajas del uso de los niveles de durabilidad Silver o Gold**</span><span class="sxs-lookup"><span data-stu-id="20c27-180">**Disadvantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="20c27-181">Las implementaciones tanto en el conjunto de escalado de máquinas virtuales como en otros recursos de Azure relacionados se pueden retrasar, pueden agotar el tiempo de espera o se pueden bloquear completamente por problemas en el clúster o en el nivel de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="20c27-181">Deployments to your Virtual Machine Scale Set and other related Azure resources) can be delayed, can time out, or can be blocked entirely by problems in your cluster or at the infrastructure level.</span></span> 
2. <span data-ttu-id="20c27-182">Aumenta el número de [eventos de los ciclos de vida de las réplicas](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ) (p. ej. intercambios principales) debidos a las desactivaciones automáticas de nodos durante las operaciones en la infraestructura de Azure.</span><span class="sxs-lookup"><span data-stu-id="20c27-182">Increases the number of [replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ) (for example, primary swaps) due to automated node deactivations during Azure infrastructure operations.</span></span>

### <a name="recommendations-on-when-to-use-silver-or-gold-durability-levels"></a><span data-ttu-id="20c27-183">Recomendaciones acerca de cuándo usar los niveles de durabilidad Silver o Gold</span><span class="sxs-lookup"><span data-stu-id="20c27-183">Recommendations on when to use Silver or Gold durability levels</span></span>

<span data-ttu-id="20c27-184">Utilice las durabilidades Silver o Gold para todos los tipos de nodo que hospedan servicios con estado que espera reducir horizontalmente (reducir el número de instancias de máquina virtual) con frecuencia, y prefiere que las operaciones de implementación se retrasen en favor de la simplificación de estas operaciones de reducción horizontal.</span><span class="sxs-lookup"><span data-stu-id="20c27-184">Use Silver or Gold durability for all node types that host stateful services you expect to scale-in (reduce VM instance count) frequently, and you would prefer that deployment operations be delayed in favor of simplifying these scale-in operations.</span></span> <span data-ttu-id="20c27-185">Los escenarios de escalabilidad horizontal (adición de instancias de máquinas virtuales) no se tienen en cuenta al elegir el nivel de durabilidad, solo se tiene en cuenta la reducción horizontal.</span><span class="sxs-lookup"><span data-stu-id="20c27-185">The scale-out scenarios (adding VMs instances) do not play into your choice of the durability tier, only scale-in does.</span></span>

### <a name="operational-recommendations-for-the-node-type-that-you-have-set-to-silver-or-gold-durability-level"></a><span data-ttu-id="20c27-186">Recomendaciones operativas para el tipo de nodo en el que ha elegido los niveles de durabilidad Silver o Gold.</span><span class="sxs-lookup"><span data-stu-id="20c27-186">Operational Recommendations for the node type that you have set to silver or gold durability level.</span></span>

1. <span data-ttu-id="20c27-187">Mantenga el clúster y las aplicaciones en buen estado en todo momento, y asegúrese de que las aplicaciones responden a todos los [eventos de los ciclos de vida de las réplicas del servicio](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (como que la réplica en compilación está bloqueada) en el momento adecuado.</span><span class="sxs-lookup"><span data-stu-id="20c27-187">Keep your cluster and applications healthy at all times, and make sure that applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion.</span></span>
2. <span data-ttu-id="20c27-188">Adopte formas más seguras para cambiar una SKU de una máquina virtual (escalar verticalmente/reducir verticalmente): el cambio de SKU de una máquina virtual de un conjunto de escalado de máquinas virtuales es en sí una operación no segura y por lo tanto debería evitarse, si es posible.</span><span class="sxs-lookup"><span data-stu-id="20c27-188">Adopt safer ways to make a VM SKU change (Scale up/down): Changing the VM SKU of a Virtual Machine Scale Set is inherently an unsafe operation and so should be avoided if possible.</span></span> <span data-ttu-id="20c27-189">Este es el proceso que se puede seguir para evitar problemas comunes.</span><span class="sxs-lookup"><span data-stu-id="20c27-189">Here is the process you can follow to avoid common issues.</span></span>
    - <span data-ttu-id="20c27-190">**En el caso de tipo de nodo no principal:** se recomienda crear un nuevo conjunto de escalado de máquinas virtuales, modificar la restricción de la ubicación de servicio para incluir el nuevo conjunto de escalado de máquinas virtuales/tipo de servicio y, después, reducir el número de instancias del conjunto de escalado de máquinas virtuales antiguo a 0, nodo a nodo (esto es para asegurarse de que la eliminación de los nodos no afecta a la confiabilidad del clúster).</span><span class="sxs-lookup"><span data-stu-id="20c27-190">**For non-primary nodetypes:** It is recommended that you create new Virtual Machine Scale Set, modify the service placement constraint to include the new Virtual Machine Scale Set/node type and then reduce the old Virtual Machine Scale Set instance count to 0, one node at a time (this is to make sure that removal of the nodes do not impact the reliability of the cluster).</span></span>
    - <span data-ttu-id="20c27-191">**En el caso de tipo de nodo principal:** nuestra recomendación es no cambiar la SKU de máquina virtual del tipo de nodo principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-191">**For the primary nodetype:** Our recommendation is that you do not change VM SKU of the primary node type.</span></span> <span data-ttu-id="20c27-192">Si la razón de la nueva SKU es la capacidad, se recomienda agregar más instancias o, si es posible, crear un clúster nuevo.</span><span class="sxs-lookup"><span data-stu-id="20c27-192">If the reason for the new SKU is capacity, we recommend adding more instances or if possible, create a new cluster.</span></span> <span data-ttu-id="20c27-193">Si no tiene ninguna opción, realice modificaciones en la definición del modelo del conjunto de escalado de máquinas virtuales para reflejar la SKU nueva.</span><span class="sxs-lookup"><span data-stu-id="20c27-193">If you have no choice, then make modifications to the Virtual Machine Scale Set Model definition to reflect the new SKU.</span></span> <span data-ttu-id="20c27-194">Si el clúster tiene un solo tipo de nodo, asegúrese de que las aplicaciones con estado responden a todos los [eventos de ciclo de vida de réplica de servicio](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (como que la réplica en creación está bloqueada) en el momento adecuado y que la duración de la regeneración de la réplica del servicio es inferior a cinco minutos (en el nivel de durabilidad Silver).</span><span class="sxs-lookup"><span data-stu-id="20c27-194">If your cluster has only one nodetype, then make sure that all your stateful applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion and that your service replica rebuild duration is less than five minutes (for Silver durability level).</span></span> 


> [!WARNING]
> <span data-ttu-id="20c27-195">No se recomienda cambiar el tamaño de la SKU de VM en los conjuntos de escalado de máquinas virtuales de Microsoft Azure que no ejecutan, como mínimo, la durabilidad Silver.</span><span class="sxs-lookup"><span data-stu-id="20c27-195">Changing the VM SKU Size for VM Scale Sets not running at least Silver durability is not recommened.</span></span> <span data-ttu-id="20c27-196">Modificar el tamaño de la SKU de VM constituye una operación de infraestructura local de destrucción de datos.</span><span class="sxs-lookup"><span data-stu-id="20c27-196">Changing VM SKU Size is a data-destructive in-place infrastructure operation.</span></span> <span data-ttu-id="20c27-197">Sin la posibilidad de retrasar o supervisar este cambio, es posible que la operación pueda provocar una pérdida de datos en los servicios con estado, o bien causar otros problemas de funcionamiento imprevistos, incluso en las cargas de trabajo sin estado.</span><span class="sxs-lookup"><span data-stu-id="20c27-197">Without at least some ability to delay or monitor this change, it is possible that the operation can cause dataloss for stateful services or cause other unforseen operational issues, even for stateless workloads.</span></span> 
> 
    
3. <span data-ttu-id="20c27-198">Mantenga un número mínimo de cinco nodos en todos los conjuntos de escalado de máquinas virtuales en los que MR esté habilitado</span><span class="sxs-lookup"><span data-stu-id="20c27-198">Maintain a minimum count of five nodes for any Virtual Machine Scale Set that has MR enabled</span></span>
4. <span data-ttu-id="20c27-199">No elimine instancias de máquina virtual aleatorias, use siempre la característica de reducción vertical del conjunto de escalado de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="20c27-199">Do not delete random VM instances, always use Virtual Machine Scale Set scale down feature.</span></span> <span data-ttu-id="20c27-200">La eliminación de instancias de máquina virtual aleatorias tiene el potencial de crear desequilibrios en la instancia de máquina virtual repartidos entre UD y FD.</span><span class="sxs-lookup"><span data-stu-id="20c27-200">The deletion of random VM instances has a potential of creating imbalances in the VM instance spread across UD and FD.</span></span> <span data-ttu-id="20c27-201">Este desequilibrio puede afectar negativamente a la capacidad de los sistemas para realizar un correcto equilibrio de la carga entre las instancias del servicio o réplicas del servicio.</span><span class="sxs-lookup"><span data-stu-id="20c27-201">This imbalance could adversely affect the systems ability to properly load balance amongst the service instances/Service replicas.</span></span>
6. <span data-ttu-id="20c27-202">Si se usa el escalado automático, establezca las reglas de forma que la reducción horizontal (eliminación de instancias de máquina virtual) no se realiza en varios nodos simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="20c27-202">If using Autoscale, then set the rules such that scale in (removing of VM instances) are done only one node at a time.</span></span> <span data-ttu-id="20c27-203">No es seguro reducir verticalmente más de una instancia a la vez.</span><span class="sxs-lookup"><span data-stu-id="20c27-203">Scaling down more than one instance at a time is not safe.</span></span>
7. <span data-ttu-id="20c27-204">Si reduce verticalmente un tipo de nodo principal, no deberá hacerlo más de lo que permite el nivel de confiabilidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-204">If Scaling down a primary node type, you should never scale it down more than what the reliability tier allows.</span></span>


## <a name="the-reliability-characteristics-of-the-cluster"></a><span data-ttu-id="20c27-205">Características de confiabilidad del clúster</span><span class="sxs-lookup"><span data-stu-id="20c27-205">The reliability characteristics of the cluster</span></span>
<span data-ttu-id="20c27-206">El nivel de confiabilidad se usa para establecer el número de réplicas de los servicios del sistema que se desea ejecutar en el tipo de nodo principal de este clúster.</span><span class="sxs-lookup"><span data-stu-id="20c27-206">The reliability tier is used to set the number of replicas of the system services that you want to run in this cluster on the primary node type.</span></span> <span data-ttu-id="20c27-207">Cuanto mayor sea el número de réplicas, más confiables son los servicios del sistema en el clúster.</span><span class="sxs-lookup"><span data-stu-id="20c27-207">The more the number of replicas, the more reliable the system services are in your cluster.</span></span>  

<span data-ttu-id="20c27-208">El nivel de confiabilidad puede adoptar los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="20c27-208">The reliability tier can take the following values:</span></span>

* <span data-ttu-id="20c27-209">Platinum: los servicios del sistema se ejecutan con un recuento de conjunto de réplicas de 9</span><span class="sxs-lookup"><span data-stu-id="20c27-209">Platinum - Run the System services with a target replica set count of 9</span></span>
* <span data-ttu-id="20c27-210">Gold: los servicios del sistema se ejecutan con un recuento de conjunto de réplicas de 7</span><span class="sxs-lookup"><span data-stu-id="20c27-210">Gold - Run the System services with a target replica set count of 7</span></span>
* <span data-ttu-id="20c27-211">Silver: los servicios del sistema se ejecutan con un recuento de conjunto de réplicas de 5</span><span class="sxs-lookup"><span data-stu-id="20c27-211">Silver - Run the System services with a target replica set count of 5</span></span> 
* <span data-ttu-id="20c27-212">Bronze: los servicios del sistema se ejecutan con un recuento de conjunto de réplicas de 3</span><span class="sxs-lookup"><span data-stu-id="20c27-212">Bronze - Run the System services with a target replica set count of 3</span></span>

> [!NOTE]
> <span data-ttu-id="20c27-213">El nivel de confiabilidad que elija determina el número mínimo de nodos que debe tener el tipo de nodo principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-213">The reliability tier you choose determines the minimum number of nodes your primary node type must have.</span></span> 
> 
> 


### <a name="recommendations-for-the-reliability-tier"></a><span data-ttu-id="20c27-214">Recomendaciones para el nivel de confiabilidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-214">Recommendations for the reliability tier.</span></span>

 <span data-ttu-id="20c27-215">Al aumentar o disminuir el tamaño del clúster (la suma de las instancias de máquinas virtuales en todos los tipos de nodo), debe actualizar la confiabilidad del clúster desde un nivel a otro.</span><span class="sxs-lookup"><span data-stu-id="20c27-215">When you increase or decrease the size of your cluster (the sum of VM instances in all node types), you must update the reliability of your cluster from one tier to another.</span></span> <span data-ttu-id="20c27-216">Esto desencadena las actualizaciones de clúster necesarias para cambiar el recuento de conjunto de réplicas de los servicios del sistema.</span><span class="sxs-lookup"><span data-stu-id="20c27-216">Doing this triggers the cluster upgrades needed to change the system services replica set count.</span></span> <span data-ttu-id="20c27-217">Espere a que finalice la actualización en curso antes de realizar otros cambios en el clúster, como agregar nodos.</span><span class="sxs-lookup"><span data-stu-id="20c27-217">Wait for the upgrade in progress to complete before making any other changes to the cluster, like adding nodes.</span></span>  <span data-ttu-id="20c27-218">Puede supervisar el progreso de la actualización en Service Fabric Explorer o puede ejecutar [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps).</span><span class="sxs-lookup"><span data-stu-id="20c27-218">You can monitor the progress of the upgrade on Service Fabric Explorer or by running [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps)</span></span>

<span data-ttu-id="20c27-219">Esta es la recomendación sobre cómo elegir el nivel de confiabilidad.</span><span class="sxs-lookup"><span data-stu-id="20c27-219">Here is the recommendation on choosing the reliability tier.</span></span>

| <span data-ttu-id="20c27-220">**Tamaño del clúster**</span><span class="sxs-lookup"><span data-stu-id="20c27-220">**Cluster Size**</span></span> | <span data-ttu-id="20c27-221">**Nivel de confiabilidad**</span><span class="sxs-lookup"><span data-stu-id="20c27-221">**Reliability Tier**</span></span> |
| --- | --- |
| <span data-ttu-id="20c27-222">1</span><span class="sxs-lookup"><span data-stu-id="20c27-222">1</span></span> |<span data-ttu-id="20c27-223">No especifique el parámetro nivel de confiabilidad, el sistema lo calcula</span><span class="sxs-lookup"><span data-stu-id="20c27-223">Do not specify the Reliability Tier parameter, the system calculates it</span></span> |
| <span data-ttu-id="20c27-224">3</span><span class="sxs-lookup"><span data-stu-id="20c27-224">3</span></span> |<span data-ttu-id="20c27-225">Bronze</span><span class="sxs-lookup"><span data-stu-id="20c27-225">Bronze</span></span> |
| <span data-ttu-id="20c27-226">5 o 6</span><span class="sxs-lookup"><span data-stu-id="20c27-226">5 or 6</span></span>|<span data-ttu-id="20c27-227">Silver</span><span class="sxs-lookup"><span data-stu-id="20c27-227">Silver</span></span> |
| <span data-ttu-id="20c27-228">7 u 8</span><span class="sxs-lookup"><span data-stu-id="20c27-228">7 or 8</span></span> |<span data-ttu-id="20c27-229">Gold</span><span class="sxs-lookup"><span data-stu-id="20c27-229">Gold</span></span> |
| <span data-ttu-id="20c27-230">9 y superiores</span><span class="sxs-lookup"><span data-stu-id="20c27-230">9 and up</span></span> |<span data-ttu-id="20c27-231">Platinum</span><span class="sxs-lookup"><span data-stu-id="20c27-231">Platinum</span></span> |




## <a name="primary-node-type---capacity-guidance"></a><span data-ttu-id="20c27-232">Tipo de nodo principal: guía de capacidad</span><span class="sxs-lookup"><span data-stu-id="20c27-232">Primary node type - Capacity Guidance</span></span>

<span data-ttu-id="20c27-233">Esta es la guía para planear la capacidad del tipo de nodo principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-233">Here is the guidance for planning the primary node type capacity</span></span>

1. <span data-ttu-id="20c27-234">**Número de instancias de máquina virtual para ejecutar cualquier carga de trabajo de producción en Azure:** Debe especificar un tamaño mínimo de tipo de nodo principal de 5.</span><span class="sxs-lookup"><span data-stu-id="20c27-234">**Number of VM instances to run any production workload in Azure:** You must specify a minimum Primary Node type size of 5.</span></span> 
2. <span data-ttu-id="20c27-235">**Número de instancias de máquina virtual para ejecutar cargas de trabajo de prueba en Azure** Puede especificar un tamaño mínimo de tipo de nodo principal de 1 o 3.</span><span class="sxs-lookup"><span data-stu-id="20c27-235">**Number of VM instances to run test workloads in Azure** You can specify a minimum primary node type size of 1 or 3.</span></span> <span data-ttu-id="20c27-236">El clúster de 1 nodo uno funciona con una configuración especial y, por tanto, no se admite el escalado horizontal de ese clúster.</span><span class="sxs-lookup"><span data-stu-id="20c27-236">The one node cluster, runs with a special configuration and so, scale out of that cluster is not supported.</span></span> <span data-ttu-id="20c27-237">El clúster de 1 nodo no tiene ninguna confiabilidad y, por tanto, en la plantilla de Resource Manager, tiene que quitar/no especificar esa configuración (no basta con no definir el valor de configuración).</span><span class="sxs-lookup"><span data-stu-id="20c27-237">The one node cluster, has no reliability and so in your Resource Manager template, you have to remove/not specify that configuration (not setting the configuration value is not enough).</span></span> <span data-ttu-id="20c27-238">Si configura el clúster del nodo uno configurado mediante el portal, la configuración se controla automáticamente.</span><span class="sxs-lookup"><span data-stu-id="20c27-238">If you set up the one node cluster set up via portal, then the configuration is automatically taken care of.</span></span> <span data-ttu-id="20c27-239">Los clústeres de 1 y 3 nodos no se admiten en la ejecución de cargas de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="20c27-239">1 and 3 node clusters are not supported for running production workloads.</span></span> 
3. <span data-ttu-id="20c27-240">**SKU de máquina virtual**: el tipo de nodo principal es donde se ejecutan los servicios del sistema, así que la SKU de máquina virtual que elija, debe tener en cuenta la carga máxima global que planea colocar en el clúster.</span><span class="sxs-lookup"><span data-stu-id="20c27-240">**VM SKU:** Primary node type is where the system services run, so the VM SKU you choose for it, must take into account the overall peak load you plan to place into the cluster.</span></span> <span data-ttu-id="20c27-241">En esta analogía se ilustra el significado de esto: considere que el tipo de nodo principal son sus "pulmones", es lo que lleva oxígeno a su cerebro, de modo que si no se obtiene oxígeno suficiente, el cuerpo sufre.</span><span class="sxs-lookup"><span data-stu-id="20c27-241">Here is an analogy to illustrate what I mean here - Think of the primary node type as your "Lungs", it is what provides oxygen to your brain, and so if the brain does not get enough oxygen, your body suffers.</span></span> 

<span data-ttu-id="20c27-242">Las necesidades de capacidad de un clúster las determina la carga de trabajo que planea ejecutar en el clúster. Por consiguiente, no le podemos proporcionar una guía cualitativa de la carga de trabajo específica, aunque sí una amplia guía que le ayudará a comenzar</span><span class="sxs-lookup"><span data-stu-id="20c27-242">Since the capacity needs of a cluster is determined by workload you plan to run in the cluster, we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="20c27-243">Para cargas de trabajo de producción</span><span class="sxs-lookup"><span data-stu-id="20c27-243">For production workloads</span></span> 


- <span data-ttu-id="20c27-244">La SKU de máquina virtual recomendada es Standard D3 o Standard D3_V2 o equivalente con un SSD local de 14 GB como mínimo.</span><span class="sxs-lookup"><span data-stu-id="20c27-244">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="20c27-245">La SKU de máquina virtual mínima admitida es Standard D1 o Standard D1_V2 o equivalente con un SSD local de 14 GB como mínimo.</span><span class="sxs-lookup"><span data-stu-id="20c27-245">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="20c27-246">Las SKU de máquina virtual de núcleo parcial, como Standard A0, no se admiten en cargas de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="20c27-246">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="20c27-247">La SKU Standard A1 no se admite en cargas de trabajo de producción por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="20c27-247">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateful-workloads"></a><span data-ttu-id="20c27-248">Tipo de nodo no principal: guía de capacidad para cargas de trabajo con estado</span><span class="sxs-lookup"><span data-stu-id="20c27-248">Non-Primary node type - Capacity Guidance for stateful workloads</span></span>

<span data-ttu-id="20c27-249">Esta guía está dirigida a cargas de trabajo con estado con [colecciones confiables o actores confiables](service-fabric-choose-framework.md) de Service Fabric en ejecución en el tipo de nodo no principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-249">This guidance is for stateful Workloads using Service fabric [reliable collections or reliable Actors](service-fabric-choose-framework.md) that you are running in the non-primary node type.</span></span>


<span data-ttu-id="20c27-250">**Número de instancias de máquina virtual**: para cargas de trabajo de producción con estado, se recomienda ejecutarlas con un número mínimo de réplicas de destino de 5.</span><span class="sxs-lookup"><span data-stu-id="20c27-250">**Number of VM instances:** For production workloads that are stateful, it is recommended that you run them with a minimum and target replica count of 5.</span></span> <span data-ttu-id="20c27-251">Esto significa que en estado estable acabará con una réplica (de un conjunto de réplicas) en cada dominio de error y dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="20c27-251">This means that in steady state you end up with a replica (from a replica set) in each fault domain and upgrade domain.</span></span> <span data-ttu-id="20c27-252">El concepto de nivel de confiabilidad completo para el tipo de nodo principal es una manera de especificar esta configuración para los servicios del sistema.</span><span class="sxs-lookup"><span data-stu-id="20c27-252">The whole reliability tier concept for the primary node type is a way to specify this setting for system services.</span></span> <span data-ttu-id="20c27-253">Por lo que la misma consideración se aplica a los servicios con estado también.</span><span class="sxs-lookup"><span data-stu-id="20c27-253">So the same consideration applies to your stateful services as well.</span></span>

<span data-ttu-id="20c27-254">Por lo tanto, para cargas de trabajo de producción, el tamaño mínimo recomendado de tipo de nodo no principal es 5, si ejecuta en él cargas de trabajo con estado.</span><span class="sxs-lookup"><span data-stu-id="20c27-254">So for production workloads, the minimum recommended non-Primary Node type size is 5, if you are running stateful workloads in it.</span></span>


<span data-ttu-id="20c27-255">**SKU de máquina virtual**: es el tipo de nodo donde se ejecutan los servicios de aplicación, de modo que la SKU de máquina virtual que elija para él debe tener en cuenta la carga máxima que planea colocar en cada nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-255">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="20c27-256">Las necesidades de capacidad del tipo de nodo vienen determinadas por la carga de trabajo que planea ejecutar en el clúster, por lo que no es posible proporcionar una guía cualitativa de su carga de trabajo específica, aunque sí una amplia información para ayudarle a comenzar</span><span class="sxs-lookup"><span data-stu-id="20c27-256">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, so we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="20c27-257">Para cargas de trabajo de producción</span><span class="sxs-lookup"><span data-stu-id="20c27-257">For production workloads</span></span> 

- <span data-ttu-id="20c27-258">La SKU de máquina virtual recomendada es Standard D3 o Standard D3_V2 o equivalente con un SSD local de 14 GB como mínimo.</span><span class="sxs-lookup"><span data-stu-id="20c27-258">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="20c27-259">La SKU de máquina virtual mínima admitida es Standard D1 o Standard D1_V2 o equivalente con un SSD local de 14 GB como mínimo.</span><span class="sxs-lookup"><span data-stu-id="20c27-259">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="20c27-260">Las SKU de máquina virtual de núcleo parcial, como Standard A0, no se admiten en cargas de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="20c27-260">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="20c27-261">En concreto, la SKU Standard A1 no se admite en cargas de producción por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="20c27-261">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateless-workloads"></a><span data-ttu-id="20c27-262">Tipo de nodo no principal: guía de capacidad para cargas de trabajo sin estado</span><span class="sxs-lookup"><span data-stu-id="20c27-262">Non-Primary node type - Capacity Guidance for stateless workloads</span></span>

<span data-ttu-id="20c27-263">Esta guía se aplica a las cargas de trabajo sin estado en ejecución en el tipo de nodo no principal.</span><span class="sxs-lookup"><span data-stu-id="20c27-263">This guidance of stateless Workloads that you are running on the non-primary nodetype.</span></span>

<span data-ttu-id="20c27-264">**Número de instancias de máquina virtual:** en el caso de las cargas de trabajo de producción sin estado, el tamaño mínimo admitido del tipo de nodo no principal es 2.</span><span class="sxs-lookup"><span data-stu-id="20c27-264">**Number of VM instances:** For production workloads that are stateless, the minimum supported non-Primary Node type size is 2.</span></span> <span data-ttu-id="20c27-265">Esto le permite ejecutar dos instancias sin estado de la aplicación y permite que el servicio para sobreviva a la pérdida de una instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="20c27-265">This allows you to run you two stateless instances of your application and allowing your service to survive the loss of a VM instance.</span></span> 

> [!NOTE]
> <span data-ttu-id="20c27-266">Si el clúster se ejecuta en una versión de Service Fabric inferior a la 5.6 debido a un defecto en el entorno de tiempo de ejecución (que se prevé corregir en la 5.6), al reducir verticalmente un tipo de nodo no principal a menos de 5, el mantenimiento del clúster pasará a un estado incorrecto hasta que llame a [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) con el nombre de nodo adecuado.</span><span class="sxs-lookup"><span data-stu-id="20c27-266">If your cluster is running on a service fabric version less than 5.6, due to a defect in the runtime (this issue is fixed in 5.6), scaling down a non-primary node type to less than 5, results in cluster health turning unhealthy, till you call [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) with the appropriate node name.</span></span> <span data-ttu-id="20c27-267">Para más información, lea [Escalado o reducción horizontal de un clúster de Service Fabric ](service-fabric-cluster-scale-up-down.md).</span><span class="sxs-lookup"><span data-stu-id="20c27-267">Read [perform Service Fabric cluster in or out](service-fabric-cluster-scale-up-down.md) for more details</span></span>
> 
>

<span data-ttu-id="20c27-268">**SKU de máquina virtual**: es el tipo de nodo donde se ejecutan los servicios de aplicación, de modo que la SKU de máquina virtual que elija para él debe tener en cuenta la carga máxima que planea colocar en cada nodo.</span><span class="sxs-lookup"><span data-stu-id="20c27-268">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="20c27-269">Las necesidades de capacidad del tipo de nodo vienen determinadas por la carga de trabajo que planea ejecutar en el clúster, por lo que no es posible proporcionar una guía cualitativa de su carga de trabajo específica, aunque sí una amplia información para ayudarle a comenzar</span><span class="sxs-lookup"><span data-stu-id="20c27-269">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, So we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="20c27-270">Para cargas de trabajo de producción</span><span class="sxs-lookup"><span data-stu-id="20c27-270">For production workloads</span></span> 


- <span data-ttu-id="20c27-271">La SKU de máquina virtual recomendada es Standard D3 o Standard D3_V2 o equivalente.</span><span class="sxs-lookup"><span data-stu-id="20c27-271">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent.</span></span> 
- <span data-ttu-id="20c27-272">La SKU de máquina virtual mínima admitida es Standard D1 o Standard D1_V2 o equivalente.</span><span class="sxs-lookup"><span data-stu-id="20c27-272">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent.</span></span> 
- <span data-ttu-id="20c27-273">Las SKU de máquina virtual de núcleo parcial, como Standard A0, no se admiten en cargas de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="20c27-273">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="20c27-274">La SKU Standard A1 no se admite en cargas de trabajo de producción por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="20c27-274">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->

## <a name="next-steps"></a><span data-ttu-id="20c27-275">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="20c27-275">Next steps</span></span>
<span data-ttu-id="20c27-276">Después de finalizar la planeación de capacidad y configurar un clúster, puede consultar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="20c27-276">Once you finish your capacity planning and set up a cluster, read the following:</span></span>

* [<span data-ttu-id="20c27-277">Seguridad de los clústeres de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="20c27-277">Service Fabric cluster security</span></span>](service-fabric-cluster-security.md)
* [<span data-ttu-id="20c27-278">Introducción al modelo de mantenimiento de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="20c27-278">Service Fabric health model introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="20c27-279">Relación de tipos de nodos con conjuntos de escalado de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="20c27-279">Relationship of Nodetypes to Virtual machine scale set</span></span>](service-fabric-cluster-nodetypes.md)

<!--Image references-->
[SystemServices]: ./media/service-fabric-cluster-capacity/SystemServices.png

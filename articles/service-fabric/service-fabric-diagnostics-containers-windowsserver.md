---
title: "aaaAzure diagnósticos y supervisión del servicio tejido contenedores | Documentos de Microsoft"
description: "Obtenga información acerca de cómo toomonitor y diagnosticar los contenedores que se organiza en Microsoft Azure Service Fabric con soluciones de contenedores de OMS."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="de65f-103">Supervisión de contenedores de Windows Server con OMS</span><span class="sxs-lookup"><span data-stu-id="de65f-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="de65f-104">Solución Containers de OMS</span><span class="sxs-lookup"><span data-stu-id="de65f-104">OMS Containers Solution</span></span>

<span data-ttu-id="de65f-105">equipo de Operations Management Suite (OMS) Hola ha publicado una solución de contenedores para diagnósticos y supervisión para los contenedores.</span><span class="sxs-lookup"><span data-stu-id="de65f-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="de65f-106">Junto con su solución de Service Fabric, esta solución es un implementaciones de contenedor de toomonitor herramienta excelente organiza en el tejido de servicio.</span><span class="sxs-lookup"><span data-stu-id="de65f-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="de65f-107">Este es un ejemplo sencillo de qué panel hello en soluciones de hello es similar:</span><span class="sxs-lookup"><span data-stu-id="de65f-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Panel de OMS básico](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="de65f-109">También recopila diferentes tipos de registros que se pueden consultar en la herramienta de análisis de registros de OMS de hello, y puede ser usado toovisualize cualquier métricas o eventos que se está generados.</span><span class="sxs-lookup"><span data-stu-id="de65f-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="de65f-110">los tipos de registro de Hello que se recopilan son:</span><span class="sxs-lookup"><span data-stu-id="de65f-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="de65f-111">ContainerInventory: muestra información acerca de la ubicación, nombre e imágenes del contenedor</span><span class="sxs-lookup"><span data-stu-id="de65f-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="de65f-112">ContainerImageInventory: información acerca de las imágenes implementadas, lo que incluye sus identificadores o tamaños</span><span class="sxs-lookup"><span data-stu-id="de65f-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="de65f-113">ContainerLog: registros de error concretos, registros de docker (stdout, etc.) y otras entradas</span><span class="sxs-lookup"><span data-stu-id="de65f-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="de65f-114">ContainerServiceLog: comandos de demonio de docker que se han ejecutado</span><span class="sxs-lookup"><span data-stu-id="de65f-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="de65f-115">Rendimiento: contadores de rendimiento incluido contenedor cpu, memoria, tráfico de red, la e/s de disco y métricas personalizadas de hello hospedan máquinas</span><span class="sxs-lookup"><span data-stu-id="de65f-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="de65f-116">Este artículo tratan Hola pasos necesarios tooset la supervisión para el clúster de contenedor.</span><span class="sxs-lookup"><span data-stu-id="de65f-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="de65f-117">más información acerca de la solución de contenedores de OMS, toolearn desproteger sus [documentación](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="de65f-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="de65f-118">1. Configuración de un clúster de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="de65f-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="de65f-119">Crear un clúster con la plantilla de Azure Resource Manager Hola encuentra [aquí](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="de65f-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="de65f-120">Asegúrese de que tooadd un único nombre de área de trabajo OMS.</span><span class="sxs-lookup"><span data-stu-id="de65f-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="de65f-121">Esta plantilla también tiene como valor predeterminado de toodeploying crear un clúster en la vista previa de Hola de Service Fabric (v255.255), lo que significa que no se puede usar en producción y no se puede actualiza tooa otra versión de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="de65f-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="de65f-122">Si decide toouse esta plantilla para a largo plazo o de producción usan, cambiar el número de versión estable de hello versión tooa.</span><span class="sxs-lookup"><span data-stu-id="de65f-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="de65f-123">Una vez configurado el clúster de hello, confirme que ha instalado el certificado adecuado de Hola y asegúrese de que es capaz de tooconnect toohello clúster.</span><span class="sxs-lookup"><span data-stu-id="de65f-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="de65f-124">Confirme que el grupo de recursos se ha configurado correctamente por título toohello [portal de Azure](https://portal.azure.com/) y buscar la implementación de Hola.</span><span class="sxs-lookup"><span data-stu-id="de65f-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="de65f-125">grupo de recursos de Hello debería contener todos los recursos de Service Fabric hello y, también tiene una solución de análisis de registros, así como una solución de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="de65f-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="de65f-126">Para modificar un clúster de Service Fabric existente:</span><span class="sxs-lookup"><span data-stu-id="de65f-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="de65f-127">Confirme que esté habilitado diagnósticos (si no es así, habilitarla a través de [actualizar conjunto de escalas de máquina virtual de hello](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="de65f-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="de65f-128">Agregar un área de trabajo de OMS mediante la creación de una solución de "Análisis de tejido de servicio" a través de hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="de65f-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="de65f-129">Editar orígenes de datos de Hola de hello Service Fabric solución toopick datos en tablas de almacenamiento de Azure adecuadas de hello (configurar wad) Hola grupo de recursos que Hola clúster está en</span><span class="sxs-lookup"><span data-stu-id="de65f-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="de65f-130">Agregar agente de Hola como un [conjunto de escalas de máquina virtual de extensión toohello](/powershell/module/azurerm.compute/add-azurermvmssextension) a través de PowerShell o a través de actualizar el conjunto de escalas de máquina virtual de hello (mismo vínculo anterior, plantilla de administrador de recursos de hello toomodify)</span><span class="sxs-lookup"><span data-stu-id="de65f-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="de65f-131">2. Implementación de un contenedor</span><span class="sxs-lookup"><span data-stu-id="de65f-131">2. Deploy a container</span></span>

<span data-ttu-id="de65f-132">Una vez que el clúster Hola está listo y haber confirmado que puede acceder a ella, implemente un tooit del contenedor.</span><span class="sxs-lookup"><span data-stu-id="de65f-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="de65f-133">Si elige versión de vista previa de hello toouse como conjunto por plantilla de hello, también puede explorar docker nueva de Service Fabric crean la funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="de65f-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="de65f-134">Tenga en cuenta que Hola primera vez una imagen de contenedor es tooa implementado clúster, se aplican varias imágenes de hello toodownload de minutos dependiendo de su tamaño.</span><span class="sxs-lookup"><span data-stu-id="de65f-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="de65f-135">3. Agregar la solución de contenedores de Hola</span><span class="sxs-lookup"><span data-stu-id="de65f-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="de65f-136">En el portal de Azure de Hola, cree un recurso de contenedores (bajo Hola supervisión + administración categoría) a través de Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="de65f-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Adición de la solución Containers](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="de65f-138">En el paso de creación de hello, solicita un área de trabajo OMS.</span><span class="sxs-lookup"><span data-stu-id="de65f-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="de65f-139">Seleccione Hola uno que se creó con la implementación de hello anterior.</span><span class="sxs-lookup"><span data-stu-id="de65f-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="de65f-140">Este paso agrega una solución de contenedores en el área de trabajo OMS y se detecta automáticamente por el agente OMS Hola implementado por plantilla de Hola.</span><span class="sxs-lookup"><span data-stu-id="de65f-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="de65f-141">agente de Hello empezará a recopilar datos en procesos de contenedores de hello en clúster de Hola y en aproximadamente 10-15 minutos, debería ver soluciones Hola claro seguridad con datos como en la imagen de hello del panel de hello anterior de.</span><span class="sxs-lookup"><span data-stu-id="de65f-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="de65f-142">4. Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="de65f-142">4. Next steps</span></span>

<span data-ttu-id="de65f-143">OMS ofrece diversas herramientas de hello toomake de área de trabajo si es más útil para usted.</span><span class="sxs-lookup"><span data-stu-id="de65f-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="de65f-144">Explorar Hola después opciones toocustomize Hola solución tooyour necesidades:</span><span class="sxs-lookup"><span data-stu-id="de65f-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="de65f-145">Obtener las nociones básicas de hello [Iniciar búsqueda y la consulta](../log-analytics/log-analytics-log-searches.md) que ofrece características como parte del análisis de registros</span><span class="sxs-lookup"><span data-stu-id="de65f-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="de65f-146">Configurar toopick de agente OMS Hola los contadores de rendimiento específicos (ir toohello área de trabajo principal > Configuración > datos > contadores de rendimiento de Windows)</span><span class="sxs-lookup"><span data-stu-id="de65f-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="de65f-147">Configurar OMS tooset [automatizada alertas](../log-analytics/log-analytics-alerts.md) tooaid de reglas en la detección y diagnóstico</span><span class="sxs-lookup"><span data-stu-id="de65f-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>

---
title: Modelo de hospedaje de servicio tejido aaaAzure | Documentos de Microsoft
description: "Describe la relación entre las réplicas o las instancias de un servicio implementado de Service Fabric y el proceso de host de servicio."
services: service-fabric
documentationcenter: .net
author: harahma
manager: timlt
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/15/2017
ms.author: harahma
ms.openlocfilehash: 30e0ba19cd672a722f76477a311ecef7c213b055
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-hosting-model"></a><span data-ttu-id="8029b-103">Modelo de hospedaje de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8029b-103">Service Fabric hosting model</span></span>
<span data-ttu-id="8029b-104">Este artículo proporciona una visión general de la aplicación que hospeda modelos proporcionados por Service Fabric y describe las diferencias de hello entre hello **proceso compartido** y **proceso exclusivo** modelos.</span><span class="sxs-lookup"><span data-stu-id="8029b-104">This article provides an overview of application hosting models provided by Service Fabric, and describes hello differences between hello **Shared Process** and **Exclusive Process** models.</span></span> <span data-ttu-id="8029b-105">Describe el aspecto de una aplicación implementada en un nodo de Service Fabric y una relación entre las réplicas (o instancias) de servicio de Hola y el proceso de host de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-105">It describes how a deployed application looks on a Service Fabric node and relationship between replicas (or instances) of hello service and hello service-host process.</span></span>

<span data-ttu-id="8029b-106">Antes de continuar, asegúrese de que está familiarizado con el [Modelo de aplicación de Service Fabric][a1] y de que conoce los diferentes conceptos y la relación entre ellos.</span><span class="sxs-lookup"><span data-stu-id="8029b-106">Before proceeding further, make sure that you are familiar with [Service Fabric Application Model][a1] and understand various concepts and relation among them.</span></span> 

> [!NOTE]
> <span data-ttu-id="8029b-107">En este artículo, para simplificar, a menos que se mencione explícitamente:</span><span class="sxs-lookup"><span data-stu-id="8029b-107">In this article, for simplicity, unless explicitly mentioned:</span></span>
>
> - <span data-ttu-id="8029b-108">Todos los usos de la palabra *réplica* hace referencia a una réplica de un servicio con estado o una instancia de un servicio statless tooboth.</span><span class="sxs-lookup"><span data-stu-id="8029b-108">All uses of word *replica* refers tooboth a replica of a stateful service or an instance of a statless service.</span></span>
> - <span data-ttu-id="8029b-109">*CodePackage* tratados equivale demasiado*ServiceHost* proceso que se registra un *ServiceType* y réplicas de hosts de servicios, que *ServiceType*.</span><span class="sxs-lookup"><span data-stu-id="8029b-109">*CodePackage* is treated equivalent too*ServiceHost* process that registers a *ServiceType* and hosts replicas of services of that *ServiceType*.</span></span>
>

<span data-ttu-id="8029b-110">toounderstand Hola modelo de hospedaje, permítanos dirigirle a través de un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="8029b-110">toounderstand hello hosting model, let us walk through an example.</span></span> <span data-ttu-id="8029b-111">Se supone que hay una instancia de *ApplicationType* llamada "MyAppType" que tiene un valor de *ServiceType* "MyServiceType" proporcionado por *ServicePackage* "MyServicePackage" que incluye una instancia de *CodePackage* "MyCodePackage" que registra *ServiceType* "MyServiceType" cuando se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="8029b-111">Let us say, we have an *ApplicationType* 'MyAppType' which has a *ServiceType* 'MyServiceType' which is provided by *ServicePackage* 'MyServicePackage' which has a *CodePackage* 'MyCodePackage' which registers *ServiceType* 'MyServiceType' when it runs.</span></span>

<span data-ttu-id="8029b-112">Por ejemplo, hay un clúster de 3 nodos y se crea una *aplicación* **fabric:/App1** de tipo "MyAppType".</span><span class="sxs-lookup"><span data-stu-id="8029b-112">Let's say we have a 3 node cluster and we create an *application* **fabric:/App1** of type 'MyAppType'.</span></span> <span data-ttu-id="8029b-113">Dentro de la *aplicación* **fabric:/App1**, se crea un servicio **fabric:/App1/ServiceA** de tipo "MyServiceType" que tiene 2 particiones (**P1** & **P2**) y 3 réplicas por cada partición.</span><span class="sxs-lookup"><span data-stu-id="8029b-113">Inside this *application* **fabric:/App1** we create a service **fabric:/App1/ServiceA** of type 'MyServiceType' which has 2 partitions (say **P1** & **P2**) and 3 replicas per partition.</span></span> <span data-ttu-id="8029b-114">Hello siguiente diagrama muestra vista Hola de esta aplicación tal como se termina implementado en un nodo.</span><span class="sxs-lookup"><span data-stu-id="8029b-114">hello following diagram shows hello view of this application as it ends up deployed on a node.</span></span>

<span data-ttu-id="8029b-115"><center>
![Vista del nodo de la aplicación implementada][node-view-one]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-115"><center>
![Node view of deployed application][node-view-one]
</center></span></span>

<span data-ttu-id="8029b-116">Service Fabric activado 'MyServicePackage', que se inicia 'MyCodePackage', que estará hospedando, es decir, las réplicas de las particiones de hello **P1** & **P2**.</span><span class="sxs-lookup"><span data-stu-id="8029b-116">Service Fabric activated 'MyServicePackage' which started 'MyCodePackage' which is hosting replicas from both hello partitions i.e. **P1** & **P2**.</span></span> <span data-ttu-id="8029b-117">Tenga en cuenta que todos los nodos Hola Hola clúster tendrá la misma vista dado que elegimos número de réplicas por partición toonumber igual de nodos de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-117">Note that all hello nodes in hello cluster will have same view since we chose number of replicas per partition equal toonumber of nodes in hello cluster.</span></span> <span data-ttu-id="8029b-118">Se va a crear otro servicio **fabric:/App1/ServiceB** en la aplicación **fabric:/App1** que tiene 1 partición (**P3**) y 3 réplicas por cada partición.</span><span class="sxs-lookup"><span data-stu-id="8029b-118">Let's create another service **fabric:/App1/ServiceB** in application **fabric:/App1** which has 1 partition (say **P3**) and 3 replicas per partition.</span></span> <span data-ttu-id="8029b-119">Diagrama siguiente muestra la nueva vista de hello en el nodo de hello:</span><span class="sxs-lookup"><span data-stu-id="8029b-119">Following diagram shows hello new view on hello node:</span></span>

<span data-ttu-id="8029b-120"><center>
![Vista del nodo de la aplicación implementada][node-view-two]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-120"><center>
![Node view of deployed application][node-view-two]
</center></span></span>

<span data-ttu-id="8029b-121">Como podemos ver Service Fabric colocar la nueva réplica de partición de hello **P3** del servicio **fabric: / App1/ServiceB** en la activación existente de Hola de 'MyServicePackage'.</span><span class="sxs-lookup"><span data-stu-id="8029b-121">As we can see Service Fabric placed hello new replica for partition **P3** of service **fabric:/App1/ServiceB** in hello existing activation of 'MyServicePackage'.</span></span> <span data-ttu-id="8029b-122">Ahora se crea otra *aplicación* **fabric:/App2** de tipo "MyAppType" y, dentro de **fabric:/App2**, se crea el servicio **fabric:/App2/ServiceA**, que tiene 2 particiones (**P4** & **P5**) y 3 por cada partición.</span><span class="sxs-lookup"><span data-stu-id="8029b-122">Now lets create another *application* **fabric:/App2** of type 'MyAppType' and inside **fabric:/App2** create service **fabric:/App2/ServiceA** which has 2 partitions (say **P4** & **P5**) and 3 replicas per partition.</span></span> <span data-ttu-id="8029b-123">Después de diagramas muestran nueva vista del nodo hello:</span><span class="sxs-lookup"><span data-stu-id="8029b-123">Following diagrams shows hello new node view:</span></span>

<span data-ttu-id="8029b-124"><center>
![Vista del nodo de la aplicación implementada][node-view-three]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-124"><center>
![Node view of deployed application][node-view-three]
</center></span></span>

<span data-ttu-id="8029b-125">En esta ocasión, Service Fabric ha activado una nueva copia de "MyServicePackage" que inicia una nueva copia de "MyCodePackage", y las réplicas de las dos particiones del servicio **fabric:/App2/ServiceA** (es decir, **P4** & **P5**) se colocan en esta nueva copia "MyCodePackage".</span><span class="sxs-lookup"><span data-stu-id="8029b-125">This time Service Fabric has activated a new copy of 'MyServicePackage' which starts a new copy of 'MyCodePackage' and replicas from both partitions of service **fabric:/App2/ServiceA** (i.e. **P4** & **P5**) are placed in this new copy 'MyCodePackage'.</span></span>

## <a name="shared-process-model"></a><span data-ttu-id="8029b-126">Modelo de proceso compartido</span><span class="sxs-lookup"><span data-stu-id="8029b-126">Shared process model</span></span>
<span data-ttu-id="8029b-127">Lo que hemos visto anteriormente es el predeterminado de hello proporcionada por Service Fabric de modelo para alojamiento y es conoce tooas **proceso compartido** modelo.</span><span class="sxs-lookup"><span data-stu-id="8029b-127">What we saw above is hello default hosting model provided by Service Fabric and is referred tooas **Shared Process** model.</span></span> <span data-ttu-id="8029b-128">En este modelo, para un determinado *aplicación*, solo una copia de un determinado *ServicePackage* se activa en un *nodo* (que empieza Hola todos los *CodePackages* contenidas en ella) y todos los Hola réplicas de todos los servicios de un determinado *ServiceType* se colocan en hello *CodePackage* que registra *ServiceType*.</span><span class="sxs-lookup"><span data-stu-id="8029b-128">In this model, for a given *application*, only one copy of a given *ServicePackage* is activated on a *Node* (which starts all hello *CodePackages* contained in it) and all hello replicas of all services of a given  *ServiceType* are placed in hello *CodePackage* that registers that *ServiceType*.</span></span> <span data-ttu-id="8029b-129">En otras palabras, Hola a todas las réplicas de todos los servicios de un determinado *ServiceType* compartir Hola mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="8029b-129">In other words, all hello replicas of all services of a given *ServiceType* share hello same process.</span></span>

## <a name="exclusive-process-model"></a><span data-ttu-id="8029b-130">Modelo de proceso exclusivo</span><span class="sxs-lookup"><span data-stu-id="8029b-130">Exclusive process model</span></span>
<span data-ttu-id="8029b-131">Hello otro modelo de hospedaje proporcionado por Service Fabric es **proceso exclusivo** modelo.</span><span class="sxs-lookup"><span data-stu-id="8029b-131">hello other hosting model provided by Service Fabric is **Exclusive Process** model.</span></span> <span data-ttu-id="8029b-132">En este modelo, en un determinado *nodo*, para colocar cada réplica, Service Fabric activa una nueva copia del *ServicePackage* (que empieza Hola todos los *CodePackages* contenidas en ella ) y réplica se coloca en hello *CodePackage* ese Hola registrado *ServiceType* de hello servicio toowhich pertenece la réplica.</span><span class="sxs-lookup"><span data-stu-id="8029b-132">In this model, on a given *Node*, for placing each replica, Service Fabric activates a new copy of *ServicePackage* (which starts all hello *CodePackages* contained in it) and replica is placed in hello *CodePackage* that registered hello *ServiceType* of hello service toowhich replica belongs.</span></span> <span data-ttu-id="8029b-133">En otras palabras, cada réplica reside en su propio proceso dedicado.</span><span class="sxs-lookup"><span data-stu-id="8029b-133">In other words, each replica lives in its own dedicated process.</span></span> 

<span data-ttu-id="8029b-134">Este modelo se admite a partir de la versión 5.6 de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8029b-134">This model is supported starting version 5.6 of Service Fabric.</span></span> <span data-ttu-id="8029b-135">**Proceso exclusivo** modelo se puede seleccionar en el momento de Hola de creación de servicio de hello (mediante [PowerShell][p1], [REST] [ r1]o [FabricClient][c1]) mediante la especificación de **ServicePackageActivationMode** como 'ExclusiveProcess'.</span><span class="sxs-lookup"><span data-stu-id="8029b-135">**Exclusive Process** model can be chosen at hello time of creating hello service (using [PowerShell][p1], [REST][r1] or [FabricClient][c1]) by specifying **ServicePackageActivationMode** as 'ExclusiveProcess'.</span></span>

```powershell
PS C:\>New-ServiceFabricService -ApplicationName "fabric:/App1" -ServiceName "fabric:/App1/ServiceA" -ServiceTypeName "MyServiceType" -Stateless -PartitionSchemeSingleton -InstanceCount -1 -ServicePackageActivationMode "ExclusiveProcess"
```

```csharp
var serviceDescription = new StatelessServiceDescription
{
    ApplicationName = new Uri("fabric:/App1"),
    ServiceName = new Uri("fabric:/App1/ServiceA"),
    ServiceTypeName = "MyServiceType",
    PartitionSchemeDescription = new SingletonPartitionSchemeDescription(),
    InstanceCount = -1,
    ServicePackageActivationMode = ServicePackageActivationMode.ExclusiveProcess
};

var fabricClient = new FabricClient(clusterEndpoints);
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="8029b-136">Si el manifiesto de aplicación contiene un servicio predeterminado, puede elegir el modelo de **proceso exclusivo** si especifica el atributo **ServicePackageActivationMode** como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="8029b-136">If you have a default service in your application manifest, you can choose **Exclusive Process** model by specifying **ServicePackageActivationMode** attribute as shown below:</span></span>

```xml
<DefaultServices>
  <Service Name="MyService" ServicePackageActivationMode="ExclusiveProcess">
    <StatelessService ServiceTypeName="MyServiceType" InstanceCount="1">
      <SingletonPartition/>
    </StatelessService>
  </Service>
</DefaultServices>
```
<span data-ttu-id="8029b-137">Continuando con el ejemplo anterior, permite crear otro servicio **fabric: / App1/ServiceC** en aplicación **fabric: / App1** que tiene 2 particiones (diga **P6**  &  **P7**) y 3 réplicas por partición con **ServicePackageActivationMode** establecer 'too'ExclusiveProcess.</span><span class="sxs-lookup"><span data-stu-id="8029b-137">Continuing with our example above, lets create another service **fabric:/App1/ServiceC** in application **fabric:/App1** which has 2 partitions (say **P6** & **P7**) and 3 replicas per partition with **ServicePackageActivationMode** set too'ExclusiveProcess'.</span></span> <span data-ttu-id="8029b-138">Diagrama siguiente muestra la nueva vista en el nodo de hello:</span><span class="sxs-lookup"><span data-stu-id="8029b-138">Following diagram shows new view on hello node:</span></span>

<span data-ttu-id="8029b-139"><center>
![Vista del nodo de la aplicación implementada][node-view-four]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-139"><center>
![Node view of deployed application][node-view-four]
</center></span></span>

<span data-ttu-id="8029b-140">Como se puede observar, Service Fabric ha activado dos copias de "MyServicePackage" (una para cada réplica de la partición **P6** & **P7**) y ha colocado cada réplica en su copia dedicada de *CodePackage*.</span><span class="sxs-lookup"><span data-stu-id="8029b-140">As you can see, Service Fabric activated two new copies of 'MyServicePackage' (one for each replica from partition **P6** & **P7**) and placed each replica in its dedicated copy of *CodePackage*.</span></span> <span data-ttu-id="8029b-141">Es otro toonote de lo aquí, cuando **proceso exclusivo** se utiliza el modelo, para un determinado *aplicación*, varias copias de un determinado *ServicePackage* pueden estar activas en un  *Nodo*.</span><span class="sxs-lookup"><span data-stu-id="8029b-141">Another thing toonote here is, when **Exclusive Process** model is used, for a given *application*, multiple copies of a given *ServicePackage* can be active on a *Node*.</span></span> <span data-ttu-id="8029b-142">En el ejemplo anterior, se observa que hay tres copias de "MyServicePackage" activas para **fabric:/App1**.</span><span class="sxs-lookup"><span data-stu-id="8029b-142">In above example, we see that three copies of 'MyServicePackage' are active for **fabric:/App1**.</span></span> <span data-ttu-id="8029b-143">Cada una de estas copias activas de "MyServicePackage" tiene un **ServicePackageAtivationId** asociado a ella que identifica dicha copia en la *aplicación* **fabric:/App1**.</span><span class="sxs-lookup"><span data-stu-id="8029b-143">Each of these active copies of 'MyServicePackage' has a **ServicePackageAtivationId** associated with it which identifies that copy within *application* **fabric:/App1**.</span></span>

<span data-ttu-id="8029b-144">Si solo se usa el modelo de **proceso compartido** para una *aplicación*, como **fabric:/App2** en el ejemplo anterior, solo hay una copia activa de *ServicePackage* en un *nodo*, y **ServicePackageAtivationId** en esta activación de *ServicePackage* es una "cadena vacía".</span><span class="sxs-lookup"><span data-stu-id="8029b-144">When only **Shared Process** model is used for an *application*, like **fabric:/App2** in above example, there is only one active copy of *ServicePackage* on a *Node* and **ServicePackageAtivationId** for this activation of *ServicePackage* is 'empty string'.</span></span>

> [!NOTE]
>- <span data-ttu-id="8029b-145">**Proceso compartido** modelo para alojamiento corresponde demasiado**ServicePackageAtivationMode** igual **SharedProcess**.</span><span class="sxs-lookup"><span data-stu-id="8029b-145">**Shared Process** hosting model corresponds too**ServicePackageAtivationMode** equal **SharedProcess**.</span></span> <span data-ttu-id="8029b-146">Se trata de predeterminado Hola modelo para alojamiento y **ServicePackageAtivationMode** no es necesario especificar en tiempo de Hola de creación de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-146">This is hello default hosting model and **ServicePackageAtivationMode** need not be specified at hello time of creating hello service.</span></span>
>
>- <span data-ttu-id="8029b-147">**Proceso exclusivo** modelo para alojamiento corresponde demasiado**ServicePackageAtivationMode** igual **ExclusiveProcess** y necesita toobe especifica explícitamente en tiempo de Hola de creación de hello servicio.</span><span class="sxs-lookup"><span data-stu-id="8029b-147">**Exclusive Process** hosting model corresponds too**ServicePackageAtivationMode** equal **ExclusiveProcess** and need toobe explicitly specified at hello time of creating hello service.</span></span> 
>
>- <span data-ttu-id="8029b-148">Modelo de hospedaje de un servicio puede conocerse consultando hello [descripción del servicio] [ p2] y examinando el valor de **ServicePackageAtivationMode**.</span><span class="sxs-lookup"><span data-stu-id="8029b-148">Hosting model of a service can be known by querying hello [service description][p2] and looking at value of **ServicePackageAtivationMode**.</span></span>
>
>

## <a name="working-with-deployed-service-package"></a><span data-ttu-id="8029b-149">Trabajo con el paquete de servicio implementado</span><span class="sxs-lookup"><span data-stu-id="8029b-149">Working with deployed service package</span></span>
<span data-ttu-id="8029b-150">A una copia activa de *ServicePackage* en un nodo se le denomina [paquete de servicio implementado][p3].</span><span class="sxs-lookup"><span data-stu-id="8029b-150">An active copy of a *ServicePackage* on a node is referred as [deployed service package][p3].</span></span> <span data-ttu-id="8029b-151">Como se mencionó anteriormente, cuando **proceso exclusivo** modelo se utiliza para crear servicios, para un determinado *aplicación*, pueden producirse errores servicio implementado varios paquetes para hello mismo  *ServicePackage*.</span><span class="sxs-lookup"><span data-stu-id="8029b-151">As previously mentioned above, when **Exclusive Process** model is used for creating services, for a given *application*, there could be multiple deployed service packages for hello same *ServicePackage*.</span></span> <span data-ttu-id="8029b-152">Al realizar operaciones como paquete de servicio específico toodeployed [informar sobre el estado de un paquete de servicio implementado] [ p4] o [reiniciar el paquete de código de un paquete de servicio implementado] [ p5] etc., **ServicePackageActivationId** toobe necesidades proporciona tooidentify un paquete específico de servicio implementado.</span><span class="sxs-lookup"><span data-stu-id="8029b-152">While performing operations specific toodeployed service package like [reporting health of a deployed service package][p4] or [restarting code package of a deployed service package][p5] etc., **ServicePackageActivationId** needs toobe provided tooidentify a specific deployed service package.</span></span>

 <span data-ttu-id="8029b-153">**ServicePackageActivationId** de un servicio implementado el paquete puede obtenerse consultando la lista de Hola de [paquetes de servicio implementados] [ p3] en un nodo.</span><span class="sxs-lookup"><span data-stu-id="8029b-153">**ServicePackageActivationId** of a deployed service package can be obtained by querying hello list of [deployed service packages][p3] on a node.</span></span> <span data-ttu-id="8029b-154">Cuando se consultan [implementa tipos de servicio][p6], [implementa réplicas] [ p7] y [implementado paquetes de código] [ p8] en un nodo, resultado de la consulta de hello también contiene hello **ServicePackageActivationId** del paquete de servicio principal implementada.</span><span class="sxs-lookup"><span data-stu-id="8029b-154">When querying [deployed service types][p6], [deployed replicas][p7] and [deployed code packages][p8] on a node, hello query result also contains hello **ServicePackageActivationId** of parent deployed service package.</span></span>

> [!NOTE]
>- <span data-ttu-id="8029b-155">En el modelo de hospedaje de **proceso compartido** de un *nodo* concreto para una *aplicación* determinada, solo se activa una copia de un *ServicePackage*.</span><span class="sxs-lookup"><span data-stu-id="8029b-155">Under **Shared Process** hosting model, on a given *node*, for a given *application*, only one copy of a *ServicePackage* is activated.</span></span> <span data-ttu-id="8029b-156">Tiene **ServicePackageActivationId** igual demasiado*una cadena vacía* y no es necesario especificar mientras las operaciones relacionadas con el paquete de servicio implementado de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8029b-156">It has **ServicePackageActivationId** equal too*empty string* and need not be specified while performing deployed service package related operations.</span></span> 
>
> - <span data-ttu-id="8029b-157">En el modelo de hospedaje de **proceso exclusivo** de un *nodo* concreto para una *aplicación* determinada, pueden activarse una o varias copias de *ServicePackage*.</span><span class="sxs-lookup"><span data-stu-id="8029b-157">Under **Exclusive Process** hosting model, on a given *node*, for a given *application*, one or more copies of a *ServicePackage* can be active.</span></span> <span data-ttu-id="8029b-158">Cada activación tiene un *no vacía* **ServicePackageActivationId** y toobe especifican mientras que las operaciones relacionadas con el paquete de servicio implementado rendimiento es necesario.</span><span class="sxs-lookup"><span data-stu-id="8029b-158">Each activation has a *non-empty* **ServicePackageActivationId** and needs toobe specified while performing deployed service package related operations.</span></span> 
>
> - <span data-ttu-id="8029b-159">Si **ServicePackageActivationId** es ommited el valor predeterminado es too'empty cadena '.</span><span class="sxs-lookup"><span data-stu-id="8029b-159">If **ServicePackageActivationId** is ommited it defaults too'empty string'.</span></span> <span data-ttu-id="8029b-160">Si un servicio implementado del paquete que se activó en **proceso compartido** modelo está presente, a continuación, se realizará la operación en él, en caso contrario, la operación de Hola se producirá un error.</span><span class="sxs-lookup"><span data-stu-id="8029b-160">If a deployed service package that was activated under **Shared Process** model is present, then operation will be performed on it, otherwise hello operation will fail.</span></span>
>
> - <span data-ttu-id="8029b-161">No se recomienda tooquery una vez y caché **ServicePackageActivationId** ya que se genera dinámicamente y se puede cambiar por varias razones.</span><span class="sxs-lookup"><span data-stu-id="8029b-161">It is not recommended tooquery once and cache **ServicePackageActivationId** as it is dynamically generated and can change for various reasons.</span></span> <span data-ttu-id="8029b-162">Antes de realizar una operación que necesita **ServicePackageActivationId**, primero debe consultar la lista de Hola de [paquetes de servicio implementados] [ p3] en un nodo y, después, use  *ServicePackageActivationId** de operación original de consulta resultado tooperform Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-162">Before performing an operation that needs **ServicePackageActivationId**, you should first query hello list of [deployed service packages][p3] on a node and then use *ServicePackageActivationId** from query result tooperform hello original operation.</span></span>
>
>

## <a name="guest-executable-and-container-applications"></a><span data-ttu-id="8029b-163">Aplicaciones de contenedor y de archivo ejecutable invitado</span><span class="sxs-lookup"><span data-stu-id="8029b-163">Guest executable and container applications</span></span>
<span data-ttu-id="8029b-164">Service Fabric trata las aplicaciones de [archivo ejecutable invitado][a2] y de [contenedor][a3] como servicios con estado con almacenamiento; es decir, no hay runtime de Service Fabric en *ServiceHost* (un proceso o contenedor).</span><span class="sxs-lookup"><span data-stu-id="8029b-164">Service Fabric treats [Guest executable][a2] and [container][a3] applications as statless services which are self-contained i.e. there is no Service Fabric runtime in *ServiceHost* (a process or container).</span></span> <span data-ttu-id="8029b-165">Como se trata de servicios con almacenamiento, el número de réplicas por *ServiceHost* no es aplicable para estos servicios.</span><span class="sxs-lookup"><span data-stu-id="8029b-165">Since these services are self-contained, number of replicas per *ServiceHost* is not applicable for these services.</span></span> <span data-ttu-id="8029b-166">Hola configuración más común utilizado con estos servicios es única partición con [InstanceCount] [ c2] igual demasiado-1 (es decir, una copia del código de servicio de hello ejecuta en cada nodo del clúster).</span><span class="sxs-lookup"><span data-stu-id="8029b-166">hello most common configuration used with these services is single-partition with [InstanceCount][c2] equal too-1 (i.e. one copy of hello service code running on each node of cluster).</span></span> 

<span data-ttu-id="8029b-167">Hola predeterminado **ServicePackageActivationMode** para estos servicios es **SharedProcess** en cuyo caso Service Fabric solo activa una copia de *ServicePackage* en un *Nodo* para un determinado *aplicación* lo que significa que solo una copia del código de servicio se ejecutará una *nodo*.</span><span class="sxs-lookup"><span data-stu-id="8029b-167">hello default **ServicePackageActivationMode** for these services is **SharedProcess** in which case Service Fabric only activates one copy of *ServicePackage* on a *Node* for a given *application* which means only one copy of service code will run a *Node*.</span></span> <span data-ttu-id="8029b-168">Si desea que varias copias de los toorun de código de servicio en un *nodo* cuando se crean varios servicios (*Service1* demasiado*ServiceN*) de *ServiceType* (especificado en *ServiceManifest*) o cuando el servicio está con varias particiones, debe especificar **ServicePackageActivationMode** como **ExclusiveProcess**en tiempo de Hola de creación de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-168">If you want multiple copies of your service code toorun on a *Node* when you create multiple services (*Service1* too*ServiceN*) of *ServiceType* (specified in *ServiceManifest*) or when your service is multi-partitioned, you should specify **ServicePackageActivationMode** as **ExclusiveProcess** at hello time of creating hello service.</span></span>

## <a name="changing-hosting-model-of-an-existing-service"></a><span data-ttu-id="8029b-169">Cambio del modelo de hospedaje de un servicio existente</span><span class="sxs-lookup"><span data-stu-id="8029b-169">Changing hosting model of an existing service</span></span>
<span data-ttu-id="8029b-170">Cambiar el modelo de hospedaje de un servicio existente de **proceso compartido** demasiado**proceso exclusivo** y viceversa a través de actualizar o mecanismo de actualización (o especificación de aplicación de servicio predeterminados manifiesto) no se admite actualmente.</span><span class="sxs-lookup"><span data-stu-id="8029b-170">Changing hosting model of an existing service from **Shared Process** too**Exclusive Process** and vice-versa through upgrade or update mechanism (or in default service specification in application manifest) is currently not supported.</span></span> <span data-ttu-id="8029b-171">La compatibilidad con esta característica se incluirá en futuras versiones.</span><span class="sxs-lookup"><span data-stu-id="8029b-171">Support for this feature will come in future versions.</span></span>

## <a name="choosing-between-shared-process-and-exclusive-process-model"></a><span data-ttu-id="8029b-172">Elección del modelo de proceso compartido o exclusivo</span><span class="sxs-lookup"><span data-stu-id="8029b-172">Choosing between shared process and exclusive process model</span></span>
<span data-ttu-id="8029b-173">Estos modelos de hospedaje tienen sus ventajas e inconvenientes tanto el usuario debe tooevaluate cuál se adapta mejor a sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="8029b-173">Both these hosting models have its pros and cons and user needs tooevaluate which one fits their requirements best.</span></span> <span data-ttu-id="8029b-174">**Proceso compartido** modelo permite una mejor utilización de recursos del SO porque se generan menos procesos, Hola varias réplicas en el mismo proceso puede compartir puertos, etcetera. Sin embargo, si una de las réplicas de hello produce un error donde debe toobring hacia abajo de host de servicio de hello, afectará a todas las demás réplicas en el mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="8029b-174">**Shared Process** model enables better utilization of OS resources because fewer processes are spawned, multiple replicas in hello same process can share ports, etc. However, if one of hello replicas hits an error where it needs toobring down hello service host, it will impact all other replicas in same process.</span></span>

 <span data-ttu-id="8029b-175">El modelo de **proceso exclusivo** ofrece un aislamiento mejorado de cada réplica en su propio proceso, por lo que la réplica que presenta un comportamiento incorrecto no afectará a las demás.</span><span class="sxs-lookup"><span data-stu-id="8029b-175">**Exclusive Process** model provides better isolation with every replica in its own process and a misbehaving replica will not impact other replicas.</span></span> <span data-ttu-id="8029b-176">Se trata práctica en casos donde uso compartido de puertos no es compatible con el protocolo de comunicación de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-176">It comes in handy for cases where port sharing is not supported by hello communication protocol.</span></span> <span data-ttu-id="8029b-177">Facilita la regulación de recursos de tooapply de capacidad de hello en nivel de réplica.</span><span class="sxs-lookup"><span data-stu-id="8029b-177">It facilitates hello ability tooapply resource governance at replica level.</span></span> <span data-ttu-id="8029b-178">Hola en otra parte, **proceso exclusivo** consumirá más recursos de sistema operativo tal y como lo genera un proceso para cada réplica en el nodo de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-178">On hello other hand, **Exclusive Process** will consume more OS resources as it spawns one process for each replica on hello node.</span></span>

## <a name="exclusive-process-model-and-application-model-considerations"></a><span data-ttu-id="8029b-179">Consideraciones sobre el modelo de proceso exclusivo y el modelo de aplicación</span><span class="sxs-lookup"><span data-stu-id="8029b-179">Exclusive process model and application model considerations</span></span>
<span data-ttu-id="8029b-180">Hola recomienda forma toomodel la aplicación de Service Fabric es tookeep una *ServiceType* por *ServicePackage* y este modelo funciona bien para la mayoría de las aplicaciones de Hola.</span><span class="sxs-lookup"><span data-stu-id="8029b-180">hello recommended way toomodel your application in Service Fabric is tookeep one *ServiceType* per *ServicePackage* and this model works well for most of hello applications.</span></span> 

<span data-ttu-id="8029b-181">Sin embargo, tooenable especiales escenarios donde un *ServiceType* por *ServicePackage* puede no ser deseable, funcionalmente, Service Fabric permite toohave más de una *ServiceType* por *ServicePackage* (y una *CodePackage* puede registrar más de un *ServiceType*).</span><span class="sxs-lookup"><span data-stu-id="8029b-181">However, tooenable special scenarios where one *ServiceType* per *ServicePackage* may not be desirable, functionally, Service Fabric allows toohave more than one *ServiceType* per *ServicePackage* (and one *CodePackage* can register more than one *ServiceType*).</span></span> <span data-ttu-id="8029b-182">Siguientes son algunos de los escenarios de Hola donde estas configuraciones pueden ser útiles:</span><span class="sxs-lookup"><span data-stu-id="8029b-182">Following are some of hello scenarios where these configurations can be useful:</span></span>

- <span data-ttu-id="8029b-183">Utilización de recursos del sistema operativo toooptimize que desee generando menos procesos y tener una mayor densidad de réplica por proceso.</span><span class="sxs-lookup"><span data-stu-id="8029b-183">You want toooptimize OS resource utilization by spawning fewer processes and having higher replica density per process.</span></span>
- <span data-ttu-id="8029b-184">Réplicas de diferentes ServiceTypes deben tooshare algunos datos comunes que tiene una alta inicialización o el costo de memoria.</span><span class="sxs-lookup"><span data-stu-id="8029b-184">Replicas from different ServiceTypes need tooshare some common data that has a high initialization or memory cost.</span></span>
- <span data-ttu-id="8029b-185">Tiene una oferta de servicio gratuito y desea tooput un límite en la utilización de recursos colocando todas las réplicas del servicio de hello en el mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="8029b-185">You have a free service offering and you want tooput a limit on resource utilization by putting all replicas of hello service in same process.</span></span>

<span data-ttu-id="8029b-186">El modelo de hospedaje de **proceso exclusivo** no es coherente con el modelo de aplicación que tiene varias instancias de *ServiceTypes* por cada *ServicePackage*.</span><span class="sxs-lookup"><span data-stu-id="8029b-186">**Exclusive Process** hosting model is not coherent with application model having multiple *ServiceTypes* per *ServicePackage*.</span></span> <span data-ttu-id="8029b-187">Se trata porque varios *ServiceTypes* por *ServicePackage* tooachieve diseñada recurso mayor uso compartido entre las réplicas y permite una mayor densidad de réplica por proceso.</span><span class="sxs-lookup"><span data-stu-id="8029b-187">This is because multiple *ServiceTypes* per *ServicePackage* is designed tooachieve higher resource sharing among replicas and enables higher replica density per process.</span></span> <span data-ttu-id="8029b-188">Se trata de contraria toowhat **proceso exclusivo** modelo está diseñado tooachieve.</span><span class="sxs-lookup"><span data-stu-id="8029b-188">This is contrary toowhat **Exclusive Process** model is designed tooachieve.</span></span>

<span data-ttu-id="8029b-189">Considere la posibilidad de caso de hello de varios *ServiceTypes* por *ServicePackage* con diferentes *CodePackage* registrar cada *ServiceType*.</span><span class="sxs-lookup"><span data-stu-id="8029b-189">Consider hello case of multiple *ServiceTypes* per *ServicePackage* with different *CodePackage* registering each *ServiceType*.</span></span> <span data-ttu-id="8029b-190">Por ejemplo, existe un *ServicePackage* "MultiTypeServicePackge" que tiene dos *CodePackages*:</span><span class="sxs-lookup"><span data-stu-id="8029b-190">Let's say we have a *ServicePackage* 'MultiTypeServicePackge' which has two *CodePackages*:</span></span>

- <span data-ttu-id="8029b-191">"MyCodePackageA", que registra el *ServiceType* "MyServiceTypeA".</span><span class="sxs-lookup"><span data-stu-id="8029b-191">'MyCodePackageA' which registers *ServiceType* 'MyServiceTypeA'.</span></span>
- <span data-ttu-id="8029b-192">"MyCodePackageB", que registra el *ServiceType* "MyServiceTypeB".</span><span class="sxs-lookup"><span data-stu-id="8029b-192">'MyCodePackageB' which registers *ServiceType* 'MyServiceTypeB'.</span></span>

<span data-ttu-id="8029b-193">Ahora, por ejemplo, se crea una *aplicación* **fabric:/SpecialApp** y, dentro de **fabric:/SpecialApp**, se crean los dos servicios siguientes con el modelo de **proceso exclusivo**:</span><span class="sxs-lookup"><span data-stu-id="8029b-193">Now, lets say, we create an *application* **fabric:/SpecialApp** and inside **fabric:/SpecialApp** we create following two services with **Exclusive Process** model:</span></span>

- <span data-ttu-id="8029b-194">El servicio **fabric:/SpecialApp/ServiceA** de tipo "MyServiceTypeA" con dos particiones (**P1** y **P2**) y 3 réplicas por partición.</span><span class="sxs-lookup"><span data-stu-id="8029b-194">Service **fabric:/SpecialApp/ServiceA** of type 'MyServiceTypeA' with two partitions (say **P1** and **P2**) and 3 replicas per partition.</span></span>
- <span data-ttu-id="8029b-195">El servicio **fabric:/SpecialApp/ServiceB** de tipo "MyServiceTypeB" con dos particiones (**P3** y **P4**) y 3 réplicas por partición.</span><span class="sxs-lookup"><span data-stu-id="8029b-195">Service **fabric:/SpecialApp/ServiceB** of type 'MyServiceTypeB' with two partitions (say **P3** and **P4**) and 3 replicas per partition.</span></span>

<span data-ttu-id="8029b-196">En un nodo determinado, ambos servicios Hola tendrá dos réplicas.</span><span class="sxs-lookup"><span data-stu-id="8029b-196">On a given node, both hello services will have two replicas each.</span></span> <span data-ttu-id="8029b-197">Ya que hemos usado **proceso exclusivo** servicios del modelo toocreate hello, Service Fabric activará una nueva copia de 'MyServicePackge' para cada réplica.</span><span class="sxs-lookup"><span data-stu-id="8029b-197">Since we used **Exclusive Process** model toocreate hello services, Service Fabric will activate a new copy of 'MyServicePackge' for each replica.</span></span> <span data-ttu-id="8029b-198">Cada activación de "MultiTypeServicePackge" iniciará una copia de "MyCodePackageA" y "MyCodePackageB".</span><span class="sxs-lookup"><span data-stu-id="8029b-198">Each activation of 'MultiTypeServicePackge' will start a copy of 'MyCodePackageA' and 'MyCodePackageB'.</span></span> <span data-ttu-id="8029b-199">Sin embargo, solo uno de 'MyCodePackageA' o 'MyCodePackageB' hospedará la réplica de hello para el que se activó 'MultiTypeServicePackge'.</span><span class="sxs-lookup"><span data-stu-id="8029b-199">However, only one of 'MyCodePackageA' or 'MyCodePackageB' will host hello replica for which 'MultiTypeServicePackge' was activated.</span></span> <span data-ttu-id="8029b-200">Diagrama siguiente muestra la vista de nodo de hello:</span><span class="sxs-lookup"><span data-stu-id="8029b-200">Following diagram shows hello node view:</span></span>

<span data-ttu-id="8029b-201"><center>
![Vista del nodo de la aplicación implementada][node-view-five]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-201"><center>
![Node view of deployed application][node-view-five]
</center></span></span>

 <span data-ttu-id="8029b-202">Como se puede observar en la activación de Hola de 'MultiTypeServicePackge' para la réplica de partición **P1** del servicio **fabric: / SpecialApp/Services como**, 'MyCodePackageA' hospeda la réplica de Hola y ' MyCodePackageB' está solo en funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="8029b-202">As we can see, in hello activation of 'MultiTypeServicePackge' for replica of partition **P1** of service **fabric:/SpecialApp/ServiceA**, 'MyCodePackageA' is hosting hello replica and 'MyCodePackageB' is just up and running.</span></span> <span data-ttu-id="8029b-203">De forma similar, en la activación de 'MultiTypeServicePackge' para la réplica de partición **P3** del servicio **fabric: / SpecialApp/ServiceB**, 'MyCodePackageB' hospeda la réplica de Hola y es 'MyCodePackageA' simplemente activa y en funcionamiento y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="8029b-203">Similarly, in activation of 'MultiTypeServicePackge' for replica of partition **P3** of service **fabric:/SpecialApp/ServiceB**, 'MyCodePackageB' is hosting hello replica and 'MyCodePackageA' is just up and running and so on.</span></span> <span data-ttu-id="8029b-204">Por lo tanto, más Hola número de *CodePackages* (registrar diferentes *ServiceTypes*) por *ServicePackage*, mayor será el uso de recursos redundantes.</span><span class="sxs-lookup"><span data-stu-id="8029b-204">Hence, more hello number of *CodePackages* (registering different *ServiceTypes*) per *ServicePackage*, higher will be redundant resource usage.</span></span> 
 
 <span data-ttu-id="8029b-205">Hola en otra parte Si creamos servicios **fabric: / SpecialApp/Services como** y **fabric: / SpecialApp/ServiceB** con **proceso compartido** modelar, will Service Fabric activar solo una copia de 'MultiTypeServicePackge' para *aplicación* **fabric: / SpecialApp** (tal y como se ha explicado anteriormente).</span><span class="sxs-lookup"><span data-stu-id="8029b-205">On hello other hand if we create services **fabric:/SpecialApp/ServiceA** and **fabric:/SpecialApp/ServiceB** with **Shared Process** model, Service Fabric will activate only one copy of 'MultiTypeServicePackge' for *application* **fabric:/SpecialApp** (as we saw previously).</span></span> <span data-ttu-id="8029b-206">'MyCodePackageA' hospedará todas las réplicas de servicio **fabric: / SpecialApp/Services como** (o de cualquier servicio de tipo 'MyServiceTypeA' toobe más preciso) y 'MyCodePackageB' hospedará todas las réplicas de servicio **fabric: / SpecialApp/ServiceB** (o de cualquier servicio de tipo 'MyServiceTypeB' toobe más preciso).</span><span class="sxs-lookup"><span data-stu-id="8029b-206">'MyCodePackageA' will host all replicas for service **fabric:/SpecialApp/ServiceA** (or of any service of type 'MyServiceTypeA' toobe more precise) and 'MyCodePackageB' will host all replicas for service **fabric:/SpecialApp/ServiceB** (or of any service of type 'MyServiceTypeB' toobe more precise).</span></span> <span data-ttu-id="8029b-207">Diagrama siguiente muestra la vista de nodo de hello en esta configuración:</span><span class="sxs-lookup"><span data-stu-id="8029b-207">Following diagram shows hello node view in this setting:</span></span> 

<span data-ttu-id="8029b-208"><center>
![Vista del nodo de la aplicación implementada][node-view-six]
</center></span><span class="sxs-lookup"><span data-stu-id="8029b-208"><center>
![Node view of deployed application][node-view-six]
</center></span></span>

<span data-ttu-id="8029b-209">Hola ejemplo anterior, puede que piense si 'MyCodePackageA' registra 'MyServiceTypeA' y 'MyServiceTypeB' y no hay ningún 'MyCodePackageB', habrá no redundante *CodePackage* ejecutando.</span><span class="sxs-lookup"><span data-stu-id="8029b-209">In hello above example, you might think if 'MyCodePackageA' registers both 'MyServiceTypeA' and 'MyServiceTypeB' and there is no 'MyCodePackageB', then there will be no redundant *CodePackage* running.</span></span> <span data-ttu-id="8029b-210">Este planteamiento es correcto, pero, como se ha mencionado anteriormente, este modelo de aplicación no es compatible con el modelo de hospedaje de **proceso exclusivo**.</span><span class="sxs-lookup"><span data-stu-id="8029b-210">This is correct, however, as mentioned previously, this application model does not align with **Exclusive Process** hosting model.</span></span> <span data-ttu-id="8029b-211">Si el objetivo es tooput cada réplica en su propio dedicado de proceso y volver a registrar ambos *ServiceTypes* desde el mismo *CodePackage* no es necesario y colocar cada *ServiceType* en su propio *ServicePacakge* es una elección más natural.</span><span class="sxs-lookup"><span data-stu-id="8029b-211">If goal is tooput each replica in its own dedicated process then registering both *ServiceTypes* from same *CodePackage* is not needed and putting each *ServiceType* in its own *ServicePacakge* is a more natural choice.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8029b-212">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8029b-212">Next steps</span></span>
<span data-ttu-id="8029b-213">[Empaquetar una aplicación] [ a4] y obtener toodeploy listo.</span><span class="sxs-lookup"><span data-stu-id="8029b-213">[Package an application][a4] and get it ready toodeploy.</span></span>

<span data-ttu-id="8029b-214">[Implementar y quitar aplicaciones] [ a5] describe cómo toouse instancias de la aplicación de toomanage de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8029b-214">[Deploy and remove applications][a5] describes how toouse PowerShell toomanage application instances.</span></span>

<!--Image references-->
[node-view-one]: ./media/service-fabric-hosting-model/node-view-one.png
[node-view-two]: ./media/service-fabric-hosting-model/node-view-two.png
[node-view-three]: ./media/service-fabric-hosting-model/node-view-three.png
[node-view-four]: ./media/service-fabric-hosting-model/node-view-four.png
[node-view-five]: ./media/service-fabric-hosting-model/node-view-five.png
[node-view-six]: ./media/service-fabric-hosting-model/node-view-six.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[a1]: service-fabric-application-model.md
[a2]: service-fabric-deploy-existing-app.md
[a3]: service-fabric-containers-overview.md
[a4]: service-fabric-package-apps.md
[a5]: service-fabric-deploy-remove-applications.md

[r1]: https://docs.microsoft.com/rest/api/servicefabric/sfclient-api-createservice

[c1]: https://docs.microsoft.com/dotnet/api/system.fabric.fabricclient.servicemanagementclient.createserviceasync
[c2]: https://docs.microsoft.com/dotnet/api/system.fabric.description.statelessservicedescription.instancecount

[p1]: https://docs.microsoft.com/powershell/servicefabric/vlatest/new-servicefabricservice
[p2]: https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricservicedescription
[p3]: https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricdeployedservicePackage
[p4]: https://docs.microsoft.com/powershell/servicefabric/vlatest/send-servicefabricdeployedservicepackagehealthreport
[p5]: https://docs.microsoft.com/powershell/servicefabric/vlatest/restart-servicefabricdeployedcodepackage
[p6]: https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricdeployedservicetype
[p7]: https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricdeployedreplica
[p8]: https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricdeployedcodepackage
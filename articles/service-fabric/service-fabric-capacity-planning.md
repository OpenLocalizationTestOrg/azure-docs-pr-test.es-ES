---
title: "aaaCapacity planificación de aplicaciones de Service Fabric | Documentos de Microsoft"
description: "Describe cómo tooidentify Hola número de nodos de proceso necesarios para una aplicación de Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="84d3f-103">Planeación de la capacidad para las aplicaciones de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="84d3f-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="84d3f-104">Este documento enseña cómo tooestimate Hola cantidad de recursos (CPU, RAM, almacenamiento en disco), debe toorun de las aplicaciones de Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="84d3f-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="84d3f-105">Es habitual que los toochange de requisitos de recursos con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="84d3f-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="84d3f-106">Normalmente necesitará menos recursos mientras desarrolla o prueba su servicio y luego una cantidad mayor cuando pase a producción y su aplicación se vuelva cada vez más popular.</span><span class="sxs-lookup"><span data-stu-id="84d3f-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="84d3f-107">Al diseñar la aplicación, barajar requisitos a largo plazo de Hola y tomar decisiones que permiten la demanda de los clientes alta de servicio tooscale toomeet.</span><span class="sxs-lookup"><span data-stu-id="84d3f-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="84d3f-108">Cuando se crea un clúster de Service Fabric, decide qué tipos de máquinas virtuales (VM) forman el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="84d3f-109">Cada máquina virtual incluye una cantidad limitada de recursos en forma de Hola de CPU (núcleos y velocidad), el ancho de banda de red, RAM y almacenamiento en disco.</span><span class="sxs-lookup"><span data-stu-id="84d3f-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="84d3f-110">A medida que aumenta su servicio con el tiempo, puede actualizar tooVMs que ofrecen la mayor cantidad de recursos o agregar más máquinas virtuales tooyour clúster.</span><span class="sxs-lookup"><span data-stu-id="84d3f-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="84d3f-111">Hola toodo este último debe diseñar su servicio inicialmente por lo que puede beneficiarse de nuevas máquinas virtuales que se agregan dinámicamente toohello clúster.</span><span class="sxs-lookup"><span data-stu-id="84d3f-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="84d3f-112">Algunos servicios administran pocos datos toono en hello las propias máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="84d3f-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="84d3f-113">Por lo tanto, capacidad para estos servicios deben centrarse principalmente en el rendimiento, lo que significa seleccionar Hola adecuados CPU (núcleos y velocidad) de máquinas virtuales de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="84d3f-114">Además, debe tener en cuenta el ancho de banda de red y, incluso con qué frecuencia se producen transferencias de red y la cantidad de datos que se transfieren.</span><span class="sxs-lookup"><span data-stu-id="84d3f-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="84d3f-115">Si el servicio necesita tooperform así como también aumenta el uso del servicio, puede agregar más máquinas virtuales toohello clúster y equilibrar las solicitudes de red de Hola la carga entre todas las máquinas virtuales de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="84d3f-116">Para los servicios que administran grandes cantidades de datos en las máquinas virtuales de hello, planificación de capacidad debe centrarse principalmente en tamaño.</span><span class="sxs-lookup"><span data-stu-id="84d3f-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="84d3f-117">Por lo tanto, debe considerar detenidamente capacidad de hello de la máquina virtual de hello RAM y almacenamiento en disco.</span><span class="sxs-lookup"><span data-stu-id="84d3f-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="84d3f-118">sistema de administración de memoria virtual Hola de Windows hace espacio en disco RAM tooapplication código el aspecto.</span><span class="sxs-lookup"><span data-stu-id="84d3f-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="84d3f-119">Además, el tiempo de ejecución de hello Service Fabric proporciona la paginación inteligente conservando los datos activos sólo en memoria y toodisk de los datos inactivos de hello móvil.</span><span class="sxs-lookup"><span data-stu-id="84d3f-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="84d3f-120">Las aplicaciones, por tanto, pueden usar más memoria que está físicamente disponible en hello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="84d3f-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="84d3f-121">Basta con tener más memoria RAM mejora el rendimiento, ya que Hola VM puede mantener más almacenamiento en disco en la memoria RAM.</span><span class="sxs-lookup"><span data-stu-id="84d3f-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="84d3f-122">Hola VM que seleccione debe tiene un disco toostore lo suficientemente grande como Hola de datos que desee en hello VM.</span><span class="sxs-lookup"><span data-stu-id="84d3f-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="84d3f-123">De forma similar, Hola VM debe tener suficiente tooprovide de RAM a Hola de rendimiento que desee.</span><span class="sxs-lookup"><span data-stu-id="84d3f-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="84d3f-124">Si los datos de su servicio aumentan con el tiempo, puede agregar más máquinas virtuales toohello clúster y crear particiones Hola datos a través de todas las máquinas virtuales de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="84d3f-125">Determinación del número de nodos que necesita</span><span class="sxs-lookup"><span data-stu-id="84d3f-125">Determine how many nodes you need</span></span>
<span data-ttu-id="84d3f-126">El servicio de creación de particiones permite tooscale los datos de su servicio.</span><span class="sxs-lookup"><span data-stu-id="84d3f-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="84d3f-127">Para más información sobre las particiones, consulte [Creación de particiones de Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="84d3f-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="84d3f-128">Cada partición debe ajustarse a una sola máquina virtual, pero se pueden colocar varias particiones (pequeñas) en una sola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="84d3f-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="84d3f-129">Por lo tanto, tener más particiones pequeñas le proporciona mayor flexibilidad que tener pocas particiones más grandes.</span><span class="sxs-lookup"><span data-stu-id="84d3f-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="84d3f-130">ventajas y desventajas de Hello son que tener una gran cantidad de particiones aumenta la carga de trabajo de Service Fabric y no se puede realizar operaciones de transacción entre las particiones.</span><span class="sxs-lookup"><span data-stu-id="84d3f-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="84d3f-131">También es más tráfico de red posibles si el código de servicio con frecuencia necesita tooaccess elementos de datos que residen en diferentes particiones.</span><span class="sxs-lookup"><span data-stu-id="84d3f-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="84d3f-132">Al diseñar su servicio, debe considerar detenidamente estas tooarrive ventajas y desventajas en una estrategia de partición eficaz.</span><span class="sxs-lookup"><span data-stu-id="84d3f-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="84d3f-133">Supongamos que la aplicación tiene un único servicio con estado que tiene un tamaño de almacén que esperar toogrow tooDB_Size GB en un año.</span><span class="sxs-lookup"><span data-stu-id="84d3f-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="84d3f-134">Está dispuesto tooadd más aplicaciones (y particiones) que experimenta un crecimiento más allá de ese año.</span><span class="sxs-lookup"><span data-stu-id="84d3f-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="84d3f-135">Hola factor de replicación (RF), que determina el número de Hola de réplicas para el impacto en el servicio Hola DB_Size total.</span><span class="sxs-lookup"><span data-stu-id="84d3f-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="84d3f-136">Hola que db_size total en todas las réplicas es hello multiplicado por DB_Size de Factor de replicación.</span><span class="sxs-lookup"><span data-stu-id="84d3f-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="84d3f-137">Node_Size representa el espacio de disco de Hola/memoria RAM por nodo necesite toouse para el servicio.</span><span class="sxs-lookup"><span data-stu-id="84d3f-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="84d3f-138">Para obtener el mejor rendimiento, hello DB_Size debe caber en la memoria en clúster de Hola y un Node_Size que hay alrededor de hello RAM de hello que debe elegirse la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="84d3f-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="84d3f-139">Asignando un Node_Size que es mayor que la capacidad de RAM hello, depende de la paginación de hello proporcionada por el tiempo de ejecución de hello Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="84d3f-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="84d3f-140">Por lo tanto, el rendimiento puede no ser óptimo si los datos completos se consideran que toobe activa (desde Hola, a continuación, los datos se paginan los in/out).</span><span class="sxs-lookup"><span data-stu-id="84d3f-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="84d3f-141">Sin embargo, para muchos servicios donde está activa solo una parte de datos de hello, es más rentable.</span><span class="sxs-lookup"><span data-stu-id="84d3f-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="84d3f-142">número de Hola de nodos necesarios para obtener el máximo rendimiento se puede calcular como sigue:</span><span class="sxs-lookup"><span data-stu-id="84d3f-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="84d3f-143">Consideración sobre el crecimiento</span><span class="sxs-lookup"><span data-stu-id="84d3f-143">Account for growth</span></span>
<span data-ttu-id="84d3f-144">Puede que desee toocompute Hola número de nodos según hello DB_Size que esperan su toogrow de servicio, además toohello DB_Size con el que empezó.</span><span class="sxs-lookup"><span data-stu-id="84d3f-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="84d3f-145">A continuación, aumentar número Hola de nodos a medida que el servicio aumenta para que se sobreaprovisionar número Hola de nodos no.</span><span class="sxs-lookup"><span data-stu-id="84d3f-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="84d3f-146">Pero el número de Hola de particiones debe basarse en el número de Hola de nodos que son necesarios cuando se está ejecutando el servicio en crecimiento máximo.</span><span class="sxs-lookup"><span data-stu-id="84d3f-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="84d3f-147">Es buena toohave algunas máquinas adicionales disponibles en cualquier momento para que pueda controlar los picos inesperados o no (por ejemplo, si algunas máquinas virtuales dejan de funcionar).</span><span class="sxs-lookup"><span data-stu-id="84d3f-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="84d3f-148">Aunque Hola capacidad adicional debe determinarse mediante el uso de los picos esperados, un punto de partida es tooreserve algunas máquinas virtuales adicionales (5-10 por ciento adicional).</span><span class="sxs-lookup"><span data-stu-id="84d3f-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="84d3f-149">Hola anterior se da por supuesto un único servicio con estado.</span><span class="sxs-lookup"><span data-stu-id="84d3f-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="84d3f-150">Si tiene más de un servicio con estado, tendrá tooadd hello DB_Size asociada Hola otros servicios en la ecuación de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="84d3f-151">Como alternativa, puede calcular el número de Hola de nodos por separado para cada servicio con estado.</span><span class="sxs-lookup"><span data-stu-id="84d3f-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="84d3f-152">El servicio puede tener réplicas o particiones que no están equilibradas.</span><span class="sxs-lookup"><span data-stu-id="84d3f-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="84d3f-153">Tenga en cuenta que hay particiones que pueden tener más datos que otras.</span><span class="sxs-lookup"><span data-stu-id="84d3f-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="84d3f-154">Para más información sobre la creación de particiones, consulte el [artículo sobre la creación de particiones en los procedimientos recomendados](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="84d3f-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="84d3f-155">Sin embargo, hello ecuación anterior es partición y réplica independiente, porque Service Fabric garantiza que las réplicas de Hola se reparten entre los nodos de Hola de forma optimizada.</span><span class="sxs-lookup"><span data-stu-id="84d3f-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="84d3f-156">Uso de una hoja de cálculo para calcular costos</span><span class="sxs-lookup"><span data-stu-id="84d3f-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="84d3f-157">Ahora vamos a poner algunos números reales en la fórmula de saludo.</span><span class="sxs-lookup"><span data-stu-id="84d3f-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="84d3f-158">Un [hoja de cálculo de ejemplo](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) muestra cómo tooplan Hola capacidad para una aplicación que contenga tres tipos de objetos de datos.</span><span class="sxs-lookup"><span data-stu-id="84d3f-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="84d3f-159">Para cada objeto, se aproximación su tamaño y número de objetos, esperamos toohave.</span><span class="sxs-lookup"><span data-stu-id="84d3f-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="84d3f-160">También hemos seleccionado el número de réplicas que queremos de cada tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="84d3f-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="84d3f-161">hoja de cálculo de Hello calcula la cantidad total de Hola de toobe de memoria que se almacena en el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="84d3f-162">A continuación, escribimos un tamaño de máquina virtual y un costo mensual.</span><span class="sxs-lookup"><span data-stu-id="84d3f-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="84d3f-163">En función de hello tamaño de máquina virtual, hoja de cálculo de hello indica que Hola número mínimo de particiones que debe usar toosplit su toophysically datos caben en nodos de Hola.</span><span class="sxs-lookup"><span data-stu-id="84d3f-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="84d3f-164">Desea un mayor número de tooaccommodate particiones que necesidades del tráfico de red y de cálculo de específicos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="84d3f-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="84d3f-165">hoja de cálculo de Hello muestra hello número de particiones que administran objetos de perfil de usuario de hello también ha aumentado de una toosix.</span><span class="sxs-lookup"><span data-stu-id="84d3f-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="84d3f-166">Ahora, en función de toda esta información, hoja de cálculo de hello muestra que físicamente se pudieron obtener todos los datos de hello con hello deseado particiones y réplicas en un clúster de nodo de 26.</span><span class="sxs-lookup"><span data-stu-id="84d3f-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="84d3f-167">Sin embargo, este clúster podría ser densamente empaquetada, por lo que puede algunas actualizaciones y los errores de nodo tooaccommodate nodos adicionales.</span><span class="sxs-lookup"><span data-stu-id="84d3f-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="84d3f-168">hoja de cálculo de Hello también muestra que tiene más de 57 nodos no proporciona ningún valor adicional ya que tendría nodos vacíos.</span><span class="sxs-lookup"><span data-stu-id="84d3f-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="84d3f-169">De nuevo, puede que desee toogo anteriormente 57 nodos todas formas las actualizaciones y los errores de nodo tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="84d3f-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="84d3f-170">Puede retocar toomatch de hoja de cálculo de hello las necesidades específicas de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="84d3f-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Hoja de cálculo para calcular costos][Image1]

## <a name="next-steps"></a><span data-ttu-id="84d3f-172">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="84d3f-172">Next steps</span></span>
<span data-ttu-id="84d3f-173">Extraer del repositorio [servicios de creación de particiones Service Fabric] [ 10] toolearn más información sobre el servicio de creación de particiones.</span><span class="sxs-lookup"><span data-stu-id="84d3f-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md

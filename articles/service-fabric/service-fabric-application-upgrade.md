---
title: "actualización de la aplicación Fabric aaaService | Documentos de Microsoft"
description: "Este artículo proporciona una introducción tooupgrading una aplicación de Service Fabric, incluidos los modos de actualización elige la opción y realizar comprobaciones de mantenimiento."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="e535f-103">Actualización de la aplicación de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e535f-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="e535f-104">Una aplicación de Azure Service Fabric es una colección de servicios.</span><span class="sxs-lookup"><span data-stu-id="e535f-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="e535f-105">Durante una actualización, Service Fabric compara Hola nueva [manifiesto de aplicación](service-fabric-application-model.md#describe-an-application) con la versión anterior de Hola y determina qué servicios en la aplicación hello requieren actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="e535f-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="e535f-106">Service Fabric compara versión Hola números en el servicio de hello manifiestos con números de versión de hello en la versión anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="e535f-107">Si un servicio no ha cambiado, no se actualiza.</span><span class="sxs-lookup"><span data-stu-id="e535f-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="e535f-108">Información general de las actualizaciones graduales</span><span class="sxs-lookup"><span data-stu-id="e535f-108">Rolling upgrades overview</span></span>
<span data-ttu-id="e535f-109">En una actualización gradual de la aplicación, se realiza la actualización de Hola en fases.</span><span class="sxs-lookup"><span data-stu-id="e535f-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="e535f-110">En cada fase, actualización de hello es tooa aplicado subconjunto de nodos de clúster de hello, llamada a un dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="e535f-111">Como resultado, la aplicación hello sigue estando disponible a lo largo de la actualización de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="e535f-112">Durante la actualización de hello, clúster de hello puede contener una combinación de versiones de hello antiguos y nuevos.</span><span class="sxs-lookup"><span data-stu-id="e535f-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="e535f-113">Por esta razón, deben ser versiones Hola dos hacia delante y hacia atrás compatible.</span><span class="sxs-lookup"><span data-stu-id="e535f-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="e535f-114">Si no son compatibles, Administrador de la aplicación hello es responsable de la disponibilidad de un toomaintain de actualización de varias fases de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="e535f-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="e535f-115">En una actualización de varias fases, primer paso de hello está actualizando tooan versión intermedia de aplicación Hola que es compatible con la versión anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="e535f-116">Hola segundo paso es versión final de tooupgrade Hola que interrumpe la compatibilidad con versiones anteriores a la actualización de hello, pero es compatible con la versión intermedia Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="e535f-117">Dominios de actualización se especifican en el manifiesto de clúster de hello al configurar el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="e535f-118">Los dominios de actualización no reciben actualizaciones en un orden concreto.</span><span class="sxs-lookup"><span data-stu-id="e535f-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="e535f-119">Un dominio de actualización es una unidad lógica de implementación para una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e535f-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="e535f-120">Dominios de actualización permiten Hola servicios tooremain a alta disponibilidad durante una actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="e535f-121">Las actualizaciones sucesivas no son posibles si la actualización de Hola se aplica tooall nodos en clúster de hello, que es el caso de hello cuando aplicación hello tiene solo un dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="e535f-122">No se recomienda este enfoque, ya que el servicio Hola deja de funcionar y no está disponible en tiempo de presentación de la actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="e535f-123">Además, Azure no ofrece ninguna garantía cuando se configura un clúster con un solo dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="e535f-124">Comprobaciones de estado durante las actualizaciones</span><span class="sxs-lookup"><span data-stu-id="e535f-124">Health checks during upgrades</span></span>
<span data-ttu-id="e535f-125">Para realizar una actualización, las directivas de mantenimiento tienen toobe establecido (o se pueden utilizar los valores predeterminados).</span><span class="sxs-lookup"><span data-stu-id="e535f-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="e535f-126">Una actualización se denomina correcta cuando haya actualizado todos los dominios de actualización dentro de hello especifica los tiempos de espera y, cuando actualización todos los dominios se consideran correcto.</span><span class="sxs-lookup"><span data-stu-id="e535f-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="e535f-127">Un dominio de actualización correcto significa que ese dominio de actualización de hello pasado todas las comprobaciones de mantenimiento de hello especificadas en la directiva de mantenimiento de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="e535f-128">Por ejemplo, una directiva de mantenimiento puede exigir que todos los servicios dentro de una instancia de la aplicación tienen que ser *correctos*, tal como Service Fabric define el estado correcto.</span><span class="sxs-lookup"><span data-stu-id="e535f-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="e535f-129">Las directivas de mantenimiento y comprobaciones de estado durante la actualización de Service Fabric son independientes de los servicios y aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e535f-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="e535f-130">Es decir, no se realiza ninguna prueba específica del servicio.</span><span class="sxs-lookup"><span data-stu-id="e535f-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="e535f-131">Por ejemplo, el servicio puede tener un requisito de rendimiento, pero Service Fabric no tiene el rendimiento de la información toocheck Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="e535f-132">Consulte toohello [artículos de mantenimiento](service-fabric-health-introduction.md) para las comprobaciones de Hola que se llevan a cabo.</span><span class="sxs-lookup"><span data-stu-id="e535f-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="e535f-133">comprobaciones de Hola que se producen durante las pruebas de una actualización se incluyen para si el paquete de aplicación Hola se copió correctamente, si ha iniciado la instancia de hello y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="e535f-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="e535f-134">estado de la aplicación Hello es una agregación de las entidades secundarias de Hola de aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="e535f-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="e535f-135">En resumen, Service Fabric evalúa mantenimiento Hola de aplicación Hola a través de mantenimiento de Hola que se notifica en la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="e535f-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="e535f-136">También evalúa Hola estado de todos los servicios de hello para la aplicación hello así.</span><span class="sxs-lookup"><span data-stu-id="e535f-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="e535f-137">Service Fabric más evalúa mantenimiento Hola Hola de servicios de aplicaciones al agregar el estado de Hola de sus elementos secundarios, como réplicas del servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="e535f-138">Una vez que se cumple la directiva de mantenimiento de aplicación Hola, actualización de hello puede continuar.</span><span class="sxs-lookup"><span data-stu-id="e535f-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="e535f-139">Si se infringe la directiva de mantenimiento de hello, se produce un error en la actualización de la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="e535f-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="e535f-140">Modos de actualización</span><span class="sxs-lookup"><span data-stu-id="e535f-140">Upgrade modes</span></span>
<span data-ttu-id="e535f-141">Hola modo que se recomienda para la actualización de la aplicación es Hola supervisado, que es el modo de Hola de uso frecuente.</span><span class="sxs-lookup"><span data-stu-id="e535f-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="e535f-142">Modo supervisado realiza una actualización de hello en el dominio de una actualización, y si comprueba el estado de todos los paso (por hello directiva especificada), se mueve en toohello siguiente dominio de actualización automáticamente.</span><span class="sxs-lookup"><span data-stu-id="e535f-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="e535f-143">Si hay producirá un error en las comprobaciones de mantenimiento o se alcanzan los tiempos de espera, Hola actualización está bien revertido para dominio de actualización de Hola o modo de hello toounmonitored modificados manual.</span><span class="sxs-lookup"><span data-stu-id="e535f-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="e535f-144">Puede configurar hello toochoose actualización uno de los dos modos para errores de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="e535f-145">Modo manual no supervisado necesita intervención manual después de cada actualización en un dominio de actualización, tookick desactivar actualización hello en hello siguiente dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="e535f-146">No se realiza ninguna comprobación de mantenimiento de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e535f-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="e535f-147">Administrador de Hello realiza comprobaciones de estado o de hello antes de iniciar la actualización de hello en hello siguiente dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="e535f-148">Actualización de servicios predeterminados</span><span class="sxs-lookup"><span data-stu-id="e535f-148">Upgrade default services</span></span>
<span data-ttu-id="e535f-149">Servicios predeterminados dentro de la aplicación de Service Fabric se pueden actualizar durante el proceso de actualización de Hola de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e535f-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="e535f-150">Servicios predeterminados se definen en hello [manifiesto de aplicación](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="e535f-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="e535f-151">Hola reglas estándar de la actualización de servicios predeterminados son:</span><span class="sxs-lookup"><span data-stu-id="e535f-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="e535f-152">Servicios en hello nueva predeterminados [manifiesto de aplicación](service-fabric-application-model.md#describe-an-application) que no existen en el clúster de Hola se crean.</span><span class="sxs-lookup"><span data-stu-id="e535f-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="e535f-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) necesita toobe establecer tootrue tooenable Hola siguiendo las reglas.</span><span class="sxs-lookup"><span data-stu-id="e535f-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="e535f-154">Esta característica se admite desde la versión 5.5.</span><span class="sxs-lookup"><span data-stu-id="e535f-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="e535f-155">Se actualizan los servicios predeterminados existentes del [manifiesto de aplicación](service-fabric-application-model.md#describe-an-application) anterior y los de la nueva versión.</span><span class="sxs-lookup"><span data-stu-id="e535f-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="e535f-156">Descripciones de los servicios en la nueva versión de hello reemplazaría las que ya está en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="e535f-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="e535f-157">La actualización de aplicaciones se revertiría automáticamente tras el error de actualización de servicios.</span><span class="sxs-lookup"><span data-stu-id="e535f-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="e535f-158">Servicios en hello anterior predeterminados [manifiesto de aplicación](service-fabric-application-model.md#describe-an-application) pero no en la nueva versión de Hola se elimina.</span><span class="sxs-lookup"><span data-stu-id="e535f-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="e535f-159">**Tenga en cuenta que no se pueden revertir esta eliminación de servicios predeterminados.**</span><span class="sxs-lookup"><span data-stu-id="e535f-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="e535f-160">En el caso de una aplicación se revierte la actualización, servicios predeterminados son toohello revertida estado antes de inicia la actualización.</span><span class="sxs-lookup"><span data-stu-id="e535f-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="e535f-161">No obstante, nunca se pueden crear servicios eliminados.</span><span class="sxs-lookup"><span data-stu-id="e535f-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="e535f-162">Diagrama de flujo de actualización de la aplicación</span><span class="sxs-lookup"><span data-stu-id="e535f-162">Application upgrade flowchart</span></span>
<span data-ttu-id="e535f-163">diagrama de flujo de Hello siguiendo este párrafo puede ayudarle a entender el proceso de actualización de Hola de una aplicación de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e535f-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="e535f-164">En concreto, se describe el flujo de Hola Hola cómo los tiempos de espera, incluidos los *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, y *UpgradeHealthCheckInterval*, ayudar a controlar cuando se considera actualización hello en el dominio de una actualización correcta o un error.</span><span class="sxs-lookup"><span data-stu-id="e535f-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![proceso de actualización de Hola para una aplicación de servicio de Fabric][image]

## <a name="next-steps"></a><span data-ttu-id="e535f-166">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e535f-166">Next steps</span></span>
<span data-ttu-id="e535f-167">[actualización de aplicaciones usando Visual Studio](service-fabric-application-upgrade-tutorial.md) ofrece información para actualizar una aplicación mediante Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e535f-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="e535f-168">[actualización de aplicaciones mediante PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) se explica en detalle lo que tiene que hacer para actualizar una aplicación mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e535f-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="e535f-169">Puede controlar cómo se actualiza una aplicación usando [parámetros de actualización](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="e535f-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="e535f-170">Hacer que las actualizaciones de la aplicación sea compatible por el aprendizaje cómo toouse [serialización de datos](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="e535f-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="e535f-171">Obtenga información acerca de cómo toouse funcionalidad avanzada al actualizar la aplicación, se hace referencia demasiado[temas avanzados](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="e535f-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="e535f-172">Solucione problemas habituales en las actualizaciones de aplicaciones, se hace referencia a pasos toohello en [solución de problemas de las actualizaciones de aplicaciones](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="e535f-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png

---
title: "aaaThrottling en Administrador de recursos de clúster de Service Fabric Hola | Documentos de Microsoft"
description: "Obtenga información acerca de los aceleradores de hello tooconfigure proporcionadas por el servicio Administrador de recursos del clúster de tejido de Hola."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="3e65e-103">Velocidad moderada Hola servicio Administrador de recursos del clúster de tejido</span><span class="sxs-lookup"><span data-stu-id="3e65e-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="3e65e-104">Incluso si Hola, Administrador de recursos del clúster que ha configurado correctamente, puede obtener interrumpa el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="3e65e-105">¿Por ejemplo, podría haber nodo y errores de dominio errores simultáneos - lo que sucedería si se produjo durante una actualización? Hola, Administrador de recursos del clúster siempre intenta toofix todo, consumiendo recursos del clúster de hello tratando de clúster de hello tooreorganize y corrección.</span><span class="sxs-lookup"><span data-stu-id="3e65e-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="3e65e-106">Aceleradores ayudan a proporcionar una parada para que el clúster de hello puede utilizar los recursos toostabilize: nodos Hola vuelven, reparación de particiones de la red de hello, se implementan los bits corregidos.</span><span class="sxs-lookup"><span data-stu-id="3e65e-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="3e65e-107">toohelp con este tipo de situaciones, Hola, Administrador de recursos de clúster de tejido de servicio incluye varias limitaciones.</span><span class="sxs-lookup"><span data-stu-id="3e65e-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="3e65e-108">Estas limitaciones son medidas bastante disruptivas.</span><span class="sxs-lookup"><span data-stu-id="3e65e-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="3e65e-109">Generalmente no debe cambiarse sin realizar una planeación y pruebas rigurosas.</span><span class="sxs-lookup"><span data-stu-id="3e65e-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="3e65e-110">Si cambia los aceleradores del Administrador de recursos de clúster hello, debe ajustarlos carga real esperado de tooyour.</span><span class="sxs-lookup"><span data-stu-id="3e65e-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="3e65e-111">Puede determinar que necesita toohave algunos limita en su lugar, incluso aunque esto signifique clúster Hola toma más toostabilize en algunas situaciones.</span><span class="sxs-lookup"><span data-stu-id="3e65e-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="3e65e-112">Es necesario toodetermine Hola valores correctos para aceleradores pruebas.</span><span class="sxs-lookup"><span data-stu-id="3e65e-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="3e65e-113">Aceleradores necesitan toobe tooallow lo suficientemente alto como Hola clúster toorespond toochanges en un intervalo de tiempo razonable, y baja suficiente tooactually evitar demasiado elevado consumo de recursos.</span><span class="sxs-lookup"><span data-stu-id="3e65e-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="3e65e-114">La mayoría de los casos de Hola que hemos visto a los clientes usa aceleradores ha sido porque ya estaban en un entorno restringido de recursos.</span><span class="sxs-lookup"><span data-stu-id="3e65e-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="3e65e-115">Algunos ejemplos serían ancho de banda de red limitado para los nodos individuales, o los discos que no están capaz de toobuild muchos réplicas con estado en paralelo debido a limitaciones de toothroughput.</span><span class="sxs-lookup"><span data-stu-id="3e65e-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="3e65e-116">Sin aceleradores, las operaciones podrían sobrecargar estos recursos, que produce operaciones toofail o ser lenta.</span><span class="sxs-lookup"><span data-stu-id="3e65e-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="3e65e-117">En estas situaciones, los clientes usan aceleradores y sabían que han ampliado la cantidad de Hola de tiempo que tardaría Hola clúster tooreach un estado estable.</span><span class="sxs-lookup"><span data-stu-id="3e65e-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="3e65e-118">Los clientes también comprendían que podían terminar ejecutándose con una confiabilidad general menor mientras estaban con restricciones.</span><span class="sxs-lookup"><span data-stu-id="3e65e-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="3e65e-119">Configuración de Hola de aceleradores</span><span class="sxs-lookup"><span data-stu-id="3e65e-119">Configuring hello throttles</span></span>

<span data-ttu-id="3e65e-120">Tejido de servicio tiene dos mecanismos para la limitación de número de Hola de movimientos de réplica.</span><span class="sxs-lookup"><span data-stu-id="3e65e-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="3e65e-121">mecanismo predeterminado de Hola que existían antes de Service Fabric 5.7 representa como un número absoluto de movimientos permitido de limitación.</span><span class="sxs-lookup"><span data-stu-id="3e65e-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="3e65e-122">Esto no funciona con los clústeres de todos los tamaños.</span><span class="sxs-lookup"><span data-stu-id="3e65e-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="3e65e-123">En concreto, para grandes clústeres Hola de manera predeterminada valor puede ser demasiado pequeño, ralentizar notablemente equilibrio incluso cuando sea necesario, al tiempo que tiene ningún efecto en clústeres más pequeños.</span><span class="sxs-lookup"><span data-stu-id="3e65e-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="3e65e-124">Este mecanismo anterior ha sido reemplazada por la limitación de basadas en porcentajes, que se escala mejor con clústeres dinámicos en qué número de hello de servicios y nodos cambian con regularidad.</span><span class="sxs-lookup"><span data-stu-id="3e65e-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="3e65e-125">Hola aceleradores se basan en un porcentaje del número de Hola de réplicas en clústeres de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="3e65e-126">Percetage según aceleradores Habilitar regla de hello expresar: "no se mueven más del 10% de las réplicas en un intervalo de 10 minutos", por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="3e65e-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="3e65e-127">valores de configuración de Hola de limitación basada en porcentaje son:</span><span class="sxs-lookup"><span data-stu-id="3e65e-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="3e65e-128">GlobalMovementThrottleThresholdPercentage - número máximo de movimientos permitido en clúster en cualquier momento, expresado como porcentaje del número total de réplicas en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="3e65e-129">0 indica sin límite.</span><span class="sxs-lookup"><span data-stu-id="3e65e-129">0 indicates no limit.</span></span> <span data-ttu-id="3e65e-130">valor predeterminado de Hello es 0.</span><span class="sxs-lookup"><span data-stu-id="3e65e-130">hello default value is 0.</span></span> <span data-ttu-id="3e65e-131">Si no se especifican esta opción y el GlobalMovementThrottleThreshold, a continuación, hello más conservador límite se utiliza.</span><span class="sxs-lookup"><span data-stu-id="3e65e-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="3e65e-132">GlobalMovementThrottleThresholdPercentageForPlacement - número máximo de movimientos permitidos durante la fase de selección de ubicación de hello, expresado como porcentaje del número total de réplicas en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="3e65e-133">0 indica sin límite.</span><span class="sxs-lookup"><span data-stu-id="3e65e-133">0 indicates no limit.</span></span> <span data-ttu-id="3e65e-134">valor predeterminado de Hello es 0.</span><span class="sxs-lookup"><span data-stu-id="3e65e-134">hello default value is 0.</span></span> <span data-ttu-id="3e65e-135">Si no se especifican esta opción y el GlobalMovementThrottleThresholdForPlacement, a continuación, hello más conservador límite se utiliza.</span><span class="sxs-lookup"><span data-stu-id="3e65e-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="3e65e-136">GlobalMovementThrottleThresholdPercentageForBalancing - número máximo de movimientos permitidas durante Hola equilibrio fase, expresado como porcentaje del número total de réplicas en clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="3e65e-137">0 indica sin límite.</span><span class="sxs-lookup"><span data-stu-id="3e65e-137">0 indicates no limit.</span></span> <span data-ttu-id="3e65e-138">valor predeterminado de Hello es 0.</span><span class="sxs-lookup"><span data-stu-id="3e65e-138">hello default value is 0.</span></span> <span data-ttu-id="3e65e-139">Si no se especifican esta opción y el GlobalMovementThrottleThresholdForBalancing, a continuación, hello más conservador límite se utiliza.</span><span class="sxs-lookup"><span data-stu-id="3e65e-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="3e65e-140">Al especificar el porcentaje de limitación de hello, especificaría 5% como 0,05.</span><span class="sxs-lookup"><span data-stu-id="3e65e-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="3e65e-141">intervalo de saludo en el que se rigen estos aceleradores es hello GlobalMovementThrottleCountingInterval, que se especifica en segundos.</span><span class="sxs-lookup"><span data-stu-id="3e65e-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="3e65e-142">a través de ClusterConfig.json para las implementaciones independientes o Template.json para los clústeres hospedados en Azure:</span><span class="sxs-lookup"><span data-stu-id="3e65e-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="3e65e-143">Recuento predeterminado basado en limitaciones</span><span class="sxs-lookup"><span data-stu-id="3e65e-143">Default count based throttles</span></span>
<span data-ttu-id="3e65e-144">Esta información se ofrece por si tiene clústeres anteriores o todavía se conservan estas configuraciones en clústeres que se han actualizado desde entonces.</span><span class="sxs-lookup"><span data-stu-id="3e65e-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="3e65e-145">En general, se recomienda que estos se reemplazan con aceleradores de basadas en porcentajes del saludo anteriores.</span><span class="sxs-lookup"><span data-stu-id="3e65e-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="3e65e-146">Limitación basada en el porcentaje se encuentra deshabilitado de forma predeterminada, estos aceleradores permanecen Hola aceleradores de forma predeterminada para un clúster hasta que se deshabilita y reemplazados por aceleradores basadas en porcentajes de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="3e65e-147">GlobalMovementThrottleThreshold: esta configuración controla el número total de hello movimientos en el clúster de hello en algún tiempo.</span><span class="sxs-lookup"><span data-stu-id="3e65e-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="3e65e-148">cantidad de Hola de tiempo se especifica en segundos como hello GlobalMovementThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="3e65e-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="3e65e-149">valor predeterminado de Hola para hello GlobalMovementThrottleThreshold es 1000 y valor predeterminado de Hola para hello GlobalMovementThrottleCountingInterval es 600.</span><span class="sxs-lookup"><span data-stu-id="3e65e-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="3e65e-150">MovementPerPartitionThrottleThreshold: esta configuración controla el número total de Hola de movimientos para cualquier partición de servicio a través de algún tiempo.</span><span class="sxs-lookup"><span data-stu-id="3e65e-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="3e65e-151">cantidad de Hola de tiempo se especifica en segundos como hello MovementPerPartitionThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="3e65e-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="3e65e-152">valor predeterminado de Hola para hello MovementPerPartitionThrottleThreshold es 50 y valor predeterminado de Hola para hello MovementPerPartitionThrottleCountingInterval es 600.</span><span class="sxs-lookup"><span data-stu-id="3e65e-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="3e65e-153">configuración de Hola para estos aceleradores sigue Hola mismo patrón como Hola basadas en porcentajes de limitación.</span><span class="sxs-lookup"><span data-stu-id="3e65e-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3e65e-154">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="3e65e-154">Next steps</span></span>
- <span data-ttu-id="3e65e-155">toofind out acerca de cómo Hola, Administrador de recursos del clúster administra y equilibra la carga en el clúster de hello, desproteger artículo hello en [equilibrio de carga](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="3e65e-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="3e65e-156">Hola, Administrador de recursos del clúster tiene muchas opciones para describir el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="3e65e-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="3e65e-157">toofind más información acerca de ellos, consulte este artículo en [que describe un clúster de Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="3e65e-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>

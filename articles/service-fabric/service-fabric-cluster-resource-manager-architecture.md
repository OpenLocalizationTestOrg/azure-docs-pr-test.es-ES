---
title: Arquitectura de Resource Manager | Microsoft Docs
description: "Información general de la arquitectura de Service Fabric Cluster Resource Manager"
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 565c20637fa93ed92bb6c52e585a4b70bdeb6f8c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="6c1b5-103">Información general de la arquitectura del Administrador de recursos de clúster</span><span class="sxs-lookup"><span data-stu-id="6c1b5-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="6c1b5-104">Cluster Resource Manager de Service Fabric es un servicio centralizado que se ejecuta en el clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-104">The Service Fabric Cluster Resource Manager is a central service that runs in the cluster.</span></span> <span data-ttu-id="6c1b5-105">Administra el estado deseado de los servicios del clúster, concretamente con respecto al consumo de recursos y las reglas de selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-105">It manages the desired state of the services in the cluster, particularly with respect to resource consumption and any placement rules.</span></span> 

<span data-ttu-id="6c1b5-106">Para administrar los recursos del clúster, Cluster Resource Manager de Service Fabric debe disponer de varios datos:</span><span class="sxs-lookup"><span data-stu-id="6c1b5-106">To manage the resources in your cluster, the Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="6c1b5-107">Qué servicios existen actualmente</span><span class="sxs-lookup"><span data-stu-id="6c1b5-107">Which services currently exist</span></span>
- <span data-ttu-id="6c1b5-108">Consumo de recursos actual (o predeterminado) de cada servicio</span><span class="sxs-lookup"><span data-stu-id="6c1b5-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="6c1b5-109">Capacidad restante del clúster</span><span class="sxs-lookup"><span data-stu-id="6c1b5-109">The remaining cluster capacity</span></span> 
- <span data-ttu-id="6c1b5-110">Capacidad de los nodos del clúster</span><span class="sxs-lookup"><span data-stu-id="6c1b5-110">The capacity of the nodes in the cluster</span></span> 
- <span data-ttu-id="6c1b5-111">Cantidad de recursos consumidos en cada nodo</span><span class="sxs-lookup"><span data-stu-id="6c1b5-111">The amount of resources consumed on each node</span></span>

<span data-ttu-id="6c1b5-112">El consumo de recursos de un servicio determinado puede cambiar con el tiempo y los servicios normalmente se ocupan de más de un tipo de recurso.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-112">The resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="6c1b5-113">En los distintos servicios, es posible que se midan tanto los recursos lógicos como los recursos físicos reales.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="6c1b5-114">Los servicios pueden hacer seguimiento de métricas físicas, como el consumo de disco y memoria.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="6c1b5-115">Es más frecuentes que los servicios se ocupen de las métricas lógicas, como "WorkQueueDepth" o "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="6c1b5-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="6c1b5-116">Se pueden usar métricas lógicas y físicas en un mismo clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-116">Both logical and physical metrics can be used in the same cluster.</span></span> <span data-ttu-id="6c1b5-117">Las métricas pueden compartirse entre varios servicios o ser específicas de un servicio concreto.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-117">Metrics can be shared across many services or be specific to a particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="6c1b5-118">Otras consideraciones</span><span class="sxs-lookup"><span data-stu-id="6c1b5-118">Other considerations</span></span>
<span data-ttu-id="6c1b5-119">Los propietarios y operadores del clúster pueden ser distintos de los autores de los servicios y las aplicaciones o, por lo menos, tienen distintas responsabilidades.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-119">The owners and operators of the cluster can be different from the service and application authors, or at a minimum are the same people wearing different hats.</span></span> <span data-ttu-id="6c1b5-120">Hay algunas cosas que se saben sobre lo que necesita la aplicación al desarrollarla.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="6c1b5-121">Se tiene un cálculo aproximado de los recursos que consumirá y se sabe cómo deben implementarse los distintos servicios.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-121">You have an estimate of the resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="6c1b5-122">Por ejemplo, el nivel web tiene que ejecutarse en nodos expuestos en Internet, mientras que los servicios de base de datos, no.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-122">For example, the web tier needs to run on nodes exposed to the Internet, while the database services should not.</span></span> <span data-ttu-id="6c1b5-123">Otro ejemplo puede ser que los servicios web probablemente estén restringidos por la CPU y la red, mientras que los servicios del nivel de datos dan más importancia al consumo de memoria y de disco.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-123">As another example, the web services are probably constrained by CPU and network, while the data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="6c1b5-124">Aunque la persona que controla un incidente en un sitio activo de ese servicio en producción o que administra una actualización del servicio tiene un trabajo distinto que realizar y necesita herramientas distintas.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-124">However, the person handling a live-site incident for that service in production, or who is managing an upgrade to the service has a different job to do, and requires different tools.</span></span> 

<span data-ttu-id="6c1b5-125">El clúster y los servicios son dinámicos:</span><span class="sxs-lookup"><span data-stu-id="6c1b5-125">Both the cluster and services are dynamic:</span></span>

- <span data-ttu-id="6c1b5-126">La cantidad de nodos del clúster puede aumentar o disminuir.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-126">The number of nodes in the cluster can grow and shrink</span></span>
- <span data-ttu-id="6c1b5-127">Los nodos de distintos tipos y tamaños pueden ir y venir.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="6c1b5-128">Se pueden crear y quitar servicios, así como cambiarles las asignaciones de recursos y las reglas de selección de ubicación deseadas.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="6c1b5-129">Pueden producirse actualizaciones u otras operaciones de administración en los niveles de aplicación o de infraestructura del clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-129">Upgrades or other management operations can roll through the cluster at the application on infrastructure levels</span></span>
- <span data-ttu-id="6c1b5-130">Pueden generarse errores en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="6c1b5-131">Componentes y flujo de datos del Administrador de recursos de clúster</span><span class="sxs-lookup"><span data-stu-id="6c1b5-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="6c1b5-132">Cluster Resource Manager debe hacer seguimiento de los requisitos de cada servicio y el consumo de recursos que cada objeto de servicio hace en esos servicios.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-132">The Cluster Resource Manager has to track the requirements of each service and the consumption of resources by each service object within those services.</span></span> <span data-ttu-id="6c1b5-133">Cluster Resource Manager tiene dos partes conceptuales: los agentes que se ejecutan en cada nodo y un servicio tolerante a errores.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-133">The Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="6c1b5-134">Los agentes de cada nodo hacen seguimiento de los informes de carga de los servicios, los suman e informan de manera periódica.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-134">The agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="6c1b5-135">El servicio Cluster Resource Manager suma toda la información de los agentes locales y reacciona en función de su configuración actual.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-135">The Cluster Resource Manager service aggregates all the information from the local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="6c1b5-136">Observemos el diagrama siguiente:</span><span class="sxs-lookup"><span data-stu-id="6c1b5-136">Let’s look at the following diagram:</span></span>

<span data-ttu-id="6c1b5-137"><center>
![Arquitectura del equilibrador de recursos][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="6c1b5-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="6c1b5-138">Durante el tiempo de ejecución, pueden ocurrir muchos cambios.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="6c1b5-139">Por ejemplo, supongamos que la cantidad de recursos que algunos servicios consumen cambia, algunos servicios presentan errores y algunos nodos se unen y abandonan el clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-139">For example, let’s say the amount of resources some services consume changes, some services fail, and some nodes join and leave the cluster.</span></span> <span data-ttu-id="6c1b5-140">Todos los cambios en un nodo se agregan y se envían periódicamente al servicio de Cluster Resource Manager (1, 2) donde se agregan de nuevo, se analizan y se almacenan.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-140">All the changes on a node are aggregated and periodically sent to the Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="6c1b5-141">Cada pocos segundos, ese servicio examina los cambios y determina si es necesario llevar a cabo alguna acción (3).</span><span class="sxs-lookup"><span data-stu-id="6c1b5-141">Every few seconds that service looks at the changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="6c1b5-142">Por ejemplo, podría detectar que se agregaron nodos vacíos al clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-142">For example, it could notice that some empty nodes have been added to the cluster.</span></span> <span data-ttu-id="6c1b5-143">Por consiguiente, decide mover algunos servicios a esos nodos.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-143">As a result, it decides to move some services to those nodes.</span></span> <span data-ttu-id="6c1b5-144">Cluster Resource Manager también podría detectar que un nodo en concreto está sobrecargado, o bien que determinados servicios no han funcionado o se han eliminado, y liberar recursos de otros lugares.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-144">The Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="6c1b5-145">Examinemos el siguiente diagrama y veamos qué sucede a continuación.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-145">Let’s look at the following diagram and see what happens next.</span></span> <span data-ttu-id="6c1b5-146">Supongamos que Cluster Resource Manager determina que se necesitan cambios.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-146">Let’s say that the Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="6c1b5-147">Coordina con otros servicios del sistema (en concreto, con el Administrador de conmutación por error) la realización de los cambios necesarios.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-147">It coordinates with other system services (in particular the Failover Manager) to make the necessary changes.</span></span> <span data-ttu-id="6c1b5-148">A continuación, los comandos necesarios se envían a los nodos correspondientes (4).</span><span class="sxs-lookup"><span data-stu-id="6c1b5-148">Then the necessary commands are sent to the appropriate nodes (4).</span></span> <span data-ttu-id="6c1b5-149">Por ejemplo, digamos que Resource Manager ha detectado que Node5 está sobrecargado y por eso ha decidido mover el servicio B de Node5 a Node4.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-149">For example, let's say the Resource Manager noticed that Node5 was overloaded, and so decided to move service B from Node5 to Node4.</span></span> <span data-ttu-id="6c1b5-150">Al final de la reconfiguración (5), el clúster tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="6c1b5-150">At the end of the reconfiguration (5), the cluster looks like this:</span></span>

<span data-ttu-id="6c1b5-151"><center>
![Arquitectura del equilibrador de recursos][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="6c1b5-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="6c1b5-152">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="6c1b5-152">Next steps</span></span>
- <span data-ttu-id="6c1b5-153">Cluster Resource Manager tiene muchas opciones para describir el clúster.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-153">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="6c1b5-154">Para obtener más información sobre ellas, consulte este artículo [Descripción de un clúster de Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="6c1b5-154">To find out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="6c1b5-155">Las principales tareas de Cluster Resource Manager son el reequilibrado del clúster y la aplicación de reglas de selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="6c1b5-155">The Cluster Resource Manager's primary duties are rebalancing the cluster and enforcing placement rules.</span></span> <span data-ttu-id="6c1b5-156">Para más información sobre cómo configurar estos comportamientos, vea [Equilibrio del clúster de Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="6c1b5-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png

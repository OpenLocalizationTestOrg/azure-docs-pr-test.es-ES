---
title: "Supervisión del nivel de plataforma de Azure Service Fabric | Microsoft Docs"
description: "Obtenga información sobre los eventos y los registros de nivel de plataforma que se usan para supervisar y diagnosticar los clústeres de Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/24/2017
ms.author: dekapur
ms.openlocfilehash: c5857515ae8357b003f0999c4b11bd666c32bbf9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="platform-level-event-and-log-generation"></a><span data-ttu-id="efbdf-103">Generación de eventos y registros de nivel de plataforma</span><span class="sxs-lookup"><span data-stu-id="efbdf-103">Platform level event and log generation</span></span>

## <a name="monitoring-the-cluster"></a><span data-ttu-id="efbdf-104">Supervisar el clúster</span><span class="sxs-lookup"><span data-stu-id="efbdf-104">Monitoring the cluster</span></span>

<span data-ttu-id="efbdf-105">Es importante supervisar en el nivel de infraestructura para determinar si el hardware y el clúster se comportan según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="efbdf-105">It is important to monitor at the platform level to determine whether or not your hardware and cluster are behaving as expected.</span></span> <span data-ttu-id="efbdf-106">Aunque Service Fabric puede mantener las aplicaciones en ejecución durante un error de hardware, es necesario diagnosticar si un error se produce en una aplicación o en la infraestructura subyacente.</span><span class="sxs-lookup"><span data-stu-id="efbdf-106">Though Service Fabric can keep applications running during a hardware failure, but you still need to diagnose whether an error is occurring in an application or in the underlying infrastructure.</span></span> <span data-ttu-id="efbdf-107">También debe supervisar los clústeres para planear mejor la capacidad, lo que ayuda a decidir si es necesario agregar o quitar hardware.</span><span class="sxs-lookup"><span data-stu-id="efbdf-107">You also should monitor your clusters to better plan for capacity, helping in decisions about adding or removing hardware.</span></span>

<span data-ttu-id="efbdf-108">Service Fabric incluye de forma predeterminada cinco canales de registro que generan los eventos siguientes:</span><span class="sxs-lookup"><span data-stu-id="efbdf-108">Service Fabric provides five different log channels out-of-the-box that generate the following events:</span></span>

* <span data-ttu-id="efbdf-109">Canal operativo: operaciones de alto nivel realizadas por Service Fabric y el clúster, incluidos eventos para un nodo próximo, una nueva aplicación que se implementa o la reversión de una actualización de SF, etc.</span><span class="sxs-lookup"><span data-stu-id="efbdf-109">Operational channel: high-level operations performed by Service Fabric and the cluster, including events for a node coming up, a new application being deployed, or a SF upgrade rollback, etc.</span></span>
* <span data-ttu-id="efbdf-110">Canal operativo: detallado: informes de estado y decisiones para el equilibrio de carga</span><span class="sxs-lookup"><span data-stu-id="efbdf-110">Operational channel - detailed: health reports and load balancing decisions</span></span>
* <span data-ttu-id="efbdf-111">Canal de datos y mensajería: registros y eventos críticos generados en nuestra ruta de acceso a mensajería (actualmente solo ReverseProxy) y datos (modelos de servicios confiables)</span><span class="sxs-lookup"><span data-stu-id="efbdf-111">Data & Messaging channel: critical logs and events generated in our messaging (currently only the ReverseProxy) and data path (reliable services models)</span></span>
* <span data-ttu-id="efbdf-112">Canal de datos y mensajería: detallado: canal detallado que contiene todos los registros no críticos de datos y mensajería del clúster (este canal tiene un volumen de eventos muy alto)</span><span class="sxs-lookup"><span data-stu-id="efbdf-112">Data & Messaging channel - detailed: verbose channel that contains all the non-critical logs from data and messaging in the cluster (this channel has a very high volume of events)</span></span>   
* <span data-ttu-id="efbdf-113">[Eventos de Reliable Services](service-fabric-reliable-services-diagnostics.md): eventos específicos del modelo de programación</span><span class="sxs-lookup"><span data-stu-id="efbdf-113">[Reliable Services events](service-fabric-reliable-services-diagnostics.md): programming model specific events</span></span>
* <span data-ttu-id="efbdf-114">[Eventos de Reliable Actors](service-fabric-reliable-actors-diagnostics.md): contadores de rendimiento y eventos específicos del modelo de programación</span><span class="sxs-lookup"><span data-stu-id="efbdf-114">[Reliable Actors events](service-fabric-reliable-actors-diagnostics.md): programming model specific events and performance counters</span></span>
* <span data-ttu-id="efbdf-115">Registros de soporte técnico: registros del sistema que genera Service Fabric únicamente para que los usemos al proporcionar soporte técnico</span><span class="sxs-lookup"><span data-stu-id="efbdf-115">Support logs: system logs generated by Service Fabric only to be used by us when providing support</span></span>

<span data-ttu-id="efbdf-116">Estos distintos canales cubren la mayor parte de los registros de nivel de plataforma que se recomiendan.</span><span class="sxs-lookup"><span data-stu-id="efbdf-116">These various channels cover most of the platform level logging that is recommended.</span></span> <span data-ttu-id="efbdf-117">Para mejorar el registro de nivel de plataforma, considere la posibilidad de dedicar tiempo a comprender mejor el modelo de mantenimiento y agregar informes de mantenimiento personalizados, e agregar **contadores de rendimiento** personalizados para comprender en tiempo real de qué manera afectan al clúster los servicios y las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="efbdf-117">To improve platform level logging, consider investing in better understanding the health model and adding custom health reports, and adding custom **Performance Counters** to build a real-time understanding of the impact of your services and applications on the cluster.</span></span>

### <a name="azure-service-fabric-health-and-load-reporting"></a><span data-ttu-id="efbdf-118">Informes de carga y mantenimiento de Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="efbdf-118">Azure Service Fabric health and load reporting</span></span>

<span data-ttu-id="efbdf-119">Service Fabric tiene su propio modelo de mantenimiento, que se describe en detalle en estos artículos:</span><span class="sxs-lookup"><span data-stu-id="efbdf-119">Service Fabric has its own health model, which is described in detail in these articles:</span></span>
- [<span data-ttu-id="efbdf-120">Introducción a la supervisión del mantenimiento de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="efbdf-120">Introduction to Service Fabric health monitoring</span></span>](service-fabric-health-introduction.md)
- [<span data-ttu-id="efbdf-121">Notificación y comprobación del estado del servicio</span><span class="sxs-lookup"><span data-stu-id="efbdf-121">Report and check service health</span></span>](service-fabric-diagnostics-how-to-report-and-check-service-health.md)
- [<span data-ttu-id="efbdf-122">Incorporación de informes de mantenimiento de Service Fabric personalizados</span><span class="sxs-lookup"><span data-stu-id="efbdf-122">Add custom Service Fabric health reports</span></span>](service-fabric-report-health.md)
- [<span data-ttu-id="efbdf-123">Vista de los informes de estado de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="efbdf-123">View Service Fabric health reports</span></span>](service-fabric-view-entities-aggregated-health.md)

<span data-ttu-id="efbdf-124">La supervisión del mantenimiento es fundamental para diversos aspectos operativos de un servicio.</span><span class="sxs-lookup"><span data-stu-id="efbdf-124">Health monitoring is critical to multiple aspects of operating a service.</span></span> <span data-ttu-id="efbdf-125">La supervisión del mantenimiento es especialmente importante cuando Service Fabric lleva a cabo una actualización de la aplicación con nombre.</span><span class="sxs-lookup"><span data-stu-id="efbdf-125">Health monitoring is especially important when Service Fabric performs a named application upgrade.</span></span> <span data-ttu-id="efbdf-126">Cuando estén actualizados y disponibles para los clientes los dominios del servicio, deben pasar las comprobaciones de mantenimiento para que la implementación pase al siguiente dominio de actualización.</span><span class="sxs-lookup"><span data-stu-id="efbdf-126">After each upgrade domain of the service is upgraded and is available to your customers, the upgrade domain must pass health checks before the deployment moves to the next upgrade domain.</span></span> <span data-ttu-id="efbdf-127">Si no se puede alcanzar un mantenimiento correcto, la implementación se revierte y deja la aplicación en un estado correcto conocido.</span><span class="sxs-lookup"><span data-stu-id="efbdf-127">If good health status cannot be achieved, the deployment is rolled back, so that the application is in a known, good state.</span></span> <span data-ttu-id="efbdf-128">Aunque algunos clientes resultaran afectados antes de que los servicios se pudieran revertir, la mayoría no experimenta ningún problema.</span><span class="sxs-lookup"><span data-stu-id="efbdf-128">Although some customers might be affected before the services are rolled back, most customers won't experience an issue.</span></span> <span data-ttu-id="efbdf-129">Además, la resolución se produce de forma relativamente rápida y sin necesidad de esperar a la acción de un operador humano.</span><span class="sxs-lookup"><span data-stu-id="efbdf-129">Also, a resolution occurs relatively quickly, and without having to wait for action from a human operator.</span></span> <span data-ttu-id="efbdf-130">Cuantas más comprobaciones de mantenimiento se integren en el código, más resistente será el servicio a los problemas de implementación.</span><span class="sxs-lookup"><span data-stu-id="efbdf-130">The more health checks that are incorporated into your code, the more resilient your service is to deployment issues.</span></span>

<span data-ttu-id="efbdf-131">Otro aspecto del estado del servicio es la notificación de métricas desde el servicio.</span><span class="sxs-lookup"><span data-stu-id="efbdf-131">Another aspect of service health is reporting metrics from the service.</span></span> <span data-ttu-id="efbdf-132">Las métricas son importantes en Service Fabric, porque se usan para equilibrar el uso de los recursos.</span><span class="sxs-lookup"><span data-stu-id="efbdf-132">Metrics are important in Service Fabric because they are used to balance resource usage.</span></span> <span data-ttu-id="efbdf-133">Además, son un indicador del estado del sistema.</span><span class="sxs-lookup"><span data-stu-id="efbdf-133">Metrics also can be an indicator of system health.</span></span> <span data-ttu-id="efbdf-134">Por ejemplo, supongamos que tiene una aplicación con muchos servicios y que cada instancia informa sobre una métrica de solicitudes por segundo (RPS).</span><span class="sxs-lookup"><span data-stu-id="efbdf-134">For example, you might have an application that has many services, and each instance reports a requests per second (RPS) metric.</span></span> <span data-ttu-id="efbdf-135">Si uno de los servicios usa más recursos que otro, Service Fabric mueve instancias de servicio en el clúster para intentar mantener un uso uniforme de los recursos.</span><span class="sxs-lookup"><span data-stu-id="efbdf-135">If one service is using more resources than another service, Service Fabric moves service instances around the cluster, to try to maintain even resource utilization.</span></span> <span data-ttu-id="efbdf-136">Para una explicación más detallada sobre cómo funciona el uso de los recursos, consulte [Administración de consumo y carga de recursos en Service Fabric con métricas](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="efbdf-136">For a more detailed explanation of how resource utilization works, see [Manage resource consumption and load in Service Fabric with metrics](service-fabric-cluster-resource-manager-metrics.md).</span></span>

<span data-ttu-id="efbdf-137">Las métricas también pueden ayudarle con una visión general de rendimiento del servicio.</span><span class="sxs-lookup"><span data-stu-id="efbdf-137">Metrics also can help give you insight into how your service is performing.</span></span> <span data-ttu-id="efbdf-138">Con el tiempo, las métricas se pueden usar para comprobar que el servicio funciona con los parámetros previstos.</span><span class="sxs-lookup"><span data-stu-id="efbdf-138">Over time, you can use metrics to check that the service is operating within expected parameters.</span></span> <span data-ttu-id="efbdf-139">Por ejemplo, si las tendencias muestran que a las 9 de la mañana del lunes, el promedio de solicitudes por segundo es de 1000, podría configurar un informe de mantenimiento que emita una alerta si descienden de 500 o aumentan por encima de las 1500.</span><span class="sxs-lookup"><span data-stu-id="efbdf-139">For example, if trends show that at 9 AM on Monday morning the average RPS is 1,000, then you might set up a health report that alerts you if the RPS is below 500 or above 1,500.</span></span> <span data-ttu-id="efbdf-140">Todo puede estar funcionando correctamente, pero quizá valga la pena echar un vistazo para asegurarse de que los clientes disfrutan de una gran experiencia.</span><span class="sxs-lookup"><span data-stu-id="efbdf-140">Everything might be perfectly fine, but it might be worth a look to be sure that your customers are having a great experience.</span></span> <span data-ttu-id="efbdf-141">El servicio puede definir un conjunto de métricas que se pueden notificar para controlar el mantenimiento, pero que no afecten al equilibrio de los recursos del clúster.</span><span class="sxs-lookup"><span data-stu-id="efbdf-141">Your service can define a set of metrics that can be reported for health check purposes, but that don't affect the resource balancing of the cluster.</span></span> <span data-ttu-id="efbdf-142">Para ello, establezca la ponderación métrica en cero.</span><span class="sxs-lookup"><span data-stu-id="efbdf-142">To do this, set the metric weight to zero.</span></span> <span data-ttu-id="efbdf-143">Se recomienda iniciar todas las métricas con una ponderación de cero y no aumentarla hasta que se sepa con certeza la repercusión que tiene en el equilibrio de los recursos para el clúster.</span><span class="sxs-lookup"><span data-stu-id="efbdf-143">We recommend that you start all metrics with a weight of zero, and not increase the weight  until you are sure that you understand how weighting the metrics affects resource balancing for your cluster.</span></span>

> [!TIP]
> <span data-ttu-id="efbdf-144">No use demasiadas métricas ponderadas.</span><span class="sxs-lookup"><span data-stu-id="efbdf-144">Don't use too many weighted metrics.</span></span> <span data-ttu-id="efbdf-145">Puede ser difícil de entender por qué se mueven instancias de servicio para el equilibrio.</span><span class="sxs-lookup"><span data-stu-id="efbdf-145">It can be difficult to understand why service instances are being moved around for balancing.</span></span> <span data-ttu-id="efbdf-146">Algunas pueden moverse muchísimo.</span><span class="sxs-lookup"><span data-stu-id="efbdf-146">A few metrics can go a long way!</span></span>

<span data-ttu-id="efbdf-147">Cualquier información que pueda indicar el estado y el rendimiento de la aplicación es apta para los informes de mantenimiento y métricas.</span><span class="sxs-lookup"><span data-stu-id="efbdf-147">Any information that can indicate the health and performance of your application is a candidate for metrics and health reports.</span></span> <span data-ttu-id="efbdf-148">Un contador de rendimiento de la CPU puede indicar cómo se está usando el nodo, pero no indica si un servicio determinado está en buen estado, ya que pueden estar ejecutándose varios servicios en un solo nodo.</span><span class="sxs-lookup"><span data-stu-id="efbdf-148">A CPU performance counter can tell you how your node is utilized, but it doesn't tell you whether a particular service is healthy, because multiple services might be running on a single node.</span></span> <span data-ttu-id="efbdf-149">Pero las métricas como RPS, los elementos procesados y la latencia de solicitud, pueden indicar el estado de un servicio específico.</span><span class="sxs-lookup"><span data-stu-id="efbdf-149">But, metrics like RPS, items processed, and request latency all can indicate the health of a specific service.</span></span>

<span data-ttu-id="efbdf-150">Para notificar el estado, use código similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="efbdf-150">To report health, use code similar to this:</span></span>

  ```csharp
    if (!result.HasValue)
    {
        HealthInformation healthInformation = new HealthInformation("ServiceCode", "StateDictionary", HealthState.Error);
        this.Partition.ReportInstanceHealth(healthInformation);
    }
  ```

<span data-ttu-id="efbdf-151">Para notificar una métrica, use código similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="efbdf-151">To report a metric, use code similar to this:</span></span>

  ```csharp
    this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("MemoryInMb", 1234), new LoadMetric("metric1", 42) });
  ```

### <a name="service-fabric-support-logs"></a><span data-ttu-id="efbdf-152">Registros de soporte técnico de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="efbdf-152">Service Fabric support logs</span></span>

<span data-ttu-id="efbdf-153">Si tiene que ponerse en contacto con el soporte técnico de Microsoft para que le ayuden con el clúster de Azure Service Fabric, casi siempre necesitará los registros de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="efbdf-153">If you need to contact Microsoft support for help with your Azure Service Fabric cluster, support logs are almost always required.</span></span> <span data-ttu-id="efbdf-154">Si el clúster se hospeda en Azure, estos registros de soporte técnico se configuran y recopilan automáticamente en el proceso de creación del clúster.</span><span class="sxs-lookup"><span data-stu-id="efbdf-154">If your cluster is hosted in Azure, support logs are automatically configured and collected as part of creating a cluster.</span></span> <span data-ttu-id="efbdf-155">Los registros se almacenan en una cuenta de almacenamiento específica del grupo de recursos del clúster.</span><span class="sxs-lookup"><span data-stu-id="efbdf-155">The logs are stored in a dedicated storage account in your cluster's resource group.</span></span> <span data-ttu-id="efbdf-156">La cuenta de almacenamiento no tiene nombre fijo, pero en ella verá contenedores de blobs y tablas cuyos nombres empiezan por *fabric*.</span><span class="sxs-lookup"><span data-stu-id="efbdf-156">The storage account doesn't have a fixed name, but in the account, you see blob containers and tables with names that start with *fabric*.</span></span> <span data-ttu-id="efbdf-157">Para obtener información acerca de cómo configurar las colecciones de registros para un clúster independiente, consulte el artículo sobre la [creación y la administración de un clúster independiente de Azure Service Fabric](service-fabric-cluster-creation-for-windows-server.md) y [Opciones de configuración clústeres de Windows independientes](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="efbdf-157">For information about setting up log collections for a standalone cluster, see [Create and manage a standalone Azure Service Fabric cluster](service-fabric-cluster-creation-for-windows-server.md) and [Configuration settings for a standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span> <span data-ttu-id="efbdf-158">Para instancias independientes de Service Fabric, los registros se deben enviar a un archivo local compartido.</span><span class="sxs-lookup"><span data-stu-id="efbdf-158">For standalone Service Fabric instances, the logs should be sent to a local file share.</span></span> <span data-ttu-id="efbdf-159">Es **necesario** que tenga estos registros para el soporte técnico, pero no se prevé que los utilice nadie que no pertenezca al equipo de soporte técnico al cliente de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="efbdf-159">You are **required** to have these logs for support, but they are not intended to be usable by anyone outside of the Microsoft customer support team.</span></span>

## <a name="enabling-diagnostics-for-a-cluster"></a><span data-ttu-id="efbdf-160">Habilitar Diagnostics para un clúster</span><span class="sxs-lookup"><span data-stu-id="efbdf-160">Enabling Diagnostics for a cluster</span></span>

<span data-ttu-id="efbdf-161">Para sacar provecho de estos registros, se recomienda encarecidamente habilitar Diagnostics durante la creación del clúster.</span><span class="sxs-lookup"><span data-stu-id="efbdf-161">In order to take advantage of these logs, it is highly recommended that during cluster creation, "Diagnostics" is enabled.</span></span> <span data-ttu-id="efbdf-162">Al activar los diagnósticos, cuando se implementa el clúster, Microsoft Azure Diagnostics puede reconocer los canales operativo, de Reliable Services y de Reliable Actors y almacenar los datos como se explica en [Agregación de eventos con Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span><span class="sxs-lookup"><span data-stu-id="efbdf-162">By turning on diagnostics, when the cluster is deployed, Windows Azure Diagnostics is able to acknowledge the Operational, Reliable Services, and Reliable actors channels, and store the data as explained further in [Aggregate events with Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span></span>

<span data-ttu-id="efbdf-163">Como ya se ha visto, también hay un campo opcional para agregar una clave de instrumentación de Application Insights (AI).</span><span class="sxs-lookup"><span data-stu-id="efbdf-163">As seen above, there is also an optional field to add an Application Insights (AI) instrumentation key.</span></span> <span data-ttu-id="efbdf-164">Si decide usar AI para los análisis de eventos (obtenga más información en [Análisis de eventos con Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), incluya la clave de instrumentación de recursos de AppInsights (GUID).</span><span class="sxs-lookup"><span data-stu-id="efbdf-164">If you choose to use AI for any event analysis (read more about this in [Event Analysis with Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), include the AppInsights resource instrumentationKey (GUID) here.</span></span>


<span data-ttu-id="efbdf-165">Si va a implementar contenedores en el clúster, habilite WAD para recopilar estadísticas de Docker. Para ello, agregue lo siguiente a "WadCfg > DiagnosticMonitorConfiguration":</span><span class="sxs-lookup"><span data-stu-id="efbdf-165">If you are going to deploy containers to your cluster, enable WAD to pick up docker stats by adding this to your "WadCfg > DiagnosticMonitorConfiguration":</span></span>

```json
"DockerSources": {
    "Stats": {
        "enabled": true,
        "sampleRate": "PT1M"
    }
},

```

## <a name="measuring-performance"></a><span data-ttu-id="efbdf-166">Medir el rendimiento</span><span class="sxs-lookup"><span data-stu-id="efbdf-166">Measuring performance</span></span>

<span data-ttu-id="efbdf-167">La medición del rendimiento del clúster le ayudará a entender cómo controla la carga y toma decisiones sobre el escalado del clúster (obtenga más información sobre el escalado de un clúster [en Azure](service-fabric-cluster-scale-up-down.md) o [localmente](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span><span class="sxs-lookup"><span data-stu-id="efbdf-167">Measure performance of your cluster will help you understand how it is able to handle load and drive decisions around scaling your cluster (see more about scaling a cluster [on Azure](service-fabric-cluster-scale-up-down.md), or [on-premises](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span></span> <span data-ttu-id="efbdf-168">Al analizar los registros en el futuro, los datos de rendimiento también son útiles cuando se comparan con las acciones que usted o las aplicaciones han llevado a cabo.</span><span class="sxs-lookup"><span data-stu-id="efbdf-168">Performance data is also useful when compared to actions you or your applications and services may have taken, when analyzing logs in the future.</span></span> 

<span data-ttu-id="efbdf-169">Para obtener una lista de contadores de rendimiento para recopilar datos cuando se usa Service Fabric, vea [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md) (Contadores de rendimiento de Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="efbdf-169">For a list of performance counters to collect when using Service Fabric, see [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span></span>

<span data-ttu-id="efbdf-170">A continuación se indican dos formas habituales de configurar la recopilación de datos de rendimiento del clúster:</span><span class="sxs-lookup"><span data-stu-id="efbdf-170">Here are two common ways in which you can set up collecting performance data for your cluster:</span></span>

* <span data-ttu-id="efbdf-171">Usar un agente: se trata de la mejor manera de recopilar datos de rendimiento de un equipo, ya que los agentes suelen incluir una lista de las métricas de rendimiento que se pueden recopilar, y el proceso de elegir o cambiar las métricas que se van a recopilar es relativamente sencillo.</span><span class="sxs-lookup"><span data-stu-id="efbdf-171">Using an agent: this is the preferred way of collecting performance from a machine, since agents usually have a list of possible performance metrics that can be collected, and it is a relatively easy process to choose the metrics you want to collect or change them.</span></span> <span data-ttu-id="efbdf-172">Lea los artículos dedicados a [cómo configurar OMS para Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) y [cómo configurar el agente de OMS de Windows](../log-analytics/log-analytics-windows-agents.md) para obtener más información sobre el agente de OMS, que es un agente de supervisión que puede recopilar datos de rendimiento de las máquinas virtuales del clúster y los contenedores implementados.</span><span class="sxs-lookup"><span data-stu-id="efbdf-172">Read about [how to configure the OMS for Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) and [Setting up the OMS Windows Agent](../log-analytics/log-analytics-windows-agents.md) articles to learn more about the OMS agent, which is one such monitoring agent that is able to pick up performance data for cluster VMs and deployed containers.</span></span>

* <span data-ttu-id="efbdf-173">Configurar los diagnósticos de modo que escriban los contadores de rendimiento en una tabla: en el caso de los clústeres de Azure esto significa cambiar la configuración de Azure Diagnostics, de modo que recopile los contadores de rendimiento correspondientes a las máquinas virtuales del clúster y pueda reunir estadísticas de Docker si va a implementar contenedores.</span><span class="sxs-lookup"><span data-stu-id="efbdf-173">Configuring diagnostics to write performance counters to a table: for clusters on Azure, this means changing the Azure Diagnostics configuration to pick up the appropriate performance counters from the VMs in your cluster, and enabling it to pick up docker stats if you will be deploying any containers.</span></span> <span data-ttu-id="efbdf-174">Obtenga más información sobre cómo configurar [contadores de rendimiento de WAD](service-fabric-diagnostics-event-aggregation-wad.md) en Service Fabric para configurar una colección de contadores de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="efbdf-174">Read about configuring [Performance Counters in WAD](service-fabric-diagnostics-event-aggregation-wad.md) in Service Fabric to set up performance counter collection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="efbdf-175">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="efbdf-175">Next steps</span></span>

<span data-ttu-id="efbdf-176">Debe agregar primero los registros y los eventos para que se puedan enviar a una plataforma de análisis.</span><span class="sxs-lookup"><span data-stu-id="efbdf-176">Your logs and events need to be aggregated before they can be sent to any analysis platform.</span></span> <span data-ttu-id="efbdf-177">Obtenga información sobre [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) y [WAD](service-fabric-diagnostics-event-aggregation-wad.md) para entender mejor algunas de las opciones recomendadas.</span><span class="sxs-lookup"><span data-stu-id="efbdf-177">Read about [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) and [WAD](service-fabric-diagnostics-event-aggregation-wad.md) to better understand some of the recommended options.</span></span>

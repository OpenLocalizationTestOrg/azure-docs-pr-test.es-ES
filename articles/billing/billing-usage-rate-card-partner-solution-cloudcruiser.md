---
title: "aaaCloud Cruiser y la integración de la API de facturación de Microsoft Azure | Documentos de Microsoft"
description: "Proporciona una perspectiva exclusiva del socio de facturación de Microsoft Azure Cloud Cruiser, en sus experiencias integrar hello las API de facturación de Azure en su producto.  Esto es especialmente útil para los clientes de Azure y de Cloud Cruiser que están interesados en usar o probar Cloud Cruiser para el paquete de Microsoft Azure."
services: 
documentationcenter: 
author: BryanLa
manager: tonguyen
editor: 
tags: billing
ms.assetid: b65128cf-5d4d-4cbd-b81e-d3dceab44271
ms.service: billing
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 02/03/2017
ms.author: mobandyo;sirishap;bryanla
ms.openlocfilehash: 74cc19bdeed26c6684210736caa0cb365e8f8821
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="cloud-cruiser-and-microsoft-azure-billing-api-integration"></a><span data-ttu-id="657e3-104">Integración de Cloud Cruiser y de las API de facturación de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-104">Cloud Cruiser and Microsoft Azure Billing API Integration</span></span>
<span data-ttu-id="657e3-105">Este artículo describe cómo información Hola recopilada de hello que API nueva de facturación de Microsoft Azure puede usarse en Cloud Cruiser para flujo de trabajo costo simulación y análisis.</span><span class="sxs-lookup"><span data-stu-id="657e3-105">This article describes how hello information collected from hello new Microsoft Azure Billing APIs can be used in Cloud Cruiser for workflow cost simulation and analysis.</span></span>

## <a name="azure-ratecard-api"></a><span data-ttu-id="657e3-106">API de RateCard de Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-106">Azure RateCard API</span></span>
<span data-ttu-id="657e3-107">Hola API RateCard proporciona información de tasa de Azure.</span><span class="sxs-lookup"><span data-stu-id="657e3-107">hello RateCard API provides rate information from Azure.</span></span> <span data-ttu-id="657e3-108">Tras la autenticación con las credenciales adecuadas de hello, puede consultar Hola API toocollect metadatos acerca de los servicios de hello disponibles en Azure, además de las tasas de hello asociadas con el identificador de oferta.</span><span class="sxs-lookup"><span data-stu-id="657e3-108">After authenticating with hello proper credentials, you can query hello API toocollect metadata about hello services available on Azure, along with hello rates associated with your Offer ID.</span></span>

<span data-ttu-id="657e3-109">Hola siguiente es una respuesta de ejemplo a través de API de Hola que muestra los precios de Hola para hello A0 (Windows) instancia:</span><span class="sxs-lookup"><span data-stu-id="657e3-109">hello following is a sample response from hello API showing hello prices for hello A0 (Windows) instance:</span></span>

    {
        "MeterId": "0e59ad56-03e5-4c3d-90d4-6670874d7e29",
        "MeterName": "Compute Hours",
        "MeterCategory": "Virtual Machines",
        "MeterSubCategory": "A0 VM (Windows)",
        "Unit": "Hours",
        "MeterRates":
        {
            "0": 0.029
        },
        "EffectiveDate": "2014-08-01T00:00:00Z",
        "IncludedQuantity": 0.0,
        "MeterStatus": "Active"
    },

### <a name="cloud-cruisers-interface-tooazure-ratecard-api"></a><span data-ttu-id="657e3-110">TooAzure de interfaz de Cruiser API RateCard la nube</span><span class="sxs-lookup"><span data-stu-id="657e3-110">Cloud Cruiser’s Interface tooAzure RateCard API</span></span>
<span data-ttu-id="657e3-111">Cloud Cruiser puede aprovechar la información de la API RateCard de Hola de maneras diferentes.</span><span class="sxs-lookup"><span data-stu-id="657e3-111">Cloud Cruiser can leverage hello RateCard API information in different ways.</span></span> <span data-ttu-id="657e3-112">En este artículo, le mostraremos cómo puede resultarle toomake usado IaaS cargas de trabajo costo simulación y análisis.</span><span class="sxs-lookup"><span data-stu-id="657e3-112">For this article, we will show how it can be used toomake IaaS workload cost simulation and analysis.</span></span>

<span data-ttu-id="657e3-113">toodemonstrate este caso de uso, imagine una carga de trabajo de varias instancias que se ejecutan en Microsoft Azure Pack (WAP).</span><span class="sxs-lookup"><span data-stu-id="657e3-113">toodemonstrate this use case, imagine a workload of several instances running on Microsoft Azure Pack (WAP).</span></span> <span data-ttu-id="657e3-114">el objetivo de Hello es toosimulate esta misma carga de trabajo en Azure y calcular los costos de Hola de hacer este tipo de migración.</span><span class="sxs-lookup"><span data-stu-id="657e3-114">hello goal is toosimulate this same workload on Azure, and estimate hello costs of doing such migration.</span></span> <span data-ttu-id="657e3-115">En orden toocreate esta simulación, hay dos toobe tareas principales realizadas:</span><span class="sxs-lookup"><span data-stu-id="657e3-115">In order toocreate this simulation, there are two main tasks toobe performed:</span></span>

1. <span data-ttu-id="657e3-116">**Importación y proceso Hola servicio información recopilada de hello API RateCard.**</span><span class="sxs-lookup"><span data-stu-id="657e3-116">**Import and process hello service information collected from hello RateCard API.**</span></span> <span data-ttu-id="657e3-117">Esta tarea también se realiza en los libros de hello, donde extraer Hola de hello API RateCard es tooa transformado y publicados nuevo plan de tarifas.</span><span class="sxs-lookup"><span data-stu-id="657e3-117">This task is also performed on hello workbooks, where hello extract from hello RateCard API is transformed and published tooa new rate plan.</span></span> <span data-ttu-id="657e3-118">Este nuevo plan de tarifas se usará en hello simulaciones tooestimate Hola precios de Azure.</span><span class="sxs-lookup"><span data-stu-id="657e3-118">This new rate plan will be used on hello simulations tooestimate hello Azure prices.</span></span>
2. <span data-ttu-id="657e3-119">**Normalización de servicios de WAP y servicios de Azure para IaaS**</span><span class="sxs-lookup"><span data-stu-id="657e3-119">**Normalize WAP services and Azure services for IaaS.**</span></span> <span data-ttu-id="657e3-120">De forma predeterminada, los servicios de WAP se basan en recursos individuales (CPU, tamaño de memoria, tamaño de disco, etc.) mientras que los de Azure se basan en el tamaño de instancia (A0, A1, A2, etc.).</span><span class="sxs-lookup"><span data-stu-id="657e3-120">By default, WAP services are based on individual resources (CPU, Memory Size, Disk Size, etc.) while Azure services are based on instance size (A0, A1, A2, etc.).</span></span> <span data-ttu-id="657e3-121">Esta primera tarea pueden ser realizadas por el motor ETL de Cloud Cruiser, llama a los libros, donde estos recursos se pueden integrar en tamaños de instancias, servicios de la instancia de tooAzure análoga.</span><span class="sxs-lookup"><span data-stu-id="657e3-121">This first task can be performed by Cloud Cruiser’s ETL engine, called workbooks, where these resources can be bundled on instance sizes, analogous tooAzure instance services.</span></span>

### <a name="import-data-from-hello-ratecard-api"></a><span data-ttu-id="657e3-122">Importar datos de hello API RateCard</span><span class="sxs-lookup"><span data-stu-id="657e3-122">Import data from hello RateCard API</span></span>
<span data-ttu-id="657e3-123">Cloud Cruiser libros proporcionan una forma automatizada toocollect y proceso de la información de hello API RateCard.</span><span class="sxs-lookup"><span data-stu-id="657e3-123">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello RateCard API.</span></span>  <span data-ttu-id="657e3-124">Los libros ETL (extracción, transformación y carga) le permiten colección de hello tooconfigure, transformación y publicación de datos en base de datos de nube Cruiser Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-124">ETL (extract-transform-load) workbooks allow you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="657e3-125">Cada libro puede tener una o varias colecciones, permitiéndole toocorrelate información de orígenes diferentes toocomplement o aumentar los datos de uso de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-125">Each workbook can have one or multiple collections, allowing you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="657e3-126">Hola siguiendo dos pantallas muestran cómo toocreate un nuevo *colección* en un libro existente e importar información en hello *colección* de hello API RateCard:</span><span class="sxs-lookup"><span data-stu-id="657e3-126">hello following two screenshots show how toocreate a new *collection* in an existing workbook, and importing information into hello *collection* from hello RateCard API:</span></span>

<span data-ttu-id="657e3-127">![Ilustración 1 - Creación de una nueva colección][1]</span><span class="sxs-lookup"><span data-stu-id="657e3-127">![Figure 1 - Creating a new collection][1]</span></span>

<span data-ttu-id="657e3-128">![Figura 2: importar datos desde la nueva colección de Hola][2]</span><span class="sxs-lookup"><span data-stu-id="657e3-128">![Figure 2 - Import data from hello new collection][2]</span></span>

<span data-ttu-id="657e3-129">Después de importar datos de hello en libro hello, es posible toocreate varios pasos y procesos de transformación, toomodify y modelo Hola datos.</span><span class="sxs-lookup"><span data-stu-id="657e3-129">After importing hello data into hello workbook, it’s possible toocreate multiple steps and transformation processes, toomodify and model hello data.</span></span> <span data-ttu-id="657e3-130">En este ejemplo, puesto que sólo estamos interesados en infraestructura como-servicio (IaaS), podemos usar Hola transformación pasos tooremove las filas innecesarias o registros, relacionados con tooservices distinto de IaaS.</span><span class="sxs-lookup"><span data-stu-id="657e3-130">For this example, since we are only interested in infrastructure-as-a-Service (IaaS) we can use hello transformation steps tooremove unnecessary rows, or records, related tooservices other than IaaS.</span></span>

<span data-ttu-id="657e3-131">Hello captura de pantalla siguiente muestra los pasos de transformación de hello usan datos de hello tooprocess recopilados a través de API RateCard:</span><span class="sxs-lookup"><span data-stu-id="657e3-131">hello following screenshot shows hello transformation steps used tooprocess hello data collected from RateCard API:</span></span>

<span data-ttu-id="657e3-132">![Figura 3 - transformación pasos tooprocess recopilan datos a través de API RateCard][3]</span><span class="sxs-lookup"><span data-stu-id="657e3-132">![Figure 3 - Transformation steps tooprocess collected data from RateCard API][3]</span></span>

### <a name="defining-new-services-and-rate-plans"></a><span data-ttu-id="657e3-133">Definición de nuevos servicios y planes de tarifas</span><span class="sxs-lookup"><span data-stu-id="657e3-133">Defining New Services and Rate Plans</span></span>
<span data-ttu-id="657e3-134">Hay servicios de toodefine de distintas maneras en Cruiser en la nube.</span><span class="sxs-lookup"><span data-stu-id="657e3-134">There are different ways toodefine services on Cloud Cruiser.</span></span> <span data-ttu-id="657e3-135">Una de las opciones de hello es tooimport servicios de Hola Hola de datos de uso.</span><span class="sxs-lookup"><span data-stu-id="657e3-135">One of hello options is tooimport hello services from hello usage data.</span></span> <span data-ttu-id="657e3-136">Este método se utiliza normalmente cuando se trabaja con nubes públicas, donde servicios Hola ya están definidos por el proveedor de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-136">This method is commonly used when working with public clouds, where hello services are already defined by hello provider.</span></span>

<span data-ttu-id="657e3-137">Un Plan de tarifas es un conjunto de tipos de cambio o los precios que pueden ser servicios toodifferent aplicado, en función de las fechas de vigencia o grupo de clientes, entre otras opciones.</span><span class="sxs-lookup"><span data-stu-id="657e3-137">A Rate Plan is a set of rates or prices that can be applied toodifferent services, based on effective dates, or group of customers, among other options.</span></span> <span data-ttu-id="657e3-138">Planes de velocidad también pueden utilizarse en escenarios de "What-if", toounderstand o simulación de toocreate Cruiser de nube cómo los cambios en los servicios pueden afectar al costo total de Hola de una carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="657e3-138">Rate Plans can also be used on Cloud Cruiser toocreate simulation or “What-if” scenarios, toounderstand how changes in services can affect hello total cost of a workload.</span></span>

<span data-ttu-id="657e3-139">En este ejemplo, se usará información de servicio de Hola de nuevos servicios de hello API RateCard toodefine en Cruiser en la nube.</span><span class="sxs-lookup"><span data-stu-id="657e3-139">In this example, we will use hello service information from hello RateCard API toodefine new services in Cloud Cruiser.</span></span> <span data-ttu-id="657e3-140">Hola igual manera, podemos usar tarifas Hola asociadas toohello services toocreate un nuevo Plan de tarifas en Cruiser en la nube.</span><span class="sxs-lookup"><span data-stu-id="657e3-140">In hello same way, we can use hello rates associated toohello services toocreate a new Rate Plan on Cloud Cruiser.</span></span>

<span data-ttu-id="657e3-141">Al final de Hola de proceso de transformación de hello, es posible toocreate un nuevo paso y publicar datos de Hola de hello API RateCard como las tasas y nuevos servicios.</span><span class="sxs-lookup"><span data-stu-id="657e3-141">At hello end of hello transformation process, it is possible toocreate a new step and publish hello data from hello RateCard API as new services and rates.</span></span>

<span data-ttu-id="657e3-142">![Figura 4: publicar datos de Hola de hello API RateCard como nuevos servicios y las tasas][4]</span><span class="sxs-lookup"><span data-stu-id="657e3-142">![Figure 4 - Publishing hello data from hello RateCard API as new Services and Rates][4]</span></span>

### <a name="verify-azure-services-and-rates"></a><span data-ttu-id="657e3-143">Comprobación de servicios y tarifas de Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-143">Verify Azure Services and Rates</span></span>
<span data-ttu-id="657e3-144">Después de publicar servicios de Hola y tasas, puede comprobar lista de Hola de importados servicios de nube Cruiser *servicios* ficha:</span><span class="sxs-lookup"><span data-stu-id="657e3-144">After publishing hello services and rates, you can verify hello list of imported services in Cloud Cruiser’s *Services* tab:</span></span>

<span data-ttu-id="657e3-145">![Figura 5 - comprobar Hola nuevos servicios][5]</span><span class="sxs-lookup"><span data-stu-id="657e3-145">![Figure 5 - Verifying hello new Services][5]</span></span>

<span data-ttu-id="657e3-146">En hello *velocidad planes* ficha, puede comprobar el nuevo plan de tarifas Hola denominado "AzureSimulation" con las tasas de hello importado de hello API RateCard.</span><span class="sxs-lookup"><span data-stu-id="657e3-146">On hello *Rate Plans* tab, you can check hello new rate plan called “AzureSimulation” with hello rates imported from hello RateCard API.</span></span>

<span data-ttu-id="657e3-147">![Figura 6 - comprobar Hola nuevo Plan de tarifas y tasas de asociados][6]</span><span class="sxs-lookup"><span data-stu-id="657e3-147">![Figure 6 - Verifying hello new Rate Plan and associated rates][6]</span></span>

### <a name="normalize-wap-and-azure-services"></a><span data-ttu-id="657e3-148">Normalización de servicios de WAP y de Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-148">Normalize WAP and Azure Services</span></span>
<span data-ttu-id="657e3-149">De forma predeterminada, WAP proporciona información de uso según el uso de Hola de proceso, memoria y recursos de red.</span><span class="sxs-lookup"><span data-stu-id="657e3-149">By default, WAP provides usage information based on hello use of compute, memory, and network resources.</span></span> <span data-ttu-id="657e3-150">En Cruiser en la nube, puede definir la asignación de hello directamente en los servicios en función o medido uso de estos recursos.</span><span class="sxs-lookup"><span data-stu-id="657e3-150">In Cloud Cruiser, you can define your services based directly on hello allocation or metered usage of these resources.</span></span> <span data-ttu-id="657e3-151">Por ejemplo, puede establecer una velocidad básica para cada hora de uso de CPU o cargo Hola GB de memoria asignada tooan instancia.</span><span class="sxs-lookup"><span data-stu-id="657e3-151">For example, you can set a basic rate for each hour of CPU usage, or charge hello GB of memory allocated tooan instance.</span></span>

<span data-ttu-id="657e3-152">En este ejemplo, en los costos de toocompare de orden entre WAP y Azure, necesitamos tooaggregate Hola el uso de recursos WAP en paquetes, que, a continuación, puede ser servicios tooAzure asignada.</span><span class="sxs-lookup"><span data-stu-id="657e3-152">For this example, in order toocompare costs between WAP and Azure, we need tooaggregate hello resource usage on WAP into bundles, which can then be mapped tooAzure services.</span></span> <span data-ttu-id="657e3-153">Esta transformación se puede implementar fácilmente en los libros de hello:</span><span class="sxs-lookup"><span data-stu-id="657e3-153">This transformation can be implemented easily in hello workbooks:</span></span>

<span data-ttu-id="657e3-154">![Figura 7: transformar toonormalize servicios de datos de WAP][7]</span><span class="sxs-lookup"><span data-stu-id="657e3-154">![Figure 7 - Transforming WAP data toonormalize services][7]</span></span>

<span data-ttu-id="657e3-155">Hola último paso en el libro de hello es datos de hello toopublish en base de datos de nube Cruiser Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-155">hello last step at hello workbook is toopublish hello data into hello Cloud Cruiser database.</span></span> <span data-ttu-id="657e3-156">Durante este paso, los datos de uso de hello ahora está integrados en los servicios (que se asignan toohello servicios de Azure) y ligada cargos de toodefault tasas toocreate Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-156">During this step, hello usage data is now bundled into services (that map toohello Azure Services) and tied toodefault rates toocreate hello charges.</span></span>

<span data-ttu-id="657e3-157">Después de libro Hola acabado, puede automatizar el procesamiento de Hola de datos de hello, agregando una tarea en el programador de Hola y especificando Hola frecuencia y la hora de hello libro toorun.</span><span class="sxs-lookup"><span data-stu-id="657e3-157">After finishing hello workbook, you can automate hello processing of hello data, by adding a task on hello scheduler and specifying hello frequency and time for hello workbook toorun.</span></span>

<span data-ttu-id="657e3-158">![Ilustración 8 - Programación de libros][8]</span><span class="sxs-lookup"><span data-stu-id="657e3-158">![Figure 8 - Workbook scheduling][8]</span></span>

### <a name="create-reports-for-workload-cost-simulation-analysis"></a><span data-ttu-id="657e3-159">Creación de informes para análisis de simulación de costos de cargas de trabajo</span><span class="sxs-lookup"><span data-stu-id="657e3-159">Create Reports for Workload Cost Simulation Analysis</span></span>
<span data-ttu-id="657e3-160">Después de que se recopila el uso de Hola y cargos se cargan en la base de datos de nube Cruiser Hola, podemos aprovechar Hola visión de Cloud Cruiser módulo toocreate Hola cargas de trabajo costo simulación que se desee.</span><span class="sxs-lookup"><span data-stu-id="657e3-160">After hello usage is collected and charges are loaded into hello Cloud Cruiser database, we can leverage hello Cloud Cruiser Insights module toocreate hello workload cost simulation that we desire.</span></span>

<span data-ttu-id="657e3-161">En orden toodemonstrate este escenario, hemos creado Hola después de informe:</span><span class="sxs-lookup"><span data-stu-id="657e3-161">In order toodemonstrate this scenario, we created hello following report:</span></span>

<span data-ttu-id="657e3-162">![Comparación de costos][9]</span><span class="sxs-lookup"><span data-stu-id="657e3-162">![Cost Comparison][9]</span></span>

<span data-ttu-id="657e3-163">gráfico de Hello superior muestra una comparación de costo por servicios, comparar los precios de Hola de ejecución carga de trabajo de Hola para cada servicio específico de WAP (azul oscuro) y Azure (azul claro).</span><span class="sxs-lookup"><span data-stu-id="657e3-163">hello top graph shows a cost comparison by services, comparing hello price of running hello workload for each specific service between WAP (dark blue) and Azure (light blue).</span></span>

<span data-ttu-id="657e3-164">gráfico de la parte inferior de Hello muestra hello datos mismo pero desglosado por departamento.</span><span class="sxs-lookup"><span data-stu-id="657e3-164">hello bottom graph shows hello same data but broken down by department.</span></span> <span data-ttu-id="657e3-165">Esto muestra los costes de Hola para cada departamento toorun sus cargas de trabajo en WAP y Azure, junto con la diferencia de hello entre ellas en la barra de ahorro de hello (verde).</span><span class="sxs-lookup"><span data-stu-id="657e3-165">This shows hello costs for each department toorun their workload on WAP and Azure, along with hello difference between them in hello Savings bar (green).</span></span>

## <a name="azure-usage-api"></a><span data-ttu-id="657e3-166">API de uso de Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-166">Azure Usage API</span></span>
### <a name="introduction"></a><span data-ttu-id="657e3-167">Introducción</span><span class="sxs-lookup"><span data-stu-id="657e3-167">Introduction</span></span>
<span data-ttu-id="657e3-168">Microsoft presentó recientemente Hola API de uso de Azure, permitir a los suscriptores tooprogrammatically extracción de información de toogain de datos de uso en su consumo.</span><span class="sxs-lookup"><span data-stu-id="657e3-168">Microsoft recently introduced hello Azure Usage API, allowing subscribers tooprogrammatically pull in usage data toogain insights into their consumption.</span></span> <span data-ttu-id="657e3-169">Esto es muy bien para los clientes de Cruiser en la nube que puede aprovechar las ventajas de hello más rico conjunto de datos disponible a través de esta API.</span><span class="sxs-lookup"><span data-stu-id="657e3-169">This is great news for Cloud Cruiser customers that can take advantage of hello richer dataset available through this API.</span></span>

<span data-ttu-id="657e3-170">Cloud Cruiser puede Aproveche la integración de hello con hello API de uso de varias maneras.</span><span class="sxs-lookup"><span data-stu-id="657e3-170">Cloud Cruiser can leverage hello integration with hello Usage API in several ways.</span></span> <span data-ttu-id="657e3-171">Hola granularidad (información de uso por hora) y la información de metadatos de recursos disponible a través de hello que proporciona API Hola conjunto de datos es necesario toosupport flexible gastos o anulación modelos.</span><span class="sxs-lookup"><span data-stu-id="657e3-171">hello granularity (hourly usage information) and resource metadata information available through hello API provides hello necessary dataset toosupport flexible Showback or Chargeback models.</span></span> 

<span data-ttu-id="657e3-172">En este tutorial, presentamos un ejemplo de cómo Cloud Cruiser pueden beneficiarse de hello información sobre las API de uso.</span><span class="sxs-lookup"><span data-stu-id="657e3-172">In this tutorial, we will present one example of how Cloud Cruiser can benefit from hello Usage API information.</span></span> <span data-ttu-id="657e3-173">Más concretamente, se crea un grupo de recursos en Azure, asociar etiquetas de estructura de la cuenta de hello y describen Hola proceso de extracción y procese la información de etiqueta de hello en Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="657e3-173">More specifically, we will create a Resource Group on Azure, associate tags for hello account structure, then describe hello process of pulling and processing hello tag information into Cloud Cruiser.</span></span>

<span data-ttu-id="657e3-174">objetivo final de Hello es toobe toocreate capaz de informes como Hola sigue uno y ser capaz de tooanalyze coste y consumo basado en la estructura de cuenta de hello rellenado por etiquetas de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-174">hello final goal is toobe able toocreate reports like hello following one, and be able tooanalyze cost and consumption based on hello account structure populated by hello tags.</span></span>

<span data-ttu-id="657e3-175">![Ilustración 10 - Informe con desgloses usando etiquetas][10]</span><span class="sxs-lookup"><span data-stu-id="657e3-175">![Figure 10 - Report with breakdowns using tags][10]</span></span>

### <a name="microsoft-azure-tags"></a><span data-ttu-id="657e3-176">Etiquetas de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-176">Microsoft Azure Tags</span></span>
<span data-ttu-id="657e3-177">datos de Hello disponibles a través de hello API de uso de Azure incluyen no solo la información sobre el consumo, sino también los metadatos de recursos, incluidas las etiquetas asociadas con él.</span><span class="sxs-lookup"><span data-stu-id="657e3-177">hello data available through hello Azure Usage API includes not only consumption information, but also resource metadata including any tags associated with it.</span></span> <span data-ttu-id="657e3-178">Etiquetas proporcionan una manera sencilla de tooorganize los recursos, pero en orden toobe eficaz, debe tooensure que:</span><span class="sxs-lookup"><span data-stu-id="657e3-178">Tags provide an easy way tooorganize your resources, but in order toobe effective, you need tooensure that:</span></span>

* <span data-ttu-id="657e3-179">Las etiquetas son recursos de toohello aplicado correctamente en tiempo de aprovisionamiento</span><span class="sxs-lookup"><span data-stu-id="657e3-179">Tags are correctly applied toohello resources at provision time</span></span>
* <span data-ttu-id="657e3-180">Las etiquetas se usan correctamente en hello gastos/contracargo proceso tootie Hola uso toohello estructura de la organización cuenta.</span><span class="sxs-lookup"><span data-stu-id="657e3-180">Tags are properly used on hello Showback/Chargeback process tootie hello usage toohello organization’s account structure.</span></span>

<span data-ttu-id="657e3-181">Estos requisitos pueden ser desafiantes, especialmente cuando hay un proceso manual de aprovisionamiento de Hola o cargando lado.</span><span class="sxs-lookup"><span data-stu-id="657e3-181">Both of these requirements can be challenging, especially when there is a manual process on hello provision or charging side.</span></span> <span data-ttu-id="657e3-182">Al introducir incorrectamente, incorrectas o incluso faltan etiquetas son quejas más habituales de los clientes cuando con etiquetas y estos errores, puede tomar vida en hello está cargando lado muy difícil.</span><span class="sxs-lookup"><span data-stu-id="657e3-182">Mistyped, incorrect or even missing tags are common complaints from customers when using tags and these errors can make life on hello charging side very difficult.</span></span>

<span data-ttu-id="657e3-183">Con hello nueva API de uso de Azure, Cloud Cruiser puede extraer información de etiquetado de recursos y a través de una sofisticada herramienta ETL denominada libros, corregir estos errores de etiquetado comunes.</span><span class="sxs-lookup"><span data-stu-id="657e3-183">With hello new Azure Usage API, Cloud Cruiser can pull resource tagging information, and through a sophisticated ETL tool called workbooks, fix these common tagging errors.</span></span> <span data-ttu-id="657e3-184">Mediante la transformación mediante expresiones regulares y correlación de datos, Cruiser de nube puede identificar recursos etiquetados incorrectamente y aplicar etiquetas correctas de hello, asegurándose de asociación correcta Hola de recursos de hello con consumidor Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-184">Through transformation using regular expressions and data correlation, Cloud Cruiser can identify incorrectly tagged resources and apply hello correct tags, ensuring hello correct association of hello resources with hello consumer.</span></span>

<span data-ttu-id="657e3-185">En Hola está cargando lado Cloud Cruiser automatiza Hola gastos/contracargo proceso y pueden aprovechar Hola etiqueta información tootie Hola uso toohello consumidor adecuado (departamento, división, proyecto, etcetera).</span><span class="sxs-lookup"><span data-stu-id="657e3-185">On hello charging side, Cloud Cruiser automates hello Showback/Chargeback process, and can leverage hello tag information tootie hello usage toohello appropriate consumer (Department, Division, Project, etc.).</span></span> <span data-ttu-id="657e3-186">Esta automatización proporciona una enorme mejora y puede garantizar un proceso de cobro coherente y auditable.</span><span class="sxs-lookup"><span data-stu-id="657e3-186">This automation provides a huge improvement and can ensure a consistent and auditable charging process.</span></span>

### <a name="creating-a-resource-group-with-tags-on-microsoft-azure"></a><span data-ttu-id="657e3-187">Creación de un grupo de recursos con etiquetas en Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="657e3-187">Creating a Resource Group with tags on Microsoft Azure</span></span>
<span data-ttu-id="657e3-188">Hello primer paso en este tutorial es toocreate un grupo de recursos en hello portal de Azure, a continuación, crear nuevas etiquetas tooassociate toohello recursos.</span><span class="sxs-lookup"><span data-stu-id="657e3-188">hello first step in this tutorial is toocreate a Resource Group in hello Azure portal, then create new tags tooassociate toohello resources.</span></span> <span data-ttu-id="657e3-189">En este ejemplo, se crearán Hola siguientes etiquetas: departamento, entorno, propietario, proyecto.</span><span class="sxs-lookup"><span data-stu-id="657e3-189">For this example, we will be creating hello following tags: Department, Environment, Owner, Project.</span></span>

<span data-ttu-id="657e3-190">Hola de captura de pantalla siguiente muestra un ejemplo de que etiquetas de grupo de recursos con hello asociados.</span><span class="sxs-lookup"><span data-stu-id="657e3-190">hello screenshot below shows a sample Resource Group with hello associated tags.</span></span>

<span data-ttu-id="657e3-191">![Ilustración 11 - Grupo de recursos con etiquetas asociadas en Azure Portal][11]</span><span class="sxs-lookup"><span data-stu-id="657e3-191">![Figure 11 - Resource Group with associated tags on Azure portal][11]</span></span>

<span data-ttu-id="657e3-192">Hola siguiente paso es información de Hola de toopull de hello API de uso en Cruiser en la nube.</span><span class="sxs-lookup"><span data-stu-id="657e3-192">hello next step is toopull hello information from hello Usage API into Cloud Cruiser.</span></span> <span data-ttu-id="657e3-193">Hola API de uso actualmente proporciona respuestas en formato JSON.</span><span class="sxs-lookup"><span data-stu-id="657e3-193">hello Usage API currently provides responses in JSON format.</span></span> <span data-ttu-id="657e3-194">Este es un ejemplo de Hola los datos recuperados:</span><span class="sxs-lookup"><span data-stu-id="657e3-194">Here is a sample of hello data retrieved:</span></span>

    {
      "id": "/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXX/providers/Microsoft.Commerce/UsageAggregates/Daily_BRSDT_20150623_0000",
      "name": "Daily_BRSDT_20150623_0000",
      "type": "Microsoft.Commerce/UsageAggregate",
      "properties":
      {
        "subscriptionId": "bb678b04-0e48-4b44-XXXX-XXXXXXXXX",
        "usageStartTime": "2015-06-22T00:00:00+00:00",
        "usageEndTime": "2015-06-23T00:00:00+00:00",
        "meterName": "Compute Hours",
        "meterRegion": "",
        "meterCategory": "Virtual Machines",
        "meterSubCategory": "Standard_D1 VM (Non-Windows)",
        "unit": "Hours",
        "instanceData": "{\"Microsoft.Resources\":{\"resourceUri\":\"/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXXX/resourceGroups/DEMOUSAGEAPI/providers/Microsoft.Compute/virtualMachines/MyDockerVM\",\"location\":\"eastus\",\"tags\":{\"Department\":\"Sales\",\"Project\":\"Demo Usage API\",\"Environment\":\"Test\",\"Owner\":\"RSE\"},\"additionalInfo\":{\"ImageType\":\"Canonical\",\"ServiceType\":\"Standard_D1\"}}}",
        "meterId": "e60caf26-9ba0-413d-a422-6141f58081d6",
        "infoFields": {},
        "quantity": 8

      },
    },


### <a name="import-data-from-hello-usage-api-into-cloud-cruiser"></a><span data-ttu-id="657e3-195">Importar datos de API de uso de hello en Cloud Cruiser</span><span class="sxs-lookup"><span data-stu-id="657e3-195">Import data from hello Usage API into Cloud Cruiser</span></span>
<span data-ttu-id="657e3-196">Cloud Cruiser libros proporcionan una forma automatizada toocollect y proceso de la información de hello API de uso.</span><span class="sxs-lookup"><span data-stu-id="657e3-196">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello Usage API.</span></span> <span data-ttu-id="657e3-197">Un libro ETL (extracción, transformación y carga) le permite tooconfigure colección de hello, transformación y publicación de datos en base de datos de nube Cruiser Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-197">An ETL (extract-transform-load) workbook allows you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="657e3-198">Cada libro puede tener una o varias colecciones.</span><span class="sxs-lookup"><span data-stu-id="657e3-198">Each workbook can have one or multiple collections.</span></span> <span data-ttu-id="657e3-199">Esto le permite toocorrelate información de datos de uso de saludo de toocomplement o ampliar orígenes diferentes.</span><span class="sxs-lookup"><span data-stu-id="657e3-199">This allows you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="657e3-200">En este ejemplo, crearemos una nueva hoja en el libro de la plantilla de Azure de hello (*UsageAPI)* y establecer una nueva *colección* tooimport información de hello API de uso.</span><span class="sxs-lookup"><span data-stu-id="657e3-200">For this example, we will create a new sheet in hello Azure template workbook (*UsageAPI)* and set a new *collection* tooimport information from hello Usage API.</span></span>

<span data-ttu-id="657e3-201">![Figura 3: datos de uso de la API importados en la hoja de hello UsageAPI][12]</span><span class="sxs-lookup"><span data-stu-id="657e3-201">![Figure 3 - Usage API data imported into hello UsageAPI sheet][12]</span></span>

<span data-ttu-id="657e3-202">Observe que este libro ya tiene otro hojas tooimport servicios de Azure (*ImportServices*) y procesar la información de consumo de Hola de hello Billing API (*PublishData*).</span><span class="sxs-lookup"><span data-stu-id="657e3-202">Notice that this workbook already has other sheets tooimport services from Azure (*ImportServices*), and process hello consumption information from hello Billing API (*PublishData*).</span></span>

<span data-ttu-id="657e3-203">A continuación utilizaremos Hola Hola de toopopulate de API de uso *UsageAPI* hoja e información de hello poner en correlación con los datos de consumo de Hola de hello Billing API sobre hello *PublishData* hoja.</span><span class="sxs-lookup"><span data-stu-id="657e3-203">Next we will use hello Usage API toopopulate hello *UsageAPI* sheet, and correlate hello information with hello consumption data from hello Billing API on hello *PublishData* sheet.</span></span>

### <a name="processing-hello-tag-information-from-hello-usage-api"></a><span data-ttu-id="657e3-204">Procesar la información de etiqueta Hola de hello API de uso</span><span class="sxs-lookup"><span data-stu-id="657e3-204">Processing hello tag information from hello Usage API</span></span>
<span data-ttu-id="657e3-205">Después de importar datos de hello en libro hello, crearemos los pasos de transformación en hello *UsageAPI* hoja de información del pedido tooprocess Hola de hello API.</span><span class="sxs-lookup"><span data-stu-id="657e3-205">After importing hello data into hello workbook, we will create transformation steps in hello *UsageAPI* sheet in order tooprocess hello information from hello API.</span></span> <span data-ttu-id="657e3-206">Primer paso es toouse un Hola de tooextract de procesador "División de JSON" etiquetas de un solo campo, a continuación, crear campos para cada uno de ellos (departamento, proyecto, propietario y entorno).</span><span class="sxs-lookup"><span data-stu-id="657e3-206">First step is toouse a “JSON split” processor tooextract hello tags from a single field, then create fields for each one of them (Department, Project, Owner, and Environment).</span></span>

<span data-ttu-id="657e3-207">![Figura 4: crear nuevos campos para obtener información de etiqueta de Hola][13]</span><span class="sxs-lookup"><span data-stu-id="657e3-207">![Figure 4 - Create new fields for hello tag information][13]</span></span>

<span data-ttu-id="657e3-208">Hola aviso "Redes" servicio falta información de etiqueta de hello (cuadro amarillo), pero que podamos comprobar que es parte del programa Hola mismo grupo de recursos examinando hello *ResourceGroupName* campo.</span><span class="sxs-lookup"><span data-stu-id="657e3-208">Notice hello “Networking” service is missing hello tag information (yellow box), but we can verify that it is part of hello same Resource Group by looking at hello *ResourceGroupName* field.</span></span> <span data-ttu-id="657e3-209">Puesto que tenemos las etiquetas de Hola para hello otros recursos de este grupo de recursos, podemos usar esta Hola de tooapply de información que falta el recurso de etiquetas toothis más adelante en el proceso de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-209">Since we have hello tags for hello other resources from this Resource Group, we can use this information tooapply hello missing tags toothis resource later in hello process.</span></span>

<span data-ttu-id="657e3-210">siguiente paso Hello es toocreate una información de hello asociar la tabla búsqueda de hello etiquetas toohello *ResourceGroupName*.</span><span class="sxs-lookup"><span data-stu-id="657e3-210">hello next step is toocreate a lookup table associating hello information from hello tags toohello *ResourceGroupName*.</span></span> <span data-ttu-id="657e3-211">Esta tabla de búsqueda se usará en hello siguiente paso tooenrich Hola consumo de datos con información de etiqueta.</span><span class="sxs-lookup"><span data-stu-id="657e3-211">This lookup table will be used on hello next step tooenrich hello consumption data with tag information.</span></span>

### <a name="adding-hello-tag-information-toohello-consumption-data"></a><span data-ttu-id="657e3-212">Agregar datos de consumo de hello etiqueta información toohello</span><span class="sxs-lookup"><span data-stu-id="657e3-212">Adding hello tag information toohello consumption data</span></span>
<span data-ttu-id="657e3-213">Ahora podemos pasamos toohello *PublishData* hoja, qué procesos Hola información sobre el consumo de hello Billing API y agregar campos de hello extraídos de etiquetas de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-213">Now we can jump toohello *PublishData* sheet, which processes hello consumption information from hello Billing API, and add hello fields extracted from hello tags.</span></span> <span data-ttu-id="657e3-214">Este proceso se realiza examinando la tabla de búsqueda de hello creada en el paso anterior de hello, con hello *ResourceGroupName* como clave de Hola para búsquedas de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-214">This process is performed by looking at hello lookup table created on hello previous step, using hello *ResourceGroupName* as hello key for hello lookups.</span></span>

<span data-ttu-id="657e3-215">![Figura 5 - rellenar la estructura de la cuenta de hello con información de Hola de búsquedas de Hola][14]</span><span class="sxs-lookup"><span data-stu-id="657e3-215">![Figure 5 - Populating hello account structure with hello information from hello lookups][14]</span></span>

<span data-ttu-id="657e3-216">Tenga en cuenta que se aplicaron los campos de estructura de hello cuenta adecuada para el servicio de "Red" Hola, corregir el problema de hello con hello faltan etiquetas.</span><span class="sxs-lookup"><span data-stu-id="657e3-216">Notice that hello appropriate account structure fields for hello “Networking” service were applied, fixing hello issue with hello missing tags.</span></span> <span data-ttu-id="657e3-217">Se rellenan también campos de estructura de la cuenta de hello para los recursos que no sea el grupo de recursos de destino "Sí", en orden toodifferentiate informa de ellos en Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-217">We also populated hello account structure fields for resources other than our target Resource Group with “Other”, in order toodifferentiate them on hello reports.</span></span>

<span data-ttu-id="657e3-218">Ahora tenemos tooadd un paso toopublish Hola uso de datos.</span><span class="sxs-lookup"><span data-stu-id="657e3-218">Now we just need tooadd a step toopublish hello usage data.</span></span> <span data-ttu-id="657e3-219">Durante este paso, los tipos adecuados para cada servicio definido en el Plan de tarifas Hola será la información de uso de toohello aplicado, con cargo resultante Hola cargado en la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="657e3-219">During this step, hello appropriate rates for each service defined on our Rate Plan will be applied toohello usage information, with hello resulting charge loaded into hello database.</span></span>

<span data-ttu-id="657e3-220">Hola mejor parte es que solo tiene una vez toogo a través de este proceso.</span><span class="sxs-lookup"><span data-stu-id="657e3-220">hello best part is that you only have toogo through this process once.</span></span> <span data-ttu-id="657e3-221">Cuando se completa el libro de hello, basta con tooadd se toohello programador y se ejecutan cada hora o diariamente en hello hora programada.</span><span class="sxs-lookup"><span data-stu-id="657e3-221">When hello workbook is completed, you just need tooadd it toohello scheduler and it will run hourly or daily at hello scheduled time.</span></span> <span data-ttu-id="657e3-222">A continuación, es simplemente cuestión de crear nuevos informes o personalizar las existentes, en orden tooanalyze hello tooget significativo información sobre los datos de su uso en la nube.</span><span class="sxs-lookup"><span data-stu-id="657e3-222">Then it’s just a matter of creating new reports, or customizing existing ones, in order tooanalyze hello data tooget meaningful insights from your cloud usage.</span></span>

### <a name="next-steps"></a><span data-ttu-id="657e3-223">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="657e3-223">Next Steps</span></span>
* <span data-ttu-id="657e3-224">Para obtener instrucciones detalladas sobre la creación de Cloud Cruiser libros e informes, consulte la en línea tooCloud Cruiser [documentación](http://docs.cloudcruiser.com/) (inicio de sesión válido necesario).</span><span class="sxs-lookup"><span data-stu-id="657e3-224">For detailed instructions on creating Cloud Cruiser workbooks and reports, please refer tooCloud Cruiser’s online [documentation](http://docs.cloudcruiser.com/) (valid login required).</span></span>  <span data-ttu-id="657e3-225">Para obtener más información acerca de Cloud Cruiser, póngase en contacto con [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span><span class="sxs-lookup"><span data-stu-id="657e3-225">For more information about Cloud Cruiser, please contact [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span></span>
* <span data-ttu-id="657e3-226">Vea [obtener información sobre el consumo de recursos de Microsoft Azure](billing-usage-rate-card-overview.md) para obtener información general de uso de recursos de Azure de Hola y RateCard APIs.</span><span class="sxs-lookup"><span data-stu-id="657e3-226">See [Gain insights into your Microsoft Azure resource consumption](billing-usage-rate-card-overview.md) for an overview of hello Azure Resource Usage and RateCard APIs.</span></span>
* <span data-ttu-id="657e3-227">Extraer del repositorio hello [referencia de API de REST de facturación de Azure](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) para obtener más información sobre las API, que forman parte del conjunto de Hola de las API proporcionadas por hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="657e3-227">Check out hello [Azure Billing REST API Reference](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) for more information on both APIs, which are part of hello set of APIs provided by hello Azure Resource Manager.</span></span>
* <span data-ttu-id="657e3-228">Si desea que toodive directamente en el código de ejemplo de Hola, visite nuestros ejemplos código de API de facturación de Azure de Microsoft en [ejemplos de código de Azure](https://azure.microsoft.com/documentation/samples/?term=billing).</span><span class="sxs-lookup"><span data-stu-id="657e3-228">If you would like toodive right into hello sample code, check out our Microsoft Azure Billing API Code Samples on [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?term=billing).</span></span>

### <a name="learn-more"></a><span data-ttu-id="657e3-229">Más información</span><span class="sxs-lookup"><span data-stu-id="657e3-229">Learn More</span></span>
* <span data-ttu-id="657e3-230">Vea hello [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md) artículo toolearn más información acerca de hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="657e3-230">See hello [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md) article toolearn more about hello Azure Resource Manager.</span></span>

<!--Image references-->

[1]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Create-New-Workbook-Collection.png "Ilustración 1 - Creación de una nueva colección"
[2]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Import-Data-From-RateCard.png "Figura 2: importar datos desde la nueva colección de Hola"
[3]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transformation-Steps-Process-RateCard-Data.png "Figura 3 - transformación pasos tooprocess recopilan datos a través de API RateCard"
[4]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Publish-RateCard-Data-New-Services-Rates.png "Figura 4: publicar datos de Hola de hello API RateCard como nuevos servicios y las tasas"
[5]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing1.png "Figura 5 - comprobar Hola nuevos servicios"
[6]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing2.png "Figura 6 - comprobar Hola nuevo Plan de tarifas y tasas de asociados"
[7]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transforming-WAP-Normalize-Services.png "Figura 7: transformar toonormalize servicios de datos de WAP"
[8]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workbook-Scheduling.png "Ilustración 8 - Programación de libros"
[9]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workload-Cost-Simulation-Report.png "Figura 9 - informe de ejemplo para el escenario de comparación de costo de carga de trabajo de Hola"
[10]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/1_ReportWithTags.png "Ilustración 10 - Informe con desgloses usando etiquetas"
[11]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/2_ResourceGroupsWithTags.png "Ilustración 11 - Grupo de recursos con etiquetas asociadas en Azure Portal"
[12]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/3_ImportIntoUsageAPISheet.png "Figura 12 - los datos de uso de la API importados en hoja de hello UsageAPI"
[13]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/4_NewTagField.png "Figura 13 - crear nuevos campos para obtener información de etiqueta de Hola"
[14]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/5_PopulateAccountStructure.png "Figura 14 - rellenar la estructura de la cuenta de hello con información de Hola de búsquedas de Hola"

---
title: Consideraciones de aaaNetworking con un entorno de servicio de aplicaciones de Azure
description: "Explica el tráfico de red Hola ASE y cómo tooset NSG y UDRs con su ASE"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="2c080-103">Consideraciones de red para una instancia de App Service Environment</span><span class="sxs-lookup"><span data-stu-id="2c080-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="2c080-104">Información general</span><span class="sxs-lookup"><span data-stu-id="2c080-104">Overview</span></span> ##

 <span data-ttu-id="2c080-105">[Azure App Service Environment][Intro] es una implementación de Azure App Service en una subred de Azure Virtual Network (VNet).</span><span class="sxs-lookup"><span data-stu-id="2c080-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="2c080-106">Hay dos tipos de implementación de una instancia de App Service Environment (ASE):</span><span class="sxs-lookup"><span data-stu-id="2c080-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="2c080-107">**ASE externo**: expone Hola aplicaciones ASE hospedado en una dirección IP accesible desde internet.</span><span class="sxs-lookup"><span data-stu-id="2c080-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="2c080-108">Para más información, consulte [Creación de una instancia externa de App Service Environment][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="2c080-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="2c080-109">**ILB ASE**: expone Hola aplicaciones ASE hospedado en una dirección IP dentro de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="2c080-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="2c080-110">extremo interno de Hello es un equilibrador de carga interno (ILB), que es la razón por la que se denomina una ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="2c080-111">Para más información, consulte [Creación y uso de un ASE de ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="2c080-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="2c080-112">Ahora hay dos versiones de App Service Environment: ASEv1 y ASEv2.</span><span class="sxs-lookup"><span data-stu-id="2c080-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="2c080-113">Para obtener información sobre ASEv1, consulte [Introducción tooApp v1 de entorno del servicio][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="2c080-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="2c080-114">Una instancia de ASEv1 se puede implementar en una red virtual clásica o en una de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="2c080-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="2c080-115">En el caso de ASEv2, la implementación solo se puede realizar en una red virtual de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="2c080-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="2c080-116">Todas las llamadas desde una ASE que vaya toohello internet deje Hola red virtual a través de una VIP asignada para hello ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="2c080-117">Hola IP pública de esta dirección VIP es, a continuación, IP de origen de Hola para todas las llamadas de hello ASE que vaya toohello internet.</span><span class="sxs-lookup"><span data-stu-id="2c080-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="2c080-118">Si Hola aplicaciones en su ASE realiza llamadas tooresources en la red virtual o a través de una VPN, IP de origen de hello es uno de Hola direcciones IP de subred Hola utilizado por su ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="2c080-119">Porque hello ASE es dentro de la red virtual de hello, también puede tener acceso a los recursos dentro de hello red virtual sin ninguna configuración adicional.</span><span class="sxs-lookup"><span data-stu-id="2c080-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="2c080-120">Si hello red virtual es la red local de tooyour conectado, aplicaciones en su ASE también tienen acceso tooresources no existe.</span><span class="sxs-lookup"><span data-stu-id="2c080-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="2c080-121">No es necesario tooconfigure Hola ASE o la aplicación cualquier aún más.</span><span class="sxs-lookup"><span data-stu-id="2c080-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![ASE externo][1] 

<span data-ttu-id="2c080-123">Si tienes un ASE externo, VIP pública hello también es que las aplicaciones de ASE resuelvan toofor de punto de conexión de hello:</span><span class="sxs-lookup"><span data-stu-id="2c080-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="2c080-124">HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="2c080-124">HTTP/S.</span></span> 
* <span data-ttu-id="2c080-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="2c080-125">FTP/S.</span></span> 
* <span data-ttu-id="2c080-126">Implementación web.</span><span class="sxs-lookup"><span data-stu-id="2c080-126">Web deployment.</span></span>
* <span data-ttu-id="2c080-127">Depuración remota.</span><span class="sxs-lookup"><span data-stu-id="2c080-127">Remote debugging.</span></span>

![ASE de ILB][2]

<span data-ttu-id="2c080-129">Si tiene una ASE de ILB, dirección IP de Hola de hello ILB es el punto de conexión de Hola para HTTP/S, FTP/S, implementación web y depuración remota.</span><span class="sxs-lookup"><span data-stu-id="2c080-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="2c080-130">puertos de acceso de aplicación normal de Hello son:</span><span class="sxs-lookup"><span data-stu-id="2c080-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="2c080-131">Uso</span><span class="sxs-lookup"><span data-stu-id="2c080-131">Use</span></span> | <span data-ttu-id="2c080-132">De</span><span class="sxs-lookup"><span data-stu-id="2c080-132">From</span></span> | <span data-ttu-id="2c080-133">demasiado</span><span class="sxs-lookup"><span data-stu-id="2c080-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="2c080-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="2c080-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="2c080-135">Configurable por el usuario</span><span class="sxs-lookup"><span data-stu-id="2c080-135">User configurable</span></span> |  <span data-ttu-id="2c080-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="2c080-136">80, 443</span></span> |
|  <span data-ttu-id="2c080-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="2c080-137">FTP/FTPS</span></span>    | <span data-ttu-id="2c080-138">Configurable por el usuario</span><span class="sxs-lookup"><span data-stu-id="2c080-138">User configurable</span></span> |  <span data-ttu-id="2c080-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="2c080-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="2c080-140">Depuración remota en Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2c080-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="2c080-141">Configurable por el usuario</span><span class="sxs-lookup"><span data-stu-id="2c080-141">User configurable</span></span> |  <span data-ttu-id="2c080-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="2c080-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="2c080-143">Es así tanto si está en un ASE externo como en un ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="2c080-144">Si se encuentra en un ASE externo, se alcanza los puertos de VIP pública Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="2c080-145">Si se encuentra en un ASE ILB, alcanza los puertos de hello ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="2c080-146">Si bloquea el puerto 443, puede haber un efecto sobre algunas características que se exponen en el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="2c080-147">Para más información, consulte [Dependencias del portal](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="2c080-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="2c080-148">Dependencias de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-148">ASE dependencies</span></span> ##

<span data-ttu-id="2c080-149">Un dependencia de acceso de entrada de ASE es:</span><span class="sxs-lookup"><span data-stu-id="2c080-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="2c080-150">Uso</span><span class="sxs-lookup"><span data-stu-id="2c080-150">Use</span></span> | <span data-ttu-id="2c080-151">De</span><span class="sxs-lookup"><span data-stu-id="2c080-151">From</span></span> | <span data-ttu-id="2c080-152">demasiado</span><span class="sxs-lookup"><span data-stu-id="2c080-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="2c080-153">Administración</span><span class="sxs-lookup"><span data-stu-id="2c080-153">Management</span></span> | <span data-ttu-id="2c080-154">Direcciones de administración de App Service</span><span class="sxs-lookup"><span data-stu-id="2c080-154">App Service management addresses</span></span> | <span data-ttu-id="2c080-155">Subred de ASE: 454, 455</span><span class="sxs-lookup"><span data-stu-id="2c080-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="2c080-156">Comunicación interna ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-156">ASE internal communication</span></span> | <span data-ttu-id="2c080-157">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-157">ASE subnet: All ports</span></span> | <span data-ttu-id="2c080-158">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="2c080-159">Permitir entrada de Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="2c080-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="2c080-160">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="2c080-160">Azure load balancer</span></span> | <span data-ttu-id="2c080-161">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="2c080-162">Direcciones IP asignadas a las aplicaciones</span><span class="sxs-lookup"><span data-stu-id="2c080-162">App assigned IP addresses</span></span> | <span data-ttu-id="2c080-163">Direcciones asignadas a las aplicaciones</span><span class="sxs-lookup"><span data-stu-id="2c080-163">App assigned addresses</span></span> | <span data-ttu-id="2c080-164">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-164">ASE subnet: All ports</span></span>

<span data-ttu-id="2c080-165">Hello tráfico entrante proporciona comando y control de ASE de hello en la supervisión de toosystem de adición.</span><span class="sxs-lookup"><span data-stu-id="2c080-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="2c080-166">direcciones IP de origen de Hola para este tráfico se enumeran en hello [ASE administración direcciones] [ ASEManagement] documento.</span><span class="sxs-lookup"><span data-stu-id="2c080-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="2c080-167">configuración de seguridad de red de Hello necesita acceso de tooallow de todas las direcciones IP en los puertos 454 y 455.</span><span class="sxs-lookup"><span data-stu-id="2c080-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="2c080-168">Dentro de la subred de hello ASE hay muchos puertos utilizan para la comunicación de componente interno y puede cambiar.</span><span class="sxs-lookup"><span data-stu-id="2c080-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="2c080-169">Para ello, todos los puertos de hello en hello ASE subred toobe accesible desde la subred de ASE Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="2c080-170">Para la comunicación de hello entre equilibrador de carga de Azure de Hola y puertos mínimos de hello ASE subred Hola ese toobe necesidad de abrir son 454 y 455, 16001.</span><span class="sxs-lookup"><span data-stu-id="2c080-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="2c080-171">puerto 16001 Hola se utiliza para mantener activa tráfico entre equilibrador de carga de Hola y Hola ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="2c080-172">Si utilizas una ASE de ILB, a continuación, se puede bloquear el tráfico hacia abajo toojust Hola 454, 455, 16001 puertos.</span><span class="sxs-lookup"><span data-stu-id="2c080-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="2c080-173">Si usas un ASE externo debe tootake en puertos de acceso de cuenta Hola aplicación normal.</span><span class="sxs-lookup"><span data-stu-id="2c080-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="2c080-174">Si se utilizan direcciones de la aplicación asignada necesita tooopen se tooall puertos.</span><span class="sxs-lookup"><span data-stu-id="2c080-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="2c080-175">Cuando se asigna una dirección tooa de aplicación específica, equilibrador de carga de hello usará los puertos que no se conocen de antemano toosend HTTP y HTTPS tráfico toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="2c080-176">Si se utilizan direcciones IP de aplicación asignada debe tooallow tráfico de direcciones IP asignan subred de tooyour aplicaciones toohello ASE de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="2c080-177">Para el acceso de salida, un ASE depende de varios sistemas externos.</span><span class="sxs-lookup"><span data-stu-id="2c080-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="2c080-178">Esas dependencias del sistema se definen con nombres DNS y no asignan tooa un conjunto fijo de direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="2c080-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="2c080-179">Por lo tanto, Hola ASE necesita acceso de salida de hello ASE subred tooall direcciones IP externas en una variedad de puertos.</span><span class="sxs-lookup"><span data-stu-id="2c080-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="2c080-180">Un ASE tiene Hola siguiendo las dependencias salientes:</span><span class="sxs-lookup"><span data-stu-id="2c080-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="2c080-181">Uso</span><span class="sxs-lookup"><span data-stu-id="2c080-181">Use</span></span> | <span data-ttu-id="2c080-182">De</span><span class="sxs-lookup"><span data-stu-id="2c080-182">From</span></span> | <span data-ttu-id="2c080-183">demasiado</span><span class="sxs-lookup"><span data-stu-id="2c080-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="2c080-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="2c080-184">Azure Storage</span></span> | <span data-ttu-id="2c080-185">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-185">ASE subnet</span></span> | <span data-ttu-id="2c080-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 se necesita solo para ASEv1).</span><span class="sxs-lookup"><span data-stu-id="2c080-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="2c080-187">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="2c080-187">Azure SQL Database</span></span> | <span data-ttu-id="2c080-188">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-188">ASE subnet</span></span> | <span data-ttu-id="2c080-189">database.windows.net: 1433, 11000-11999, 14000-14999 (Para más información, consulte [Uso de los puertos de SQL Database V12](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md)).</span><span class="sxs-lookup"><span data-stu-id="2c080-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="2c080-190">Administración de Azure</span><span class="sxs-lookup"><span data-stu-id="2c080-190">Azure management</span></span> | <span data-ttu-id="2c080-191">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-191">ASE subnet</span></span> | <span data-ttu-id="2c080-192">management.core.windows.net, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="2c080-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="2c080-193">Comprobación de certificado SSL</span><span class="sxs-lookup"><span data-stu-id="2c080-193">SSL certificate verification</span></span> |  <span data-ttu-id="2c080-194">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-194">ASE subnet</span></span>            |  <span data-ttu-id="2c080-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="2c080-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="2c080-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="2c080-196">Azure Active Directory</span></span>        | <span data-ttu-id="2c080-197">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-197">ASE subnet</span></span>            |  <span data-ttu-id="2c080-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="2c080-198">Internet: 443</span></span>
| <span data-ttu-id="2c080-199">Administración de App Service</span><span class="sxs-lookup"><span data-stu-id="2c080-199">App Service management</span></span>        | <span data-ttu-id="2c080-200">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-200">ASE subnet</span></span>            |  <span data-ttu-id="2c080-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="2c080-201">Internet: 443</span></span>
| <span data-ttu-id="2c080-202">DNS de Azure</span><span class="sxs-lookup"><span data-stu-id="2c080-202">Azure DNS</span></span>                     | <span data-ttu-id="2c080-203">Subred de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-203">ASE subnet</span></span>            |  <span data-ttu-id="2c080-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="2c080-204">Internet: 53</span></span>
| <span data-ttu-id="2c080-205">Comunicación interna ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-205">ASE internal communication</span></span>    | <span data-ttu-id="2c080-206">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="2c080-207">Subred de ASE: todos los puertos</span><span class="sxs-lookup"><span data-stu-id="2c080-207">ASE subnet: All ports</span></span>

<span data-ttu-id="2c080-208">Si Hola ASE pierde el acceso a las dependencias de toothese, deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="2c080-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="2c080-209">Cuando esto ocurre tiempo suficiente, Hola ASE se suspende.</span><span class="sxs-lookup"><span data-stu-id="2c080-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="2c080-210">DNS del cliente</span><span class="sxs-lookup"><span data-stu-id="2c080-210">Customer DNS</span></span> ###

<span data-ttu-id="2c080-211">Si hello red virtual esté configurada con un servidor DNS definido por el cliente, las cargas de trabajo de inquilino de hello utilizan.</span><span class="sxs-lookup"><span data-stu-id="2c080-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="2c080-212">Hola ASE sigue necesitando toocommunicate con DNS de Azure para fines de administración.</span><span class="sxs-lookup"><span data-stu-id="2c080-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="2c080-213">Si hello red virtual está configurado con un cliente DNS en Hola otro lado de una VPN, servidor DNS de hello debe ser accesible desde la subred de Hola que contiene ASE Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="2c080-214">Dependencias del portal</span><span class="sxs-lookup"><span data-stu-id="2c080-214">Portal dependencies</span></span> ##

<span data-ttu-id="2c080-215">En dependencias funcionales toohello ASE de adición, hay algunos elementos adicionales relacionados toohello portal experiencia.</span><span class="sxs-lookup"><span data-stu-id="2c080-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="2c080-216">Algunas de las capacidades de Hola Hola portal de Azure dependen de acceso directo too_SCM site_.</span><span class="sxs-lookup"><span data-stu-id="2c080-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="2c080-217">Para cada aplicación en Azure App Service, hay dos direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="2c080-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="2c080-218">la primera dirección URL de Hello es tooaccess la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2c080-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="2c080-219">dirección URL del segundo Hello es sitio SCM hello tooaccess, que también se denomina hello _consola Kudu_.</span><span class="sxs-lookup"><span data-stu-id="2c080-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="2c080-220">Características que usan el sitio SCM Hola incluyen:</span><span class="sxs-lookup"><span data-stu-id="2c080-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="2c080-221">Trabajos web</span><span class="sxs-lookup"><span data-stu-id="2c080-221">Web jobs</span></span>
-   <span data-ttu-id="2c080-222">Functions</span><span class="sxs-lookup"><span data-stu-id="2c080-222">Functions</span></span>
-   <span data-ttu-id="2c080-223">Secuencias de registro</span><span class="sxs-lookup"><span data-stu-id="2c080-223">Log streaming</span></span>
-   <span data-ttu-id="2c080-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="2c080-224">Kudu</span></span>
-   <span data-ttu-id="2c080-225">Extensiones</span><span class="sxs-lookup"><span data-stu-id="2c080-225">Extensions</span></span>
-   <span data-ttu-id="2c080-226">Explorador de procesos</span><span class="sxs-lookup"><span data-stu-id="2c080-226">Process Explorer</span></span>
-   <span data-ttu-id="2c080-227">Consola</span><span class="sxs-lookup"><span data-stu-id="2c080-227">Console</span></span>

<span data-ttu-id="2c080-228">Cuando se usa una ASE de ILB, sitio SCM de hello no es accesible desde fuera de hello red virtual de internet.</span><span class="sxs-lookup"><span data-stu-id="2c080-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="2c080-229">Cuando la aplicación se hospeda en un ASE ILB, algunas funciones no funcionará desde el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="2c080-230">Muchas de estas capacidades que dependen de sitio SCM hello también están disponibles directamente en la consola de Kudu Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="2c080-231">Puede conectarse tooit directamente en lugar de usar el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="2c080-232">Si la aplicación se hospeda en un ASE ILB, use la publicación toosign de credenciales en.</span><span class="sxs-lookup"><span data-stu-id="2c080-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="2c080-233">Hola URL tooaccess Hola SCM sitio de una aplicación hospedada en un ASE ILB tiene Hola siguiendo el formato:</span><span class="sxs-lookup"><span data-stu-id="2c080-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="2c080-234">Si su ASE ILB es el nombre de dominio de hello *contoso.net* y el nombre de la aplicación es *testapp*, aplicación hello se alcanza a *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="2c080-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="2c080-235">sitio SCM Hola que lo acompaña se alcanza a *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="2c080-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="2c080-236">Trabajos web y de funciones</span><span class="sxs-lookup"><span data-stu-id="2c080-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="2c080-237">Funciones y Web trabajos dependen de sitio SCM Hola pero se admiten para su uso en el portal de hello, incluso si las aplicaciones en un ASE ILB, siempre y cuando el explorador puede llegar a sitio de hello SCM.</span><span class="sxs-lookup"><span data-stu-id="2c080-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="2c080-238">Si está utilizando un certificado autofirmado con su ASE ILB, será necesario tooenable su tootrust de explorador de certificados.</span><span class="sxs-lookup"><span data-stu-id="2c080-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="2c080-239">Para Internet Explorer y borde que significa que el certificado de hello tiene toobe de confianza del equipo de hello almacenar.</span><span class="sxs-lookup"><span data-stu-id="2c080-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="2c080-240">Si usas Chrome, a continuación, significa que acepta certificados de hello en el Explorador de hello anteriormente pulsando supuestamente sitio scm de hello directamente.</span><span class="sxs-lookup"><span data-stu-id="2c080-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="2c080-241">Hola mejor solución es toouse un certificado comercial que se encuentra en la cadena del explorador de Hola de confianza.</span><span class="sxs-lookup"><span data-stu-id="2c080-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="2c080-242">Direcciones IP de ASE</span><span class="sxs-lookup"><span data-stu-id="2c080-242">ASE IP addresses</span></span> ##

<span data-ttu-id="2c080-243">Un ASE tiene unos toobe de direcciones IP que tenga en cuenta.</span><span class="sxs-lookup"><span data-stu-id="2c080-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="2c080-244">Son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="2c080-244">They are:</span></span>

- <span data-ttu-id="2c080-245">**Dirección IP pública de entrada**: se usa para el tráfico de la aplicación en un ASE externo y para el tráfico de administración tanto en un ASE externo como en un ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="2c080-246">**IP pública saliente**: usar como Hola "de" IP para las conexiones salientes de hello ASE ese Hola deje de red virtual, que no se enruta hacia abajo una VPN.</span><span class="sxs-lookup"><span data-stu-id="2c080-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="2c080-247">**Dirección IP del ILB:**: si usa una ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="2c080-248">**Direcciones SSL basadas en IP asignadas a la aplicación**: solo son posibles con un ASE externo y cuando hay configurada una SSL basada en IP.</span><span class="sxs-lookup"><span data-stu-id="2c080-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="2c080-249">Todas estas direcciones IP son fácilmente visibles en un ASEv2 Hola portal de Azure de hello ASE interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="2c080-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="2c080-250">Si tiene una ASE de ILB, se muestra hello IP para hello ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![Direcciones IP][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="2c080-252">Direcciones IP asignadas a la aplicación</span><span class="sxs-lookup"><span data-stu-id="2c080-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="2c080-253">Con un ASE externo, puede asignar direcciones IP tooindividual aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="2c080-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="2c080-254">No puede hacer eso con un ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="2c080-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="2c080-255">Para obtener más información acerca de cómo tooconfigure su aplicación toohave su propia dirección IP, consulte [enlazar una existente personalizado SSL certificado tooAzure aplicaciones web](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="2c080-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="2c080-256">Cuando una aplicación tiene su propia dirección SSL basado en IP, Hola ASE reserva de dirección IP toothat de dos puertos toomap.</span><span class="sxs-lookup"><span data-stu-id="2c080-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="2c080-257">Un puerto es para el tráfico HTTP y hello otro puerto es para HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2c080-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="2c080-258">Estos puertos se enumeran en hello ASE interfaz de usuario en la sección de direcciones IP de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="2c080-259">Tráfico debe ser capaz de tooreach esos puertos de VIP de Hola o aplicaciones de hello son inaccesibles.</span><span class="sxs-lookup"><span data-stu-id="2c080-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="2c080-260">Este requisito es importante tooremember al configurar grupos de seguridad de red (NSG).</span><span class="sxs-lookup"><span data-stu-id="2c080-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="2c080-261">Grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="2c080-261">Network Security Groups</span></span> ##

<span data-ttu-id="2c080-262">[Grupos de seguridad de red] [ NSGs] proporcionan acceso de red de hello capacidad toocontrol dentro de una red virtual.</span><span class="sxs-lookup"><span data-stu-id="2c080-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="2c080-263">Si se usa el portal de hello, hay un modo implícito deny de regla en hello menor prioridad toodeny todo.</span><span class="sxs-lookup"><span data-stu-id="2c080-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="2c080-264">Lo que crea son las reglas de permiso.</span><span class="sxs-lookup"><span data-stu-id="2c080-264">What you build are your allow rules.</span></span>

<span data-ttu-id="2c080-265">En un ASE, no tienes acceso toohello máquinas virtuales que usan toohost Hola ASE propio.</span><span class="sxs-lookup"><span data-stu-id="2c080-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="2c080-266">Están en una suscripción administrada por Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2c080-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="2c080-267">Si desea que toorestrict acceso toohello aplicaciones en hello ASE, establezca los NSG de subred de ASE Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="2c080-268">Si lo hace, preste atención cuidado las dependencias de ASE toohello.</span><span class="sxs-lookup"><span data-stu-id="2c080-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="2c080-269">Si se bloquea todas las dependencias, Hola ASE deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="2c080-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="2c080-270">Los NSG pueden configurarse a través del portal de Azure de Hola o a través de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2c080-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="2c080-271">información de Hello aquí muestra hello portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="2c080-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="2c080-272">Puede crear y administrar los NSG en el portal de Hola como un recurso de nivel superior bajo **red**.</span><span class="sxs-lookup"><span data-stu-id="2c080-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="2c080-273">Cuando hello se tienen requisitos de entrada y salidos en la cuenta, hello NSG debe tener un aspecto similar NSG toohello se muestra en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="2c080-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="2c080-274">es el intervalo de direcciones de red virtual de Hello _192.168.250.0/16_, y es Hola subred ASE hello en _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="2c080-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="2c080-275">se muestran los requisitos de entrada primero dos de Hola para hello ASE toofunction princip Hola de lista de hello en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="2c080-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="2c080-276">Permiten la administración ASE y permitir Hola ASE toocommunicate consigo misma.</span><span class="sxs-lookup"><span data-stu-id="2c080-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="2c080-277">Hello las demás entradas son todos los inquilinos configurable y pueden administrar aplicaciones de toohello hospedadas en ASE de acceso de red.</span><span class="sxs-lookup"><span data-stu-id="2c080-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Reglas de seguridad de entrada][4]

<span data-ttu-id="2c080-279">Una regla predeterminada permite Hola direcciones IP de subred de hello red virtual tootalk toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="2c080-280">Otra regla predeterminada permite equilibrador de carga de hello, también conocido como VIP pública hello, toocommunicate con hello ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="2c080-281">Seleccione las reglas predeterminadas de Hola de toosee, **reglas predeterminadas** toohello siguiente **agregar** icono.</span><span class="sxs-lookup"><span data-stu-id="2c080-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="2c080-282">Si coloca una instrucción deny de todo lo demás regla después de hello NSG reglas se muestra, se evita que el tráfico entre la VIP de Hola y Hola ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="2c080-283">tooprevent el tráfico que llegue desde dentro de Hola de red virtual, agregue su propios tooallow regla entrante.</span><span class="sxs-lookup"><span data-stu-id="2c080-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="2c080-284">Usar un tooAzureLoadBalancer igual de origen con un destino de **cualquier** y un intervalo de puertos de  **\*** .</span><span class="sxs-lookup"><span data-stu-id="2c080-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="2c080-285">Como regla NSG hello es toohello aplicado ASE subred, no es necesario toobe específica en el destino de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="2c080-286">Si asigna una aplicación de tooyour de dirección IP, asegúrese de que mantener Hola puertos abiertos.</span><span class="sxs-lookup"><span data-stu-id="2c080-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="2c080-287">seleccionar puertos de hello toosee, **entono** > **direcciones IP**.</span><span class="sxs-lookup"><span data-stu-id="2c080-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="2c080-288">Se necesitan todos los elementos de Hola se muestra en hello siguiendo las reglas de salida, excepto el último elemento de saludo.</span><span class="sxs-lookup"><span data-stu-id="2c080-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="2c080-289">Le permiten dependencias ASE de toohello de acceso de red que se indicaron anteriormente en este artículo.</span><span class="sxs-lookup"><span data-stu-id="2c080-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="2c080-290">Si bloquea alguna de ellas, el ASE deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="2c080-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="2c080-291">último elemento de lista de Hola de Hello permite su toocommunicate ASE con otros recursos de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="2c080-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Reglas de seguridad de entrada][5]

<span data-ttu-id="2c080-293">Una vez definidos sus NSG, asignarlos subred toohello que su ASE está activado.</span><span class="sxs-lookup"><span data-stu-id="2c080-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="2c080-294">Si no recuerdas Hola ASE VNet o subred, puede ver desde el portal de administración de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="2c080-295">tooassign Hola subred tooyour NSG, vaya toohello subred interfaz de usuario y seleccione hello NSG.</span><span class="sxs-lookup"><span data-stu-id="2c080-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="2c080-296">Rutas</span><span class="sxs-lookup"><span data-stu-id="2c080-296">Routes</span></span> ##

<span data-ttu-id="2c080-297">Las rutas presentan problemas sobre todo cuando la red virtual se configura con Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2c080-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="2c080-298">Hay tres tipos de rutas en una red virtual:</span><span class="sxs-lookup"><span data-stu-id="2c080-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="2c080-299">Rutas del sistema</span><span class="sxs-lookup"><span data-stu-id="2c080-299">System routes</span></span>
-   <span data-ttu-id="2c080-300">Rutas BGP</span><span class="sxs-lookup"><span data-stu-id="2c080-300">BGP routes</span></span>
-   <span data-ttu-id="2c080-301">Rutas definidas por el usuario (UDR)</span><span class="sxs-lookup"><span data-stu-id="2c080-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="2c080-302">Las rutas BGP reemplazan a las rutas del sistema.</span><span class="sxs-lookup"><span data-stu-id="2c080-302">BGP routes override system routes.</span></span> <span data-ttu-id="2c080-303">Las UDR reemplazan a las rutas BGP.</span><span class="sxs-lookup"><span data-stu-id="2c080-303">UDRs override BGP routes.</span></span> <span data-ttu-id="2c080-304">Para más información acerca de las rutas en las redes virtuales de Azure, consulte la [Introducción a las rutas definidas por el usuario][UDRs].</span><span class="sxs-lookup"><span data-stu-id="2c080-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="2c080-305">base de datos de SQL Azure de Hola Hola ASE utilizado por sistema de hello toomanage tiene un firewall.</span><span class="sxs-lookup"><span data-stu-id="2c080-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="2c080-306">Requiere comunicación toooriginate de hello VIP pública ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="2c080-307">Si se envían hacia abajo Hola conexión ExpressRoute y otra dirección IP, se denegarán las conexiones toohello base de datos SQL ASE Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="2c080-308">Si se envían las solicitudes de administración de respuestas tooincoming hacia abajo hello ExpressRoute, dirección de respuesta de hello es diferente de destino original Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="2c080-309">Esta falta de coincidencia interrumpe la comunicación TCP Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="2c080-310">Para su toowork ASE mientras la red virtual se configura con una ExpressRoute toodo lo más fácil de hello es:</span><span class="sxs-lookup"><span data-stu-id="2c080-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="2c080-311">Configurar ExpressRoute tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="2c080-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="2c080-312">De forma predeterminada, obliga a dirigir todo el tráfico saliente tráfico local.</span><span class="sxs-lookup"><span data-stu-id="2c080-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="2c080-313">Crear un UDR.</span><span class="sxs-lookup"><span data-stu-id="2c080-313">Create a UDR.</span></span> <span data-ttu-id="2c080-314">Aplicar toohello subred que contiene Hola ASE con un prefijo de dirección de _0.0.0.0/0_ y tipo de un próximo salto _Internet_.</span><span class="sxs-lookup"><span data-stu-id="2c080-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="2c080-315">Si realiza estos dos cambios, tráfico destinado de internet que se origina en la subred de ASE hello no forzado inactivo ExpressRoute de Hola y Hola ASE funciona.</span><span class="sxs-lookup"><span data-stu-id="2c080-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="2c080-316">rutas de Hello definidas en un UDR deben ser lo suficientemente específica como tootake prioridad sobre las rutas anunciadas por la configuración de ExpressRoute de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="2c080-317">Hello en el ejemplo anterior se usa el intervalo de direcciones de hello amplia 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="2c080-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="2c080-318">Puede reemplazarse accidentalmente por los anuncios de ruta con intervalos de direcciones más específicos.</span><span class="sxs-lookup"><span data-stu-id="2c080-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="2c080-319">ASEs no son compatibles con las configuraciones de ExpressRoute que entre-anuncian rutas de hello emparejamiento público toohello emparejamiento privado ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="2c080-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="2c080-320">Las configuraciones de ExpressRoute con el emparejamiento público configurado reciben anuncios de ruta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2c080-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="2c080-321">los anuncios de Hola contienen un gran conjunto de intervalos de direcciones IP de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="2c080-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="2c080-322">Si los intervalos de direcciones de hello entre anunciados en ruta de acceso privada emparejamiento hello, todos los paquetes de red saliente de la subred de Hola de ASE son infraestructura de red local del cliente de túnel tooa force.</span><span class="sxs-lookup"><span data-stu-id="2c080-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="2c080-323">Actualmente, este flujo de red no es compatible con las instancias de ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="2c080-324">Un problema de toothis de solución es rutas de toostop entre anuncios de Hola emparejamiento público toohello emparejamiento privado ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="2c080-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="2c080-325">toocreate un UDR, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="2c080-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="2c080-326">Vaya toohello portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="2c080-326">Go toohello Azure portal.</span></span> <span data-ttu-id="2c080-327">Seleccione **Redes** > **Tablas de rutas**.</span><span class="sxs-lookup"><span data-stu-id="2c080-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="2c080-328">Crear una nueva tabla de rutas en hello misma región que la red virtual.</span><span class="sxs-lookup"><span data-stu-id="2c080-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="2c080-329">En la interfaz de usuario de la tabla de rutas, seleccione **Rutas** > **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="2c080-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="2c080-330">Conjunto hello **tipo de salto siguiente** demasiado**Internet** hello y **prefijo de dirección** demasiado**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="2c080-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="2c080-331">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="2c080-331">Select **Save**.</span></span>

    <span data-ttu-id="2c080-332">A continuación, verá algo parecido a Hola siguiente:</span><span class="sxs-lookup"><span data-stu-id="2c080-332">You then see something like hello following:</span></span>

    ![Rutas funcionales][6]

5. <span data-ttu-id="2c080-334">Después de crear la nueva tabla de rutas hello, vaya toohello subred que contiene su ASE.</span><span class="sxs-lookup"><span data-stu-id="2c080-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="2c080-335">Seleccione la tabla de rutas de lista de hello en el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="2c080-336">Después de guardar los cambios de hello, a continuación, debería ver Hola NSG y rutas que se anotan con la subred.</span><span class="sxs-lookup"><span data-stu-id="2c080-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![NSG y rutas][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="2c080-338">Implementación en redes virtuales de Azure existentes que están integradas con ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="2c080-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="2c080-339">toodeploy su ASE en una red virtual que se integra con ExpressRoute, preconfigurar subred Hola donde desea ASE Hola implementado.</span><span class="sxs-lookup"><span data-stu-id="2c080-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="2c080-340">A continuación, utilice un toodeploy de plantilla de administrador de recursos se.</span><span class="sxs-lookup"><span data-stu-id="2c080-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="2c080-341">toocreate un ASE en una red virtual que ya tiene configurado de ExpressRoute:</span><span class="sxs-lookup"><span data-stu-id="2c080-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="2c080-342">Crear un Hola de toohost ASE de subred.</span><span class="sxs-lookup"><span data-stu-id="2c080-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2c080-343">Nada más puede estar en la subred Hola pero ASE Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="2c080-344">Ser toochoose seguro de un espacio de direcciones que permite el crecimiento futuro.</span><span class="sxs-lookup"><span data-stu-id="2c080-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="2c080-345">No puede cambiar esta configuración posteriormente.</span><span class="sxs-lookup"><span data-stu-id="2c080-345">You can't change this setting later.</span></span> <span data-ttu-id="2c080-346">Se recomienda un tamaño de `/25` con ciento veintiocho direcciones.</span><span class="sxs-lookup"><span data-stu-id="2c080-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="2c080-347">Cree UDRs (por ejemplo, tablas de rutas) como se describió anteriormente y establezca en la subred de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c080-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="2c080-348">Crear Hola ASE mediante una plantilla de administrador de recursos, como se describe en [crear un ASE mediante una plantilla de administrador de recursos][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="2c080-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md

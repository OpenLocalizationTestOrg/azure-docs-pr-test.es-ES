---
title: "Creación de una instancia de Azure App Service Environment mediante plantillas de Resource Manager"
description: "Explica cómo crear una instancia externa o con un ILB de Azure App Service Environment mediante una plantilla de Resource Manager"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 6eb7d43d-e820-4a47-818c-80ff7d3b6f8e
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.openlocfilehash: e6b21086488352c1da914b4656ad1d216fd6de85
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="create-an-ase-by-using-an-azure-resource-manager-template"></a><span data-ttu-id="67458-103">Creación de una instancia de ASE mediante el uso de una plantilla de Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="67458-103">Create an ASE by using an Azure Resource Manager template</span></span>

## <a name="overview"></a><span data-ttu-id="67458-104">Información general</span><span class="sxs-lookup"><span data-stu-id="67458-104">Overview</span></span>
<span data-ttu-id="67458-105">Las instancias de Azure App Service Environment (ASE) pueden crearse con un punto de conexión accesible de Internet o un punto de conexión en una dirección interna en una red virtual de Azure (VNet).</span><span class="sxs-lookup"><span data-stu-id="67458-105">Azure App Service environments (ASEs) can be created with an internet-accessible endpoint or an endpoint on an internal address in an Azure virtual network (VNet).</span></span> <span data-ttu-id="67458-106">Cuando se crea con un punto de conexión interno, ese punto de conexión siempre lo proporciona un componente de Azure denominado equilibrador de carga interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="67458-106">When created with an internal endpoint, that endpoint is provided by an Azure component called an internal load balancer (ILB).</span></span> <span data-ttu-id="67458-107">La instancia de ASE en una dirección IP interna se denomina ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-107">The ASE on an internal IP address is called an ILB ASE.</span></span> <span data-ttu-id="67458-108">La instancia de ASE con un punto de conexión público se denomina ASE externo.</span><span class="sxs-lookup"><span data-stu-id="67458-108">The ASE with a public endpoint is called an External ASE.</span></span> 

<span data-ttu-id="67458-109">Un ASE puede crearse con Azure Portal o con una plantilla de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-109">An ASE can be created by using the Azure portal or an Azure Resource Manager template.</span></span> <span data-ttu-id="67458-110">Este artículo le guía por los pasos y la sintaxis que necesita para crear un ASE externo o uno con ILB con plantillas de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-110">This article walks through the steps and syntax you need to create an External ASE or ILB ASE with Resource Manager templates.</span></span> <span data-ttu-id="67458-111">Para obtener información sobre cómo crear una instancia de ASE en Azure Portal, consulte [Creación de un ASE externo][MakeExternalASE] o [Creación de un ASE con ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="67458-111">To learn how to create an ASE in the Azure portal, see [Make an External ASE][MakeExternalASE] or [Make an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="67458-112">Cuando crea un ASE en Azure Portal, puede crear la red virtual al mismo tiempo o seleccionar una red virtual existente en donde implementarlo.</span><span class="sxs-lookup"><span data-stu-id="67458-112">When you create an ASE in the Azure portal, you can create your VNet at the same time or choose a preexisting VNet to deploy into.</span></span> <span data-ttu-id="67458-113">Cuando crea un ASE desde una plantilla, debe comenzar por:</span><span class="sxs-lookup"><span data-stu-id="67458-113">When you create an ASE from a template, you must start with:</span></span> 

* <span data-ttu-id="67458-114">Una red virtual de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-114">A Resource Manager VNet.</span></span>
* <span data-ttu-id="67458-115">Una subred de esa red virtual.</span><span class="sxs-lookup"><span data-stu-id="67458-115">A subnet in that VNet.</span></span> <span data-ttu-id="67458-116">Se recomienda que el tamaño de la subred del ASE sea `/25` con 128 direcciones para adaptarse al crecimiento futuro.</span><span class="sxs-lookup"><span data-stu-id="67458-116">We recommend an ASE subnet size of `/25` with 128 addresses to accomodate future growth.</span></span> <span data-ttu-id="67458-117">Una vez creado el ASE, no se puede cambiar el tamaño.</span><span class="sxs-lookup"><span data-stu-id="67458-117">After the ASE is created, you can't change the size.</span></span>
* <span data-ttu-id="67458-118">El identificador de recurso de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="67458-118">The resource ID from your VNet.</span></span> <span data-ttu-id="67458-119">Puede obtener esta información en Azure Portal, en las propiedades de su red virtual.</span><span class="sxs-lookup"><span data-stu-id="67458-119">You can get this information from the Azure portal under your virtual network properties.</span></span>
* <span data-ttu-id="67458-120">La suscripción en la que desea implementarlo.</span><span class="sxs-lookup"><span data-stu-id="67458-120">The subscription you want to deploy into.</span></span>
* <span data-ttu-id="67458-121">La ubicación en la que desea implementarlo.</span><span class="sxs-lookup"><span data-stu-id="67458-121">The location you want to deploy into.</span></span>

<span data-ttu-id="67458-122">Para automatizar la creación del ASE:</span><span class="sxs-lookup"><span data-stu-id="67458-122">To automate your ASE creation:</span></span>

1. <span data-ttu-id="67458-123">Cree el ASE a partir de una plantilla.</span><span class="sxs-lookup"><span data-stu-id="67458-123">Create the ASE from a template.</span></span> <span data-ttu-id="67458-124">Si crea un ASE externo, habrá terminado después de este paso.</span><span class="sxs-lookup"><span data-stu-id="67458-124">If you create an External ASE, you're finished after this step.</span></span> <span data-ttu-id="67458-125">Si crea un ASE con ILB, hay que realizar algunas acciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="67458-125">If you create an ILB ASE, there are a few more things to do.</span></span>

2. <span data-ttu-id="67458-126">Una vez creado el ASE con un ILB, se carga un certificado SSL que coincide con su dominio de ASE con un ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-126">After your ILB ASE is created, an SSL certificate that matches your ILB ASE domain is uploaded.</span></span>

3. <span data-ttu-id="67458-127">El certificado SSL cargado se asigna al ASE con un ILB como su certificado SSL "predeterminado".</span><span class="sxs-lookup"><span data-stu-id="67458-127">The uploaded SSL certificate is assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="67458-128">Este certificado se usa para el tráfico SSL a las aplicaciones del ASE con ILB cuando usan el dominio raíz común asignado al ASE (por ejemplo, https://someapp.mycustomrootcomain.com).</span><span class="sxs-lookup"><span data-stu-id="67458-128">This certificate is used for SSL traffic to apps on the ILB ASE when they use the common root domain that's assigned to the ASE (for example, https://someapp.mycustomrootcomain.com).</span></span>


## <a name="create-the-ase"></a><span data-ttu-id="67458-129">Creación del ASE</span><span class="sxs-lookup"><span data-stu-id="67458-129">Create the ASE</span></span>
<span data-ttu-id="67458-130">En GitHub, encontrará [un ejemplo][quickstartasev2create] de plantilla de Resource Manager que crea un ASE y su archivo de parámetros asociado.</span><span class="sxs-lookup"><span data-stu-id="67458-130">A Resource Manager template that creates an ASE and its associated parameters file is available [in an example][quickstartasev2create] on GitHub.</span></span>

<span data-ttu-id="67458-131">Si desea crear un ASE con un ILB, use estos [ejemplos][quickstartilbasecreate] de plantillas de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-131">If you want to make an ILB ASE, use these Resource Manager template [examples][quickstartilbasecreate].</span></span> <span data-ttu-id="67458-132">Son específicas a dicho caso de uso.</span><span class="sxs-lookup"><span data-stu-id="67458-132">They cater to that use case.</span></span> <span data-ttu-id="67458-133">La mayoría de los parámetros del archivo *azuredeploy.parameters.json* son comunes para la creación de los ASE con un ILB y de los ASE externos.</span><span class="sxs-lookup"><span data-stu-id="67458-133">Most of the parameters in the *azuredeploy.parameters.json* file are common to the creation of ILB ASEs and External ASEs.</span></span> <span data-ttu-id="67458-134">La siguiente lista llama a los parámetros especiales o únicos cuando crea un ASE con ILB:</span><span class="sxs-lookup"><span data-stu-id="67458-134">The following list calls out parameters of special note, or that are unique, when you create an ILB ASE:</span></span>

* <span data-ttu-id="67458-135">*interalLoadBalancingMode*: en la mayoría de los casos, se establece en 3, lo que significa que tanto el tráfico HTTP/HTTPS de los puertos 80 y 443 como los puertos de los canales de control o de datos a los que escucha el servicio FTP en el ASE estarán enlazados a una dirección de red virtual interna asignada al ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-135">*interalLoadBalancingMode*: In most cases, set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB-allocated virtual network internal address.</span></span> <span data-ttu-id="67458-136">Si esta propiedad se establece en 2, solo los puertos relacionados con el servicio FTP (los canales de control y de datos) estarán enlazados a una dirección de ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-136">If this property is set to 2, only the FTP service-related ports (both control and data channels) are bound to an ILB address.</span></span> <span data-ttu-id="67458-137">El tráfico HTTP/HTTPS permanece en la VIP pública.</span><span class="sxs-lookup"><span data-stu-id="67458-137">The HTTP/HTTPS traffic remains on the public VIP.</span></span>
* <span data-ttu-id="67458-138">*dnsSuffix*: este parámetro define el dominio raíz predeterminado que se asigna al ASE.</span><span class="sxs-lookup"><span data-stu-id="67458-138">*dnsSuffix*: This parameter defines the default root domain that's assigned to the ASE.</span></span> <span data-ttu-id="67458-139">En la variación pública del Servicio de aplicaciones de Azure, el dominio raíz predeterminado de todas las aplicaciones web es *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="67458-139">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span> <span data-ttu-id="67458-140">Dado que un ASE con ILB está dentro de la red virtual de un cliente, no tiene sentido utilizar el dominio raíz predeterminado del servicio público.</span><span class="sxs-lookup"><span data-stu-id="67458-140">Because an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span> <span data-ttu-id="67458-141">En su lugar, un ASE de ILB debe tener un dominio raíz predeterminado que tenga sentido usar en la red virtual interna de una compañía.</span><span class="sxs-lookup"><span data-stu-id="67458-141">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span> <span data-ttu-id="67458-142">Por ejemplo, Contoso Corporation podría usar el dominio raíz predeterminado *interno contoso.com* para aquellas aplicaciones que se pretende que se puedan resolver en la red virtual de Contoso, y a las que solo se pueda acceder desde ella.</span><span class="sxs-lookup"><span data-stu-id="67458-142">For example, Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to be resolvable and accessible only within Contoso's virtual network.</span></span> 
* <span data-ttu-id="67458-143">*ipSslAddressCount*: automáticamente, el valor predeterminado de este parámetro es 0 en el archivo *azuredeploy.json*, ya que los ASE con ILB solo tienen una dirección de ILB individual.</span><span class="sxs-lookup"><span data-stu-id="67458-143">*ipSslAddressCount*: This parameter automatically defaults to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span> <span data-ttu-id="67458-144">No hay direcciones IP-SSL explícitas para un ASE con ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-144">There are no explicit IP-SSL addresses for an ILB ASE.</span></span> <span data-ttu-id="67458-145">Por lo tanto, el grupo de direcciones IP-SSL para un ASE con ILB debe establecerse en cero.</span><span class="sxs-lookup"><span data-stu-id="67458-145">Hence, the IP-SSL address pool for an ILB ASE must be set to zero.</span></span> <span data-ttu-id="67458-146">En caso contrario, se produce un error de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="67458-146">Otherwise, a provisioning error occurs.</span></span> 

<span data-ttu-id="67458-147">Después de que se llene el archivo *azuredeploy.parameters.json*, cree el ASE mediante el fragmento de código de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="67458-147">After the *azuredeploy.parameters.json* file is filled in, create the ASE by using the PowerShell code snippet.</span></span> <span data-ttu-id="67458-148">Cambie las rutas del archivo para que coincidan con las ubicaciones en las que se encuentran los archivos de plantilla de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-148">Change the file paths to match the Resource Manager template-file locations on your machine.</span></span> <span data-ttu-id="67458-149">Recuerde especificar sus propios valores para el nombre de implementación y el nombre del grupo de recursos de Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="67458-149">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="67458-150">La creación de un ASE tarda aproximadamente una hora.</span><span class="sxs-lookup"><span data-stu-id="67458-150">It takes about an hour for the ASE to be created.</span></span> <span data-ttu-id="67458-151">Luego el ASE se muestra en el portal en la lista de ASE de la suscripción que desencadenó la implementación.</span><span class="sxs-lookup"><span data-stu-id="67458-151">Then the ASE shows up in the portal in the list of ASEs for the subscription that triggered the deployment.</span></span>

## <a name="upload-and-configure-the-default-ssl-certificate"></a><span data-ttu-id="67458-152">Carga y configuración del certificado SSL "predeterminado"</span><span class="sxs-lookup"><span data-stu-id="67458-152">Upload and configure the "default" SSL certificate</span></span>
<span data-ttu-id="67458-153">Es preciso asociar un certificado SSL "predeterminado" con el ASE para establecer conexiones SSL con las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="67458-153">An SSL certificate must be associated with the ASE as the "default" SSL certificate that's used to establish SSL connections to apps.</span></span> <span data-ttu-id="67458-154">Si el sufijo DNS predeterminado del ASE es *internal-contoso.com*, una conexión a https://some-random-app.internal-contoso.com requiere un certificado SSL que sea válido para **.internal contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="67458-154">If the ASE's default DNS suffix is *internal-contoso.com*, a connection to https://some-random-app.internal-contoso.com requires an SSL certificate that's valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="67458-155">Obtenga un certificado SSL válido a través de las autoridades de certificados internas, adquiriendo un certificado de un emisor externo o usando un certificado autofirmado.</span><span class="sxs-lookup"><span data-stu-id="67458-155">Obtain a valid SSL certificate by using internal certificate authorities, purchasing a certificate from an external issuer, or using a self-signed certificate.</span></span> <span data-ttu-id="67458-156">Independientemente del origen del certificado SSL, es necesario configurar correctamente los siguientes atributos del certificado:</span><span class="sxs-lookup"><span data-stu-id="67458-156">Regardless of the source of the SSL certificate, the following certificate attributes must be configured properly:</span></span>

* <span data-ttu-id="67458-157">**Subject**: el valor de este atributo debe ser **.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="67458-157">**Subject**: This attribute must be set to **.your-root-domain-here.com*.</span></span>
* <span data-ttu-id="67458-158">**Nombre alternativo del firmante**: este atributo debe incluir tanto **.your-root-domain-here.com* como **.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="67458-158">**Subject Alternative Name**: This attribute must include both **.your-root-domain-here.com* and **.scm.your-root-domain-here.com*.</span></span> <span data-ttu-id="67458-159">Las conexiones SSL con el sitio de SCM/Kudu asociadas a cada aplicación usan una dirección cuyo formato será *your-app-name.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="67458-159">SSL connections to the SCM/Kudu site associated with each app use an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="67458-160">Con un certificado SSL válido, se necesitan dos pasos preparatorios adicionales.</span><span class="sxs-lookup"><span data-stu-id="67458-160">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span> <span data-ttu-id="67458-161">Convierta/guarde el certificado SSL como un archivo .pfx.</span><span class="sxs-lookup"><span data-stu-id="67458-161">Convert/save the SSL certificate as a .pfx file.</span></span> <span data-ttu-id="67458-162">Recuerde que el archivo .pfx debe incluir todos los certificados intermedios y raíz.</span><span class="sxs-lookup"><span data-stu-id="67458-162">Remember that the .pfx file must include all intermediate and root certificates.</span></span> <span data-ttu-id="67458-163">Protéjalo con una contraseña.</span><span class="sxs-lookup"><span data-stu-id="67458-163">Secure it with a password.</span></span>

<span data-ttu-id="67458-164">El archivo .pfx debe convertirse en una cadena base64, ya que el certificado SSL se cargará mediante una plantilla de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-164">The .pfx file needs to be converted into a base64 string because the SSL certificate is uploaded by using a Resource Manager template.</span></span> <span data-ttu-id="67458-165">Dado que las plantillas de Resource Manager son archivos de texto, el archivo .pfx debe convertirse en una cadena base64.</span><span class="sxs-lookup"><span data-stu-id="67458-165">Because Resource Manager templates are text files, the .pfx file must be converted into a base64 string.</span></span> <span data-ttu-id="67458-166">De esta forma, se puede incluir como un parámetro de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="67458-166">This way it can be included as a parameter of the template.</span></span>

<span data-ttu-id="67458-167">Use el siguiente fragmento de código de PowerShell para:</span><span class="sxs-lookup"><span data-stu-id="67458-167">Use the following PowerShell code snippet to:</span></span>

* <span data-ttu-id="67458-168">Generar un certificado autofirmado.</span><span class="sxs-lookup"><span data-stu-id="67458-168">Generate a self-signed certificate.</span></span>
* <span data-ttu-id="67458-169">Exportar el certificado como un archivo .pfx.</span><span class="sxs-lookup"><span data-stu-id="67458-169">Export the certificate as a .pfx file.</span></span>
* <span data-ttu-id="67458-170">Convierta el archivo .pfx en una cadena codificada en base64.</span><span class="sxs-lookup"><span data-stu-id="67458-170">Convert the .pfx file into a base64-encoded string.</span></span>
* <span data-ttu-id="67458-171">Guarde la cadena codificada en base64 en un archivo independiente.</span><span class="sxs-lookup"><span data-stu-id="67458-171">Save the base64-encoded string to a separate file.</span></span> 

<span data-ttu-id="67458-172">El código de PowerShell para la codificación en base64 se adaptó del [blog de la cadena de PowerShell][examplebase64encoding]:</span><span class="sxs-lookup"><span data-stu-id="67458-172">This PowerShell code for base64 encoding was adapted from the [PowerShell scripts blog][examplebase64encoding]:</span></span>

        $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

        $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
        $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

        $fileName = "exportedcert.pfx"
        Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

        $fileContentBytes = get-content -encoding byte $fileName
        $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
        $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="67458-173">Una vez que el certificado SSL se genera y convierte correctamente en una cadena con codificación base64, use el ejemplo de la plantilla de Resource Manager [Configuración del certificado SSL predeterminado][quickstartconfiguressl] en GitHub.</span><span class="sxs-lookup"><span data-stu-id="67458-173">After the SSL certificate is successfully generated and converted to a base64-encoded string, use the example Resource Manager template [Configure the default SSL certificate][quickstartconfiguressl] on GitHub.</span></span> 

<span data-ttu-id="67458-174">Los parámetros del archivo *azuredeploy.parameters.json* se enumeran aquí:</span><span class="sxs-lookup"><span data-stu-id="67458-174">The parameters in the *azuredeploy.parameters.json* file are listed here:</span></span>

* <span data-ttu-id="67458-175">*appServiceEnvironmentName*: el nombre del ASE de ILB que se configura.</span><span class="sxs-lookup"><span data-stu-id="67458-175">*appServiceEnvironmentName*: The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="67458-176">*existingAseLocation*: cadena de texto que contiene la región de Azure en que se implementó el ASE de ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-176">*existingAseLocation*: Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="67458-177">Por ejemplo: "Centro-Sur de EE.UU.".</span><span class="sxs-lookup"><span data-stu-id="67458-177">For example: "South Central US".</span></span>
* <span data-ttu-id="67458-178">*pfxBlobString*: la representación de la cadena con codificación Base64 del archivo pfx.</span><span class="sxs-lookup"><span data-stu-id="67458-178">*pfxBlobString*: The based64-encoded string representation of the .pfx file.</span></span> <span data-ttu-id="67458-179">Use el fragmento de código mostrado anteriormente y copie la cadena incluida en "exportedcert.pfx.b64".</span><span class="sxs-lookup"><span data-stu-id="67458-179">Use the code snippet shown earlier and copy the string contained in "exportedcert.pfx.b64".</span></span> <span data-ttu-id="67458-180">Péguelo como el valor del atributo *pfxBlobString*.</span><span class="sxs-lookup"><span data-stu-id="67458-180">Paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="67458-181">*password*: la contraseña que se usa para proteger el archivo pfx.</span><span class="sxs-lookup"><span data-stu-id="67458-181">*password*: The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="67458-182">*certificateThumbprint*: la huella digital del certificado.</span><span class="sxs-lookup"><span data-stu-id="67458-182">*certificateThumbprint*: The certificate's thumbprint.</span></span> <span data-ttu-id="67458-183">Si este valor se recupera de PowerShell (por ejemplo, *$certificate.Thumbprint* del fragmento de código anterior), se puede usar tal cual.</span><span class="sxs-lookup"><span data-stu-id="67458-183">If you retrieve this value from PowerShell (for example, *$certificate.Thumbprint* from the earlier code snippet), you can use the value as is.</span></span> <span data-ttu-id="67458-184">Si copia el valor del cuadro de diálogo del certificado de Windows, no olvide eliminar los espacios superfluos.</span><span class="sxs-lookup"><span data-stu-id="67458-184">If you copy the value from the Windows certificate dialog box, remember to strip out the extraneous spaces.</span></span> <span data-ttu-id="67458-185">*certificateThumbprint* debería ser similar a AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="67458-185">The *certificateThumbprint* should look something like  AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span></span>
* <span data-ttu-id="67458-186">*certificateName*: un identificador de cadena fácil de usar que elija y que se usa para identificar el certificado.</span><span class="sxs-lookup"><span data-stu-id="67458-186">*certificateName*: A friendly string identifier of your own choosing used to identity the certificate.</span></span> <span data-ttu-id="67458-187">El nombre se utiliza como parte del identificador único de Resource Manager para la entidad *Microsoft.Web/certificates* que representa el certificado SSL.</span><span class="sxs-lookup"><span data-stu-id="67458-187">The name is used as part of the unique Resource Manager identifier for the *Microsoft.Web/certificates* entity that represents the SSL certificate.</span></span> <span data-ttu-id="67458-188">El nombre *debe* terminar con el sufijo siguiente: \__yourASENameHere_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="67458-188">The name *must* end with the following suffix: \_yourASENameHere_InternalLoadBalancingASE.</span></span> <span data-ttu-id="67458-189">Azure Portal utiliza este sufijo como un indicador de que el certificado se usa para asegurar un ASE habilitado para ILB.</span><span class="sxs-lookup"><span data-stu-id="67458-189">The Azure portal uses this suffix as an indicator that the certificate is used to secure an ILB-enabled ASE.</span></span>

<span data-ttu-id="67458-190">Aquí se muestra un ejemplo abreviado de *azuredeploy.parameters.json* :</span><span class="sxs-lookup"><span data-stu-id="67458-190">An abbreviated example of *azuredeploy.parameters.json* is shown here:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="67458-191">Después de que se llene el archivo *azuredeploy.parameters.json*, configure el certificado SSL mediante el fragmento de código de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="67458-191">After the *azuredeploy.parameters.json* file is filled in, configure the default SSL certificate by using the PowerShell code snippet.</span></span> <span data-ttu-id="67458-192">Cambie las rutas del archivo para que coincidan con la ubicación de la máquina en la que se encuentran los archivos de plantilla de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-192">Change the file paths to match where the Resource Manager template files are located on your machine.</span></span> <span data-ttu-id="67458-193">Recuerde especificar sus propios valores para el nombre de implementación y el nombre del grupo de recursos de Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="67458-193">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

     $templatePath="PATH\azuredeploy.json"
     $parameterPath="PATH\azuredeploy.parameters.json"

     New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="67458-194">La aplicación del cambio se tarda aproximadamente 40 minutos por cada front-end de ASE.</span><span class="sxs-lookup"><span data-stu-id="67458-194">It takes roughly 40 minutes per ASE front end to apply the change.</span></span> <span data-ttu-id="67458-195">Por ejemplo, para un ASE de un tamaño predeterminado que usa dos front-ends, la plantilla tarda aproximadamente una hora y veinte minutos en completarse.</span><span class="sxs-lookup"><span data-stu-id="67458-195">For example, for a default-sized ASE that uses two front ends, the template takes around one hour and 20 minutes to complete.</span></span> <span data-ttu-id="67458-196">Mientras la plantilla se ejecute, el ASE no se puede escalar.</span><span class="sxs-lookup"><span data-stu-id="67458-196">While the template is running, the ASE can't scale.</span></span>  

<span data-ttu-id="67458-197">Una vez finalizada la plantilla, se puede tener acceso a aplicaciones en el ASE con ILB a través de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="67458-197">After the template finishes, apps on the ILB ASE can be accessed over HTTPS.</span></span> <span data-ttu-id="67458-198">Las conexiones se protegen mediante el certificado SSL predeterminado.</span><span class="sxs-lookup"><span data-stu-id="67458-198">The connections are secured by using the default SSL certificate.</span></span> <span data-ttu-id="67458-199">El certificado SSL predeterminado se usa cuando las direcciones de las aplicaciones del ASE con ILB utilizan una combinación del nombre de la aplicación y el nombre de host predeterminado.</span><span class="sxs-lookup"><span data-stu-id="67458-199">The default SSL certificate is used when apps on the ILB ASE are addressed by using a combination of the application name plus the default host name.</span></span> <span data-ttu-id="67458-200">Por ejemplo, https://mycustomapp.internal-contoso.com usa el certificado SSL predeterminado para **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="67458-200">For example, https://mycustomapp.internal-contoso.com uses the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="67458-201">Sin embargo, al igual que las aplicaciones que se ejecutan en el servicio multiinquilino público, los desarrolladores pueden configurar nombres de host personalizados para las aplicaciones individuales.</span><span class="sxs-lookup"><span data-stu-id="67458-201">However, just like apps that run on the public multitenant service, developers can configure custom host names for individual apps.</span></span> <span data-ttu-id="67458-202">También pueden configurar enlaces de certificado SSL SNI únicos para las aplicaciones individuales.</span><span class="sxs-lookup"><span data-stu-id="67458-202">They also can configure unique SNI SSL certificate bindings for individual apps.</span></span>

## <a name="app-service-environment-v1"></a><span data-ttu-id="67458-203">App Service Environment v1</span><span class="sxs-lookup"><span data-stu-id="67458-203">App Service Environment v1</span></span> ##
<span data-ttu-id="67458-204">App Service Environment tiene dos versiones: ASEv1 y ASEv2.</span><span class="sxs-lookup"><span data-stu-id="67458-204">App Service Environment has two versions: ASEv1 and ASEv2.</span></span> <span data-ttu-id="67458-205">La información anterior se basa en ASEv2.</span><span class="sxs-lookup"><span data-stu-id="67458-205">The preceding information was based on ASEv2.</span></span> <span data-ttu-id="67458-206">En esta sección se muestran las diferencias entre ASEv1 y ASEv2.</span><span class="sxs-lookup"><span data-stu-id="67458-206">This section shows you the differences between ASEv1 and ASEv2.</span></span>

<span data-ttu-id="67458-207">En ASEv1, administra todos los recursos de forma manual.</span><span class="sxs-lookup"><span data-stu-id="67458-207">In ASEv1, you manage all of the resources manually.</span></span> <span data-ttu-id="67458-208">Esto incluye los front-end, los trabajos y las direcciones IP utilizadas para SSL basada en IP.</span><span class="sxs-lookup"><span data-stu-id="67458-208">That includes the front ends, workers, and IP addresses used for IP-based SSL.</span></span> <span data-ttu-id="67458-209">Antes de escalar horizontalmente el plan de App Service, debe escalar horizontalmente el grupo de trabajo en el que desea hospedarlo.</span><span class="sxs-lookup"><span data-stu-id="67458-209">Before you can scale out your App Service plan, you must scale out the worker pool that you want to host it.</span></span>

<span data-ttu-id="67458-210">ASEv1 utiliza un modelo de precios diferente al de ASEv2.</span><span class="sxs-lookup"><span data-stu-id="67458-210">ASEv1 uses a different pricing model from ASEv2.</span></span> <span data-ttu-id="67458-211">En ASEv1, paga por cada núcleo asignado.</span><span class="sxs-lookup"><span data-stu-id="67458-211">In ASEv1, you pay for each core allocated.</span></span> <span data-ttu-id="67458-212">Esto incluye los núcleos que usan para los servidores front-end y trabajos que no hospedan ninguna carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="67458-212">That includes cores that are used for front ends or workers that aren't hosting any workloads.</span></span> <span data-ttu-id="67458-213">En ASEv1, el tamaño de escala máxima predeterminada de una instancia de ASE es de 55 hosts en total.</span><span class="sxs-lookup"><span data-stu-id="67458-213">In ASEv1, the default maximum-scale size of an ASE is 55 total hosts.</span></span> <span data-ttu-id="67458-214">Esto incluye servidores front-end y trabajos.</span><span class="sxs-lookup"><span data-stu-id="67458-214">That includes workers and front ends.</span></span> <span data-ttu-id="67458-215">Una ventaja de ASEv1 es que se puede implementar en una red virtual clásica y en una red virtual de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="67458-215">One advantage to ASEv1 is that it can be deployed in a classic virtual network and a Resource Manager virtual network.</span></span> <span data-ttu-id="67458-216">Para más información sobre ASEv1, consulte [Introducción a App Service Environment v1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="67458-216">To learn more about ASEv1, see [App Service Environment v1 introduction][ASEv1Intro].</span></span>

<span data-ttu-id="67458-217">Para crear un ASEv1 mediante una plantilla de Resource Manager, consulte [Creación de un ASE v1 con un ILB con una plantilla de Resource Manager][ILBASEv1Template].</span><span class="sxs-lookup"><span data-stu-id="67458-217">To create an ASEv1 by using a Resource Manager template, see [Create an ILB ASE v1 with a Resource Manager template][ILBASEv1Template].</span></span>


<!--Links-->
[quickstartilbasecreate]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-ilb-create
[quickstartasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-create
[quickstartconfiguressl]: http://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl
[quickstartwebapponasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asp-app-on-asev2-create
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ILBASEv1Template]: ../../app-service-web/app-service-app-service-environment-create-ilb-ase-resourcemanager.md

---
title: "aaaWorking con módulos de Node.js"
description: "Obtenga información acerca de cómo toowork con módulos de Node.js cuando se utiliza el servicio de aplicación de Azure o servicios en la nube."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="29cb1-103">Uso de módulos Node.js con aplicaciones de Azure</span><span class="sxs-lookup"><span data-stu-id="29cb1-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="29cb1-104">Este documento le proporciona orientación sobre el uso de módulos Node.js con aplicaciones hospedadas en Azure.</span><span class="sxs-lookup"><span data-stu-id="29cb1-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="29cb1-105">Mediante este documento podrá asegurarse de que su aplicación usa una versión específica del módulo y de que usa módulos nativos con Azure.</span><span class="sxs-lookup"><span data-stu-id="29cb1-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="29cb1-106">Si ya está familiarizado con el uso de módulos de Node.js, **package.json** y **shrinkwrap.json npm** archivos, Hola siguiente información proporciona un resumen rápido de lo que se describe en este artículo:</span><span class="sxs-lookup"><span data-stu-id="29cb1-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="29cb1-107">Azure App Service entiende los archivos **package.json** y **npm-shrinkwrap.json** y puede instalar módulos basados en las entradas de estos archivos.</span><span class="sxs-lookup"><span data-stu-id="29cb1-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="29cb1-108">Los servicios de nube Azure esperan que todos los toobe de módulos instalados en el entorno de desarrollo de Hola y Hola **nodo\_módulos** toobe de directorio incluido como parte del paquete de implementación de Hola.</span><span class="sxs-lookup"><span data-stu-id="29cb1-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="29cb1-109">Es posible tooenable soporte para la instalación de los módulos con **package.json** o **shrinkwrap.json npm** archivos en servicios en la nube; sin embargo, esta configuración requiere personalización predeterminado Hola secuencias de comandos utilizadas por los proyectos de servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="29cb1-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="29cb1-110">Para obtener un ejemplo de cómo tooconfigure este entorno, consulte [Azure inicio tarea toorun npm instalar tooavoid implementar módulos de nodo](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="29cb1-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="29cb1-111">Máquinas virtuales de Azure no se tratan en este artículo, como la experiencia de implementación de hello en una máquina virtual depende del sistema de operativo Hola hospedado por hello Máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="29cb1-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="29cb1-112">Módulos Node.js</span><span class="sxs-lookup"><span data-stu-id="29cb1-112">Node.js Modules</span></span>
<span data-ttu-id="29cb1-113">Los módulos son paquetes JavaScript que pueden cargarse y que proporcionan una funcionalidad específica para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="29cb1-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="29cb1-114">Módulos normalmente se instalan con hello **npm** de línea de comandos de herramientas, sin embargo algunos módulos (por ejemplo, el módulo http del Hola) se proporcionan como parte del paquete de hello core Node.js.</span><span class="sxs-lookup"><span data-stu-id="29cb1-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="29cb1-115">Cuando se instalan módulos, se almacenan en hello **nodo\_módulos** directorio raíz de hello de la estructura de directorios de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="29cb1-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="29cb1-116">Cada módulo en hello **nodo\_módulos** directory mantiene su propio **nodo\_módulos** directorio que contiene los módulos que depende de, y se repite este comportamiento para cada módulo de todas las forma Hola hacia abajo de la cadena de dependencia de Hola.</span><span class="sxs-lookup"><span data-stu-id="29cb1-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="29cb1-117">Este entorno permite que cada módulo instalado toohave sus propios requisitos de versión para los módulos de hello depende, sin embargo puede producir una gran estructura de directorio de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="29cb1-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="29cb1-118">Hola implementación **nodo\_módulos** directorio como parte de la aplicación aumenta el tamaño de Hola de implementación de hello cuando se comparan toousing una **package.json** o  **NPM shrinkwrap.json** archivo; sin embargo, garantiza que las versiones de Hola de módulos de hello usados en producción se Hola igual como módulos de hello usados en el desarrollo de.</span><span class="sxs-lookup"><span data-stu-id="29cb1-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="29cb1-119">Módulos nativos</span><span class="sxs-lookup"><span data-stu-id="29cb1-119">Native Modules</span></span>
<span data-ttu-id="29cb1-120">Mientras que la mayoría de los módulos son archivos JavaScript sin formato, algunos módulos son imágenes binarias específicas de plataforma.</span><span class="sxs-lookup"><span data-stu-id="29cb1-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="29cb1-121">Estos módulos se compilan en el momento de la instalación, normalmente mediante Python y node-gyp.</span><span class="sxs-lookup"><span data-stu-id="29cb1-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="29cb1-122">Puesto que los servicios de nube de Azure se basan en hello **nodo\_módulos** carpeta que se implementa como parte de la aplicación hello, cualquier módulo nativo que se incluye como parte de los módulos de hello instalado debería funcionar en un servicio de nube mientras estaba instala y se compila en un sistema de desarrollo de Windows.</span><span class="sxs-lookup"><span data-stu-id="29cb1-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="29cb1-123">Azure App Service no es compatible con todos los módulos nativos y podría presentar errores al compilar módulos con requisitos previos específicos.</span><span class="sxs-lookup"><span data-stu-id="29cb1-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="29cb1-124">Aunque algunos módulos conocidos, como MongoDB, tienen dependencias nativas opcionales y funcionan correctamente sin ellas, dos soluciones alternativas han demostrado funcionar correctamente con casi todos los módulos nativos actualmente disponibles:</span><span class="sxs-lookup"><span data-stu-id="29cb1-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="29cb1-125">Ejecutar **npm instalar** en un equipo de Windows que tenga instalados los requisitos previos de todos los Hola nativo del módulo.</span><span class="sxs-lookup"><span data-stu-id="29cb1-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="29cb1-126">A continuación, implemente Hola creado **nodo\_módulos** carpeta como parte de hello aplicación tooAzure servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="29cb1-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="29cb1-127">Antes de compilar, compruebe que la instalación local de Node.js tiene arquitectura coincidente y versión de Hola sea más parecida posible toohello uno utilizados en Azure (se pueden comprobar los valores actuales de hello en tiempo de ejecución de propiedades **process.arch**y **process.version**).</span><span class="sxs-lookup"><span data-stu-id="29cb1-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="29cb1-128">Servicio de aplicaciones de Azure puede ser intensiva de errores personalizado configurado tooexecute o secuencias de comandos de shell durante la implementación, lo que le otorga Hola comandos personalizados de oportunidad tooexecute y configurar con precisión Hola forma **instalar npm** se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="29cb1-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="29cb1-129">Para un vídeo que se muestra cómo tooconfigure ese entorno, consulte [Scripts de implementación de sitios Web personalizados con Kudu].</span><span class="sxs-lookup"><span data-stu-id="29cb1-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="29cb1-130">Uso de un archivo package.json</span><span class="sxs-lookup"><span data-stu-id="29cb1-130">Using a package.json file</span></span>
<span data-ttu-id="29cb1-131">Hola **package.json** archivo es una manera toospecify Hola nivel superior dependencias requiere de la aplicación hello plataforma de hospedaje puede instalar las dependencias de hello, en lugar de requerir hello tooinclude **nodo \_paquetes** carpeta como parte de la implementación de Hola.</span><span class="sxs-lookup"><span data-stu-id="29cb1-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="29cb1-132">Una vez implementada la aplicación hello, Hola **npm instalar** comando es hello tooparse usado **package.json** archivo e instalar todas las dependencias de hello enumeradas.</span><span class="sxs-lookup"><span data-stu-id="29cb1-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="29cb1-133">Durante el desarrollo, puede usar hello **--guardar**, **--save-dev**, o **--guardar opcional** parámetros al instalar módulos tooadd una entrada para el módulo de hello tooyour **package.json** archivo automáticamente.</span><span class="sxs-lookup"><span data-stu-id="29cb1-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="29cb1-134">Para obtener más información, consulte [npm-install](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="29cb1-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="29cb1-135">Un posible problema con hello **package.json** archivo consiste en que especifica solo versión de Hola para las dependencias de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="29cb1-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="29cb1-136">Cada módulo instalado puede o no puede especificar la versión de Hola de módulos de hello depende, y por lo que es posible que tenga que terminar con una cadena de dependencia diferentes que Hola uno usados en el desarrollo.</span><span class="sxs-lookup"><span data-stu-id="29cb1-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="29cb1-137">Al implementar tooAzure servicio de aplicaciones, si su <b>package.json</b> archivo hace referencia a un módulo nativo, es posible que vea un toohello de error similar siguiente ejemplo, al publicar la aplicación hello mediante Git:</span><span class="sxs-lookup"><span data-stu-id="29cb1-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="29cb1-138">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="29cb1-138">npm ERR!</span></span> <span data-ttu-id="29cb1-139">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="29cb1-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="29cb1-140">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="29cb1-140">npm ERR!</span></span> <span data-ttu-id="29cb1-141">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="29cb1-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="29cb1-142">Uso de un archivo npm-shrinkwrap.json</span><span class="sxs-lookup"><span data-stu-id="29cb1-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="29cb1-143">Hola **npm shrinkwrap.json** archivo es un intento de tooaddress Hola módulo limitaciones de las versiones de hello **package.json** archivo.</span><span class="sxs-lookup"><span data-stu-id="29cb1-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="29cb1-144">Mientras hello **package.json** archivo sólo incluye versiones de módulos de nivel superior de hello, hello **shrinkwrap.json npm** archivo contiene los requisitos de versión de hello para la cadena de dependencias de módulo completo Hola.</span><span class="sxs-lookup"><span data-stu-id="29cb1-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="29cb1-145">Cuando la aplicación está lista para producción, puede bloquear requisitos de versión y crear un **npm shrinkwrap.json** archivo mediante hello **npm precinto** comando.</span><span class="sxs-lookup"><span data-stu-id="29cb1-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="29cb1-146">Este comando usará las versiones de hello instaladas actualmente en hello **nodo\_módulos** carpeta y registra estos toohello versiones **shrinkwrap.json npm** archivo.</span><span class="sxs-lookup"><span data-stu-id="29cb1-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="29cb1-147">Después de aplicación hello ha sido implementado toohello entorno de hospedaje, Hola **npm instalar** comando es hello tooparse usado **npm shrinkwrap.json** archivo e instalar todas las dependencias de hello enumeradas.</span><span class="sxs-lookup"><span data-stu-id="29cb1-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="29cb1-148">Para más información, consulte [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="29cb1-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="29cb1-149">Al implementar tooAzure servicio de aplicaciones, si su <b>shrinkwrap.json npm</b> archivo hace referencia a un módulo nativo, es posible que vea un toohello de error similar siguiente ejemplo, al publicar la aplicación hello mediante Git:</span><span class="sxs-lookup"><span data-stu-id="29cb1-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="29cb1-150">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="29cb1-150">npm ERR!</span></span> <span data-ttu-id="29cb1-151">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="29cb1-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="29cb1-152">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="29cb1-152">npm ERR!</span></span> <span data-ttu-id="29cb1-153">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="29cb1-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="29cb1-154">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="29cb1-154">Next steps</span></span>
<span data-ttu-id="29cb1-155">Ahora que sabe cómo toouse módulos de Node.js con Azure, obtenga información acerca de cómo demasiado[especificar hello Node.js versión], [compilar e implementar una aplicación web de Node.js](app-service-web/app-service-web-get-started-nodejs.md), y [cómo toouse Hola de línea de comandos de Azure Interfaz para Mac y Linux].</span><span class="sxs-lookup"><span data-stu-id="29cb1-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="29cb1-156">Para obtener más información, vea hello [Centro para desarrolladores de Node.js](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="29cb1-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[especificar hello Node.js versión]: nodejs-specify-node-version-azure-apps.md
[cómo toouse Hola de línea de comandos de Azure Interfaz para Mac y Linux]:cli-install-nodejs.md
[Scripts de implementación de sitios Web personalizados con Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo

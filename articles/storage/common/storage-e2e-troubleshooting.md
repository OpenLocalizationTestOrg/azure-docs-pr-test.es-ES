---
title: "Solución de problemas de Azure Storage con diagnósticos y el analizador de mensajes | Microsoft Docs"
description: "Tutorial en el que se explica cómo solucionar problemas totalmente por medio del análisis de Almacenamiento de Azure, AzCopy y el analizador de mensajes de Microsoft."
services: storage
documentationcenter: dotnet
author: robinsh
manager: timlt
ms.assetid: 643372a3-1c07-4e88-b4ef-042512a43086
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 03/15/2017
ms.author: robinsh
ms.openlocfilehash: 1aa40c4de48c0117e9d3f9d434972adecccdb548
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="end-to-end-troubleshooting-using-azure-storage-metrics-and-logging-azcopy-and-message-analyzer"></a><span data-ttu-id="55a2e-103">Solución integral de problemas mediante los registros y las métricas de Azure Storage, AzCopy y el analizador de mensajes</span><span class="sxs-lookup"><span data-stu-id="55a2e-103">End-to-End Troubleshooting using Azure Storage metrics and logging, AzCopy, and Message Analyzer</span></span>
[!INCLUDE [storage-selector-portal-e2e-troubleshooting](../../../includes/storage-selector-portal-e2e-troubleshooting.md)]

<span data-ttu-id="55a2e-104">Poder diagnosticar y solucionar problemas es una habilidad clave a la hora de crear y mantener aplicaciones de cliente con el servicio Almacenamiento de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-104">Diagnosing and troubleshooting is a key skill for building and supporting client applications with Microsoft Azure Storage.</span></span> <span data-ttu-id="55a2e-105">Las aplicaciones de Azure suelen ser de naturaleza dispersa, de modo que diagnosticar y solucionar errores y problemas de rendimiento puede resultar más complicado que hacerlo en entornos tradicionales.</span><span class="sxs-lookup"><span data-stu-id="55a2e-105">Due to the distributed nature of an Azure application, diagnosing and troubleshooting errors and performance issues may be more complex than in traditional environments.</span></span>

<span data-ttu-id="55a2e-106">En este tutorial explicamos cómo reconocer algunos errores que pueden afectar al rendimiento y cómo solucionarlos completamente usando herramientas proporcionadas por Microsoft y por el servicio Azure Storage, todo ello para optimizar la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-106">In this tutorial, we demonstrate how to identify certain errors that may affect performance, and troubleshoot those errors from end-to-end using tools provided by Microsoft and Azure Storage, in order to optimize the client application.</span></span>

<span data-ttu-id="55a2e-107">Aquí encontrará un análisis práctico de un escenario de solución integral de problemas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-107">This tutorial provides a hands-on exploration of an end-to-end troubleshooting scenario.</span></span> <span data-ttu-id="55a2e-108">Para obtener una guía conceptual exhaustiva con la que solucionar problemas de aplicaciones de almacenamiento de Azure, vea [Supervisión, diagnóstico y solución de problemas de Almacenamiento de Microsoft Azure](storage-monitoring-diagnosing-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="55a2e-108">For an in-depth conceptual guide to troubleshooting Azure storage applications, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="tools-for-troubleshooting-azure-storage-applications"></a><span data-ttu-id="55a2e-109">Herramientas para solucionar problemas de aplicaciones de Almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="55a2e-109">Tools for troubleshooting Azure Storage applications</span></span>
<span data-ttu-id="55a2e-110">Para solucionar problemas en aplicaciones cliente que usan Almacenamiento de Microsoft Azure, puede usar una combinación de herramientas que permita saber cuándo se produjo un problema y cuál puede ser la causa.</span><span class="sxs-lookup"><span data-stu-id="55a2e-110">To troubleshoot client applications using Microsoft Azure Storage, you can use a combination of tools to determine when an issue has occurred and what the cause of the problem may be.</span></span> <span data-ttu-id="55a2e-111">Estas herramientas son:</span><span class="sxs-lookup"><span data-stu-id="55a2e-111">These tools include:</span></span>

* <span data-ttu-id="55a2e-112">**Análisis de almacenamiento de Azure**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-112">**Azure Storage Analytics**.</span></span> <span data-ttu-id="55a2e-113">[Análisis de almacenamiento de Azure](/rest/api/storageservices/Storage-Analytics) proporciona las métricas y registros del servicio Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-113">[Azure Storage Analytics](/rest/api/storageservices/Storage-Analytics) provides metrics and logging for Azure Storage.</span></span>
  
  * <span data-ttu-id="55a2e-114">**métricas de almacenamiento** realizan un seguimiento de las métricas de transacciones y de capacidad relativas a la cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-114">**Storage metrics** tracks transaction metrics and capacity metrics for your storage account.</span></span> <span data-ttu-id="55a2e-115">Con las métricas, puede conocer el rendimiento de su aplicación basándose en diversas medidas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-115">Using metrics, you can determine how your application is performing according to a variety of different measures.</span></span> <span data-ttu-id="55a2e-116">Vea [Esquema de las tablas de métricas del análisis de almacenamiento](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema) para más información sobre los tipos de métricas de las que hace un seguimiento el análisis de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-116">See [Storage Analytics Metrics Table Schema](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema) for more information about the types of metrics tracked by Storage Analytics.</span></span>
  * <span data-ttu-id="55a2e-117">**registro de almacenamiento** deja constancia en un registro del servidor de cada solicitud realizada al servicio Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-117">**Storage logging** logs each request to the Azure Storage services to a server-side log.</span></span> <span data-ttu-id="55a2e-118">Este registro hace un seguimiento de los datos detallados de cada solicitud, como la operación realizada, el estado de la operación y la información de latencia.</span><span class="sxs-lookup"><span data-stu-id="55a2e-118">The log tracks detailed data for each request, including the operation performed, the status of the operation, and latency information.</span></span> <span data-ttu-id="55a2e-119">Vea [Formato del registro del análisis de almacenamiento](/rest/api/storageservices/Storage-Analytics-Log-Format) para más información sobre los datos de solicitud y de respuesta que se escriben en los registros del análisis de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-119">See [Storage Analytics Log Format](/rest/api/storageservices/Storage-Analytics-Log-Format) for more information about the request and response data that is written to the logs by Storage Analytics.</span></span>

> [!NOTE]
> <span data-ttu-id="55a2e-120">En este momento, las cuentas de almacenamiento con un tipo de replicación de almacenamiento con redundancia de zona (ZRS) no tienen habilitadas las métricas o la funcionalidad de registro.</span><span class="sxs-lookup"><span data-stu-id="55a2e-120">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have the metrics or logging capability enabled at this time.</span></span> 
> 
> 

* <span data-ttu-id="55a2e-121">**Azure Portal**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-121">**Azure portal**.</span></span> <span data-ttu-id="55a2e-122">Puede configurar las métricas y el registro de su cuenta de almacenamiento en [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="55a2e-122">You can configure metrics and logging for your storage account in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="55a2e-123">Asimismo, también puede ver diagramas y gráficos que le mostrarán el rendimiento de su aplicación conforme avanza el tiempo, así como configurar alertas que le avisarán si el rendimiento de su aplicación es diferente a lo esperado según lo establecido en una métrica específica.</span><span class="sxs-lookup"><span data-stu-id="55a2e-123">You can also view charts and graphs that show how your application is performing over time, and configure alerts to notify you if your application performs differently than expected for a specified metric.</span></span>
  
    <span data-ttu-id="55a2e-124">Consulte [Supervisión de una cuenta de almacenamiento en Azure Portal](storage-monitor-storage-account.md) para obtener más información sobre la configuración de la supervisión en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-124">See [Monitor a storage account in the Azure portal](storage-monitor-storage-account.md) for information about configuring monitoring in the Azure portal.</span></span>
* <span data-ttu-id="55a2e-125">**AzCopy**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-125">**AzCopy**.</span></span> <span data-ttu-id="55a2e-126">Los registros del servidor de Almacenamiento de Azure se almacenan como blobs, por lo que puede usar AzCopy para copiar estos blobs de registro en un directorio local y, luego, analizarlos con el analizador de mensajes de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="55a2e-126">Server logs for Azure Storage are stored as blobs, so you can use AzCopy to copy the log blobs to a local directory for analysis using Microsoft Message Analyzer.</span></span> <span data-ttu-id="55a2e-127">Consulte [Transferencia de datos con la utilidad en línea de comandos AzCopy](storage-use-azcopy.md) para obtener más información sobre AzCopy.</span><span class="sxs-lookup"><span data-stu-id="55a2e-127">See [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md) for more information about AzCopy.</span></span>
* <span data-ttu-id="55a2e-128">**Analizador de mensajes de Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-128">**Microsoft Message Analyzer**.</span></span> <span data-ttu-id="55a2e-129">El analizador de mensajes es una herramienta que usa archivos de registro y que muestra los datos de registro en un formato visual para que sean más fáciles de filtrar, buscar y agrupar en conjuntos útiles; gracias a esto, podrá analizar errores y problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-129">Message Analyzer is a tool that consumes log files and displays log data in a visual format that makes it easy to filter, search, and group log data into useful sets that you can use to analyze errors and performance issues.</span></span> <span data-ttu-id="55a2e-130">Vea la [Guía de funcionamiento del analizador de mensajes de Microsoft](http://technet.microsoft.com/library/jj649776.aspx) para más información sobre el analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-130">See [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx) for more information about Message Analyzer.</span></span>

## <a name="about-the-sample-scenario"></a><span data-ttu-id="55a2e-131">Acerca del escenario de ejemplo</span><span class="sxs-lookup"><span data-stu-id="55a2e-131">About the sample scenario</span></span>
<span data-ttu-id="55a2e-132">Para este tutorial, analizaremos un escenario donde las métricas de Almacenamiento de Azure indican una tasa de éxito de bajo porcentaje de una aplicación que llama a Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-132">For this tutorial, we'll examine a scenario where Azure Storage metrics indicates a low percent success rate for an application that calls Azure storage.</span></span> <span data-ttu-id="55a2e-133">La métrica de tasa de éxito de bajo porcentaje (señalada como **PercentSuccess** en [Azure Portal](https://portal.azure.com) y en las tablas de métricas) hace un seguimiento de las operaciones que se realizaron correctamente, pero que devolvieron un código de estado HTTP superior a 299.</span><span class="sxs-lookup"><span data-stu-id="55a2e-133">The low percent success rate metric (shown as **PercentSuccess** in the [Azure portal](https://portal.azure.com) and in the metrics tables) tracks operations that succeed, but that return an HTTP status code that is greater than 299.</span></span> <span data-ttu-id="55a2e-134">En los archivos de registro de almacenamiento del servidor, estas operaciones se registran con el estado de transacción **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-134">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span> <span data-ttu-id="55a2e-135">Para más información sobre la métrica de tasa de éxito de bajo porcentaje, vea [Las métricas muestran un PercentSuccess bajo o las entradas de registro de análisis tienen operaciones con el estado de transacción ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span><span class="sxs-lookup"><span data-stu-id="55a2e-135">For more details about the low percent success metric, see [Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span></span>

<span data-ttu-id="55a2e-136">Como parte de su funcionalidad habitual, es posible que las operaciones de Almacenamiento de Azure devuelvan códigos de estado HTTP mayores que 299.</span><span class="sxs-lookup"><span data-stu-id="55a2e-136">Azure Storage operations may return HTTP status codes greater than 299 as part of their normal functionality.</span></span> <span data-ttu-id="55a2e-137">Aun así, en algunos casos estos errores indicarán que es posible que pueda optimizar su aplicación cliente para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-137">But these errors in some cases indicate that you may be able to optimize your client application for improved performance.</span></span>

<span data-ttu-id="55a2e-138">En este escenario, todo aquello que esté por debajo del 100% será considerado como una tasa de bajo porcentaje de éxito.</span><span class="sxs-lookup"><span data-stu-id="55a2e-138">In this scenario, we'll consider a low percent success rate to be anything below 100%.</span></span> <span data-ttu-id="55a2e-139">Pero siempre puede elegir un nivel de métricas diferente acorde a sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="55a2e-139">You can choose a different metric level, however, according to your needs.</span></span> <span data-ttu-id="55a2e-140">Le recomendamos que, mientras esté probando la aplicación, establezca una tolerancia de línea de base de las métricas de rendimiento clave.</span><span class="sxs-lookup"><span data-stu-id="55a2e-140">We recommend that during testing of your application, you establish a baseline tolerance for your key performance metrics.</span></span> <span data-ttu-id="55a2e-141">Según las pruebas que haga, puede establecer que la aplicación tenga una tasa de porcentaje de éxito constante de, por ejemplo, un 90% o de un 85%.</span><span class="sxs-lookup"><span data-stu-id="55a2e-141">For example, you might determine, based on testing, that your application should have a consistent percent success rate of 90%, or 85%.</span></span> <span data-ttu-id="55a2e-142">Si los datos de las métricas arrojan que la aplicación se desvía de ese porcentaje, puede investigar para saber cuál es la causa del aumento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-142">If your metrics data shows that the application is deviating from that number, then you can investigate what may be causing the increase.</span></span>

<span data-ttu-id="55a2e-143">En nuestro escenario de ejemplo, una vez que hayamos establecido la métrica de tasa de porcentaje de éxito por debajo del 100%, revisaremos los registros para buscar los errores que guardan relación con las métricas y usarlos para averiguar cuál es la causa de la tasa de bajo porcentaje de éxito.</span><span class="sxs-lookup"><span data-stu-id="55a2e-143">For our sample scenario, once we've established that the percent success rate metric is below 100%, we will examine the logs to find the errors that correlate to the metrics, and use them to figure out what is causing the lower percent success rate.</span></span> <span data-ttu-id="55a2e-144">En concreto, revisaremos los errores del intervalo 400.</span><span class="sxs-lookup"><span data-stu-id="55a2e-144">We'll look specifically at errors in the 400 range.</span></span> <span data-ttu-id="55a2e-145">Después, revisaremos con más detalle los errores 404 (no encontrado).</span><span class="sxs-lookup"><span data-stu-id="55a2e-145">Then we'll more closely investigate 404 (Not Found) errors.</span></span>

### <a name="some-causes-of-400-range-errors"></a><span data-ttu-id="55a2e-146">Algunas de las causas de los errores del intervalo 400</span><span class="sxs-lookup"><span data-stu-id="55a2e-146">Some causes of 400-range errors</span></span>
<span data-ttu-id="55a2e-147">En los siguientes ejemplos se exponen algunas muestras de errores de intervalo 400 para solicitudes de almacenamiento de blobs de Azure, así como sus posibles causas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-147">The examples below shows a sampling of some 400-range errors for requests against Azure Blob Storage, and their possible causes.</span></span> <span data-ttu-id="55a2e-148">Cualquiera de estos errores, además de los errores en el intervalo 300 y el intervalo 500, pueden ser la razón de una tasa de bajo porcentaje de éxito.</span><span class="sxs-lookup"><span data-stu-id="55a2e-148">Any of these errors, as well as errors in the 300 range and the 500 range, can contribute to a low percent success rate.</span></span>

<span data-ttu-id="55a2e-149">Tenga en cuenta que las siguientes listas no están ni mucho menos completas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-149">Note that the lists below are far from complete.</span></span> <span data-ttu-id="55a2e-150">Vea [Códigos de estado y de error](http://msdn.microsoft.com/library/azure/dd179382.aspx) en MSDN para más información sobre los errores generales de Almacenamiento de Azure y sobre los errores específicos de cada uno de los servicios de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-150">See [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) on MSDN for details about general Azure Storage errors and about errors specific to each of the storage services.</span></span>

<span data-ttu-id="55a2e-151">**Ejemplos de código de estado 404 (no encontrado)**</span><span class="sxs-lookup"><span data-stu-id="55a2e-151">**Status Code 404 (Not Found) Examples**</span></span>

<span data-ttu-id="55a2e-152">Se produce cuando una operación de lectura en un contenedor o un blob falla porque no se puede encontrar el blob o el contenedor.</span><span class="sxs-lookup"><span data-stu-id="55a2e-152">Occurs when a read operation against a container or blob fails because the blob or container is not found.</span></span>

* <span data-ttu-id="55a2e-153">Se produce cuando otro cliente elimina un contenedor o un blob antes de realizar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="55a2e-153">Occurs if a container or blob has been deleted by another client before this request.</span></span>
* <span data-ttu-id="55a2e-154">Se produce si está usando una llamada API que crea el contenedor o el blob después de comprobar si existe.</span><span class="sxs-lookup"><span data-stu-id="55a2e-154">Occurs if you are using an API call that creates the container or blob after checking whether it exists.</span></span> <span data-ttu-id="55a2e-155">Las API de tipo CreateIfNotExists hacen primero una llamada HEAD para comprobar la existencia del contenedor o del blob; si no existe, se devuelve un error 404 y se realiza una segunda llamada PUT para escribir el contenedor o el blob.</span><span class="sxs-lookup"><span data-stu-id="55a2e-155">The CreateIfNotExists APIs make a HEAD call first to check for the existence of the container or blob; if it does not exist, a 404 error is returned, and then a second PUT call is made to write the container or blob.</span></span>

<span data-ttu-id="55a2e-156">**Ejemplos de código de estado de 409 (conflicto)**</span><span class="sxs-lookup"><span data-stu-id="55a2e-156">**Status Code 409 (Conflict) Examples**</span></span>

* <span data-ttu-id="55a2e-157">Se produce cuando usa una API de tipo Create para crear un contenedor o un blob sin comprobar si ya existen, o bien cuando ya hay otro contenedor u otro blob con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="55a2e-157">Occurs if you use a Create API to create a new container or blob, without checking for existence first, and a container or blob with that name already exists.</span></span>
* <span data-ttu-id="55a2e-158">Se produce si elimina un contenedor e intenta crear otro con el mismo nombre antes de que finalice la operación de eliminación.</span><span class="sxs-lookup"><span data-stu-id="55a2e-158">Occurs if a container is being deleted, and you attempt to create a new container with the same name before the deletion operation is complete.</span></span>
* <span data-ttu-id="55a2e-159">Se produce si especifica una concesión en un contenedor o un blob y ya hay una concesión.</span><span class="sxs-lookup"><span data-stu-id="55a2e-159">Occurs if you specify a lease on a container or blob, and there is already a lease present.</span></span>

<span data-ttu-id="55a2e-160">**Ejemplos de código de estado 412 (error de condición previa)**</span><span class="sxs-lookup"><span data-stu-id="55a2e-160">**Status Code 412 (Precondition Failed) Examples**</span></span>

* <span data-ttu-id="55a2e-161">Se produce cuando no se cumple la condición especificada por un encabezado condicional.</span><span class="sxs-lookup"><span data-stu-id="55a2e-161">Occurs when the condition specified by a conditional header has not been met.</span></span>
* <span data-ttu-id="55a2e-162">Se produce cuando el identificador de concesión especificado no coincide con el identificador de concesión en el contenedor o el blob.</span><span class="sxs-lookup"><span data-stu-id="55a2e-162">Occurs when the lease ID specified does not match the lease ID on the container or blob.</span></span>

## <a name="generate-log-files-for-analysis"></a><span data-ttu-id="55a2e-163">Generar archivos de registro para el análisis</span><span class="sxs-lookup"><span data-stu-id="55a2e-163">Generate log files for analysis</span></span>
<span data-ttu-id="55a2e-164">En este tutorial, usaremos el analizador de mensajes para trabajar con tres tipos diferentes de archivos de registro, aunque también puede trabajar con cualquiera de los siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="55a2e-164">In this tutorial, we'll use Message Analyzer to work with three different types of log files, although you could choose to work with any one of these:</span></span>

* <span data-ttu-id="55a2e-165">El **registro del servidor**, que se crea cuando se habilita el registro de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-165">The **server log**, which is created when you enable Azure Storage logging.</span></span> <span data-ttu-id="55a2e-166">El registro del servidor contiene datos sobre cada operación a la que haya llamado alguno de los servicios de Almacenamiento de Azure: blob, cola, tabla y archivo.</span><span class="sxs-lookup"><span data-stu-id="55a2e-166">The server log contains data about each operation called against one of the Azure Storage services - blob, queue, table, and file.</span></span> <span data-ttu-id="55a2e-167">El registro del servidor indica a qué operación se llamó y qué código de estado fue devuelto, así como otros detalles sobre la solicitud y la respuesta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-167">The server log indicates which operation was called and what status code was returned, as well as other details about the request and response.</span></span>
* <span data-ttu-id="55a2e-168">El **registro de cliente de .NET**, que se crea cuando se habilita el registro del lado cliente desde la aplicación .NET.</span><span class="sxs-lookup"><span data-stu-id="55a2e-168">The **.NET client log**, which is created when you enable client-side logging from within your .NET application.</span></span> <span data-ttu-id="55a2e-169">El registro de cliente contiene información detallada sobre el modo en que el cliente prepara la solicitud y recibe y procesa la respuesta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-169">The client log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>
* <span data-ttu-id="55a2e-170">El **registro de seguimiento de red HTTP**, que recopila datos sobre las solicitudes HTTP/HTTPS y datos de respuesta, incluidas las operaciones de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-170">The **HTTP network trace log**, which collects data on HTTP/HTTPS request and response data, including for operations against Azure Storage.</span></span> <span data-ttu-id="55a2e-171">En este tutorial, crearemos un seguimiento de red a través del analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-171">In this tutorial, we'll generate the network trace via Message Analyzer.</span></span>

### <a name="configure-server-side-logging-and-metrics"></a><span data-ttu-id="55a2e-172">Configurar el registro y las métricas del lado servidor</span><span class="sxs-lookup"><span data-stu-id="55a2e-172">Configure server-side logging and metrics</span></span>
<span data-ttu-id="55a2e-173">Primero, necesitaremos configurar el registro y las métricas de Almacenamiento de Azure para disponer de datos de la aplicación cliente que analizar.</span><span class="sxs-lookup"><span data-stu-id="55a2e-173">First, we'll need to configure Azure Storage logging and metrics, so that we have data from the client application to analyze.</span></span> <span data-ttu-id="55a2e-174">El registro y las métricas se pueden configurar de varias maneras: a través de [Azure Portal](https://portal.azure.com), con PowerShell o mediante programación.</span><span class="sxs-lookup"><span data-stu-id="55a2e-174">You can configure logging and metrics in a variety of ways - via the [Azure portal](https://portal.azure.com), by using PowerShell, or programmatically.</span></span> <span data-ttu-id="55a2e-175">Consulte [Habilitación de las Métricas de almacenamiento y las Métricas de visualización](http://msdn.microsoft.com/library/azure/dn782843.aspx) y [Habilitación del registro de almacenamiento y acceso a los datos del registro](http://msdn.microsoft.com/library/azure/dn782840.aspx) en MSDN para más información sobre la configuración del registro y las métricas</span><span class="sxs-lookup"><span data-stu-id="55a2e-175">See [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) and [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) on MSDN for details about configuring logging and metrics.</span></span>

<span data-ttu-id="55a2e-176">**Mediante Azure Portal**</span><span class="sxs-lookup"><span data-stu-id="55a2e-176">**Via the Azure portal**</span></span>

<span data-ttu-id="55a2e-177">Para configurar el registro y las métricas de la cuenta de almacenamiento mediante [Azure Portal](https://portal.azure.com), siga las instrucciones que encontrará en el apartado [Supervisión de una cuenta de almacenamiento en Azure Portal](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="55a2e-177">To configure logging and metrics for your storage account using the [Azure portal](https://portal.azure.com), follow the instructions at [Monitor a storage account in the Azure portal](storage-monitor-storage-account.md).</span></span>

> [!NOTE]
> <span data-ttu-id="55a2e-178">No se pueden establecer métricas por minuto con Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-178">It's not possible to set minute metrics using the Azure portal.</span></span> <span data-ttu-id="55a2e-179">pero le recomendamos establecerlas en este tutorial para investigar cualquier problema de rendimiento que ocurra en su aplicación.</span><span class="sxs-lookup"><span data-stu-id="55a2e-179">However, we recommend that you do set them for the purposes of this tutorial, and for investigating performance issues with your application.</span></span> <span data-ttu-id="55a2e-180">Las métricas por minuto se pueden establecer con PowerShell (tal como se indica aquí) o mediante programación con la biblioteca de cliente de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-180">You can set minute metrics using PowerShell as shown below, or programmatically using the storage client library.</span></span>
> 
> <span data-ttu-id="55a2e-181">Tenga en cuenta que Azure Portal no mostrará las métricas por minuto, solo las métricas por horas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-181">Note that the Azure portal cannot display minute metrics, only hourly metrics.</span></span>
> 
> 

<span data-ttu-id="55a2e-182">**Con PowerShell**</span><span class="sxs-lookup"><span data-stu-id="55a2e-182">**Via PowerShell**</span></span>

<span data-ttu-id="55a2e-183">Para empezar a usar PowerShell para Azure, vea el tema sobre [cómo instalar y configurar PowerShell de Azure](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="55a2e-183">To get started with PowerShell for Azure, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

1. <span data-ttu-id="55a2e-184">Use el cmdlet [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) para agregar la cuenta de usuario de Azure a la ventana de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="55a2e-184">Use the [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet to add your Azure user account to the PowerShell window:</span></span>
   
    ```powershell
    Add-AzureAccount
    ```

2. <span data-ttu-id="55a2e-185">En la ventana de **inicio de sesión en Microsoft Azure** , escriba la dirección de correo electrónico y contraseña asociadas a su cuenta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-185">In the **Sign in to Microsoft Azure** window, type the email address and password associated with your account.</span></span> <span data-ttu-id="55a2e-186">Azure autentica y guarda las credenciales y, luego, cierra la ventana.</span><span class="sxs-lookup"><span data-stu-id="55a2e-186">Azure authenticates and saves the credential information, and then closes the window.</span></span>
3. <span data-ttu-id="55a2e-187">Ejecute los siguientes comandos en la ventana de PowerShell para establecer la cuenta de almacenamiento predeterminada en la cuenta de almacenamiento que esté usando en este tutorial:</span><span class="sxs-lookup"><span data-stu-id="55a2e-187">Set the default storage account to the storage account you are using for the tutorial by executing these commands in the PowerShell window:</span></span>
   
    ```powershell
    $SubscriptionName = 'Your subscription name'
    $StorageAccountName = 'yourstorageaccount'
    Set-AzureSubscription -CurrentStorageAccountName $StorageAccountName -SubscriptionName $SubscriptionName
    ```

4. <span data-ttu-id="55a2e-188">Habilite el registro de almacenamiento para el servicio BLOB:</span><span class="sxs-lookup"><span data-stu-id="55a2e-188">Enable storage logging for the Blob service:</span></span>
   
    ```powershell
    Set-AzureStorageServiceLoggingProperty -ServiceType Blob -LoggingOperations Read,Write,Delete -PassThru -RetentionDays 7 -Version 1.0
    ```

5. <span data-ttu-id="55a2e-189">Habilite las métricas de almacenamiento del servicio BLOB, procurando establecer **-MetricsType** en `Minute`:</span><span class="sxs-lookup"><span data-stu-id="55a2e-189">Enable storage metrics for the Blob service, making sure to set **-MetricsType** to `Minute`:</span></span>
   
    ```powershell
    Set-AzureStorageServiceMetricsProperty -ServiceType Blob -MetricsType Minute -MetricsLevel ServiceAndApi -PassThru -RetentionDays 7 -Version 1.0
    ```

### <a name="configure-net-client-side-logging"></a><span data-ttu-id="55a2e-190">Configurar el registro del lado cliente de .NET</span><span class="sxs-lookup"><span data-stu-id="55a2e-190">Configure .NET client-side logging</span></span>
<span data-ttu-id="55a2e-191">Para configurar el registro del lado cliente de una aplicación .NET, habilite los diagnósticos .NET en el archivo de configuración de la aplicación (web.config o app.config).</span><span class="sxs-lookup"><span data-stu-id="55a2e-191">To configure client-side logging for a .NET application, enable .NET diagnostics in the application's configuration file (web.config or app.config).</span></span> <span data-ttu-id="55a2e-192">Consulte [Inicio de sesión del lado cliente con la Biblioteca del cliente de almacenamiento de .NET](http://msdn.microsoft.com/library/azure/dn782839.aspx) y [Registro del lado cliente con el SDK de Microsoft Azure Storage para Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) en MSDN para más información.</span><span class="sxs-lookup"><span data-stu-id="55a2e-192">See [Client-side Logging with the .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) and [Client-side Logging with the Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) on MSDN for details.</span></span>

<span data-ttu-id="55a2e-193">El registro del lado cliente incluye información detallada sobre el modo en que el cliente prepara la solicitud y recibe y procesa la respuesta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-193">The client-side log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>

<span data-ttu-id="55a2e-194">La biblioteca de cliente de almacenamiento almacena datos de registro del lado cliente en la ubicación que se especificó en el archivo de configuración de la aplicación (web.config o app.config).</span><span class="sxs-lookup"><span data-stu-id="55a2e-194">The Storage Client Library stores client-side log data in the location specified in the application's configuration file (web.config or app.config).</span></span>

### <a name="collect-a-network-trace"></a><span data-ttu-id="55a2e-195">Recopilar un seguimiento de red</span><span class="sxs-lookup"><span data-stu-id="55a2e-195">Collect a network trace</span></span>
<span data-ttu-id="55a2e-196">Puede usar el analizador de mensajes para recopilar un seguimiento de red HTTP/HTTPS mientras la aplicación cliente se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-196">You can use Message Analyzer to collect an HTTP/HTTPS network trace while your client application is running.</span></span> <span data-ttu-id="55a2e-197">El analizador de mensajes usa [Fiddler](http://www.telerik.com/fiddler) en el back-end.</span><span class="sxs-lookup"><span data-stu-id="55a2e-197">Message Analyzer uses [Fiddler](http://www.telerik.com/fiddler) on the back end.</span></span> <span data-ttu-id="55a2e-198">Antes de recopilar el seguimiento de red, le recomendamos que configure Fiddler para registrar el tráfico HTTPS sin cifrar:</span><span class="sxs-lookup"><span data-stu-id="55a2e-198">Before you collect the network trace, we recommend that you configure Fiddler to record unencrypted HTTPS traffic:</span></span>

1. <span data-ttu-id="55a2e-199">Instale [Fiddler](http://www.telerik.com/download/fiddler).</span><span class="sxs-lookup"><span data-stu-id="55a2e-199">Install [Fiddler](http://www.telerik.com/download/fiddler).</span></span>
2. <span data-ttu-id="55a2e-200">Inicie Fiddler.</span><span class="sxs-lookup"><span data-stu-id="55a2e-200">Launch Fiddler.</span></span>
3. <span data-ttu-id="55a2e-201">Seleccione **Tools | Fiddler Options** (Herramientas | Opciones de Fiddler).</span><span class="sxs-lookup"><span data-stu-id="55a2e-201">Select **Tools | Fiddler Options**.</span></span>
4. <span data-ttu-id="55a2e-202">En el cuadro de diálogo de opciones, asegúrese de que las opciones **Capture HTTPS CONNECTs** (Capturar CONEXIONES HTTPS) y **Decrypt HTTPS Traffic** (Descifrar tráfico HTTPS) están seleccionadas, tal y como se muestra aquí.</span><span class="sxs-lookup"><span data-stu-id="55a2e-202">In the Options dialog, ensure that **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** are both selected, as shown below.</span></span>

![Configurar opciones de Fiddler](./media/storage-e2e-troubleshooting/fiddler-options-1.png)

<span data-ttu-id="55a2e-204">En este tutorial, primero deberá recopilar y guardar un seguimiento de red en el analizador de mensajes y, luego, crear una sesión de análisis para analizar el seguimiento y los registros.</span><span class="sxs-lookup"><span data-stu-id="55a2e-204">For the tutorial, collect and save a network trace first in Message Analyzer, then create an analysis session to analyze the trace and the logs.</span></span> <span data-ttu-id="55a2e-205">Para recopilar un seguimiento de red en el analizador de mensajes:</span><span class="sxs-lookup"><span data-stu-id="55a2e-205">To collect a network trace in Message Analyzer:</span></span>

1. <span data-ttu-id="55a2e-206">En el analizador de mensajes, seleccione **File | Quick Trace | Unencrypted HTTPS** (Archivo | Seguimiento rápido | HTTPS sin cifrar).</span><span class="sxs-lookup"><span data-stu-id="55a2e-206">In Message Analyzer, select **File | Quick Trace | Unencrypted HTTPS**.</span></span>
2. <span data-ttu-id="55a2e-207">El seguimiento se iniciará inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-207">The trace will begin immediately.</span></span> <span data-ttu-id="55a2e-208">Seleccione **Stop** (Detener) para detener el seguimiento y poder configurarlo para que solo haga el seguimiento del tráfico de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-208">Select **Stop** to stop the trace so that we can configure it to trace storage traffic only.</span></span>
3. <span data-ttu-id="55a2e-209">Seleccione **Edit** (Editar) para editar la sesión de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-209">Select **Edit** to edit the tracing session.</span></span>
4. <span data-ttu-id="55a2e-210">Seleccione el vínculo **Configure** (Configurar) que está a la derecha del proveedor ETW **Microsoft-Pef-WebProxy**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-210">Select the **Configure** link to the right of the **Microsoft-Pef-WebProxy** ETW provider.</span></span>
5. <span data-ttu-id="55a2e-211">En el cuadro de diálogo **Advanced Settings** (Configuración avanzada), haga clic en la pestaña **Provider** (Proveedor).</span><span class="sxs-lookup"><span data-stu-id="55a2e-211">In the **Advanced Settings** dialog, click the **Provider** tab.</span></span>
6. <span data-ttu-id="55a2e-212">En el campo **Hostname Filter** (Filtro de nombre de host), especifique los puntos de conexión de almacenamiento, separados por espacios.</span><span class="sxs-lookup"><span data-stu-id="55a2e-212">In the **Hostname Filter** field, specify your storage endpoints, separated by spaces.</span></span> <span data-ttu-id="55a2e-213">Por ejemplo, puede especificar los extremos cambiando `storagesample` por el nombre de su cuenta de almacenamiento. Así:</span><span class="sxs-lookup"><span data-stu-id="55a2e-213">For example, you can specify your endpoints as follows; change `storagesample` to the name of your storage account:</span></span>

    ```   
    storagesample.blob.core.windows.net storagesample.queue.core.windows.net storagesample.table.core.windows.net
    ```

7. <span data-ttu-id="55a2e-214">Salga del cuadro de diálogo y haga clic en **Restart** (Reiniciar) para empezar a recopilar el seguimiento con el filtro de nombre de host activado, de modo que solo se incluya en el seguimiento el tráfico de red de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-214">Exit the dialog, and click **Restart** to begin collecting the trace with the hostname filter in place, so that only Azure Storage network traffic is included in the trace.</span></span>

> [!NOTE]
> <span data-ttu-id="55a2e-215">Una vez finalizada la recopilación del seguimiento de red, le recomendamos restablecer la configuración inicial de Fiddler para descifrar el tráfico HTTPS.</span><span class="sxs-lookup"><span data-stu-id="55a2e-215">After you have finished collecting your network trace, we strongly recommend that you revert the settings that you may have changed in Fiddler to decrypt HTTPS traffic.</span></span> <span data-ttu-id="55a2e-216">En el cuadro de diálogo de opciones de Fiddler, desactive las casillas **Capture HTTPS CONNECTs** (Capturar CONEXIONES HTTPS) y **Decrypt HTTPS Traffic** (Descifrar tráfico HTTPS).</span><span class="sxs-lookup"><span data-stu-id="55a2e-216">In the Fiddler Options dialog, deselect the **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** checkboxes.</span></span>
> 
> 

<span data-ttu-id="55a2e-217">Vea el tema sobre el [uso de las características de seguimiento de red](http://technet.microsoft.com/library/jj674819.aspx) en TechNet para más información.</span><span class="sxs-lookup"><span data-stu-id="55a2e-217">See [Using the Network Tracing Features](http://technet.microsoft.com/library/jj674819.aspx) on Technet for more details.</span></span>

## <a name="review-metrics-data-in-the-azure-portal"></a><span data-ttu-id="55a2e-218">Revisar los datos de las métricas en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="55a2e-218">Review metrics data in the Azure portal</span></span>
<span data-ttu-id="55a2e-219">Una vez que la aplicación haya estado en ejecución durante un rato, puede revisar los gráficos de las métricas que aparezcan en [Azure Portal](https://portal.azure.com) para ver el rendimiento de su servicio.</span><span class="sxs-lookup"><span data-stu-id="55a2e-219">Once your application has been running for a period of time, you can review the metrics charts that appear in the [Azure portal](https://portal.azure.com) to observe how your service has been performing.</span></span>

<span data-ttu-id="55a2e-220">Primero, vaya a la cuenta de almacenamiento en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-220">First, navigate to your storage account in the Azure portal.</span></span> <span data-ttu-id="55a2e-221">De forma predeterminada, se muestra un diagrama de supervisión con la métrica  **Porcentaje de operaciones correctas**  en la hoja de la cuenta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-221">By default, a monitoring chart with the **Success percentage** metric is displayed on the account blade.</span></span> <span data-ttu-id="55a2e-222">Si ha modificado el gráfico para mostrar diferentes métricas, agregue la métrica **Porcentaje de operaciones correctas**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-222">If you've previously modified the chart to display different metrics, add the **Success percentage** metric.</span></span>

<span data-ttu-id="55a2e-223">Ahora verá el **Porcentaje de operaciones correctas** en el diagrama de supervisión, junto con otras métricas que pueda haber agregado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-223">You'll now see **Success percentage** in the monitoring chart, along with any other metrics you may have added.</span></span> <span data-ttu-id="55a2e-224">En el escenario que pasaremos a examinar mediante el análisis de los registros del analizador de mensajes, podrá ver que la tasa de porcentaje de éxito es ligeramente inferior al 100 %.</span><span class="sxs-lookup"><span data-stu-id="55a2e-224">In the scenario we'll investigate next by analyzing the logs in Message Analyzer, the percent success rate is somewhat below 100%.</span></span>

<span data-ttu-id="55a2e-225">Para obtener más información sobre cómo agregar y personalizar gráficos de métricas, vea [Personalización de gráficos de métricas](storage-monitor-storage-account.md#customize-metrics-charts).</span><span class="sxs-lookup"><span data-stu-id="55a2e-225">For more details on adding and customizing metrics charts, see [Customize metrics charts](storage-monitor-storage-account.md#customize-metrics-charts).</span></span>

> [!NOTE]
> <span data-ttu-id="55a2e-226">Una vez habilitadas las métricas de almacenamiento, los datos de las métricas tardarán un rato en aparecer en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-226">It may take some time for your metrics data to appear in the Azure portal after you enable storage metrics.</span></span> <span data-ttu-id="55a2e-227">Hasta que no haya transcurrido la hora actual, las métricas de la hora anterior no se mostrarán en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-227">This is because hourly metrics for the previous hour are not displayed in the Azure portal until the current hour has elapsed.</span></span> <span data-ttu-id="55a2e-228">Asimismo, recuerde que las métricas por minuto no se muestran en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="55a2e-228">Also, minute metrics are not currently displayed in the Azure portal.</span></span> <span data-ttu-id="55a2e-229">así que es posible que tarde hasta dos horas en ver los datos de las métricas tras habilitarlas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-229">So depending on when you enable metrics, it may take up to two hours to see metrics data.</span></span>
> 
> 

## <a name="use-azcopy-to-copy-server-logs-to-a-local-directory"></a><span data-ttu-id="55a2e-230">Usar AzCopy para copiar registros del servidor en un directorio local</span><span class="sxs-lookup"><span data-stu-id="55a2e-230">Use AzCopy to copy server logs to a local directory</span></span>
<span data-ttu-id="55a2e-231">Almacenamiento de Azure escribe datos de registro del servidor en blobs, mientras que las métricas se escriben en tablas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-231">Azure Storage writes server log data to blobs, while metrics are written to tables.</span></span> <span data-ttu-id="55a2e-232">Los blobs de registro se encuentran disponibles en el conocido contenedor `$logs` de su cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-232">Log blobs are available in the well-known `$logs` container for your storage account.</span></span> <span data-ttu-id="55a2e-233">Estos blobs de registro se pueden identificar de forma jerárquica por año, mes, día y hora, lo que hace que se pueda localizar fácilmente el intervalo de tiempo que quiera examinar.</span><span class="sxs-lookup"><span data-stu-id="55a2e-233">Log blobs are named hierarchically by year, month, day, and hour, so that you can easily locate the range of time you wish to investigate.</span></span> <span data-ttu-id="55a2e-234">Por ejemplo, en la cuenta `storagesample`, el contenedor para los blobs de registro del 01/02/2015 de 8:00 a 9:00 de la mañana es `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span><span class="sxs-lookup"><span data-stu-id="55a2e-234">For example, in the `storagesample` account, the container for the log blobs for 01/02/2015, from 8-9 am, is `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span></span> <span data-ttu-id="55a2e-235">Los blobs individuales en este contenedor poseen nombres secuenciales y comienzan por `000000.log`.</span><span class="sxs-lookup"><span data-stu-id="55a2e-235">The individual blobs in this container are named sequentially, beginning with `000000.log`.</span></span>

<span data-ttu-id="55a2e-236">Puede usar la herramienta de línea de comandos AzCopy para descargar estos archivos de registro del lado servidor en una ubicación de su elección en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="55a2e-236">You can use the AzCopy command-line tool to download these server-side log files to a location of your choice on your local machine.</span></span> <span data-ttu-id="55a2e-237">Por ejemplo, puede usar el siguiente comando para descargar en la carpeta `C:\Temp\Logs\Server` los archivos de registro de las operaciones de blob que tuvieron lugar el 2 de enero de 2015; reemplace `<storageaccountname>` por el nombre de su cuenta de almacenamiento y `<storageaccountkey>`, por su clave de acceso de cuenta:</span><span class="sxs-lookup"><span data-stu-id="55a2e-237">For example, you can use the following command to download the log files for blob operations that took place on January 2, 2015 to the folder `C:\Temp\Logs\Server`; replace `<storageaccountname>` with the name of your storage account, and `<storageaccountkey>` with your account access key:</span></span>

```azcopy
AzCopy.exe /Source:http://<storageaccountname>.blob.core.windows.net/$logs /Dest:C:\Temp\Logs\Server /Pattern:"blob/2015/01/02" /SourceKey:<storageaccountkey> /S /V
```
<span data-ttu-id="55a2e-238">AzCopy está disponible para su descarga en la página de [descargas de Azure](https://azure.microsoft.com/downloads/) .</span><span class="sxs-lookup"><span data-stu-id="55a2e-238">AzCopy is available for download on the [Azure Downloads](https://azure.microsoft.com/downloads/) page.</span></span> <span data-ttu-id="55a2e-239">Para obtener más información sobre cómo usar AzCopy, consulte [Transferencia de datos con la utilidad en línea de comandos AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="55a2e-239">For details about using AzCopy, see [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="55a2e-240">Para obtener más información sobre cómo descargar los registros del lado servidor, consulte [Descarga de datos de registro del registro de almacenamiento](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span><span class="sxs-lookup"><span data-stu-id="55a2e-240">For additional information about downloading server-side logs, see [Download Storage Logging log data](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span></span>

## <a name="use-microsoft-message-analyzer-to-analyze-log-data"></a><span data-ttu-id="55a2e-241">Usar el analizador de mensajes de Microsoft para analizar los datos de registro</span><span class="sxs-lookup"><span data-stu-id="55a2e-241">Use Microsoft Message Analyzer to analyze log data</span></span>
<span data-ttu-id="55a2e-242">El analizador de mensajes de Microsoft es una herramienta para capturar, mostrar y analizar el protocolo del tráfico de mensajes, eventos y otros mensajes del sistema o de una aplicación, usando para ello escenarios de diagnóstico y de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-242">Microsoft Message Analyzer is a tool for capturing, displaying, and analyzing protocol messaging traffic, events, and other system or application messages in troubleshooting and diagnostic scenarios.</span></span> <span data-ttu-id="55a2e-243">El analizador de mensajes también permite cargar, agregar y analizar los datos procedentes de registros y de archivos de seguimiento guardados.</span><span class="sxs-lookup"><span data-stu-id="55a2e-243">Message Analyzer also enables you to load, aggregate, and analyze data from log and saved trace files.</span></span> <span data-ttu-id="55a2e-244">Para más información sobre el analizador de mensajes, vea la [Guía de funcionamiento del analizador de mensajes de Microsoft](http://technet.microsoft.com/library/jj649776.aspx).</span><span class="sxs-lookup"><span data-stu-id="55a2e-244">For more information about Message Analyzer, see [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx).</span></span>

<span data-ttu-id="55a2e-245">El analizador de mensajes incluye herramientas del servicio Almacenamiento de Azure que hacen más fácil analizar los registros de red, de cliente y de servidor.</span><span class="sxs-lookup"><span data-stu-id="55a2e-245">Message Analyzer includes assets for Azure Storage that help you to analyze server, client, and network logs.</span></span> <span data-ttu-id="55a2e-246">En esta sección, abordaremos el uso de estas herramientas para solucionar el problema del bajo porcentaje de éxito en los registros de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-246">In this section, we'll discuss how to use those tools to address the issue of low percent success in the storage logs.</span></span>

### <a name="download-and-install-message-analyzer-and-the-azure-storage-assets"></a><span data-ttu-id="55a2e-247">Descargar e instalar el analizador de mensajes y las herramientas de Almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="55a2e-247">Download and install Message Analyzer and the Azure Storage Assets</span></span>
1. <span data-ttu-id="55a2e-248">Descargue el [analizador de mensajes](http://www.microsoft.com/download/details.aspx?id=44226) del Centro de descarga de Microsoft y ejecute el programa de instalación.</span><span class="sxs-lookup"><span data-stu-id="55a2e-248">Download [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) from the Microsoft Download Center, and run the installer.</span></span>
2. <span data-ttu-id="55a2e-249">Inicie el analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-249">Launch Message Analyzer.</span></span>
3. <span data-ttu-id="55a2e-250">En el menú **Herramientas**, seleccione **Administrador de activos**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-250">From the **Tools** menu, select **Asset Manager**.</span></span> <span data-ttu-id="55a2e-251">En el cuadro de diálogo **Administrador de activos**, seleccione **Descargas** y filtre por **Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-251">In the **Asset Manager** dialog, select **Downloads**, then filter on **Azure Storage**.</span></span> <span data-ttu-id="55a2e-252">Verá las herramientas de Almacenamiento de Azure como se muestra en la imagen de abajo.</span><span class="sxs-lookup"><span data-stu-id="55a2e-252">You will see the Azure Storage Assets, as shown in the picture below.</span></span>
4. <span data-ttu-id="55a2e-253">Haga clic en **Sync All Displayed Items** (Sincronizar todos los elementos que se muestran) para instalar las herramientas de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-253">Click **Sync All Displayed Items** to install the Azure Storage Assets.</span></span> <span data-ttu-id="55a2e-254">Tiene disponibles los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="55a2e-254">The available assets include:</span></span>
   * <span data-ttu-id="55a2e-255">**Reglas de color de Almacenamiento Azure:** las reglas de color de Almacenamiento de Azure permiten definir filtros especiales que usan estilos de color, texto y fuente para resaltar los mensajes que contengan información específica en un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="55a2e-255">**Azure Storage Color Rules:** Azure Storage color rules enable you to define special filters that use color, text, and font styles to highlight messages that contain specific information in a trace.</span></span>
   * <span data-ttu-id="55a2e-256">**Gráficos de Almacenamiento de Azure:** los gráficos de Almacenamiento de Azure son gráficos predefinidos que en los que se trazan datos de los registro de servidor.</span><span class="sxs-lookup"><span data-stu-id="55a2e-256">**Azure Storage Charts:** Azure Storage charts are predefined charts that graph server log data.</span></span> <span data-ttu-id="55a2e-257">Tenga en cuenta que, actualmente, el uso de los gráficos de Almacenamiento de Azure se reduce únicamente a cargar el registro del servidor en la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-257">Note that to use Azure Storage charts at this time, you may only load the server log into the Analysis Grid.</span></span>
   * <span data-ttu-id="55a2e-258">**Analizadores de Almacenamiento de Azure:** los analizadores de Almacenamiento de Azure analizan los registros de cliente, servidor y HTTP del Almacenamiento de Azure para mostrarlos en la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-258">**Azure Storage Parsers:** The Azure Storage parsers parse the Azure Storage client, server, and HTTP logs in order to display them in the Analysis Grid.</span></span>
   * <span data-ttu-id="55a2e-259">**Filtros de Almacenamiento de Azure:** los filtros de Almacenamiento de Azure son criterios predefinidos que sirven para consultar los datos en la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-259">**Azure Storage Filters:** Azure Storage filters are predefined criteria that you can use to query your data in the Analysis Grid.</span></span>
   * <span data-ttu-id="55a2e-260">**Diseños de vista de Almacenamiento Azure:** los diseños de vista de Almacenamiento de Azure son diseños y agrupaciones de columna predefinidos en la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-260">**Azure Storage View Layouts:** Azure Storage view layouts are predefined column layouts and groupings in the Analysis Grid.</span></span>
5. <span data-ttu-id="55a2e-261">Reinicie el analizador de mensajes después de haber instalado estas herramientas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-261">Restart Message Analyzer after you've installed the assets.</span></span>

![Administrador de activos del analizador de mensajes](./media/storage-e2e-troubleshooting/mma-start-page-1.png)

> [!NOTE]
> <span data-ttu-id="55a2e-263">Instale todas las herramientas de Almacenamiento de Azure que se muestran para poder realizar este tutorial.</span><span class="sxs-lookup"><span data-stu-id="55a2e-263">Install all of the Azure Storage assets shown for the purposes of this tutorial.</span></span>
> 
> 

### <a name="import-your-log-files-into-message-analyzer"></a><span data-ttu-id="55a2e-264">Importar los archivos de registro al analizador de mensajes</span><span class="sxs-lookup"><span data-stu-id="55a2e-264">Import your log files into Message Analyzer</span></span>
<span data-ttu-id="55a2e-265">Puede importar todos los archivos de registro guardados (del lado servidor, del lado cliente y de red) en una sola sesión en el analizador de mensajes de Microsoft para analizarlos.</span><span class="sxs-lookup"><span data-stu-id="55a2e-265">You can import all of your saved log files (server-side, client-side, and network) into a single session in Microsoft Message Analyzer for analysis.</span></span>

1. <span data-ttu-id="55a2e-266">En el menú **File** (Archivo) del analizador de mensajes de Microsoft, haga clic en **New Session** (Nueva sesión) y, luego, en **Blank Session** (Sesión en blanco).</span><span class="sxs-lookup"><span data-stu-id="55a2e-266">On the **File** menu in Microsoft Message Analyzer, click **New Session**, and then click **Blank Session**.</span></span> <span data-ttu-id="55a2e-267">En el cuadro de diálogo **New Session** (Nueva sesión), escriba un nombre para la sesión de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-267">In the **New Session** dialog, enter a name for your analysis session.</span></span> <span data-ttu-id="55a2e-268">En el panel **Session Details** (Detalles de la sesión), haga clic en el botón **Files** (Archivos).</span><span class="sxs-lookup"><span data-stu-id="55a2e-268">In the **Session Details** panel, click on the **Files** button.</span></span>
2. <span data-ttu-id="55a2e-269">Para cargar los datos de seguimiento de red generados por el analizador de mensajes, haga clic en **Add Files** (Agregar archivos), vaya a la ubicación donde guardó el archivo .matp correspondiente a la sesión de seguimiento web, seleccione el archivo .matp y haga clic en **Open** (Abrir).</span><span class="sxs-lookup"><span data-stu-id="55a2e-269">To load the network trace data generated by Message Analyzer, click on **Add Files**, browse to the location where you saved your .matp file from your web tracing session, select the .matp file, and click **Open**.</span></span>
3. <span data-ttu-id="55a2e-270">Para cargar los datos del registro del lado servidor, haga clic en **Add Files** (Agregar archivos), vaya a la ubicación donde descargó los registros del lado servidor, seleccione los archivos de registro para el intervalo de tiempo que desee analizar y haga clic en **Open** (Abrir).</span><span class="sxs-lookup"><span data-stu-id="55a2e-270">To load the server-side log data, click on **Add Files**, browse to the location where you downloaded your server-side logs, select the log files for the time range you want to analyze, and click **Open**.</span></span> <span data-ttu-id="55a2e-271">Tras esto, en el panel **Session Details** (Detalles de la sesión), establezca el elemento desplegable **Text Log Configuration** (Configuración del registro de texto) de cada archivo de registro del lado servidor en **AzureStorageLog**; así, se asegurará de que el analizador de mensajes de Microsoft puede analizar correctamente el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="55a2e-271">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each server-side log file to **AzureStorageLog** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
4. <span data-ttu-id="55a2e-272">Para cargar los datos del registro del lado cliente, haga clic en **Add Files** (Agregar archivos), vaya a la ubicación donde guardó los registros del lado cliente, seleccione los archivos de registro que quiera analizar y haga clic en **Open** (Abrir).</span><span class="sxs-lookup"><span data-stu-id="55a2e-272">To load the client-side log data, click on **Add Files**, browse to the location where you saved your client-side logs, select the log files you want to analyze, and click **Open**.</span></span> <span data-ttu-id="55a2e-273">Posteriormente, en el panel **Session Details** (Detalles de la sesión), establezca el elemento desplegable **Text Log Configuration** (Configuración del registro de texto) de cada archivo de registro del lado cliente en **AzureStorageClientDotNetV4**; así, se asegurará de que el analizador de mensajes de Microsoft puede analizar correctamente el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="55a2e-273">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each client-side log file to **AzureStorageClientDotNetV4** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
5. <span data-ttu-id="55a2e-274">Haga clic en **Start** (Iniciar) en el cuadro de diálogo **New Session** (Nueva sesión) para cargar y analizar los datos de registro.</span><span class="sxs-lookup"><span data-stu-id="55a2e-274">Click **Start** in the **New Session** dialog to load and parse the log data.</span></span> <span data-ttu-id="55a2e-275">Los datos de registro se muestran en la cuadrícula de análisis del analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-275">The log data displays in the Message Analyzer Analysis Grid.</span></span>

<span data-ttu-id="55a2e-276">En la siguiente imagen se muestra una sesión de ejemplo configurada con archivos de registro de servidor, de cliente y seguimiento de red.</span><span class="sxs-lookup"><span data-stu-id="55a2e-276">The picture below shows an example session configured with server, client, and network trace log files.</span></span>

![Configurar una sesión del analizador de mensajes](./media/storage-e2e-troubleshooting/configure-mma-session-1.png)

<span data-ttu-id="55a2e-278">Tenga en cuenta que el analizador de mensajes carga los archivos en la memoria.</span><span class="sxs-lookup"><span data-stu-id="55a2e-278">Note that Message Analyzer loads log files into memory.</span></span> <span data-ttu-id="55a2e-279">Si tiene una gran cantidad de datos de registro, seguramente quiera filtrarlos para lograr un rendimiento óptimo del analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-279">If you have a large set of log data, you will want to filter it in order to get the best performance from Message Analyzer.</span></span>

<span data-ttu-id="55a2e-280">Primero, deberá indicar el intervalo de tiempo que desea revisar e intentar que este sea lo más reducido posible.</span><span class="sxs-lookup"><span data-stu-id="55a2e-280">First, determine the time frame that you are interested in reviewing, and keep this time frame as small as possible.</span></span> <span data-ttu-id="55a2e-281">Es probable que en la mayoría de casos solo quiera revisar un período de minutos o, como mucho, de horas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-281">In many cases you will want to review a period of minutes or hours at most.</span></span> <span data-ttu-id="55a2e-282">Importe el conjunto más pequeño de registros que le resulte más adecuado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-282">Import the smallest set of logs that can meet your needs.</span></span>

<span data-ttu-id="55a2e-283">Si, aun así, la cantidad de datos de registro es demasiado grande, conviene delimitarlos con un filtro de sesión antes de cargarlos.</span><span class="sxs-lookup"><span data-stu-id="55a2e-283">If you still have a large amount of log data, then you may want to specify a session filter to filter your log data before you load it.</span></span> <span data-ttu-id="55a2e-284">En el cuadro **Session Filter** (Filtros de sesión), seleccione el botón **Library** (Biblioteca) para elegir un filtro predefinido; por ejemplo, elija **Global Time Filter I** (Filtro de tiempo global) de entre los filtros de Azure Storage para poder filtrar según un intervalo de tiempo.</span><span class="sxs-lookup"><span data-stu-id="55a2e-284">In the **Session Filter** box, select the **Library** button to choose a predefined filter; for example, choose **Global Time Filter I** from the Azure Storage filters to filter on a time interval.</span></span> <span data-ttu-id="55a2e-285">Tras ello, puede editar los parámetros del filtro para especificar la marca de tiempo de inicio y de fin del intervalo que quiera ver.</span><span class="sxs-lookup"><span data-stu-id="55a2e-285">You can then edit the filter criteria to specify the starting and ending timestamp for the interval you want to see.</span></span> <span data-ttu-id="55a2e-286">También puede filtrar los datos según un código de estado específico; por ejemplo, puede cargar solo las entradas de registro que tengan un código de estado 404.</span><span class="sxs-lookup"><span data-stu-id="55a2e-286">You can also filter on a particular status code; for example, you can choose to load only log entries where the status code is 404.</span></span>

<span data-ttu-id="55a2e-287">Para más información sobre cómo importar datos de registro al analizador de mensajes de Microsoft, vea el tema de [recuperación de datos de mensajes](http://technet.microsoft.com/library/dn772437.aspx) en TechNet.</span><span class="sxs-lookup"><span data-stu-id="55a2e-287">For more information about importing log data into Microsoft Message Analyzer, see [Retrieving Message Data](http://technet.microsoft.com/library/dn772437.aspx) on TechNet.</span></span>

### <a name="use-the-client-request-id-to-correlate-log-file-data"></a><span data-ttu-id="55a2e-288">Usar el identificador de solicitud de cliente para poner en correlación los datos de los archivos de registro</span><span class="sxs-lookup"><span data-stu-id="55a2e-288">Use the client request ID to correlate log file data</span></span>
<span data-ttu-id="55a2e-289">La biblioteca de cliente de Almacenamiento de Azure crea de forma automática un identificador único de solicitud de cliente para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="55a2e-289">The Azure Storage Client Library automatically generates a unique client request ID for every request.</span></span> <span data-ttu-id="55a2e-290">Este valor se escribe en los registros de cliente, de servidor y de seguimiento de red para que se pueda usar para poner en correlación los datos de los tres registros en el analizador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-290">This value is written to the client log, the server log, and the network trace, so you can use it to correlate data across all three logs within Message Analyzer.</span></span> <span data-ttu-id="55a2e-291">Vea [Id. de solicitud de cliente](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) para más información sobre este identificador.</span><span class="sxs-lookup"><span data-stu-id="55a2e-291">See [Client request ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) for additional information about the client request ID.</span></span>

<span data-ttu-id="55a2e-292">En las siguientes secciones describiremos cómo usar las vistas de diseño personalizadas y configuradas previamente para poner en correlación y agrupar datos según el identificador de solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-292">The sections below describe how to use pre-configured and custom layout views to correlate and group data based on the client request ID.</span></span>

### <a name="select-a-view-layout-to-display-in-the-analysis-grid"></a><span data-ttu-id="55a2e-293">Seleccionar un diseño de vista para mostrarla en la cuadrícula de análisis</span><span class="sxs-lookup"><span data-stu-id="55a2e-293">Select a view layout to display in the Analysis Grid</span></span>
<span data-ttu-id="55a2e-294">Entre las herramientas de almacenamiento del analizador de mensajes encontramos los diseños de vista de Almacenamiento de Azure, que son vistas ya configuradas que sirven para visualizar los datos y distribuirlos en grupos y columnas de utilidad según el escenario.</span><span class="sxs-lookup"><span data-stu-id="55a2e-294">The Storage Assets for Message Analyzer include Azure Storage View Layouts, which are pre-configured views that you can use to display your data with useful groupings and columns for different scenarios.</span></span> <span data-ttu-id="55a2e-295">También puede crear diseños de vista personalizados y guardarlos para volver a usarlos.</span><span class="sxs-lookup"><span data-stu-id="55a2e-295">You can also create custom view layouts and save them for reuse.</span></span>

<span data-ttu-id="55a2e-296">En la siguiente imagen se muestra el menú **View Layout** (Diseño de vista), al que puede tener acceso seleccionando **View Layout** (Diseño de vista) en la cinta de opciones de la barra de herramientas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-296">The picture below shows the **View Layout** menu, available by selecting **View Layout** from the toolbar ribbon.</span></span> <span data-ttu-id="55a2e-297">Los diseños de vista de Almacenamiento de Azure están en el nodo **Almacenamiento de Azure** del menú.</span><span class="sxs-lookup"><span data-stu-id="55a2e-297">The view layouts for Azure Storage are grouped under the **Azure Storage** node in the menu.</span></span> <span data-ttu-id="55a2e-298">Puede buscar `Azure Storage` en el cuadro de búsqueda para filtrar únicamente por diseños de vista de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-298">You can search for `Azure Storage` in the search box to filter on Azure Storage view layouts only.</span></span> <span data-ttu-id="55a2e-299">Además, puede seleccionar el icono con forma de estrella al lado de cada diseño de vista para marcarlo como favorito y que, de este modo, se muestre en la parte superior del menú.</span><span class="sxs-lookup"><span data-stu-id="55a2e-299">You can also select the star next to a view layout to make it a favorite and display it at the top of the menu.</span></span>

![Menú de diseño de vista](./media/storage-e2e-troubleshooting/view-layout-menu.png)

<span data-ttu-id="55a2e-301">Para empezar, seleccione **Grouped by ClientRequestID and Module**(Agrupados por ClientRequestID y Module).</span><span class="sxs-lookup"><span data-stu-id="55a2e-301">To begin with, select **Grouped by ClientRequestID and Module**.</span></span> <span data-ttu-id="55a2e-302">Este diseño de vista agrupa los datos de registro de los tres registros de la siguiente manera: primero, por identificador de solicitud de cliente y, después, por archivo de registro de origen (o **Module** en el analizador de mensajes).</span><span class="sxs-lookup"><span data-stu-id="55a2e-302">This view layout groups log data from all three logs first by client request ID, then by source log file (or **Module** in Message Analyzer).</span></span> <span data-ttu-id="55a2e-303">Con esta vista, podrá explorar en profundidad un identificador de solicitud de cliente en particular y ver los datos de los tres archivos de registro relativos a ese identificador de solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-303">With this view, you can drill down into a particular client request ID, and see data from all three log files for that client request ID.</span></span>

<span data-ttu-id="55a2e-304">En la siguiente imagen puede ver el diseño aplicado a los datos de registro de ejemplo, junto con un subconjunto de columnas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-304">The picture below shows this layout view applied to the sample log data, with a subset of columns displayed.</span></span> <span data-ttu-id="55a2e-305">Puede observar que, para un identificador de solicitud de cliente en particular, la cuadrícula de análisis muestra los datos del registro de cliente, de servidor y de seguimiento de red.</span><span class="sxs-lookup"><span data-stu-id="55a2e-305">You can see that for a particular client request ID, the Analysis Grid displays data from the client log, server log, and network trace.</span></span>

![Diseño de vista de Almacenamiento de Azure](./media/storage-e2e-troubleshooting/view-layout-client-request-id-module.png)

> [!NOTE]
> <span data-ttu-id="55a2e-307">Los diferentes archivos de registro tienen columnas distintas, así que cuando se muestran los datos de varios archivos de registro en la cuadrícula de análisis, es posible que varias columnas no contengan los datos de alguna fila en particular.</span><span class="sxs-lookup"><span data-stu-id="55a2e-307">Different log files have different columns, so when data from multiple log files is displayed in the Analysis Grid, some columns may not contain any data for a given row.</span></span> <span data-ttu-id="55a2e-308">Por ejemplo, en la imagen anterior, las filas del registro de cliente no muestran ningún dato en las columnas **Timestamp**, **TimeElapsed**, **Source** y **Destination**, ya que estas columnas no existen en el registro de cliente, pero sí en el de seguimiento de red.</span><span class="sxs-lookup"><span data-stu-id="55a2e-308">For example, in the picture above, the client log rows do not show any data for the **Timestamp**, **TimeElapsed**, **Source**, and **Destination** columns, because these columns do not exist in the client log, but do exist in the network trace.</span></span> <span data-ttu-id="55a2e-309">Del mismo modo, la columna **Timestamp** muestra los datos de marca de tiempo del registro de servidor, pero no hay datos para las columnas **TimeElapsed**, **Source** y **Destination**, ya que no forman parte del registro de servidor.</span><span class="sxs-lookup"><span data-stu-id="55a2e-309">Similarly, the **Timestamp** column displays timestamp data from the server log, but no data is displayed for the **TimeElapsed**, **Source**, and **Destination** columns, which are not part of the server log.</span></span>
> 
> 

<span data-ttu-id="55a2e-310">Aparte de usar los diseños de vista de Almacenamiento de Azure, también puede desarrollar y guardar sus propios diseños de vista.</span><span class="sxs-lookup"><span data-stu-id="55a2e-310">In addition to using the Azure Storage view layouts, you can also define and save your own view layouts.</span></span> <span data-ttu-id="55a2e-311">Es más, puede seleccionar otros campos para agrupar los datos y guardar esta agrupación como parte de su diseño personalizado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-311">You can select other desired fields for grouping data and save the grouping as part of your custom layout as well.</span></span>

### <a name="apply-color-rules-to-the-analysis-grid"></a><span data-ttu-id="55a2e-312">Aplicar reglas de color a la cuadrícula de análisis</span><span class="sxs-lookup"><span data-stu-id="55a2e-312">Apply color rules to the Analysis Grid</span></span>
<span data-ttu-id="55a2e-313">Las herramientas de almacenamiento incluyen una serie de reglas de color que ofrecen una forma más visual de identificar los diferentes tipos de errores que aparecen en la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-313">The Storage Assets also include color rules, which offer a visual means to identify different types of errors in the Analysis Grid.</span></span> <span data-ttu-id="55a2e-314">Las reglas de color predefinidas se aplican a los errores HTTP, así que solo aparecerán en el registro de servidor y el seguimiento de red.</span><span class="sxs-lookup"><span data-stu-id="55a2e-314">The predefined color rules apply to HTTP errors, so they appear only for the server log and network trace.</span></span>

<span data-ttu-id="55a2e-315">Para aplicar reglas de color, seleccione **Color Rules** (Reglas de color) de la cinta de opciones de la barra de herramientas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-315">To apply color rules, select **Color Rules** from the toolbar ribbon.</span></span> <span data-ttu-id="55a2e-316">En el menú verá las reglas de color de Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="55a2e-316">You'll see the Azure Storage color rules in the menu.</span></span> <span data-ttu-id="55a2e-317">Para el tutorial, seleccione **Client Errors (StatusCode between 400 and 499)**(Errores del cliente [StatusCode entre 400 y 499]), tal y como se muestra en esta imagen.</span><span class="sxs-lookup"><span data-stu-id="55a2e-317">For the tutorial, select **Client Errors (StatusCode between 400 and 499)**, as shown in the picture below.</span></span>

![Diseño de vista de Almacenamiento de Azure](./media/storage-e2e-troubleshooting/color-rules-menu.png)

<span data-ttu-id="55a2e-319">Además de las reglas de color de Almacenamiento de Azure, también puede crear y guardar sus propias reglas de color.</span><span class="sxs-lookup"><span data-stu-id="55a2e-319">In addition to using the Azure Storage color rules, you can also define and save your own color rules.</span></span>

### <a name="group-and-filter-log-data-to-find-400-range-errors"></a><span data-ttu-id="55a2e-320">Agrupar y filtrar datos de registro para encontrar errores de intervalo 400</span><span class="sxs-lookup"><span data-stu-id="55a2e-320">Group and filter log data to find 400-range errors</span></span>
<span data-ttu-id="55a2e-321">Ahora agruparemos y filtraremos los datos de registro para encontrar todos los errores que estén dentro del intervalo 400.</span><span class="sxs-lookup"><span data-stu-id="55a2e-321">Next, we'll group and filter the log data to find all errors in the 400 range.</span></span>

1. <span data-ttu-id="55a2e-322">Localice la columna **StatusCode** en la cuadrícula de análisis, haga clic con el botón secundario en el encabezado de la columna y, después, seleccione **Group** (Agrupar).</span><span class="sxs-lookup"><span data-stu-id="55a2e-322">Locate the **StatusCode** column in the Analysis Grid, right-click the column heading, and select **Group**.</span></span>
2. <span data-ttu-id="55a2e-323">Tras ello, agrupe por la columna **ClientRequestId** .</span><span class="sxs-lookup"><span data-stu-id="55a2e-323">Next, group on the **ClientRequestId** column.</span></span> <span data-ttu-id="55a2e-324">Verá que los datos de la cuadrícula de análisis están organizados por código de estado y por identificador de solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-324">You'll see that the data in the Analysis Grid is now organized by status code and by client request ID.</span></span>
3. <span data-ttu-id="55a2e-325">Abra la ventana de la herramienta de filtro de vista si aún no está abierta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-325">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="55a2e-326">En la cinta de opciones de la barra de herramientas, seleccione **Tool Windows** (Ventanas de herramientas) y, luego, **View Filter** (Filtro de vista).</span><span class="sxs-lookup"><span data-stu-id="55a2e-326">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
4. <span data-ttu-id="55a2e-327">Para filtrar los datos de registro para que solo se muestren los errores del intervalo 400, agregue el siguiente criterio de filtro a la ventana **View Filter** (Filtro de vista) y haga clic en **Apply** (Aplicar):</span><span class="sxs-lookup"><span data-stu-id="55a2e-327">To filter the log data to display only 400-range errors, add the following filter criteria to the **View Filter** window, and click **Apply**:</span></span>

    ```   
    (AzureStorageLog.StatusCode >= 400 && AzureStorageLog.StatusCode <=499) || (HTTP.StatusCode >= 400 && HTTP.StatusCode <= 499)
    ```

<span data-ttu-id="55a2e-328">En la siguiente imagen puede ver los resultados de la agrupación y filtrado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-328">The picture below shows the results of this grouping and filter.</span></span> <span data-ttu-id="55a2e-329">Si, por ejemplo, expande el campo **ClientRequestID** que se encuentra debajo de la agrupación del código de estado 409, podrá ver la operación resultante de ese código de estado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-329">Expanding the **ClientRequestID** field beneath the grouping for status code 409, for example, shows an operation that resulted in that status code.</span></span>

![Diseño de vista de Almacenamiento de Azure](./media/storage-e2e-troubleshooting/400-range-errors1.png)

<span data-ttu-id="55a2e-331">Una vez aplicado este filtro, verá que las filas del registro de cliente se excluyeron, ya que este registro no incluye la columna **StatusCode** .</span><span class="sxs-lookup"><span data-stu-id="55a2e-331">After applying this filter, you'll see that rows from the client log are excluded, as the client log does not include a **StatusCode** column.</span></span> <span data-ttu-id="55a2e-332">Para empezar, revisaremos los registros de servidor y de seguimiento de red para localizar errores 404 y, después, volveremos al registro de cliente para examinar las operaciones de cliente que llevaron a esos errores.</span><span class="sxs-lookup"><span data-stu-id="55a2e-332">To begin with, we'll review the server and network trace logs to locate 404 errors, and then we'll return to the client log to examine the client operations that led to them.</span></span>

> [!NOTE]
> <span data-ttu-id="55a2e-333">Si agrega una expresión al filtro que incluya entradas de registro donde el código de estado sea nulo, puede filtrar la columna **StatusCode** y ver datos de los tres registros (incluido el registro de cliente).</span><span class="sxs-lookup"><span data-stu-id="55a2e-333">You can filter on the **StatusCode** column and still display data from all three logs, including the client log, if you add an expression to the filter that includes log entries where the status code is null.</span></span> <span data-ttu-id="55a2e-334">Para crear esta expresión de filtro, use:</span><span class="sxs-lookup"><span data-stu-id="55a2e-334">To construct this filter expression, use:</span></span>
> 
> <code>&#42;StatusCode >= 400 or !&#42;StatusCode</code>
> 
> <span data-ttu-id="55a2e-335">Este filtro devuelve todas las filas del registro de cliente y solo aquellas filas del registro de servidor y HTTP cuyo código de estado sea mayor que 400.</span><span class="sxs-lookup"><span data-stu-id="55a2e-335">This filter returns all rows from the client log and only rows from the server log and HTTP log where the status code is greater than 400.</span></span> <span data-ttu-id="55a2e-336">Si aplica esto al diseño de vista que se agrupó por identificador de solicitud de cliente y módulo, podrá buscar o desplazarse por las entradas de registro para encontrar aquellas donde estén representados los tres registros.</span><span class="sxs-lookup"><span data-stu-id="55a2e-336">If you apply it to the view layout grouped by client request ID and module, you can search or scroll through the log entries to find ones where all three logs are represented.</span></span>   
> 
> 

### <a name="filter-log-data-to-find-404-errors"></a><span data-ttu-id="55a2e-337">Filtrar datos de registro para encontrar errores 404</span><span class="sxs-lookup"><span data-stu-id="55a2e-337">Filter log data to find 404 errors</span></span>
<span data-ttu-id="55a2e-338">Las herramientas de almacenamiento incluyen filtros predefinidos que puede usar para acotar los datos de registro y, así, dar con los errores o tendencias que esté buscando.</span><span class="sxs-lookup"><span data-stu-id="55a2e-338">The Storage Assets include predefined filters that you can use to narrow log data to find the errors or trends you are looking for.</span></span> <span data-ttu-id="55a2e-339">Ahora aplicaremos dos filtros predefinidos: uno que filtre los registros de servidor y de seguimiento de red para los errores 404 y otro que filtre los datos de un intervalo de tiempo específico.</span><span class="sxs-lookup"><span data-stu-id="55a2e-339">Next, we'll apply two predefined filters: one that filters the server and network trace logs for 404 errors, and one that filters the data on a specified time range.</span></span>

1. <span data-ttu-id="55a2e-340">Abra la ventana de la herramienta de filtro de vista si aún no está abierta.</span><span class="sxs-lookup"><span data-stu-id="55a2e-340">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="55a2e-341">En la cinta de opciones de la barra de herramientas, seleccione **Tool Windows** (Ventanas de herramientas) y, luego, **View Filter** (Filtro de vista).</span><span class="sxs-lookup"><span data-stu-id="55a2e-341">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
2. <span data-ttu-id="55a2e-342">En la ventana de filtro de vista, seleccione **Library** (Biblioteca) y busque en `Azure Storage` para encontrar los filtros de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="55a2e-342">In the View Filter window, select **Library**, and search on `Azure Storage` to find the Azure Storage filters.</span></span> <span data-ttu-id="55a2e-343">Seleccione el filtro **404 (Not Found) messages in all logs**(Mensajes 404 [no encontrado] en todos los registros).</span><span class="sxs-lookup"><span data-stu-id="55a2e-343">Select the filter for **404 (Not Found) messages in all logs**.</span></span>
3. <span data-ttu-id="55a2e-344">Vaya de nuevo al menú **Library** (Biblioteca) y localice y seleccione **Global Time Filter** (Filtro de tiempo global).</span><span class="sxs-lookup"><span data-stu-id="55a2e-344">Display the **Library** menu again, and locate and select the **Global Time Filter**.</span></span>
4. <span data-ttu-id="55a2e-345">Edite las marcas de tiempo que se muestran en el filtro del intervalo que quiera ver.</span><span class="sxs-lookup"><span data-stu-id="55a2e-345">Edit the timestamps shown in the filter to the range you wish to view.</span></span> <span data-ttu-id="55a2e-346">Esto servirá para reducir el intervalo de datos que va a analizar.</span><span class="sxs-lookup"><span data-stu-id="55a2e-346">This will help to narrow the range of data to analyze.</span></span>
5. <span data-ttu-id="55a2e-347">Su filtro debería ser similar al que aparece en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="55a2e-347">Your filter should appear similar to the example below.</span></span> <span data-ttu-id="55a2e-348">Haga clic en **Apply** (Aplicar) para aplicar el filtro a la cuadrícula de análisis.</span><span class="sxs-lookup"><span data-stu-id="55a2e-348">Click **Apply** to apply the filter to the Analysis Grid.</span></span>

    ```   
    ((AzureStorageLog.StatusCode == 404 || HTTP.StatusCode == 404)) And
    (#Timestamp >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39)
    ```

    ![Diseño de vista de Almacenamiento de Azure](./media/storage-e2e-troubleshooting/404-filtered-errors1.png)

### <a name="analyze-your-log-data"></a><span data-ttu-id="55a2e-350">Analizar los datos de registro</span><span class="sxs-lookup"><span data-stu-id="55a2e-350">Analyze your log data</span></span>
<span data-ttu-id="55a2e-351">Ahora que tenemos los datos agrupados y filtrados, ya podemos pasar a examinar los detalles de las solicitudes que ocasionaron errores 404.</span><span class="sxs-lookup"><span data-stu-id="55a2e-351">Now that you have grouped and filtered your data, you can examine the details of individual requests that generated 404 errors.</span></span> <span data-ttu-id="55a2e-352">En el diseño de vista actual, los datos están agrupados por identificador de solicitud de cliente y por origen del registro.</span><span class="sxs-lookup"><span data-stu-id="55a2e-352">In the current view layout, the data is grouped by client request ID, then by log source.</span></span> <span data-ttu-id="55a2e-353">Como estamos filtrando solicitudes cuyo campo StatusCode contenga 404, solo veremos los datos de los registros de servidor y de seguimiento de red, no los del registro de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-353">Since we are filtering on requests where the StatusCode field contains 404, we'll see only the server and network trace data, not the client log data.</span></span>

<span data-ttu-id="55a2e-354">En la siguiente imagen, podrá ver una solicitud específica en la que una operación Get Blob provocó un error 404 porque el blob no existía.</span><span class="sxs-lookup"><span data-stu-id="55a2e-354">The picture below shows a specific request where a Get Blob operation yielded a 404 because the blob did not exist.</span></span> <span data-ttu-id="55a2e-355">Tenga en cuenta que algunas columnas se quitaron de la vista estándar para poder mostrar los datos relevantes.</span><span class="sxs-lookup"><span data-stu-id="55a2e-355">Note that some columns have been removed from the standard view in order to display the relevant data.</span></span>

![Registros de servidor y de seguimiento de red filtrados](./media/storage-e2e-troubleshooting/server-filtered-404-error.png)

<span data-ttu-id="55a2e-357">Ahora, pondremos en correlación el identificador de solicitud de cliente con los datos del registro de cliente para ver qué estaba haciendo el cliente cuando ocurrió el error.</span><span class="sxs-lookup"><span data-stu-id="55a2e-357">Next, we'll correlate this client request ID with the client log data to see what actions the client was taking when the error happened.</span></span> <span data-ttu-id="55a2e-358">Puede mostrar una nueva cuadrícula de análisis (en una segunda pestaña) para esta sesión para ver los datos del registro de cliente:</span><span class="sxs-lookup"><span data-stu-id="55a2e-358">You can display a new Analysis Grid view for this session to view the client log data, which opens in a second tab:</span></span>

1. <span data-ttu-id="55a2e-359">Primero, copie el valor del campo **ClientRequestId** en el portapapeles.</span><span class="sxs-lookup"><span data-stu-id="55a2e-359">First, copy the value of the **ClientRequestId** field to the clipboard.</span></span> <span data-ttu-id="55a2e-360">Para ello, seleccione una fila, busque el campo **ClientRequestId**, haga clic con el botón secundario en el valor de datos y seleccione **Copy 'ClientRequestId'**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-360">You can do this by selecting either row, locating the **ClientRequestId** field, right-clicking on the data value, and choosing **Copy 'ClientRequestId'**.</span></span>
2. <span data-ttu-id="55a2e-361">En la cinta de opciones de la barra de herramientas, seleccione **New Viewer** (Nuevo visor) y, luego, **Analysis Grid** (Cuadrícula de análisis) para abrir una nueva pestaña. En la nueva ficha se recogen todos los datos de sus archivos de registro sin agrupar ni filtrar o sin reglas de color.</span><span class="sxs-lookup"><span data-stu-id="55a2e-361">On the toolbar ribbon, select **New Viewer**, then select **Analysis Grid** to open a new tab. The new tab shows all data in your log files, without grouping, filtering, or color rules.</span></span>
3. <span data-ttu-id="55a2e-362">En la cinta de opciones de la barra de herramientas, seleccione **View Layout** (Vista de diseño) y, después, **All .NET Client Columns** (Todas las columnas de cliente .NET) en la sección correspondiente a **Almacenamiento de Azure**.</span><span class="sxs-lookup"><span data-stu-id="55a2e-362">On the toolbar ribbon, select **View Layout**, then select **All .NET Client Columns** under the **Azure Storage** section.</span></span> <span data-ttu-id="55a2e-363">En este diseño de vista se muestran los datos del registro de cliente, así como los de los registros de servidor y de seguimiento de red.</span><span class="sxs-lookup"><span data-stu-id="55a2e-363">This view layout shows data from the client log as well as the server and network trace logs.</span></span> <span data-ttu-id="55a2e-364">Los datos se ordenan de forma predeterminada por la columna **MessageNumber** .</span><span class="sxs-lookup"><span data-stu-id="55a2e-364">By default it is sorted on the **MessageNumber** column.</span></span>
4. <span data-ttu-id="55a2e-365">Ahora, buscaremos el registro de cliente del identificador de solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-365">Next, search the client log for the client request ID.</span></span> <span data-ttu-id="55a2e-366">En la cinta de opciones de la barra de herramientas, seleccione **Find Messages** (Buscar mensajes) y especifique un filtro personalizado en el identificador de solicitud de cliente en el campo **Find** (Buscar).</span><span class="sxs-lookup"><span data-stu-id="55a2e-366">On the toolbar ribbon, select **Find Messages**, then specify a custom filter on the client request ID in the **Find** field.</span></span> <span data-ttu-id="55a2e-367">Use esta sintaxis para el filtro, indicando su propio identificador de solicitud de cliente:</span><span class="sxs-lookup"><span data-stu-id="55a2e-367">Use this syntax for the filter, specifying your own client request ID:</span></span>

    ```
    *ClientRequestId == "398bac41-7725-484b-8a69-2a9e48fc669a"
    ```

<span data-ttu-id="55a2e-368">El analizador de mensajes encuentra y selecciona la primera entrada de registro en la que el criterio de búsqueda coincida con el identificador de solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="55a2e-368">Message Analyzer locates and selects the first log entry where the search criteria matches the client request ID.</span></span> <span data-ttu-id="55a2e-369">En el registro de cliente existen varias entradas por cada identificador de solicitud de cliente, así que puede agruparlas por el campo **ClientRequestId** para que sea más fácil revisarlas.</span><span class="sxs-lookup"><span data-stu-id="55a2e-369">In the client log, there are several entries for each client request ID, so you may want to group them on the **ClientRequestId** field to make it easier to see them all together.</span></span> <span data-ttu-id="55a2e-370">En la siguiente imagen puede ver todos los mensajes del registro de cliente correspondientes al identificador de solicitud de cliente especificado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-370">The picture below shows all of the messages in the client log for the specified client request ID.</span></span>

![Registro de cliente con errores 404](./media/storage-e2e-troubleshooting/client-log-analysis-grid1.png)

<span data-ttu-id="55a2e-372">Si usa los datos que se muestran en los diseños de vista de estas dos pestañas, podrá analizar los datos de solicitud para averiguar qué es lo que provocó el error.</span><span class="sxs-lookup"><span data-stu-id="55a2e-372">Using the data shown in the view layouts in these two tabs, you can analyze the request data to determine what may have caused the error.</span></span> <span data-ttu-id="55a2e-373">También puede echar un vistazo a las solicitudes anteriores a esta para ver si algún evento previo fue el que causó el error 404.</span><span class="sxs-lookup"><span data-stu-id="55a2e-373">You can also look at requests that preceded this one to see if a previous event may have led to the 404 error.</span></span> <span data-ttu-id="55a2e-374">Por ejemplo, puede revisar las entradas del registro de cliente de este identificador de solicitud de cliente para saber si el blob se eliminó o si el error se produjo porque la aplicación cliente llamó a una API de tipo CreateIfNotExists en un contenedor o un blob.</span><span class="sxs-lookup"><span data-stu-id="55a2e-374">For example, you can review the client log entries preceding this client request ID to determine whether the blob may have been deleted, or if the error was due to the client application calling a CreateIfNotExists API on a container or blob.</span></span> <span data-ttu-id="55a2e-375">En el registro de cliente, encontrará las direcciones del blob en el campo de **Description** (Descripción), mientras que en los registros de servidor y de seguimiento de red esta información aparece recogida en el campo **Summary** (Resumen).</span><span class="sxs-lookup"><span data-stu-id="55a2e-375">In the client log, you can find the blob's address in the **Description** field; in the server and network trace logs, this information appears in the **Summary** field.</span></span>

<span data-ttu-id="55a2e-376">Cuando sepa qué dirección del blob produjo el error 404, podrá realizar un examen más exhaustivo.</span><span class="sxs-lookup"><span data-stu-id="55a2e-376">Once you know the address of the blob that yielded the 404 error, you can investigate further.</span></span> <span data-ttu-id="55a2e-377">Si, en las entradas de registro, busca otros mensajes relacionados operaciones en el mismo blob, podrá saber si el cliente ya había eliminado la entidad.</span><span class="sxs-lookup"><span data-stu-id="55a2e-377">If you search the log entries for other messages associated with operations on the same blob, you can check whether the client previously deleted the entity.</span></span>

## <a name="analyze-other-types-of-storage-errors"></a><span data-ttu-id="55a2e-378">Analizar otros tipos de errores de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="55a2e-378">Analyze other types of storage errors</span></span>
<span data-ttu-id="55a2e-379">Ahora que ya está familiarizado con el analizador de mensajes y su uso para analizar los datos de sus registros, podrá analizar otros tipos de errores usando diseños de vista, reglas de color y criterios de búsqueda o filtrado.</span><span class="sxs-lookup"><span data-stu-id="55a2e-379">Now that you are familiar with using Message Analyzer to analyze your log data, you can analyze other types of errors using view layouts, color rules, and searching/filtering.</span></span> <span data-ttu-id="55a2e-380">En las siguientes tablas se muestran distintos problemas con los que podría encontrarse y los criterios de filtrado que puede usar para poder localizarlos.</span><span class="sxs-lookup"><span data-stu-id="55a2e-380">The tables below lists some issues you may encounter and the filter criteria you can use to locate them.</span></span> <span data-ttu-id="55a2e-381">Para más información sobre cómo crear filtros y sobre el lenguaje de filtrado del analizador de mensajes, vea el tema sobre el [filtrado de datos de mensajes](http://technet.microsoft.com/library/jj819365.aspx).</span><span class="sxs-lookup"><span data-stu-id="55a2e-381">For more information on constructing filters and the Message Analyzer filtering language, see [Filtering Message Data](http://technet.microsoft.com/library/jj819365.aspx).</span></span>

| <span data-ttu-id="55a2e-382">Para investigar...</span><span class="sxs-lookup"><span data-stu-id="55a2e-382">To Investigate…</span></span> | <span data-ttu-id="55a2e-383">Use la expresión de filtro...</span><span class="sxs-lookup"><span data-stu-id="55a2e-383">Use Filter Expression…</span></span> | <span data-ttu-id="55a2e-384">La expresión se aplica al registro (de cliente, de servidor, de red, todos)</span><span class="sxs-lookup"><span data-stu-id="55a2e-384">Expression Applies to Log (Client, Server,   Network, All)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="55a2e-385">Retrasos inesperados en la entrega de mensajes en una cola</span><span class="sxs-lookup"><span data-stu-id="55a2e-385">Unexpected delays in message delivery on a queue</span></span> |<span data-ttu-id="55a2e-386">AzureStorageClientDotNetV4.Description contiene "Intentando de nuevo la operación con error."</span><span class="sxs-lookup"><span data-stu-id="55a2e-386">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span></span> |<span data-ttu-id="55a2e-387">Cliente</span><span class="sxs-lookup"><span data-stu-id="55a2e-387">Client</span></span> |
| <span data-ttu-id="55a2e-388">Aumento de HTTP en PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="55a2e-388">HTTP Increase in PercentThrottlingError</span></span> |<span data-ttu-id="55a2e-389">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span><span class="sxs-lookup"><span data-stu-id="55a2e-389">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span></span> |<span data-ttu-id="55a2e-390">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-390">Network</span></span> |
| <span data-ttu-id="55a2e-391">Aumento en PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="55a2e-391">Increase in PercentTimeoutError</span></span> |<span data-ttu-id="55a2e-392">HTTP.Response.StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="55a2e-392">HTTP.Response.StatusCode   == 500</span></span> |<span data-ttu-id="55a2e-393">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-393">Network</span></span> |
| <span data-ttu-id="55a2e-394">Aumento en PercentTimeoutError (todos)</span><span class="sxs-lookup"><span data-stu-id="55a2e-394">Increase in PercentTimeoutError (all)</span></span> |<span data-ttu-id="55a2e-395">*StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="55a2e-395">*StatusCode   == 500</span></span> |<span data-ttu-id="55a2e-396">Todo</span><span class="sxs-lookup"><span data-stu-id="55a2e-396">All</span></span> |
| <span data-ttu-id="55a2e-397">Aumento de PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="55a2e-397">Increase in PercentNetworkError</span></span> |<span data-ttu-id="55a2e-398">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span><span class="sxs-lookup"><span data-stu-id="55a2e-398">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span></span> |<span data-ttu-id="55a2e-399">Cliente</span><span class="sxs-lookup"><span data-stu-id="55a2e-399">Client</span></span> |
| <span data-ttu-id="55a2e-400">Mensajes HTTP 403 (Prohibido)</span><span class="sxs-lookup"><span data-stu-id="55a2e-400">HTTP 403 (Forbidden) messages</span></span> |<span data-ttu-id="55a2e-401">HTTP.Response.StatusCode   == 403</span><span class="sxs-lookup"><span data-stu-id="55a2e-401">HTTP.Response.StatusCode   == 403</span></span> |<span data-ttu-id="55a2e-402">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-402">Network</span></span> |
| <span data-ttu-id="55a2e-403">Mensajes HTTP 404 (No encontrado)</span><span class="sxs-lookup"><span data-stu-id="55a2e-403">HTTP 404 (Not found) messages</span></span> |<span data-ttu-id="55a2e-404">HTTP.Response.StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="55a2e-404">HTTP.Response.StatusCode   == 404</span></span> |<span data-ttu-id="55a2e-405">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-405">Network</span></span> |
| <span data-ttu-id="55a2e-406">404 (Todo)</span><span class="sxs-lookup"><span data-stu-id="55a2e-406">404 (all)</span></span> |<span data-ttu-id="55a2e-407">*StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="55a2e-407">*StatusCode   == 404</span></span> |<span data-ttu-id="55a2e-408">Todo</span><span class="sxs-lookup"><span data-stu-id="55a2e-408">All</span></span> |
| <span data-ttu-id="55a2e-409">Problema de autorización de la Firma de acceso compartido (SAS)</span><span class="sxs-lookup"><span data-stu-id="55a2e-409">Shared Access Signature (SAS) authorization issue</span></span> |<span data-ttu-id="55a2e-410">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span><span class="sxs-lookup"><span data-stu-id="55a2e-410">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span></span> |<span data-ttu-id="55a2e-411">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-411">Network</span></span> |
| <span data-ttu-id="55a2e-412">Mensajes HTTP 409 (conflicto)</span><span class="sxs-lookup"><span data-stu-id="55a2e-412">HTTP 409 (Conflict) messages</span></span> |<span data-ttu-id="55a2e-413">HTTP.Response.StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="55a2e-413">HTTP.Response.StatusCode   == 409</span></span> |<span data-ttu-id="55a2e-414">Red</span><span class="sxs-lookup"><span data-stu-id="55a2e-414">Network</span></span> |
| <span data-ttu-id="55a2e-415">409 (Todo)</span><span class="sxs-lookup"><span data-stu-id="55a2e-415">409 (all)</span></span> |<span data-ttu-id="55a2e-416">*StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="55a2e-416">*StatusCode   == 409</span></span> |<span data-ttu-id="55a2e-417">Todo</span><span class="sxs-lookup"><span data-stu-id="55a2e-417">All</span></span> |
| <span data-ttu-id="55a2e-418">Valor de PercentSuccess bajo o las entradas de registro de análisis tienen operaciones con el estado de transacción ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="55a2e-418">Low PercentSuccess or analytics log entries have   operations with transaction status of ClientOtherErrors</span></span> |<span data-ttu-id="55a2e-419">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span><span class="sxs-lookup"><span data-stu-id="55a2e-419">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span></span> |<span data-ttu-id="55a2e-420">Server</span><span class="sxs-lookup"><span data-stu-id="55a2e-420">Server</span></span> |
| <span data-ttu-id="55a2e-421">Advertencia de Nagle</span><span class="sxs-lookup"><span data-stu-id="55a2e-421">Nagle   Warning</span></span> |<span data-ttu-id="55a2e-422">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) y (AzureStorageLog.RequestPacketSize <1460) y (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span><span class="sxs-lookup"><span data-stu-id="55a2e-422">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span></span> |<span data-ttu-id="55a2e-423">Server</span><span class="sxs-lookup"><span data-stu-id="55a2e-423">Server</span></span> |
| <span data-ttu-id="55a2e-424">Intervalo de tiempo en los registros de servidor y red</span><span class="sxs-lookup"><span data-stu-id="55a2e-424">Range of   time in Server and Network logs</span></span> |<span data-ttu-id="55a2e-425">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="55a2e-425">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span></span> |<span data-ttu-id="55a2e-426">Servidor, red</span><span class="sxs-lookup"><span data-stu-id="55a2e-426">Server, Network</span></span> |
| <span data-ttu-id="55a2e-427">Intervalo de tiempo en registros de servidor</span><span class="sxs-lookup"><span data-stu-id="55a2e-427">Range of   time in Server logs</span></span> |<span data-ttu-id="55a2e-428">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 y AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="55a2e-428">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span></span> |<span data-ttu-id="55a2e-429">Server</span><span class="sxs-lookup"><span data-stu-id="55a2e-429">Server</span></span> |

## <a name="next-steps"></a><span data-ttu-id="55a2e-430">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="55a2e-430">Next steps</span></span>
<span data-ttu-id="55a2e-431">Para más información sobre los escenarios de solución integral de problemas en Almacenamiento de Azure, vea los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="55a2e-431">For more information about troubleshooting end-to-end scenarios in Azure Storage, see these resources:</span></span>

* [<span data-ttu-id="55a2e-432">Supervisión, diagnóstico y solución de problemas de Almacenamiento de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="55a2e-432">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](storage-monitoring-diagnosing-troubleshooting.md)
* [<span data-ttu-id="55a2e-433">Análisis de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="55a2e-433">Storage Analytics</span></span>](http://msdn.microsoft.com/library/azure/hh343270.aspx)
* [<span data-ttu-id="55a2e-434">Supervisión de una cuenta de almacenamiento en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="55a2e-434">Monitor a storage account in the Azure portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="55a2e-435">Transferencia de datos con la utilidad en línea de comandos AzCopy</span><span class="sxs-lookup"><span data-stu-id="55a2e-435">Transfer data with the AzCopy Command-Line Utility</span></span>](storage-use-azcopy.md)
* [<span data-ttu-id="55a2e-436">Guía de funcionamiento del analizador de mensajes de Microsoft</span><span class="sxs-lookup"><span data-stu-id="55a2e-436">Microsoft Message Analyzer Operating Guide</span></span>](http://technet.microsoft.com/library/jj649776.aspx)

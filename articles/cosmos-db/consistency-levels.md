---
title: niveles de aaaConsistency en la base de datos de Azure Cosmos | Documentos de Microsoft
description: Base de datos de Azure Cosmos tiene cinco coherencia niveles toohelp saldo final coherencia, la disponibilidad y la latencia ventajas e inconvenientes.
keywords: coherencia final, azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: ac399c229d0856cd811bc81568536e519af3300f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="a5ec9-104">Niveles de coherencia de datos optimizables en Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="a5ec9-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="a5ec9-105">Base de datos de Azure Cosmos está diseñado de hello descárguese de corriente con la distribución global en cuenta para cada modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-105">Azure Cosmos DB is designed from hello ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="a5ec9-106">Es toooffer diseñada garantías de predicción de baja latencia, un SLA de disponibilidad del 99,99%, y varios bien definido redujeron los modelos de coherencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-106">It is designed toooffer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="a5ec9-107">Actualmente, Azure Cosmos DB ofrece cinco niveles de coherencia: fuerte, de obsolescencia limitada, de sesión, de prefijo coherente y final.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="a5ec9-108">Además de los modelos de **coherencia fuerte** y **final** que proporcionan habitualmente las bases de datos distribuidas, Azure Cosmos DB ofrece tres modelos de coherencia codificados y operacionalizados de forma cuidadosa. Además, tiene su utilidad validada en casos de uso reales.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="a5ec9-109">Se trata de hello **limitado obsolescencia**, **sesión**, y **prefijo coherente** niveles de coherencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-109">These are hello **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="a5ec9-110">Colectivamente estos niveles de cinco coherencia permiten toomake bien motivada ventajas y desventajas de coherencia, la disponibilidad y la latencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-110">Collectively these five consistency levels enable you toomake well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="a5ec9-111">Coherencia y bases de datos distribuidas</span><span class="sxs-lookup"><span data-stu-id="a5ec9-111">Distributed databases and consistency</span></span>
<span data-ttu-id="a5ec9-112">Las bases de datos distribuidas comerciales se dividen en dos categorías: las bases de datos que no ofrecen opciones de coherencia bien definida en absoluto y las que ofrecen dos opciones de programación opuestas (coherencia alta y ocasional).</span><span class="sxs-lookup"><span data-stu-id="a5ec9-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="a5ec9-113">Hola a los desarrolladores de aplicaciones de cargas de trabajo anterior con minucias de los protocolos de replicación y ellos no espera toomake difícil contrapartidas entre coherencia, disponibilidad, latencia y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-113">hello former burdens application developers with minutia of their replication protocols and expects them toomake difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="a5ec9-114">Hola este último coloca un toochoose presión uno de los dos extremos de Hola.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-114">hello latter puts a pressure toochoose one of hello two extremes.</span></span> <span data-ttu-id="a5ec9-115">A pesar del gran cantidad de Hola de investigación y propuestas de más de 50 modelos de coherencia, hello Comunidad de base de datos distribuida no ha sido capaz de toocommercialize niveles de coherencia más allá de coherencia eventual y seguro.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-115">Despite hello abundance of research and proposals for more than 50 consistency models, hello distributed database community has not been able toocommercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="a5ec9-116">COSMOS DB permite a los desarrolladores toochoose entre cinco modelos bien definidos de coherencia en el espectro de coherencia de hello: seguro, limitado obsolescencia, [sesión](http://dl.acm.org/citation.cfm?id=383631), prefijo coherente y final.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-116">Cosmos DB allows developers toochoose between five well-defined consistency models along hello consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Base de datos de Azure Cosmos ofrece varios, bien definida toochoose de modelos de coherencia (estrictas) de](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="a5ec9-118">Hello en la tabla siguiente muestra garantías particulares Hola que ofrece cada nivel de coherencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-118">hello following table illustrates hello specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="a5ec9-119">**Niveles de coherencia y garantías**</span><span class="sxs-lookup"><span data-stu-id="a5ec9-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="a5ec9-120">Nivel de coherencia</span><span class="sxs-lookup"><span data-stu-id="a5ec9-120">Consistency Level</span></span> | <span data-ttu-id="a5ec9-121">Garantías</span><span class="sxs-lookup"><span data-stu-id="a5ec9-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="a5ec9-122">Alta</span><span class="sxs-lookup"><span data-stu-id="a5ec9-122">Strong</span></span> | <span data-ttu-id="a5ec9-123">Linealidad</span><span class="sxs-lookup"><span data-stu-id="a5ec9-123">Linearizability</span></span> |
| <span data-ttu-id="a5ec9-124">De obsolescencia entrelazada</span><span class="sxs-lookup"><span data-stu-id="a5ec9-124">Bounded Staleness</span></span> | <span data-ttu-id="a5ec9-125">Prefijo coherente.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-125">Consistent Prefix.</span></span> <span data-ttu-id="a5ec9-126">Los prefijos k y los intervalos t retrasan las lecturas tras las escrituras</span><span class="sxs-lookup"><span data-stu-id="a5ec9-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="a5ec9-127">Sesión</span><span class="sxs-lookup"><span data-stu-id="a5ec9-127">Session</span></span>   | <span data-ttu-id="a5ec9-128">Prefijo coherente.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-128">Consistent Prefix.</span></span> <span data-ttu-id="a5ec9-129">Lecturas monótonas, escrituras monótonas, lectura de la escritura, escritura tras las lecturas</span><span class="sxs-lookup"><span data-stu-id="a5ec9-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="a5ec9-130">De prefijo coherente</span><span class="sxs-lookup"><span data-stu-id="a5ec9-130">Consistent Prefix</span></span> | <span data-ttu-id="a5ec9-131">Actualizaciones devueltas son algunos prefijo de todas las actualizaciones de hello, con no vacíos</span><span class="sxs-lookup"><span data-stu-id="a5ec9-131">Updates returned are some prefix of all hello updates, with no gaps</span></span> |
| <span data-ttu-id="a5ec9-132">Ocasional</span><span class="sxs-lookup"><span data-stu-id="a5ec9-132">Eventual</span></span>  | <span data-ttu-id="a5ec9-133">Lecturas sin orden</span><span class="sxs-lookup"><span data-stu-id="a5ec9-133">Out of order reads</span></span> |

<span data-ttu-id="a5ec9-134">Puede configurar el nivel de coherencia de hello predeterminado en su cuenta de base de datos de Cosmos (y más adelante invalidar la coherencia de Hola de una solicitud de lectura específica).</span><span class="sxs-lookup"><span data-stu-id="a5ec9-134">You can configure hello default consistency level on your Cosmos DB account (and later override hello consistency on a specific read request).</span></span> <span data-ttu-id="a5ec9-135">Internamente, nivel de coherencia de hello predeterminado aplica toodata dentro de los conjuntos de particiones de Hola que puede abarcar varias regiones.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-135">Internally, hello default consistency level applies toodata within hello partition sets which may span regions.</span></span> <span data-ttu-id="a5ec9-136">Aproximadamente un 73 % de nuestros inquilinos usan la coherencia de sesión y un 20 % prefiere la obsolescencia limitada.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="a5ec9-137">Observamos que aproximadamente el 3 % de nuestros clientes experimentan con distintos niveles de coherencia inicialmente antes de fijar una opción de coherencia específica para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="a5ec9-138">También observamos que solo un 2 % de nuestros inquilinos reemplazan los niveles de coherencia por solicitud.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="a5ec9-139">En Cosmos DB, las lecturas de coherencia de sesión, prefijo coherente y final son el doble de económicas que las de coherencia fuerte o de obsolescencia limitada.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="a5ec9-140">Cosmos DB presenta acuerdos de nivel de servicio líderes del sector completos del 99,99 %, que incluyen garantías de coherencia, además de disponibilidad, rendimiento y latencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="a5ec9-141">Empleamos una [Comprobador linearizability](http://dl.acm.org/citation.cfm?id=1806634), que funciona continuamente a través de nuestro telemetría de servicio e informa abiertamente cualquier tooyou de infracciones de coherencia.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations tooyou.</span></span> <span data-ttu-id="a5ec9-142">Para limitado obsolescencia, hemos supervisar y notificar las infracciones de tardaron y límites de t.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-142">For bounded staleness, we monitor and report any violations took and t bounds.</span></span> <span data-ttu-id="a5ec9-143">Para todos los cinco niveles de coherencia no estricta, también se informa de hello [métrica de uso vinculado probabilística](http://dl.acm.org/citation.cfm?id=2212359) tooyou directamente.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-143">For all five relaxed consistency levels, we also report hello [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly tooyou.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="a5ec9-144">Ámbito de coherencia</span><span class="sxs-lookup"><span data-stu-id="a5ec9-144">Scope of consistency</span></span>
<span data-ttu-id="a5ec9-145">granularidad de Hola de coherencia es ámbito tooa solicitud de usuario único.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-145">hello granularity of consistency is scoped tooa single user request.</span></span> <span data-ttu-id="a5ec9-146">Una solicitud de escritura puede ser corresponden tooan Insertar, reemplazar, upsert o eliminar la transacción.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-146">A write request may correspond tooan insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="a5ec9-147">Al igual que con operaciones de escritura, una transacción de lectura o consulta también es tooa ámbito solicitud de usuario único.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-147">As with writes, a read/query transaction is also scoped tooa single user request.</span></span> <span data-ttu-id="a5ec9-148">usuario de Hello puede ser necesario toopaginate sobre un gran conjunto de resultados, que abarcan varias particiones, pero cada uno, leen transacción está en ámbito tooa sola página y servirse desde dentro de una sola partición.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-148">hello user may be required toopaginate over a large result-set, spanning multiple partitions, but each read transaction is scoped tooa single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="a5ec9-149">Niveles de coherencia</span><span class="sxs-lookup"><span data-stu-id="a5ec9-149">Consistency levels</span></span>
<span data-ttu-id="a5ec9-150">Puede configurar un nivel de coherencia de manera predeterminada en la cuenta de base de datos que se aplica a las colecciones de tooall (y las bases de datos) en su cuenta de base de datos de Cosmos.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-150">You can configure a default consistency level on your database account that applies tooall collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="a5ec9-151">De forma predeterminada, todas las lecturas y las consultas emitidas en hello nivel de coherencia de hello predeterminado especificado en la cuenta de base de datos de hello utilizan recursos definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-151">By default, all reads and queries issued against hello user-defined resources use hello default consistency level specified on hello database account.</span></span> <span data-ttu-id="a5ec9-152">Pueden ser menos exigentes de nivel de coherencia de Hola de una lectura/consulta específica admite el uso de cada uno de hello las API de solicitud.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-152">You can relax hello consistency level of a specific read/query request using in each of hello supported APIs.</span></span> <span data-ttu-id="a5ec9-153">Hay cinco tipos de niveles de coherencia compatibles con protocolo de replicación de base de datos de Azure Cosmos Hola que proporcionan una solución de compromiso clara entre garantías de coherencia específico y el rendimiento, como se describe en esta sección.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-153">There are five types of consistency levels supported by hello Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="a5ec9-154">**Alta**:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-154">**Strong**:</span></span> 

* <span data-ttu-id="a5ec9-155">Coherencia fuerte ofrece un [linearizability](https://aphyr.com/posts/313-strong-consistency-models) garantía con hello lee la versión más reciente de hello tooreturn garantizada de un elemento.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with hello reads guaranteed tooreturn hello most recent version of an item.</span></span> 
* <span data-ttu-id="a5ec9-156">Coherencia fuerte garantiza que una operación de escritura solo está visible después de su duración confirmada por quórum de mayoría de Hola de réplicas.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-156">Strong consistency guarantees that a write is only visible after it is committed durably by hello majority quorum of replicas.</span></span> <span data-ttu-id="a5ec9-157">Una operación de escritura o sincrónicamente duración confirmada Hola principal y quórum Hola de servidores secundarios, o se anula.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-157">A write is either synchronously committed durably by both hello primary and hello quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="a5ec9-158">Leer el quórum de mayoría de hello siempre confirma una lectura, un cliente nunca puede ver una escritura sin confirmar o parcial y se garantiza que siempre tooread hello más reciente confirmados escritura.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-158">A read is always acknowledged by hello majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed tooread hello latest acknowledged write.</span></span> 
* <span data-ttu-id="a5ec9-159">Azure cuentas de base de datos de Cosmos homogeneidad toouse configurado no pueden asociar más de una región de Azure con su cuenta de base de datos de Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-159">Azure Cosmos DB accounts that are configured toouse strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="a5ec9-160">Hola costo de una operación de lectura (en términos de [unidades de solicitud](request-units.md) consumido) con coherencia fuerte es mayor que la sesión y final, pero Hola igual como uso vinculado.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-160">hello cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but hello same as bounded staleness.</span></span>

<span data-ttu-id="a5ec9-161">**De obsolescencia entrelazada**:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="a5ec9-162">Coherencia de uso vinculado garantiza que las lecturas Hola pueden retrasarse a lo sumo escrituras *K* versiones o prefijos de un elemento o *t* intervalo de tiempo.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-162">Bounded staleness consistency guarantees that hello reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="a5ec9-163">Por lo tanto, cuando elige limitado obsolescencia, Hola "obsolescencia" puede configurarse de dos maneras: número de versiones *K* de elemento de hello mediante el cual Hola lecturas retrasen escrituras de Hola y el intervalo de tiempo de hello *t*</span><span class="sxs-lookup"><span data-stu-id="a5ec9-163">Therefore, when choosing bounded staleness, hello "staleness" can be configured in two ways: number of versions *K* of hello item by which hello reads lag behind hello writes, and hello time interval *t*</span></span> 
* <span data-ttu-id="a5ec9-164">Limitado obsolescencia ofrece total orden global excepto dentro de Hola "ventana de obsolescencia".</span><span class="sxs-lookup"><span data-stu-id="a5ec9-164">Bounded staleness offers total global order except within hello "staleness window."</span></span> <span data-ttu-id="a5ec9-165">Hola monotónico lee garantías existe dentro de una región tanto dentro como fuera Hola "ventana de obsolescencia".</span><span class="sxs-lookup"><span data-stu-id="a5ec9-165">hello monotonic read guarantees exists within a region both inside and outside hello "staleness window."</span></span> 
* <span data-ttu-id="a5ec9-166">La obsolescencia entrelazada proporciona una garantía de coherencia más fuerte que la coherencia de sesión o la eventual.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="a5ec9-167">Para las aplicaciones distribuidas globalmente, se recomienda que utilizar obsolescencia limitada para escenarios donde tendrían como toohave homogeneidad pero también desea latencia baja y una disponibilidad del 99,99%.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like toohave strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="a5ec9-168">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de obsolescencia limitada pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="a5ec9-169">Hola costo de una operación de lectura (en términos de RUs consumido) con uso vinculado es mayor que la sesión y la coherencia, pero Hola igual como homogeneidad.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-169">hello cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but hello same as strong consistency.</span></span>

<span data-ttu-id="a5ec9-170">**Sesión**:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-170">**Session**:</span></span> 

* <span data-ttu-id="a5ec9-171">A diferencia de los modelos de coherencia global Hola ofrecidos por los niveles de coherencia de obsolescencia segura y sin enlazar, coherencia de la sesión es la sesión de cliente de tooa con ámbito.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-171">Unlike hello global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped tooa client session.</span></span> 
* <span data-ttu-id="a5ec9-172">La coherencia de sesión es ideal para todos los escenarios en los que exista una sesión de usuario o dispositivo, ya que garantiza lecturas monotónicas, escrituras monotónicas y lectura de sus propias escrituras (RYW).</span><span class="sxs-lookup"><span data-stu-id="a5ec9-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="a5ec9-173">Coherencia de la sesión proporciona una coherencia de predicción para una sesión y máximo rendimiento de lectura al tiempo que ofrece lecturas y escrituras de latencia más bajos de Hola.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering hello lowest latency writes and reads.</span></span> 
* <span data-ttu-id="a5ec9-174">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de sesión pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="a5ec9-175">Hola costo de una operación de lectura (en términos de RUs consumido) con el nivel de coherencia es menor que la obsolescencia segura y sin enlazar, pero más de la coherencia de sesión</span><span class="sxs-lookup"><span data-stu-id="a5ec9-175">hello cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="a5ec9-176"><a id="consistent-prefix"></a>
**De prefijo coherente**:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="a5ec9-177">Prefijo coherente garantiza que en ausencia de otras escrituras, las réplicas de hello en grupo de hello finalmente convergen.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-177">Consistent prefix guarantees that in absence of any further writes, hello replicas within hello group eventually converge.</span></span> 
* <span data-ttu-id="a5ec9-178">El prefijo coherente garantiza que las lecturas nunca vean escrituras desordenadas.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="a5ec9-179">Si se realizan escrituras en orden de hello `A, B, C`, a continuación, un cliente ve bien `A`, `A,B`, o `A,B,C`, pero nunca fuera de servicio como `A,C` o `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-179">If writes were performed in hello order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="a5ec9-180">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de prefijo coherente pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="a5ec9-181">**Ocasional**:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-181">**Eventual**:</span></span> 

* <span data-ttu-id="a5ec9-182">Coherencia definitiva garantiza que en ausencia de otras escrituras, las réplicas de hello en grupo de hello finalmente convergen.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-182">Eventual consistency guarantees that in absence of any further writes, hello replicas within hello group eventually converge.</span></span> 
* <span data-ttu-id="a5ec9-183">Coherencia definitiva es la forma más débil de Hola de coherencia donde un cliente puede obtener valores de hello que sean más antiguos que Hola que había visto antes.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-183">Eventual consistency is hello weakest form of consistency where a client may get hello values that are older than hello ones it had seen before.</span></span>
* <span data-ttu-id="a5ec9-184">Coherencia definitiva proporciona coherencia de lectura de hello más débil, pero ofrece hello latencia más baja para lecturas y escrituras.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-184">Eventual consistency provides hello weakest read consistency but offers hello lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="a5ec9-185">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia final pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="a5ec9-186">Hola costo de una operación de lectura (en términos de RUs consumido) con coherencia definitiva Hola nivel es el menor de todos los niveles de coherencia de base de datos de Azure Cosmos Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-186">hello cost of a read operation (in terms of RUs consumed) with hello eventual consistency level is hello lowest of all hello Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-hello-default-consistency-level"></a><span data-ttu-id="a5ec9-187">Configurando el nivel de coherencia de saludo predeterminado</span><span class="sxs-lookup"><span data-stu-id="a5ec9-187">Configuring hello default consistency level</span></span>
1. <span data-ttu-id="a5ec9-188">Hola [portal de Azure](https://portal.azure.com/), en Hola Jumpbar, haga clic en **base de datos de Azure Cosmos**.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-188">In hello [Azure portal](https://portal.azure.com/), in hello Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="a5ec9-189">Hola **base de datos de Azure Cosmos** hoja, toomodify de cuenta de base de datos de hello select.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-189">In hello **Azure Cosmos DB** blade, select hello database account toomodify.</span></span>
3. <span data-ttu-id="a5ec9-190">En la hoja de la cuenta de hello, haga clic en **predeterminado coherencia**.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-190">In hello account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="a5ec9-191">Hola **coherencia predeterminada** hoja, nivel de coherencia de hello seleccione Nuevo y haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-191">In hello **Default Consistency** blade, select hello new consistency level and click **Save**.</span></span>
   
    ![Captura de pantalla de resaltado de icono de configuración de Hola y entrada de coherencia predeterminada](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="a5ec9-193">Niveles de coherencia para consultas</span><span class="sxs-lookup"><span data-stu-id="a5ec9-193">Consistency levels for queries</span></span>
<span data-ttu-id="a5ec9-194">De forma predeterminada, para los recursos definidos por el usuario, nivel de coherencia de Hola para consultas es Hola mismo tal y como se lee de nivel de coherencia de Hola para.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-194">By default, for user-defined resources, hello consistency level for queries is hello same as hello consistency level for reads.</span></span> <span data-ttu-id="a5ec9-195">De forma predeterminada, índice Hola se actualiza de forma sincrónica en cada inserción, sustitución o eliminación de un contenedor de elemento toohello Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-195">By default, hello index is updated synchronously on each insert, replace, or delete of an item toohello Cosmos DB container.</span></span> <span data-ttu-id="a5ec9-196">Esto permite que las consultas de hello toohonor Hola de mismo nivel de coherencia de punto de lecturas.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-196">This enables hello queries toohonor hello same consistency level as that of point reads.</span></span> <span data-ttu-id="a5ec9-197">Mientras la base de datos de Azure Cosmos es de escritura optimizado y admite volúmenes sostenidos de escrituras, el mantenimiento del índice sincrónicas y atender consultas coherente, puede configurar cierto tooupdate colecciones su índice de forma diferida.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="a5ec9-198">Aún más la indexación diferida mejora el rendimiento de escritura de Hola y es ideal para escenarios de ingesta de forma masiva cuando una carga de trabajo es principalmente con muchas lecturas.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-198">Lazy indexing further boosts hello write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="a5ec9-199">Modo de indexación</span><span class="sxs-lookup"><span data-stu-id="a5ec9-199">Indexing Mode</span></span> | <span data-ttu-id="a5ec9-200">Lecturas</span><span class="sxs-lookup"><span data-stu-id="a5ec9-200">Reads</span></span> | <span data-ttu-id="a5ec9-201">Consultas</span><span class="sxs-lookup"><span data-stu-id="a5ec9-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a5ec9-202">Coherente (predeterminado)</span><span class="sxs-lookup"><span data-stu-id="a5ec9-202">Consistent (default)</span></span> |<span data-ttu-id="a5ec9-203">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="a5ec9-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="a5ec9-204">Seleccionar entre fuerte, de obsolescencia entrelazada, de sesión y eventual</span><span class="sxs-lookup"><span data-stu-id="a5ec9-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="a5ec9-205">Diferida</span><span class="sxs-lookup"><span data-stu-id="a5ec9-205">Lazy</span></span> |<span data-ttu-id="a5ec9-206">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="a5ec9-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="a5ec9-207">Ocasional</span><span class="sxs-lookup"><span data-stu-id="a5ec9-207">Eventual</span></span> |
| <span data-ttu-id="a5ec9-208">None</span><span class="sxs-lookup"><span data-stu-id="a5ec9-208">None</span></span> |<span data-ttu-id="a5ec9-209">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="a5ec9-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="a5ec9-210">No aplicable</span><span class="sxs-lookup"><span data-stu-id="a5ec9-210">Not applicable</span></span> |

<span data-ttu-id="a5ec9-211">Como con las solicitudes de lectura, puede disminuir nivel de coherencia de Hola de una solicitud de consulta específica en cada API.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-211">As with read requests, you can lower hello consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a5ec9-212">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a5ec9-212">Next steps</span></span>
<span data-ttu-id="a5ec9-213">Si desea que toodo leer más sobre los niveles de coherencia y compensaciones, se recomienda Hola recursos siguientes:</span><span class="sxs-lookup"><span data-stu-id="a5ec9-213">If you'd like toodo more reading about consistency levels and tradeoffs, we recommend hello following resources:</span></span>

* <span data-ttu-id="a5ec9-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-214">Doug Terry.</span></span> <span data-ttu-id="a5ec9-215">Vídeo Replicated Data Consistency explained through baseball (Coherencia de datos replicados explicada mediante el béisbol).</span><span class="sxs-lookup"><span data-stu-id="a5ec9-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="a5ec9-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="a5ec9-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="a5ec9-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-217">Doug Terry.</span></span> <span data-ttu-id="a5ec9-218">Explicación de la coherencia de datos replicados a través del béisbol.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="a5ec9-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="a5ec9-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="a5ec9-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-220">Doug Terry.</span></span> <span data-ttu-id="a5ec9-221">Garantías de sesión para datos replicados con coherencia débil.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="a5ec9-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="a5ec9-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="a5ec9-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-223">Daniel Abadi.</span></span> <span data-ttu-id="a5ec9-224">Inconvenientes de coherencia moderna diseñar sistemas de bases de datos distribuidas: CAP es solo una parte de caso de Hola ".</span><span class="sxs-lookup"><span data-stu-id="a5ec9-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of hello story”.</span></span>   
  [<span data-ttu-id="a5ec9-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="a5ec9-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="a5ec9-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="a5ec9-227">Uso vinculado probabilístico (PBS) para cuórums parciales prácticos.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="a5ec9-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="a5ec9-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="a5ec9-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-229">Werner Vogels.</span></span> <span data-ttu-id="a5ec9-230">Coherencia ocasional - Revisión.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="a5ec9-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="a5ec9-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="a5ec9-232">MONI Naor, Avishai en rama, Hola carga, capacidad y disponibilidad de quórum sistemas SIAM diario en informática, n.2 v.27, p.423-447, abril de 1998.</span><span class="sxs-lookup"><span data-stu-id="a5ec9-232">Moni Naor , Avishai Wool, hello Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="a5ec9-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="a5ec9-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="a5ec9-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, línea: un completo y automática linearizability Comprobador, actas de conferencia de ACM SIGPLAN 2010 hello en Programming language diseño e implementación, 05-10 de junio de 2010, Toronto, Ontario, Canadá [dominio de interpretación > 10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="a5ec9-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of hello 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="a5ec9-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica, probabilísticamente limitado obsolescencia de prácticas quórums parciales, un procedimiento de hello Almacenamientos dotación, v.5 n.8, p.776-787, abril de 2012 [http:// DL.ACM.org/Citation.cfm?ID=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="a5ec9-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of hello VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>

---
title: Niveles de coherencia en Azure Cosmos DB | Documentos de Microsoft
description: Azure Cosmos DB tiene cinco niveles de coherencia para ayudar a equilibrar la coherencia, la disponibilidad y la latencia finales.
keywords: coherencia final, azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="9507b-104">Niveles de coherencia de datos optimizables en Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="9507b-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="9507b-105">El diseño de Azure Cosmos DB se llevó a cabo desde el principio pensando en la distribución global de cada modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="9507b-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="9507b-106">Se ha diseñado para que ofrezca garantías de una baja latencia predecible, un Acuerdo de Nivel de Servicio (SLA) con un 99,99 % de disponibilidad y varios modelos de coherencia moderada bien definidos.</span><span class="sxs-lookup"><span data-stu-id="9507b-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="9507b-107">Actualmente, Azure Cosmos DB ofrece cinco niveles de coherencia: fuerte, de obsolescencia limitada, de sesión, de prefijo coherente y final.</span><span class="sxs-lookup"><span data-stu-id="9507b-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="9507b-108">Además de los modelos de **coherencia fuerte** y **final** que proporcionan habitualmente las bases de datos distribuidas, Azure Cosmos DB ofrece tres modelos de coherencia codificados y operacionalizados de forma cuidadosa. Además, tiene su utilidad validada en casos de uso reales.</span><span class="sxs-lookup"><span data-stu-id="9507b-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="9507b-109">Estos son los niveles de coherencia **obsolescencia limitada**, **de sesión** y **de prefijo coherente**.</span><span class="sxs-lookup"><span data-stu-id="9507b-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="9507b-110">De forma colectiva, estos cinco niveles de coherencia permiten lograr equilibrios bien razonados entre la coherencia, la disponibilidad y la latencia.</span><span class="sxs-lookup"><span data-stu-id="9507b-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="9507b-111">Coherencia y bases de datos distribuidas</span><span class="sxs-lookup"><span data-stu-id="9507b-111">Distributed databases and consistency</span></span>
<span data-ttu-id="9507b-112">Las bases de datos distribuidas comerciales se dividen en dos categorías: las bases de datos que no ofrecen opciones de coherencia bien definida en absoluto y las que ofrecen dos opciones de programación opuestas (coherencia alta y ocasional).</span><span class="sxs-lookup"><span data-stu-id="9507b-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="9507b-113">La primera supone una carga de detalles pormenorizados de los protocolos de replicación para los desarrolladores de aplicaciones y espera de ellos difíciles compensaciones entre coherencia, disponibilidad, latencia y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9507b-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="9507b-114">La última obliga a elegir uno de los dos extremos.</span><span class="sxs-lookup"><span data-stu-id="9507b-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="9507b-115">A pesar de la gran cantidad de investigación y propuestas de más de 50 modelos de coherencia, la comunidad de bases de datos distribuidas no ha sido capaz de comercializar otros niveles de coherencia distintos del alto y el final.</span><span class="sxs-lookup"><span data-stu-id="9507b-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="9507b-116">Cosmos DB permite a los desarrolladores elegir entre cinco modelos de coherencia bien definidos dentro del espectro de coherencia: alta, de obsolescencia limitada, [de sesión](http://dl.acm.org/citation.cfm?id=383631), de prefijo coherente y final.</span><span class="sxs-lookup"><span data-stu-id="9507b-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB ofrece varios modelos de coherencia bien definida (progresivos) entre los que elegir](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="9507b-118">En la tabla siguiente se muestran las garantías específicas que ofrece cada nivel de coherencia.</span><span class="sxs-lookup"><span data-stu-id="9507b-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="9507b-119">**Niveles de coherencia y garantías**</span><span class="sxs-lookup"><span data-stu-id="9507b-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="9507b-120">Nivel de coherencia</span><span class="sxs-lookup"><span data-stu-id="9507b-120">Consistency Level</span></span> | <span data-ttu-id="9507b-121">Garantías</span><span class="sxs-lookup"><span data-stu-id="9507b-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="9507b-122">Alta</span><span class="sxs-lookup"><span data-stu-id="9507b-122">Strong</span></span> | <span data-ttu-id="9507b-123">Linealidad</span><span class="sxs-lookup"><span data-stu-id="9507b-123">Linearizability</span></span> |
| <span data-ttu-id="9507b-124">De obsolescencia entrelazada</span><span class="sxs-lookup"><span data-stu-id="9507b-124">Bounded Staleness</span></span> | <span data-ttu-id="9507b-125">Prefijo coherente.</span><span class="sxs-lookup"><span data-stu-id="9507b-125">Consistent Prefix.</span></span> <span data-ttu-id="9507b-126">Los prefijos k y los intervalos t retrasan las lecturas tras las escrituras</span><span class="sxs-lookup"><span data-stu-id="9507b-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="9507b-127">Sesión</span><span class="sxs-lookup"><span data-stu-id="9507b-127">Session</span></span>   | <span data-ttu-id="9507b-128">Prefijo coherente.</span><span class="sxs-lookup"><span data-stu-id="9507b-128">Consistent Prefix.</span></span> <span data-ttu-id="9507b-129">Lecturas monótonas, escrituras monótonas, lectura de la escritura, escritura tras las lecturas</span><span class="sxs-lookup"><span data-stu-id="9507b-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="9507b-130">De prefijo coherente</span><span class="sxs-lookup"><span data-stu-id="9507b-130">Consistent Prefix</span></span> | <span data-ttu-id="9507b-131">Las actualizaciones devueltas son prefijos de todas las actualizaciones, sin espacios</span><span class="sxs-lookup"><span data-stu-id="9507b-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="9507b-132">Ocasional</span><span class="sxs-lookup"><span data-stu-id="9507b-132">Eventual</span></span>  | <span data-ttu-id="9507b-133">Lecturas sin orden</span><span class="sxs-lookup"><span data-stu-id="9507b-133">Out of order reads</span></span> |

<span data-ttu-id="9507b-134">Puede establecer la coherencia predeterminada en la cuenta de Cosmos DB (y después reemplazar la para una solicitud de lectura concreta).</span><span class="sxs-lookup"><span data-stu-id="9507b-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="9507b-135">Internamente, la coherencia predeterminada se aplica a los datos de los conjuntos de particiones que pueden abarcar regiones.</span><span class="sxs-lookup"><span data-stu-id="9507b-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="9507b-136">Aproximadamente un 73 % de nuestros inquilinos usan la coherencia de sesión y un 20 % prefiere la obsolescencia limitada.</span><span class="sxs-lookup"><span data-stu-id="9507b-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="9507b-137">Observamos que aproximadamente el 3 % de nuestros clientes experimentan con distintos niveles de coherencia inicialmente antes de fijar una opción de coherencia específica para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="9507b-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="9507b-138">También observamos que solo un 2 % de nuestros inquilinos reemplazan los niveles de coherencia por solicitud.</span><span class="sxs-lookup"><span data-stu-id="9507b-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="9507b-139">En Cosmos DB, las lecturas de coherencia de sesión, prefijo coherente y final son el doble de económicas que las de coherencia fuerte o de obsolescencia limitada.</span><span class="sxs-lookup"><span data-stu-id="9507b-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="9507b-140">Cosmos DB presenta acuerdos de nivel de servicio líderes del sector completos del 99,99 %, que incluyen garantías de coherencia, además de disponibilidad, rendimiento y latencia.</span><span class="sxs-lookup"><span data-stu-id="9507b-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="9507b-141">Empleamos un [comprobador de linealidad](http://dl.acm.org/citation.cfm?id=1806634), que funciona continuamente sobre nuestra telemetría de servicio y le notifica abiertamente las infracciones de coherencia.</span><span class="sxs-lookup"><span data-stu-id="9507b-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="9507b-142">Para la obsolescencia limitada, supervisamos y notificamos las infracciones de los límites de k y t.</span><span class="sxs-lookup"><span data-stu-id="9507b-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="9507b-143">Para los cinco niveles de coherencia moderada, también se le notifica directamente la [métrica de obsolescencia limitada probabilística](http://dl.acm.org/citation.cfm?id=2212359).</span><span class="sxs-lookup"><span data-stu-id="9507b-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="9507b-144">Ámbito de coherencia</span><span class="sxs-lookup"><span data-stu-id="9507b-144">Scope of consistency</span></span>
<span data-ttu-id="9507b-145">El ámbito de la granularidad de coherencia se limita a una única solicitud de usuario.</span><span class="sxs-lookup"><span data-stu-id="9507b-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="9507b-146">Una solicitud de escritura puede corresponder a una transacción de inserción, reemplazo, upsert o eliminación.</span><span class="sxs-lookup"><span data-stu-id="9507b-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="9507b-147">Al igual que con las escrituras, el ámbito de una transacción de lectura o consulta también se limita a una única solicitud de usuario.</span><span class="sxs-lookup"><span data-stu-id="9507b-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="9507b-148">Es posible que el usuario deba paginar un conjunto grande de resultados, que abarque varias particiones, pero el ámbito de cada transacción de lectura se restringe a una sola página y se atiende desde dentro de una sola partición.</span><span class="sxs-lookup"><span data-stu-id="9507b-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="9507b-149">Niveles de coherencia</span><span class="sxs-lookup"><span data-stu-id="9507b-149">Consistency levels</span></span>
<span data-ttu-id="9507b-150">Puede configurar el nivel de coherencia predeterminado en la cuenta de la base de datos que se aplica a todas las colecciones (y bases de datos) de su cuenta de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="9507b-151">De manera predeterminada, todas las lecturas y consultas enviadas a los recursos definidos por el usuario usan el nivel de coherencia predeterminado especificado en la cuenta de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9507b-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="9507b-152">Puede relajar el nivel de coherencia de una solicitud de lectura o consulta específica que se usa en cada una de las API admitidas.</span><span class="sxs-lookup"><span data-stu-id="9507b-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="9507b-153">Existen cinco tipos de niveles de coherencia admitidos por el protocolo de replicación de Azure Cosmos DB que proporcionan un equilibrio claro entre las garantías de coherencia específicas y el rendimiento, como se describe en esta sección.</span><span class="sxs-lookup"><span data-stu-id="9507b-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="9507b-154">**Alta**:</span><span class="sxs-lookup"><span data-stu-id="9507b-154">**Strong**:</span></span> 

* <span data-ttu-id="9507b-155">La coherencia fuerte ofrece una garantía de [linealidad](https://aphyr.com/posts/313-strong-consistency-models) que asegura que las lecturas devuelvan la versión más reciente de un elemento.</span><span class="sxs-lookup"><span data-stu-id="9507b-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="9507b-156">la coherencia alta garantiza que una escritura solo es visible después de confirmarse de forma duradera por la mayoría del cuórum de réplicas.</span><span class="sxs-lookup"><span data-stu-id="9507b-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="9507b-157">Una escritura se confirma sincrónicamente de forma duradera tanto por la réplica principal como por el cuórum de las secundarias, o se anula.</span><span class="sxs-lookup"><span data-stu-id="9507b-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="9507b-158">Una lectura siempre se confirma por la mayoría del cuórum de lectura; un cliente no puede ver nunca una escritura no confirmada o parcial y cuenta con la garantía de que leerá la última escritura confirmada.</span><span class="sxs-lookup"><span data-stu-id="9507b-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="9507b-159">Las cuentas de Azure Cosmos DB configuradas para usar la coherencia fuerte no pueden asociar más de una región de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="9507b-160">El costo de una operación de lectura (en términos de [unidades de solicitud](request-units.md) consumidas) con coherencia fuerte es mayor que con la de sesión o la eventual, pero igual que con la de obsolescencia entrelazada.</span><span class="sxs-lookup"><span data-stu-id="9507b-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="9507b-161">**De obsolescencia entrelazada**:</span><span class="sxs-lookup"><span data-stu-id="9507b-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="9507b-162">La coherencia de obsolescencia limitada garantiza que las lecturas puedan ir con retraso respecto a las escrituras en un máximo de versiones *K* o prefijos de un elemento o el intervalo de tiempo *t*.</span><span class="sxs-lookup"><span data-stu-id="9507b-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="9507b-163">Por lo tanto, si elige la obsolescencia limitada, la "obsolescencia" puede configurarse de dos maneras: por el número de versiones *K* del elemento por el que las lecturas van detrás de las escrituras y por el intervalo de tiempo *t*.</span><span class="sxs-lookup"><span data-stu-id="9507b-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="9507b-164">La obsolescencia limitada ofrece un orden global total, excepto dentro de la "ventana de obsolescencia".</span><span class="sxs-lookup"><span data-stu-id="9507b-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="9507b-165">Tenga en cuenta que la garantía de lectura monotónica existe dentro de una región tanto dentro como fuera de la "ventana de obsolescencia".</span><span class="sxs-lookup"><span data-stu-id="9507b-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="9507b-166">La obsolescencia entrelazada proporciona una garantía de coherencia más fuerte que la coherencia de sesión o la eventual.</span><span class="sxs-lookup"><span data-stu-id="9507b-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="9507b-167">Para las aplicaciones de distribución global, se recomienda utilizar la obsolescencia entrelazada para aquellos escenarios donde se desea disponer de coherencia fuerte pero también de una disponibilidad del 99,99 % y una latencia baja.</span><span class="sxs-lookup"><span data-stu-id="9507b-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="9507b-168">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de obsolescencia limitada pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="9507b-169">El costo de una operación de lectura (en términos de unidades de solicitud consumidas) con uso vinculado es mayor que con la de sesión o la eventual, pero igual que con la de coherencia fuerte.</span><span class="sxs-lookup"><span data-stu-id="9507b-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="9507b-170">**Sesión**:</span><span class="sxs-lookup"><span data-stu-id="9507b-170">**Session**:</span></span> 

* <span data-ttu-id="9507b-171">A diferencia de los modelos de coherencia global ofrecidos por los niveles de coherencia fuerte y de obsolescencia entrelazada, el ámbito de la coherencia de sesión corresponde a una sesión de cliente.</span><span class="sxs-lookup"><span data-stu-id="9507b-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="9507b-172">La coherencia de sesión es ideal para todos los escenarios en los que exista una sesión de usuario o dispositivo, ya que garantiza lecturas monotónicas, escrituras monotónicas y lectura de sus propias escrituras (RYW).</span><span class="sxs-lookup"><span data-stu-id="9507b-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="9507b-173">La coherencia de sesión proporciona una coherencia predecible para una sesión, así como de un rendimiento de lectura máximo, al mismo tiempo que ofrece las escrituras y lecturas con menor latencia.</span><span class="sxs-lookup"><span data-stu-id="9507b-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="9507b-174">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de sesión pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="9507b-175">El costo de una operación de lectura (en términos de unidades de solicitud consumidas) con coherencia de sesión es menor que con la fuerte o la de obsolescencia entrelazada, pero más que con la eventual.</span><span class="sxs-lookup"><span data-stu-id="9507b-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="9507b-176"><a id="consistent-prefix"></a>
**De prefijo coherente**:</span><span class="sxs-lookup"><span data-stu-id="9507b-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="9507b-177">La coherencia de prefijo coherente garantiza que, en ausencia de escrituras adicionales, las réplicas dentro del grupo terminarán por converger.</span><span class="sxs-lookup"><span data-stu-id="9507b-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="9507b-178">El prefijo coherente garantiza que las lecturas nunca vean escrituras desordenadas.</span><span class="sxs-lookup"><span data-stu-id="9507b-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="9507b-179">Si se realizan escrituras en el orden `A, B, C`, un cliente ve `A`, `A,B` o `A,B,C`, pero nunca un desorden como `A,C` o `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="9507b-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="9507b-180">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia de prefijo coherente pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="9507b-181">**Ocasional**:</span><span class="sxs-lookup"><span data-stu-id="9507b-181">**Eventual**:</span></span> 

* <span data-ttu-id="9507b-182">La coherencia final garantiza que, en ausencia de escrituras adicionales, las réplicas dentro del grupo terminarán por converger.</span><span class="sxs-lookup"><span data-stu-id="9507b-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="9507b-183">La coherencia eventual es la forma más débil de coherencia, ya que un cliente puede obtener los valores que son más antiguos que los que ha visto antes.</span><span class="sxs-lookup"><span data-stu-id="9507b-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="9507b-184">La coherencia ocasional proporciona la coherencia de lectura más débil, pero ofrece la latencia más baja tanto para lecturas como para escrituras.</span><span class="sxs-lookup"><span data-stu-id="9507b-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="9507b-185">Las cuentas de Azure Cosmos DB que están configuradas con la coherencia final pueden asociar cualquier número de regiones de Azure a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="9507b-186">El costo de una operación de lectura (en términos de unidades de solicitud consumidas) con el nivel de coherencia final es el más bajo de entre todos los niveles de coherencia de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="9507b-187">Configuración del nivel de coherencia predeterminado</span><span class="sxs-lookup"><span data-stu-id="9507b-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="9507b-188">En la barra de accesos de [Azure Portal](https://portal.azure.com/), haga clic en **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="9507b-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="9507b-189">En la hoja **Azure Cosmos DB**, seleccione la cuenta de base de datos que quiere modificar.</span><span class="sxs-lookup"><span data-stu-id="9507b-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="9507b-190">En la hoja Cuenta, haga clic en **Coherencia predeterminada**.</span><span class="sxs-lookup"><span data-stu-id="9507b-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="9507b-191">En la hoja **Coherencia predeterminada**, seleccione el nuevo nivel de coherencia y haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="9507b-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Captura de pantalla que muestra el icono Configuración y la entrada Coherencia predeterminada](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="9507b-193">Niveles de coherencia para consultas</span><span class="sxs-lookup"><span data-stu-id="9507b-193">Consistency levels for queries</span></span>
<span data-ttu-id="9507b-194">De manera predeterminada, para los recursos definidos por el usuario, el nivel de coherencia de las consultas es igual que el de las lecturas.</span><span class="sxs-lookup"><span data-stu-id="9507b-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="9507b-195">De forma predeterminada, el índice se actualiza de forma sincrónica con cada inserción, reemplazo o eliminación de un elemento en el contenedor de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="9507b-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="9507b-196">Esto permite a las consultas respetar el mismo nivel de coherencia que el de las lecturas puntuales.</span><span class="sxs-lookup"><span data-stu-id="9507b-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="9507b-197">Aunque Azure Cosmos DB está optimizado para escrituras y admite volúmenes sostenidos de escrituras, un mantenimiento sincrónico de índices y un servicio de consultas coherentes, se pueden configurar determinadas colecciones para actualizar el índice de manera diferida.</span><span class="sxs-lookup"><span data-stu-id="9507b-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="9507b-198">La indización diferida incrementa aún más el rendimiento de las escrituras y es ideal para aquellos escenarios de ingesta en bloque en donde la carga de trabajo sea sobre todo de lecturas.</span><span class="sxs-lookup"><span data-stu-id="9507b-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="9507b-199">Modo de indexación</span><span class="sxs-lookup"><span data-stu-id="9507b-199">Indexing Mode</span></span> | <span data-ttu-id="9507b-200">Lecturas</span><span class="sxs-lookup"><span data-stu-id="9507b-200">Reads</span></span> | <span data-ttu-id="9507b-201">Consultas</span><span class="sxs-lookup"><span data-stu-id="9507b-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9507b-202">Coherente (predeterminado)</span><span class="sxs-lookup"><span data-stu-id="9507b-202">Consistent (default)</span></span> |<span data-ttu-id="9507b-203">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="9507b-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="9507b-204">Seleccionar entre fuerte, de obsolescencia entrelazada, de sesión y eventual</span><span class="sxs-lookup"><span data-stu-id="9507b-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="9507b-205">Diferida</span><span class="sxs-lookup"><span data-stu-id="9507b-205">Lazy</span></span> |<span data-ttu-id="9507b-206">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="9507b-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="9507b-207">Ocasional</span><span class="sxs-lookup"><span data-stu-id="9507b-207">Eventual</span></span> |
| <span data-ttu-id="9507b-208">None</span><span class="sxs-lookup"><span data-stu-id="9507b-208">None</span></span> |<span data-ttu-id="9507b-209">Seleccionar entre fuerte, de obsolescencia limitada, de sesión, de prefijo coherente o final</span><span class="sxs-lookup"><span data-stu-id="9507b-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="9507b-210">No aplicable</span><span class="sxs-lookup"><span data-stu-id="9507b-210">Not applicable</span></span> |

<span data-ttu-id="9507b-211">Al igual que con las solicitudes de lectura, puede disminuir el nivel de coherencia de una solicitud de consulta concreta en cada API.</span><span class="sxs-lookup"><span data-stu-id="9507b-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9507b-212">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="9507b-212">Next steps</span></span>
<span data-ttu-id="9507b-213">Si desea leer más sobre los niveles de coherencia y los compromisos, recomendamos los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="9507b-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="9507b-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="9507b-214">Doug Terry.</span></span> <span data-ttu-id="9507b-215">Vídeo Replicated Data Consistency explained through baseball (Coherencia de datos replicados explicada mediante el béisbol).</span><span class="sxs-lookup"><span data-stu-id="9507b-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="9507b-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="9507b-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="9507b-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="9507b-217">Doug Terry.</span></span> <span data-ttu-id="9507b-218">Explicación de la coherencia de datos replicados a través del béisbol.</span><span class="sxs-lookup"><span data-stu-id="9507b-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="9507b-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="9507b-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="9507b-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="9507b-220">Doug Terry.</span></span> <span data-ttu-id="9507b-221">Garantías de sesión para datos replicados con coherencia débil.</span><span class="sxs-lookup"><span data-stu-id="9507b-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="9507b-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="9507b-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="9507b-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="9507b-223">Daniel Abadi.</span></span> <span data-ttu-id="9507b-224">Compromisos de coherencia en el diseño de sistemas modernos de bases de datos distribuidas: CAP es solo una parte de la historia".</span><span class="sxs-lookup"><span data-stu-id="9507b-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="9507b-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="9507b-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="9507b-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="9507b-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="9507b-227">Uso vinculado probabilístico (PBS) para cuórums parciales prácticos.</span><span class="sxs-lookup"><span data-stu-id="9507b-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="9507b-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="9507b-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="9507b-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="9507b-229">Werner Vogels.</span></span> <span data-ttu-id="9507b-230">Coherencia ocasional - Revisión.</span><span class="sxs-lookup"><span data-stu-id="9507b-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="9507b-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="9507b-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="9507b-232">Moni Naor y Avishai Wool. The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v. 27 n.º 2, p. 423-447, abril de 1998.</span><span class="sxs-lookup"><span data-stu-id="9507b-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="9507b-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="9507b-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="9507b-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi y Roy Tan. Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, 5-10 de junio de 2010, Toronto, Ontario, Canadá [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="9507b-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="9507b-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein e Ion Stoica. Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v. 5 n.º 8, p. 776-787, abril de 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="9507b-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>

---
title: Modelo de recursos y conceptos de Azure Cosmos DB | Microsoft Docs
description: "Obtenga información sobre el modelo jerárquico de Azure Cosmos DB de bases de datos, colecciones, funciones definidas por el usuario (UDF), documentos, permisos para administrar recursos, etc."
keywords: "Modelo jerárquico, cosmosdb, azure, Microsoft azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8051742c7c368d1ed84bcd90ab75b20f62105e2f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="890de-104">Conceptos básicos y modelo jerárquico de recursos de Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="890de-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="890de-105">Las entidades de base de datos que administra Azure Cosmos DB se conocen como **recursos**.</span><span class="sxs-lookup"><span data-stu-id="890de-105">The database entities that Azure Cosmos DB manages are referred to as **resources**.</span></span> <span data-ttu-id="890de-106">Cada recurso se identifica mediante un URI lógico.</span><span class="sxs-lookup"><span data-stu-id="890de-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="890de-107">Se puede interactuar con los recursos mediante verbos HTTP estándar, encabezados de solicitud/respuesta y códigos de estado.</span><span class="sxs-lookup"><span data-stu-id="890de-107">You can interact with the resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="890de-108">Después de leer este artículo, podrá responder a las preguntas siguientes:</span><span class="sxs-lookup"><span data-stu-id="890de-108">By reading this article, you'll be able to answer the following questions:</span></span>

* <span data-ttu-id="890de-109">¿Qué es el modelo de recursos de Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="890de-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="890de-110">¿Qué diferencia existe entre los recursos definidos por el sistema y los recursos definidos por el usuario?</span><span class="sxs-lookup"><span data-stu-id="890de-110">What are system defined resources as opposed to user defined resources?</span></span>
* <span data-ttu-id="890de-111">¿Cómo se puede dirigir un recurso?</span><span class="sxs-lookup"><span data-stu-id="890de-111">How do I address a resource?</span></span>
* <span data-ttu-id="890de-112">¿Cómo se trabaja con las colecciones?</span><span class="sxs-lookup"><span data-stu-id="890de-112">How do I work with collections?</span></span>
* <span data-ttu-id="890de-113">¿Cómo se trabaja con procedimientos almacenados, desencadenadores y Funciones definidas por el usuario (UDF)?</span><span class="sxs-lookup"><span data-stu-id="890de-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="890de-114">Modelo jerárquico de recursos</span><span class="sxs-lookup"><span data-stu-id="890de-114">Hierarchical resource model</span></span>
<span data-ttu-id="890de-115">Tal y como muestra el siguiente diagrama, el **modelo de recursos** jerárquico de Cosmos DB consta de conjuntos de recursos en una cuenta de base de datos, cada uno de ellos direccionable mediante un URI lógico y estable.</span><span class="sxs-lookup"><span data-stu-id="890de-115">As the following diagram illustrates, the Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="890de-116">En este artículo, los conjuntos de recursos se denominan **fuentes** .</span><span class="sxs-lookup"><span data-stu-id="890de-116">A set of resources will be referred to as a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="890de-117">Azure Cosmos DB ofrece un protocolo de TCP sumamente eficaz que también es RESTful en su modelo de comunicación. Está disponible a través de la [API de cliente de .NET DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through the [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="890de-118">![Modelo jerárquico de recursos de Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="890de-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="890de-119">**Modelo jerárquico de recursos**</span><span class="sxs-lookup"><span data-stu-id="890de-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="890de-120">Para empezar a trabajar con recursos, debe [crear una cuenta de base de datos de base de datos](create-documentdb-dotnet.md) con su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="890de-120">To start working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="890de-121">Una cuenta de base de datos puede constar de un grupo de **bases de datos**, cada una con varias **colecciones**, que a su vez pueden contener **procedimientos almacenados, desencadenadores, UDF, documentos** y **datos adjuntos** relacionados.</span><span class="sxs-lookup"><span data-stu-id="890de-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="890de-122">Una base de datos también tiene **usuarios** asociados, cada uno con un conjunto de **permisos** para obtener acceso a las colecciones, procedimientos almacenados, desencadenadores, UDF, documentos o datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="890de-122">A database also has associated **users**, each with a set of **permissions** to access collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="890de-123">Mientras las bases de datos, usuarios, permisos y colecciones son recursos definidos por el sistema con esquemas, documentos y datos adjuntos conocidos con contenido arbitrario JSON definido por el usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="890de-124">Recurso</span><span class="sxs-lookup"><span data-stu-id="890de-124">Resource</span></span> | <span data-ttu-id="890de-125">Description</span><span class="sxs-lookup"><span data-stu-id="890de-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="890de-126">Cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-126">Database account</span></span> |<span data-ttu-id="890de-127">Una cuenta de base de datos está asociada a un conjunto de bases de datos y una cantidad fija de almacenamiento de blobs para los datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="890de-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="890de-128">Puede crear una o más cuentas de base de datos mediante su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="890de-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="890de-129">Para obtener más información, visite nuestra [página de precios](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="890de-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="890de-130">Base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-130">Database</span></span> |<span data-ttu-id="890de-131">Una base de datos es un contenedor lógico de almacenamiento de documentos particionado en recopilaciones.</span><span class="sxs-lookup"><span data-stu-id="890de-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="890de-132">Es también un contenedor de usuarios.</span><span class="sxs-lookup"><span data-stu-id="890de-132">It is also a users container.</span></span> |
| <span data-ttu-id="890de-133">Usuario</span><span class="sxs-lookup"><span data-stu-id="890de-133">User</span></span> |<span data-ttu-id="890de-134">El espacio de nombres lógico para dirigir los permisos.</span><span class="sxs-lookup"><span data-stu-id="890de-134">The logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="890de-135">Permiso</span><span class="sxs-lookup"><span data-stu-id="890de-135">Permission</span></span> |<span data-ttu-id="890de-136">Un token de autorización asociado con un usuario para el acceso a un recurso específico.</span><span class="sxs-lookup"><span data-stu-id="890de-136">An authorization token associated with a user for access to a specific resource.</span></span> |
| <span data-ttu-id="890de-137">Colección</span><span class="sxs-lookup"><span data-stu-id="890de-137">Collection</span></span> |<span data-ttu-id="890de-138">Una colección es un contenedor de documentos JSON asociado a la lógica de aplicación de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="890de-138">A collection is a container of JSON documents and the associated JavaScript application logic.</span></span> <span data-ttu-id="890de-139">Una colección es una entidad facturable, donde el [costo](performance-levels.md) está determinado por el nivel de rendimiento asociado a la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-139">A collection is a billable entity, where the [cost](performance-levels.md) is determined by the performance level associated with the collection.</span></span> <span data-ttu-id="890de-140">Las colecciones pueden abarcar una o varias particiones o uno o varios servidores y se pueden escalar para administrar volúmenes prácticamente ilimitados de almacenamiento o rendimiento.</span><span class="sxs-lookup"><span data-stu-id="890de-140">Collections can span one or more partitions/servers and can scale to handle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="890de-141">Procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="890de-141">Stored Procedure</span></span> |<span data-ttu-id="890de-142">Lógica de aplicaciones creada en JavaScript que se registra con una recopilación y se ejecuta de manera transaccional en el motor de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within the database engine.</span></span> |
| <span data-ttu-id="890de-143">Desencadenador</span><span class="sxs-lookup"><span data-stu-id="890de-143">Trigger</span></span> |<span data-ttu-id="890de-144">Lógica de aplicaciones creada en JavaScript que se ejecuta antes o después de una operación de inserción, reemplazo o eliminación.</span><span class="sxs-lookup"><span data-stu-id="890de-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="890de-145">UDF</span><span class="sxs-lookup"><span data-stu-id="890de-145">UDF</span></span> |<span data-ttu-id="890de-146">Lógica de aplicaciones creada en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="890de-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="890de-147">Las UDF le permiten modelar un operador de consultas personalizado y con ello ampliar el lenguaje de consultas de API de DocumentDB central.</span><span class="sxs-lookup"><span data-stu-id="890de-147">UDFs enable you to model a custom query operator and thereby extend the core DocumentDB API query language.</span></span> |
| <span data-ttu-id="890de-148">Documento</span><span class="sxs-lookup"><span data-stu-id="890de-148">Document</span></span> |<span data-ttu-id="890de-149">Contenido JSON definido por el usuario (arbitrario).</span><span class="sxs-lookup"><span data-stu-id="890de-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="890de-150">De manera predeterminada, no es necesario definir esquemas ni proporcionar índices secundarios para todos los documentos agregados a una recopilación.</span><span class="sxs-lookup"><span data-stu-id="890de-150">By default, no schema needs to be defined nor do secondary indices need to be provided for all the documents added to a collection.</span></span> |
| <span data-ttu-id="890de-151">Datos adjuntos</span><span class="sxs-lookup"><span data-stu-id="890de-151">Attachment</span></span> |<span data-ttu-id="890de-152">Los datos adjuntos son documentos especiales que contienen referencias y metadatos asociados con blobs/medios externos.</span><span class="sxs-lookup"><span data-stu-id="890de-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="890de-153">El desarrollador puede decidir administrar los blobs a través de Cosmos DB o almacenarlos con un proveedor de servicios de blobs externos como OneDrive, Dropbox, etc.</span><span class="sxs-lookup"><span data-stu-id="890de-153">The developer can choose to have the blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="890de-154">Recursos del sistema frente a recursos definidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="890de-154">System vs. user defined resources</span></span>
<span data-ttu-id="890de-155">Los recursos como cuentas de base de datos, bases de datos, colecciones, usuarios, permisos, procedimientos almacenados, desencadenadores y UDF, tienen todos un esquema fijo y se denominan recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="890de-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="890de-156">En cambio, los recursos como documentos y datos adjuntos no tienen restricciones de esquema y son ejemplos de recursos definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-156">In contrast, resources such as documents and attachments have no restrictions on the schema and are examples of user defined resources.</span></span> <span data-ttu-id="890de-157">En Cosmos DB, tanto los recursos del sistema como los definidos por el usuario se representan y controlan como JSON compatibles con el estándar.</span><span class="sxs-lookup"><span data-stu-id="890de-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="890de-158">Todos los recursos ya sean definidos por el sistema o el usuario tienen las siguientes propiedades comunes.</span><span class="sxs-lookup"><span data-stu-id="890de-158">All resources, system or user defined, have the following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="890de-159">Tenga en cuenta que todas las propiedades generadas por el sistema en un recurso tienen un prefijo con subrayado (_) en su representación de JSON.</span><span class="sxs-lookup"><span data-stu-id="890de-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-160"><strong>Propiedad</strong></span><span class="sxs-lookup"><span data-stu-id="890de-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-161"><strong>¿Configurable por el usuario o generada por el sistema?</strong></span><span class="sxs-lookup"><span data-stu-id="890de-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-162"><strong>Propósito</strong></span><span class="sxs-lookup"><span data-stu-id="890de-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-163">_rid</span><span class="sxs-lookup"><span data-stu-id="890de-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-164">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="890de-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-165">Identificador del recurso generado por el sistema único y jerárquico</span><span class="sxs-lookup"><span data-stu-id="890de-165">System generated, unique and hierarchical identifier of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-166">_etag</span><span class="sxs-lookup"><span data-stu-id="890de-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-167">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="890de-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-168">etag del recurso necesario para un control optimista de concurrencia</span><span class="sxs-lookup"><span data-stu-id="890de-168">etag of the resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-169">_ts</span><span class="sxs-lookup"><span data-stu-id="890de-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-170">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="890de-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-171">Última actualización de la marca de tiempo del recurso</span><span class="sxs-lookup"><span data-stu-id="890de-171">Last updated timestamp of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-172">_self</span><span class="sxs-lookup"><span data-stu-id="890de-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-173">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="890de-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-174">URI del recurso única y direccionable</span><span class="sxs-lookup"><span data-stu-id="890de-174">Unique addressable URI of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-175">id</span><span class="sxs-lookup"><span data-stu-id="890de-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-176">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="890de-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-177">Nombre único del recurso (con el mismo valor de la clave de partición) definido por el usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-177">User defined unique name of the resource (with the same partition key value).</span></span> <span data-ttu-id="890de-178">Si el usuario no especifica un identificador, el sistema generará uno.</span><span class="sxs-lookup"><span data-stu-id="890de-178">If the user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="890de-179">Representación de conexión de los recursos</span><span class="sxs-lookup"><span data-stu-id="890de-179">Wire representation of resources</span></span>
<span data-ttu-id="890de-180">Cosmos DB no exige ninguna extensión propietaria a la norma JSON ni codificaciones especiales; funciona con documentos JSON según la norma.</span><span class="sxs-lookup"><span data-stu-id="890de-180">Cosmos DB does not mandate any proprietary extensions to the JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="890de-181">Direccionamiento de un recurso</span><span class="sxs-lookup"><span data-stu-id="890de-181">Addressing a resource</span></span>
<span data-ttu-id="890de-182">Todos los recursos se pueden diseccionar mediante URI.</span><span class="sxs-lookup"><span data-stu-id="890de-182">All resources are URI addressable.</span></span> <span data-ttu-id="890de-183">El valor de la propiedad **self** de un recurso representa el URI relativo del recurso.</span><span class="sxs-lookup"><span data-stu-id="890de-183">The value of the **_self** property of a resource represents the relative URI of the resource.</span></span> <span data-ttu-id="890de-184">El formato del URI consta de los segmentos de ruta /\<feed\>/{_rid}:</span><span class="sxs-lookup"><span data-stu-id="890de-184">The format of the URI consists of the /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="890de-185">Valor de _self</span><span class="sxs-lookup"><span data-stu-id="890de-185">Value of the _self</span></span> | <span data-ttu-id="890de-186">Description</span><span class="sxs-lookup"><span data-stu-id="890de-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="890de-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="890de-187">/dbs</span></span> |<span data-ttu-id="890de-188">Fuente de bases de datos que hay en una cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="890de-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="890de-189">/dbs/{dbName}</span></span> |<span data-ttu-id="890de-190">Base de datos con un identificador que coincide con el valor {dbName}</span><span class="sxs-lookup"><span data-stu-id="890de-190">Database with an id matching the value {dbName}</span></span> |
| <span data-ttu-id="890de-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="890de-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="890de-192">Fuente de colecciones que hay en una base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="890de-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="890de-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="890de-194">Colección con un identificador que coincide con el valor {collName}</span><span class="sxs-lookup"><span data-stu-id="890de-194">Collection with an id matching the value {collName}</span></span> |
| <span data-ttu-id="890de-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="890de-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="890de-196">Fuente de documentos que hay en una colección</span><span class="sxs-lookup"><span data-stu-id="890de-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="890de-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="890de-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="890de-198">Documento con un identificador que coincide con el valor {doc}</span><span class="sxs-lookup"><span data-stu-id="890de-198">Document with an id matching the value {doc}</span></span> |
| <span data-ttu-id="890de-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="890de-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="890de-200">Fuente de usuarios que hay en una base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-200">Feed of users under a database</span></span> |
| <span data-ttu-id="890de-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="890de-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="890de-202">Usuario con un identificador que coincide con el valor {user}</span><span class="sxs-lookup"><span data-stu-id="890de-202">User with an id matching the value {user}</span></span> |
| <span data-ttu-id="890de-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="890de-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="890de-204">Fuente de permisos que hay en un usuario</span><span class="sxs-lookup"><span data-stu-id="890de-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="890de-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="890de-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="890de-206">Permiso con un identificador que coincide con el valor {permission}</span><span class="sxs-lookup"><span data-stu-id="890de-206">Permission with an id matching the value {permission}</span></span> |

<span data-ttu-id="890de-207">Cada recurso tiene un nombre único definido por el usuario que se expone con la propiedad id.</span><span class="sxs-lookup"><span data-stu-id="890de-207">Each resource has a unique user defined name exposed via the id property.</span></span> <span data-ttu-id="890de-208">Nota: en el caso de los documentos, si el usuario no especifica un identificador, los SDK compatibles generarán automáticamente un identificador único para el documento.</span><span class="sxs-lookup"><span data-stu-id="890de-208">Note: for documents, if the user does not specify an id, our supported SDKs will automatically generate a unique id for the document.</span></span> <span data-ttu-id="890de-209">El identificador es una cadena definida por el usuario formada por 256 caracteres como máximo y que es única dentro del contexto de un recurso principal específico.</span><span class="sxs-lookup"><span data-stu-id="890de-209">The id is a user defined string, of up to 256 characters that is unique within the context of a specific parent resource.</span></span> 

<span data-ttu-id="890de-210">Cada recurso tiene también un identificador de recursos jerárquico generado por el sistema (también denominado RID), que está disponible a través de la propiedad _rid.</span><span class="sxs-lookup"><span data-stu-id="890de-210">Each resource also has a system generated hierarchical resource identifier (also referred to as an RID), which is available via the _rid property.</span></span> <span data-ttu-id="890de-211">El RID codifica toda la jerarquía de un recurso dado y es una representación interna muy útil que se usa para imponer una integridad referencial de manera distribuida.</span><span class="sxs-lookup"><span data-stu-id="890de-211">The RID encodes the entire hierarchy of a given resource and it is a convenient internal representation used to enforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="890de-212">El RID es único en una cuenta de base de datos y se usa internamente a través de la Cosmos DB para un enrutamiento eficaz, sin necesidad de búsquedas en las particiones.</span><span class="sxs-lookup"><span data-stu-id="890de-212">The RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="890de-213">Los valores de las propiedades _self y _rid son representaciones alternativas y canónicas de un recurso.</span><span class="sxs-lookup"><span data-stu-id="890de-213">The values of the _self and the  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="890de-214">Las API de REST admiten el direccionamiento de recursos y el enrutamiento de solicitudes por el identificador y por las propiedades de _rid.</span><span class="sxs-lookup"><span data-stu-id="890de-214">The REST APIs support addressing of resources and routing of requests by both the id and the _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="890de-215">Cuentas de la base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-215">Database accounts</span></span>
<span data-ttu-id="890de-216">Puede aprovisionar una o más cuentas de base de datos de Cosmos DB mediante su suscripción a Azure.</span><span class="sxs-lookup"><span data-stu-id="890de-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="890de-217">Puede crear y administrar cuentas de base de datos de Cosmos DB desde Azure Portal en [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="890de-217">You can create and manage Cosmos DB database accounts via the Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="890de-218">Crear y administrar una cuenta de base de datos requiere acceso administrativo y solo se puede realizar con su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="890de-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="890de-219">Propiedades de la cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="890de-219">Database account properties</span></span>
<span data-ttu-id="890de-220">Como parte del aprovisionamiento y control de una cuenta de base de datos, puede configurar y leer las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="890de-220">As part of provisioning and managing a database account you can configure and read the following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-221"><strong>Nombre de la propiedad</strong></span><span class="sxs-lookup"><span data-stu-id="890de-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-222"><strong>Descripción</strong></span><span class="sxs-lookup"><span data-stu-id="890de-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-223">Directiva de coherencia</span><span class="sxs-lookup"><span data-stu-id="890de-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-224">Establezca esta propiedad para configurar el nivel de coherencia predeterminado para todas las colecciones con su cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-224">Set this property to configure the default consistency level for all the collections under your database account.</span></span> <span data-ttu-id="890de-225">Puede reemplazar el nivel de coherencia en función de la solicitud mediante el encabezado de solicitud [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="890de-225">You can override the consistency level on a per request basis using the [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="890de-226">Tenga en cuenta que esta propiedad solo se aplica a los <i>recursos definidos por el usuario</i>.</span><span class="sxs-lookup"><span data-stu-id="890de-226">Note that this property only applies to the <i>user defined resources</i>.</span></span> <span data-ttu-id="890de-227">Todos los recursos definidos por el sistema se configuran para que sean compatibles con lecturas/consultas con alta coherencia.</span><span class="sxs-lookup"><span data-stu-id="890de-227">All system defined resources are configured to support reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="890de-228">Claves de autorización</span><span class="sxs-lookup"><span data-stu-id="890de-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="890de-229">Estas son las claves maestras y de solo lectura principales y secundarias que proporcionan acceso administrativo a todos los recursos que hay en la cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-229">These are the primary and secondary master and readonly keys that provide administrative access to all of the resources under the database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="890de-230">Tenga en cuenta que, además de aprovisionar, configurar y administrar la cuenta de base de datos desde Azure Portal, también puede crear y administrar mediante programación cuentas de base de datos de Cosmos DB usando las [API de REST de Azure Cosmos DB](/rest/api/documentdb/) y los [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-230">Note that in addition to provisioning, configuring and managing your database account from the Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using the [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="890de-231">Bases de datos</span><span class="sxs-lookup"><span data-stu-id="890de-231">Databases</span></span>
<span data-ttu-id="890de-232">Una base de datos de Cosmos DB es un contenedor lógico de una o varias colecciones o usuarios, como se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="890de-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in the following diagram.</span></span> <span data-ttu-id="890de-233">Puede crear cualquier número de bases de datos en la cuenta de base de datos de Cosmos DB en función de los límites de la oferta.</span><span class="sxs-lookup"><span data-stu-id="890de-233">You can create any number of databases under a Cosmos DB database account subject to offer limits.</span></span>  

<span data-ttu-id="890de-234">![Modelo jerárquico de colecciones y cuenta de base de datos][2]</span><span class="sxs-lookup"><span data-stu-id="890de-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="890de-235">**Una base de datos es un contenedor lógico de usuarios y colecciones**</span><span class="sxs-lookup"><span data-stu-id="890de-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="890de-236">Una base de datos puede contener almacenamiento de documentos prácticamente ilimitado y particionado en colecciones.</span><span class="sxs-lookup"><span data-stu-id="890de-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="890de-237">Escala elástica de una base de datos de Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="890de-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="890de-238">Una base de datos de Cosmos DB es elástica de forma predeterminada, desde unos pocos GB hasta petabytes de almacenamiento de documentos respaldado y capacidad de rendimiento aprovisionada de SSD.</span><span class="sxs-lookup"><span data-stu-id="890de-238">A Cosmos DB database is elastic by default – ranging from a few GB to petabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="890de-239">A diferencia de una base de datos en RDBMS tradicional, una base de datos en Cosmos DB no está dirigida a un único equipo.</span><span class="sxs-lookup"><span data-stu-id="890de-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped to a single machine.</span></span> <span data-ttu-id="890de-240">Con Cosmos DB, a medida que aumenten las necesidades de escalado de la aplicación, podrá crear más colecciones, bases de datos o ambas.</span><span class="sxs-lookup"><span data-stu-id="890de-240">With Cosmos DB, as your application’s scale needs to grow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="890de-241">De hecho, varias aplicaciones propias dentro de Microsoft han usado Cosmos DB a nivel de consumidor creando bases de datos de Cosmos DB extremadamente grandes conteniendo cada una miles de colecciones con terabytes de almacenamiento de documentos.</span><span class="sxs-lookup"><span data-stu-id="890de-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="890de-242">Puede ampliar o reducir una base de datos agregando o eliminando colecciones para cumplir con los requisitos de escala de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="890de-242">You can grow or shrink a database by adding or removing collections to meet your application’s scale requirements.</span></span> 

<span data-ttu-id="890de-243">Puede crear cualquier número de colecciones dentro de una base de datos en función de la oferta.</span><span class="sxs-lookup"><span data-stu-id="890de-243">You can create any number of collections within a database subject to the offer.</span></span> <span data-ttu-id="890de-244">Cada colección tiene almacenamiento con copia de seguridad en SSD y el rendimiento aprovisionado para usted según el nivel de rendimiento seleccionado.</span><span class="sxs-lookup"><span data-stu-id="890de-244">Each collection has SSD backed storage and throughput provisioned for you depending on the selected performance tier.</span></span>

<span data-ttu-id="890de-245">Una base de datos de Cosmos DB también es un contenedor de usuarios.</span><span class="sxs-lookup"><span data-stu-id="890de-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="890de-246">Un usuario, a su vez, es un espacio de nombres lógico para un conjunto de permisos que proporciona autorización y acceso detallado a colecciones, documentos y datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="890de-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access to collections, documents and attachments.</span></span>  

<span data-ttu-id="890de-247">Como sucede con otros recursos del modelo de recursos de Cosmos DB, las bases de datos se pueden crear, reemplazar, eliminar, leer o enumerar fácilmente mediante las [API de REST](/rest/api/documentdb/) o cualquier [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-247">As with other resources in the Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="890de-248">Cosmos DB garantiza una gran coherencia para leer o consultar los metadatos de un recurso de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-248">Cosmos DB guarantees strong consistency for reading or querying the metadata of a database resource.</span></span> <span data-ttu-id="890de-249">Eliminar una base de datos automáticamente garantiza que no puede obtener acceso a ninguna colección o usuario contenidos en la misma.</span><span class="sxs-lookup"><span data-stu-id="890de-249">Deleting a database automatically ensures that you cannot access any of the collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="890de-250">Colecciones</span><span class="sxs-lookup"><span data-stu-id="890de-250">Collections</span></span>
<span data-ttu-id="890de-251">Una colección de Cosmos DB es un contenedor de sus documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="890de-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="890de-252">Almacenamiento de documentos respaldado con SSD elástico</span><span class="sxs-lookup"><span data-stu-id="890de-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="890de-253">Una colección es elástica de forma intrínseca; crece y se reduce automáticamente a medida que agrega o elimina documentos.</span><span class="sxs-lookup"><span data-stu-id="890de-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="890de-254">Las colecciones son recursos lógicos y pueden abarcar una o varios servidores o particiones físicos.</span><span class="sxs-lookup"><span data-stu-id="890de-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="890de-255">El número de particiones que hay en una colección lo determina Cosmos DB basándose en el tamaño de almacenamiento y el rendimiento aprovisionado de la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-255">The number of partitions within a collection is determined by Cosmos DB based on the storage size and the provisioned throughput of your collection.</span></span> <span data-ttu-id="890de-256">Todas las particiones de Cosmos DB tienen una cantidad fija de almacenamiento con respaldo SSD asociado y se replican para ofrecer una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="890de-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="890de-257">Azure Cosmos DB se encarga de administrar las particiones de principio a fin, por lo que no tendrá que escribir ningún código complejo ni administrar ninguna partición.</span><span class="sxs-lookup"><span data-stu-id="890de-257">Partition management is fully managed by Azure Cosmos DB, and you do not have to write complex code or manage your partitions.</span></span> <span data-ttu-id="890de-258">Las colecciones de Cosmos DB ofrecen funcionalidades de almacenamiento y rendimiento **prácticamente ilimitadas** .</span><span class="sxs-lookup"><span data-stu-id="890de-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="890de-259">Indexación automática de las colecciones</span><span class="sxs-lookup"><span data-stu-id="890de-259">Automatic indexing of collections</span></span>
<span data-ttu-id="890de-260">Cosmos DB es un sistema de bases de datos verdadero libre de esquemas.</span><span class="sxs-lookup"><span data-stu-id="890de-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="890de-261">No asume ni requiere ningún esquema para los documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="890de-261">It does not assume or require any schema for the JSON documents.</span></span> <span data-ttu-id="890de-262">A medida que agrega documentos a una colección, Cosmos DB los indexa automáticamente y están disponibles para que los consulte.</span><span class="sxs-lookup"><span data-stu-id="890de-262">As you add documents to a collection, Cosmos DB automatically indexes them and they are available for you to query.</span></span> <span data-ttu-id="890de-263">La indexación automática de documentos sin requerir esquema o índices secundarios es una capacidad clave de Cosmos DB y se habilita mediante técnicas de mantenimiento de índices de escritura optimizada, sin bloqueo y estructuradas por registros.</span><span class="sxs-lookup"><span data-stu-id="890de-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="890de-264">Cosmos DB es compatible con un volumen constante de operaciones de escritura muy rápidas mientras sigue dando servicio a consultas consistentes.</span><span class="sxs-lookup"><span data-stu-id="890de-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="890de-265">Tanto el almacenamiento de documentos como de índices se utilizan para calcular el almacenamiento consumido por cada colección.</span><span class="sxs-lookup"><span data-stu-id="890de-265">Both document and index storage are used to calculate the storage consumed by each collection.</span></span> <span data-ttu-id="890de-266">Puede controlar el equilibrio entre almacenamiento y rendimiento asociado con la indexación configurando la directiva de indexación de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-266">You can control the storage and performance trade-offs associated with indexing by configuring the indexing policy for a collection.</span></span> 

### <a name="configuring-the-indexing-policy-of-a-collection"></a><span data-ttu-id="890de-267">Configuración de la directiva de indexación de una colección</span><span class="sxs-lookup"><span data-stu-id="890de-267">Configuring the indexing policy of a collection</span></span>
<span data-ttu-id="890de-268">La directiva de indexación de cada colección le permite realizar equilibrios entre rendimiento y almacenamiento relacionados con la indexación.</span><span class="sxs-lookup"><span data-stu-id="890de-268">The indexing policy of each collection allows you to make performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="890de-269">Tiene las siguientes opciones disponibles como parte de la configuración de indexación:</span><span class="sxs-lookup"><span data-stu-id="890de-269">The following options are available to you as part of indexing configuration:</span></span>  

* <span data-ttu-id="890de-270">Seleccione si la colección indexa o no todos los documentos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="890de-270">Choose whether the collection automatically indexes all of the documents or not.</span></span> <span data-ttu-id="890de-271">De forma predeterminada, se indexan todos los documentos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="890de-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="890de-272">Puede seleccionar desactivar la indexación automática y agregar únicamente documentos de forma selectiva al índice.</span><span class="sxs-lookup"><span data-stu-id="890de-272">You can choose to turn off automatic indexing and selectively add only specific documents to the index.</span></span> <span data-ttu-id="890de-273">Al contrario, puede seleccionar de forma selectiva excluir únicamente documentos específicos.</span><span class="sxs-lookup"><span data-stu-id="890de-273">Conversely, you can selectively choose to exclude only specific documents.</span></span> <span data-ttu-id="890de-274">Puede lograr esto estableciendo la propiedad automática en verdadera o falsa en indexingPolicy de una colección y utilizando el encabezado de solicitud [x-ms-indexingdirective] al insertar, reemplazar o eliminar un documento.</span><span class="sxs-lookup"><span data-stu-id="890de-274">You can achieve this by setting the automatic property to be true or false on the indexingPolicy of a collection and using the [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="890de-275">Seleccione si incluir o excluir rutas o patrones específicos del índice en sus documentos.</span><span class="sxs-lookup"><span data-stu-id="890de-275">Choose whether to include or exclude specific paths or patterns in your documents from the index.</span></span> <span data-ttu-id="890de-276">Puede lograr esto configurando includedPaths y excludedPaths en el indexingPolicy de una colección, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="890de-276">You can achieve this by setting includedPaths and excludedPaths on the indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="890de-277">También puede configurar los equilibrios de almacenamiento y rendimiento para un intervalo y hash de consultas de patrones de ruta específicos.</span><span class="sxs-lookup"><span data-stu-id="890de-277">You can also configure the storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="890de-278">Seleccione entre actualizaciones de índice sincrónica (consistente) y asincrónica (diferida).</span><span class="sxs-lookup"><span data-stu-id="890de-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="890de-279">De forma predeterminada, el índice se actualiza de forma sincrónica con cada inserción, reemplazo o eliminación de un documento de la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-279">By default, the index is updated synchronously on each insert, replace or delete of a document to the collection.</span></span> <span data-ttu-id="890de-280">Esto permite a las consultas respetar el mismo nivel de coherencia que el de las lecturas de documentos.</span><span class="sxs-lookup"><span data-stu-id="890de-280">This enables the queries to honor the same consistency level as that of the document reads.</span></span> <span data-ttu-id="890de-281">Aunque Cosmos DB está optimizada para escrituras y admite volúmenes sostenidos de escrituras de documentos junto con un mantenimiento sincrónico de índices y un servicio de consultas coherentes, se pueden configurar determinadas colecciones para actualizar el índice de manera diferida.</span><span class="sxs-lookup"><span data-stu-id="890de-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="890de-282">La indexación diferida aumenta más el rendimiento de escritura y es ideal para casos de ingesta en bloque de colecciones principales con mucha carga de lectura.</span><span class="sxs-lookup"><span data-stu-id="890de-282">Lazy indexing boosts the write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="890de-283">La directiva de indexación puede cambiarse ejecutando un comando PUT en la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-283">The indexing policy can be changed by executing a PUT on the collection.</span></span> <span data-ttu-id="890de-284">Esto se puede hacer mediante el [SDK de cliente](documentdb-sdk-dotnet.md), [Azure Portal](https://portal.azure.com) o las [API de REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="890de-284">This can be achieved either through the [client SDK](documentdb-sdk-dotnet.md), the [Azure Portal](https://portal.azure.com) or the [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="890de-285">Consulta de una colección</span><span class="sxs-lookup"><span data-stu-id="890de-285">Querying a collection</span></span>
<span data-ttu-id="890de-286">Los documentos de una colección pueden tener esquemas arbitrarios y puede consultar documentos de una colección sin proporcionar por adelantando ningún esquema o índice secundario.</span><span class="sxs-lookup"><span data-stu-id="890de-286">The documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="890de-287">Puede consultar la colección con la [API de DocumentDB de Azure Cosmos DB: referencia de sintaxis SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), que proporciona numerosos operadores jerárquicos, relacionales y espaciales, así como una gran extensibilidad a través de las UDF basadas en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="890de-287">You can query the collection using the [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="890de-288">La gramática de JSON permite el modelado de documentos JSON como árboles con etiquetas como los nodos del árbol.</span><span class="sxs-lookup"><span data-stu-id="890de-288">JSON grammar allows for modeling JSON documents as trees with labels as the tree nodes.</span></span> <span data-ttu-id="890de-289">Esto lo aprovechan tanto las técnicas de indexación automática de la API de DocumentDB como el dialecto de SQL de la API de DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="890de-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="890de-290">El lenguaje de consulta de la API DocumentDB consta de tres aspectos principales:</span><span class="sxs-lookup"><span data-stu-id="890de-290">The DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="890de-291">Un pequeño conjunto de operaciones de consulta que se asignan de forma natural a la estructura de árbol, incluiidas las consultas jerárquicas y las proyecciones.</span><span class="sxs-lookup"><span data-stu-id="890de-291">A small set of query operations that map naturally to the tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="890de-292">Un subconjunto de operaciones relacionales incluyendo composición, filtro, proyecciones, agregados y autocombinaciones.</span><span class="sxs-lookup"><span data-stu-id="890de-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="890de-293">UDF basadas puramente en JavaScript que se funcionan con (1) y (2)</span><span class="sxs-lookup"><span data-stu-id="890de-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="890de-294">El modelo de consulta de Cosmos DB intenta lograr un equilibrio entre funcionalidad, eficacia y simplicidad.</span><span class="sxs-lookup"><span data-stu-id="890de-294">The Cosmos DB query model attempts to strike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="890de-295">El motor de la base de datos de Cosmos DB compila y ejecuta instrucciones de consultas SQL de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="890de-295">The Cosmos DB database engine natively compiles and executes the SQL query statements.</span></span> <span data-ttu-id="890de-296">Puede consultar una colección mediante las [API de REST](/rest/api/documentdb/) o cualquier [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-296">You can query a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="890de-297">El SDK de .NET viene con un proveedor LINQ.</span><span class="sxs-lookup"><span data-stu-id="890de-297">The .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="890de-298">Puede probar la API de DocumentDB y ejecutar consultas SQL en nuestro conjunto de datos en el [Área de consultas](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="890de-298">You can try out the DocumentDB API and run SQL queries against our dataset in the [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="890de-299">Transacciones de documentos múltiples</span><span class="sxs-lookup"><span data-stu-id="890de-299">Multi-document transactions</span></span>
<span data-ttu-id="890de-300">Las transacciones de la base de datos proporcionan un modelo de programación seguro y predecible para tratar cambios concurrentes en los datos.</span><span class="sxs-lookup"><span data-stu-id="890de-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes to the data.</span></span> <span data-ttu-id="890de-301">En RDBMS, la forma tradicional de escribir lógica empresarial es escribir **procedimientos almacenados** o **desencadenadores** y enviarlos al servidor de la base de datos para la ejecución transaccional.</span><span class="sxs-lookup"><span data-stu-id="890de-301">In RDBMS, the traditional way to write business logic is to write **stored-procedures** and/or **triggers** and ship it to the database server for transactional execution.</span></span> <span data-ttu-id="890de-302">En RDBMS, es necesario el programador de aplicaciones para tratar con dos lenguajes de programación dispares:</span><span class="sxs-lookup"><span data-stu-id="890de-302">In RDBMS, the application programmer is required to deal with two disparate programming languages:</span></span> 

* <span data-ttu-id="890de-303">El lenguaje de programación de aplicaciones (no transaccional), por ejemplo, JavaScript, Python, C#, Java, etc.</span><span class="sxs-lookup"><span data-stu-id="890de-303">The (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="890de-304">T-SQL, el lenguaje de programación transaccional que se ejecuta la base de datos de forma nativa.</span><span class="sxs-lookup"><span data-stu-id="890de-304">T-SQL, the transactional programming language which is natively executed by the database</span></span>

<span data-ttu-id="890de-305">Debido a su profundo compromiso con JavaScript y JSON directamente con el motor de la base de datos, Cosmos DB proporciona un modelo de programación intuitivo para ejecutar lógica de aplicaciones basada en JavaScript directamente en las colecciones en términos de procedimientos almacenados y desencadenadores.</span><span class="sxs-lookup"><span data-stu-id="890de-305">By virtue of its deep commitment to JavaScript and JSON directly within the database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on the collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="890de-306">Esto permite realizar las dos acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="890de-306">This allows for both of the following:</span></span>

* <span data-ttu-id="890de-307">Implementación eficaz del control simultáneo, la recuperación, la indexación automática de los gráficos de objeto JSON directamente en el motor de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-307">Efficient implementation of concurrency control, recovery, automatic indexing of the JSON object graphs directly in the database engine</span></span>
* <span data-ttu-id="890de-308">Expresión de forma natural del flujo de control, el ámbito de las variables, la asignación y la integración de primitivos de control de excepciones con transacciones de bases de datos directamente en términos del lenguaje de programación de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="890de-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of the JavaScript programming language</span></span>

<span data-ttu-id="890de-309">La lógica de JavaScript registrada a nivel de colección puede entonces emitir operaciones de base de datos en los documentos de la colección dada.</span><span class="sxs-lookup"><span data-stu-id="890de-309">The JavaScript logic registered at a collection level can then issue database operations on the documents of the given collection.</span></span> <span data-ttu-id="890de-310">Cosmos DB ajusta los procedimientos almacenados y desencadenadores basados en JavaScript dentro de transacciones ACID ambientales con un aislamiento de instantáneas en los documentos de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-310">Cosmos DB implicitly wraps the JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="890de-311">Durante el transcurso de esta ejecución, si JavaScript lanza una excepción, entonces se cancela toda la transacción.</span><span class="sxs-lookup"><span data-stu-id="890de-311">During the course of its execution, if the JavaScript throws an exception, then the entire transaction is aborted.</span></span> <span data-ttu-id="890de-312">El modelo de programación resultante es muy sencillo aunque eficaz.</span><span class="sxs-lookup"><span data-stu-id="890de-312">The resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="890de-313">Los desarrolladores de JavaScript obtienen un modelo de programación “duradero” mientras siguen utilizando sus construcciones de lenguaje y primitivos de biblioteca familiares.</span><span class="sxs-lookup"><span data-stu-id="890de-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="890de-314">La capacidad de ejecutar JavaScript directamente en el motor de la base de datos en el mismo espacio de dirección que el grupo de búferes, permite la ejecución transaccional y con mayor rendimiento de las operaciones de base de datos en los documentos de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-314">The ability to execute JavaScript directly within the database engine in the same address space as the buffer pool enables performant and transactional execution of database operations against the documents of a collection.</span></span> <span data-ttu-id="890de-315">Además, debido a que el motor de base de datos de Cosmos DB tiene un fuerte compromiso con JSON y JavaScript, elimina cualquier error de coincidencia de impedancia entre los sistemas tipo de la aplicación y la base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-315">Furthermore, Cosmos DB database engine makes a deep commitment to the JSON and JavaScript eliminates any impedance mismatch between the type systems of application and the database.</span></span>   

<span data-ttu-id="890de-316">Tras crear una colección, puede registrar procedimientos almacenados, desencadenadores y UDF con una colección mediante las [API de REST](/rest/api/documentdb/) o cualquier [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="890de-317">Tras el registro, puede hacer referencia a los mismos y ejecutarlos.</span><span class="sxs-lookup"><span data-stu-id="890de-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="890de-318">Tenga en cuenta el siguiente procedimiento almacenado escrito completamente en JavaScript, el código siguiente toma dos argumentos (nombre del libro y nombre del autor) y crea un nuevo documento, consulta un documento y lo actualiza; todo en una transacción ACID implícita.</span><span class="sxs-lookup"><span data-stu-id="890de-318">Consider the following stored procedure written entirely in JavaScript, the code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="890de-319">En cualquier punto de la ejecución, si se lanza una excepción de JavaScript, se cancelará toda la transacción.</span><span class="sxs-lookup"><span data-stu-id="890de-319">At any point during the execution, if a JavaScript exception is thrown, the entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace the author name for all documents that satisfied the query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need to execute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="890de-320">El cliente puede "enviar" la lógica de JavaScript anterior a la base de datos para la ejecución transaccional mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="890de-320">The client can “ship” the above JavaScript logic to the database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="890de-321">Para obtener más información acerca del uso de los métodos HTTP, consulte [Interacciones RESTful con recursos de Azure Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="890de-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="890de-322">Tenga en cuenta que debido a que la base de datos comprende JSON y JavaScript de forma nativa, no existe ningún de error de coincidencia del sistema de tipo, no es necesaria ninguna "asignación OR" ni magia de generación de códigos.</span><span class="sxs-lookup"><span data-stu-id="890de-322">Notice that because the database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="890de-323">Los procedimientos almacenados y desencadenadores interactúan con una colección y los documentos de la misma a través de un modelo de objetos bien definido que se expone al contexto de colección actual.</span><span class="sxs-lookup"><span data-stu-id="890de-323">Stored procedures and triggers interact with a collection and the documents in a collection through a well-defined object model, which exposes the current collection context.</span></span>  

<span data-ttu-id="890de-324">Las colecciones de la API de DocumentDB se pueden crear, eliminar, leer o enumerar fácilmente con las [API de REST](/rest/api/documentdb/) o con cualquier [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-324">Collections in the DocumentDB API can be created, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="890de-325">La API de DocumentDB siempre proporciona una alta coherencia para leer o consultar los metadatos de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-325">The DocumentDB API always provides strong consistency for reading or querying the metadata of a collection.</span></span> <span data-ttu-id="890de-326">Eliminar una colección automáticamente garantiza que no puede obtener acceso a ningún documento, dato adjunto, procedimiento almacenado, desencadenador o UDF contenido en la misma.</span><span class="sxs-lookup"><span data-stu-id="890de-326">Deleting a collection automatically ensures that you cannot access any of the documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="890de-327">Procedimientos almacenados, desencadenadores y funciones definidas por el usuario (UDF)</span><span class="sxs-lookup"><span data-stu-id="890de-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="890de-328">Como se describe en la sección anterior, puede escribir lógica de aplicación para ejecutarla directamente en una transacción dentro del motor de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-328">As described in the previous section, you can write application logic to run directly within a transaction inside of the database engine.</span></span> <span data-ttu-id="890de-329">La lógica de la aplicación se puede escribir totalmente en JavaScript y se puede modelar como un procedimiento almacenado, desencadenador o UDF.</span><span class="sxs-lookup"><span data-stu-id="890de-329">The application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="890de-330">El código de JavaScript de un procedimiento almacenado o desencadenador puede insertar, reemplazar, eliminar, leer o consultar documentos de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-330">The JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="890de-331">Por otro lado, el código JavaScript de una UDF no puede insertar, reemplazar o eliminar documentos.</span><span class="sxs-lookup"><span data-stu-id="890de-331">On the other hand, the JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="890de-332">Las UDF enumeran los documentos del conjunto de resultados de una consulta y producen otro conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="890de-332">UDFs enumerate the documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="890de-333">Para los servicios multiinquilino, Cosmos DB impone una estricta reserva basada en la gobernanza de los recursos.</span><span class="sxs-lookup"><span data-stu-id="890de-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="890de-334">Cada procedimiento almacenado, desencadenador o UDF obtiene un cuanto de recursos del sistema operativo para realizar su trabajo.</span><span class="sxs-lookup"><span data-stu-id="890de-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources to do its work.</span></span> <span data-ttu-id="890de-335">Además, los procedimientos almacenados, los desencadenadores o las UDF no se pueden vincular con bibliotecas externas de JavaScript y están en la lista negra si superan el presupuesto de recursos que se les asignó.</span><span class="sxs-lookup"><span data-stu-id="890de-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed the resource budgets allocated to them.</span></span> <span data-ttu-id="890de-336">Puede registrar y anular el registro de los procedimientos almacenados, los desencadenadores o las UDF de una colección mediante las API REST.</span><span class="sxs-lookup"><span data-stu-id="890de-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using the REST APIs.</span></span>  <span data-ttu-id="890de-337">Tras el registro de un procedimiento almacenado, desencadenador o UDF, se compila de forma previa y almacena como código byte que se ejecutará más tarde.</span><span class="sxs-lookup"><span data-stu-id="890de-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="890de-338">La siguiente sección ilustra cómo puede utilizar el SDK de JavaScript de Cosmos DB para registrar, ejecutar o anular el registro de un procedimiento almacenado, un desencadenador o una UDF.</span><span class="sxs-lookup"><span data-stu-id="890de-338">The following section illustrate how you can use the Cosmos DB JavaScript SDK to register, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="890de-339">El SDK de JavaScript es un contenedor sencillo de las [API de REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="890de-339">The JavaScript SDK is a simple wrapper over the [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="890de-340">Registro de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="890de-340">Registering a stored procedure</span></span>
<span data-ttu-id="890de-341">El registro de un procedimiento almacenado crea un nuevo recurso de procedimiento almacenado en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="890de-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="890de-342">Ejecución de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="890de-342">Executing a stored procedure</span></span>
<span data-ttu-id="890de-343">La ejecución de un procedimiento almacenado se realiza emitiendo un POST HTTP en un recurso de procedimiento almacenado existente pasando parámetros al procedimiento en el cuerpo de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="890de-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters to the procedure in the request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="890de-344">Anulación del registro de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="890de-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="890de-345">Anular el registro de un procedimiento almacenado es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de procedimiento almacenado existente.</span><span class="sxs-lookup"><span data-stu-id="890de-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="890de-346">Registro de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="890de-346">Registering a pre-trigger</span></span>
<span data-ttu-id="890de-347">El registro de un desencadenador se realiza creando un nuevo recurso de desencadenador en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="890de-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="890de-348">Puede especificar si el desencadenador es previo o posterior y el tipo de operación con la que se puede asociar; por ejemplo, Crear, Reemplazar, Eliminar o Todas.</span><span class="sxs-lookup"><span data-stu-id="890de-348">You can specify if the trigger is a pre or a post trigger and the type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="890de-349">Ejecución de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="890de-349">Executing a pre-trigger</span></span>
<span data-ttu-id="890de-350">La ejecución de un desencadenador se realiza especificando el nombre de un desencadenador existente en el momento de emitir la solicitud POST/PUT/DELETE de un recurso de documento mediante el encabezado de solicitud.</span><span class="sxs-lookup"><span data-stu-id="890de-350">Execution of a trigger is done by specifying the name of an existing trigger at the time of issuing the POST/PUT/DELETE request of a document resource via the request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in the Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="890de-351">Anulación del registro de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="890de-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="890de-352">Anular el registro de un desencadenador es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de desencadenador existente.</span><span class="sxs-lookup"><span data-stu-id="890de-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="890de-353">Registro de una UDF</span><span class="sxs-lookup"><span data-stu-id="890de-353">Registering a UDF</span></span>
<span data-ttu-id="890de-354">El registro de una UDF se realiza creando un nuevo recurso de UDF en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="890de-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-the-query"></a><span data-ttu-id="890de-355">Ejecución de una UDF como parte de la consulta</span><span class="sxs-lookup"><span data-stu-id="890de-355">Executing a UDF as part of the query</span></span>
<span data-ttu-id="890de-356">Una UDF se puede especificar como parte de la consulta SQL y se usa como una forma de ampliar el núcleo del [lenguaje de consultas SQL de la API de DocumentDB](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="890de-356">A UDF can be specified as part of the SQL query and is used as a way to extend the core [SQL query language for the DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="890de-357">Anulación del registro de una UDF</span><span class="sxs-lookup"><span data-stu-id="890de-357">Unregistering a UDF</span></span>
<span data-ttu-id="890de-358">Anular el registro de una UDF es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de UDF existente.</span><span class="sxs-lookup"><span data-stu-id="890de-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="890de-359">Aunque los fragmentos de código anteriores mostraban el registro (POST), la anulación del registro (PUT), la lectura/enumeración (GET) y la ejecución (POST) mediante el [SDK de JavaScript](https://github.com/Azure/azure-documentdb-js), también puede usar las [API de REST](/rest/api/documentdb/) u otro [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-359">Although the snippets above showed the registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via the [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use the [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="890de-360">Documentos</span><span class="sxs-lookup"><span data-stu-id="890de-360">Documents</span></span>
<span data-ttu-id="890de-361">Puede insertar, reemplazar, eliminar, leer, enumerar y consultar documentos JSON arbitrarios de una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="890de-362">Cosmos DB no impone ningún esquema y no requiere índices secundarios para ser compatible con las consultas de documentos en una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order to support querying over documents in a collection.</span></span> <span data-ttu-id="890de-363">El tamaño máximo de un documento es de 2 MB.</span><span class="sxs-lookup"><span data-stu-id="890de-363">The maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="890de-364">Al ser un servicio de base de datos totalmente abierto, Cosmos DB no crea ningún tipo de datos especializados, como fecha y hora, o codificaciones específicas para documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="890de-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="890de-365">Tenga en cuenta que Cosmos DB no necesita ninguna convención JSON especial para codificar las relaciones entre varios documentos; la sintaxis SQL de Cosmos DB proporciona operadores de consulta jerárquica y relacional muy eficaz para consultar y proyectar documentos sin ninguna anotación especial o necesidad de codificar relaciones entre documentos utilizando propiedades importantes.</span><span class="sxs-lookup"><span data-stu-id="890de-365">Note that Cosmos DB does not require any special JSON conventions to codify the relationships among various documents; the SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators to query and project documents without any special annotations or need to codify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="890de-366">Como con el resto de recursos, se pueden crear, reemplazar, eliminar, leer, enumerar y consultar documentos fácilmente mediante las API REST o con cualquier [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="890de-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="890de-367">Al eliminar un documento se libera inmediatamente la cuota correspondiente a todos los datos adjuntos anidados.</span><span class="sxs-lookup"><span data-stu-id="890de-367">Deleting a document instantly frees up the quota corresponding to all of the nested attachments.</span></span> <span data-ttu-id="890de-368">El nivel de coherencia de lectura de documentos sigue la Directiva de coherencia de la cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-368">The read consistency level of documents follows the consistency policy on the database account.</span></span> <span data-ttu-id="890de-369">Esta directiva se puede reemplazar en función de la solicitud dependiendo de los requisitos de coherencia de datos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="890de-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="890de-370">Al consultar documentos, la coherencia de lectura sigue el modo de indexación establecido en la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-370">When querying documents, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="890de-371">Para ser "coherente", sigue la Directiva de coherencia de la cuenta.</span><span class="sxs-lookup"><span data-stu-id="890de-371">For “consistent”, this follows the account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="890de-372">Datos adjuntos y multimedia</span><span class="sxs-lookup"><span data-stu-id="890de-372">Attachments and media</span></span>
<span data-ttu-id="890de-373">Cosmos DB le permite almacenar blobs binarios/multimedia en Cosmos DB (máximo 2 GB por cuenta) o en su propio almacén multimedia remoto.</span><span class="sxs-lookup"><span data-stu-id="890de-373">Cosmos DB allows you to store binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or to your own remote media store.</span></span> <span data-ttu-id="890de-374">También le permite representar los metadatos de un archivo multimedia en términos de un documento especial llamado dato adjunto.</span><span class="sxs-lookup"><span data-stu-id="890de-374">It also allows you to represent the metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="890de-375">Un dato adjunto en Cosmos DB es un documento especial (JSON) que hace referencia al archivo multimedia/blob almacenado en cualquier parte.</span><span class="sxs-lookup"><span data-stu-id="890de-375">An attachment in Cosmos DB is a special (JSON) document that references the media/blob stored elsewhere.</span></span> <span data-ttu-id="890de-376">Un dato adjunto es sencillamente un documento especial que captura los metadatos (por ejemplo, ubicación, autor, etc.) de un archivo multimedia almacenado en un almacenamiento multimedia remoto.</span><span class="sxs-lookup"><span data-stu-id="890de-376">An attachment is simply a special document that captures the metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="890de-377">Considere una aplicación de lectura social que use Cosmos DB para almacenar anotaciones manuscritas y metadatos como comentarios, texto resaltado, marcadores, clasificaciones, gustos y preferencias, etc., asociados a un libro electrónico o usuario determinado.</span><span class="sxs-lookup"><span data-stu-id="890de-377">Consider a social reading application which uses Cosmos DB to store ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="890de-378">El contenido del libro mismo se almacena en el almacenamiento multimedia disponible como parte de la cuenta de Cosmos DB o de un almacén multimedia remoto.</span><span class="sxs-lookup"><span data-stu-id="890de-378">The content of the book itself is stored in the media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="890de-379">Una aplicación puede almacenar los metadatos de cada usuario como un documento distinto; por ejemplo, los metadatos de Joe para book1 se almacenan en un documento con la referencia /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="890de-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="890de-380">Los datos adjuntos que señalan páginas de contenido de un libro de un usuario se almacenan en el documento correspondiente; por ejemplo, /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span><span class="sxs-lookup"><span data-stu-id="890de-380">Attachments pointing to the content pages of a given book of a user are stored under the corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="890de-381">Tenga en cuenta que los ejemplos anteriores usan identificadores sencillos para transmitir la jerarquía de recursos.</span><span class="sxs-lookup"><span data-stu-id="890de-381">Note that the examples listed above use friendly ids to convey the resource hierarchy.</span></span> <span data-ttu-id="890de-382">Se obtiene acceso a los recursos mediante las API REST a través de los identificadores de recurso únicos.</span><span class="sxs-lookup"><span data-stu-id="890de-382">Resources are accessed via the REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="890de-383">Para los archivos multimedia gestionados por Cosmos DB, la propiedad _media del dato adjunto hará referencia al archivo multimedia por su URI.</span><span class="sxs-lookup"><span data-stu-id="890de-383">For the media that is managed by Cosmos DB, the _media property of the attachment will reference the media by its URI.</span></span> <span data-ttu-id="890de-384">Cosmos DB garantizará la recolección de archivos multimedia no utilizados cuando se anulen todas las referencias pendientes.</span><span class="sxs-lookup"><span data-stu-id="890de-384">Cosmos DB will ensure to garbage collect the media when all of the outstanding references are dropped.</span></span> <span data-ttu-id="890de-385">Cosmos DB genera automáticamente el dato adjunto cuando carga nuevos archivos multimedia y completa _media para señalar al nuevo archivo multimedia agregado.</span><span class="sxs-lookup"><span data-stu-id="890de-385">Cosmos DB automatically generates the attachment when you upload the new media and populates the _media to point to the newly added media.</span></span> <span data-ttu-id="890de-386">Si selecciona almacenar el archivo multimedia en un almacén blob remoto que lo gestiona usted (por ejemplo, OneDrive, Azure Storage, DropBox etc), puede seguir utilizando los datos adjuntos para hacer referencia a los archivos multimedia.</span><span class="sxs-lookup"><span data-stu-id="890de-386">If you choose to store the media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments to reference the media.</span></span> <span data-ttu-id="890de-387">En este caso, creará los datos adjuntos usted mismo y rellenará la propiedad _media.</span><span class="sxs-lookup"><span data-stu-id="890de-387">In this case, you will create the attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="890de-388">Como con el resto de recursos, se pueden crear, reemplazar, eliminar, leer o enumerar datos adjuntos fácilmente mediante las API REST o con cualquier SDK de cliente.</span><span class="sxs-lookup"><span data-stu-id="890de-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="890de-389">Como con los documentos, el nivel de coherencia de lectura de datos adjuntos sigue la Directiva de coherencia en la cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-389">As with documents, the read consistency level of attachments follows the consistency policy on the database account.</span></span> <span data-ttu-id="890de-390">Esta directiva se puede reemplazar en función de la solicitud dependiendo de los requisitos de coherencia de datos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="890de-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="890de-391">Al consultar datos adjuntos, la coherencia de lectura sigue el modo de indexación establecido en la colección.</span><span class="sxs-lookup"><span data-stu-id="890de-391">When querying for attachments, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="890de-392">Para ser "coherente", sigue la Directiva de coherencia de la cuenta.</span><span class="sxs-lookup"><span data-stu-id="890de-392">For “consistent”, this follows the account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="890de-393">Usuarios</span><span class="sxs-lookup"><span data-stu-id="890de-393">Users</span></span>
<span data-ttu-id="890de-394">Un usuario de Cosmos DB representa un espacio de nombres lógico para agrupar permisos.</span><span class="sxs-lookup"><span data-stu-id="890de-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="890de-395">Un usuario de Cosmos DB puede corresponder a un usuario en un sistema administración de identidades o a un rol de aplicaciones predefinido.</span><span class="sxs-lookup"><span data-stu-id="890de-395">A Cosmos DB user may correspond to a user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="890de-396">Para Cosmos DB, un usuario simplemente representa una abstracción para agrupar un conjunto de permisos de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-396">For Cosmos DB, a user simply represents an abstraction to group a set of permissions under a database.</span></span>   

<span data-ttu-id="890de-397">Para implementar servicios multiinquilino en su aplicación, puede crear usuarios en Cosmos DB que correspondan a sus usuarios o inquilinos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="890de-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds to your actual users or the tenants of your application.</span></span> <span data-ttu-id="890de-398">Entonces puede crear permisos para un usuario determinado que se corresponda con el control de acceso de varias colecciones, documentos, datos adjuntos, etc.</span><span class="sxs-lookup"><span data-stu-id="890de-398">You can then create permissions for a given user that correspond to the access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="890de-399">A medida que sus aplicaciones necesiten escalar con el crecimiento de su usuario, puede adoptar varias formas de particionar sus datos.</span><span class="sxs-lookup"><span data-stu-id="890de-399">As your applications need to scale with your user growth, you can adopt various ways to shard your data.</span></span> <span data-ttu-id="890de-400">Puede modelar cada usuario de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="890de-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="890de-401">Cada usuario se asigna a una base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-401">Each user maps to a database.</span></span>
* <span data-ttu-id="890de-402">Cada usuario se asigna a una colección.</span><span class="sxs-lookup"><span data-stu-id="890de-402">Each user maps to a collection.</span></span> 
* <span data-ttu-id="890de-403">Los documentos que corresponden a varios usuarios van a una colección dedicada.</span><span class="sxs-lookup"><span data-stu-id="890de-403">Documents corresponding to multiple users go to a dedicated collection.</span></span> 
* <span data-ttu-id="890de-404">Los documentos que corresponden a varios usuarios van a un conjunto de colecciones.</span><span class="sxs-lookup"><span data-stu-id="890de-404">Documents corresponding to multiple users go to a set of collections.</span></span>   

<span data-ttu-id="890de-405">Independientemente de la estrategia de partición específica que seleccione, puede modelar a los usuarios reales como usuarios de base de datos de Cosmos DB y asociar permisos detallados a cada usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-405">Regardless of the specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions to each user.</span></span>  

<span data-ttu-id="890de-406">![Colecciones de usuario][3]</span><span class="sxs-lookup"><span data-stu-id="890de-406">![User collections][3]</span></span>  
<span data-ttu-id="890de-407">**Estrategias de partición y modelado de usuarios**</span><span class="sxs-lookup"><span data-stu-id="890de-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="890de-408">Como con el resto de recursos, los usuarios de Cosmos DB se pueden crear, reemplazar, eliminar, leer o enumerar fácilmente mediante las API de REST o con cualquier SDK de cliente.</span><span class="sxs-lookup"><span data-stu-id="890de-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="890de-409">Cosmos DB siempre proporciona una alta coherencia para leer o consultar los metadatos de un recurso de usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-409">Cosmos DB always provides strong consistency for reading or querying the metadata of a user resource.</span></span> <span data-ttu-id="890de-410">Es importante señalar que eliminar un usuario garantiza automáticamente que no podrá obtener acceso a ningún permiso contenido en el mismo.</span><span class="sxs-lookup"><span data-stu-id="890de-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of the permissions contained within it.</span></span> <span data-ttu-id="890de-411">Incluso aunque Cosmos DB reclame la cuota de permisos como parte del usuario eliminado en segundo plano, los permisos eliminados estarán de nuevo disponibles al instante para su uso.</span><span class="sxs-lookup"><span data-stu-id="890de-411">Even though the Cosmos DB reclaims the quota of the permissions as part of the deleted user in the background, the deleted permissions is available instantly again for you to use.</span></span>  

## <a name="permissions"></a><span data-ttu-id="890de-412">Permisos</span><span class="sxs-lookup"><span data-stu-id="890de-412">Permissions</span></span>
<span data-ttu-id="890de-413">Desde la perspectiva del control de acceso, los recursos como las cuentas de base de datos, las bases de datos, los usuarios y los permisos se consideran recursos *administrativos* , puesto que requieren permisos administrativos.</span><span class="sxs-lookup"><span data-stu-id="890de-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="890de-414">Por otro lado, los recursos que incluyen colecciones, documentos, datos adjuntos, procedimientos almacenados, desencadenadores y UDF se dirigen a una base de datos dada y se consideran *recursos de aplicación*.</span><span class="sxs-lookup"><span data-stu-id="890de-414">On the other hand, resources including the collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="890de-415">Conforme a los dos tipos de recursos y a los roles a los que obtienen acceso (a saber, el administrador y usuario), el modelo de autorización define dos tipos de *claves de acceso*: *clave maestra* y *clave de recursos*.</span><span class="sxs-lookup"><span data-stu-id="890de-415">Corresponding to the two types of resources and the roles that access them (namely the administrator and user), the authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="890de-416">La clave maestra forma parte de la cuenta de base de datos y se proporciona al desarrollador (o administrador) que está aprovisionando la cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="890de-416">The master key is a part of the database account and is provided to the developer (or administrator) who is provisioning the database account.</span></span> <span data-ttu-id="890de-417">Esta clave maestra tiene semánticas de administrador y se pueden utilizar para autorizar acceso a recursos tanto administrativos como de aplicación.</span><span class="sxs-lookup"><span data-stu-id="890de-417">This master key has administrator semantics, in that it can be used to authorize access to both administrative and application resources.</span></span> <span data-ttu-id="890de-418">Al contrario, una clave de recurso es una clave de acceso granular que permite el acceso a recursos de aplicación *específicos* .</span><span class="sxs-lookup"><span data-stu-id="890de-418">In contrast, a resource key is a granular access key that allows access to a *specific* application resource.</span></span> <span data-ttu-id="890de-419">Por lo tanto, captura la relación entre el usuario de una base de datos y los permisos que tiene el usuario para un recurso específico (por ejemplo, colección, documento, dato adjunto, procedimiento almacenado, desencadenador o UDF).</span><span class="sxs-lookup"><span data-stu-id="890de-419">Thus, it captures the relationship between the user of a database and the permissions the user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="890de-420">La única forma de obtener una clave de recurso es creando un recurso de permiso para un usuario determinado.</span><span class="sxs-lookup"><span data-stu-id="890de-420">The only way to obtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="890de-421">Tenga en cuenta que para poder crear o recuperar un permiso, se debe presentar una clave maestra en el encabezado de autorización.</span><span class="sxs-lookup"><span data-stu-id="890de-421">Note that In order to create or retrieve a permission, a master key must be presented in the authorization header.</span></span> <span data-ttu-id="890de-422">Un recurso de permiso está relacionado con el recurso, su acceso y el usuario.</span><span class="sxs-lookup"><span data-stu-id="890de-422">A permission resource ties the resource, its access and the user.</span></span> <span data-ttu-id="890de-423">Tras crear un recurso de permiso, el usuario solo necesita presentar la clave de recurso asociada para obtener acceso al recurso relevante.</span><span class="sxs-lookup"><span data-stu-id="890de-423">After creating a permission resource, the user only needs to present the associated resource key in order to gain access to the relevant resource.</span></span> <span data-ttu-id="890de-424">Así, una clave de recurso se puede visualizar como una representación lógica y compacta del recurso de permiso.</span><span class="sxs-lookup"><span data-stu-id="890de-424">Hence, a resource key can be viewed as a logical and compact representation of the permission resource.</span></span>  

<span data-ttu-id="890de-425">Como con el resto de recursos, los permisos de Cosmos DB se pueden crear, reemplazar, eliminar, leer o enumerar fácilmente mediante las API de REST o con cualquier SDK de cliente.</span><span class="sxs-lookup"><span data-stu-id="890de-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="890de-426">Cosmos DB siempre proporciona una coherencia para leer o consultar los metadatos de un permiso.</span><span class="sxs-lookup"><span data-stu-id="890de-426">Cosmos DB always provides strong consistency for reading or querying the metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="890de-427">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="890de-427">Next steps</span></span>
<span data-ttu-id="890de-428">Obtenga más información sobre cómo trabajar con recursos usando comandos HTTP en [interacciones RESTful con recursos de Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="890de-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png


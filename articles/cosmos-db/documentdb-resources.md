---
title: aaaAzure Cosmos DB modelo de recursos y conceptos | Documentos de Microsoft
description: "Obtenga información sobre el modelo jerárquico del Cosmos base de datos Azure de las bases de datos, colecciones, función definida por el usuario (UDF), documentos, recursos de toomanage de permisos y mucho más."
keywords: "Modelo jerárquico, cosmosdb, azure, Microsoft azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: fc3642232b86cc27901ebd97456c386829324632
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="812e2-104">Conceptos básicos y modelo jerárquico de recursos de Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="812e2-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="812e2-105">las entidades de base de datos que administra la base de datos de Azure Cosmos Hello son tooas que se hace referencia **recursos**.</span><span class="sxs-lookup"><span data-stu-id="812e2-105">hello database entities that Azure Cosmos DB manages are referred tooas **resources**.</span></span> <span data-ttu-id="812e2-106">Cada recurso se identifica mediante un URI lógico.</span><span class="sxs-lookup"><span data-stu-id="812e2-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="812e2-107">Puede interactuar con los recursos de hello mediante verbos HTTP estándar, encabezados de solicitud/respuesta y códigos de estado.</span><span class="sxs-lookup"><span data-stu-id="812e2-107">You can interact with hello resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="812e2-108">Leyendo este artículo, podrá hello tooanswer pueda siguientes preguntas:</span><span class="sxs-lookup"><span data-stu-id="812e2-108">By reading this article, you'll be able tooanswer hello following questions:</span></span>

* <span data-ttu-id="812e2-109">¿Qué es el modelo de recursos de Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="812e2-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="812e2-110">¿Qué sistema definido recursos como recursos toouser opuestos definido?</span><span class="sxs-lookup"><span data-stu-id="812e2-110">What are system defined resources as opposed toouser defined resources?</span></span>
* <span data-ttu-id="812e2-111">¿Cómo se puede dirigir un recurso?</span><span class="sxs-lookup"><span data-stu-id="812e2-111">How do I address a resource?</span></span>
* <span data-ttu-id="812e2-112">¿Cómo se trabaja con las colecciones?</span><span class="sxs-lookup"><span data-stu-id="812e2-112">How do I work with collections?</span></span>
* <span data-ttu-id="812e2-113">¿Cómo se trabaja con procedimientos almacenados, desencadenadores y Funciones definidas por el usuario (UDF)?</span><span class="sxs-lookup"><span data-stu-id="812e2-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="812e2-114">Modelo jerárquico de recursos</span><span class="sxs-lookup"><span data-stu-id="812e2-114">Hierarchical resource model</span></span>
<span data-ttu-id="812e2-115">Como hello siguiente diagrama se muestra, Hola DB Cosmos jerárquica **modelo de recursos** están compuestos de conjuntos de recursos en una cuenta de base de datos, cada uno de ellos direccionable a través de un URI lógico y estable.</span><span class="sxs-lookup"><span data-stu-id="812e2-115">As hello following diagram illustrates, hello Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="812e2-116">Un conjunto de recursos será tooas que se hace referencia una **fuente** en este artículo.</span><span class="sxs-lookup"><span data-stu-id="812e2-116">A set of resources will be referred tooas a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="812e2-117">Base de datos de Cosmos Azure ofrece un protocolo TCP muy eficaz que también es RESTful en su modelo de comunicación, disponible a través de hello [API de cliente de .NET de DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through hello [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="812e2-118">![Modelo jerárquico de recursos de Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="812e2-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="812e2-119">**Modelo jerárquico de recursos**</span><span class="sxs-lookup"><span data-stu-id="812e2-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="812e2-120">toostart trabajar con los recursos, debe [crear una cuenta de base de datos](create-documentdb-dotnet.md) con su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="812e2-120">toostart working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="812e2-121">Una cuenta de base de datos puede constar de un grupo de **bases de datos**, cada una con varias **colecciones**, que a su vez pueden contener **procedimientos almacenados, desencadenadores, UDF, documentos** y **datos adjuntos** relacionados.</span><span class="sxs-lookup"><span data-stu-id="812e2-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="812e2-122">Una base de datos también tiene asociados **usuarios**, cada uno con un conjunto de **permisos** tooaccess colecciones, procedimientos almacenados, desencadenadores, las UDF, documentos o datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="812e2-122">A database also has associated **users**, each with a set of **permissions** tooaccess collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="812e2-123">Mientras las bases de datos, usuarios, permisos y colecciones son recursos definidos por el sistema con esquemas, documentos y datos adjuntos conocidos con contenido arbitrario JSON definido por el usuario.</span><span class="sxs-lookup"><span data-stu-id="812e2-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="812e2-124">Recurso</span><span class="sxs-lookup"><span data-stu-id="812e2-124">Resource</span></span> | <span data-ttu-id="812e2-125">Description</span><span class="sxs-lookup"><span data-stu-id="812e2-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="812e2-126">Cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-126">Database account</span></span> |<span data-ttu-id="812e2-127">Una cuenta de base de datos está asociada a un conjunto de bases de datos y una cantidad fija de almacenamiento de blobs para los datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="812e2-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="812e2-128">Puede crear una o más cuentas de base de datos mediante su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="812e2-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="812e2-129">Para obtener más información, visite nuestra [página de precios](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="812e2-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="812e2-130">Base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-130">Database</span></span> |<span data-ttu-id="812e2-131">Una base de datos es un contenedor lógico de almacenamiento de documentos particionado en recopilaciones.</span><span class="sxs-lookup"><span data-stu-id="812e2-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="812e2-132">Es también un contenedor de usuarios.</span><span class="sxs-lookup"><span data-stu-id="812e2-132">It is also a users container.</span></span> |
| <span data-ttu-id="812e2-133">Usuario</span><span class="sxs-lookup"><span data-stu-id="812e2-133">User</span></span> |<span data-ttu-id="812e2-134">Hola espacio de nombres lógico para definir el ámbito de permisos.</span><span class="sxs-lookup"><span data-stu-id="812e2-134">hello logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="812e2-135">Permiso</span><span class="sxs-lookup"><span data-stu-id="812e2-135">Permission</span></span> |<span data-ttu-id="812e2-136">Un token de autorización asociado a un usuario para el recurso específico de acceso tooa.</span><span class="sxs-lookup"><span data-stu-id="812e2-136">An authorization token associated with a user for access tooa specific resource.</span></span> |
| <span data-ttu-id="812e2-137">Colección</span><span class="sxs-lookup"><span data-stu-id="812e2-137">Collection</span></span> |<span data-ttu-id="812e2-138">Una colección es un contenedor de documentos JSON y Hola asociadas lógica de la aplicación de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="812e2-138">A collection is a container of JSON documents and hello associated JavaScript application logic.</span></span> <span data-ttu-id="812e2-139">Una colección es una entidad facturable, donde hello [costo](performance-levels.md) viene determinado por el nivel de rendimiento de hello asociado a la colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-139">A collection is a billable entity, where hello [cost](performance-levels.md) is determined by hello performance level associated with hello collection.</span></span> <span data-ttu-id="812e2-140">Las colecciones pueden abarcar uno o más particiones/servidores y puede escalarse toohandle prácticamente ilimitados volúmenes de almacenamiento o de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="812e2-140">Collections can span one or more partitions/servers and can scale toohandle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="812e2-141">Procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="812e2-141">Stored Procedure</span></span> |<span data-ttu-id="812e2-142">Lógica de aplicación escrita en JavaScript que se registra con una colección y ejecutar transaccionalmente dentro del motor de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within hello database engine.</span></span> |
| <span data-ttu-id="812e2-143">Desencadenador</span><span class="sxs-lookup"><span data-stu-id="812e2-143">Trigger</span></span> |<span data-ttu-id="812e2-144">Lógica de aplicaciones creada en JavaScript que se ejecuta antes o después de una operación de inserción, reemplazo o eliminación.</span><span class="sxs-lookup"><span data-stu-id="812e2-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="812e2-145">UDF</span><span class="sxs-lookup"><span data-stu-id="812e2-145">UDF</span></span> |<span data-ttu-id="812e2-146">Lógica de aplicaciones creada en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="812e2-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="812e2-147">UDF habilitar toomodel un operador de consulta personalizada y, por tanto, amplían el lenguaje de consulta de API de documentos de hello core.</span><span class="sxs-lookup"><span data-stu-id="812e2-147">UDFs enable you toomodel a custom query operator and thereby extend hello core DocumentDB API query language.</span></span> |
| <span data-ttu-id="812e2-148">Documento</span><span class="sxs-lookup"><span data-stu-id="812e2-148">Document</span></span> |<span data-ttu-id="812e2-149">Contenido JSON definido por el usuario (arbitrario).</span><span class="sxs-lookup"><span data-stu-id="812e2-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="812e2-150">De forma predeterminada, ningún esquema necesita toobe definido ni es necesario toobe índices secundarios proporcionados por hello todos los documentos agregan tooa colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-150">By default, no schema needs toobe defined nor do secondary indices need toobe provided for all hello documents added tooa collection.</span></span> |
| <span data-ttu-id="812e2-151">Datos adjuntos</span><span class="sxs-lookup"><span data-stu-id="812e2-151">Attachment</span></span> |<span data-ttu-id="812e2-152">Los datos adjuntos son documentos especiales que contienen referencias y metadatos asociados con blobs/medios externos.</span><span class="sxs-lookup"><span data-stu-id="812e2-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="812e2-153">desarrollador de Hello puede elegir blob de hello toohave administrado por la base de datos de Cosmos o guardarlo con un proveedor de servicio de blobs externo como OneDrive, Dropbox, etcetera.</span><span class="sxs-lookup"><span data-stu-id="812e2-153">hello developer can choose toohave hello blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="812e2-154">Recursos del sistema frente a recursos definidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="812e2-154">System vs. user defined resources</span></span>
<span data-ttu-id="812e2-155">Los recursos como cuentas de base de datos, bases de datos, colecciones, usuarios, permisos, procedimientos almacenados, desencadenadores y UDF, tienen todos un esquema fijo y se denominan recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="812e2-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="812e2-156">En contraste, los recursos, como documentos y datos adjuntos no tienen restricciones de esquema de Hola y son ejemplos de recursos definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="812e2-156">In contrast, resources such as documents and attachments have no restrictions on hello schema and are examples of user defined resources.</span></span> <span data-ttu-id="812e2-157">En Cosmos DB, tanto los recursos del sistema como los definidos por el usuario se representan y controlan como JSON compatibles con el estándar.</span><span class="sxs-lookup"><span data-stu-id="812e2-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="812e2-158">Todos los recursos, sistema o definidas por usuarios tienen Hola propiedades comunes siguientes.</span><span class="sxs-lookup"><span data-stu-id="812e2-158">All resources, system or user defined, have hello following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="812e2-159">Tenga en cuenta que todas las propiedades generadas por el sistema en un recurso tienen un prefijo con subrayado (_) en su representación de JSON.</span><span class="sxs-lookup"><span data-stu-id="812e2-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-160"><strong>Propiedad</strong></span><span class="sxs-lookup"><span data-stu-id="812e2-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-161"><strong>¿Configurable por el usuario o generada por el sistema?</strong></span><span class="sxs-lookup"><span data-stu-id="812e2-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-162"><strong>Propósito</strong></span><span class="sxs-lookup"><span data-stu-id="812e2-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-163">_rid</span><span class="sxs-lookup"><span data-stu-id="812e2-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-164">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-165">Generados por el sistema, identificador único y jerárquico de recurso de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-165">System generated, unique and hierarchical identifier of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-166">_etag</span><span class="sxs-lookup"><span data-stu-id="812e2-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-167">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-168">valor eTag del recurso de hello necesario para el control de simultaneidad optimista</span><span class="sxs-lookup"><span data-stu-id="812e2-168">etag of hello resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-169">_ts</span><span class="sxs-lookup"><span data-stu-id="812e2-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-170">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-171">Última marca de tiempo actualizada del recurso de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-171">Last updated timestamp of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-172">_self</span><span class="sxs-lookup"><span data-stu-id="812e2-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-173">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-174">URI direccionable único del recurso de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-174">Unique addressable URI of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-175">id</span><span class="sxs-lookup"><span data-stu-id="812e2-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-176">Generado por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-177">Nombre único del recurso de hello definido por el usuario (con hello misma partición clave-valor).</span><span class="sxs-lookup"><span data-stu-id="812e2-177">User defined unique name of hello resource (with hello same partition key value).</span></span> <span data-ttu-id="812e2-178">Si el usuario de hello no especifica un Id., un identificador será generada por el sistema</span><span class="sxs-lookup"><span data-stu-id="812e2-178">If hello user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="812e2-179">Representación de conexión de los recursos</span><span class="sxs-lookup"><span data-stu-id="812e2-179">Wire representation of resources</span></span>
<span data-ttu-id="812e2-180">COSMOS DB no impone ninguna extensiones propias toohello estándar o especiales codificaciones de JSON; funciona con documentos conforme a JSON estándares.</span><span class="sxs-lookup"><span data-stu-id="812e2-180">Cosmos DB does not mandate any proprietary extensions toohello JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="812e2-181">Direccionamiento de un recurso</span><span class="sxs-lookup"><span data-stu-id="812e2-181">Addressing a resource</span></span>
<span data-ttu-id="812e2-182">Todos los recursos se pueden diseccionar mediante URI.</span><span class="sxs-lookup"><span data-stu-id="812e2-182">All resources are URI addressable.</span></span> <span data-ttu-id="812e2-183">Hola valo hello **_self** propiedad de un recurso representa Hola URI relativo del recurso de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-183">hello value of hello **_self** property of a resource represents hello relative URI of hello resource.</span></span> <span data-ttu-id="812e2-184">Hello formato de hello URI consta de Hola /\<fuente\>/ segmentos de ruta de acceso de {_rid}:</span><span class="sxs-lookup"><span data-stu-id="812e2-184">hello format of hello URI consists of hello /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="812e2-185">Valor de hello _self</span><span class="sxs-lookup"><span data-stu-id="812e2-185">Value of hello _self</span></span> | <span data-ttu-id="812e2-186">Descripción</span><span class="sxs-lookup"><span data-stu-id="812e2-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="812e2-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="812e2-187">/dbs</span></span> |<span data-ttu-id="812e2-188">Fuente de bases de datos que hay en una cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="812e2-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="812e2-189">/dbs/{dbName}</span></span> |<span data-ttu-id="812e2-190">Base de datos con un identificador que coincida con el valor de Hola {dbName}</span><span class="sxs-lookup"><span data-stu-id="812e2-190">Database with an id matching hello value {dbName}</span></span> |
| <span data-ttu-id="812e2-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="812e2-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="812e2-192">Fuente de colecciones que hay en una base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="812e2-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="812e2-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="812e2-194">Colección con un identificador que coincida con el valor de Hola {collName}</span><span class="sxs-lookup"><span data-stu-id="812e2-194">Collection with an id matching hello value {collName}</span></span> |
| <span data-ttu-id="812e2-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="812e2-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="812e2-196">Fuente de documentos que hay en una colección</span><span class="sxs-lookup"><span data-stu-id="812e2-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="812e2-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="812e2-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="812e2-198">Documento con un identificador que coincida con el valor de Hola {doc}</span><span class="sxs-lookup"><span data-stu-id="812e2-198">Document with an id matching hello value {doc}</span></span> |
| <span data-ttu-id="812e2-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="812e2-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="812e2-200">Fuente de usuarios que hay en una base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-200">Feed of users under a database</span></span> |
| <span data-ttu-id="812e2-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="812e2-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="812e2-202">Usuario con un identificador que coincida con el valor de Hola {user}</span><span class="sxs-lookup"><span data-stu-id="812e2-202">User with an id matching hello value {user}</span></span> |
| <span data-ttu-id="812e2-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="812e2-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="812e2-204">Fuente de permisos que hay en un usuario</span><span class="sxs-lookup"><span data-stu-id="812e2-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="812e2-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="812e2-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="812e2-206">Permiso con un identificador que coincida con el valor de Hola {permiso}</span><span class="sxs-lookup"><span data-stu-id="812e2-206">Permission with an id matching hello value {permission}</span></span> |

<span data-ttu-id="812e2-207">Cada recurso tiene un nombre único definido por el usuario expone a través de la propiedad de Id. de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-207">Each resource has a unique user defined name exposed via hello id property.</span></span> <span data-ttu-id="812e2-208">Nota: para los documentos, si Hola usuario no especifica un Id., nuestro SDK compatible generará automáticamente un identificador único para el documento de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-208">Note: for documents, if hello user does not specify an id, our supported SDKs will automatically generate a unique id for hello document.</span></span> <span data-ttu-id="812e2-209">Id. de Hello es una cadena definida por el usuario, de los caracteres too256 que es único dentro del contexto de Hola de un recurso de nodo principal específico.</span><span class="sxs-lookup"><span data-stu-id="812e2-209">hello id is a user defined string, of up too256 characters that is unique within hello context of a specific parent resource.</span></span> 

<span data-ttu-id="812e2-210">Cada recurso también tiene un identificador de recurso jerárquica de generada por el sistema (también denominado tooas un RID), que está disponible a través de la propiedad de _rid Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-210">Each resource also has a system generated hierarchical resource identifier (also referred tooas an RID), which is available via hello _rid property.</span></span> <span data-ttu-id="812e2-211">Hola RID codifica la jerarquía completa de Hola de un recurso determinado y es que una representación interna cómoda utiliza tooenforce la integridad referencial de una manera distribuida.</span><span class="sxs-lookup"><span data-stu-id="812e2-211">hello RID encodes hello entire hierarchy of a given resource and it is a convenient internal representation used tooenforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="812e2-212">Hola RID es único dentro de una cuenta de base de datos y se usa internamente en DB Cosmos para enrutamiento eficaz sin necesidad de búsquedas de partición cruzado.</span><span class="sxs-lookup"><span data-stu-id="812e2-212">hello RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="812e2-213">los valores de Hello de propiedades de _rid de Hola y Hola _self son representaciones alternativas y canónicas de un recurso.</span><span class="sxs-lookup"><span data-stu-id="812e2-213">hello values of hello _self and hello  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="812e2-214">compatibilidad de las API de REST de Hello direccionamiento de los recursos y el enrutamiento de solicitudes por Id. de Hola y propiedades de _rid de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-214">hello REST APIs support addressing of resources and routing of requests by both hello id and hello _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="812e2-215">Cuentas de la base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-215">Database accounts</span></span>
<span data-ttu-id="812e2-216">Puede aprovisionar una o más cuentas de base de datos de Cosmos DB mediante su suscripción a Azure.</span><span class="sxs-lookup"><span data-stu-id="812e2-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="812e2-217">Puede crear y administrar cuentas de base de datos de base de datos de Cosmos a través del Portal de Azure de Hola en [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="812e2-217">You can create and manage Cosmos DB database accounts via hello Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="812e2-218">Crear y administrar una cuenta de base de datos requiere acceso administrativo y solo se puede realizar con su suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="812e2-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="812e2-219">Propiedades de la cuenta de base de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-219">Database account properties</span></span>
<span data-ttu-id="812e2-220">Como parte de aprovisionamiento y administración de una cuenta de base de datos puede configurar y leer Hola propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="812e2-220">As part of provisioning and managing a database account you can configure and read hello following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-221"><strong>Nombre de la propiedad</strong></span><span class="sxs-lookup"><span data-stu-id="812e2-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-222"><strong>Descripción</strong></span><span class="sxs-lookup"><span data-stu-id="812e2-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-223">Directiva de coherencia</span><span class="sxs-lookup"><span data-stu-id="812e2-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-224">Establecer este nivel de coherencia de propiedad tooconfigure Hola predeterminada para todas las colecciones de hello en su cuenta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-224">Set this property tooconfigure hello default consistency level for all hello collections under your database account.</span></span> <span data-ttu-id="812e2-225">Puede invalidar el nivel de coherencia de hello en forma de cada solicitud con el encabezado de solicitud de hello [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="812e2-225">You can override hello consistency level on a per request basis using hello [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="812e2-226">Tenga en cuenta que esta propiedad solo aplica toohello <i>recursos definidos por el usuario</i>.</span><span class="sxs-lookup"><span data-stu-id="812e2-226">Note that this property only applies toohello <i>user defined resources</i>.</span></span> <span data-ttu-id="812e2-227">Todos los recursos definidos por el sistema son toosupport configurado lecturas/consultas con coherencia segura.</span><span class="sxs-lookup"><span data-stu-id="812e2-227">All system defined resources are configured toosupport reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="812e2-228">Claves de autorización</span><span class="sxs-lookup"><span data-stu-id="812e2-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="812e2-229">Estos son Hola principal y secundarias claves maestras y de solo lectura que proporcionan administrativos acceso tooall de recursos de hello en la cuenta de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-229">These are hello primary and secondary master and readonly keys that provide administrative access tooall of hello resources under hello database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="812e2-230">Tenga en cuenta que en suma tooprovisioning, configurar y administrar su cuenta de base de datos de hello Portal de Azure, mediante programación puede crear y administrar cuentas de base de datos de la base de datos de Cosmos mediante hello [API de REST de base de datos de Azure Cosmos](/rest/api/documentdb/) como así como [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-230">Note that in addition tooprovisioning, configuring and managing your database account from hello Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using hello [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="812e2-231">Bases de datos</span><span class="sxs-lookup"><span data-stu-id="812e2-231">Databases</span></span>
<span data-ttu-id="812e2-232">Una base de datos de la base de datos de Cosmos es un contenedor lógico de uno o más recopilaciones y los usuarios, como se muestra en hello siguiente diagrama.</span><span class="sxs-lookup"><span data-stu-id="812e2-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in hello following diagram.</span></span> <span data-ttu-id="812e2-233">Puede crear cualquier número de bases de datos en un toooffer de asunto de cuenta de base de datos de Cosmos DB límites.</span><span class="sxs-lookup"><span data-stu-id="812e2-233">You can create any number of databases under a Cosmos DB database account subject toooffer limits.</span></span>  

<span data-ttu-id="812e2-234">![Modelo jerárquico de colecciones y cuenta de base de datos][2]</span><span class="sxs-lookup"><span data-stu-id="812e2-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="812e2-235">**Una base de datos es un contenedor lógico de usuarios y colecciones**</span><span class="sxs-lookup"><span data-stu-id="812e2-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="812e2-236">Una base de datos puede contener almacenamiento de documentos prácticamente ilimitado y particionado en colecciones.</span><span class="sxs-lookup"><span data-stu-id="812e2-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="812e2-237">Escala elástica de una base de datos de Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="812e2-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="812e2-238">Una base de datos de la base de datos de Cosmos es elástico de manera predeterminada, que van desde unos toopetabytes GB de almacenamiento de documentos SSD de seguridad y rendimiento aprovisionado.</span><span class="sxs-lookup"><span data-stu-id="812e2-238">A Cosmos DB database is elastic by default – ranging from a few GB toopetabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="812e2-239">A diferencia de una base de datos RDBMS tradicionales, una base de datos en la base de datos de Cosmos no está tooa ámbito único equipo.</span><span class="sxs-lookup"><span data-stu-id="812e2-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped tooa single machine.</span></span> <span data-ttu-id="812e2-240">Con la base de datos de Cosmos como escala de su aplicación necesita toogrow, puede crear más colecciones, las bases de datos o ambos.</span><span class="sxs-lookup"><span data-stu-id="812e2-240">With Cosmos DB, as your application’s scale needs toogrow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="812e2-241">De hecho, varias aplicaciones propias dentro de Microsoft han usado Cosmos DB a nivel de consumidor creando bases de datos de Cosmos DB extremadamente grandes conteniendo cada una miles de colecciones con terabytes de almacenamiento de documentos.</span><span class="sxs-lookup"><span data-stu-id="812e2-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="812e2-242">Puede aumentar o reducir una base de datos agregando o quitando colecciones toomeet requisitos de escalado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-242">You can grow or shrink a database by adding or removing collections toomeet your application’s scale requirements.</span></span> 

<span data-ttu-id="812e2-243">Puede crear cualquier número de colecciones en una oferta de toohello de asunto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-243">You can create any number of collections within a database subject toohello offer.</span></span> <span data-ttu-id="812e2-244">Cada colección tiene un almacenamiento SSD de seguridad y el rendimiento aprovisionado para usted según el nivel de rendimiento seleccionados Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-244">Each collection has SSD backed storage and throughput provisioned for you depending on hello selected performance tier.</span></span>

<span data-ttu-id="812e2-245">Una base de datos de Cosmos DB también es un contenedor de usuarios.</span><span class="sxs-lookup"><span data-stu-id="812e2-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="812e2-246">Un usuario, a su vez, es un espacio de nombres lógico para un conjunto de permisos que proporciona los datos adjuntos, documentos y toocollections específico de acceso y la autorización.</span><span class="sxs-lookup"><span data-stu-id="812e2-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access toocollections, documents and attachments.</span></span>  

<span data-ttu-id="812e2-247">Como con otros recursos en el modelo de recursos de base de datos de Cosmos hello, se pueden crear bases de datos, reemplazar, eliminar, leer o enumerado fácilmente con cualquier hello [API de REST](/rest/api/documentdb/) o cualquiera de hello [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-247">As with other resources in hello Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="812e2-248">COSMOS DB garantiza la coherencia fuerte para leer o consultar los metadatos de Hola de un recurso de base de datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-248">Cosmos DB guarantees strong consistency for reading or querying hello metadata of a database resource.</span></span> <span data-ttu-id="812e2-249">Eliminar una base de datos automáticamente, se garantiza que no se puede obtener acceso a cualquiera de las colecciones de Hola o usuarios contenidos dentro de él.</span><span class="sxs-lookup"><span data-stu-id="812e2-249">Deleting a database automatically ensures that you cannot access any of hello collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="812e2-250">Colecciones</span><span class="sxs-lookup"><span data-stu-id="812e2-250">Collections</span></span>
<span data-ttu-id="812e2-251">Una colección de Cosmos DB es un contenedor de sus documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="812e2-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="812e2-252">Almacenamiento de documentos respaldado con SSD elástico</span><span class="sxs-lookup"><span data-stu-id="812e2-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="812e2-253">Una colección es elástica de forma intrínseca; crece y se reduce automáticamente a medida que agrega o elimina documentos.</span><span class="sxs-lookup"><span data-stu-id="812e2-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="812e2-254">Las colecciones son recursos lógicos y pueden abarcar una o varios servidores o particiones físicos.</span><span class="sxs-lookup"><span data-stu-id="812e2-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="812e2-255">número de Hola de particiones dentro de una colección viene determinado por base de datos de Cosmos según el tamaño de almacenamiento de Hola y rendimiento aprovisionado de saludo de la colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-255">hello number of partitions within a collection is determined by Cosmos DB based on hello storage size and hello provisioned throughput of your collection.</span></span> <span data-ttu-id="812e2-256">Todas las particiones de Cosmos DB tienen una cantidad fija de almacenamiento con respaldo SSD asociado y se replican para ofrecer una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="812e2-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="812e2-257">Administración de particiones es completamente administrado por base de datos de Azure Cosmos y no tiene un código complejo toowrite o administrar las particiones.</span><span class="sxs-lookup"><span data-stu-id="812e2-257">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="812e2-258">Las colecciones de Cosmos DB ofrecen funcionalidades de almacenamiento y rendimiento **prácticamente ilimitadas** .</span><span class="sxs-lookup"><span data-stu-id="812e2-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="812e2-259">Indexación automática de las colecciones</span><span class="sxs-lookup"><span data-stu-id="812e2-259">Automatic indexing of collections</span></span>
<span data-ttu-id="812e2-260">Cosmos DB es un sistema de bases de datos verdadero libre de esquemas.</span><span class="sxs-lookup"><span data-stu-id="812e2-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="812e2-261">No se supone ni requieren ningún esquema para los documentos de hello JSON.</span><span class="sxs-lookup"><span data-stu-id="812e2-261">It does not assume or require any schema for hello JSON documents.</span></span> <span data-ttu-id="812e2-262">Si agrega la colección de documentos tooa, Cosmos DB indiza automáticamente y están disponibles para tooquery.</span><span class="sxs-lookup"><span data-stu-id="812e2-262">As you add documents tooa collection, Cosmos DB automatically indexes them and they are available for you tooquery.</span></span> <span data-ttu-id="812e2-263">La indexación automática de documentos sin requerir esquema o índices secundarios es una capacidad clave de Cosmos DB y se habilita mediante técnicas de mantenimiento de índices de escritura optimizada, sin bloqueo y estructuradas por registros.</span><span class="sxs-lookup"><span data-stu-id="812e2-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="812e2-264">Cosmos DB es compatible con un volumen constante de operaciones de escritura muy rápidas mientras sigue dando servicio a consultas consistentes.</span><span class="sxs-lookup"><span data-stu-id="812e2-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="812e2-265">Almacenamiento de documento y de índice son usado el almacenamiento de hello toocalculate utilizado por cada colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-265">Both document and index storage are used toocalculate hello storage consumed by each collection.</span></span> <span data-ttu-id="812e2-266">Puede controlar Hola almacenamiento y rendimiento ventajas e inconvenientes asociados con una indización mediante la configuración de directiva de indexación de Hola de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-266">You can control hello storage and performance trade-offs associated with indexing by configuring hello indexing policy for a collection.</span></span> 

### <a name="configuring-hello-indexing-policy-of-a-collection"></a><span data-ttu-id="812e2-267">Configuración de directiva de indexación de Hola de una colección</span><span class="sxs-lookup"><span data-stu-id="812e2-267">Configuring hello indexing policy of a collection</span></span>
<span data-ttu-id="812e2-268">Hola directiva de cada colección de indización permite toomake rendimiento y almacenamiento ventajas e inconvenientes asociados con la indización.</span><span class="sxs-lookup"><span data-stu-id="812e2-268">hello indexing policy of each collection allows you toomake performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="812e2-269">Hello siguientes opciones están disponible tooyou como parte de la configuración de índice:</span><span class="sxs-lookup"><span data-stu-id="812e2-269">hello following options are available tooyou as part of indexing configuration:</span></span>  

* <span data-ttu-id="812e2-270">Elija si colección Hola automáticamente indiza todos los documentos de Hola o no.</span><span class="sxs-lookup"><span data-stu-id="812e2-270">Choose whether hello collection automatically indexes all of hello documents or not.</span></span> <span data-ttu-id="812e2-271">De forma predeterminada, se indexan todos los documentos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="812e2-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="812e2-272">Puede elegir tooturn desactivar la indización automática y agregar de forma selectiva sólo el índice de toohello documentos concretos.</span><span class="sxs-lookup"><span data-stu-id="812e2-272">You can choose tooturn off automatic indexing and selectively add only specific documents toohello index.</span></span> <span data-ttu-id="812e2-273">Por el contrario, es posible elegir selectivamente tooexclude únicamente los documentos específicos.</span><span class="sxs-lookup"><span data-stu-id="812e2-273">Conversely, you can selectively choose tooexclude only specific documents.</span></span> <span data-ttu-id="812e2-274">Puede lograr esto estableciendo Hola automática de las propiedades toobe true o false en hello indexingPolicy de una colección y uso del encabezado de solicitud de hello [x-ms-indexingdirective] al insertar, reemplazar o eliminar un documento.</span><span class="sxs-lookup"><span data-stu-id="812e2-274">You can achieve this by setting hello automatic property toobe true or false on hello indexingPolicy of a collection and using hello [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="812e2-275">Elija si tooinclude o excluir rutas de acceso específicas o patrones en los documentos de Hola índice.</span><span class="sxs-lookup"><span data-stu-id="812e2-275">Choose whether tooinclude or exclude specific paths or patterns in your documents from hello index.</span></span> <span data-ttu-id="812e2-276">Puede conseguirlo mediante configuración includedPaths y excludedPaths en indexingPolicy Hola de una colección respectivamente.</span><span class="sxs-lookup"><span data-stu-id="812e2-276">You can achieve this by setting includedPaths and excludedPaths on hello indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="812e2-277">También puede configurar Hola almacenamiento y rendimiento ventajas e inconvenientes de intervalo y hash busca patrones de ruta de acceso específica.</span><span class="sxs-lookup"><span data-stu-id="812e2-277">You can also configure hello storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="812e2-278">Seleccione entre actualizaciones de índice sincrónica (consistente) y asincrónica (diferida).</span><span class="sxs-lookup"><span data-stu-id="812e2-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="812e2-279">De forma predeterminada, el índice de Hola se actualiza sincrónicamente en cada Insertar, reemplazar o eliminar una colección de toohello de documento.</span><span class="sxs-lookup"><span data-stu-id="812e2-279">By default, hello index is updated synchronously on each insert, replace or delete of a document toohello collection.</span></span> <span data-ttu-id="812e2-280">Esto permite realizar consultas de hello toohonor Hola de mismo nivel de coherencia de lecturas del documento de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-280">This enables hello queries toohonor hello same consistency level as that of hello document reads.</span></span> <span data-ttu-id="812e2-281">Mientras DB Cosmos es de escritura optimizado y admite volúmenes sostenidos de escrituras de documento junto con el mantenimiento del índice sincrónico y que sirve al consultas coherente, puede configurar cierto tooupdate colecciones su índice de forma diferida.</span><span class="sxs-lookup"><span data-stu-id="812e2-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="812e2-282">La indexación diferida aumenta aún más el rendimiento de escritura hello y es ideal para escenarios de ingesta de forma masiva para principalmente con muchas lecturas colecciones.</span><span class="sxs-lookup"><span data-stu-id="812e2-282">Lazy indexing boosts hello write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="812e2-283">Hola directiva de indexación se puede cambiar mediante la ejecución de una operación PUT en la colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-283">hello indexing policy can be changed by executing a PUT on hello collection.</span></span> <span data-ttu-id="812e2-284">Esto puede ser logra a través de hello [SDK del cliente](documentdb-sdk-dotnet.md), hello [Portal de Azure](https://portal.azure.com) o hello [API de REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="812e2-284">This can be achieved either through hello [client SDK](documentdb-sdk-dotnet.md), hello [Azure Portal](https://portal.azure.com) or hello [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="812e2-285">Consulta de una colección</span><span class="sxs-lookup"><span data-stu-id="812e2-285">Querying a collection</span></span>
<span data-ttu-id="812e2-286">documentos de Hello dentro de una colección pueden tener esquemas arbitrarios y puede consultar documentos dentro de una colección sin proporcionar cualquier esquema o índices secundarios por adelantado.</span><span class="sxs-lookup"><span data-stu-id="812e2-286">hello documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="812e2-287">Puede consultar la colección de hello mediante hello [API de documentos de base de datos de Azure Cosmos: referencia de la sintaxis SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), que proporciona operadores espaciales, relacional y jerárquicos enriquecidos y extensibilidad a través de la UDF basadas en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="812e2-287">You can query hello collection using hello [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="812e2-288">Gramática JSON se permite para el modelado de documentos JSON como árboles con las etiquetas de los nodos de árbol de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-288">JSON grammar allows for modeling JSON documents as trees with labels as hello tree nodes.</span></span> <span data-ttu-id="812e2-289">Esto lo aprovechan tanto las técnicas de indexación automática de la API de DocumentDB como el dialecto de SQL de la API de DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="812e2-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="812e2-290">Hola lenguaje de consulta de API de DocumetDB consta de tres aspectos principales:</span><span class="sxs-lookup"><span data-stu-id="812e2-290">hello DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="812e2-291">Un pequeño conjunto de operaciones de consulta que se asignan de forma natural toohello estructura de árbol como proyecciones y consultas jerárquicas.</span><span class="sxs-lookup"><span data-stu-id="812e2-291">A small set of query operations that map naturally toohello tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="812e2-292">Un subconjunto de operaciones relacionales incluyendo composición, filtro, proyecciones, agregados y autocombinaciones.</span><span class="sxs-lookup"><span data-stu-id="812e2-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="812e2-293">UDF basadas puramente en JavaScript que se funcionan con (1) y (2)</span><span class="sxs-lookup"><span data-stu-id="812e2-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="812e2-294">modelo de consultas de base de datos de Cosmos Hola intenta toostrike un equilibrio entre la funcionalidad, la eficacia y la simplicidad.</span><span class="sxs-lookup"><span data-stu-id="812e2-294">hello Cosmos DB query model attempts toostrike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="812e2-295">motor de base de datos de base de datos de Cosmos de Hola forma nativa se compila y ejecuta instrucciones de consulta SQL Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-295">hello Cosmos DB database engine natively compiles and executes hello SQL query statements.</span></span> <span data-ttu-id="812e2-296">Puede consultar una colección utilizando hello [API de REST](/rest/api/documentdb/) o cualquiera de hello [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-296">You can query a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="812e2-297">Hola .NET SDK incluye un proveedor LINQ.</span><span class="sxs-lookup"><span data-stu-id="812e2-297">hello .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="812e2-298">Puede probar Hola API de DocumentDB y ejecutar consultas SQL contra nuestro conjunto de datos en hello [Query Playground](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="812e2-298">You can try out hello DocumentDB API and run SQL queries against our dataset in hello [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="812e2-299">Transacciones de documentos múltiples</span><span class="sxs-lookup"><span data-stu-id="812e2-299">Multi-document transactions</span></span>
<span data-ttu-id="812e2-300">Las transacciones de base de datos proporcionan un modelo de programación seguro y de predicción para tratar los datos de toohello cambios simultáneos.</span><span class="sxs-lookup"><span data-stu-id="812e2-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes toohello data.</span></span> <span data-ttu-id="812e2-301">En RDBMS, lógica de negocios de toowrite de forma tradicional de hello es toowrite **procedimientos almacenados** o **desencadenadores** y entregarlo toohello servidor de base de datos para su ejecución transaccional.</span><span class="sxs-lookup"><span data-stu-id="812e2-301">In RDBMS, hello traditional way toowrite business logic is toowrite **stored-procedures** and/or **triggers** and ship it toohello database server for transactional execution.</span></span> <span data-ttu-id="812e2-302">En RDBMS, programador de la aplicación hello es necesario toodeal con dos lenguajes de programación diferentes:</span><span class="sxs-lookup"><span data-stu-id="812e2-302">In RDBMS, hello application programmer is required toodeal with two disparate programming languages:</span></span> 

* <span data-ttu-id="812e2-303">Hola (no transaccional) aplicación lenguaje de programación (por ejemplo, JavaScript, Python, C#, Java, etcetera.)</span><span class="sxs-lookup"><span data-stu-id="812e2-303">hello (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="812e2-304">T-SQL, transaccional lenguaje de programación Hola que se ejecuta de forma nativa en base de datos de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-304">T-SQL, hello transactional programming language which is natively executed by hello database</span></span>

<span data-ttu-id="812e2-305">En virtud de su profundo compromiso tooJavaScript y JSON directamente en el motor de base de datos de hello, base de datos de Cosmos proporciona un modelo de programación e intuitiva para ejecución de JavaScript basada en lógica de la aplicación directamente en las colecciones de hello en cuanto a los procedimientos almacenados y desencadenadores.</span><span class="sxs-lookup"><span data-stu-id="812e2-305">By virtue of its deep commitment tooJavaScript and JSON directly within hello database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on hello collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="812e2-306">Esto permite dos procedimientos siguientes de hello:</span><span class="sxs-lookup"><span data-stu-id="812e2-306">This allows for both of hello following:</span></span>

* <span data-ttu-id="812e2-307">Controlar la implementación eficaz de simultaneidad, recuperación, automática de indización de gráficos de objetos JSON de hello directamente en el motor de base de datos de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-307">Efficient implementation of concurrency control, recovery, automatic indexing of hello JSON object graphs directly in hello database engine</span></span>
* <span data-ttu-id="812e2-308">Expresar de forma natural flujo de control, la variable de ámbito, la asignación y la integración de primitivas con transacciones de bases de datos directamente en términos de lenguaje de programación de JavaScript de Hola de control de excepciones</span><span class="sxs-lookup"><span data-stu-id="812e2-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of hello JavaScript programming language</span></span>

<span data-ttu-id="812e2-309">lógica de JavaScript de Hello registrado en el nivel de colección, a continuación, puede emitir operaciones de base de datos en documentos de Hola de hello dado de la colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-309">hello JavaScript logic registered at a collection level can then issue database operations on hello documents of hello given collection.</span></span> <span data-ttu-id="812e2-310">DB COSMOS implícitamente Hola ajusta basadas en JavaScript, procedimientos almacenados y desencadenadores dentro de un ambiente transacciones ACID con aislamiento de instantánea a través de documentos dentro de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-310">Cosmos DB implicitly wraps hello JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="812e2-311">Durante el transcurso de Hola de su ejecución, si Hola JavaScript produce una excepción, a continuación, Hola toda la transacción se anula.</span><span class="sxs-lookup"><span data-stu-id="812e2-311">During hello course of its execution, if hello JavaScript throws an exception, then hello entire transaction is aborted.</span></span> <span data-ttu-id="812e2-312">Hello resultante modelo de programación es muy sencilla pero eficaz.</span><span class="sxs-lookup"><span data-stu-id="812e2-312">hello resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="812e2-313">Los desarrolladores de JavaScript obtienen un modelo de programación “duradero” mientras siguen utilizando sus construcciones de lenguaje y primitivos de biblioteca familiares.</span><span class="sxs-lookup"><span data-stu-id="812e2-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="812e2-314">Hello capacidad tooexecute JavaScript directamente dentro de la base de datos de hello motor Hola mismo espacio de direcciones como grupo de búferes de hello permite un rendimiento superior y ejecución transaccional de operaciones de base de datos en documentos de Hola de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-314">hello ability tooexecute JavaScript directly within hello database engine in hello same address space as hello buffer pool enables performant and transactional execution of database operations against hello documents of a collection.</span></span> <span data-ttu-id="812e2-315">Además, motor de base de datos de base de datos de Cosmos hace un toohello profundo compromiso JSON y JavaScript elimina cualquier desigualdad de impedancia entre sistemas de tipos de Hola de aplicación y base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-315">Furthermore, Cosmos DB database engine makes a deep commitment toohello JSON and JavaScript eliminates any impedance mismatch between hello type systems of application and hello database.</span></span>   

<span data-ttu-id="812e2-316">Después de crear una colección, puede registrar los procedimientos almacenados, desencadenadores y UDF con una colección utilizando hello [API de REST](/rest/api/documentdb/) o cualquiera de hello [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="812e2-317">Tras el registro, puede hacer referencia a los mismos y ejecutarlos.</span><span class="sxs-lookup"><span data-stu-id="812e2-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="812e2-318">Considere la posibilidad de siguiente Hola escrito completamente en JavaScript, código de hello siguiente toma dos argumentos (nombre de libro y nombre del autor) del procedimiento almacenado y crea un nuevo documento, las consultas para un documento y, a continuación, actualiza su – todo dentro de una transacción ACID implícita.</span><span class="sxs-lookup"><span data-stu-id="812e2-318">Consider hello following stored procedure written entirely in JavaScript, hello code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="812e2-319">En cualquier momento durante la ejecución de hello, si se produce una excepción de JavaScript, anula toda la transacción Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-319">At any point during hello execution, if a JavaScript exception is thrown, hello entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace hello author name for all documents that satisfied hello query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need tooexecute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="812e2-320">cliente de Hello puede "envíos" hello por encima de la base de datos de JavaScript lógica toohello para su ejecución transaccional a través de HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="812e2-320">hello client can “ship” hello above JavaScript logic toohello database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="812e2-321">Para obtener más información acerca del uso de los métodos HTTP, consulte [Interacciones RESTful con recursos de Azure Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="812e2-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="812e2-322">Observe que, porque la base de datos de hello entiende JSON y JavaScript, no hay ningún sistema de tipo no coincidente, ningún "Asignación OR" o mágico de generación de código necesarios.</span><span class="sxs-lookup"><span data-stu-id="812e2-322">Notice that because hello database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="812e2-323">Procedimientos almacenados y desencadenadores interactúan con un documentos hello y colección en una colección a través de un modelo de objetos bien definidas, que expone el contexto actual de colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-323">Stored procedures and triggers interact with a collection and hello documents in a collection through a well-defined object model, which exposes hello current collection context.</span></span>  

<span data-ttu-id="812e2-324">Las colecciones de hello API de documentos se pueden crear, eliminar, leer o enumerar fácilmente con cualquier hello [API de REST](/rest/api/documentdb/) o cualquiera de hello [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-324">Collections in hello DocumentDB API can be created, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="812e2-325">Hola API de documentos siempre proporciona coherencia fuerte para leer o consultar los metadatos de Hola de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-325">hello DocumentDB API always provides strong consistency for reading or querying hello metadata of a collection.</span></span> <span data-ttu-id="812e2-326">Eliminar automáticamente una colección, se garantiza que no se puede tener acceso a cualquiera de los documentos de hello, datos adjuntos, procedimientos almacenados, desencadenadores y UDF incluidos en él.</span><span class="sxs-lookup"><span data-stu-id="812e2-326">Deleting a collection automatically ensures that you cannot access any of hello documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="812e2-327">Procedimientos almacenados, desencadenadores y funciones definidas por el usuario (UDF)</span><span class="sxs-lookup"><span data-stu-id="812e2-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="812e2-328">Como se describe en la sección anterior de hello, puede escribir toorun de lógica de aplicación directamente dentro de una transacción dentro del motor de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-328">As described in hello previous section, you can write application logic toorun directly within a transaction inside of hello database engine.</span></span> <span data-ttu-id="812e2-329">lógica de la aplicación Hello puede escribirse completamente en JavaScript y se puede modelar como un procedimiento almacenado, desencadenador o una UDF.</span><span class="sxs-lookup"><span data-stu-id="812e2-329">hello application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="812e2-330">Hola código JavaScript en un procedimiento almacenado o un desencadenador puede insertar, reemplazar, eliminar, documentos de lectura o consultas dentro de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-330">hello JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="812e2-331">En Hola otra parte, Hola JavaScript dentro de un UDF no se puede insertar, reemplazar o eliminar documentos.</span><span class="sxs-lookup"><span data-stu-id="812e2-331">On hello other hand, hello JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="812e2-332">UDF enumerar documentos Hola de una consulta conjunto de resultados y generan otro conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="812e2-332">UDFs enumerate hello documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="812e2-333">Para los servicios multiinquilino, Cosmos DB impone una estricta reserva basada en la gobernanza de los recursos.</span><span class="sxs-lookup"><span data-stu-id="812e2-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="812e2-334">Cada procedimiento almacenado, desencadenador o una UDF Obtiene un cuanto fijo de toodo de recursos de sistema operativo su trabajo.</span><span class="sxs-lookup"><span data-stu-id="812e2-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources toodo its work.</span></span> <span data-ttu-id="812e2-335">Además, los procedimientos almacenados, desencadenadores o UDF no se pueden vincular con bibliotecas de JavaScript externas y están en la lista negra si superan los presupuestos de recursos de hello asignados toothem.</span><span class="sxs-lookup"><span data-stu-id="812e2-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed hello resource budgets allocated toothem.</span></span> <span data-ttu-id="812e2-336">Puede registrar, anular el registro de los procedimientos almacenados, desencadenadores o UDF con una colección mediante las API de REST de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using hello REST APIs.</span></span>  <span data-ttu-id="812e2-337">Tras el registro de un procedimiento almacenado, desencadenador o UDF, se compila de forma previa y almacena como código byte que se ejecutará más tarde.</span><span class="sxs-lookup"><span data-stu-id="812e2-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="812e2-338">Hola siguiente sección muestra cómo puede utilizar Hola Cosmos DB JavaScript SDK tooregister, ejecutar y anular el registro de un procedimiento almacenado, desencadenador y una UDF.</span><span class="sxs-lookup"><span data-stu-id="812e2-338">hello following section illustrate how you can use hello Cosmos DB JavaScript SDK tooregister, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="812e2-339">Hola SDK de JavaScript es un contenedor simple hello [API de REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="812e2-339">hello JavaScript SDK is a simple wrapper over hello [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="812e2-340">Registro de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="812e2-340">Registering a stored procedure</span></span>
<span data-ttu-id="812e2-341">El registro de un procedimiento almacenado crea un nuevo recurso de procedimiento almacenado en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="812e2-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="812e2-342">Ejecución de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="812e2-342">Executing a stored procedure</span></span>
<span data-ttu-id="812e2-343">Ejecución de un procedimiento almacenado se realiza mediante la emisión de una solicitud HTTP POST con un recurso de procedimiento almacenado existente al pasar parámetros de procedimiento toohello Hola del cuerpo de solicitud.</span><span class="sxs-lookup"><span data-stu-id="812e2-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters toohello procedure in hello request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="812e2-344">Anulación del registro de un procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="812e2-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="812e2-345">Anular el registro de un procedimiento almacenado es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de procedimiento almacenado existente.</span><span class="sxs-lookup"><span data-stu-id="812e2-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="812e2-346">Registro de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="812e2-346">Registering a pre-trigger</span></span>
<span data-ttu-id="812e2-347">El registro de un desencadenador se realiza creando un nuevo recurso de desencadenador en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="812e2-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="812e2-348">Puede especificar si el desencadenador de hello es una anterior o un tipo de desencadenador y Hola post de operación se puede asociar con (por ejemplo, crear, reemplazar, Delete o todos).</span><span class="sxs-lookup"><span data-stu-id="812e2-348">You can specify if hello trigger is a pre or a post trigger and hello type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="812e2-349">Ejecución de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="812e2-349">Executing a pre-trigger</span></span>
<span data-ttu-id="812e2-350">Ejecución de un desencadenador se debe especificar el nombre hello de un desencadenador existente en el momento de Hola de emitir la solicitud POST, PUT o DELETE de Hola de un recurso de documento a través del encabezado de solicitud de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-350">Execution of a trigger is done by specifying hello name of an existing trigger at hello time of issuing hello POST/PUT/DELETE request of a document resource via hello request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in hello Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="812e2-351">Anulación del registro de un desencadenador previo</span><span class="sxs-lookup"><span data-stu-id="812e2-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="812e2-352">Anular el registro de un desencadenador es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de desencadenador existente.</span><span class="sxs-lookup"><span data-stu-id="812e2-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="812e2-353">Registro de una UDF</span><span class="sxs-lookup"><span data-stu-id="812e2-353">Registering a UDF</span></span>
<span data-ttu-id="812e2-354">El registro de una UDF se realiza creando un nuevo recurso de UDF en una colección mediante POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="812e2-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-hello-query"></a><span data-ttu-id="812e2-355">Ejecutar un UDF como parte de la consulta de Hola</span><span class="sxs-lookup"><span data-stu-id="812e2-355">Executing a UDF as part of hello query</span></span>
<span data-ttu-id="812e2-356">Una UDF puede especificarse como parte de la consulta SQL de Hola y se utiliza como un núcleo de Hola de manera tooextend [lenguaje de consulta SQL para hello documentos API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="812e2-356">A UDF can be specified as part of hello SQL query and is used as a way tooextend hello core [SQL query language for hello DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="812e2-357">Anulación del registro de una UDF</span><span class="sxs-lookup"><span data-stu-id="812e2-357">Unregistering a UDF</span></span>
<span data-ttu-id="812e2-358">Anular el registro de una UDF es sencillo mediante la emisión de una solicitud HTTP DELETE en un recurso de UDF existente.</span><span class="sxs-lookup"><span data-stu-id="812e2-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="812e2-359">Aunque los fragmentos de código de hello anteriores mostraron registro hello (POST), la anulación del registro (PUT), leer/lista (GET) y ejecución (POST) a través de hello [SDK de JavaScript](https://github.com/Azure/azure-documentdb-js), también puede usar hello [API de REST](/rest/api/documentdb/) u otros [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-359">Although hello snippets above showed hello registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via hello [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use hello [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="812e2-360">Documentos</span><span class="sxs-lookup"><span data-stu-id="812e2-360">Documents</span></span>
<span data-ttu-id="812e2-361">Puede insertar, reemplazar, eliminar, leer, enumerar y consultar documentos JSON arbitrarios de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="812e2-362">COSMOS DB no impone ningún esquema y no requiere que los índices secundarios en toosupport de orden que las consultas en documentos de una colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order toosupport querying over documents in a collection.</span></span> <span data-ttu-id="812e2-363">tamaño máximo de Hola para un documento es 2 MB.</span><span class="sxs-lookup"><span data-stu-id="812e2-363">hello maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="812e2-364">Al ser un servicio de base de datos totalmente abierto, Cosmos DB no crea ningún tipo de datos especializados, como fecha y hora, o codificaciones específicas para documentos JSON.</span><span class="sxs-lookup"><span data-stu-id="812e2-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="812e2-365">Tenga en cuenta que Cosmos DB no requiere ningún especial JSON convenciones toocodify hello las relaciones entre varios documentos; sintaxis SQL de Hola de Cosmos DB proporciona a operadores de consulta relacional y jerárquica muy eficaces documentos tooquery y proyecto sin necesidad de toocodify relaciones entre los documentos con propiedades distintivas ni anotaciones especiales.</span><span class="sxs-lookup"><span data-stu-id="812e2-365">Note that Cosmos DB does not require any special JSON conventions toocodify hello relationships among various documents; hello SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators tooquery and project documents without any special annotations or need toocodify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="812e2-366">Como con todos los demás recursos, se pueden crear documentos, reemplazar, eliminar, leer, enumerado y consultar fácilmente mediante las API de REST o cualquiera de hello [SDK de cliente](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="812e2-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="812e2-367">Eliminar un documento al instante libera Hola cuota correspondiente tooall de datos adjuntos de hello anidado.</span><span class="sxs-lookup"><span data-stu-id="812e2-367">Deleting a document instantly frees up hello quota corresponding tooall of hello nested attachments.</span></span> <span data-ttu-id="812e2-368">Hola lee el nivel de coherencia de documentos de sigue la directiva de coherencia de hello en la cuenta de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-368">hello read consistency level of documents follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="812e2-369">Esta directiva se puede reemplazar en función de la solicitud dependiendo de los requisitos de coherencia de datos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="812e2-370">Al consultar documentos, Hola lee coherencia sigue Hola indización modo establecido en la colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-370">When querying documents, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="812e2-371">Para "coherente", esto sigue la directiva de coherencia de la cuenta de hello.</span><span class="sxs-lookup"><span data-stu-id="812e2-371">For “consistent”, this follows hello account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="812e2-372">Datos adjuntos y multimedia</span><span class="sxs-lookup"><span data-stu-id="812e2-372">Attachments and media</span></span>
<span data-ttu-id="812e2-373">COSMOS DB permite toostore blobs/medios binarios con la base de datos de Cosmos (máximo de 2 GB por cuenta) o tooyour multimedia de manera remota propio almacén.</span><span class="sxs-lookup"><span data-stu-id="812e2-373">Cosmos DB allows you toostore binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or tooyour own remote media store.</span></span> <span data-ttu-id="812e2-374">También permite toorepresent Hola metadatos de un medio de un documento especial denominado datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="812e2-374">It also allows you toorepresent hello metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="812e2-375">Datos adjuntos en la base de datos de Cosmos son un documento de (JSON) especial que referencias Hola multimedia o BLOBs almacenados en otro lugar.</span><span class="sxs-lookup"><span data-stu-id="812e2-375">An attachment in Cosmos DB is a special (JSON) document that references hello media/blob stored elsewhere.</span></span> <span data-ttu-id="812e2-376">Datos adjuntos son simplemente un documento especial que captura Hola metadatos (por ejemplo, ubicación, autor, etc.) de un medio que se almacenan en un almacenamiento de información multimedia de manera remota.</span><span class="sxs-lookup"><span data-stu-id="812e2-376">An attachment is simply a special document that captures hello metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="812e2-377">Considere la posibilidad de una aplicación de lectura social que usa anotaciones de Cosmos DB toostore tinta, y resalta los metadatos, incluidos los comentarios, marcadores, clasificaciones, etc. asociados para un libro electrónico de un usuario determinado similares/gustan.</span><span class="sxs-lookup"><span data-stu-id="812e2-377">Consider a social reading application which uses Cosmos DB toostore ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="812e2-378">Hello contenido del libro de hello propio se almacena de forma Hola medios o disponible como parte de la cuenta de base de datos de la base de datos de Cosmos o un almacén de multimedia de manera remota.</span><span class="sxs-lookup"><span data-stu-id="812e2-378">hello content of hello book itself is stored in hello media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="812e2-379">Una aplicación puede almacenar los metadatos de cada usuario como un documento distinto; por ejemplo, los metadatos de Joe para book1 se almacenan en un documento con la referencia /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="812e2-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="812e2-380">Datos adjuntos que señala toohello páginas de contenido de un libro determinado de un usuario se almacenan en el documento correspondiente Hola p. ej., /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etcetera.</span><span class="sxs-lookup"><span data-stu-id="812e2-380">Attachments pointing toohello content pages of a given book of a user are stored under hello corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="812e2-381">Tenga en cuenta que los ejemplos de hello mencionados anteriormente usar la jerarquía de recursos de identificadores descriptivo tooconvey Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-381">Note that hello examples listed above use friendly ids tooconvey hello resource hierarchy.</span></span> <span data-ttu-id="812e2-382">Se tiene acceso a recursos a través de hello las API de REST a través de identificadores de recurso único.</span><span class="sxs-lookup"><span data-stu-id="812e2-382">Resources are accessed via hello REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="812e2-383">En medios de Hola que está administrados por base de datos de Cosmos, propiedad de _media Hola de datos adjuntos de hello hará referencia a medios Hola por su identificador URI.</span><span class="sxs-lookup"><span data-stu-id="812e2-383">For hello media that is managed by Cosmos DB, hello _media property of hello attachment will reference hello media by its URI.</span></span> <span data-ttu-id="812e2-384">COSMOS DB garantizará toogarbage media de hello recopilar cuando se quitan todas las referencias pendientes de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-384">Cosmos DB will ensure toogarbage collect hello media when all of hello outstanding references are dropped.</span></span> <span data-ttu-id="812e2-385">COSMOS DB genera datos adjuntos de hello cuando cargue nuevos medios de Hola y rellenan hello _media toopoint toohello recién agregado medios automáticamente.</span><span class="sxs-lookup"><span data-stu-id="812e2-385">Cosmos DB automatically generates hello attachment when you upload hello new media and populates hello _media toopoint toohello newly added media.</span></span> <span data-ttu-id="812e2-386">Si elige media de hello toostore en un almacén de datos blob remoto administrado por el usuario (por ejemplo, OneDrive, almacenamiento de Azure, DropBox etcetera), todavía puede usar medios de los datos adjuntos tooreference Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-386">If you choose toostore hello media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments tooreference hello media.</span></span> <span data-ttu-id="812e2-387">En este caso, se crear datos adjuntos de hello usted mismo y rellenar la propiedad _media.</span><span class="sxs-lookup"><span data-stu-id="812e2-387">In this case, you will create hello attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="812e2-388">Al igual que con todos los demás recursos, datos adjuntos pueden crearse, reemplazaron, eliminarán, leen o enumeran fácilmente utilizando las API de REST o cualquiera de los SDK de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="812e2-389">Como con documentos, de nivel de coherencia de los datos adjuntos de lectura Hola sigue la directiva de coherencia de hello en la cuenta de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-389">As with documents, hello read consistency level of attachments follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="812e2-390">Esta directiva se puede reemplazar en función de la solicitud dependiendo de los requisitos de coherencia de datos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="812e2-391">Al consultar los datos adjuntos, Hola lee coherencia sigue Hola indización modo establecido en la colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-391">When querying for attachments, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="812e2-392">Para "coherente", esto sigue la directiva de coherencia de la cuenta de hello.</span><span class="sxs-lookup"><span data-stu-id="812e2-392">For “consistent”, this follows hello account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="812e2-393">Usuarios</span><span class="sxs-lookup"><span data-stu-id="812e2-393">Users</span></span>
<span data-ttu-id="812e2-394">Un usuario de Cosmos DB representa un espacio de nombres lógico para agrupar permisos.</span><span class="sxs-lookup"><span data-stu-id="812e2-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="812e2-395">Un usuario de base de datos de Cosmos puede corresponder tooa usuario en un sistema de administración de identidad o un rol de aplicación predefinida.</span><span class="sxs-lookup"><span data-stu-id="812e2-395">A Cosmos DB user may correspond tooa user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="812e2-396">Para la base de datos de Cosmos, un usuario simplemente representa un toogroup abstracción un conjunto de permisos en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-396">For Cosmos DB, a user simply represents an abstraction toogroup a set of permissions under a database.</span></span>   

<span data-ttu-id="812e2-397">Para implementar la arquitectura multiempresa en la aplicación, puede crear usuarios de base de datos de Cosmos que corresponde a los usuarios reales de tooyour o inquilinos de hello de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds tooyour actual users or hello tenants of your application.</span></span> <span data-ttu-id="812e2-398">A continuación, puede crear permisos para un usuario determinado que corresponden toohello el control de acceso a través de varias colecciones, documentos, datos adjuntos, etcetera.</span><span class="sxs-lookup"><span data-stu-id="812e2-398">You can then create permissions for a given user that correspond toohello access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="812e2-399">Ya que las aplicaciones deben tooscale con el crecimiento de usuarios, puede adoptar tooshard de diversas maneras los datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-399">As your applications need tooscale with your user growth, you can adopt various ways tooshard your data.</span></span> <span data-ttu-id="812e2-400">Puede modelar cada usuario de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="812e2-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="812e2-401">Cada usuario asigna tooa base de datos.</span><span class="sxs-lookup"><span data-stu-id="812e2-401">Each user maps tooa database.</span></span>
* <span data-ttu-id="812e2-402">Cada usuario asigna tooa colección.</span><span class="sxs-lookup"><span data-stu-id="812e2-402">Each user maps tooa collection.</span></span> 
* <span data-ttu-id="812e2-403">Documentos correspondientes a los usuarios de toomultiple van colección tooa dedicado.</span><span class="sxs-lookup"><span data-stu-id="812e2-403">Documents corresponding toomultiple users go tooa dedicated collection.</span></span> 
* <span data-ttu-id="812e2-404">Documentos correspondientes a los usuarios de toomultiple van tooa conjunto de colecciones.</span><span class="sxs-lookup"><span data-stu-id="812e2-404">Documents corresponding toomultiple users go tooa set of collections.</span></span>   

<span data-ttu-id="812e2-405">Independientemente de la estrategia de particionamiento específica de Hola que elija, puede modelar los usuarios reales como los usuarios de base de datos de base de datos de Cosmos y asociar el usuario de tooeach permisos avanzados.</span><span class="sxs-lookup"><span data-stu-id="812e2-405">Regardless of hello specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions tooeach user.</span></span>  

<span data-ttu-id="812e2-406">![Colecciones de usuario][3]</span><span class="sxs-lookup"><span data-stu-id="812e2-406">![User collections][3]</span></span>  
<span data-ttu-id="812e2-407">**Estrategias de partición y modelado de usuarios**</span><span class="sxs-lookup"><span data-stu-id="812e2-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="812e2-408">Como todos los demás recursos, los usuarios de base de datos de Cosmos pueden crearse, reemplazaron, eliminarán, leen o enumeran fácilmente utilizando las API de REST o cualquiera de los SDK de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="812e2-409">COSMOS DB siempre proporciona coherencia fuerte para leer o consultar los metadatos de Hola de un recurso de usuario.</span><span class="sxs-lookup"><span data-stu-id="812e2-409">Cosmos DB always provides strong consistency for reading or querying hello metadata of a user resource.</span></span> <span data-ttu-id="812e2-410">Es necesario aclarar que eliminar un usuario automáticamente se asegura de que no se puede tener acceso a ninguno de los permisos de hello incluidos en él.</span><span class="sxs-lookup"><span data-stu-id="812e2-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of hello permissions contained within it.</span></span> <span data-ttu-id="812e2-411">Aunque Hola DB Cosmos reclama cuota Hola de permisos de hello como parte del usuario de hello eliminado en segundo plano de hello, permisos de hello eliminado está disponible al instante nuevo para toouse.</span><span class="sxs-lookup"><span data-stu-id="812e2-411">Even though hello Cosmos DB reclaims hello quota of hello permissions as part of hello deleted user in hello background, hello deleted permissions is available instantly again for you toouse.</span></span>  

## <a name="permissions"></a><span data-ttu-id="812e2-412">Permisos</span><span class="sxs-lookup"><span data-stu-id="812e2-412">Permissions</span></span>
<span data-ttu-id="812e2-413">Desde la perspectiva del control de acceso, los recursos como las cuentas de base de datos, las bases de datos, los usuarios y los permisos se consideran recursos *administrativos* , puesto que requieren permisos administrativos.</span><span class="sxs-lookup"><span data-stu-id="812e2-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="812e2-414">En Hola otra parte, incluidas las colecciones de hello, documentos, datos adjuntos, procedimientos almacenados, desencadenadores, los recursos y UDF se con ámbito en una base de datos y se consideran *recursos de la aplicación*.</span><span class="sxs-lookup"><span data-stu-id="812e2-414">On hello other hand, resources including hello collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="812e2-415">Correspondiente toohello dos tipos de recursos y roles de Hola que tienen acceso a ellos (es decir, el Administrador de Hola y de usuario), modelo de autorización de hello define dos tipos de *las claves de acceso*: *clave maestra* y *clave de recurso*.</span><span class="sxs-lookup"><span data-stu-id="812e2-415">Corresponding toohello two types of resources and hello roles that access them (namely hello administrator and user), hello authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="812e2-416">clave maestra de Hello es una parte de la cuenta de base de datos de Hola y se proporciona para desarrolladores de toohello (o administrador) que está aprovisionando cuenta de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-416">hello master key is a part of hello database account and is provided toohello developer (or administrator) who is provisioning hello database account.</span></span> <span data-ttu-id="812e2-417">Dicha clave maestra tiene semántica de administrador, en que puede ser usado tooauthorize acceso tooboth administrativas y recursos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-417">This master key has administrator semantics, in that it can be used tooauthorize access tooboth administrative and application resources.</span></span> <span data-ttu-id="812e2-418">En cambio, una clave de recurso es una clave de acceso granular que permita acceso tooa *específico* recurso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="812e2-418">In contrast, a resource key is a granular access key that allows access tooa *specific* application resource.</span></span> <span data-ttu-id="812e2-419">Por lo tanto, captura la relación de hello entre usuario Hola de una base de datos y Hola permisos hello, usuario tiene para un recurso concreto (por ejemplo, colección, documentos, datos adjuntos, procedimiento almacenado, desencadenador o UDF).</span><span class="sxs-lookup"><span data-stu-id="812e2-419">Thus, it captures hello relationship between hello user of a database and hello permissions hello user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="812e2-420">Hola única manera tooobtain que es una clave de recurso mediante la creación de un recurso de permiso en un usuario determinado.</span><span class="sxs-lookup"><span data-stu-id="812e2-420">hello only way tooobtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="812e2-421">Tenga en cuenta que en orden toocreate o recuperar un permiso, una clave maestra se debe presentar en el encabezado de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-421">Note that In order toocreate or retrieve a permission, a master key must be presented in hello authorization header.</span></span> <span data-ttu-id="812e2-422">Un recurso de permiso une usuario de recurso, su acceso y Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-422">A permission resource ties hello resource, its access and hello user.</span></span> <span data-ttu-id="812e2-423">Después de crear un recurso de permiso, el usuario de hello solo necesita toopresent clave de recurso asociado hello en orden toogain acceso toohello relevante de recursos.</span><span class="sxs-lookup"><span data-stu-id="812e2-423">After creating a permission resource, hello user only needs toopresent hello associated resource key in order toogain access toohello relevant resource.</span></span> <span data-ttu-id="812e2-424">Por lo tanto, una clave de recurso puede verse como una representación lógica y compacta de recurso de permiso de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-424">Hence, a resource key can be viewed as a logical and compact representation of hello permission resource.</span></span>  

<span data-ttu-id="812e2-425">Al igual que con todos los demás recursos, permisos en la base de datos de Cosmos pueden crearse, reemplazaron, eliminarán, leen o enumeran fácilmente utilizando las API de REST o cualquiera de los SDK de cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="812e2-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="812e2-426">COSMOS DB siempre proporciona coherencia fuerte para leer o consultar los metadatos de Hola de un permiso.</span><span class="sxs-lookup"><span data-stu-id="812e2-426">Cosmos DB always provides strong consistency for reading or querying hello metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="812e2-427">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="812e2-427">Next steps</span></span>
<span data-ttu-id="812e2-428">Obtenga más información sobre cómo trabajar con recursos usando comandos HTTP en [interacciones RESTful con recursos de Cosmos DB](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="812e2-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png


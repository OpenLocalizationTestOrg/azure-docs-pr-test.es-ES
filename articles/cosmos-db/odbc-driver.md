---
title: "Conexión a Azure Cosmos DB mediante herramientas de análisis de BI | Microsoft Docs"
description: "Obtenga información sobre cómo usar el controlador ODBC de Azure Cosmos DB para crear tablas y vistas de forma que los datos normalizados puedan verse en el software de análisis de datos y BI."
keywords: odbc, controlador odbc
services: cosmos-db
author: mimig1
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 9967f4e5-4b71-4cd7-8324-221a8c789e6b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: rest-api
ms.topic: article
ms.date: 05/24/2017
ms.author: mimig
ms.openlocfilehash: 2df792c00b7a789dbefa64bfe0245f1ad73c3faa
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="connect-to-azure-cosmos-db-using-bi-analytics-tools-with-the-odbc-driver"></a><span data-ttu-id="b8805-104">Conexión a Azure Cosmos DB mediante herramientas de análisis de BI con el controlador ODBC</span><span class="sxs-lookup"><span data-stu-id="b8805-104">Connect to Azure Cosmos DB using BI analytics tools with the ODBC driver</span></span>

<span data-ttu-id="b8805-105">El controlador ODBC de Azure Cosmos DB le permite conectarse a Azure Cosmos DB mediante herramientas de análisis de BI, como SQL Server Integration Services, Power BI Desktop y Tableau de forma que pueda analizar y crear visualizaciones de los datos de Azure Cosmos DB en esas soluciones.</span><span class="sxs-lookup"><span data-stu-id="b8805-105">The Azure Cosmos DB ODBC driver enables you to connect to Azure Cosmos DB using BI analytics tools such as SQL Server Integration Services, Power BI Desktop, and Tableau so that you can analyze and create visualizations of your Azure Cosmos DB data in those solutions.</span></span>

<span data-ttu-id="b8805-106">El controlador ODBC de Azure Cosmos DB es compatible con ODBC 3.8 y admite la sintaxis de ANSI SQL-92.</span><span class="sxs-lookup"><span data-stu-id="b8805-106">The Azure Cosmos DB ODBC driver is ODBC 3.8 compliant and supports ANSI SQL-92 syntax.</span></span> <span data-ttu-id="b8805-107">El controlador ofrece características enriquecidas que le ayudarán a volver a normalizar datos en Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-107">The driver offers rich features to help you renormalize data in Azure Cosmos DB.</span></span> <span data-ttu-id="b8805-108">Mediante el controlador, puede representar datos en Azure Cosmos DB como tablas y vistas.</span><span class="sxs-lookup"><span data-stu-id="b8805-108">Using the driver, you can represent data in Azure Cosmos DB as tables and views.</span></span> <span data-ttu-id="b8805-109">El controlador permite realizar operaciones de SQL en las tablas y vistas, así como agrupar por consultas, inserciones, actualizaciones y eliminaciones.</span><span class="sxs-lookup"><span data-stu-id="b8805-109">The driver enables you to perform SQL operations against the tables and views including group by queries, inserts, updates, and deletes.</span></span>

## <a name="why-do-i-need-to-normalize-my-data"></a><span data-ttu-id="b8805-110">¿Por qué es necesario normalizar los datos?</span><span class="sxs-lookup"><span data-stu-id="b8805-110">Why do I need to normalize my data?</span></span>
<span data-ttu-id="b8805-111">Azure Cosmos DB es una base de datos sin esquema, por lo que habilita el desarrollo rápido de aplicaciones al permitir que estas iteren sobre la marcha su modelo de datos sin limitarlos a un esquema estricto.</span><span class="sxs-lookup"><span data-stu-id="b8805-111">Azure Cosmos DB is a schemaless database, so it enables rapid development of apps by enabling applications to iterate their data model on the fly and not confine them to a strict schema.</span></span> <span data-ttu-id="b8805-112">Una sola base de datos de Azure Cosmos DB puede contener documentos JSON de varias estructuras.</span><span class="sxs-lookup"><span data-stu-id="b8805-112">A single Azure Cosmos DB database can contain JSON documents of various structures.</span></span> <span data-ttu-id="b8805-113">Esto es ideal para el desarrollo rápido de aplicaciones, pero cuando desea analizar y crear informes de los datos mediante análisis de datos y herramientas de BI, suele ser normal eliminar el formato de los datos y que estos se ajusten a un esquema específico.</span><span class="sxs-lookup"><span data-stu-id="b8805-113">This is great for rapid application development, but when you want to analyze and create reports of your data using data analytics and BI tools, the data often needs to be flattened and adhere to a specific schema.</span></span>

<span data-ttu-id="b8805-114">Aquí es donde entra en juego el controlador ODBC.</span><span class="sxs-lookup"><span data-stu-id="b8805-114">This is where the ODBC driver comes in.</span></span> <span data-ttu-id="b8805-115">Mediante el controlador ODBC, ahora puede volver a normalizar datos en Azure Cosmos DB en tablas y vistas que se ajusten a sus necesidades de informes y análisis de datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-115">By using the ODBC driver, you can now renormalized data in Azure Cosmos DB into tables and views fitting to your data analytic and reporting needs.</span></span> <span data-ttu-id="b8805-116">Los esquemas renormalizados no tienen ningún impacto en los datos subyacentes y no limitan a los desarrolladores a ajustarse a ellos, simplemente permiten aprovechar las herramientas compatibles con ODBC para acceder a los datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-116">The renormalized schemas have no impact on the underlying data and do not confine developers to adhere to them, they simply enable you to leverage ODBC-compliant tools to access the data.</span></span> <span data-ttu-id="b8805-117">Por tanto, la base de datos de Azure Cosmos DB no solo será ahora la favorita del equipo de desarrollo, sino que a los analistas de datos también les encantará.</span><span class="sxs-lookup"><span data-stu-id="b8805-117">So now your Azure Cosmos DB database will not only be a favorite for your development team, but your data analysts will love it too.</span></span>

<span data-ttu-id="b8805-118">Ahora empecemos con el controlador ODBC.</span><span class="sxs-lookup"><span data-stu-id="b8805-118">Now lets get started with the ODBC driver.</span></span>

## <span data-ttu-id="b8805-119"><a id="install"></a>Paso 1: Instalación del controlador ODBC de Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b8805-119"><a id="install"></a>Step 1: Install the Azure Cosmos DB ODBC driver</span></span>

1. <span data-ttu-id="b8805-120">Descargue los controladores para su entorno:</span><span class="sxs-lookup"><span data-stu-id="b8805-120">Download the drivers for your environment:</span></span>

    * <span data-ttu-id="b8805-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) para Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="b8805-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) for 64-bit Windows</span></span>
    * <span data-ttu-id="b8805-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) para Windows de 32 bits en 64 bits</span><span class="sxs-lookup"><span data-stu-id="b8805-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) for 32-bit on 64-bit Windows</span></span>
    * <span data-ttu-id="b8805-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) para Windows de 32 bits</span><span class="sxs-lookup"><span data-stu-id="b8805-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) for 32-bit Windows</span></span>

    <span data-ttu-id="b8805-124">Ejecute el archivo msi localmente, lo que iniciará el **Asistente para instalación del controlador ODBC de Microsoft Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="b8805-124">Run the msi file locally, which starts the **Microsoft Azure Cosmos DB ODBC Driver Installation Wizard**.</span></span> 
2. <span data-ttu-id="b8805-125">Complete el asistente para instalación con la entrada predeterminada para instalar el controlador ODBC.</span><span class="sxs-lookup"><span data-stu-id="b8805-125">Complete the installation wizard using the default input to install the ODBC driver.</span></span>
3. <span data-ttu-id="b8805-126">Abra la aplicación **Administrador de orígenes de datos ODBC** en el equipo. Puede hacerlo escribiendo **orígenes de datos ODBC** en el cuadro de búsqueda de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8805-126">Open the **ODBC Data source Administrator** app on your computer, you can do this by typing **ODBC Data sources** in the Windows search box.</span></span> 
    <span data-ttu-id="b8805-127">Puede confirmar que el controlador se ha instalado haciendo clic en la pestaña **Controladores** y asegurándose de que **el controlador ODBC de Microsoft Azure Cosmos DB** aparece en la lista.</span><span class="sxs-lookup"><span data-stu-id="b8805-127">You can confirm the driver was installed by clicking the **Drivers** tab and ensuring **Microsoft Azure Cosmos DB ODBC Driver** is listed.</span></span>

    ![Administrador de orígenes de datos ODBC de Azure Cosmos DB](./media/odbc-driver/odbc-driver.png)

## <span data-ttu-id="b8805-129"><a id="connect"></a>Paso 2: Conexión a su cuenta de Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b8805-129"><a id="connect"></a>Step 2: Connect to your Azure Cosmos DB database</span></span>

1. <span data-ttu-id="b8805-130">Después de [instalar el controlador ODBC de Azure Cosmos DB](#install), en la ventana **Administrador de orígenes de datos ODBC**, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-130">After [Installing the Azure Cosmos DB ODBC driver](#install), in the **ODBC Data Source Administrator** window, click **Add**.</span></span> <span data-ttu-id="b8805-131">Puede crear un DSN de usuario o de sistema.</span><span class="sxs-lookup"><span data-stu-id="b8805-131">You can create a User or System DSN.</span></span> <span data-ttu-id="b8805-132">En este ejemplo, vamos a crear un DSN de usuario.</span><span class="sxs-lookup"><span data-stu-id="b8805-132">In this example, we are creating a User DSN.</span></span>
2. <span data-ttu-id="b8805-133">En la ventana **Crear un nuevo origen de datos**, seleccione **Microsoft Azure Cosmos DB ODBC Driver** (Controlador ODBC de Microsoft Azure Cosmos DB) y haga clic en **Finalizar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-133">In the **Create New Data Source** window, select **Microsoft Azure Cosmos DB ODBC Driver**, and then click **Finish**.</span></span>
3. <span data-ttu-id="b8805-134">En la ventana **Azure Cosmos DB ODBC Driver DSN Setup** (Configuración de DSN del controlador ODBC de Azure Cosmos DB), rellene lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8805-134">In the **Azure Cosmos DB ODBC Driver SDN Setup** window, fill in the following:</span></span> 

    ![Ventana Azure Cosmos DB ODBC Driver DSN Setup (Configuración de DSN del controlador ODBC de Azure Cosmos DB)](./media/odbc-driver/odbc-driver-dsn-setup.png)
    - <span data-ttu-id="b8805-136">**Nombre del origen de datos**: su propio nombre descriptivo para el DSN de ODBC.</span><span class="sxs-lookup"><span data-stu-id="b8805-136">**Data Source Name**: Your own friendly name for the ODBC DSN.</span></span> <span data-ttu-id="b8805-137">Este nombre es único en su cuenta de Azure Cosmos DB, por lo que debe ser apropiado si tiene varias cuentas.</span><span class="sxs-lookup"><span data-stu-id="b8805-137">This name is unique to your Azure Cosmos DB account, so name it appropriately if you have multiple accounts.</span></span>
    - <span data-ttu-id="b8805-138">**Descripción**: breve descripción del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-138">**Description**: A brief description of the data source.</span></span>
    - <span data-ttu-id="b8805-139">**Host**: URI de la cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-139">**Host**: URI for your Azure Cosmos DB account.</span></span> <span data-ttu-id="b8805-140">Puede recuperar esta información de la hoja Claves de Azure Cosmos DB en Azure Portal, como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="b8805-140">You can retrieve this from the Azure Cosmos DB Keys blade in the Azure portal, as shown in the following screenshot.</span></span> 
    - <span data-ttu-id="b8805-141">**Clave de acceso**: clave principal o secundaria, de solo escritura o solo lectura de la hoja Claves de Azure Cosmos DB de Azure Portal, como se muestra en la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="b8805-141">**Access Key**: The primary or secondary, read-write or read-only key from the Azure Cosmos DB Keys blade in the Azure portal as shown in the following screenshot.</span></span> <span data-ttu-id="b8805-142">Se recomienda usar la clave de solo lectura si DSN se utiliza para procesamiento e informes de datos de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="b8805-142">We recommend you use the read-only key if the DSN is used for read-only data processing and reporting.</span></span>
    <span data-ttu-id="b8805-143">![Hoja Claves de Azure Cosmos DB](./media/odbc-driver/odbc-driver-keys.png)</span><span class="sxs-lookup"><span data-stu-id="b8805-143">![Azure Cosmos DB Keys blade](./media/odbc-driver/odbc-driver-keys.png)</span></span>
    - <span data-ttu-id="b8805-144">**Encrypt Access Key for** (Cifrar clave de acceso para): seleccione la mejor opción en función de los usuarios de esta máquina.</span><span class="sxs-lookup"><span data-stu-id="b8805-144">**Encrypt Access Key for**: Select the best choice based on the users of this machine.</span></span> 
4. <span data-ttu-id="b8805-145">Haga clic en el botón **Probar** para asegurarse de que puede conectarse a su cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-145">Click the **Test** button to make sure you can connect to your Azure Cosmos DB account.</span></span> 
5. <span data-ttu-id="b8805-146">Haga clic en **Opciones avanzadas** y establezca los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="b8805-146">Click **Advanced Options** and set the following values:</span></span>
    - <span data-ttu-id="b8805-147">**Query Consistency** (Coherencia de consultas): seleccione el [nivel de coherencia](consistency-levels.md) para las operaciones.</span><span class="sxs-lookup"><span data-stu-id="b8805-147">**Query Consistency**: Select the [consistency level](consistency-levels.md) for your operations.</span></span> <span data-ttu-id="b8805-148">El valor predeterminado es Sesión.</span><span class="sxs-lookup"><span data-stu-id="b8805-148">The default is Session.</span></span>
    - <span data-ttu-id="b8805-149">**Número de reintentos**: escriba el número de veces que se a volver a intentar una operación si la solicitud inicial no se completa debido a una limitación de servicio.</span><span class="sxs-lookup"><span data-stu-id="b8805-149">**Number of Retries**: Enter the number of times to retry an operation if the initial request does not complete due to service throttling.</span></span>
    - <span data-ttu-id="b8805-150">**Archivo de esquema**: dispone de varias opciones.</span><span class="sxs-lookup"><span data-stu-id="b8805-150">**Schema File**: You have a number of options here.</span></span>
        - <span data-ttu-id="b8805-151">De forma predeterminada, dejando esta entrada tal cual (en blanco), el controlador busca todas las coleccionas en los datos de la primera página para determinar el esquema de cada colección.</span><span class="sxs-lookup"><span data-stu-id="b8805-151">By default, leaving this entry as is (blank), the driver scans the first page data for all collections to determine the schema of each collection.</span></span> <span data-ttu-id="b8805-152">Esto se conoce como asignación de colección.</span><span class="sxs-lookup"><span data-stu-id="b8805-152">This is known as Collection Mapping.</span></span> <span data-ttu-id="b8805-153">Sin un archivo de esquema definido, el controlador tiene que realizar el examen para cada sesión de controlador y podría dar lugar a un tiempo de inicio mayor de una aplicación con DSN.</span><span class="sxs-lookup"><span data-stu-id="b8805-153">Without a schema file defined, the driver has to perform the scan for each driver session and could result in a higher start up time of an application using the DSN.</span></span> <span data-ttu-id="b8805-154">Se recomienda asociar siempre un archivo de esquema para un DSN.</span><span class="sxs-lookup"><span data-stu-id="b8805-154">We recommend that you always associate a schema file for a DSN.</span></span>
        - <span data-ttu-id="b8805-155">Si ya tiene un archivo de esquema (posiblemente uno que creó mediante el [Editor de esquemas](#schema-editor)), puede hacer clic en **Examinar**, navegar al archivo, hacer clic en **Guardar** y, luego, hacer clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-155">If you already have a schema file (possibly one that you created using the [Schema Editor](#schema-editor)), you can click **Browse**, navigate to your file, click **Save**, and then click **OK**.</span></span>
        - <span data-ttu-id="b8805-156">Si desea crear un nuevo esquema, haga clic en **Aceptar**y luego en **Editor de esquemas** en la ventana principal.</span><span class="sxs-lookup"><span data-stu-id="b8805-156">If you want to create a new schema, click **OK**, and then click **Schema Editor** in the main window.</span></span> <span data-ttu-id="b8805-157">Después, continúe con la información del [Editor de esquemas](#schema-editor).</span><span class="sxs-lookup"><span data-stu-id="b8805-157">Then proceed to the [Schema Editor](#schema-editor) information.</span></span> <span data-ttu-id="b8805-158">Cuando cree el nuevo archivo de esquema, recuerde que debe volver a la ventana **Opciones avanzadas** para incluir el archivo de esquema recién creado.</span><span class="sxs-lookup"><span data-stu-id="b8805-158">Upon creating the new schema file, please remember to go back to the **Advanced Options** window to include the newly created schema file.</span></span>

6. <span data-ttu-id="b8805-159">Una vez que complete y cierre la ventana **Azure Cosmos DB ODBC Driver DSN Setup** (Configuración de DSN del controlador ODBC de Azure Cosmos DB), el nuevo DSN de usuario se agregará a la pestaña DSN de usuario.</span><span class="sxs-lookup"><span data-stu-id="b8805-159">Once you complete and close the **Azure Cosmos DB ODBC Driver DSN Setup** window, the new User DSN is added to the User DSN tab.</span></span>

    ![Nuevo DSN de ODBC de Azure Cosmos DB en la pestaña DSN de usuario](./media/odbc-driver/odbc-driver-user-dsn.png)

## <span data-ttu-id="b8805-161"><a id="#collection-mapping"></a>Paso 3: Creación de una definición de esquema mediante el método de asignación de colección</span><span class="sxs-lookup"><span data-stu-id="b8805-161"><a id="#collection-mapping"></a>Step 3: Create a schema definition using the collection mapping method</span></span>

<span data-ttu-id="b8805-162">Hay dos tipos de métodos de muestreo que puede usar: **asignación de colección** o **delimitadores de tabla**.</span><span class="sxs-lookup"><span data-stu-id="b8805-162">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="b8805-163">Una sesión de muestreo puede utilizar ambos métodos de muestreo, pero cada colección solo puede usar un método de muestreo específico.</span><span class="sxs-lookup"><span data-stu-id="b8805-163">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> <span data-ttu-id="b8805-164">Los pasos siguientes crean un esquema para los datos de una o varias colecciones mediante el método de asignación de colección.</span><span class="sxs-lookup"><span data-stu-id="b8805-164">The steps below create a schema for the data in one or more collections using the collection mapping method.</span></span> <span data-ttu-id="b8805-165">Este método de muestreo recupera los datos de la página de una colección para determinar la estructura de dichos datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-165">This sampling method retrieves the data in the page of a collection to determine the structure of the data.</span></span> <span data-ttu-id="b8805-166">Transpone una colección a una tabla en el lado ODBC.</span><span class="sxs-lookup"><span data-stu-id="b8805-166">It transposes a collection to a table on the ODBC side.</span></span> <span data-ttu-id="b8805-167">Este método de muestreo es rápido y eficaz cuando los datos de una colección son homogéneos.</span><span class="sxs-lookup"><span data-stu-id="b8805-167">This sampling method is efficient and fast when the data in a collection is homogenous.</span></span> <span data-ttu-id="b8805-168">Si una colección contiene un tipo heterogénea de datos, es recomendable usar el [método de asignación de delimitadores de tabla ](#table-mapping), ya que proporciona un método de muestreo más robusto para determinar las estructuras de datos de la colección.</span><span class="sxs-lookup"><span data-stu-id="b8805-168">If a collection contains heterogenous type of data, we recommend you use the [table-delimiters mapping method](#table-mapping) as it provides a more robust sampling method to determine the data structures in the collection.</span></span> 

1. <span data-ttu-id="b8805-169">Después de completar los pasos 1 a 4 de [Conexión a la base de datos de Azure Cosmos DB](#connect), haga clic en **Editor de esquemas** en la ventana **Azure Cosmos DB ODBC Driver DSN Setup** (Configuración de DSN del controlador ODBC de Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="b8805-169">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the **Azure Cosmos DB ODBC Driver DSN Setup** window.</span></span>

    ![Botón Editor de esquemas en la ventana Azure Cosmos DB ODBC Driver DSN Setup (Configuración de DSN del controlador ODBC de Azure Cosmos DB)](./media/odbc-driver/odbc-driver-schema-editor.png)
2. <span data-ttu-id="b8805-171">En la ventana **Editor de esquemas**, haga clic en **Crear nuevo**.</span><span class="sxs-lookup"><span data-stu-id="b8805-171">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="b8805-172">La ventana **Generate Schema** (Generar esquema) muestra todas las colecciones de la cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-172">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="b8805-173">Seleccione una o varias recopilaciones para muestrear y luego haga clic en **Muestra**.</span><span class="sxs-lookup"><span data-stu-id="b8805-173">Select one or more collections to sample, and then click **Sample**.</span></span> 
4. <span data-ttu-id="b8805-174">En la pestaña **Vista de diseño**, se representan la base de datos, el esquema y la tabla.</span><span class="sxs-lookup"><span data-stu-id="b8805-174">In the **Design View** tab, the database, schema, and table are represented.</span></span> <span data-ttu-id="b8805-175">En la vista de tabla, el examen muestra el conjunto de propiedades asociadas a los nombres de columna (Nombre SQL, Nombre de origen, etc.).</span><span class="sxs-lookup"><span data-stu-id="b8805-175">In the table view, the scan displays the set of properties associated with the column names (SQL Name, Source Name, etc.).</span></span>
    <span data-ttu-id="b8805-176">Para cada columna, puede modificar el nombre SQL de la columna, el tipo de SQL, la longitud SQL (si procede), la escala (si procede), la precisión (si procede) y si acepta valores NULL.</span><span class="sxs-lookup"><span data-stu-id="b8805-176">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="b8805-177">Puede establecer **Ocultar columna** en **true** si desea excluir esa columna de los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="b8805-177">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="b8805-178">Las columnas marcadas con Ocultar columna = true no se devuelven para la selección y proyección, aunque aún forman parte del esquema.</span><span class="sxs-lookup"><span data-stu-id="b8805-178">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="b8805-179">Por ejemplo, puede ocultar todas las propiedades necesarias del sistema de Azure Cosmos DB a partir de “_”.</span><span class="sxs-lookup"><span data-stu-id="b8805-179">For example, you can hide all of the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="b8805-180">La columna **identificador** es el único campo que no se puede ocultar, ya que se usa como la clave principal en el esquema normalizado.</span><span class="sxs-lookup"><span data-stu-id="b8805-180">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
5. <span data-ttu-id="b8805-181">Cuando haya terminado de definir el esquema, haga clic en **Archivo** | **Guardar**, navegue hasta el directorio para guardar el esquema y, luego, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-181">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>

    <span data-ttu-id="b8805-182">Si en el futuro desea utilizar este esquema con un DSN, abra la ventana Azure Cosmos DB ODBC Driver DSN Setup (Configuración de DSN del controlador ODBC de Azure Cosmos DB) a través del Administrador de orígenes de datos ODBC, haga clic en Opciones avanzadas y, luego, en el cuadro Archivo de esquema, desplácese al esquema guardado.</span><span class="sxs-lookup"><span data-stu-id="b8805-182">If in the future you want to use this schema with a DSN, open the Azure Cosmos DB ODBC Driver DSN Setup window (via the ODBC Data Source Administrator), click Advanced Options, and then in the Schema File box, navigate to the saved schema.</span></span> <span data-ttu-id="b8805-183">Al guardar un archivo de esquema en un DSN existente se modifica la conexión de DSN para tener como ámbito los datos y la estructura definidos por el esquema.</span><span class="sxs-lookup"><span data-stu-id="b8805-183">Saving a schema file to an existing DSN modifies the DSN connection to scope to the data and structure defined by schema.</span></span>

## <span data-ttu-id="b8805-184"><a id="table-mapping"></a>Paso 4: Creación de una definición de esquema mediante el método de asignación de delimitadores de tabla</span><span class="sxs-lookup"><span data-stu-id="b8805-184"><a id="table-mapping"></a>Step 4: Create a schema definition using the table-delimiters mapping method</span></span>

<span data-ttu-id="b8805-185">Hay dos tipos de métodos de muestreo que puede usar: **asignación de colección** o **delimitadores de tabla**.</span><span class="sxs-lookup"><span data-stu-id="b8805-185">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="b8805-186">Una sesión de muestreo puede utilizar ambos métodos de muestreo, pero cada colección solo puede usar un método de muestreo específico.</span><span class="sxs-lookup"><span data-stu-id="b8805-186">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> 

<span data-ttu-id="b8805-187">Los pasos siguientes crean un esquema para los datos de una o varias colecciones mediante el método de asignación de **delimitadores de table**.</span><span class="sxs-lookup"><span data-stu-id="b8805-187">The following steps create a schema for the data in one or more collections using the **table-delimiters** mapping method.</span></span> <span data-ttu-id="b8805-188">Se recomienda usar este método de muestreo cuando las colecciones contengan un tipo heterogéneo de datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-188">We recommend that you use this sampling method when your collections contain heterogeneous type of data.</span></span> <span data-ttu-id="b8805-189">Puede usar este método para limitar el muestreo a un conjunto de atributos y sus valores correspondientes.</span><span class="sxs-lookup"><span data-stu-id="b8805-189">You can use this method to scope the sampling to a set of attributes and its corresponding values.</span></span> <span data-ttu-id="b8805-190">Por ejemplo, si un documento contiene una propiedad "Tipo", puede limitar el muestreo a los valores de esta propiedad.</span><span class="sxs-lookup"><span data-stu-id="b8805-190">For example, if a document contains a “Type” property, you can scope the sampling to the values of this property.</span></span> <span data-ttu-id="b8805-191">El resultado final del muestreo sería un conjunto de tablas para cada uno de los valores para el tipo especificado.</span><span class="sxs-lookup"><span data-stu-id="b8805-191">The end result of the sampling would be a set of tables for each of the values for Type you have specified.</span></span> <span data-ttu-id="b8805-192">Por ejemplo, Tipo = Vehículo generará una tabla de vehículos, mientras que Tipo = Plano generaría una tabla de planos.</span><span class="sxs-lookup"><span data-stu-id="b8805-192">For example, Type = Car will produce a Car table while Type = Plane would produce a Plane table.</span></span>

1. <span data-ttu-id="b8805-193">Después de completar los pasos 1 a 4 de [Conexión a la base de datos de Azure Cosmos DB](#connect), haga clic en **Editor de esquemas** en la ventana Azure Cosmos DB ODBC Driver DSN Setup (Configuración de DSN del controlador ODBC de Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="b8805-193">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the Azure Cosmos DB ODBC Driver DSN Setup window.</span></span>
2. <span data-ttu-id="b8805-194">En la ventana **Editor de esquemas**, haga clic en **Crear nuevo**.</span><span class="sxs-lookup"><span data-stu-id="b8805-194">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="b8805-195">La ventana **Generate Schema** (Generar esquema) muestra todas las colecciones de la cuenta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-195">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="b8805-196">Seleccione una colección en la pestaña **Vista de ejemplo**, en la columna **Mapping Definition** (Definición de asignación) para la colección y haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-196">Select a collection on the **Sample View** tab, in the **Mapping Definition** column for the collection, click **Edit**.</span></span> <span data-ttu-id="b8805-197">A continuación, en la ventana **Mapping Definition** (Definición de asignación), seleccione el método **Table Delimiters** (Delimitadores de tabla).</span><span class="sxs-lookup"><span data-stu-id="b8805-197">Then in the **Mapping Definition** window, select **Table Delimiters** method.</span></span> <span data-ttu-id="b8805-198">A continuación, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8805-198">Then do the following:</span></span>

    <span data-ttu-id="b8805-199">a.</span><span class="sxs-lookup"><span data-stu-id="b8805-199">a.</span></span> <span data-ttu-id="b8805-200">En el cuadro **Atributos**, escriba el nombre de una propiedad de delimitador.</span><span class="sxs-lookup"><span data-stu-id="b8805-200">In the **Attributes** box, type the name of a delimiter property.</span></span> <span data-ttu-id="b8805-201">Se trata de una propiedad del documento a la que desea limitar el ámbito del muestreo, por ejemplo, Ciudad; luego, presione Intro.</span><span class="sxs-lookup"><span data-stu-id="b8805-201">This is a property in your document that you want to scope the sampling to, for instance, City and press enter.</span></span> 

    <span data-ttu-id="b8805-202">b.</span><span class="sxs-lookup"><span data-stu-id="b8805-202">b.</span></span> <span data-ttu-id="b8805-203">Si solo desea definir el ámbito del muestreo a ciertos valores para el atributo que acaba de escribir, seleccione dicho atributo en el cuadro de selección, escriba un valor en el cuadro **Valor** (por ejemplo, Seattle) y presione Intro.</span><span class="sxs-lookup"><span data-stu-id="b8805-203">If you only want to scope the sampling to certain values for the attribute you just entered, select the attribute in the selection box, then enter a value in the **Value** box, for example, Seattle and press enter.</span></span> <span data-ttu-id="b8805-204">Puede seguir agregando más valores para los atributos.</span><span class="sxs-lookup"><span data-stu-id="b8805-204">You can continue to add multiple values for attributes.</span></span> <span data-ttu-id="b8805-205">Solo tiene que asegurarse de que se selecciona el atributo correcto cuando está escribiendo valores.</span><span class="sxs-lookup"><span data-stu-id="b8805-205">Just ensure that the correct attribute is selected when you're entering values.</span></span>

    <span data-ttu-id="b8805-206">Por ejemplo, si incluye Ciudad como un valor de **Atributos** y desea limitar la tabla para incluir solo filas con Nueva York y Dubai como valores de ciudad, tendría que escribir Ciudad en el cuadro Atributos, y Nueva York y luego Dubái en el cuadro **Valores**.</span><span class="sxs-lookup"><span data-stu-id="b8805-206">For example, if you include an **Attributes** value of City, and you want to limit your table to only include rows with a city value of New York and Dubai, you would enter City in the Attributes box, and New York and then Dubai in the **Values** box.</span></span>
4. <span data-ttu-id="b8805-207">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-207">Click **OK**.</span></span> 
5. <span data-ttu-id="b8805-208">Después de completar las definiciones de asignación para las colecciones que desea muestrear, en la ventana **Editor de esquemas**, haga clic en **Ejemplo**.</span><span class="sxs-lookup"><span data-stu-id="b8805-208">After completing the mapping definitions for the collections you want to sample, in the **Schema Editor** window, click **Sample**.</span></span>
     <span data-ttu-id="b8805-209">Para cada columna, puede modificar el nombre SQL de la columna, el tipo de SQL, la longitud SQL (si procede), la escala (si procede), la precisión (si procede) y si acepta valores NULL.</span><span class="sxs-lookup"><span data-stu-id="b8805-209">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="b8805-210">Puede establecer **Ocultar columna** en **true** si desea excluir esa columna de los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="b8805-210">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="b8805-211">Las columnas marcadas con Ocultar columna = true no se devuelven para la selección y proyección, aunque aún forman parte del esquema.</span><span class="sxs-lookup"><span data-stu-id="b8805-211">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="b8805-212">Por ejemplo, puede ocultar todas las propiedades necesarias del sistema de Azure Cosmos DB a partir de “_”.</span><span class="sxs-lookup"><span data-stu-id="b8805-212">For example, you can hide all the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="b8805-213">La columna **identificador** es el único campo que no se puede ocultar, ya que se usa como la clave principal en el esquema normalizado.</span><span class="sxs-lookup"><span data-stu-id="b8805-213">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
6. <span data-ttu-id="b8805-214">Cuando haya terminado de definir el esquema, haga clic en **Archivo** | **Guardar**, navegue hasta el directorio para guardar el esquema y, luego, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-214">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>
7. <span data-ttu-id="b8805-215">De vuelta a la ventana **Azure Cosmos DB ODBC Driver DSN Setup** (Configuración de DSN del controlador ODBC de Azure Cosmos DB), haga clic en **Opciones avanzadas**.</span><span class="sxs-lookup"><span data-stu-id="b8805-215">Back in the **Azure Cosmos DB ODBC Driver DSN Setup** window, click ** Advanced Options**.</span></span> <span data-ttu-id="b8805-216">A continuación, en el cuadro **Archivo de esquema** , navegue hasta el archivo de esquema guardado y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-216">Then, in the **Schema File** box, navigate to the saved schema file and click **OK**.</span></span> <span data-ttu-id="b8805-217">Haga clic en **Aceptar** de nuevo para guardar el DSN.</span><span class="sxs-lookup"><span data-stu-id="b8805-217">Click **OK** again to save the DSN.</span></span> <span data-ttu-id="b8805-218">Esto guarda el esquema que ha creado en el DSN.</span><span class="sxs-lookup"><span data-stu-id="b8805-218">This saves the schema you created to the DSN.</span></span> 

## <a name="optional-creating-views"></a><span data-ttu-id="b8805-219">(Opcional) Creación de vistas</span><span class="sxs-lookup"><span data-stu-id="b8805-219">(Optional) Creating views</span></span>
<span data-ttu-id="b8805-220">Puede definir y crear vistas como parte del proceso de muestreo.</span><span class="sxs-lookup"><span data-stu-id="b8805-220">You can define and create views as part of the sampling process.</span></span> <span data-ttu-id="b8805-221">Estas vistas son equivalentes a las vistas SQL.</span><span class="sxs-lookup"><span data-stu-id="b8805-221">These views are equivalent to SQL views.</span></span> <span data-ttu-id="b8805-222">Son de solo lectura y con el ámbito de las selecciones y proyecciones de SQL de Azure Cosmos DB definido.</span><span class="sxs-lookup"><span data-stu-id="b8805-222">They are read-only and are scope the selections and projections of the Azure Cosmos DB SQL defined.</span></span> 

<span data-ttu-id="b8805-223">Para crear una vista para los datos, en la ventana **Editor de esquemas**, en la columna **View Definitions** (Definiciones de vista), haga clic en **Agregar** en la fila de la colección en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="b8805-223">To create a view for your data, in the **Schema Editor** window, in the **View Definitions** column, click **Add** on the row of the collection to sample.</span></span> <span data-ttu-id="b8805-224">A continuación, en la ventana **View Definitions** (Definiciones de vista), haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8805-224">Then in the **View Definitions** window, do the following:</span></span>
1. <span data-ttu-id="b8805-225">Haga clic en **Nuevo**, escriba un nombre para la vista, por ejemplo, EmployeesfromSeattleView y luego haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-225">Click **New**, enter a name for the view, for example, EmployeesfromSeattleView and then click **OK**.</span></span>
2. <span data-ttu-id="b8805-226">En la ventana **Editar vista**, escriba una consulta de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b8805-226">In the **Edit view** window, enter an Azure Cosmos DB query.</span></span> <span data-ttu-id="b8805-227">Debe tratarse de una consulta SQL de Azure Cosmos DB, por ejemplo`SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”` y, luego, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-227">This must be an Azure Cosmos DB SQL query, for example`SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`, and then click **OK**.</span></span>

<span data-ttu-id="b8805-228">Puede crear tantas vistas como desee.</span><span class="sxs-lookup"><span data-stu-id="b8805-228">You can create a many views as you like.</span></span> <span data-ttu-id="b8805-229">Una vez que haya terminado de definir las vistas, puede muestrear los datos.</span><span class="sxs-lookup"><span data-stu-id="b8805-229">Once you are done defining the views, you can then sample the data.</span></span> 

## <a name="step-5-view-your-data-in-bi-tools-such-as-power-bi-desktop"></a><span data-ttu-id="b8805-230">Paso 5: Visualización de los datos en herramientas de BI como Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="b8805-230">Step 5: View your data in BI tools such as Power BI Desktop</span></span>

<span data-ttu-id="b8805-231">Puede utilizar el nuevo DSN para conectar DocumentADB con cualquier herramienta compatible con ODBC; este paso simplemente muestra cómo conectarse a Power BI Desktop y crear una visualización de Power BI.</span><span class="sxs-lookup"><span data-stu-id="b8805-231">You can use your new DSN to connect DocumentADB with any ODBC-compliant tools - this step simply shows you how to connect to Power BI Desktop and create a Power BI visualization.</span></span>

1. <span data-ttu-id="b8805-232">Abra Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="b8805-232">Open Power BI Desktop.</span></span>
2. <span data-ttu-id="b8805-233">Haga clic en **Obtener datos**.</span><span class="sxs-lookup"><span data-stu-id="b8805-233">Click **Get Data**.</span></span>
3. <span data-ttu-id="b8805-234">En la ventana **Obtener datos**, haga clic en **Otros** | **ODBC** | **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-234">In the **Get Data** window, click **Other** | **ODBC** | **Connect**.</span></span>
4. <span data-ttu-id="b8805-235">En la ventana **Desde ODBC**, seleccione el nombre del origen de datos que ha creado el nombre y luego haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-235">In the **From ODBC** window, select the data source name you created, and then click **OK**.</span></span> <span data-ttu-id="b8805-236">Puede dejar las entradas **Opciones avanzadas** en blanco.</span><span class="sxs-lookup"><span data-stu-id="b8805-236">You can leave the **Advanced Options** entries blank.</span></span>
5. <span data-ttu-id="b8805-237">En la ventana **Acceda a un origen de datos a través de un controlador ODBC**, seleccione **Predeterminado o personalizado** y luego haga clic en **Conectar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-237">In the **Access a data source using an ODBC driver** window, select **Default or Custom** and then click **Connect**.</span></span> <span data-ttu-id="b8805-238">No es necesario incluir **Propiedades de la cadena de conexión de credenciales**.</span><span class="sxs-lookup"><span data-stu-id="b8805-238">You do not need to include the **Credential connection string properties**.</span></span>
6. <span data-ttu-id="b8805-239">En la ventana **Navegador**, en el panel izquierdo, expanda la base de datos, el esquema y luego seleccione la tabla.</span><span class="sxs-lookup"><span data-stu-id="b8805-239">In the **Navigator** window, in the left pane, expand the database, the schema, and then select the table.</span></span> <span data-ttu-id="b8805-240">El panel de resultados incluye los datos que usan el esquema que ha creado.</span><span class="sxs-lookup"><span data-stu-id="b8805-240">The results pane includes the data using the schema you created.</span></span>
7. <span data-ttu-id="b8805-241">Para visualizar los datos en Power BI Desktop, active la casilla junto al nombre de tabla y luego haga clic en **Cargar**.</span><span class="sxs-lookup"><span data-stu-id="b8805-241">To visualize the data in Power BI desktop, check the box in front of the table name, and then click **Load**.</span></span>
8. <span data-ttu-id="b8805-242">En Power BI Desktop, en el extremo izquierdo, seleccione la pestaña Datos</span><span class="sxs-lookup"><span data-stu-id="b8805-242">In Power BI Desktop, on the far left, select the Data tab</span></span> ![Pestaña Datos en Power BI Desktop](./media/odbc-driver/odbc-driver-data-tab.png) <span data-ttu-id="b8805-244">para confirmar que los datos se importaron.</span><span class="sxs-lookup"><span data-stu-id="b8805-244">to confirm your data was imported.</span></span>
9. <span data-ttu-id="b8805-245">Ahora puede crear objetos visuales con Power BI haciendo clic en la pestaña Informe ![Pestaña Informe en Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), haciendo clic en **Nuevo objeto visual** y, por último, personalizando el icono.</span><span class="sxs-lookup"><span data-stu-id="b8805-245">You can now create visuals using Power BI by clicking on the Report tab ![Report tab in Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), clicking **New Visual**, and then customizing your tile.</span></span> <span data-ttu-id="b8805-246">Para más información sobre cómo crear visualizaciones en Power BI Desktop, consulte [Tipos de visualización en Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span><span class="sxs-lookup"><span data-stu-id="b8805-246">For more information about creating visualizations in Power BI Desktop, see [Visualization types in Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="b8805-247">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="b8805-247">Troubleshooting</span></span>

<span data-ttu-id="b8805-248">Si recibe el siguiente error, asegúrese de que los valores de **Host** y **Clave de acceso** copiados de Azure Portal en el [paso 2](#connect) son correctos y luego vuelva a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="b8805-248">If you receive the following error, ensure the **Host** and **Access Key** values you copied the Azure portal in [Step 2](#connect) are correct and then retry.</span></span> <span data-ttu-id="b8805-249">Utilice los botones de copia situados a la derecha de los valores de **Host** y **Clave de acceso** en Azure Portal para copiar los valores sin errores.</span><span class="sxs-lookup"><span data-stu-id="b8805-249">Use the copy buttons to the right of the **Host** and **Access Key** values in the Azure portal to copy the values error free.</span></span>

    [HY000]: [Microsoft][Azure Cosmos DB] (401) HTTP 401 Authentication Error: {"code":"Unauthorized","message":"The input authorization token can't serve the request. Please check that the expected payload is built as per the protocol, and check the key being used. Server used the following payload to sign: 'get\ndbs\n\nfri, 20 jan 2017 03:43:55 gmt\n\n'\r\nActivityId: 9acb3c0d-cb31-4b78-ac0a-413c8d33e373"}`

## <a name="next-steps"></a><span data-ttu-id="b8805-250">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="b8805-250">Next steps</span></span>

<span data-ttu-id="b8805-251">Para más información acerca de Azure Cosmos DB, consulte [¿Qué es Azure Cosmos DB?](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b8805-251">To learn more about Azure Cosmos DB, see [What is Azure Cosmos DB?](introduction.md).</span></span>

---
title: 'Cifrado de bases de datos en reposo: Azure Cosmos DB | Microsoft Docs'
description: "Obtenga información sobre cómo Azure Cosmos DB proporciona cifrado predeterminado de todos los datos."
services: cosmos-db
author: voellm
manager: jhubbard
editor: mimig
documentationcenter: 
ms.assetid: 99725c52-d7ca-4bfa-888b-19b1569754d3
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2017
ms.author: voellm
ms.openlocfilehash: d8967d4504a8ccabb444c7f3d5635e2d00f287c5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-cosmos-db-database-encryption-at-rest"></a><span data-ttu-id="308f9-103">Cifrado de base de datos en reposo en Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="308f9-103">Azure Cosmos DB database encryption at rest</span></span>

<span data-ttu-id="308f9-104">El cifrado en reposo es una frase que se refiere normalmente al cifrado de datos en dispositivos de almacenamiento permanente, como unidades de estado sólido (SSD) y discos duros (HDD).</span><span class="sxs-lookup"><span data-stu-id="308f9-104">Encryption at rest is a phrase that commonly refers to the encryption of data on nonvolatile storage devices, such as solid state drives (SSDs) and hard disk drives (HDDs).</span></span> <span data-ttu-id="308f9-105">Cosmos DB almacena sus bases de datos principales en unidades SSD.</span><span class="sxs-lookup"><span data-stu-id="308f9-105">Cosmos DB stores its primary databases on SSDs.</span></span> <span data-ttu-id="308f9-106">Sus elementos multimedia adjuntos y las copias de seguridad se almacenan en Azure Blob Storage, cuyos archivos de copia de seguridad suelen encontrarse en unidades HDD.</span><span class="sxs-lookup"><span data-stu-id="308f9-106">Its media attachments and backups are stored in Azure Blob storage, which is generally backed up by HDDs.</span></span> <span data-ttu-id="308f9-107">Con el lanzamiento del cifrado en reposo para Cosmos DB, todas las bases de datos, los elementos multimedia adjuntos y las copias de seguridad están cifrados.</span><span class="sxs-lookup"><span data-stu-id="308f9-107">With the release of encryption at rest for Cosmos DB, all your databases, media attachments, and backups are encrypted.</span></span> <span data-ttu-id="308f9-108">Ahora, los datos están cifrados en tránsito (por la red) y en reposo (almacenamiento permanente), lo que le proporciona cifrado de un extremo a otro.</span><span class="sxs-lookup"><span data-stu-id="308f9-108">Your data is now encrypted in transit (over the network) and at rest (nonvolatile storage), giving you end-to-end encryption.</span></span>

<span data-ttu-id="308f9-109">Como servicio de PaaS que es, Cosmos DB es muy sencillo de usar.</span><span class="sxs-lookup"><span data-stu-id="308f9-109">As a PaaS service, Cosmos DB is very easy to use.</span></span> <span data-ttu-id="308f9-110">Dato que todos los datos de usuario almacenados en Cosmos DB están cifrados en reposo y en tránsito, no es necesario hacer nada.</span><span class="sxs-lookup"><span data-stu-id="308f9-110">Because all user data stored in Cosmos DB is encrypted at rest and in transport, you don't have to take any action.</span></span> <span data-ttu-id="308f9-111">Otra forma de decirlo es que el cifrado en reposo está "activado" de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="308f9-111">Another way to put this is that encryption at rest is "on" by default.</span></span> <span data-ttu-id="308f9-112">No hay ningún mando para activarlo o desactivarlo.</span><span class="sxs-lookup"><span data-stu-id="308f9-112">There are no controls to turn it off or on.</span></span> <span data-ttu-id="308f9-113">Ofrecemos esta característica a la vez que continuamos cumpliendo con nuestros [Acuerdos de Nivel de Servicio con respecto a disponibilidad y rendimiento](https://azure.microsoft.com/support/legal/sla/cosmos-db).</span><span class="sxs-lookup"><span data-stu-id="308f9-113">We provide this feature while we continue to meet our [availability and performance SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db).</span></span>

## <a name="implement-encryption-at-rest"></a><span data-ttu-id="308f9-114">Implementación de cifrado en reposo</span><span class="sxs-lookup"><span data-stu-id="308f9-114">Implement encryption at rest</span></span>

<span data-ttu-id="308f9-115">El cifrado en reposo se implementa mediante una serie de tecnologías de seguridad, como sistemas seguros de almacenamiento de claves, redes cifradas y API criptográficas.</span><span class="sxs-lookup"><span data-stu-id="308f9-115">Encryption at rest is implemented by using a number of security technologies, including secure key storage systems, encrypted networks, and cryptographic APIs.</span></span> <span data-ttu-id="308f9-116">Los sistemas que descifran y procesan datos tienen que comunicarse con los sistemas que administran claves.</span><span class="sxs-lookup"><span data-stu-id="308f9-116">Systems that decrypt and process data have to communicate with systems that manage keys.</span></span> <span data-ttu-id="308f9-117">En el diagrama se muestra cómo se separan el almacenamiento de datos cifrados y la administración de claves.</span><span class="sxs-lookup"><span data-stu-id="308f9-117">The diagram shows how storage of encrypted data and the management of keys is separated.</span></span> 

![Diagrama de diseño](./media/database-encryption-at-rest/design-diagram.png)

<span data-ttu-id="308f9-119">El flujo básico de una solicitud de usuario es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="308f9-119">The basic flow of a user request is as follows:</span></span>
- <span data-ttu-id="308f9-120">La cuenta de la base de datos del usuario se prepara y las claves de almacenamiento se recuperan a través de una solicitud al proveedor de recursos del servicio de administración.</span><span class="sxs-lookup"><span data-stu-id="308f9-120">The user database account is made ready, and storage keys are retrieved via a request to the Management Service Resource Provider.</span></span>
- <span data-ttu-id="308f9-121">Un usuario crea una conexión a Cosmos DB a través de HTTPS o transporte seguro.</span><span class="sxs-lookup"><span data-stu-id="308f9-121">A user creates a connection to Cosmos DB via HTTPS/secure transport.</span></span> <span data-ttu-id="308f9-122">(En los SDK se incluye una breve descripción al respecto).</span><span class="sxs-lookup"><span data-stu-id="308f9-122">(The SDKs abstract the details.)</span></span>
- <span data-ttu-id="308f9-123">El usuario envía un documento JSON para almacenarlo a través de la conexión segura creada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="308f9-123">The user sends a JSON document to be stored over the previously created secure connection.</span></span>
- <span data-ttu-id="308f9-124">El documento JSON se indexa a menos que el usuario haya desactivado la indexación.</span><span class="sxs-lookup"><span data-stu-id="308f9-124">The JSON document is indexed unless the user has turned off indexing.</span></span>
- <span data-ttu-id="308f9-125">Tanto el documento JSON como los datos de índice se escriben en un almacenamiento seguro.</span><span class="sxs-lookup"><span data-stu-id="308f9-125">Both the JSON document and index data are written to secure storage.</span></span>
- <span data-ttu-id="308f9-126">Los datos se leen periódicamente desde el almacenamiento seguro y se realiza una copia de seguridad de ellos en el almacén de blobs cifrado de Azure.</span><span class="sxs-lookup"><span data-stu-id="308f9-126">Periodically, data is read from the secure storage and backed up to the Azure Encrypted Blob Store.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="308f9-127">Preguntas más frecuentes</span><span class="sxs-lookup"><span data-stu-id="308f9-127">Frequently asked questions</span></span>

### <a name="q-how-much-more-does-azure-storage-cost-if-storage-service-encryption-is-enabled"></a><span data-ttu-id="308f9-128">P: ¿Cuánto aumenta el costo de Azure Storage si se habilita el cifrado del servicio Storage?</span><span class="sxs-lookup"><span data-stu-id="308f9-128">Q: How much more does Azure Storage cost if Storage Service Encryption is enabled?</span></span>
<span data-ttu-id="308f9-129">R: No hay costo adicional.</span><span class="sxs-lookup"><span data-stu-id="308f9-129">A: There is no additional cost.</span></span>

### <a name="q-who-manages-the-encryption-keys"></a><span data-ttu-id="308f9-130">P: ¿Quién administra las claves de cifrado?</span><span class="sxs-lookup"><span data-stu-id="308f9-130">Q: Who manages the encryption keys?</span></span>
<span data-ttu-id="308f9-131">R: Las administra Microsoft.</span><span class="sxs-lookup"><span data-stu-id="308f9-131">A: The keys are managed by Microsoft.</span></span>

### <a name="q-how-often-are-encryption-keys-rotated"></a><span data-ttu-id="308f9-132">P: ¿Con qué frecuencia se alternan las claves de cifrado?</span><span class="sxs-lookup"><span data-stu-id="308f9-132">Q: How often are encryption keys rotated?</span></span>
<span data-ttu-id="308f9-133">R: Microsoft cuenta con un conjunto de directrices internas para la rotación de claves de cifrado y Cosmos DB las sigue.</span><span class="sxs-lookup"><span data-stu-id="308f9-133">A: Microsoft has a set of internal guidelines for encryption key rotation, which Cosmos DB follows.</span></span> <span data-ttu-id="308f9-134">Estas directrices específicas no se han publicado.</span><span class="sxs-lookup"><span data-stu-id="308f9-134">The specific guidelines are not published.</span></span> <span data-ttu-id="308f9-135">Microsoft sí que publica el [Ciclo de vida de desarrollo de seguridad (SDL) de Microsoft](https://www.microsoft.com/sdl/default.aspx), que se considera un subconjunto de orientaciones internas e incluye procedimientos recomendados para desarrolladores de gran utilidad.</span><span class="sxs-lookup"><span data-stu-id="308f9-135">Microsoft does publish the [Security Development Lifecycle (SDL)](https://www.microsoft.com/sdl/default.aspx), which is seen as a subset of internal guidance and has useful best practices for developers.</span></span>

### <a name="q-can-i-use-my-own-encryption-keys"></a><span data-ttu-id="308f9-136">P: ¿Puedo usar mis propias claves de cifrado?</span><span class="sxs-lookup"><span data-stu-id="308f9-136">Q: Can I use my own encryption keys?</span></span>
<span data-ttu-id="308f9-137">R: Cosmos DB es un servicio de PaaS y se ha trabajado mucho para que siga siendo fácil de usar.</span><span class="sxs-lookup"><span data-stu-id="308f9-137">A: Cosmos DB is a PaaS service, and we worked hard to keep the service easy to use.</span></span> <span data-ttu-id="308f9-138">Se ha observado que esta pregunta suele plantearse en relación con proxys y con la satisfacción de algún requisito de conformidad, como PCI DSS.</span><span class="sxs-lookup"><span data-stu-id="308f9-138">We've noticed this question is often asked as a proxy question for meeting a compliance requirement like PCI-DSS.</span></span> <span data-ttu-id="308f9-139">Como parte de la compilación de esta característica, se colaboró con auditores de conformidad normativa para garantizar que los clientes que usen Cosmos DB cumplan sus requisitos sin tener que administrar las claves por ellos mismos.</span><span class="sxs-lookup"><span data-stu-id="308f9-139">As part of building this feature, we worked with compliance auditors to ensure that customers who use Cosmos DB meet their requirements without the need to manage keys themselves.</span></span>
<span data-ttu-id="308f9-140">Por esta razón, que actualmente no permitimos a los usuarios la opción de encargarse ellos mismos de la administración de claves.</span><span class="sxs-lookup"><span data-stu-id="308f9-140">As a result, we currently do not offer users the option to burden themselves with key management.</span></span>

### <a name="q-what-regions-have-encryption-turned-on"></a><span data-ttu-id="308f9-141">P: ¿Qué regiones tienen activado el cifrado?</span><span class="sxs-lookup"><span data-stu-id="308f9-141">Q: What regions have encryption turned on?</span></span>
<span data-ttu-id="308f9-142">R: Todas las regiones de Azure Cosmos DB tienen activado el cifrado de todos los datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="308f9-142">A: All Azure Cosmos DB regions have encryption turned on for all user data.</span></span>

### <a name="q-does-encryption-affect-the-performance-latency-and-throughput-slas"></a><span data-ttu-id="308f9-143">P: ¿Afecta el cifrado a los Acuerdos de Nivel de Servicio de rendimiento y de latencia del rendimiento?</span><span class="sxs-lookup"><span data-stu-id="308f9-143">Q: Does encryption affect the performance latency and throughput SLAs?</span></span>
<span data-ttu-id="308f9-144">R: No hay ningún impacto ni cambios en el rendimiento de los Acuerdos de Nivel de Servicio ahora que está habilitado el cifrado en reposo para todas las cuentas nuevas y existentes.</span><span class="sxs-lookup"><span data-stu-id="308f9-144">A: There is no impact or changes to the performance SLAs now that encryption at rest is enabled for all existing and new accounts.</span></span> <span data-ttu-id="308f9-145">Puede leer más sobre la página del [Acuerdo de Nivel de Servicio de Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db) para consultar las garantías más recientes.</span><span class="sxs-lookup"><span data-stu-id="308f9-145">You can read more on the [SLA for Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db) page to see the latest guarantees.</span></span>

### <a name="q-does-the-local-emulator-support-encryption-at-rest"></a><span data-ttu-id="308f9-146">P: ¿Admite el emulador local admite el cifrado en reposo?</span><span class="sxs-lookup"><span data-stu-id="308f9-146">Q: Does the local emulator support encryption at rest?</span></span>
<span data-ttu-id="308f9-147">R: El emulador es una herramienta de desarrollo o prueba independiente y no emplea los servicios de administración de claves que usa el servicio de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="308f9-147">A: The emulator is a standalone dev/test tool and does not use the key management services that the managed Cosmos DB service uses.</span></span> <span data-ttu-id="308f9-148">Nuestra recomendación es habilitar BitLocker en aquellas unidades de disco donde se almacenan los datos de prueba del emulador confidenciales.</span><span class="sxs-lookup"><span data-stu-id="308f9-148">Our recommendation is to enable BitLocker on drives where you are storing sensitive emulator test data.</span></span> <span data-ttu-id="308f9-149">El [emulador admite los cambios de directorio de datos predeterminado](local-emulator.md), así como el uso de una ubicación conocida.</span><span class="sxs-lookup"><span data-stu-id="308f9-149">The [emulator supports changing the default data directory](local-emulator.md) as well as using a well-known location.</span></span>

## <a name="next-steps"></a><span data-ttu-id="308f9-150">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="308f9-150">Next steps</span></span>

<span data-ttu-id="308f9-151">Para obtener información general sobre la seguridad y las últimas mejoras de Cosmos DB, consulte [Seguridad de base de datos de Azure Cosmos DB](database-security.md).</span><span class="sxs-lookup"><span data-stu-id="308f9-151">For an overview of Cosmos DB security and the latest improvements, see [Azure Cosmos DB database security](database-security.md).</span></span>
<span data-ttu-id="308f9-152">Para obtener más información sobre las certificaciones de Microsoft, visite el [Centro de confianza de Azure](https://azure.microsoft.com/en-us/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="308f9-152">For more information about Microsoft certifications, see the [Azure Trust Center](https://azure.microsoft.com/en-us/support/trust-center/).</span></span>

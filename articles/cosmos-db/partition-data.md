---
title: aaaPartitioning y escalado horizontal en la base de datos de Azure Cosmos | Documentos de Microsoft
description: "Obtenga información acerca de cómo funciona la creación de particiones en la base de datos de Azure Cosmos, cómo tooconfigure particiones y las claves de partición, y cómo toopick Hola derecha clave de partición para la aplicación."
services: cosmos-db
author: arramac
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: cac9a8cd-b5a3-4827-8505-d40bb61b2416
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: arramac
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 87d56db8c4ccc6b94b1650baff0fcfb3db6d1777
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-toopartition-and-scale-in-azure-cosmos-db"></a><span data-ttu-id="2c40c-103">¿Cómo toopartition y la escala en la base de datos de Azure Cosmos</span><span class="sxs-lookup"><span data-stu-id="2c40c-103">How toopartition and scale in Azure Cosmos DB</span></span>

<span data-ttu-id="2c40c-104">[Base de datos de Microsoft Azure Cosmos](https://azure.microsoft.com/services/cosmos-db/) es un toohelp de servicio diseñado de base de datos distribuida, varios modelos global, obtendrá rendimiento rápido y predecible y escalabilidad sin problemas junto con la aplicación que se incremente.</span><span class="sxs-lookup"><span data-stu-id="2c40c-104">[Microsoft Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a global distributed, multi-model database service designed toohelp you achieve fast, predictable performance and scale seamlessly along with your application as it grows.</span></span> <span data-ttu-id="2c40c-105">Este artículo proporciona información general sobre cómo las particiones funcionan para todos los datos de hello los modelos de base de datos de Azure Cosmos y describen cómo puede configurar el escalado de base de datos de Azure Cosmos contenedores tooeffectively sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-105">This article provides an overview of how partitioning works for all hello data models in Azure Cosmos DB, and describes how you can configure Azure Cosmos DB containers tooeffectively scale your applications.</span></span>

<span data-ttu-id="2c40c-106">Las particiones y las claves de partición también se explican en este vídeo de Azure Friday con Scott Hanselman y Shireesh Thota, Administrador de ingeniería principal de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2c40c-106">Partitioning and partition keys are also covered in this Azure Friday video with Scott Hanselman and Azure Cosmos DB Principal Engineering Manager, Shireesh Thota.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Azure-Friday/Azure-DocumentDB-Elastic-Scale-Partitioning/player]
> 

## <a name="partitioning-in-azure-cosmos-db"></a><span data-ttu-id="2c40c-107">Creación de particiones en Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2c40c-107">Partitioning in Azure Cosmos DB</span></span>
<span data-ttu-id="2c40c-108">Azure Cosmos DB permite almacenar y consultar datos sin esquemas con un tiempo de respuesta de milisegundos y a cualquier escala.</span><span class="sxs-lookup"><span data-stu-id="2c40c-108">In Azure Cosmos DB, you can store and query schema-less data with order-of-millisecond response times at any scale.</span></span> <span data-ttu-id="2c40c-109">Cosmos DB proporciona contenedores para el almacenamiento de datos llamados **colecciones (para el documento), grafos o tablas**.</span><span class="sxs-lookup"><span data-stu-id="2c40c-109">Cosmos DB provides containers for storing data called **collections (for document), graphs, or tables**.</span></span> <span data-ttu-id="2c40c-110">Los contenedores son recursos lógicos y pueden abarcar uno o varios servidores o particiones físicos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-110">Containers are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="2c40c-111">número de Hola de particiones viene determinado por la base de datos de Cosmos según el tamaño de almacenamiento de Hola y rendimiento aprovisionado de Hola de contenedor de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-111">hello number of partitions is determined by Cosmos DB based on hello storage size and hello provisioned throughput of hello container.</span></span> <span data-ttu-id="2c40c-112">Todas las particiones de Cosmos DB tienen una cantidad fija de almacenamiento con respaldo SSD asociado y se replican para ofrecer una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="2c40c-112">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="2c40c-113">Administración de particiones es completamente administrado por base de datos de Azure Cosmos y no tiene un código complejo toowrite o administrar las particiones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-113">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="2c40c-114">Los contenedores de Cosmos DB son ilimitados en términos de almacenamiento y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="2c40c-114">Cosmos DB containers are unlimited in terms of storage and throughput.</span></span> 

![horizontal](./media/introduction/azure-cosmos-db-partitioning.png) 

<span data-ttu-id="2c40c-116">Creación de particiones es una aplicación tooyour transparente.</span><span class="sxs-lookup"><span data-stu-id="2c40c-116">Partitioning is transparent tooyour application.</span></span> <span data-ttu-id="2c40c-117">COSMOS DB admite rápidas lecturas y escrituras, consultas, la lógica transaccional, niveles de coherencia y control de acceso específico a través de recursos de métodos y API tooa único contenedor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-117">Cosmos DB supports fast reads and writes, queries, transactional logic, consistency levels, and fine-grained access control via methods/APIs tooa single container resource.</span></span> <span data-ttu-id="2c40c-118">identificadores de servicio de Hello, distribuir los datos entre particiones y el enrutamiento de partición correcta de toohello de solicitudes de consulta.</span><span class="sxs-lookup"><span data-stu-id="2c40c-118">hello service handles distributing data across partitions and routing query requests toohello right partition.</span></span> 

<span data-ttu-id="2c40c-119">¿Cómo funciona la creación de particiones?</span><span class="sxs-lookup"><span data-stu-id="2c40c-119">How does partitioning work?</span></span> <span data-ttu-id="2c40c-120">Cada elemento debe tener una clave de partición y una clave de fila que lo identifiquen de forma única.</span><span class="sxs-lookup"><span data-stu-id="2c40c-120">Each item must have a partition key and a row key, which uniquely identify it.</span></span> <span data-ttu-id="2c40c-121">La clave de partición ejerce de partición lógica para sus datos y proporciona a Cosmos DB un límite natural para distribuir datos entre las particiones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-121">Your partition key acts as a logical partition for your data, and provides Cosmos DB with a natural boundary for distributing data across partitions.</span></span> <span data-ttu-id="2c40c-122">En resumen, la creación de particiones funciona en Azure Cosmos DB de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="2c40c-122">In brief, here is how partitioning works in Azure Cosmos DB:</span></span>

* <span data-ttu-id="2c40c-123">Usted aprovisiona un contenedor de Cosmos DB con el rendimiento de las solicitudes/s `T`</span><span class="sxs-lookup"><span data-stu-id="2c40c-123">You provision a Cosmos DB container with `T` requests/s throughput</span></span>
* <span data-ttu-id="2c40c-124">Entre bastidores de hello, las particiones de las disposiciones de Cosmos DB necesarios tooserve `T` solicitudes/s.</span><span class="sxs-lookup"><span data-stu-id="2c40c-124">Behind hello scenes, Cosmos DB provisions partitions needed tooserve `T` requests/s.</span></span> <span data-ttu-id="2c40c-125">Si `T` es mayor que el rendimiento máximo por partición hello `t`, a continuación, las disposiciones de Cosmos DB `N`  =  `T/t` particiones</span><span class="sxs-lookup"><span data-stu-id="2c40c-125">If `T` is higher than hello maximum throughput per partition `t`, then Cosmos DB provisions `N` = `T/t` partitions</span></span>
* <span data-ttu-id="2c40c-126">COSMOS DB asigna Hola clave espacio de partición hashes claves uniformemente a través de hello `N` particiones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-126">Cosmos DB allocates hello key space of partition key hashes evenly across hello `N` partitions.</span></span> <span data-ttu-id="2c40c-127">De este modo, cada partición (partición física) hospeda valores de clave de partición 1-N (particiones lógicas)</span><span class="sxs-lookup"><span data-stu-id="2c40c-127">So, each partition (physical partition) hosts 1-N partition key values (logical partitions)</span></span>
* <span data-ttu-id="2c40c-128">Cuando una partición física `p` alcanza su límite de almacenamiento, DB Cosmos perfectamente divide `p` en dos nuevas particiones `p1` y `p2` y distribuye valores correspondientes tooroughly mitad Hola claves tooeach de hello particiones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-128">When a physical partition `p` reaches its storage limit, Cosmos DB seamlessly splits `p` into two new partitions `p1` and `p2` and distributes values corresponding tooroughly half hello keys tooeach of hello partitions.</span></span> <span data-ttu-id="2c40c-129">Esta operación de división es invisible tooyour aplicación.</span><span class="sxs-lookup"><span data-stu-id="2c40c-129">This split operation is invisible tooyour application.</span></span>
* <span data-ttu-id="2c40c-130">De forma similar, cuando se aprovisiona rendimiento superior `t*N` rendimiento, base de datos de Cosmos divide una o varias de su particiones toosupport Hola un rendimiento mayor</span><span class="sxs-lookup"><span data-stu-id="2c40c-130">Similarly, when you provision throughput higher than `t*N` throughput, Cosmos DB splits one or more of your partitions toosupport hello higher throughput</span></span>

<span data-ttu-id="2c40c-131">semántica de Hola para las claves de partición es la semántica de hello toomatch ligeramente diferente de cada API, como se muestra en hello en la tabla siguiente:</span><span class="sxs-lookup"><span data-stu-id="2c40c-131">hello semantics for partition keys are slightly different toomatch hello semantics of each API, as shown in hello following table:</span></span>

| <span data-ttu-id="2c40c-132">API</span><span class="sxs-lookup"><span data-stu-id="2c40c-132">API</span></span> | <span data-ttu-id="2c40c-133">Partition Key</span><span class="sxs-lookup"><span data-stu-id="2c40c-133">Partition Key</span></span> | <span data-ttu-id="2c40c-134">Row Key</span><span class="sxs-lookup"><span data-stu-id="2c40c-134">Row Key</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2c40c-135">DocumentDB</span><span class="sxs-lookup"><span data-stu-id="2c40c-135">DocumentDB</span></span> | <span data-ttu-id="2c40c-136">ruta de acceso de clave de partición personalizada</span><span class="sxs-lookup"><span data-stu-id="2c40c-136">custom partition key path</span></span> | <span data-ttu-id="2c40c-137">`id` fija</span><span class="sxs-lookup"><span data-stu-id="2c40c-137">fixed `id`</span></span> | 
| <span data-ttu-id="2c40c-138">MongoDB</span><span class="sxs-lookup"><span data-stu-id="2c40c-138">MongoDB</span></span> | <span data-ttu-id="2c40c-139">clave de partición personalizada</span><span class="sxs-lookup"><span data-stu-id="2c40c-139">custom shard key</span></span>  | <span data-ttu-id="2c40c-140">`_id` fija</span><span class="sxs-lookup"><span data-stu-id="2c40c-140">fixed `_id`</span></span> | 
| <span data-ttu-id="2c40c-141">Grafo</span><span class="sxs-lookup"><span data-stu-id="2c40c-141">Graph</span></span> | <span data-ttu-id="2c40c-142">propiedad de clave de partición personalizada</span><span class="sxs-lookup"><span data-stu-id="2c40c-142">custom partition key property</span></span> | <span data-ttu-id="2c40c-143">`id` fija</span><span class="sxs-lookup"><span data-stu-id="2c40c-143">fixed `id`</span></span> | 
| <span data-ttu-id="2c40c-144">Tabla</span><span class="sxs-lookup"><span data-stu-id="2c40c-144">Table</span></span> | <span data-ttu-id="2c40c-145">`PartitionKey` fija</span><span class="sxs-lookup"><span data-stu-id="2c40c-145">fixed `PartitionKey`</span></span> | <span data-ttu-id="2c40c-146">`RowKey` fija</span><span class="sxs-lookup"><span data-stu-id="2c40c-146">fixed `RowKey`</span></span> | 

<span data-ttu-id="2c40c-147">Cosmos DB usa la creación de particiones basada en hash.</span><span class="sxs-lookup"><span data-stu-id="2c40c-147">Cosmos DB uses hash-based partitioning.</span></span> <span data-ttu-id="2c40c-148">Cuando se escribe un elemento, Cosmos DB aplica un algoritmo hash de valor de clave de partición de Hola y Hola de uso valor hash resultado toodetermine qué elemento de partición toostore hello en.</span><span class="sxs-lookup"><span data-stu-id="2c40c-148">When you write an item, Cosmos DB hashes hello partition key value and use hello hashed result toodetermine which partition toostore hello item in.</span></span> <span data-ttu-id="2c40c-149">Hola a todos los elementos con misma clave de partición en los almacenes COSMOS DB Hola misma partición física.</span><span class="sxs-lookup"><span data-stu-id="2c40c-149">Cosmos DB stores all items with hello same partition key in hello same physical partition.</span></span> <span data-ttu-id="2c40c-150">elección de Hola de clave de partición de hello es una decisión importante que se están toomake en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="2c40c-150">hello choice of hello partition key is an important decision that you have toomake at design time.</span></span> <span data-ttu-id="2c40c-151">Debe elegir un nombre de propiedad que tenga una amplia gama de valores e incluso patrones de acceso.</span><span class="sxs-lookup"><span data-stu-id="2c40c-151">You must pick a property name that has a wide range of values and has even access patterns.</span></span>

> [!NOTE]
> <span data-ttu-id="2c40c-152">Es un toohave de práctica recomendada una clave de partición con muchos valores distintos (100s 1000s como mínimo).</span><span class="sxs-lookup"><span data-stu-id="2c40c-152">It is a best practice toohave a partition key with many distinct values (100s-1000s at a minimum).</span></span>
>

<span data-ttu-id="2c40c-153">Los contenedores de Azure Cosmos DB se pueden crear como "fijos" o "ilimitados".</span><span class="sxs-lookup"><span data-stu-id="2c40c-153">Azure Cosmos DB containers can be created as "fixed" or "unlimited."</span></span> <span data-ttu-id="2c40c-154">Los contenedores de tamaño fijo tienen un límite máximo de 10 GB y un rendimiento de 10 000 RU/s.</span><span class="sxs-lookup"><span data-stu-id="2c40c-154">Fixed-size containers have a maximum limit of 10 GB and 10,000 RU/s throughput.</span></span> <span data-ttu-id="2c40c-155">Algunas API permiten toobe de clave de partición de Hola se omite para los contenedores de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="2c40c-155">Some APIs allow hello partition key toobe omitted for fixed-size containers.</span></span> <span data-ttu-id="2c40c-156">toocreate un contenedor como ilimitado, debe especificar un rendimiento mínimo de 2500 RU/s.</span><span class="sxs-lookup"><span data-stu-id="2c40c-156">toocreate a container as unlimited, you must specify a minimum throughput of 2500 RU/s.</span></span>

## <a name="partitioning-and-provisioned-throughput"></a><span data-ttu-id="2c40c-157">Creación de particiones y procesamiento aprovisionado</span><span class="sxs-lookup"><span data-stu-id="2c40c-157">Partitioning and provisioned throughput</span></span>
<span data-ttu-id="2c40c-158">Cosmos DB se ha diseñado para ofrecer un rendimiento predecible.</span><span class="sxs-lookup"><span data-stu-id="2c40c-158">Cosmos DB is designed for predictable performance.</span></span> <span data-ttu-id="2c40c-159">Al crear un contenedor, reserva rendimiento en términos de **[unidades de solicitud](request-units.md) (RU) por segundo con un complemento potencial para RU por minuto**.</span><span class="sxs-lookup"><span data-stu-id="2c40c-159">When you create a container, you reserve throughput in terms of **[request units](request-units.md) (RU) per second with a potential add-on for RU per minute**.</span></span> <span data-ttu-id="2c40c-160">Cada solicitud se asigna un cargo de unidad de solicitud es proporcional toohello cantidad de recursos del sistema como CPU, memoria y E/S consumidas por operación Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-160">Each request is assigned a request unit charge that is proportionate toohello amount of system resources like CPU, Memory, and IO consumed by hello operation.</span></span> <span data-ttu-id="2c40c-161">Una lectura de un documento de 1 KB con coherencia de sesión consume una unidad de solicitud.</span><span class="sxs-lookup"><span data-stu-id="2c40c-161">A read of a 1-KB document with Session consistency consumes one request unit.</span></span> <span data-ttu-id="2c40c-162">Una lectura es 1 RU independientemente del número de Hola de elementos almacenados u Hola número de solicitudes simultáneas que se ejecutan en hello mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="2c40c-162">A read is 1 RU regardless of hello number of items stored or hello number of concurrent requests running at hello same time.</span></span> <span data-ttu-id="2c40c-163">Los elementos de mayor requieren mayor unidades de solicitud según el tamaño de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-163">Larger items require higher request units depending on hello size.</span></span> <span data-ttu-id="2c40c-164">Si conoce el tamaño de Hola de las entidades y Hola número de lecturas deberá toosupport para la aplicación, puede aprovisionar la cantidad exacta de Hola de rendimiento necesario para la aplicación de leer las necesidades.</span><span class="sxs-lookup"><span data-stu-id="2c40c-164">If you know hello size of your entities and hello number of reads you need toosupport for your application, you can provision hello exact amount of throughput required for your application's read needs.</span></span> 

> [!NOTE]
> <span data-ttu-id="2c40c-165">rendimiento total de Hola de tooachieve del contenedor de hello, debe elegir una clave de partición que le permite tooevenly distribuir las solicitudes entre algunos valores de clave de partición distintos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-165">tooachieve hello full throughput of hello container, you must choose a partition key that allows you tooevenly distribute requests among some distinct partition key values.</span></span>
> 
> 

<a name="designing-for-partitioning"></a>
## <a name="working-with-hello-azure-cosmos-db-apis"></a><span data-ttu-id="2c40c-166">Trabajar con las API de base de datos de Azure Cosmos Hola</span><span class="sxs-lookup"><span data-stu-id="2c40c-166">Working with hello Azure Cosmos DB APIs</span></span>
<span data-ttu-id="2c40c-167">Puede usar Hola portal de Azure o contenedores de toocreate de CLI de Azure y escalarlos en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="2c40c-167">You can use hello Azure portal or Azure CLI toocreate containers and scale them at any time.</span></span> <span data-ttu-id="2c40c-168">Esta sección se muestra cómo los contenedores toocreate y especifique Hola rendimiento y la partición de definición de clave en cada uno de hello API admitidas.</span><span class="sxs-lookup"><span data-stu-id="2c40c-168">This section shows how toocreate containers and specify hello throughput and partition key definition in each of hello supported APIs.</span></span>

### <a name="documentdb-api"></a><span data-ttu-id="2c40c-169">DocumentDB API</span><span class="sxs-lookup"><span data-stu-id="2c40c-169">DocumentDB API</span></span>
<span data-ttu-id="2c40c-170">Hola siguiente ejemplo muestra cómo toocreate un contenedor (colección) mediante Hola API de documentos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-170">hello following sample shows how toocreate a container (collection) using hello DocumentDB API.</span></span> <span data-ttu-id="2c40c-171">Puede encontrar más información en [Creación de particiones con API de DocumentDB](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="2c40c-171">You can find more details in [Partitioning with DocumentDB API](partition-data.md).</span></span>

```csharp
DocumentClient client = new DocumentClient(new Uri(endpoint), authKey);
await client.CreateDatabaseAsync(new Database { Id = "db" });

DocumentCollection myCollection = new DocumentCollection();
myCollection.Id = "coll";
myCollection.PartitionKey.Paths.Add("/deviceId");

await client.CreateDocumentCollectionAsync(
    UriFactory.CreateDatabaseUri("db"),
    myCollection,
    new RequestOptions { OfferThroughput = 20000 });
```

<span data-ttu-id="2c40c-172">Puede leer un elemento (documento) con hello `GET` método hello API de REST o utilizando `ReadDocumentAsync` en uno de hello SDK.</span><span class="sxs-lookup"><span data-stu-id="2c40c-172">You can read an item (document) using hello `GET` method in hello REST API or using `ReadDocumentAsync` in one of hello SDKs.</span></span>

```csharp
// Read document. Needs hello partition key and hello ID toobe specified
DeviceReading document = await client.ReadDocumentAsync<DeviceReading>(
  UriFactory.CreateDocumentUri("db", "coll", "XMS-001-FE24C"), 
  new RequestOptions { PartitionKey = new PartitionKey("XMS-0001") });
```

### <a name="mongodb-api"></a><span data-ttu-id="2c40c-173">MongoDB API</span><span class="sxs-lookup"><span data-stu-id="2c40c-173">MongoDB API</span></span>
<span data-ttu-id="2c40c-174">Con API de MongoDB hello, puede crear una colección particionada a través de la herramienta que prefiera, el controlador o el SDK.</span><span class="sxs-lookup"><span data-stu-id="2c40c-174">With hello MongoDB API, you can create a sharded collection through your favorite tool, driver, or SDK.</span></span> <span data-ttu-id="2c40c-175">En este ejemplo, utilizamos Hola Shell de Mongo para la creación de la colección de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-175">In this example, we use hello Mongo Shell for hello collection creation.</span></span>

<span data-ttu-id="2c40c-176">Hola Shell de Mongo:</span><span class="sxs-lookup"><span data-stu-id="2c40c-176">In hello Mongo Shell:</span></span>

```
db.runCommand( { shardCollection: "admin.people", key: { region: "hashed" } } )
```
    
<span data-ttu-id="2c40c-177">Resultados:</span><span class="sxs-lookup"><span data-stu-id="2c40c-177">Results:</span></span>

```JSON
{
    "_t" : "ShardCollectionResponse",
    "ok" : 1,
    "collectionsharded" : "admin.people"
}
```

### <a name="table-api"></a><span data-ttu-id="2c40c-178">Table API</span><span class="sxs-lookup"><span data-stu-id="2c40c-178">Table API</span></span>

<span data-ttu-id="2c40c-179">Con hello API de tabla, debe especificar para tablas de rendimiento de hello en configuración de appSettings de hello para la aplicación:</span><span class="sxs-lookup"><span data-stu-id="2c40c-179">With hello Table API, you specify hello throughput for tables in hello appSettings configuration for your application:</span></span>

```xml
<configuration>
    <appSettings>
      <!--Table creation options -->
      <add key="TableThroughput" value="700"/>
    </appSettings>
</configuration>
```

<span data-ttu-id="2c40c-180">A continuación, crear una tabla mediante el SDK de almacenamiento de tabla de Azure Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-180">Then you create a table using hello Azure Table storage SDK.</span></span> <span data-ttu-id="2c40c-181">clave de partición de Hola se crea implícitamente como hello `PartitionKey` valor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-181">hello partition key is implicitly created as hello `PartitionKey` value.</span></span> 

```csharp
CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

CloudTable table = tableClient.GetTableReference("people");
table.CreateIfNotExists();
```

<span data-ttu-id="2c40c-182">Puede recuperar una sola entidad con el siguiente fragmento de código de hello:</span><span class="sxs-lookup"><span data-stu-id="2c40c-182">You can retrieve a single entity using hello following snippet:</span></span>

```csharp
// Create a retrieve operation that takes a customer entity.
TableOperation retrieveOperation = TableOperation.Retrieve<CustomerEntity>("Smith", "Ben");

// Execute hello retrieve operation.
TableResult retrievedResult = table.Execute(retrieveOperation);
```
<span data-ttu-id="2c40c-183">Vea [desarrollar con hello tabla API](tutorial-develop-table-dotnet.md) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="2c40c-183">See [Developing with hello Table API](tutorial-develop-table-dotnet.md) for more details.</span></span>

### <a name="graph-api"></a><span data-ttu-id="2c40c-184">API Graph</span><span class="sxs-lookup"><span data-stu-id="2c40c-184">Graph API</span></span>

<span data-ttu-id="2c40c-185">Con hello API Graph, debe usar Hola portal de Azure o contenedores de toocreate CLI.</span><span class="sxs-lookup"><span data-stu-id="2c40c-185">With hello Graph API, you must use hello Azure portal or CLI toocreate containers.</span></span> <span data-ttu-id="2c40c-186">O bien, puesto que la base de datos de Azure Cosmos es varios modelo, puede usar uno de hello otro toocreate de modelos y escalar el contenedor de gráficos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-186">Alternatively, since Azure Cosmos DB is multi-model, you can use one of hello other models toocreate and scale your graph container.</span></span>

<span data-ttu-id="2c40c-187">Puede leer cualquier vértice o borde con clave de partición de Hola y el identificador en Gremlin.</span><span class="sxs-lookup"><span data-stu-id="2c40c-187">You can read any vertex or edge using hello partition key and id in Gremlin.</span></span> <span data-ttu-id="2c40c-188">Por ejemplo, para un gráfico con la región (EE ".") como clave de partición de Hola y "Seattle" como clave de fila de hello, encontrará un vértice mediante Hola según la sintaxis:</span><span class="sxs-lookup"><span data-stu-id="2c40c-188">For example, for a graph with region ("USA") as hello partition key, and "Seattle" as hello row key, you can find a vertex using hello following syntax:</span></span>

```
g.V(['USA', 'Seattle'])
```

<span data-ttu-id="2c40c-189">Al igual que con los extremos, puede hacer referencia a un borde con clave de partición de Hola y clave de fila.</span><span class="sxs-lookup"><span data-stu-id="2c40c-189">Same with edges, you can reference an edge using hello partition key and row key.</span></span>

```
g.E(['USA', 'I5'])
```

<span data-ttu-id="2c40c-190">Consulte [Gremlin support for Cosmos DB](gremlin-support.md) (Compatibilidad con Gremlin para Cosmos DB) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="2c40c-190">See [Gremlin support for Cosmos DB](gremlin-support.md) for more details.</span></span>


<a name="designing-for-partitioning"></a>
## <a name="designing-for-partitioning"></a><span data-ttu-id="2c40c-191">Diseño de la creación de particiones</span><span class="sxs-lookup"><span data-stu-id="2c40c-191">Designing for partitioning</span></span>
<span data-ttu-id="2c40c-192">tooscale eficazmente con base de datos de Azure Cosmos, deberá toopick una buena clave de partición cuando se crea el contenedor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-192">tooscale effectively with Azure Cosmos DB, you need toopick a good partition key when you create your container.</span></span> <span data-ttu-id="2c40c-193">Existen dos consideraciones clave cuando se trata de elegir una clave de partición:</span><span class="sxs-lookup"><span data-stu-id="2c40c-193">There are two key considerations for choosing a partition key:</span></span>

* <span data-ttu-id="2c40c-194">**Límite para la consulta y las transacciones**: su elección de clave de partición debe equilibrar las entidades de uso de hello necesidad tooenable Hola de transacciones en hello requisito toodistribute a través de varios tooensure de claves de partición una solución escalable.</span><span class="sxs-lookup"><span data-stu-id="2c40c-194">**Boundary for query and transactions**: Your choice of partition key should balance hello need tooenable hello use of transactions against hello requirement toodistribute your entities across multiple partition keys tooensure a scalable solution.</span></span> <span data-ttu-id="2c40c-195">En un extremo, puede establecer Hola misma clave de partición para todos los elementos, pero esto puede limitar la escalabilidad de hello de la solución.</span><span class="sxs-lookup"><span data-stu-id="2c40c-195">At one extreme, you could set hello same partition key for all your items, but this may limit hello scalability of your solution.</span></span> <span data-ttu-id="2c40c-196">En hello otro extremo, puede asignar una clave de partición única para cada elemento, que podría ser muy escalables, pero podría impedir el uso de transacciones de documento cruzada a través de procedimientos almacenados y desencadenadores.</span><span class="sxs-lookup"><span data-stu-id="2c40c-196">At hello other extreme, you could assign a unique partition key for each item, which would be highly scalable but would prevent you from using cross document transactions via stored procedures and triggers.</span></span> <span data-ttu-id="2c40c-197">Una clave de partición ideal es uno que permite conseguir consultas eficaces toouse y que tiene suficiente cardinalidad tooensure la solución es escalable.</span><span class="sxs-lookup"><span data-stu-id="2c40c-197">An ideal partition key is one that enables you toouse efficient queries and that has sufficient cardinality tooensure your solution is scalable.</span></span> 
* <span data-ttu-id="2c40c-198">**No hay cuellos de botella de rendimiento y almacenamiento**: es importante toopick una propiedad que permite escribe toobe distribuido en varios valores distintos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-198">**No storage and performance bottlenecks**: It is important toopick a property that allows writes toobe distributed across various distinct values.</span></span> <span data-ttu-id="2c40c-199">Las solicitudes toohello misma clave de partición no puede superar el rendimiento de una sola partición hello y están limitados.</span><span class="sxs-lookup"><span data-stu-id="2c40c-199">Requests toohello same partition key cannot exceed hello throughput of a single partition, and are throttled.</span></span> <span data-ttu-id="2c40c-200">Por lo que es importante toopick una clave de partición que no da como resultado "zonas activas" dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2c40c-200">So it is important toopick a partition key that does not result in "hot spots" within your application.</span></span> <span data-ttu-id="2c40c-201">Ya que todos los datos de Hola para una clave de partición solo debe almacenarse en una partición, también se recomienda tooavoid las claves de partición que tienen grandes volúmenes de datos para hello mismo valor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-201">Since all hello data for a single partition key must be stored within a partition, it is also recommended tooavoid partition keys that have high volumes of data for hello same value.</span></span> 

<span data-ttu-id="2c40c-202">Echemos un vistazo a algunos escenarios en el mundo real, así como a las buenas claves de partición de cada uno de ellos:</span><span class="sxs-lookup"><span data-stu-id="2c40c-202">Let's look at a few real-world scenarios, and good partition keys for each:</span></span>
* <span data-ttu-id="2c40c-203">Si está implementando un back-end de perfil de usuario, Id. de usuario de hello es una buena elección para la clave de partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-203">If you’re implementing a user profile backend, then hello user ID is a good choice for partition key.</span></span>
* <span data-ttu-id="2c40c-204">Si almacena datos IoT, como el estado del dispositivo, un identificador de dispositivo es una buena elección para la clave de partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-204">If you’re storing IoT data for example, device state, a device ID is a good choice for partition key.</span></span>
* <span data-ttu-id="2c40c-205">Si usas la base de datos de Azure Cosmos para registrar datos de serie temporal, Hola, a continuación, nombre de host o Id. de proceso es una buena elección para la clave de partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-205">If you’re using Azure Cosmos DB for logging time-series data, then hello hostname or process ID is a good choice for partition key.</span></span>
* <span data-ttu-id="2c40c-206">Si tiene una arquitectura de varios inquilinos, Id. de inquilino de hello es una buena elección para la clave de partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-206">If you have a multi-tenant architecture, hello tenant ID is a good choice for partition key.</span></span>

<span data-ttu-id="2c40c-207">En algunos casos como IoT de uso y perfiles de usuario, la clave de partición de hello podría ser Hola mismo como su identificador (clave de documento).</span><span class="sxs-lookup"><span data-stu-id="2c40c-207">In some use cases like IoT and user profiles, hello partition key might be hello same as your id (document key).</span></span> <span data-ttu-id="2c40c-208">En otras como datos de serie temporal de hello, es posible que tenga una clave de partición es diferente del Id. de Hola.</span><span class="sxs-lookup"><span data-stu-id="2c40c-208">In others like hello time series data, you might have a partition key that’s different than hello id.</span></span>

### <a name="partitioning-and-loggingtime-series-data"></a><span data-ttu-id="2c40c-209">Creación de particiones, registro y datos de serie temporal</span><span class="sxs-lookup"><span data-stu-id="2c40c-209">Partitioning and logging/time-series data</span></span>
<span data-ttu-id="2c40c-210">Uno de los casos de uso comunes de Hola de base de datos de Cosmos es para el registro y telemetría.</span><span class="sxs-lookup"><span data-stu-id="2c40c-210">One of hello common use cases of Cosmos DB is for logging and telemetry.</span></span> <span data-ttu-id="2c40c-211">Es importante toopick una buena clave de partición ya que tendrá que tooread/escritura de grandes volúmenes de datos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-211">It is important toopick a good partition key since you might need tooread/write vast volumes of data.</span></span> <span data-ttu-id="2c40c-212">elección de Hello depende de su lectura y escritura tasas y tipos de consultas que espera toorun.</span><span class="sxs-lookup"><span data-stu-id="2c40c-212">hello choice depends on your read and write rates and kinds of queries you expect toorun.</span></span> <span data-ttu-id="2c40c-213">Estas son algunas sugerencias sobre cómo toochoose una buena clave de partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-213">Here are some tips on how toochoose a good partition key.</span></span>

* <span data-ttu-id="2c40c-214">Si el caso de uso implica una pequeña tasa de escribe acumulan durante un largo período de tiempo y la necesidad de tooquery por intervalos de marcas de tiempo y los demás filtros, utilizando un paquete acumulativo de actualizaciones de hello marca de tiempo, por ejemplo, de fecha como una clave de partición es un enfoque adecuado.</span><span class="sxs-lookup"><span data-stu-id="2c40c-214">If your use case involves a small rate of writes accumulating over a long period of time, and need tooquery by ranges of timestamps and other filters, then using a rollup of hello timestamp, for example,  date as a partition key is a good approach.</span></span> <span data-ttu-id="2c40c-215">Esto le permite tooquery sobre todos los datos de Hola para una fecha de una única partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-215">This allows you tooquery over all hello data for a date from a single partition.</span></span> 
* <span data-ttu-id="2c40c-216">Si la carga de trabajo tiene muchas operaciones de escritura, lo que es más común, debe usar una clave de partición que no se base en la marca de tiempo para que Cosmos DB pueda distribuir escrituras uniformemente en varias particiones.</span><span class="sxs-lookup"><span data-stu-id="2c40c-216">If your workload is written heavy, which is more common, you should use a partition key that’s not based on timestamp so that Cosmos DB can distribute writes evenly across various partitions.</span></span> <span data-ttu-id="2c40c-217">En este caso, un nombre de host, identificador de proceso, identificador de actividad u otra propiedad con cardinalidad elevada, es una buena elección.</span><span class="sxs-lookup"><span data-stu-id="2c40c-217">Here a hostname, process ID, activity ID, or another property with high cardinality is a good choice.</span></span> 
* <span data-ttu-id="2c40c-218">Un tercer enfoque es un híbrido uno donde tiene varios contenedores, uno para cada día/mes y clave de partición de hello es una propiedad como nombre de host específica.</span><span class="sxs-lookup"><span data-stu-id="2c40c-218">A third approach is a hybrid one where you have multiple containers, one for each day/month and hello partition key is a granular property like hostname.</span></span> <span data-ttu-id="2c40c-219">Esto tiene la ventaja de Hola que se puede establecer rendimiento diferentes en función de ventana de tiempo de hello, por ejemplo, contenedor de Hola para hello mes actual se haya aprovisionado con un mayor rendimiento porque es de lectura y escritura, mientras que los meses anteriores con reducir el rendimiento desde solo sirven lecturas.</span><span class="sxs-lookup"><span data-stu-id="2c40c-219">This has hello benefit that you can set different throughput based on hello time window, for example, hello container for hello current month is provisioned with higher throughput since it serves reads and writes, whereas previous months with lower throughput since they only serve reads.</span></span>

### <a name="partitioning-and-multi-tenancy"></a><span data-ttu-id="2c40c-220">Creación de particiones y arquitectura multiempresa</span><span class="sxs-lookup"><span data-stu-id="2c40c-220">Partitioning and multi-tenancy</span></span>
<span data-ttu-id="2c40c-221">Si implementa una aplicación multiinquilino mediante Cosmos DB, hay dos patrones populares: una clave de partición por inquilino y un contenedor por inquilino.</span><span class="sxs-lookup"><span data-stu-id="2c40c-221">If you are implementing a multi-tenant application using Cosmos DB, there are two popular patterns – one partition key per tenant, and one container per tenant.</span></span> <span data-ttu-id="2c40c-222">Estos son Hola ventajas y desventajas de cada uno:</span><span class="sxs-lookup"><span data-stu-id="2c40c-222">Here are hello pros and cons for each:</span></span>

* <span data-ttu-id="2c40c-223">Una clave de partición por inquilino: en este modelo, los inquilinos se colocan en un solo contenedor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-223">One Partition Key per tenant: In this model, tenants are collocated within a single container.</span></span> <span data-ttu-id="2c40c-224">Por su parte, las consultas e inserciones de elementos dentro de un único inquilino pueden realizarse en una sola partición.</span><span class="sxs-lookup"><span data-stu-id="2c40c-224">But queries and inserts for items within a single tenant can be performed against a single partition.</span></span> <span data-ttu-id="2c40c-225">También se puede implementar la lógica transaccional en todos los elementos de un inquilino.</span><span class="sxs-lookup"><span data-stu-id="2c40c-225">You can also implement transactional logic across all items within a tenant.</span></span> <span data-ttu-id="2c40c-226">Puesto que varios inquilinos comparten un contenedor, se pueden ahorrar costos de almacenamiento y rendimiento mediante la agrupación de los recursos para los inquilinos en un solo contenedor, en lugar de aprovisionar capacidad de aumento adicional para cada inquilino.</span><span class="sxs-lookup"><span data-stu-id="2c40c-226">Since multiple tenants share a container, you can save storage and throughput costs by pooling resources for tenants within a single container rather than provisioning extra headroom for each tenant.</span></span> <span data-ttu-id="2c40c-227">el inconveniente de Hello es que no tienen aislamiento del rendimiento por inquilino.</span><span class="sxs-lookup"><span data-stu-id="2c40c-227">hello drawback is that you do not have performance isolation per tenant.</span></span> <span data-ttu-id="2c40c-228">Aumenta el rendimiento/rendimiento aplica toohello todo contenedor vs destinadas aumenta para inquilinos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-228">Performance/throughput increases apply toohello entire container vs targeted increases for tenants.</span></span>
* <span data-ttu-id="2c40c-229">Un contenedor por inquilino: cada inquilino tiene su propio contenedor.</span><span class="sxs-lookup"><span data-stu-id="2c40c-229">One Container per tenant: Each tenant has its own container.</span></span> <span data-ttu-id="2c40c-230">En este modelo es posible reservar procesamiento por inquilino.</span><span class="sxs-lookup"><span data-stu-id="2c40c-230">In this model, you can reserve performance per tenant.</span></span> <span data-ttu-id="2c40c-231">Con el nuevo modelo de precios de aprovisionamiento de Cosmos DB, este modelo es más rentable para las aplicaciones multiempresa con un número pequeño de inquilinos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-231">With Cosmos DB's new provisioning pricing model, this model is more cost-effective for multi-tenant applications with a few tenants.</span></span>

<span data-ttu-id="2c40c-232">También puede utilizar un enfoque de combinación/niveles que coloca a los inquilinos pequeños y migra mayor contenedor propias tootheir de inquilinos.</span><span class="sxs-lookup"><span data-stu-id="2c40c-232">You can also use a combination/tiered approach that collocates small tenants and migrates larger tenants tootheir own container.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2c40c-233">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="2c40c-233">Next steps</span></span>
<span data-ttu-id="2c40c-234">En este artículo, hemos proporcionado información general a fin de dar una idea de los conceptos y procedimientos recomendados para crear particiones con cualquier API de Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2c40c-234">In this article, we provided an overview for an overview of concepts and best practices for partitioning with any Azure Cosmos DB API.</span></span> 

* <span data-ttu-id="2c40c-235">Información sobre el [procesamiento aprovisionado en Azure Cosmos DB](request-units.md)</span><span class="sxs-lookup"><span data-stu-id="2c40c-235">Learn about [provisioned throughput in Azure Cosmos DB](request-units.md)</span></span>
* <span data-ttu-id="2c40c-236">Información sobre la [distribución global en Azure Cosmos DB](distribute-data-globally.md)</span><span class="sxs-lookup"><span data-stu-id="2c40c-236">Learn about [global distribution in Azure Cosmos DB](distribute-data-globally.md)</span></span>




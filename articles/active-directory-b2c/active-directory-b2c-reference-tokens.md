---
title: 'Azure Active Directory B2C: referencia de tokens | Microsoft Docs'
description: Tipos de tokens emitidos en Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="e6326-103">Azure AD B2C: referencia de tokens</span><span class="sxs-lookup"><span data-stu-id="e6326-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="e6326-104">Azure Active Directory B2C (Azure AD B2C) emite varios tipos de tokens de seguridad a medida que procesa cada [flujo de autenticación](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="e6326-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="e6326-105">Este documento describe el formato, las características de seguridad y el contenido de cada tipo de token.</span><span class="sxs-lookup"><span data-stu-id="e6326-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="e6326-106">Tipos de tokens</span><span class="sxs-lookup"><span data-stu-id="e6326-106">Types of tokens</span></span>
<span data-ttu-id="e6326-107">Azure AD B2C admite el [protocolo de autorización de OAuth 2.0](active-directory-b2c-reference-protocols.md), que usa tanto tokens de acceso como tokens de actualización.</span><span class="sxs-lookup"><span data-stu-id="e6326-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="e6326-108">También admite la autenticación y el inicio de sesión a través de [OpenID Connect](active-directory-b2c-reference-protocols.md), que introduce un tercer tipo de token, token de identificador.</span><span class="sxs-lookup"><span data-stu-id="e6326-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="e6326-109">Todos estos tokens se representan como un token de portador.</span><span class="sxs-lookup"><span data-stu-id="e6326-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="e6326-110">Un token de portador es un token de seguridad ligero que concede al "portador" acceso a un recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="e6326-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="e6326-111">El "portador" es cualquier parte que pueda presentar el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="e6326-112">Para que una parte pueda recibir un token de portador, es necesario que Azure AD la autentique previamente.</span><span class="sxs-lookup"><span data-stu-id="e6326-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="e6326-113">Pero si no se realizan los pasos necesarios para proteger el token durante la transmisión y el almacenamiento, puede ser interceptado y usado por usuarios no previstos.</span><span class="sxs-lookup"><span data-stu-id="e6326-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="e6326-114">Algunos tokens de seguridad disponen de un mecanismo integrado para evitar que usuarios no autorizados puedan usarlos, pero los tokens de portador no tienen este mecanismo.</span><span class="sxs-lookup"><span data-stu-id="e6326-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="e6326-115">Deberán ser transportados en un canal seguro, como Seguridad de la capa de transporte (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e6326-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="e6326-116">Si un token de portador se transmite fuera de un canal seguro, un usuario malintencionado puede utilizar un ataque de tipo "man in the middle" para adquirir el token y usarlo para obtener acceso sin autorización a un recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="e6326-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="e6326-117">Los mismos principios de seguridad se aplican cuando los tokens de portador se almacenan o guardan en caché para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="e6326-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="e6326-118">Asegúrate siempre de que la aplicación transmite y almacena los tokens de portador de manera segura.</span><span class="sxs-lookup"><span data-stu-id="e6326-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="e6326-119">Para ver más consideraciones de seguridad relativas a los tokens de portador, consulte la [sección 5 de RFC 6750](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="e6326-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="e6326-120">Muchos de los tokens emitidos por Azure AD B2C se implementan como tokens web JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="e6326-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="e6326-121">Un JWT es un medio compacto y seguro de la dirección URL para transferir información entre dos partes.</span><span class="sxs-lookup"><span data-stu-id="e6326-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="e6326-122">Los JWT contienen información conocida como notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="e6326-123">Se trata de aserciones de información sobre el portador y el sujeto del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="e6326-124">En JWT, las notificaciones son objetos JSON que se codifican y serializan para su transmisión.</span><span class="sxs-lookup"><span data-stu-id="e6326-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="e6326-125">Como los JWT emitidos por Azure AD B2C están firmados pero no cifrados, puede inspeccionar fácilmente el contenido de un JWT para depurarlo.</span><span class="sxs-lookup"><span data-stu-id="e6326-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="e6326-126">Hay varias herramientas para hacerlo, entre ellas [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="e6326-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="e6326-127">Para más información acerca de los JWT, consulte las [especificaciones de JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="e6326-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="e6326-128">Tokens de identificador</span><span class="sxs-lookup"><span data-stu-id="e6326-128">ID tokens</span></span>
<span data-ttu-id="e6326-129">Los tokens de identificador son una forma de token de seguridad que la aplicación recibe de los puntos de conexión `authorize` y `token` de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e6326-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="e6326-130">Los tokens de identificador se representan como si fueran [JWT](#types-of-tokens)y contienen notificaciones que se pueden usar para identificar a los usuarios de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="e6326-131">Cuando los tokens de identificador se adquieren desde el punto de conexión `authorize` , a menudo se usan para que los usuarios inicien sesión en las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="e6326-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="e6326-132">Cuando los tokens de identificador se adquieren desde el punto de conexión `token` , se pueden enviar en solicitudes HTTP durante la comunicación entre dos componentes de la misma aplicación o servicio.</span><span class="sxs-lookup"><span data-stu-id="e6326-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="e6326-133">Puede usar las notificaciones en un token de identificador como considere oportuno.</span><span class="sxs-lookup"><span data-stu-id="e6326-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="e6326-134">Normalmente se suelen usar para mostrar información sobre la cuenta o para tomar decisiones sobre control de acceso en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="e6326-135">Los tokens de identificador están firmados, pero actualmente no están cifrados.</span><span class="sxs-lookup"><span data-stu-id="e6326-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="e6326-136">Cuando una aplicación o API recibe un token de identificador, debe [validar la firma](#token-validation) para demostrar que es auténtico.</span><span class="sxs-lookup"><span data-stu-id="e6326-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="e6326-137">La aplicación o la API también debe validar algunas notificaciones del token para demostrar que es válido.</span><span class="sxs-lookup"><span data-stu-id="e6326-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="e6326-138">En función de los requisitos del escenario, las notificaciones validadas por una aplicación varían, pero la aplicación debe realizar algunas [validaciones de notificación comunes](#token-validation) en todos los escenarios.</span><span class="sxs-lookup"><span data-stu-id="e6326-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="e6326-139">Token de identificador de ejemplo</span><span class="sxs-lookup"><span data-stu-id="e6326-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="e6326-140">Tokens de acceso</span><span class="sxs-lookup"><span data-stu-id="e6326-140">Access tokens</span></span>
<span data-ttu-id="e6326-141">Los tokens de acceso también son una forma de token de seguridad que la aplicación recibe de los puntos de conexión `authorize` y `token` de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e6326-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="e6326-142">Los tokens de acceso también se representan como [JWT](#types-of-tokens) y contienen notificaciones que puede usar para identificar los permisos concedidos a las API.</span><span class="sxs-lookup"><span data-stu-id="e6326-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="e6326-143">Los tokens de acceso están firmados, pero actualmente no están cifrados.</span><span class="sxs-lookup"><span data-stu-id="e6326-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="e6326-144">Los tokens de acceso se deberían utilizar para proporcionar acceso a servidores de recursos y API.</span><span class="sxs-lookup"><span data-stu-id="e6326-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="e6326-145">Obtenga más información sobre cómo [usar los tokens de acceso](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e6326-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="e6326-146">Cuando una API recibe un token de acceso, debe [validar la firma](#token-validation) para demostrar que es auténtico.</span><span class="sxs-lookup"><span data-stu-id="e6326-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="e6326-147">La API también debe validar algunas notificaciones del token para demostrar que es válido.</span><span class="sxs-lookup"><span data-stu-id="e6326-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="e6326-148">En función de los requisitos del escenario, las notificaciones validadas por una aplicación varían, pero la aplicación debe realizar algunas [validaciones de notificación comunes](#token-validation) en todos los escenarios.</span><span class="sxs-lookup"><span data-stu-id="e6326-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="e6326-149">Notificaciones en los tokens de identificador y de acceso</span><span class="sxs-lookup"><span data-stu-id="e6326-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="e6326-150">Con Azure AD B2C, tendrá un control preciso sobre el contenido de los tokens.</span><span class="sxs-lookup"><span data-stu-id="e6326-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="e6326-151">Se puede configurar [directivas](active-directory-b2c-reference-policies.md) para enviar ciertos conjuntos de datos de usuario en las notificaciones que la aplicación necesita para sus operaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="e6326-152">Dichas notificaciones pueden incluir propiedades estándar, tales como los valores de `displayName` y `emailAddress` del usuario.</span><span class="sxs-lookup"><span data-stu-id="e6326-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="e6326-153">También pueden incluir [atributos de usuario personalizados](active-directory-b2c-reference-custom-attr.md) que se pueden definir en el directorio de B2C.</span><span class="sxs-lookup"><span data-stu-id="e6326-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="e6326-154">Todos los tokens de identificador y de acceso que reciba contienen un conjunto concreto de notificaciones relacionadas con la seguridad.</span><span class="sxs-lookup"><span data-stu-id="e6326-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="e6326-155">Las aplicaciones pueden usar estas notificaciones para autenticar usuarios y solicitudes de manera segura.</span><span class="sxs-lookup"><span data-stu-id="e6326-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="e6326-156">Tenga en cuenta que  las notificaciones de los tokens de identificador no se devuelven en ningún orden concreto.</span><span class="sxs-lookup"><span data-stu-id="e6326-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="e6326-157">Además, se pueden agregar nuevas notificaciones en tokens de identificador en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="e6326-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="e6326-158">No se debe interrumpir la aplicación cuando se agreguen nuevas notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="e6326-159">Estas son las notificaciones que se espera que existan en los tokens de identificador y de acceso que emite Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e6326-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="e6326-160">Las directivas determinan otras notificaciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="e6326-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="e6326-161">Para la práctica, intente inspeccionar las notificaciones del token de identificador de ejemplo pegándolo en [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="e6326-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="e6326-162">Puede encontrar más información al respecto en la [especificación OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="e6326-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="e6326-163">Name</span><span class="sxs-lookup"><span data-stu-id="e6326-163">Name</span></span> | <span data-ttu-id="e6326-164">Notificación</span><span class="sxs-lookup"><span data-stu-id="e6326-164">Claim</span></span> | <span data-ttu-id="e6326-165">Valor de ejemplo</span><span class="sxs-lookup"><span data-stu-id="e6326-165">Example value</span></span> | <span data-ttu-id="e6326-166">Descripción</span><span class="sxs-lookup"><span data-stu-id="e6326-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e6326-167">Público</span><span class="sxs-lookup"><span data-stu-id="e6326-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="e6326-168">Una notificación de audiencia identifica al destinatario previsto del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="e6326-169">En el caso de Azure AD B2C, la audiencia es el identificador de la aplicación asignado a su aplicación en el portal de registro de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="e6326-170">La aplicación tiene que validar este valor y rechazar el token si no coincide.</span><span class="sxs-lookup"><span data-stu-id="e6326-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="e6326-171">Emisor</span><span class="sxs-lookup"><span data-stu-id="e6326-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="e6326-172">La notificación identifica el servicio de token de seguridad (STS) que construye y devuelve el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="e6326-173">También identifica el directorio de Azure AD en el que se autenticó el usuario.</span><span class="sxs-lookup"><span data-stu-id="e6326-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="e6326-174">La aplicación tiene que validar la notificación del emisor para asegurarse de que el token proviene del punto de conexión de Azure Active Directory 2.0.</span><span class="sxs-lookup"><span data-stu-id="e6326-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="e6326-175">Emitido a las</span><span class="sxs-lookup"><span data-stu-id="e6326-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="e6326-176">Esta notificación es la hora a la que se emitió el token, representada en tiempo de época.</span><span class="sxs-lookup"><span data-stu-id="e6326-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="e6326-177">Fecha de expiración</span><span class="sxs-lookup"><span data-stu-id="e6326-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="e6326-178">Esta notificación es la hora de expiración a la que el token deja de ser válido, representada en tiempo de época.</span><span class="sxs-lookup"><span data-stu-id="e6326-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="e6326-179">La aplicación tiene que usar esta notificación para comprobar la validez de la duración del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="e6326-180">No antes de</span><span class="sxs-lookup"><span data-stu-id="e6326-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="e6326-181">Esta notificación es la hora a la que el token pasa a ser válido, representada en tiempo de época.</span><span class="sxs-lookup"><span data-stu-id="e6326-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="e6326-182">Suele ser la misma hora a la que se emitió el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="e6326-183">La aplicación tiene que usar esta notificación para comprobar la validez de la duración del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="e6326-184">Versión</span><span class="sxs-lookup"><span data-stu-id="e6326-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="e6326-185">Versión del token de identificador, definida por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e6326-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="e6326-186">Código hash</span><span class="sxs-lookup"><span data-stu-id="e6326-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="e6326-187">El código hash se incluye en los tokens de identificador solo cuando el token se emite junto con un código de autorización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e6326-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="e6326-188">Los códigos hash se pueden usar para validar la autenticidad de un código de autorización.</span><span class="sxs-lookup"><span data-stu-id="e6326-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="e6326-189">Consulte la [especificación de OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) para obtener más información sobre cómo llevar a cabo esta validación.</span><span class="sxs-lookup"><span data-stu-id="e6326-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="e6326-190">Hash de token de acceso</span><span class="sxs-lookup"><span data-stu-id="e6326-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="e6326-191">El hash de token de acceso se incluye en los tokens de identificador solo cuando el token se emite junto con un token de acceso de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e6326-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="e6326-192">El hash de token de acceso se puede usar para validar la autenticidad de un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="e6326-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="e6326-193">Consulte la [especificación de OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) para obtener más información sobre cómo llevar a cabo esta validación.</span><span class="sxs-lookup"><span data-stu-id="e6326-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="e6326-194">Valor de seguridad</span><span class="sxs-lookup"><span data-stu-id="e6326-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="e6326-195">El valor de seguridad es una estrategia que se usa para mitigar los ataques de reproducción de tokens.</span><span class="sxs-lookup"><span data-stu-id="e6326-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="e6326-196">La aplicación puede especificar un valor de seguridad en una solicitud de autorización mediante el parámetro de consulta `nonce` .</span><span class="sxs-lookup"><span data-stu-id="e6326-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="e6326-197">El valor que se proporcione en la solicitud solo se emitirá sin modificar en la notificación `nonce` de un token de identificador.</span><span class="sxs-lookup"><span data-stu-id="e6326-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="e6326-198">Esto permite a la aplicación comprobar el valor con respecto al valor que especifica en la solicitud, que asocia la sesión de la aplicación con un token de identificador determinado.</span><span class="sxs-lookup"><span data-stu-id="e6326-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="e6326-199">La aplicación tiene que realizar esta validación durante el proceso de validación del token de identificador.</span><span class="sxs-lookup"><span data-stu-id="e6326-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="e6326-200">Asunto</span><span class="sxs-lookup"><span data-stu-id="e6326-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="e6326-201">Esta es la entidad de seguridad sobre la que el token declara información como, por ejemplo, el usuario de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="e6326-202">Este valor es inmutable y no se puede reasignar ni volver a usar.</span><span class="sxs-lookup"><span data-stu-id="e6326-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="e6326-203">Se puede usar para realizar comprobaciones de autorización de forma segura, por ejemplo, cuando el token se usa para acceder a un recurso.</span><span class="sxs-lookup"><span data-stu-id="e6326-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="e6326-204">De manera predeterminada, la notificación del asunto se rellena con el identificador de objeto del usuario del directorio.</span><span class="sxs-lookup"><span data-stu-id="e6326-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="e6326-205">Para obtener más información, consulte [Azure Active Directory B2C: configuración de tokens, sesión e inicio de sesión único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="e6326-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="e6326-206">Referencia de clase de contexto de autenticación</span><span class="sxs-lookup"><span data-stu-id="e6326-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="e6326-207">No aplicable</span><span class="sxs-lookup"><span data-stu-id="e6326-207">Not applicable</span></span> |<span data-ttu-id="e6326-208">No se usa actualmente, salvo en caso de directivas anteriores.</span><span class="sxs-lookup"><span data-stu-id="e6326-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="e6326-209">Para obtener más información, consulte [Azure Active Directory B2C: configuración de tokens, sesión e inicio de sesión único](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="e6326-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="e6326-210">Directiva de marco de confianza</span><span class="sxs-lookup"><span data-stu-id="e6326-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="e6326-211">Nombre de la directiva que se usó para emitir el token de identificador.</span><span class="sxs-lookup"><span data-stu-id="e6326-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="e6326-212">Hora de autenticación</span><span class="sxs-lookup"><span data-stu-id="e6326-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="e6326-213">Esta notificación es la hora a la que un usuario especificó sus credenciales por última vez, representada en tiempo de época.</span><span class="sxs-lookup"><span data-stu-id="e6326-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="e6326-214">Tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="e6326-214">Refresh tokens</span></span>
<span data-ttu-id="e6326-215">Los tokens de actualización son tokens de seguridad que la aplicación puede usar para adquirir nuevos tokens de identificador y tokens de acceso en un flujo de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e6326-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="e6326-216">Permite a la aplicación obtener acceso a largo plazo a los recursos en nombre de los usuarios sin necesidad de interacción con los usuarios.</span><span class="sxs-lookup"><span data-stu-id="e6326-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="e6326-217">Para recibir un token de actualización en la respuesta de un token, la aplicación debe solicitar el ámbito `offline_acesss` .</span><span class="sxs-lookup"><span data-stu-id="e6326-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="e6326-218">Para obtener más información sobre el ámbito `offline_access` , consulte la [referencia de protocolo de Azure AD B2C](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="e6326-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="e6326-219">Los tokens de actualización son, y siempre serán, totalmente opacos para tu aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="e6326-220">Los emite Azure AD y solo Azure AD los puede inspeccionar e interpretar.</span><span class="sxs-lookup"><span data-stu-id="e6326-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="e6326-221">Son de larga duración, pero la aplicación no se debe escribir esperando que un token de actualización dure un período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="e6326-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="e6326-222">Los tokens de actualización pueden invalidarse en cualquier momento por varios motivos.</span><span class="sxs-lookup"><span data-stu-id="e6326-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="e6326-223">La única forma para que tu aplicación sepa si un token de actualización es válido es intentar canjearlo mediante una solicitud de token a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e6326-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="e6326-224">Cuando se canjea un token de actualización por un token nuevo (y si se ha otorgado el ámbito `offline_access` a la aplicación), se recibe un nuevo token de actualización en la respuesta del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="e6326-225">Debe guardar el token de actualización recién emitido.</span><span class="sxs-lookup"><span data-stu-id="e6326-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="e6326-226">Reemplazará al token de actualización que usó anteriormente en la solicitud.</span><span class="sxs-lookup"><span data-stu-id="e6326-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="e6326-227">Esto ayuda a garantizar que los tokens de actualización sigan siendo válidos mientras sea posible.</span><span class="sxs-lookup"><span data-stu-id="e6326-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="e6326-228">Validación de tokens</span><span class="sxs-lookup"><span data-stu-id="e6326-228">Token validation</span></span>
<span data-ttu-id="e6326-229">Para validar un token, la aplicación debe comprobar tanto la firma como las notificaciones del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="e6326-230">Hay muchas bibliotecas de código abierto disponibles para validar los JWT según su lenguaje preferido.</span><span class="sxs-lookup"><span data-stu-id="e6326-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="e6326-231">Se recomienda explorar esas opciones en lugar de implementar su propia lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="e6326-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="e6326-232">La información de esta guía puede ayudarle a aprender a usar correctamente esas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="e6326-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="e6326-233">validar la firma</span><span class="sxs-lookup"><span data-stu-id="e6326-233">Validate the signature</span></span>
<span data-ttu-id="e6326-234">Un JWT contiene tres segmentos, separados por el carácter `.` .</span><span class="sxs-lookup"><span data-stu-id="e6326-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="e6326-235">El primer segmento es el *encabezado*, el segundo el *cuerpo* y el tercero la *firma*.</span><span class="sxs-lookup"><span data-stu-id="e6326-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="e6326-236">El segmento de firma se puede utilizar para validar la autenticidad del token con el fin de que la aplicación pueda confiar en él.</span><span class="sxs-lookup"><span data-stu-id="e6326-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="e6326-237">Los tokens de Azure AD B2C se firman con algoritmos de cifrado asimétrico estándar del sector, como RSA 256.</span><span class="sxs-lookup"><span data-stu-id="e6326-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="e6326-238">El encabezado del token contiene información acerca del método de cifrado y la clave utilizados para firmar el token:</span><span class="sxs-lookup"><span data-stu-id="e6326-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="e6326-239">La notificación `alg` indica el algoritmo que se usó para firmar el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="e6326-240">La notificación `kid` indica la clave pública particular que se usó para firmar el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="e6326-241">En cualquier momento, Azure AD puede firmar un token mediante cualquiera de un determinado conjunto de pares de claves pública y privada.</span><span class="sxs-lookup"><span data-stu-id="e6326-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="e6326-242">Azure AD rota los posibles conjuntos de claves de forma periódica, por lo que la aplicación debería estar escrita para tratar esos cambios de clave automáticamente.</span><span class="sxs-lookup"><span data-stu-id="e6326-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="e6326-243">Una frecuencia razonable para comprobar las actualizaciones de las claves públicas usadas por Azure AD es cada 24 horas.</span><span class="sxs-lookup"><span data-stu-id="e6326-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="e6326-244">Azure AD B2C tiene un punto de conexión de metadatos OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="e6326-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="e6326-245">Esto permite a las aplicaciones obtener información acerca de Azure AD B2C en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="e6326-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="e6326-246">En esta información se incluyen los extremos, los contenidos del token y las claves de firma de los token.</span><span class="sxs-lookup"><span data-stu-id="e6326-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="e6326-247">Su directorio B2C contiene un documento de metadatos JSON para cada directiva.</span><span class="sxs-lookup"><span data-stu-id="e6326-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="e6326-248">Por ejemplo, el documento de metadatos de la directiva `b2c_1_sign_in` en `fabrikamb2c.onmicrosoft.com` se encuentra en:</span><span class="sxs-lookup"><span data-stu-id="e6326-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="e6326-249">`fabrikamb2c.onmicrosoft.com` es el directorio de B2C que se usa para autenticar el usuario, mientras que `b2c_1_sign_in` es la directiva que se emplea para adquirir el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="e6326-250">Para determinar qué directiva se usó para firmar un token (y dónde obtener los metadatos), tiene dos opciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="e6326-251">En primer lugar, el nombre de la directiva se incluye en la notificación `acr` del token.</span><span class="sxs-lookup"><span data-stu-id="e6326-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="e6326-252">Las notificaciones se pueden analizar fuera del cuerpo del JWT; para ello, descodifique la descodificación en base 64 del cuerpo y deserialice la cadena JSON resultante.</span><span class="sxs-lookup"><span data-stu-id="e6326-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="e6326-253">La notificación `acr` será el nombre de la directiva que se usó para emitir el token.</span><span class="sxs-lookup"><span data-stu-id="e6326-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="e6326-254">La otra opción consiste en codificar la directiva en el valor del parámetro `state` al emitir la solicitud y descodificarla para determinar qué directiva se ha usado.</span><span class="sxs-lookup"><span data-stu-id="e6326-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="e6326-255">Cualquiera de estos métodos es válido.</span><span class="sxs-lookup"><span data-stu-id="e6326-255">Either method is valid.</span></span>

<span data-ttu-id="e6326-256">El documento de metadatos es un objeto JSON que contiene varias piezas de información útiles.</span><span class="sxs-lookup"><span data-stu-id="e6326-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="e6326-257">Estas son la ubicación de los puntos de conexión necesarios para realizar la autenticación de OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="e6326-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="e6326-258">También incluye un `jwks_uri`, que ofrece la ubicación del conjunto de claves públicas que se usan para firmar los tokens.</span><span class="sxs-lookup"><span data-stu-id="e6326-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="e6326-259">La ubicación se proporciona aquí, pero es mejor capturarla dinámicamente mediante el documento de metadatos y el análisis de `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="e6326-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="e6326-260">El documento JSON que se encuentra en esta dirección URL contiene toda la información de clave pública en uso en ese momento determinado.</span><span class="sxs-lookup"><span data-stu-id="e6326-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="e6326-261">La aplicación puede usar la notificación `kid` en el encabezado de JWT para seleccionar en el documento JSON la clave pública que se ha usado en este documento para firmar un token concreto.</span><span class="sxs-lookup"><span data-stu-id="e6326-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="e6326-262">Después, puede realizar la validación de la firma mediante la clave pública correcta y el algoritmo indicado.</span><span class="sxs-lookup"><span data-stu-id="e6326-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="e6326-263">La descripción de cómo realizar la validación de la firma queda fuera del ámbito de este documento.</span><span class="sxs-lookup"><span data-stu-id="e6326-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="e6326-264">Hay muchas bibliotecas de código abierto disponibles para ayudarle con esto, si lo necesita.</span><span class="sxs-lookup"><span data-stu-id="e6326-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="e6326-265">Validación de las notificaciones</span><span class="sxs-lookup"><span data-stu-id="e6326-265">Validate the claims</span></span>
<span data-ttu-id="e6326-266">Cuando una aplicación o una API reciben un token de identificador, también es preciso realizar varias comprobaciones de las notificaciones en el token de identificador.</span><span class="sxs-lookup"><span data-stu-id="e6326-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="e6326-267">Estas incluyen, pero no se limitan a:</span><span class="sxs-lookup"><span data-stu-id="e6326-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="e6326-268">Notificación de **audiencia** : comprueba que está previsto que el token de identificador se proporcione a tu aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="e6326-269">Notificaciones **no antes de** y **hora de expiración**: comprueban que el token de identificador no expiró.</span><span class="sxs-lookup"><span data-stu-id="e6326-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="e6326-270">Notificación **emisor** : comprueba que Azure AD emitió el token para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e6326-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="e6326-271">**Valor de seguridad**: es una estrategia para mitigar los ataques de reproducción de tokens.</span><span class="sxs-lookup"><span data-stu-id="e6326-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="e6326-272">Para ver una lista completa de las validaciones que la aplicación debe llevar a cabo, consulte la [especificación de OpenID Connect](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="e6326-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="e6326-273">En la anterior [sección sobre tipos de token](#types-of-tokens)se incluye información detallada de los valores que se esperan para estas notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="e6326-274">Vigencia de los tokens</span><span class="sxs-lookup"><span data-stu-id="e6326-274">Token lifetimes</span></span>
<span data-ttu-id="e6326-275">Las siguientes vigencias de los tokens se proporcionan para ampliar sus conocimientos.</span><span class="sxs-lookup"><span data-stu-id="e6326-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="e6326-276">Pueden ayudarle a desarrollar y depurar aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e6326-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="e6326-277">Tenga en cuenta que las aplicaciones no se deben escribir esperando que estas vigencias permanezcan constantes.</span><span class="sxs-lookup"><span data-stu-id="e6326-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="e6326-278">Pueden cambiar y lo harán.</span><span class="sxs-lookup"><span data-stu-id="e6326-278">They can and will change.</span></span> <span data-ttu-id="e6326-279">Obtenga más información sobre la [personalización de la duración de los tokens](active-directory-b2c-token-session-sso.md) en Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e6326-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="e6326-280">SWT</span><span class="sxs-lookup"><span data-stu-id="e6326-280">Token</span></span> | <span data-ttu-id="e6326-281">Vigencia</span><span class="sxs-lookup"><span data-stu-id="e6326-281">Lifetime</span></span> | <span data-ttu-id="e6326-282">Descripción</span><span class="sxs-lookup"><span data-stu-id="e6326-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e6326-283">Tokens de identificador</span><span class="sxs-lookup"><span data-stu-id="e6326-283">ID tokens</span></span> |<span data-ttu-id="e6326-284">Una hora</span><span class="sxs-lookup"><span data-stu-id="e6326-284">One hour</span></span> |<span data-ttu-id="e6326-285">Los tokens de identificador normalmente son válidos durante una hora.</span><span class="sxs-lookup"><span data-stu-id="e6326-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="e6326-286">La aplicación web puede usar esta vigencia para mantener sus propias sesiones con los usuarios (recomendado).</span><span class="sxs-lookup"><span data-stu-id="e6326-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="e6326-287">También puede elegir una vigencia de sesión diferente.</span><span class="sxs-lookup"><span data-stu-id="e6326-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="e6326-288">Si la aplicación necesita obtener un nuevo token de identificador, solo tiene que realizar una nueva solicitud de inicio de sesión a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e6326-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="e6326-289">Si el usuario tiene una sesión de explorador válida con Azure AD, es posible que el usuario no tenga que volver a escribir sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="e6326-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="e6326-290">Tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="e6326-290">Refresh tokens</span></span> |<span data-ttu-id="e6326-291">Hasta 14 días</span><span class="sxs-lookup"><span data-stu-id="e6326-291">Up to 14 days</span></span> |<span data-ttu-id="e6326-292">Un token de actualización solo es válido durante un máximo de 14 días.</span><span class="sxs-lookup"><span data-stu-id="e6326-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="e6326-293">Pero un token de actualización puede dejar de ser válido en cualquier momento por una serie de motivos.</span><span class="sxs-lookup"><span data-stu-id="e6326-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="e6326-294">La aplicación debe continuar intentando usar un token de actualización hasta que se produce un error en la solicitud o hasta que la aplicación reemplaza el token de actualización por uno nuevo.</span><span class="sxs-lookup"><span data-stu-id="e6326-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="e6326-295">Un token de actualización también puede dejar de ser válido si transcurren 90 días desde que el usuario especificó sus credenciales por última vez.</span><span class="sxs-lookup"><span data-stu-id="e6326-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="e6326-296">Códigos de autorización</span><span class="sxs-lookup"><span data-stu-id="e6326-296">Authorization codes</span></span> |<span data-ttu-id="e6326-297">Cinco minutos</span><span class="sxs-lookup"><span data-stu-id="e6326-297">Five minutes</span></span> |<span data-ttu-id="e6326-298">Los códigos de autorización son de corta duración intencionadamente.</span><span class="sxs-lookup"><span data-stu-id="e6326-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="e6326-299">Deben canjearse inmediatamente por tokens de acceso, tokens de identificador o tokens de actualización cuando se reciben.</span><span class="sxs-lookup"><span data-stu-id="e6326-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |


---
title: "Azure Active Directory B2C: aplicaciones de una página con el flujo implícito | Microsoft Docs"
description: "Obtenga información sobre cómo compilar aplicaciones de una página directamente con el flujo implícito de OAuth 2.0 con Azure Active Directory B2C."
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: a45cc74c-a37e-453f-b08b-af75855e0792
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/06/2017
ms.author: parakhj
ms.openlocfilehash: 44ff168599e9078506e1afdd0f1dc4657ef0964d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-single-page-app-sign-in-by-using-oauth-20-implicit-flow"></a><span data-ttu-id="a3aec-103">Azure AD B2C: inicio de sesión de aplicaciones de una página con el flujo implícito de OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="a3aec-103">Azure AD B2C: Single-page app sign-in by using OAuth 2.0 implicit flow</span></span>

> [!NOTE]
> <span data-ttu-id="a3aec-104">Esta característica se encuentra en su versión preliminar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-104">This feature is in preview.</span></span>
> 

<span data-ttu-id="a3aec-105">Muchas aplicaciones modernas tienen un front-end de aplicación de una página escrito principalmente en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a3aec-105">Many modern apps have a single-page app front end that primarily is written in JavaScript.</span></span> <span data-ttu-id="a3aec-106">A menudo, la aplicación se escribe con un marco como AngularJS, Ember.js o Durandal.</span><span class="sxs-lookup"><span data-stu-id="a3aec-106">Often, the app is written by using a framework like AngularJS, Ember.js, or Durandal.</span></span> <span data-ttu-id="a3aec-107">Las aplicaciones de una sola página y otras aplicaciones JavaScript que se ejecutan principalmente en un explorador tienen algunos retos adicionales para la autenticación:</span><span class="sxs-lookup"><span data-stu-id="a3aec-107">Single-page apps and other JavaScript apps that run primarily in a browser have some additional challenges for authentication:</span></span>

* <span data-ttu-id="a3aec-108">Las características de seguridad de estas aplicaciones son significativamente diferentes de las de las aplicaciones web tradicionales basadas en el servidor.</span><span class="sxs-lookup"><span data-stu-id="a3aec-108">The security characteristics of these apps are significantly different from traditional server-based web applications.</span></span>
* <span data-ttu-id="a3aec-109">Muchos proveedores de identidades y servidores de autorización no admiten solicitudes de uso compartido de recursos entre orígenes (CORS).</span><span class="sxs-lookup"><span data-stu-id="a3aec-109">Many authorization servers and identity providers do not support cross-origin resource sharing (CORS) requests.</span></span>
* <span data-ttu-id="a3aec-110">Los redireccionamientos del explorador a una página completa fuera de la aplicación pueden ser especialmente invasivos para la experiencia del usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-110">Full-page browser redirects away from the app can be significantly invasive to the user experience.</span></span>

<span data-ttu-id="a3aec-111">Para admitir estas aplicaciones, Azure Active Directory B2C (Azure AD B2C) usa el flujo implícito de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="a3aec-111">To support these applications, Azure Active Directory B2C (Azure AD B2C) uses the OAuth 2.0 implicit flow.</span></span> <span data-ttu-id="a3aec-112">El flujo de concesión implícito de autorización de OAuth 2.0 se describe en la [sección 4.2 de la especificación de este protocolo](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="a3aec-112">The OAuth 2.0 authorization implicit grant flow is described in [section 4.2 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="a3aec-113">En el flujo implícito, la aplicación recibe tokens directamente del punto de conexión de autorización de Azure Active Directory (Azure AD), sin ningún intercambio de servidor a servidor.</span><span class="sxs-lookup"><span data-stu-id="a3aec-113">In implicit flow, the app receives tokens directly from the Azure Active Directory (Azure AD) authorize endpoint, without any server-to-server exchange.</span></span> <span data-ttu-id="a3aec-114">La lógica de autenticación y el control de sesiones tienen lugar por completo en el cliente de JavaScript, sin redireccionamientos de página adicionales.</span><span class="sxs-lookup"><span data-stu-id="a3aec-114">All authentication logic and session handling takes place entirely in the JavaScript client, without additional page redirects.</span></span>

<span data-ttu-id="a3aec-115">Azure AD B2C extiende el flujo implícito de OAuth 2.0 estándar para realizar algo más que una autorización y autenticación simples.</span><span class="sxs-lookup"><span data-stu-id="a3aec-115">Azure AD B2C extends the standard OAuth 2.0 implicit flow to more than simple authentication and authorization.</span></span> <span data-ttu-id="a3aec-116">Azure AD B2C presenta el [parámetro de directiva](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-116">Azure AD B2C introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="a3aec-117">Con el parámetro de directiva, puede usar OAuth 2.0 para agregar experiencias de usuario a su aplicación como registro, inicio de sesión y administración de perfiles.</span><span class="sxs-lookup"><span data-stu-id="a3aec-117">With the policy parameter, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="a3aec-118">En este artículo, le mostramos cómo usar el flujo implícito y Azure AD para implementar cada una de estas experiencias en sus aplicaciones de una página.</span><span class="sxs-lookup"><span data-stu-id="a3aec-118">In this article, we show you how to use the implicit flow and Azure AD to implement each of these experiences in your single-page applications.</span></span> <span data-ttu-id="a3aec-119">Vea nuestros ejemplos de [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) y [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) que le ayudarán a empezar a trabajar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-119">To help you get started, take a look at our [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) and [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) samples.</span></span>

<span data-ttu-id="a3aec-120">En las solicitudes HTTP de ejemplo de este artículo se usa nuestro directorio de ejemplo de Azure AD B2C, **fabrikamb2c.onmicrosoft.com**.</span><span class="sxs-lookup"><span data-stu-id="a3aec-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**.</span></span> <span data-ttu-id="a3aec-121">También se usa nuestra propia aplicación y nuestras directivas de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-121">We also use our own sample application and policies.</span></span> <span data-ttu-id="a3aec-122">Puede probar las solicitudes por sí mismo con estos valores, o bien puede reemplazarlos por los suyos propios.</span><span class="sxs-lookup"><span data-stu-id="a3aec-122">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="a3aec-123">Obtenga información sobre cómo [obtener su propio directorio, aplicación y directivas de Azure AD B2C](#use-your-own-b2c-tenant).</span><span class="sxs-lookup"><span data-stu-id="a3aec-123">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-b2c-tenant).</span></span>


## <a name="protocol-diagram"></a><span data-ttu-id="a3aec-124">Diagrama de protocolo</span><span class="sxs-lookup"><span data-stu-id="a3aec-124">Protocol diagram</span></span>

<span data-ttu-id="a3aec-125">El flujo de inicio de sesión implícito tiene un aspecto similar al de la figura siguiente.</span><span class="sxs-lookup"><span data-stu-id="a3aec-125">The implicit sign-in flow looks something like the following figure.</span></span> <span data-ttu-id="a3aec-126">Cada paso se describe con detalle más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-126">Each step is described in detail later in the article.</span></span>

![Calles OpenID Connect](../media/active-directory-v2-flows/convergence_scenarios_implicit.png)

## <a name="send-authentication-requests"></a><span data-ttu-id="a3aec-128">Envío de solicitudes de autenticación</span><span class="sxs-lookup"><span data-stu-id="a3aec-128">Send authentication requests</span></span>
<span data-ttu-id="a3aec-129">Cuando su aplicación web necesita autenticar al usuario y ejecutar la directiva, dirige al usuario al punto de conexión `/authorize`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-129">When your web app needs to authenticate the user and execute a policy, it directs the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="a3aec-130">Esta es la parte interactiva del flujo, donde el usuario realiza la acción, dependiendo de la directiva.</span><span class="sxs-lookup"><span data-stu-id="a3aec-130">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span> <span data-ttu-id="a3aec-131">El usuario obtiene un token de identificador del punto de conexión de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a3aec-131">The user gets an ID token from the Azure AD endpoint.</span></span>

<span data-ttu-id="a3aec-132">En esta solicitud, el cliente indica en el parámetro `scope` los permisos que debe obtener por parte del usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-132">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="a3aec-133">En el parámetro `p` indica la directiva que se debe ejecutar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-133">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="a3aec-134">Los siguientes tres ejemplos (con saltos de línea para facilitar la lectura) usan directivas diferentes.</span><span class="sxs-lookup"><span data-stu-id="a3aec-134">The following three examples (with line breaks for readability) each use a different policy.</span></span> <span data-ttu-id="a3aec-135">Para hacerse una idea de cómo funciona cada solicitud, intente pegar la solicitud en un explorador y volver a ejecutarlo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-135">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="a3aec-136">Uso de una directiva de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="a3aec-136">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="a3aec-137">Uso de una directiva de registro</span><span class="sxs-lookup"><span data-stu-id="a3aec-137">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="a3aec-138">Uso de una directiva de edición de perfil</span><span class="sxs-lookup"><span data-stu-id="a3aec-138">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="a3aec-139">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-139">Parameter</span></span> | <span data-ttu-id="a3aec-140">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="a3aec-140">Required?</span></span> | <span data-ttu-id="a3aec-141">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-141">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a3aec-142">client_id</span><span class="sxs-lookup"><span data-stu-id="a3aec-142">client_id</span></span> |<span data-ttu-id="a3aec-143">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-143">Required</span></span> |<span data-ttu-id="a3aec-144">Identificador de aplicación asignado a la aplicación en [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a3aec-144">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="a3aec-145">response_type</span><span class="sxs-lookup"><span data-stu-id="a3aec-145">response_type</span></span> |<span data-ttu-id="a3aec-146">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-146">Required</span></span> |<span data-ttu-id="a3aec-147">Debe incluir `id_token` para el inicio de sesión en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="a3aec-147">Must include `id_token` for OpenID Connect sign-in.</span></span> <span data-ttu-id="a3aec-148">También puede incluir el tipo de respuesta `token`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-148">It also can include the response type `token`.</span></span> <span data-ttu-id="a3aec-149">Si usa `token`, la aplicación puede recibir un token de acceso inmediatamente desde el punto de conexión autorizado sin realizar una segunda solicitud para autorizar el punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="a3aec-149">If you use `token`, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span>  <span data-ttu-id="a3aec-150">Si usa el tipo de respuesta `token`, el parámetro `scope` debe contener un ámbito que indica para qué recurso se va a emitir el token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-150">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="a3aec-151">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a3aec-151">redirect_uri</span></span> |<span data-ttu-id="a3aec-152">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-152">Recommended</span></span> |<span data-ttu-id="a3aec-153">El URI de redireccionamiento de la aplicación, adonde la aplicación puede enviar y recibir las respuestas de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-153">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="a3aec-154">Debe coincidir exactamente con uno de los URI de redireccionamiento que ha registrado en el portal, con la excepción de que debe estar codificado como URL.</span><span class="sxs-lookup"><span data-stu-id="a3aec-154">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="a3aec-155">response_mode</span><span class="sxs-lookup"><span data-stu-id="a3aec-155">response_mode</span></span> |<span data-ttu-id="a3aec-156">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-156">Recommended</span></span> |<span data-ttu-id="a3aec-157">Especifica el método que se usará para enviar el token resultante de nuevo a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-157">Specifies the method to use to send the resulting token back to your app.</span></span>  <span data-ttu-id="a3aec-158">Para los flujos implícitos, use `fragment`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-158">For implicit flows, use `fragment`.</span></span> |
| <span data-ttu-id="a3aec-159">ámbito</span><span class="sxs-lookup"><span data-stu-id="a3aec-159">scope</span></span> |<span data-ttu-id="a3aec-160">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-160">Required</span></span> |<span data-ttu-id="a3aec-161">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="a3aec-161">A space-separated list of scopes.</span></span> <span data-ttu-id="a3aec-162">Un valor de ámbito único indica a Azure AD los dos permisos que se solicitan.</span><span class="sxs-lookup"><span data-stu-id="a3aec-162">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="a3aec-163">El ámbito `openid` indica un permiso para iniciar sesión con el usuario y obtener los datos del usuario en forma de tokens de identificador.</span><span class="sxs-lookup"><span data-stu-id="a3aec-163">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="a3aec-164">(Hablaremos sobre esto posteriormente en el artículo). El ámbito `offline_access` es opcional para las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="a3aec-164">(We'll talk about this more later in the article.) The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="a3aec-165">Indica que la aplicación necesita un token de actualización para un acceso de larga duración a los recursos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-165">It indicates that your app needs a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="a3aec-166">state</span><span class="sxs-lookup"><span data-stu-id="a3aec-166">state</span></span> |<span data-ttu-id="a3aec-167">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-167">Recommended</span></span> |<span data-ttu-id="a3aec-168">Un valor incluido en la solicitud que también se devolverá en la respuesta del token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-168">A value included in the request that also is returned in the token response.</span></span> <span data-ttu-id="a3aec-169">Puede ser una cadena de cualquier contenido que quiera usar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-169">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="a3aec-170">Se suele usar un valor único generado de manera aleatoria para evitar los ataques de falsificación de solicitudes entre sitios.</span><span class="sxs-lookup"><span data-stu-id="a3aec-170">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="a3aec-171">El estado también se usa para codificar información sobre el estado del usuario en la aplicación antes de que se haya producido la solicitud de autenticación, por ejemplo, la página en la que estaban.</span><span class="sxs-lookup"><span data-stu-id="a3aec-171">The state is also used to encode information about the user's state in the app before the authentication request occurred, like the page they were on.</span></span> |
| <span data-ttu-id="a3aec-172">valor de seguridad</span><span class="sxs-lookup"><span data-stu-id="a3aec-172">nonce</span></span> |<span data-ttu-id="a3aec-173">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-173">Required</span></span> |<span data-ttu-id="a3aec-174">Un valor incluido en la solicitud (generada por la aplicación), que se incluye en el token de identificador resultante como una notificación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-174">A value included in the request (generated by the app) that is included in the resulting ID token as a claim.</span></span> <span data-ttu-id="a3aec-175">La aplicación puede comprobar este valor para mitigar los ataques de reproducción de token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-175">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="a3aec-176">Normalmente, el valor es una cadena única aleatoria que puede usarse para identificar el origen de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="a3aec-176">Usually, the value is a randomized, unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="a3aec-177">p</span><span class="sxs-lookup"><span data-stu-id="a3aec-177">p</span></span> |<span data-ttu-id="a3aec-178">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-178">Required</span></span> |<span data-ttu-id="a3aec-179">La directiva que se va a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-179">The policy to execute.</span></span> <span data-ttu-id="a3aec-180">Es el nombre de una directiva que se crea en el inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="a3aec-180">It's the name of a policy that is created in your Azure AD B2C tenant.</span></span> <span data-ttu-id="a3aec-181">El valor del nombre de directiva debe comenzar por **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="a3aec-181">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="a3aec-182">Para obtener más información, vea [Directivas integradas de Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-182">For more information, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="a3aec-183">símbolo del sistema</span><span class="sxs-lookup"><span data-stu-id="a3aec-183">prompt</span></span> |<span data-ttu-id="a3aec-184">Opcional</span><span class="sxs-lookup"><span data-stu-id="a3aec-184">Optional</span></span> |<span data-ttu-id="a3aec-185">El tipo de interacción con el usuario que se necesita.</span><span class="sxs-lookup"><span data-stu-id="a3aec-185">The type of user interaction that's required.</span></span> <span data-ttu-id="a3aec-186">Actualmente, el único valor válido es `login`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-186">Currently, the only valid value is `login`.</span></span> <span data-ttu-id="a3aec-187">Esto obliga al usuario a escribir sus credenciales en esa solicitud.</span><span class="sxs-lookup"><span data-stu-id="a3aec-187">This forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="a3aec-188">El inicio de sesión único no surtirá efecto.</span><span class="sxs-lookup"><span data-stu-id="a3aec-188">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="a3aec-189">En este punto se pedirá al usuario que complete el flujo de trabajo de la directiva.</span><span class="sxs-lookup"><span data-stu-id="a3aec-189">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="a3aec-190">Esto puede implicar que el usuario tenga que escribir su nombre de usuario y contraseña, iniciar sesión con una identidad social, registrarse en el directorio o realizar otros pasos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-190">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="a3aec-191">Las acciones del usuario dependerán de cómo se defina la directiva.</span><span class="sxs-lookup"><span data-stu-id="a3aec-191">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="a3aec-192">Cuando el usuario haya completado la directiva, Azure AD devolverá una respuesta a la aplicación en el valor que ha usado para `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-192">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="a3aec-193">Usa el método especificado en el parámetro `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-193">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="a3aec-194">La respuesta es exactamente la misma para cada uno de los escenarios de acción del usuario, independientemente de la directiva que se haya ejecutado.</span><span class="sxs-lookup"><span data-stu-id="a3aec-194">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

### <a name="successful-response"></a><span data-ttu-id="a3aec-195">Respuesta correcta</span><span class="sxs-lookup"><span data-stu-id="a3aec-195">Successful response</span></span>
<span data-ttu-id="a3aec-196">Una respuesta correcta que usa `response_mode=fragment` y `response_type=id_token+token` es como la siguiente, con saltos de línea para mejorar la legibilidad:</span><span class="sxs-lookup"><span data-stu-id="a3aec-196">A successful response that uses `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&token_type=Bearer
&expires_in=3599
&scope="90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
&id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
```

| <span data-ttu-id="a3aec-197">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-197">Parameter</span></span> | <span data-ttu-id="a3aec-198">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-198">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a3aec-199">access_token</span><span class="sxs-lookup"><span data-stu-id="a3aec-199">access_token</span></span> |<span data-ttu-id="a3aec-200">El token de acceso que solicitó la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-200">The access token that the app requested.</span></span>  <span data-ttu-id="a3aec-201">El token de acceso no se debe descodificar o inspeccionar de otro modo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-201">The access token should not be decoded or otherwise inspected.</span></span> <span data-ttu-id="a3aec-202">Puede tratarse como una cadena opaca.</span><span class="sxs-lookup"><span data-stu-id="a3aec-202">It can be treated as an opaque string.</span></span> |
| <span data-ttu-id="a3aec-203">token_type</span><span class="sxs-lookup"><span data-stu-id="a3aec-203">token_type</span></span> |<span data-ttu-id="a3aec-204">El valor del tipo de token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-204">The token type value.</span></span> <span data-ttu-id="a3aec-205">El único tipo que admite Azure AD es portador.</span><span class="sxs-lookup"><span data-stu-id="a3aec-205">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="a3aec-206">expires_in</span><span class="sxs-lookup"><span data-stu-id="a3aec-206">expires_in</span></span> |<span data-ttu-id="a3aec-207">El período de validez del token de acceso (en segundos).</span><span class="sxs-lookup"><span data-stu-id="a3aec-207">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="a3aec-208">ámbito</span><span class="sxs-lookup"><span data-stu-id="a3aec-208">scope</span></span> |<span data-ttu-id="a3aec-209">Los ámbitos para los que el token es válido.</span><span class="sxs-lookup"><span data-stu-id="a3aec-209">The scopes that the token is valid for.</span></span> <span data-ttu-id="a3aec-210">También puede usar ámbitos para almacenar en caché los tokens para su posterior uso.</span><span class="sxs-lookup"><span data-stu-id="a3aec-210">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="a3aec-211">ID_token</span><span class="sxs-lookup"><span data-stu-id="a3aec-211">id_token</span></span> |<span data-ttu-id="a3aec-212">El token de identificador que la aplicación solicitó.</span><span class="sxs-lookup"><span data-stu-id="a3aec-212">The ID token that the app requested.</span></span> <span data-ttu-id="a3aec-213">Puede usar el token de identificador para comprobar la identidad del usuario y comenzar una sesión con el usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-213">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="a3aec-214">Para obtener más información sobre los tokens de identificador y su contenido, vea [Azure AD B2C: referencia de tokens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-214">For more information about ID tokens and their contents, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="a3aec-215">state</span><span class="sxs-lookup"><span data-stu-id="a3aec-215">state</span></span> |<span data-ttu-id="a3aec-216">Si un parámetro `state` está incluido en la solicitud, debería aparecer el mismo valor en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="a3aec-216">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="a3aec-217">La aplicación debe comprobar que los valores `state` de la solicitud y de la respuesta sean idénticos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-217">The app should verify that the `state` values in the request and response are identical.</span></span> |

### <a name="error-response"></a><span data-ttu-id="a3aec-218">Respuesta de error</span><span class="sxs-lookup"><span data-stu-id="a3aec-218">Error response</span></span>
<span data-ttu-id="a3aec-219">Las respuestas de error también se pueden enviar al URI de redireccionamiento para que la aplicación pueda controlarlas correctamente:</span><span class="sxs-lookup"><span data-stu-id="a3aec-219">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="a3aec-220">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-220">Parameter</span></span> | <span data-ttu-id="a3aec-221">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-221">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a3aec-222">error</span><span class="sxs-lookup"><span data-stu-id="a3aec-222">error</span></span> |<span data-ttu-id="a3aec-223">Una cadena de código de error que se usa para clasificar los tipos de errores que se producen.</span><span class="sxs-lookup"><span data-stu-id="a3aec-223">An error code string used to classify types of errors that occur.</span></span> <span data-ttu-id="a3aec-224">También puede usar el código de error para el control de errores.</span><span class="sxs-lookup"><span data-stu-id="a3aec-224">You also can use the error code for error handling.</span></span> |
| <span data-ttu-id="a3aec-225">error_description</span><span class="sxs-lookup"><span data-stu-id="a3aec-225">error_description</span></span> |<span data-ttu-id="a3aec-226">Un mensaje de error específico que puede ayudarlo a identificar la causa raíz de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-226">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="a3aec-227">state</span><span class="sxs-lookup"><span data-stu-id="a3aec-227">state</span></span> |<span data-ttu-id="a3aec-228">Vea la descripción completa en la tabla anterior.</span><span class="sxs-lookup"><span data-stu-id="a3aec-228">See the full description in the preceding table.</span></span> <span data-ttu-id="a3aec-229">Si un parámetro `state` está incluido en la solicitud, debería aparecer el mismo valor en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="a3aec-229">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="a3aec-230">La aplicación debe comprobar que los valores `state` de la solicitud y de la respuesta sean idénticos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-230">The app should verify that the `state` values in the request and response are identical.</span></span>|

## <a name="validate-the-id-token"></a><span data-ttu-id="a3aec-231">Validar el token de identificador</span><span class="sxs-lookup"><span data-stu-id="a3aec-231">Validate the ID token</span></span>
<span data-ttu-id="a3aec-232">Recibir un token de identificador no es suficiente para autenticar al usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-232">Receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="a3aec-233">Debe validar la firma del token de identificador y comprobar las notificaciones en el token en función de los requisitos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-233">You must validate the ID token's signature, and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="a3aec-234">Azure AD B2C usa [tokens web JSON (JWT)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) y la criptografía de clave pública para firmar los tokens y comprobar que son válidos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-234">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="a3aec-235">Muchas bibliotecas de código abierto están disponibles para validar los JWT, según su lenguaje preferido.</span><span class="sxs-lookup"><span data-stu-id="a3aec-235">Many open-source libraries are available for validating JWTs, depending on the language you prefer to use.</span></span> <span data-ttu-id="a3aec-236">Considere la posibilidad de explorar las bibliotecas de código abierto disponibles, en lugar de implementar su propia lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-236">Consider exploring available open-source libraries rather than implementing your own validation logic.</span></span> <span data-ttu-id="a3aec-237">Puede usar la información de este artículo para ayudarle a obtener información sobre cómo usar correctamente esas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="a3aec-237">You can use the information in this article to help you learn how to properly use those libraries.</span></span>

<span data-ttu-id="a3aec-238">Azure AD B2C tiene un punto de conexión de metadatos OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="a3aec-238">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="a3aec-239">Una aplicación puede usar el punto de conexión para obtener información sobre Azure AD B2C en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a3aec-239">An app can use the endpoint to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="a3aec-240">En esta información se incluyen los extremos, los contenidos del token y las claves de firma de los token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-240">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="a3aec-241">Hay un documento de metadatos JSON para cada directiva en su inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="a3aec-241">There is a JSON metadata document for each policy in your Azure AD B2C tenant.</span></span> <span data-ttu-id="a3aec-242">Por ejemplo, el documento de metadatos para la directiva b2c_1_sign_in del inquilino fabrikamb2c.onmicrosoft.com se encuentra en:</span><span class="sxs-lookup"><span data-stu-id="a3aec-242">For example, the metadata document for the b2c_1_sign_in policy in the fabrikamb2c.onmicrosoft.com tenant is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="a3aec-243">Una de las propiedades de este documento de configuración es `jwks_uri`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-243">One of the properties of this configuration document is the `jwks_uri`.</span></span> <span data-ttu-id="a3aec-244">El valor de la misma directiva sería:</span><span class="sxs-lookup"><span data-stu-id="a3aec-244">The value for the same policy would be:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`

<span data-ttu-id="a3aec-245">Para determinar qué directiva se ha usado para firmar un token de identificador (y de dónde obtener los metadatos), tiene dos opciones.</span><span class="sxs-lookup"><span data-stu-id="a3aec-245">To determine which policy was used to sign an ID token (and where to fetch the metadata from), you have two options.</span></span> <span data-ttu-id="a3aec-246">En primer lugar, el nombre de la directiva se incluye en la notificación `acr` de `id_token`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-246">First, the policy name is included in the `acr` claim in `id_token`.</span></span> <span data-ttu-id="a3aec-247">Para obtener más información sobre cómo analizar las notificaciones de un token de identificador, vea [Azure AD B2C: referencia de tokens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-247">For information about how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="a3aec-248">La otra opción consiste en codificar la directiva en el valor del parámetro `state` al emitir la solicitud.</span><span class="sxs-lookup"><span data-stu-id="a3aec-248">Your other option is to encode the policy in the value of the `state` parameter when you issue the request.</span></span> <span data-ttu-id="a3aec-249">Después, descodifique el parámetro `state` para determinar qué directiva se ha usado.</span><span class="sxs-lookup"><span data-stu-id="a3aec-249">Then, decode the `state` parameter to determine which policy was used.</span></span> <span data-ttu-id="a3aec-250">Cualquiera de estos métodos es válido.</span><span class="sxs-lookup"><span data-stu-id="a3aec-250">Either method is valid.</span></span>

<span data-ttu-id="a3aec-251">Cuando haya adquirido el documento de metadatos del punto de conexión de metadatos de OpenID Connect, podrá usar las claves públicas RSA-256 (que están ubicadas en este punto de conexión) para validar la firma del token de identificador.</span><span class="sxs-lookup"><span data-stu-id="a3aec-251">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA-256 public keys (located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="a3aec-252">Podría haber varias claves enumeradas en este punto de conexión en cualquier momento, cada una identificada con una `kid`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-252">There might be multiple keys listed at this endpoint at any given time, each identified by a `kid`.</span></span> <span data-ttu-id="a3aec-253">El encabezado de `id_token` también contiene una notificación `kid`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-253">The header of `id_token` also contains a `kid` claim.</span></span> <span data-ttu-id="a3aec-254">Indica cuál de estas claves se ha usado para firmar el token de identificador.</span><span class="sxs-lookup"><span data-stu-id="a3aec-254">It indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="a3aec-255">Para obtener más información, incluida la información para [validar los tokens](active-directory-b2c-reference-tokens.md#token-validation), vea [Azure AD B2C: referencia de tokens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-255">For more information, including learning about [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="a3aec-256">Después de que valide la firma del token de identificador, varias notificaciones necesitan comprobarse.</span><span class="sxs-lookup"><span data-stu-id="a3aec-256">After you validate the signature of the ID token, several claims require verification.</span></span> <span data-ttu-id="a3aec-257">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="a3aec-257">For example:</span></span>

* <span data-ttu-id="a3aec-258">Valide la notificación `nonce` para evitar ataques de reproducción del token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-258">Validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="a3aec-259">Su valor debería ser el que especificó en la solicitud de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="a3aec-259">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="a3aec-260">Valide la notificación `aud` para asegurarse de que se ha generado el token de identificador para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-260">Validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="a3aec-261">Su valor debería ser el identificador de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-261">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="a3aec-262">Valide las notificaciones `iat` y `exp` para asegurarse de que el token de identificador no ha expirado.</span><span class="sxs-lookup"><span data-stu-id="a3aec-262">Validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="a3aec-263">Varias validaciones más que debe realizar se describen en detalle en la [especificación de OpenID Connect Core](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="a3aec-263">Several more validations that you should perform are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> <span data-ttu-id="a3aec-264">Podría también querer validar notificaciones adicionales, en función de su escenario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-264">You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="a3aec-265">Algunas validaciones comunes incluyen:</span><span class="sxs-lookup"><span data-stu-id="a3aec-265">Some common validations include:</span></span>

* <span data-ttu-id="a3aec-266">Asegurarse de que la organización o el usuario se han registrado en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-266">Ensuring that the user or organization has signed up for the app.</span></span>
* <span data-ttu-id="a3aec-267">Asegurarse de que el usuario tiene la autorización y los privilegios adecuados.</span><span class="sxs-lookup"><span data-stu-id="a3aec-267">Ensuring that the user has proper authorization and privileges.</span></span>
* <span data-ttu-id="a3aec-268">Asegurarse de que se haya producido un determinado nivel de autenticación, como al usar Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="a3aec-268">Ensuring that a certain strength of authentication has occurred, such as by using Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="a3aec-269">Para obtener más información sobre las notificaciones en un token de identificador, vea [Azure AD B2C: referencia de tokens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-269">For more information about the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="a3aec-270">Una vez que valide completamente el token de identificador, puede comenzar una sesión con el usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-270">After you have completely validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="a3aec-271">Use las notificaciones del token de identificador para obtener información sobre el usuario en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-271">In your app, use the claims in the ID token to obtain information about the user.</span></span> <span data-ttu-id="a3aec-272">Esta información puede usarse para su visualización, registros, autorizaciones, etc.</span><span class="sxs-lookup"><span data-stu-id="a3aec-272">This information can be used for display, records, authorization, and so on.</span></span>

## <a name="get-access-tokens"></a><span data-ttu-id="a3aec-273">Obtención de tokens de acceso</span><span class="sxs-lookup"><span data-stu-id="a3aec-273">Get access tokens</span></span>
<span data-ttu-id="a3aec-274">Si lo único que sus aplicaciones web necesitan hacer es ejecutar directivas, puede omitir las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="a3aec-274">If the only thing your web apps needs to do is execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="a3aec-275">La información de las siguientes secciones se aplica solo a las aplicaciones web que necesitan realizar llamadas autenticadas a una API web y que están protegidas por Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="a3aec-275">The information in the following sections are applicable only to web apps that need to make authenticated calls to a web API, and which are protected by Azure AD B2C.</span></span>

<span data-ttu-id="a3aec-276">Ahora que ha iniciado la sesión del usuario en su aplicación de una página, puede obtener tokens de acceso para llamar a las API web que están protegidas por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a3aec-276">Now that you've signed the user in to your single-page app, you can get access tokens for calling web APIs that are secured by Azure AD.</span></span> <span data-ttu-id="a3aec-277">Incluso si ya ha recibido un token mediante el tipo de respuesta `token`, puede usar este método para adquirir tokens para recursos adicionales sin redirigir al usuario para que vuelva a iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="a3aec-277">Even if you have already received a token by using the `token` response type, you can use this method to acquire tokens for additional resources without redirecting the user to sign in again.</span></span>

<span data-ttu-id="a3aec-278">En el flujo de aplicación web normal, podría hacer esto realizando una solicitud al punto de conexión `/token`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-278">In a typical web app flow, you would do this by making a request to the `/token` endpoint.</span></span>  <span data-ttu-id="a3aec-279">En cambio, el punto de conexión no admite solicitudes CORS, así que las llamadas a AJAX para obtener y actualizar los tokens no son una opción.</span><span class="sxs-lookup"><span data-stu-id="a3aec-279">However, the endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is not an option.</span></span> <span data-ttu-id="a3aec-280">En su lugar, puede usar el flujo implícito en un elemento iframe HTML oculto para obtener nuevos tokens para otras API web.</span><span class="sxs-lookup"><span data-stu-id="a3aec-280">Instead, you can use the implicit flow in a hidden HTML iframe element to get new tokens for other web APIs.</span></span> <span data-ttu-id="a3aec-281">Aquí se muestra un ejemplo, con saltos de línea por motivos de legibilidad:</span><span class="sxs-lookup"><span data-stu-id="a3aec-281">Here's an example, with line breaks for legibility:</span></span>

```

https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
&response_mode=fragment
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&prompt=none
&domain_hint=organizations
&login_hint=myuser@mycompany.com
&p=b2c_1_sign_in
```

| <span data-ttu-id="a3aec-282">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-282">Parameter</span></span> | <span data-ttu-id="a3aec-283">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="a3aec-283">Required?</span></span> | <span data-ttu-id="a3aec-284">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-284">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a3aec-285">client_id</span><span class="sxs-lookup"><span data-stu-id="a3aec-285">client_id</span></span> |<span data-ttu-id="a3aec-286">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-286">Required</span></span> |<span data-ttu-id="a3aec-287">Identificador de aplicación asignado a la aplicación en [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a3aec-287">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="a3aec-288">response_type</span><span class="sxs-lookup"><span data-stu-id="a3aec-288">response_type</span></span> |<span data-ttu-id="a3aec-289">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-289">Required</span></span> |<span data-ttu-id="a3aec-290">Debe incluir `id_token` para el inicio de sesión en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="a3aec-290">Must include `id_token` for OpenID Connect sign-in.</span></span>  <span data-ttu-id="a3aec-291">También puede incluir el tipo de respuesta `token`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-291">It might also include the response type `token`.</span></span> <span data-ttu-id="a3aec-292">Si usa `token` aquí, la aplicación puede recibir un token de acceso inmediatamente desde el punto de conexión autorizado sin realizar una segunda solicitud para autorizar el punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="a3aec-292">If you use `token` here, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span> <span data-ttu-id="a3aec-293">Si usa el tipo de respuesta `token`, el parámetro `scope` debe contener un ámbito que indica para qué recurso se va a emitir el token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-293">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="a3aec-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a3aec-294">redirect_uri</span></span> |<span data-ttu-id="a3aec-295">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-295">Recommended</span></span> |<span data-ttu-id="a3aec-296">El URI de redireccionamiento de la aplicación, adonde la aplicación puede enviar y recibir las respuestas de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-296">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="a3aec-297">Debe coincidir exactamente con uno de los URI de redireccionamiento que ha registrado en el portal, con la excepción de que debe estar codificado como URL.</span><span class="sxs-lookup"><span data-stu-id="a3aec-297">It must exactly match one of the redirect URIs you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="a3aec-298">ámbito</span><span class="sxs-lookup"><span data-stu-id="a3aec-298">scope</span></span> |<span data-ttu-id="a3aec-299">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-299">Required</span></span> |<span data-ttu-id="a3aec-300">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="a3aec-300">A space-separated list of scopes.</span></span>  <span data-ttu-id="a3aec-301">Para obtener los tokens, incluya todos los ámbitos que necesita para el recurso previsto.</span><span class="sxs-lookup"><span data-stu-id="a3aec-301">For getting tokens, include all scopes that you require for the intended resource.</span></span> |
| <span data-ttu-id="a3aec-302">response_mode</span><span class="sxs-lookup"><span data-stu-id="a3aec-302">response_mode</span></span> |<span data-ttu-id="a3aec-303">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-303">Recommended</span></span> |<span data-ttu-id="a3aec-304">Especifica el método que se usará para enviar el token resultante de nuevo a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-304">Specifies the method that is used to send the resulting token back to your app.</span></span>  <span data-ttu-id="a3aec-305">Puede ser `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-305">Can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="a3aec-306">state</span><span class="sxs-lookup"><span data-stu-id="a3aec-306">state</span></span> |<span data-ttu-id="a3aec-307">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-307">Recommended</span></span> |<span data-ttu-id="a3aec-308">Un valor incluido en la solicitud que se devolverá en la respuesta del token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-308">A value included in the request that is returned in the token response.</span></span>  <span data-ttu-id="a3aec-309">Puede ser una cadena de cualquier contenido que quiera usar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-309">It can be a string of any content that you want to use.</span></span>  <span data-ttu-id="a3aec-310">Se suele usar un valor único generado de manera aleatoria para evitar los ataques de falsificación de solicitudes entre sitios.</span><span class="sxs-lookup"><span data-stu-id="a3aec-310">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span>  <span data-ttu-id="a3aec-311">El estado también se usa para codificar información sobre el estado del usuario en la aplicación antes de que se haya producido la solicitud de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-311">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="a3aec-312">Por ejemplo, la página o la vista en la que ha estado el usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-312">For example, the page or view the user was on.</span></span> |
| <span data-ttu-id="a3aec-313">valor de seguridad</span><span class="sxs-lookup"><span data-stu-id="a3aec-313">nonce</span></span> |<span data-ttu-id="a3aec-314">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-314">Required</span></span> |<span data-ttu-id="a3aec-315">Un valor incluido en la solicitud, generada por la aplicación, que se incluirá en el token de identificador resultante como una notificación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-315">A value included in the request, generated by the app, that is included in the resulting ID token as a claim.</span></span>  <span data-ttu-id="a3aec-316">La aplicación puede comprobar este valor para mitigar los ataques de reproducción de token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-316">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="a3aec-317">Normalmente, el valor es una cadena única aleatoria que puede identificar el origen de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="a3aec-317">Usually, the value is a randomized, unique string that identifies the origin of the request.</span></span> |
| <span data-ttu-id="a3aec-318">símbolo del sistema</span><span class="sxs-lookup"><span data-stu-id="a3aec-318">prompt</span></span> |<span data-ttu-id="a3aec-319">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-319">Required</span></span> |<span data-ttu-id="a3aec-320">Para actualizar y obtener tokens en un iframe oculto, use `prompt=none` para asegurarse de que el iframe no se bloquea en la página de inicio de sesión y se devuelve inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="a3aec-320">To refresh and get tokens in a hidden iframe, use `prompt=none` to ensure that the iframe does not get stuck on the sign-in page, and returns immediately.</span></span> |
| <span data-ttu-id="a3aec-321">login_hint</span><span class="sxs-lookup"><span data-stu-id="a3aec-321">login_hint</span></span> |<span data-ttu-id="a3aec-322">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-322">Required</span></span> |<span data-ttu-id="a3aec-323">Para actualizar y obtener tokens en un iframe oculto, incluya el nombre de usuario del usuario en esta sugerencia para distinguir entre varias sesiones que el usuario pueda tener en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="a3aec-323">To refresh and get tokens in a hidden iframe, include the username of the user in this hint to distinguish between multiple sessions the user might have at a given  time.</span></span> <span data-ttu-id="a3aec-324">Puede extraer el nombre de usuario de un inicio de sesión anterior mediante la notificación `preferred_username`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-324">You can extract the username from an earlier sign-in by using the `preferred_username` claim.</span></span> |
| <span data-ttu-id="a3aec-325">domain_hint</span><span class="sxs-lookup"><span data-stu-id="a3aec-325">domain_hint</span></span> |<span data-ttu-id="a3aec-326">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-326">Required</span></span> |<span data-ttu-id="a3aec-327">Puede ser `consumers` o `organizations`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-327">Can be `consumers` or `organizations`.</span></span>  <span data-ttu-id="a3aec-328">Para actualizar y obtener tokens en un iframe oculto, debe incluir el valor `domain_hint` en la solicitud.</span><span class="sxs-lookup"><span data-stu-id="a3aec-328">For refreshing and getting tokens in a hidden iframe, you must include the `domain_hint` value in the request.</span></span>  <span data-ttu-id="a3aec-329">Extraiga la notificación `tid` del token de identificador de un inicio de sesión anterior para determinar qué valor va a usar.</span><span class="sxs-lookup"><span data-stu-id="a3aec-329">Extract the `tid` claim from the ID token of an earlier sign-in to determine which value to use.</span></span>  <span data-ttu-id="a3aec-330">Si el valor de la notificación `tid` es `9188040d-6c67-4c5b-b112-36a304b66dad`, use `domain_hint=consumers`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-330">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`,  use `domain_hint=consumers`.</span></span>  <span data-ttu-id="a3aec-331">De lo contrario, use `domain_hint=organizations`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-331">Otherwise, use `domain_hint=organizations`.</span></span> |

<span data-ttu-id="a3aec-332">Al establecer el parámetro `prompt=none`, esta solicitud se realiza correctamente o produce un error inmediatamente, y vuelve a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-332">By setting the `prompt=none` parameter, this request either succeeds or fails immediately, and returns to your application.</span></span>  <span data-ttu-id="a3aec-333">Se envía una respuesta correcta a la aplicación en el URI de redireccionamiento indicado, mediante el método especificado en el parámetro `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-333">A successful response is sent to your app at the indicated redirect URI, by using the method specified in the `response_mode` parameter.</span></span>

### <a name="successful-response"></a><span data-ttu-id="a3aec-334">Respuesta correcta</span><span class="sxs-lookup"><span data-stu-id="a3aec-334">Successful response</span></span>
<span data-ttu-id="a3aec-335">Una respuesta correcta al usar `response_mode=fragment` tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="a3aec-335">A successful response by using `response_mode=fragment` looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
&token_type=Bearer
&expires_in=3599
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
```

| <span data-ttu-id="a3aec-336">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-336">Parameter</span></span> | <span data-ttu-id="a3aec-337">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-337">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a3aec-338">access_token</span><span class="sxs-lookup"><span data-stu-id="a3aec-338">access_token</span></span> |<span data-ttu-id="a3aec-339">El token que solicitó la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-339">The token that the app requested.</span></span> |
| <span data-ttu-id="a3aec-340">token_type</span><span class="sxs-lookup"><span data-stu-id="a3aec-340">token_type</span></span> |<span data-ttu-id="a3aec-341">El tipo de token siempre será un token de portador.</span><span class="sxs-lookup"><span data-stu-id="a3aec-341">The token type will always be Bearer.</span></span> |
| <span data-ttu-id="a3aec-342">state</span><span class="sxs-lookup"><span data-stu-id="a3aec-342">state</span></span> |<span data-ttu-id="a3aec-343">Si un parámetro `state` está incluido en la solicitud, debería aparecer el mismo valor en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="a3aec-343">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="a3aec-344">La aplicación debe comprobar que los valores `state` de la solicitud y de la respuesta sean idénticos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-344">The app should verify that the `state` values in the request and response are identical.</span></span> |
| <span data-ttu-id="a3aec-345">expires_in</span><span class="sxs-lookup"><span data-stu-id="a3aec-345">expires_in</span></span> |<span data-ttu-id="a3aec-346">Durante cuánto tiempo es válido el token de acceso (en segundos).</span><span class="sxs-lookup"><span data-stu-id="a3aec-346">How long the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="a3aec-347">ámbito</span><span class="sxs-lookup"><span data-stu-id="a3aec-347">scope</span></span> |<span data-ttu-id="a3aec-348">Los ámbitos para los que el token de acceso es válido.</span><span class="sxs-lookup"><span data-stu-id="a3aec-348">The scopes that the access token is valid for.</span></span> |

### <a name="error-response"></a><span data-ttu-id="a3aec-349">Respuesta de error</span><span class="sxs-lookup"><span data-stu-id="a3aec-349">Error response</span></span>
<span data-ttu-id="a3aec-350">Las respuestas de error también se pueden enviar al URI de redireccionamiento para que la aplicación pueda controlarlas correctamente.</span><span class="sxs-lookup"><span data-stu-id="a3aec-350">Error responses also can be sent to the redirect URI so that the app can handle them appropriately.</span></span>  <span data-ttu-id="a3aec-351">Para `prompt=none`, un error esperado tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="a3aec-351">For `prompt=none`, an expected error looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=user_authentication_required
&error_description=the+request+could+not+be+completed+silently
```

| <span data-ttu-id="a3aec-352">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-352">Parameter</span></span> | <span data-ttu-id="a3aec-353">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-353">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a3aec-354">error</span><span class="sxs-lookup"><span data-stu-id="a3aec-354">error</span></span> |<span data-ttu-id="a3aec-355">Una cadena de código de error que puede usarse para clasificar los tipos de errores que se producen.</span><span class="sxs-lookup"><span data-stu-id="a3aec-355">An error code string that can be used to classify types of errors that occur.</span></span> <span data-ttu-id="a3aec-356">También puede usar la cadena para reaccionar frente a errores.</span><span class="sxs-lookup"><span data-stu-id="a3aec-356">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="a3aec-357">error_description</span><span class="sxs-lookup"><span data-stu-id="a3aec-357">error_description</span></span> |<span data-ttu-id="a3aec-358">Un mensaje de error específico que puede ayudarlo a identificar la causa raíz de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-358">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

<span data-ttu-id="a3aec-359">Si recibe este error en la solicitud de iframe, el usuario debe iniciar sesión de nuevo de manera interactiva para recuperar un nuevo token.</span><span class="sxs-lookup"><span data-stu-id="a3aec-359">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span></span> <span data-ttu-id="a3aec-360">Puede controlar esto de manera que tenga sentido para su aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-360">You can handle this in a way that makes sense for your application.</span></span>

## <a name="refresh-tokens"></a><span data-ttu-id="a3aec-361">Tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="a3aec-361">Refresh tokens</span></span>
<span data-ttu-id="a3aec-362">Los tokens de identificador y los tokens de acceso expiran tras un breve período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-362">ID tokens and access tokens both expire after a short period of time.</span></span> <span data-ttu-id="a3aec-363">La aplicación debe estar preparada para actualizar estos tokens periódicamente.</span><span class="sxs-lookup"><span data-stu-id="a3aec-363">Your app must be prepared to refresh these tokens periodically.</span></span>  <span data-ttu-id="a3aec-364">Para actualizar cualquier tipo de token, realice la misma solicitud de iframe oculto que hemos usado en un ejemplo anterior, mediante el parámetro `prompt=none` para controlar los pasos de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a3aec-364">To refresh either type of token, perform the same hidden iframe request we used in an earlier example, by using the `prompt=none` parameter to control Azure AD steps.</span></span>  <span data-ttu-id="a3aec-365">Para recibir un nuevo valor `id_token`, asegúrese de usar `response_type=id_token` y `scope=openid`, y un parámetro `nonce`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-365">To receive a new `id_token` value, be sure to use `response_type=id_token` and `scope=openid`, and a `nonce` parameter.</span></span>

## <a name="send-a-sign-out-request"></a><span data-ttu-id="a3aec-366">Envío de una solicitud de cierre de sesión</span><span class="sxs-lookup"><span data-stu-id="a3aec-366">Send a sign-out request</span></span>
<span data-ttu-id="a3aec-367">Cuando quiera iniciar sesión fuera de la aplicación, redirija al usuario a Azure AD para cerrar la sesión.</span><span class="sxs-lookup"><span data-stu-id="a3aec-367">When you want to sign the user out of the app, redirect the user to Azure AD to sign out.</span></span> <span data-ttu-id="a3aec-368">Si no lo hace, el usuario podría autenticarse de nuevo en su aplicación sin volver a escribir sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="a3aec-368">If you don't do this, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="a3aec-369">Esto se debe a que el usuario tendrá una sesión válida de inicio de sesión único con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a3aec-369">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="a3aec-370">Lo que puede hacer es simplemente redirigir al usuario al elemento `end_session_endpoint` que se enumera en el mismo documento de metadatos de OpenID Connect que se ha descrito en [Validar el token de identificador](#validate-the-id-token).</span><span class="sxs-lookup"><span data-stu-id="a3aec-370">You can simply redirect the user to the `end_session_endpoint` that is listed in the same OpenID Connect metadata document described in [Validate the ID token](#validate-the-id-token).</span></span> <span data-ttu-id="a3aec-371">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="a3aec-371">For example:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="a3aec-372">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a3aec-372">Parameter</span></span> | <span data-ttu-id="a3aec-373">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="a3aec-373">Required?</span></span> | <span data-ttu-id="a3aec-374">Description</span><span class="sxs-lookup"><span data-stu-id="a3aec-374">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a3aec-375">p</span><span class="sxs-lookup"><span data-stu-id="a3aec-375">p</span></span> |<span data-ttu-id="a3aec-376">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="a3aec-376">Required</span></span> |<span data-ttu-id="a3aec-377">La directiva que se usará para cerrar la sesión del usuario de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-377">The policy to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="a3aec-378">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a3aec-378">post_logout_redirect_uri</span></span> |<span data-ttu-id="a3aec-379">Recomendado</span><span class="sxs-lookup"><span data-stu-id="a3aec-379">Recommended</span></span> |<span data-ttu-id="a3aec-380">La dirección URL a la que se debe redirigir al usuario después de un cierre de sesión correcto.</span><span class="sxs-lookup"><span data-stu-id="a3aec-380">The URL that the user should be redirected to after successful sign-out.</span></span> <span data-ttu-id="a3aec-381">Si no se incluye, Azure AD B2C muestra un mensaje genérico al usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-381">If it is not included, Azure AD B2C displays a generic message to the user.</span></span> |

> [!NOTE]
> <span data-ttu-id="a3aec-382">Al dirigir al usuario a `end_session_endpoint` se borra parte del estado del inicio de sesión único del usuario con Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="a3aec-382">Directing the user to the `end_session_endpoint` clears some of the user's single sign-on state with Azure AD B2C.</span></span> <span data-ttu-id="a3aec-383">En cambio, no cierra la sesión del proveedor de identidades sociales del usuario.</span><span class="sxs-lookup"><span data-stu-id="a3aec-383">However, it doesn't sign the user out of the user's social identity provider session.</span></span> <span data-ttu-id="a3aec-384">Si el usuario selecciona el mismo proveedor de identidades durante un inicio de sesión posterior, este se vuelve a autenticar sin especificar sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="a3aec-384">If the user selects the same identify provider during a subsequent sign-in, the user is reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="a3aec-385">Si un usuario quiere cerrar sesión en su aplicación de Azure AD B2C, eso no significa necesariamente que quiera cerrar sesión completamente en su cuenta de Facebook, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="a3aec-385">If a user wants to sign out of your Azure AD B2C application, it does not necessarily mean they want to completely sign out of their Facebook account, for example.</span></span> <span data-ttu-id="a3aec-386">En cambio, para las cuentas locales, la sesión del usuario se terminará correctamente.</span><span class="sxs-lookup"><span data-stu-id="a3aec-386">However, for local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-azure-ad-b2c-tenant"></a><span data-ttu-id="a3aec-387">Usar su propio inquilino de Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="a3aec-387">Use your own Azure AD B2C tenant</span></span>
<span data-ttu-id="a3aec-388">Para probar estas solicitudes, realice los siguientes tres pasos.</span><span class="sxs-lookup"><span data-stu-id="a3aec-388">To try these requests yourself, complete the following three steps.</span></span> <span data-ttu-id="a3aec-389">Reemplace los valores de ejemplo que hemos usado en este artículo por los suyos propios:</span><span class="sxs-lookup"><span data-stu-id="a3aec-389">Replace the example values we use in this article with your own values:</span></span>

1. <span data-ttu-id="a3aec-390">[Crear un inquilino de Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="a3aec-390">[Create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="a3aec-391">Use el nombre del inquilino en las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="a3aec-391">Use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="a3aec-392">[Crear una aplicación](active-directory-b2c-app-registration.md) para obtener un identificador de aplicación y un valor `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="a3aec-392">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a `redirect_uri` value.</span></span> <span data-ttu-id="a3aec-393">Incluya una aplicación web o una API web en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-393">Include a web app or web API in your app.</span></span> <span data-ttu-id="a3aec-394">Opcionalmente, puede crear un secreto de aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3aec-394">Optionally, you can create an application secret.</span></span>
3. <span data-ttu-id="a3aec-395">[Crear directivas](active-directory-b2c-reference-policies.md) para obtener los nombres de las directivas.</span><span class="sxs-lookup"><span data-stu-id="a3aec-395">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

## <a name="samples"></a><span data-ttu-id="a3aec-396">Muestras</span><span class="sxs-lookup"><span data-stu-id="a3aec-396">Samples</span></span>

* [<span data-ttu-id="a3aec-397">Creación de una aplicación de una página mediante Node.js</span><span class="sxs-lookup"><span data-stu-id="a3aec-397">Create a single-page app by using Node.js</span></span>](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi)
* [<span data-ttu-id="a3aec-398">Creación de una aplicación de una página mediante .NET</span><span class="sxs-lookup"><span data-stu-id="a3aec-398">Create a single-page app by using .NET</span></span>](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi)


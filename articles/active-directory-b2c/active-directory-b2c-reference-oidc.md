---
title: "Inicio de sesión web con OpenID Connect - Azure AD B2C | Microsoft Docs"
description: "Creación de aplicaciones web mediante el uso de la implementación de Azure Active Directory Hola Hola OpenID Connect del protocolo de autenticación"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 89e9cfa28e4e5c34304aea355cca2dd0c4b42abc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="53349-103">Azure Active Directory B2C: inicio de sesión web con OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="53349-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="53349-104">OpenID Connect es un protocolo de autenticación, que se basa en OAuth 2.0, que pueden ser usuarios de inicio de sesión de toosecurely usado en aplicaciones de tooweb.</span><span class="sxs-lookup"><span data-stu-id="53349-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used toosecurely sign users in tooweb applications.</span></span> <span data-ttu-id="53349-105">De forma con hello Azure Active Directory B2C (Azure AD B2C) implementación de OpenID Connect, externalizar la suscripción, inicio de sesión y otra administración de identidad se produce en su tooAzure de aplicaciones web Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="53349-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications tooAzure Active Directory (Azure AD).</span></span> <span data-ttu-id="53349-106">Esta guía le mostrará cómo toodo de una manera independiente del lenguaje.</span><span class="sxs-lookup"><span data-stu-id="53349-106">This guide shows you how toodo so in a language-independent manner.</span></span> <span data-ttu-id="53349-107">Describe cómo toosend y recibir mensajes HTTP sin usar cualquiera de nuestras bibliotecas de código abierto.</span><span class="sxs-lookup"><span data-stu-id="53349-107">It describes how toosend and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="53349-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extiende hello OAuth 2.0 *autorización* protocolo para su uso como un *autenticación* protocolo.</span><span class="sxs-lookup"><span data-stu-id="53349-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends hello OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="53349-109">Esto le permite tooperform inicio de sesión único mediante el uso de OAuth.</span><span class="sxs-lookup"><span data-stu-id="53349-109">This allows you tooperform single sign-on by using OAuth.</span></span> <span data-ttu-id="53349-110">Introduce el concepto de Hola de un *identificador de token*, que es un token de seguridad que permita Hola cliente tooverify Hola la identidad del usuario de Hola y obtenga información del perfil básica acerca del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-110">It introduces hello concept of an *ID token*, which is a security token that allows hello client tooverify hello identity of hello user and obtain basic profile information about hello user.</span></span>

<span data-ttu-id="53349-111">Puesto que amplía OAuth 2.0, también permite que las aplicaciones adquirir toosecurely *tokens de acceso*.</span><span class="sxs-lookup"><span data-stu-id="53349-111">Because it extends OAuth 2.0, it also enables apps toosecurely acquire *access tokens*.</span></span> <span data-ttu-id="53349-112">Puede usar access_tokens tooaccess recursos que están protegidos por un [servidor de autorización](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="53349-112">You can use access_tokens tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="53349-113">Nosotros recomendamos OpenID Connect si va a crear una aplicación web que esté hospedada en un servidor y a la que se accede mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="53349-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="53349-114">Si desea tooadd identity management tooyour aplicaciones móviles o escritorio mediante el uso de Azure AD B2C, debe usar [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) en lugar de OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="53349-114">If you want tooadd identity management tooyour mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="53349-115">Azure AD B2C amplía Hola estándar toodo protocolo OpenID Connect más de autorización y autenticación simples.</span><span class="sxs-lookup"><span data-stu-id="53349-115">Azure AD B2C extends hello standard OpenID Connect protocol toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="53349-116">Introduce hello [parámetro policy](active-directory-b2c-reference-policies.md), lo que permite experiencias de usuario de tooadd OpenID Connect toouse--como inicio de sesión, inicio de sesión y la administración de perfiles--tooyour aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md), which enables you toouse OpenID Connect tooadd user experiences--such as sign-up, sign-in, and profile management--tooyour app.</span></span> <span data-ttu-id="53349-117">En este caso, le mostramos cómo toouse tooimplement de OpenID Connect y las directivas de cada una de estas experiencias en sus aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="53349-117">Here, we show you how toouse OpenID Connect and policies tooimplement each of these experiences in your web applications.</span></span> <span data-ttu-id="53349-118">También le mostraremos cómo tooget los tokens de acceso para tener acceso a las API de web.</span><span class="sxs-lookup"><span data-stu-id="53349-118">We'll also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="53349-119">las solicitudes de ejemplo HTTP de Hello en la sección siguiente Hola usar nuestro directorio B2C de ejemplo, fabrikamb2c.onmicrosoft.com, así como nuestra aplicación de ejemplo, https://aadb2cplayground.azurewebsites.net y directivas.</span><span class="sxs-lookup"><span data-stu-id="53349-119">hello example HTTP requests in hello next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="53349-120">Tiene la posibilidad de tootry out Hola solicita usted mismo utilizando estos valores o reemplazarlos por los suyos propios.</span><span class="sxs-lookup"><span data-stu-id="53349-120">You're free tootry out hello requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="53349-121">Obtenga información acerca de cómo demasiado[obtener su propio inquilino B2C, aplicaciones y directivas](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="53349-121">Learn how too[get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="53349-122">Envío de solicitudes de autenticación</span><span class="sxs-lookup"><span data-stu-id="53349-122">Send authentication requests</span></span>
<span data-ttu-id="53349-123">Cuando la aplicación web necesita el usuario de hello tooauthenticate y ejecutar una directiva, puede dirigir Hola usuario toohello `/authorize` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="53349-123">When your web app needs tooauthenticate hello user and execute a policy, it can direct hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="53349-124">Es Hola parte interactiva del flujo de Hola donde usuario Hola realiza una acción, dependiendo de la directiva de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-124">This is hello interactive portion of hello flow, where hello user takes action, depending on hello policy.</span></span>

<span data-ttu-id="53349-125">En esta solicitud, cliente hello indica permisos de Hola que necesita tooacquire de usuario de Hola Hola `scope` tooexecute de directiva de hello y parámetro en hello `p` parámetro.</span><span class="sxs-lookup"><span data-stu-id="53349-125">In this request, hello client indicates hello permissions that it needs tooacquire from hello user in hello `scope` parameter and hello policy tooexecute in hello `p` parameter.</span></span> <span data-ttu-id="53349-126">Se proporcionan tres ejemplos en hello siguientes secciones (con saltos de línea para mejorar la legibilidad), cada uno utilizan una directiva diferente.</span><span class="sxs-lookup"><span data-stu-id="53349-126">Three examples are provided in hello following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="53349-127">tooget una idea de cómo funciona cada solicitud, intente la solicitud de Hola de pegado en un explorador y ejecutarlo.</span><span class="sxs-lookup"><span data-stu-id="53349-127">tooget a feel for how each request works, try pasting hello request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="53349-128">Uso de una directiva de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="53349-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="53349-129">Uso de una directiva de registro</span><span class="sxs-lookup"><span data-stu-id="53349-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="53349-130">Uso de una directiva de edición de perfil</span><span class="sxs-lookup"><span data-stu-id="53349-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="53349-131">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-131">Parameter</span></span> | <span data-ttu-id="53349-132">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="53349-132">Required?</span></span> | <span data-ttu-id="53349-133">Description</span><span class="sxs-lookup"><span data-stu-id="53349-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="53349-134">client_id</span><span class="sxs-lookup"><span data-stu-id="53349-134">client_id</span></span> |<span data-ttu-id="53349-135">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-135">Required</span></span> |<span data-ttu-id="53349-136">aplicación Hello identificador ese hello [portal de Azure](https://portal.azure.com/) asignado tooyour aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-136">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="53349-137">response_type</span><span class="sxs-lookup"><span data-stu-id="53349-137">response_type</span></span> |<span data-ttu-id="53349-138">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-138">Required</span></span> |<span data-ttu-id="53349-139">tipo de respuesta de Hello, que debe incluir un identificador de token de OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="53349-139">hello response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="53349-140">Si su aplicación web también necesita tokens para llamar a una API web, puede usar `code+id_token`, como hemos hecho aquí.</span><span class="sxs-lookup"><span data-stu-id="53349-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="53349-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="53349-141">redirect_uri</span></span> |<span data-ttu-id="53349-142">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-142">Recommended</span></span> |<span data-ttu-id="53349-143">Hola `redirect_uri` parámetro de la aplicación, donde las respuestas de autenticación pueden ser enviadas y recibidas por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-143">hello `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="53349-144">Debe coincidir exactamente con uno de hello `redirect_uri` parámetros que registró en el portal de hello, excepto en que debe ser la dirección URL codificada.</span><span class="sxs-lookup"><span data-stu-id="53349-144">It must exactly match one of hello `redirect_uri` parameters that you registered in hello portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="53349-145">ámbito</span><span class="sxs-lookup"><span data-stu-id="53349-145">scope</span></span> |<span data-ttu-id="53349-146">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-146">Required</span></span> |<span data-ttu-id="53349-147">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="53349-147">A space-separated list of scopes.</span></span> <span data-ttu-id="53349-148">Un valor de ámbito único indica tooAzure AD ambos permisos que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="53349-148">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="53349-149">Hola `openid` ámbito indica una toosign permiso en los datos de usuario y get de hello acerca del usuario de hello en forma de Hola de tokens de identificador (toocome más sobre esto más adelante en el artículo de hello).</span><span class="sxs-lookup"><span data-stu-id="53349-149">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens (more toocome on this later in hello article).</span></span> <span data-ttu-id="53349-150">Hola `offline_access` ámbito es opcional para las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="53349-150">hello `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="53349-151">Indica que la aplicación necesitará una *token de actualización* para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="53349-151">It indicates that your app will need a *refresh token* for long-lived access tooresources.</span></span> |
| <span data-ttu-id="53349-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="53349-152">response_mode</span></span> |<span data-ttu-id="53349-153">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-153">Recommended</span></span> |<span data-ttu-id="53349-154">método Hello que debe ser usado toosend Hola resultante autorización código tooyour back-app.</span><span class="sxs-lookup"><span data-stu-id="53349-154">hello method that should be used toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="53349-155">Puede ser `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="53349-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="53349-156">Hola `form_post` se recomienda el modo de respuesta para una mayor seguridad.</span><span class="sxs-lookup"><span data-stu-id="53349-156">hello `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="53349-157">state</span><span class="sxs-lookup"><span data-stu-id="53349-157">state</span></span> |<span data-ttu-id="53349-158">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-158">Recommended</span></span> |<span data-ttu-id="53349-159">Un valor incluido en la solicitud de Hola que también se devuelve como respuesta de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-159">A value included in hello request that is also returned in hello token response.</span></span> <span data-ttu-id="53349-160">Puede ser una cadena de cualquier contenido que desee.</span><span class="sxs-lookup"><span data-stu-id="53349-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="53349-161">Se utiliza normalmente un valor único generado de forma aleatoria para evitar los ataques de falsificación de solicitudes entre sitios.</span><span class="sxs-lookup"><span data-stu-id="53349-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="53349-162">estado de Hello también es tooencode usa información acerca del estado del usuario de hello en la aplicación hello antes de producirse la solicitud de autenticación de hello, como se encontraban en la página de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-162">hello state is also used tooencode information about hello user's state in hello app before hello authentication request occurred, such as hello page they were on.</span></span> |
| <span data-ttu-id="53349-163">valor de seguridad</span><span class="sxs-lookup"><span data-stu-id="53349-163">nonce</span></span> |<span data-ttu-id="53349-164">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-164">Required</span></span> |<span data-ttu-id="53349-165">Un valor incluido en la solicitud de hello (generado por la aplicación hello) que se incluirán en el token de identificador resultante de hello como una notificación.</span><span class="sxs-lookup"><span data-stu-id="53349-165">A value included in hello request (generated by hello app) that will be included in hello resulting ID token as a claim.</span></span> <span data-ttu-id="53349-166">aplicación Hello, a continuación, puede comprobar que los ataques de reproducción de tokens de toomitigate este valor.</span><span class="sxs-lookup"><span data-stu-id="53349-166">hello app can then verify this value toomitigate token replay attacks.</span></span> <span data-ttu-id="53349-167">valor de Hello normalmente es una cadena única aleatoria que puede ser usado tooidentify Hola origen de solicitud de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-167">hello value is typically a randomized unique string that can be used tooidentify hello origin of hello request.</span></span> |
| <span data-ttu-id="53349-168">p</span><span class="sxs-lookup"><span data-stu-id="53349-168">p</span></span> |<span data-ttu-id="53349-169">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-169">Required</span></span> |<span data-ttu-id="53349-170">Directiva de Hola que se va a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="53349-170">hello policy that will be executed.</span></span> <span data-ttu-id="53349-171">Se trata Hola nombre de una directiva que se crea en el inquilino B2C.</span><span class="sxs-lookup"><span data-stu-id="53349-171">It is hello name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="53349-172">valor de nombre de directiva de Hello debe comenzar por `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="53349-172">hello policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="53349-173">Obtener más información acerca de las directivas y hello [marco de directivas extensible](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="53349-173">Learn more about policies and hello [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="53349-174">símbolo del sistema</span><span class="sxs-lookup"><span data-stu-id="53349-174">prompt</span></span> |<span data-ttu-id="53349-175">Opcional</span><span class="sxs-lookup"><span data-stu-id="53349-175">Optional</span></span> |<span data-ttu-id="53349-176">tipo de Hello de interacción del usuario que es necesario.</span><span class="sxs-lookup"><span data-stu-id="53349-176">hello type of user interaction that is required.</span></span> <span data-ttu-id="53349-177">Hola valor solo es válido en este momento es `login`, que fuerza Hola tooenter usuario sus credenciales en esa solicitud.</span><span class="sxs-lookup"><span data-stu-id="53349-177">hello only valid value at this time is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="53349-178">El inicio de sesión único no surtirá efecto.</span><span class="sxs-lookup"><span data-stu-id="53349-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="53349-179">En este momento, usuario Hola se solicita el flujo de trabajo de la directiva de toocomplete Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-179">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="53349-180">Ello puede significar tener a usuario Hola escribir su nombre de usuario y una contraseña, inicio de sesión con una identidad de redes sociales, registrarse para el directorio de Hola o cualquier otro número de pasos, dependiendo de cómo se define la directiva de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-180">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps, depending on how hello policy is defined.</span></span>

<span data-ttu-id="53349-181">Al finalizar usuario Hola directiva hello, Azure AD devuelve una aplicación de tooyour de respuesta en hello indicado `redirect_uri` parámetro, utilizando el método hello descrito en hello `response_mode` parámetro.</span><span class="sxs-lookup"><span data-stu-id="53349-181">After hello user completes hello policy, Azure AD returns a response tooyour app at hello indicated `redirect_uri` parameter, by using hello method that is specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="53349-182">respuesta de Hello es Hola mismo para cada uno de hello delante de los casos, independientemente de la directiva de Hola que se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="53349-182">hello response is hello same for each of hello preceding cases, independent of hello policy that is executed.</span></span>

<span data-ttu-id="53349-183">Una respuesta correcta al usar `response_mode=fragment` tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="53349-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="53349-184">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-184">Parameter</span></span> | <span data-ttu-id="53349-185">Description</span><span class="sxs-lookup"><span data-stu-id="53349-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-186">ID_token</span><span class="sxs-lookup"><span data-stu-id="53349-186">id_token</span></span> |<span data-ttu-id="53349-187">Hello Id. de símbolo (token) que solicita la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="53349-187">hello ID token that hello app requested.</span></span> <span data-ttu-id="53349-188">Puede usar identidad de usuario de hello identificador tooverify token hello y empezar una sesión de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-188">You can use hello ID token tooverify hello user's identity and begin a session with hello user.</span></span> <span data-ttu-id="53349-189">Obtener más detalles sobre los tokens de identificador y su contenido se incluyen en hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="53349-189">More details on ID tokens and their contents are included in hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="53349-190">código</span><span class="sxs-lookup"><span data-stu-id="53349-190">code</span></span> |<span data-ttu-id="53349-191">Hello autorización código de esa aplicación hello solicitada, si usó `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="53349-191">hello authorization code that hello app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="53349-192">aplicación Hello puede utilizar toorequest de código de autorización de hello un token de acceso para un recurso de destino.</span><span class="sxs-lookup"><span data-stu-id="53349-192">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="53349-193">Los códigos de autorización tienen una duración muy breve.</span><span class="sxs-lookup"><span data-stu-id="53349-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="53349-194">Normalmente, caducan al cabo de unos 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="53349-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="53349-195">state</span><span class="sxs-lookup"><span data-stu-id="53349-195">state</span></span> |<span data-ttu-id="53349-196">Si un `state` parámetro se incluye en la solicitud de hello, hello mismo valor aparecerán en la respuesta de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-196">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="53349-197">Hello aplicación debe comprobar que hello `state` valores de hello solicitud y respuesta son idénticos.</span><span class="sxs-lookup"><span data-stu-id="53349-197">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="53349-198">Las respuestas de error también pueden enviarse toohello `redirect_uri` parámetro de forma que pueda controlar esa aplicación hello correctamente:</span><span class="sxs-lookup"><span data-stu-id="53349-198">Error responses can also be sent toohello `redirect_uri` parameter so that hello app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="53349-199">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-199">Parameter</span></span> | <span data-ttu-id="53349-200">Description</span><span class="sxs-lookup"><span data-stu-id="53349-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-201">error</span><span class="sxs-lookup"><span data-stu-id="53349-201">error</span></span> |<span data-ttu-id="53349-202">Una cadena de código de error que puede ser utilizados tooclassify tipos de errores que se producen y que puede ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="53349-202">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="53349-203">error_description</span><span class="sxs-lookup"><span data-stu-id="53349-203">error_description</span></span> |<span data-ttu-id="53349-204">Un mensaje de error específico que puede ayudar a un desarrollador para identificar la causa de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="53349-204">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="53349-205">state</span><span class="sxs-lookup"><span data-stu-id="53349-205">state</span></span> |<span data-ttu-id="53349-206">Consulte la descripción completa de hello en la primera tabla de hello en esta sección.</span><span class="sxs-lookup"><span data-stu-id="53349-206">See hello full description in hello first table in this section.</span></span> <span data-ttu-id="53349-207">Si un `state` parámetro se incluye en la solicitud de hello, hello mismo valor aparecerán en la respuesta de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-207">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="53349-208">Hello aplicación debe comprobar que hello `state` valores de hello solicitud y respuesta son idénticos.</span><span class="sxs-lookup"><span data-stu-id="53349-208">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="validate-hello-id-token"></a><span data-ttu-id="53349-209">Validar el token del identificador hello</span><span class="sxs-lookup"><span data-stu-id="53349-209">Validate hello ID token</span></span>
<span data-ttu-id="53349-210">Simplemente recibe un identificador de token no es suficiente usuario de hello tooauthenticate.</span><span class="sxs-lookup"><span data-stu-id="53349-210">Just receiving an ID token is not enough tooauthenticate hello user.</span></span> <span data-ttu-id="53349-211">Debe validar la firma del token de Id. de Hola y Hola notificaciones en el token de hello según los requisitos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-211">You must validate hello ID token's signature and verify hello claims in hello token per your app's requirements.</span></span> <span data-ttu-id="53349-212">Usa Azure AD B2C [Tokens de Web JSON (Jwt)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) y públicos tokens toosign de criptografía de clave y compruebe que son válidos.</span><span class="sxs-lookup"><span data-stu-id="53349-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography toosign tokens and verify that they are valid.</span></span>

<span data-ttu-id="53349-213">Hay muchas bibliotecas de código abierto disponibles para validar los JWT, según el lenguaje de preferencia.</span><span class="sxs-lookup"><span data-stu-id="53349-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="53349-214">Se recomienda explorar esas opciones en lugar de implementar su propia lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="53349-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="53349-215">información de Hello aquí será útil averiguar cómo tooproperly utilizar dichas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="53349-215">hello information here will be useful in figuring out how tooproperly use those libraries.</span></span>

<span data-ttu-id="53349-216">Azure AD B2C tiene un extremo de metadatos OpenID Connect, que permite a una aplicación toofetch obtener información acerca de Azure AD B2C en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="53349-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="53349-217">En esta información se incluyen los extremos, los contenidos del token y las claves de firma de los token.</span><span class="sxs-lookup"><span data-stu-id="53349-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="53349-218">Hay un documento de metadatos JSON para cada directiva en su inquilino de B2C.</span><span class="sxs-lookup"><span data-stu-id="53349-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="53349-219">Por ejemplo, documento de metadatos de Hola para hello `b2c_1_sign_in` directiva en `fabrikamb2c.onmicrosoft.com` se encuentra en:</span><span class="sxs-lookup"><span data-stu-id="53349-219">For example, hello metadata document for hello `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="53349-220">Una de las propiedades de Hola de este documento de configuración es `jwks_uri`, cuyo valor de hello sería la misma directiva:</span><span class="sxs-lookup"><span data-stu-id="53349-220">One of hello properties of this configuration document is `jwks_uri`, whose value for hello same policy would be:</span></span>

<span data-ttu-id="53349-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="53349-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="53349-222">toodetermine directiva que se usó en la firma de un identificador de token (y desde donde toofetch Hola metadatos), tiene dos opciones.</span><span class="sxs-lookup"><span data-stu-id="53349-222">toodetermine which policy was used in signing an ID token (and from where toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="53349-223">En primer lugar, se incluye el nombre de la directiva de Hola Hola `acr` de notificación en el token del identificador hello.</span><span class="sxs-lookup"><span data-stu-id="53349-223">First, hello policy name is included in hello `acr` claim in hello ID token.</span></span> <span data-ttu-id="53349-224">Para obtener información sobre cómo tooparse Hola notificaciones desde un identificador de token, consulte hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="53349-224">For information on how tooparse hello claims from an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="53349-225">La otra opción es la directiva de hello tooencode en valor de Hola de hello `state` parámetro al emitir la solicitud de Hola y decodificarlo toodetermine directiva que se utilizó.</span><span class="sxs-lookup"><span data-stu-id="53349-225">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="53349-226">Cualquiera de estos métodos es válido.</span><span class="sxs-lookup"><span data-stu-id="53349-226">Either method is valid.</span></span>

<span data-ttu-id="53349-227">Una vez que haya adquirido el documento de metadatos de hello del extremo de metadatos de OpenID Connect de hello, puede usar las claves públicas RSA 256 hello (que se encuentran en este punto de conexión) firma de hello toovalidate del token de Id. de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-227">After you've acquired hello metadata document from hello OpenID Connect metadata endpoint, you can use hello RSA 256 public keys (which are located at this endpoint) toovalidate hello signature of hello ID token.</span></span> <span data-ttu-id="53349-228">Podría haber varias claves enumeradas en este punto de conexión en cualquier momento, cada una identificada con una notificación `kid`.</span><span class="sxs-lookup"><span data-stu-id="53349-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="53349-229">Hello encabezado de token de Id. de hello también contiene un `kid` de notificación, que indica cuál de estas claves se usa toosign Hola identificador de token.</span><span class="sxs-lookup"><span data-stu-id="53349-229">hello header of hello ID token also contains a `kid` claim, which indicates which of these keys was used toosign hello ID token.</span></span> <span data-ttu-id="53349-230">Para obtener más información, vea hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md) (Hola sección en [validar los tokens](active-directory-b2c-reference-tokens.md#token-validation), en particular).</span><span class="sxs-lookup"><span data-stu-id="53349-230">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (hello section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve hello information on this-->

<span data-ttu-id="53349-231">Una vez haya validado firma Hola de token de Id. de hello, hay varias notificaciones que necesita tooverify.</span><span class="sxs-lookup"><span data-stu-id="53349-231">After you've validated hello signature of hello ID token, there are several claims that you need tooverify.</span></span> <span data-ttu-id="53349-232">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="53349-232">For instance:</span></span>

* <span data-ttu-id="53349-233">Debe validar hello `nonce` tooprevent ataques de reproducción de tokens de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="53349-233">You should validate hello `nonce` claim tooprevent token replay attacks.</span></span> <span data-ttu-id="53349-234">Su valor debe ser lo que hayas especificado en una solicitud de inicio de sesión Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-234">Its value should be what you specified in hello sign-in request.</span></span>
* <span data-ttu-id="53349-235">Debe validar hello `aud` tooensure que Hola identificador de token haya sido emitido para la aplicación de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="53349-235">You should validate hello `aud` claim tooensure that hello ID token was issued for your app.</span></span> <span data-ttu-id="53349-236">Su valor debe ser el identificador de la aplicación hello de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-236">Its value should be hello application ID of your app.</span></span>
* <span data-ttu-id="53349-237">Debe validar hello `iat` y `exp` notificaciones tooensure que Hola identificador de token no ha expirado.</span><span class="sxs-lookup"><span data-stu-id="53349-237">You should validate hello `iat` and `exp` claims tooensure that hello ID token has not expired.</span></span>

<span data-ttu-id="53349-238">También hay otras validaciones que deberá llevar a cabo.</span><span class="sxs-lookup"><span data-stu-id="53349-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="53349-239">Se describen en detalle en hello [especificación de OpenID conectarse Core](http://openid.net/specs/openid-connect-core-1_0.html).  Puede que le interese toovalidate notificaciones adicionales, según el escenario.</span><span class="sxs-lookup"><span data-stu-id="53349-239">These are described in detail in hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want toovalidate additional claims, depending on your scenario.</span></span> <span data-ttu-id="53349-240">Algunas validaciones comunes incluyen:</span><span class="sxs-lookup"><span data-stu-id="53349-240">Some common validations include:</span></span>

* <span data-ttu-id="53349-241">Asegurarse de que Hola usuario u organización ha registrado para la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="53349-241">Ensuring that hello user/organization has signed up for hello app.</span></span>
* <span data-ttu-id="53349-242">Asegurarse de que el usuario hello tiene autorización o los privilegios adecuados.</span><span class="sxs-lookup"><span data-stu-id="53349-242">Ensuring that hello user has proper authorization/privileges.</span></span>
* <span data-ttu-id="53349-243">Asegurarse de que se haya producido un determinado nivel de autenticación, como Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="53349-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="53349-244">Para obtener más información sobre notificaciones de hello en un identificador de token, consulte hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="53349-244">For more information on hello claims in an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="53349-245">Una vez que haya validado el token del identificador hello, puede comenzar una sesión por usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-245">After you have validated hello ID token, you can begin a session with hello user.</span></span> <span data-ttu-id="53349-246">Puede usar notificaciones de hello en información de símbolo (token) tooobtain de Id. de hello acerca del usuario de hello en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-246">You can use hello claims in hello ID token tooobtain information about hello user in your app.</span></span> <span data-ttu-id="53349-247">Entre los usos de esta información se incluye la visualización, los registros y la autorización.</span><span class="sxs-lookup"><span data-stu-id="53349-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="53349-248">Obtención de un token</span><span class="sxs-lookup"><span data-stu-id="53349-248">Get a token</span></span>
<span data-ttu-id="53349-249">Si necesita la tooonly de aplicación web, ejecutar las directivas, puede omitir Hola siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="53349-249">If you need your web app tooonly execute policies, you can skip hello next few sections.</span></span> <span data-ttu-id="53349-250">Estas secciones no son aplicaciones tooweb solo es aplicable que necesitan toomake autenticado llamadas tooa web API y también están protegidas por Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="53349-250">These sections are applicable only tooweb apps that need toomake authenticated calls tooa web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="53349-251">Puede canjear código de autorización de Hola que adquirió (mediante el uso de `response_type=code+id_token`) para un token toohello deseado recursos mediante el envío de un `POST` solicitar toohello `/token` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="53349-251">You can redeem hello authorization code that you acquired (by using `response_type=code+id_token`) for a token toohello desired resource by sending a `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="53349-252">Actualmente, hello solo los recursos que puede solicitar un token para es la API de web de back-end de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-252">Currently, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="53349-253">convención de Hola para solicitar un token tooyourself es toouse Id. de cliente de la aplicación como ámbito de hello:</span><span class="sxs-lookup"><span data-stu-id="53349-253">hello convention for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="53349-254">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-254">Parameter</span></span> | <span data-ttu-id="53349-255">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="53349-255">Required?</span></span> | <span data-ttu-id="53349-256">Description</span><span class="sxs-lookup"><span data-stu-id="53349-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="53349-257">p</span><span class="sxs-lookup"><span data-stu-id="53349-257">p</span></span> |<span data-ttu-id="53349-258">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-258">Required</span></span> |<span data-ttu-id="53349-259">Hola directiva de autorización de hello tooacquire usado código.</span><span class="sxs-lookup"><span data-stu-id="53349-259">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="53349-260">No puede usar una directiva diferente en esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="53349-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="53349-261">Tenga en cuenta que agregar esta cadena de consulta de parámetro toohello, no toohello `POST` cuerpo.</span><span class="sxs-lookup"><span data-stu-id="53349-261">Note that you add this parameter toohello query string, not toohello `POST` body.</span></span> |
| <span data-ttu-id="53349-262">client_id</span><span class="sxs-lookup"><span data-stu-id="53349-262">client_id</span></span> |<span data-ttu-id="53349-263">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-263">Required</span></span> |<span data-ttu-id="53349-264">aplicación Hello identificador ese hello [portal de Azure](https://portal.azure.com/) asignado tooyour aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-264">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="53349-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="53349-265">grant_type</span></span> |<span data-ttu-id="53349-266">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-266">Required</span></span> |<span data-ttu-id="53349-267">Hola tipo de concesión, que debe ser `authorization_code` para el flujo de código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-267">hello type of grant, which must be `authorization_code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="53349-268">ámbito</span><span class="sxs-lookup"><span data-stu-id="53349-268">scope</span></span> |<span data-ttu-id="53349-269">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-269">Recommended</span></span> |<span data-ttu-id="53349-270">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="53349-270">A space-separated list of scopes.</span></span> <span data-ttu-id="53349-271">Un valor de ámbito único indica tooAzure AD ambos permisos que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="53349-271">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="53349-272">Hola `openid` ámbito indica una toosign permiso en los datos de usuario y get de hello acerca del usuario de hello en forma de Hola de id_token parámetros.</span><span class="sxs-lookup"><span data-stu-id="53349-272">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of id_token parameters.</span></span> <span data-ttu-id="53349-273">Puede ser usado tooget tokens tooyour la aplicación web back-end API, que se representa mediante Hola mismo identificador de aplicación como cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-273">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="53349-274">Hola `offline_access` ámbito indica que la aplicación necesitará un token de actualización para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="53349-274">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="53349-275">código</span><span class="sxs-lookup"><span data-stu-id="53349-275">code</span></span> |<span data-ttu-id="53349-276">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-276">Required</span></span> |<span data-ttu-id="53349-277">código de autorización de Hola que adquirió en el primer segmento de hello del flujo de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-277">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="53349-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="53349-278">redirect_uri</span></span> |<span data-ttu-id="53349-279">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-279">Required</span></span> |<span data-ttu-id="53349-280">Hola `redirect_uri` parámetro de aplicación Hola que ha recibido código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-280">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="53349-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="53349-281">client_secret</span></span> |<span data-ttu-id="53349-282">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-282">Required</span></span> |<span data-ttu-id="53349-283">secreto de aplicación Hola que generó en hello [portal de Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="53349-283">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="53349-284">El secreto de aplicación es un artefacto de seguridad importante.</span><span class="sxs-lookup"><span data-stu-id="53349-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="53349-285">Debe almacenarlo de forma segura en el servidor.</span><span class="sxs-lookup"><span data-stu-id="53349-285">You should store it securely on your server.</span></span> <span data-ttu-id="53349-286">También debe rotar este secreto del cliente de forma periódica.</span><span class="sxs-lookup"><span data-stu-id="53349-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="53349-287">Una respuesta correcta del token tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="53349-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="53349-288">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-288">Parameter</span></span> | <span data-ttu-id="53349-289">Description</span><span class="sxs-lookup"><span data-stu-id="53349-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-290">not_before</span><span class="sxs-lookup"><span data-stu-id="53349-290">not_before</span></span> |<span data-ttu-id="53349-291">tiempo de Hello en qué Hola token se considera válida, en tiempo base.</span><span class="sxs-lookup"><span data-stu-id="53349-291">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="53349-292">token_type</span><span class="sxs-lookup"><span data-stu-id="53349-292">token_type</span></span> |<span data-ttu-id="53349-293">valor de tipo de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-293">hello token type value.</span></span> <span data-ttu-id="53349-294">Hola solo tipo que admite Azure AD es `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="53349-294">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="53349-295">access_token</span><span class="sxs-lookup"><span data-stu-id="53349-295">access_token</span></span> |<span data-ttu-id="53349-296">Hola firmó token JWT que solicitó.</span><span class="sxs-lookup"><span data-stu-id="53349-296">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="53349-297">ámbito</span><span class="sxs-lookup"><span data-stu-id="53349-297">scope</span></span> |<span data-ttu-id="53349-298">ámbitos de Hola para qué hello token es válido.</span><span class="sxs-lookup"><span data-stu-id="53349-298">hello scopes for which hello token is valid.</span></span> <span data-ttu-id="53349-299">Se pueden usar para almacenar en caché los tokens para su posterior uso.</span><span class="sxs-lookup"><span data-stu-id="53349-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="53349-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="53349-300">expires_in</span></span> |<span data-ttu-id="53349-301">Hola longitud de tiempo que Hola token de acceso es válida (en segundos).</span><span class="sxs-lookup"><span data-stu-id="53349-301">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="53349-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="53349-302">refresh_token</span></span> |<span data-ttu-id="53349-303">Un token de actualización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="53349-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="53349-304">aplicación Hello puede usar este token tooacquire los tokens adicionales después de que expire el token actual Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-304">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="53349-305">Actualizar tokens son de larga duración y puede ser usado tooretain acceso tooresources durante largos períodos de tiempo.</span><span class="sxs-lookup"><span data-stu-id="53349-305">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="53349-306">Para obtener más información, consulte toohello [referencia del token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="53349-306">For more details, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="53349-307">Tenga en cuenta que debe haber utilizado el ámbito de hello `offline_access` en autorización de Hola y el token de las solicitudes en orden tooreceive un token de actualización.</span><span class="sxs-lookup"><span data-stu-id="53349-307">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |

<span data-ttu-id="53349-308">Las respuestas de error tienen un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="53349-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="53349-309">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-309">Parameter</span></span> | <span data-ttu-id="53349-310">Description</span><span class="sxs-lookup"><span data-stu-id="53349-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-311">error</span><span class="sxs-lookup"><span data-stu-id="53349-311">error</span></span> |<span data-ttu-id="53349-312">Una cadena de código de error que puede ser utilizados tooclassify tipos de errores que se producen y que puede ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="53349-312">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="53349-313">error_description</span><span class="sxs-lookup"><span data-stu-id="53349-313">error_description</span></span> |<span data-ttu-id="53349-314">Un mensaje de error específico que puede ayudar a un desarrollador para identificar la causa de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="53349-314">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="use-hello-token"></a><span data-ttu-id="53349-315">Usar el token de Hola</span><span class="sxs-lookup"><span data-stu-id="53349-315">Use hello token</span></span>
<span data-ttu-id="53349-316">Ahora que ha adquirido correctamente un token de acceso, puede usar símbolo (token) de hello en las API de web de back-end de tooyour solicitudes mediante la inclusión en hello `Authorization` encabezado:</span><span class="sxs-lookup"><span data-stu-id="53349-316">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-hello-token"></a><span data-ttu-id="53349-317">Hola token de actualización</span><span class="sxs-lookup"><span data-stu-id="53349-317">Refresh hello token</span></span>
<span data-ttu-id="53349-318">Los tokens de identificador tienen una corta duración.</span><span class="sxs-lookup"><span data-stu-id="53349-318">ID tokens are short-lived.</span></span> <span data-ttu-id="53349-319">Debe actualizarlos después de que expiren toocontinue que se va a tooaccess capaz de recursos.</span><span class="sxs-lookup"><span data-stu-id="53349-319">You must refresh them after they expire toocontinue being able tooaccess resources.</span></span> <span data-ttu-id="53349-320">Puede hacerlo mediante el envío de otra `POST` solicitar toohello `/token` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="53349-320">You can do so by submitting another `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="53349-321">Este tiempo, proporcionar hello `refresh_token` parámetro en lugar de hello `code` parámetro:</span><span class="sxs-lookup"><span data-stu-id="53349-321">This time, provide hello `refresh_token` parameter instead of hello `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="53349-322">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-322">Parameter</span></span> | <span data-ttu-id="53349-323">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-323">Required</span></span> | <span data-ttu-id="53349-324">Description</span><span class="sxs-lookup"><span data-stu-id="53349-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="53349-325">p</span><span class="sxs-lookup"><span data-stu-id="53349-325">p</span></span> |<span data-ttu-id="53349-326">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-326">Required</span></span> |<span data-ttu-id="53349-327">Directiva de Hola que estaba token tooacquire usado Hola de actualización original.</span><span class="sxs-lookup"><span data-stu-id="53349-327">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="53349-328">No puede usar una directiva diferente en esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="53349-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="53349-329">Tenga en cuenta que agregar esta cadena de consulta de parámetros toohello, toohello el cuerpo de la publicación.</span><span class="sxs-lookup"><span data-stu-id="53349-329">Note that you add this parameter toohello query string, not toohello POST body.</span></span> |
| <span data-ttu-id="53349-330">client_id</span><span class="sxs-lookup"><span data-stu-id="53349-330">client_id</span></span> |<span data-ttu-id="53349-331">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-331">Required</span></span> |<span data-ttu-id="53349-332">aplicación Hello identificador ese hello [portal de Azure](https://portal.azure.com/) asignado tooyour aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-332">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="53349-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="53349-333">grant_type</span></span> |<span data-ttu-id="53349-334">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-334">Required</span></span> |<span data-ttu-id="53349-335">tipo de Hola de concesión, que debe ser un token de actualización para este segmento del flujo de código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-335">hello type of grant, which must be a refresh token for this leg of hello authorization code flow.</span></span> |
| <span data-ttu-id="53349-336">ámbito</span><span class="sxs-lookup"><span data-stu-id="53349-336">scope</span></span> |<span data-ttu-id="53349-337">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-337">Recommended</span></span> |<span data-ttu-id="53349-338">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="53349-338">A space-separated list of scopes.</span></span> <span data-ttu-id="53349-339">Un valor de ámbito único indica tooAzure AD ambos permisos que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="53349-339">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="53349-340">Hola `openid` ámbito indica una toosign permiso en los datos de usuario y get de hello acerca del usuario de hello en forma de Hola de tokens de identificador.</span><span class="sxs-lookup"><span data-stu-id="53349-340">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens.</span></span> <span data-ttu-id="53349-341">Puede ser usado tooget tokens tooyour la aplicación web back-end API, que se representa mediante Hola mismo identificador de aplicación como cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-341">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="53349-342">Hola `offline_access` ámbito indica que la aplicación necesitará un token de actualización para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="53349-342">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="53349-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="53349-343">redirect_uri</span></span> |<span data-ttu-id="53349-344">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-344">Recommended</span></span> |<span data-ttu-id="53349-345">Hola `redirect_uri` parámetro de aplicación Hola que ha recibido código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-345">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="53349-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="53349-346">refresh_token</span></span> |<span data-ttu-id="53349-347">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-347">Required</span></span> |<span data-ttu-id="53349-348">Hola original token de actualización que adquirió en la bifurcación de la segunda Hola de flujo de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-348">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> <span data-ttu-id="53349-349">Tenga en cuenta que debe haber utilizado el ámbito de hello `offline_access` en autorización de Hola y el token de las solicitudes en orden tooreceive un token de actualización.</span><span class="sxs-lookup"><span data-stu-id="53349-349">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |
| <span data-ttu-id="53349-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="53349-350">client_secret</span></span> |<span data-ttu-id="53349-351">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-351">Required</span></span> |<span data-ttu-id="53349-352">secreto de aplicación Hola que generó en hello [portal de Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="53349-352">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="53349-353">El secreto de aplicación es un artefacto de seguridad importante.</span><span class="sxs-lookup"><span data-stu-id="53349-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="53349-354">Debe almacenarlo de forma segura en el servidor.</span><span class="sxs-lookup"><span data-stu-id="53349-354">You should store it securely on your server.</span></span> <span data-ttu-id="53349-355">También debe rotar este secreto del cliente de forma periódica.</span><span class="sxs-lookup"><span data-stu-id="53349-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="53349-356">Una respuesta correcta del token tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="53349-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="53349-357">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-357">Parameter</span></span> | <span data-ttu-id="53349-358">Description</span><span class="sxs-lookup"><span data-stu-id="53349-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-359">not_before</span><span class="sxs-lookup"><span data-stu-id="53349-359">not_before</span></span> |<span data-ttu-id="53349-360">tiempo de Hello en qué Hola token se considera válida, en tiempo base.</span><span class="sxs-lookup"><span data-stu-id="53349-360">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="53349-361">token_type</span><span class="sxs-lookup"><span data-stu-id="53349-361">token_type</span></span> |<span data-ttu-id="53349-362">valor de tipo de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-362">hello token type value.</span></span> <span data-ttu-id="53349-363">Hola solo tipo que admite Azure AD es `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="53349-363">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="53349-364">access_token</span><span class="sxs-lookup"><span data-stu-id="53349-364">access_token</span></span> |<span data-ttu-id="53349-365">Hola firmó token JWT que solicitó.</span><span class="sxs-lookup"><span data-stu-id="53349-365">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="53349-366">ámbito</span><span class="sxs-lookup"><span data-stu-id="53349-366">scope</span></span> |<span data-ttu-id="53349-367">ámbito de Hola Hola token es válido, que se puede utilizar para almacenar en caché los tokens para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="53349-367">hello scope that hello token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="53349-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="53349-368">expires_in</span></span> |<span data-ttu-id="53349-369">Hola longitud de tiempo que Hola token de acceso es válida (en segundos).</span><span class="sxs-lookup"><span data-stu-id="53349-369">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="53349-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="53349-370">refresh_token</span></span> |<span data-ttu-id="53349-371">Un token de actualización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="53349-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="53349-372">aplicación Hello puede usar este token tooacquire los tokens adicionales después de que expire el token actual Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-372">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span>  <span data-ttu-id="53349-373">Actualizar tokens son de larga duración y puede ser usado tooretain acceso tooresources durante largos períodos de tiempo.</span><span class="sxs-lookup"><span data-stu-id="53349-373">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="53349-374">Para obtener información más detallada, consulte toohello [referencia del token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="53349-374">For more detail, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="53349-375">Las respuestas de error tienen un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="53349-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="53349-376">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-376">Parameter</span></span> | <span data-ttu-id="53349-377">Description</span><span class="sxs-lookup"><span data-stu-id="53349-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="53349-378">error</span><span class="sxs-lookup"><span data-stu-id="53349-378">error</span></span> |<span data-ttu-id="53349-379">Una cadena de código de error que puede ser utilizados tooclassify tipos de errores que se producen y que puede ser usado tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="53349-379">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="53349-380">error_description</span><span class="sxs-lookup"><span data-stu-id="53349-380">error_description</span></span> |<span data-ttu-id="53349-381">Un mensaje de error específico que puede ayudar a un desarrollador para identificar la causa de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="53349-381">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="53349-382">Envío de una solicitud de cierre de sesión</span><span class="sxs-lookup"><span data-stu-id="53349-382">Send a sign-out request</span></span>
<span data-ttu-id="53349-383">Cuando desee que el usuario de hello toosign fuera de la aplicación hello, es insuficiente tooclear las cookies de la aplicación o en caso contrario, finalizar sesión de hello con usuario Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-383">When you want toosign hello user out of hello app, it is not enough tooclear your app's cookies or otherwise end hello session with hello user.</span></span> <span data-ttu-id="53349-384">También se debe redirigir Hola usuario tooAzure AD toosign out. Si no toodo por lo tanto, el usuario de hello podría ser capaz de tooreauthenticate tooyour aplicaciones sin escribir sus credenciales de nuevo.</span><span class="sxs-lookup"><span data-stu-id="53349-384">You must also redirect hello user tooAzure AD toosign out. If you fail toodo so, hello user might be able tooreauthenticate tooyour app without entering their credentials again.</span></span> <span data-ttu-id="53349-385">Esto se debe a que el usuario tendrá una sesión válida de inicio de sesión único con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="53349-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="53349-386">Simplemente puede redirigir Hola usuario toohello `end_session` punto de conexión que se muestra en el documento de metadatos de OpenID Connect de hello descrita anteriormente en hello sección "Validar el token de Id. de hello":</span><span class="sxs-lookup"><span data-stu-id="53349-386">You can simply redirect hello user toohello `end_session` endpoint that is listed in hello OpenID Connect metadata document described earlier in hello "Validate hello ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="53349-387">Parámetro</span><span class="sxs-lookup"><span data-stu-id="53349-387">Parameter</span></span> | <span data-ttu-id="53349-388">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="53349-388">Required?</span></span> | <span data-ttu-id="53349-389">Description</span><span class="sxs-lookup"><span data-stu-id="53349-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="53349-390">p</span><span class="sxs-lookup"><span data-stu-id="53349-390">p</span></span> |<span data-ttu-id="53349-391">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="53349-391">Required</span></span> |<span data-ttu-id="53349-392">Directiva de Hola que desea que toouse toosign Hola usuario fuera de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-392">hello policy that you want toouse toosign hello user out of your application.</span></span> |
| <span data-ttu-id="53349-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="53349-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="53349-394">Recomendado</span><span class="sxs-lookup"><span data-stu-id="53349-394">Recommended</span></span> |<span data-ttu-id="53349-395">Hello ese usuario Hola de dirección URL debe ser redirigido tooafter correcta cierre de sesión. Si no se incluye, Azure AD B2C muestra a usuario Hola un mensaje genérico.</span><span class="sxs-lookup"><span data-stu-id="53349-395">hello URL that hello user should be redirected tooafter successful sign-out. If it is not included, Azure AD B2C shows hello user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="53349-396">Aunque dirigir Hola usuario toohello `end_session` extremo borrará algunos Hola del único inicio de sesión de estado del usuario con Azure AD B2C, no firmará usuario Hola fuera de su sesión de proveedor (IDP) de identidades sociales.</span><span class="sxs-lookup"><span data-stu-id="53349-396">Although directing hello user toohello `end_session` endpoint will clear some of hello user's single sign-on state with Azure AD B2C, it will not sign hello user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="53349-397">Si selecciona usuario Hola Hola IDP mismo durante un inicio de sesión posteriores, se puede volver a autenticar, sin proporcionar sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="53349-397">If hello user selects hello same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="53349-398">Si un usuario desea toosign fuera de la aplicación B2C, no necesariamente significa que deseen toosign fuera de su cuenta de Facebook.</span><span class="sxs-lookup"><span data-stu-id="53349-398">If a user wants toosign out of your B2C application, it does not necessarily mean they want toosign out of their Facebook account.</span></span> <span data-ttu-id="53349-399">Sin embargo, en caso de hello de cuentas locales, sesión de usuario de Hola se finalizará correctamente.</span><span class="sxs-lookup"><span data-stu-id="53349-399">However, in hello case of local accounts, hello user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="53349-400">Uso de un inquilino de B2C propio</span><span class="sxs-lookup"><span data-stu-id="53349-400">Use your own B2C tenant</span></span>
<span data-ttu-id="53349-401">Si desea tootry estas solicitudes por sí mismo, debe realizar estos tres pasos y, a continuación, reemplace los valores de ejemplo de Hola descritos por los suyos propios:</span><span class="sxs-lookup"><span data-stu-id="53349-401">If you want tootry these requests for yourself, you must first perform these three steps, and then replace hello example values described earlier with your own:</span></span>

1. <span data-ttu-id="53349-402">[Crear un inquilino B2C](active-directory-b2c-get-started.md)y utilice el nombre de Hola de su inquilino en las solicitudes de Hola.</span><span class="sxs-lookup"><span data-stu-id="53349-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use hello name of your tenant in hello requests.</span></span>
2. <span data-ttu-id="53349-403">[Crear una aplicación](active-directory-b2c-app-registration.md) tooobtain un identificador de aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-403">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID.</span></span> <span data-ttu-id="53349-404">Incluya una aplicación web o una API web en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="53349-405">Opcionalmente puede crear un secreto de aplicación.</span><span class="sxs-lookup"><span data-stu-id="53349-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="53349-406">[Crear las directivas de](active-directory-b2c-reference-policies.md) tooobtain los nombres de directiva.</span><span class="sxs-lookup"><span data-stu-id="53349-406">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>


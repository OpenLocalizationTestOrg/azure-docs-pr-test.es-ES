---
title: 'Azure Active Directory B2C: directivas personalizadas | Microsoft Docs'
description: Un tema acerca de las directivas personalizadas de Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 1ff398a4-2079-4615-94f1-57de22c0aad6
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/04/2017
ms.author: parakhj
ms.openlocfilehash: 33f62a33ea7a3fadb6e7b045de10df25f5edbe83
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-active-directory-b2c-custom-policies"></a><span data-ttu-id="71e1d-103">Azure Active Directory B2C: directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-103">Azure Active Directory B2C: Custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

## <a name="what-are-custom-policies"></a><span data-ttu-id="71e1d-104">¿Qué son las directivas personalizadas?</span><span class="sxs-lookup"><span data-stu-id="71e1d-104">What are custom policies?</span></span>

<span data-ttu-id="71e1d-105">Las directivas personalizadas son archivos de configuración que definen el comportamiento del inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="71e1d-105">Custom policies are configuration files that define the behavior of your Azure AD B2C tenant.</span></span> <span data-ttu-id="71e1d-106">Mientras que las **directivas integradas** están predefinidas en el portal de Azure AD B2C para las tareas de identidad más comunes, un desarrollador de identidad puede editar completamente las directivas personalizadas para completar un número casi ilimitado de tareas.</span><span class="sxs-lookup"><span data-stu-id="71e1d-106">Whereas **built-in policies** are predefined in the Azure AD B2C portal for the most common identity tasks, custom policies can be fully edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="71e1d-107">Siga leyendo para determinar si las directivas personalizadas son adecuadas para usted y su escenario de identidad.</span><span class="sxs-lookup"><span data-stu-id="71e1d-107">Read on to determine if custom policies are right for you and your identity scenario.</span></span>

<span data-ttu-id="71e1d-108">**Editar directivas personalizadas no es para todos los usuarios.**</span><span class="sxs-lookup"><span data-stu-id="71e1d-108">**Custom policy editing is not for everyone.**</span></span> <span data-ttu-id="71e1d-109">La curva de aprendizaje es exigente, el tiempo de inicio es más prolongado y los futuros cambios en las directivas personalizadas requerirán una experiencia similar para mantenerlas.</span><span class="sxs-lookup"><span data-stu-id="71e1d-109">The learning curve is demanding, the startup time is longer, and future changes to custom policies will require similar expertise to maintain.</span></span> <span data-ttu-id="71e1d-110">Es necesario considerar cuidadosamente las directivas integradas para su escenario antes de usar las directivas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="71e1d-110">Built-in policies should be carefully considered first for your scenario before using custom policies.</span></span>

## <a name="comparing-built-in-policies-and-custom-policies"></a><span data-ttu-id="71e1d-111">Comparación entre directivas integradas y directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-111">Comparing built-in policies and custom policies</span></span>

| | <span data-ttu-id="71e1d-112">Directivas integradas</span><span class="sxs-lookup"><span data-stu-id="71e1d-112">Built-in policies</span></span> | <span data-ttu-id="71e1d-113">Directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-113">Custom policies</span></span> |
|-|-------------------|-----------------|
|<span data-ttu-id="71e1d-114">Usuarios de destino</span><span class="sxs-lookup"><span data-stu-id="71e1d-114">Target users</span></span> | <span data-ttu-id="71e1d-115">Todos los desarrolladores de aplicaciones con o sin conocimientos sobre la identidad</span><span class="sxs-lookup"><span data-stu-id="71e1d-115">All app developers with or without identity expertise</span></span> | <span data-ttu-id="71e1d-116">Profesionales de identidad: integradores de sistemas, consultores y equipos internos de identidad.</span><span class="sxs-lookup"><span data-stu-id="71e1d-116">Identity pros: systems integrators, consultants and in-house identity teams.</span></span> <span data-ttu-id="71e1d-117">Se sienten cómodos con los flujos de OpenIDConnect y comprenden a los proveedores de identidades y la autenticación basada en notificaciones</span><span class="sxs-lookup"><span data-stu-id="71e1d-117">They are comfortable with OpenIDConnect flows, and understand identity providers and claims-based authentication</span></span> |
|<span data-ttu-id="71e1d-118">Método de configuración</span><span class="sxs-lookup"><span data-stu-id="71e1d-118">Configuration method</span></span> | <span data-ttu-id="71e1d-119">Azure Portal con una interfaz de usuario fácil de usar</span><span class="sxs-lookup"><span data-stu-id="71e1d-119">Azure portal with a user-friendly UI</span></span> | <span data-ttu-id="71e1d-120">Edición directa de archivos XML y posterior carga en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="71e1d-120">Directly editing XML files and then uploading to the Azure portal</span></span> |
|<span data-ttu-id="71e1d-121">Personalización de la interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="71e1d-121">UI customization</span></span> | <span data-ttu-id="71e1d-122">Personalización completa de la interfaz de usuario, incluida compatibilidad con HTML, CSS y JScript (requiere un dominio personalizado)</span><span class="sxs-lookup"><span data-stu-id="71e1d-122">Full UI customization, including HTML, CSS, and jscript support(requires custom domain)</span></span><br><br><span data-ttu-id="71e1d-123">Compatibilidad multilingüe con cadenas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-123">Multilanguage support with Custom strings</span></span> | <span data-ttu-id="71e1d-124">Iguales</span><span class="sxs-lookup"><span data-stu-id="71e1d-124">Same</span></span> |
| <span data-ttu-id="71e1d-125">Personalización de atributos</span><span class="sxs-lookup"><span data-stu-id="71e1d-125">Attribute customization</span></span> | <span data-ttu-id="71e1d-126">Atributos estándar y personalizados</span><span class="sxs-lookup"><span data-stu-id="71e1d-126">Standard and custom attributes</span></span> | <span data-ttu-id="71e1d-127">Iguales</span><span class="sxs-lookup"><span data-stu-id="71e1d-127">Same</span></span> |
|<span data-ttu-id="71e1d-128">Administración de tokens y sesiones</span><span class="sxs-lookup"><span data-stu-id="71e1d-128">Token and session management</span></span> | <span data-ttu-id="71e1d-129">Varias opciones de sesiones y tokens personalizados</span><span class="sxs-lookup"><span data-stu-id="71e1d-129">Custom token and multiple session options</span></span> | <span data-ttu-id="71e1d-130">Iguales</span><span class="sxs-lookup"><span data-stu-id="71e1d-130">Same</span></span> |
|<span data-ttu-id="71e1d-131">Proveedores de identidades</span><span class="sxs-lookup"><span data-stu-id="71e1d-131">Identity Providers</span></span>| <span data-ttu-id="71e1d-132">**Actualmente**: proveedor social local predefinido</span><span class="sxs-lookup"><span data-stu-id="71e1d-132">**Today**: predefined local, social provider</span></span><br><br><span data-ttu-id="71e1d-133">**En el futuro**: OIDC, SAML, OAuth basado en estándares</span><span class="sxs-lookup"><span data-stu-id="71e1d-133">**Future**: Standards-based OIDC, SAML, OAuth</span></span> | <span data-ttu-id="71e1d-134">**Actualmente**: OIDC, OAUTH, SAML basado en estándares</span><span class="sxs-lookup"><span data-stu-id="71e1d-134">**Today**: Standards-based OIDC, OAUTH, SAML</span></span><br><br><span data-ttu-id="71e1d-135">**En el futuro**: WsFed</span><span class="sxs-lookup"><span data-stu-id="71e1d-135">**Future**: WsFed</span></span> |
|<span data-ttu-id="71e1d-136">Tareas de identidad (ejemplos)</span><span class="sxs-lookup"><span data-stu-id="71e1d-136">Identity Tasks (examples)</span></span> | <span data-ttu-id="71e1d-137">Registro o inicio de sesión con muchas cuentas sociales y cuentas locales</span><span class="sxs-lookup"><span data-stu-id="71e1d-137">Signup or SignIn with local and many social accounts</span></span><br><br><span data-ttu-id="71e1d-138">Restablecimiento de contraseña de autoservicio</span><span class="sxs-lookup"><span data-stu-id="71e1d-138">Self-Service Password Reset</span></span><br><br><span data-ttu-id="71e1d-139">Edición de perfil</span><span class="sxs-lookup"><span data-stu-id="71e1d-139">Profile Edit</span></span><br><br><span data-ttu-id="71e1d-140">Escenarios de Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="71e1d-140">Multi-Factor Auth scenarios</span></span><br><br><span data-ttu-id="71e1d-141">Sesiones y tokens personalizados</span><span class="sxs-lookup"><span data-stu-id="71e1d-141">Customize Tokens and sessions</span></span><br><br><span data-ttu-id="71e1d-142">Flujos de token de acceso</span><span class="sxs-lookup"><span data-stu-id="71e1d-142">Access Token flows</span></span> | <span data-ttu-id="71e1d-143">Completar las mismas tareas que con las directivas integradas usando proveedores de identidades personalizados o usar ámbitos personalizados</span><span class="sxs-lookup"><span data-stu-id="71e1d-143">Complete the same tasks as built-in policies using custom identity providers or use custom scopes</span></span><br><br><span data-ttu-id="71e1d-144">Aprovisionar el usuario en otro sistema en el momento del registro</span><span class="sxs-lookup"><span data-stu-id="71e1d-144">Provision user in another system at the time of registration</span></span><br><br><span data-ttu-id="71e1d-145">Enviar un mensaje de bienvenida con su propio proveedor de servicios de correo electrónico</span><span class="sxs-lookup"><span data-stu-id="71e1d-145">Send a welcome email using your own email service provider</span></span><br><br><span data-ttu-id="71e1d-146">Usar un almacén de usuario externo a B2C</span><span class="sxs-lookup"><span data-stu-id="71e1d-146">Use a user store outside B2C</span></span><br><br><span data-ttu-id="71e1d-147">Validar la información proporcionada por el usuario con un sistema de confianza a través de API</span><span class="sxs-lookup"><span data-stu-id="71e1d-147">Validate user provided information with a trusted system via API</span></span> |

## <a name="policy-files"></a><span data-ttu-id="71e1d-148">Archivos de directivas</span><span class="sxs-lookup"><span data-stu-id="71e1d-148">Policy files</span></span>

<span data-ttu-id="71e1d-149">Una directiva personalizada se representa como uno o varios archivos con formato XML que se hacen referencia entre sí en una cadena jerárquica.</span><span class="sxs-lookup"><span data-stu-id="71e1d-149">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="71e1d-150">Los elementos XML definen lo siguiente: esquema de notificaciones, transformaciones de notificaciones, definiciones de contenido, perfiles técnicos/proveedores de notificaciones y pasos de orquestación de Userjourney, entre otros elementos.</span><span class="sxs-lookup"><span data-stu-id="71e1d-150">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>

<span data-ttu-id="71e1d-151">Se recomienda usar tres tipos de archivos de directivas:</span><span class="sxs-lookup"><span data-stu-id="71e1d-151">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="71e1d-152">**Un archivo BASE**, que contiene la mayoría de las definiciones y para las cuales Azure proporciona un ejemplo completo.</span><span class="sxs-lookup"><span data-stu-id="71e1d-152">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="71e1d-153">Se recomienda que haga un mínimo de cambios en este archivo para facilitar la solución de problemas y el mantenimiento a largo plazo de las directivas</span><span class="sxs-lookup"><span data-stu-id="71e1d-153">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="71e1d-154">**Un archivo EXTensions** que contiene los cambios de configuración únicos para el inquilino</span><span class="sxs-lookup"><span data-stu-id="71e1d-154">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="71e1d-155">**Un archivo de usuario de confianza**, que es el archivo centrado en una tarea única que la aplicación o el servicio (también conocido como usuario de confianza) invoca directamente.</span><span class="sxs-lookup"><span data-stu-id="71e1d-155">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="71e1d-156">Lea el artículo sobre las definiciones de archivos de directivas para más información.</span><span class="sxs-lookup"><span data-stu-id="71e1d-156">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="71e1d-157">Cada tarea única requiere su propio usuario de confianza y, dependiendo de los requisitos de marca, el número podría ser "total de aplicaciones x número total de casos de uso".</span><span class="sxs-lookup"><span data-stu-id="71e1d-157">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>


<span data-ttu-id="71e1d-158">Las directivas integradas de Azure AD B2C siguen el patrón de 3 archivos ya mencionado, pero el desarrollador solo ve el archivo de usuario de confianza mientras que el portal hace cambios en el archivo EXTensions en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="71e1d-158">Built-in policies in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>

## <a name="core-concepts-you-should-know-when-using-custom-policies"></a><span data-ttu-id="71e1d-159">Conceptos básicos que debe saber cuando usa las directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-159">Core concepts you should know when using custom policies</span></span>

### <a name="azure-active-directory-b2c"></a><span data-ttu-id="71e1d-160">Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="71e1d-160">Azure Active Directory B2C</span></span>

<span data-ttu-id="71e1d-161">Servicio de administración de identidades y acceso de cliente (CIAM) de Azure.</span><span class="sxs-lookup"><span data-stu-id="71e1d-161">Azure’s customer identity and access management (CIAM) service.</span></span> <span data-ttu-id="71e1d-162">El servicio incluye:</span><span class="sxs-lookup"><span data-stu-id="71e1d-162">The service includes:</span></span>

1. <span data-ttu-id="71e1d-163">Un directorio de usuarios como instancia de Azure Active Directory especial accesible a través de Microsoft Graph y que contiene los datos de usuario tanto para cuentas locales como cuentas federadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-163">A user directory in the form of a special-purpose Azure Active Directory accessible via Microsoft Graph and which holds user data for both local accounts and federated accounts</span></span> 
2. <span data-ttu-id="71e1d-164">Acceso a **Identity Experience Framework** que orquesta la confianza entre usuarios y entidades y transmite notificaciones entre ellas para completar una tarea de administración de identidades/acceso</span><span class="sxs-lookup"><span data-stu-id="71e1d-164">Access to the **Identity Experience Framework** which orchestrates trust between users and entities and passes claims between them to complete an identity/access management task</span></span> 
3. <span data-ttu-id="71e1d-165">Un servicio de token de seguridad (STS) que emite tokens de identificación, tokens de actualización y tokens de acceso (y aserciones SAML equivalentes) y los valida con el fin de proteger los recursos.</span><span class="sxs-lookup"><span data-stu-id="71e1d-165">A security token service (STS) issuing id tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validating them to protect resources.</span></span>

<span data-ttu-id="71e1d-166">Azure AD B2C interactúa con proveedores de identidades, usuarios, otros sistemas y con el directorio de usuarios locales en secuencia para realizar una tarea de identidad (por ejemplo, iniciar la sesión de un usuario, registrar un usuario nuevo, restablecer una contraseña).</span><span class="sxs-lookup"><span data-stu-id="71e1d-166">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task (e.g. login a user, register a new user, reset a password).</span></span> <span data-ttu-id="71e1d-167">La plataforma subyacente que establece una confianza entre varios usuarios y ejecuta estos pasos se llama Identity Experience Framework; además, una directiva (que también se conoce como una directiva de marco de confianza o de recorrido del usuario) define explícitamente los actores, las acciones, los protocolos y la secuencia de pasos que se van a completar.</span><span class="sxs-lookup"><span data-stu-id="71e1d-167">The underlying platform which establishes multi-party trust and executes these steps is called the Identity Experience Framework and a policy (also called an user journey or a Trust framework policy) explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span></span>

### <a name="identity-experience-framework"></a><span data-ttu-id="71e1d-168">Marco de experiencia de identidad</span><span class="sxs-lookup"><span data-stu-id="71e1d-168">Identity Experience Framework</span></span>

<span data-ttu-id="71e1d-169">Una plataforma de Azure basada en la nube, controlada por directivas y completamente configurable que orquesta la confianza entre entidades (en general, proveedores de confianza) en formatos de protocolo estándar como OpenIDConnect, OAuth, SAML, WSFed y algunos no estándar (como intercambios de notificaciones sistema a sistema basados en API de REST, por ejemplo).</span><span class="sxs-lookup"><span data-stu-id="71e1d-169">A fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities (broadly Claims Providers) in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones (e.g. REST API-based system-to-system claims exchanges).</span></span> <span data-ttu-id="71e1d-170">I2E crea experiencias propias fáciles de usar que admiten HTML, CSS y JScript.</span><span class="sxs-lookup"><span data-stu-id="71e1d-170">The I2E creates user-friendly, whitelabelled experiences that support HTML, CSS, and jscript.</span></span>  <span data-ttu-id="71e1d-171">Actualmente, Identity Experience Framework solo está disponible dentro del contexto del servicio de Azure AD B2C y se destina preferentemente a las tareas relacionadas con CIAM.</span><span class="sxs-lookup"><span data-stu-id="71e1d-171">Today, the Identity Experience Framework is available only in the context of the Azure AD B2C service and prioritized for tasks related to CIAM.</span></span>

### <a name="built-in-policies"></a><span data-ttu-id="71e1d-172">Directivas integradas</span><span class="sxs-lookup"><span data-stu-id="71e1d-172">Built-in policies</span></span>

<span data-ttu-id="71e1d-173">Archivos de configuración predefinidos que dirigen el comportamiento de Azure AD B2C para realizar las tareas de identidad de uso más frecuente (es decir,</span><span class="sxs-lookup"><span data-stu-id="71e1d-173">Predefined configuration files that direct the behavior of Azure AD B2C to perform the most commonly used identity tasks (i.e.</span></span> <span data-ttu-id="71e1d-174">registro de usuario, inicio de sesión, restablecimiento de contraseña) e interactúan con entidades de confianza cuya relación también está predefinida en Azure AD B2C (por ejemplo, proveedor de identidades de Facebook, LinkedIn, cuenta Microsoft, cuentas de Google).</span><span class="sxs-lookup"><span data-stu-id="71e1d-174">user registration, signin, password reset) and interact with trusted parties whose relationship is also predefined in Azure AD B2C (e.g. Facebook identity provider, LinkedIn, Microsoft Account, Google accounts).</span></span>  <span data-ttu-id="71e1d-175">En el futuro, también se pueden proporcionar directivas integradas para la personalización de los proveedores de identidades, que habitualmente están en el dominio empresarial, como Azure Active Directory Premium, Active Directory/ADFS, proveedor de identidades de Salesforce, etc.</span><span class="sxs-lookup"><span data-stu-id="71e1d-175">In the future, built-in policies may also provide for customization of identity providers which are typically in the enterprise realm such as Azure Active Directory Premium, Active Directory/ADFS, Salesforce ID Provider etc.</span></span>


### <a name="custom-policies"></a><span data-ttu-id="71e1d-176">Directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-176">Custom policies</span></span>

<span data-ttu-id="71e1d-177">Los archivos de configuración que definen el comportamiento de Identity Experience Framework en el inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="71e1d-177">Configuration files that define the behavior of Identity Experience Framework in your Azure AD B2C tenant.</span></span> <span data-ttu-id="71e1d-178">Una directiva personalizada es accesible como uno o varios archivos XML (consulte las definiciones de archivos de directivas) que Identity Experience Framework ejecuta cuando lo invoca un usuario de confianza (por ejemplo, una aplicación).</span><span class="sxs-lookup"><span data-stu-id="71e1d-178">A custom policy is accessible as one or several XML files (see Policy Files definitions) which are executed by the Identity Experience Framework when invoked by a relying party (e.g. an application).</span></span> <span data-ttu-id="71e1d-179">Un desarrollador de identidades puede editar directamente las directivas personalizadas para completar un número casi ilimitado de tareas.</span><span class="sxs-lookup"><span data-stu-id="71e1d-179">Custom policies can be directly edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="71e1d-180">Los desarrolladores que configuran las directivas personalizadas deben definir las relaciones de confianza con mucho detalle para incluir puntos de conexión de metadatos, definiciones exactas de intercambio de notificaciones, además de configurar secretos, claves y certificados según lo necesite cada proveedor de identidades.</span><span class="sxs-lookup"><span data-stu-id="71e1d-180">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys and certificates as needed by each identity provider.</span></span>

## <a name="policy-file-definitions-for-identity-experience-framework-trustframeworks"></a><span data-ttu-id="71e1d-181">Definiciones de archivos de directivas para marcos de confianza de Identity Experience Framework</span><span class="sxs-lookup"><span data-stu-id="71e1d-181">Policy File Definitions for Identity Experience Framework Trustframeworks</span></span>

### <a name="policy-files"></a><span data-ttu-id="71e1d-182">Archivos de directivas</span><span class="sxs-lookup"><span data-stu-id="71e1d-182">Policy Files</span></span>

<span data-ttu-id="71e1d-183">Una directiva personalizada se representa como uno o varios archivos con formato XML que se hacen referencia entre sí en una cadena jerárquica.</span><span class="sxs-lookup"><span data-stu-id="71e1d-183">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="71e1d-184">Los elementos XML definen lo siguiente: esquema de notificaciones, transformaciones de notificaciones, definiciones de contenido, perfiles técnicos/proveedores de notificaciones y pasos de orquestación de Userjourney, entre otros elementos.</span><span class="sxs-lookup"><span data-stu-id="71e1d-184">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>  <span data-ttu-id="71e1d-185">Se recomienda usar tres tipos de archivos de directivas:</span><span class="sxs-lookup"><span data-stu-id="71e1d-185">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="71e1d-186">**Un archivo BASE**, que contiene la mayoría de las definiciones y para las cuales Azure proporciona un ejemplo completo.</span><span class="sxs-lookup"><span data-stu-id="71e1d-186">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="71e1d-187">Se recomienda que haga un mínimo de cambios en este archivo para facilitar la solución de problemas y el mantenimiento a largo plazo de las directivas</span><span class="sxs-lookup"><span data-stu-id="71e1d-187">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="71e1d-188">**Un archivo EXTensions** que contiene los cambios de configuración únicos para el inquilino</span><span class="sxs-lookup"><span data-stu-id="71e1d-188">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="71e1d-189">**Un archivo de usuario de confianza**, que es el archivo centrado en una tarea única que la aplicación o el servicio (también conocido como usuario de confianza) invoca directamente.</span><span class="sxs-lookup"><span data-stu-id="71e1d-189">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="71e1d-190">Lea el artículo sobre las definiciones de archivos de directivas para más información.</span><span class="sxs-lookup"><span data-stu-id="71e1d-190">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="71e1d-191">Cada tarea única requiere su propio usuario de confianza y, dependiendo de los requisitos de marca, el número podría ser "total de aplicaciones x número total de casos de uso".</span><span class="sxs-lookup"><span data-stu-id="71e1d-191">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>

![Tipos de archivos de directivas](media/active-directory-b2c-overview-custom/active-directory-b2c-overview-custom-policy-files.png)

| <span data-ttu-id="71e1d-193">Tipo de archivo de directiva</span><span class="sxs-lookup"><span data-stu-id="71e1d-193">Type of policy file</span></span> | <span data-ttu-id="71e1d-194">Ejemplos de nombre de archivo</span><span class="sxs-lookup"><span data-stu-id="71e1d-194">Examples file name</span></span> | <span data-ttu-id="71e1d-195">Uso recomendado</span><span class="sxs-lookup"><span data-stu-id="71e1d-195">Recommended use</span></span> | <span data-ttu-id="71e1d-196">Hereda de</span><span class="sxs-lookup"><span data-stu-id="71e1d-196">Inherits from</span></span> |
|---------------------|--------------------|-----------------|---------------|
| <span data-ttu-id="71e1d-197">BASE</span><span class="sxs-lookup"><span data-stu-id="71e1d-197">BASE</span></span> |<span data-ttu-id="71e1d-198">TrustFrameworkBase.xml</span><span class="sxs-lookup"><span data-stu-id="71e1d-198">TrustFrameworkBase.xml</span></span><br><br><span data-ttu-id="71e1d-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span><span class="sxs-lookup"><span data-stu-id="71e1d-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span></span> | <span data-ttu-id="71e1d-200">Incluye el esquema de notificaciones central, las transformaciones de notificaciones, los proveedores de notificaciones y los recorridos de usuario que Microsoft configura</span><span class="sxs-lookup"><span data-stu-id="71e1d-200">Includes the core claims schema, claims transformations, claims providers, and user journeys configured by Microsoft</span></span><br><br><span data-ttu-id="71e1d-201">Haga un mínimo de cambios en este archivo</span><span class="sxs-lookup"><span data-stu-id="71e1d-201">Make minimal changes to this file</span></span> | <span data-ttu-id="71e1d-202">None</span><span class="sxs-lookup"><span data-stu-id="71e1d-202">None</span></span> |
| <span data-ttu-id="71e1d-203">Extensión (EXT)</span><span class="sxs-lookup"><span data-stu-id="71e1d-203">Extension (EXT)</span></span> | <span data-ttu-id="71e1d-204">TrustFrameworkExtensions.xml</span><span class="sxs-lookup"><span data-stu-id="71e1d-204">TrustFrameworkExtensions.xml</span></span><br><br><span data-ttu-id="71e1d-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span><span class="sxs-lookup"><span data-stu-id="71e1d-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span></span> | <span data-ttu-id="71e1d-206">Aquí consolide los cambios en el archivo BASE</span><span class="sxs-lookup"><span data-stu-id="71e1d-206">Consolidate your changes to the BASE file here</span></span><br><br><span data-ttu-id="71e1d-207">Proveedores de notificaciones modificadas</span><span class="sxs-lookup"><span data-stu-id="71e1d-207">Modified claims providers</span></span><br><br><span data-ttu-id="71e1d-208">Recorridos de usuario modificados</span><span class="sxs-lookup"><span data-stu-id="71e1d-208">Modified user journeys</span></span><br><br><span data-ttu-id="71e1d-209">Sus propias definiciones de esquemas personalizados</span><span class="sxs-lookup"><span data-stu-id="71e1d-209">Your own custom schema definitions</span></span> | <span data-ttu-id="71e1d-210">Archivo BASE</span><span class="sxs-lookup"><span data-stu-id="71e1d-210">BASE file</span></span> |
| <span data-ttu-id="71e1d-211">Usuario de confianza</span><span class="sxs-lookup"><span data-stu-id="71e1d-211">Relying Party (RP)</span></span> | <span data-ttu-id="71e1d-212">B2C_1A_sign_up_sign_in.xml</span><span class="sxs-lookup"><span data-stu-id="71e1d-212">B2C_1A_sign_up_sign_in.xml</span></span>| <span data-ttu-id="71e1d-213">Cambiar aquí la configuración de la sesión y la forma del token</span><span class="sxs-lookup"><span data-stu-id="71e1d-213">Change token shape and session settings here</span></span>| <span data-ttu-id="71e1d-214">Archivo Extensions(EXT)</span><span class="sxs-lookup"><span data-stu-id="71e1d-214">Extensions(EXT) file</span></span> |

### <a name="inheritance-model"></a><span data-ttu-id="71e1d-215">Modelo de herencia</span><span class="sxs-lookup"><span data-stu-id="71e1d-215">Inheritance model</span></span>

<span data-ttu-id="71e1d-216">Cuando una aplicación llama al archivo de directiva de usuario de confianza, la instancia de Identity Experience Framework en B2C llamará a todos los elementos desde BASE, luego desde EXTENSIONS y, por último, desde el archivo de directiva de usuario de confianza para ensamblar la directiva actual en vigor.</span><span class="sxs-lookup"><span data-stu-id="71e1d-216">When an application calls the RP Policy file, the Identity Experience Framework in B2C will add all the elements from BASE, then from EXTENSIONS, and lastly from the RP policy file to assemble the current policy in effect.</span></span>  <span data-ttu-id="71e1d-217">Los elementos del mismo tipo y nombre en el archivo de usuario de confianza reemplazarán los existentes en EXTENSIONS y EXTENSIONS reemplazará a BASE.</span><span class="sxs-lookup"><span data-stu-id="71e1d-217">Elements of the same type and name in the RP file will override those in the EXTENSIONS, and EXTENSIONS overrides BASE.</span></span>

<span data-ttu-id="71e1d-218">Las **directivas integradas** de Azure AD B2C siguen el patrón de 3 archivos ya mencionado, pero el desarrollador solo ve el archivo de usuario de confianza mientras que el portal hace cambios en el archivo EXTensions en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="71e1d-218">**Built-in policies** in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>  <span data-ttu-id="71e1d-219">Todas las instancias de Azure AD B2C comparten un archivo de directiva BASE que el equipo de Azure B2C controla y que se actualiza con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="71e1d-219">All of Azure AD B2C shares a BASE policy file that is under the control of the Azure B2C team and is updated frequently.</span></span>

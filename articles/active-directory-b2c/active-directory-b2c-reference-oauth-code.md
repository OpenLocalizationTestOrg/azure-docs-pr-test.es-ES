---
title: "Flujo de código de autorización - Azure AD B2C | Microsoft Docs"
description: "Obtenga información acerca de cómo toobuild aplicaciones web con el protocolo de autenticación de Azure AD B2C y OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 6bf9d37310bd45b39bda346441413556f9fd4fdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="b8309-103">Azure Active Directory B2C: flujo de código de autorización de OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="b8309-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="b8309-104">Puede usar la concesión de código de autorización de hello OAuth 2.0 en aplicaciones instaladas en un dispositivo toogain acceder a tooprotected recursos, como las API web.</span><span class="sxs-lookup"><span data-stu-id="b8309-104">You can use hello OAuth 2.0 authorization code grant in apps installed on a device toogain access tooprotected resources, such as web APIs.</span></span> <span data-ttu-id="b8309-105">Mediante el uso de implementación de hello Azure Active Directory B2C (Azure AD B2C) de OAuth 2.0, puede agregar el inicio de sesión, inicio de sesión y otra administración de identidad tareas tooyour aplicaciones de escritorio y móviles.</span><span class="sxs-lookup"><span data-stu-id="b8309-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks tooyour mobile and desktop apps.</span></span> <span data-ttu-id="b8309-106">Este artículo es independiente del lenguaje</span><span class="sxs-lookup"><span data-stu-id="b8309-106">This article is language-independent.</span></span> <span data-ttu-id="b8309-107">En el artículo de hello, se describe cómo toosend y recibir mensajes HTTP sin usar las bibliotecas de código abierto.</span><span class="sxs-lookup"><span data-stu-id="b8309-107">In hello article, we describe how toosend and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link toolibraries -->

<span data-ttu-id="b8309-108">Hola flujo de código de autorización de OAuth 2.0 se describe en [sección 4.1 de especificación de hello OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="b8309-108">hello OAuth 2.0 authorization code flow is described in [section 4.1 of hello OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="b8309-109">Puede usarlo para llevar a cabo la autenticación y la autorización en la mayoría de los tipos de aplicación, incluidas las [aplicaciones web](active-directory-b2c-apps.md#web-apps) y las [aplicaciones instaladas de forma nativa](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="b8309-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="b8309-110">Puede usar hello adquirir toosecurely de flujo de código de autorización de OAuth 2.0 *tokens de acceso* para las aplicaciones, lo que puede ser usado tooaccess recursos que están protegidos por un [servidor de autorización](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="b8309-110">You can use hello OAuth 2.0 authorization code flow toosecurely acquire *access tokens* for your apps, which can be used tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="b8309-111">En este artículo se centra en hello **clientes públicos** flujo de código de autorización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b8309-111">This article focuses on hello **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="b8309-112">Un cliente público es cualquier aplicación cliente que no puede ser de confianza toosecurely mantener la integridad de Hola de una contraseña secreta.</span><span class="sxs-lookup"><span data-stu-id="b8309-112">A public client is any client application that cannot be trusted toosecurely maintain hello integrity of a secret password.</span></span> <span data-ttu-id="b8309-113">Esto incluye aplicaciones móviles, aplicaciones de escritorio y básicamente cualquier aplicación que se ejecuta en un dispositivo y necesita tooget los tokens de acceso.</span><span class="sxs-lookup"><span data-stu-id="b8309-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs tooget access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="b8309-114">aplicación web tooa de administración de identidad de tooadd mediante el uso de Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) en lugar de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b8309-114">tooadd identity management tooa web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="b8309-115">Azure AD B2C amplía estándar Hola que fluye de OAuth 2.0 toodo más de autorización y autenticación simple.</span><span class="sxs-lookup"><span data-stu-id="b8309-115">Azure AD B2C extends hello standard OAuth 2.0 flows toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="b8309-116">Introduce hello [parámetro policy](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="b8309-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="b8309-117">Con las directivas integradas, puede usar OAuth 2.0 tooadd usuario experimenta tooyour aplicación, como inicio de sesión, inicio de sesión y la administración de perfiles.</span><span class="sxs-lookup"><span data-stu-id="b8309-117">With built-in policies, you can use OAuth 2.0 tooadd user experiences tooyour app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="b8309-118">En este artículo, le mostraremos cómo toouse tooimplement de OAuth 2.0 y las directivas de cada una de estas experiencias en sus aplicaciones nativas.</span><span class="sxs-lookup"><span data-stu-id="b8309-118">In this article, we show you how toouse OAuth 2.0 and policies tooimplement each of these experiences in your native applications.</span></span> <span data-ttu-id="b8309-119">También le mostraremos cómo tooget los tokens de acceso para tener acceso a las API de web.</span><span class="sxs-lookup"><span data-stu-id="b8309-119">We also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="b8309-120">En solicitudes de HTTP de ejemplo de Hola en este artículo, se utiliza el directorio de Azure AD B2C de ejemplo, **fabrikamb2c.onmicrosoft.com**. También se usa nuestra aplicación y nuestras directivas de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="b8309-120">In hello example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="b8309-121">Puede intentar Hola solicitudes mediante el uso de estos valores o reemplazarlos con sus propios valores.</span><span class="sxs-lookup"><span data-stu-id="b8309-121">You can try hello requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="b8309-122">Obtenga información acerca de cómo demasiado[obtener su propio directorio, aplicaciones y directivas de Azure AD B2C](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="b8309-122">Learn how too[get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="b8309-123">1. Obtener un código de autorización</span><span class="sxs-lookup"><span data-stu-id="b8309-123">1. Get an authorization code</span></span>
<span data-ttu-id="b8309-124">flujo de código de autorización de Hello comienza con cliente hello dirigir Hola usuario toohello `/authorize` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b8309-124">hello authorization code flow begins with hello client directing hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="b8309-125">Esto forma parte interactivo de Hola de flujo de hello, donde usuario Hola realiza la acción.</span><span class="sxs-lookup"><span data-stu-id="b8309-125">This is hello interactive part of hello flow, where hello user takes action.</span></span> <span data-ttu-id="b8309-126">En esta solicitud, el cliente de Hola indica Hola `scope` permisos de Hola de parámetro que necesita tooacquire de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-126">In this request, hello client indicates in hello `scope` parameter hello permissions that it needs tooacquire from hello user.</span></span> <span data-ttu-id="b8309-127">Hola `p` parámetro, indica Hola directiva tooexecute.</span><span class="sxs-lookup"><span data-stu-id="b8309-127">In hello `p` parameter, it indicates hello policy tooexecute.</span></span> <span data-ttu-id="b8309-128">Hello tres ejemplos siguientes (con saltos de línea para mejorar la legibilidad) utilizan una directiva diferente.</span><span class="sxs-lookup"><span data-stu-id="b8309-128">hello following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="b8309-129">Uso de una directiva de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="b8309-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="b8309-130">Uso de una directiva de registro</span><span class="sxs-lookup"><span data-stu-id="b8309-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="b8309-131">Uso de una directiva de edición de perfil</span><span class="sxs-lookup"><span data-stu-id="b8309-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="b8309-132">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-132">Parameter</span></span> | <span data-ttu-id="b8309-133">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="b8309-133">Required?</span></span> | <span data-ttu-id="b8309-134">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b8309-135">client_id</span><span class="sxs-lookup"><span data-stu-id="b8309-135">client_id</span></span> |<span data-ttu-id="b8309-136">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-136">Required</span></span> |<span data-ttu-id="b8309-137">Identificador de la aplicación Hello asignado tooyour aplicación Hola [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b8309-137">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="b8309-138">response_type</span><span class="sxs-lookup"><span data-stu-id="b8309-138">response_type</span></span> |<span data-ttu-id="b8309-139">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-139">Required</span></span> |<span data-ttu-id="b8309-140">tipo de respuesta de Hello, que debe incluir `code` para el flujo de código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-140">hello response type, which must include `code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="b8309-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b8309-141">redirect_uri</span></span> |<span data-ttu-id="b8309-142">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-142">Required</span></span> |<span data-ttu-id="b8309-143">Hola URI de redireccionamiento de la aplicación, donde se envían y reciben mediante la aplicación de las respuestas de autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8309-143">hello redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="b8309-144">Debe coincidir exactamente con uno de redirección de hello URI que se ha registrado en el portal de hello, excepto en que debe ser codificados de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="b8309-144">It must exactly match one of hello redirect URIs that you registered in hello portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="b8309-145">ámbito</span><span class="sxs-lookup"><span data-stu-id="b8309-145">scope</span></span> |<span data-ttu-id="b8309-146">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-146">Required</span></span> |<span data-ttu-id="b8309-147">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="b8309-147">A space-separated list of scopes.</span></span> <span data-ttu-id="b8309-148">El valor de un solo ámbito indica tooAzure Active Directory (Azure AD) tanto de los permisos de Hola que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="b8309-148">A single scope value indicates tooAzure Active Directory (Azure AD) both of hello permissions that are being requested.</span></span> <span data-ttu-id="b8309-149">Mediante identificación como ámbito de hello indica que la aplicación necesita un token de acceso que se puede usar con su propio servicio o la API web, representada por el cliente de Hola Hola mismo identificador de cliente.</span><span class="sxs-lookup"><span data-stu-id="b8309-149">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="b8309-150">Hola `offline_access` ámbito indica que la aplicación necesita un token de actualización para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="b8309-150">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span> <span data-ttu-id="b8309-151">También puede usar hello `openid` ámbito toorequest un identificador de token de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b8309-151">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="b8309-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="b8309-152">response_mode</span></span> |<span data-ttu-id="b8309-153">Recomendado</span><span class="sxs-lookup"><span data-stu-id="b8309-153">Recommended</span></span> |<span data-ttu-id="b8309-154">método Hello que usar toosend Hola resultante autorización código tooyour atrás aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8309-154">hello method that you use toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="b8309-155">Puede ser `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="b8309-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="b8309-156">state</span><span class="sxs-lookup"><span data-stu-id="b8309-156">state</span></span> |<span data-ttu-id="b8309-157">Recomendado</span><span class="sxs-lookup"><span data-stu-id="b8309-157">Recommended</span></span> |<span data-ttu-id="b8309-158">Un valor incluido en la solicitud de Hola que se devuelve en la respuesta de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-158">A value included in hello request that is returned in hello token response.</span></span> <span data-ttu-id="b8309-159">Puede ser una cadena de contenido que desee toouse.</span><span class="sxs-lookup"><span data-stu-id="b8309-159">It can be a string of any content that you want toouse.</span></span> <span data-ttu-id="b8309-160">Normalmente, se utiliza un valor único generado aleatoriamente, ataques de falsificación de solicitud entre sitios tooprevent.</span><span class="sxs-lookup"><span data-stu-id="b8309-160">Usually, a randomly generated unique value is  used, tooprevent cross-site request forgery attacks.</span></span> <span data-ttu-id="b8309-161">estado de Hello también es tooencode usa información acerca del estado del usuario de hello en la aplicación hello antes de que se produjo la solicitud de autenticación de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-161">hello state also is used tooencode information about hello user's state in hello app before hello authentication request occurred.</span></span> <span data-ttu-id="b8309-162">Por ejemplo, usuario de la página Hola Hola se realizó u Hola directiva que se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="b8309-162">For example, hello page hello user was on, or hello policy that was being executed.</span></span> |
| <span data-ttu-id="b8309-163">p</span><span class="sxs-lookup"><span data-stu-id="b8309-163">p</span></span> |<span data-ttu-id="b8309-164">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-164">Required</span></span> |<span data-ttu-id="b8309-165">Directiva de Hola que se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="b8309-165">hello policy that is executed.</span></span> <span data-ttu-id="b8309-166">Su Hola nombre de una directiva que se crea en el directorio de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b8309-166">It's hello name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="b8309-167">valor de nombre de directiva de Hello debe comenzar por **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="b8309-167">hello policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="b8309-168">toolearn más información acerca de las directivas, consulte [directivas integradas de Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="b8309-168">toolearn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="b8309-169">símbolo del sistema</span><span class="sxs-lookup"><span data-stu-id="b8309-169">prompt</span></span> |<span data-ttu-id="b8309-170">Opcional</span><span class="sxs-lookup"><span data-stu-id="b8309-170">Optional</span></span> |<span data-ttu-id="b8309-171">tipo de Hello de interacción del usuario que es necesario.</span><span class="sxs-lookup"><span data-stu-id="b8309-171">hello type of user interaction that is required.</span></span> <span data-ttu-id="b8309-172">Actualmente, Hola único valor válido es `login`, que fuerza Hola tooenter usuario sus credenciales en esa solicitud.</span><span class="sxs-lookup"><span data-stu-id="b8309-172">Currently, hello only valid value is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="b8309-173">El inicio de sesión único no surtirá efecto.</span><span class="sxs-lookup"><span data-stu-id="b8309-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="b8309-174">En este momento, usuario Hola se solicita el flujo de trabajo de la directiva de toocomplete Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-174">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="b8309-175">Ello puede significar tener a usuario Hola escribir su nombre de usuario y una contraseña, inicio de sesión con una identidad de redes sociales, registrarse para el directorio de Hola o cualquier otro número de pasos.</span><span class="sxs-lookup"><span data-stu-id="b8309-175">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps.</span></span> <span data-ttu-id="b8309-176">Las acciones del usuario dependen de cómo se define la directiva de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-176">User actions depend on how hello policy is defined.</span></span>

<span data-ttu-id="b8309-177">Al finalizar usuario Hola directiva hello, Azure AD devuelve una aplicación de tooyour de respuesta al valor de Hola que utilizó para `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="b8309-177">After hello user completes hello policy, Azure AD returns a response tooyour app at hello value you used for `redirect_uri`.</span></span> <span data-ttu-id="b8309-178">Se utiliza método hello especificado en hello `response_mode` parámetro.</span><span class="sxs-lookup"><span data-stu-id="b8309-178">It uses hello method specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="b8309-179">respuesta de Hello es exactamente Hola mismo para cada uno de los escenarios de acción de usuario hello, independientemente de la directiva de Hola que se ejecutó.</span><span class="sxs-lookup"><span data-stu-id="b8309-179">hello response is exactly hello same for each of hello user action scenarios, independent of hello policy that was executed.</span></span>

<span data-ttu-id="b8309-180">Una respuesta correcta que usa `response_mode=query` tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="b8309-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // hello authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // hello value provided in hello request
```

| <span data-ttu-id="b8309-181">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-181">Parameter</span></span> | <span data-ttu-id="b8309-182">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-183">código</span><span class="sxs-lookup"><span data-stu-id="b8309-183">code</span></span> |<span data-ttu-id="b8309-184">código de autorización de Hola Hola aplicación solicitada.</span><span class="sxs-lookup"><span data-stu-id="b8309-184">hello authorization code that hello app requested.</span></span> <span data-ttu-id="b8309-185">aplicación Hello puede utilizar toorequest de código de autorización de hello un token de acceso para un recurso de destino.</span><span class="sxs-lookup"><span data-stu-id="b8309-185">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="b8309-186">Los códigos de autorización tienen una duración muy breve.</span><span class="sxs-lookup"><span data-stu-id="b8309-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="b8309-187">Normalmente, caducan al cabo de unos 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="b8309-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="b8309-188">state</span><span class="sxs-lookup"><span data-stu-id="b8309-188">state</span></span> |<span data-ttu-id="b8309-189">Consulte la descripción completa de hello en tabla Hola Hola sección anterior.</span><span class="sxs-lookup"><span data-stu-id="b8309-189">See hello full description in hello table in hello preceding section.</span></span> <span data-ttu-id="b8309-190">Si un `state` parámetro se incluye en la solicitud de hello, hello mismo valor aparecerán en la respuesta de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-190">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="b8309-191">Hello aplicación debe comprobar que hello `state` valores de hello solicitud y respuesta son idénticos.</span><span class="sxs-lookup"><span data-stu-id="b8309-191">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="b8309-192">Las respuestas de error también se pueden enviar toohello el URI de redireccionamiento para que hello aplicación pueda controlarlos adecuadamente:</span><span class="sxs-lookup"><span data-stu-id="b8309-192">Error responses also can be sent toohello redirect URI so that hello app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="b8309-193">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-193">Parameter</span></span> | <span data-ttu-id="b8309-194">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-195">error</span><span class="sxs-lookup"><span data-stu-id="b8309-195">error</span></span> |<span data-ttu-id="b8309-196">Una cadena de código de error que se pueden usar tipos de hello tooclassify de errores que se producen.</span><span class="sxs-lookup"><span data-stu-id="b8309-196">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="b8309-197">También puede usar Hola cadena tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="b8309-197">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="b8309-198">error_description</span><span class="sxs-lookup"><span data-stu-id="b8309-198">error_description</span></span> |<span data-ttu-id="b8309-199">Un mensaje de error específico que puede ayudarle a identificar la causa de raíz de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8309-199">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="b8309-200">state</span><span class="sxs-lookup"><span data-stu-id="b8309-200">state</span></span> |<span data-ttu-id="b8309-201">Consulte la descripción completa de Hola Hola tabla anterior.</span><span class="sxs-lookup"><span data-stu-id="b8309-201">See hello full description in hello preceding table.</span></span> <span data-ttu-id="b8309-202">Si un `state` parámetro se incluye en la solicitud de hello, hello mismo valor aparecerán en la respuesta de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-202">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="b8309-203">Hello aplicación debe comprobar que hello `state` valores de hello solicitud y respuesta son idénticos.</span><span class="sxs-lookup"><span data-stu-id="b8309-203">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="b8309-204">2. Obtención de un token</span><span class="sxs-lookup"><span data-stu-id="b8309-204">2. Get a token</span></span>
<span data-ttu-id="b8309-205">Ahora que ha adquirido un código de autorización, puede compensar hello `code` para un toohello símbolo (token) que vayan recursos mediante el envío de un toohello de solicitud POST `/token` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b8309-205">Now that you've acquired an authorization code, you can redeem hello `code` for a token toohello intended resource by sending a POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="b8309-206">En Azure AD B2C, hello solo los recursos que puede solicitar un token para es la API de web de back-end de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8309-206">In Azure AD B2C, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="b8309-207">convención de Hola que se usa para solicitar un token tooyourself es toouse Id. de cliente de la aplicación como ámbito de hello:</span><span class="sxs-lookup"><span data-stu-id="b8309-207">hello convention that's used for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="b8309-208">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-208">Parameter</span></span> | <span data-ttu-id="b8309-209">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="b8309-209">Required?</span></span> | <span data-ttu-id="b8309-210">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b8309-211">p</span><span class="sxs-lookup"><span data-stu-id="b8309-211">p</span></span> |<span data-ttu-id="b8309-212">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-212">Required</span></span> |<span data-ttu-id="b8309-213">Hola directiva de autorización de hello tooacquire usado código.</span><span class="sxs-lookup"><span data-stu-id="b8309-213">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="b8309-214">No puede usar una directiva diferente en esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="b8309-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="b8309-215">Tenga en cuenta que agregar este parámetro toohello *cadena de consulta*, pero no en hello cuerpo POST.</span><span class="sxs-lookup"><span data-stu-id="b8309-215">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="b8309-216">client_id</span><span class="sxs-lookup"><span data-stu-id="b8309-216">client_id</span></span> |<span data-ttu-id="b8309-217">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-217">Required</span></span> |<span data-ttu-id="b8309-218">Identificador de la aplicación Hello asignado tooyour aplicación Hola [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b8309-218">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="b8309-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="b8309-219">grant_type</span></span> |<span data-ttu-id="b8309-220">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-220">Required</span></span> |<span data-ttu-id="b8309-221">tipo de Hola de concesión.</span><span class="sxs-lookup"><span data-stu-id="b8309-221">hello type of grant.</span></span> <span data-ttu-id="b8309-222">Para el flujo de código de autorización de hello, debe ser el tipo de concesión de hello `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="b8309-222">For hello authorization code flow, hello grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="b8309-223">ámbito</span><span class="sxs-lookup"><span data-stu-id="b8309-223">scope</span></span> |<span data-ttu-id="b8309-224">Recomendado</span><span class="sxs-lookup"><span data-stu-id="b8309-224">Recommended</span></span> |<span data-ttu-id="b8309-225">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="b8309-225">A space-separated list of scopes.</span></span> <span data-ttu-id="b8309-226">Un valor de ámbito único indica tooAzure AD tanto de los permisos de Hola que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="b8309-226">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="b8309-227">Mediante identificación como ámbito de hello indica que la aplicación necesita un token de acceso que se puede usar con su propio servicio o la API web, representada por el cliente de Hola Hola mismo identificador de cliente.</span><span class="sxs-lookup"><span data-stu-id="b8309-227">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="b8309-228">Hola `offline_access` ámbito indica que la aplicación necesita un token de actualización para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="b8309-228">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="b8309-229">También puede usar hello `openid` ámbito toorequest un identificador de token de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b8309-229">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="b8309-230">código</span><span class="sxs-lookup"><span data-stu-id="b8309-230">code</span></span> |<span data-ttu-id="b8309-231">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-231">Required</span></span> |<span data-ttu-id="b8309-232">código de autorización de Hola que adquirió en el primer segmento de hello del flujo de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-232">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="b8309-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b8309-233">redirect_uri</span></span> |<span data-ttu-id="b8309-234">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-234">Required</span></span> |<span data-ttu-id="b8309-235">Hola URI de redireccionamiento de aplicación hello que ha recibido código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-235">hello redirect URI of hello application where you received hello authorization code.</span></span> |

<span data-ttu-id="b8309-236">Una respuesta correcta del token tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="b8309-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="b8309-237">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-237">Parameter</span></span> | <span data-ttu-id="b8309-238">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-239">not_before</span><span class="sxs-lookup"><span data-stu-id="b8309-239">not_before</span></span> |<span data-ttu-id="b8309-240">tiempo de Hello en qué Hola token se considera válida, en tiempo base.</span><span class="sxs-lookup"><span data-stu-id="b8309-240">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="b8309-241">token_type</span><span class="sxs-lookup"><span data-stu-id="b8309-241">token_type</span></span> |<span data-ttu-id="b8309-242">valor de tipo de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-242">hello token type value.</span></span> <span data-ttu-id="b8309-243">Hola solo escriba que admite Azure AD es portador.</span><span class="sxs-lookup"><span data-stu-id="b8309-243">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="b8309-244">access_token</span><span class="sxs-lookup"><span data-stu-id="b8309-244">access_token</span></span> |<span data-ttu-id="b8309-245">Hola había firmado JSON Web Token (JWT) que solicitó.</span><span class="sxs-lookup"><span data-stu-id="b8309-245">hello signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="b8309-246">ámbito</span><span class="sxs-lookup"><span data-stu-id="b8309-246">scope</span></span> |<span data-ttu-id="b8309-247">ámbitos de Hola Hola token es válido para.</span><span class="sxs-lookup"><span data-stu-id="b8309-247">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="b8309-248">También puede utilizar tokens de toocache ámbitos para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="b8309-248">You also can use scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="b8309-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="b8309-249">expires_in</span></span> |<span data-ttu-id="b8309-250">duración de Hola de Hola token es válido (en segundos).</span><span class="sxs-lookup"><span data-stu-id="b8309-250">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="b8309-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b8309-251">refresh_token</span></span> |<span data-ttu-id="b8309-252">Un token de actualización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b8309-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="b8309-253">aplicación Hello puede usar este token tooacquire los tokens adicionales después de que expire el token actual Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-253">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="b8309-254">Los tokens de actualización tienen una duración larga.</span><span class="sxs-lookup"><span data-stu-id="b8309-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="b8309-255">Puede usarlos tooretain acceso tooresources durante largos períodos de tiempo.</span><span class="sxs-lookup"><span data-stu-id="b8309-255">You can use them tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="b8309-256">Para obtener más información, vea hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b8309-256">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="b8309-257">Las respuestas de error tienen un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8309-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="b8309-258">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-258">Parameter</span></span> | <span data-ttu-id="b8309-259">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-260">error</span><span class="sxs-lookup"><span data-stu-id="b8309-260">error</span></span> |<span data-ttu-id="b8309-261">Una cadena de código de error que se pueden usar tipos de hello tooclassify de errores que se producen.</span><span class="sxs-lookup"><span data-stu-id="b8309-261">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="b8309-262">También puede usar Hola cadena tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="b8309-262">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="b8309-263">error_description</span><span class="sxs-lookup"><span data-stu-id="b8309-263">error_description</span></span> |<span data-ttu-id="b8309-264">Un mensaje de error específico que puede ayudarle a identificar la causa de raíz de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8309-264">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="3-use-hello-token"></a><span data-ttu-id="b8309-265">3. Usar el token de Hola</span><span class="sxs-lookup"><span data-stu-id="b8309-265">3. Use hello token</span></span>
<span data-ttu-id="b8309-266">Ahora que ha adquirido correctamente un token de acceso, puede usar símbolo (token) de hello en las API de web de back-end de tooyour solicitudes mediante la inclusión en hello `Authorization` encabezado:</span><span class="sxs-lookup"><span data-stu-id="b8309-266">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-hello-token"></a><span data-ttu-id="b8309-267">4. Hola token de actualización</span><span class="sxs-lookup"><span data-stu-id="b8309-267">4. Refresh hello token</span></span>
<span data-ttu-id="b8309-268">Los tokens de acceso y los tokens de identificación tienen una corta duración.</span><span class="sxs-lookup"><span data-stu-id="b8309-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="b8309-269">Después de que expiren, debe actualizarlos toocontinue tooaccess recursos.</span><span class="sxs-lookup"><span data-stu-id="b8309-269">After they expire, you must refresh them toocontinue tooaccess resources.</span></span> <span data-ttu-id="b8309-270">toodo, enviar otra toohello de solicitud POST `/token` punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b8309-270">toodo this, submit another POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="b8309-271">Este tiempo, proporcionar hello `refresh_token` en lugar de Hola `code`:</span><span class="sxs-lookup"><span data-stu-id="b8309-271">This time, provide hello `refresh_token` instead of hello `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="b8309-272">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-272">Parameter</span></span> | <span data-ttu-id="b8309-273">¿Necesario?</span><span class="sxs-lookup"><span data-stu-id="b8309-273">Required?</span></span> | <span data-ttu-id="b8309-274">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b8309-275">p</span><span class="sxs-lookup"><span data-stu-id="b8309-275">p</span></span> |<span data-ttu-id="b8309-276">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-276">Required</span></span> |<span data-ttu-id="b8309-277">Directiva de Hola que estaba token tooacquire usado Hola de actualización original.</span><span class="sxs-lookup"><span data-stu-id="b8309-277">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="b8309-278">No puede usar una directiva diferente en esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="b8309-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="b8309-279">Tenga en cuenta que agregar este parámetro toohello *cadena de consulta*, pero no en hello cuerpo POST.</span><span class="sxs-lookup"><span data-stu-id="b8309-279">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="b8309-280">client_id</span><span class="sxs-lookup"><span data-stu-id="b8309-280">client_id</span></span> |<span data-ttu-id="b8309-281">Recomendado</span><span class="sxs-lookup"><span data-stu-id="b8309-281">Recommended</span></span> |<span data-ttu-id="b8309-282">Identificador de la aplicación Hello asignado tooyour aplicación Hola [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b8309-282">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="b8309-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="b8309-283">grant_type</span></span> |<span data-ttu-id="b8309-284">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-284">Required</span></span> |<span data-ttu-id="b8309-285">tipo de Hola de concesión.</span><span class="sxs-lookup"><span data-stu-id="b8309-285">hello type of grant.</span></span> <span data-ttu-id="b8309-286">Para este segmento del flujo de código de autorización de hello, debe ser el tipo de concesión de hello `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="b8309-286">For this leg of hello authorization code flow, hello grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="b8309-287">ámbito</span><span class="sxs-lookup"><span data-stu-id="b8309-287">scope</span></span> |<span data-ttu-id="b8309-288">Recomendado</span><span class="sxs-lookup"><span data-stu-id="b8309-288">Recommended</span></span> |<span data-ttu-id="b8309-289">Una lista de ámbitos separada por espacios.</span><span class="sxs-lookup"><span data-stu-id="b8309-289">A space-separated list of scopes.</span></span> <span data-ttu-id="b8309-290">Un valor de ámbito único indica tooAzure AD tanto de los permisos de Hola que se ha solicitado.</span><span class="sxs-lookup"><span data-stu-id="b8309-290">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="b8309-291">Mediante identificación como ámbito de hello indica que la aplicación necesita un token de acceso que se puede usar con su propio servicio o la API web, representada por el cliente de Hola Hola mismo identificador de cliente.</span><span class="sxs-lookup"><span data-stu-id="b8309-291">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="b8309-292">Hola `offline_access` ámbito indica que la aplicación necesitará un token de actualización para tooresources de acceso de larga duración.</span><span class="sxs-lookup"><span data-stu-id="b8309-292">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="b8309-293">También puede usar hello `openid` ámbito toorequest un identificador de token de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b8309-293">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="b8309-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b8309-294">redirect_uri</span></span> |<span data-ttu-id="b8309-295">Opcional</span><span class="sxs-lookup"><span data-stu-id="b8309-295">Optional</span></span> |<span data-ttu-id="b8309-296">Hola URI de redireccionamiento de aplicación hello que ha recibido código de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-296">hello redirect URI of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="b8309-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b8309-297">refresh_token</span></span> |<span data-ttu-id="b8309-298">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="b8309-298">Required</span></span> |<span data-ttu-id="b8309-299">Hola original token de actualización que adquirió en la bifurcación de la segunda Hola de flujo de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-299">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> |

<span data-ttu-id="b8309-300">Una respuesta correcta del token tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="b8309-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="b8309-301">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-301">Parameter</span></span> | <span data-ttu-id="b8309-302">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-303">not_before</span><span class="sxs-lookup"><span data-stu-id="b8309-303">not_before</span></span> |<span data-ttu-id="b8309-304">tiempo de Hello en qué Hola token se considera válida, en tiempo base.</span><span class="sxs-lookup"><span data-stu-id="b8309-304">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="b8309-305">token_type</span><span class="sxs-lookup"><span data-stu-id="b8309-305">token_type</span></span> |<span data-ttu-id="b8309-306">valor de tipo de token de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-306">hello token type value.</span></span> <span data-ttu-id="b8309-307">Hola solo escriba que admite Azure AD es portador.</span><span class="sxs-lookup"><span data-stu-id="b8309-307">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="b8309-308">access_token</span><span class="sxs-lookup"><span data-stu-id="b8309-308">access_token</span></span> |<span data-ttu-id="b8309-309">Hola había firmado JWT que solicitó.</span><span class="sxs-lookup"><span data-stu-id="b8309-309">hello signed JWT that you requested.</span></span> |
| <span data-ttu-id="b8309-310">ámbito</span><span class="sxs-lookup"><span data-stu-id="b8309-310">scope</span></span> |<span data-ttu-id="b8309-311">ámbitos de Hola Hola token es válido para.</span><span class="sxs-lookup"><span data-stu-id="b8309-311">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="b8309-312">También puede utilizar tokens de hello ámbitos toocache para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="b8309-312">You also can use hello scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="b8309-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="b8309-313">expires_in</span></span> |<span data-ttu-id="b8309-314">duración de Hola de Hola token es válido (en segundos).</span><span class="sxs-lookup"><span data-stu-id="b8309-314">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="b8309-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b8309-315">refresh_token</span></span> |<span data-ttu-id="b8309-316">Un token de actualización de OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b8309-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="b8309-317">aplicación Hello puede usar este token tooacquire los tokens adicionales después de que expire el token actual Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-317">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="b8309-318">Actualizar tokens son de larga duración y puede ser usado tooretain acceso tooresources durante largos períodos de tiempo.</span><span class="sxs-lookup"><span data-stu-id="b8309-318">Refresh tokens are long-lived, and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="b8309-319">Para obtener más información, vea hello [referencia del token de Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b8309-319">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="b8309-320">Las respuestas de error tienen un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="b8309-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="b8309-321">Parámetro</span><span class="sxs-lookup"><span data-stu-id="b8309-321">Parameter</span></span> | <span data-ttu-id="b8309-322">Description</span><span class="sxs-lookup"><span data-stu-id="b8309-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8309-323">error</span><span class="sxs-lookup"><span data-stu-id="b8309-323">error</span></span> |<span data-ttu-id="b8309-324">Una cadena de código de error que se pueden usar tipos de tooclassify de errores que se producen.</span><span class="sxs-lookup"><span data-stu-id="b8309-324">An error code string that you can use tooclassify types of errors that occur.</span></span> <span data-ttu-id="b8309-325">También puede usar Hola cadena tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="b8309-325">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="b8309-326">error_description</span><span class="sxs-lookup"><span data-stu-id="b8309-326">error_description</span></span> |<span data-ttu-id="b8309-327">Un mensaje de error específico que puede ayudarle a identificar la causa de raíz de Hola de un error de autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8309-327">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="b8309-328">Usar su propio directorio de Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="b8309-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="b8309-329">tootry estas solicitudes usted mismo, Hola completa siguiendo los pasos.</span><span class="sxs-lookup"><span data-stu-id="b8309-329">tootry these requests yourself, complete hello following steps.</span></span> <span data-ttu-id="b8309-330">Reemplace los valores de ejemplo de Hola que se usan en este artículo con sus propios valores.</span><span class="sxs-lookup"><span data-stu-id="b8309-330">Replace hello example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="b8309-331">[Cree un directorio de Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="b8309-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="b8309-332">Usar el nombre de Hola de su directorio en las solicitudes de Hola.</span><span class="sxs-lookup"><span data-stu-id="b8309-332">Use hello name of your directory in hello requests.</span></span>
2. <span data-ttu-id="b8309-333">[Crear una aplicación](active-directory-b2c-app-registration.md) tooobtain un identificador de aplicación y un URI de redirección.</span><span class="sxs-lookup"><span data-stu-id="b8309-333">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID and a redirect URI.</span></span> <span data-ttu-id="b8309-334">Incluya un cliente nativo en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8309-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="b8309-335">[Crear las directivas de](active-directory-b2c-reference-policies.md) tooobtain los nombres de directiva.</span><span class="sxs-lookup"><span data-stu-id="b8309-335">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>


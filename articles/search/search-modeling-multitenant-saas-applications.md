---
title: Modelado multiinquilino en Azure Search | Microsoft Docs
description: "Aprenda sobre patrones de diseño comunes para aplicaciones SaaS multiinquilino mientras usa Azure Search."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: fd1b0c7cc8210d27fdc500bf4e5641bedfe93cff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="9e53e-103">Modelos de diseño para aplicaciones SaaS multiinquilino y Azure Search</span><span class="sxs-lookup"><span data-stu-id="9e53e-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="9e53e-104">Una aplicación multiinquilino es una que proporciona los mismos servicios y funcionalidades a cualquier número de inquilinos que no pueden ver o compartir los datos de cualquier otro inquilino.</span><span class="sxs-lookup"><span data-stu-id="9e53e-104">A multitenant application is one that provides the same services and capabilities to any number of tenants who cannot see or share the data of any other tenant.</span></span> <span data-ttu-id="9e53e-105">En este documento se describen estrategias de aislamiento de inquilinos para aplicaciones miltiinquilino creadas con Azure Search.</span><span class="sxs-lookup"><span data-stu-id="9e53e-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="9e53e-106">Conceptos de Azure Search</span><span class="sxs-lookup"><span data-stu-id="9e53e-106">Azure Search concepts</span></span>
<span data-ttu-id="9e53e-107">En cuanto una solución de búsqueda como servicio, Azure Search permite a los desarrolladores agregar completas experiencias de búsqueda a las aplicaciones sin necesidad de administrar ninguna infraestructura o de convertirse en un experto en búsquedas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-107">As a search-as-a-service solution, Azure Search allows developers to add rich search experiences to applications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="9e53e-108">Los datos se cargan en el servicio y luego se almacenan en la nube.</span><span class="sxs-lookup"><span data-stu-id="9e53e-108">Data is uploaded to the service and then stored in the cloud.</span></span> <span data-ttu-id="9e53e-109">Mediante sencillas solicitudes a la API de Azure Search, los datos se pueden modificar y buscar.</span><span class="sxs-lookup"><span data-stu-id="9e53e-109">Using simple requests to the Azure Search API, the data can then be modified and searched.</span></span> <span data-ttu-id="9e53e-110">Se puede encontrar información general del servicio en [este artículo](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="9e53e-110">An overview of the service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="9e53e-111">Antes de analizar los patrones de diseño, es importante comprender algunos conceptos de Azure Search.</span><span class="sxs-lookup"><span data-stu-id="9e53e-111">Before discussing design patterns, it is important to understand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="9e53e-112">Servicios de búsqueda, índices, campos y documentos</span><span class="sxs-lookup"><span data-stu-id="9e53e-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="9e53e-113">Al usar Azure Search, uno se suscribe a un *servicio de búsqueda*.</span><span class="sxs-lookup"><span data-stu-id="9e53e-113">When using Azure Search, one subscribes to a *search service*.</span></span> <span data-ttu-id="9e53e-114">A medida que se cargan datos en Azure Search, se almacenan en un *índice* dentro del servicio de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e53e-114">As data is uploaded to Azure Search, it is stored in an *index* within the search service.</span></span> <span data-ttu-id="9e53e-115">Puede haber varios índices dentro de un único servicio.</span><span class="sxs-lookup"><span data-stu-id="9e53e-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="9e53e-116">Para usar los conceptos de bases de datos que ya conocemos, el servicio de búsqueda se puede vincular a una base de datos, mientras que los índices de un servicio se pueden vincular a tablas dentro de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-116">To use the familiar concepts of databases, the search service can be likened to a database while the indexes within a service can be likened to tables within a database.</span></span>

<span data-ttu-id="9e53e-117">Cada índice dentro de un servicio de búsqueda tiene su propio esquema, que viene definido por in número de *campos*personalizables.</span><span class="sxs-lookup"><span data-stu-id="9e53e-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="9e53e-118">Los datos se agregan a un índice de Azure Search en forma de *documentos*individuales.</span><span class="sxs-lookup"><span data-stu-id="9e53e-118">Data is added to an Azure Search index in the form of individual *documents*.</span></span> <span data-ttu-id="9e53e-119">Cada documento se debe cargar en un índice determinado y debe encajar en el esquema de ese índice.</span><span class="sxs-lookup"><span data-stu-id="9e53e-119">Each document must be uploaded to a particular index and must fit that index's schema.</span></span> <span data-ttu-id="9e53e-120">Al buscar datos mediante Azure Search, las consultas de búsqueda de texto completo se emiten contra un índice determinado.</span><span class="sxs-lookup"><span data-stu-id="9e53e-120">When searching data using Azure Search, the full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="9e53e-121">Para comparar estos conceptos con los de una base de datos, se pueden vincular campos a columnas de una tabla y se pueden vincular documentos a filas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-121">To compare these concepts to those of a database, fields can be likened to columns in a table and documents can be likened to rows.</span></span>

### <a name="scalability"></a><span data-ttu-id="9e53e-122">Escalabilidad</span><span class="sxs-lookup"><span data-stu-id="9e53e-122">Scalability</span></span>
<span data-ttu-id="9e53e-123">Cualquier servicio de Azure Search con el [plan de tarifa](https://azure.microsoft.com/pricing/details/search/) Estándar se puede escalar en dos dimensiones: almacenamiento y disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="9e53e-123">Any Azure Search service in the Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="9e53e-124">*particiones* para aumentar el almacenamiento de un servicio de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e53e-124">*Partitions* can be added to increase the storage of a search service.</span></span>
* <span data-ttu-id="9e53e-125">*réplicas* a un servicio para aumentar el rendimiento de las solicitudes que puede administrar un servicio de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e53e-125">*Replicas* can be added to a service to increase the throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="9e53e-126">Agregar y quitar particiones y réplicas permitirá que crezca la capacidad del servicio de búsqueda con la cantidad de datos y el tráfico que demanda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e53e-126">Adding and removing partitions and replicas at will allow the capacity of the search service to grow with the amount of data and traffic the application demands.</span></span> <span data-ttu-id="9e53e-127">Para que un servicio de búsqueda consiga un [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)de lectura, se requieren dos réplicas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-127">In order for a search service to achieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="9e53e-128">Para que un servicio de búsqueda consiga un [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)de lectura y escritura, se requieren tres réplicas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-128">In order for a service to achieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="9e53e-129">Límites de servicio e índice en Azure Search</span><span class="sxs-lookup"><span data-stu-id="9e53e-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="9e53e-130">Hay algunos [planes de tarifas](https://azure.microsoft.com/pricing/details/search/) en Azure Search, y cada uno de ellos tiene diferentes [límites y cuotas](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="9e53e-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of the tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="9e53e-131">Algunos de estos límites están en el nivel de servicio, otros en el nivel de índice y otros en el nivel de partición.</span><span class="sxs-lookup"><span data-stu-id="9e53e-131">Some of these limits are at the service-level, some are at the index-level, and some are at the partition-level.</span></span>

|  | <span data-ttu-id="9e53e-132">Básica</span><span class="sxs-lookup"><span data-stu-id="9e53e-132">Basic</span></span> | <span data-ttu-id="9e53e-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="9e53e-133">Standard1</span></span> | <span data-ttu-id="9e53e-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="9e53e-134">Standard2</span></span> | <span data-ttu-id="9e53e-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="9e53e-135">Standard3</span></span> | <span data-ttu-id="9e53e-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="9e53e-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="9e53e-137">Número máximo de réplicas por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="9e53e-138">3</span><span class="sxs-lookup"><span data-stu-id="9e53e-138">3</span></span> |<span data-ttu-id="9e53e-139">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-139">12</span></span> |<span data-ttu-id="9e53e-140">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-140">12</span></span> |<span data-ttu-id="9e53e-141">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-141">12</span></span> |<span data-ttu-id="9e53e-142">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-142">12</span></span> |
| <span data-ttu-id="9e53e-143">Número máximo de particiones por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="9e53e-144">1</span><span class="sxs-lookup"><span data-stu-id="9e53e-144">1</span></span> |<span data-ttu-id="9e53e-145">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-145">12</span></span> |<span data-ttu-id="9e53e-146">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-146">12</span></span> |<span data-ttu-id="9e53e-147">12</span><span class="sxs-lookup"><span data-stu-id="9e53e-147">12</span></span> |<span data-ttu-id="9e53e-148">1</span><span class="sxs-lookup"><span data-stu-id="9e53e-148">1</span></span> |
| <span data-ttu-id="9e53e-149">Número máximo de unidades de búsqueda (réplicas * particiones) por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="9e53e-150">3</span><span class="sxs-lookup"><span data-stu-id="9e53e-150">3</span></span> |<span data-ttu-id="9e53e-151">36</span><span class="sxs-lookup"><span data-stu-id="9e53e-151">36</span></span> |<span data-ttu-id="9e53e-152">36</span><span class="sxs-lookup"><span data-stu-id="9e53e-152">36</span></span> |<span data-ttu-id="9e53e-153">36</span><span class="sxs-lookup"><span data-stu-id="9e53e-153">36</span></span> |<span data-ttu-id="9e53e-154">36 (3 particiones como máximo)</span><span class="sxs-lookup"><span data-stu-id="9e53e-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="9e53e-155">Número máximo de documentos por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-155">Maximum Documents per Service</span></span> |<span data-ttu-id="9e53e-156">1 millón</span><span class="sxs-lookup"><span data-stu-id="9e53e-156">1 million</span></span> |<span data-ttu-id="9e53e-157">180 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-157">180 million</span></span> |<span data-ttu-id="9e53e-158">720 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-158">720 million</span></span> |<span data-ttu-id="9e53e-159">1,4 mil millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-159">1.4 billion</span></span> |<span data-ttu-id="9e53e-160">600 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-160">600 million</span></span> |
| <span data-ttu-id="9e53e-161">Almacenamiento máximo por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-161">Maximum Storage per Service</span></span> |<span data-ttu-id="9e53e-162">2 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-162">2 GB</span></span> |<span data-ttu-id="9e53e-163">< 300 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-163">300 GB</span></span> |<span data-ttu-id="9e53e-164">1,2 TB</span><span class="sxs-lookup"><span data-stu-id="9e53e-164">1.2 TB</span></span> |<span data-ttu-id="9e53e-165">2,4 TB</span><span class="sxs-lookup"><span data-stu-id="9e53e-165">2.4 TB</span></span> |<span data-ttu-id="9e53e-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-166">600 GB</span></span> |
| <span data-ttu-id="9e53e-167">Número máximo de documentos por partición</span><span class="sxs-lookup"><span data-stu-id="9e53e-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="9e53e-168">1 millón</span><span class="sxs-lookup"><span data-stu-id="9e53e-168">1 million</span></span> |<span data-ttu-id="9e53e-169">15 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-169">15 million</span></span> |<span data-ttu-id="9e53e-170">60 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-170">60 million</span></span> |<span data-ttu-id="9e53e-171">120 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-171">120 million</span></span> |<span data-ttu-id="9e53e-172">200 millones</span><span class="sxs-lookup"><span data-stu-id="9e53e-172">200 million</span></span> |
| <span data-ttu-id="9e53e-173">Almacenamiento máximo por partición</span><span class="sxs-lookup"><span data-stu-id="9e53e-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="9e53e-174">2 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-174">2 GB</span></span> |<span data-ttu-id="9e53e-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-175">25 GB</span></span> |<span data-ttu-id="9e53e-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-176">100 GB</span></span> |<span data-ttu-id="9e53e-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-177">200 GB</span></span> |<span data-ttu-id="9e53e-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="9e53e-178">200 GB</span></span> |
| <span data-ttu-id="9e53e-179">Número máximo de índices por servicio</span><span class="sxs-lookup"><span data-stu-id="9e53e-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="9e53e-180">5</span><span class="sxs-lookup"><span data-stu-id="9e53e-180">5</span></span> |<span data-ttu-id="9e53e-181">50</span><span class="sxs-lookup"><span data-stu-id="9e53e-181">50</span></span> |<span data-ttu-id="9e53e-182">200</span><span class="sxs-lookup"><span data-stu-id="9e53e-182">200</span></span> |<span data-ttu-id="9e53e-183">200</span><span class="sxs-lookup"><span data-stu-id="9e53e-183">200</span></span> |<span data-ttu-id="9e53e-184">3000 (1000 índices/partición como máximo)</span><span class="sxs-lookup"><span data-stu-id="9e53e-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="9e53e-185">S3 alta densidad'</span><span class="sxs-lookup"><span data-stu-id="9e53e-185">S3 High Density'</span></span>
<span data-ttu-id="9e53e-186">En el plan de tarifa S3 de Azure Search, hay una opción para el modo de alta densidad (HD) diseñada específicamente para los escenarios de varios inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-186">In Azure Search’s S3 pricing tier, there is an option for the High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="9e53e-187">En muchos casos, es necesario admitir un gran número de inquilinos más pequeños en un único servicio para lograr las ventajas de la simplicidad y la rentabilidad.</span><span class="sxs-lookup"><span data-stu-id="9e53e-187">In many cases, it is necessary to support a large number of smaller tenants under a single service to achieve the benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="9e53e-188">S3 HD permite que los muchos índices pequeños se empaqueten bajo la administración de un solo servicio de búsqueda único mediante el intercambio de la capacidad de escalar horizontalmente índices usando particiones para la capacidad de hospedar más índices en un único servicio.</span><span class="sxs-lookup"><span data-stu-id="9e53e-188">S3 HD allows for the many small indexes to be packed under the management of a single search service by trading the ability to scale out indexes using partitions for the ability to host more indexes in a single service.</span></span>

<span data-ttu-id="9e53e-189">En concreto, un servicio S3 podría tener entre 1 y 200 índices que juntos podrían hospedar hasta 1400 millones de documentos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up to 1.4 billion documents.</span></span> <span data-ttu-id="9e53e-190">Por el contrario, HD S3 permitiría que los índices individuales llegasen solo hasta 1 millón de documentos, pero puede controlar hasta 1000 índices por partición (hasta 3000 por servicio) con un número total de documentos de 200 millones por partición (hasta 600 millones por servicio).</span><span class="sxs-lookup"><span data-stu-id="9e53e-190">An S3 HD on the other hand would allow individual indexes to only go up to 1 million documents, but it can handle up to 1000 indexes per partition (up to 3000 per service) with a total document count of 200 million per partition (up to 600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="9e53e-191">Consideraciones sobre las aplicaciones multiinquilino</span><span class="sxs-lookup"><span data-stu-id="9e53e-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="9e53e-192">Las aplicaciones multiinquilino deben distribuir de forma eficaz los recursos entre los inquilinos y conservar al mismo tiempo cierto nivel de privacidad entre los distintos inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-192">Multitenant applications must effectively distribute resources among the tenants while preserving some level of privacy between the various tenants.</span></span> <span data-ttu-id="9e53e-193">Existen algunas consideraciones que se deben tener en cuenta al diseñar la arquitectura para aplicaciones de este tipo:</span><span class="sxs-lookup"><span data-stu-id="9e53e-193">There are a few considerations when designing the architecture for such an application:</span></span>

* <span data-ttu-id="9e53e-194">*Aislamiento de inquilinos:* los desarrolladores de aplicaciones necesitan tomar las medidas adecuadas para garantizar que ningún inquilino tenga acceso no autorizado o no deseado a los datos de otros inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-194">*Tenant isolation:* Application developers need to take appropriate measures to ensure that no tenants have unauthorized or unwanted access to the data of other tenants.</span></span> <span data-ttu-id="9e53e-195">Más allá de la perspectiva de privacidad de los datos, las estrategias de aislamiento de inquilinos requieren la administración eficaz de los recursos compartidos y la protección frente a vecinos ruidosos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-195">Beyond the perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="9e53e-196">*Costo de los recursos de nube:* al igual que sucede con cualquier otra aplicación, las soluciones de software deben tener un costo competitivo en cuanto componente de una aplicación multiinquilino.</span><span class="sxs-lookup"><span data-stu-id="9e53e-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="9e53e-197">*Facilidad de operaciones:* al desarrollar una arquitectura multiinquilino, es importante tener en cuenta el impacto en las operaciones y la complejidad de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e53e-197">*Ease of Operations:* When developing a multitenant architecture, the impact on the application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="9e53e-198">Azure Search tiene un [Acuerdo de Nivel de Servicio del 99,9 %](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="9e53e-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="9e53e-199">*Superficie global:* las aplicaciones multiinquilino pueden tener que atender de forma eficaz a inquilinos que se encuentran distribuidos por todo el planeta.</span><span class="sxs-lookup"><span data-stu-id="9e53e-199">*Global footprint:* Multitenant applications may need to effectively serve tenants which are distributed across the globe.</span></span>
* <span data-ttu-id="9e53e-200">*Escalabilidad:* los desarrolladores de aplicaciones deben tener en cuenta el equilibrio entre mantener un nivel de complejidad de la aplicación lo suficientemente bajo y diseñar la aplicación para escalarse con el número de inquilinos y el tamaño de los datos y la carga de trabajo de los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-200">*Scalability:* Application developers need to consider how they reconcile between maintaining a sufficiently low level of application complexity and designing the application to scale with number of tenants and the size of tenants' data and workload.</span></span>

<span data-ttu-id="9e53e-201">Azure Search ofrece algunos límites que se pueden usar para aislar los datos y la carga de trabajo de los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-201">Azure Search offers a few boundaries that can be used to isolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="9e53e-202">Modelado multiinquilino con Azure Search</span><span class="sxs-lookup"><span data-stu-id="9e53e-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="9e53e-203">En el caso de un escenario de varios inquilinos, el desarrollador de la aplicación consume uno o varios servicios de búsqueda y divide sus inquilinos entre servicios, índices o ambos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-203">In the case of a multitenant scenario, the application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="9e53e-204">Azure Search presenta algunos patrones comunes al modelar un escenario multiinquilino:</span><span class="sxs-lookup"><span data-stu-id="9e53e-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="9e53e-205">*Índice por inquilino:* cada inquilino tiene su propio índice dentro de un servicio de búsqueda que comparte con otros inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="9e53e-206">*Servicio por inquilino:* cada inquilino tiene su propio servicio de Azure Search dedicado, que ofrece el nivel más alto de separación de datos y carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="9e53e-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="9e53e-207">*Mezcla de ambos:* los inquilinos más grandes y activos se asignan a servicios dedicados, mientras que los inquilinos más pequeños se asignan a índices individuales dentro de servicios compartidos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="9e53e-208">1. Índice por inquilino</span><span class="sxs-lookup"><span data-stu-id="9e53e-208">1. Index per tenant</span></span>
![Una representación del modelo de índice por inquilino](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="9e53e-210">En un modelo de índice por inquilino, varios inquilinos ocupan un único servicio de Azure Search donde cada inquilino tiene su propio índice.</span><span class="sxs-lookup"><span data-stu-id="9e53e-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="9e53e-211">Los inquilinos consiguen el aislamiento de los datos porque todas las solicitudes de búsqueda y las operaciones de documentos se emiten en un nivel de índice en Azure Search.</span><span class="sxs-lookup"><span data-stu-id="9e53e-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="9e53e-212">En el nivel de aplicación, existe el conocimiento necesario para dirigir el tráfico de los diversos inquilinos a los índices adecuados, al tiempo también que se administran los recursos en el nivel de servicio entre todos los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-212">In the application layer, there is the need awareness to direct the various tenants’ traffic to the proper indexes while also managing resources at the service level across all tenants.</span></span>

<span data-ttu-id="9e53e-213">Un atributo clave del modelo de índice por inquilino es la posibilidad para el desarrollador de la aplicación de saturar la capacidad del número de suscripciones de un servicio de búsqueda entre los inquilinos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e53e-213">A key attribute of the index-per-tenant model is the ability for the application developer to oversubscribe the capacity of a search service among the application’s tenants.</span></span> <span data-ttu-id="9e53e-214">Si los inquilinos tienen una distribución desigual de la carga de trabajo, la combinación óptima de inquilinos se puede distribuir entre los índices de un servicio de búsqueda para dar cabida a un número de inquilinos muy activos, que consumen muchos recursos mientras se atiende simultáneamente una minoría de inquilinos menos activos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-214">If the tenants have an uneven distribution of workload, the optimal combination of tenants can be distributed across a search service’s indexes to accommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="9e53e-215">El inconveniente es la imposibilidad de que el modelo controle situaciones en las que cada inquilino está muy activo al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="9e53e-215">The trade-off is the inability of the model to handle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="9e53e-216">El modelo de índice por inquilino proporciona la base para un modelo de costo variable, donde un servicio entero de Azure Search se compra por adelantado y posteriormente se rellena de inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-216">The index-per-tenant model provides the basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="9e53e-217">Esto permite designar la capacidad sin usar para pruebas y cuentas gratuitas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-217">This allows for unused capacity to be designated for trials and free accounts.</span></span>

<span data-ttu-id="9e53e-218">Es posible que para las aplicaciones con una superficie global, el modelo de índice por inquilino no sea el más adecuado.</span><span class="sxs-lookup"><span data-stu-id="9e53e-218">For applications with a global footprint, the index-per-tenant model may not be the most efficient.</span></span> <span data-ttu-id="9e53e-219">Si los inquilinos de una aplicación se distribuyen por todo el planeta, puede que sea necesario un servicio aparte para cada región, lo que podría duplicar los costos en cada una de ellas.</span><span class="sxs-lookup"><span data-stu-id="9e53e-219">If an application's tenants are distributed across the globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="9e53e-220">Azure Search permite escalar tanto los índices individuales como aumentar el número total de índices.</span><span class="sxs-lookup"><span data-stu-id="9e53e-220">Azure Search allows for the scale of both the individual indexes and the total number of indexes to grow.</span></span> <span data-ttu-id="9e53e-221">Si se elige un plan de tarifa adecuado, se pueden agregar particiones y réplicas al servicio de búsqueda entero cuando un índice individual del servicio crezca demasiado en términos de almacenamiento o tráfico.</span><span class="sxs-lookup"><span data-stu-id="9e53e-221">If an appropriate pricing tier is chosen, partitions and replicas can be added to the entire search service when an individual index within the service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="9e53e-222">Si el número total de índices crece demasiado para un único servicio, se debe aprovisionar otro servicio para acomodar a los nuevos inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-222">If the total number of indexes grows too large for a single service, another service has to be provisioned to accommodate the new tenants.</span></span> <span data-ttu-id="9e53e-223">Si se tienen que mover índices entre servicios de búsqueda a medida que se agregan nuevos servicios, los datos del índice se tienen que copiar manualmente de un índice a otro porque Azure Search no permite que se mueva un índice.</span><span class="sxs-lookup"><span data-stu-id="9e53e-223">If indexes have to be moved between search services as new services are added, the data from the index has to be manually copied from one index to the other as Azure Search does not allow for an index to be moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="9e53e-224">2. Servicio por inquilino</span><span class="sxs-lookup"><span data-stu-id="9e53e-224">2. Service per tenant</span></span>
![Una representación del modelo de servicio por inquilino](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="9e53e-226">En una arquitectura de servicio por inquilino, cada inquilino tiene su propio servicio de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e53e-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="9e53e-227">En este modelo, la aplicación obtiene el nivel máximo de aislamiento para sus inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-227">In this model, the application achieves the maximum level of isolation for its tenants.</span></span> <span data-ttu-id="9e53e-228">Cada servicio tiene almacenamiento y capacidad de proceso dedicados para administrar las solicitudes de búsqueda, así como claves de API independientes.</span><span class="sxs-lookup"><span data-stu-id="9e53e-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="9e53e-229">En aplicaciones donde cada inquilino tiene una superficie grande o la carga de trabajo tiene poca variabilidad de un inquilino a otro, el modelo de servicio por inquilino es una opción eficaz porque no se comparten recursos entre las cargas de trabajo de los diversos inquilinos.</span><span class="sxs-lookup"><span data-stu-id="9e53e-229">For applications where each tenant has a large footprint or the workload has little variability from tenant to tenant, the service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="9e53e-230">Un modelo de servicio por inquilino también ofrece la ventaja de un modelo predecible de costo fijo.</span><span class="sxs-lookup"><span data-stu-id="9e53e-230">A service per tenant model also offers the benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="9e53e-231">No hay ninguna inversión anticipada en un servicio de búsqueda entero hasta que haya un inquilino para llenarlo; sin embargo, el costo por inquilino es más alto que el de un modelo de índice por inquilino.</span><span class="sxs-lookup"><span data-stu-id="9e53e-231">There is no up-front investment in an entire search service until there is a tenant to fill it, however the cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="9e53e-232">El modelo de servicio por inquilino es una opción eficaz para aplicaciones con una superficie global.</span><span class="sxs-lookup"><span data-stu-id="9e53e-232">The service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="9e53e-233">Cuando los inquilinos están distribuidos geográficamente, es fácil tener el servicio de cada inquilino en la región adecuada.</span><span class="sxs-lookup"><span data-stu-id="9e53e-233">With geographically-distributed tenants, it is easy to have each tenant's service in the appropriate region.</span></span>

<span data-ttu-id="9e53e-234">Las dificultades para escalar este patrón surgen cuando inquilinos individuales crecen por encima de la capacidad de su servicio.</span><span class="sxs-lookup"><span data-stu-id="9e53e-234">The challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="9e53e-235">Azure Search no admite actualmente la actualización del plan de tarifa de un servicio de búsqueda, así que todos los datos se tendrían que copiar manualmente en un nuevo servicio.</span><span class="sxs-lookup"><span data-stu-id="9e53e-235">Azure Search does not currently support upgrading the pricing tier of a search service, so all data would have to be manually copied to a new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="9e53e-236">3. Mezcla de ambos modelos</span><span class="sxs-lookup"><span data-stu-id="9e53e-236">3. Mixing both models</span></span>
<span data-ttu-id="9e53e-237">Otro patrón para modelar la arquitectura multiinquilino es mezclar las estrategias de índice por inquilino y servicio por inquilino.</span><span class="sxs-lookup"><span data-stu-id="9e53e-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="9e53e-238">Al mezclar ambos patrones, los inquilinos más grandes de la aplicación pueden ocupar servicios dedicados, mientras que la cola más larga de inquilinos más pequeños y menos activos pueden ocupar índices de un servicio compartido.</span><span class="sxs-lookup"><span data-stu-id="9e53e-238">By mixing the two patterns, an application's largest tenants can occupy dedicated services while the long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="9e53e-239">Este modelo garantiza que los inquilinos más grandes tienen sistemáticamente un mayor rendimiento desde el servicio, al mismo tiempo que ayuda a proteger los inquilinos más pequeños frente a cualquier vecino ruidoso.</span><span class="sxs-lookup"><span data-stu-id="9e53e-239">This model ensures that the largest tenants have consistently high performance from the service while helping to protect the smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="9e53e-240">Sin embargo, la implementación de esta estrategia depende de la previsión de qué inquilinos necesitarán un servicio dedicado, por oposición a un índice en un servicio compartido.</span><span class="sxs-lookup"><span data-stu-id="9e53e-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="9e53e-241">La complejidad de la aplicación aumenta con la necesidad de administrar ambos modelos multiinquilino.</span><span class="sxs-lookup"><span data-stu-id="9e53e-241">Application complexity increases with the need to manage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="9e53e-242">Obtención incluso de una granularidad más fina</span><span class="sxs-lookup"><span data-stu-id="9e53e-242">Achieving even finer granularity</span></span>
<span data-ttu-id="9e53e-243">En los patrones de diseño anteriores para modelar escenarios muliinquilino en Azure Search se asume un ámbito uniforme donde cada inquilino es una instancia entera de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e53e-243">The above design patterns to model multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="9e53e-244">Sin embargo, en ocasiones las aplicaciones pueden controlar ámbitos mucho más pequeños.</span><span class="sxs-lookup"><span data-stu-id="9e53e-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="9e53e-245">Si los modelos de servicio por inquilino o índice por inquilino no son ámbitos lo suficientemente pequeños, es posible modelar un índice para lograr un grado de granularidad más fino si cabe.</span><span class="sxs-lookup"><span data-stu-id="9e53e-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible to model an index to achieve an even finer degree of granularity.</span></span>

<span data-ttu-id="9e53e-246">Para que un único índice se comporte de forma diferente para diferentes puntos de conexión de cliente, se puede agregar un campo a un índice para designar un determinado valor para cada posible cliente.</span><span class="sxs-lookup"><span data-stu-id="9e53e-246">To have a single index behave differently for different client endpoints, a field can be added to an index which designates a certain value for each possible client.</span></span> <span data-ttu-id="9e53e-247">Cada vez que un cliente llama a Azure Search para consultar o modificar un índice, el código de la aplicación cliente especifica el valor adecuado para ese campo mediante la funcionalidad de [filtro](https://msdn.microsoft.com/library/azure/dn798921.aspx) de Azure Search durante la consulta.</span><span class="sxs-lookup"><span data-stu-id="9e53e-247">Each time a client calls Azure Search to query or modify an index, the code from the client application specifies the appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="9e53e-248">Este método puede usarse para lograr la funcionalidad de cuentas de usuario independientes, niveles de permisos independientes e incluso aplicaciones completamente independientes.</span><span class="sxs-lookup"><span data-stu-id="9e53e-248">This method can be used to achieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="9e53e-249">El enfoque descrito anteriormente para configurar un solo índice único y dar servicio a varios inquilinos afecta a la relevancia de los resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e53e-249">Using the approach described above to configure a single index to serve multiple tenants affects the relevance of search results.</span></span> <span data-ttu-id="9e53e-250">Las puntuaciones de importancia de la búsqueda se calculan en un ámbito de nivel del índice, no en el del inquilino, por lo que los datos de todos los inquilinos se incorporan en las estadísticas subyacentes de las puntuaciones de relevancia como frecuencia de término.</span><span class="sxs-lookup"><span data-stu-id="9e53e-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in the relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="9e53e-251">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="9e53e-251">Next steps</span></span>
<span data-ttu-id="9e53e-252">Azure Search es una opción convincente para muchas aplicaciones, [le más sobre las sólidas funcionalidades del servicio](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="9e53e-252">Azure Search is a compelling choice for many applications, [read more about the service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="9e53e-253">Al evaluar los diversos patrones de diseño para aplicaciones multiinquilino, tenga en cuenta los [distintos planes de tarifa](https://azure.microsoft.com/pricing/details/search/) y sus respectivos [límites de servicio](search-limits-quotas-capacity.md) para adaptar mejor Azure Search de forma que encaje en cargas de trabajo de aplicaciones y arquitecturas de todos los tamaños.</span><span class="sxs-lookup"><span data-stu-id="9e53e-253">When evaluating the various design patterns for multitenant applications, consider the [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and the respective [service limits](search-limits-quotas-capacity.md) to best tailor Azure Search to fit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="9e53e-254">Las preguntas sobre Azure Search y los escenarios multiinquilino se pueden dirigir a azuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="9e53e-254">Any questions about Azure Search and multitenant scenarios can be directed to azuresearch_contact@microsoft.com.</span></span>


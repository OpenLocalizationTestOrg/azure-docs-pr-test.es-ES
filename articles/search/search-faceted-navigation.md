---
title: "aaaHow tooimplement la navegación por facetas en búsqueda de Azure | Documentos de Microsoft"
description: "Agregar tooapplications de navegación por facetas que se integran con búsqueda de Azure, un servicio de búsqueda en la nube hospedado en Microsoft Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: mblythe
editor: 
ms.assetid: cdf98fd4-63fd-4b50-b0b0-835cb08ad4d3
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 3/10/2017
ms.author: heidist
ms.openlocfilehash: c1e6bf9dc55d0044525db79e37d35a50ded5a736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooimplement-faceted-navigation-in-azure-search"></a><span data-ttu-id="ccb34-103">¿Cómo tooimplement la navegación por facetas en búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="ccb34-103">How tooimplement faceted navigation in Azure Search</span></span>
<span data-ttu-id="ccb34-104">La navegación por facetas es un mecanismo de filtrado que proporciona una navegación en profundidad autodirigida en aplicaciones de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-104">Faceted navigation is a filtering mechanism that provides self-directed drilldown navigation in search applications.</span></span> <span data-ttu-id="ccb34-105">término de Hello 'navegación por facetas' puede ser desconocida, pero probablemente ha usado con anterioridad.</span><span class="sxs-lookup"><span data-stu-id="ccb34-105">hello term 'faceted navigation' may be unfamiliar, but you've probably used it before.</span></span> <span data-ttu-id="ccb34-106">Como Hola siguiente ejemplo se muestra la navegación por facetas es nada más que Hola categorías utilizadas toofilter resultados.</span><span class="sxs-lookup"><span data-stu-id="ccb34-106">As hello following example shows, faceted navigation is nothing more than hello categories used toofilter results.</span></span>

 ![Azure Search Job Portal Demo (Demostración del portal de búsqueda de trabajo de Azure Search)][1]

<span data-ttu-id="ccb34-108">Navegación por facetas es un toosearch de punto de entrada alternativo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-108">Faceted navigation is an alternative entry point toosearch.</span></span> <span data-ttu-id="ccb34-109">Ofrece una cómoda tootyping alternativo expresiones de búsqueda compleja a mano.</span><span class="sxs-lookup"><span data-stu-id="ccb34-109">It offers a convenient alternative tootyping complex search expressions by hand.</span></span> <span data-ttu-id="ccb34-110">Las facetas pueden ayudarle a encontrar lo que busca y le garantizan que obtendrá al menos un resultado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-110">Facets can help you find what you're looking for, while ensuring that you don’t get zero results.</span></span> <span data-ttu-id="ccb34-111">Como desarrollador, facetas le permiten exponer los criterios de búsqueda más útiles de Hola para navegar por el corpus de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-111">As a developer, facets let you expose hello most useful search criteria for navigating your search corpus.</span></span> <span data-ttu-id="ccb34-112">En las aplicaciones de tienda en línea, la navegación por facetas suele basarse en marcas, departamentos (zapatos para niños), tamaño, precio, popularidad y clasificación.</span><span class="sxs-lookup"><span data-stu-id="ccb34-112">In online retail applications, faceted navigation is often built over brands, departments (kid’s shoes), size, price, popularity, and ratings.</span></span> 

<span data-ttu-id="ccb34-113">La implementación de la navegación por facetas difiere en las distintas tecnologías de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-113">Implementing faceted navigation differs across search technologies.</span></span> <span data-ttu-id="ccb34-114">En Azure Search, la navegación por facetas se compila en tiempo de consulta usando campos que haya atribuido anteriormente en el esquema.</span><span class="sxs-lookup"><span data-stu-id="ccb34-114">In Azure Search, faceted navigation is built at query time, using fields that you previously attributed in your schema.</span></span>

-   <span data-ttu-id="ccb34-115">En las consultas de Hola que la aplicación se compila, debe enviar una consulta *parámetros de consulta de faceta* tooget Hola disponible filtro los valores de facetas para ese documento en el conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="ccb34-115">In hello queries that your application builds, a query must send *facet query parameters* tooget hello available facet filter values for that document result set.</span></span>

-   <span data-ttu-id="ccb34-116">tooactually recortar el conjunto de resultados de documento de hello, también debe aplicar la aplicación hello un `$filter` expresión.</span><span class="sxs-lookup"><span data-stu-id="ccb34-116">tooactually trim hello document result set, hello application must also apply a `$filter` expression.</span></span>

<span data-ttu-id="ccb34-117">En el desarrollo de aplicaciones, escribir código que construye consultas constituye masiva Hola de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-117">In your application development, writing code that constructs queries constitutes hello bulk of hello work.</span></span> <span data-ttu-id="ccb34-118">Muchos de los comportamientos de aplicación Hola que se esperaría de navegación por facetas se proporcionan con el servicio de hello, incluida la compatibilidad integrada para definir intervalos y obtener recuentos de resultados de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-118">Many of hello application behaviors that you would expect from faceted navigation are provided by hello service, including built-in support for defining ranges and getting counts for facet results.</span></span> <span data-ttu-id="ccb34-119">servicio de Hello también incluye valores predeterminados razonables que le ayudarán a evitar las estructuras de navegación difícil de manejar.</span><span class="sxs-lookup"><span data-stu-id="ccb34-119">hello service also includes sensible defaults that help you avoid unwieldy navigation structures.</span></span> 

## <a name="sample-code-and-demo"></a><span data-ttu-id="ccb34-120">Demostración y código de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ccb34-120">Sample code and demo</span></span>
<span data-ttu-id="ccb34-121">En este artículo se utiliza como ejemplo un portal de búsqueda de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-121">This article uses a job search portal as an example.</span></span> <span data-ttu-id="ccb34-122">ejemplo de Hola se implementa como una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ccb34-122">hello example is implemented as an ASP.NET MVC application.</span></span>

-   <span data-ttu-id="ccb34-123">Ver y probar demostración en línea de hello trabajar en [demostración de Portal de trabajo de búsqueda de Azure](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="ccb34-123">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="ccb34-124">Descargar código de hello de hello [repositorio de ejemplos de Azure en GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="ccb34-124">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

## <a name="get-started"></a><span data-ttu-id="ccb34-125">Primeros pasos</span><span class="sxs-lookup"><span data-stu-id="ccb34-125">Get started</span></span>
<span data-ttu-id="ccb34-126">Si es nuevo desarrollo toosearch, hello toothink de manera mejor de navegación por facetas es que muestra las posibilidades de hello para la búsqueda autodirigido.</span><span class="sxs-lookup"><span data-stu-id="ccb34-126">If you're new toosearch development, hello best way toothink of faceted navigation is that it shows hello possibilities for self-directed search.</span></span> <span data-ttu-id="ccb34-127">Es un tipo de experiencia de búsqueda en profundidad basada en filtros predefinidos, que se usa para restringir rápidamente los resultados de búsqueda mediante acciones de apuntar y hacer clic.</span><span class="sxs-lookup"><span data-stu-id="ccb34-127">It’s a type of drill-down search experience, based on predefined filters, used for quickly narrowing down search results through point-and-click actions.</span></span> 

### <a name="interaction-model"></a><span data-ttu-id="ccb34-128">Modelo de interacción</span><span class="sxs-lookup"><span data-stu-id="ccb34-128">Interaction model</span></span>

<span data-ttu-id="ccb34-129">experiencia de búsqueda de Hello para la navegación por facetas es iterativa, así que vamos a conocer como una secuencia de las consultas que expandir en las acciones de respuesta toouser.</span><span class="sxs-lookup"><span data-stu-id="ccb34-129">hello search experience for faceted navigation is iterative, so let’s start by understanding it as a sequence of queries that unfold in response toouser actions.</span></span>

<span data-ttu-id="ccb34-130">Hola punto inicial es una página de aplicación que permite la navegación por facetas, que normalmente se colocan en la periferia de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-130">hello starting point is an application page that provides faceted navigation, typically placed on hello periphery.</span></span> <span data-ttu-id="ccb34-131">La navegación por facetas suele tener una estructura de árbol con casillas para cada valor o texto en el que se puede hacer clic.</span><span class="sxs-lookup"><span data-stu-id="ccb34-131">Faceted navigation is often a tree structure, with checkboxes for each value, or clickable text.</span></span> 

1. <span data-ttu-id="ccb34-132">Una consulta enviada tooAzure búsqueda especifica la estructura de navegación por facetas de Hola a través de uno o más parámetros de consulta de faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-132">A query sent tooAzure Search specifies hello faceted navigation structure via one or more facet query parameters.</span></span> <span data-ttu-id="ccb34-133">Por ejemplo, pueden incluir consultas de hello `facet=Rating`, quizás con una `:values` o `:sort` toofurther opción Refinar la presentación de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-133">For instance, hello query might include `facet=Rating`, perhaps with a `:values` or `:sort` option toofurther refine hello presentation.</span></span>
2. <span data-ttu-id="ccb34-134">capa de presentación de Hello presenta una página de búsqueda que permite la navegación por facetas, con facetas de hello especificadas en la solicitud de saludo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-134">hello presentation layer renders a search page that provides faceted navigation, using hello facets specified on hello request.</span></span>
3. <span data-ttu-id="ccb34-135">Proporciona una estructura de navegación por facetas que incluye clasificación, hacer clic en "4" tooindicate que se deben mostrar solo los productos con una clasificación de 4 o posterior.</span><span class="sxs-lookup"><span data-stu-id="ccb34-135">Given a faceted navigation structure that includes Rating, you click "4" tooindicate that only products with a rating of 4 or higher should be shown.</span></span> 
4. <span data-ttu-id="ccb34-136">En respuesta, la aplicación hello envía una consulta que incluye`$filter=Rating ge 4`</span><span class="sxs-lookup"><span data-stu-id="ccb34-136">In response, hello application sends a query that includes `$filter=Rating ge 4`</span></span> 
5. <span data-ttu-id="ccb34-137">Hola presentación capa Hola página actualizaciones, que muestra un conjunto de resultados reducido que contiene únicamente los elementos que satisfacen los criterios de hello nuevo (en este caso, productos clasifican 4 y superiores).</span><span class="sxs-lookup"><span data-stu-id="ccb34-137">hello presentation layer updates hello page, showing a reduced result set, containing just those items that satisfy hello new criteria (in this case, products rated 4 and up).</span></span>

<span data-ttu-id="ccb34-138">Una faceta es un parámetro de consulta, pero no lo confunda con una entrada de consulta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-138">A facet is a query parameter, but do not confuse it with query input.</span></span> <span data-ttu-id="ccb34-139">Nunca se usa como criterio de selección en una consulta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-139">It is never used as selection criteria in a query.</span></span> <span data-ttu-id="ccb34-140">En su lugar, cree faceta parámetros de consulta como la estructura de navegación de toohello de entradas que se devolverán en respuesta de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-140">Instead, think of facet query parameters as inputs toohello navigation structure that comes back in hello response.</span></span> <span data-ttu-id="ccb34-141">Para cada parámetro de consulta de faceta que proporcione, búsqueda de Azure se evalúa como cuántos documentos se encuentran en los resultados parciales Hola para cada valor de faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-141">For each facet query parameter you provide, Azure Search evaluates how many documents are in hello partial results for each facet value.</span></span>

<span data-ttu-id="ccb34-142">Hola aviso `$filter` en el paso 4.</span><span class="sxs-lookup"><span data-stu-id="ccb34-142">Notice hello `$filter` in step 4.</span></span> <span data-ttu-id="ccb34-143">filtro de Hello es un aspecto importante de la navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-143">hello filter is an important aspect of faceted navigation.</span></span> <span data-ttu-id="ccb34-144">Aunque las facetas y los filtros son independientes en hello API, debe ambos experiencia de hello toodeliver piensa.</span><span class="sxs-lookup"><span data-stu-id="ccb34-144">Although facets and filters are independent in hello API, you need both toodeliver hello experience you intend.</span></span> 

### <a name="app-design-pattern"></a><span data-ttu-id="ccb34-145">Patrón de diseño de la aplicación</span><span class="sxs-lookup"><span data-stu-id="ccb34-145">App design pattern</span></span>

<span data-ttu-id="ccb34-146">En código de aplicación, el patrón de Hola es el estructura de navegación por facetas de toouse faceta consulta parámetros tooreturn Hola junto con los resultados de faceta, además de una expresión de $filter.</span><span class="sxs-lookup"><span data-stu-id="ccb34-146">In application code, hello pattern is toouse facet query parameters tooreturn hello faceted navigation structure along with facet results, plus a $filter expression.</span></span>  <span data-ttu-id="ccb34-147">click (evento) en el valor de la faceta de Hola Hola Hola de identificadores de expresión de filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-147">hello filter expression handles hello click event on hello facet value.</span></span> <span data-ttu-id="ccb34-148">Reflexión de hello `$filter` expresión como código de hello detrás de recorte de hello real de los resultados de la búsqueda devolvió toohello capa de presentación.</span><span class="sxs-lookup"><span data-stu-id="ccb34-148">Think of hello `$filter` expression as hello code behind hello actual trimming of search results returned toohello presentation layer.</span></span> <span data-ttu-id="ccb34-149">Dada una faceta de colores, haga clic en color rojo de Hola se implementa a través de un `$filter` expresión que selecciona solo aquellos elementos que tienen un color rojo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-149">Given a Colors facet, clicking hello color Red is implemented through a `$filter` expression that selects only those items that have a color of red.</span></span> 

### <a name="query-basics"></a><span data-ttu-id="ccb34-150">Conceptos básicos de las consultas</span><span class="sxs-lookup"><span data-stu-id="ccb34-150">Query basics</span></span>

<span data-ttu-id="ccb34-151">En Búsqueda de Azure, una solicitud se especifica mediante uno o más parámetros de consulta (consulte [Buscar documentos](http://msdn.microsoft.com/library/azure/dn798927.aspx) para obtener una descripción de cada uno).</span><span class="sxs-lookup"><span data-stu-id="ccb34-151">In Azure Search, a request is specified through one or more query parameters (see [Search Documents](http://msdn.microsoft.com/library/azure/dn798927.aspx) for a description of each one).</span></span> <span data-ttu-id="ccb34-152">Ninguno de los parámetros de consulta de hello son necesaria, pero debe tener al menos una en orden para un toobe de consulta válida.</span><span class="sxs-lookup"><span data-stu-id="ccb34-152">None of hello query parameters are required, but you must have at least one in order for a query toobe valid.</span></span>

<span data-ttu-id="ccb34-153">Precisión, comprendido toofilter capacidad out aciertos irrelevantes, hello se logra una a través de una o ambas de estas expresiones:</span><span class="sxs-lookup"><span data-stu-id="ccb34-153">Precision, understood as hello ability toofilter out irrelevant hits, is achieved through one or both of these expressions:</span></span>

-   <span data-ttu-id="ccb34-154">**search=**</span><span class="sxs-lookup"><span data-stu-id="ccb34-154">**search=**</span></span>  
    <span data-ttu-id="ccb34-155">valor de Hola de este parámetro constituye la expresión de búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-155">hello value of this parameter constitutes hello search expression.</span></span> <span data-ttu-id="ccb34-156">Podría ser un fragmento de texto o una expresión de búsqueda compleja que incluye varios términos y operadores.</span><span class="sxs-lookup"><span data-stu-id="ccb34-156">It might be a single piece of text, or a complex search expression that includes multiple terms and operators.</span></span> <span data-ttu-id="ccb34-157">En el servidor de hello, una expresión de búsqueda se utiliza para la búsqueda de texto completo, consultar los campos de búsqueda en índice hello para la coincidencia de términos, devolver los resultados en orden de rango.</span><span class="sxs-lookup"><span data-stu-id="ccb34-157">On hello server, a search expression is used for full-text search, querying searchable fields in hello index for matching terms, returning results in rank order.</span></span> <span data-ttu-id="ccb34-158">Si establece `search` toonull, ejecución de la consulta es sobre todo índice de hello (es decir, `search=*`).</span><span class="sxs-lookup"><span data-stu-id="ccb34-158">If you set `search` toonull, query execution is over hello entire index (that is, `search=*`).</span></span> <span data-ttu-id="ccb34-159">In this Case, consultar otros elementos de hello, como un `$filter` o perfil de puntuación, es Hola principales factores que afectan a los documentos que se devuelven `($filter`) y en qué orden (`scoringProfile` o `$orderby`).</span><span class="sxs-lookup"><span data-stu-id="ccb34-159">In this case, other elements of hello query, such as a `$filter` or scoring profile, are hello primary factors affecting which documents are returned `($filter`) and in what order (`scoringProfile` or `$orderby`).</span></span>

-   <span data-ttu-id="ccb34-160">**$filter=**</span><span class="sxs-lookup"><span data-stu-id="ccb34-160">**$filter=**</span></span>  
    <span data-ttu-id="ccb34-161">Un filtro es un mecanismo eficaz para limitar el tamaño de Hola de resultados de la búsqueda en función de los valores de hello de atributos de documento específico.</span><span class="sxs-lookup"><span data-stu-id="ccb34-161">A filter is a powerful mechanism for limiting hello size of search results based on hello values of specific document attributes.</span></span> <span data-ttu-id="ccb34-162">Un `$filter` se evalúa en primer lugar, seguida de lógica de facetas que genera valores disponibles de Hola y el número correspondiente para cada valor</span><span class="sxs-lookup"><span data-stu-id="ccb34-162">A `$filter` is evaluated first, followed by faceting logic that generates hello available values and corresponding counts for each value</span></span>

<span data-ttu-id="ccb34-163">Expresiones de búsqueda compleja disminuir el rendimiento de Hola de consulta de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-163">Complex search expressions decrease hello performance of hello query.</span></span> <span data-ttu-id="ccb34-164">Siempre que sea posible, utilice la precisión de tooincrease de expresiones de filtro bien construido y mejorar el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-164">Where possible, use well-constructed filter expressions tooincrease precision and improve query performance.</span></span>

<span data-ttu-id="ccb34-165">toobetter comprender cómo agrega un filtro con mayor precisión, comparar un tooone de expresión de búsqueda compleja que incluye una expresión de filtro:</span><span class="sxs-lookup"><span data-stu-id="ccb34-165">toobetter understand how a filter adds more precision, compare a complex search expression tooone that includes a filter expression:</span></span>

-   `GET /indexes/hotel/docs?search=lodging budget +Seattle –motel +parking`
-   `GET /indexes/hotel/docs?search=lodging&$filter=City eq ‘Seattle’ and Parking and Type ne ‘motel’`

<span data-ttu-id="ccb34-166">Ambas consultas son válidos, pero hello en segundo lugar es la mejor opción si está buscando no moteles con estacionamiento en Seattle.</span><span class="sxs-lookup"><span data-stu-id="ccb34-166">Both queries are valid, but hello second is superior if you’re looking for non-motels with parking in Seattle.</span></span>
-   <span data-ttu-id="ccb34-167">consulta primera Hola se basa en esas palabras específicas que se menciona o no se menciona en los campos de cadena como nombre, descripción y cualquier otro campo que contiene datos de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-167">hello first query relies on those specific words being mentioned or not mentioned in string fields like Name, Description, and any other field containing searchable data.</span></span>
-   <span data-ttu-id="ccb34-168">segunda consulta de Hola busca coincidencias precisas en los datos estructurados y es probable que toobe mucho más precisa.</span><span class="sxs-lookup"><span data-stu-id="ccb34-168">hello second query looks for precise matches on structured data and is likely toobe much more accurate.</span></span>

<span data-ttu-id="ccb34-169">En las aplicaciones que incluyen navegación por facetas, asegúrese de que cada acción del usuario en una estructura de navegación por facetas vaya acompañada de una restricción de los resultados de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-169">In applications that include faceted navigation, make sure that each user action over a faceted navigation structure is accompanied by a narrowing of search results.</span></span> <span data-ttu-id="ccb34-170">resultados de toonarrow, utilice una expresión de filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-170">toonarrow results, use a filter expression.</span></span>

<a name="howtobuildit"></a>

## <a name="build-a-faceted-navigation-app"></a><span data-ttu-id="ccb34-171">Compilación de una aplicación de navegación por facetas</span><span class="sxs-lookup"><span data-stu-id="ccb34-171">Build a faceted navigation app</span></span>
<span data-ttu-id="ccb34-172">Implementar la navegación por facetas con búsqueda de Azure en el código de aplicación que se basa la solicitud de búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-172">You implement faceted navigation with Azure Search in your application code that builds hello search request.</span></span> <span data-ttu-id="ccb34-173">navegación por facetas Hola se basa en elementos del esquema que definió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ccb34-173">hello faceted navigation relies on elements in your schema that you defined previously.</span></span>

<span data-ttu-id="ccb34-174">Predefinidas en el índice de búsqueda es hello `Facetable [true|false]` atributo de índice, establecer en los campos seleccionados tooenable o deshabilitar su uso en una estructura de navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-174">Predefined in your search index is hello `Facetable [true|false]` index attribute, set on selected fields tooenable or disable their use in a faceted navigation structure.</span></span> <span data-ttu-id="ccb34-175">Sin `"Facetable" = true`, un campo no se puede usar en la navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-175">Without `"Facetable" = true`, a field cannot be used in facet navigation.</span></span>

<span data-ttu-id="ccb34-176">capa de presentación de Hello en el código proporciona la experiencia del usuario Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-176">hello presentation layer in your code provides hello user experience.</span></span> <span data-ttu-id="ccb34-177">Deben enumerar elementos que componen Hola la navegación por facetas hello, como etiqueta de hello, valores, casillas y recuento de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-177">It should list hello constituent parts of hello faceted navigation, such as hello label, values, check boxes, and hello count.</span></span> <span data-ttu-id="ccb34-178">Hola API de REST de búsqueda de Azure es independiente de la plataforma, así que usa el idioma y la plataforma que desee.</span><span class="sxs-lookup"><span data-stu-id="ccb34-178">hello Azure Search REST API is platform agnostic, so use whatever language and platform you want.</span></span> <span data-ttu-id="ccb34-179">Hola importante que es tooinclude elementos de interfaz de usuario que admiten incremental actualización, con el estado actualizado de interfaz de usuario que se ha seleccionado cada faceta adicional.</span><span class="sxs-lookup"><span data-stu-id="ccb34-179">hello important thing is tooinclude UI elements that support incremental refresh, with updated UI state as each additional facet is selected.</span></span> 

<span data-ttu-id="ccb34-180">En el momento de la consulta, el código de aplicación crea una solicitud que incluye `facet=[string]`, un parámetro de solicitud que proporciona Hola campo toofacet por.</span><span class="sxs-lookup"><span data-stu-id="ccb34-180">At query time, your application code creates a request that includes `facet=[string]`, a request parameter that provides hello field toofacet by.</span></span> <span data-ttu-id="ccb34-181">Una consulta puede tener varias facetas, como `&facet=color&facet=category&facet=rating`, separadas por un carácter de y comercial (&).</span><span class="sxs-lookup"><span data-stu-id="ccb34-181">A query can have multiple facets, such as `&facet=color&facet=category&facet=rating`, each one separated by an ampersand (&) character.</span></span>

<span data-ttu-id="ccb34-182">Código de la aplicación también debe construir un `$filter` hello toohandle de expresión, haga clic en los eventos de navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-182">Application code must also construct a `$filter` expression toohandle hello click events in faceted navigation.</span></span> <span data-ttu-id="ccb34-183">Un `$filter` reduce los resultados de búsqueda de hello, utilice el valor de la faceta de Hola como criterios de filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-183">A `$filter` reduces hello search results, using hello facet value as filter criteria.</span></span>

<span data-ttu-id="ccb34-184">Búsqueda de Azure devuelve los resultados de búsqueda de hello, en función de uno o más términos que escriba, junto con la estructura de navegación por facetas de toohello de actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="ccb34-184">Azure Search returns hello search results, based on one or more terms that you enter, along with updates toohello faceted navigation structure.</span></span> <span data-ttu-id="ccb34-185">En Búsqueda de Azure, la navegación por facetas es una construcción de un solo nivel, con los valores de las facetas y los recuentos de cuántos resultados se encuentran para cada una.</span><span class="sxs-lookup"><span data-stu-id="ccb34-185">In Azure Search, faceted navigation is a single-level construction, with facet values, and counts of how many results are found for each one.</span></span>

<span data-ttu-id="ccb34-186">En las secciones siguientes de hello, tomamos un vistazo más de cerca a cómo toobuild cada parte.</span><span class="sxs-lookup"><span data-stu-id="ccb34-186">In hello following sections, we take a closer look at how toobuild each part.</span></span>

<a name="buildindex"></a>

## <a name="build-hello-index"></a><span data-ttu-id="ccb34-187">Generar índice Hola</span><span class="sxs-lookup"><span data-stu-id="ccb34-187">Build hello index</span></span>
<span data-ttu-id="ccb34-188">Facetas de está habilitada de forma de campo a campo en el índice de hello, a través de este atributo de índice: `"Facetable": true`.</span><span class="sxs-lookup"><span data-stu-id="ccb34-188">Faceting is enabled on a field-by-field basis in hello index, via this index attribute: `"Facetable": true`.</span></span>  
<span data-ttu-id="ccb34-189">Todos los tipos de campo que podrían usarse en la navegación por facetas son `Facetable` de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="ccb34-189">All field types that could possibly be used in faceted navigation are `Facetable` by default.</span></span> <span data-ttu-id="ccb34-190">Estos tipos de campo incluyen `Edm.String`, `Edm.DateTimeOffset`, y todos los campos de tipo numérico de Hola (básicamente, todos los tipos de campo son facetable excepto `Edm.GeographyPoint`, que no se puede usar en la navegación por facetas).</span><span class="sxs-lookup"><span data-stu-id="ccb34-190">Such field types include `Edm.String`, `Edm.DateTimeOffset`, and all hello numeric field types (essentially, all field types are facetable except `Edm.GeographyPoint`, which can’t be used in faceted navigation).</span></span> 

<span data-ttu-id="ccb34-191">Cuando se crea un índice, una práctica recomendada para la navegación por facetas está tooexplicitly activar facetas desactivada para los campos que nunca deben utilizarse como una faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-191">When building an index, a best practice for faceted navigation is tooexplicitly turn faceting off for fields that should never be used as a facet.</span></span>  <span data-ttu-id="ccb34-192">En concreto, los campos de cadena para los valores de singleton, por ejemplo, un identificador o nombre del producto, deben estar definidos demasiado`"Facetable": false` tooprevent sus accidental (e ineficaces) se utilizan en la navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-192">In particular, string fields for singleton values, such as an ID or product name, should be set too`"Facetable": false` tooprevent their accidental (and ineffective) use in faceted navigation.</span></span> <span data-ttu-id="ccb34-193">Facetas desactivar donde no es necesario la activación ayuda a mantener pequeño tamaño Hola de índice de Hola y suele mejora el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ccb34-193">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

<span data-ttu-id="ccb34-194">Aquí te mostramos parte del esquema de hello para la aplicación de ejemplo de Hola demostración de Portal de trabajo, quitar de un determinado tamaño atributos tooreduce hello:</span><span class="sxs-lookup"><span data-stu-id="ccb34-194">Following is part of hello schema for hello Job Portal Demo sample app, trimmed of some attributes tooreduce hello size:</span></span>

```json
{
  ...
  "name": "nycjobs",
  "fields": [
    { “name”: "id",                 "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "job_id",             "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "agency",              "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "posting_type",        "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "num_of_positions",    "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "business_title",      "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "civil_service_title", "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "title_code_no",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "level",               "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_from",   "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_to",     "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_frequency",    "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "work_location",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
…
    { “name”: "geo_location",        "type": "Edm.GeographyPoint",     "searchable": false, "filterable": true, ...  "facetable": false, ... },
    { “name”: "tags",                "type": "Collection(Edm.String)", "searchable": true,  "filterable": true, ...  "facetable": true, ...  }
  ],
…
}
```

<span data-ttu-id="ccb34-195">Como puede ver en el esquema de ejemplo Hola `Facetable` se ha desactivado para los campos de cadena que no deben usarse como facetas, como los valores de identificador.</span><span class="sxs-lookup"><span data-stu-id="ccb34-195">As you can see in hello sample schema, `Facetable` is turned off for string fields that shouldn’t be used as facets, such as ID values.</span></span> <span data-ttu-id="ccb34-196">Facetas desactivar donde no es necesario la activación ayuda a mantener pequeño tamaño Hola de índice de Hola y suele mejora el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ccb34-196">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

> [!TIP]
> <span data-ttu-id="ccb34-197">Como práctica recomendada, incluyen el conjunto completo de Hola de atributos de índice para cada campo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-197">As a best practice, include hello full set of index attributes for each field.</span></span> <span data-ttu-id="ccb34-198">Aunque `Facetable` está de forma predeterminada para casi todos los campos, establecer deliberadamente cada atributo puede ayudarle a considerar detenidamente las implicaciones de Hola de cada decisión de esquema.</span><span class="sxs-lookup"><span data-stu-id="ccb34-198">Although `Facetable` is on by default for almost all fields, purposely setting each attribute can help you think through hello implications of each schema decision.</span></span> 

<a name="checkdata"></a>

## <a name="check-hello-data"></a><span data-ttu-id="ccb34-199">Comprobar los datos de Hola</span><span class="sxs-lookup"><span data-stu-id="ccb34-199">Check hello data</span></span>
<span data-ttu-id="ccb34-200">calidad de Hola de los datos tiene un efecto directo en si la estructura de navegación por facetas de hello materializa tal y como se espera que.</span><span class="sxs-lookup"><span data-stu-id="ccb34-200">hello quality of your data has a direct effect on whether hello faceted navigation structure materializes as you expect it to.</span></span> <span data-ttu-id="ccb34-201">También afecta a la facilidad de Hola de construir el conjunto de resultados de filtros tooreduce Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-201">It also affects hello ease of constructing filters tooreduce hello result set.</span></span>

<span data-ttu-id="ccb34-202">Si desea toofacet por marca o precio, cada documento debe contener valores de *marca* y *ProductPrice* que son válidos, coherentes y productivos como una opción de filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-202">If you want toofacet by Brand or Price, each document should contain values for *BrandName* and *ProductPrice* that are valid, consistent, and productive as a filter option.</span></span>

<span data-ttu-id="ccb34-203">Estos son algunos avisos de qué tooscrub para:</span><span class="sxs-lookup"><span data-stu-id="ccb34-203">Here are a few reminders of what tooscrub for:</span></span>

* <span data-ttu-id="ccb34-204">Para cada campo que desee toofacet por, pregúntese si contiene valores que son adecuados como filtros en la búsqueda autodirigido.</span><span class="sxs-lookup"><span data-stu-id="ccb34-204">For every field that you want toofacet by, ask yourself whether it contains values that are suitable as filters in self-directed search.</span></span> <span data-ttu-id="ccb34-205">valores de Hello deben ser suficientemente distintiva, corto y descriptivo toooffer una opción clara entre las opciones de la competencia.</span><span class="sxs-lookup"><span data-stu-id="ccb34-205">hello values should be short, descriptive, and sufficiently distinctive toooffer a clear choice between competing options.</span></span>
* <span data-ttu-id="ccb34-206">Errores ortográficos o valores casi coincidentes.</span><span class="sxs-lookup"><span data-stu-id="ccb34-206">Misspellings or nearly matching values.</span></span> <span data-ttu-id="ccb34-207">Si faceta en Color y los valores de campo incluyen naranja y Ornage (una palabra mal escrita), una faceta basada en el campo de Color Hola seleccionará ambos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-207">If you facet on Color, and field values include Orange and Ornage (a misspelling), a facet based on hello Color field would pick up both.</span></span>
* <span data-ttu-id="ccb34-208">La mezcla de mayúsculas y minúsculas en el texto también puede causar estragos en la navegación por facetas, porque naranja y Naranja aparecen como dos valores diferentes.</span><span class="sxs-lookup"><span data-stu-id="ccb34-208">Mixed case text can also wreak havoc in faceted navigation, with orange and Orange appearing as two different values.</span></span> 
* <span data-ttu-id="ccb34-209">Versiones simples y plurales de Hola mismo valor puede dar lugar a una faceta independiente para cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-209">Single and plural versions of hello same value can result in a separate facet for each.</span></span>

<span data-ttu-id="ccb34-210">Como puede imaginar, diligencia en la preparación de datos de hello es un aspecto fundamental de la navegación por facetas efectivo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-210">As you can imagine, diligence in preparing hello data is an essential aspect of effective faceted navigation.</span></span>

<a name="presentationlayer"></a>

## <a name="build-hello-ui"></a><span data-ttu-id="ccb34-211">Compilar Hola interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="ccb34-211">Build hello UI</span></span>
<span data-ttu-id="ccb34-212">Trabajar desde el nivel de presentación de hello puede descubrir los requisitos que podrían faltar en caso contrario y entender qué capacidades están toohello esencial de ayuda experiencia de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-212">Working back from hello presentation layer can help you uncover requirements that might be missed otherwise, and understand which capabilities are essential toohello search experience.</span></span>

<span data-ttu-id="ccb34-213">En cuanto a la navegación por facetas, la página web o una aplicación muestra la estructura de navegación por facetas de hello, detecta proporcionados por el usuario en la página de Hola e inserta elementos Hola cambiado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-213">In terms of faceted navigation, your web or application page displays hello faceted navigation structure, detects user input on hello page, and inserts hello changed elements.</span></span> 

<span data-ttu-id="ccb34-214">Para aplicaciones web, AJAX normalmente se utiliza en la capa de presentación de hello porque permite toorefresh los cambios incrementales.</span><span class="sxs-lookup"><span data-stu-id="ccb34-214">For web applications, AJAX is commonly used in hello presentation layer because it allows you toorefresh incremental changes.</span></span> <span data-ttu-id="ccb34-215">También puede usar ASP.NET MVC o cualquier otra plataforma de visualización que se puede conectar tooan servicio Búsqueda de Azure a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="ccb34-215">You could also use ASP.NET MVC or any other visualization platform that can connect tooan Azure Search service over HTTP.</span></span> <span data-ttu-id="ccb34-216">aplicación de ejemplo de Hola al que hace referencia a lo largo de este artículo: hello **demostración de Portal de trabajo de búsqueda de Azure** – ocurre toobe una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ccb34-216">hello sample application referenced throughout this article -- hello **Azure Search Job Portal Demo** – happens toobe an ASP.NET MVC application.</span></span>

<span data-ttu-id="ccb34-217">En el ejemplo de Hola, la navegación por facetas se integra en la página de resultados de búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-217">In hello sample, faceted navigation is built into hello search results page.</span></span> <span data-ttu-id="ccb34-218">Hola siguiente ejemplo, tomado de Hola `index.cshtml` página de resultados del archivo de aplicación de ejemplo de Hola, estructura HTML muestra hello estática para mostrar la navegación por facetas en búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-218">hello following example, taken from hello `index.cshtml` file of hello sample application, shows hello static HTML structure for displaying faceted navigation on hello search results page.</span></span> <span data-ttu-id="ccb34-219">lista de Hola de facetas compilarse o vuelven a generar dinámicamente cuando se envíe un término de búsqueda, o activar o desactiva una faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-219">hello list of facets is built or rebuilt dynamically when you submit a search term, or select or clear a facet.</span></span>

```html
<div class="widget sidebar-widget jobs-filter-widget">
  <h5 class="widget-title">Filter Results</h5>
    <p id="filterReset"></p>
    <div class="widget-content">

      <h6 id="businessTitleFacetTitle">Business Title</h6>
      <ul class="filter-list" id="business_title_facets">
      </ul>

      <h6>Location</h6>
      <ul class="filter-list" id="posting_type_facets">
      </ul>

      <h6>Posting Type</h6>
      <ul class="filter-list" id="posting_type_facets"></ul>

      <h6>Minimum Salary</h6>
      <ul class="filter-list" id="salary_range_facets">
      </ul>

  </div>
</div>
```

<span data-ttu-id="ccb34-220">Hola siguiente fragmento de código de hello `index.cshtml` página Hola HTML toodisplay Hola primera faceta título empresarial crea de forma dinámica.</span><span class="sxs-lookup"><span data-stu-id="ccb34-220">hello following code snippet from hello `index.cshtml` page dynamically builds hello HTML toodisplay hello first facet, Business Title.</span></span> <span data-ttu-id="ccb34-221">Funciones similares compilación dinámicamente hello HTML para hello otras facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-221">Similar functions dynamically build hello HTML for hello other facets.</span></span> <span data-ttu-id="ccb34-222">Cada faceta tiene una etiqueta y un recuento, que muestra el número de Hola de elementos encontrados para ese resultado de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-222">Each facet has a label and a count, which displays hello number of items found for that facet result.</span></span>

```js
function UpdateBusinessTitleFacets(data) {
  var facetResultsHTML = '';
  for (var i = 0; i < data.length; i++) {
    facetResultsHTML += '<li><a href="javascript:void(0)" onclick="ChooseBusinessTitleFacet(\'' + data[i].Value + '\');">' + data[i].Value + ' (' + data[i].Count + ')</span></a></li>';
  }

  $("#business_title_facets").html(facetResultsHTML);
}
```

> [!TIP]
> <span data-ttu-id="ccb34-223">Cuando se diseña la página de resultados de búsqueda de hello, recuerde tooadd un mecanismo para borrar las facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-223">When you design hello search results page, remember tooadd a mechanism for clearing facets.</span></span> <span data-ttu-id="ccb34-224">Si agrega casillas de verificación, puede ver fácilmente cómo se filtra tooclear Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-224">If you add check boxes, you can easily see how tooclear hello filters.</span></span> <span data-ttu-id="ccb34-225">En otros diseños, puede que necesite un patrón de ruta de navegación u otro enfoque creativo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-225">For other layouts, you might need a breadcrumb pattern or another creative approach.</span></span> <span data-ttu-id="ccb34-226">Por ejemplo, en la aplicación de ejemplo de Portal de la búsqueda de trabajo hello, puede hacer clic en hello `[X]` después de una faceta de hello tooclear faceta seleccionada.</span><span class="sxs-lookup"><span data-stu-id="ccb34-226">For example, in hello Job Search Portal sample application, you can click hello `[X]` after a selected facet tooclear hello facet.</span></span>

<a name="buildquery"></a>

## <a name="build-hello-query"></a><span data-ttu-id="ccb34-227">Crear consulta de Hola</span><span class="sxs-lookup"><span data-stu-id="ccb34-227">Build hello query</span></span>
<span data-ttu-id="ccb34-228">código de Hello creado por usted para la creación de consultas debe especificar todas las partes de una consulta válida, incluyendo expresiones de búsqueda, las facetas, filtros, puntuación perfiles – nada usan tooformulate una solicitud.</span><span class="sxs-lookup"><span data-stu-id="ccb34-228">hello code that you write for building queries should specify all parts of a valid query, including search expressions, facets, filters, scoring profiles– anything used tooformulate a request.</span></span> <span data-ttu-id="ccb34-229">En esta sección, exploramos donde facetas caben en una consulta y cómo se utilizan filtros con facetas toodeliver un reducido conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="ccb34-229">In this section, we explore where facets fit into a query, and how filters are used with facets toodeliver a reduced result set.</span></span>

<span data-ttu-id="ccb34-230">Observe que las facetas son una parte integral de esta aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-230">Notice that facets are integral in this sample application.</span></span> <span data-ttu-id="ccb34-231">experiencia de búsqueda de Hola Hola demostración de Portal de trabajo está diseñado basándose en filtros y la navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-231">hello search experience in hello Job Portal Demo is designed around faceted navigation and filters.</span></span> <span data-ttu-id="ccb34-232">un lugar destacado de navegación por facetas en página Hola Hola muestra su importancia.</span><span class="sxs-lookup"><span data-stu-id="ccb34-232">hello prominent placement of faceted navigation on hello page demonstrates its importance.</span></span> 

<span data-ttu-id="ccb34-233">Un ejemplo suele ser un buen lugar toobegin.</span><span class="sxs-lookup"><span data-stu-id="ccb34-233">An example is often a good place toobegin.</span></span> <span data-ttu-id="ccb34-234">Hola siguiente ejemplo, tomado de Hola `JobsSearch.cs` archivo, compilaciones, en función de una solicitud que crea la navegación de faceta en título empresarial, la ubicación, tipo de registro y salario mínimo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-234">hello following example, taken from hello `JobsSearch.cs` file, builds a request that creates facet navigation based on Business Title, Location, Posting Type, and Minimum Salary.</span></span> 

```cs
SearchParameters sp = new SearchParameters()
{
  ...
  // Add facets
  Facets = new List<String>() { "business_title", "posting_type", "level", "salary_range_from,interval:50000" },
};
```

<span data-ttu-id="ccb34-235">Un parámetro de consulta de faceta se establece el campo tooa y según el tipo de datos de hello, pueden tener parámetros aún más por lista delimitada por comas que incluye `count:<integer>`, `sort:<>`, `interval:<integer>`, y `values:<list>`.</span><span class="sxs-lookup"><span data-stu-id="ccb34-235">A facet query parameter is set tooa field and depending on hello data type, can be further parameterized by comma-delimited list that includes `count:<integer>`, `sort:<>`, `interval:<integer>`, and `values:<list>`.</span></span> <span data-ttu-id="ccb34-236">Se admiten listas de valores para datos numéricos cuando se establecen intervalos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-236">A values list is supported for numeric data when setting up ranges.</span></span> <span data-ttu-id="ccb34-237">Consulte [Buscar documentos (API de Búsqueda de Azure)](http://msdn.microsoft.com/library/azure/dn798927.aspx) para obtener más información sobre su uso.</span><span class="sxs-lookup"><span data-stu-id="ccb34-237">See [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx) for usage details.</span></span>

<span data-ttu-id="ccb34-238">Junto con las facetas, solicitud de hello formulada la aplicación debe compilarse también filtros toonarrow hacia abajo el conjunto de Hola de documentos candidatos basado en una selección de valor de faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-238">Along with facets, hello request formulated by your application should also build filters toonarrow down hello set of candidate documents based on a facet value selection.</span></span> <span data-ttu-id="ccb34-239">Para una tienda de bicicletas, la navegación por facetas proporciona pistas tooquestions como *los colores, los fabricantes y tipos de bicicletas están disponibles?*.</span><span class="sxs-lookup"><span data-stu-id="ccb34-239">For a bike store, faceted navigation provides clues tooquestions like *What colors, manufacturers, and types of bikes are available?*.</span></span> <span data-ttu-id="ccb34-240">El filtrado responde a preguntas como *¿qué bicicletas exactas son rojas, bicicletas de montaña, dentro de este precio de intervalo de precios?*.</span><span class="sxs-lookup"><span data-stu-id="ccb34-240">Filtering answers questions like *Which exact bikes are red, mountain bikes, in this price range?*.</span></span> <span data-ttu-id="ccb34-241">Al hacer clic en "Rojo" tooindicate que se deben mostrar solo los productos de color rojo, aplicación de hello siguiente consulta Hola envía incluye `$filter=Color eq ‘Red’`.</span><span class="sxs-lookup"><span data-stu-id="ccb34-241">When you click "Red" tooindicate that only Red products should be shown, hello next query hello application sends includes `$filter=Color eq ‘Red’`.</span></span>

<span data-ttu-id="ccb34-242">Hola siguiente fragmento de código de hello `JobsSearch.cs` página agrega Hola seleccionado título empresarial toohello filtro si selecciona un valor de faceta de hello título empresarial.</span><span class="sxs-lookup"><span data-stu-id="ccb34-242">hello following code snippet from hello `JobsSearch.cs` page adds hello selected Business Title toohello filter if you select a value from hello Business Title facet.</span></span>

```cs
if (businessTitleFacet != "")
  filter = "business_title eq '" + businessTitleFacet + "'";
```

<a name="tips"></a> 

## <a name="tips-and-best-practices"></a><span data-ttu-id="ccb34-243">Sugerencias y procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="ccb34-243">Tips and best practices</span></span>

### <a name="indexing-tips"></a><span data-ttu-id="ccb34-244">Sugerencias de indexación</span><span class="sxs-lookup"><span data-stu-id="ccb34-244">Indexing tips</span></span>
<span data-ttu-id="ccb34-245">**Mejora de la eficacia del índice si no utiliza un cuadro de búsqueda**</span><span class="sxs-lookup"><span data-stu-id="ccb34-245">**Improve index efficiency if you don't use a Search box**</span></span>

<span data-ttu-id="ccb34-246">Si la aplicación utiliza la navegación por facetas exclusivamente (es decir, ningún cuadro de búsqueda), puede marcar campo hello como `searchable=false`, `facetable=true` tooproduce un índice más compacto.</span><span class="sxs-lookup"><span data-stu-id="ccb34-246">If your application uses faceted navigation exclusively (that is, no search box), you can mark hello field as `searchable=false`, `facetable=true` tooproduce a more compact index.</span></span> <span data-ttu-id="ccb34-247">Además, la indización se produce solo en los valores de facetas todo, con ninguna división de palabras o una indización de componentes de Hola de un valor de múltiples palabra.</span><span class="sxs-lookup"><span data-stu-id="ccb34-247">In addition, indexing occurs only on whole facet values, with no word-break or indexing of hello component parts of a multi-word value.</span></span>

<span data-ttu-id="ccb34-248">**Especificación de qué campos se pueden usar como facetas**</span><span class="sxs-lookup"><span data-stu-id="ccb34-248">**Specify which fields can be used as facets**</span></span>

<span data-ttu-id="ccb34-249">Recuerde que Hola esquema de índice Hola determina qué campos están disponible toouse como una faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-249">Recall that hello schema of hello index determines which fields are available toouse as a facet.</span></span> <span data-ttu-id="ccb34-250">Suponiendo que un campo facetable, consulta Hola especifica qué toofacet campos por.</span><span class="sxs-lookup"><span data-stu-id="ccb34-250">Assuming a field is facetable, hello query specifies which fields toofacet by.</span></span> <span data-ttu-id="ccb34-251">campo Hello mediante el cual está facetas proporciona valores de hello que aparecen debajo de la etiqueta de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-251">hello field by which you are faceting provides hello values that appear below hello label.</span></span> 

<span data-ttu-id="ccb34-252">los valores de Hello que aparecen debajo de cada etiqueta se recuperan del índice de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-252">hello values that appear under each label are retrieved from hello index.</span></span> <span data-ttu-id="ccb34-253">Por ejemplo, si hello campo de faceta es *Color*, valores de hello disponibles para realizar un filtrado adicional son valores de hello para ese campo - rojo, negro y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="ccb34-253">For example, if hello facet field is *Color*, hello values available for additional filtering are hello values for that field - Red, Black, and so forth.</span></span>

<span data-ttu-id="ccb34-254">Para los valores de numéricos y de fecha y hora solo, puede establecer explícitamente los valores en el campo de faceta de hello (por ejemplo, `facet=Rating,values:1|2|3|4|5`).</span><span class="sxs-lookup"><span data-stu-id="ccb34-254">For Numeric and DateTime values only, you can explicitly set values on hello facet field (for example, `facet=Rating,values:1|2|3|4|5`).</span></span> <span data-ttu-id="ccb34-255">Se permite una lista de valores para estos tipos toosimplify Hola separación de campos de resultados de faceta en intervalos contiguos (ya sea intervalos basados en valores numéricos o períodos de tiempo).</span><span class="sxs-lookup"><span data-stu-id="ccb34-255">A values list is allowed for these field types toosimplify hello separation of facet results into contiguous ranges (either ranges based on numeric values or time periods).</span></span> 

<span data-ttu-id="ccb34-256">**De forma predeterminada solo puede tener un nivel de navegación por facetas**</span><span class="sxs-lookup"><span data-stu-id="ccb34-256">**By default you can only have one level of faceted navigation**</span></span> 

<span data-ttu-id="ccb34-257">Como ya se mencionó, no hay compatibilidad directa para facetas anidadas en una jerarquía.</span><span class="sxs-lookup"><span data-stu-id="ccb34-257">As noted, there is no direct support for nesting facets in a hierarchy.</span></span> <span data-ttu-id="ccb34-258">De forma predeterminada, la navegación por facetas en Azure Search solo admite un nivel de filtros.</span><span class="sxs-lookup"><span data-stu-id="ccb34-258">By default, faceted navigation in Azure Search only supports one level of filters.</span></span> <span data-ttu-id="ccb34-259">Sin embargo, existen soluciones alternativas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-259">However, workarounds do exist.</span></span> <span data-ttu-id="ccb34-260">Puede codificar una estructura jerárquica de facetas en una `Collection(Edm.String)` con un punto de entrada por jerarquía.</span><span class="sxs-lookup"><span data-stu-id="ccb34-260">You can encode a hierarchical facet structure in a `Collection(Edm.String)` with one entry point per hierarchy.</span></span> <span data-ttu-id="ccb34-261">Implementar esta solución alternativa es más allá del ámbito de Hola de este artículo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-261">Implementing this workaround is beyond hello scope of this article.</span></span> 

### <a name="querying-tips"></a><span data-ttu-id="ccb34-262">Sugerencias de consulta</span><span class="sxs-lookup"><span data-stu-id="ccb34-262">Querying tips</span></span>
<span data-ttu-id="ccb34-263">**Validar los campos**</span><span class="sxs-lookup"><span data-stu-id="ccb34-263">**Validate fields**</span></span>

<span data-ttu-id="ccb34-264">Si compila lista Hola de facetas de manera dinámica basándose en la entrada de usuario de confianza, valide que Hola nombres de campos por facetas Hola son válidos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-264">If you build hello list of facets dynamically based on untrusted user input, validate that hello names of hello faceted fields are valid.</span></span> <span data-ttu-id="ccb34-265">O bien, al generar direcciones URL mediante el uso de escape nombres Hola `Uri.EscapeDataString()` en. NET, o hello equivalente en la plataforma de elección.</span><span class="sxs-lookup"><span data-stu-id="ccb34-265">Or, escape hello names when building URLs by using either `Uri.EscapeDataString()` in .NET, or hello equivalent in your platform of choice.</span></span>

### <a name="filtering-tips"></a><span data-ttu-id="ccb34-266">Sugerencias de filtrado</span><span class="sxs-lookup"><span data-stu-id="ccb34-266">Filtering tips</span></span>
<span data-ttu-id="ccb34-267">**Aumento de la precisión de la búsqueda con filtros**</span><span class="sxs-lookup"><span data-stu-id="ccb34-267">**Increase search precision with filters**</span></span>

<span data-ttu-id="ccb34-268">Use filtros.</span><span class="sxs-lookup"><span data-stu-id="ccb34-268">Use filters.</span></span> <span data-ttu-id="ccb34-269">Si confía en expresiones de búsqueda solo por sí sola y lematización podría provocar un toobe documento devuelven que no tiene valor de faceta precisa de hello en cualquiera de sus campos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-269">If you rely on just search expressions alone, stemming could cause a document toobe returned that doesn’t have hello precise facet value in any of its fields.</span></span>

<span data-ttu-id="ccb34-270">**Aumento del rendimiento de la búsqueda con filtros**</span><span class="sxs-lookup"><span data-stu-id="ccb34-270">**Increase search performance with filters**</span></span>

<span data-ttu-id="ccb34-271">Filtros de restringir el conjunto de Hola de documentos de candidatos para la búsqueda y excluirán de la clasificación.</span><span class="sxs-lookup"><span data-stu-id="ccb34-271">Filters narrow down hello set of candidate documents for search and exclude them from ranking.</span></span> <span data-ttu-id="ccb34-272">Si tiene un conjunto grande de documentos, usar una profundización por facetas selectiva suele proporcionar un mayor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ccb34-272">If you have a large set of documents, using a selective facet drill-down often gives you better performance.</span></span>
  
<span data-ttu-id="ccb34-273">**Filtrar solo los campos por facetas Hola**</span><span class="sxs-lookup"><span data-stu-id="ccb34-273">**Filter only hello faceted fields**</span></span>

<span data-ttu-id="ccb34-274">En por facetas exploración en profundidad, probablemente le interese tooonly incluir documentos que tienen valor de faceta de hello en un campo específico (con facetas), no en cualquier lugar en todos los campos de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-274">In faceted drill-down, you typically want tooonly include documents that have hello facet value in a specific (faceted) field, not anywhere across all searchable fields.</span></span> <span data-ttu-id="ccb34-275">Agregar un filtro refuerza el campo de destino de hello dirigiendo Hola servicio toosearch sólo en campo con facetas de Hola para un valor coincidente.</span><span class="sxs-lookup"><span data-stu-id="ccb34-275">Adding a filter reinforces hello target field by directing hello service toosearch only in hello faceted field for a matching value.</span></span>

<span data-ttu-id="ccb34-276">**Recorte de los resultados de faceta con más filtros**</span><span class="sxs-lookup"><span data-stu-id="ccb34-276">**Trim facet results with more filters**</span></span>

<span data-ttu-id="ccb34-277">Resultados de la faceta son documentos que se encuentra en los resultados de búsqueda de Hola que coinciden con un término de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-277">Facet results are documents found in hello search results that match a facet term.</span></span> <span data-ttu-id="ccb34-278">Hola siguiente ejemplo, en los resultados de búsqueda para *la informática en nube*, 254 elementos también tienen *especificación interno* como un tipo de contenido.</span><span class="sxs-lookup"><span data-stu-id="ccb34-278">In hello following example, in search results for *cloud computing*, 254 items also have *internal specification* as a content type.</span></span> <span data-ttu-id="ccb34-279">Los elementos no son necesariamente excluyentes mutuamente.</span><span class="sxs-lookup"><span data-stu-id="ccb34-279">Items are not necessarily mutually exclusive.</span></span> <span data-ttu-id="ccb34-280">Si un elemento cumple los criterios de Hola de ambos filtros, se cuenta en cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-280">If an item meets hello criteria of both filters, it is counted in each one.</span></span> <span data-ttu-id="ccb34-281">Esta duplicación es posible cuando facetas en `Collection(Edm.String)` campos, que son a menudo utilizan tooimplement documento etiquetado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-281">This duplication is possible when faceting on `Collection(Edm.String)` fields, which are often used tooimplement document tagging.</span></span>

        Search term: "cloud computing"
        Content type
           Internal specification (254)
           Video (10) 

<span data-ttu-id="ccb34-282">En general, si encuentra que los resultados de faceta constantemente son demasiado grandes, se recomienda agregar más filtros toogive a los usuarios más opciones para restringir la búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-282">In general, if you find that facet results are consistently too large, we recommend that you add more filters toogive users more options for narrowing hello search.</span></span>

### <a name="tips-about-result-count"></a><span data-ttu-id="ccb34-283">Sugerencias sobre el recuento de resultados</span><span class="sxs-lookup"><span data-stu-id="ccb34-283">Tips about result count</span></span>

<span data-ttu-id="ccb34-284">**Limitar el número de elementos de navegación de la faceta de Hola Hola**</span><span class="sxs-lookup"><span data-stu-id="ccb34-284">**Limit hello number of items in hello facet navigation**</span></span>

<span data-ttu-id="ccb34-285">Para cada campo con facetas en el árbol de navegación de hello, hay un límite predeterminado de 10 valores.</span><span class="sxs-lookup"><span data-stu-id="ccb34-285">For each faceted field in hello navigation tree, there is a default limit of 10 values.</span></span> <span data-ttu-id="ccb34-286">Este valor predeterminado relacione con estructuras de navegación porque mantiene valores de hello tamaño administrable tooa de lista.</span><span class="sxs-lookup"><span data-stu-id="ccb34-286">This default makes sense for navigation structures because it keeps hello values list tooa manageable size.</span></span> <span data-ttu-id="ccb34-287">Puede invalidar Hola predeterminado asignando un valor toocount.</span><span class="sxs-lookup"><span data-stu-id="ccb34-287">You can override hello default by assigning a value toocount.</span></span>

* <span data-ttu-id="ccb34-288">`&facet=city,count:5`Especifica que solo Hola cinco primeras ciudades encuentra en la parte superior de hello clasificada los resultados se devuelven como resultado de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-288">`&facet=city,count:5` specifies that only hello first five cities found in hello top ranked results are returned as a facet result.</span></span> <span data-ttu-id="ccb34-289">Considere una consulta de ejemplo con un término de búsqueda "aeropuerto" y 32 coincidencias.</span><span class="sxs-lookup"><span data-stu-id="ccb34-289">Consider a sample query with a search term of “airport” and 32 matches.</span></span> <span data-ttu-id="ccb34-290">Si especifica la consulta de hello `&facet=city,count:5`solo cinco primeras ciudades Hola con hello se incluye la mayoría de los documentos en los resultados de búsqueda de hello en Hola resultados de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-290">If hello query specifies `&facet=city,count:5`, only hello first five unique cities with hello most documents in hello search results are included in hello facet results.</span></span>

<span data-ttu-id="ccb34-291">Aviso Hola distinción entre los resultados de la faceta y resultados de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-291">Notice hello distinction between facet results and search results.</span></span> <span data-ttu-id="ccb34-292">Resultados de la búsqueda son todos los documentos de Hola que coinciden con la consulta de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-292">Search results are all hello documents that match hello query.</span></span> <span data-ttu-id="ccb34-293">Resultados de la faceta son Hola coincidencias para cada valor de faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-293">Facet results are hello matches for each facet value.</span></span> <span data-ttu-id="ccb34-294">En el ejemplo de Hola, resultados de búsqueda incluyen nombres de ciudades que no están en la lista de clasificaciones de faceta de hello (5 en nuestro ejemplo).</span><span class="sxs-lookup"><span data-stu-id="ccb34-294">In hello example, search results include City names that are not in hello facet classification list (5 in our example).</span></span> <span data-ttu-id="ccb34-295">Los resultados que se filtran mediante la navegación por facetas son visibles cuando se borran las facetas o se eligen otras facetas además de City.</span><span class="sxs-lookup"><span data-stu-id="ccb34-295">Results that are filtered out through faceted navigation become visible when you clear facets, or choose other facets besides City.</span></span> 

> [!NOTE]
> <span data-ttu-id="ccb34-296">Analizar `count` cuando hay más de un tipo puede ser confuso.</span><span class="sxs-lookup"><span data-stu-id="ccb34-296">Discussing `count` when there is more than one type can be confusing.</span></span> <span data-ttu-id="ccb34-297">Hello tabla siguiente ofrece un breve resumen de cómo se utiliza el término de hello en la API de búsqueda de Azure, código de ejemplo y documentación.</span><span class="sxs-lookup"><span data-stu-id="ccb34-297">hello following table offers a brief summary of how hello term is used in Azure Search API, sample code, and documentation.</span></span> 

* `@colorFacet.count`<br/>
  <span data-ttu-id="ccb34-298">En el código de presentación, debería ver un parámetro de recuento en faceta de hello, toodisplay usado Hola número de resultados de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-298">In presentation code, you should see a count parameter on hello facet, used toodisplay hello number of facet results.</span></span> <span data-ttu-id="ccb34-299">En los resultados de faceta, número indica número de Hola de documentos que coinciden en términos de faceta de Hola o intervalo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-299">In facet results, count indicates hello number of documents that match on hello facet term or range.</span></span>
* `&facet=City,count:12`<br/>
  <span data-ttu-id="ccb34-300">En una consulta de faceta, puede establecer el valor del recuento tooa.</span><span class="sxs-lookup"><span data-stu-id="ccb34-300">In a facet query, you can set count tooa value.</span></span>  <span data-ttu-id="ccb34-301">valor predeterminado de Hello es 10, pero puede establecerlo superior o inferior.</span><span class="sxs-lookup"><span data-stu-id="ccb34-301">hello default is 10, but you can set it higher or lower.</span></span> <span data-ttu-id="ccb34-302">Establecer `count:12` obtiene Hola primeras 12 coincidencias en los resultados de la faceta por el número de documento.</span><span class="sxs-lookup"><span data-stu-id="ccb34-302">Setting `count:12` gets hello top 12 matches in facet results by document count.</span></span>
* <span data-ttu-id="ccb34-303">"`@odata.count`"</span><span class="sxs-lookup"><span data-stu-id="ccb34-303">"`@odata.count`"</span></span><br/>
  <span data-ttu-id="ccb34-304">En respuesta a la consulta hello, este valor indica el número de Hola de elementos coincidentes en los resultados de búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-304">In hello query response, this value indicates hello number of matching items in hello search results.</span></span> <span data-ttu-id="ccb34-305">En promedio, es mayor que la suma de Hola de todos los resultados de faceta combinada debido toohello presencia de elementos que coinciden con el término de búsqueda de hello, pero no tener ninguna coincidencia del valor de faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-305">On average, it’s larger than hello sum of all facet results combined, due toohello presence of items that match hello search term, but have no facet value matches.</span></span>

<span data-ttu-id="ccb34-306">**Obtención de recuentos en los resultados de faceta**</span><span class="sxs-lookup"><span data-stu-id="ccb34-306">**Get counts in facet results**</span></span>

<span data-ttu-id="ccb34-307">Cuando se agrega una consulta por facetas de filtro tooa, conviene instrucción de faceta de hello tooretain (por ejemplo, `facet=Rating&$filter=Rating ge 4`).</span><span class="sxs-lookup"><span data-stu-id="ccb34-307">When you add a filter tooa faceted query, you might want tooretain hello facet statement (for example, `facet=Rating&$filter=Rating ge 4`).</span></span> <span data-ttu-id="ccb34-308">Técnicamente, faceta = clasificación no se necesita, pero manteniéndolo devuelve recuentos de Hola de los valores de facetas para las clasificaciones de 4 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="ccb34-308">Technically, facet=Rating isn’t needed, but keeping it returns hello counts of facet values for ratings 4 and higher.</span></span> <span data-ttu-id="ccb34-309">Por ejemplo, si hace clic en "4" y Hola consulta incluye un filtro para mayor o igual demasiado "4", se devuelven recuentos para cada clasificación que es 4 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="ccb34-309">For example, if you click "4" and hello query includes a filter for greater or equal too"4", counts are returned for each rating that is 4 and higher.</span></span>  

<span data-ttu-id="ccb34-310">**Garantía de obtención de recuentos de faceta adecuados**</span><span class="sxs-lookup"><span data-stu-id="ccb34-310">**Make sure you get accurate facet counts**</span></span>

<span data-ttu-id="ccb34-311">En determinadas circunstancias, es posible que los recuentos de faceta no coinciden con los conjuntos de resultados de hello (vea [la navegación por facetas en búsqueda de Azure (entrada de foro)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span><span class="sxs-lookup"><span data-stu-id="ccb34-311">Under certain circumstances, you might find that facet counts do not match hello result sets (see [Faceted navigation in Azure Search (forum post)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span></span>

<span data-ttu-id="ccb34-312">Recuentos de faceta pueden ser incorrectos debido toohello arquitectura de partición.</span><span class="sxs-lookup"><span data-stu-id="ccb34-312">Facet counts can be inaccurate due toohello sharding architecture.</span></span> <span data-ttu-id="ccb34-313">Cada índice de búsqueda tiene varias particiones, y cada partición notifica facetas de hello N principales por número de documento, que se combina en un único resultado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-313">Every search index has multiple shards, and each shard reports hello top N facets by document count, which is then combined into a single result.</span></span> <span data-ttu-id="ccb34-314">Si algunas particiones tienen muchos valores coincidentes, mientras que otros usuarios tengan menos, es posible que algunos valores de facetas faltan o bajo con recuento de resultados de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-314">If some shards have many matching values, while others have fewer, you may find that some facet values are missing or under-counted in hello results.</span></span>

<span data-ttu-id="ccb34-315">Aunque este comportamiento podría cambiar en cualquier momento, si se produce este comportamiento hoy en día, también puede trabajar a su alrededor artificialmente que infla recuento hello:<number> número de tooenforce grandes números de tooa completa de generación de informes de cada partición.</span><span class="sxs-lookup"><span data-stu-id="ccb34-315">Although this behavior could change at any time, if you encounter this behavior today, you can work around it by artificially inflating hello count:<number> tooa large number tooenforce full reporting from each shard.</span></span> <span data-ttu-id="ccb34-316">Si Hola valor de recuento: es igual o mayor que toohello número de valores únicos en el campo de hello, se garantiza resultados precisos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-316">If hello value of count: is greater than or equal toohello number of unique values in hello field, you are guaranteed accurate results.</span></span> <span data-ttu-id="ccb34-317">Sin embargo, si el recuento de documentos es alto, esto afecta al rendimiento, por lo que debe usar esta opción con prudencia.</span><span class="sxs-lookup"><span data-stu-id="ccb34-317">However, when document counts are high, there is a performance penalty, so use this option judiciously.</span></span>

### <a name="user-interface-tips"></a><span data-ttu-id="ccb34-318">Sugerencias de interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="ccb34-318">User interface tips</span></span>
<span data-ttu-id="ccb34-319">**Agregar etiquetas para cada campo en la navegación por facetas**</span><span class="sxs-lookup"><span data-stu-id="ccb34-319">**Add labels for each field in facet navigation**</span></span>

<span data-ttu-id="ccb34-320">Las etiquetas se definen normalmente en hello HTML o un formulario (`index.cshtml` en la aplicación de ejemplo de Hola).</span><span class="sxs-lookup"><span data-stu-id="ccb34-320">Labels are typically defined in hello HTML or form (`index.cshtml` in hello sample application).</span></span> <span data-ttu-id="ccb34-321">No hay ninguna API en Azure Search para las etiquetas de navegación por facetas u otros tipos de metadatos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-321">There is no API in Azure Search for facet navigation labels or any other metadata.</span></span>

<a name="rangefacets"></a>

## <a name="filter-based-on-a-range"></a><span data-ttu-id="ccb34-322">Filtro basado en un intervalo</span><span class="sxs-lookup"><span data-stu-id="ccb34-322">Filter based on a range</span></span>
<span data-ttu-id="ccb34-323">El uso de facetas en intervalos de valores es un requisito habitual de las aplicaciones de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ccb34-323">Faceting over ranges of values is a common search application requirement.</span></span> <span data-ttu-id="ccb34-324">Se admiten intervalos para datos numéricos y valores de fecha y hora.</span><span class="sxs-lookup"><span data-stu-id="ccb34-324">Ranges are supported for numeric data and DateTime values.</span></span> <span data-ttu-id="ccb34-325">Puede leer más acerca de cada enfoque en [Buscar documentos (API de Búsqueda de Azure)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span><span class="sxs-lookup"><span data-stu-id="ccb34-325">You can read more about each approach in [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span></span>

<span data-ttu-id="ccb34-326">Búsqueda de Azure simplifica la construcción de intervalos mediante dos enfoques de cálculo de intervalos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-326">Azure Search simplifies range construction by providing two approaches for computing a range.</span></span> <span data-ttu-id="ccb34-327">Para ambos enfoques, búsqueda de Azure crea Hola intervalos adecuados dados entradas de Hola que ha proporcionado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-327">For both approaches, Azure Search creates hello appropriate ranges given hello inputs you’ve provided.</span></span> <span data-ttu-id="ccb34-328">Por ejemplo, si especifica valores de intervalo de 10|20|30, creará automáticamente los intervalos 0-10, 10-20, 20-30.</span><span class="sxs-lookup"><span data-stu-id="ccb34-328">For instance, if you specify range values of 10|20|30, it automatically creates ranges of 0-10, 10-20, 20-30.</span></span> <span data-ttu-id="ccb34-329">La aplicación tiene la opción de quitar los intervalos que estén vacíos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-329">Your application can optionally remove any intervals that are empty.</span></span> 

<span data-ttu-id="ccb34-330">**Enfoque 1: Usar el parámetro de intervalo de hello**</span><span class="sxs-lookup"><span data-stu-id="ccb34-330">**Approach 1: Use hello interval parameter**</span></span>  
<span data-ttu-id="ccb34-331">facetas de precio tooset en incrementos de 10 $, especificaría:`&facet=price,interval:10`</span><span class="sxs-lookup"><span data-stu-id="ccb34-331">tooset price facets in $10 increments, you would specify: `&facet=price,interval:10`</span></span>

<span data-ttu-id="ccb34-332">**Enfoque 2: Usar una lista de valores**</span><span class="sxs-lookup"><span data-stu-id="ccb34-332">**Approach 2: Use a values list**</span></span>  
<span data-ttu-id="ccb34-333">Para datos numéricos, puede usar una lista de valores.</span><span class="sxs-lookup"><span data-stu-id="ccb34-333">For numeric data, you can use a values list.</span></span>  <span data-ttu-id="ccb34-334">Considere la posibilidad de intervalo de faceta de Hola para un `listPrice` procesar el campo, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="ccb34-334">Consider hello facet range for a `listPrice` field, rendered as follows:</span></span>

  ![Lista de valores de ejemplo][5]

<span data-ttu-id="ccb34-336">toospecify un intervalo de faceta como Hola uno Hola anterior captura de pantalla, utilice una lista de valores:</span><span class="sxs-lookup"><span data-stu-id="ccb34-336">toospecify a facet range like hello one in hello preceding screen shot, use a values list:</span></span>

    facet=listPrice,values:10|25|100|500|1000|2500

<span data-ttu-id="ccb34-337">Cada intervalo se compila utilizando 0 como punto de partida, un valor de lista de Hola como un punto de conexión y, a continuación, se recortan de intervalos discretos de hello anterior rangos toocreate.</span><span class="sxs-lookup"><span data-stu-id="ccb34-337">Each range is built using 0 as a starting point, a value from hello list as an endpoint, and then trimmed of hello previous range toocreate discrete intervals.</span></span> <span data-ttu-id="ccb34-338">Azure Search hace esto como parte de la navegación por facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-338">Azure Search does these things as part of faceted navigation.</span></span> <span data-ttu-id="ccb34-339">No tiene código toowrite para estructurar cada intervalo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-339">You do not have toowrite code for structuring each interval.</span></span>

### <a name="build-a-filter-for-a-range"></a><span data-ttu-id="ccb34-340">Creación de un filtro para un intervalo</span><span class="sxs-lookup"><span data-stu-id="ccb34-340">Build a filter for a range</span></span>
<span data-ttu-id="ccb34-341">documentos de toofilter basadas en un intervalo que seleccione, puede usar hello `"ge"` y `"lt"` operadores en una expresión de dos partes que define los puntos de conexión de Hola de intervalo de Hola de filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-341">toofilter documents based on a range you select, you can use hello `"ge"` and `"lt"` filter operators in a two-part expression that defines hello endpoints of hello range.</span></span> <span data-ttu-id="ccb34-342">Por ejemplo, si elige Hola intervalo 10-25 para un `listPrice` campo, filtro de hello sería `$filter=listPrice ge 10 and listPrice lt 25`.</span><span class="sxs-lookup"><span data-stu-id="ccb34-342">For example, if you choose hello range 10-25 for a `listPrice` field, hello filter would be `$filter=listPrice ge 10 and listPrice lt 25`.</span></span> <span data-ttu-id="ccb34-343">En el código de ejemplo de Hola, usa la expresión de filtro de hello **priceFrom** y **priceTo** puntos de conexión de parámetros tooset Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-343">In hello sample code, hello filter expression uses **priceFrom** and **priceTo** parameters tooset hello endpoints.</span></span> 

  ![Consulta para un intervalo de valores][6]

<a name="geofacets"></a> 

## <a name="filter-based-on-distance"></a><span data-ttu-id="ccb34-345">Filtro basado en la distancia</span><span class="sxs-lookup"><span data-stu-id="ccb34-345">Filter based on distance</span></span>
<span data-ttu-id="ccb34-346">Su toosee comunes filtros que le ayudan a elegir un almacén, restaurante o un destino basándose en su ubicación actual de tooyour de proximidad.</span><span class="sxs-lookup"><span data-stu-id="ccb34-346">It’s common toosee filters that help you choose a store, restaurant, or destination based on its proximity tooyour current location.</span></span> <span data-ttu-id="ccb34-347">Aunque este tipo de filtro puede parecer una navegación por facetas, en realidad es solo un filtro.</span><span class="sxs-lookup"><span data-stu-id="ccb34-347">While this type of filter might look like faceted navigation, it’s just a filter.</span></span> <span data-ttu-id="ccb34-348">Lo mencionamos aquí para aquellos que buscan específicamente consejos de implementación para ese problema de diseño concreto.</span><span class="sxs-lookup"><span data-stu-id="ccb34-348">We mention it here for those of you who are specifically looking for implementation advice for that particular design problem.</span></span>

<span data-ttu-id="ccb34-349">Hay dos funciones geoespaciales en Azure Search, **geo.distance** y **geo.intersects**.</span><span class="sxs-lookup"><span data-stu-id="ccb34-349">There are two Geospatial functions in Azure Search, **geo.distance** and **geo.intersects**.</span></span>

* <span data-ttu-id="ccb34-350">Hola **geo.distance** función devuelve la distancia de hello en kilómetros entre dos puntos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-350">hello **geo.distance** function returns hello distance in kilometers between two points.</span></span> <span data-ttu-id="ccb34-351">Un punto es un campo y otra es una constante que se pasa como parte del filtro de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-351">One point is a field and other is a constant passed as part of hello filter.</span></span> 
* <span data-ttu-id="ccb34-352">Hola **geo.intersects** función devuelve true si un punto determinado se encuentra dentro de un polígono determinado.</span><span class="sxs-lookup"><span data-stu-id="ccb34-352">hello **geo.intersects** function returns true if a given point is within a given polygon.</span></span> <span data-ttu-id="ccb34-353">punto de Hello es un campo y Hola polígono se especifica como una lista de constante de coordenadas que se pasa como parte del filtro de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-353">hello point is a field and hello polygon is specified as a constant list of coordinates passed as part of hello filter.</span></span>

<span data-ttu-id="ccb34-354">Puede encontrar ejemplos de filtros en [Sintaxis de expresiones de OData (Búsqueda de Azure)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span><span class="sxs-lookup"><span data-stu-id="ccb34-354">You can find filter examples in [OData expression syntax (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span></span>

<a name="tryitout"></a>

## <a name="try-hello-demo"></a><span data-ttu-id="ccb34-355">Pruebe Hola demostración</span><span class="sxs-lookup"><span data-stu-id="ccb34-355">Try hello demo</span></span>
<span data-ttu-id="ccb34-356">Hola demostración de Portal de trabajo de búsqueda de Azure contiene ejemplos de hello hace referencia en este artículo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-356">hello Azure Search Job Portal Demo contains hello examples referenced in this article.</span></span>

-   <span data-ttu-id="ccb34-357">Ver y probar demostración en línea de hello trabajar en [demostración de Portal de trabajo de búsqueda de Azure](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="ccb34-357">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="ccb34-358">Descargar código de hello de hello [repositorio de ejemplos de Azure en GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="ccb34-358">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

<span data-ttu-id="ccb34-359">Cuando se trabaja con los resultados de búsqueda, vea Hola URL para los cambios en la construcción de consultas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-359">As you work with search results, watch hello URL for changes in query construction.</span></span> <span data-ttu-id="ccb34-360">Esta aplicación produce tooappend facetas toohello URI mientras selecciona cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="ccb34-360">This application happens tooappend facets toohello URI as you select each one.</span></span>

1. <span data-ttu-id="ccb34-361">funcionalidad de asignación de hello toouse de aplicación de demostración de hello, obtener una clave de mapas de Bing de hello [centro de desarrollo de mapas de Bing](https://www.bingmapsportal.com/).</span><span class="sxs-lookup"><span data-stu-id="ccb34-361">toouse hello mapping functionality of hello demo app, get a Bing Maps key from hello [Bing Maps Dev Center](https://www.bingmapsportal.com/).</span></span> <span data-ttu-id="ccb34-362">Péguela sobre clave existente de Hola Hola `index.cshtml` página.</span><span class="sxs-lookup"><span data-stu-id="ccb34-362">Paste it over hello existing key in hello `index.cshtml` page.</span></span> <span data-ttu-id="ccb34-363">Hola `BingApiKey` en hello `Web.config` no se utiliza el archivo.</span><span class="sxs-lookup"><span data-stu-id="ccb34-363">hello `BingApiKey` setting in hello `Web.config` file is not used.</span></span> 

2. <span data-ttu-id="ccb34-364">Ejecute la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="ccb34-364">Run hello application.</span></span> <span data-ttu-id="ccb34-365">Paseo opcional de Hola o descartar el cuadro de diálogo de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-365">Take hello optional tour, or dismiss hello dialog box.</span></span>
   
3. <span data-ttu-id="ccb34-366">Escriba un término de búsqueda, como "analista" y haga clic en el icono de búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-366">Enter a search term, such as "analyst", and click hello Search icon.</span></span> <span data-ttu-id="ccb34-367">consulta de Hola se ejecuta rápidamente.</span><span class="sxs-lookup"><span data-stu-id="ccb34-367">hello query executes quickly.</span></span>
   
   <span data-ttu-id="ccb34-368">También se devuelve una estructura de navegación por facetas con resultados de la búsqueda de Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-368">A faceted navigation structure is also returned with hello search results.</span></span> <span data-ttu-id="ccb34-369">En la página de resultados de búsqueda de hello, estructura de navegación por facetas de hello incluye recuentos de cada resultado de la faceta.</span><span class="sxs-lookup"><span data-stu-id="ccb34-369">In hello search result page, hello faceted navigation structure includes counts for each facet result.</span></span> <span data-ttu-id="ccb34-370">No hay facetas seleccionadas, por lo que se devuelven todos los resultados de búsqueda que coinciden.</span><span class="sxs-lookup"><span data-stu-id="ccb34-370">No facets are selected, so all matching results are returned.</span></span>
   
   ![Resultados de la búsqueda antes de seleccionar las facetas][11]

4. <span data-ttu-id="ccb34-372">Haga clic en un Business Title (cargo empresarial), Location (ubicación) o Minimum Salary (salario mínimo).</span><span class="sxs-lookup"><span data-stu-id="ccb34-372">Click a Business Title, Location, or Minimum Salary.</span></span> <span data-ttu-id="ccb34-373">Facetas eran nulos en la búsqueda inicial de hello, pero tal y como asumen los valores, los resultados de la búsqueda de Hola se recortan de elementos que ya no coinciden con.</span><span class="sxs-lookup"><span data-stu-id="ccb34-373">Facets were null on hello initial search, but as they take on values, hello search results are trimmed of items that no longer match.</span></span>
   
   ![Resultados de la búsqueda después de seleccionar las facetas][12]

5. <span data-ttu-id="ccb34-375">consulta por facetas de hello tooclear por lo que puede probar comportamientos de consulta diferente, haga clic en hello `[X]` después de hello seleccionado facetas de facetas tooclear Hola.</span><span class="sxs-lookup"><span data-stu-id="ccb34-375">tooclear hello faceted query so that you can try different query behaviors, click hello `[X]` after hello selected facets tooclear hello facets.</span></span>
   
<a name="nextstep"></a>

## <a name="learn-more"></a><span data-ttu-id="ccb34-376">Más información</span><span class="sxs-lookup"><span data-stu-id="ccb34-376">Learn more</span></span>
<span data-ttu-id="ccb34-377">Vea el vídeo de [profundización en Azure Search](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span><span class="sxs-lookup"><span data-stu-id="ccb34-377">Watch [Azure Search Deep Dive](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span></span> <span data-ttu-id="ccb34-378">En 45:25, hay una demostración acerca de cómo tooimplement facetas.</span><span class="sxs-lookup"><span data-stu-id="ccb34-378">At 45:25, there is a demo on how tooimplement facets.</span></span>

<span data-ttu-id="ccb34-379">Para más información sobre los principios de diseño para la navegación por facetas, se recomienda Hola siguientes vínculos:</span><span class="sxs-lookup"><span data-stu-id="ccb34-379">For more insights on design principles for faceted navigation, we recommend hello following links:</span></span>

* [<span data-ttu-id="ccb34-380">Diseñar para la búsqueda por facetas</span><span class="sxs-lookup"><span data-stu-id="ccb34-380">Designing for Faceted Search</span></span>](http://www.uie.com/articles/faceted_search/)
* [<span data-ttu-id="ccb34-381">Patrones de diseño: Navegación por facetas</span><span class="sxs-lookup"><span data-stu-id="ccb34-381">Design Patterns: Faceted Navigation</span></span>](http://alistapart.com/article/design-patterns-faceted-navigation)


<!--Anchors-->
[How toobuild it]: #howtobuildit
[Build hello presentation layer]: #presentationlayer
[Build hello index]: #buildindex
[Check for data quality]: #checkdata
[Build hello query]: #buildquery
[Tips on how toocontrol faceted navigation]: #tips
[Faceted navigation based on range values]: #rangefacets
[Faceted navigation based on GeoPoints]: #geofacets
[Try it out]: #tryitout

<!--Image references-->
[1]: ./media/search-faceted-navigation/azure-search-faceting-example.PNG
[2]: ./media/search-faceted-navigation/Facet-2-CSHTML.PNG
[3]: ./media/search-faceted-navigation/Facet-3-schema.PNG
[4]: ./media/search-faceted-navigation/Facet-4-SearchMethod.PNG
[5]: ./media/search-faceted-navigation/Facet-5-Prices.PNG
[6]: ./media/search-faceted-navigation/Facet-6-buildfilter.PNG
[7]: ./media/search-faceted-navigation/Facet-7-appstart.png
[8]: ./media/search-faceted-navigation/Facet-8-appbike.png
[9]: ./media/search-faceted-navigation/Facet-9-appbikefaceted.png
[10]: ./media/search-faceted-navigation/Facet-10-appTitle.png
[11]: ./media/search-faceted-navigation/faceted-search-before-facets.png
[12]: ./media/search-faceted-navigation/faceted-search-after-facets.png

<!--Link references-->
[Designing for Faceted Search]: http://www.uie.com/articles/faceted_search/
[Design Patterns: Faceted Navigation]: http://alistapart.com/article/design-patterns-faceted-navigation
[Create your first application]: search-create-first-solution.md
[OData expression syntax (Azure Search)]: http://msdn.microsoft.com/library/azure/dn798921.aspx
[Azure Search Adventure Works Demo]: https://azuresearchadventureworksdemo.codeplex.com/
[http://www.odata.org/documentation/odata-version-2-0/overview/]: http://www.odata.org/documentation/odata-version-2-0/overview/ 
[Faceting on Azure Search forum post]: ../faceting-on-azure-search.md?forum=azuresearch
[Search Documents (Azure Search API)]: http://msdn.microsoft.com/library/azure/dn798927.aspx


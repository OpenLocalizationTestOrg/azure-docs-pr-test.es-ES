---
title: "Consideraciones sobre el rendimiento y la optimización de Azure Search | Microsoft Docs"
description: "Optimización del rendimiento de Búsqueda de Azure y configuración de la escala óptima"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: f4e371fc16bc57e6963f1ec51c0ea864fa568f0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="4a6b0-103">Consideraciones sobre el rendimiento y la optimización de Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="4a6b0-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="4a6b0-104">Una buena experiencia de búsqueda es clave para el éxito de muchas aplicaciones web y móviles.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-104">A great search experience is a key to success for many mobile and web applications.</span></span> <span data-ttu-id="4a6b0-105">Desde el mercado inmobiliario al de vehículos usados o catálogos en línea, una búsqueda rápida y unos resultados pertinentes influirán en la experiencia del cliente.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-105">From real estate, to used car marketplaces to online catalogs, fast search and relevant results will affect the customer experience.</span></span> <span data-ttu-id="4a6b0-106">Este documento ofrece información sobre los procedimientos recomendados para sacar el máximo provecho de Búsqueda de Azure, especialmente en escenarios avanzados con requisitos sofisticados de escalabilidad, compatibilidad multilingüe o clasificación personalizada.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-106">This document is intended to help you discover best practices for how to get the most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="4a6b0-107">Además, este documento describe los aspectos internos y los enfoques que funcionan de forma eficaz en las aplicaciones de clientes reales.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="4a6b0-108">Rendimiento y ajuste de la escala de los servicios de Búsqueda</span><span class="sxs-lookup"><span data-stu-id="4a6b0-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="4a6b0-109">Todos estamos acostumbrados a los motores de búsqueda como Bing y Google, y al alto rendimiento que ofrecen.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-109">We are all used to search engines such as Bing and Google and the high performance they offer.</span></span>  <span data-ttu-id="4a6b0-110">Como resultado, cuando los clientes usan su aplicación móvil o web habilitada para búsqueda, esperan características de rendimiento similares.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="4a6b0-111">Para optimizar el rendimiento de la búsqueda, uno de los mejores enfoques es centrarse en la latencia, que es el tiempo que una consulta tarda en completarse y devolver resultados.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-111">When optimizing for search performance, one of the best approaches is to focus on latency, which is the time a query takes to complete and return results.</span></span>  <span data-ttu-id="4a6b0-112">Para optimizar la latencia de la búsqueda es importante:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="4a6b0-113">Seleccionar una latencia objetivo (o cantidad máxima de tiempo) que una solicitud de búsqueda típica debería tardar en completarse.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-113">Pick a target latency (or maximum amount of time) that a typical search request should take to complete.</span></span>
2. <span data-ttu-id="4a6b0-114">Crear y probar una carga de trabajo real en su servicio de búsqueda con un conjunto de datos realista para medir estas tasas de latencia.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-114">Create and test a real workload against your search service with a realistic dataset to measure these latency rates.</span></span>
3. <span data-ttu-id="4a6b0-115">Comenzar con un número reducido de consultas por segundo y continuar aumentar el número que se ejecuta en la prueba hasta que la latencia caiga por debajo de la latencia objetivo definida.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-115">Start with a low number of queries per second (QPS) and continue to increase the number executed in the test until the query latency drops below the defined target latency.</span></span>  <span data-ttu-id="4a6b0-116">Esta es una prueba comparativa importante que le ayudará a planear el escalado a medida que el uso de la aplicación crece.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-116">This is an important benchmark to help you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="4a6b0-117">Siempre que sea posible, reutilice las conexiones HTTP.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="4a6b0-118">Si usa el SDK de .NET para Búsqueda de Azure, deberá reutilizar una instancia o una instancia de [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) , y si usa la API de REST, deberá reutilizar un única instancia de HttpClient.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-118">If you are using the Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using the REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="4a6b0-119">Al crear estas cargas de trabajo de prueba, hay algunas características de Búsqueda de Azure que debe tener en cuenta:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-119">While creating these test workloads, there are some characteristics of Azure Search to keep in mind:</span></span>

1. <span data-ttu-id="4a6b0-120">Se pueden insertar tantas consultas de búsqueda al mismo tiempo que los recursos disponibles en el servicio Búsqueda de Azure podrían verse desbordados.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-120">It is possible to push so many search queries at one time, that the resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="4a6b0-121">Cuando esto sucede, verá códigos de respuesta HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="4a6b0-122">Por este motivo, es mejor empezar con varios intervalos de solicitudes de búsqueda para ver las diferencias en las tasas de latencia cuando se agreguen más solicitudes de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-122">For this reason, it is best to start with various ranges of search requests to see the differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="4a6b0-123">Cargar contenido a Búsqueda de Azure afectará el rendimiento general y a la latencia del servicio Búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-123">Uploading of content to Azure Search will impact the overall performance and latency of the Azure Search service.</span></span>  <span data-ttu-id="4a6b0-124">Si espera enviar datos mientras los usuarios están realizando búsquedas, es importante tener en cuenta esta carga de trabajo en las pruebas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-124">If you expect to send data while users are performing searches, it is important to take this workload into account in your tests.</span></span>
3. <span data-ttu-id="4a6b0-125">No todas las consultas de búsqueda tendrán los mismos niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-125">Not every search query will perform at the same performance levels.</span></span>  <span data-ttu-id="4a6b0-126">Por ejemplo, una sugerencia de búsqueda o la búsqueda de documentos normalmente se realiza más rápidamente que una consulta, con un número significativo de facetas y filtros.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="4a6b0-127">Es mejor tener en cuenta las distintas consultas que espera ver a la hora de crear las pruebas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-127">It is best to take the various queries you expect to see into account when building your tests.</span></span>  
4. <span data-ttu-id="4a6b0-128">La variación de las solicitudes de búsqueda es importante porque si ejecuta continuamente las mismas solicitudes de búsqueda, el almacenamiento en caché de los datos empezará a ofrecer un rendimiento mejor que el que se obtendría con un conjunto de consultas más dispar.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-128">Variation of search requests is important because if you continually execute the same search requests, caching of data will start to make performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="4a6b0-129">Las [pruebas de carga de Visual Studio](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) son una buena manera de realizar las pruebas comparativas porque permite ejecutar solicitudes HTTP tal y como necesite para ejecutar consultas en Azure Search, y habilita la paralelización de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way to perform your benchmark tests as it allows you to execute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="4a6b0-130">Escalado de Búsqueda de Azure para grandes volúmenes de consultas y solicitudes limitadas</span><span class="sxs-lookup"><span data-stu-id="4a6b0-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="4a6b0-131">Si recibe demasiadas solicitudes limitadas o se superan las tasas de latencia objetivo debido a una carga de consultas mayor, puede intentar reducir las tasas de latencia de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look to decrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="4a6b0-132">**Aumentar las réplicas:** Una réplica es como una copia de los datos que permite a Azure Search equilibrar la carga de solicitudes entre las diversas copias.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search to load balance requests against the multiple copies.</span></span>  <span data-ttu-id="4a6b0-133">Búsqueda de Azure administra el equilibrado de la carga y la replicación de los datos entre las réplicas, y puede modificar el número de réplicas asignado a su servicio en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter the number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="4a6b0-134">Puede asignar hasta 12 réplicas en un servicio de búsqueda estándar y 3 réplicas en un servicio de búsqueda básico.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-134">You can allocate up to 12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="4a6b0-135">Las réplicas pueden ajustarse desde [Azure Portal](search-create-service-portal.md) o [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-135">Replicas can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="4a6b0-136">**Aumentar el nivel de búsqueda:** Azure Search se ofrece con [diferentes planes](https://azure.microsoft.com/pricing/details/search/), cada uno de los cuales ofrece diferentes niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="4a6b0-137">En algunos casos, el número de consultas es tan alto que su nivel actual no puede ofrecer tasas de latencia suficientemente bajas aunque se use el máximo de réplicas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-137">In some cases, you may have so many queries that the tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.</span></span>  <span data-ttu-id="4a6b0-138">En este caso, puede considerar la posibilidad de usar uno de los niveles de búsqueda más altos, como el nivel S3 de Búsqueda de Azure, ideal para escenarios con un gran número de documentos y cargas de trabajo de consulta muy altas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-138">In this case, you may want to consider leveraging one of the higher search tiers such as the Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="4a6b0-139">Escalado de Búsqueda de Azure para consultas individuales lentas</span><span class="sxs-lookup"><span data-stu-id="4a6b0-139">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="4a6b0-140">Otro motivo por el que las tasas de latencia pueden ser lentas es una única consulta que tarda demasiado tiempo en completarse.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-140">Another reason why latency rates can be slow is from a single query taking too long to complete.</span></span>  <span data-ttu-id="4a6b0-141">En este caso, agregar réplicas no mejorará las tasas de latencia.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-141">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="4a6b0-142">En cambio, hay dos opciones disponibles:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-142">For this case there are two options available:</span></span>

1. <span data-ttu-id="4a6b0-143">**Aumentar las particiones**: Una partición es un mecanismo para dividir los datos entre recursos adicionales.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-143">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="4a6b0-144">Por este motivo, cuando se agrega una segunda partición, los datos se dividen en dos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-144">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="4a6b0-145">Una tercera partición divide el índice en tres, etc.  En algunos casos, el efecto que produce es que las consultas lentas se realizarán con más rapidez debido a la paralelización de los procesos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-145">A third partition splits your index into three, etc.  This also has the effect that in some cases, slow queries will perform faster due to the parallelization of computation.</span></span>  <span data-ttu-id="4a6b0-146">Hemos observado algunos ejemplos en los que esta paralelización funciona muy bien con consultas que tienen consultas de baja selectividad.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-146">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="4a6b0-147">Se componen de consultas que coinciden con muchos documentos o cuando el uso de facetas necesita proporcionar recuentos en una gran cantidad de documentos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-147">This consists of queries that match many documents or when faceting needs to provide counts over large numbers of documents.</span></span>  <span data-ttu-id="4a6b0-148">Como se necesita una gran cantidad de proceso para puntuar la pertinencia de los documentos o para contar el número de documentos, agregar particiones adicionales puede ayudar a proporcionar capacidad de proceso adicional.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-148">Since there is a lot of computation needed to score the relevancy of the documents or to count the numbers of documents, adding extra partitions can help to provide additional computation.</span></span>  
   
   <span data-ttu-id="4a6b0-149">Puede haber un máximo de 12 particiones en el servicio de búsqueda estándar y 1 partición en el servicio de búsqueda básico.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-149">There can be a maximum of 12 partitions in Standard search service and 1 partition in the basic search service.</span></span>  <span data-ttu-id="4a6b0-150">Las particiones pueden ajustarse desde [Azure Portal](search-create-service-portal.md) o [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-150">Partitions can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="4a6b0-151">**Límitar los campos de alta cardinalidad:** un campo de alta cardinalidad consta de un campo filtrable o de navegación por facetas que tiene un número significativo de valores únicos y, como resultado, necesita muchos recursos para procesar sus resultados.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-151">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources to compute results over.</span></span>   <span data-ttu-id="4a6b0-152">Por ejemplo, establecer un campo de identificador de producto o de descripción como filtrable o de navegación por facetas haría que fuera de alta cardinalidad ya que la mayoría de los valores de un documento a otro son únicos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-152">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of the values from document to document are unique.</span></span> <span data-ttu-id="4a6b0-153">Siempre que sea posible, limite el número de campos de alta cardinalidad.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-153">Wherever possible, limit the number of high cardinality fields.</span></span>
3. <span data-ttu-id="4a6b0-154">**Aumentar el nivel de búsqueda:** Aumentar a nivel superior de Azure Search puede ser otra manera de mejorar el rendimiento de las consultas lentas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-154">**Increase Search Tier:**  Moving up to a higher Azure Search tier can be another way to improve performance of slow queries.</span></span>  <span data-ttu-id="4a6b0-155">Cada nivel superior también proporciona CPU más rápidas y más memoria, lo que puede tener un impacto positivo en el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-155">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="4a6b0-156">Escalado para disponibilidad</span><span class="sxs-lookup"><span data-stu-id="4a6b0-156">Scaling for availability</span></span>
<span data-ttu-id="4a6b0-157">Las réplicas no solo ayudan a reducir la latencia de las consultas, sino que también permiten una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-157">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="4a6b0-158">Con una sola réplica, puede esperar que se produzcan tiempos de inactividad periódicamente debido al reinicio del servidor después de las actualizaciones de software o por otros posibles eventos de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-158">With a single replica, you should expect periodic downtime due to server reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="4a6b0-159">Como resultado, es importante tener en cuenta si la aplicación requiere alta disponibilidad de búsquedas (consultas), así como de escrituras (eventos de indexación).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-159">As a result, it is important to consider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="4a6b0-160">Búsqueda de Azure ofrece opciones de SLA en todas las ofertas de búsqueda de pago con los siguientes atributos:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-160">Azure Search offers SLA options on all the paid search offerings with the following attributes:</span></span>

* <span data-ttu-id="4a6b0-161">2 réplicas para alta disponibilidad de cargas de trabajo de solo lectura (consultas)</span><span class="sxs-lookup"><span data-stu-id="4a6b0-161">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="4a6b0-162">3 o más réplicas para alta disponibilidad de cargas de trabajo de lectura-escritura (consultas e indización)</span><span class="sxs-lookup"><span data-stu-id="4a6b0-162">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="4a6b0-163">Para más información al respecto, visite el [Acuerdo de Nivel de Servicio de Búsqueda de Azure](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-163">For more details on this, please visit the [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="4a6b0-164">Como las réplicas son copias de los datos, tener varias réplicas permite que Búsqueda de Azure realice tareas de reinicio y mantenimiento del equipo en una réplica al mismo tiempo mientras las consultas se siguen ejecutando en las otras réplicas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-164">Since replicas are copies of your data, having multiple replicas allows Azure Search to do machine reboots and maintenance against one replica at a time while allowing queries to continue to be executed against the other replicas.</span></span>  <span data-ttu-id="4a6b0-165">Por ese motivo, también deberá tener en cuenta cómo puede afectar este tiempo de inactividad a las consultas que ahora tienen que ejecutarse con una copia menos de los datos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-165">For that reason, you will also need to consider how this downtime may impact the queries that now have to be executed against one less copy of the data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="4a6b0-166">Escalado de cargas de trabajo distribuidas geográficamente y provisión de redundancia geográfica</span><span class="sxs-lookup"><span data-stu-id="4a6b0-166">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="4a6b0-167">Para las cargas de trabajo distribuidas geográficamente, encontrará que los usuarios que se encuentran lejos del centro de datos donde se hospeda el servicio Búsqueda de Azure tendrán tasas de latencia más altas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-167">For geo-distributed workloads, you will find that users located far from the data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="4a6b0-168">Por este motivo, es importante tener varios servicios de búsqueda en las regiones más próximas a estos usuarios.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-168">For this reason, it is often important to have multiple search services in regions that are in closer proximity to these users.</span></span>  <span data-ttu-id="4a6b0-169">Búsqueda de Azure no proporciona actualmente un método automatizado de índices de Búsqueda de Azure con replicación geográfica entre regiones, pero existen algunas técnicas que permiten simplificar la implementación y administración de este proceso.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-169">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple to implement and manage.</span></span> <span data-ttu-id="4a6b0-170">Se describen en las siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-170">These are outlined in the next few sections.</span></span>

<span data-ttu-id="4a6b0-171">El objetivo de un conjunto de servicios de búsqueda distribuido geográficamente es tener dos o más índices disponibles en dos o más regiones en las que un usuario se enrutará al servicio Búsqueda de Azure que proporciona la latencia más baja, tal como se muestra en este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-171">The goal of a geo-distributed set of search services is to have two or more indexes available in two or more regions where a user will be routed to the Azure Search service that provides the lowest latency as seen in this example:</span></span>

   ![Tablas de referencias cruzadas de servicios por región][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="4a6b0-173">Sincronización de los datos entre varios servicios Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="4a6b0-173">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="4a6b0-174">Hay dos opciones para mantener los servicios de búsqueda distribuidos sincronizados: usar el [indexador de Azure Search](search-indexer-overview.md) o la API de inserción (también denominada [API de REST de Azure Search](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-174">There are two options for keeping your distributed search services in sync which consist of either using the [Azure Search Indexer](search-indexer-overview.md) or the Push API (also referred to as the [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="4a6b0-175">Indexadores de Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="4a6b0-175">Azure Search Indexers</span></span>
<span data-ttu-id="4a6b0-176">Si usa el indexador de Azure Search, ya está importando los cambios de los datos desde un almacén de datos central, como Azure SQL DB o Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-176">If you are using the Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="4a6b0-177">Cuando se crea un nuevo servicio de búsqueda, puede crear también un indexador de Búsqueda de Azure para ese servicio que apunte a este mismo almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-177">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points to this same datastore.</span></span> <span data-ttu-id="4a6b0-178">De este modo, siempre que lleguen cambios nuevos al almacén de datos, los distintos indexadores los indexarán.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-178">That way, whenever new changes come into the data store, they will then be indexed by the various Indexers.</span></span>  

<span data-ttu-id="4a6b0-179">Este es un ejemplo del aspecto que podría tener esa arquitectura.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-179">Here is an example of what that architecture would look like.</span></span>

   ![Origen de datos único con indexador distribuido y combinaciones de servicios][2]

### <a name="push-api"></a><span data-ttu-id="4a6b0-181">API de inserción</span><span class="sxs-lookup"><span data-stu-id="4a6b0-181">Push API</span></span>
<span data-ttu-id="4a6b0-182">Si usa la API de inserción de Búsqueda de Azure para [actualizar el contenido de su índice de Búsqueda de Azure](https://docs.microsoft.com/rest/api/searchservice/update-index)y desea mantener sincronizados los distintos servicios de búsqueda, inserte los cambios en todos los servicios de búsqueda cada vez que se necesite una actualización.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-182">If you are using the Azure Search Push API to [update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes to all search services whenever an update is required.</span></span>  <span data-ttu-id="4a6b0-183">Al hacerlo es importante asegurarse de controlar los casos en los que se produce un error de actualización de un servicio de búsqueda y se realizan correctamente una o varias actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-183">When doing this it is important to make sure to handle cases where an update to one search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="4a6b0-184">Uso del Administrador de tráfico de Azure</span><span class="sxs-lookup"><span data-stu-id="4a6b0-184">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="4a6b0-185">[Administrador de tráfico de Azure](../traffic-manager/traffic-manager-overview.md) permite enrutar solicitudes a diversos sitios web con ubicación geográfica atendidos por distintos servicios Búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you to route requests to multiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="4a6b0-186">Una ventaja del Administrador de tráfico es que puede sondear Búsqueda de Azure para asegurarse de que está disponible y enrutar los usuarios a servicios de búsqueda alternativos en caso de tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-186">One advantage of the Traffic Manager is that it can probe Azure Search to ensure that it is available and route users to alternate search services in the event of downtime.</span></span>  <span data-ttu-id="4a6b0-187">Además, si va a enrutar solicitudes de búsqueda a través de Sitios web de Azure, el Administrador de tráfico de Azure permite equilibrar la carga de aquellos casos en los que el sitio web está activo pero Búsqueda de Azure no.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-187">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you to load balance cases where the Website is up but not Azure Search.</span></span>  <span data-ttu-id="4a6b0-188">Este es un ejemplo de una arquitectura que utiliza el Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-188">Here is an example of what the architecture that leverages Traffic Manager.</span></span>

   ![Tablas de referencias cruzadas de servicios por región con Administrador de tráfico central][3]

## <a name="monitoring-performance"></a><span data-ttu-id="4a6b0-190">Supervisión del rendimiento</span><span class="sxs-lookup"><span data-stu-id="4a6b0-190">Monitoring performance</span></span>
<span data-ttu-id="4a6b0-191">Búsqueda de Azure permite analizar y supervisar el rendimiento del servicio mediante [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-191">Azure Search offers the ability to analyze and monitor the performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="4a6b0-192">Con STA también puede registrar las operaciones de búsqueda individuales, así como las métricas agregadas en una cuenta de Almacenamiento de Azure que después puede procesarse para su análisis o verse en Power BI.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-192">Through STA, you can optionally log the individual search operations as well as aggregated metrics to an Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="4a6b0-193">Con las métricas de STA, puede revisar estadísticas de rendimiento tales como el número promedio de consultas o los tiempos de respuesta de las consultas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-193">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="4a6b0-194">Además, el registro de operaciones permite profundizar en los detalles de operaciones de búsqueda específicas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-194">In addition, the operation logging allows you to drill into details of specific search operations.</span></span>

<span data-ttu-id="4a6b0-195">STA es una herramienta valiosa para comprender las tasas de latencia desde el punto de vista de Búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-195">STA is a valuable tool to understand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="4a6b0-196">Como las métricas de rendimiento de las consultas registradas se basan en el tiempo que una consulta tarda en procesarse por completo en Búsqueda de Azure (desde el momento en que se solicita hasta que se envía), puede usarlas para determinar si los problemas de latencia se producen en el lado del servicio Búsqueda de Azure o fuera de servicio, por ejemplo, la latencia de la red.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-196">Since the query performance metrics logged are based on the time a query takes to be fully processed in Azure Search (from the time it is requested to when it is sent out), you are able to use this to determine if latency issues are from the Azure Search service side or outside of the service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="4a6b0-197">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="4a6b0-197">Next steps</span></span>
<span data-ttu-id="4a6b0-198">Para obtener más información acerca de los planes de tarifa y los límites de los servicios de cada uno de ellos, consulte [Límites de servicio en Búsqueda de Azure](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="4a6b0-198">To learn more about the pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="4a6b0-199">Consulte [Escalado de niveles de recursos para cargas de trabajo de indexación y consulta en Búsqueda de Azure](search-capacity-planning.md) para obtener ayuda para elegir las combinaciones de particiones y réplicas.</span><span class="sxs-lookup"><span data-stu-id="4a6b0-199">Visit [Capacity planning](search-capacity-planning.md) to learn more about partition and replica combinations.</span></span>

<span data-ttu-id="4a6b0-200">Para más información sobre el rendimiento y para ver algunas demostraciones sobre cómo implementar las optimizaciones que se tratan en este artículo, vea el vídeo siguiente:</span><span class="sxs-lookup"><span data-stu-id="4a6b0-200">For more drilldown on performance and to see some demonstrations of how to implement the optimizations discussed in this article, watch the following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png

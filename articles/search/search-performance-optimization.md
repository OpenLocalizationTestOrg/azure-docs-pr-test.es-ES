---
title: "Consideraciones de rendimiento y optimización de la búsqueda aaaAzure | Documentos de Microsoft"
description: "Optimización del rendimiento de Búsqueda de Azure y configuración de la escala óptima"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: 725149ba32773ab6b4c9d4b441424aba78db7c42
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="8fcc8-103">Consideraciones sobre el rendimiento y la optimización de Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="8fcc8-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="8fcc8-104">Una experiencia de búsqueda excelente es una clave toosuccess para muchos dispositivos móviles y aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-104">A great search experience is a key toosuccess for many mobile and web applications.</span></span> <span data-ttu-id="8fcc8-105">Desde la propiedad inmobiliaria, catálogos de tooused automóvil mercados tooonline, búsqueda rápida y los resultados pertinentes afectará a la experiencia del cliente hello.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-105">From real estate, tooused car marketplaces tooonline catalogs, fast search and relevant results will affect hello customer experience.</span></span> <span data-ttu-id="8fcc8-106">Este documento está previsto toohelp detectar prácticas recomendadas para cómo hello tooget máximo partido de la búsqueda de Azure, especialmente para escenarios avanzados con sofisticadas requisitos de escalabilidad, compatibilidad con varios idioma o clasificación personalizada.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-106">This document is intended toohelp you discover best practices for how tooget hello most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="8fcc8-107">Además, este documento describe los aspectos internos y los enfoques que funcionan de forma eficaz en las aplicaciones de clientes reales.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="8fcc8-108">Rendimiento y ajuste de la escala de los servicios de Búsqueda</span><span class="sxs-lookup"><span data-stu-id="8fcc8-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="8fcc8-109">Estamos todos los motores de toosearch usado como hello y Google y Bing alto rendimiento que ofrecen.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-109">We are all used toosearch engines such as Bing and Google and hello high performance they offer.</span></span>  <span data-ttu-id="8fcc8-110">Como resultado, cuando los clientes usan su aplicación móvil o web habilitada para búsqueda, esperan características de rendimiento similares.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="8fcc8-111">Al optimizar el rendimiento de la búsqueda, uno de los mejores métodos de hello es toofocus en la latencia, que es el momento de hello que una consulta toma toocomplete y devuelve los resultados.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-111">When optimizing for search performance, one of hello best approaches is toofocus on latency, which is hello time a query takes toocomplete and return results.</span></span>  <span data-ttu-id="8fcc8-112">Para optimizar la latencia de la búsqueda es importante:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="8fcc8-113">Elija una latencia de destino (o la cantidad máxima de tiempo) que una solicitud de búsqueda típicas debe tomar toocomplete.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-113">Pick a target latency (or maximum amount of time) that a typical search request should take toocomplete.</span></span>
2. <span data-ttu-id="8fcc8-114">Crear y probar una carga de trabajo real con el servicio de búsqueda con un conjunto de datos realista toomeasure estas tasas de latencia.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-114">Create and test a real workload against your search service with a realistic dataset toomeasure these latency rates.</span></span>
3. <span data-ttu-id="8fcc8-115">Comenzar con un número reducido de consultas por segundo (QPS) y continuar número de hello tooincrease ejecutado en pruebas de hello hasta que consulta Hola latencia cae por debajo de hello definido por la latencia de destino.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-115">Start with a low number of queries per second (QPS) and continue tooincrease hello number executed in hello test until hello query latency drops below hello defined target latency.</span></span>  <span data-ttu-id="8fcc8-116">Se trata de un toohelp de criterio de referencia importante que planee la escala a medida que crece la aplicación en uso.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-116">This is an important benchmark toohelp you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="8fcc8-117">Siempre que sea posible, reutilice las conexiones HTTP.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="8fcc8-118">Si usas Hola SDK de .NET de búsqueda de Azure, esto significa que se debe volver a usar una instancia o [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) de instancia y si utilizas Hola API de REST, debe volver a utilizar un único HttpClient.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-118">If you are using hello Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using hello REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="8fcc8-119">Al crear estas cargas de trabajo de prueba, hay algunas características de búsqueda de Azure tookeep en cuenta:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-119">While creating these test workloads, there are some characteristics of Azure Search tookeep in mind:</span></span>

1. <span data-ttu-id="8fcc8-120">Es posible toopush tantos las consultas de búsqueda al mismo tiempo, que se verse desbordados recursos Hola disponibles en el servicio de búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-120">It is possible toopush so many search queries at one time, that hello resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="8fcc8-121">Cuando esto sucede, verá códigos de respuesta HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="8fcc8-122">Por esta razón, es mejor toostart con varios intervalos de búsqueda solicitudes toosee Hola diferencias en las tasas de latencia a medida que agregue más solicitudes de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-122">For this reason, it is best toostart with various ranges of search requests toosee hello differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="8fcc8-123">La carga de contenido tooAzure búsqueda afectará Hola el rendimiento general y latencia de Hola servicio de búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-123">Uploading of content tooAzure Search will impact hello overall performance and latency of hello Azure Search service.</span></span>  <span data-ttu-id="8fcc8-124">Si espera toosend datos mientras los usuarios son realizar búsquedas, es importante tootake esta carga de trabajo en cuenta en las pruebas.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-124">If you expect toosend data while users are performing searches, it is important tootake this workload into account in your tests.</span></span>
3. <span data-ttu-id="8fcc8-125">No todas las consultas búsqueda llevará a cabo en hello mismo los niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-125">Not every search query will perform at hello same performance levels.</span></span>  <span data-ttu-id="8fcc8-126">Por ejemplo, una sugerencia de búsqueda o la búsqueda de documentos normalmente se realiza más rápidamente que una consulta, con un número significativo de facetas y filtros.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="8fcc8-127">Es mejor hello tootake varias consultas que espera toosee a tener en cuenta al crear las pruebas.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-127">It is best tootake hello various queries you expect toosee into account when building your tests.</span></span>  
4. <span data-ttu-id="8fcc8-128">Variación de las solicitudes de búsqueda es importante porque si se ejecuta continuamente Hola mismo solicitudes de búsqueda, almacenamiento en caché de datos de rendimiento de inicio toomake será mejor que se podría con una consulta más dispares establecido.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-128">Variation of search requests is important because if you continually execute hello same search requests, caching of data will start toomake performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="8fcc8-129">[Pruebas de carga de Visual Studio](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) es un tooperform de manera realmente buenos la prueba comparativa prueba ya que permite las solicitudes de tooexecute HTTP como necesite para ejecutar consultas de búsqueda de Azure y habilita la paralelización de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way tooperform your benchmark tests as it allows you tooexecute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="8fcc8-130">Escalado de Búsqueda de Azure para grandes volúmenes de consultas y solicitudes limitadas</span><span class="sxs-lookup"><span data-stu-id="8fcc8-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="8fcc8-131">Cuando se están recibiendo demasiadas solicitudes limitadas o superan las tarifas de latencia de destino de una carga de consulta, puede consultar las tasas de latencia de toodecrease en uno de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look toodecrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="8fcc8-132">**Réplicas de aumento:** una réplica puede considerarse como una copia de los datos que permite a las solicitudes de saldo de búsqueda de Azure tooload contra Hola varias copias.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search tooload balance requests against hello multiple copies.</span></span>  <span data-ttu-id="8fcc8-133">Todo el equilibrio de carga y administra la replicación de datos entre réplicas de búsqueda de Azure y puede modificar el número de Hola de réplicas asignado para su servicio en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter hello number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="8fcc8-134">Puede asignar la too12 réplicas en un servicio de búsqueda estándar y 3 réplicas en un servicio de búsqueda básica.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-134">You can allocate up too12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="8fcc8-135">Las réplicas pueden ser ajustado desde hello [portal de Azure](search-create-service-portal.md) o [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-135">Replicas can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="8fcc8-136">**Aumentar el nivel de búsqueda:** Azure Search se ofrece con [diferentes planes](https://azure.microsoft.com/pricing/details/search/), cada uno de los cuales ofrece diferentes niveles de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="8fcc8-137">En algunos casos, puede tener tantas consultas ese nivel de hello en no puede proporcionar velocidades lo suficientemente baja latencia, incluso cuando se sobrepasa réplicas.  En este caso, puede que desee tooconsider aprovechar uno de niveles superiores de búsqueda hello como nivel de S3 de búsqueda de Azure de Hola que es adecuada para escenarios con un gran número de documentos y las cargas de trabajo de consultas extremadamente alto.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-137">In some cases, you may have so many queries that hello tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.  In this case, you may want tooconsider leveraging one of hello higher search tiers such as hello Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="8fcc8-138">Escalado de Búsqueda de Azure para consultas individuales lentas</span><span class="sxs-lookup"><span data-stu-id="8fcc8-138">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="8fcc8-139">Otro motivo por qué las tasas de latencia pueden ser lentas es de una única consulta toma toocomplete demasiado larga.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-139">Another reason why latency rates can be slow is from a single query taking too long toocomplete.</span></span>  <span data-ttu-id="8fcc8-140">En este caso, agregar réplicas no mejorará las tasas de latencia.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-140">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="8fcc8-141">En cambio, hay dos opciones disponibles:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-141">For this case there are two options available:</span></span>

1. <span data-ttu-id="8fcc8-142">**Aumentar las particiones**: Una partición es un mecanismo para dividir los datos entre recursos adicionales.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-142">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="8fcc8-143">Por este motivo, cuando se agrega una segunda partición, los datos se dividen en dos.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-143">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="8fcc8-144">Una tercera partición divide el índice en tres, etc.  Este enfoque también tiene el efecto de Hola que en algunos casos, las consultas lentas llevará a cabo con mayor rapidez debido toohello paralelización de cálculo.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-144">A third partition splits your index into three, etc.  This also has hello effect that in some cases, slow queries will perform faster due toohello parallelization of computation.</span></span>  <span data-ttu-id="8fcc8-145">Hemos observado algunos ejemplos en los que esta paralelización funciona muy bien con consultas que tienen consultas de baja selectividad.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-145">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="8fcc8-146">Esto consta de las consultas que coinciden con muchos documentos o cuando necesita facetas tooprovide las estadísticas en un gran número de documentos.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-146">This consists of queries that match many documents or when faceting needs tooprovide counts over large numbers of documents.</span></span>  <span data-ttu-id="8fcc8-147">Dado que no hay que una gran cantidad de cálculo necesarios pertinencia de hello tooscore de documentos de Hola o números de hello toocount de documentos, agregar particiones adicionales pueden ayudar a cálculo adicionales tooprovide.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-147">Since there is a lot of computation needed tooscore hello relevancy of hello documents or toocount hello numbers of documents, adding extra partitions can help tooprovide additional computation.</span></span>  
   
   <span data-ttu-id="8fcc8-148">Puede haber un máximo de 12 particiones en el servicio de búsqueda estándar y 1 partición de servicio de búsqueda básica hello.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-148">There can be a maximum of 12 partitions in Standard search service and 1 partition in hello basic search service.</span></span>  <span data-ttu-id="8fcc8-149">Las particiones se pueden ajustar desde hello [portal de Azure](search-create-service-portal.md) o [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-149">Partitions can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="8fcc8-150">**Campos de cardinalidad alta de límite:** un campo de cardinalidad alta consta de un facetable o un campo filtrable que tiene un número significativo de valores únicos y como resultado, tiene una gran cantidad de recursos toocompute resultados sobre.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-150">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources toocompute results over.</span></span>   <span data-ttu-id="8fcc8-151">Por ejemplo, establecer un campo de Id. de producto o la descripción como facetable/filtrables haría para una cardinalidad alta porque la mayoría de los valores de hello de toodocument de documento es única.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-151">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of hello values from document toodocument are unique.</span></span> <span data-ttu-id="8fcc8-152">Siempre que sea posible, limitar número de Hola de campos de cardinalidad alta.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-152">Wherever possible, limit hello number of high cardinality fields.</span></span>
3. <span data-ttu-id="8fcc8-153">**Aumento del nivel de búsqueda:** mover hacia arriba tooa mayor nivel de búsqueda de Azure puede ser otro rendimiento tooimprove de modo de consultas de ejecución lenta.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-153">**Increase Search Tier:**  Moving up tooa higher Azure Search tier can be another way tooimprove performance of slow queries.</span></span>  <span data-ttu-id="8fcc8-154">Cada nivel superior también proporciona CPU más rápidas y más memoria, lo que puede tener un impacto positivo en el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-154">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="8fcc8-155">Escalado para disponibilidad</span><span class="sxs-lookup"><span data-stu-id="8fcc8-155">Scaling for availability</span></span>
<span data-ttu-id="8fcc8-156">Las réplicas no solo ayudan a reducir la latencia de las consultas, sino que también permiten una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-156">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="8fcc8-157">Con una única réplica debe esperar tiempos de inactividad periódicamente debido tooserver reinicios después de las actualizaciones de software o para otros eventos de mantenimiento que se producirán.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-157">With a single replica, you should expect periodic downtime due tooserver reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="8fcc8-158">Como resultado, es importante tooconsider si la aplicación requiere alta disponibilidad de las búsquedas (consultas), así como de escritura (eventos indización).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-158">As a result, it is important tooconsider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="8fcc8-159">Búsqueda de Azure ofrece opciones de SLA en todos los Hola ofertas de búsqueda de pago con hello siguientes atributos:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-159">Azure Search offers SLA options on all hello paid search offerings with hello following attributes:</span></span>

* <span data-ttu-id="8fcc8-160">2 réplicas para alta disponibilidad de cargas de trabajo de solo lectura (consultas)</span><span class="sxs-lookup"><span data-stu-id="8fcc8-160">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="8fcc8-161">3 o más réplicas para alta disponibilidad de cargas de trabajo de lectura-escritura (consultas e indización)</span><span class="sxs-lookup"><span data-stu-id="8fcc8-161">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="8fcc8-162">Para obtener más detalles sobre esto, visite hello [contrato de nivel de servicio de búsqueda de Azure](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-162">For more details on this, please visit hello [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="8fcc8-163">Puesto que las réplicas son copias de los datos, tener varias réplicas permite reinicios de máquina de toodo de búsqueda de Azure y mantenimiento en una réplica a la vez al permitir que las consultas toobe toocontinue ejecutada en Hola otras réplicas.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-163">Since replicas are copies of your data, having multiple replicas allows Azure Search toodo machine reboots and maintenance against one replica at a time while allowing queries toocontinue toobe executed against hello other replicas.</span></span>  <span data-ttu-id="8fcc8-164">Por esta razón, también necesitará tooconsider cómo podría afectar a las consultas de Hola que ahora están toobe ejecutada en una copia de datos de hello menos este tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-164">For that reason, you will also need tooconsider how this downtime may impact hello queries that now have toobe executed against one less copy of hello data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="8fcc8-165">Escalado de cargas de trabajo distribuidas geográficamente y provisión de redundancia geográfica</span><span class="sxs-lookup"><span data-stu-id="8fcc8-165">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="8fcc8-166">Para las cargas de trabajo distribuidas geográficamente, encontrará que los usuarios encuentran muy alejado del centro de datos de Hola donde se hospeda el servicio de búsqueda de Azure tendrá mayores tasas de latencia.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-166">For geo-distributed workloads, you will find that users located far from hello data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="8fcc8-167">Por este motivo, a menudo resulta importante toohave búsqueda varios servicios en las zonas que están en cuanto más se acerque a los usuarios toothese de proximidad.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-167">For this reason, it is often important toohave multiple search services in regions that are in closer proximity toothese users.</span></span>  <span data-ttu-id="8fcc8-168">Búsqueda de Azure no proporciona actualmente un método automatizado de los índices de búsqueda de Azure de replicación geográfica entre regiones, pero hay algunas técnicas que pueden usarse que pueden realizar esta tooimplement simple de proceso y administrar.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-168">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple tooimplement and manage.</span></span> <span data-ttu-id="8fcc8-169">Se describen en hello siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-169">These are outlined in hello next few sections.</span></span>

<span data-ttu-id="8fcc8-170">objetivo de un conjunto de servicios de búsqueda distribuidos geográficamente Hello es toohave dos o más índices disponibles en dos o más regiones donde un usuario será enrutan toohello servicio de búsqueda de Azure que proporciona la latencia más baja de hello tal como se muestra en este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-170">hello goal of a geo-distributed set of search services is toohave two or more indexes available in two or more regions where a user will be routed toohello Azure Search service that provides hello lowest latency as seen in this example:</span></span>

   ![Tablas de referencias cruzadas de servicios por región][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="8fcc8-172">Sincronización de los datos entre varios servicios Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="8fcc8-172">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="8fcc8-173">Hay dos opciones para mantener los servicios de búsqueda distribuida sincronizados que constan de usando hello [indizador de búsqueda de Azure](search-indexer-overview.md) u Hola API de inserción (también denominada hello tooas [API de REST de búsqueda de Azure](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-173">There are two options for keeping your distributed search services in sync which consist of either using hello [Azure Search Indexer](search-indexer-overview.md) or hello Push API (also referred tooas hello [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="8fcc8-174">Indexadores de Búsqueda de Azure</span><span class="sxs-lookup"><span data-stu-id="8fcc8-174">Azure Search Indexers</span></span>
<span data-ttu-id="8fcc8-175">Si usas Hola indizador de búsqueda de Azure, ya va a importar los cambios de datos desde un almacén de datos central como base de datos de SQL Azure o base de datos de Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-175">If you are using hello Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="8fcc8-176">Cuando se crea una nueva búsqueda servicio, simplemente crear un nuevo indizador de búsqueda de Azure para ese servicio ese toothis puntos mismo almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-176">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points toothis same datastore.</span></span> <span data-ttu-id="8fcc8-177">De este modo, cada vez que proceden de nuevos cambios en el almacén de datos de hello, a continuación, estarán indizado por hello varios indizadores.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-177">That way, whenever new changes come into hello data store, they will then be indexed by hello various Indexers.</span></span>  

<span data-ttu-id="8fcc8-178">Este es un ejemplo del aspecto que podría tener esa arquitectura.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-178">Here is an example of what that architecture would look like.</span></span>

   ![Origen de datos único con indexador distribuido y combinaciones de servicios][2]

### <a name="push-api"></a><span data-ttu-id="8fcc8-180">API de inserción</span><span class="sxs-lookup"><span data-stu-id="8fcc8-180">Push API</span></span>
<span data-ttu-id="8fcc8-181">Si utilizas Hola API de inserción de búsqueda de Azure demasiado[actualizar contenido en el índice de búsqueda de Azure](https://docs.microsoft.com/rest/api/searchservice/update-index), puede mantener sincronizados los distintos servicios de búsqueda mediante la aplicación de servicios de búsqueda de tooall de cambios cada vez que se requiere una actualización.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-181">If you are using hello Azure Search Push API too[update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes tooall search services whenever an update is required.</span></span>  <span data-ttu-id="8fcc8-182">Al hacer esto es importante toomake seguro toohandle casos donde se produce un error en un servicio de búsqueda de tooone de actualización y realice correctamente una o varias actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-182">When doing this it is important toomake sure toohandle cases where an update tooone search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="8fcc8-183">Uso del Administrador de tráfico de Azure</span><span class="sxs-lookup"><span data-stu-id="8fcc8-183">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="8fcc8-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) permite tooroute solicitudes toomultiple ubicados geográficamente sitios Web que, a continuación, está respaldados por varios servicios de búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you tooroute requests toomultiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="8fcc8-185">Una ventaja de hello Traffic Manager es que puede sondear tooensure de búsqueda de Azure que está disponible y enrutar servicios de búsqueda de los usuarios tooalternate en caso de hello de tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-185">One advantage of hello Traffic Manager is that it can probe Azure Search tooensure that it is available and route users tooalternate search services in hello event of downtime.</span></span>  <span data-ttu-id="8fcc8-186">Además, si va a enrutar las solicitudes de búsqueda a través de los sitios Web, Azure Traffic Manager permite casos de saldo tooload donde el sitio Web de hello está activo pero no la búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-186">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you tooload balance cases where hello Website is up but not Azure Search.</span></span>  <span data-ttu-id="8fcc8-187">Este es un ejemplo de la arquitectura de Hola que aprovecha el Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-187">Here is an example of what hello architecture that leverages Traffic Manager.</span></span>

   ![Tablas de referencias cruzadas de servicios por región con Administrador de tráfico central][3]

## <a name="monitoring-performance"></a><span data-ttu-id="8fcc8-189">Supervisión del rendimiento</span><span class="sxs-lookup"><span data-stu-id="8fcc8-189">Monitoring performance</span></span>
<span data-ttu-id="8fcc8-190">Búsqueda de Azure ofrece Hola capacidad tooanalyze y supervisar Hola el rendimiento de su servicio a través de [análisis de tráfico de búsqueda (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-190">Azure Search offers hello ability tooanalyze and monitor hello performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="8fcc8-191">A través de STA, puede registrar opcionalmente las operaciones de búsqueda individuales de hello, así como la cuenta de almacenamiento de Azure de tooan de métricas agregadas que, a continuación, se procesan para el análisis o visualizar en Power BI.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-191">Through STA, you can optionally log hello individual search operations as well as aggregated metrics tooan Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="8fcc8-192">Con las métricas de STA, puede revisar estadísticas de rendimiento tales como el número promedio de consultas o los tiempos de respuesta de las consultas.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-192">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="8fcc8-193">Además, el registro de operaciones de hello permite toodrill en los detalles de las operaciones de búsqueda específico.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-193">In addition, hello operation logging allows you toodrill into details of specific search operations.</span></span>

<span data-ttu-id="8fcc8-194">STA es una valiosa herramienta toounderstand latencia los índices de esa perspectiva de búsqueda de Azure.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-194">STA is a valuable tool toounderstand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="8fcc8-195">Puesto que registran las métricas de rendimiento de la consulta de Hola se basan en tiempo de hello una consulta toma toobe procesado totalmente en búsqueda de Azure (desde el momento de hello es toowhen solicitado enviarse), es capaz de toouse esta toodetermine si hay problemas de latencia de hello servicio Búsqueda de Azure lado o fuera de Hola service, por ejemplo, de latencia de red.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-195">Since hello query performance metrics logged are based on hello time a query takes toobe fully processed in Azure Search (from hello time it is requested toowhen it is sent out), you are able toouse this toodetermine if latency issues are from hello Azure Search service side or outside of hello service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="8fcc8-196">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8fcc8-196">Next steps</span></span>
<span data-ttu-id="8fcc8-197">toolearn más información acerca de hello precios niveles y los límites de servicios para cada una de ellas, consulte [límites en la búsqueda de Azure del servicio](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="8fcc8-197">toolearn more about hello pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="8fcc8-198">Visite [planeamiento de capacidad](search-capacity-planning.md) toolearn más información acerca de las combinaciones de partición y la réplica.</span><span class="sxs-lookup"><span data-stu-id="8fcc8-198">Visit [Capacity planning](search-capacity-planning.md) toolearn more about partition and replica combinations.</span></span>

<span data-ttu-id="8fcc8-199">Para obtener más detalles sobre el rendimiento y toosee algunas demostraciones de cómo tooimplement Hola optimizaciones descritos en este artículo, vea Hola después de vídeo:</span><span class="sxs-lookup"><span data-stu-id="8fcc8-199">For more drilldown on performance and toosee some demonstrations of how tooimplement hello optimizations discussed in this article, watch hello following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png

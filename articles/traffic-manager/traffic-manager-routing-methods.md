---
title: "los métodos de enrutamiento de tráfico de Traffic Manager - aaaAzure | Documentos de Microsoft"
description: "En este artículo le ayudará a que comprender los métodos de enrutamiento de tráfico distintos de hello utilizados por el Administrador de tráfico"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="b7df9-103">Métodos de enrutamiento del Administrador de tráfico</span><span class="sxs-lookup"><span data-stu-id="b7df9-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="b7df9-104">Azure Traffic Manager admite cuatro enrutamiento del tráfico métodos toodetermine cómo tooroute red tráfico toohello varios extremos de servicio.</span><span class="sxs-lookup"><span data-stu-id="b7df9-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="b7df9-105">El Administrador de tráfico aplica Hola enrutamiento del tráfico método tooeach DNS consulta recibe.</span><span class="sxs-lookup"><span data-stu-id="b7df9-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="b7df9-106">método de enrutamiento del tráfico de Hello determina qué extremo se devuelve en respuesta DNS de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="b7df9-107">En Traffic Manager, hay cuatro métodos de enrutamiento de tráfico disponibles:</span><span class="sxs-lookup"><span data-stu-id="b7df9-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="b7df9-108">**[Prioridad](#priority):** seleccione **prioridad** cuando desee toouse un extremo de servicio principal para todo el tráfico y proporcionar copias de seguridad en caso de hello principal o los puntos de conexión de copia de seguridad de hello no están disponibles.</span><span class="sxs-lookup"><span data-stu-id="b7df9-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="b7df9-109">**[Weighted](#weighted):** seleccione **Weighted** cuando desee toodistribute tráfico a través de un conjunto de extremos, ya sea uniformemente o tooweights correspondiente, que se define.</span><span class="sxs-lookup"><span data-stu-id="b7df9-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="b7df9-110">**[Rendimiento](#performance):** seleccione **rendimiento** cuando tenga extremos en diferentes ubicaciones geográficas y desea que los usuarios finales toouse Hola "más cercano" punto de conexión en términos de latencia de red más baja de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="b7df9-111">**[Geográfico](#geographic):** seleccione **geográfica** para que los usuarios son dirigidos toospecific puntos de conexión (Azure, externas o Nested) según qué ubicación geográfica su consulta DNS se origina en.</span><span class="sxs-lookup"><span data-stu-id="b7df9-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="b7df9-112">Esto permite a los escenarios de tooenable de los clientes de Traffic Manager donde es importante conocer la región geográfica de un usuario y enrutarlos en base a eso.</span><span class="sxs-lookup"><span data-stu-id="b7df9-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="b7df9-113">Algunos ejemplos incluyen cumplir los mandatos de soberanía de datos, la localización del contenido y de la experiencia del usuario, y la medición del tráfico de otras regiones.</span><span class="sxs-lookup"><span data-stu-id="b7df9-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="b7df9-114">Todos los perfiles de Traffic Manager incluyen supervisión del estado y conmutación por error automática del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="b7df9-115">Para más información, consulte [Acerca de la supervisión del Administrador de tráfico](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="b7df9-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="b7df9-116">Con un único perfil de Administrador de tráfico solo se puede usar un método de enrutamiento de tráfico.</span><span class="sxs-lookup"><span data-stu-id="b7df9-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="b7df9-117">El método de enrutamiento de tráfico para el perfil se puede cambiar en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="b7df9-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="b7df9-118">Los cambios se aplican en un minuto, sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="b7df9-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="b7df9-119">Los métodos de enrutamiento de tráfico se pueden combinar mediante perfiles anidados del Administrador de tráfico.</span><span class="sxs-lookup"><span data-stu-id="b7df9-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="b7df9-120">El anidamiento permite sofisticadas y flexibles configuraciones de enrutamiento del tráfico que satisfagan las necesidades de Hola de aplicaciones grandes y complejas.</span><span class="sxs-lookup"><span data-stu-id="b7df9-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="b7df9-121">Para más información, consulte [Nested Traffic Manager profiles](traffic-manager-nested-profiles.md)(Perfiles anidados de Administrador de tráfico).</span><span class="sxs-lookup"><span data-stu-id="b7df9-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="b7df9-122"><a name = "priority"></a>Método de enrutamiento de tráfico Prioridad</span><span class="sxs-lookup"><span data-stu-id="b7df9-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="b7df9-123">A menudo una organización desea tooprovide confiabilidad para sus servicios mediante la implementación de uno o más servicios de copia de seguridad en caso de que el servicio principal deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="b7df9-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="b7df9-124">método Hello enrutamiento de tráfico "Prioridad" permite a Azure tooeasily clientes implementan este patrón de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="b7df9-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Método de enrutamiento de tráfico de "prioridad" de Azure Traffic Manager][1]

<span data-ttu-id="b7df9-126">Hola perfil de Traffic Manager contiene una lista de prioridades de los extremos de servicio.</span><span class="sxs-lookup"><span data-stu-id="b7df9-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="b7df9-127">De forma predeterminada, Traffic Manager envía todo tráfico toohello (prioridad más alta) punto de conexión primario.</span><span class="sxs-lookup"><span data-stu-id="b7df9-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="b7df9-128">Si no hay ningún punto de conexión principal de hello, rutas de Traffic Manager Hola toohello segundo extremo de tráfico.</span><span class="sxs-lookup"><span data-stu-id="b7df9-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="b7df9-129">Si ambos extremos de hello principales y secundarias no están disponibles, el tráfico de hello dirige toohello en tercer lugar, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="b7df9-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="b7df9-130">Disponibilidad de punto de conexión de Hola se basa en el estado de hello configurado (habilitado o deshabilitado) y Hola supervisión continuada del extremo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="b7df9-131">Configuración de puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="b7df9-131">Configuring endpoints</span></span>

<span data-ttu-id="b7df9-132">Con el Administrador de recursos de Azure, configurar la prioridad de punto de conexión de hello explícitamente con propiedad de 'priority' hello para cada extremo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="b7df9-133">Esta propiedad es un valor comprendido entre 1 y 1000.</span><span class="sxs-lookup"><span data-stu-id="b7df9-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="b7df9-134">Los valores más bajos representan una prioridad más alta.</span><span class="sxs-lookup"><span data-stu-id="b7df9-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="b7df9-135">Los puntos de conexión no pueden compartir valores de prioridad.</span><span class="sxs-lookup"><span data-stu-id="b7df9-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="b7df9-136">Establecer propiedad de hello es opcional.</span><span class="sxs-lookup"><span data-stu-id="b7df9-136">Setting hello property is optional.</span></span> <span data-ttu-id="b7df9-137">Cuando se omite, se usa una prioridad predeterminada basada en el orden de punto de conexión de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="b7df9-138"><a name = "weighted"></a>Método de enrutamiento de tráfico Ponderado</span><span class="sxs-lookup"><span data-stu-id="b7df9-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="b7df9-139">método Hello enrutamiento de tráfico 'Weighted' permite el tráfico toodistribute uniformemente o toouse una ponderación predefinido.</span><span class="sxs-lookup"><span data-stu-id="b7df9-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Método de enrutamiento de tráfico "ponderado" de Azure Traffic Manager][2]

<span data-ttu-id="b7df9-141">En el método de enrutamiento de tráfico ponderado de hello, se pueden asignar un punto de conexión de tooeach de peso en la configuración de perfil de Traffic Manager de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="b7df9-142">peso de Hello es un entero entre 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="b7df9-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="b7df9-143">Este parámetro es opcional.</span><span class="sxs-lookup"><span data-stu-id="b7df9-143">This parameter is optional.</span></span> <span data-ttu-id="b7df9-144">Si se omite, Traffic Manager usará un peso predeterminado de '1'.</span><span class="sxs-lookup"><span data-stu-id="b7df9-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="b7df9-145">Para cada consulta de DNS recibida, Traffic Manager elegirá aleatoriamente un punto de conexión disponible.</span><span class="sxs-lookup"><span data-stu-id="b7df9-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="b7df9-146">probabilidad de Hola de elegir un punto de conexión se basa en pesos Hola asignados tooall puntos de conexión disponibles.</span><span class="sxs-lookup"><span data-stu-id="b7df9-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="b7df9-147">Usar Hola mismo peso a través de todos los resultados de los puntos de conexión en una distribución de tráfico incluso.</span><span class="sxs-lookup"><span data-stu-id="b7df9-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="b7df9-148">Mediante valores ponderados mayores o menores en puntos de conexión concretos hace que esos toobe extremos devuelven mayor o menor frecuencia en las respuestas DNS de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="b7df9-149">método Hello ponderada habilita algunos escenarios útiles:</span><span class="sxs-lookup"><span data-stu-id="b7df9-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="b7df9-150">Actualización gradual de la aplicación: asignar un porcentaje del tráfico tooroute tooa nuevo punto de conexión y aumentar gradualmente el tráfico de hello superar % de tiempo too100.</span><span class="sxs-lookup"><span data-stu-id="b7df9-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="b7df9-151">TooAzure de migración de aplicaciones: crear un perfil con extremos de Azure y externos.</span><span class="sxs-lookup"><span data-stu-id="b7df9-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="b7df9-152">Ajustar el peso de Hola de hello extremos tooprefer Hola nuevos puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="b7df9-153">Irrupción en la nube para obtener capacidad adicional: expanda rápidamente una implementación de local en la nube de hello colocándola detrás de un perfil de Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="b7df9-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="b7df9-154">Cuando necesite capacidad adicional en la nube de hello, puede agregar o habilitar varios puntos de conexión y especificar qué parte del tráfico queda tooeach extremo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="b7df9-155">Hola portal de Azure Resource Manager admite la configuración de Hola de enrutamiento del tráfico ponderado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="b7df9-156">Puede configurar pesos con versiones de administrador de recursos de Hola de PowerShell de Azure, CLI, hello y las API de REST.</span><span class="sxs-lookup"><span data-stu-id="b7df9-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="b7df9-157">Es importante toounderstand que las respuestas DNS se almacenan en caché los clientes y servidores DNS de hello recursiva que Hola los clientes usan nombres DNS de tooresolve.</span><span class="sxs-lookup"><span data-stu-id="b7df9-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="b7df9-158">Este almacenamiento en caché puede tener un impacto en las distribuciones de tráfico ponderadas.</span><span class="sxs-lookup"><span data-stu-id="b7df9-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="b7df9-159">Cuando el número de Hola de clientes y servidores DNS recursivas es grande, una distribución del tráfico funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="b7df9-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="b7df9-160">Sin embargo, cuando el número de Hola de clientes o servidores DNS recursivas es pequeño, el almacenamiento en caché puede sesgar significativamente una distribución del tráfico Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="b7df9-161">Entre los casos de uso comunes se incluye:</span><span class="sxs-lookup"><span data-stu-id="b7df9-161">Common use cases include:</span></span>

* <span data-ttu-id="b7df9-162">Entornos de desarrollo y pruebas</span><span class="sxs-lookup"><span data-stu-id="b7df9-162">Development and testing environments</span></span>
* <span data-ttu-id="b7df9-163">Comunicaciones de aplicación a aplicación</span><span class="sxs-lookup"><span data-stu-id="b7df9-163">Application-to-application communications</span></span>
* <span data-ttu-id="b7df9-164">Las aplicaciones dirigidas a una base de usuarios estrecha que comparten una infraestructura DNS recursiva común (por ejemplo, los empleados de la empresa que se conectan a través de un proxy)</span><span class="sxs-lookup"><span data-stu-id="b7df9-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="b7df9-165">Estos efectos de almacenamiento en caché de DNS son comunes tooall tráfico basado en DNS enrutamiento sistemas, no solo el Administrador de tráfico de Azure.</span><span class="sxs-lookup"><span data-stu-id="b7df9-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="b7df9-166">En algunos casos, borrar explícitamente Hola memoria caché de DNS puede proporcionar una solución alternativa.</span><span class="sxs-lookup"><span data-stu-id="b7df9-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="b7df9-167">En otros, puede resultar más adecuado el uso de un método de enrutamiento de tráfico alternativo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="b7df9-168"><a name = "performance"></a>Método de enrutamiento de tráfico Rendimiento</span><span class="sxs-lookup"><span data-stu-id="b7df9-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="b7df9-169">Implementar puntos de conexión en dos o más ubicaciones en todo el mundo de hello puede mejorar la capacidad de respuesta de Hola de muchas aplicaciones por enrutamiento tráfico toohello ubicación tooyou "más cercano".</span><span class="sxs-lookup"><span data-stu-id="b7df9-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="b7df9-170">el método de enrutamiento de tráfico 'Rendimiento' Hello proporciona esta capacidad.</span><span class="sxs-lookup"><span data-stu-id="b7df9-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Método de enrutamiento de tráfico de "rendimiento" de Azure Traffic Manager][3]

<span data-ttu-id="b7df9-172">punto de conexión "más cercano" Hello no es necesariamente más cercano, medido por la distancia geográfica.</span><span class="sxs-lookup"><span data-stu-id="b7df9-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="b7df9-173">En su lugar, el método de enrutamiento de tráfico 'Rendimiento' hello determina extremo más cercano de Hola medir la latencia de red.</span><span class="sxs-lookup"><span data-stu-id="b7df9-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="b7df9-174">El Administrador de tráfico mantiene un tiempo de ida y vuelta tabla de latencia de Internet tootrack Hola entre los intervalos de direcciones IP y cada centro de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="b7df9-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="b7df9-175">Traffic Manager busca la dirección IP de origen Hola de solicitud DNS entrante Hola Hola tabla de latencia de Internet.</span><span class="sxs-lookup"><span data-stu-id="b7df9-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="b7df9-176">Administrador de tráfico se elige un punto de conexión disponible en hello Azure centro de datos que tiene una latencia más baja de Hola para ese intervalo de direcciones IP y luego devuelve ese punto de conexión en hello respuesta DNS.</span><span class="sxs-lookup"><span data-stu-id="b7df9-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="b7df9-177">Como se explica en [Cómo funciona Traffic Manager](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager no recibe consultas de DNS directamente desde los clientes.</span><span class="sxs-lookup"><span data-stu-id="b7df9-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="b7df9-178">En su lugar, las consultas DNS proceden de hello recursiva DNS de servicio que los clientes de hello son toouse configurado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="b7df9-179">Por lo tanto, hello IP dirección usada toodetermine hello "más cercano" extremo no es dirección IP del cliente de hello, pero es Hola dirección IP del servicio DNS recursivas Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="b7df9-180">En la práctica, esta dirección IP es un buen proxy para cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="b7df9-181">El Administrador de tráfico con regularidad actualizaciones Hola tooaccount de tabla de latencia de Internet para los cambios en Hola Internet global y regiones de Azure nuevo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="b7df9-182">Sin embargo, rendimiento de la aplicación varía según las variaciones en tiempo real de carga a través de Internet de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="b7df9-183">El enrutamiento de tráfico de rendimiento no supervisa la carga en un punto de conexión de servicio determinado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="b7df9-184">Sin embargo, si un punto de conexión no está disponible, Traffic Manager no lo incluye en las respuestas a las consultas de DNS.</span><span class="sxs-lookup"><span data-stu-id="b7df9-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="b7df9-185">Toonote puntos:</span><span class="sxs-lookup"><span data-stu-id="b7df9-185">Points toonote:</span></span>

* <span data-ttu-id="b7df9-186">Si el perfil contiene varios puntos de conexión en Hola misma región de Azure, a continuación, el Administrador de tráfico distribuye el tráfico uniformemente entre los extremos disponibles de hello en dicha región.</span><span class="sxs-lookup"><span data-stu-id="b7df9-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="b7df9-187">Si prefiere una distribución de tráfico diferente dentro de una región, puede usar los [perfiles anidados de Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="b7df9-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="b7df9-188">Si habilita puntos de conexión de hello más cercano región de Azure son degradado, Traffic Manager mueve los puntos de conexión de toohello de tráfico en la región de Azure más cercana siguiente Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="b7df9-189">Si desea toodefine una secuencia preferido de conmutación por error, use [anidados perfiles de Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="b7df9-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="b7df9-190">Cuando use el método de enrutamiento de tráfico de rendimiento de Hola con extremos externos o extremos anidados, debe toospecify ubicación de Hola de esos puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="b7df9-191">Elija la implementación de tooyour más cercano de hello región de Azure.</span><span class="sxs-lookup"><span data-stu-id="b7df9-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="b7df9-192">Esas ubicaciones son valores de hello admitidos Hola tabla de latencia de Internet.</span><span class="sxs-lookup"><span data-stu-id="b7df9-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="b7df9-193">algoritmo de Hola que elige el punto de conexión de hello es determinista.</span><span class="sxs-lookup"><span data-stu-id="b7df9-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="b7df9-194">Repetir las consultas DNS de hello es del mismo cliente dirigen toohello mismo punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="b7df9-195">Normalmente, los clientes utilizan servidores DNS recursivos diferentes durante su recorrido.</span><span class="sxs-lookup"><span data-stu-id="b7df9-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="b7df9-196">cliente de Hello puede ser enrutado tooa otro extremo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="b7df9-197">Enrutamiento también puede verse afectado por las actualizaciones toohello tabla de latencia de Internet.</span><span class="sxs-lookup"><span data-stu-id="b7df9-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="b7df9-198">Por lo tanto, Hola rendimiento método de enrutamiento del tráfico no garantiza que siempre es un cliente enruta toohello mismo punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="b7df9-199">Cuando se cambia el Hola tabla de latencia de Internet, puede observar que algunos clientes sean dirigidas tooa otro extremo.</span><span class="sxs-lookup"><span data-stu-id="b7df9-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="b7df9-200">Este cambio de enrutamiento es más adecuado en función de los datos de latencia actuales.</span><span class="sxs-lookup"><span data-stu-id="b7df9-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="b7df9-201">Estas actualizaciones son la precisión de hello toomaintain esenciales de tráfico de enrutamiento de rendimiento como Hola que Internet evolucione continuamente.</span><span class="sxs-lookup"><span data-stu-id="b7df9-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="b7df9-202"><a name = "geographic"></a>Método de enrutamiento de tráfico Geográfico</span><span class="sxs-lookup"><span data-stu-id="b7df9-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="b7df9-203">Perfiles de Traffic Manager pueden ser hello toouse configurado geográfico método de enrutamiento para que los usuarios son dirigidos a los puntos de conexión de toospecific (Azure, externo o Nested) en función de qué ubicación geográfica su consulta DNS se origina en.</span><span class="sxs-lookup"><span data-stu-id="b7df9-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="b7df9-204">Esto permite a los escenarios de tooenable de los clientes de Traffic Manager donde es importante conocer la región geográfica de un usuario y enrutarlos en base a eso.</span><span class="sxs-lookup"><span data-stu-id="b7df9-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="b7df9-205">Algunos ejemplos incluyen cumplir los mandatos de soberanía de datos, la localización del contenido y de la experiencia del usuario, y la medición del tráfico de otras regiones.</span><span class="sxs-lookup"><span data-stu-id="b7df9-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="b7df9-206">Cuando se configura un perfil para el enrutamiento geográfico, cada punto de conexión asociados a que el perfil debe toohave un conjunto de regiones geográficas asignadas tooit.</span><span class="sxs-lookup"><span data-stu-id="b7df9-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="b7df9-207">Una región geográfica puede estar en los siguientes niveles de granularidad</span><span class="sxs-lookup"><span data-stu-id="b7df9-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="b7df9-208">Mundo: cualquier región</span><span class="sxs-lookup"><span data-stu-id="b7df9-208">World– any region</span></span>
- <span data-ttu-id="b7df9-209">Agrupación regional: por ejemplo, África, Oriente Medio, Australia/Pacífico, etc.</span><span class="sxs-lookup"><span data-stu-id="b7df9-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="b7df9-210">País o región: p. ej., Irlanda, Perú, Hong Kong (RAE), etc.</span><span class="sxs-lookup"><span data-stu-id="b7df9-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="b7df9-211">Estado o provincia: p. ej., Estados Unidos-California, Australia-Queensland, etc. (este nivel de granularidad solo se admite en estados o provincias de Australia, Canadá, Reino Unido y Estados Unidos).</span><span class="sxs-lookup"><span data-stu-id="b7df9-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="b7df9-212">Cuando tooan extremo se asigna a una región o un conjunto de regiones, las solicitudes de esas regiones obtiene enrutado extremo toothat única.</span><span class="sxs-lookup"><span data-stu-id="b7df9-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="b7df9-213">Administrador de tráfico usa la dirección IP de origen Hola de hello DNS consulta toodetermine Hola región desde la que se consulta un usuario desde: normalmente se trata de dirección IP de Hola de resolución DNS local Hola realizar consultas de hello en nombre de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Método de enrutamiento del tráfico "geográfico" de Azure Traffic Manager](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="b7df9-215">Traffic Manager lee la dirección IP de origen Hola de consulta DNS de Hola y decide qué región geográfica que se originan desde.</span><span class="sxs-lookup"><span data-stu-id="b7df9-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="b7df9-216">Después, busca toosee si hay un punto de conexión que tiene este tooit de región geográfica asignado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="b7df9-217">Esta búsqueda se inicia en el nivel de granularidad más bajo de hello (estado o provincia donde se admite, qué más sitios en el nivel de país/región Hola) y pasa todos los Hola ascendiendo toohello nivel más alto, que es **World**.</span><span class="sxs-lookup"><span data-stu-id="b7df9-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="b7df9-218">Hola primera coincidencia utilizando este recorrido se designa como tooreturn de punto de conexión de Hola en respuesta a la consulta Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="b7df9-219">En el caso de coincidencia con un punto de conexión de tipo Anidado, se devolverá un punto de conexión de dicho perfil secundario, en función de su método de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="b7df9-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="b7df9-220">Hola siguientes puntos es aplicables toothis comportamiento:</span><span class="sxs-lookup"><span data-stu-id="b7df9-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="b7df9-221">Una región geográfica puede ser asignado extremo de tooone sólo en un perfil de Traffic Manager cuando el tipo de enrutamiento de hello es enrutamiento geográfico.</span><span class="sxs-lookup"><span data-stu-id="b7df9-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="b7df9-222">Esto garantiza que el enrutamiento de los usuarios es determinista y que los clientes pueden habilitar escenarios que requieran límites geográficos inequívocos.</span><span class="sxs-lookup"><span data-stu-id="b7df9-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="b7df9-223">Si región del usuario entra asignación geográfica de los extremos diferentes en dos, el Administrador de tráfico selecciona el punto de conexión de hello con granularidad más baja de hello y no considere la posibilidad de enrutar las solicitudes de esa región toohello otro punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="b7df9-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="b7df9-224">Ejemplo: considere un perfil del tipo enrutamiento Geográfico con dos puntos de conexión, Punto de conexión 1 y Punto de conexión 2.</span><span class="sxs-lookup"><span data-stu-id="b7df9-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="b7df9-225">Se configura Endpoint1 tooreceive tráfico de Irlanda y Endpoint2 se configura tooreceive tráfico de Europa.</span><span class="sxs-lookup"><span data-stu-id="b7df9-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="b7df9-226">Si una solicitud se origina desde Irlanda, siempre es tooEndpoint1 enrutado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="b7df9-227">Puesto que una región puede ser el extremo de tooone sólo asignada, Traffic Manager devuelve independientemente de si el punto de conexión de hello es correcto o no.</span><span class="sxs-lookup"><span data-stu-id="b7df9-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="b7df9-228">Se recomienda encarecidamente que los clientes que usan el método de enrutamiento geográfico hello asociarlo con extremos de tipo anidadas de Hola que tenga los perfiles secundarios que contiene al menos dos puntos de conexión dentro de cada.</span><span class="sxs-lookup"><span data-stu-id="b7df9-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="b7df9-229">Si se encuentra una coincidencia de punto de conexión y ese punto de conexión está en hello **detenido** estado, Traffic Manager devuelve una respuesta NODATA.</span><span class="sxs-lookup"><span data-stu-id="b7df9-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="b7df9-230">En este caso, no se realiza ninguna búsquedas más más arriba en la jerarquía de la región geográfica de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="b7df9-231">Este comportamiento también es aplicable para los tipos anidados del punto de conexión cuando el perfil de secundarios de Hola Hola **detenido** o **deshabilitado** estado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="b7df9-232">Si un punto de conexión muestra un **deshabilitado** estado, no se incluirán en el proceso de coincidencia de región de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="b7df9-233">Este comportamiento también es aplicable para los tipos anidados del punto de conexión al extremo de hello tiene hello **deshabilitado** estado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="b7df9-234">Si una consulta procede de una región geográfica que no tiene ninguna asignación en dicho perfil, Traffic Manager devolverá una respuesta NODATA.</span><span class="sxs-lookup"><span data-stu-id="b7df9-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="b7df9-235">Por lo tanto, se recomienda encarecidamente que los clientes utilicen enrutamiento geográfico con un punto de conexión, lo ideal es que del tipo anidado con al menos dos extremos de perfil de secundarios de hello, con la región de hello **World** asignado tooit.</span><span class="sxs-lookup"><span data-stu-id="b7df9-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="b7df9-236">Esto también garantiza que todas las direcciones IP que no se asignen tooa región se administran.</span><span class="sxs-lookup"><span data-stu-id="b7df9-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="b7df9-237">Como se explica en [Cómo funciona Traffic Manager](traffic-manager-how-traffic-manager-works.md), Traffic Manager no recibe consultas de DNS directamente desde los clientes.</span><span class="sxs-lookup"><span data-stu-id="b7df9-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="b7df9-238">En su lugar, las consultas DNS proceden de hello recursiva DNS de servicio que los clientes de hello son toouse configurado.</span><span class="sxs-lookup"><span data-stu-id="b7df9-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="b7df9-239">Por lo tanto, Hola IP dirección usada toodetermine Hola región no es Hola dirección IP del cliente, pero es dirección IP de hello del servicio DNS recursivas de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="b7df9-240">En la práctica, esta dirección IP es un buen proxy para cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="b7df9-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="b7df9-241">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="b7df9-241">Next steps</span></span>

<span data-ttu-id="b7df9-242">Obtenga información acerca de cómo las aplicaciones de alta disponibilidad de toodevelop con [supervisión de extremos de Traffic Manager](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="b7df9-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="b7df9-243">Obtenga información acerca de cómo demasiado[crear un perfil de Traffic Manager](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="b7df9-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png




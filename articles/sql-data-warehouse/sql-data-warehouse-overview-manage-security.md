---
title: "una base de datos en el almacén de datos de SQL aaaSecure | Documentos de Microsoft"
description: Sugerencias para proteger una base de datos en Almacenamiento de datos SQL de Azure para desarrollar soluciones.
services: sql-data-warehouse
documentationcenter: NA
author: ronortloff
manager: jhubbard
editor: 
ms.assetid: 8fa2f5ca-4cf5-4418-99a2-4dc745799850
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: security
ms.date: 10/31/2016
ms.author: rortloff;barbkess
ms.openlocfilehash: 5ef4d760e00be46bfe7808bc95dbe1e4b3a51165
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="secure-a-database-in-sql-data-warehouse"></a><span data-ttu-id="4e5fb-103">Proteger una base de datos en Almacenamiento de datos SQL</span><span class="sxs-lookup"><span data-stu-id="4e5fb-103">Secure a database in SQL Data Warehouse</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="4e5fb-104">Información general sobre seguridad</span><span class="sxs-lookup"><span data-stu-id="4e5fb-104">Security Overview</span></span>](sql-data-warehouse-overview-manage-security.md)
> * [<span data-ttu-id="4e5fb-105">Autenticación</span><span class="sxs-lookup"><span data-stu-id="4e5fb-105">Authentication</span></span>](sql-data-warehouse-authentication.md)
> * [<span data-ttu-id="4e5fb-106">Cifrado (Portal)</span><span class="sxs-lookup"><span data-stu-id="4e5fb-106">Encryption (Portal)</span></span>](sql-data-warehouse-encryption-tde.md)
> * [<span data-ttu-id="4e5fb-107">Cifrado (T-SQL)</span><span class="sxs-lookup"><span data-stu-id="4e5fb-107">Encryption (T-SQL)</span></span>](sql-data-warehouse-encryption-tde-tsql.md)
> 
> 

<span data-ttu-id="4e5fb-108">Este artículo le guía a través de los conceptos básicos de Hola de protección de la base de datos de almacenamiento de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-108">This article walks through hello basics of securing your Azure SQL Data Warehouse database.</span></span> <span data-ttu-id="4e5fb-109">En concreto, este artículo le ayudará a empezar a trabajar con los recursos para limitar el acceso, proteger los datos y supervisar las actividades en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-109">In particular, this article will get you started with resources for limiting access, protecting data, and monitoring activities on a database.</span></span>

## <a name="connection-security"></a><span data-ttu-id="4e5fb-110">Seguridad de conexión</span><span class="sxs-lookup"><span data-stu-id="4e5fb-110">Connection security</span></span>
<span data-ttu-id="4e5fb-111">Seguridad de conexión hace referencia toohow restringir y proteger las conexiones de base de datos tooyour con el cifrado de conexión y las reglas de firewall.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-111">Connection Security refers toohow you restrict and secure connections tooyour database using firewall rules and connection encryption.</span></span>

<span data-ttu-id="4e5fb-112">Las reglas de Firewall se utilizan por ambos Hola hello y servidor de base de datos tooreject intentos de conexión desde direcciones IP que no han sido explícitamente en la lista blanca.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-112">Firewall rules are used by both hello server and hello database tooreject connection attempts from IP addresses that have not been explicitly whitelisted.</span></span> <span data-ttu-id="4e5fb-113">tooallow las conexiones de la aplicación o la dirección IP pública del equipo cliente, primero debe crear una regla de firewall de nivel de servidor mediante Hola Portal de Azure, API de REST o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-113">tooallow connections from your application or client machine's public IP address, you must first create a server-level firewall rule using hello Azure Portal, REST API, or PowerShell.</span></span> <span data-ttu-id="4e5fb-114">Como práctica recomendada, debe restringir los intervalos de direcciones IP de hello permitidos a través del firewall de servidor tanto como sea posibles.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-114">As a best practice, you should restrict hello IP address ranges allowed through your server firewall as much as possible.</span></span>  <span data-ttu-id="4e5fb-115">tooaccess almacenamiento de datos de SQL Azure desde el equipo local, asegúrese de firewall de hello en la red y el equipo local permita la comunicación saliente en el puerto TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-115">tooaccess Azure SQL Data Warehouse from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>  <span data-ttu-id="4e5fb-116">Para obtener más información, consulte [Firewall de Azure SQL Database][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule] y [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-116">For more information, see [Azure SQL Database firewall][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule], and [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span></span>

<span data-ttu-id="4e5fb-117">Las conexiones tooyour almacenamiento de datos SQL se cifran de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-117">Connections tooyour SQL Data Warehouse are encrypted by default.</span></span>  <span data-ttu-id="4e5fb-118">Modificar toodisable de configuración de conexión se omiten el cifrado.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-118">Modifying connection settings toodisable encryption are ignored.</span></span>

## <a name="authentication"></a><span data-ttu-id="4e5fb-119">Autenticación</span><span class="sxs-lookup"><span data-stu-id="4e5fb-119">Authentication</span></span>
<span data-ttu-id="4e5fb-120">La autenticación refiere toohow demostrar su identidad cuando se conecta la base de datos de toohello.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-120">Authentication refers toohow you prove your identity when connecting toohello database.</span></span> <span data-ttu-id="4e5fb-121">Actualmente, Almacenamiento de datos SQL admite la autenticación de SQL Server con un nombre de usuario y una contraseña, además de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-121">SQL Data Warehouse currently supports SQL Server Authentication with a username and password as well as a Azure Active Directory.</span></span> 

<span data-ttu-id="4e5fb-122">Cuando crea el servidor lógico de hello para la base de datos, especificar un inicio de sesión de "administrador del servidor" con un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-122">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="4e5fb-123">Estas credenciales se puede autenticar tooany base de datos en ese servidor como propietario de la base de datos de Hola o "dbo" a través de la autenticación de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-123">Using these credentials, you can authenticate tooany database on that server as hello database owner, or "dbo" through SQL Server Authentication.</span></span>

<span data-ttu-id="4e5fb-124">Sin embargo, como práctica recomendada, los usuarios de su organización deben usar una cuenta diferente tooauthenticate.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-124">However, as a best practice, your organization’s users should use a different account tooauthenticate.</span></span> <span data-ttu-id="4e5fb-125">De esta forma, puede limitar los permisos de hello concedidos toohello aplicación y reducir los riesgos de Hola de actividad malintencionada en caso de que el código de aplicación es vulnerable tooa ataque de inyección de SQL.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-125">This way you can limit hello permissions granted toohello application and reduce hello risks of malicious activity in case your application code is vulnerable tooa SQL injection attack.</span></span> 

<span data-ttu-id="4e5fb-126">toocreate un usuario autenticado de SQL Server, conecte toohello **maestro** en el servidor con su inicio de sesión de administrador del servidor de base de datos y crear un nuevo inicio de sesión de servidor.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-126">toocreate a SQL Server Authenticated user, connect toohello **master** database on your server with your server admin login and create a new server login.</span></span>  <span data-ttu-id="4e5fb-127">Además, es un toocreate buena idea un usuario en la base de datos maestra de Hola para los usuarios de almacenamiento de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-127">Additionally, it is a good idea toocreate a user in hello master database for Azure SQL Data Warehouse users.</span></span> <span data-ttu-id="4e5fb-128">La creación de un usuario en master permite un toologin de usuario con herramientas como SSMS sin especificar un nombre de base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-128">Creating a user in master allows a user toologin using tools like SSMS without specifying a database name.</span></span>  <span data-ttu-id="4e5fb-129">También les permite toouse Hola objeto explorer tooview todas las bases de datos en un servidor SQL server.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-129">It also allows them toouse hello object explorer tooview all databases on a SQL server.</span></span>

```sql
-- Connect toomaster database and create a login
CREATE LOGIN ApplicationLogin WITH PASSWORD = 'Str0ng_password';
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="4e5fb-130">A continuación, conecte tooyour **base de datos de almacenamiento de datos SQL** con su inicio de sesión de administrador del servidor y crear un usuario de base de datos en función de inicio de sesión de servidor de Hola que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-130">Then, connect tooyour **SQL Data Warehouse database** with your server admin login and create a database user based on hello server login you just created.</span></span>

```sql
-- Connect tooSQL DW database and create a database user
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="4e5fb-131">Si un usuario a realizar operaciones adicionales, como crear inicios de sesión o crear nuevas bases de datos, también necesitará toobe asignado toohello `Loginmanager` y `dbmanager` roles de base de datos maestra Hola.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-131">If a user will be doing additional operations such as creating logins or creating new databases, they will also need toobe assigned toohello `Loginmanager` and `dbmanager` roles in hello master database.</span></span> <span data-ttu-id="4e5fb-132">Para obtener más información sobre estas funciones adicionales y tooa autenticación de base de datos SQL, consulte [administrar bases de datos y los inicios de sesión en la base de datos de SQL Azure][Managing databases and logins in Azure SQL Database].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-132">For more information on these additonal roles and authenticating tooa SQL Database, see [Managing databases and logins in Azure SQL Database][Managing databases and logins in Azure SQL Database].</span></span>  <span data-ttu-id="4e5fb-133">Para obtener más detalles sobre Azure AD para almacenamiento de datos SQL, consulte [conectar tooSQL datos almacenamiento mediante Active Directory autenticación de Azure][Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-133">For more details on Azure AD for SQL Data Warehouse, see [Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication][Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication].</span></span>

## <a name="authorization"></a><span data-ttu-id="4e5fb-134">Autorización</span><span class="sxs-lookup"><span data-stu-id="4e5fb-134">Authorization</span></span>
<span data-ttu-id="4e5fb-135">La autorización refiere toowhat que puede realizar en una base de datos de almacenamiento de datos de SQL Azure, y esto se controla mediante los permisos y pertenencias a roles de la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-135">Authorization refers toowhat you can do within an Azure SQL Data Warehouse database, and this is controlled by your user account's role memberships and permissions.</span></span> <span data-ttu-id="4e5fb-136">Como práctica recomendada, debe conceder Hola usuarios privilegios mínimos necesarios.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-136">As a best practice, you should grant users hello least privileges necessary.</span></span> <span data-ttu-id="4e5fb-137">Almacenamiento de datos de SQL Azure hace que esta toomanage fácil con roles de T-SQL:</span><span class="sxs-lookup"><span data-stu-id="4e5fb-137">Azure SQL Data Warehouse makes this easy toomanage with roles in T-SQL:</span></span>

```sql
EXEC sp_addrolemember 'db_datareader', 'ApplicationUser'; -- allows ApplicationUser tooread data
EXEC sp_addrolemember 'db_datawriter', 'ApplicationUser'; -- allows ApplicationUser toowrite data
```

<span data-ttu-id="4e5fb-138">cuenta de administrador de servidor de saludo con que se está conectando es un miembro de db_owner, que tiene autoridad toodo cualquier elemento dentro de la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-138">hello server admin account you are connecting with is a member of db_owner, which has authority toodo anything within hello database.</span></span> <span data-ttu-id="4e5fb-139">Guarde esta cuenta para implementar las actualizaciones de los esquemas y otras operaciones de administración.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-139">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="4e5fb-140">Usar cuenta de "ApplicationUser" hello con más limitada tooconnect de permisos de la base de datos de aplicación toohello con hello privilegios mínimos necesarios para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-140">Use hello "ApplicationUser" account with more limited permissions tooconnect from your application toohello database with hello least privileges needed by your application.</span></span>

<span data-ttu-id="4e5fb-141">Existen formas toofurther límite lo que un usuario puede hacer con la base de datos de SQL Azure:</span><span class="sxs-lookup"><span data-stu-id="4e5fb-141">There are ways toofurther limit what a user can do with Azure SQL Database:</span></span>

* <span data-ttu-id="4e5fb-142">Granular [permisos] [ Permissions] permiten control qué operaciones puede en columnas individuales, tablas, vistas, procedimientos y otros objetos de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-142">Granular [Permissions][Permissions] let you control which operations you can do on individual columns, tables, views, procedures, and other objects in hello database.</span></span> <span data-ttu-id="4e5fb-143">Use permisos granulares toohave Hola mayor control y otorgue Hola mínimos permisos necesarios.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-143">Use granular permissions toohave hello most control and grant hello minimum permissions necessary.</span></span> <span data-ttu-id="4e5fb-144">sistema de permisos granulares de Hello es complicado y requerirá algunos toouse práctico de forma eficaz.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-144">hello granular permission system is somewhat complicated and will require some study toouse effectively.</span></span>
* <span data-ttu-id="4e5fb-145">[Roles de base de datos] [ Database roles] distinto db_datareader y db_datawriter pueden ser usado toocreate menos eficaces cuentas de administración o cuentas de usuario de aplicación más eficaces.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-145">[Database roles][Database roles] other than db_datareader and db_datawriter can be used toocreate more powerful application user accounts or less powerful management accounts.</span></span> <span data-ttu-id="4e5fb-146">roles de base de datos fijos integrados de Hello proporcionan una manera sencilla los permisos toogrant, pero pueden dar lugar a conceder más permisos que son necesarios.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-146">hello built-in fixed database roles provide an easy way toogrant permissions, but can result in granting more permissions than are necessary.</span></span>
* <span data-ttu-id="4e5fb-147">[Procedimientos almacenados] [ Stored procedures] puede ser usado toolimit acciones de Hola que pueden realizarse en la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-147">[Stored procedures][Stored procedures] can be used toolimit hello actions that can be taken on hello database.</span></span>

<span data-ttu-id="4e5fb-148">Administrar bases de datos y servidores lógicos de hello Portal de Azure clásico o usar Hola API del Administrador de recursos de Azure se controla mediante asignaciones de roles de su cuenta de usuario del portal.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-148">Managing databases and logical servers from hello Azure Classic Portal or using hello Azure Resource Manager API is controlled by your portal user account's role assignments.</span></span> <span data-ttu-id="4e5fb-149">Para obtener más información sobre este tema, consulte [Control de acceso basado en roles en Azure Portal][Role-based access control in Azure Portal].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-149">For more information on this topic, see [Role-based access control in Azure Portal][Role-based access control in Azure Portal].</span></span>

## <a name="encryption"></a><span data-ttu-id="4e5fb-150">Cifrado</span><span class="sxs-lookup"><span data-stu-id="4e5fb-150">Encryption</span></span>
<span data-ttu-id="4e5fb-151">Azure SQL datos de almacenamiento de datos cifrado transparente (TDE) ayuda a protegerse contra amenazas de Hola de actividad malintencionada mediante la realización de cifrado en tiempo real y el descifrado de los datos en reposo.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-151">Azure SQL Data Warehouse Transparent Data Encryption (TDE) helps protect against hello threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span>  <span data-ttu-id="4e5fb-152">Al cifrar la base de datos, sin necesidad de las aplicaciones de tooyour de cambios se cifran los archivos de registro de transacciones y copias de seguridad asociadas.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-152">When you encrypt your database, associated backups and transaction log files are encrypted without requiring any changes tooyour applications.</span></span> <span data-ttu-id="4e5fb-153">TDE cifra almacenamiento Hola de toda una base de datos mediante el uso de una clave de cifrado de base de datos de hello llamado de clave simétrica.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-153">TDE encrypts hello storage of an entire database by using a symmetric key called hello database encryption key.</span></span> <span data-ttu-id="4e5fb-154">En la base de datos SQL clave de cifrado de base de datos de hello está protegido por un certificado de servidor integrado.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-154">In SQL Database hello database encryption key is protected by a built-in server certificate.</span></span> <span data-ttu-id="4e5fb-155">certificado de servidor integrado de Hello es único para cada servidor de base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-155">hello built-in server certificate is unique for each SQL Database server.</span></span> <span data-ttu-id="4e5fb-156">Microsoft alterna automáticamente estos certificados al menos cada 90 días.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-156">Microsoft automatically rotates these certificates at least every 90 days.</span></span> <span data-ttu-id="4e5fb-157">algoritmo de cifrado de Hello usado por el almacenamiento de datos SQL es AES-256.</span><span class="sxs-lookup"><span data-stu-id="4e5fb-157">hello encryption algorithm used by SQL Data Warehouse is AES-256.</span></span> <span data-ttu-id="4e5fb-158">Para ver una descripción general de TDE, consulte [Cifrado de datos transparente (TDE)][Transparent Data Encryption].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-158">For a general description of TDE, see [Transparent Data Encryption][Transparent Data Encryption].</span></span>

<span data-ttu-id="4e5fb-159">Puede cifrar la base de datos mediante hello [Portal de Azure] [ Encryption with Portal] o [T-SQL][Encryption with TSQL].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-159">You can encrypt your database using hello [Azure Portal][Encryption with Portal] or [T-SQL][Encryption with TSQL].</span></span>

## <a name="next-steps"></a><span data-ttu-id="4e5fb-160">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="4e5fb-160">Next steps</span></span>
<span data-ttu-id="4e5fb-161">Para obtener más información y ejemplos sobre la conexión tooyour almacenamiento de datos de SQL con diferentes protocolos, vea [conectar tooSQL Data Warehouse][Connect tooSQL Data Warehouse].</span><span class="sxs-lookup"><span data-stu-id="4e5fb-161">For details and examples on connecting tooyour SQL Data Warehouse with different protocols, see [Connect tooSQL Data Warehouse][Connect tooSQL Data Warehouse].</span></span>

<!--Image references-->

<!--Article references-->
[Connect tooSQL Data Warehouse]: ./sql-data-warehouse-connect-overview.md
[Encryption with Portal]: ./sql-data-warehouse-encryption-tde.md
[Encryption with TSQL]: ./sql-data-warehouse-encryption-tde-tsql.md
[Connecting tooSQL Data Warehouse By Using Azure Active Directory Authentication]: ./sql-data-warehouse-authentication.md

<!--MSDN references-->
[Azure SQL Database firewall]: https://msdn.microsoft.com/library/ee621782.aspx
[sp_set_firewall_rule]: https://msdn.microsoft.com/library/dn270017.aspx
[sp_set_database_firewall_rule]: https://msdn.microsoft.com/library/dn270010.aspx
[Database roles]: https://msdn.microsoft.com/library/ms189121.aspx
[Managing databases and logins in Azure SQL Database]: https://msdn.microsoft.com/library/ee336235.aspx
[Permissions]: https://msdn.microsoft.com/library/ms191291.aspx
[Stored procedures]: https://msdn.microsoft.com/library/ms190782.aspx
[Transparent Data Encryption]: https://msdn.microsoft.com/library/bb934049.aspx
[Azure portal]: https://portal.azure.com/

<!--Other Web references-->
[Role-based access control in Azure Portal]: https://azure.microsoft.com/documentation/articles/role-based-access-control-configure

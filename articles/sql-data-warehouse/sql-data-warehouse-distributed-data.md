---
title: "Cómo funcionan los datos distribuidos en Azure SQL Data Warehouse | Microsoft Docs"
description: "Obtenga información sobre cómo se distribuyen los datos para el procesamiento paralelo masivo (MPP) y las opciones de distribución de tablas de SQL Data Warehouse y Almacenamiento de datos paralelos de Azure."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 3c166acb17193caae32d7bad133ec510ff679353
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="a6b88-103">Datos distribuidos y tablas distribuidas para el procesamiento paralelo masivo (MPP)</span><span class="sxs-lookup"><span data-stu-id="a6b88-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="a6b88-104">Obtenga información sobre cómo se distribuyen los datos de usuario en SQL Data Warehouse y Almacenamiento de datos paralelos de Azure, que son sistemas de procesamiento paralelo masivo (MPP) de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a6b88-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="a6b88-105">Diseñar el almacenamiento de datos de tal forma que se utilicen los datos distribuidos de forma eficaz ayuda a lograr las ventajas de la arquitectura MPP de procesamiento de consultas.</span><span class="sxs-lookup"><span data-stu-id="a6b88-105">Designing your data warehouse to use distributed data effectively helps you to achieve the query processing benefits of the MPP architecture.</span></span> <span data-ttu-id="a6b88-106">Algunas opciones de diseño de bases de datos pueden mejorar de manera significativa el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="a6b88-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="a6b88-107">SQL Data Warehouse y Almacenamiento de datos paralelos de Azure utilizan el mismo diseño de procesamiento paralelo masivo (MPP), aunque con algunas diferencias debidas a la plataforma subyacente.</span><span class="sxs-lookup"><span data-stu-id="a6b88-107">Azure SQL Data Warehouse and Parallel Data Warehouse use the same Massively Parallel Processing (MPP) design, but they have a few differences because of the underlying platform.</span></span> <span data-ttu-id="a6b88-108">SQL Data Warehouse es una plataforma como servicio (PaaS) que se ejecuta en Azure.</span><span class="sxs-lookup"><span data-stu-id="a6b88-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="a6b88-109">Almacenamiento de datos paralelos se ejecuta en Analytics Platform System (APS), que es una aplicación local que se ejecuta en Windows Server.</span><span class="sxs-lookup"><span data-stu-id="a6b88-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="a6b88-110">¿Qué son los datos distribuidos?</span><span class="sxs-lookup"><span data-stu-id="a6b88-110">What is distributed data?</span></span>
<span data-ttu-id="a6b88-111">En SQL Data Warehouse y Almacenamiento de datos paralelos, el término datos distribuidos se refiere a los datos de usuario que están almacenados en diversas ubicaciones del sistema MPP.</span><span class="sxs-lookup"><span data-stu-id="a6b88-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers to user data that is stored in multiple locations across the MPP system.</span></span> <span data-ttu-id="a6b88-112">Cada una de estas ubicaciones actúa como una unidad de almacenamiento y procesamiento independiente que ejecuta consultas en la parte de los datos que le corresponde.</span><span class="sxs-lookup"><span data-stu-id="a6b88-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of the data.</span></span> <span data-ttu-id="a6b88-113">Los datos distribuidos son fundamentales para ejecutar consultas en paralelo con un rendimiento elevado.</span><span class="sxs-lookup"><span data-stu-id="a6b88-113">Distributed data is fundamental to running queries in parallel to achieve high query performance.</span></span>

<span data-ttu-id="a6b88-114">Para distribuir los datos, el almacenamiento de datos asigna cada fila de una tabla de usuario a una ubicación distribuida.</span><span class="sxs-lookup"><span data-stu-id="a6b88-114">To distribute data, the data warehouse assigns each row of a user table to one distributed location.</span></span>  <span data-ttu-id="a6b88-115">También pueden distribuirse las tablas con un método de distribución basado en una función hash o con un método round robin.</span><span class="sxs-lookup"><span data-stu-id="a6b88-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="a6b88-116">El método de distribución se especifica en la instrucción CREATE TABLE.</span><span class="sxs-lookup"><span data-stu-id="a6b88-116">The distribution method is specified in the CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="a6b88-117">Tablas distribuidas mediante una función hash</span><span class="sxs-lookup"><span data-stu-id="a6b88-117">Hash-distributed tables</span></span>
<span data-ttu-id="a6b88-118">El siguiente diagrama muestra cómo se almacena una tabla completa (no distribuida) como una tabla distribuida mediante una función hash.</span><span class="sxs-lookup"><span data-stu-id="a6b88-118">The following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="a6b88-119">Una función determinista asigna cada fila de manera que pertenezca a una distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-119">A deterministic function assigns each row to belong to one distribution.</span></span> <span data-ttu-id="a6b88-120">En la definición de tabla, una de las columnas se designa como columna de distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-120">In the table definition, one of the columns is designated as the distribution column.</span></span> <span data-ttu-id="a6b88-121">La función hash utiliza el valor de la columna de distribución para asignar cada fila a una distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-121">The hash function uses the value in the distribution column to assign each row to a distribution.</span></span>

<span data-ttu-id="a6b88-122">Es preciso tener en cuenta consideraciones de rendimiento al seleccionar una columna de distribución, tales como la diferenciación, la asimetría de datos o los tipos de consultas se ejecutan en el sistema.</span><span class="sxs-lookup"><span data-stu-id="a6b88-122">There are performance considerations for the selection of a distribution column, such as distinctness, data skew, and the types of queries run on the system.</span></span>

<span data-ttu-id="a6b88-123">![Tabla distribuida](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Tabla distribuida")</span><span class="sxs-lookup"><span data-stu-id="a6b88-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="a6b88-124">Cada fila pertenece a una distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-124">Each row belongs to one distribution.</span></span>  
* <span data-ttu-id="a6b88-125">Un algoritmo hash determinista asigna cada fila a una distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-125">A deterministic hash algorithm assigns each row to one distribution.</span></span>  
* <span data-ttu-id="a6b88-126">El número de filas de la tabla por cada distribución varía, lo que se hace patente en los diferentes tamaños de tablas.</span><span class="sxs-lookup"><span data-stu-id="a6b88-126">The number of table rows per distribution varies as shown by the different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="a6b88-127">Tablas distribuidas con el método round robin</span><span class="sxs-lookup"><span data-stu-id="a6b88-127">Round-robin distributed tables</span></span>
<span data-ttu-id="a6b88-128">Una tabla distribuida con el método round robin distribuye las filas asignando cada una de ellas a una distribución por orden secuencial.</span><span class="sxs-lookup"><span data-stu-id="a6b88-128">A round-robin distributed table distributes the rows by assigning each row to a distribution in a sequential manner.</span></span> <span data-ttu-id="a6b88-129">En una tabla de round robin, los datos se cargan rápidamente, pero el rendimiento de las consultas puede ser más lento.</span><span class="sxs-lookup"><span data-stu-id="a6b88-129">It is quick to load data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="a6b88-130">Para combinar una tabla de round robin suele ser preciso reconstruir las filas para que la consulta genere un resultado exacto, lo que requiere tiempo.</span><span class="sxs-lookup"><span data-stu-id="a6b88-130">Joining a round-robin table usually requires reshuffling the rows to enable the query to produce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="a6b88-131">Las ubicaciones de almacenamiento distribuidas se denominan distribuciones</span><span class="sxs-lookup"><span data-stu-id="a6b88-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="a6b88-132">Cada ubicación distribuida se denomina distribución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="a6b88-133">Cuando se ejecuta una consulta en paralelo, cada distribución lleva a cabo una consulta SQL en su parte de datos correspondiente.</span><span class="sxs-lookup"><span data-stu-id="a6b88-133">When a query runs in parallel, each distribution performs a SQL query on its portion of the data.</span></span> <span data-ttu-id="a6b88-134">SQL Data Warehouse utiliza SQL Database para ejecutar la consulta.</span><span class="sxs-lookup"><span data-stu-id="a6b88-134">SQL Data Warehouse uses SQL Database to run the query.</span></span> <span data-ttu-id="a6b88-135">Almacenamiento de datos paralelos utiliza SQL Database para ejecutar la consulta.</span><span class="sxs-lookup"><span data-stu-id="a6b88-135">Parallel Data Warehouse uses SQL Server to run the query.</span></span> <span data-ttu-id="a6b88-136">Este diseño de arquitectura en que no se comparte nada es fundamental para lograr la informática en paralelo con escalado horizontal.</span><span class="sxs-lookup"><span data-stu-id="a6b88-136">This shared-nothing architecture design is fundamental to achieving scale-out parallel computing.</span></span>

### <a name="can-i-view-the-distributions"></a><span data-ttu-id="a6b88-137">¿Se pueden ver las distribuciones?</span><span class="sxs-lookup"><span data-stu-id="a6b88-137">Can I view the distributions?</span></span>
<span data-ttu-id="a6b88-138">Cada distribución tiene un Id. de distribución y es visible en las vistas del sistema que pertenecen a SQL Data Warehouse y Almacenamiento de datos paralelos.</span><span class="sxs-lookup"><span data-stu-id="a6b88-138">Each distribution has a distribution ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="a6b88-139">Puede utilizar el Id. de distribución para solucionar problemas de rendimiento de las consultas y otros problemas.</span><span class="sxs-lookup"><span data-stu-id="a6b88-139">You can use the distribution ID to troubleshoot query performance and other problems.</span></span> <span data-ttu-id="a6b88-140">Para obtener una lista de las vistas del sistema, consulte la [vista del sistema de MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="a6b88-140">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="a6b88-141">Diferencia entre una distribución y un nodo de ejecución</span><span class="sxs-lookup"><span data-stu-id="a6b88-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="a6b88-142">Una distribución es la unidad básica para almacenar datos distribuidos y procesar consultas en paralelo.</span><span class="sxs-lookup"><span data-stu-id="a6b88-142">A distribution is the basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="a6b88-143">Las distribuciones se agrupan en nodos de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="a6b88-144">Cada nodo de ejecución realiza el seguimiento de una o varias distribuciones.</span><span class="sxs-lookup"><span data-stu-id="a6b88-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="a6b88-145">Analytics Platform System usa nodos de ejecución como componente central de la arquitectura de hardware y de las prestaciones de escalado horizontal.</span><span class="sxs-lookup"><span data-stu-id="a6b88-145">Analytics Platform System uses Compute nodes as a central component of the hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="a6b88-146">Siempre utiliza ocho distribuciones por nodo de ejecución, como se muestra en el diagrama para las tablas distribuidas mediante una función hash.</span><span class="sxs-lookup"><span data-stu-id="a6b88-146">It always uses eight distributions per Compute node, as shown in the diagram for hash-distributed tables.</span></span> <span data-ttu-id="a6b88-147">El número de nodos de ejecución y, por lo tanto, el número de distribuciones, viene determinado por el número de nodos de ejecución adquiridos para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6b88-147">The number of Compute nodes, and therefore the number of distributions, is determined by the number of Compute nodes you purchase for the appliance.</span></span> <span data-ttu-id="a6b88-148">Por ejemplo, si adquiere ocho nodos de ejecución, obtendrá 64 distribuciones (8 nodos de ejecución x 8 distribuciones/nodo).</span><span class="sxs-lookup"><span data-stu-id="a6b88-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="a6b88-149">SQL Data Warehouse tiene una cantidad de distribuciones (60) y un número flexible de nodos de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="a6b88-150">Los nodos de ejecución se implementan con recursos informáticos y de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="a6b88-150">The Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="a6b88-151">La cantidad de nodos de ejecución puede variar según la carga de trabajo del servicio de back-end y la capacidad informática (en DWU) que se especifique para el almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="a6b88-151">The number of Compute nodes can change according to the backend service workload and the computing capacity (DWUs) you specify for the data warehouse.</span></span> <span data-ttu-id="a6b88-152">Cuando cambia el número de nodos de ejecución, también varía el número de distribuciones por nodo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-152">When the number of Compute nodes changes, the number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-the-compute-nodes"></a><span data-ttu-id="a6b88-153">¿Se pueden ver los nodos de ejecución?</span><span class="sxs-lookup"><span data-stu-id="a6b88-153">Can I view the Compute nodes?</span></span>
<span data-ttu-id="a6b88-154">Cada nodo de ejecución tiene un Id. de nodo y es visible en las vistas del sistema que pertenecen a SQL Data Warehouse y Almacenamiento de datos paralelos.</span><span class="sxs-lookup"><span data-stu-id="a6b88-154">Each Compute node has a node ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="a6b88-155">Para ver el nodo de ejecución, busque la columna node_id en las vistas del sistema cuyos nombres comiencen por sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="a6b88-155">You can see the Compute node by looking for the node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="a6b88-156">Para obtener una lista de las vistas del sistema, consulte la [vista del sistema de MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="a6b88-156">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="a6b88-157"><a name="Replicated"></a>Tablas replicadas</span><span class="sxs-lookup"><span data-stu-id="a6b88-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="a6b88-158">Una tabla que se replica tiene una copia completa de la tabla almacenada en cada nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="a6b88-158">A table that is replicated has a fully copy of the table stored on each Compute node.</span></span> <span data-ttu-id="a6b88-159">Al replicar una tabla se elimina la necesidad de transferir sus datos de un nodo de proceso a otro antes de una combinación o agregación.</span><span class="sxs-lookup"><span data-stu-id="a6b88-159">Replicating a table removes the need to transfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="a6b88-160">Las tablas replicadas solo son viables si son pequeñas, debido a que requieren más espacio para almacenarlas enteras en cada nodo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-160">Replicated tables are only feasible with small tables because of the extra storage required to store the full table on each compute node.</span></span>  

<span data-ttu-id="a6b88-161">En el diagrama siguiente se muestra una tabla replicada que se ha almacenado en cada nodo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-161">The following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="a6b88-162">Para SQL Data Warehouse, la tabla replicada se copia completa en una base de datos de distribución en cada nodo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6b88-162">For SQL Data Warehouse, the replicated table is fully copied to a distribution database on each Compute node.</span></span> <span data-ttu-id="a6b88-163">En el caso de Almacenamiento de datos paralelo, la tabla replicada se almacena en todos los discos asignados al nodo de proceso.</span><span class="sxs-lookup"><span data-stu-id="a6b88-163">For Parallel Data Warehouse, the replicated table is stored across all disks assigned to the Compute node.</span></span>  <span data-ttu-id="a6b88-164">Esta estrategia de disco se implementa mediante el uso de grupos de archivos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a6b88-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="a6b88-165">![Tabla replicada](media/sql-data-warehouse-distributed-data/replicated-table.png "Tabla replicada")</span><span class="sxs-lookup"><span data-stu-id="a6b88-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="a6b88-166">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a6b88-166">Next steps</span></span>
<span data-ttu-id="a6b88-167">Para usar tablas distribuidas de forma eficaz, consulte [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md) (Distribución de tablas en SQL Data Warehouse).</span><span class="sxs-lookup"><span data-stu-id="a6b88-167">To use distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  


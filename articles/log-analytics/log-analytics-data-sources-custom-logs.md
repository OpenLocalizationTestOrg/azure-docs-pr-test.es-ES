---
title: "Recopilación de registros personalizados en Log Analytics (OMS) | Microsoft Docs"
description: "Log Analytics puede recopilar eventos de archivos de texto en equipos Windows y Linux.  En este artículo se describe cómo definir un nuevo registro personalizado y detalles de los registros que crean en el repositorio de OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: aca7f6bb-6f53-4fd4-a45c-93f12ead4ae1
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: b7f28868e3ffdf95dbe39872f382e7c97eae692c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="custom-logs-in-log-analytics"></a><span data-ttu-id="ee067-104">Registros personalizados de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="ee067-104">Custom logs in Log Analytics</span></span>
<span data-ttu-id="ee067-105">El origen de datos de registros personalizados en Log Analytics permite recopilar eventos de archivos de texto en equipos Windows y Linux.</span><span class="sxs-lookup"><span data-stu-id="ee067-105">The Custom Logs data source in Log Analytics allows you to collect events from text files on both Windows and Linux computers.</span></span> <span data-ttu-id="ee067-106">Muchas aplicaciones registran información en archivos de texto, en lugar de los servicios de registro estándar, como el registro de eventos de Windows o Syslog.</span><span class="sxs-lookup"><span data-stu-id="ee067-106">Many applications log information to text files instead of standard logging services such as Windows Event log or Syslog.</span></span>  <span data-ttu-id="ee067-107">Una vez recopilada la información, puede analizar cada entrada del registro en campos individuales mediante la característica [Campos personalizados](log-analytics-custom-fields.md) de Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="ee067-107">Once collected, you can parse each record in the log in to individual fields using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

![Recopilación de registros personalizados](media/log-analytics-data-sources-custom-logs/overview.png)

<span data-ttu-id="ee067-109">Los archivos de registro que se van a recopilar deben cumplir los criterios siguientes.</span><span class="sxs-lookup"><span data-stu-id="ee067-109">The log files to be collected must match the following criteria.</span></span>

- <span data-ttu-id="ee067-110">El registro debe tener una sola entrada por línea o usar una marca de tiempo que coincida con uno de los formatos siguientes al principio de cada entrada.</span><span class="sxs-lookup"><span data-stu-id="ee067-110">The log must either have a single entry per line or use a timestamp matching one of the following formats at the start of each entry.</span></span>

    <span data-ttu-id="ee067-111">AAAA-MM-DD HH:MM:SS </span><span class="sxs-lookup"><span data-stu-id="ee067-111">YYYY-MM-DD HH:MM:SS</span></span><br><span data-ttu-id="ee067-112">M/D/AAAA HH:MM:SS AM/PM</span><span class="sxs-lookup"><span data-stu-id="ee067-112">M/D/YYYY HH:MM:SS AM/PM</span></span> <br><span data-ttu-id="ee067-113">Lun DD,AAAA HH:MM:SS</span><span class="sxs-lookup"><span data-stu-id="ee067-113">Mon DD,YYYY HH:MM:SS</span></span>

- <span data-ttu-id="ee067-114">El archivo de registro no debe permitir actualizaciones circulares, en las que el archivo se sobrescribe con nuevas entradas.</span><span class="sxs-lookup"><span data-stu-id="ee067-114">The log file must not allow circular updates where the file is overwritten with new entries.</span></span>
- <span data-ttu-id="ee067-115">El archivo de registro debe utilizar la codificación ASCII o UTF-8.</span><span class="sxs-lookup"><span data-stu-id="ee067-115">The log file must use ASCII or UTF-8 encoding.</span></span>  <span data-ttu-id="ee067-116">No se admiten otros formatos, como UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ee067-116">Other formats such as UTF-16 are not supported.</span></span>

>[!NOTE]
><span data-ttu-id="ee067-117">Si hay entradas duplicadas en el archivo de registro, Log Analytics los recoge.</span><span class="sxs-lookup"><span data-stu-id="ee067-117">If there are duplicate entries in the log file, Log Analytics will collect them.</span></span>  <span data-ttu-id="ee067-118">Sin embargo, los resultados de búsqueda serán incoherentes donde los resultados del filtro muestren más eventos que el recuento de resultados.</span><span class="sxs-lookup"><span data-stu-id="ee067-118">However, the search results will be inconsistent where the filter results show more events than the result count.</span></span>  <span data-ttu-id="ee067-119">Es importante que valide el registro para determinar si la aplicación que crea está causando este comportamiento y solucionarlo si es posible antes de crear la definición de la colección de registros personalizada.</span><span class="sxs-lookup"><span data-stu-id="ee067-119">It will be important that you validate the log to determine if the application that creates it is causing this behavior and address it if possible before creating the custom log collection definition.</span></span>  
>
  
## <a name="defining-a-custom-log"></a><span data-ttu-id="ee067-120">Definición de un registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-120">Defining a custom log</span></span>
<span data-ttu-id="ee067-121">Utilice el procedimiento siguiente para definir un archivo de registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-121">Use the following procedure to define a custom log file.</span></span>  <span data-ttu-id="ee067-122">Desplácese hasta el final de este artículo para ver un tutorial con un ejemplo de cómo agregar un registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-122">Scroll to the end of this article for a walkthrough of a sample of adding a custom log.</span></span>

### <a name="step-1-open-the-custom-log-wizard"></a><span data-ttu-id="ee067-123">Paso 1.</span><span class="sxs-lookup"><span data-stu-id="ee067-123">Step 1.</span></span> <span data-ttu-id="ee067-124">Apertura del Asistente para registros personalizados</span><span class="sxs-lookup"><span data-stu-id="ee067-124">Open the Custom Log Wizard</span></span>
<span data-ttu-id="ee067-125">El Asistente para registros personalizados se ejecuta en el portal OMS y le permite definir un nuevo registro personalizado para la recopilación.</span><span class="sxs-lookup"><span data-stu-id="ee067-125">The Custom Log Wizard runs in the OMS portal and allows you to define a new custom log to collect.</span></span>

1. <span data-ttu-id="ee067-126">En el portal de OMS, vaya a **Settings**(Configuración).</span><span class="sxs-lookup"><span data-stu-id="ee067-126">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="ee067-127">Haga clic en **Datos** y en **Registros personalizados**.</span><span class="sxs-lookup"><span data-stu-id="ee067-127">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="ee067-128">De forma predeterminada, todos los cambios realizados en la configuración se insertan automáticamente en todos los agentes.</span><span class="sxs-lookup"><span data-stu-id="ee067-128">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="ee067-129">En el caso de los agentes de Linux, se envía un archivo de configuración al recopilador de datos Fluentd.</span><span class="sxs-lookup"><span data-stu-id="ee067-129">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="ee067-130">Si desea modificar este archivo manualmente en cada uno de los agentes de Linux, desactive la casilla *Apply below configuration to my Linux machines*(Aplicar la configuración siguiente a mis equipos Linux).</span><span class="sxs-lookup"><span data-stu-id="ee067-130">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines*.</span></span>
4. <span data-ttu-id="ee067-131">Haga clic en **Agregar+** para abrir el Asistente para registros personalizados.</span><span class="sxs-lookup"><span data-stu-id="ee067-131">Click **Add+** to open the Custom Log Wizard.</span></span>

### <a name="step-2-upload-and-parse-a-sample-log"></a><span data-ttu-id="ee067-132">Paso 2:</span><span class="sxs-lookup"><span data-stu-id="ee067-132">Step 2.</span></span> <span data-ttu-id="ee067-133">Carga y análisis de un registro de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ee067-133">Upload and parse a sample log</span></span>
<span data-ttu-id="ee067-134">Para empezar, cargue una muestra del registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-134">You start by uploading a sample of the custom log.</span></span>  <span data-ttu-id="ee067-135">El Asistente analizará y mostrará las entradas de este archivo para que las valide.</span><span class="sxs-lookup"><span data-stu-id="ee067-135">The wizard will parse and display the entries in this file for you to validate.</span></span>  <span data-ttu-id="ee067-136">Log Analytics utilizará el delimitador especificado para identificar cada registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-136">Log Analytics will use the delimiter that you specify to identify each record.</span></span>

<span data-ttu-id="ee067-137">**Nueva línea** es el delimitador predeterminado y se utiliza para los archivos de registro que tienen una sola entrada por línea.</span><span class="sxs-lookup"><span data-stu-id="ee067-137">**New Line** is the default delimiter and is used for log files that have a single entry per line.</span></span>  <span data-ttu-id="ee067-138">Si la línea empieza con una fecha y hora en uno de los formatos disponibles, puede especificar un delimitador de **marca de tiempo** que admita entradas que abarcan más de una línea.</span><span class="sxs-lookup"><span data-stu-id="ee067-138">If the line starts with a date and time in one of the available formats, then you can specify a **Timestamp** delimiter which supports entries that span more than one line.</span></span>

<span data-ttu-id="ee067-139">Si se usa un delimitador de marca de tiempo, la propiedad TimeGenerated de cada registro almacenada en OMS se rellenará con la fecha y la hora especificadas para esa entrada en el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-139">If a timestamp delimiter is used, then the TimeGenerated property of each record stored in OMS will be populated with the date/time specified for that entry in the log file.</span></span>  <span data-ttu-id="ee067-140">Si se usa un delimitador de nueva línea, TimeGenerated se rellena con la fecha y hora en que Log Analytics recopila la entrada.</span><span class="sxs-lookup"><span data-stu-id="ee067-140">If a new line delimiter is used, then TimeGenerated is populated with date and time that Log Analytics collected the entry.</span></span>

> [!NOTE]
> <span data-ttu-id="ee067-141">Actualmente, Log Analytics trata la fecha y hora recopilada en un registro con un delimitador de marca de tiempo como una hora UTC.</span><span class="sxs-lookup"><span data-stu-id="ee067-141">Log Analytics currently treats the date/time collected from a log using a timestamp delimiter as UTC.</span></span>  <span data-ttu-id="ee067-142">Esto se cambiará pronto a utilizar la zona horaria del agente.</span><span class="sxs-lookup"><span data-stu-id="ee067-142">This will soon be changed to use the time zone on the agent.</span></span>
>
>

1. <span data-ttu-id="ee067-143">Haga clic en **Browse** (Examinar) y vaya a un archivo de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="ee067-143">Click **Browse** and browse to a sample file.</span></span>  <span data-ttu-id="ee067-144">Tenga en cuenta que este botón puede llamarse **Choose File** (Elegir archivo) en algunos exploradores.</span><span class="sxs-lookup"><span data-stu-id="ee067-144">Note that this may button may be labeled **Choose File** in some browsers.</span></span>
2. <span data-ttu-id="ee067-145">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="ee067-145">Click **Next**.</span></span>
3. <span data-ttu-id="ee067-146">El Asistente para registros personalizados cargará el archivo y mostrará los registros que identifique.</span><span class="sxs-lookup"><span data-stu-id="ee067-146">The Custom Log Wizard will upload the file and list the records that it identifies.</span></span>
4. <span data-ttu-id="ee067-147">Cambie el delimitador que se utiliza para identificar un registro nuevo y seleccione el delimitador que mejor identifica las entradas en el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-147">Change the delimiter that is used to identify a new record and select the delimiter that best identifies the records in your log file.</span></span>
5. <span data-ttu-id="ee067-148">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="ee067-148">Click **Next**.</span></span>

### <a name="step-3-add-log-collection-paths"></a><span data-ttu-id="ee067-149">Paso 3:</span><span class="sxs-lookup"><span data-stu-id="ee067-149">Step 3.</span></span> <span data-ttu-id="ee067-150">Incorporación de rutas de recopilación de registros</span><span class="sxs-lookup"><span data-stu-id="ee067-150">Add log collection paths</span></span>
<span data-ttu-id="ee067-151">Debe definir una o más rutas de acceso en el agente para colocar el registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-151">You must define one or more paths on the agent where it can locate the custom log.</span></span>  <span data-ttu-id="ee067-152">Puede proporcionar un nombre y una ruta de acceso específicos para el archivo de registro, o bien puede especificar una ruta de acceso con un carácter comodín para el nombre.</span><span class="sxs-lookup"><span data-stu-id="ee067-152">You can either provide a specific path and name for the log file, or you can specify a path with a wildcard for the name.</span></span>  <span data-ttu-id="ee067-153">Esto admite aplicaciones que crean un archivo nuevo cada día o cuando un archivo alcanza un tamaño determinado.</span><span class="sxs-lookup"><span data-stu-id="ee067-153">This supports applications that create a new file each day or when one file reaches a certain size.</span></span>  <span data-ttu-id="ee067-154">También puede proporcionar varias rutas de acceso para un solo archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-154">You can also provide multiple paths for a single log file.</span></span>

<span data-ttu-id="ee067-155">Por ejemplo, una aplicación puede crear un archivo de registro cada día con la fecha incluida en el nombre, como registro20100316.txt.</span><span class="sxs-lookup"><span data-stu-id="ee067-155">For example, an application might create a log file each day with the date included in the name as in log20100316.txt.</span></span> <span data-ttu-id="ee067-156">Un patrón para dicho registro podría ser *registro\*.txt*, que se aplicará a cualquier archivo de registro que siga el esquema de asignación de nombres de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ee067-156">A pattern for such a log might be *log\*.txt* which would apply to any log file following the application’s naming scheme.</span></span>

<span data-ttu-id="ee067-157">La tabla siguiente proporciona ejemplos de patrones válidos para especificar diferentes archivos de registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-157">The following table provides examples of valid patterns to specify different log files.</span></span>

| <span data-ttu-id="ee067-158">Descripción</span><span class="sxs-lookup"><span data-stu-id="ee067-158">Description</span></span> | <span data-ttu-id="ee067-159">Ruta de acceso</span><span class="sxs-lookup"><span data-stu-id="ee067-159">Path</span></span> |
|:--- |:--- |
| <span data-ttu-id="ee067-160">Todos los archivos en *C:\Logs* con la extensión .txt en el agente de Windows</span><span class="sxs-lookup"><span data-stu-id="ee067-160">All files in *C:\Logs* with .txt extension on Windows agent</span></span> |<span data-ttu-id="ee067-161">C:\Logs\\\*.txt</span><span class="sxs-lookup"><span data-stu-id="ee067-161">C:\Logs\\\*.txt</span></span> |
| <span data-ttu-id="ee067-162">Todos los archivos en *C:\Logs* con un nombre que empieza con "registro" y una extensión .txt en el agente de Windows</span><span class="sxs-lookup"><span data-stu-id="ee067-162">All files in *C:\Logs* with a name starting with log and a .txt extension on Windows agent</span></span> |<span data-ttu-id="ee067-163">C:\Logs\log\*.txt</span><span class="sxs-lookup"><span data-stu-id="ee067-163">C:\Logs\log\*.txt</span></span> |
| <span data-ttu-id="ee067-164">Todos los archivos en */var/log/audit* con la extensión .txt en el agente de Linux</span><span class="sxs-lookup"><span data-stu-id="ee067-164">All files in */var/log/audit* with .txt extension on Linux agent</span></span> |<span data-ttu-id="ee067-165">/var/log/audit/*.txt</span><span class="sxs-lookup"><span data-stu-id="ee067-165">/var/log/audit/*.txt</span></span> |
| <span data-ttu-id="ee067-166">Todos los archivos en */var/log/audit* con un nombre que empieza con "registro" y una extensión .txt en el agente de Linux</span><span class="sxs-lookup"><span data-stu-id="ee067-166">All files in */var/log/audit* with a name starting with log and a .txt extension on Linux agent</span></span> |<span data-ttu-id="ee067-167">/var/log/audit/log\*.txt</span><span class="sxs-lookup"><span data-stu-id="ee067-167">/var/log/audit/log\*.txt</span></span> |

1. <span data-ttu-id="ee067-168">Seleccione Windows o Linux para especificar qué formato de ruta de acceso va a agregar.</span><span class="sxs-lookup"><span data-stu-id="ee067-168">Select Windows or Linux to specify which path format you are adding.</span></span>
2. <span data-ttu-id="ee067-169">Escriba la ruta de acceso y haga clic en el botón **+** .</span><span class="sxs-lookup"><span data-stu-id="ee067-169">Type in the path and click the **+** button.</span></span>
3. <span data-ttu-id="ee067-170">Repita el proceso para rutas de acceso adicionales.</span><span class="sxs-lookup"><span data-stu-id="ee067-170">Repeat the process for any additional paths.</span></span>

### <a name="step-4-provide-a-name-and-description-for-the-log"></a><span data-ttu-id="ee067-171">Paso 4</span><span class="sxs-lookup"><span data-stu-id="ee067-171">Step 4.</span></span> <span data-ttu-id="ee067-172">Suministro de un nombre y una descripción del registro</span><span class="sxs-lookup"><span data-stu-id="ee067-172">Provide a name and description for the log</span></span>
<span data-ttu-id="ee067-173">El nombre que especifique se utilizará para el tipo de registro como se describió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ee067-173">The name that you specify will be used for the log type as described above.</span></span>  <span data-ttu-id="ee067-174">Siempre finalizará con _CL para distinguirlo como un registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-174">It will always end with _CL to distinguish it as a custom log.</span></span>

1. <span data-ttu-id="ee067-175">Escriba un nombre para el registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-175">Type in a name for the log.</span></span>  <span data-ttu-id="ee067-176">El sufijo **\_CF** se anexa automáticamente.</span><span class="sxs-lookup"><span data-stu-id="ee067-176">The **\_CL** suffix is automatically provided.</span></span>
2. <span data-ttu-id="ee067-177">Agregue una **Descripción**opcional.</span><span class="sxs-lookup"><span data-stu-id="ee067-177">Add an optional **Description**.</span></span>
3. <span data-ttu-id="ee067-178">Haga clic en **Next** (Siguiente) para guardar la definición del registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-178">Click **Next** to save the custom log definition.</span></span>

### <a name="step-5-validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="ee067-179">Paso 5.</span><span class="sxs-lookup"><span data-stu-id="ee067-179">Step 5.</span></span> <span data-ttu-id="ee067-180">Comprobación de que se recopilan los registros personalizados</span><span class="sxs-lookup"><span data-stu-id="ee067-180">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="ee067-181">Los datos iniciales de un nuevo registro personalizado pueden tardar hasta una hora en aparecer en Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="ee067-181">It may take up to an hour for the initial data from a new custom log to appear in Log Analytics.</span></span>  <span data-ttu-id="ee067-182">Empezará a recopilar las entradas de los registros que se encuentran en la ruta de acceso que ha especificado a partir del punto que definió en el registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-182">It will start collecting entries from the logs found in the path you specified from the point that you defined the custom log.</span></span>  <span data-ttu-id="ee067-183">No mantendrá las entradas que ha cargado durante la creación de registro personalizado, pero recopilará entradas ya existentes en los archivos de registro que encuentra.</span><span class="sxs-lookup"><span data-stu-id="ee067-183">It will not retain the entries that you uploaded during the custom log creation, but it will collect already existing entries in the log files that it locates.</span></span>

<span data-ttu-id="ee067-184">Una vez que Log Analytics empieza a recopilar del registro personalizado, sus registros estarán disponibles con una búsqueda de registros.</span><span class="sxs-lookup"><span data-stu-id="ee067-184">Once Log Analytics starts collecting from the custom log, its records will be available with a Log Search.</span></span>  <span data-ttu-id="ee067-185">Utilice el nombre que asignó al registro personalizado como **Type** en la consulta.</span><span class="sxs-lookup"><span data-stu-id="ee067-185">Use the name that you gave the custom log as the **Type** in your query.</span></span>

> [!NOTE]
> <span data-ttu-id="ee067-186">Si falta la propiedad RawData en la búsqueda, puede ser necesario cerrar y volver a abrir el explorador.</span><span class="sxs-lookup"><span data-stu-id="ee067-186">If the RawData property is missing from the search, you may need to close and reopen your browser.</span></span>
>
>

### <a name="step-6-parse-the-custom-log-entries"></a><span data-ttu-id="ee067-187">Paso 6.</span><span class="sxs-lookup"><span data-stu-id="ee067-187">Step 6.</span></span> <span data-ttu-id="ee067-188">Análisis de las entradas del registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-188">Parse the custom log entries</span></span>
<span data-ttu-id="ee067-189">La entrada de registro completa se almacenará en una sola propiedad denominada **RawData**.</span><span class="sxs-lookup"><span data-stu-id="ee067-189">The entire log entry will be stored in a single property called **RawData**.</span></span>  <span data-ttu-id="ee067-190">Probablemente, deseará separar las diferentes partes de información de cada entrada en propiedades individuales almacenadas en el registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-190">You will most likely want to separate the different pieces of information in each entry into individual properties stored in the record.</span></span>  <span data-ttu-id="ee067-191">Esto se hace mediante la característica [Campos personalizados](log-analytics-custom-fields.md) de Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="ee067-191">You do this using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

<span data-ttu-id="ee067-192">No se proporcionan aquí pasos detallados para analizar las entradas del registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-192">Detailed steps for parsing the custom log entry are not provided here.</span></span>  <span data-ttu-id="ee067-193">Consulte la documentación de [campos personalizados](log-analytics-custom-fields.md) para ver esta información.</span><span class="sxs-lookup"><span data-stu-id="ee067-193">Please refer to the [Custom Fields](log-analytics-custom-fields.md) documentation for this information.</span></span>

## <a name="disabling-a-custom-log"></a><span data-ttu-id="ee067-194">Deshabilitación de un registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-194">Disabling a custom log</span></span>
<span data-ttu-id="ee067-195">No se puede quitar una definición de registro personalizado una vez que se ha creado, pero se puede deshabilitar mediante la eliminación de todas sus rutas de recopilación.</span><span class="sxs-lookup"><span data-stu-id="ee067-195">You cannot remove a custom log definition once it's been created, but you can disable it by removing all of its collection paths.</span></span>

1. <span data-ttu-id="ee067-196">En el portal de OMS, vaya a **Settings**(Configuración).</span><span class="sxs-lookup"><span data-stu-id="ee067-196">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="ee067-197">Haga clic en **Datos** y en **Registros personalizados**.</span><span class="sxs-lookup"><span data-stu-id="ee067-197">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="ee067-198">Haga clic en **Detalles** junto a la definición de registro personalizado para deshabilitarla.</span><span class="sxs-lookup"><span data-stu-id="ee067-198">Click **Details** next to the custom log definition to disable.</span></span>
4. <span data-ttu-id="ee067-199">Quite todas las rutas de recopilación de la definición de registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-199">Remove each of the collection paths for the custom log definition.</span></span>

## <a name="data-collection"></a><span data-ttu-id="ee067-200">Colección de datos</span><span class="sxs-lookup"><span data-stu-id="ee067-200">Data collection</span></span>
<span data-ttu-id="ee067-201">Log Analytics recopilará nuevas entradas de cada registro personalizado aproximadamente cada 5 minutos.</span><span class="sxs-lookup"><span data-stu-id="ee067-201">Log Analytics will collect new entries from each custom log approximately every 5 minutes.</span></span>  <span data-ttu-id="ee067-202">El agente registrará su lugar en cada archivo de registro del que se recopila.</span><span class="sxs-lookup"><span data-stu-id="ee067-202">The agent will record its place in each log file that it collects from.</span></span>  <span data-ttu-id="ee067-203">Si el agente queda sin conexión durante un período, Log Analytics recopilará entradas desde donde quedó, incluso si se crearon mientras el agente estaba sin conexión.</span><span class="sxs-lookup"><span data-stu-id="ee067-203">If the agent goes offline for a period of time, then Log Analytics will collect entries from where it last left off, even if those entries were created while the agent was offline.</span></span>

<span data-ttu-id="ee067-204">Todo el contenido de la entrada del registro se escribe en una sola propiedad denominada **RawData**.</span><span class="sxs-lookup"><span data-stu-id="ee067-204">The entire contents of the log entry are written to a single property called **RawData**.</span></span>  <span data-ttu-id="ee067-205">Se pueden analizar en varias propiedades que se pueden analizar y buscar por separado mediante la definición de [campos personalizados](log-analytics-custom-fields.md) después de haber creado el registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-205">You can parse this into multiple properties that can be analyzed and searched separately by defining [Custom Fields](log-analytics-custom-fields.md) after you have created the custom log.</span></span>

## <a name="custom-log-record-properties"></a><span data-ttu-id="ee067-206">Propiedades de las entradas del registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-206">Custom log record properties</span></span>
<span data-ttu-id="ee067-207">Las entradas del registro personalizado tienen un tipo con el nombre del registro que asigne y las propiedades en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="ee067-207">Custom log records have a type with the log name that you provide and the properties in the following table.</span></span>

| <span data-ttu-id="ee067-208">Propiedad</span><span class="sxs-lookup"><span data-stu-id="ee067-208">Property</span></span> | <span data-ttu-id="ee067-209">Descripción</span><span class="sxs-lookup"><span data-stu-id="ee067-209">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ee067-210">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="ee067-210">TimeGenerated</span></span> |<span data-ttu-id="ee067-211">Fecha y hora en las que Log Analytics recopiló el registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-211">Date and time that the record was collected by Log Analytics.</span></span>  <span data-ttu-id="ee067-212">Si el registro usa un delimitador basado en el tiempo, es el tiempo recopilado en la entrada.</span><span class="sxs-lookup"><span data-stu-id="ee067-212">If the log uses a time-based delimiter then this is the time collected from the entry.</span></span> |
| <span data-ttu-id="ee067-213">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="ee067-213">SourceSystem</span></span> |<span data-ttu-id="ee067-214">Tipo de agente del que se recopiló el registro.</span><span class="sxs-lookup"><span data-stu-id="ee067-214">Type of agent the record was collected from.</span></span> <br> <span data-ttu-id="ee067-215">OpsManager: agente de Windows, ya sea una conexión directa o System Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="ee067-215">OpsManager – Windows agent, either direct connect or System Center Operations Manager</span></span> <br> <span data-ttu-id="ee067-216">Linux: todos los agentes de Linux.</span><span class="sxs-lookup"><span data-stu-id="ee067-216">Linux – All Linux agents</span></span> |
| <span data-ttu-id="ee067-217">RawData</span><span class="sxs-lookup"><span data-stu-id="ee067-217">RawData</span></span> |<span data-ttu-id="ee067-218">Texto completo de la entrada recopilada.</span><span class="sxs-lookup"><span data-stu-id="ee067-218">Full text of the collected entry.</span></span> |
| <span data-ttu-id="ee067-219">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="ee067-219">ManagementGroupName</span></span> |<span data-ttu-id="ee067-220">Nombre del grupo de administración de agentes de System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="ee067-220">Name of the management group for System Center Operations Manage agents.</span></span>  <span data-ttu-id="ee067-221">En el caso de los otros agentes, es AOI-\<id. de área de trabajo\>.</span><span class="sxs-lookup"><span data-stu-id="ee067-221">For other agents, this is AOI-\<workspace ID\></span></span> |

## <a name="log-searches-with-custom-log-records"></a><span data-ttu-id="ee067-222">Búsquedas de registros con entradas de registros personalizados</span><span class="sxs-lookup"><span data-stu-id="ee067-222">Log searches with custom log records</span></span>
<span data-ttu-id="ee067-223">Las entradas de los registros personalizados se almacenan en el repositorio de OMS de la misma forma que las entradas de cualquier otro origen de datos.</span><span class="sxs-lookup"><span data-stu-id="ee067-223">Records from custom logs are stored in the OMS repository just like records from any other data source.</span></span>  <span data-ttu-id="ee067-224">Tienen un tipo que coincide con el nombre proporcionado al definir el registro, por lo que puede utilizar la propiedad Type en la búsqueda para recuperar registros recopilados de un registro específico.</span><span class="sxs-lookup"><span data-stu-id="ee067-224">They will have a type matching the name that you provide when you define the log, so you can use the Type property in your search to retrieve records collected from a specific log.</span></span>

<span data-ttu-id="ee067-225">La tabla siguiente proporciona distintos ejemplos de búsquedas de registros que recuperan entradas de los registros personalizados.</span><span class="sxs-lookup"><span data-stu-id="ee067-225">The following table provides different examples of log searches that retrieve records from custom logs.</span></span>

| <span data-ttu-id="ee067-226">Consultar</span><span class="sxs-lookup"><span data-stu-id="ee067-226">Query</span></span> | <span data-ttu-id="ee067-227">Descripción</span><span class="sxs-lookup"><span data-stu-id="ee067-227">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ee067-228">Type=MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="ee067-228">Type=MyApp_CL</span></span> |<span data-ttu-id="ee067-229">Todos los eventos de un registro personalizado llamado MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="ee067-229">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="ee067-230">Type=MyApp_CL Severity_CF=error</span><span class="sxs-lookup"><span data-stu-id="ee067-230">Type=MyApp_CL Severity_CF=error</span></span> |<span data-ttu-id="ee067-231">Todos los eventos de un registro personalizado llamado MyApp_CL con el valor *error* en un campo personalizado llamado *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="ee067-231">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |

>[!NOTE]
> <span data-ttu-id="ee067-232">Si el área de trabajo se ha actualizado al [nuevo lenguaje de consulta Log Analytics](log-analytics-log-search-upgrade.md), las consultas anteriores cambiarían como sigue.</span><span class="sxs-lookup"><span data-stu-id="ee067-232">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="ee067-233">Consultar</span><span class="sxs-lookup"><span data-stu-id="ee067-233">Query</span></span> | <span data-ttu-id="ee067-234">Descripción</span><span class="sxs-lookup"><span data-stu-id="ee067-234">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ee067-235">MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="ee067-235">MyApp_CL</span></span> |<span data-ttu-id="ee067-236">Todos los eventos de un registro personalizado llamado MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="ee067-236">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="ee067-237">MyApp_CL &#124; donde Severity_CF=="error"</span><span class="sxs-lookup"><span data-stu-id="ee067-237">MyApp_CL &#124; where Severity_CF=="error"</span></span> |<span data-ttu-id="ee067-238">Todos los eventos de un registro personalizado llamado MyApp_CL con el valor *error* en un campo personalizado llamado *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="ee067-238">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |


## <a name="sample-walkthrough-of-adding-a-custom-log"></a><span data-ttu-id="ee067-239">Ejemplo de tutorial de agregar un registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-239">Sample walkthrough of adding a custom log</span></span>
<span data-ttu-id="ee067-240">La siguiente sección le guiará por un ejemplo de creación de un registro personalizado.</span><span class="sxs-lookup"><span data-stu-id="ee067-240">The following section walks through an example of creating a custom log.</span></span>  <span data-ttu-id="ee067-241">El registro de ejemplo que se recopila tiene una sola entrada en cada línea que empieza con una fecha y hora, después, campos delimitados por comas para el código, el estado y el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ee067-241">The sample log being collected has a single entry on each line starting with a date and time and then comma-delimited fields for code, status, and message.</span></span>  <span data-ttu-id="ee067-242">A continuación se muestran varias entradas de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="ee067-242">Several sample entries are shown below.</span></span>

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect to database
    2016-03-10 01:31:34 303,Error,Application lost connection to database

### <a name="upload-and-parse-a-sample-log"></a><span data-ttu-id="ee067-243">Carga y análisis de un registro de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ee067-243">Upload and parse a sample log</span></span>
<span data-ttu-id="ee067-244">Se proporciona uno de los archivos de registro, y puede ver los eventos que se recopilarán.</span><span class="sxs-lookup"><span data-stu-id="ee067-244">We provide one of the log files and can see the events that it will be collecting.</span></span>  <span data-ttu-id="ee067-245">En este caso, una nueva línea es un delimitador suficiente.</span><span class="sxs-lookup"><span data-stu-id="ee067-245">In this case New Line is a sufficient delimiter.</span></span>  <span data-ttu-id="ee067-246">Sin embargo, si una sola entrada en el registro puede abarcar varias líneas, es necesario usar un delimitador de marca de tiempo.</span><span class="sxs-lookup"><span data-stu-id="ee067-246">If a single entry in the log could span multiple lines though, then a timestamp delimiter would need to be used.</span></span>

![Carga y análisis de un registro de ejemplo](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a><span data-ttu-id="ee067-248">Incorporación de rutas de recopilación de registros</span><span class="sxs-lookup"><span data-stu-id="ee067-248">Add log collection paths</span></span>
<span data-ttu-id="ee067-249">Los archivos de registro se colocarán en *C:\MyApp\Logs*.</span><span class="sxs-lookup"><span data-stu-id="ee067-249">The log files will be located in *C:\MyApp\Logs*.</span></span>  <span data-ttu-id="ee067-250">Se creará un archivo nuevo cada día con un nombre que incluye la fecha con el patrón *appAAAAMMDD.log*.</span><span class="sxs-lookup"><span data-stu-id="ee067-250">A new file will be created each day with a name that includes the date in the pattern *appYYYYMMDD.log*.</span></span>  <span data-ttu-id="ee067-251">Un patrón suficiente para este registro sería *C:\MyApp\Logs\\\*.log*.</span><span class="sxs-lookup"><span data-stu-id="ee067-251">A sufficient pattern for this log would be *C:\MyApp\Logs\\\*.log*.</span></span>

![Ruta de recopilación de registros](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-the-log"></a><span data-ttu-id="ee067-253">Suministro de un nombre y una descripción del registro</span><span class="sxs-lookup"><span data-stu-id="ee067-253">Provide a name and description for the log</span></span>
<span data-ttu-id="ee067-254">Use el nombre *MyApp_CL* y escriba una descripción en el campo **Descripción**.</span><span class="sxs-lookup"><span data-stu-id="ee067-254">We use a name of *MyApp_CL* and type in a **Description**.</span></span>

![Nombre de registro](media/log-analytics-data-sources-custom-logs/log-name.png)

### <a name="validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="ee067-256">Comprobación de que se recopilan los registros personalizados</span><span class="sxs-lookup"><span data-stu-id="ee067-256">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="ee067-257">Utilice una consulta *Type=MyApp_CL* para devolver todas las entradas de registro del registro recopilado.</span><span class="sxs-lookup"><span data-stu-id="ee067-257">We use a query of *Type=MyApp_CL* to return all records from the collected log.</span></span>

![Consulta del registro sin campos personalizados](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-the-custom-log-entries"></a><span data-ttu-id="ee067-259">Análisis de las entradas del registro personalizado</span><span class="sxs-lookup"><span data-stu-id="ee067-259">Parse the custom log entries</span></span>
<span data-ttu-id="ee067-260">Los campos personalizados se usan para definir los campos *EventTime* (Hora del evento), *Code* (Código), *Status* (Estado) y *Message* (Mensaje) y poder ver la diferencia en los registros devueltos por la consulta.</span><span class="sxs-lookup"><span data-stu-id="ee067-260">We use Custom Fields to define the *EventTime*, *Code*, *Status*, and *Message* fields and we can see the difference in the records that are returned by the query.</span></span>

![Consulta del registro con campos personalizados](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a><span data-ttu-id="ee067-262">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="ee067-262">Next steps</span></span>
* <span data-ttu-id="ee067-263">Utilice los [campos personalizados](log-analytics-custom-fields.md) para analizar las entradas del registro personalizado en campos individuales.</span><span class="sxs-lookup"><span data-stu-id="ee067-263">Use [Custom Fields](log-analytics-custom-fields.md) to parse the entries in the custom log in to individual fields.</span></span>
* <span data-ttu-id="ee067-264">Obtenga información acerca de las [búsquedas de registros](log-analytics-log-searches.md) para analizar los datos recopilados de orígenes de datos y soluciones.</span><span class="sxs-lookup"><span data-stu-id="ee067-264">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>

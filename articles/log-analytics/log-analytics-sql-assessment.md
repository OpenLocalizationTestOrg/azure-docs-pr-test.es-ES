---
title: "Optimización del entorno de SQL Server con Azure Log Analytics | Microsoft Docs"
description: "Con Azure Log Analytics, puede usar periódicamente la solución de evaluación de SQL para evaluar el riesgo y el estado de los entornos de servidor SQL Server."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: e297eb57-1718-4cfe-a241-b9e84b2c42ac
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: d2aed3315fe60ace46dfb4176dc13aa417257b0c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="optimize-your-sql-server-environment-with-the-sql-assessment-solution-in-log-analytics"></a><span data-ttu-id="46520-103">Optimización del entorno de SQL Server con la solución de evaluación de SQL en Log Analytics</span><span class="sxs-lookup"><span data-stu-id="46520-103">Optimize your SQL Server environment with the SQL Assessment solution in Log Analytics</span></span>

![Símbolo de SQL Assessment](./media/log-analytics-sql-assessment/sql-assessment-symbol.png)

<span data-ttu-id="46520-105">Puede usar periódicamente la solución de evaluación de SQL para evaluar el riesgo y el estado de los entornos de servidor.</span><span class="sxs-lookup"><span data-stu-id="46520-105">You can use the SQL Assessment solution to assess the risk and health of your server environments on a regular interval.</span></span> <span data-ttu-id="46520-106">Este artículo le ayudará a instalar la solución para que puede tomar acciones correctivas para posibles problemas.</span><span class="sxs-lookup"><span data-stu-id="46520-106">This article will help you install the solution so that you can take corrective actions for potential problems.</span></span>

<span data-ttu-id="46520-107">Esta solución proporciona una lista priorizada de recomendaciones específicas para su infraestructura de servidor implementada.</span><span class="sxs-lookup"><span data-stu-id="46520-107">This solution provides a prioritized list of recommendations specific to your deployed server infrastructure.</span></span> <span data-ttu-id="46520-108">Las recomendaciones se clasifican en seis áreas de enfoque que ayudan a comprender rápidamente el riesgo y a tomar la acción correctiva.</span><span class="sxs-lookup"><span data-stu-id="46520-108">The recommendations are categorized across six focus areas which help you quickly understand the risk and take corrective action.</span></span>

<span data-ttu-id="46520-109">Las recomendaciones efectuadas se basan en los conocimientos y la experiencia adquiridos por los ingenieros de Microsoft fruto de miles de visitas de clientes.</span><span class="sxs-lookup"><span data-stu-id="46520-109">The recommendations made are based on the knowledge and experience gained by Microsoft engineers from thousands of customer visits.</span></span> <span data-ttu-id="46520-110">En cada recomendación, se explica por qué podría ser importante para usted un problema y se proporcionan instrucciones sobre cómo implementar los cambios sugeridos.</span><span class="sxs-lookup"><span data-stu-id="46520-110">Each recommendation provides guidance about why an issue might matter to you and how to implement the suggested changes.</span></span>

<span data-ttu-id="46520-111">Puede elegir las áreas de enfoque que sean más importantes para su organización y realizar un seguimiento del progreso hacia la consecución de un entorno libre de riesgos y en buen estado.</span><span class="sxs-lookup"><span data-stu-id="46520-111">You can choose focus areas that are most important to your organization and track your progress toward running a risk free and healthy environment.</span></span>

<span data-ttu-id="46520-112">Después de haber agregado la solución y completar una evaluación, se muestra información resumida sobre las áreas de enfoque en el panel **Evaluación de SQL** para la infraestructura del entorno.</span><span class="sxs-lookup"><span data-stu-id="46520-112">After you've added the solution and an assessment is completed, summary information for focus areas is shown on the **SQL Assessment** dashboard for the infrastructure in your environment.</span></span> <span data-ttu-id="46520-113">Las secciones siguientes describen cómo usar la información que aparece en el panel **Evaluación de SQL** , donde puede ver y ejecutar las acciones recomendadas para su infraestructura de servidor.</span><span class="sxs-lookup"><span data-stu-id="46520-113">The following sections describe how to use the information on the **SQL Assessment** dashboard, where you can view and then take recommended actions for your SQL server infrastructure.</span></span>

![imagen del icono de evaluación de SQL](./media/log-analytics-sql-assessment/sql-assess-tile.png)

![imagen del panel de evaluación de SQL](./media/log-analytics-sql-assessment/sql-assess-dash.png)

## <a name="installing-and-configuring-the-solution"></a><span data-ttu-id="46520-116">Instalación y configuración de la solución</span><span class="sxs-lookup"><span data-stu-id="46520-116">Installing and configuring the solution</span></span>
<span data-ttu-id="46520-117">La evaluación de SQL funciona con todas las versiones compatibles actualmente de SQL Server para las ediciones Standard, Developer y Enterprise.</span><span class="sxs-lookup"><span data-stu-id="46520-117">SQL Assessment works with all currently supported versions of SQL Server for the Standard, Developer, and Enterprise editions.</span></span>

<span data-ttu-id="46520-118">Utilice la siguiente información para instalar y configurar la solución.</span><span class="sxs-lookup"><span data-stu-id="46520-118">Use the following information to install and configure the solution.</span></span>

* <span data-ttu-id="46520-119">Deben instalarse agentes en servidores con SQL Server instalado.</span><span class="sxs-lookup"><span data-stu-id="46520-119">Agents must be installed on servers that have SQL Server installed.</span></span>
* <span data-ttu-id="46520-120">La solución de evaluación de SQL requiere que esté instalado una versión compatible de .NET Framework 4 en cada equipo que tenga un agente de OMS.</span><span class="sxs-lookup"><span data-stu-id="46520-120">The SQL Assessment solution requires a supported version of .NET Framework 4 installed on each computer that has an OMS agent.</span></span>
* <span data-ttu-id="46520-121">Para instalar la solución, el usuario debe ser administrador o colaborador en la suscripción de Azure cuando utiliza Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="46520-121">In order to install the solution, the user must be an administrator or contributor to the Azure subscription when using the Azure portal.</span></span> <span data-ttu-id="46520-122">Además, el usuario debe ser miembro del rol de administrador o colaborador del área de trabajo de OMS en el portal de OMS.</span><span class="sxs-lookup"><span data-stu-id="46520-122">In addition, the user must be a member of the OMS workspace contributor or administrator role in the OMS portal.</span></span>
* <span data-ttu-id="46520-123">Cuando use el agente de Operations Manager con la evaluación de SQL, debe utilizar una cuenta de ejecución de Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="46520-123">When using the Operations Manager agent with SQL Assessment, you'll need to use an Operations Manager Run-As account.</span></span> <span data-ttu-id="46520-124">Para más información, consulte [Cuentas de ejecución de Operations Manager para OMS](#operations-manager-run-as-accounts-for-oms) más adelante.</span><span class="sxs-lookup"><span data-stu-id="46520-124">See [Operations Manager run-as accounts for OMS](#operations-manager-run-as-accounts-for-oms) below for more information.</span></span>

  > [!NOTE]
  > <span data-ttu-id="46520-125">El agente de MMA no admite cuentas de ejecución de Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="46520-125">The MMA agent does not support Operations Manager Run-As accounts.</span></span>
  >
  >
* <span data-ttu-id="46520-126">Agregue la solución de evaluación de SQL al área de trabajo de OMS mediante el proceso descrito en [Incorporación de soluciones de Log Analytics desde la galería de soluciones](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="46520-126">Add the SQL Assessment solution to your OMS workspace using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span> <span data-ttu-id="46520-127">No es necesario realizar ninguna configuración más.</span><span class="sxs-lookup"><span data-stu-id="46520-127">There is no further configuration required.</span></span>

> [!NOTE]
> <span data-ttu-id="46520-128">Después de agregar la solución, el archivo AdvisorAssessment.exe se agrega a servidores con agentes.</span><span class="sxs-lookup"><span data-stu-id="46520-128">After you've added the solution, the AdvisorAssessment.exe file is added to servers with agents.</span></span> <span data-ttu-id="46520-129">Los datos de configuración se leen y, luego, se envían al servicio de OMS en la nube para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="46520-129">Configuration data is read and then sent to the OMS service in the cloud for processing.</span></span> <span data-ttu-id="46520-130">Se aplica la lógica a los datos recibidos y el servicio de nube registra los datos.</span><span class="sxs-lookup"><span data-stu-id="46520-130">Logic is applied to the received data and the cloud service records the data.</span></span>

## <a name="sql-assessment-data-collection-details"></a><span data-ttu-id="46520-131">Detalles de la recopilación de datos de la evaluación de SQL</span><span class="sxs-lookup"><span data-stu-id="46520-131">SQL Assessment data collection details</span></span>
<span data-ttu-id="46520-132">La evaluación de SQL recopila datos WMI, datos del registro, datos de rendimiento y resultados de la vista de administración dinámica de SQL Server con los agentes habilitados.</span><span class="sxs-lookup"><span data-stu-id="46520-132">SQL Assessment collects WMI data, registry data, performance data, and SQL Server dynamic management view results using the agents that you have enabled.</span></span>

<span data-ttu-id="46520-133">En la siguiente tabla se muestran los métodos de recopilación de datos para agentes, si se necesita Operations Manager (SCOM) y la frecuencia con la que un agente recopila datos.</span><span class="sxs-lookup"><span data-stu-id="46520-133">The following table shows data collection methods for agents, whether Operations Manager (SCOM) is required, and how often data is collected by an agent.</span></span>

| <span data-ttu-id="46520-134">plataforma</span><span class="sxs-lookup"><span data-stu-id="46520-134">platform</span></span> | <span data-ttu-id="46520-135">Agente directo</span><span class="sxs-lookup"><span data-stu-id="46520-135">Direct Agent</span></span> | <span data-ttu-id="46520-136">Agente de SCOM</span><span class="sxs-lookup"><span data-stu-id="46520-136">SCOM agent</span></span> | <span data-ttu-id="46520-137">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="46520-137">Azure Storage</span></span> | <span data-ttu-id="46520-138">¿Se necesita SCOM?</span><span class="sxs-lookup"><span data-stu-id="46520-138">SCOM required?</span></span> | <span data-ttu-id="46520-139">Datos del agente de SCOM enviados a través del grupo de administración</span><span class="sxs-lookup"><span data-stu-id="46520-139">SCOM agent data sent via management group</span></span> | <span data-ttu-id="46520-140">Frecuencia de recopilación</span><span class="sxs-lookup"><span data-stu-id="46520-140">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="46520-141">Windows</span><span class="sxs-lookup"><span data-stu-id="46520-141">Windows</span></span> | <span data-ttu-id="46520-142">&#8226;</span><span class="sxs-lookup"><span data-stu-id="46520-142">&#8226;</span></span> | <span data-ttu-id="46520-143">&#8226;</span><span class="sxs-lookup"><span data-stu-id="46520-143">&#8226;</span></span> |  |  | <span data-ttu-id="46520-144">&#8226;</span><span class="sxs-lookup"><span data-stu-id="46520-144">&#8226;</span></span> |<span data-ttu-id="46520-145">7 días</span><span class="sxs-lookup"><span data-stu-id="46520-145">7 days</span></span> |

## <a name="operations-manager-run-as-accounts-for-oms"></a><span data-ttu-id="46520-146">Cuentas de ejecución de Operations Manager para OMS</span><span class="sxs-lookup"><span data-stu-id="46520-146">Operations Manager run-as accounts for OMS</span></span>
<span data-ttu-id="46520-147">Log Analytics en OMS usa el agente y el grupo de administración de Operations Manager para recopilar y enviar datos al servicio de OMS.</span><span class="sxs-lookup"><span data-stu-id="46520-147">Log Analytics in OMS uses the Operations Manager agent and management group to collect and send data to the OMS service.</span></span> <span data-ttu-id="46520-148">OMS se basa en paquetes de administración de cargas de trabajo para proporcionar servicios de valor añadido.</span><span class="sxs-lookup"><span data-stu-id="46520-148">OMS builds upon management packs for workloads to provide value-add services.</span></span> <span data-ttu-id="46520-149">Cada carga de trabajo requiere privilegios específicos de carga de trabajo para ejecutar paquetes de administración en un contexto de seguridad diferente, como una cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="46520-149">Each workload requires workload-specific privileges to run management packs in a different security context, such as a domain account.</span></span> <span data-ttu-id="46520-150">Debe proporcionar información de credenciales mediante la configuración de una cuenta de ejecución de Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="46520-150">You need to provide credential information by configuring an Operations Manager Run As account.</span></span>

<span data-ttu-id="46520-151">Utilice la siguiente información para establecer la cuenta de ejecución de Operations Manager para la evaluación de SQL.</span><span class="sxs-lookup"><span data-stu-id="46520-151">Use the following information to set the Operations Manager run-as account for SQL Assessment.</span></span>

### <a name="set-the-run-as-account-for-sql-assessment"></a><span data-ttu-id="46520-152">Definición de la cuenta de ejecución para la evaluación de SQL</span><span class="sxs-lookup"><span data-stu-id="46520-152">Set the Run As account for SQL assessment</span></span>
 <span data-ttu-id="46520-153">Si ya está usando el paquete de administración de SQL Server, debe utilizar esa cuenta de ejecución.</span><span class="sxs-lookup"><span data-stu-id="46520-153">If you are already using the SQL Server management pack, you should use that Run As account.</span></span>

#### <a name="to-configure-the-sql-run-as-account-in-the-operations-console"></a><span data-ttu-id="46520-154">Para configurar la cuenta de ejecución de SQL en la consola de Operations, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="46520-154">To configure the SQL Run As account in the Operations console</span></span>
> [!NOTE]
> <span data-ttu-id="46520-155">Si usa el agente directo de OMS en lugar del agente de SCOM, el módulo de administración siempre se ejecuta en el contexto de seguridad de la cuenta de sistema local.</span><span class="sxs-lookup"><span data-stu-id="46520-155">If you are using the OMS direct agent, rather than the SCOM agent, the management pack always runs in the security context of the Local System account.</span></span> <span data-ttu-id="46520-156">Omita los pasos 1 a 5 siguientes y ejecute el código T-SQL o Powershell de ejemplo, especificando NT AUTHORITY\SYSTEM como nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="46520-156">Skip steps 1-5 below, and run either the T-SQL or Powershell sample, specifying NT AUTHORITY\SYSTEM as the user name.</span></span>
>
>

1. <span data-ttu-id="46520-157">En Operations Manager, abra la Consola del operador y haga clic en **Administración**.</span><span class="sxs-lookup"><span data-stu-id="46520-157">In Operations Manager, open the Operations console, and then click **Administration**.</span></span>
2. <span data-ttu-id="46520-158">En **Run As Configuration** (Configuración de ejecución), haga clic en **Perfiles** y abra **OMS SQL Assessment Run As Profile** (Perfil de ejecución de evaluación de SQL para OMS).</span><span class="sxs-lookup"><span data-stu-id="46520-158">Under **Run As Configuration**, click **Profiles**, and open **OMS SQL Assessment Run As Profile**.</span></span>
3. <span data-ttu-id="46520-159">En la página **Cuentas de ejecución**, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="46520-159">On the **Run As Accounts** page, click **Add**.</span></span>
4. <span data-ttu-id="46520-160">Seleccione una cuenta de ejecución de Windows que contenga las credenciales necesarias para SQL Server o haga clic en **Nuevo** para crear una.</span><span class="sxs-lookup"><span data-stu-id="46520-160">Select a Windows Run As account that contains the credentials needed for SQL Server, or click **New** to create one.</span></span>

   > [!NOTE]
   > <span data-ttu-id="46520-161">El tipo de cuenta de ejecución debe ser Windows.</span><span class="sxs-lookup"><span data-stu-id="46520-161">The Run As account type must be Windows.</span></span> <span data-ttu-id="46520-162">La cuenta de ejecución también debe ser parte del grupo de administradores locales en todos los servidores de Windows que hospedan instancias de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="46520-162">The Run As account must also be part of Local Administrators group on all Windows Servers hosting SQL Server Instances.</span></span>
   >
   >
5. <span data-ttu-id="46520-163">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="46520-163">Click **Save**.</span></span>
6. <span data-ttu-id="46520-164">Modifique y luego ejecute el siguiente ejemplo de T-SQL en cada instancia de SQL Server para conceder los permisos mínimos que necesita la cuenta de ejecución para realizar la evaluación de SQL.</span><span class="sxs-lookup"><span data-stu-id="46520-164">Modify and then execute the following T-SQL sample on each SQL Server Instance to grant minimum permissions required to Run As Account to perform SQL Assessment.</span></span> <span data-ttu-id="46520-165">Sin embargo, este paso no es necesario si una cuenta de ejecución ya forma parte del rol de servidor sysadmin en las instancias de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="46520-165">However, you don’t need to do this if a Run As Account is already part of the sysadmin server role on SQL Server Instances.</span></span>

```
---
    -- Replace <UserName> with the actual user name being used as Run As Account.
    USE master

    -- Create login for the user, comment this line if login is already created.
    CREATE LOGIN [<UserName>] FROM WINDOWS

    -- Grant permissions to user.
    GRANT VIEW SERVER STATE TO [<UserName>]
    GRANT VIEW ANY DEFINITION TO [<UserName>]
    GRANT VIEW ANY DATABASE TO [<UserName>]

    -- Add database user for all the databases on SQL Server Instance, this is required for connecting to individual databases.
    -- NOTE: This command must be run anytime new databases are added to SQL Server instances.
    EXEC sp_msforeachdb N'USE [?]; CREATE USER [<UserName>] FOR LOGIN [<UserName>];'

```
#### <a name="to-configure-the-sql-run-as-account-using-windows-powershell"></a><span data-ttu-id="46520-166">Para configurar la cuenta de ejecución de SQL mediante Windows PowerShell, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="46520-166">To configure the SQL Run As account using Windows PowerShell</span></span>
<span data-ttu-id="46520-167">Abra una ventana de PowerShell y ejecute el siguiente script después de actualizarlo con su información:</span><span class="sxs-lookup"><span data-stu-id="46520-167">Open a PowerShell window and run the following script after you’ve updated it with your information:</span></span>

```

    import-module OperationsManager
    New-SCOMManagementGroupConnection "<your management group name>"

    $profile = Get-SCOMRunAsProfile -DisplayName "OMS SQL Assessment Run As Profile"
    $account = Get-SCOMrunAsAccount | Where-Object {$_.Name -eq "<your run as account name>"}
    Set-SCOMRunAsProfile -Action "Add" -Profile $Profile -Account $Account
```

## <a name="understanding-how-recommendations-are-prioritized"></a><span data-ttu-id="46520-168">Cómo se establecen prioridades entre las recomendaciones</span><span class="sxs-lookup"><span data-stu-id="46520-168">Understanding how recommendations are prioritized</span></span>
<span data-ttu-id="46520-169">A cada recomendación efectuada se le asigna un valor de ponderación que identifica su importancia relativa.</span><span class="sxs-lookup"><span data-stu-id="46520-169">Every recommendation made is given a weighting value that identifies the relative importance of the recommendation.</span></span> <span data-ttu-id="46520-170">Se muestran solo las diez recomendaciones más importantes.</span><span class="sxs-lookup"><span data-stu-id="46520-170">Only the ten most important recommendations are shown.</span></span>

### <a name="how-weights-are-calculated"></a><span data-ttu-id="46520-171">Cálculo de las ponderaciones</span><span class="sxs-lookup"><span data-stu-id="46520-171">How weights are calculated</span></span>
<span data-ttu-id="46520-172">Las ponderaciones son valores agregados en función de tres factores principales:</span><span class="sxs-lookup"><span data-stu-id="46520-172">Weightings are aggregate values based on three key factors:</span></span>

* <span data-ttu-id="46520-173">La *probabilidad* de que un asunto identificado pueda causar problemas.</span><span class="sxs-lookup"><span data-stu-id="46520-173">The *probability* that an issue identified will cause problems.</span></span> <span data-ttu-id="46520-174">Una probabilidad más alta equivale a una puntuación total mayor para la recomendación.</span><span class="sxs-lookup"><span data-stu-id="46520-174">A higher probability equates to a larger overall score for the recommendation.</span></span>
* <span data-ttu-id="46520-175">El *impacto* del asunto en su organización en caso de que se produzca un problema.</span><span class="sxs-lookup"><span data-stu-id="46520-175">The *impact* of the issue on your organization if it does cause a problem.</span></span> <span data-ttu-id="46520-176">Un mayor impacto equivale a una puntuación total mayor para la recomendación.</span><span class="sxs-lookup"><span data-stu-id="46520-176">A higher impact equates to a larger overall score for the recommendation.</span></span>
* <span data-ttu-id="46520-177">El *esfuerzo* necesario para implementar la recomendación.</span><span class="sxs-lookup"><span data-stu-id="46520-177">The *effort* required to implement the recommendation.</span></span> <span data-ttu-id="46520-178">Un mayor esfuerzo equivale a una puntuación total menor para la recomendación.</span><span class="sxs-lookup"><span data-stu-id="46520-178">A higher effort equates to a smaller overall score for the recommendation.</span></span>

<span data-ttu-id="46520-179">La ponderación de cada recomendación se expresa como un porcentaje de la puntuación total disponible para cada área de enfoque.</span><span class="sxs-lookup"><span data-stu-id="46520-179">The weighting for each recommendation is expressed as a percentage of the total score available for each focus area.</span></span> <span data-ttu-id="46520-180">Por ejemplo, si una recomendación en el área de enfoque de seguridad y cumplimiento tiene una puntuación del 5 %, la implementación de esa recomendación aumentará la puntuación total de seguridad y cumplimiento en un 5 %.</span><span class="sxs-lookup"><span data-stu-id="46520-180">For example, if a recommendation in the Security and Compliance focus area has a score of 5%, implementing that recommendation will increase your overall Security and Compliance score by 5%.</span></span>

### <a name="focus-areas"></a><span data-ttu-id="46520-181">Áreas de enfoque</span><span class="sxs-lookup"><span data-stu-id="46520-181">Focus areas</span></span>
<span data-ttu-id="46520-182">**Seguridad y cumplimiento** : este apartado muestra recomendaciones en caso de posibles amenazas e infracciones de seguridad, directivas corporativas y requisitos de cumplimiento técnico, legal y reglamentario.</span><span class="sxs-lookup"><span data-stu-id="46520-182">**Security and Compliance** - This focus area shows recommendations for potential security threats and breaches, corporate policies, and technical, legal and regulatory compliance requirements.</span></span>

<span data-ttu-id="46520-183">**Disponibilidad y continuidad empresarial** : este apartado muestra recomendaciones relacionadas con la disponibilidad de servicio, la resistencia de la infraestructura y la protección del negocio.</span><span class="sxs-lookup"><span data-stu-id="46520-183">**Availability and Business Continuity** - This focus area shows recommendations for service availability, resiliency of your infrastructure, and business protection.</span></span>

<span data-ttu-id="46520-184">**Rendimiento y escalabilidad** : este apartado muestra recomendaciones que ayudarán a crecer a la infraestructura de TI de su organización y garantizarán que el entorno de TI cumple los requisitos de rendimiento vigentes y que, además, puede responder a las cambiantes necesidades de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="46520-184">**Performance and Scalability** - This focus area shows recommendations to help your organization's IT infrastructure grow, ensure that your IT environment meets current performance requirements, and is able to respond to changing infrastructure needs.</span></span>

<span data-ttu-id="46520-185">**Actualización, migración e implementación**. Esta área de enfoque muestra recomendaciones que lo ayudarán a actualizar, migrar e implementar SQL Server en la infraestructura existente.</span><span class="sxs-lookup"><span data-stu-id="46520-185">**Upgrade, Migration and Deployment** - This focus area shows recommendations to help you upgrade, migrate, and deploy SQL Server to your existing infrastructure.</span></span>

<span data-ttu-id="46520-186">**Operaciones y supervisión**. Esta área de enfoque muestra recomendaciones para ayudar a simplificar las operaciones de TI, implementar el mantenimiento preventivo y maximizar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="46520-186">**Operations and Monitoring** - This focus area shows recommendations to help streamline your IT operations, implement preventative maintenance, and maximize performance.</span></span>

<span data-ttu-id="46520-187">**Administración de cambios y configuración**. Esta área de enfoque muestra recomendaciones para ayudar a proteger las operaciones diarias, garantizar que los cambios no afectan de manera negativa a su infraestructura, establecer procedimientos de control de cambios y realizar un seguimiento y auditar las configuraciones del sistema.</span><span class="sxs-lookup"><span data-stu-id="46520-187">**Change and Configuration Management** - This focus area shows recommendations to help protect day-to-day operations, ensure that changes don't negatively affect your infrastructure, establish change control procedures, and to track and audit system configurations.</span></span>

### <a name="should-you-aim-to-score-100-in-every-focus-area"></a><span data-ttu-id="46520-188">¿Debe tratar de conseguir una puntuación del 100 % en cada área de enfoque?</span><span class="sxs-lookup"><span data-stu-id="46520-188">Should you aim to score 100% in every focus area?</span></span>
<span data-ttu-id="46520-189">No necesariamente.</span><span class="sxs-lookup"><span data-stu-id="46520-189">Not necessarily.</span></span> <span data-ttu-id="46520-190">Las recomendaciones se basan en los conocimientos y las experiencias adquiridos por los ingenieros de Microsoft producto de miles de visitas de clientes.</span><span class="sxs-lookup"><span data-stu-id="46520-190">The recommendations are based on the knowledge and experiences gained by Microsoft engineers across thousands of customer visits.</span></span> <span data-ttu-id="46520-191">Sin embargo, no hay dos infraestructuras de servidores que sean iguales, y es posible que determinadas recomendaciones puedan ser más o menos relevantes para usted.</span><span class="sxs-lookup"><span data-stu-id="46520-191">However, no two server infrastructures are the same, and specific recommendations may be more or less relevant to you.</span></span> <span data-ttu-id="46520-192">Por ejemplo, algunas recomendaciones de seguridad pueden ser menos pertinentes si las máquinas virtuales no están expuestas a Internet.</span><span class="sxs-lookup"><span data-stu-id="46520-192">For example, some security recommendations might be less relevant if your virtual machines are not exposed to the Internet.</span></span> <span data-ttu-id="46520-193">Algunas recomendaciones de disponibilidad pueden ser menos relevantes para los servicios que proporcionan informes y recopilaciones de datos ad hoc de baja prioridad.</span><span class="sxs-lookup"><span data-stu-id="46520-193">Some availability recommendations may be less relevant for services that provide low priority ad hoc data collection and reporting.</span></span> <span data-ttu-id="46520-194">Los problemas que son importantes para un negocio maduro pueden no serlo para otro que esté en sus inicios.</span><span class="sxs-lookup"><span data-stu-id="46520-194">Issues that are important to a mature business may be less important to a start-up.</span></span> <span data-ttu-id="46520-195">Puede que desee identificar qué áreas de enfoque son prioritarias para usted y, posteriormente, observar cómo cambian las puntuaciones con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="46520-195">You may want to identify which focus areas are your priorities and then look at how your scores change over time.</span></span>

<span data-ttu-id="46520-196">Cada recomendación incluye pautas que indican por qué es importante.</span><span class="sxs-lookup"><span data-stu-id="46520-196">Every recommendation includes guidance about why it is important.</span></span> <span data-ttu-id="46520-197">Debe utilizar estas directrices para evaluar si es adecuado o no para usted implementar la recomendación, en función de la naturaleza de los servicios de TI y las necesidades empresariales de su organización.</span><span class="sxs-lookup"><span data-stu-id="46520-197">You should use this guidance to evaluate whether implementing the recommendation is appropriate for you, given the nature of your IT services and the business needs of your organization.</span></span>

## <a name="use-assessment-focus-area-recommendations"></a><span data-ttu-id="46520-198">Uso de las recomendaciones de área de enfoque de evaluación</span><span class="sxs-lookup"><span data-stu-id="46520-198">Use assessment focus area recommendations</span></span>
<span data-ttu-id="46520-199">Antes de que pueda usar una solución de evaluación en OMS, debe tener instalada la solución.</span><span class="sxs-lookup"><span data-stu-id="46520-199">Before you can use an assessment solution in OMS, you must have the solution installed.</span></span> <span data-ttu-id="46520-200">Para más información sobre cómo instalar las soluciones, consulte [Incorporación de soluciones de Log Analytics desde la galería de soluciones](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="46520-200">To read more about installing solutions, see [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span> <span data-ttu-id="46520-201">Una vez realizada la instalación, podrá ver el resumen de las recomendaciones mediante el icono de evaluación de SQL en la página Información general de OMS.</span><span class="sxs-lookup"><span data-stu-id="46520-201">After it is installed, you can view the summary of recommendations by using the SQL Assessment tile on the Overview page in OMS.</span></span>

<span data-ttu-id="46520-202">Consulte un resumen de las evaluaciones de cumplimiento para su infraestructura y, a continuación, profundice las recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="46520-202">View the summarized compliance assessments for your infrastructure and then drill-into recommendations.</span></span>

### <a name="to-view-recommendations-for-a-focus-area-and-take-corrective-action"></a><span data-ttu-id="46520-203">Visualización de las recomendaciones para un área de enfoque y adopción de las medidas correctivas</span><span class="sxs-lookup"><span data-stu-id="46520-203">To view recommendations for a focus area and take corrective action</span></span>
1. <span data-ttu-id="46520-204">En la página **Información general**, haga clic en el icono de **evaluación de SQL**.</span><span class="sxs-lookup"><span data-stu-id="46520-204">On the **Overview** page, click the **SQL Assessment** tile.</span></span>
2. <span data-ttu-id="46520-205">En la página de **evaluación de SQL**, revise la información de resumen de una de las hojas de las áreas de enfoque y, a continuación, haga clic en una de ellas para ver las recomendaciones para dicha área de enfoque.</span><span class="sxs-lookup"><span data-stu-id="46520-205">On the **SQL Assessment** page, review the summary information in one of the focus area blades and then click one to view recommendations for that focus area.</span></span>
3. <span data-ttu-id="46520-206">En cualquiera de las páginas de área de enfoque, puede ver las recomendaciones priorizadas que se han efectuado para su entorno.</span><span class="sxs-lookup"><span data-stu-id="46520-206">On any of the focus area pages, you can view the prioritized recommendations made for your environment.</span></span> <span data-ttu-id="46520-207">Haga clic en una recomendación en **Objetos afectados** para ver los detalles sobre por qué se realiza la recomendación.</span><span class="sxs-lookup"><span data-stu-id="46520-207">Click a recommendation under **Affected Objects** to view details about why the recommendation is made.</span></span>  
    <span data-ttu-id="46520-208">![imagen de las recomendaciones de evaluación de SQL](./media/log-analytics-sql-assessment/sql-assess-focus.png)</span><span class="sxs-lookup"><span data-stu-id="46520-208">![image of SQL Assessment recommendations](./media/log-analytics-sql-assessment/sql-assess-focus.png)</span></span>
4. <span data-ttu-id="46520-209">Puede tomar las medidas correctivas que se sugieren en **Acciones sugeridas**.</span><span class="sxs-lookup"><span data-stu-id="46520-209">You can take corrective actions suggested in **Suggested Actions**.</span></span> <span data-ttu-id="46520-210">Cuando se haya ocupado del asunto, las evaluaciones posteriores registrarán las acciones recomendadas que se han realizado y aumentará su calificación de cumplimiento normativo.</span><span class="sxs-lookup"><span data-stu-id="46520-210">When the item has been addressed, later assessments will record that recommended actions were taken and your compliance score will increase.</span></span> <span data-ttu-id="46520-211">Los asuntos que se hayan corregido aparecerán en **Objetos superados**.</span><span class="sxs-lookup"><span data-stu-id="46520-211">Corrected items appear as **Passed Objects**.</span></span>

## <a name="ignore-recommendations"></a><span data-ttu-id="46520-212">Omisión de las recomendaciones</span><span class="sxs-lookup"><span data-stu-id="46520-212">Ignore recommendations</span></span>
<span data-ttu-id="46520-213">Si desea omitir ciertas recomendaciones, puede crear un archivo de texto que OMS usará para evitar que aparezcan recomendaciones en los resultados de la evaluación.</span><span class="sxs-lookup"><span data-stu-id="46520-213">If you have recommendations that you want to ignore, you can create a text file that OMS will use to prevent recommendations from appearing in your assessment results.</span></span>

[!include[log-analytics-log-search-nextgeneration](../../includes/log-analytics-log-search-nextgeneration.md)]

### <a name="to-identify-recommendations-that-you-will-ignore"></a><span data-ttu-id="46520-214">Para identificar las recomendaciones que omitirá</span><span class="sxs-lookup"><span data-stu-id="46520-214">To identify recommendations that you will ignore</span></span>
1. <span data-ttu-id="46520-215">Inicie sesión en su área de trabajo y abra Búsqueda de registros.</span><span class="sxs-lookup"><span data-stu-id="46520-215">Sign in to your workspace and open Log Search.</span></span> <span data-ttu-id="46520-216">Use la siguiente consulta para mostrar las recomendaciones para los equipos que presentan errores en el entorno.</span><span class="sxs-lookup"><span data-stu-id="46520-216">Use the following query to list recommendations that have failed for computers in your environment.</span></span>

   ```
   Type=SQLAssessmentRecommendation RecommendationResult=Failed | select  Computer, RecommendationId, Recommendation | sort  Computer
   ```

   <span data-ttu-id="46520-217">Captura de pantalla que muestra la consulta de Búsqueda de registros: ![recomendaciones fallidas](./media/log-analytics-sql-assessment/sql-assess-failed-recommendations.png)</span><span class="sxs-lookup"><span data-stu-id="46520-217">Here's a screen shot showing the Log Search query: ![failed recommendations](./media/log-analytics-sql-assessment/sql-assess-failed-recommendations.png)</span></span>
2. <span data-ttu-id="46520-218">Elija las recomendaciones que desea omitir.</span><span class="sxs-lookup"><span data-stu-id="46520-218">Choose recommendations that you want to ignore.</span></span> <span data-ttu-id="46520-219">Usará los valores para RecommendationId en el procedimiento siguiente.</span><span class="sxs-lookup"><span data-stu-id="46520-219">You’ll use the values for RecommendationId in the next procedure.</span></span>

### <a name="to-create-and-use-an-ignorerecommendationstxt-text-file"></a><span data-ttu-id="46520-220">Para crear y usar un archivo de texto IgnoreRecommendations.txt</span><span class="sxs-lookup"><span data-stu-id="46520-220">To create and use an IgnoreRecommendations.txt text file</span></span>
1. <span data-ttu-id="46520-221">Cree un archivo llamado IgnoreRecommendations.txt.</span><span class="sxs-lookup"><span data-stu-id="46520-221">Create a file named IgnoreRecommendations.txt.</span></span>
2. <span data-ttu-id="46520-222">Pegue o escriba cada RecommendationId de cada recomendación que desee que OMS omita en una línea independiente y luego guarde y cierre el archivo.</span><span class="sxs-lookup"><span data-stu-id="46520-222">Paste or type each RecommendationId for each recommendation that you want OMS to ignore on a separate line and then save and close the file.</span></span>
3. <span data-ttu-id="46520-223">Coloque el archivo en la carpeta siguiente en cada equipo donde desea que OMS omita las recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="46520-223">Put the file in the following folder on each computer where you want OMS to ignore recommendations.</span></span>
   * <span data-ttu-id="46520-224">En equipos con Microsoft Monitoring Agent (conectado directamente o a través de Operations Manager): *UnidadDelSistema*:\Archivos de programa\Microsoft Monitoring Agent\Agent</span><span class="sxs-lookup"><span data-stu-id="46520-224">On computers with the Microsoft Monitoring Agent (connected directly or through Operations Manager) - *SystemDrive*:\Program Files\Microsoft Monitoring Agent\Agent</span></span>
   * <span data-ttu-id="46520-225">En el servidor de administración de Operations Manager: *UnidadDelSistema*:\Archivos de programa\Microsoft System Center 2012 R2\Operations Manager\Server</span><span class="sxs-lookup"><span data-stu-id="46520-225">On the Operations Manager management server - *SystemDrive*:\Program Files\Microsoft System Center 2012 R2\Operations Manager\Server</span></span>

### <a name="to-verify-that-recommendations-are-ignored"></a><span data-ttu-id="46520-226">Para comprobar que se omiten las recomendaciones</span><span class="sxs-lookup"><span data-stu-id="46520-226">To verify that recommendations are ignored</span></span>
1. <span data-ttu-id="46520-227">Después de que se ejecute la siguiente evaluación programada, de forma predeterminada cada 7 días, las recomendaciones especificadas se marcan como omitidas y no aparecerán en el panel de evaluación.</span><span class="sxs-lookup"><span data-stu-id="46520-227">After the next scheduled assessment runs, by default every 7 days, the specified recommendations are marked Ignored and will not appear on the assessment dashboard.</span></span>
2. <span data-ttu-id="46520-228">Puede usar las consultas de búsqueda de registros siguientes para enumerar todas las recomendaciones omitidas.</span><span class="sxs-lookup"><span data-stu-id="46520-228">You can use the following Log Search queries to list all the ignored recommendations.</span></span>

   ```
   Type=SQLAssessmentRecommendation RecommendationResult=Ignored | select  Computer, RecommendationId, Recommendation | sort  Computer
   ```
3. <span data-ttu-id="46520-229">Si posteriormente decide que desea ver las recomendaciones omitidas, quite todos los archivos IgnoreRecommendations.txt. También puede quitar RecommendationID de ellos.</span><span class="sxs-lookup"><span data-stu-id="46520-229">If you decide later that you want to see ignored recommendations, remove any IgnoreRecommendations.txt files, or you can remove RecommendationIDs from them.</span></span>

## <a name="sql-assessment-solution-faq"></a><span data-ttu-id="46520-230">Preguntas más frecuentes sobre soluciones de evaluación de SQL</span><span class="sxs-lookup"><span data-stu-id="46520-230">SQL Assessment solution FAQ</span></span>
<span data-ttu-id="46520-231">*¿Con qué frecuencia se ejecuta una evaluación?*</span><span class="sxs-lookup"><span data-stu-id="46520-231">*How often does an assessment run?*</span></span>

* <span data-ttu-id="46520-232">La evaluación se realiza cada 7 días.</span><span class="sxs-lookup"><span data-stu-id="46520-232">The assessment runs every 7 days.</span></span>

<span data-ttu-id="46520-233">*¿Se puede configurar la frecuencia con la que se realiza la evaluación?*</span><span class="sxs-lookup"><span data-stu-id="46520-233">*Is there a way to configure how often the assessment runs?*</span></span>

* <span data-ttu-id="46520-234">De momento, no.</span><span class="sxs-lookup"><span data-stu-id="46520-234">Not at this time.</span></span>

<span data-ttu-id="46520-235">*Si se detecta otro servidor después de haber agregado una solución de evaluación de SQL, ¿se evaluará?*</span><span class="sxs-lookup"><span data-stu-id="46520-235">*If another server is discovered after I’ve added the SQL assessment solution, will it be assessed?*</span></span>

* <span data-ttu-id="46520-236">Sí, una vez que se detecte, se evaluará cada 7 días a partir de entonces.</span><span class="sxs-lookup"><span data-stu-id="46520-236">Yes, once it is discovered it is assessed from then on, every 7 days.</span></span>

<span data-ttu-id="46520-237">*Si se retira un servidor, ¿cuándo dejará de incluirse en la evaluación?*</span><span class="sxs-lookup"><span data-stu-id="46520-237">*If a server is decommissioned, when will it be removed from the assessment?*</span></span>

* <span data-ttu-id="46520-238">Si un servidor no envía datos durante 3 semanas, se quitará.</span><span class="sxs-lookup"><span data-stu-id="46520-238">If a server does not submit data for 3 weeks, it is removed.</span></span>

<span data-ttu-id="46520-239">*¿Cuál es el nombre del proceso que realiza la recopilación de datos?*</span><span class="sxs-lookup"><span data-stu-id="46520-239">*What is the name of the process that does the data collection?*</span></span>

* <span data-ttu-id="46520-240">AdvisorAssessment.exe</span><span class="sxs-lookup"><span data-stu-id="46520-240">AdvisorAssessment.exe</span></span>

<span data-ttu-id="46520-241">*¿Cuánto tiempo tarda en recopilar datos?*</span><span class="sxs-lookup"><span data-stu-id="46520-241">*How long does it take for data to be collected?*</span></span>

* <span data-ttu-id="46520-242">La recopilación de datos reales en el servidor tarda aproximadamente 1 hora.</span><span class="sxs-lookup"><span data-stu-id="46520-242">The actual data collection on the server takes about 1 hour.</span></span> <span data-ttu-id="46520-243">Puede tardar más en servidores que tengan un gran número de bases de datos o instancias de SQL.</span><span class="sxs-lookup"><span data-stu-id="46520-243">It may take longer on servers that have a large number of SQL instances or databases.</span></span>

<span data-ttu-id="46520-244">*¿Qué tipo de datos se recopila?*</span><span class="sxs-lookup"><span data-stu-id="46520-244">*What type of data is collected?*</span></span>

* <span data-ttu-id="46520-245">Se recopilan los siguientes tipos de datos:</span><span class="sxs-lookup"><span data-stu-id="46520-245">The following types of data are collected:</span></span>
  * <span data-ttu-id="46520-246">WMI</span><span class="sxs-lookup"><span data-stu-id="46520-246">WMI</span></span>
  * <span data-ttu-id="46520-247">Registro</span><span class="sxs-lookup"><span data-stu-id="46520-247">Registry</span></span>
  * <span data-ttu-id="46520-248">Contadores de rendimiento</span><span class="sxs-lookup"><span data-stu-id="46520-248">Performance counters</span></span>
  * <span data-ttu-id="46520-249">Vistas de administración dinámica (DMV) de SQL</span><span class="sxs-lookup"><span data-stu-id="46520-249">SQL dynamic management views (DMV).</span></span>

<span data-ttu-id="46520-250">*¿Se puede configurar el momento en que se recopilan los datos?*</span><span class="sxs-lookup"><span data-stu-id="46520-250">*Is there a way to configure when data is collected?*</span></span>

* <span data-ttu-id="46520-251">De momento, no.</span><span class="sxs-lookup"><span data-stu-id="46520-251">Not at this time.</span></span>

<span data-ttu-id="46520-252">*¿Por qué es necesario configurar una cuenta "ejecutar como"?*</span><span class="sxs-lookup"><span data-stu-id="46520-252">*Why do I have to configure a Run As Account?*</span></span>

* <span data-ttu-id="46520-253">Para SQL Server, se ejecuta un número reducido de consultas SQL.</span><span class="sxs-lookup"><span data-stu-id="46520-253">For SQL Server, a small number of SQL queries are run.</span></span> <span data-ttu-id="46520-254">Para que se ejecuten, hay que utilizar una cuenta "ejecutar como" que disponga de los permisos VIEW SERVER STATE para SQL.</span><span class="sxs-lookup"><span data-stu-id="46520-254">In order for them to run, a Run As Account with VIEW SERVER STATE permissions to SQL must be used.</span></span>  <span data-ttu-id="46520-255">Además, para consultar WMI, se necesitan credenciales de administrador local.</span><span class="sxs-lookup"><span data-stu-id="46520-255">In addition, in order to query WMI, local administrator credentials are required.</span></span>

<span data-ttu-id="46520-256">*¿Por qué se muestran solo las 10 recomendaciones principales?*</span><span class="sxs-lookup"><span data-stu-id="46520-256">*Why display only the top 10 recommendations?*</span></span>

* <span data-ttu-id="46520-257">En lugar de darle una lista exhaustiva y abrumadora de tareas, se recomienda centrarse primero en las recomendaciones prioritarias.</span><span class="sxs-lookup"><span data-stu-id="46520-257">Instead of giving you an exhaustive overwhelming list of tasks, we recommend that you focus on addressing the prioritized recommendations first.</span></span> <span data-ttu-id="46520-258">Después de aplicarlas, se mostrarán más recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="46520-258">After you address them, additional recommendations will become available.</span></span> <span data-ttu-id="46520-259">Si prefiere ver una lista detallada, puede ver todas las recomendaciones mediante la búsqueda de registros de OMS.</span><span class="sxs-lookup"><span data-stu-id="46520-259">If you prefer to see the detailed list, you can view all recommendations using the OMS log search.</span></span>

<span data-ttu-id="46520-260">*¿Se puede hacer caso omiso de una recomendación?*</span><span class="sxs-lookup"><span data-stu-id="46520-260">*Is there a way to ignore a recommendation?*</span></span>

* <span data-ttu-id="46520-261">Sí, consulte la sección [Omisión de las recomendaciones](#ignore-recommendations) anterior.</span><span class="sxs-lookup"><span data-stu-id="46520-261">Yes, see [Ignore recommendations](#ignore-recommendations) section above.</span></span>

## <a name="next-steps"></a><span data-ttu-id="46520-262">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="46520-262">Next steps</span></span>
* <span data-ttu-id="46520-263">[Búsquedas de registros en Log Analytics](log-analytics-log-searches.md) para más información sobre cómo ver recomendaciones y datos de evaluación de SQL detallados.</span><span class="sxs-lookup"><span data-stu-id="46520-263">[Search logs](log-analytics-log-searches.md) to view detailed SQL Assessment data and recommendations.</span></span>

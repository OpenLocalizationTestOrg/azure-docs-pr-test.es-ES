---
title: "búsquedas de aaaLog en análisis de registros de OMS | Documentos de Microsoft"
description: "Necesita un tooretrieve de búsqueda de registro en los datos de análisis de registros.  Este artículo describe cómo el nuevo registro de las búsquedas se usan en el análisis de registros y proporciona los conceptos que se deben toounderstand antes de crear uno."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="06d6a-104">Descripción de las búsquedas de registros en Log Analytics</span><span class="sxs-lookup"><span data-stu-id="06d6a-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="06d6a-105">Este artículo describen las búsquedas de registros de análisis de registros de Azure mediante el lenguaje de consulta nueva Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="06d6a-106">Puede obtener más información sobre el nuevo lenguaje de Hola y obtener Hola procedimiento tooupgrade el área de trabajo en [actualizar la búsqueda de registros de toonew de área de trabajo de análisis de registros de Azure](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="06d6a-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="06d6a-107">Si el área de trabajo no se ha actualizado toohello nuevo lenguaje de consulta, se debe hacer referencia demasiado[buscar datos mediante búsquedas de registros de análisis de registros](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="06d6a-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="06d6a-108">Necesita un tooretrieve de búsqueda de registro en los datos de análisis de registros.</span><span class="sxs-lookup"><span data-stu-id="06d6a-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="06d6a-109">Si se están analizando los datos en el portal de hello, configurar una regla de alerta toobe una notificación de una condición determinada o recuperar datos mediante Hola API de análisis de registros, usará un datos de hello toospecify de búsqueda de registro que desee.</span><span class="sxs-lookup"><span data-stu-id="06d6a-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="06d6a-110">Este artículo describe cómo se usan las búsquedas de registros en Log Analytics y proporciona los conceptos que debe comprender antes de crear una.</span><span class="sxs-lookup"><span data-stu-id="06d6a-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="06d6a-111">Vea hello [pasos siguientes](#next-steps) sección para obtener más información sobre cómo crear y editar búsquedas de registros y de referencias en el lenguaje de consulta de Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="06d6a-112">Dónde se utilizan las búsquedas de registros</span><span class="sxs-lookup"><span data-stu-id="06d6a-112">Where log searches are used</span></span>

<span data-ttu-id="06d6a-113">que va a usar búsquedas de registros de análisis de registros de diferentes maneras de Hola Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="06d6a-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="06d6a-114">**Portales.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-114">**Portals.**</span></span> <span data-ttu-id="06d6a-115">Puede realizar un análisis de datos interactivo en el repositorio de hello con hello [portal de la búsqueda de registro](log-analytics-log-search-log-search-portal.md) o hello [portal Advanced Analytics](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="06d6a-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="06d6a-116">Esto le permite tooedit la consultar y analizar los resultados de hello en una variedad de formatos y visualizaciones.</span><span class="sxs-lookup"><span data-stu-id="06d6a-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="06d6a-117">Mayoría de las consultas que cree se iniciará en uno de los portales de hello y, a continuación, copia una vez que compruebe que funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="06d6a-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="06d6a-118">**Reglas de alertas.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-118">**Alert rules.**</span></span> <span data-ttu-id="06d6a-119">[Las reglas de alertas](log-analytics-alerts.md) identifican de manera proactiva los problemas de datos del área de trabajo.</span><span class="sxs-lookup"><span data-stu-id="06d6a-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="06d6a-120">Cada regla de alertas se basa en una búsqueda de registros que se ejecuta automáticamente a intervalos regulares.</span><span class="sxs-lookup"><span data-stu-id="06d6a-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="06d6a-121">resultados de Hello son toodetermine inspeccionado si se debe crear una alerta.</span><span class="sxs-lookup"><span data-stu-id="06d6a-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="06d6a-122">**Vistas.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-122">**Views.**</span></span>  <span data-ttu-id="06d6a-123">Puede crear visualizaciones de toobe de datos incluidos en los paneles de usuario con [Diseñador de vistas](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="06d6a-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="06d6a-124">Búsquedas de registros proporcionan datos Hola utilizados por [iconos](log-analytics-view-designer-tiles.md) y [elementos de visualización](log-analytics-view-designer-parts.md) en cada vista.</span><span class="sxs-lookup"><span data-stu-id="06d6a-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="06d6a-125">Puede obtener detalles de elementos de visualización en búsqueda de registros tooperform portal un análisis más profundo en datos Hola Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="06d6a-126">**Exportación.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-126">**Export.**</span></span>  <span data-ttu-id="06d6a-127">Cuando se exportan datos desde tooExcel de área de trabajo de análisis de registros de Hola o [Power BI](log-analytics-powerbi.md), se crea un tooexport de datos de registro búsqueda toodefine Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="06d6a-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-128">**PowerShell.**</span></span> <span data-ttu-id="06d6a-129">Puede ejecutar un script de PowerShell desde una línea de comandos o un runbook de automatización de Azure que usa [AzureRmOperationalInsightsSearchResults Get](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve datos de análisis de registros.</span><span class="sxs-lookup"><span data-stu-id="06d6a-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="06d6a-130">Este cmdlet requiere una tooretrieve de datos de consulta toodetermine Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="06d6a-131">**API de Log Analytics.**</span><span class="sxs-lookup"><span data-stu-id="06d6a-131">**Log Analytics API.**</span></span>  <span data-ttu-id="06d6a-132">Hola [API de búsqueda de registro de análisis de registros](log-analytics-log-search-api.md) permite a cualquier cliente de la API de REST tooretrieve datos de área de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="06d6a-133">solicitud de API de Hello incluye una consulta que se ejecuta en tooretrieve de datos de análisis de registros toodetermine Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Búsqueda de registros](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="06d6a-135">Organización de los datos de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="06d6a-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="06d6a-136">Cuando se compila una consulta, primero debe determinar las tablas que tienen datos de Hola que está buscando.</span><span class="sxs-lookup"><span data-stu-id="06d6a-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="06d6a-137">Cada [origen de datos](log-analytics-data-sources.md) y [solución](../operations-management-suite/operations-management-suite-solutions.md) almacena sus datos en tablas dedicadas en el área de trabajo de análisis de registros de Hola.</span><span class="sxs-lookup"><span data-stu-id="06d6a-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="06d6a-138">Documentación para cada origen de datos y la solución incluye nombre Hola Hola del tipo de datos que crea y una descripción de cada una de sus propiedades.</span><span class="sxs-lookup"><span data-stu-id="06d6a-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="06d6a-139">Muchas consultas sólo necesitarán datos de las tablas de una sola, pero otras personas pueden utilizar una variedad de opciones tooinclude datos de varias tablas.</span><span class="sxs-lookup"><span data-stu-id="06d6a-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Tablas](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="06d6a-141">Escribir una consulta</span><span class="sxs-lookup"><span data-stu-id="06d6a-141">Writing a query</span></span>
<span data-ttu-id="06d6a-142">Hola base del registro de las búsquedas en análisis de registros es [un lenguaje de consulta de una amplia](https://docs.loganalytics.io/) que le permite recuperar y analizar datos del repositorio de hello en una variedad de formas.</span><span class="sxs-lookup"><span data-stu-id="06d6a-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="06d6a-143">Este mismo idioma de consulta se utiliza para [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="06d6a-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="06d6a-144">Aprender cómo toowrite una consulta es crítico toocreating búsquedas de registros de análisis de registros.</span><span class="sxs-lookup"><span data-stu-id="06d6a-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="06d6a-145">Normalmente se empieza por consultas básicas y, a continuación, toouse de progreso más avanzadas funciones de los requisitos se vuelven más complejos.</span><span class="sxs-lookup"><span data-stu-id="06d6a-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="06d6a-146">estructura básica de Hola de una consulta es una tabla de origen seguida de una serie de operadores separados por un carácter de canalización `|`.</span><span class="sxs-lookup"><span data-stu-id="06d6a-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="06d6a-147">Puede encadenar varios operadores toorefine Hola de datos y realizar las funciones avanzadas.</span><span class="sxs-lookup"><span data-stu-id="06d6a-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="06d6a-148">Por ejemplo, suponga que desea toofind Hola top 10 equipos con hello mayoría de los eventos de error sobre Hola día pasado.</span><span class="sxs-lookup"><span data-stu-id="06d6a-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="06d6a-149">O tal vez desee toofind equipos que no han tenido un latido en hello último día.</span><span class="sxs-lookup"><span data-stu-id="06d6a-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="06d6a-150">¿Qué le parece un gráfico de líneas con la utilización del procesador de Hola para cada equipo de la semana pasada?</span><span class="sxs-lookup"><span data-stu-id="06d6a-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="06d6a-151">Puede ver en estos ejemplos de rápido que independientemente de su tipo de Hola de datos que está trabajando con, Hola estructura de consulta de hello es similar.</span><span class="sxs-lookup"><span data-stu-id="06d6a-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="06d6a-152">Puede dividirla en distintos pasos se envían Hola datos resultante de un comando mediante el siguiente comando de hello canalización toohello.</span><span class="sxs-lookup"><span data-stu-id="06d6a-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="06d6a-153">Para obtener documentación completa sobre el lenguaje de consulta de análisis de registros de Azure Hola incluidos tutoriales y referencia del lenguaje, vea hello [documentación del lenguaje de consulta de análisis de registros de Azure](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="06d6a-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="06d6a-154">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="06d6a-154">Next steps</span></span>

- <span data-ttu-id="06d6a-155">Obtenga información acerca de hello [portales que utiliza toocreate y editar búsquedas de registros](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="06d6a-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="06d6a-156">Desproteger un [tutorial sobre cómo escribir consultas](https://go.microsoft.com/fwlink/?linkid=856078) utilizando Hola nuevo lenguaje de consulta.</span><span class="sxs-lookup"><span data-stu-id="06d6a-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>

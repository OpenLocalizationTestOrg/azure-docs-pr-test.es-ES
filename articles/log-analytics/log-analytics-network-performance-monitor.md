---
title: "Solución Monitor de rendimiento de red en Azure Log Analytics | Microsoft Docs"
description: El Monitor de rendimiento de red de Azure Log Analytics le ayuda a supervisar el rendimiento de las redes en tiempo real con la finalidad de detectar y encontrar cuellos de botella en el rendimiento de la red.
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 5b9c9c83-3435-488c-b4f6-7653003ae18a
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.openlocfilehash: c6568e491429f6046ab164ab5eacd0ae5846e201
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="network-performance-monitor-solution-in-log-analytics"></a><span data-ttu-id="13833-103">Solución Monitor de rendimiento de red de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="13833-103">Network Performance Monitor solution in Log Analytics</span></span>

![Símbolo de Network Performance Monitor](./media/log-analytics-network-performance-monitor/npm-symbol.png)

<span data-ttu-id="13833-105">En este documento se describe la instalación y el uso de la solución Monitor de rendimiento de red de Log Analytics, que le ayuda a supervisar el rendimiento de sus redes, prácticamente en tiempo real, para detectar y encontrar los cuellos de botella en el rendimiento de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-105">This document describes how to set-up and use the Network Performance Monitor solution in Log Analytics, which helps you monitor the performance of your networks-in near real-time-to detect and locate network performance bottlenecks.</span></span> <span data-ttu-id="13833-106">Con la solución Monitor de rendimiento de red, puede supervisar la pérdida y la latencia entre dos redes, subredes o servidores.</span><span class="sxs-lookup"><span data-stu-id="13833-106">With the Network Performance Monitor solution, you can monitor the loss and latency between two networks, subnets or servers.</span></span> <span data-ttu-id="13833-107">Monitor de rendimiento de red detecta posibles problemas de red, como enrutamiento del tráfico a "agujeros negros", errores de enrutamiento y problemas que los métodos de supervisión de red convencionales no pueden encontrar.</span><span class="sxs-lookup"><span data-stu-id="13833-107">Network Performance Monitor detects network issues like traffic blackholing, routing errors, and issues that conventional network monitoring methods are not able to detect.</span></span> <span data-ttu-id="13833-108">Monitor de rendimiento de red genera alertas y notifica cómo y cuándo se supera un umbral en un vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-108">Network Performance Monitor generates alerts and notifies as and when a threshold is breached for a network link.</span></span> <span data-ttu-id="13833-109">El sistema puede aprender automáticamente estos umbrales, o bien puede configurarlos para usar reglas de alerta personalizadas.</span><span class="sxs-lookup"><span data-stu-id="13833-109">These thresholds can be learned automatically by the system or you can configure them to use custom alert rules.</span></span> <span data-ttu-id="13833-110">Monitor de rendimiento de red garantiza la detección oportuna de los problemas de rendimiento de red y localiza el origen del problema en un segmento o dispositivo de red determinado.</span><span class="sxs-lookup"><span data-stu-id="13833-110">Network Performance Monitor ensures timely detection of network performance issues and localizes the source of the problem to a particular network segment or device.</span></span>

<span data-ttu-id="13833-111">Puede encontrar problemas de red con el panel de la solución, que muestra información resumida sobre la red, incluidos recientes eventos relativos al estado de la red, vínculos de red incorrectos y vínculos de subred que afrontan una elevada pérdida de paquetes y latencia.</span><span class="sxs-lookup"><span data-stu-id="13833-111">You can detect network issues with the solution dashboard which displays summarized information about your network including recent network health events, unhealthy network links, and subnetwork links that are facing high packet loss and latency.</span></span> <span data-ttu-id="13833-112">Puede explorar un vínculo de red en profundidad para ver el estado actual de vínculos de subred, así como los de nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="13833-112">You can drill-down into a network link to view the current health status of subnetwork links as well as node-to-node links.</span></span> <span data-ttu-id="13833-113">También puede ver la tendencia histórica de pérdida y la latencia en los niveles de red, subred y nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="13833-113">You can also view the historical trend of loss and latency at the network, subnetwork, and node-to-node level.</span></span> <span data-ttu-id="13833-114">Puede encontrar problemas de red transitorios visualizando gráficos de tendencias históricas de pérdida de paquetes y latencia, y buscar cuellos de botella de red en un mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-114">You can detect transient network issues by viewing historical trend charts for packet loss and latency and locate network bottlenecks on a topology map.</span></span> <span data-ttu-id="13833-115">El gráfico interactivo de la topología le permite visualizar las rutas de red de salto a salto y determinar el origen del problema.</span><span class="sxs-lookup"><span data-stu-id="13833-115">The interactive topology graph allows you to visualize the hop-by-hop network routes and determine the source of the problem.</span></span> <span data-ttu-id="13833-116">Al igual que otras soluciones, puede utilizar la búsqueda de registros para distintos requisitos de análisis con el objetivo de crear informes personalizados basados en los datos recopilados por Monitor de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-116">Like any other solutions, you can use Log Search for various analytics requirements to create custom reports based on the data collected by Network Performance Monitor.</span></span>

<span data-ttu-id="13833-117">Esta solución emplea transacciones sintéticas como el mecanismo principal para encontrar errores en la red.</span><span class="sxs-lookup"><span data-stu-id="13833-117">The solution uses synthetic transactions as a primary mechanism to detect network faults.</span></span> <span data-ttu-id="13833-118">Por ello, puede utilizarla con independencia del modelo o el proveedor del dispositivo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-118">So, you can use it without regard for a specific network device's vendor or model.</span></span> <span data-ttu-id="13833-119">Funciona en entornos locales, híbridos y en la nube (IaaS).</span><span class="sxs-lookup"><span data-stu-id="13833-119">It works across on-premises, cloud (IaaS), and hybrid environments.</span></span> <span data-ttu-id="13833-120">La solución detecta automáticamente la topología y las diversas rutas de su red.</span><span class="sxs-lookup"><span data-stu-id="13833-120">The solution automatically discovers the network topology and various routes in your network.</span></span>

<span data-ttu-id="13833-121">Los productos de supervisión de red habituales se centran en la supervisión del estado de los dispositivos de red (enrutadores, conmutadores, etc.), pero no aportan información sobre la calidad real de conectividad de red entre dos puntos, una ventaja que sí ofrece Monitor de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-121">Typical network monitoring products focus on monitoring the network device (routers, switches etc.) health but do not provide insights into the actual quality of network connectivity between two points, which Network Performance Monitor does.</span></span>

### <a name="using-the-solution-standalone"></a><span data-ttu-id="13833-122">Uso de la solución de forma independiente</span><span class="sxs-lookup"><span data-stu-id="13833-122">Using the solution standalone</span></span>
<span data-ttu-id="13833-123">Si desea supervisar la calidad de las conexiones de red entre sus cargas de trabajo, redes, centros de datos u oficinas cruciales, puede usar la solución Monitor de rendimiento de red por sí sola para vigilar el estado de la conectividad entre:</span><span class="sxs-lookup"><span data-stu-id="13833-123">If you want to monitor the quality of network connections between their critical workloads, networks, datacenters or office sites, then you can use the Network Performance Monitor solution by itself to monitor connectivity health between:</span></span>

* <span data-ttu-id="13833-124">varios centros de datos u oficinas que estén conectados con una red pública o privada;</span><span class="sxs-lookup"><span data-stu-id="13833-124">multiple datacenters or office sites that are connected using a public or private network</span></span>
* <span data-ttu-id="13833-125">cargas de trabajo que ejecuten aplicaciones de línea de negocio;</span><span class="sxs-lookup"><span data-stu-id="13833-125">critical workloads that are running line of business applications</span></span>
* <span data-ttu-id="13833-126">servicios en la nube pública, como Microsoft Azure o Amazon Web Services (AWS) y redes locales, si tiene a su disposición IaaS (VM) y ha configurado las puertas de enlace para permitir la comunicación entre las redes locales y en la nube;</span><span class="sxs-lookup"><span data-stu-id="13833-126">public cloud services like Microsoft Azure or Amazon Web Services (AWS) and on-premises networks, if you have IaaS (VM) available and you have gateways configured to allow communication between on-premises networks and cloud networks</span></span>
* <span data-ttu-id="13833-127">redes locales y de Azure cuando utilice ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="13833-127">Azure and on-premises networks when you use Express Route</span></span>

### <a name="using-the-solution-with-other-networking-tools"></a><span data-ttu-id="13833-128">Uso de la solución con otras herramientas de redes</span><span class="sxs-lookup"><span data-stu-id="13833-128">Using the solution with other networking tools</span></span>
<span data-ttu-id="13833-129">Si desea supervisar una aplicación de línea de negocio, puede usar la solución Monitor de rendimiento de red como un complemento a otras herramientas de red.</span><span class="sxs-lookup"><span data-stu-id="13833-129">If you want to monitor a line of business application, you can use the Network Performance Monitor solution as a companion solution to other network tools.</span></span> <span data-ttu-id="13833-130">Una red lenta puede conllevar que las aplicaciones se ralenticen; Monitor de rendimiento de red puede ayudarlo a investigar los problemas de rendimiento de las aplicaciones que se deban a defectos de red subyacentes.</span><span class="sxs-lookup"><span data-stu-id="13833-130">A slow network can lead to slow applications and Network Performance Monitor can help you investigate application performance issues that are caused by underlying networking issues.</span></span> <span data-ttu-id="13833-131">Como la solución no precisa ningún tipo de acceso a los dispositivos de red, el administrador de aplicaciones no tiene que depender de que un equipo de redes le facilite información sobre cómo la red afecta a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="13833-131">Because the solution does not require any access to network devices, the application administrator doesn't need to rely on a networking team to provide information about how the network is affecting applications.</span></span>

<span data-ttu-id="13833-132">Además, si ya ha invertido en otras herramientas de supervisión de red, nuestra solución puede actuar como un complemento para estas, porque la mayoría de las soluciones convencionales de supervisión de red no ofrecen información sobre las métricas de rendimiento de red de un extremo a otro, como la pérdida y la latencia.</span><span class="sxs-lookup"><span data-stu-id="13833-132">Also, if you already invest in other network monitoring tools, then the solution can complement those tools because most traditional network monitoring solutions do not provide insights into end-to-end network performance metrics like loss and latency.</span></span>  <span data-ttu-id="13833-133">La solución Monitor de rendimiento de red puede ayudar a suplir esa laguna.</span><span class="sxs-lookup"><span data-stu-id="13833-133">The Network Performance Monitor solution can help fill that gap.</span></span>

## <a name="installing-and-configuring-agents-for-the-solution"></a><span data-ttu-id="13833-134">Instalación y configuración de agentes para la solución</span><span class="sxs-lookup"><span data-stu-id="13833-134">Installing and configuring agents for the solution</span></span>
<span data-ttu-id="13833-135">Use los procesos básicos para instalar agentes en [Conexión de equipos Windows a Log Analytics](log-analytics-windows-agents.md) y [Conexión de Operations Manager con Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="13833-135">Use the basic processes to install agents at [Connect Windows computers to Log Analytics](log-analytics-windows-agents.md) and [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

> [!NOTE]
> <span data-ttu-id="13833-136">Debe instalar al menos 2 agentes si desea disponer de suficientes datos para detectar y supervisar los recursos de red.</span><span class="sxs-lookup"><span data-stu-id="13833-136">You'll need to install at least 2 agents in order to have enough data to discover and monitor your network resources.</span></span> <span data-ttu-id="13833-137">De lo contrario, la solución permanecerá en un estado de configuración hasta que instale y configure más agentes.</span><span class="sxs-lookup"><span data-stu-id="13833-137">Otherwise, the solution will remain in a configuring state until you install and configure additional agents.</span></span>
>
>

### <a name="where-to-install-the-agents"></a><span data-ttu-id="13833-138">Dónde instalar los agentes</span><span class="sxs-lookup"><span data-stu-id="13833-138">Where to install the agents</span></span>
<span data-ttu-id="13833-139">Antes de instalar los agentes, tenga en cuenta la topología de la red y qué partes de esta última desea supervisar.</span><span class="sxs-lookup"><span data-stu-id="13833-139">Before you install agents, consider the topology of your network and what parts of the network you want to monitor.</span></span> <span data-ttu-id="13833-140">Se recomienda instalar más de un agente para cada subred que desee supervisar.</span><span class="sxs-lookup"><span data-stu-id="13833-140">We recommend that you install more than one agent for each subnet that you want to monitor.</span></span> <span data-ttu-id="13833-141">Dicho de otro modo, para cada subred que desee supervisar, elija dos o más servidores o máquinas virtuales e instale el agente en ellos.</span><span class="sxs-lookup"><span data-stu-id="13833-141">In other words, for every subnet that you want to monitor, choose two or more servers or VMs and install the agent on them.</span></span>

<span data-ttu-id="13833-142">Si no está seguro de la topología de la red, instale los agentes en servidores con cargas de trabajo críticas donde desee supervisar el rendimiento de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-142">If you are unsure about the topology of your network, install the agents on servers with critical workloads where you want to monitor the network performance.</span></span> <span data-ttu-id="13833-143">Por ejemplo, es posible que desee efectuar un seguimiento de una conexión de red entre un servidor web y uno en el que se ejecute SQL Server.</span><span class="sxs-lookup"><span data-stu-id="13833-143">For example, you might want to keep track of a network connection between a Web server and a server running SQL Server.</span></span> <span data-ttu-id="13833-144">En este ejemplo, podría instalar un agente en ambos servidores.</span><span class="sxs-lookup"><span data-stu-id="13833-144">In this example, you'd install an agent on both servers.</span></span>

<span data-ttu-id="13833-145">Los agentes supervisan la conectividad de red (los vínculos) entre los hosts, no los propios hosts.</span><span class="sxs-lookup"><span data-stu-id="13833-145">Agents monitor network connectivity (links) between hosts -- not the hosts themselves.</span></span> <span data-ttu-id="13833-146">Por lo tanto, para supervisar un vínculo de red, debe instalar agentes en ambos puntos de conexión del vínculo en cuestión.</span><span class="sxs-lookup"><span data-stu-id="13833-146">So, to monitor a network link, you must install agents on both endpoints of that link.</span></span>

### <a name="configure-agents"></a><span data-ttu-id="13833-147">Configuración de los agentes</span><span class="sxs-lookup"><span data-stu-id="13833-147">Configure agents</span></span>

<span data-ttu-id="13833-148">Si piensa usar el protocolo ICMP para las transacciones sintéticas, tiene que habilitar las siguientes reglas de firewall para utilizar ICMP de forma confiable:</span><span class="sxs-lookup"><span data-stu-id="13833-148">If you intend to use the ICMP protocol for synthetic transactions, you need to enable the following firewall rules for reliably utilizing ICMP:</span></span>

```
netsh advfirewall firewall add rule name="NPMDICMPV4Echo" protocol="icmpv4:8,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6Echo" protocol="icmpv6:128,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4DestinationUnreachable" protocol="icmpv4:3,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6DestinationUnreachable" protocol="icmpv6:1,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4TimeExceeded" protocol="icmpv4:11,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6TimeExceeded" protocol="icmpv6:3,any" dir=in action=allow
```


<span data-ttu-id="13833-149">Si planea usar el protocolo TCP, tiene que abrir los puertos de firewall en esos equipos a fin de asegurarse de que los agentes puedan comunicarse.</span><span class="sxs-lookup"><span data-stu-id="13833-149">If you intend to use the TCP protocol you need to open firewall ports for those computers to ensure that agents can communicate.</span></span> <span data-ttu-id="13833-150">Tiene que descargar y ejecutar el [script de PowerShell EnableRules.ps1](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) sin parámetros en una ventana de PowerShell con privilegios administrativos.</span><span class="sxs-lookup"><span data-stu-id="13833-150">You need to download and then run the [EnableRules.ps1 PowerShell script](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) without any parameters in a PowerShell window with administrative privileges.</span></span>

<span data-ttu-id="13833-151">El script crea las claves del Registro que necesita el Monitor de rendimiento de red y genera reglas del firewall de Windows para permitir que los agentes establezcan conexiones TCP entre sí.</span><span class="sxs-lookup"><span data-stu-id="13833-151">The script creates registry keys required by the Network Performance Monitor and it creates Windows firewall rules to allow agents to create TCP connections with each other.</span></span> <span data-ttu-id="13833-152">Las claves del Registro que crea el script también especifican si se deben escribir los registros de depuración y la ruta del archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="13833-152">The registry keys created by the script also specify whether to log the debug logs and the path for the logs file.</span></span> <span data-ttu-id="13833-153">Asimismo, define el puerto TCP del agente empleado para establecer la comunicación.</span><span class="sxs-lookup"><span data-stu-id="13833-153">It also defines the agent TCP port used for communication.</span></span> <span data-ttu-id="13833-154">El script establece automáticamente los valores de estas claves, por lo que no debe cambiarlas manualmente.</span><span class="sxs-lookup"><span data-stu-id="13833-154">The values for these keys are automatically set by the script, so you should not manually change these keys.</span></span>

<span data-ttu-id="13833-155">El puerto que se abre de forma predeterminada es 8084.</span><span class="sxs-lookup"><span data-stu-id="13833-155">The port opened by default is 8084.</span></span> <span data-ttu-id="13833-156">Puede utilizar un puerto personalizado especificando el parámetro `portNumber` en el script.</span><span class="sxs-lookup"><span data-stu-id="13833-156">You can use a custom port by providing the parameter `portNumber` to the script.</span></span> <span data-ttu-id="13833-157">Sin embargo, se debe utilizar el mismo puerto en todos los equipos en los que se ejecute el script.</span><span class="sxs-lookup"><span data-stu-id="13833-157">However, the same port should be used on all the computers where the script is run.</span></span>

> [!NOTE]
> <span data-ttu-id="13833-158">El script EnableRules.ps1 solo configura reglas del firewall de Windows en el equipo donde lo ejecute.</span><span class="sxs-lookup"><span data-stu-id="13833-158">The EnableRules.ps1 script configures Windows firewall rules only on the computer where the script is run.</span></span> <span data-ttu-id="13833-159">Si tiene un firewall de red, debe asegurarse de que permite el tráfico destinado al puerto TCP que esté utilizando Monitor de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-159">If you have a network firewall, you should make sure that it allows traffic destined for the TCP port being used by Network Performance Monitor.</span></span>
>
>

## <a name="configuring-the-solution"></a><span data-ttu-id="13833-160">Configuración de la solución</span><span class="sxs-lookup"><span data-stu-id="13833-160">Configuring the solution</span></span>
<span data-ttu-id="13833-161">Utilice la siguiente información para instalar y configurar la solución.</span><span class="sxs-lookup"><span data-stu-id="13833-161">Use the following information to install and configure the solution.</span></span>

1. <span data-ttu-id="13833-162">La solución Monitor de rendimiento de red adquiere datos de equipos que ejecuten Windows Server 2008 SP 1 o posterior, o bien Windows 7 SP1 o posterior, que son los mismos requisitos de Microsoft Monitoring Agent (MMA).</span><span class="sxs-lookup"><span data-stu-id="13833-162">The Network Performance Monitor solution acquires data from computers running Windows Server 2008 SP 1 or later or Windows 7 SP1 or later, which are the same requirements as the Microsoft Monitoring Agent (MMA).</span></span> <span data-ttu-id="13833-163">Los agentes NPM se pueden ejecutar también en sistemas operativos escritorio/cliente de Windows (Windows 10, Windows 8.1, Windows 8 y Windows 7).</span><span class="sxs-lookup"><span data-stu-id="13833-163">NPM agents can also run on Windows desktop/client operating systems (Windows 10, Windows 8.1, Windows 8 and Windows 7).</span></span>
    >[!NOTE]
    ><span data-ttu-id="13833-164">Los agentes para sistemas operativos de servidor de Windows admiten TCP e ICMP como protocolos de transacción sintética.</span><span class="sxs-lookup"><span data-stu-id="13833-164">The agents for Windows server operating systems support both TCP and ICMP as the protocols for synthetic transaction.</span></span> <span data-ttu-id="13833-165">Pero los agentes para sistemas operativos de cliente de Windows admiten solo ICMP como protocolo para la transacción sintética.</span><span class="sxs-lookup"><span data-stu-id="13833-165">However, the agents for Windows client operating systems only support ICMP as the protocol for synthetic transaction.</span></span>

2. <span data-ttu-id="13833-166">Agregue la solución Network Performance Monitor (monitor de rendimiento de red) al área de trabajo desde [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) o mediante el proceso descrito en el artículo sobre [incorporación de soluciones de Log Analytics desde la Galería de soluciones](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="13833-166">Add the Network Performance Monitor solution to your workspace from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>  
   <span data-ttu-id="13833-167">![Símbolo del Network Performance Monitor](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span><span class="sxs-lookup"><span data-stu-id="13833-167">![Network Performance Monitor symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span></span>
3. <span data-ttu-id="13833-168">En el portal OMS, verá un icono nuevo titulado **Monitor de rendimiento de red** con el mensaje *La solución necesita una configuración adicional*.</span><span class="sxs-lookup"><span data-stu-id="13833-168">In the OMS portal, you'll see a new tile titled **Network Performance Monitor** with the message *Solution requires additional configuration*.</span></span> <span data-ttu-id="13833-169">Debe configurar la solución para que agregue redes según las subredes y los nodos detectados por los agentes.</span><span class="sxs-lookup"><span data-stu-id="13833-169">You'll need to configure the solution to add networks based on subnetworks and nodes that are discovered by agents.</span></span> <span data-ttu-id="13833-170">Haga clic en **Monitor de rendimiento de red** para empezar a configurar la red predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-170">Click **Network Performance Monitor** to start configuring the default network.</span></span>  
   <span data-ttu-id="13833-171">![La solución necesita una configuración adicional](./media/log-analytics-network-performance-monitor/npm-config.png)</span><span class="sxs-lookup"><span data-stu-id="13833-171">![solution requires additional configuration](./media/log-analytics-network-performance-monitor/npm-config.png)</span></span>

### <a name="configure-the-solution-with-a-default-network"></a><span data-ttu-id="13833-172">Configuración de la solución con una red predeterminada</span><span class="sxs-lookup"><span data-stu-id="13833-172">Configure the solution with a default network</span></span>
<span data-ttu-id="13833-173">En la página de configuración, verá una única red denominada **Predeterminada**.</span><span class="sxs-lookup"><span data-stu-id="13833-173">On the configuration page, you'll see a single network named **Default**.</span></span> <span data-ttu-id="13833-174">Si no ha definido ninguna red, todas las subredes detectadas automáticamente se colocan en la red Predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-174">When you haven't defined any networks, all the automatically-discovered subnets are placed in the Default network.</span></span>

<span data-ttu-id="13833-175">Siempre que cree una red, se agrega una subred en ella y se quita dicha subred de la red Predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-175">Whenever you create a network, you add a subnet to it and that subnet is removed from the Default network.</span></span> <span data-ttu-id="13833-176">Si elimina una red, se devuelven automáticamente todas sus subredes a la red Predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-176">If you delete a network, all its subnets are automatically returned to the Default network.</span></span>

<span data-ttu-id="13833-177">Dicho de otro modo, la red Predeterminada es el contenedor de todas las subredes que no se incluyan en alguna red definida por el usuario.</span><span class="sxs-lookup"><span data-stu-id="13833-177">In other words, the Default network is the container for all the subnets that are not contained in any user-defined network.</span></span> <span data-ttu-id="13833-178">No puede editar ni eliminar la red Predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-178">You cannot edit or delete the Default network.</span></span> <span data-ttu-id="13833-179">Siempre permanece en el sistema.</span><span class="sxs-lookup"><span data-stu-id="13833-179">It always remains in the system.</span></span> <span data-ttu-id="13833-180">Sin embargo, puede crear todas las redes que necesite.</span><span class="sxs-lookup"><span data-stu-id="13833-180">However, you can create as many networks as you need.</span></span>

<span data-ttu-id="13833-181">En la mayoría de los casos, las subredes de la organización estarán organizadas en más de una red y, por tanto, deberá crear una o más redes para agrupar las subredes de forma lógica.</span><span class="sxs-lookup"><span data-stu-id="13833-181">In most cases, the subnets in your organization will be arranged in more than one network and you should create one or more networks to logically group your subnets.</span></span>

### <a name="create-new-networks"></a><span data-ttu-id="13833-182">Creación de nuevas redes</span><span class="sxs-lookup"><span data-stu-id="13833-182">Create new networks</span></span>
<span data-ttu-id="13833-183">En el Monitor de rendimiento de red, una red es un contenedor de subredes.</span><span class="sxs-lookup"><span data-stu-id="13833-183">A network in Network Performance Monitor is a container for subnets.</span></span> <span data-ttu-id="13833-184">Puede crear una red con cualquier nombre que desee y agregarle subredes.</span><span class="sxs-lookup"><span data-stu-id="13833-184">You can create a network with any name that you want and add subnets to the network.</span></span> <span data-ttu-id="13833-185">Por ejemplo, puede crear una red denominada "*Edificio1*" y, después, agregar subredes, o bien puede crear una red denominada *DMZ* y, luego, agregar a ella todas las subredes que pertenezcan a la red perimetral.</span><span class="sxs-lookup"><span data-stu-id="13833-185">For example, you can create a network named *Building1* and then add subnets, or you can create a network named *DMZ* and then add all subnets belonging to demilitarized zone to this network.</span></span>

#### <a name="to-create-a-new-network"></a><span data-ttu-id="13833-186">Para crear una nueva red</span><span class="sxs-lookup"><span data-stu-id="13833-186">To create a new network</span></span>
1. <span data-ttu-id="13833-187">Haga clic en **Agregar red** y, después, escriba el nombre de red y la descripción.</span><span class="sxs-lookup"><span data-stu-id="13833-187">Click **Add network** and then type the network name and description.</span></span>
2. <span data-ttu-id="13833-188">Seleccione una o varias subredes y, luego, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="13833-188">Select one or more subnets, and then click **Add**.</span></span>
3. <span data-ttu-id="13833-189">Para guardar la configuración, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="13833-189">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="13833-190">![Agregar red](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span><span class="sxs-lookup"><span data-stu-id="13833-190">![add network](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span></span>

### <a name="wait-for-data-aggregation"></a><span data-ttu-id="13833-191">Tiempo de espera hasta que se agreguen los datos</span><span class="sxs-lookup"><span data-stu-id="13833-191">Wait for data aggregation</span></span>
<span data-ttu-id="13833-192">Tras guardar la configuración por primera vez, la solución empezará a recopilar información de latencia y pérdida de paquetes de la red entre los nodos en los que se hayan instalado los agentes.</span><span class="sxs-lookup"><span data-stu-id="13833-192">After you've saved the configuration for first time, the solution starts collecting network packet loss and latency information between the nodes where agents are installed.</span></span> <span data-ttu-id="13833-193">Este proceso puede tardar bastante, en ocasiones más de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="13833-193">This process can take a while, sometimes over 30 minutes.</span></span> <span data-ttu-id="13833-194">Durante este estado, en el icono Monitor de rendimiento de red de la página Información general se muestra un mensaje que dice *Data aggregation in process* (Agregación de datos en curso).</span><span class="sxs-lookup"><span data-stu-id="13833-194">During this state, the Network Performance Monitor tile in the overview page displays a message stating *Data aggregation in process*.</span></span>

![Agregación de datos en curso](./media/log-analytics-network-performance-monitor/npm-aggregation.png)

<span data-ttu-id="13833-196">Cuando se hayan cargado los datos, verá que en el icono Monitor de rendimiento de red se muestra la información actualizada.</span><span class="sxs-lookup"><span data-stu-id="13833-196">When the data has been uploaded, you'll see the Network Performance Monitor tile updated showing data.</span></span>

![Icono Monitor de rendimiento de red](./media/log-analytics-network-performance-monitor/npm-tile.png)

<span data-ttu-id="13833-198">Haga clic en el icono para ver el panel Monitor de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-198">Click the tile to view the Network Performance Monitor dashboard.</span></span>

![Panel Monitor de rendimiento de red](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="edit-monitoring-settings-for-subnets"></a><span data-ttu-id="13833-200">Edición de la configuración de supervisión de subredes</span><span class="sxs-lookup"><span data-stu-id="13833-200">Edit monitoring settings for subnets</span></span>
<span data-ttu-id="13833-201">Se muestran todas las subredes donde se instaló al menos un agente en la pestaña **Subredes** de la página de configuración.</span><span class="sxs-lookup"><span data-stu-id="13833-201">All subnets where at least one agent was installed are listed on the **Subnetworks** tab in the configuration page.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-particular-subnetworks"></a><span data-ttu-id="13833-202">Para habilitar o deshabilitar la supervisión de subredes determinadas</span><span class="sxs-lookup"><span data-stu-id="13833-202">To enable or disable monitoring for particular subnetworks</span></span>
1. <span data-ttu-id="13833-203">Active o desactive la casilla junto a la **Id. de subred** y, luego, asegúrese de que **Usar para la supervisión** esté activada o desactivada, según corresponda.</span><span class="sxs-lookup"><span data-stu-id="13833-203">Select or clear the box next to the **subnetwork ID** and then ensure that **Use for Monitoring** is selected or cleared, as appropriate.</span></span> <span data-ttu-id="13833-204">Puede seleccionar o borrar varias subredes.</span><span class="sxs-lookup"><span data-stu-id="13833-204">You can select or clear multiple subnets.</span></span> <span data-ttu-id="13833-205">Cuando esta casilla se desactiva, no se supervisan las subredes, ya que se actualizarán los agentes para que dejen de hacer ping a los demás agentes.</span><span class="sxs-lookup"><span data-stu-id="13833-205">When disabled, subnetworks are not monitored as the agents will be updated to stop pinging other agents.</span></span>
2. <span data-ttu-id="13833-206">Elija los nodos que desee supervisar de esa subred concreta seleccionándola de la lista y moviendo los nodos pertinentes entre las listas que contienen los nodos supervisados y los que no se supervisan.</span><span class="sxs-lookup"><span data-stu-id="13833-206">Choose the nodes that you want to monitor for a particular subnetwork by selecting the subnetwork from the list and moving the required nodes between the lists containing unmonitored and monitored nodes.</span></span>
   <span data-ttu-id="13833-207">Puede agregar una **descripción** personalizada a la subred, si así lo desea.</span><span class="sxs-lookup"><span data-stu-id="13833-207">You can add a custom **description** to the subnetwork, if you like.</span></span>
3. <span data-ttu-id="13833-208">Para guardar la configuración, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="13833-208">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="13833-209">![Editar la subred](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span><span class="sxs-lookup"><span data-stu-id="13833-209">![edit subnet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span></span>

### <a name="choose-nodes-to-monitor"></a><span data-ttu-id="13833-210">Elección de los nodos que desee supervisar</span><span class="sxs-lookup"><span data-stu-id="13833-210">Choose nodes to monitor</span></span>
<span data-ttu-id="13833-211">En la pestaña **Nodos** se muestran todos los nodos que tienen un agente instalado.</span><span class="sxs-lookup"><span data-stu-id="13833-211">All the nodes that have an agent installed on them are listed in the **Nodes** tab.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-nodes"></a><span data-ttu-id="13833-212">Para habilitar o deshabilitar la supervisión de nodos</span><span class="sxs-lookup"><span data-stu-id="13833-212">To enable or disable monitoring for nodes</span></span>
1. <span data-ttu-id="13833-213">Active o desactive los nodos que desee supervisar o dejar de supervisar.</span><span class="sxs-lookup"><span data-stu-id="13833-213">Select or clear the nodes that you want to monitor or stop monitoring.</span></span>
2. <span data-ttu-id="13833-214">Active la casilla **Usar para la supervisión** o desactívela, según corresponda.</span><span class="sxs-lookup"><span data-stu-id="13833-214">Click **Use for Monitoring**, or clear it, as appropriate.</span></span>
3. <span data-ttu-id="13833-215">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="13833-215">Click **Save**.</span></span>  
   <span data-ttu-id="13833-216">![Habilitar la supervisión de nodos](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span><span class="sxs-lookup"><span data-stu-id="13833-216">![enable node monitoring](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span></span>

### <a name="set-monitoring-rules"></a><span data-ttu-id="13833-217">Conjunto de reglas de supervisión</span><span class="sxs-lookup"><span data-stu-id="13833-217">Set monitoring rules</span></span>
<span data-ttu-id="13833-218">Monitor de rendimiento de red genera eventos de estado sobre la conectividad entre un par de nodos o vínculos de red o subred cuando se supera un umbral.</span><span class="sxs-lookup"><span data-stu-id="13833-218">Network Performance Monitor generates health events about the connectivity between a pair of nodes or subnetwork or network links when a threshold is breached.</span></span> <span data-ttu-id="13833-219">El sistema puede aprender automáticamente estos umbrales, o bien puede configurarlos para usar reglas de alerta personalizadas.</span><span class="sxs-lookup"><span data-stu-id="13833-219">These thresholds can be learned automatically by the system or you can configure them custom alert rules.</span></span>

<span data-ttu-id="13833-220">El sistema crea la *regla predeterminada*, así como un evento de estado siempre que la pérdida o la latencia entre cualquier par de vínculos de red o subred superen el umbral aprendido por el sistema.</span><span class="sxs-lookup"><span data-stu-id="13833-220">The *Default rule* is created by the system and it creates a health event whenever loss or latency between any pair of networks or subnetwork links breaches the system-learned threshold.</span></span> <span data-ttu-id="13833-221">Puede optar por deshabilitar la regla personalizada y crear reglas de supervisión personalizadas.</span><span class="sxs-lookup"><span data-stu-id="13833-221">You can choose to disable the default rule and create custom monitoring rules</span></span>

#### <a name="to-create-custom-monitoring-rules"></a><span data-ttu-id="13833-222">Para crear reglas de supervisión personalizadas</span><span class="sxs-lookup"><span data-stu-id="13833-222">To create custom monitoring rules</span></span>
1. <span data-ttu-id="13833-223">Haga clic en **Agregar regla** en la pestaña **Supervisión** y escriba el nombre y la descripción de la regla.</span><span class="sxs-lookup"><span data-stu-id="13833-223">Click **Add Rule** in the **Monitor** tab and enter the rule name and description.</span></span>
2. <span data-ttu-id="13833-224">Seleccione en la lista el par de vínculos de red o subred que desee supervisar.</span><span class="sxs-lookup"><span data-stu-id="13833-224">Select the pair of network or subnetwork links to monitor from the lists.</span></span>
3. <span data-ttu-id="13833-225">Primero, seleccione la red que contenga las subredes de interés en el menú desplegable de red y, después, elija estas últimas en el menú desplegable de subredes correspondiente.</span><span class="sxs-lookup"><span data-stu-id="13833-225">First select the network in which the first subnetwork/s of interest is contained from the network dropdown, and then select the subnetwork/s from the corresponding subnetwork dropdown.</span></span>
   <span data-ttu-id="13833-226">Seleccione **Todas las subredes** Si desea supervisar todas las subredes de un vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-226">Select **All subnetworks** if you want to monitor all the subnetworks in a network link.</span></span> <span data-ttu-id="13833-227">De forma similar, seleccione las demás subredes que le interesen.</span><span class="sxs-lookup"><span data-stu-id="13833-227">Similarly select the other subnetwork/s of interest.</span></span> <span data-ttu-id="13833-228">Asimismo, puede hacer clic en **Agregar excepción** para excluir de la supervisión determinados vínculos de red de la selección que haya realizado.</span><span class="sxs-lookup"><span data-stu-id="13833-228">And, you can click **Add Exception** to exclude monitoring for particular subnetwork links from the selection you've made.</span></span>
4. <span data-ttu-id="13833-229">Elija entre los protocolos ICMP y TCP para ejecutar transacciones sintéticas.</span><span class="sxs-lookup"><span data-stu-id="13833-229">Choose between ICMP and TCP protocols for executing synthetic transactions.</span></span>
5. <span data-ttu-id="13833-230">Si no desea crear eventos de estado para los elementos que ha seleccionado, desactive **Habilitar Seguimiento de estado en los vínculos que abarca esta regla**.</span><span class="sxs-lookup"><span data-stu-id="13833-230">If you don't want to create health events for the items you've selected, then clear **Enable health monitoring on the links covered by this rule**.</span></span>
6. <span data-ttu-id="13833-231">Elija las condiciones de supervisión.</span><span class="sxs-lookup"><span data-stu-id="13833-231">Choose monitoring conditions.</span></span>
   <span data-ttu-id="13833-232">Puede establecer umbrales personalizados para la generación de eventos de estado escribiendo valores de umbral.</span><span class="sxs-lookup"><span data-stu-id="13833-232">You can set custom thresholds for health event generation by typing threshold values.</span></span> <span data-ttu-id="13833-233">Siempre que el valor de la condición supere el umbral seleccionado para el par de red/subred seleccionado, se generará un evento de estado.</span><span class="sxs-lookup"><span data-stu-id="13833-233">Whenever the value of the condition goes above its selected threshold for the selected network/subnetwork pair, a health event is generated.</span></span>
7. <span data-ttu-id="13833-234">Para guardar la configuración, haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="13833-234">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="13833-235">![Crear una regla de supervisión personalizada](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span><span class="sxs-lookup"><span data-stu-id="13833-235">![create custom monitoring rule](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span></span>

<span data-ttu-id="13833-236">Después de guardar una regla de supervisión, puede integrar esa regla con Administración de alertas haciendo clic en **Crear alerta**.</span><span class="sxs-lookup"><span data-stu-id="13833-236">After you save a monitoring rule, you can integrate that rule with Alert Management by clicking **Create Alert**.</span></span> <span data-ttu-id="13833-237">Se crea automáticamente una regla de alerta con la consulta de búsqueda y se rellenan automáticamente otros parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="13833-237">An alert rule is automatically created with the search query and other required parameters automatically filled-in.</span></span> <span data-ttu-id="13833-238">Mediante una regla de alerta, puede recibir alertas de correo electrónico, además de las alertas existentes dentro de NPM.</span><span class="sxs-lookup"><span data-stu-id="13833-238">Using an alert rule, you can receive email-based alerts, in addition to the existing alerts within NPM.</span></span> <span data-ttu-id="13833-239">Las alertas también pueden desencadenar acciones correctoras con runbooks o se pueden integrar con soluciones de administración de servicios existentes mediante webhooks.</span><span class="sxs-lookup"><span data-stu-id="13833-239">Alerts can also trigger remedial actions with runbooks or they can integrate with existing service management solutions using webhooks.</span></span> <span data-ttu-id="13833-240">Puede hacer clic en **Administrar alerta** para editar la configuración de alertas.</span><span class="sxs-lookup"><span data-stu-id="13833-240">You can click **Manage Alert** to edit the alert settings.</span></span>

### <a name="choose-the-right-protocol-icmp-or-tcp"></a><span data-ttu-id="13833-241">Selección del protocolo adecuado: ICMP o TCP</span><span class="sxs-lookup"><span data-stu-id="13833-241">Choose the right protocol-ICMP or TCP</span></span>

<span data-ttu-id="13833-242">Monitor de rendimiento de red (NPM) utiliza transacciones sintéticas para calcular métricas de rendimiento de red, como la latencia de vínculo y la pérdida de paquetes.</span><span class="sxs-lookup"><span data-stu-id="13833-242">Network Performance Monitor (NPM) uses synthetic transactions to calculate network performance metrics like packet loss and link latency.</span></span> <span data-ttu-id="13833-243">Para comprender esto mejor, piense en un agente de NPM conectado a un extremo de un vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-243">To understand this better, consider an NPM agent connected to one end of a network link.</span></span> <span data-ttu-id="13833-244">Este agente de NPM envía paquetes de sondeo a un segundo agente de NPM conectado a otro extremo de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-244">This NPM agent sends probe packets to a second NPM agent connected to another end of the network.</span></span> <span data-ttu-id="13833-245">El segundo agente responde con paquetes de respuesta.</span><span class="sxs-lookup"><span data-stu-id="13833-245">The second agent replies with response packets.</span></span> <span data-ttu-id="13833-246">Este proceso se repite varias veces.</span><span class="sxs-lookup"><span data-stu-id="13833-246">This process is repeated a few times.</span></span> <span data-ttu-id="13833-247">Al medir el número de respuestas y el tiempo necesario para recibir cada respuesta, el primer agente de NPM evalúa la latencia del vínculo y la pérdida de paquetes.</span><span class="sxs-lookup"><span data-stu-id="13833-247">By measuring the number of replies and time taken to receive each reply, the first NPM agent assesses link latency and packet drops.</span></span>

<span data-ttu-id="13833-248">El formato, el tamaño y la secuencia de estos paquetes se determinan mediante el protocolo que elige al crear reglas de supervisión.</span><span class="sxs-lookup"><span data-stu-id="13833-248">The format, size and sequence of these packets is determined by the protocol that you choose when you create monitoring rules.</span></span> <span data-ttu-id="13833-249">En función del protocolo de los paquetes, los dispositivos de red intermedios (enrutadores, conmutadores, etc.) pueden procesar estos paquetes de forma diferente.</span><span class="sxs-lookup"><span data-stu-id="13833-249">Based on protocol of the packets, the intermediate network devices (routers, switches etc.) might process these packets differently.</span></span> <span data-ttu-id="13833-250">Por consiguiente, la elección del protocolo afecta a la precisión de los resultados.</span><span class="sxs-lookup"><span data-stu-id="13833-250">Consequently, your protocol choice affects the accuracy of the results.</span></span> <span data-ttu-id="13833-251">Asimismo, el protocolo que escoja también determinará si es necesario completar algunos pasos manuales más tras implementar la solución NPM.</span><span class="sxs-lookup"><span data-stu-id="13833-251">And, your protocol choice also determines whether you must take any manual steps after you deploy the NPM solution.</span></span>

<span data-ttu-id="13833-252">NPM le permite elegir entre los protocolos ICMP y TCP para ejecutar transacciones sintéticas.</span><span class="sxs-lookup"><span data-stu-id="13833-252">NPM offers you the choice between ICMP and TCP protocols for executing synthetic transactions.</span></span>
<span data-ttu-id="13833-253">Si elige ICMP al crear una regla de transacciones sintéticas, los agentes de NPM utilizan mensajes de eco ICMP para calcular la latencia de red y la pérdida de paquetes.</span><span class="sxs-lookup"><span data-stu-id="13833-253">If you choose ICMP when you create a synthetic transaction rule, the NPM agents use ICMP ECHO messages to calculate the network latency and packet loss.</span></span> <span data-ttu-id="13833-254">El eco ICMP usa el mismo mensaje que se envía mediante la utilidad de ping convencional.</span><span class="sxs-lookup"><span data-stu-id="13833-254">ICMP ECHO uses the same message that is sent by the conventional Ping utility.</span></span> <span data-ttu-id="13833-255">Cuando se usa TCP como protocolo, los agentes de NPM envían un paquete TCP SYN a través de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-255">When you use TCP as the protocol, NPM agents send TCP SYN packet over the network.</span></span> <span data-ttu-id="13833-256">A continuación, se completa un protocolo de enlace TCP y, posteriormente, se elimina la conexión con paquetes RST.</span><span class="sxs-lookup"><span data-stu-id="13833-256">This is followed by a TCP handshake completion and then removing the connection using RST packets.</span></span>

#### <a name="points-to-consider-before-choosing-the-protocol"></a><span data-ttu-id="13833-257">Puntos que se deben tener en cuenta antes de seleccionar el protocolo</span><span class="sxs-lookup"><span data-stu-id="13833-257">Points to consider before choosing the protocol</span></span>
<span data-ttu-id="13833-258">Antes de elegir un protocolo, tenga en cuenta la siguiente información:</span><span class="sxs-lookup"><span data-stu-id="13833-258">Consider the following information before you choose a protocol to use:</span></span>

##### <a name="discovering-multiple-network-routes"></a><span data-ttu-id="13833-259">Detección de varias rutas de red</span><span class="sxs-lookup"><span data-stu-id="13833-259">Discovering multiple network routes</span></span>
<span data-ttu-id="13833-260">TCP es más preciso cuando se detectan varias rutas y necesita menos agentes en cada subred.</span><span class="sxs-lookup"><span data-stu-id="13833-260">TCP is more accurate when discovering multiple routes and it needs fewer agents in each subnet.</span></span> <span data-ttu-id="13833-261">Por ejemplo, uno o dos agentes que utilicen TCP pueden detectar todas las rutas redundantes entre subredes.</span><span class="sxs-lookup"><span data-stu-id="13833-261">For example, one or two agents using TCP can discover all redundant paths between subnets.</span></span> <span data-ttu-id="13833-262">Sin embargo, se necesitarán varios agentes que utilicen ICMP para lograr resultados similares.</span><span class="sxs-lookup"><span data-stu-id="13833-262">However, you need several agents using ICMP to achieve similar results.</span></span> <span data-ttu-id="13833-263">Con ICMP, si tiene una cantidad *N* de rutas entre dos subredes, necesitará más de 5 veces *N* agentes en una subred de origen o de destino.</span><span class="sxs-lookup"><span data-stu-id="13833-263">Using ICMP, if you have *N* number of routes between two subnets you need more than 5*N* agents in either a source or destination subnet.</span></span>

##### <a name="accuracy-of-results"></a><span data-ttu-id="13833-264">Precisión de los resultados</span><span class="sxs-lookup"><span data-stu-id="13833-264">Accuracy of results</span></span>
<span data-ttu-id="13833-265">Los enrutadores y conmutadores tienden a asignar una prioridad menor a paquetes de eco ICMP en comparación con los paquetes TCP.</span><span class="sxs-lookup"><span data-stu-id="13833-265">Routers and switches tend to assign lower priority to ICMP ECHO packets compared to TCP packets.</span></span> <span data-ttu-id="13833-266">En determinadas situaciones, cuando los dispositivos de red están muy cargados, los datos obtenidos mediante TCP reflejan más fielmente la pérdida y la latencia que experimentan las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="13833-266">In certain situations, when network devices are heavily loaded, the data obtained by TCP more closely reflects the loss and latency experienced by applications.</span></span> <span data-ttu-id="13833-267">Esto ocurre porque la mayoría del tráfico de las aplicaciones fluye a través de TCP.</span><span class="sxs-lookup"><span data-stu-id="13833-267">This occurs because most of the application traffic flows over TCP.</span></span> <span data-ttu-id="13833-268">En tales casos, ICMP proporciona resultados menos precisos en comparación con TCP.</span><span class="sxs-lookup"><span data-stu-id="13833-268">In such cases, ICMP provides less accurate results compared to TCP.</span></span>

##### <a name="firewall-configuration"></a><span data-ttu-id="13833-269">Configuración del firewall</span><span class="sxs-lookup"><span data-stu-id="13833-269">Firewall configuration</span></span>
<span data-ttu-id="13833-270">El protocolo TCP requiere que los paquetes TCP se envíen a un puerto de destino.</span><span class="sxs-lookup"><span data-stu-id="13833-270">TCP protocol requires that TCP packets are sent to a destination port.</span></span> <span data-ttu-id="13833-271">El puerto predeterminado que usan los agentes de NPM es el 8084, si bien puede cambiarse al configurar los agentes.</span><span class="sxs-lookup"><span data-stu-id="13833-271">The default port used by NPM agents is 8084, however you can change this when you configure agents.</span></span> <span data-ttu-id="13833-272">Por lo tanto, debe asegurarse de que los firewalls de red o las reglas de grupo de seguridad de red (en Azure) permitan el tráfico en el puerto.</span><span class="sxs-lookup"><span data-stu-id="13833-272">So, you need to ensure that your network firewalls or NSG rules (in Azure) are allowing traffic on the port.</span></span> <span data-ttu-id="13833-273">También debe asegurarse de que el firewall local en los equipos en los que están instalados los agentes esté configurado para permitir el tráfico en este puerto.</span><span class="sxs-lookup"><span data-stu-id="13833-273">You also need to make sure that the local firewall on the computers where agents are installed is configured to allow traffic on this port.</span></span>

<span data-ttu-id="13833-274">Puede utilizar scripts de PowerShell para configurar reglas de firewall en los equipos que ejecutan Windows, sin bien debe configurar manualmente el firewall de red.</span><span class="sxs-lookup"><span data-stu-id="13833-274">You can use PowerShell scripts to configure firewall rules on your computers running Windows, however you need to configure your network firewall manually.</span></span>

<span data-ttu-id="13833-275">En cambio, ICMP no utiliza ningún puerto.</span><span class="sxs-lookup"><span data-stu-id="13833-275">In contrast, ICMP does not operate using port.</span></span> <span data-ttu-id="13833-276">En la mayoría de los escenarios empresariales, se permite el tráfico ICMP a través de los firewalls para posibilitar el uso de herramientas de diagnóstico de red, como la utilidad de ping.</span><span class="sxs-lookup"><span data-stu-id="13833-276">In most enterprise scenarios, ICMP traffic is permitted through the firewalls to allow you to use network diagnostics tools like the Ping utility.</span></span> <span data-ttu-id="13833-277">Por lo tanto, si puede hacer ping a un equipo desde otro, podrá usar el protocolo ICMP sin necesidad de configurar manualmente los firewalls.</span><span class="sxs-lookup"><span data-stu-id="13833-277">So, if you can Ping one machine from another, then you can use the ICMP protocol without having to configure firewalls manually.</span></span>

> [!NOTE]
> <span data-ttu-id="13833-278">En caso de duda sobre qué protocolo utilizar, elija ICMP para empezar.</span><span class="sxs-lookup"><span data-stu-id="13833-278">In case you are not sure what protocol to use, choose ICMP to start with.</span></span> <span data-ttu-id="13833-279">Si no está satisfecho con los resultados, siempre podrá cambiar a TCP más adelante.</span><span class="sxs-lookup"><span data-stu-id="13833-279">If you are not satisfied with the results, you can always switch to TCP later.</span></span>


#### <a name="how-to-switch-the-protocol"></a><span data-ttu-id="13833-280">Cambio de protocolo</span><span class="sxs-lookup"><span data-stu-id="13833-280">How to switch the protocol</span></span>

<span data-ttu-id="13833-281">Si decide utilizar ICMP durante la implementación, puede cambiar a TCP en cualquier momento editando la regla de supervisión predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13833-281">If you chose to use ICMP during deployment, you can switch to TCP at any time by editing the default monitoring rule.</span></span>

##### <a name="to-edit-the-default-monitoring-rule"></a><span data-ttu-id="13833-282">Edición de la regla de supervisión predeterminada</span><span class="sxs-lookup"><span data-stu-id="13833-282">To edit the default monitoring rule</span></span>
1.  <span data-ttu-id="13833-283">Vaya a **Network Performance** (Rendimiento de red)  > **Monitor** > **Configurar** > **Monitor** y, a continuación, haga clic en **Regla predeterminada**.</span><span class="sxs-lookup"><span data-stu-id="13833-283">Navigate to **Network Performance** > **Monitor** > **Configure** > **Monitor** and then click **Default rule**.</span></span>
2.  <span data-ttu-id="13833-284">Desplácese hasta la sección **Protocolo** y seleccione el protocolo que desee utilizar.</span><span class="sxs-lookup"><span data-stu-id="13833-284">Scroll to the **Protocol** section and select the protocol that you want to use.</span></span>
3.  <span data-ttu-id="13833-285">Haga clic en **Guardar** para aplicar el cambio.</span><span class="sxs-lookup"><span data-stu-id="13833-285">Click **Save** to apply the setting.</span></span>

<span data-ttu-id="13833-286">Aunque la regla predeterminada use un protocolo específico, puede crear nuevas reglas con un protocolo diferente.</span><span class="sxs-lookup"><span data-stu-id="13833-286">Even if the default rule is using a specific protocol, you can create new rules with a different protocol.</span></span> <span data-ttu-id="13833-287">Incluso puede crear una combinación de reglas en la que algunas usen ICMP y otras utilicen TCP.</span><span class="sxs-lookup"><span data-stu-id="13833-287">You can even create a mix of rules where some of the rules use ICMP and another uses TCP.</span></span>




## <a name="data-collection-details"></a><span data-ttu-id="13833-288">Detalles de la recopilación de datos</span><span class="sxs-lookup"><span data-stu-id="13833-288">Data collection details</span></span>
<span data-ttu-id="13833-289">El Monitor de rendimiento de red usa los paquetes de protocolo de enlace TCP SYN-SYNACK-ACK cuando se elige TCP, e ICMP ECHO ICMP ECHO REPLAY cuando se elige ICMP como protocolo para recopilar información de pérdida y latencia.</span><span class="sxs-lookup"><span data-stu-id="13833-289">Network Performance Monitor uses TCP SYN-SYNACK-ACK handshake packets when TCP is chosen and ICMP ECHO ICMP ECHO REPLY when ICMP is chosen as the protocol to collect loss and latency information.</span></span> <span data-ttu-id="13833-290">Traceroute también se usa para obtener información sobre la topología.</span><span class="sxs-lookup"><span data-stu-id="13833-290">Traceroute is also used to get topology information.</span></span>

<span data-ttu-id="13833-291">En la siguiente tabla se muestran los métodos de recopilación de datos y otros detalles sobre cómo se reúnen los datos para Monitor de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-291">The following table shows data collection methods and other details about how data is collected for Network Performance Monitor.</span></span>

| <span data-ttu-id="13833-292">plataforma</span><span class="sxs-lookup"><span data-stu-id="13833-292">platform</span></span> | <span data-ttu-id="13833-293">Agente directo</span><span class="sxs-lookup"><span data-stu-id="13833-293">Direct Agent</span></span> | <span data-ttu-id="13833-294">Agente de SCOM</span><span class="sxs-lookup"><span data-stu-id="13833-294">SCOM agent</span></span> | <span data-ttu-id="13833-295">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="13833-295">Azure Storage</span></span> | <span data-ttu-id="13833-296">¿Se necesita SCOM?</span><span class="sxs-lookup"><span data-stu-id="13833-296">SCOM required?</span></span> | <span data-ttu-id="13833-297">Datos del agente de SCOM enviados a través del grupo de administración</span><span class="sxs-lookup"><span data-stu-id="13833-297">SCOM agent data sent via management group</span></span> | <span data-ttu-id="13833-298">Frecuencia de recopilación</span><span class="sxs-lookup"><span data-stu-id="13833-298">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="13833-299">Windows</span><span class="sxs-lookup"><span data-stu-id="13833-299">Windows</span></span> | <span data-ttu-id="13833-300">&#8226;</span><span class="sxs-lookup"><span data-stu-id="13833-300">&#8226;</span></span> | <span data-ttu-id="13833-301">&#8226;</span><span class="sxs-lookup"><span data-stu-id="13833-301">&#8226;</span></span> |  |  |  |<span data-ttu-id="13833-302">Protocolos de enlace TCP/mensajes ICMP ECHO cada 5 segundos, datos enviados cada 3 minutos</span><span class="sxs-lookup"><span data-stu-id="13833-302">TCP handshakes/ICMP ECHO messages every 5 seconds, data sent every 3 minutes</span></span> |

<span data-ttu-id="13833-303">La solución usa transacciones sintéticas para evaluar el estado de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-303">The solution uses synthetic transactions to assess the health of the network.</span></span> <span data-ttu-id="13833-304">Los agentes de OMS instalados en diversos puntos de la red intercambian entre sí paquetes TCP o ICMP Echo (según el protocolo seleccionado para la supervisión).</span><span class="sxs-lookup"><span data-stu-id="13833-304">OMS agents installed at various point in the network exchange TCP packets or ICMP Echo (depending on the protocol selected for monitoring) with one another.</span></span> <span data-ttu-id="13833-305">En el proceso, los agentes conocen el tiempo de ida y vuelta y se enteran de la pérdida de paquetes, si la hay.</span><span class="sxs-lookup"><span data-stu-id="13833-305">In the process, agents learn the round-trip time and packet loss, if any.</span></span> <span data-ttu-id="13833-306">Periódicamente, cada agente también realiza un seguimiento de la ruta hasta los demás agentes para descubrir las diversas rutas de la red que se deben comprobar.</span><span class="sxs-lookup"><span data-stu-id="13833-306">Periodically, each agent also performs a trace route to other agents to find all the various routes in the network that must be tested.</span></span> <span data-ttu-id="13833-307">Con estos datos, los agentes pueden deducir la latencia de red y las cifras de pérdida de paquetes.</span><span class="sxs-lookup"><span data-stu-id="13833-307">Using this data, the agents can deduce the network latency and packet loss figures.</span></span> <span data-ttu-id="13833-308">Cada cinco segundos los agentes repiten las pruebas y agregan datos en un período de tres minutos antes de cargarlos en el servicio Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="13833-308">The tests are repeated every five seconds and data is aggregated for a period of three minutes by the agents before uploading it to the Log Analytics service.</span></span>

> [!NOTE]
> <span data-ttu-id="13833-309">A pesar de que los agentes se comunican entre sí con frecuencia, no generan una gran cantidad de tráfico de red mientras llevan a cabo las pruebas.</span><span class="sxs-lookup"><span data-stu-id="13833-309">Although agents communicate with each other frequently, they do not generate a lot of network traffic while conducting the tests.</span></span> <span data-ttu-id="13833-310">Los agentes utilizan exclusivamente los paquetes de protocolo de enlace SYNACK-TCP SYN-ACK para determinar la pérdida y la latencia; es decir, no se intercambia ningún paquete de datos.</span><span class="sxs-lookup"><span data-stu-id="13833-310">Agents rely only on TCP SYN-SYNACK-ACK handshake packets to determine the loss and latency -- no data packets are exchanged.</span></span> <span data-ttu-id="13833-311">Durante este proceso, los agentes solo se comunican entre sí cuando resulta necesario, y la topología de comunicación de los agentes está optimizada para reducir el tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="13833-311">During this process, agents communicate with each other only when needed and the agent communication topology is optimized to reduce network traffic.</span></span>
>
>

## <a name="using-the-solution"></a><span data-ttu-id="13833-312">Uso de la solución</span><span class="sxs-lookup"><span data-stu-id="13833-312">Using the solution</span></span>
<span data-ttu-id="13833-313">En esta sección se explican todas las funciones del panel y cómo utilizarlas.</span><span class="sxs-lookup"><span data-stu-id="13833-313">This section explains all the dashboard functions and how to use them.</span></span>

### <a name="solution-overview-tile"></a><span data-ttu-id="13833-314">Icono Información general del servicio</span><span class="sxs-lookup"><span data-stu-id="13833-314">Solution Overview tile</span></span>
<span data-ttu-id="13833-315">Una vez que haya habilitado la solución Monitor de rendimiento de red, el icono de la solución en la página Información general de OMS ofrecerá una visión general rápida del estado de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-315">After you've enabled the Network Performance Monitor solution, the solution tile on the OMS Overview page provides a quick overview of the network health.</span></span> <span data-ttu-id="13833-316">En él verá un gráfico de anillos que muestra el número de vínculos de subred correctos e incorrectos.</span><span class="sxs-lookup"><span data-stu-id="13833-316">It displays a doughnut chart showing the number of healthy and unhealthy subnetwork links.</span></span> <span data-ttu-id="13833-317">Al hacer clic en el icono, se abrirá el panel de la solución.</span><span class="sxs-lookup"><span data-stu-id="13833-317">When you click the tile, it opens the solution dashboard.</span></span>

![Icono Monitor de rendimiento de red](./media/log-analytics-network-performance-monitor/npm-tile.png)

### <a name="network-performance-monitor-solution-dashboard"></a><span data-ttu-id="13833-319">Panel de la solución Monitor de rendimiento de red</span><span class="sxs-lookup"><span data-stu-id="13833-319">Network Performance Monitor solution dashboard</span></span>
<span data-ttu-id="13833-320">En la hoja **Resumen de red**, verá un resumen de las redes, junto con su tamaño relativo.</span><span class="sxs-lookup"><span data-stu-id="13833-320">The **Network Summary** blade shows a summary of the networks along with their relative size.</span></span> <span data-ttu-id="13833-321">Esto va seguido de iconos que muestran el número total de vínculos de red, vínculos de subred y rutas de acceso del sistema (una ruta de acceso se compone de las direcciones IP de dos hosts con agentes y todos los saltos entre ellos).</span><span class="sxs-lookup"><span data-stu-id="13833-321">This is followed by tiles showing total number of network links, subnet links and paths in the system (a path consists of the IP addresses of two hosts with agents and all the hops between them).</span></span>

<span data-ttu-id="13833-322">En la hoja **Eventos de estado de red principales** se proporciona una lista de los eventos de estado y las alertas más recientes del sistema, así como el tiempo que lleva el evento activo.</span><span class="sxs-lookup"><span data-stu-id="13833-322">The **Top Network Health Events** blade provides a list of most recent health events and alerts in the system and the time since the event has been active.</span></span> <span data-ttu-id="13833-323">Siempre que la pérdida de paquetes o la latencia de un vínculo de red o subred superan un umbral, se genera una alerta o un evento de estado.</span><span class="sxs-lookup"><span data-stu-id="13833-323">A health event or alert is generated whenever the packet loss or latency of a network or subnetwork link exceeds a threshold.</span></span>

<span data-ttu-id="13833-324">En la hoja **Vínculos de red incorrectos principales** se muestra una lista de vínculos de red incorrectos.</span><span class="sxs-lookup"><span data-stu-id="13833-324">The **Top Unhealthy Network Links** blade shows a list of unhealthy network links.</span></span> <span data-ttu-id="13833-325">Estos son los vínculos de red que presentan uno o más eventos de estado negativos en ese momento.</span><span class="sxs-lookup"><span data-stu-id="13833-325">These are the network links that have one or more adverse health event for them at the moment.</span></span>

<span data-ttu-id="13833-326">En las hojas **Vínculos de subred con mayor pérdida** y **Vínculos de subred con mayor latencia** se muestran los principales vínculos de red por pérdida de paquetes y por latencia, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="13833-326">The **Top Subnetwork Links with Most Loss** and **Subnetwork Links with Most Latency** blades show the top subnetwork links by packet loss and top subnetwork links by latency respectively.</span></span> <span data-ttu-id="13833-327">Puede esperar una latencia alta o cierta cantidad de pérdida de paquetes en determinados vínculos de red.</span><span class="sxs-lookup"><span data-stu-id="13833-327">High latency or some amount of packet loss might be expected on certain network links.</span></span> <span data-ttu-id="13833-328">Estos vínculos aparecen en las listas de los diez principales, pero no se marcan como incorrectos.</span><span class="sxs-lookup"><span data-stu-id="13833-328">Such links appear in the top ten lists but are not marked unhealthy.</span></span>

<span data-ttu-id="13833-329">La hoja **Consultas comunes** contiene un conjunto de consultas de búsqueda que recuperan directamente datos sin procesar de supervisión de red.</span><span class="sxs-lookup"><span data-stu-id="13833-329">The **Common Queries** blade contains a set of search queries that fetch raw network monitoring data directly.</span></span> <span data-ttu-id="13833-330">Puede usar estas consultas como punto de partida a fin de crear las suyas propias para generar informes personalizados.</span><span class="sxs-lookup"><span data-stu-id="13833-330">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span>

![Panel Monitor de rendimiento de red](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="drill-down-for-depth"></a><span data-ttu-id="13833-332">Exploración en profundidad</span><span class="sxs-lookup"><span data-stu-id="13833-332">Drill-down for depth</span></span>
<span data-ttu-id="13833-333">Puede hacer clic en los diversos vínculos del panel de la solución para profundizar más en cualquier área de interés.</span><span class="sxs-lookup"><span data-stu-id="13833-333">You can click various links on the solution dashboard to drill-down deeper into any area of interest.</span></span> <span data-ttu-id="13833-334">Por ejemplo, cuando vea aparecer en el panel una alerta o un vínculo de red incorrecto, puede hacer clic en ellos para investigar más.</span><span class="sxs-lookup"><span data-stu-id="13833-334">For example, when you see an alert or an unhealthy network link appear on the dashboard, you can click it to investigate further.</span></span> <span data-ttu-id="13833-335">Se le dirigirá a una página que enumera todos los vínculos de subred del vínculo de red concreto.</span><span class="sxs-lookup"><span data-stu-id="13833-335">You'll be taken to a page that lists all the subnetwork links for the particular network link.</span></span> <span data-ttu-id="13833-336">Podrá ver la pérdida, la latencia y el estado de cada vínculo de subred e identificar rápidamente aquellos que estén ocasionando el problema.</span><span class="sxs-lookup"><span data-stu-id="13833-336">You will be able to see the loss, latency and health status of each subnetwork link and quickly find out what subnetwork links are causing the problem.</span></span> <span data-ttu-id="13833-337">Después, puede hacer clic en **Ver vínculos de nodo** para ver todos los vínculos de nodo del vínculo de subred incorrecto.</span><span class="sxs-lookup"><span data-stu-id="13833-337">You can then click **View node links** to see all the node links for the unhealthy subnet link.</span></span> <span data-ttu-id="13833-338">Además, puede ver los vínculos individuales de nodo a nodo y encontrar los vínculos de nodo incorrectos.</span><span class="sxs-lookup"><span data-stu-id="13833-338">Then, you can see individual node-to-node links and find the unhealthy node links.</span></span>

<span data-ttu-id="13833-339">Puede hacer clic en **Ver topología** para ver la topología de salto a salto de las rutas entre los nodos de origen y de destino.</span><span class="sxs-lookup"><span data-stu-id="13833-339">You can click **View topology** to view the hop-by-hop topology of the routes between the source and destination nodes.</span></span> <span data-ttu-id="13833-340">Las rutas o los saltos incorrectos se muestran en rojo para que pueda acotar rápidamente el problema a una parte concreta de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-340">The unhealthy routes or hops are shown in red so that you can quickly identify the problem to a particular portion of the network.</span></span>

![Datos en profundidad](./media/log-analytics-network-performance-monitor/npm-drill.png)

### <a name="network-state-recorder"></a><span data-ttu-id="13833-342">Grabadora de estado de la red</span><span class="sxs-lookup"><span data-stu-id="13833-342">Network State Recorder</span></span>

<span data-ttu-id="13833-343">Cada vista muestra una instantánea del estado de su red en un momento determinado del tiempo.</span><span class="sxs-lookup"><span data-stu-id="13833-343">Each view displays a snapshot of your network health at a particular point in time.</span></span> <span data-ttu-id="13833-344">De forma predeterminada, se muestra el estado más reciente.</span><span class="sxs-lookup"><span data-stu-id="13833-344">By default, the most recent state is shown.</span></span> <span data-ttu-id="13833-345">La barra en la parte superior de la página muestra el punto en el tiempo para el que se muestra el estado.</span><span class="sxs-lookup"><span data-stu-id="13833-345">The bar at the top of the page shows the point in time for which the state is being displayed.</span></span> <span data-ttu-id="13833-346">Puede elegir retroceder en el tiempo y ver la instantánea del estado de su red haciendo clic en la barra en **Acciones**.</span><span class="sxs-lookup"><span data-stu-id="13833-346">You can choose to go back in time and view the snapshot of your network health by clicking on the bar on **Actions**.</span></span> <span data-ttu-id="13833-347">También puede elegir habilitar o deshabilitar la actualización automática de cualquier página mientras ve el estado más reciente.</span><span class="sxs-lookup"><span data-stu-id="13833-347">You can also choose to enable or disable auto-refresh for any page while you view the latest state.</span></span>

![estado de la red](./media/log-analytics-network-performance-monitor/network-state.png)

#### <a name="trend-charts"></a><span data-ttu-id="13833-349">Gráficos de tendencias</span><span class="sxs-lookup"><span data-stu-id="13833-349">Trend charts</span></span>
<span data-ttu-id="13833-350">En cada nivel que desglose, podrá ver la tendencia de pérdida y latencia de un vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-350">At each level that you drill-down, you can see the trend of loss and latency for a network link.</span></span> <span data-ttu-id="13833-351">También tiene a su disposición gráficos de tendencias para vínculos de subred y nodo.</span><span class="sxs-lookup"><span data-stu-id="13833-351">Trend charts are also available for Subnetwork and Node links.</span></span> <span data-ttu-id="13833-352">Puede cambiar el intervalo de tiempo empleado en el gráfico mediante la opción de control del tiempo situada en la parte superior del gráfico.</span><span class="sxs-lookup"><span data-stu-id="13833-352">You can change the time interval for the graph to plot by using the time control at the top of the chart.</span></span>

<span data-ttu-id="13833-353">Los gráficos de tendencias muestran una perspectiva histórica del rendimiento de un vínculo de red.</span><span class="sxs-lookup"><span data-stu-id="13833-353">Trend charts show you a historical perspective of the performance of a network link.</span></span> <span data-ttu-id="13833-354">Algunos problemas de red son transitorios por naturaleza y, por lo tanto, resultarían difíciles de encontrar examinando únicamente el estado actual de la red.</span><span class="sxs-lookup"><span data-stu-id="13833-354">Some network issues are transient in nature and would be hard to catch only by looking at the current state of the network.</span></span> <span data-ttu-id="13833-355">Esto se debe a que los problemas pueden manifestarse rápidamente y desaparecer antes de que nadie se percate para volver a surgir más adelante.</span><span class="sxs-lookup"><span data-stu-id="13833-355">This is because issues can surface quickly and disappear before anyone notices, only to reappear at a later point in time.</span></span> <span data-ttu-id="13833-356">Dichos problemas transitorios también pueden resultar difíciles para los administradores de aplicaciones, ya que tales problemas suelen surgir como incrementos inexplicables en el tiempo de respuesta de la aplicación, incluso cuando todos los componentes de ella parecen ejecutarse a la perfección.</span><span class="sxs-lookup"><span data-stu-id="13833-356">Such transient issues can also be difficult for application administrators because those issues often surface as unexplained increases in application response time, even when all application components appear to run smoothly.</span></span>

<span data-ttu-id="13833-357">Puede encontrar con facilidad estos tipos de problemas examinando un gráfico de tendencias, donde el problema aparecerá como un pico repentino de latencia o pérdida de paquetes en la red.</span><span class="sxs-lookup"><span data-stu-id="13833-357">You can easily detect those kinds of issues by looking at a trend chart where the issue will appear as a sudden spike in network latency or packet loss.</span></span>

![Gráfico de tendencias](./media/log-analytics-network-performance-monitor/npm-trend.png)

#### <a name="hop-by-hop-topology-map"></a><span data-ttu-id="13833-359">Mapa de topología de salto a salto</span><span class="sxs-lookup"><span data-stu-id="13833-359">Hop-by-hop topology map</span></span>
<span data-ttu-id="13833-360">Monitor de rendimiento de red le muestra la topología de salto a salto de las rutas comprendidas entre dos nodos en un mapa de topología interactivo.</span><span class="sxs-lookup"><span data-stu-id="13833-360">Network Performance Monitor shows you the hop-by-hop topology of routes between two nodes on an interactive topology map.</span></span> <span data-ttu-id="13833-361">Puede ver el mapa de topología, seleccione un vínculo del nodo y, después, haga clic en **Ver topología**.</span><span class="sxs-lookup"><span data-stu-id="13833-361">You can view the topology map by selecting a node link and then clicking **View topology**.</span></span> <span data-ttu-id="13833-362">Asimismo, puede ver el mapa de topología haciendo clic en el icono **Rutas de acceso** del panel.</span><span class="sxs-lookup"><span data-stu-id="13833-362">Also, you can view the topology map by clicking **Paths** tile on the dashboard.</span></span> <span data-ttu-id="13833-363">Al hacer clic en **Rutas de acceso** en el panel, tendrá que seleccionar los nodos de origen y destino en el panel izquierdo y, después, hacer clic en **Trazar** para trazar las rutas comprendidas entre ambos nodos.</span><span class="sxs-lookup"><span data-stu-id="13833-363">When you click **Paths** on the dashboard, you'll have to select the source and destination nodes from the left hand panel and then click **Plot** to plot the routes between the two nodes.</span></span>

<span data-ttu-id="13833-364">En el mapa de topología se muestra el número de rutas que existen entre los dos nodos y las rutas de acceso que recorren los paquetes de datos.</span><span class="sxs-lookup"><span data-stu-id="13833-364">The topology map displays how many routes are between the two nodes and what paths the data packets take.</span></span> <span data-ttu-id="13833-365">Los cuellos de botella de rendimiento de red se marcan en rojo en el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-365">Network performance bottlenecks are marked in red on the topology map.</span></span> <span data-ttu-id="13833-366">Puede encontrar una conexión o dispositivo de red defectuosos examinando los elementos de color rojo presentes en el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-366">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>

<span data-ttu-id="13833-367">Cuando haga clic en un nodo o pase el mouse por encima de él encima del mapa de topología, verá las propiedades del nodo, como el FQDN o la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="13833-367">When you click a node or hover over it on the topology map, you'll see the properties of the node like FQDN and IP address.</span></span> <span data-ttu-id="13833-368">Haga clic en un salto para ver su dirección IP.</span><span class="sxs-lookup"><span data-stu-id="13833-368">Click a hop to see it's IP address.</span></span> <span data-ttu-id="13833-369">Puede elegir filtrar rutas determinadas mediante los filtros que aparecen en el panel de acciones contraíble.</span><span class="sxs-lookup"><span data-stu-id="13833-369">You can choose to filter particular routes by using the filters in the collapsible action pane.</span></span> <span data-ttu-id="13833-370">Y también puede simplificar las topologías de red ocultando los saltos intermedios con el control deslizante del panel de acciones.</span><span class="sxs-lookup"><span data-stu-id="13833-370">And, you can also simplify the network topologies by hiding the intermediate hops using the slider in the action pane.</span></span> <span data-ttu-id="13833-371">Además, puede acercar o alejar el mapa de topología con la rueda del mouse.</span><span class="sxs-lookup"><span data-stu-id="13833-371">You can zoom-in or out of the topology map by using your mouse wheel.</span></span>

<span data-ttu-id="13833-372">Observe que la topología mostrada en el mapa corresponde al nivel 3 y no contiene ningún dispositivo ni conexión de nivel 2.</span><span class="sxs-lookup"><span data-stu-id="13833-372">Note that the topology shown in the map is layer 3 topology and doesn't contain layer 2 devices and connections.</span></span>

![Mapa de topología de salto a salto](./media/log-analytics-network-performance-monitor/npm-topology.png)

#### <a name="fault-localization"></a><span data-ttu-id="13833-374">Localización de defectos</span><span class="sxs-lookup"><span data-stu-id="13833-374">Fault localization</span></span>
<span data-ttu-id="13833-375">Monitor de rendimiento de red puede hallar los cuellos de botella de la red sin conectarse a los dispositivos de red.</span><span class="sxs-lookup"><span data-stu-id="13833-375">Network Performance Monitor is able to find the network bottlenecks without connecting to the network devices.</span></span> <span data-ttu-id="13833-376">A partir de los datos que reúna de la red y mediante la aplicación de algoritmos avanzados en el gráfico de red, Monitor de rendimiento de red efectúa una estimación probabilística de las partes de la red con más probabilidades de ser la causa del problema.</span><span class="sxs-lookup"><span data-stu-id="13833-376">Based on the data that it gathers from the network and by applying advanced algorithms on the network graph, Network Performance Monitor makes a probabilistic estimate of the parts of network that are most likely the source of the problem.</span></span>

<span data-ttu-id="13833-377">Este enfoque resulta de utilidad para determinar los cuellos de botella de red cuando no es posible acceder a los saltos, ya que, de este modo, no se precisa reunir datos de los dispositivos de red como enrutadores o conmutadores.</span><span class="sxs-lookup"><span data-stu-id="13833-377">This approach is useful to determine the network bottlenecks when access to hops isn't available because it doesn't require any data to be gathered from the network devices such as routers or switches.</span></span> <span data-ttu-id="13833-378">Esto también es útil cuando los saltos entre dos nodos no se encuentran bajo su control administrativo.</span><span class="sxs-lookup"><span data-stu-id="13833-378">This is also useful when the hops between two nodes are not in your administrative control.</span></span> <span data-ttu-id="13833-379">Por ejemplo, los saltos pueden ser enrutadores del ISP.</span><span class="sxs-lookup"><span data-stu-id="13833-379">For example, the hops may be ISP routers.</span></span>

### <a name="log-analytics-search"></a><span data-ttu-id="13833-380">Búsqueda de Log Analytics</span><span class="sxs-lookup"><span data-stu-id="13833-380">Log Analytics search</span></span>
<span data-ttu-id="13833-381">Todos los datos expuestos mediante gráficos en las páginas de exploración en profundidad y en el panel de Monitor de rendimiento de red también se encuentran disponibles de forma nativa en la búsqueda de Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="13833-381">All data that is exposed graphically through the Network Performance Monitor dashboard and drill-down pages is also available natively in Log Analytics search.</span></span> <span data-ttu-id="13833-382">Puede consultar los datos mediante el lenguaje de consulta de búsqueda y crear informes personalizados exportando la información a Excel o Power BI.</span><span class="sxs-lookup"><span data-stu-id="13833-382">You can query the data using the search query language and create custom reports by exporting the data to Excel or PowerBI.</span></span> <span data-ttu-id="13833-383">La hoja **Consultas comunes** del panel incorpora una serie de consultas útiles que puede usar como punto de partida para crear sus propios informes y consultas.</span><span class="sxs-lookup"><span data-stu-id="13833-383">The **Common Queries** blade in the dashboard has some useful queries that you can use as the starting point for creating your own queries and reports.</span></span>

![Consultas de búsqueda](./media/log-analytics-network-performance-monitor/npm-queries.png)

## <a name="investigate-the-root-cause-of-a-health-alert"></a><span data-ttu-id="13833-385">Investigación de la causa principal de una alerta de estado</span><span class="sxs-lookup"><span data-stu-id="13833-385">Investigate the root cause of a health alert</span></span>
<span data-ttu-id="13833-386">Ahora que se ha familiarizado con Monitor de rendimiento de red, veamos una investigación sencilla de la causa principal de un evento de estado.</span><span class="sxs-lookup"><span data-stu-id="13833-386">Now that you've read about Network Performance Monitor, let's look at a simple investigation into the root-cause for a health event.</span></span>

1. <span data-ttu-id="13833-387">En la página Información general, podrá obtener una instantánea rápida del estado de la red con solo observar el icono **Monitor de rendimiento de red**.</span><span class="sxs-lookup"><span data-stu-id="13833-387">On the Overview page, you'll get a quick snapshot of the health of your network by observing the **Network Performance Monitor** tile.</span></span> <span data-ttu-id="13833-388">Observe que, de los 6 vínculos de subred que se están supervisando, 2 son incorrectos.</span><span class="sxs-lookup"><span data-stu-id="13833-388">Notice that out of the 6 subnetworks links being monitored, 2 are unhealthy.</span></span> <span data-ttu-id="13833-389">Esta situación se debe investigar.</span><span class="sxs-lookup"><span data-stu-id="13833-389">This warrants investigation.</span></span> <span data-ttu-id="13833-390">Haga clic en el icono para ver el panel de la solución.</span><span class="sxs-lookup"><span data-stu-id="13833-390">Click the tile to view the solution dashboard.</span></span>  
   <span data-ttu-id="13833-391">![Icono Monitor de rendimiento de red](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span><span class="sxs-lookup"><span data-stu-id="13833-391">![Network Performance Monitor tile](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span></span>
2. <span data-ttu-id="13833-392">En la imagen de ejemplo siguiente, se puede observar que hay un evento de estado en un vínculo de red con un estado incorrecto.</span><span class="sxs-lookup"><span data-stu-id="13833-392">In the example image below, you'll notice that there is a health event a network link that is unhealthy.</span></span> <span data-ttu-id="13833-393">Supongamos que decide investigar el problema y hace clic en el vínculo de red **DMZ2-DMZ1** para descubrir su causa.</span><span class="sxs-lookup"><span data-stu-id="13833-393">You decide to investigate the issue and click on the **DMZ2-DMZ1** network link to find out the root of the problem.</span></span>  
   <span data-ttu-id="13833-394">![Ejemplo de vínculo de red incorrecto](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span><span class="sxs-lookup"><span data-stu-id="13833-394">![unhealthy network link example](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span></span>
3. <span data-ttu-id="13833-395">En la página de exploración en profundidad se muestran todos los vínculos de subred del vínculo de red **DMZ2-DMZ1**.</span><span class="sxs-lookup"><span data-stu-id="13833-395">The drill-down page shows all the subnetwork links in **DMZ2-DMZ1** network link.</span></span> <span data-ttu-id="13833-396">Observará que, en el caso de ambos vínculos de subred, la latencia ha superado el umbral, lo que ha hecho que el vínculo de red esté incorrecto.</span><span class="sxs-lookup"><span data-stu-id="13833-396">You'll notice that for both the subnetwork links, the latency has crossed the threshold making the network link unhealthy.</span></span> <span data-ttu-id="13833-397">También puede ver las tendencias de latencia de ambos vínculos de subred.</span><span class="sxs-lookup"><span data-stu-id="13833-397">You can also see the latency trends of both the subnetwork links.</span></span> <span data-ttu-id="13833-398">Puede utilizar la opción para seleccionar el tiempo del gráfico a fin de centrarse en el intervalo de tiempo pertinente.</span><span class="sxs-lookup"><span data-stu-id="13833-398">You can use the time selection control in the graph to focus on the required time range.</span></span> <span data-ttu-id="13833-399">Puede ver la hora del día en la que la latencia ha alcanzado su punto máximo.</span><span class="sxs-lookup"><span data-stu-id="13833-399">You can see the time of the day when latency has reached its peak.</span></span> <span data-ttu-id="13833-400">Después, puede buscar en los registros este periodo para investigar el problema.</span><span class="sxs-lookup"><span data-stu-id="13833-400">You can later search the logs for this time period to investigate the issue.</span></span> <span data-ttu-id="13833-401">Haga clic en **Ver vínculos de nodo** para profundizar aún más.</span><span class="sxs-lookup"><span data-stu-id="13833-401">Click **View node links** to drill-down further.</span></span>  
   <span data-ttu-id="13833-402">![Ejemplo de vínculos de subred incorrectos](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span><span class="sxs-lookup"><span data-stu-id="13833-402">![unhealthy subnet links example](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span></span>
4. <span data-ttu-id="13833-403">Como sucedía en la página anterior, en la página de exploración en profundidad del vínculo de subred concreto se enumeran los vínculos de nodo que lo componen.</span><span class="sxs-lookup"><span data-stu-id="13833-403">Similar to the previous page, the drill-down page for the particular subnetwork link lists down its constituent node links.</span></span> <span data-ttu-id="13833-404">Aquí puede efectuar acciones similares a las realizadas en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="13833-404">You can perform similar actions  here as you did in the previous step.</span></span> <span data-ttu-id="13833-405">Haga clic en **Ver topología** para ver la topología entre los dos nodos.</span><span class="sxs-lookup"><span data-stu-id="13833-405">Click **View topology** to view the topology between the 2 nodes.</span></span>  
   <span data-ttu-id="13833-406">![Ejemplo de vínculos de nodo incorrectos](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span><span class="sxs-lookup"><span data-stu-id="13833-406">![unhealthy node links example](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span></span>
5. <span data-ttu-id="13833-407">Todas las rutas de acceso entre los dos nodos seleccionados estarán trazadas en el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-407">All the paths between the 2 selected nodes are plotted in the topology map.</span></span> <span data-ttu-id="13833-408">Puede visualizar la topología de salto a salto de las rutas entre dos nodos en el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-408">You can visualize the hop-by-hop topology of routes between two nodes on the topology map.</span></span> <span data-ttu-id="13833-409">Ofrece una perspectiva clara de cuántas rutas existen entre los dos nodos y qué rutas de acceso emplean los paquetes de datos.</span><span class="sxs-lookup"><span data-stu-id="13833-409">It gives you a clear picture of how many routes exist between the two nodes and what paths the data packets are taking.</span></span> <span data-ttu-id="13833-410">Los cuellos de botella de rendimiento de red se marcan en rojo.</span><span class="sxs-lookup"><span data-stu-id="13833-410">Network performance bottlenecks are marked in red color.</span></span> <span data-ttu-id="13833-411">Puede encontrar una conexión o dispositivo de red defectuosos examinando los elementos de color rojo presentes en el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-411">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>  
   ![Ejemplo de la vista de topología incorrecta](./media/log-analytics-network-performance-monitor/npm-investigation05.png)
6. <span data-ttu-id="13833-413">Es posible consultar la pérdida, la latencia y el número de saltos de cada ruta de acceso en el panel **Acción**.</span><span class="sxs-lookup"><span data-stu-id="13833-413">The loss, latency, and the number of hops in each path can be reviewed in the **Action** pane.</span></span> <span data-ttu-id="13833-414">Utilice la barra de desplazamiento para ver los detalles de esas rutas de acceso incorrectas.</span><span class="sxs-lookup"><span data-stu-id="13833-414">Use the scrollbar to view the details of those unhealthy paths.</span></span>  <span data-ttu-id="13833-415">Use los filtros para seleccionar las rutas de acceso con el salto incorrecto de modo que se pueda trazar la topología únicamente de las rutas de acceso seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="13833-415">Use the filters to select the paths with the unhealthy hop so that the topology for only the selected paths is plotted.</span></span> <span data-ttu-id="13833-416">Puede utilizar la rueda del mouse para acercar o alejar el mapa de topología.</span><span class="sxs-lookup"><span data-stu-id="13833-416">You can use your mouse wheel to zoom in or out of the topology map.</span></span>

   <span data-ttu-id="13833-417">En la siguiente imagen puede ver con claridad la causa principal de las áreas problemáticas de la sección específica de la red con solo observar las rutas de acceso y los saltos marcados en color rojo.</span><span class="sxs-lookup"><span data-stu-id="13833-417">In the below image you can clearly see the root-cause of the problem areas to the specific section of the network by looking at the paths and hops in red color.</span></span> <span data-ttu-id="13833-418">Si hace clic en un nodo en el mapa de topología, se mostrarán las propiedades del nodo, incluido el FQDN y la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="13833-418">Clicking on a node in the topology map reveals the properties of the node, including the FQDN, and IP address.</span></span> <span data-ttu-id="13833-419">Si se hace clic en un salto, se mostrará su dirección IP.</span><span class="sxs-lookup"><span data-stu-id="13833-419">Clicking on a hop shows the IP address of the hop.</span></span>  
   ![Ejemplo de topología incorrecta con detalles sobre las rutas de acceso](./media/log-analytics-network-performance-monitor/npm-investigation06.png)

## <a name="provide-feedback"></a><span data-ttu-id="13833-421">Envío de comentarios</span><span class="sxs-lookup"><span data-stu-id="13833-421">Provide feedback</span></span>

- <span data-ttu-id="13833-422">**UserVoice**: puede publicar sus ideas sobre las características de Network Performance Monitor (monitor de rendimiento de red) en las que le gustaría que trabajásemos.</span><span class="sxs-lookup"><span data-stu-id="13833-422">**UserVoice** - You can post your ideas for Network Performance Monitor features that you want us to work on.</span></span> <span data-ttu-id="13833-423">Visite nuestra [página UserVoice](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span><span class="sxs-lookup"><span data-stu-id="13833-423">Visit our [UserVoice page](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span></span>
- <span data-ttu-id="13833-424">**Únase a nuestra cohortes**: siempre estamos interesados en que se unan nuevos clientes a nuestra cohorte.</span><span class="sxs-lookup"><span data-stu-id="13833-424">**Join our cohort** - We’re always interested in having new customers join our cohort.</span></span> <span data-ttu-id="13833-425">Como parte de todo ello, podrá obtener un acceso anticipado a las nuevas características y ayudarnos a mejorar Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="13833-425">As part of it, you'll get early access to new features and help us improve Network Performance Monitor.</span></span> <span data-ttu-id="13833-426">Si está interesado en unirse, rellene esta [encuesta rápida](https://aka.ms/npmcohort).</span><span class="sxs-lookup"><span data-stu-id="13833-426">If you're interested in joining, fill-out this [quick survey](https://aka.ms/npmcohort).</span></span>

## <a name="next-steps"></a><span data-ttu-id="13833-427">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="13833-427">Next steps</span></span>
* <span data-ttu-id="13833-428">[Buscar registros](log-analytics-log-searches.md) para ver datos detallados de rendimiento de red.</span><span class="sxs-lookup"><span data-stu-id="13833-428">[Search logs](log-analytics-log-searches.md) to view detailed network performance data records.</span></span>

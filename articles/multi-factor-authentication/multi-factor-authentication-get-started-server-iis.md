---
title: "Autenticación de IIS y Servidor Azure MFA | Microsoft Docs"
description: "Se trata de la página Azure Multi-Factor Authentication que ayudará a implementar la autenticación IIS y el servidor Azure Multi-Factor Authentication."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: d1bf1c8a-2c10-4ae6-9f4b-75f0c3df43eb
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: H1Hack27Feb2017,it-pro
ms.openlocfilehash: ab6f9110dccd3cfc15092f535650e8d8cb1af13c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="configure-azure-multi-factor-authentication-server-for-iis-web-apps"></a><span data-ttu-id="63e1e-103">Configuración de Servidor Azure Multi-Factor Authentication para aplicaciones web de IIS</span><span class="sxs-lookup"><span data-stu-id="63e1e-103">Configure Azure Multi-Factor Authentication Server for IIS web apps</span></span>

<span data-ttu-id="63e1e-104">Use la sección Autenticación de IIS del Servidor Azure Multi-Factor Authentication (MFA) para habilitar y configurar la autenticación de IIS para la integración con aplicaciones web de Microsoft IIS.</span><span class="sxs-lookup"><span data-stu-id="63e1e-104">Use the IIS Authentication section of the Azure Multi-Factor Authentication (MFA) Server to enable and configure IIS authentication for integration with Microsoft IIS web applications.</span></span> <span data-ttu-id="63e1e-105">El Servidor Azure MFA instala un complemento que puede filtrar las solicitudes realizadas al servidor web IIS para agregar Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="63e1e-105">The Azure MFA Server installs a plug-in that can filter requests being made to the IIS web server to add Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="63e1e-106">El complemento IIS proporciona compatibilidad para la autenticación basada en formularios y la autenticación HTTP de Windows integrada.</span><span class="sxs-lookup"><span data-stu-id="63e1e-106">The IIS plug-in provides support for Form-Based Authentication and Integrated Windows HTTP Authentication.</span></span> <span data-ttu-id="63e1e-107">También se pueden configurar IP de confianza para eximir direcciones IP internas de la autenticación en dos fases.</span><span class="sxs-lookup"><span data-stu-id="63e1e-107">Trusted IPs can also be configured to exempt internal IP addresses from two-factor authentication.</span></span>

![Autenticación IIS](./media/multi-factor-authentication-get-started-server-iis/iis.png)

## <a name="using-form-based-iis-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="63e1e-109">Mediante la autenticación IIS basada en formularios con el servidor Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="63e1e-109">Using Form-Based IIS Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="63e1e-110">Para proteger una aplicación web IIS que usa la autenticación basada en formularios, instale el Servidor Azure Multi-Factor Authentication en el servidor web IIS y configure el servidor de acuerdo con el procedimiento siguiente:</span><span class="sxs-lookup"><span data-stu-id="63e1e-110">To secure an IIS web application that uses form-based authentication, install the Azure Multi-Factor Authentication Server on the IIS web server and configure the Server per the following procedure:</span></span>

1. <span data-ttu-id="63e1e-111">En Servidor Azure Multi-Factor Authentication, haga clic en el icono Autenticación de IIS en el menú izquierdo.</span><span class="sxs-lookup"><span data-stu-id="63e1e-111">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="63e1e-112">Haga clic en la pestaña **Basados en formularios**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-112">Click the **Form-Based** tab.</span></span>
3. <span data-ttu-id="63e1e-113">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-113">Click **Add**.</span></span>
4. <span data-ttu-id="63e1e-114">Para detectar el nombre de usuario, la contraseña y las variables de dominio automáticamente, escriba la dirección URL de inicio de sesión (como https://localhost/contoso/auth/login.aspx) en el cuadro de diálogo Configuración automática de sitio web basado en formularios y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-114">To detect username, password and domain variables automatically, enter the Login URL (like https://localhost/contoso/auth/login.aspx) within the Auto-Configure Form-Based Website dialog box and click **OK**.</span></span>
5. <span data-ttu-id="63e1e-115">Active la casilla **Requerir coincidencia de usuario de Multi-Factor Authentication** si todos los usuarios se importaron o importarán al Servidor y están sujetos a la autenticación multifactor.</span><span class="sxs-lookup"><span data-stu-id="63e1e-115">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="63e1e-116">Si aún no se importó al Servidor un número significativo de usuarios o se van a excluir de la autenticación multifactor, deje la casilla desactivada.</span><span class="sxs-lookup"><span data-stu-id="63e1e-116">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
6. <span data-ttu-id="63e1e-117">Si no se pueden detectar automáticamente las variables de página, haga clic en **Especificar manualmente** en el cuadro de diálogo Configuración automática de sitio web basado en formularios.</span><span class="sxs-lookup"><span data-stu-id="63e1e-117">If the page variables cannot be detected automatically, click **Specify Manually** in the Auto-Configure Form-Based Website dialog box.</span></span>
7. <span data-ttu-id="63e1e-118">En el cuadro de diálogo Agregar sitio web basado en formularios, escriba la dirección URL en la página de inicio de sesión en el campo URL de envío y escriba un nombre de aplicación (opcional).</span><span class="sxs-lookup"><span data-stu-id="63e1e-118">In the Add Form-Based Website dialog box, enter the URL to the login page in the Submit URL field and enter an Application name (optional).</span></span> <span data-ttu-id="63e1e-119">El nombre de la aplicación aparece en los informes de Azure Multi-Factor Authentication y puede mostrarse en los mensajes de autenticación SMS o de aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="63e1e-119">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
8. <span data-ttu-id="63e1e-120">Seleccione el formato de solicitud correcto.</span><span class="sxs-lookup"><span data-stu-id="63e1e-120">Select the correct Request format.</span></span> <span data-ttu-id="63e1e-121">Esto se establece en **POST o GET** para la mayoría de las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="63e1e-121">This is set to **POST or GET** for most web applications.</span></span>
9. <span data-ttu-id="63e1e-122">Especifique las variables de nombre de usuario, contraseña y dominio (si aparece en la página de inicio de sesión).</span><span class="sxs-lookup"><span data-stu-id="63e1e-122">Enter the Username variable, Password variable, and Domain variable (if it appears on the login page).</span></span> <span data-ttu-id="63e1e-123">Para buscar los nombres de los cuadros de entrada, vaya a la página de inicio de sesión en un explorador web, haga clic con el botón derecho en la página y seleccione **Ver código fuente**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-123">To find the names of the input boxes, navigate to the login page in a web browser, right-click on the page, and select **View Source**.</span></span>
10. <span data-ttu-id="63e1e-124">Active la casilla **Requerir coincidencia de usuario de Azure Multi-Factor Authentication** si todos los usuarios se importaron o importarán al Servidor y están sujetos a la autenticación multifactor.</span><span class="sxs-lookup"><span data-stu-id="63e1e-124">Check the **Require Azure Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="63e1e-125">Si aún no se importó al Servidor un número significativo de usuarios o se van a excluir de la autenticación multifactor, deje la casilla desactivada.</span><span class="sxs-lookup"><span data-stu-id="63e1e-125">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
11. <span data-ttu-id="63e1e-126">Haga clic en **Avanzada** para revisar la configuración avanzada, incluido lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="63e1e-126">Click **Advanced** to review advanced settings, including:</span></span>

  - <span data-ttu-id="63e1e-127">Seleccionar un archivo de página de denegación personalizado</span><span class="sxs-lookup"><span data-stu-id="63e1e-127">Select a custom denial page file</span></span>
  - <span data-ttu-id="63e1e-128">Almacenar en caché las autenticaciones correctas en el sitio web durante un período mediante las cookies.</span><span class="sxs-lookup"><span data-stu-id="63e1e-128">Cache successful authentications to the website for a period of time using cookies</span></span>
  - <span data-ttu-id="63e1e-129">Seleccionar si autenticar las credenciales principales en un dominio de Windows, directorio LDAP</span><span class="sxs-lookup"><span data-stu-id="63e1e-129">Select whether to authenticate the primary credentials against a Windows Domain, LDAP directory.</span></span> <span data-ttu-id="63e1e-130">o servidor RADIUS.</span><span class="sxs-lookup"><span data-stu-id="63e1e-130">or RADIUS server.</span></span>

12. <span data-ttu-id="63e1e-131">Haga clic en **Aceptar** para volver al cuadro de diálogo Agregar sitio web basado en formularios.</span><span class="sxs-lookup"><span data-stu-id="63e1e-131">Click **OK** to return to the Add Form-Based Website dialog box.</span></span>
13. <span data-ttu-id="63e1e-132">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-132">Click **OK**.</span></span>
14. <span data-ttu-id="63e1e-133">Una vez detectadas o especificadas las variables de página y dirección URL, los datos del sitio web se mostrarán en el panel Basados en formularios.</span><span class="sxs-lookup"><span data-stu-id="63e1e-133">Once the URL and page variables have been detected or entered, the website data displays in the Form-Based panel.</span></span>

## <a name="using-integrated-windows-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="63e1e-134">Uso de la autenticación integrada de Windows con el servidor Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="63e1e-134">Using Integrated Windows Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="63e1e-135">Para proteger una aplicación web IIS que usa la autenticación integrada HTTP de Windows, instale el Servidor Azure MFA en el servidor web IIS y configure el servidor mediante el procedimiento siguiente:</span><span class="sxs-lookup"><span data-stu-id="63e1e-135">To secure an IIS web application that uses Integrated Windows HTTP authentication, install the Azure MFA Server on the IIS web server, then configure the Server with the following steps:</span></span>

1. <span data-ttu-id="63e1e-136">En Servidor Azure Multi-Factor Authentication, haga clic en el icono Autenticación de IIS en el menú izquierdo.</span><span class="sxs-lookup"><span data-stu-id="63e1e-136">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="63e1e-137">Haga clic en la pestaña **HTTP**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-137">Click the **HTTP** tab.</span></span>
3. <span data-ttu-id="63e1e-138">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-138">Click **Add**.</span></span>
4. <span data-ttu-id="63e1e-139">En el cuadro de diálogo Agregar URL base, escriba la dirección URL para el sitio web donde se realiza la autenticación HTTP (como http://localhost/owa) y proporcione un nombre de la aplicación (opcional).</span><span class="sxs-lookup"><span data-stu-id="63e1e-139">In the Add Base URL dialogue box, enter the URL for the website where HTTP authentication is performed (like http://localhost/owa) and provide an Application name (optional).</span></span> <span data-ttu-id="63e1e-140">El nombre de la aplicación aparece en los informes de Azure Multi-Factor Authentication y puede mostrarse en los mensajes de autenticación SMS o de aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="63e1e-140">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
5. <span data-ttu-id="63e1e-141">Ajuste el tiempo de espera de inactividad y los tiempos de sesión máximos si el valor predeterminado no es suficiente.</span><span class="sxs-lookup"><span data-stu-id="63e1e-141">Adjust the Idle timeout and Maximum session times if the default is not sufficient.</span></span>
6. <span data-ttu-id="63e1e-142">Active la casilla **Requerir coincidencia de usuario de Multi-Factor Authentication** si todos los usuarios se importaron o importarán al Servidor y están sujetos a la autenticación multifactor.</span><span class="sxs-lookup"><span data-stu-id="63e1e-142">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="63e1e-143">Si aún no se importó al Servidor un número significativo de usuarios o se van a excluir de la autenticación multifactor, deje la casilla desactivada.</span><span class="sxs-lookup"><span data-stu-id="63e1e-143">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
7. <span data-ttu-id="63e1e-144">Active la casilla **Caché de cookies** si lo desea.</span><span class="sxs-lookup"><span data-stu-id="63e1e-144">Check the **Cookie cache** box if desired.</span></span>
8. <span data-ttu-id="63e1e-145">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-145">Click **OK**.</span></span>

## <a name="enable-iis-plug-ins-for-azure-multi-factor-authentication-server"></a><span data-ttu-id="63e1e-146">Habilitar complementos IIS para el servidor Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="63e1e-146">Enable IIS Plug-ins for Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="63e1e-147">Después de configurar las direcciones URL basadas en formularios o de autenticación HTTP y la configuración, seleccione las ubicaciones donde se deben cargar y habilitar los complementos de IIS de Azure Multi-Factor Authentication en IIS.</span><span class="sxs-lookup"><span data-stu-id="63e1e-147">After configuring the Form-Based or HTTP authentication URLs and settings, select the locations where the Azure Multi-Factor Authentication IIS plug-ins should be loaded and enabled in IIS.</span></span> <span data-ttu-id="63e1e-148">Utilice el siguiente procedimiento:</span><span class="sxs-lookup"><span data-stu-id="63e1e-148">Use the following procedure:</span></span>

1. <span data-ttu-id="63e1e-149">Si se ejecuta en IIS 6, haga clic en la pestaña **ISAPI**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-149">If running on IIS 6, click the **ISAPI** tab.</span></span> <span data-ttu-id="63e1e-150">Seleccione el sitio web en el que se está ejecutando la aplicación web (por ejemplo, el sitio web predeterminado) para habilitar el complemento del filtro ISAPI de Azure Multi-Factor Authentication para ese sitio.</span><span class="sxs-lookup"><span data-stu-id="63e1e-150">Select the website that the web application is running under (e.g. Default Web Site) to enable the Azure Multi-Factor Authentication ISAPI filter plug-in for that site.</span></span>
2. <span data-ttu-id="63e1e-151">Si se ejecuta en IIS 7 o posterior, haga clic en la pestaña **Módulo nativo**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-151">If running on IIS 7 or higher, click the **Native Module** tab.</span></span> <span data-ttu-id="63e1e-152">Seleccione el servidor, los sitios web o las aplicaciones para habilitar el complemento de IIS en los niveles deseados.</span><span class="sxs-lookup"><span data-stu-id="63e1e-152">Select the server, websites, or applications to enable the IIS plug-in at the desired levels.</span></span>
3. <span data-ttu-id="63e1e-153">Haga clic en el cuadro **Habilitar autenticación IIS** en la parte superior de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="63e1e-153">Click the **Enable IIS authentication** box at the top of the screen.</span></span> <span data-ttu-id="63e1e-154">Azure Multi-Factor Authentication está ahora protegiendo la aplicación IIS seleccionada.</span><span class="sxs-lookup"><span data-stu-id="63e1e-154">Azure Multi-Factor Authentication is now securing the selected IIS application.</span></span> <span data-ttu-id="63e1e-155">Asegúrese de que los usuarios se han importado en el servidor.</span><span class="sxs-lookup"><span data-stu-id="63e1e-155">Ensure that users have been imported into the Server.</span></span>

## <a name="trusted-ips"></a><span data-ttu-id="63e1e-156">IP de confianza</span><span class="sxs-lookup"><span data-stu-id="63e1e-156">Trusted IPs</span></span>
<span data-ttu-id="63e1e-157">Las IP de confianza permiten a los usuarios omitir Azure Multi-Factor Authentication para las solicitudes de sitio web procedentes de determinadas direcciones IP o subredes.</span><span class="sxs-lookup"><span data-stu-id="63e1e-157">The Trusted IPs allows users to bypass Azure Multi-Factor Authentication for website requests originating from specific IP addresses or subnets.</span></span> <span data-ttu-id="63e1e-158">Por ejemplo, puede que desee excluir a determinados usuarios de Azure Multi-Factor Authentication mientras inicia sesión desde la oficina.</span><span class="sxs-lookup"><span data-stu-id="63e1e-158">For example, you may want to exempt users from Azure Multi-Factor Authentication while logging in from the office.</span></span> <span data-ttu-id="63e1e-159">Para ello, debe especificar la subred de la oficina como entrada de IP de confianza.</span><span class="sxs-lookup"><span data-stu-id="63e1e-159">For this, you would specify the office subnet as a Trusted IPs entry.</span></span> <span data-ttu-id="63e1e-160">Para configurar direcciones IP de confianza, use el procedimiento siguiente:</span><span class="sxs-lookup"><span data-stu-id="63e1e-160">To configure Trusted IPs, use the following procedure:</span></span>

1. <span data-ttu-id="63e1e-161">En la sección Autenticación de IIS, haga clic en la pestaña **IP de confianza**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-161">In the IIS Authentication section, click the **Trusted IPs** tab.</span></span>
2. <span data-ttu-id="63e1e-162">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-162">Click **Add**.</span></span>
3. <span data-ttu-id="63e1e-163">Cuando aparezca el cuadro de diálogo Agregar IP de confianza, seleccione el botón de radio **IP única**, **Intervalo IP** o **Subred**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-163">When the Add Trusted IPs dialog box appears, select the **Single IP**, **IP range**, or **Subnet** radio button.</span></span>
4. <span data-ttu-id="63e1e-164">Escriba la dirección IP, el intervalo IP o la subred que debe estar en la lista blanca.</span><span class="sxs-lookup"><span data-stu-id="63e1e-164">Enter the IP address, range of IP addresses or subnet that should be whitelisted.</span></span> <span data-ttu-id="63e1e-165">Si especifica una subred, seleccione la máscara de red adecuada y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="63e1e-165">If entering a subnet, select the appropriate Netmask and click **OK**.</span></span> <span data-ttu-id="63e1e-166">Se ha agregado a la lista blanca.</span><span class="sxs-lookup"><span data-stu-id="63e1e-166">The whitelist has now been added.</span></span>

---
title: formato de mensaje de aaaUnderstand centro de IoT de Azure | Documentos de Microsoft
description: "Guía del desarrollador - formato de hello describe y el contenido esperado de mensajes del centro de IoT."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 3fc5f1a3-3711-4611-9897-d4db079b4250
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 3b1567e47bc32f70c0c252996648c4035ae81243
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="create-and-read-iot-hub-messages"></a><span data-ttu-id="16db4-103">Creación y lectura de mensajes de IoT Hub</span><span class="sxs-lookup"><span data-stu-id="16db4-103">Create and read IoT Hub messages</span></span>

<span data-ttu-id="16db4-104">toosupport interoperabilidad sin problemas a través de protocolos, centro de IoT define un formato de mensaje común para todos los protocolos de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="16db4-104">toosupport seamless interoperability across protocols, IoT Hub defines a common message format for all device-facing protocols.</span></span> <span data-ttu-id="16db4-105">Este formato de mensaje se usa tanto para mensajes [dispositivo a nube][lnk-d2c] como para [nube a dispositivo][lnk-c2d].</span><span class="sxs-lookup"><span data-stu-id="16db4-105">This message format is used for both [device-to-cloud][lnk-d2c] and [cloud-to-device][lnk-c2d] messages.</span></span> <span data-ttu-id="16db4-106">Un [mensaje IoT Hub][lnk-messaging] consta de:</span><span class="sxs-lookup"><span data-stu-id="16db4-106">An [IoT Hub message][lnk-messaging] consists of:</span></span>

* <span data-ttu-id="16db4-107">Un conjunto de *propiedades del sistema*.</span><span class="sxs-lookup"><span data-stu-id="16db4-107">A set of *system properties*.</span></span> <span data-ttu-id="16db4-108">Propiedades que IoT Hub interpreta o establece.</span><span class="sxs-lookup"><span data-stu-id="16db4-108">Properties that IoT Hub interprets or sets.</span></span> <span data-ttu-id="16db4-109">Este conjunto es el predeterminado.</span><span class="sxs-lookup"><span data-stu-id="16db4-109">This set is predetermined.</span></span>
* <span data-ttu-id="16db4-110">Un conjunto de *propiedades de la aplicación*.</span><span class="sxs-lookup"><span data-stu-id="16db4-110">A set of *application properties*.</span></span> <span data-ttu-id="16db4-111">Un diccionario de propiedades de la cadena que se puede definir la aplicación hello y acceso, sin necesidad de cuerpo del mensaje de Hola toodeserialize.</span><span class="sxs-lookup"><span data-stu-id="16db4-111">A dictionary of string properties that hello application can define and access, without needing toodeserialize hello message body.</span></span> <span data-ttu-id="16db4-112">Centro de IoT nunca modifica estas propiedades.</span><span class="sxs-lookup"><span data-stu-id="16db4-112">IoT Hub never modifies these properties.</span></span>
* <span data-ttu-id="16db4-113">Un cuerpo binario opaco.</span><span class="sxs-lookup"><span data-stu-id="16db4-113">An opaque binary body.</span></span>

<span data-ttu-id="16db4-114">Los nombres de propiedad solo pueden contener caracteres alfanuméricos ASCII y ``{'!', '#', '$', '%, '&', "'", '*', '*', '+', '-', '.', '^', '_', '`', '|', '~'}`\` cuando realiza las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="16db4-114">Property names and values can only contain ASCII alphanumeric characters, plus ``{'!', '#', '$', '%, '&', "'", '*', '*', '+', '-', '.', '^', '_', '`', '|', '~'}`\` when you:</span></span>

* <span data-ttu-id="16db4-115">Enviar mensajes de dispositivo a la nube mediante el protocolo HTTP Hola.</span><span class="sxs-lookup"><span data-stu-id="16db4-115">Send device-to-cloud messages using hello HTTP protocol.</span></span>
* <span data-ttu-id="16db4-116">Envío de mensajes de nube a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="16db4-116">Send cloud-to-device messages.</span></span>

<span data-ttu-id="16db4-117">Para obtener más información acerca de cómo tooencode y descodificar los mensajes enviados mediante diferentes protocolos, vea [SDK de Azure IoT][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="16db4-117">For more information about how tooencode and decode messages sent using different protocols, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="16db4-118">Hello en la tabla siguiente enumera conjunto Hola de propiedades del sistema en los mensajes de centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="16db4-118">hello following table lists hello set of system properties in IoT Hub messages.</span></span>

| <span data-ttu-id="16db4-119">Propiedad</span><span class="sxs-lookup"><span data-stu-id="16db4-119">Property</span></span> | <span data-ttu-id="16db4-120">Description</span><span class="sxs-lookup"><span data-stu-id="16db4-120">Description</span></span> |
| --- | --- |
| <span data-ttu-id="16db4-121">MessageId</span><span class="sxs-lookup"><span data-stu-id="16db4-121">MessageId</span></span> |<span data-ttu-id="16db4-122">Un identificador configurable por el usuario para mensaje de saludo utilizado para patrones de solicitud y respuesta.</span><span class="sxs-lookup"><span data-stu-id="16db4-122">A user-settable identifier for hello message used for request-reply patterns.</span></span> <span data-ttu-id="16db4-123">Formato: Una cadena entre mayúsculas y minúsculas (arriba too128 caracteres) de caracteres alfanuméricos ASCII 7 bits + `{'-', ':',’.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="16db4-123">Format: A case-sensitive string (up too128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':',’.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="16db4-124">Número de secuencia</span><span class="sxs-lookup"><span data-stu-id="16db4-124">Sequence number</span></span> |<span data-ttu-id="16db4-125">Un número (único para cada dispositivo a la cola) asignado por mensaje de centro de IoT tooeach en la nube al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="16db4-125">A number (unique per device-queue) assigned by IoT Hub tooeach cloud-to-device message.</span></span> |
| <span data-ttu-id="16db4-126">demasiado</span><span class="sxs-lookup"><span data-stu-id="16db4-126">too</span></span>|<span data-ttu-id="16db4-127">Un destino especificado en los mensajes [de la nube al dispositivo][lnk-c2d].</span><span class="sxs-lookup"><span data-stu-id="16db4-127">A destination specified in [Cloud-to-Device][lnk-c2d] messages.</span></span> |
| <span data-ttu-id="16db4-128">ExpiryTimeUtc</span><span class="sxs-lookup"><span data-stu-id="16db4-128">ExpiryTimeUtc</span></span> |<span data-ttu-id="16db4-129">Fecha y hora de la expiración del mensaje.</span><span class="sxs-lookup"><span data-stu-id="16db4-129">Date and time of message expiration.</span></span> |
| <span data-ttu-id="16db4-130">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="16db4-130">EnqueuedTime</span></span> |<span data-ttu-id="16db4-131">Fecha y hora hello [en la nube al dispositivo] [ lnk-c2d] centro de IoT recibió el mensaje.</span><span class="sxs-lookup"><span data-stu-id="16db4-131">Date and time hello [Cloud-to-Device][lnk-c2d] message was received by IoT Hub.</span></span> |
| <span data-ttu-id="16db4-132">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="16db4-132">CorrelationId</span></span> |<span data-ttu-id="16db4-133">Una propiedad de cadena en un mensaje de respuesta que contiene normalmente Hola MessageId de solicitud de hello, en los patrones de solicitud y respuesta.</span><span class="sxs-lookup"><span data-stu-id="16db4-133">A string property in a response message that typically contains hello MessageId of hello request, in request-reply patterns.</span></span> |
| <span data-ttu-id="16db4-134">UserId</span><span class="sxs-lookup"><span data-stu-id="16db4-134">UserId</span></span> |<span data-ttu-id="16db4-135">Un identificador usado origen de hello toospecify de mensajes.</span><span class="sxs-lookup"><span data-stu-id="16db4-135">An ID used toospecify hello origin of messages.</span></span> <span data-ttu-id="16db4-136">Cuando se generan mensajes por centro de IoT, se establece demasiado`{iot hub name}`.</span><span class="sxs-lookup"><span data-stu-id="16db4-136">When messages are generated by IoT Hub, it is set too`{iot hub name}`.</span></span> |
| <span data-ttu-id="16db4-137">Ack</span><span class="sxs-lookup"><span data-stu-id="16db4-137">Ack</span></span> |<span data-ttu-id="16db4-138">Un generador de mensajes de comentarios.</span><span class="sxs-lookup"><span data-stu-id="16db4-138">A feedback message generator.</span></span> <span data-ttu-id="16db4-139">Esta propiedad se utiliza en los mensajes de comentarios de los mensajes en la nube al dispositivo toorequest centro de IoT toogenerate como resultado de consumo de Hola de los mensajes de bienvenida del dispositivo Hola.</span><span class="sxs-lookup"><span data-stu-id="16db4-139">This property is used in cloud-to-device messages toorequest IoT Hub toogenerate feedback messages as a result of hello consumption of hello message by hello device.</span></span> <span data-ttu-id="16db4-140">Los valores posibles: **ninguno** (valor predeterminado): se genera ningún mensaje de comentarios, **positivo**: recibir un mensaje de respuesta si se ha completado el mensaje de bienvenida, **negativo**: recibir un mensaje de comentarios si mensaje Hola expirado (o se ha alcanzado el número máximo de entregas) sin que se va a completar por dispositivo de hello, o **completa**: positivos y negativos.</span><span class="sxs-lookup"><span data-stu-id="16db4-140">Possible values: **none** (default): no feedback message is generated, **positive**: receive a feedback message if hello message was completed, **negative**: receive a feedback message if hello message expired (or maximum delivery count was reached) without being completed by hello device, or **full**: both positive and negative.</span></span> <span data-ttu-id="16db4-141">Para más información, consulte [Comentarios de mensajes][lnk-feedback].</span><span class="sxs-lookup"><span data-stu-id="16db4-141">For more information, see [Message feedback][lnk-feedback].</span></span> |
| <span data-ttu-id="16db4-142">ConnectionDeviceId</span><span class="sxs-lookup"><span data-stu-id="16db4-142">ConnectionDeviceId</span></span> |<span data-ttu-id="16db4-143">Un identificador establecido por Centro de IoT en los mensajes de dispositivo a nube.</span><span class="sxs-lookup"><span data-stu-id="16db4-143">An ID set by IoT Hub on device-to-cloud messages.</span></span> <span data-ttu-id="16db4-144">Contiene hello **deviceId** del dispositivo de Hola que envía el mensaje de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="16db4-144">It contains hello **deviceId** of hello device that sent hello message.</span></span> |
| <span data-ttu-id="16db4-145">ConnectionDeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="16db4-145">ConnectionDeviceGenerationId</span></span> |<span data-ttu-id="16db4-146">Un identificador establecido por Centro de IoT en los mensajes de dispositivo a nube.</span><span class="sxs-lookup"><span data-stu-id="16db4-146">An ID set by IoT Hub on device-to-cloud messages.</span></span> <span data-ttu-id="16db4-147">Contiene hello **generationId** (como por [propiedades de identidad de dispositivo][lnk-device-properties]) del dispositivo de Hola que envía el mensaje de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="16db4-147">It contains hello **generationId** (as per [Device identity properties][lnk-device-properties]) of hello device that sent hello message.</span></span> |
| <span data-ttu-id="16db4-148">ConnectionAuthMethod</span><span class="sxs-lookup"><span data-stu-id="16db4-148">ConnectionAuthMethod</span></span> |<span data-ttu-id="16db4-149">Un método de autenticación establecido por Centro de IoT en los mensajes de dispositivo a nube.</span><span class="sxs-lookup"><span data-stu-id="16db4-149">An authentication method set by IoT Hub on device-to-cloud messages.</span></span> <span data-ttu-id="16db4-150">Esta propiedad contiene información sobre Hola autenticación método utilizado tooauthenticate Hola dispositivo que envía mensajes de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="16db4-150">This property contains information about hello authentication method used tooauthenticate hello device sending hello message.</span></span> <span data-ttu-id="16db4-151">Para obtener más información, consulte [dispositivo toocloud contra la suplantación de identidad][lnk-antispoofing].</span><span class="sxs-lookup"><span data-stu-id="16db4-151">For more information, see [Device toocloud anti-spoofing][lnk-antispoofing].</span></span> |

## <a name="message-size"></a><span data-ttu-id="16db4-152">Tamaño del mensaje</span><span class="sxs-lookup"><span data-stu-id="16db4-152">Message size</span></span>

<span data-ttu-id="16db4-153">Centro de IoT mide el tamaño de los mensajes de una manera independiente del protocolo, teniendo en cuenta solo carga real de Hola.</span><span class="sxs-lookup"><span data-stu-id="16db4-153">IoT Hub measures message size in a protocol-agnostic way, considering only hello actual payload.</span></span> <span data-ttu-id="16db4-154">tamaño de Hello en bytes se calcula sumando Hola de siguientes hello:</span><span class="sxs-lookup"><span data-stu-id="16db4-154">hello size in bytes is calculated as hello sum of hello following:</span></span>

* <span data-ttu-id="16db4-155">tamaño del texto Hello en bytes.</span><span class="sxs-lookup"><span data-stu-id="16db4-155">hello body size in bytes.</span></span>
* <span data-ttu-id="16db4-156">tamaño de Hello en bytes de todos los valores de Hola Hola sistema de propiedades de mensaje.</span><span class="sxs-lookup"><span data-stu-id="16db4-156">hello size in bytes of all hello values of hello message system properties.</span></span>
* <span data-ttu-id="16db4-157">tamaño de Hello en bytes de todos los valores y nombres de propiedad de usuario.</span><span class="sxs-lookup"><span data-stu-id="16db4-157">hello size in bytes of all user property names and values.</span></span>

<span data-ttu-id="16db4-158">Valores y nombres de propiedad son caracteres de tooASCII limitado, por lo que la longitud de Hola de las cadenas de hello es igual a tamaño de hello en bytes.</span><span class="sxs-lookup"><span data-stu-id="16db4-158">Property names and values are limited tooASCII characters, so hello length of hello strings equals hello size in bytes.</span></span>

## <a name="next-steps"></a><span data-ttu-id="16db4-159">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="16db4-159">Next steps</span></span>

<span data-ttu-id="16db4-160">Para obtener información acerca de los límites de tamaño de mensaje IoT Hub, consulte [Cuotas y limitación de IoT Hub][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="16db4-160">For information about message size limits in IoT Hub, see [IoT Hub quotas and throttling][lnk-quotas].</span></span>

<span data-ttu-id="16db4-161">toolearn toocreate y leer mensajes de centro de IoT en varios lenguajes de programación, vea hello [Introducción] [ lnk-get-started] tutoriales.</span><span class="sxs-lookup"><span data-stu-id="16db4-161">toolearn how toocreate and read IoT Hub messages in various programming languages, see hello [Get started][lnk-get-started] tutorials.</span></span>

[lnk-messaging]: iot-hub-devguide-messaging.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-get-started]: iot-hub-get-started.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-c2d]: iot-hub-devguide-messages-c2d.md
[lnk-d2c]: iot-hub-devguide-messages-d2c.md
[lnk-feedback]: iot-hub-devguide-messages-c2d.md#message-feedback
[lnk-device-properties]: iot-hub-devguide-identity-registry.md#device-identity-properties
[lnk-antispoofing]: iot-hub-devguide-messages-d2c.md#anti-spoofing-properties

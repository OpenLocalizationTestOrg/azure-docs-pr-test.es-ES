---
title: "Información del registro de identidades de Azure IoT Hub | Microsoft Docs"
description: "Guía del desarrollador: descripción del registro de identidades de IoT Hub y cómo usarlo para administrar los dispositivos Incluye información sobre la importación y exportación de identidades de dispositivos de forma masiva."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 0706eccd-e84c-4ae7-bbd4-2b1a22241147
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/08/2017
ms.author: dobett
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6e9c7b71fa6fc78f97c0144c735fc44778181d8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="understand-the-identity-registry-in-your-iot-hub"></a><span data-ttu-id="9984b-104">Descripción del registro de identidades de un centro de IoT</span><span class="sxs-lookup"><span data-stu-id="9984b-104">Understand the identity registry in your IoT hub</span></span>

<span data-ttu-id="9984b-105">Cada centro de IoT tiene un registro de identidades que almacena información acerca de los dispositivos que pueden conectarse a IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="9984b-105">Every IoT hub has an identity registry that stores information about the devices permitted to connect to the IoT hub.</span></span> <span data-ttu-id="9984b-106">Antes de que un dispositivo pueda conectarse a un centro de IoT, debe haber una entrada para ese dispositivo en el registro de identidades del centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="9984b-106">Before a device can connect to an IoT hub, there must be an entry for that device in the IoT hub's identity registry.</span></span> <span data-ttu-id="9984b-107">También se debe autenticar un dispositivo en el centro de IoT basándose en las credenciales almacenadas en el registro de identidades.</span><span class="sxs-lookup"><span data-stu-id="9984b-107">A device must also authenticate with the IoT hub based on credentials stored in the identity registry.</span></span>

<span data-ttu-id="9984b-108">El identificador de dispositivo que se almacena en el registro de identidad distingue mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="9984b-108">The device ID stored in the identity registry is case-sensitive.</span></span>

<span data-ttu-id="9984b-109">En un nivel superior, el registro de identidad es un conjunto de recursos de identidad de dispositivos compatible con REST.</span><span class="sxs-lookup"><span data-stu-id="9984b-109">At a high level, the identity registry is a REST-capable collection of device identity resources.</span></span> <span data-ttu-id="9984b-110">Cuando agrega una entrada al registro de identidades, IoT Hub crea un conjunto de recursos por dispositivo, como una cola que contiene mensajes de nube al dispositivo en curso.</span><span class="sxs-lookup"><span data-stu-id="9984b-110">When you add an entry in the identity registry, IoT Hub creates a set of per-device resources such as the queue that contains in-flight cloud-to-device messages.</span></span>

### <a name="when-to-use"></a><span data-ttu-id="9984b-111">Cuándo se deben usar</span><span class="sxs-lookup"><span data-stu-id="9984b-111">When to use</span></span>

<span data-ttu-id="9984b-112">Utilice el registro de identidad cuando necesite:</span><span class="sxs-lookup"><span data-stu-id="9984b-112">Use the identity registry when you need to:</span></span>

* <span data-ttu-id="9984b-113">Aprovisionar los dispositivos que se conectan a la instancia de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="9984b-113">Provision devices that connect to your IoT hub.</span></span>
* <span data-ttu-id="9984b-114">Controlar el acceso por dispositivo a los puntos de conexión accesibles desde los dispositivos de la instancia de IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="9984b-114">Control per-device access to your hub's device-facing endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="9984b-115">El registro de identidad no contiene metadatos específicos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9984b-115">The identity registry does not contain any application-specific metadata.</span></span>

## <a name="identity-registry-operations"></a><span data-ttu-id="9984b-116">Operaciones de registro de identidad</span><span class="sxs-lookup"><span data-stu-id="9984b-116">Identity registry operations</span></span>

<span data-ttu-id="9984b-117">El registro de identidades de IoT Hub muestra las operaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="9984b-117">The IoT Hub identity registry exposes the following operations:</span></span>

* <span data-ttu-id="9984b-118">Crear la identidad del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-118">Create device identity</span></span>
* <span data-ttu-id="9984b-119">Actualizar la identidad del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-119">Update device identity</span></span>
* <span data-ttu-id="9984b-120">Recuperar la identidad del dispositivo mediante el identificador</span><span class="sxs-lookup"><span data-stu-id="9984b-120">Retrieve device identity by ID</span></span>
* <span data-ttu-id="9984b-121">Eliminar la identidad del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-121">Delete device identity</span></span>
* <span data-ttu-id="9984b-122">Enumerar hasta 1.000 identidades</span><span class="sxs-lookup"><span data-stu-id="9984b-122">List up to 1000 identities</span></span>
* <span data-ttu-id="9984b-123">Exportar todas las identidades a Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="9984b-123">Export all identities to Azure blob storage</span></span>
* <span data-ttu-id="9984b-124">Importar todas las identidades desde Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="9984b-124">Import identities from Azure blob storage</span></span>

<span data-ttu-id="9984b-125">Todas estas operaciones pueden usar la simultaneidad optimista, tal como se especifica en [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9984b-125">All these operations can use optimistic concurrency, as specified in [RFC7232][lnk-rfc7232].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9984b-126">La única manera de recuperar todas las identidades en un registro de identidades de un centro de IoT es usar la funcionalidad [Exportar][lnk-export].</span><span class="sxs-lookup"><span data-stu-id="9984b-126">The only way to retrieve all identities in an IoT hub's identity registry is to use the [Export][lnk-export] functionality.</span></span>

<span data-ttu-id="9984b-127">Un registro de identidades de un centro de IoT:</span><span class="sxs-lookup"><span data-stu-id="9984b-127">An IoT Hub identity registry:</span></span>

* <span data-ttu-id="9984b-128">No contiene los metadatos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9984b-128">Does not contain any application metadata.</span></span>
* <span data-ttu-id="9984b-129">Es accesible como un diccionario utilizando **deviceId** como clave.</span><span class="sxs-lookup"><span data-stu-id="9984b-129">Can be accessed like a dictionary, by using the **deviceId** as the key.</span></span>
* <span data-ttu-id="9984b-130">No admite consultas expresivas.</span><span class="sxs-lookup"><span data-stu-id="9984b-130">Does not support expressive queries.</span></span>

<span data-ttu-id="9984b-131">Una solución de IoT normalmente tiene un almacén independiente específico de la solución que contiene los metadatos específicos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9984b-131">An IoT solution typically has a separate solution-specific store that contains application-specific metadata.</span></span> <span data-ttu-id="9984b-132">Por ejemplo, el almacén específico de la solución en una solución de un edificio inteligente puede registrar la sala en la que se implementa un sensor de temperatura.</span><span class="sxs-lookup"><span data-stu-id="9984b-132">For example, the solution-specific store in a smart building solution would record the room in which a temperature sensor is deployed.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9984b-133">Solo se debe utilizar el registro de identidad para las operaciones de aprovisionamiento y administración de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="9984b-133">Only use the identity registry for device management and provisioning operations.</span></span> <span data-ttu-id="9984b-134">Las operaciones de alto rendimiento en tiempo de ejecución no deben depender de la realización de operaciones en el registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="9984b-134">High throughput operations at run time should not depend on performing operations in the identity registry.</span></span> <span data-ttu-id="9984b-135">Por ejemplo, comprobar el estado de conexión de un dispositivo antes de enviar un comando no es un modelo compatible.</span><span class="sxs-lookup"><span data-stu-id="9984b-135">For example, checking the connection state of a device before sending a command is not a supported pattern.</span></span> <span data-ttu-id="9984b-136">Asegúrese de comprobar las [tasas de limitación][lnk-quotas] para el registro de identidad y el patrón de [latido de dispositivo][lnk-guidance-heartbeat].</span><span class="sxs-lookup"><span data-stu-id="9984b-136">Make sure to check the [throttling rates][lnk-quotas] for the identity registry, and the [device heartbeat][lnk-guidance-heartbeat] pattern.</span></span>

## <a name="disable-devices"></a><span data-ttu-id="9984b-137">Deshabilitar dispositivos</span><span class="sxs-lookup"><span data-stu-id="9984b-137">Disable devices</span></span>

<span data-ttu-id="9984b-138">Puede deshabilitar los dispositivos actualizando la propiedad **status** de una identidad en el registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="9984b-138">You can disable devices by updating the **status** property of an identity in the identity registry.</span></span> <span data-ttu-id="9984b-139">Normalmente, esta propiedad se usa en dos escenarios:</span><span class="sxs-lookup"><span data-stu-id="9984b-139">Typically, you use this property in two scenarios:</span></span>

* <span data-ttu-id="9984b-140">Durante el proceso de orquestación de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="9984b-140">During a provisioning orchestration process.</span></span> <span data-ttu-id="9984b-141">Para más información, consulte [Aprovisionamiento de dispositivos][lnk-guidance-provisioning].</span><span class="sxs-lookup"><span data-stu-id="9984b-141">For more information, see [Device Provisioning][lnk-guidance-provisioning].</span></span>
* <span data-ttu-id="9984b-142">Si por cualquier motivo considera que un dispositivo está en peligro o no está autorizado.</span><span class="sxs-lookup"><span data-stu-id="9984b-142">If, for any reason, you consider a device is compromised or has become unauthorized.</span></span>

## <a name="import-and-export-device-identities"></a><span data-ttu-id="9984b-143">Importar y exportar identidades de dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-143">Import and export device identities</span></span>

<span data-ttu-id="9984b-144">Puede exportar identidades de dispositivo de forma masiva desde el registro de identidades de un centro de IoT mediante operaciones asincrónicas en el [punto de conexión del proveedor de recursos de IoT Hub][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9984b-144">You can export device identities in bulk from an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9984b-145">Las exportaciones son trabajos de ejecución prolongada que usan un contenedor de blobs proporcionado por el cliente para guardar los datos de identidad del dispositivo que se leen en el registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="9984b-145">Exports are long-running jobs that use a customer-supplied blob container to save device identity data read from the identity registry.</span></span>

<span data-ttu-id="9984b-146">Puede importar identidades de dispositivo de forma masiva a un registro de identidades de un centro de IoT mediante operaciones asincrónicas en el [punto de conexión del proveedor de recursos de IoT Hub][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9984b-146">You can import device identities in bulk to an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9984b-147">Las importaciones son trabajos de ejecución prolongada que usan los datos de un contenedor de blobs proporcionado por el cliente para escribir datos de identidad del dispositivo en el registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="9984b-147">Imports are long-running jobs that use data in a customer-supplied blob container to write device identity data into the identity registry.</span></span>

* <span data-ttu-id="9984b-148">Para más información sobre la importación y exportación de API, consulte [API de REST del proveedor de recursos de IoT Hub][lnk-resource-provider-apis].</span><span class="sxs-lookup"><span data-stu-id="9984b-148">For detailed information about the import and export APIs, see [IoT Hub resource provider REST APIs][lnk-resource-provider-apis].</span></span>
* <span data-ttu-id="9984b-149">Para más información sobre la ejecución de trabajos de importación y exportación, consulte [Administración de identidades de dispositivos de IoT Hub de forma masiva][lnk-bulk-identity].</span><span class="sxs-lookup"><span data-stu-id="9984b-149">To learn more about running import and export jobs, see [Bulk management of IoT Hub device identities][lnk-bulk-identity].</span></span>

## <a name="device-provisioning"></a><span data-ttu-id="9984b-150">Aprovisionamiento de dispositivos</span><span class="sxs-lookup"><span data-stu-id="9984b-150">Device provisioning</span></span>

<span data-ttu-id="9984b-151">Los datos del dispositivo que almacena una solución de IoT determinada dependen de los requisitos específicos de la solución.</span><span class="sxs-lookup"><span data-stu-id="9984b-151">The device data that a given IoT solution stores depends on the specific requirements of that solution.</span></span> <span data-ttu-id="9984b-152">Sin embargo, como mínimo, una solución debe almacenar identidades del dispositivo y claves de autenticación.</span><span class="sxs-lookup"><span data-stu-id="9984b-152">But, as a minimum, a solution must store device identities and authentication keys.</span></span> <span data-ttu-id="9984b-153">El IoT Hub incluye un registro de identidades que puede almacenar valores para cada dispositivo como identificadores, claves de autenticación y códigos de estado.</span><span class="sxs-lookup"><span data-stu-id="9984b-153">Azure IoT Hub includes an identity registry that can store values for each device such as IDs, authentication keys, and status codes.</span></span> <span data-ttu-id="9984b-154">Una posible solución consiste en usar otros servicios de Azure como Table Storage, Blob Storage o Cosmos DB para almacenar datos de dispositivos adicionales.</span><span class="sxs-lookup"><span data-stu-id="9984b-154">A solution can use other Azure services such as table storage, blob storage, or Cosmos DB to store any additional device data.</span></span>

<span data-ttu-id="9984b-155">*Aprovisionamiento de dispositivos* es el proceso de agregar los datos iniciales del dispositivo a los almacenes de la solución.</span><span class="sxs-lookup"><span data-stu-id="9984b-155">*Device provisioning* is the process of adding the initial device data to the stores in your solution.</span></span> <span data-ttu-id="9984b-156">Para habilitar un nuevo dispositivo y que se conecte al centro, debe agregar un nuevo identificador de dispositivo y claves al registro de identidades del centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="9984b-156">To enable a new device to connect to your hub, you must add a device ID and keys to the IoT Hub identity registry.</span></span> <span data-ttu-id="9984b-157">Como parte del proceso de aprovisionamiento, es posible que tenga que inicializar datos específicos del dispositivo en otros almacenes de la solución.</span><span class="sxs-lookup"><span data-stu-id="9984b-157">As part of the provisioning process, you might need to initialize device-specific data in other solution stores.</span></span>

## <a name="device-heartbeat"></a><span data-ttu-id="9984b-158">Latido de dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-158">Device heartbeat</span></span>

<span data-ttu-id="9984b-159">El registro de identidades de IoT Hub contiene un campo llamado **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="9984b-159">The IoT Hub identity registry contains a field called **connectionState**.</span></span> <span data-ttu-id="9984b-160">Utilice únicamente el campo **connectionState** durante el desarrollo y la depuración.</span><span class="sxs-lookup"><span data-stu-id="9984b-160">Only use the **connectionState** field during development and debugging.</span></span> <span data-ttu-id="9984b-161">Las soluciones de IoT no deben consultar el campo en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="9984b-161">IoT solutions should not query the field at run time.</span></span> <span data-ttu-id="9984b-162">Por ejemplo, no hay que consultar el campo **connectionState** para comprobar si el dispositivo está conectado antes de enviar un mensaje de la nube al dispositivo o un SMS.</span><span class="sxs-lookup"><span data-stu-id="9984b-162">For example, do not query the **connectionState** field to check if a device is connected before you send a cloud-to-device message or an SMS.</span></span>

<span data-ttu-id="9984b-163">Si la solución de IoT necesita saber si un dispositivo está conectado, debe implementar el *patrón de latido*.</span><span class="sxs-lookup"><span data-stu-id="9984b-163">If your IoT solution needs to know if a device is connected, you should implement the *heartbeat pattern*.</span></span>

<span data-ttu-id="9984b-164">En el patrón de latido, el dispositivo envía mensajes de dispositivo a la nube al menos una vez en un período de tiempo predeterminado (por ejemplo, al menos una vez cada hora).</span><span class="sxs-lookup"><span data-stu-id="9984b-164">In the heartbeat pattern, the device sends device-to-cloud messages at least once every fixed amount of time (for example, at least once every hour).</span></span> <span data-ttu-id="9984b-165">Por lo tanto, incluso si un dispositivo no tiene ningún dato que enviar, seguirá enviando un mensaje de dispositivo a la nube vacío (normalmente con una propiedad que lo identifica como un latido).</span><span class="sxs-lookup"><span data-stu-id="9984b-165">Therefore, even if a device does not have any data to send, it still sends an empty device-to-cloud message (usually with a property that identifies it as a heartbeat).</span></span> <span data-ttu-id="9984b-166">En el lado del servicio, la solución mantiene un mapa con el último latido recibido para cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-166">On the service side, the solution maintains a map with the last heartbeat received for each device.</span></span> <span data-ttu-id="9984b-167">Si solución si no recibe del dispositivo un mensaje de latido en el tiempo esperado, da por supuesto que hay un problema con un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-167">If the solution does not receive a heartbeat message within the expected time from the device, it assumes that there is a problem with the device.</span></span>

<span data-ttu-id="9984b-168">Una implementación más compleja podría incluir la información de [supervisión de operaciones][lnk-devguide-opmon] para identificar los dispositivos que están intentando conectarse o comunicarse sin éxito.</span><span class="sxs-lookup"><span data-stu-id="9984b-168">A more complex implementation could include the information from [operations monitoring][lnk-devguide-opmon] to identify devices that are trying to connect or communicate but failing.</span></span> <span data-ttu-id="9984b-169">Al implementar el patrón de latido, asegúrese de echar un vistazo a las [cuotas y limitaciones de IoT Hub][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="9984b-169">When you implement the heartbeat pattern, make sure to check [IoT Hub Quotas and Throttles][lnk-quotas].</span></span>

> [!NOTE]
> <span data-ttu-id="9984b-170">Si una solución de IoT utiliza el estado de conexión de los dispositivos únicamente para determinar si enviar mensajes de la nube a los dispositivos y los mensajes no se difunden a grandes conjuntos de dispositivos, considere usar el patrón más sencillo de un *tiempo de expiración breve*.</span><span class="sxs-lookup"><span data-stu-id="9984b-170">If an IoT solution uses the connection state solely to determine whether to send cloud-to-device messages, and messages are not broadcast to large sets of devices, consider using the simpler *short expiry time* pattern.</span></span> <span data-ttu-id="9984b-171">Con este patrón se consigue el mismo resultado que con el mantenimiento de un registro del estado de la conexión de los dispositivos con el patrón de latido, a la vez que resulta más eficiente.</span><span class="sxs-lookup"><span data-stu-id="9984b-171">This pattern achieves the same result as maintaining a device connection state registry using the heartbeat pattern, while being more efficient.</span></span> <span data-ttu-id="9984b-172">Cuando solicita confirmaciones de mensajes, IoT Hub puede notificarle sobre qué dispositivos pueden recibir mensajes y cuáles no.</span><span class="sxs-lookup"><span data-stu-id="9984b-172">If you request message acknowledgements, IoT Hub can notify you about which devices are able to receive messages and which are not.</span></span>

## <a name="device-lifecycle-notifications"></a><span data-ttu-id="9984b-173">Notificaciones de ciclo de vida de dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-173">Device lifecycle notifications</span></span>

<span data-ttu-id="9984b-174">IoT Hub puede notificar la solución de IoT al crearse o eliminarse la identidad de un dispositivo mediante el envío de notificaciones de ciclo de vida de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-174">IoT Hub can notify your IoT solution when a device identity is created or deleted by sending device lifecycle notifications.</span></span> <span data-ttu-id="9984b-175">Para ello, la solución de IoT debe crear una ruta y establecer el origen de datos igual a *DeviceLifecycleEvents*.</span><span class="sxs-lookup"><span data-stu-id="9984b-175">To do so, your IoT solution needs to create a route and to set the Data Source equal to *DeviceLifecycleEvents*.</span></span> <span data-ttu-id="9984b-176">De forma predeterminada, no se envían notificaciones de ciclo de vida, es decir, no existen previamente tales rutas.</span><span class="sxs-lookup"><span data-stu-id="9984b-176">By default, no lifecycle notifications are sent, that is, no such routes pre-exist.</span></span> <span data-ttu-id="9984b-177">El mensaje de notificaciones incluye propiedades y el cuerpo.</span><span class="sxs-lookup"><span data-stu-id="9984b-177">The notification message includes properties, and body.</span></span>

<span data-ttu-id="9984b-178">Propiedades: las propiedades del sistema de mensajes tienen como prefijo el símbolo `'$'`.</span><span class="sxs-lookup"><span data-stu-id="9984b-178">Properties: Message system properties are prefixed with the `'$'` symbol.</span></span>

| <span data-ttu-id="9984b-179">Nombre</span><span class="sxs-lookup"><span data-stu-id="9984b-179">Name</span></span> | <span data-ttu-id="9984b-180">Valor</span><span class="sxs-lookup"><span data-stu-id="9984b-180">Value</span></span> |
| --- | --- |
<span data-ttu-id="9984b-181">$content-type</span><span class="sxs-lookup"><span data-stu-id="9984b-181">$content-type</span></span> | <span data-ttu-id="9984b-182">application/json</span><span class="sxs-lookup"><span data-stu-id="9984b-182">application/json</span></span> |
<span data-ttu-id="9984b-183">$iothub-enqueuedtime</span><span class="sxs-lookup"><span data-stu-id="9984b-183">$iothub-enqueuedtime</span></span> |  <span data-ttu-id="9984b-184">Hora de envío de la notificación</span><span class="sxs-lookup"><span data-stu-id="9984b-184">Time when the notification was sent</span></span> |
<span data-ttu-id="9984b-185">$iothub-message-source</span><span class="sxs-lookup"><span data-stu-id="9984b-185">$iothub-message-source</span></span> | <span data-ttu-id="9984b-186">deviceLifecycleEvents</span><span class="sxs-lookup"><span data-stu-id="9984b-186">deviceLifecycleEvents</span></span> |
<span data-ttu-id="9984b-187">$content-encoding</span><span class="sxs-lookup"><span data-stu-id="9984b-187">$content-encoding</span></span> | <span data-ttu-id="9984b-188">utf-8</span><span class="sxs-lookup"><span data-stu-id="9984b-188">utf-8</span></span> |
<span data-ttu-id="9984b-189">opType</span><span class="sxs-lookup"><span data-stu-id="9984b-189">opType</span></span> | <span data-ttu-id="9984b-190">**createDeviceIdentity** o **deleteDeviceIdentity**</span><span class="sxs-lookup"><span data-stu-id="9984b-190">**createDeviceIdentity** or **deleteDeviceIdentity**</span></span> |
<span data-ttu-id="9984b-191">hubName</span><span class="sxs-lookup"><span data-stu-id="9984b-191">hubName</span></span> | <span data-ttu-id="9984b-192">Nombre de IoT Hub</span><span class="sxs-lookup"><span data-stu-id="9984b-192">Name of IoT Hub</span></span> |
<span data-ttu-id="9984b-193">deviceId</span><span class="sxs-lookup"><span data-stu-id="9984b-193">deviceId</span></span> | <span data-ttu-id="9984b-194">Id. del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-194">ID of the device</span></span> |
<span data-ttu-id="9984b-195">operationTimestamp</span><span class="sxs-lookup"><span data-stu-id="9984b-195">operationTimestamp</span></span> | <span data-ttu-id="9984b-196">Marca de tiempo ISO8601 de operación</span><span class="sxs-lookup"><span data-stu-id="9984b-196">ISO8601 timestamp of operation</span></span> |
<span data-ttu-id="9984b-197">iothub-message-schema</span><span class="sxs-lookup"><span data-stu-id="9984b-197">iothub-message-schema</span></span> | <span data-ttu-id="9984b-198">deviceLifecycleNotification</span><span class="sxs-lookup"><span data-stu-id="9984b-198">deviceLifecycleNotification</span></span> |

<span data-ttu-id="9984b-199">Cuerpo: esta sección está en formato JSON y representa el dispositivo gemelo de la identidad del dispositivo creada.</span><span class="sxs-lookup"><span data-stu-id="9984b-199">Body: This section is in JSON format and represents the twin of the created device identity.</span></span> <span data-ttu-id="9984b-200">Por ejemplo,</span><span class="sxs-lookup"><span data-stu-id="9984b-200">For example,</span></span>

```json
{
    "deviceId":"11576-ailn-test-0-67333793211",
    "etag":"AAAAAAAAAAE=",
    "properties": {
        "desired": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        },
        "reported": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        }
    }
}
```

## <a name="reference-topics"></a><span data-ttu-id="9984b-201">Temas de referencia:</span><span class="sxs-lookup"><span data-stu-id="9984b-201">Reference topics:</span></span>

<span data-ttu-id="9984b-202">Los siguientes temas de referencia proporcionan más información sobre el registro de identidad.</span><span class="sxs-lookup"><span data-stu-id="9984b-202">The following reference topics provide you with more information about the identity registry.</span></span>

## <a name="device-identity-properties"></a><span data-ttu-id="9984b-203">Propiedades de identidad del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9984b-203">Device identity properties</span></span>

<span data-ttu-id="9984b-204">Las identidades de dispositivos se representan como documentos JSON con las propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="9984b-204">Device identities are represented as JSON documents with the following properties:</span></span>

| <span data-ttu-id="9984b-205">Propiedad</span><span class="sxs-lookup"><span data-stu-id="9984b-205">Property</span></span> | <span data-ttu-id="9984b-206">Opciones</span><span class="sxs-lookup"><span data-stu-id="9984b-206">Options</span></span> | <span data-ttu-id="9984b-207">Description</span><span class="sxs-lookup"><span data-stu-id="9984b-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9984b-208">deviceId</span><span class="sxs-lookup"><span data-stu-id="9984b-208">deviceId</span></span> |<span data-ttu-id="9984b-209">necesarias, de solo lectura en actualizaciones</span><span class="sxs-lookup"><span data-stu-id="9984b-209">required, read-only on updates</span></span> |<span data-ttu-id="9984b-210">Una cadena que distingue mayúsculas y minúsculas (de hasta 128 caracteres) de caracteres alfanuméricos ASCII de 7 bits + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="9984b-210">A case-sensitive string (up to 128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="9984b-211">generationId</span><span class="sxs-lookup"><span data-stu-id="9984b-211">generationId</span></span> |<span data-ttu-id="9984b-212">requerido, de solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-212">required, read-only</span></span> |<span data-ttu-id="9984b-213">Una cadena de hasta 128 caracteres que distingue mayúsculas y minúsculas generada por el centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="9984b-213">An IoT hub-generated, case-sensitive string up to 128 characters long.</span></span> <span data-ttu-id="9984b-214">Este valor se usa para distinguir dispositivos con el mismo **deviceId**, cuando se han eliminado y vuelto a crear.</span><span class="sxs-lookup"><span data-stu-id="9984b-214">This value is used to distinguish devices with the same **deviceId**, when they have been deleted and re-created.</span></span> |
| <span data-ttu-id="9984b-215">ETag</span><span class="sxs-lookup"><span data-stu-id="9984b-215">etag</span></span> |<span data-ttu-id="9984b-216">requerido, de solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-216">required, read-only</span></span> |<span data-ttu-id="9984b-217">Una cadena que representa un valor de ETag débil para la identidad del dispositivo, como [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9984b-217">A string representing a weak ETag for the device identity, as per [RFC7232][lnk-rfc7232].</span></span> |
| <span data-ttu-id="9984b-218">auth</span><span class="sxs-lookup"><span data-stu-id="9984b-218">auth</span></span> |<span data-ttu-id="9984b-219">opcional</span><span class="sxs-lookup"><span data-stu-id="9984b-219">optional</span></span> |<span data-ttu-id="9984b-220">Un objeto compuesto que contiene material de seguridad e información de autenticación.</span><span class="sxs-lookup"><span data-stu-id="9984b-220">A composite object containing authentication information and security materials.</span></span> |
| <span data-ttu-id="9984b-221">auth.symkey</span><span class="sxs-lookup"><span data-stu-id="9984b-221">auth.symkey</span></span> |<span data-ttu-id="9984b-222">opcional</span><span class="sxs-lookup"><span data-stu-id="9984b-222">optional</span></span> |<span data-ttu-id="9984b-223">Un objeto compuesto que contiene una clave principal y una secundaria, almacenadas en formato base64.</span><span class="sxs-lookup"><span data-stu-id="9984b-223">A composite object containing a primary and a secondary key, stored in base64 format.</span></span> |
| <span data-ttu-id="9984b-224">status</span><span class="sxs-lookup"><span data-stu-id="9984b-224">status</span></span> |<span data-ttu-id="9984b-225">requerido</span><span class="sxs-lookup"><span data-stu-id="9984b-225">required</span></span> |<span data-ttu-id="9984b-226">Indicador de acceso</span><span class="sxs-lookup"><span data-stu-id="9984b-226">An access indicator.</span></span> <span data-ttu-id="9984b-227">Puede ser **Habilitado** o **Deshabilitado**.</span><span class="sxs-lookup"><span data-stu-id="9984b-227">Can be **Enabled** or **Disabled**.</span></span> <span data-ttu-id="9984b-228">Si está **Habilitado**, el dispositivo se puede conectar.</span><span class="sxs-lookup"><span data-stu-id="9984b-228">If **Enabled**, the device is allowed to connect.</span></span> <span data-ttu-id="9984b-229">Si está **Dishabilitado**, este dispositivo no puede obtener acceso a ningún punto de conexión accesible desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-229">If **Disabled**, this device cannot access any device-facing endpoint.</span></span> |
| <span data-ttu-id="9984b-230">statusReason</span><span class="sxs-lookup"><span data-stu-id="9984b-230">statusReason</span></span> |<span data-ttu-id="9984b-231">opcional</span><span class="sxs-lookup"><span data-stu-id="9984b-231">optional</span></span> |<span data-ttu-id="9984b-232">Una cadena de 128 caracteres que almacena el motivo del estado de identidad del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-232">A 128 character-long string that stores the reason for the device identity status.</span></span> <span data-ttu-id="9984b-233">Se permiten todos los caracteres UTF-8.</span><span class="sxs-lookup"><span data-stu-id="9984b-233">All UTF-8 characters are allowed.</span></span> |
| <span data-ttu-id="9984b-234">statusUpdateTime</span><span class="sxs-lookup"><span data-stu-id="9984b-234">statusUpdateTime</span></span> |<span data-ttu-id="9984b-235">solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-235">read-only</span></span> |<span data-ttu-id="9984b-236">Un indicador temporal, que muestra la fecha y hora de la última actualización de estado.</span><span class="sxs-lookup"><span data-stu-id="9984b-236">A temporal indicator, showing the date and time of the last status update.</span></span> |
| <span data-ttu-id="9984b-237">connectionState</span><span class="sxs-lookup"><span data-stu-id="9984b-237">connectionState</span></span> |<span data-ttu-id="9984b-238">solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-238">read-only</span></span> |<span data-ttu-id="9984b-239">Un campo que indica el estado de la conexión: **Conectado** o **Desconectado**.</span><span class="sxs-lookup"><span data-stu-id="9984b-239">A field indicating connection status: either **Connected** or **Disconnected**.</span></span> <span data-ttu-id="9984b-240">Este campo representa la vista de IoT Hub del estado de conexión del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9984b-240">This field represents the IoT Hub view of the device connection status.</span></span> <span data-ttu-id="9984b-241">**Importante**: Este campo debe usarse solo para fines de desarrollo o depuración.</span><span class="sxs-lookup"><span data-stu-id="9984b-241">**Important**: This field should be used only for development/debugging purposes.</span></span> <span data-ttu-id="9984b-242">El estado de conexión se actualiza solo para dispositivos que usen AMQP o MQTT.</span><span class="sxs-lookup"><span data-stu-id="9984b-242">The connection state is updated only for devices using MQTT or AMQP.</span></span> <span data-ttu-id="9984b-243">Además, se basa en pings de nivel de protocolo (pings MQTT o pings AMQP) y puede tener un retraso de 5 minutos como máximo.</span><span class="sxs-lookup"><span data-stu-id="9984b-243">Also, it is based on protocol-level pings (MQTT pings, or AMQP pings), and it can have a maximum delay of only 5 minutes.</span></span> <span data-ttu-id="9984b-244">Por estos motivos es posible que haya falsos positivos, como dispositivos que se notifican como conectados pero que están desconectados.</span><span class="sxs-lookup"><span data-stu-id="9984b-244">For these reasons, there can be false positives, such as devices reported as connected but that are disconnected.</span></span> |
| <span data-ttu-id="9984b-245">connectionStateUpdatedTime</span><span class="sxs-lookup"><span data-stu-id="9984b-245">connectionStateUpdatedTime</span></span> |<span data-ttu-id="9984b-246">solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-246">read-only</span></span> |<span data-ttu-id="9984b-247">Un indicador temporal que muestra la fecha y hora de la última vez que se actualizó el estado de conexión.</span><span class="sxs-lookup"><span data-stu-id="9984b-247">A temporal indicator, showing the date and last time the connection state was updated.</span></span> |
| <span data-ttu-id="9984b-248">lastActivityTime</span><span class="sxs-lookup"><span data-stu-id="9984b-248">lastActivityTime</span></span> |<span data-ttu-id="9984b-249">solo lectura</span><span class="sxs-lookup"><span data-stu-id="9984b-249">read-only</span></span> |<span data-ttu-id="9984b-250">Un indicador temporal que muestra la fecha y hora de la última vez que el dispositivo se conectó, recibió o envió un mensaje.</span><span class="sxs-lookup"><span data-stu-id="9984b-250">A temporal indicator, showing the date and last time the device connected, received, or sent a message.</span></span> |

> [!NOTE]
> <span data-ttu-id="9984b-251">El estado de la conexión solo puede representar la vista del IoT Hub del estado de la conexión.</span><span class="sxs-lookup"><span data-stu-id="9984b-251">Connection state can only represent the IoT Hub view of the status of the connection.</span></span> <span data-ttu-id="9984b-252">Las actualizaciones de este estado se pueden retrasar, dependiendo de las configuraciones y las condiciones de red.</span><span class="sxs-lookup"><span data-stu-id="9984b-252">Updates to this state may be delayed, depending on network conditions and configurations.</span></span>

## <a name="additional-reference-material"></a><span data-ttu-id="9984b-253">Material de referencia adicional</span><span class="sxs-lookup"><span data-stu-id="9984b-253">Additional reference material</span></span>

<span data-ttu-id="9984b-254">Otros temas de referencia en la guía del desarrollador de IoT Hub son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="9984b-254">Other reference topics in the IoT Hub developer guide include:</span></span>

* <span data-ttu-id="9984b-255">En [Puntos de conexión de IoT Hub][lnk-endpoints], se describen los diferentes puntos de conexión que expone cada centro de IoT Hub para las operaciones en tiempo de ejecución y de administración.</span><span class="sxs-lookup"><span data-stu-id="9984b-255">[IoT Hub endpoints][lnk-endpoints] describes the various endpoints that each IoT hub exposes for run-time and management operations.</span></span>
* <span data-ttu-id="9984b-256">En [Cuotas y limitación][lnk-quotas], se describen las cuotas y el comportamiento de limitación que se aplican al servicio IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="9984b-256">[Throttling and quotas][lnk-quotas] describes the quotas and throttling behaviors that apply to the IoT Hub service.</span></span>
* <span data-ttu-id="9984b-257">En [SDK de dispositivo y servicio IoT de Azure][lnk-sdks] se muestran los diversos SDK de lenguaje que puede usar para desarrollar aplicaciones para dispositivo y de servicio que interactúen con IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="9984b-257">[Azure IoT device and service SDKs][lnk-sdks] lists the various language SDKs you can use when you develop both device and service apps that interact with IoT Hub.</span></span>
* <span data-ttu-id="9984b-258">En [Lenguaje de consulta de IoT Hub][lnk-query], se describe el lenguaje de consulta que se puede usar para recuperar información de IoT Hub sobre los trabajos y dispositivos gemelos.</span><span class="sxs-lookup"><span data-stu-id="9984b-258">[IoT Hub query language][lnk-query] describes the query language you can use to retrieve information from IoT Hub about your device twins and jobs.</span></span>
* <span data-ttu-id="9984b-259">En [Compatibilidad con MQTT de IoT Hub][lnk-devguide-mqtt], se proporciona más información sobre la compatibilidad de IoT Hub con el protocolo MQTT.</span><span class="sxs-lookup"><span data-stu-id="9984b-259">[IoT Hub MQTT support][lnk-devguide-mqtt] provides more information about IoT Hub support for the MQTT protocol.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9984b-260">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="9984b-260">Next steps</span></span>

<span data-ttu-id="9984b-261">Ahora que ha aprendido a usar el registro de identidad de IoT Hub, pueden interesarle los siguientes temas de la Guía del desarrollador de IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="9984b-261">Now you have learned how to use the IoT Hub identity registry, you may be interested in the following IoT Hub developer guide topics:</span></span>

* <span data-ttu-id="9984b-262">[Control del acceso a IoT Hub][lnk-devguide-security]</span><span class="sxs-lookup"><span data-stu-id="9984b-262">[Control access to IoT Hub][lnk-devguide-security]</span></span>
* <span data-ttu-id="9984b-263">[Uso de dispositivos gemelos para sincronizar el estado y las configuraciones][lnk-devguide-device-twins]</span><span class="sxs-lookup"><span data-stu-id="9984b-263">[Use device twins to synchronize state and configurations][lnk-devguide-device-twins]</span></span>
* <span data-ttu-id="9984b-264">[Invocación de un método directo en un dispositivo][lnk-devguide-directmethods]</span><span class="sxs-lookup"><span data-stu-id="9984b-264">[Invoke a direct method on a device][lnk-devguide-directmethods]</span></span>
* <span data-ttu-id="9984b-265">[Programación de trabajos en varios dispositivos][lnk-devguide-jobs]</span><span class="sxs-lookup"><span data-stu-id="9984b-265">[Schedule jobs on multiple devices][lnk-devguide-jobs]</span></span>

<span data-ttu-id="9984b-266">Si desea probar algunos de los conceptos descritos en este artículo, puede interesarle el siguiente tutorial de IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="9984b-266">If you would like to try out some of the concepts described in this article, you may be interested in the following IoT Hub tutorial:</span></span>

* <span data-ttu-id="9984b-267">[Introducción a Azure IoT Hub][lnk-getstarted-tutorial]</span><span class="sxs-lookup"><span data-stu-id="9984b-267">[Get started with Azure IoT Hub][lnk-getstarted-tutorial]</span></span>

<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://docs.microsoft.com/rest/api/iothub/iothubresource
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md

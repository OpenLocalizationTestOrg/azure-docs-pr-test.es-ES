---
title: "Centro de IoT alta disponibilidad y recuperación ante desastres aaaAzure | Documentos de Microsoft"
description: "Describe las características de Azure y centro de IoT de Hola que le ayudarán a toobuild soluciones de alta disponibilidad IoT de Azure con capacidades de recuperación ante desastres."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="f23e9-103">Alta disponibilidad y recuperación ante desastres del Centro de IoT</span><span class="sxs-lookup"><span data-stu-id="f23e9-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="f23e9-104">Como un servicio de Azure, centro de IoT proporciona alta disponibilidad (HA) mediante redundancias en nivel de región de Azure de hello, sin ningún trabajo adicional necesario para soluciones de Hola.</span><span class="sxs-lookup"><span data-stu-id="f23e9-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="f23e9-105">plataforma de Microsoft Azure Hello también incluye toohelp características generar soluciones con capacidad de recuperación (DR) o disponibilidad entre regiones.</span><span class="sxs-lookup"><span data-stu-id="f23e9-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="f23e9-106">Si desea tooprovide global, entre regiones alta disponibilidad para dispositivos o usuarios, diseñar y preparar sus soluciones tootake aprovechar estas características de recuperación ante desastres de Azure.</span><span class="sxs-lookup"><span data-stu-id="f23e9-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="f23e9-107">artículo de Hello [orientación técnica de continuidad de negocio de Azure](../resiliency/resiliency-technical-guidance.md) describe características integradas de hello en Azure para la continuidad del negocio y recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="f23e9-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="f23e9-108">Hola [recuperación ante desastres y alta disponibilidad para las aplicaciones de Azure] [ Disaster recovery and high availability for Azure applications] documento proporciona instrucciones de arquitectura sobre las estrategias para las aplicaciones de Azure tooachieve alta disponibilidad y recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="f23e9-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="f23e9-109">Recuperación ante desastres de Centro de IoT de Azure</span><span class="sxs-lookup"><span data-stu-id="f23e9-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="f23e9-110">Además HA región toointra, centro de IoT implementa mecanismos de conmutación por error para la recuperación ante desastres que no requieren intervención del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="f23e9-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="f23e9-111">Recuperación ante desastres de centro de IoT se inicia automáticamente y tiene un objetivo de tiempo de recuperación (RTO) de hello después de objetivos de punto de recuperación (RPO) y de 26 de 2 horas.</span><span class="sxs-lookup"><span data-stu-id="f23e9-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="f23e9-112">Funcionalidad</span><span class="sxs-lookup"><span data-stu-id="f23e9-112">Functionality</span></span> | <span data-ttu-id="f23e9-113">RPO</span><span class="sxs-lookup"><span data-stu-id="f23e9-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="f23e9-114">Disponibilidad de servicio para las operaciones de registro y comunicación</span><span class="sxs-lookup"><span data-stu-id="f23e9-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="f23e9-115">Posible pérdida de CName</span><span class="sxs-lookup"><span data-stu-id="f23e9-115">Possible CName loss</span></span> |
| <span data-ttu-id="f23e9-116">Datos de identidad en el registro de identidad</span><span class="sxs-lookup"><span data-stu-id="f23e9-116">Identity data in identity registry</span></span> |<span data-ttu-id="f23e9-117">Pérdida de datos de 0-5 minutos</span><span class="sxs-lookup"><span data-stu-id="f23e9-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="f23e9-118">Mensajes de dispositivo a nube</span><span class="sxs-lookup"><span data-stu-id="f23e9-118">Device-to-cloud messages</span></span> |<span data-ttu-id="f23e9-119">Se pierden todos los mensajes no leídos</span><span class="sxs-lookup"><span data-stu-id="f23e9-119">All unread messages are lost</span></span> |
| <span data-ttu-id="f23e9-120">Mensajes de supervisión de operaciones</span><span class="sxs-lookup"><span data-stu-id="f23e9-120">Operations monitoring messages</span></span> |<span data-ttu-id="f23e9-121">Se pierden todos los mensajes no leídos</span><span class="sxs-lookup"><span data-stu-id="f23e9-121">All unread messages are lost</span></span> |
| <span data-ttu-id="f23e9-122">Mensajes de nube a dispositivo</span><span class="sxs-lookup"><span data-stu-id="f23e9-122">Cloud-to-device messages</span></span> |<span data-ttu-id="f23e9-123">Pérdida de datos de 0-5 minutos</span><span class="sxs-lookup"><span data-stu-id="f23e9-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="f23e9-124">Cola de comentarios de nube a dispositivo</span><span class="sxs-lookup"><span data-stu-id="f23e9-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="f23e9-125">Se pierden todos los mensajes no leídos</span><span class="sxs-lookup"><span data-stu-id="f23e9-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="f23e9-126">Conmutación por error regional con el Centro de IoT</span><span class="sxs-lookup"><span data-stu-id="f23e9-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="f23e9-127">Una descripción completa de las topologías de implementación de soluciones de IoT está fuera de ámbito Hola de este artículo.</span><span class="sxs-lookup"><span data-stu-id="f23e9-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="f23e9-128">artículo de Hello describe hello *conmutación por error regional* modelo de implementación para el propósito de Hola de alta disponibilidad y recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="f23e9-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="f23e9-129">En un modelo de conmutación por error regional, Hola solución back-end ejecuta principalmente en la ubicación de un centro de datos y una secundaria centro de IoT y el back-end se implementan en otra ubicación de centro de datos.</span><span class="sxs-lookup"><span data-stu-id="f23e9-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="f23e9-130">Si el centro de IoT Hola Hola centro de datos principal sufre una interrupción o se interrumpe la conectividad de red de Hola desde el centro de datos principal de hello dispositivo toohello.</span><span class="sxs-lookup"><span data-stu-id="f23e9-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="f23e9-131">Los dispositivos utilizan un punto de conexión de servicio secundario siempre que no se puede alcanzar la puerta de enlace de hello principal.</span><span class="sxs-lookup"><span data-stu-id="f23e9-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="f23e9-132">Con una capacidad entre regiones conmutación por error, puede mejorarse la disponibilidad de la solución de hello más allá de alta disponibilidad de una única región de Hola.</span><span class="sxs-lookup"><span data-stu-id="f23e9-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="f23e9-133">En un nivel alto, tooimplement un modelo de conmutación por error regional con el centro de IoT, necesita Hola siguiente:</span><span class="sxs-lookup"><span data-stu-id="f23e9-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="f23e9-134">**Un centro de IoT y la lógica de enrutamiento del dispositivo secundaria**: en caso de hello de una interrupción del servicio en su región primaria, dispositivos deben iniciar la región secundaria de conexión tooyour.</span><span class="sxs-lookup"><span data-stu-id="f23e9-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="f23e9-135">Dada la naturaleza de compatible con el estado de saludo de la mayoría de los servicios implicada, es común para el proceso de solución administradores tootrigger Hola región entre conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="f23e9-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="f23e9-136">Hola mejor manera toocommunicate Hola nuevo punto de conexión toodevices, sin perder el control del proceso de hello, es toohave ellos comprueban con regularidad un *supervisor* servicio de punto de conexión activo Hola actual.</span><span class="sxs-lookup"><span data-stu-id="f23e9-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="f23e9-137">Hello servicio de supervisor puede ser una aplicación web que se replica y mantiene accesible mediante técnicas de redirección de DNS (por ejemplo, si se usa [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="f23e9-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="f23e9-138">**Replicación de registro de identidad** -toobe utilizable, centro de IoT secundaria Hola debe contener todas las identidades de dispositivos que se pueden conectar toohello solución.</span><span class="sxs-lookup"><span data-stu-id="f23e9-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="f23e9-139">solución de Hello debe mantener copias de seguridad de replicación geográfica de identidades de dispositivos y cargarlos toohello centro de IoT secundaria antes de cambiar un punto de conexión activo de Hola para dispositivos de Hola.</span><span class="sxs-lookup"><span data-stu-id="f23e9-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="f23e9-140">función de exportación de identidad de dispositivo de Hola de centro de IoT es útil en este contexto.</span><span class="sxs-lookup"><span data-stu-id="f23e9-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="f23e9-141">Para obtener más información, consulte la [guía para desarrolladores de IoT Hub sobre registro de identidad][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="f23e9-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="f23e9-142">**Combinación lógica** : si región principal Hola vuelva a estar disponible, todos Hola estado y datos que se han creado en el sitio secundario de hello deben región principal migrados toohello atrás.</span><span class="sxs-lookup"><span data-stu-id="f23e9-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="f23e9-143">Este estado y los datos principalmente está relacionada con las identidades de toodevice y metadatos de la aplicación, que se deben combinar con el centro de IoT principal de Hola y cualquier otro almacén específica de la aplicación en la región principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="f23e9-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="f23e9-144">toosimplify este paso, debe usar las operaciones de idempotente.</span><span class="sxs-lookup"><span data-stu-id="f23e9-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="f23e9-145">Operaciones de idempotente minimizar Hola efectos secundarios de una distribución coherente eventual Hola de eventos y de duplicados o fuera de servicio entrega de eventos.</span><span class="sxs-lookup"><span data-stu-id="f23e9-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="f23e9-146">Además, debe ser lógica de la aplicación hello tootolerate diseñada posibles incoherencias o "ligeramente" estado de la fecha de.</span><span class="sxs-lookup"><span data-stu-id="f23e9-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="f23e9-147">Esta situación puede producirse toohello tiempo adicional necesario para el sistema de Hola demasiado "reparación" en función de los objetivos de punto de recuperación (RPO).</span><span class="sxs-lookup"><span data-stu-id="f23e9-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f23e9-148">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f23e9-148">Next steps</span></span>
<span data-ttu-id="f23e9-149">Siga estos toolearn de vínculos más información acerca del centro de IoT de Azure:</span><span class="sxs-lookup"><span data-stu-id="f23e9-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="f23e9-150">[Introducción a los centros de IoT (tutorial)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="f23e9-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="f23e9-151">[¿Qué es Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="f23e9-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md

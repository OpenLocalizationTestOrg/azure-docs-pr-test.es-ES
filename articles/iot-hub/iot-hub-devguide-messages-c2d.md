---
title: "mensajería aaaUnderstand centro de IoT de Azure en la nube al dispositivo | Documentos de Microsoft"
description: "Guía del desarrollador - cómo toouse en la nube al dispositivo con el centro de IoT de mensajería. Incluye información acerca del ciclo de vida del mensaje de Hola y opciones de configuración."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 5c747b50163873d823556a8baa769c4b8f7f8c44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="send-cloud-to-device-messages-from-iot-hub"></a><span data-ttu-id="0be0e-104">Envío de mensajes de nube a dispositivo desde IoT Hub</span><span class="sxs-lookup"><span data-stu-id="0be0e-104">Send cloud-to-device messages from IoT Hub</span></span>

<span data-ttu-id="0be0e-105">toosend notificaciones unidireccional toohello del dispositivo desde el back-end de soluciones, enviar mensajes de nube para dispositivos de su dispositivo de tooyour IoT hub.</span><span class="sxs-lookup"><span data-stu-id="0be0e-105">toosend one-way notifications toohello device app from your solution back end, send cloud-to-devices messages from your IoT hub tooyour device.</span></span> <span data-ttu-id="0be0e-106">Para obtener una explicación de otras opciones de nube a dispositivos compatibles con IoT Hub, consulte [Guía de comunicación de nube a dispositivo][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="0be0e-106">For a discussion of other cloud-to-devices options supported by IoT Hub, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="0be0e-107">Se envían mensajes de la nube al dispositivo mediante un punto de conexión orientado al servicio (**/messages/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="0be0e-107">You send cloud-to-device messages through a service-facing endpoint (**/messages/devicebound**).</span></span> <span data-ttu-id="0be0e-108">Un dispositivo, a continuación, recibe mensajes de Hola a través de un extremo específico del dispositivo (**/devices/ {deviceId} / mensajes/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="0be0e-108">A device then receives hello messages through a device-specific endpoint (**/devices/{deviceId}/messages/devicebound**).</span></span>

<span data-ttu-id="0be0e-109">Cada mensaje en la nube al dispositivo destinada a un único dispositivo; establecer hello **a** propiedad demasiado**/devices/ {deviceId} / mensajes/devicebound**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-109">Each cloud-to-device message is targeted at a single device by setting hello **to** property too**/devices/{deviceId}/messages/devicebound**.</span></span>

<span data-ttu-id="0be0e-110">La cola de cada dispositivo puede contener como máximo 50 mensajes de la nube al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-110">Each device queue holds at most 50 cloud-to-device messages.</span></span> <span data-ttu-id="0be0e-111">Intentar toosend más toohello mensajes mismo dispositivo genera un error.</span><span class="sxs-lookup"><span data-stu-id="0be0e-111">Trying toosend more messages toohello same device results in an error.</span></span>

## <a name="hello-cloud-to-device-message-lifecycle"></a><span data-ttu-id="0be0e-112">Hola del ciclo de vida del mensaje en la nube a dispositivo</span><span class="sxs-lookup"><span data-stu-id="0be0e-112">hello cloud-to-device message lifecycle</span></span>

<span data-ttu-id="0be0e-113">entrega del mensaje de al menos-una vez tooguarantee, centro de IoT conserva los mensajes de la nube al dispositivo en las colas por dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-113">tooguarantee at-least-once message delivery, IoT Hub persists cloud-to-device messages in per-device queues.</span></span> <span data-ttu-id="0be0e-114">Dispositivos deben confirmar explícitamente *finalización* para tooremove centro de IoT de Hola cola.</span><span class="sxs-lookup"><span data-stu-id="0be0e-114">Devices must explicitly acknowledge *completion* for IoT Hub tooremove them from hello queue.</span></span> <span data-ttu-id="0be0e-115">Esto garantiza la resistencia frente a errores de dispositivo y de conectividad.</span><span class="sxs-lookup"><span data-stu-id="0be0e-115">This approach guarantees resiliency against connectivity and device failures.</span></span>

<span data-ttu-id="0be0e-116">Hello siguiente diagrama muestra gráfico de estado de ciclo de vida de Hola para un mensaje en la nube al dispositivo en el centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="0be0e-116">hello following diagram shows hello lifecycle state graph for a cloud-to-device message in IoT Hub.</span></span>

![Ciclo de vida de los mensajes de nube a dispositivo][img-lifecycle]

<span data-ttu-id="0be0e-118">Cuando Hola servicio del centro de IoT envía un dispositivo de tooa de mensaje, el servicio de hello establece el estado del mensaje Hola demasiado**en cola**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-118">When hello IoT Hub service sends a message tooa device, hello service sets hello message state too**Enqueued**.</span></span> <span data-ttu-id="0be0e-119">Cuando un dispositivo desea demasiado*recibir* un mensaje, el centro de IoT *bloqueos* mensaje de bienvenida (estableciendo el estado de hello demasiado**Invisible**), que permite que otros subprocesos en hello dispositivo toostart recibir otros mensajes.</span><span class="sxs-lookup"><span data-stu-id="0be0e-119">When a device wants too*receive* a message, IoT Hub *locks* hello message (by setting hello state too**Invisible**), which allows other threads on hello device toostart receiving other messages.</span></span> <span data-ttu-id="0be0e-120">Cuando un subproceso de dispositivo finaliza el procesamiento de Hola de un mensaje, notifica al centro de IoT por *completar* mensaje de saludo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-120">When a device thread completes hello processing of a message, it notifies IoT Hub by *completing* hello message.</span></span> <span data-ttu-id="0be0e-121">Centro de IoT, a continuación, Establece el estado de hello demasiado**completado**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-121">IoT Hub then sets hello state too**Completed**.</span></span>

<span data-ttu-id="0be0e-122">Un dispositivo también puede hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="0be0e-122">A device can also choose to:</span></span>

* <span data-ttu-id="0be0e-123">*Rechazar* mensaje Hola, lo que hace el centro de IoT tooset que lo toohello **fallidos** estado.</span><span class="sxs-lookup"><span data-stu-id="0be0e-123">*Reject* hello message, which causes IoT Hub tooset it toohello **Deadlettered** state.</span></span> <span data-ttu-id="0be0e-124">Dispositivos que se conectan a través de hello protocolo MQTT no pueden rechazar mensajes en la nube al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-124">Devices that connect over hello MQTT protocol cannot reject cloud-to-device messages.</span></span>
* <span data-ttu-id="0be0e-125">*Abandonar* mensaje hello, que hace que centro de IoT tooput mensajes de bienvenida en cola de hello, con estado de hello establecido demasiado**en cola**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-125">*Abandon* hello message, which causes IoT Hub tooput hello message back in hello queue, with hello state set too**Enqueued**.</span></span>

<span data-ttu-id="0be0e-126">Un subproceso podría producir errores tooprocess un mensaje sin notificárselo al centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="0be0e-126">A thread could fail tooprocess a message without notifying IoT Hub.</span></span> <span data-ttu-id="0be0e-127">En este caso, automáticamente mensajes de transición de Hola **Invisible** estado atrás toohello **en cola** estado después de un *tiempo de espera de visibilidad (o bloqueo)*.</span><span class="sxs-lookup"><span data-stu-id="0be0e-127">In this case, messages automatically transition from hello **Invisible** state back toohello **Enqueued** state after a *visibility (or lock) timeout*.</span></span> <span data-ttu-id="0be0e-128">valor predeterminado de Hola de este tiempo de espera es un minuto.</span><span class="sxs-lookup"><span data-stu-id="0be0e-128">hello default value of this timeout is one minute.</span></span>

<span data-ttu-id="0be0e-129">Puede pasar un mensaje de Hola **en cola** y **Invisible** Estados, Hola a lo sumo, número de veces especificado en hello **máximo de entregas** propiedad en el centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="0be0e-129">A message can transition between hello **Enqueued** and **Invisible** states for, at most, hello number of times specified in hello **max delivery count** property on IoT Hub.</span></span> <span data-ttu-id="0be0e-130">Después de ese número de transiciones, centro de IoT establece estado Hola de mensaje de saludo demasiado**fallidos**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-130">After that number of transitions, IoT Hub sets hello state of hello message too**Deadlettered**.</span></span> <span data-ttu-id="0be0e-131">De forma similar, centro de IoT establece estado Hola de un mensaje demasiado**fallidos** después de la fecha de expiración (consulte [tiempo toolive][lnk-ttl]).</span><span class="sxs-lookup"><span data-stu-id="0be0e-131">Similarly, IoT Hub sets hello state of a message too**Deadlettered** after its expiration time (see [Time toolive][lnk-ttl]).</span></span>

<span data-ttu-id="0be0e-132">Hola [cómo mensajes toosend en la nube al dispositivo con el centro de IoT] [ lnk-c2d-tutorial] se muestra cómo toosend los mensajes en la nube al dispositivo de hello en la nube y reciban en un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-132">hello [How toosend cloud-to-device messages with IoT Hub][lnk-c2d-tutorial] shows you how toosend cloud-to-device messages from hello cloud and receive them on a device.</span></span>

<span data-ttu-id="0be0e-133">Normalmente, un dispositivo completa un mensaje en la nube al dispositivo cuando Hola pérdida de mensaje de bienvenida no afecta la lógica de la aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="0be0e-133">Typically, a device completes a cloud-to-device message when hello loss of hello message does not affect hello application logic.</span></span> <span data-ttu-id="0be0e-134">Por ejemplo, cuando Hola dispositivo conserva el contenido del mensaje Hola localmente o se ha ejecutado correctamente una operación.</span><span class="sxs-lookup"><span data-stu-id="0be0e-134">For example, when hello device has persisted hello message content locally or has successfully executed an operation.</span></span> <span data-ttu-id="0be0e-135">mensajes de bienvenida también podrían llevar información transitoria, cuyo pérdida no afecta a la funcionalidad de Hola de aplicación hello.</span><span class="sxs-lookup"><span data-stu-id="0be0e-135">hello message could also carry transient information, whose loss would not impact hello functionality of hello application.</span></span> <span data-ttu-id="0be0e-136">A veces, para las tareas de ejecución prolongada, puede completar el mensaje de saludo en la nube al dispositivo después de guardar Hola descripción de la tarea en el almacenamiento local.</span><span class="sxs-lookup"><span data-stu-id="0be0e-136">Sometimes, for long-running tasks, you can complete hello cloud-to-device message after persisting hello task description in local storage.</span></span> <span data-ttu-id="0be0e-137">A continuación, puede notificar a back-end de soluciones de hello con uno o más mensajes de dispositivo para la nube en diferentes fases de progreso de la tarea hello.</span><span class="sxs-lookup"><span data-stu-id="0be0e-137">Then you can notify hello solution back end with one or more device-to-cloud messages at various stages of progress of hello task.</span></span>

## <a name="message-expiration-time-toolive"></a><span data-ttu-id="0be0e-138">Caducidad del mensaje (tiempo toolive)</span><span class="sxs-lookup"><span data-stu-id="0be0e-138">Message expiration (time toolive)</span></span>

<span data-ttu-id="0be0e-139">Cada mensaje de nube a dispositivo tiene una fecha de expiración.</span><span class="sxs-lookup"><span data-stu-id="0be0e-139">Every cloud-to-device message has an expiration time.</span></span> <span data-ttu-id="0be0e-140">Esta hora se establece mediante el servicio de hello (Hola **ExpiryTimeUtc** propiedad), o por centro de IoT con hello predeterminada *tiempo toolive* especificada como una propiedad de centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="0be0e-140">This time is set either by hello service (in hello **ExpiryTimeUtc** property), or by IoT Hub using hello default *time toolive* specified as an IoT Hub property.</span></span> <span data-ttu-id="0be0e-141">Consulte [Opciones de configuración de la nube al dispositivo][lnk-c2d-configuration].</span><span class="sxs-lookup"><span data-stu-id="0be0e-141">See [Cloud-to-device configuration options][lnk-c2d-configuration].</span></span>

<span data-ttu-id="0be0e-142">Una ventaja de tootake forma común de expiración del mensaje y evitar el envío de mensajes toodisconnected dispositivos, es tooset toolive valores de hora corta.</span><span class="sxs-lookup"><span data-stu-id="0be0e-142">A common way tootake advantage of message expiration and avoid sending messages toodisconnected devices, is tooset short time toolive values.</span></span> <span data-ttu-id="0be0e-143">Este enfoque consigue Hola el mismo resultado que mantiene el estado de conexión de dispositivo de hello, pero más eficaz.</span><span class="sxs-lookup"><span data-stu-id="0be0e-143">This approach achieves hello same result as maintaining hello device connection state, while being more efficient.</span></span> <span data-ttu-id="0be0e-144">Cuando se solicitan los reconocimientos de mensajes, centro de IoT notifica a los dispositivos tooreceive capaz de mensajes, y los dispositivos que no están en línea o se han producido un error.</span><span class="sxs-lookup"><span data-stu-id="0be0e-144">When you request message acknowledgements, IoT Hub notifies you which devices are able tooreceive messages, and which devices are not online or have failed.</span></span>

## <a name="message-feedback"></a><span data-ttu-id="0be0e-145">Comentarios de mensajes</span><span class="sxs-lookup"><span data-stu-id="0be0e-145">Message feedback</span></span>

<span data-ttu-id="0be0e-146">Cuando se envía un mensaje en la nube al dispositivo, servicio de hello puede solicitar la entrega de Hola de comentarios de cada mensaje con respecto a Hola estado final de ese mensaje.</span><span class="sxs-lookup"><span data-stu-id="0be0e-146">When you send a cloud-to-device message, hello service can request hello delivery of per-message feedback regarding hello final state of that message.</span></span>

| <span data-ttu-id="0be0e-147">Propiedad Ack</span><span class="sxs-lookup"><span data-stu-id="0be0e-147">Ack property</span></span> | <span data-ttu-id="0be0e-148">Comportamiento</span><span class="sxs-lookup"><span data-stu-id="0be0e-148">Behavior</span></span> |
| ------------ | -------- |
| <span data-ttu-id="0be0e-149">**positive**</span><span class="sxs-lookup"><span data-stu-id="0be0e-149">**positive**</span></span> | <span data-ttu-id="0be0e-150">Centro de IoT genera un mensaje de comentarios si y solo si, mensaje de saludo en la nube al dispositivo alcanza hello **completado** estado.</span><span class="sxs-lookup"><span data-stu-id="0be0e-150">IoT Hub generates a feedback message if, and only if, hello cloud-to-device message reached hello **Completed** state.</span></span> |
| <span data-ttu-id="0be0e-151">**negative**</span><span class="sxs-lookup"><span data-stu-id="0be0e-151">**negative**</span></span> | <span data-ttu-id="0be0e-152">Centro de IoT genera un mensaje de comentarios, si y solo si, mensaje de saludo en la nube al dispositivo alcanza hello **fallidos** estado.</span><span class="sxs-lookup"><span data-stu-id="0be0e-152">IoT Hub generates a feedback message, if and only if, hello cloud-to-device message reaches hello **Deadlettered** state.</span></span> |
| <span data-ttu-id="0be0e-153">**full**</span><span class="sxs-lookup"><span data-stu-id="0be0e-153">**full**</span></span>     | <span data-ttu-id="0be0e-154">IoT Hub genera un mensaje de comentarios en cualquiera de los casos.</span><span class="sxs-lookup"><span data-stu-id="0be0e-154">IoT Hub generates a feedback message in either case.</span></span> |

<span data-ttu-id="0be0e-155">Si **confirmación** es **completa**y no recibirá un mensaje de comentarios, significa que ese mensaje de comentarios de Hola expirado.</span><span class="sxs-lookup"><span data-stu-id="0be0e-155">If **Ack** is **full**, and you don't receive a feedback message, it means that hello feedback message expired.</span></span> <span data-ttu-id="0be0e-156">Hola servicio no puede saber qué mensaje original toohello problema.</span><span class="sxs-lookup"><span data-stu-id="0be0e-156">hello service can't know what happened toohello original message.</span></span> <span data-ttu-id="0be0e-157">En la práctica, un servicio debe asegurarse de que puede procesar los comentarios de Hola antes de que expire.</span><span class="sxs-lookup"><span data-stu-id="0be0e-157">In practice, a service should ensure that it can process hello feedback before it expires.</span></span> <span data-ttu-id="0be0e-158">hora de expiración máximo de Hello es dos días, lo que permite una gran cantidad de tiempo tooget Hola servicio ejecutar de nuevo si se produce un error.</span><span class="sxs-lookup"><span data-stu-id="0be0e-158">hello maximum expiry time is two days, which allows plenty of time tooget hello service running again if a failure occurs.</span></span>

<span data-ttu-id="0be0e-159">Como se explica en [Puntos de conexión][lnk-endpoints], IoT Hub envía los comentarios a través de un punto de conexión accesible desde el servicio (**/messages/servicebound/feedback**) en forma de mensajes.</span><span class="sxs-lookup"><span data-stu-id="0be0e-159">As explained in [Endpoints][lnk-endpoints], IoT Hub delivers feedback through a service-facing endpoint (**/messages/servicebound/feedback**) as messages.</span></span> <span data-ttu-id="0be0e-160">Hello semántica para recibir comentarios de Hola igual que para los mensajes en la nube al dispositivo y ha Hola mismo [Message Lifecycle-español][lnk-lifecycle].</span><span class="sxs-lookup"><span data-stu-id="0be0e-160">hello semantics for receiving feedback are hello same as for cloud-to-device messages, and have hello same [Message lifecycle][lnk-lifecycle].</span></span> <span data-ttu-id="0be0e-161">Siempre que sea posible, comentarios de mensaje se realizan por lotes en un único mensaje, con hello siguiendo el formato:</span><span class="sxs-lookup"><span data-stu-id="0be0e-161">Whenever possible, message feedback is batched in a single message, with hello following format:</span></span>

| <span data-ttu-id="0be0e-162">Propiedad</span><span class="sxs-lookup"><span data-stu-id="0be0e-162">Property</span></span>     | <span data-ttu-id="0be0e-163">Description</span><span class="sxs-lookup"><span data-stu-id="0be0e-163">Description</span></span> |
| ------------ | ----------- |
| <span data-ttu-id="0be0e-164">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="0be0e-164">EnqueuedTime</span></span> | <span data-ttu-id="0be0e-165">Marca de tiempo que indica cuándo se creó el mensaje de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="0be0e-165">Timestamp indicating when hello message was created.</span></span> |
| <span data-ttu-id="0be0e-166">UserId</span><span class="sxs-lookup"><span data-stu-id="0be0e-166">UserId</span></span>       | `{iot hub name}` |
| <span data-ttu-id="0be0e-167">ContentType</span><span class="sxs-lookup"><span data-stu-id="0be0e-167">ContentType</span></span>  | `application/vnd.microsoft.iothub.feedback.json` |

<span data-ttu-id="0be0e-168">cuerpo de Hello es una matriz JSON serializado de registros, cada uno con hello propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="0be0e-168">hello body is a JSON-serialized array of records, each with hello following properties:</span></span>

| <span data-ttu-id="0be0e-169">Propiedad</span><span class="sxs-lookup"><span data-stu-id="0be0e-169">Property</span></span>           | <span data-ttu-id="0be0e-170">Description</span><span class="sxs-lookup"><span data-stu-id="0be0e-170">Description</span></span> |
| ------------------ | ----------- |
| <span data-ttu-id="0be0e-171">EnqueuedTimeUtc</span><span class="sxs-lookup"><span data-stu-id="0be0e-171">EnqueuedTimeUtc</span></span>    | <span data-ttu-id="0be0e-172">Marca de tiempo que indica cuándo se produjeron resultado de hello de mensaje de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="0be0e-172">Timestamp indicating when hello outcome of hello message happened.</span></span> <span data-ttu-id="0be0e-173">Por ejemplo, Hola dispositivo completada o mensaje Hola expirado.</span><span class="sxs-lookup"><span data-stu-id="0be0e-173">For example, hello device completed or hello message expired.</span></span> |
| <span data-ttu-id="0be0e-174">OriginalMessageId</span><span class="sxs-lookup"><span data-stu-id="0be0e-174">OriginalMessageId</span></span>  | <span data-ttu-id="0be0e-175">**MessageId** de hello en la nube al dispositivo mensaje toowhich está relacionada con esta información de comentarios.</span><span class="sxs-lookup"><span data-stu-id="0be0e-175">**MessageId** of hello cloud-to-device message toowhich this feedback information relates.</span></span> |
| <span data-ttu-id="0be0e-176">StatusCode</span><span class="sxs-lookup"><span data-stu-id="0be0e-176">StatusCode</span></span>         | <span data-ttu-id="0be0e-177">Cadena necesaria.</span><span class="sxs-lookup"><span data-stu-id="0be0e-177">Required string.</span></span> <span data-ttu-id="0be0e-178">Se utiliza en los mensajes de comentarios generados por el Centro de IoT.</span><span class="sxs-lookup"><span data-stu-id="0be0e-178">Used in feedback messages generated by IoT Hub.</span></span> <br/> <span data-ttu-id="0be0e-179">"Success"</span><span class="sxs-lookup"><span data-stu-id="0be0e-179">'Success'</span></span> <br/> <span data-ttu-id="0be0e-180">"Expired"</span><span class="sxs-lookup"><span data-stu-id="0be0e-180">'Expired'</span></span> <br/> <span data-ttu-id="0be0e-181">'DeliveryCountExceeded'</span><span class="sxs-lookup"><span data-stu-id="0be0e-181">'DeliveryCountExceeded'</span></span> <br/> <span data-ttu-id="0be0e-182">"Rejected"</span><span class="sxs-lookup"><span data-stu-id="0be0e-182">'Rejected'</span></span> <br/> <span data-ttu-id="0be0e-183">'Purged'</span><span class="sxs-lookup"><span data-stu-id="0be0e-183">'Purged'</span></span> |
| <span data-ttu-id="0be0e-184">Descripción</span><span class="sxs-lookup"><span data-stu-id="0be0e-184">Description</span></span>        | <span data-ttu-id="0be0e-185">Valores de cadena para **StatusCode**.</span><span class="sxs-lookup"><span data-stu-id="0be0e-185">String values for **StatusCode**.</span></span> |
| <span data-ttu-id="0be0e-186">deviceId</span><span class="sxs-lookup"><span data-stu-id="0be0e-186">DeviceId</span></span>           | <span data-ttu-id="0be0e-187">**Id. de dispositivo** hello dispositivo de destino de hello en la nube al dispositivo mensaje toowhich está relacionado con este elemento de comentarios.</span><span class="sxs-lookup"><span data-stu-id="0be0e-187">**DeviceId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |
| <span data-ttu-id="0be0e-188">DeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="0be0e-188">DeviceGenerationId</span></span> | <span data-ttu-id="0be0e-189">**DeviceGenerationId** hello dispositivo de destino de hello en la nube al dispositivo mensaje toowhich está relacionado con este elemento de comentarios.</span><span class="sxs-lookup"><span data-stu-id="0be0e-189">**DeviceGenerationId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |

<span data-ttu-id="0be0e-190">debe especificar el servicio de Hello un **MessageId** para hello en la nube al dispositivo de mensajes toobe pueda toocorrelate sus comentarios con mensajes de bienvenida del original.</span><span class="sxs-lookup"><span data-stu-id="0be0e-190">hello service must specify a **MessageId** for hello cloud-to-device message toobe able toocorrelate its feedback with hello original message.</span></span>

<span data-ttu-id="0be0e-191">Hello en el ejemplo siguiente se muestra hello cuerpo de un mensaje de comentarios.</span><span class="sxs-lookup"><span data-stu-id="0be0e-191">hello following example shows hello body of a feedback message.</span></span>

```json
[
  {
    "OriginalMessageId": "0987654321",
    "EnqueuedTimeUtc": "2015-07-28T16:24:48.789Z",
    "StatusCode": 0,
    "Description": "Success",
    "DeviceId": "123",
    "DeviceGenerationId": "abcdefghijklmnopqrstuvwxyz"
  },
  {
    ...
  },
  ...
]
```

## <a name="cloud-to-device-configuration-options"></a><span data-ttu-id="0be0e-192">Opciones de configuración de la nube al dispositivo</span><span class="sxs-lookup"><span data-stu-id="0be0e-192">Cloud-to-device configuration options</span></span>

<span data-ttu-id="0be0e-193">Cada centro de IoT expone Hola siguientes opciones de configuración para la mensajería de nube al dispositivo:</span><span class="sxs-lookup"><span data-stu-id="0be0e-193">Each IoT hub exposes hello following configuration options for cloud-to-device messaging:</span></span>

| <span data-ttu-id="0be0e-194">Propiedad</span><span class="sxs-lookup"><span data-stu-id="0be0e-194">Property</span></span>                  | <span data-ttu-id="0be0e-195">Description</span><span class="sxs-lookup"><span data-stu-id="0be0e-195">Description</span></span> | <span data-ttu-id="0be0e-196">Intervalo y valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="0be0e-196">Range and default</span></span> |
| ------------------------- | ----------- | ----------------- |
| <span data-ttu-id="0be0e-197">defaultTtlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="0be0e-197">defaultTtlAsIso8601</span></span>       | <span data-ttu-id="0be0e-198">TTL predeterminado para los mensajes de nube a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-198">Default TTL for cloud-to-device messages.</span></span> | <span data-ttu-id="0be0e-199">Intervalo de ISO_8601 una too2D (1 minuto como mínimo).</span><span class="sxs-lookup"><span data-stu-id="0be0e-199">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="0be0e-200">Valor predeterminado: 1 hora.</span><span class="sxs-lookup"><span data-stu-id="0be0e-200">Default: 1 hour.</span></span> |
| <span data-ttu-id="0be0e-201">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="0be0e-201">maxDeliveryCount</span></span>          | <span data-ttu-id="0be0e-202">Número máximo de entregas para las colas de nube a dispositivo por dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0be0e-202">Maximum delivery count for cloud-to-device per-device queues.</span></span> | <span data-ttu-id="0be0e-203">1 too100.</span><span class="sxs-lookup"><span data-stu-id="0be0e-203">1 too100.</span></span> <span data-ttu-id="0be0e-204">Valor predeterminado: 10</span><span class="sxs-lookup"><span data-stu-id="0be0e-204">Default: 10.</span></span> |
| <span data-ttu-id="0be0e-205">feedback.ttlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="0be0e-205">feedback.ttlAsIso8601</span></span>     | <span data-ttu-id="0be0e-206">Retención de mensajes de comentarios del límite de servicio.</span><span class="sxs-lookup"><span data-stu-id="0be0e-206">Retention for service-bound feedback messages.</span></span> | <span data-ttu-id="0be0e-207">Intervalo de ISO_8601 una too2D (1 minuto como mínimo).</span><span class="sxs-lookup"><span data-stu-id="0be0e-207">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="0be0e-208">Valor predeterminado: 1 hora.</span><span class="sxs-lookup"><span data-stu-id="0be0e-208">Default: 1 hour.</span></span> |
| <span data-ttu-id="0be0e-209">feedback.maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="0be0e-209">feedback.maxDeliveryCount</span></span> |<span data-ttu-id="0be0e-210">Número máximo de entregas para la cola de comentarios.</span><span class="sxs-lookup"><span data-stu-id="0be0e-210">Maximum delivery count for feedback queue.</span></span> | <span data-ttu-id="0be0e-211">1 too100.</span><span class="sxs-lookup"><span data-stu-id="0be0e-211">1 too100.</span></span> <span data-ttu-id="0be0e-212">Valor predeterminado: 100.</span><span class="sxs-lookup"><span data-stu-id="0be0e-212">Default: 100.</span></span> |

<span data-ttu-id="0be0e-213">Para obtener más información acerca de cómo tooset estas opciones de configuración, consulte [centros de IoT crear][lnk-portal].</span><span class="sxs-lookup"><span data-stu-id="0be0e-213">For more information about how tooset these configuration options, see [Create IoT hubs][lnk-portal].</span></span>

## <a name="next-steps"></a><span data-ttu-id="0be0e-214">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0be0e-214">Next steps</span></span>

<span data-ttu-id="0be0e-215">Para obtener información sobre SDK de hello puede utilizar mensajes de tooreceive en la nube al dispositivo, consulte [SDK de Azure IoT][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="0be0e-215">For information about hello SDKs you can use tooreceive cloud-to-device messages, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="0be0e-216">tootry espera recibir mensajes en la nube al dispositivo, consulte hello [enviar en la nube al dispositivo] [ lnk-c2d-tutorial] tutorial.</span><span class="sxs-lookup"><span data-stu-id="0be0e-216">tootry out receiving cloud-to-device messages, see hello [Send cloud-to-device][lnk-c2d-tutorial] tutorial.</span></span>

[img-lifecycle]: ./media/iot-hub-devguide-messages-c2d/lifecycle.png

[lnk-portal]: iot-hub-create-through-portal.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-ttl]: #message-expiration-time-to-live
[lnk-c2d-configuration]: #cloud-to-device-configuration-options
[lnk-lifecycle]: #message-lifecycle
[lnk-c2d-tutorial]: iot-hub-csharp-csharp-c2d.md

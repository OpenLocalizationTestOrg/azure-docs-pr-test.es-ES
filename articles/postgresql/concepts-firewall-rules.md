---
title: Reglas de firewall del servidor de Azure Database for PostgreSQL | Microsoft Docs
description: Describe las reglas de firewall para el servidor de Azure Database for PostgreSQL.
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 150c4f53c5ab6a6425b6af7d286d4c1518b006f8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="5640b-103">Reglas de firewall del servidor de Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="5640b-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="5640b-104">Los firewalls impiden todo acceso al servidor de bases de datos, excepto a aquellos equipos a los que haya concedido permiso.</span><span class="sxs-lookup"><span data-stu-id="5640b-104">Firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="5640b-105">Asimismo, otorgan acceso al servidor según la dirección IP de origen de cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="5640b-105">The firewall grants access to the server based on the originating IP address of each request.</span></span>
<span data-ttu-id="5640b-106">Para configurar su firewall, cree reglas de firewall que especifiquen intervalos de direcciones IP aceptables.</span><span class="sxs-lookup"><span data-stu-id="5640b-106">To configure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="5640b-107">Puede crear reglas de firewall a nivel de servidor.</span><span class="sxs-lookup"><span data-stu-id="5640b-107">You can create firewall rules at the server level.</span></span>

<span data-ttu-id="5640b-108">**Reglas de firewall:** estas reglas permiten a los clientes tener acceso a todo el servidor de Azure Database for PostgreSQL; es decir, a todas las bases de datos que se encuentren en el mismo servidor lógico.</span><span class="sxs-lookup"><span data-stu-id="5640b-108">**Firewall rules:** These rules enable clients to access your entire Azure Database for PostgreSQL Server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="5640b-109">Las reglas de firewall de nivel de servidor pueden configurarse a través de Azure Portal o los comandos de la CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="5640b-109">Server-level firewall rules can be configured by using the Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="5640b-110">Para crear reglas de firewall en el nivel del servidor, debe ser propietario o colaborador de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="5640b-110">To create server-level firewall rules, you must be the subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="5640b-111">Información general de firewalls</span><span class="sxs-lookup"><span data-stu-id="5640b-111">Firewall overview</span></span>
<span data-ttu-id="5640b-112">Todos los accesos de base de datos al servidor de Azure Database for PostgreSQL se bloquean por el firewall de manera predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5640b-112">All database access to your Azure Database for PostgreSQL server is blocked by the firewall by default.</span></span> <span data-ttu-id="5640b-113">Para comenzar a usar el servidor desde otro equipo, debe especificar una o varias reglas de firewall a nivel de servidor para habilitar el acceso a su servidor.</span><span class="sxs-lookup"><span data-stu-id="5640b-113">To begin using your server from another computer, you need to specify one or more server-level firewall rules to enable access to your server.</span></span> <span data-ttu-id="5640b-114">Use las reglas de firewall para especificar los intervalos de direcciones IP de Internet que se permitirán.</span><span class="sxs-lookup"><span data-stu-id="5640b-114">Use the firewall rules to specify which IP address ranges from the Internet to allow.</span></span> <span data-ttu-id="5640b-115">La acción de las reglas de firewall no repercute sobre el acceso al propio sitio web de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="5640b-115">Access to the Azure portal website itself is not impacted by the firewall rules.</span></span>
<span data-ttu-id="5640b-116">Los intentos de conexión desde Internet y Azure deben atravesar primero el firewall antes de poder alcanzar PostgreSQL Database, tal y como se muestra en el siguiente diagrama:</span><span class="sxs-lookup"><span data-stu-id="5640b-116">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your PostgreSQL Database, as shown in the following diagram:</span></span>

![Ejemplo de flujo de cómo funciona el firewall](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-the-internet"></a><span data-ttu-id="5640b-118">Conexión desde Internet</span><span class="sxs-lookup"><span data-stu-id="5640b-118">Connecting from the Internet</span></span>
<span data-ttu-id="5640b-119">Las reglas de firewall de nivel de servidor se aplican a todas las bases de datos del servidor de Azure Database for PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="5640b-119">Server-level firewall rules apply to all databases on the Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="5640b-120">Si la dirección IP de la solicitud está comprendida en uno de los intervalos especificados en las reglas de firewall de nivel de servidor, la conexión se concede.</span><span class="sxs-lookup"><span data-stu-id="5640b-120">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span>
<span data-ttu-id="5640b-121">Si la dirección IP de la solicitud no se encuentra dentro de los intervalos especificados en cualquiera de las reglas de firewall de nivel de base de datos o de servidor, la solicitud de conexión genera un error.</span><span class="sxs-lookup"><span data-stu-id="5640b-121">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>
<span data-ttu-id="5640b-122">Por ejemplo, si la aplicación se conecta con un controlador JDBC para PostgreSQL, puede encontrar este error al intentar conectarse cuando el firewall está bloqueando la conexión.</span><span class="sxs-lookup"><span data-stu-id="5640b-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting to connect when the firewall is blocking the connection.</span></span>
> <span data-ttu-id="5640b-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span><span class="sxs-lookup"><span data-stu-id="5640b-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="5640b-124">Administración mediante programación de reglas de firewall</span><span class="sxs-lookup"><span data-stu-id="5640b-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="5640b-125">Además de Azure Portal, las reglas de firewall se pueden administrar mediante programación con la CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="5640b-125">In addition to the Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="5640b-126">Vea también la información sobre la [creación y la administración de reglas de firewall de Azure Database for PostgreSQL mediante la CLI de Azure](howto-manage-firewall-using-cli.md).</span><span class="sxs-lookup"><span data-stu-id="5640b-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="5640b-127">Solución de problemas del firewall de la base de datos</span><span class="sxs-lookup"><span data-stu-id="5640b-127">Troubleshooting the database firewall</span></span>
<span data-ttu-id="5640b-128">Tenga en cuenta los siguientes puntos cuando el acceso al servicio del servidor de Microsoft Azure Database for PostgreSQL no se comporte de la manera prevista:</span><span class="sxs-lookup"><span data-stu-id="5640b-128">Consider the following points when access to the Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="5640b-129">**Los cambios realizados en la lista de permitidos no han surtido efecto todavía:** puede haber un retraso de hasta cinco minutos hasta que los cambios en la configuración del firewall del servidor de Azure Database for PostgreSQL surtan efecto.</span><span class="sxs-lookup"><span data-stu-id="5640b-129">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure Database for PostgreSQL Server firewall configuration to take effect.</span></span>

* <span data-ttu-id="5640b-130">**El inicio de sesión no está autorizado o se ha usado una contraseña incorrecta:** si un inicio de sesión no tiene permisos en el servidor de Azure Database for PostgreSQL o la contraseña usada es incorrecta, se denegará la conexión al servidor de Azure Database for PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="5640b-130">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure Database for PostgreSQL server or the password used is incorrect, the connection to the Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="5640b-131">La creación de una configuración de firewall solo ofrece a los clientes una oportunidad de intentar conectarse al servidor; cada cliente debe ofrecer las credenciales de seguridad necesarias.</span><span class="sxs-lookup"><span data-stu-id="5640b-131">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span>

<span data-ttu-id="5640b-132">Por ejemplo, mediante un cliente JDBC, puede aparecer el siguiente error.</span><span class="sxs-lookup"><span data-stu-id="5640b-132">For example, using a JDBC client, the following error may appear.</span></span>
> <span data-ttu-id="5640b-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span><span class="sxs-lookup"><span data-stu-id="5640b-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="5640b-134">**Dirección IP dinámica:** si tiene una conexión a Internet con una direccionamiento IP dinámica y tiene problemas al acceder al firewall, podría intentar una de las siguientes soluciones:</span><span class="sxs-lookup"><span data-stu-id="5640b-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>

* <span data-ttu-id="5640b-135">Pida a su proveedor de acceso a Internet (ISP) el intervalo de direcciones IP asignado a los equipos cliente que acceden al servidor de Azure Database for PostgreSQL y agréguelo como regla de firewall.</span><span class="sxs-lookup"><span data-stu-id="5640b-135">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure Database for PostgreSQL Server, and then add the IP address range as a firewall rule.</span></span>

* <span data-ttu-id="5640b-136">Obtenga el direccionamiento IP estático en su lugar para los equipos cliente y luego agregue las direcciones IP como reglas de firewall.</span><span class="sxs-lookup"><span data-stu-id="5640b-136">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5640b-137">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="5640b-137">Next steps</span></span>
<span data-ttu-id="5640b-138">Para leer artículos sobre cómo crear reglas de firewall de nivel de servidor y de base de datos, consulte:</span><span class="sxs-lookup"><span data-stu-id="5640b-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* <span data-ttu-id="5640b-139">[Create and manage Azure Database for PostgreSQL firewall rules using the Azure portal](howto-manage-firewall-using-portal.md) (Creación y administración de reglas de firewall de Azure Database for PostgreSQL mediante Azure Portal)</span><span class="sxs-lookup"><span data-stu-id="5640b-139">[Create and manage Azure Database for PostgreSQL firewall rules using the Azure portal](howto-manage-firewall-using-portal.md)</span></span>
* <span data-ttu-id="5640b-140">[Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md) (Creación y administración de reglas de firewall de Azure Database for PostgreSQL mediante la CLI de Azure)</span><span class="sxs-lookup"><span data-stu-id="5640b-140">[Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>
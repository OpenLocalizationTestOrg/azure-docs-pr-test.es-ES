---
title: "Solución de problemas del proxy de aplicación | Microsoft Docs"
description: "Explica cómo solucionar errores en Proxy de aplicación de Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 970caafb-40b8-483c-bb46-c8b032a4fb74
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: 3ef74c8d5d5b75eb2bca4e6c994f4718b5226db8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="troubleshoot-application-proxy-problems-and-error-messages"></a><span data-ttu-id="43f18-103">Solución de problemas y mensajes de error de Proxy de aplicación</span><span class="sxs-lookup"><span data-stu-id="43f18-103">Troubleshoot Application Proxy problems and error messages</span></span>
<span data-ttu-id="43f18-104">Si se producen errores al obtener acceso a una aplicación publicada o al publicar aplicaciones, compruebe las siguientes opciones para ver si Proxy de aplicación de Microsoft Azure AD funciona correctamente:</span><span class="sxs-lookup"><span data-stu-id="43f18-104">If errors occur in accessing a published application or in publishing applications, check the following options to see if Microsoft Azure AD Application Proxy is working correctly:</span></span>

* <span data-ttu-id="43f18-105">Abra la consola de Servicios de Windows y compruebe que el servicio **Microsoft AAD Application Proxy Connector** (Conector del proxy de aplicación de Microsoft AAD) está habilitado y en ejecución.</span><span class="sxs-lookup"><span data-stu-id="43f18-105">Open the Windows Services console and verify that the **Microsoft AAD Application Proxy Connector** service is enabled and running.</span></span> <span data-ttu-id="43f18-106">Puede que también quiera consultar la página de propiedades del servicio Proxy de aplicación, como se muestra en la imagen siguiente: </span><span class="sxs-lookup"><span data-stu-id="43f18-106">You may also want to look at the Application Proxy service properties page, as shown in the following image:</span></span>  
  <span data-ttu-id="43f18-107">![Captura de pantalla de la ventana de propiedades del conector del proxy de aplicación de Microsoft AAD](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="43f18-107">![Microsoft AAD Application Proxy Connector Properties window screenshot](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span></span>
* <span data-ttu-id="43f18-108">Abra el Visor de eventos y busque eventos del conector del proxy de aplicación en **Registros de aplicaciones y servicios** > **Microsoft** >  **AadApplicationProxy** > **Conector** > **Administrador**.</span><span class="sxs-lookup"><span data-stu-id="43f18-108">Open Event Viewer and look for Application Proxy connector events in **Applications and Services Logs** > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span></span>
* <span data-ttu-id="43f18-109">Si los necesita, encontrará registros más detallados activando [los registros de sesiones del conector del proxy de aplicación](application-proxy-understand-connectors.md#under-the-hood).</span><span class="sxs-lookup"><span data-stu-id="43f18-109">If needed, more detailed logs are available by [turning on the Application Proxy connector session logs](application-proxy-understand-connectors.md#under-the-hood).</span></span>

<span data-ttu-id="43f18-110">Para más información sobre la herramienta de solución de problemas de Azure AD, consulte [Troubleshooting tool to validate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites) (Herramienta de solución de problemas para validar los requisitos previos de red del conector).</span><span class="sxs-lookup"><span data-stu-id="43f18-110">For more information about the Azure AD Troubleshooting tool, see [Troubleshooting tool to validate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span></span>

## <a name="the-page-is-not-rendered-correctly"></a><span data-ttu-id="43f18-111">La página no se representa correctamente.</span><span class="sxs-lookup"><span data-stu-id="43f18-111">The page is not rendered correctly</span></span>
<span data-ttu-id="43f18-112">Es posible que tenga problemas con la representación o el funcionamiento incorrecto de la aplicación, aunque no reciba ningún mensaje de error específico.</span><span class="sxs-lookup"><span data-stu-id="43f18-112">You may have problems with your application rendering or functioning incorrectly without receiving specific error messages.</span></span> <span data-ttu-id="43f18-113">Esto puede ocurrir si se publica la ruta de acceso del artículo, pero la aplicación requiere contenido que existe fuera de dicha ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="43f18-113">This can occur if you published the article path, but the application requires content that exists outside that path.</span></span>

<span data-ttu-id="43f18-114">Por ejemplo, si publica la ruta de acceso https://yourapp/app, pero la aplicación llama a imágenes de https://yourapp/media, no se representarán.</span><span class="sxs-lookup"><span data-stu-id="43f18-114">For example, if you publish the path https://yourapp/app but the application calls images in https://yourapp/media, they won't be rendered.</span></span> <span data-ttu-id="43f18-115">Asegúrese de publicar la aplicación con la ruta de nivel superior que debe incluir todo el contenido relevante.</span><span class="sxs-lookup"><span data-stu-id="43f18-115">Make sure that you publish the application using the highest level path you need to include all relevant content.</span></span> <span data-ttu-id="43f18-116">En este ejemplo sería http://yourapp/.</span><span class="sxs-lookup"><span data-stu-id="43f18-116">In this example, it would be http://yourapp/.</span></span>

<span data-ttu-id="43f18-117">Si cambia la ruta de acceso para incluir el contenido al que se hace referencia, pero necesita que los usuarios lleguen a un vínculo más profundo de la ruta de acceso, consulte la entrada del blog [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/)(Establecimiento del vínculo correcto para las aplicaciones del proxy de aplicación en el panel de acceso de Azure AD y en el selector de programas de Office 365).</span><span class="sxs-lookup"><span data-stu-id="43f18-117">If you change your path to include referenced content, but still need users to land on a deeper link in the path, see the blog post [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span></span>

## <a name="connector-errors"></a><span data-ttu-id="43f18-118">Errores del conector</span><span class="sxs-lookup"><span data-stu-id="43f18-118">Connector errors</span></span>

<span data-ttu-id="43f18-119">Use la [herramienta de prueba Connector Ports del proxy de aplicación de Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) para comprobar que el conector puede comunicarse con el servicio proxy de aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-119">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="43f18-120">Como mínimo, asegúrese de que la región de centro de EE. UU. y la región más cercana tienen todas las marcas de verificación en verde.</span><span class="sxs-lookup"><span data-stu-id="43f18-120">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="43f18-121">Además, cuantas más marcas de verificación verde haya, mayor resistencia habrá.</span><span class="sxs-lookup"><span data-stu-id="43f18-121">Beyond that, more green checkmarks means greater resiliency.</span></span> 

<span data-ttu-id="43f18-122">Si se produce un error en el registro durante la instalación del Asistente para el conector, hay dos maneras de ver el motivo de dicho error.</span><span class="sxs-lookup"><span data-stu-id="43f18-122">If registration fails during the Connector wizard installation, there are two ways to view the reason for the failure.</span></span> <span data-ttu-id="43f18-123">Se puede examinar el registro de eventos en **Registros de aplicaciones y servicios/\Microsoft\AadApplicationProxy\Connector\Admin**, o bien se puede ejecutar el siguiente comando de Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="43f18-123">Either look in the event log under **Applications and Services Logs\Microsoft\AadApplicationProxy\Connector\Admin**, or run the following Windows PowerShell command:</span></span>

    Get-EventLog application –source “Microsoft AAD Application Proxy Connector” –EntryType “Error” –Newest 1

<span data-ttu-id="43f18-124">Una vez que encuentre el error del conector en el registro de eventos, use esta lista de errores comunes para resolver el problema:</span><span class="sxs-lookup"><span data-stu-id="43f18-124">Once you find the Connector error from the event log, use this table of common errors to resolve the problem:</span></span>

| <span data-ttu-id="43f18-125">Error</span><span class="sxs-lookup"><span data-stu-id="43f18-125">Error</span></span> | <span data-ttu-id="43f18-126">Pasos recomendados</span><span class="sxs-lookup"><span data-stu-id="43f18-126">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="43f18-127">Error de registro del conector: asegúrese de haber habilitado Proxy de aplicación en el Portal de administración de Azure, así como de haber escrito correctamente su nombre de usuario y contraseña de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="43f18-127">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="43f18-128">Error: 'Se han producido uno o más errores'.</span><span class="sxs-lookup"><span data-stu-id="43f18-128">Error: 'One or more errors occurred.'</span></span> | <span data-ttu-id="43f18-129">Si cierra la ventana de registro sin iniciar sesión en Azure AD, vuelva a ejecutar el Asistente para conector y registre el conector.</span><span class="sxs-lookup"><span data-stu-id="43f18-129">If you closed the registration window without signing in to Azure AD, run the Connector wizard again and register the Connector.</span></span> <br><br> <span data-ttu-id="43f18-130">Si se abre la ventana de registro y, a continuación, se cierra inmediatamente sin permitirle iniciar sesión, es probable que reciba este error.</span><span class="sxs-lookup"><span data-stu-id="43f18-130">If the registration window opens and then immediately closes without allowing you to log in, you will probably get this error.</span></span> <span data-ttu-id="43f18-131">Este error se produce cuando hay un error de red en el sistema.</span><span class="sxs-lookup"><span data-stu-id="43f18-131">This error occurs when there is a networking error on your system.</span></span> <span data-ttu-id="43f18-132">Asegúrese de que es posible conectarse desde un explorador a un sitio web público y de que los puertos están abiertos como se especifica en [Requisitos previos del proxy de aplicación](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="43f18-132">Make sure that it is possible to connect from a browser to a public website and that the ports are open as specified in [Application Proxy prerequisites](active-directory-application-proxy-enable.md).</span></span> |
| <span data-ttu-id="43f18-133">Aparecerá un error de borrado en la ventana de registro.</span><span class="sxs-lookup"><span data-stu-id="43f18-133">Clear error is presented in the registration window.</span></span> <span data-ttu-id="43f18-134">No se puede continuar</span><span class="sxs-lookup"><span data-stu-id="43f18-134">Cannot proceed</span></span> | <span data-ttu-id="43f18-135">Si ve este error y luego se cierra la ventana, significa que escribió el nombre de usuario o contraseña incorrectos.</span><span class="sxs-lookup"><span data-stu-id="43f18-135">If you see this error and then the window closes, you entered the wrong username or password.</span></span> <span data-ttu-id="43f18-136">Inténtelo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="43f18-136">Try again.</span></span> |
| <span data-ttu-id="43f18-137">Error de registro del conector: asegúrese de haber habilitado Proxy de aplicación en el Portal de administración de Azure, así como de haber escrito correctamente su nombre de usuario y contraseña de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="43f18-137">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="43f18-138">Error: ' AADSTS50059: No se ha producido ningún error en la información de identificación del inquilino en la solicitud o implícita en ninguna credencial proporcionada y búsqueda por identificador URI de la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="43f18-138">Error: 'AADSTS50059: No tenant-identifying information found in either the request or implied by any provided credentials and search by service principal URI has failed.</span></span> | <span data-ttu-id="43f18-139">Intenta iniciar sesión con una cuenta Microsoft y no un dominio que forma parte del id. de organización del directorio al que intenta tener acceso.</span><span class="sxs-lookup"><span data-stu-id="43f18-139">You are trying to sign in using a Microsoft Account and not a domain that is part of the organization ID of the directory you are trying to access.</span></span> <span data-ttu-id="43f18-140">Asegúrese de que el administrador forma parte del mismo nombre de dominio que el dominio del inquilino, por ejemplo, si el dominio de Azure AD es contoso.com, el administrador debe ser admin@contoso.com.</span><span class="sxs-lookup"><span data-stu-id="43f18-140">Make sure that the admin is part of the same domain name as the tenant domain, for example, if the Azure AD domain is contoso.com, the admin should be admin@contoso.com.</span></span> |
| <span data-ttu-id="43f18-141">Error al recuperar la directiva de ejecución actual para ejecutar scripts de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="43f18-141">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="43f18-142">Si se produce un error en la instalación del conector, compruebe que la directiva de ejecución de PowerShell no está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="43f18-142">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span> <br><br><span data-ttu-id="43f18-143">1. Abra el Editor de directivas de grupo.</span><span class="sxs-lookup"><span data-stu-id="43f18-143">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="43f18-144">2. Vaya a **Configuración del equipo** > **Plantillas administrativas** > **Componentes de Windows** > **Windows PowerShell** y haga doble clic en **Activar la ejecución de scripts**.</span><span class="sxs-lookup"><span data-stu-id="43f18-144">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="43f18-145">3. La directiva de ejecución puede definirse como **No configurado** o **Habilitado**.</span><span class="sxs-lookup"><span data-stu-id="43f18-145">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="43f18-146">Si elige **Habilitado**, asegúrese de que, en Opciones, en Directiva de ejecución se selecciona en **Permitir scripts locales y scripts remotos firmados** o en **Permitir todos los scripts**.</span><span class="sxs-lookup"><span data-stu-id="43f18-146">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="43f18-147">El conector no pudo descargar la configuración.</span><span class="sxs-lookup"><span data-stu-id="43f18-147">Connector failed to download the configuration.</span></span> | <span data-ttu-id="43f18-148">El certificado de cliente del conector, que se utiliza para la autenticación, ha expirado.</span><span class="sxs-lookup"><span data-stu-id="43f18-148">The Connector’s client certificate, which is used for authentication, expired.</span></span> <span data-ttu-id="43f18-149">Esto también puede ocurrir si tiene instalado el conector detrás de un proxy.</span><span class="sxs-lookup"><span data-stu-id="43f18-149">This may also occur if you have the Connector installed behind a proxy.</span></span> <span data-ttu-id="43f18-150">En este caso, el conector no puede acceder a Internet ni tampoco podrá proporcionar aplicaciones a usuarios remotos.</span><span class="sxs-lookup"><span data-stu-id="43f18-150">In this case, the Connector cannot access the Internet and will not be able to provide applications to remote users.</span></span> <span data-ttu-id="43f18-151">Renueve la confianza manualmente mediante el cmdlet `Register-AppProxyConnector` en Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="43f18-151">Renew trust manually using the `Register-AppProxyConnector` cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="43f18-152">Si el conector está detrás de un proxy, es preciso otorgar acceso a Internet a las cuentas del conector "servicios de red" y "sistema local".</span><span class="sxs-lookup"><span data-stu-id="43f18-152">If your Connector is behind a proxy, it is necessary to grant Internet access to the Connector accounts “network services” and “local system.”</span></span> <span data-ttu-id="43f18-153">Esto puede realizarse concediéndoles acceso al proxy o estableciéndoles para omitir el proxy.</span><span class="sxs-lookup"><span data-stu-id="43f18-153">This can be accomplished either by granting them access to the Proxy or by setting them to bypass the proxy.</span></span> |
| <span data-ttu-id="43f18-154">Error de registro del conector: asegúrese de que es administrador global de su Active Directory para registrar el conector.</span><span class="sxs-lookup"><span data-stu-id="43f18-154">Connector registration failed: Make sure you are a Global Administrator of your Active Directory to register the Connector.</span></span> <span data-ttu-id="43f18-155">Error: 'Se ha denegado la solicitud de registro'.</span><span class="sxs-lookup"><span data-stu-id="43f18-155">Error: 'The registration request was denied.'</span></span> | <span data-ttu-id="43f18-156">El alias con el que intenta iniciar sesión no es administrador en este dominio.</span><span class="sxs-lookup"><span data-stu-id="43f18-156">The alias you're trying to log in with isn't an admin on this domain.</span></span> <span data-ttu-id="43f18-157">Su conector siempre está instalado para el directorio que posee el dominio del usuario.</span><span class="sxs-lookup"><span data-stu-id="43f18-157">Your Connector is always installed for the directory that owns the user’s domain.</span></span> <span data-ttu-id="43f18-158">Asegúrese de que la cuenta de administrador con que intenta iniciar sesión tiene permisos globales para el inquilino de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-158">Make sure that the admin account you are trying to sign in with has global permissions to the Azure AD tenant.</span></span> |

## <a name="kerberos-errors"></a><span data-ttu-id="43f18-159">Errores de Kerberos</span><span class="sxs-lookup"><span data-stu-id="43f18-159">Kerberos errors</span></span>

<span data-ttu-id="43f18-160">En esta tabla se incluyen los errores más comunes de instalación y configuración de Kerberos y se realizan sugerencias para la resolución.</span><span class="sxs-lookup"><span data-stu-id="43f18-160">This table covers the more common errors that come from Kerberos setup and configuration, and includes suggestions for resolution.</span></span>

| <span data-ttu-id="43f18-161">Error</span><span class="sxs-lookup"><span data-stu-id="43f18-161">Error</span></span> | <span data-ttu-id="43f18-162">Pasos recomendados</span><span class="sxs-lookup"><span data-stu-id="43f18-162">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="43f18-163">Error al recuperar la directiva de ejecución actual para ejecutar scripts de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="43f18-163">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="43f18-164">Si se produce un error en la instalación del conector, compruebe que la directiva de ejecución de PowerShell no está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="43f18-164">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span><br><br><span data-ttu-id="43f18-165">1. Abra el Editor de directivas de grupo.</span><span class="sxs-lookup"><span data-stu-id="43f18-165">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="43f18-166">2. Vaya a **Configuración del equipo** > **Plantillas administrativas** > **Componentes de Windows** > **Windows PowerShell** y haga doble clic en **Activar la ejecución de scripts**.</span><span class="sxs-lookup"><span data-stu-id="43f18-166">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="43f18-167">3. La directiva de ejecución puede definirse como **No configurado** o **Habilitado**.</span><span class="sxs-lookup"><span data-stu-id="43f18-167">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="43f18-168">Si elige **Habilitado**, asegúrese de que, en Opciones, en Directiva de ejecución se selecciona en **Permitir scripts locales y scripts remotos firmados** o en **Permitir todos los scripts**.</span><span class="sxs-lookup"><span data-stu-id="43f18-168">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="43f18-169">12008: Azure AD superó el número máximo de intentos de autenticación Kerberos permitidos en el servidor backend.</span><span class="sxs-lookup"><span data-stu-id="43f18-169">12008 - Azure AD exceeded the maximum number of permitted Kerberos authentication attempts to the backend server.</span></span> | <span data-ttu-id="43f18-170">Este error puede indicar una configuración incorrecta entre Azure AD y el servidor de aplicaciones backend o un problema en la configuración de fecha y hora de ambos equipos.</span><span class="sxs-lookup"><span data-stu-id="43f18-170">This error may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="43f18-171">El servidor backend rechazó el vale Kerberos creado por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-171">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="43f18-172">Compruebe que tanto Azure AD como el servidor de aplicaciones back-end están configurados correctamente.</span><span class="sxs-lookup"><span data-stu-id="43f18-172">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="43f18-173">Asegúrese de que la configuración de fecha y hora de Azure AD y el servidor de aplicaciones backend está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="43f18-173">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> |
| <span data-ttu-id="43f18-174">13016: Azure AD no puede recuperar un vale Kerberos en nombre del usuario porque no hay ningún UPN en el token perimetral o en la cookie de acceso.</span><span class="sxs-lookup"><span data-stu-id="43f18-174">13016 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because there is no UPN in the edge token or in the access cookie.</span></span> | <span data-ttu-id="43f18-175">Hay un problema con la configuración de STS.</span><span class="sxs-lookup"><span data-stu-id="43f18-175">There is a problem with the STS configuration.</span></span> <span data-ttu-id="43f18-176">Corrija la configuración de notificación de UPN en STS.</span><span class="sxs-lookup"><span data-stu-id="43f18-176">Fix the UPN claim configuration in the STS.</span></span> |
| <span data-ttu-id="43f18-177">13019: Azure AD no puede recuperar un vale Kerberos en nombre del usuario debido al siguiente error general API.</span><span class="sxs-lookup"><span data-stu-id="43f18-177">13019 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because of the following general API error.</span></span> | <span data-ttu-id="43f18-178">Este evento puede indicar una configuración incorrecta entre Azure AD y el servidor controlador de dominios o un problema en la configuración de fecha y hora de ambos equipos.</span><span class="sxs-lookup"><span data-stu-id="43f18-178">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="43f18-179">El controlador de dominio rechazó el vale Kerberos creado por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-179">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="43f18-180">Compruebe que tanto Azure AD como el servidor de aplicaciones back-end están configurados correctamente, especialmente la configuración de SPN.</span><span class="sxs-lookup"><span data-stu-id="43f18-180">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="43f18-181">Asegúrese de que Azure AD está unido mediante dominio al mismo dominio que el controlador de dominio para garantizar que este establezca la confianza con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-181">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="43f18-182">Asegúrese de que la configuración de fecha y hora de Azure AD y el controlador de dominio está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="43f18-182">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="43f18-183">13020: Azure AD no puede recuperar un vale Kerberos en nombre del usuario al no estar definido el SPN del servidor backend.</span><span class="sxs-lookup"><span data-stu-id="43f18-183">13020 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because the backend server SPN is not defined.</span></span> | <span data-ttu-id="43f18-184">Este evento puede indicar una configuración incorrecta entre Azure AD y el servidor controlador de dominios o un problema en la configuración de fecha y hora de ambos equipos.</span><span class="sxs-lookup"><span data-stu-id="43f18-184">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="43f18-185">El controlador de dominio rechazó el vale Kerberos creado por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-185">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="43f18-186">Compruebe que tanto Azure AD como el servidor de aplicaciones back-end están configurados correctamente, especialmente la configuración de SPN.</span><span class="sxs-lookup"><span data-stu-id="43f18-186">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="43f18-187">Asegúrese de que Azure AD está unido mediante dominio al mismo dominio que el controlador de dominio para garantizar que este establezca la confianza con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-187">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="43f18-188">Asegúrese de que la configuración de fecha y hora de Azure AD y el controlador de dominio está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="43f18-188">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="43f18-189">13022: Azure AD no puede autenticar el usuario porque el servidor backend responde a los intentos de autenticación Kerberos con un error HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="43f18-189">13022 - Azure AD cannot authenticate the user because the backend server responds to Kerberos authentication attempts with an HTTP 401 error.</span></span> | <span data-ttu-id="43f18-190">Este evento puede indicar una configuración incorrecta entre Azure AD y el servidor de aplicaciones backend o un problema en la configuración de fecha y hora de ambos equipos.</span><span class="sxs-lookup"><span data-stu-id="43f18-190">This event may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="43f18-191">El servidor backend rechazó el vale Kerberos creado por Azure AD.</span><span class="sxs-lookup"><span data-stu-id="43f18-191">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="43f18-192">Compruebe que tanto Azure AD como el servidor de aplicaciones back-end están configurados correctamente.</span><span class="sxs-lookup"><span data-stu-id="43f18-192">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="43f18-193">Asegúrese de que la configuración de fecha y hora de Azure AD y el servidor de aplicaciones backend está sincronizada.</span><span class="sxs-lookup"><span data-stu-id="43f18-193">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> |

## <a name="end-user-errors"></a><span data-ttu-id="43f18-194">Errores del usuario final</span><span class="sxs-lookup"><span data-stu-id="43f18-194">End-user errors</span></span>

<span data-ttu-id="43f18-195">En esta lista se muestran los errores que los usuarios finales pueden encontrar al intentar acceder a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-195">This list covers errors that your end users might encounter when they try to access the app and fail.</span></span> 

| <span data-ttu-id="43f18-196">Error</span><span class="sxs-lookup"><span data-stu-id="43f18-196">Error</span></span> | <span data-ttu-id="43f18-197">Pasos recomendados</span><span class="sxs-lookup"><span data-stu-id="43f18-197">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="43f18-198">El sitio web no puede mostrar la página.</span><span class="sxs-lookup"><span data-stu-id="43f18-198">The website cannot display the page.</span></span> | <span data-ttu-id="43f18-199">Es posible que el usuario reciba este error al intentar acceder a la aplicación que publicó esta es una aplicación IWA.</span><span class="sxs-lookup"><span data-stu-id="43f18-199">Your user may get this error when trying to access the app you published if the application is an IWA application.</span></span> <span data-ttu-id="43f18-200">Es posible que el SPN definido para esta aplicación no sea correcto.</span><span class="sxs-lookup"><span data-stu-id="43f18-200">The defined SPN for this application may be incorrect.</span></span> <span data-ttu-id="43f18-201">Para las aplicaciones IWA: asegúrese de que el SPN configurado para esta aplicación es correcto.</span><span class="sxs-lookup"><span data-stu-id="43f18-201">For IWA apps, make sure that the SPN configured for this application is correct.</span></span> |
| <span data-ttu-id="43f18-202">El sitio web no puede mostrar la página.</span><span class="sxs-lookup"><span data-stu-id="43f18-202">The website cannot display the page.</span></span> | <span data-ttu-id="43f18-203">Es posible que el usuario reciba este error al intentar acceder a la aplicación que publicó esta es una aplicación OWA.</span><span class="sxs-lookup"><span data-stu-id="43f18-203">Your user may get this error when trying to access the app you published if the application is an OWA application.</span></span> <span data-ttu-id="43f18-204">Esto puede deberse a uno de los motivos siguientes: </span><span class="sxs-lookup"><span data-stu-id="43f18-204">This could be caused by one of the following:</span></span><br><li><span data-ttu-id="43f18-205">El SPN definido para esta aplicación es incorrecto.</span><span class="sxs-lookup"><span data-stu-id="43f18-205">The defined SPN for this application is incorrect.</span></span> <span data-ttu-id="43f18-206">Asegúrese de que el SPN configurado para esta aplicación es correcto.</span><span class="sxs-lookup"><span data-stu-id="43f18-206">Make sure that the SPN configured for this application is correct.</span></span></li><li><span data-ttu-id="43f18-207">El usuario que intentó obtener acceso a la aplicación usa una cuenta Microsoft en lugar de la cuenta corporativa adecuada para iniciar sesión, o bien el usuario es un usuario invitado.</span><span class="sxs-lookup"><span data-stu-id="43f18-207">The user who tried to access the application is using a Microsoft account rather than the proper corporate account to sign in, or the user is a guest user.</span></span> <span data-ttu-id="43f18-208">Asegúrese de que el usuario inicia sesión con la cuenta corporativa que coincide con el dominio de la aplicación publicada.</span><span class="sxs-lookup"><span data-stu-id="43f18-208">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span> <span data-ttu-id="43f18-209">Los usuarios de cuenta Microsoft y los invitados no pueden tener acceso a aplicaciones IWA.</span><span class="sxs-lookup"><span data-stu-id="43f18-209">Microsoft Account users and guest cannot access IWA applications.</span></span></li><li><span data-ttu-id="43f18-210">El usuario que intentó obtener acceso a la aplicación no está correctamente definido para esta aplicación a nivel local.</span><span class="sxs-lookup"><span data-stu-id="43f18-210">The user who tried to access the application is not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="43f18-211">Asegúrese de que este usuario tiene los permisos adecuados como se define para esta aplicación backend en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="43f18-211">Make sure that this user has the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="43f18-212">No se puede tener acceso a esta aplicación corporativa.</span><span class="sxs-lookup"><span data-stu-id="43f18-212">This corporate app can’t be accessed.</span></span> <span data-ttu-id="43f18-213">No está autorizado para tener acceso a esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-213">You are not authorized to access this application.</span></span> <span data-ttu-id="43f18-214">Error de autorización.</span><span class="sxs-lookup"><span data-stu-id="43f18-214">Authorization failed.</span></span> <span data-ttu-id="43f18-215">Asegúrese de asignar el usuario con acceso a esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-215">Make sure to assign the user with access to this application.</span></span> | <span data-ttu-id="43f18-216">Los usuarios pueden recibir este error al intentar acceder a la aplicación que publicó si para iniciar sesión usan cuentas Microsoft, en lugar de su cuenta corporativa.</span><span class="sxs-lookup"><span data-stu-id="43f18-216">Your users may get this error when trying to access the app you published if they use Microsoft accounts instead of their corporate account to sign in.</span></span> <span data-ttu-id="43f18-217">Los usuarios invitados también pueden recibir este error.</span><span class="sxs-lookup"><span data-stu-id="43f18-217">Guest users may also get this error.</span></span> <span data-ttu-id="43f18-218">Los usuarios y los invitados de la Cuenta Microsoft no pueden tener acceso a aplicaciones IWA.</span><span class="sxs-lookup"><span data-stu-id="43f18-218">Microsoft Account users and guests cannot access IWA applications.</span></span> <span data-ttu-id="43f18-219">Asegúrese de que el usuario inicia sesión con la cuenta corporativa que coincide con el dominio de la aplicación publicada.</span><span class="sxs-lookup"><span data-stu-id="43f18-219">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span><br><br><span data-ttu-id="43f18-220">Puede que no haya asignado el usuario para esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-220">You may not have assigned the user for this application.</span></span> <span data-ttu-id="43f18-221">Vaya a la pestaña **Aplicación** y, en **Usuarios y grupos**, asigne este usuario o grupo de usuarios a esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-221">Go to the **Application** tab, and under **Users and Groups**, assign this user or user group to this application.</span></span> |
| <span data-ttu-id="43f18-222">No se puede tener acceso a esta aplicación corporativa en este momento.</span><span class="sxs-lookup"><span data-stu-id="43f18-222">This corporate app can’t be accessed right now.</span></span> <span data-ttu-id="43f18-223">Inténtelo de nuevo más tarde... Se agotó el tiempo de espera del conector.</span><span class="sxs-lookup"><span data-stu-id="43f18-223">Please try again later…The connector timed out.</span></span> | <span data-ttu-id="43f18-224">Los usuarios pueden recibir este error al intentar acceder a la aplicación que publicó si no está definidos correctamente para esta aplicación a nivel local.</span><span class="sxs-lookup"><span data-stu-id="43f18-224">Your users may get this error when trying to access the app you published if they are not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="43f18-225">Asegúrese de que los usuarios tengan los permisos adecuados definidos para esta aplicación back-end en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="43f18-225">Make sure that your users have the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="43f18-226">No se puede tener acceso a esta aplicación corporativa.</span><span class="sxs-lookup"><span data-stu-id="43f18-226">This corporate app can’t be accessed.</span></span> <span data-ttu-id="43f18-227">No está autorizado para tener acceso a esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="43f18-227">You are not authorized to access this application.</span></span> <span data-ttu-id="43f18-228">Error de autorización.</span><span class="sxs-lookup"><span data-stu-id="43f18-228">Authorization failed.</span></span> <span data-ttu-id="43f18-229">Asegúrese de que el usuario tiene una licencia de Azure Active Directory Premium o Basic.</span><span class="sxs-lookup"><span data-stu-id="43f18-229">Make sure that the user has a license for Azure Active Directory Premium or Basic.</span></span> | <span data-ttu-id="43f18-230">Es posible que los usuarios reciban este error al intentar acceder a la aplicación que publicó si el administrador del suscriptor no les asignó explícitamente una licencia Premium o Basic.</span><span class="sxs-lookup"><span data-stu-id="43f18-230">Your users may get this error when trying to access the app you published if they weren't explicitly assigned with a Premium/Basic license by the subscriber’s administrator.</span></span> <span data-ttu-id="43f18-231">Vaya a la pestaña **Licencias** de Active Directory del suscriptor y asegúrese de que se asigne a este usuario o grupo de usuarios una licencia Premium o Básica.</span><span class="sxs-lookup"><span data-stu-id="43f18-231">Go to the subscriber’s Active Directory **Licenses** tab and make sure that this user or user group is assigned a Premium or Basic license.</span></span> |

## <a name="my-error-wasnt-listed-here"></a><span data-ttu-id="43f18-232">Mi error no aparece aquí.</span><span class="sxs-lookup"><span data-stu-id="43f18-232">My error wasn't listed here</span></span>

<span data-ttu-id="43f18-233">Si se produce un error o un problema con el Proxy de aplicación de Azure AD que no aparece en esta guía de solución de problemas, es conveniente obtener información al respecto.</span><span class="sxs-lookup"><span data-stu-id="43f18-233">If you encounter an error or problem with Azure AD Application Proxy that isn't listed in this troubleshooting guide, we'd like to hear about it.</span></span> <span data-ttu-id="43f18-234">Envíe un correo electrónico al [equipo de comentarios](mailto:aadapfeedback@microsoft.com) con los detalles del error que se ha producido.</span><span class="sxs-lookup"><span data-stu-id="43f18-234">Send an email to our [feedback team](mailto:aadapfeedback@microsoft.com) with the details of the error you encountered.</span></span>

## <a name="see-also"></a><span data-ttu-id="43f18-235">Consulte también</span><span class="sxs-lookup"><span data-stu-id="43f18-235">See also</span></span>
* [<span data-ttu-id="43f18-236">Habilitación del proxy de aplicación de Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="43f18-236">Enable Application Proxy for Azure Active Directory</span></span>](active-directory-application-proxy-enable.md)
* [<span data-ttu-id="43f18-237">Publicar aplicaciones con Proxy de aplicación</span><span class="sxs-lookup"><span data-stu-id="43f18-237">Publish applications with Application Proxy</span></span>](active-directory-application-proxy-publish.md)
* [<span data-ttu-id="43f18-238">Habilitar el inicio de sesión único</span><span class="sxs-lookup"><span data-stu-id="43f18-238">Enable single sign-on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
* [<span data-ttu-id="43f18-239">Habilitar el acceso condicional</span><span class="sxs-lookup"><span data-stu-id="43f18-239">Enable conditional access</span></span>](active-directory-application-proxy-conditional-access.md)


<!--Image references-->
[1]: ./media/active-directory-application-proxy-troubleshoot/connectorproperties.png
[2]: ./media/active-directory-application-proxy-troubleshoot/sessionlog.png

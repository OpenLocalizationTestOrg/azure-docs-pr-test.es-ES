---
title: "Sincronización de Azure AD Connect: descripción de la configuración predeterminada | Microsoft Docs"
description: "En este artículo se describe la configuración predeterminada de sincronización de Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 32a693c059a1b4261f33a3d6f50f397365e9dac4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="d0ce3-103">Sincronización de Azure AD Connect: descripción de la configuración predeterminada</span><span class="sxs-lookup"><span data-stu-id="d0ce3-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="d0ce3-104">En este artículo se explican las reglas de configuración rápida.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="d0ce3-105">Se documentan las reglas y cómo afectan a la configuración.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="d0ce3-106">Este artículo lo guía en la configuración predeterminada de la sincronización de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-106">It also walks you through the default configuration of Azure AD Connect sync.</span></span> <span data-ttu-id="d0ce3-107">El objetivo es que el lector comprenda cómo funciona el modelo de configuración, denominado "aprovisionamiento declarativo", en un ejemplo real.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-107">The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="d0ce3-108">En este artículo se supone que ya instaló y configuró Azure AD Connect Sync mediante el asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-108">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="d0ce3-109">Para entender los detalles del modelo de configuración, consulte el artículo de información sobre el [aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-109">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="d0ce3-110">Reglas integradas entre el entorno local y Azure AD</span><span class="sxs-lookup"><span data-stu-id="d0ce3-110">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="d0ce3-111">Las expresiones siguientes se pueden encontrar en la configuración rápida.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-111">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="d0ce3-112">Reglas integradas de usuario</span><span class="sxs-lookup"><span data-stu-id="d0ce3-112">User out-of-box rules</span></span>
<span data-ttu-id="d0ce3-113">Estas reglas también se aplican al tipo de objeto iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-113">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="d0ce3-114">Un objeto de usuario debe cumplir los siguientes requisitos para que se sincronice:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-114">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="d0ce3-115">Debe tener un valor de sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-115">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="d0ce3-116">Después de crear el objeto en Azure AD, no se puede cambiar el valor de sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-116">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="d0ce3-117">Si se modifica en el entorno local, el objeto dejará de sincronizarse hasta que se vuelva a cambiar el valor de sourceAnchor a su valor anterior.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-117">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="d0ce3-118">Debe tener rellenado el atributo accountEnabled (userAccountControl).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-118">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="d0ce3-119">Con una instancia de Active Directory local, este atributo siempre estará presente y rellenado.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-119">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="d0ce3-120">Los siguientes objetos de usuario **no** se sincronizan con Azure AD:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-120">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="d0ce3-121">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-121">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="d0ce3-122">Asegúrese de que muchos objetos incluidos en Active Directory, como la cuenta de administrador integrada, no estén sincronizados.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-122">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="d0ce3-123">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-123">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="d0ce3-124">Asegúrese de que los objetos de usuario sin el atributo sAMAccountName no estén sincronizados.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-124">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="d0ce3-125">Esto solo sucedería prácticamente en un dominio actualizado desde NT4.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-125">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="d0ce3-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="d0ce3-127">No sincronice la cuenta de servicio que usa Azure AD Connect Sync y sus versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-127">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="d0ce3-128">No sincronice las cuentas de Exchange que no funcionan en Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-128">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="d0ce3-129">No sincronice los objetos que no vayan a funcionar en Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-129">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="d0ce3-130">Esta máscara de bits (&amp; H21C07000) filtraría los objetos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-130">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="d0ce3-131">Carpeta pública habilitada para correo</span><span class="sxs-lookup"><span data-stu-id="d0ce3-131">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="d0ce3-132">Buzón del operador del sistema</span><span class="sxs-lookup"><span data-stu-id="d0ce3-132">System Attendant Mailbox</span></span>
  * <span data-ttu-id="d0ce3-133">Buzón de la base de datos de buzones (buzón del sistema)</span><span class="sxs-lookup"><span data-stu-id="d0ce3-133">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="d0ce3-134">Grupo de seguridad universal (no se aplicaría a un usuario, pero existe por motivos de herencia)</span><span class="sxs-lookup"><span data-stu-id="d0ce3-134">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="d0ce3-135">Grupo no universal (no se aplicaría a un usuario, pero existe por motivos de herencia)</span><span class="sxs-lookup"><span data-stu-id="d0ce3-135">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="d0ce3-136">Plan de buzón</span><span class="sxs-lookup"><span data-stu-id="d0ce3-136">Mailbox Plan</span></span>
  * <span data-ttu-id="d0ce3-137">Buzón de detección</span><span class="sxs-lookup"><span data-stu-id="d0ce3-137">Discovery Mailbox</span></span>
* <span data-ttu-id="d0ce3-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="d0ce3-139">No sincronice ningún objeto víctima de replicación.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-139">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="d0ce3-140">Se aplican las siguientes reglas de atributo:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-140">The following attribute rules apply:</span></span>

* <span data-ttu-id="d0ce3-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="d0ce3-142">El atributo sourceAnchor no procede de un buzón vinculado.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-142">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="d0ce3-143">Se da por hecho que, si se ha encontrado un buzón vinculado, la cuenta real se unirá más tarde.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-143">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="d0ce3-144">Los atributos relacionados con Exchange solo se sincronizan si el atributo **mailNickName** tiene un valor.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-144">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="d0ce3-145">Cuando hay varios bosques, los atributos se consumen en el orden siguiente:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-145">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="d0ce3-146">Los atributos relacionados con el inicio de sesión (por ejemplo, userPrincipalName) proceden del bosque con una cuenta habilitada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-146">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="d0ce3-147">El atributo que se encuentra en una GAL de Exchange (lista global de direcciones) procede del bosque con un buzón de Exchange.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-147">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="d0ce3-148">Si no se encuentra ningún buzón, estos atributos pueden provenir de cualquier bosque.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-148">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="d0ce3-149">Los atributos relacionados con Exchange (los atributos técnicos no se muestran en la GAL) proceden del bosque en el que `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-149">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="d0ce3-150">Si hay varios bosques que podrían cumplir una de estas reglas, se utilizará el orden de creación (fecha y hora) de los conectores (bosques) para determinar el bosque de origen de los atributos.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-150">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="d0ce3-151">Reglas integradas de contacto</span><span class="sxs-lookup"><span data-stu-id="d0ce3-151">Contact out-of-box rules</span></span>
<span data-ttu-id="d0ce3-152">Un objeto de contacto debe cumplir los siguientes requisitos para sincronizarse:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-152">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="d0ce3-153">El contacto debe estar habilitado para correo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-153">The contact must be mail-enabled.</span></span> <span data-ttu-id="d0ce3-154">Se comprueba con las reglas siguientes:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-154">It is verified with the following rules:</span></span>
  * <span data-ttu-id="d0ce3-155">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-155">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="d0ce3-156">El atributo proxyAddresses debe estar rellenado.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-156">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="d0ce3-157">Se puede encontrar una dirección de correo electrónico principal en el atributo proxyAddresses o en el atributo de correo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-157">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="d0ce3-158">La presencia de un @ se usa para comprobar que el contenido es una dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-158">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="d0ce3-159">Una de estas dos reglas debe evaluarse como True.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-159">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="d0ce3-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="d0ce3-161">¿Hay una entrada con "SMTP:" y si se produce, puede un @, se puede encontrar en la cadena?</span><span class="sxs-lookup"><span data-stu-id="d0ce3-161">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="d0ce3-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="d0ce3-163">¿Es el atributo de correo electrónico se rellena y si es así, puede un @, se puede encontrar en la cadena?</span><span class="sxs-lookup"><span data-stu-id="d0ce3-163">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="d0ce3-164">Los siguientes objetos de contacto **no** se sincronizan con Azure AD:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-164">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="d0ce3-165">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-165">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="d0ce3-166">Asegúrese de que ningún objeto marcado como crítico se sincronice.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-166">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="d0ce3-167">No debería ser ninguno con una configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-167">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="d0ce3-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="d0ce3-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="d0ce3-170">Estos objetos no funcionarían en Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-170">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="d0ce3-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="d0ce3-172">No sincronice ningún objeto víctima de replicación.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-172">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="d0ce3-173">Reglas integradas de grupo</span><span class="sxs-lookup"><span data-stu-id="d0ce3-173">Group out-of-box rules</span></span>
<span data-ttu-id="d0ce3-174">Un objeto de grupo debe cumplir los siguientes requisitos para sincronizarse:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-174">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="d0ce3-175">Debe tener menos de 50.000 miembros.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-175">Must have less than 50,000 members.</span></span> <span data-ttu-id="d0ce3-176">Estos se cuentan como el número de miembros del grupo local.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-176">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="d0ce3-177">Si tiene más miembros antes de que la sincronización se inicie por primera vez, el grupo no se sincronizará.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-177">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="d0ce3-178">Si el número de miembros crece desde que se creara inicialmente, cuando alcance los 50 000 dejará de sincronizarse hasta que la cifra sea de nuevo inferior a 50 000.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-178">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="d0ce3-179">Nota: Azure AD también aplicará el número de miembros de 50.000.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-179">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="d0ce3-180">No podrá sincronizar los grupos con más miembros, aunque modifique o elimine esta regla.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-180">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="d0ce3-181">Si el grupo es un **grupo de distribución**, también estar habilitado para correo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-181">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="d0ce3-182">Consulte [Reglas integradas de contacto](#contact-out-of-box-rules) para aplicar esta regla.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-182">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="d0ce3-183">Los siguientes objetos de grupo **no** se sincronizan con Azure AD:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-183">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="d0ce3-184">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-184">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="d0ce3-185">Asegúrese de muchos objetos incluidos en Active Directory, como el grupo de administradores integrado, no estén sincronizados.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-185">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="d0ce3-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="d0ce3-187">Grupo heredado utilizado por DirSync.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-187">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="d0ce3-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="d0ce3-189">Grupo de roles.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-189">Role Group.</span></span>
* <span data-ttu-id="d0ce3-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="d0ce3-191">No sincronice ningún objeto víctima de replicación.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-191">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="d0ce3-192">Reglas integradas de ForeignSecurityPrincipal</span><span class="sxs-lookup"><span data-stu-id="d0ce3-192">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="d0ce3-193">Los FSP se unen a "cualquier" (\*) objeto en el metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-193">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="d0ce3-194">En realidad, esta unión solo se realiza con usuarios y grupos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-194">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="d0ce3-195">Esta configuración garantiza que se resuelvan los miembros de otro bosque y que se representen correctamente en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-195">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="d0ce3-196">Reglas integradas de equipo</span><span class="sxs-lookup"><span data-stu-id="d0ce3-196">Computer out-of-box rules</span></span>
<span data-ttu-id="d0ce3-197">Un objeto de equipo debe cumplir los siguientes requisitos para sincronizarse:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-197">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="d0ce3-198">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-198">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="d0ce3-199">Solo los equipos con Windows 10 rellenarán este atributo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-199">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="d0ce3-200">Todos los objetos de equipo con un valor en este atributo se sincronizan.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-200">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="d0ce3-201">Descripción del escenario de reglas integradas</span><span class="sxs-lookup"><span data-stu-id="d0ce3-201">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="d0ce3-202">En este ejemplo, usamos una implementación con un bosque de cuentas (A), un bosque de recursos (R) y un directorio de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-202">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Imagen con la descripción del escenario](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="d0ce3-204">En esta configuración, se da por hecho que ya hay una cuenta habilitada en el bosque de cuentas y otra deshabilitada en el bosque de recursos con un buzón vinculado.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-204">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="d0ce3-205">Nuestro objetivo con la configuración predeterminada es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-205">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="d0ce3-206">Los atributos relacionados con el inicio de sesión se sincronizarán desde el bosque con la cuenta habilitada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-206">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="d0ce3-207">Los que se encuentran en la GAL (lista global de direcciones) lo harán desde el bosque con el buzón.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-207">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="d0ce3-208">Si no se encuentra ningún buzón, se usará cualquier otro bosque.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-208">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="d0ce3-209">Si hay un buzón vinculado, se debe encontrar la cuenta habilitada vinculada para poder exportar el objeto a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-209">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="d0ce3-210">Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-210">Synchronization Rule Editor</span></span>
<span data-ttu-id="d0ce3-211">Se puede ver y cambiar la configuración con la herramienta Editor de reglas de sincronización (SRE), y hay un acceso directo a ella en el menú Inicio.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-211">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![Icono del Editor de reglas de sincronización](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="d0ce3-213">El Editor de reglas de sincronización es una herramienta del kit de recursos y se instala con la sincronización de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-213">The SRE is a resource kit tool and it is installed with Azure AD Connect sync.</span></span> <span data-ttu-id="d0ce3-214">Para poder iniciarlo, debe ser miembro del grupo ADSyncAdmins.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-214">To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="d0ce3-215">Cuando se inicie, verá algo parecido a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-215">When it starts, you see something like this:</span></span>

![Reglas de sincronización entrantes](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="d0ce3-217">En este panel, verá todas las reglas de sincronización creadas para su configuración.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-217">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="d0ce3-218">Cada línea de la tabla es una regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-218">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="d0ce3-219">A la izquierda, en Tipos de regla, se muestran los dos tipos diferentes: entrantes y salientes.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-219">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="d0ce3-220">La perspectiva entrante y saliente corresponde al punto de vista del metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-220">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="d0ce3-221">En esta introducción nos centraremos fundamentalmente en las reglas de entrada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-221">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="d0ce3-222">La lista real de reglas de sincronización depende del esquema detectado en AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-222">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="d0ce3-223">En la imagen anterior, el bosque de cuentas (fabrikamonline.com) no dispone de ningún servicio, como Exchange y Lync, y no se crearon reglas de sincronización para estos servicios.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-223">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="d0ce3-224">Sin embargo, en el bosque de recursos (res.fabrikamonline.com) encontraremos reglas de sincronización para estos servicios.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-224">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="d0ce3-225">El contenido de las reglas será diferente en función de la versión detectada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-225">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="d0ce3-226">Por ejemplo, en una implementación de Exchange 2013, tendremos configurados más flujos de atributo que en Exchange 2010/2007.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-226">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="d0ce3-227">Regla de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-227">Synchronization Rule</span></span>
<span data-ttu-id="d0ce3-228">Una regla de sincronización es un objeto de configuración con un conjunto de atributos que se pasan cuando se cumple una condición.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-228">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="d0ce3-229">También se utiliza para describir cómo se relaciona un objeto en un espacio de conector con un objeto en el metaverso, proceso conocido como **unión** o **coincidencia**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-229">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="d0ce3-230">Las reglas de sincronización tienen un valor de precedencia que indica cómo se relacionan entre sí.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-230">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="d0ce3-231">Una regla de sincronización con un valor numérico inferior tiene una precedencia superior y, en caso de conflicto del flujo de atributo, la precedencia superior prevalecerá en su resolución.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-231">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="d0ce3-232">Nos fijaremos, por ejemplo, en la regla de sincronización **In from AD – User AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-232">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="d0ce3-233">Marcaremos esta línea en el Editor de reglas de sincronización y seleccionaremos **Editar**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-233">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="d0ce3-234">Puesto que se trata de una regla integrada, vamos a ver una advertencia al abrir la regla.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-234">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="d0ce3-235">No debería realizar ningún [cambio en las reglas predefinidas](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), por lo que se le preguntará cuáles son sus intenciones.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-235">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="d0ce3-236">En este caso, solo quiere ver la regla,</span><span class="sxs-lookup"><span data-stu-id="d0ce3-236">In this case, you only want to view the rule.</span></span> <span data-ttu-id="d0ce3-237">así que seleccione **No**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-237">Select **No**.</span></span>

![Advertencia del Editor de reglas de sincronización](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="d0ce3-239">Una regla de sincronización tiene cuatro secciones de configuración: Descripción, Filtro de ámbito, Reglas de unión y Transformaciones.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-239">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="d0ce3-240">Description</span><span class="sxs-lookup"><span data-stu-id="d0ce3-240">Description</span></span>
<span data-ttu-id="d0ce3-241">La primera sección proporciona información básica como el nombre y la descripción.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-241">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="d0ce3-242">Pestaña Descripción del Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-242">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="d0ce3-243">También encontramos información sobre el sistema conectado con el que se relaciona esta regla, el tipo de objeto del sistema conectado al que se aplica y el tipo de objeto del metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-243">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="d0ce3-244">El tipo de objeto del metaverso siempre es persona, independientemente de si el tipo de objeto de origen es usuario, iNetOrgPerson o contacto.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-244">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="d0ce3-245">El tipo de objeto del metaverso nunca debe cambiar, por lo que se crea como un tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-245">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="d0ce3-246">El tipo de vínculo se puede establecer en Unión, Unión permanente o Aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-246">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="d0ce3-247">Esta configuración funciona junto con la sección Join rules (Reglas de unión), que abordaremos más adelante.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-247">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="d0ce3-248">Puede ver igualmente que esta regla de sincronización se usa para la sincronización de contraseñas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-248">You can also see that this sync rule is used for password sync.</span></span> <span data-ttu-id="d0ce3-249">Si un usuario está en el ámbito de esta regla de sincronización, la contraseña se sincronizará desde el entorno local a la nube (si damos por hecho que está habilitada la característica de sincronización de contraseñas).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-249">If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="d0ce3-250">Filtro de ámbito</span><span class="sxs-lookup"><span data-stu-id="d0ce3-250">Scoping filter</span></span>
<span data-ttu-id="d0ce3-251">La sección Filtro de ámbito se utiliza para configurar cuándo se debe aplicar una regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-251">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="d0ce3-252">Como el nombre de la regla de sincronización que estamos examinando indica que solo debe aplicarse para los usuarios habilitados, el ámbito se configura de modo que el atributo **userAccountControl** de AD no deba tener establecido el bit 2.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-252">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="d0ce3-253">Cuando el motor de sincronización encuentra un usuario en AD, se aplica esta sincronización regla cuando el atributo **userAccountControl** tenga establecido el valor decimal 512 (usuario normal habilitado).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-253">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="d0ce3-254">No se aplicará cuando el usuario ha establecido el valor de **userAccountControl** en 514 (usuario normal deshabilitado).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-254">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="d0ce3-255">Pestaña Ámbito del Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-255">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="d0ce3-256">El filtro de ámbito tiene grupos y cláusulas que pueden anidarse.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-256">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="d0ce3-257">Deben cumplirse todas las cláusulas dentro de un grupo para que se aplique una regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-257">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="d0ce3-258">Cuando se definen varios grupos, se debe cumplir al menos uno para que la regla se aplique.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-258">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="d0ce3-259">Es decir, un operador OR lógico se evalúa entre grupos y uno AND lógico, dentro de un grupo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-259">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="d0ce3-260">Puede encontrar un ejemplo de esto en la regla de sincronización saliente **Out to AAD – Group Join**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-260">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="d0ce3-261">Hay varios grupos de filtros de sincronización, por ejemplo, uno para los grupos de seguridad (`securityEnabled EQUAL True`) y otro para los de distribución (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-261">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="d0ce3-262">Pestaña Ámbito del Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-262">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="d0ce3-263">Esta regla se usa para definir qué grupos se deben aprovisionar en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-263">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="d0ce3-264">Los grupos de distribución deben tener el correo habilitado para sincronizarse con Azure AD, pero no es obligatorio en los grupos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-264">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="d0ce3-265">Reglas de unión</span><span class="sxs-lookup"><span data-stu-id="d0ce3-265">Join rules</span></span>
<span data-ttu-id="d0ce3-266">La tercera sección se usa para configurar cómo se relacionan los objetos del espacio conector con los objetos del metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-266">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="d0ce3-267">La regla que hemos examinado antes no tiene ninguna configuración para Join rules (Reglas de unión), por lo que, en su lugar, vamos a analizar la regla **In from AD – User Join**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-267">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="d0ce3-268">Pestaña Join rules (Reglas de unión) del Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-268">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="d0ce3-269">El contenido de la regla de unión dependerá de la opción de coincidencia seleccionada en el Asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-269">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="d0ce3-270">Para una regla entrante, la evaluación se inicia con un objeto del espacio conector de origen y cada grupo de las reglas de unión se evalúa en secuencia.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-270">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="d0ce3-271">Si se evalúa un objeto de origen para que coincide exactamente con uno del metaverso usando una de las reglas de unión, los objetos se unirán.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-271">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="d0ce3-272">Si se han evaluado todas las reglas y no hay coincidencia, se usa el tipo de vínculo de la página de descripción.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-272">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="d0ce3-273">Si esta configuración se establece en **Aprovisionar**, se creará un nuevo objeto en el destino: el metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-273">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="d0ce3-274">Aprovisionar un nuevo objeto en el metaverso también se denomina " **proyectar** " un objeto en el metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-274">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="d0ce3-275">Las reglas de unión solo se evalúan una vez.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-275">The join rules are only evaluated once.</span></span> <span data-ttu-id="d0ce3-276">Cuando un objeto del espacio conector y uno del metaverso se unen, permanecerán así mientras el ámbito de la regla de sincronización se siga cumpliendo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-276">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="d0ce3-277">Cuando se evalúan reglas de sincronización, solo debe haber en el ámbito una regla de sincronización con reglas de unión definidas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-277">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="d0ce3-278">Si se encuentran varias reglas de sincronización con reglas de unión para un objeto, se emite un error.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-278">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="d0ce3-279">Por este motivo, lo mejor es tener solo una regla de sincronización con una unión definida cuando haya varias reglas de sincronización en el ámbito de un objeto.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-279">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="d0ce3-280">En la configuración de origen para la sincronización de Azure AD Connect, estas reglas se pueden encontrar consultando el nombre y buscando las que tienen la palabra **Join** al final.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-280">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="d0ce3-281">Una regla de sincronización sin ninguna regla de unión definida aplicará los flujos de atributo si otra regla de sincronización ha unido los objetos o ha aprovisionado un nuevo objeto en el destino.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-281">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="d0ce3-282">Si observa la imagen anterior, puede ver que la regla está intentando unirse a **objectSID** con **msExchMasterAccountSid** (Exchange) y **msRTCSIP-OriginatorSid** (Lync), que es lo que esperamos de una topología de bosque de recursos y de cuentas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-282">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="d0ce3-283">Busque la misma regla en todos los bosques.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-283">You find the same rule on all forests.</span></span> <span data-ttu-id="d0ce3-284">Damos por hecho que cada bosque puede ser un bosque de cuentas o de recursos.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-284">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="d0ce3-285">Esta configuración también funciona si dispone de cuentas que residen en un solo bosque y no tienen que unirse.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-285">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="d0ce3-286">Transformaciones</span><span class="sxs-lookup"><span data-stu-id="d0ce3-286">Transformations</span></span>
<span data-ttu-id="d0ce3-287">La sección sobre las transformaciones define todos los flujos de atributo que se aplicarán al objeto de destino cuando se unan los objetos y se cumpla el filtro de ámbito.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-287">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="d0ce3-288">Si volvemos a nuestra regla de sincronización **In from AD – User AccountEnabled** , encontraremos las transformaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-288">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="d0ce3-289">Pestaña Transformaciones del Editor de reglas de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-289">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="d0ce3-290">Para ponerlo en contexto, en una implementación de bosque cuenta-recurso esperamos encontrar una cuenta habilitada en el bosque de cuenta y una deshabilitada en el bosque de recurso con la configuración de Exchange y Lync.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-290">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="d0ce3-291">La regla de sincronización que estamos examinando contiene los atributos necesarios para el inicio de sesión y queremos que fluyan desde el bosque en el que hemos encontrado una cuenta habilitada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-291">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="d0ce3-292">Todos estos flujos de atributo se combinan en una regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-292">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="d0ce3-293">Una transformación puede tener tipos diferentes: Constante, Directa y Expresión.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-293">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="d0ce3-294">En un flujo de tipo constante siempre fluirá un valor codificado.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-294">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="d0ce3-295">En el caso anterior, se establece siempre el valor **True** en el atributo del metaverso llamado **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-295">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="d0ce3-296">En un flujo de tipo directo fluirá el valor del atributo del origen hacia el atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-296">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="d0ce3-297">El tercer flujo es de tipo expresión y permite configuraciones más avanzadas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-297">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="d0ce3-298">El lenguaje de la expresión es VBA (Visual Basic para Aplicaciones), por lo que un usuario con experiencia en Microsoft Office o VBScript reconocerá el formato.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-298">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="d0ce3-299">Los atributos se especifican entre corchetes, [nombreAtributo].</span><span class="sxs-lookup"><span data-stu-id="d0ce3-299">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="d0ce3-300">Los nombres de atributo y de función distinguen entre mayúsculas y minúsculas, pero el Editor de reglas de sincronización evaluará las expresiones y proporcionará una advertencia si la expresión no es válida.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-300">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="d0ce3-301">Todas las expresiones se expresan en una única línea con funciones anidadas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-301">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="d0ce3-302">Para mostrar la eficacia del lenguaje de configuración, encontrará a continuación el flujo para pwdLastSet, pero con comentarios adicionales insertados:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-302">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="d0ce3-303">Para obtener más información sobre el lenguaje de expresiones de los flujos de atributo, vea [Descripción de las expresiones de aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="d0ce3-303">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="d0ce3-304">Precedencia</span><span class="sxs-lookup"><span data-stu-id="d0ce3-304">Precedence</span></span>
<span data-ttu-id="d0ce3-305">Hemos examinado algunas reglas de sincronización individuales, pero las reglas se usan combinadas en la configuración.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-305">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="d0ce3-306">En algunos casos, se aporta un valor de atributo desde varias reglas de sincronización al mismo atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-306">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="d0ce3-307">En este caso, se usa la precedencia de atributos para determinar qué atributo prevalecerá.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-307">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="d0ce3-308">Como ejemplo, examinemos el atributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-308">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="d0ce3-309">Este atributo es importante para poder iniciar sesión en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-309">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="d0ce3-310">Podemos encontrar un flujo de atributos para este atributo en dos reglas de sincronización diferentes, **In from AD – User AccountEnabled** e **In from AD – User Common**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-310">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="d0ce3-311">Debido a la precedencia de las reglas de sincronización, el atributo sourceAnchor se aportará desde el bosque con una cuenta habilitada primero si hay varios objetos unidos al objeto del metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-311">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="d0ce3-312">Si no hay cuentas habilitadas, el motor de sincronización usará la regla de sincronización comodín **In from AD – User Common**.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-312">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="d0ce3-313">Esta configuración garantiza que siga habiendo un atributo sourceAnchor, incluso en las cuentas deshabilitadas.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-313">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Reglas de sincronización entrantes](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="d0ce3-315">El asistente para instalación establece la precedencia para las reglas de sincronización en grupos.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-315">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="d0ce3-316">Todas las reglas de un grupo tienen el mismo nombre, pero se conectan a diferentes directorios conectados.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-316">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="d0ce3-317">El Asistente para instalación dará a la regla **In from AD – User Join** la precedencia más alta e iterará sobre todos los directorios de AD conectados.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-317">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="d0ce3-318">Después, continuará con los grupos de reglas siguientes en un orden predefinido.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-318">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="d0ce3-319">Dentro de un grupo, las reglas se agregan en el orden en que los conectores se agregaron al asistente.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-319">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="d0ce3-320">Si se agrega otro conector mediante el asistente, las reglas de sincronización se reordenarán y las reglas del nuevo conector se insertarán al final de cada grupo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-320">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="d0ce3-321">Resumen</span><span class="sxs-lookup"><span data-stu-id="d0ce3-321">Putting it all together</span></span>
<span data-ttu-id="d0ce3-322">Ahora conocemos lo suficiente de las reglas de sincronización para poder comprender cómo funciona la configuración con las distintas reglas de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-322">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="d0ce3-323">Si tomamos un usuario y los atributos que se aportan al metaverso, las reglas se aplican en el orden siguiente:</span><span class="sxs-lookup"><span data-stu-id="d0ce3-323">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="d0ce3-324">Nombre</span><span class="sxs-lookup"><span data-stu-id="d0ce3-324">Name</span></span> | <span data-ttu-id="d0ce3-325">Comentario</span><span class="sxs-lookup"><span data-stu-id="d0ce3-325">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="d0ce3-326">In from AD – User Join</span><span class="sxs-lookup"><span data-stu-id="d0ce3-326">In from AD – User Join</span></span> |<span data-ttu-id="d0ce3-327">Regla para unir objetos del espacio del conector con el metaverso.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-327">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="d0ce3-328">In from AD – UserAccount Enabled</span><span class="sxs-lookup"><span data-stu-id="d0ce3-328">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="d0ce3-329">Atributos necesarios para iniciar sesión en Azure AD y Office 365.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-329">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="d0ce3-330">Estos atributos deben ser de la cuenta habilitada.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-330">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="d0ce3-331">In from AD – User Common from Exchange</span><span class="sxs-lookup"><span data-stu-id="d0ce3-331">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="d0ce3-332">Atributos encontrados en la lista global de direcciones</span><span class="sxs-lookup"><span data-stu-id="d0ce3-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="d0ce3-333">Suponemos que la calidad de los datos es mejor en el bosque donde encontramos el buzón del usuario.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-333">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="d0ce3-334">In from AD – User Common</span><span class="sxs-lookup"><span data-stu-id="d0ce3-334">In from AD – User Common</span></span> |<span data-ttu-id="d0ce3-335">Atributos encontrados en la lista global de direcciones</span><span class="sxs-lookup"><span data-stu-id="d0ce3-335">Attributes found in the Global Address List.</span></span> <span data-ttu-id="d0ce3-336">En caso de que no encontremos un buzón, cualquier otro objeto unido puede aportar el valor de atributo.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-336">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="d0ce3-337">In from AD – User Exchange</span><span class="sxs-lookup"><span data-stu-id="d0ce3-337">In from AD – User Exchange</span></span> |<span data-ttu-id="d0ce3-338">Solo existirá si se detecta Exchange.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-338">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="d0ce3-339">Hará fluir todos los atributos de Exchange de la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-339">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="d0ce3-340">In from AD – User Lync</span><span class="sxs-lookup"><span data-stu-id="d0ce3-340">In from AD – User Lync</span></span> |<span data-ttu-id="d0ce3-341">Solo existirá si se detecta Lync.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-341">Only exists if Lync has been detected.</span></span> <span data-ttu-id="d0ce3-342">Hará fluir todos los atributos de Lync de la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="d0ce3-342">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="d0ce3-343">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d0ce3-343">Next steps</span></span>
* <span data-ttu-id="d0ce3-344">Obtenga más información sobre el modelo de configuración en el artículo de información sobre el [aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-344">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="d0ce3-345">Consulte más detalles sobre el lenguaje de expresiones en el artículo [Descripción de las expresiones de aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-345">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="d0ce3-346">Siga leyendo sobre cómo funciona la configuración rápida en [Azure AD Connect Sync: descripción de usuarios y contactos](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="d0ce3-346">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="d0ce3-347">Descubra cómo hacer un cambio práctico utilizando el aprovisionamiento declarativo en [Sincronización de Azure AD Connect: cómo realizar un cambio en la configuración predeterminada](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="d0ce3-347">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="d0ce3-348">**Temas de introducción**</span><span class="sxs-lookup"><span data-stu-id="d0ce3-348">**Overview topics**</span></span>

* [<span data-ttu-id="d0ce3-349">Sincronización de Azure AD Connect: comprender y personalizar la sincronización</span><span class="sxs-lookup"><span data-stu-id="d0ce3-349">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="d0ce3-350">Integración de las identidades locales con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="d0ce3-350">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)


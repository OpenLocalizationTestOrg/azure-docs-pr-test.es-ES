---
title: "sincronización de contraseña de aaaImplement con sincronización de Azure AD Connect | Documentos de Microsoft"
description: "Proporciona información acerca de cómo funciona la sincronización de contraseña y cómo tooset seguridad."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: a0401640f2a4d914419ee4446f923bb3a972389d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="a1e8f-103">Implementación de la sincronización de contraseña mediante la sincronización de Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="a1e8f-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="a1e8f-104">Este artículo proporciona información que necesita toosynchronize las contraseñas de usuario desde una instancia local de Active Directory instancia tooa basada en la nube Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-104">This article provides information that you need toosynchronize your user passwords from an on-premises Active Directory instance tooa cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="a1e8f-105">Qué es la sincronización de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-105">What is password synchronization</span></span>
<span data-ttu-id="a1e8f-106">Hola probabilidad relacionados con la que está bloqueada entre el trabajo realizado debido tooa olvidado contraseña toohello número de contraseñas diferentes que necesita tooremember.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-106">hello probability that you're blocked from getting your work done due tooa forgotten password is related toohello number of different passwords you need tooremember.</span></span> <span data-ttu-id="a1e8f-107">Hola más contraseñas necesita tooremember, Hola superior Hola probabilidad tooforget uno.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-107">hello more passwords you need tooremember, hello higher hello probability tooforget one.</span></span> <span data-ttu-id="a1e8f-108">Preguntas y llamadas sobre los restablecimientos de contraseña y otras petición problemas relacionados con la contraseña Hola mayoría de los recursos de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-108">Questions and calls about password resets and other password-related issues demand hello most helpdesk resources.</span></span>

<span data-ttu-id="a1e8f-109">Sincronización de contraseñas es que una característica usa contraseñas de usuario de toosynchronize desde una instancia de tooa basada en la nube de Azure AD de instancia de Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-109">Password synchronization is a feature used toosynchronize user passwords from an on-premises Active Directory instance tooa cloud-based Azure AD instance.</span></span>
<span data-ttu-id="a1e8f-110">Utilice esta característica toosign en servicios de tooAzure AD como Office 365, Microsoft Intune, CRM Online y Azure Active Directory Domain Services (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-110">Use this feature toosign in tooAzure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="a1e8f-111">Iniciar sesión en el servicio de toohello mediante el uso de hello misma contraseña que usa toosign en tooyour local instancia de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-111">You sign in toohello service by using hello same password you use toosign in tooyour on-premises Active Directory instance.</span></span>

![Qué es Azure AD Connect](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="a1e8f-113">Al reducir el número de Hola de contraseñas, los usuarios necesitan toojust toomaintain uno.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-113">By reducing hello number of passwords, your users need toomaintain toojust one.</span></span> <span data-ttu-id="a1e8f-114">La sincronización de contraseña le ayuda a:</span><span class="sxs-lookup"><span data-stu-id="a1e8f-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="a1e8f-115">Mejorar la productividad de Hola de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-115">Improve hello productivity of your users.</span></span>
* <span data-ttu-id="a1e8f-116">Reducir los costos de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="a1e8f-117">Además, si decide toouse [federación con los servicios de federación de Active Directory (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), opcionalmente puede configurar la sincronización de contraseña como una copia de seguridad en caso de que se produce un error en la infraestructura de AD FS.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-117">Also, if you decide toouse [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="a1e8f-118">Sincronización de contraseñas es una característica de sincronización de directorio de extensión toohello implementada por la sincronización de Azure AD Connect. sincronización de contraseña de toouse en su entorno, debe:</span><span class="sxs-lookup"><span data-stu-id="a1e8f-118">Password synchronization is an extension toohello directory synchronization feature implemented by Azure AD Connect sync. toouse password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="a1e8f-119">Instalar Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-119">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="a1e8f-120">Configure la sincronización de directorios entre su instancia de Active Directory local y la de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-120">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="a1e8f-121">Habilitar la sincronización de contraseña.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-121">Enable password synchronization.</span></span>

<span data-ttu-id="a1e8f-122">Para más información, consulte [Integración de las identidades locales con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-122">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a1e8f-123">Para obtener más información sobre Azure Active Directory Domain Services configurado para la sincronización de contraseña y FIPS, vea "Sincronización de contraseñas y FIPS" más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-123">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="a1e8f-124">Funcionamiento de la sincronización de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-124">How password synchronization works</span></span>
<span data-ttu-id="a1e8f-125">Hola servicios de dominio de Active Directory almacena contraseñas en forma de Hola de una representación del valor de hash de contraseña de usuario real de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-125">hello Active Directory domain service stores passwords in hello form of a hash value representation of hello actual user password.</span></span> <span data-ttu-id="a1e8f-126">Un valor hash es el resultado de una función matemática unívoca (hello *algoritmo hash*).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-126">A hash value is a result of a one-way mathematical function (hello *hashing algorithm*).</span></span> <span data-ttu-id="a1e8f-127">No hay ningún método toorevert Hola dar lugar a una versión de texto sin formato toohello función unidireccional de una contraseña.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-127">There is no method toorevert hello result of a one-way function toohello plain text version of a password.</span></span> <span data-ttu-id="a1e8f-128">No puede usar un toosign de hash de contraseña de red de tooyour local.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-128">You cannot use a password hash toosign in tooyour on-premises network.</span></span>

<span data-ttu-id="a1e8f-129">toosynchronize su contraseña, Azure AD Connect sync extrae el hash de contraseña de Hola instancia local de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-129">toosynchronize your password, Azure AD Connect sync extracts your password hash from hello on-premises Active Directory instance.</span></span> <span data-ttu-id="a1e8f-130">Se aplica un procesamiento adicional de seguridad toohello hash de contraseña antes de que sincroniza toohello servicio de autenticación de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-130">Extra security processing is applied toohello password hash before it is synchronized toohello Azure Active Directory authentication service.</span></span> <span data-ttu-id="a1e8f-131">Las contraseñas se sincronizan usuario por usuario y en orden cronológico.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-131">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="a1e8f-132">flujo de datos real de Hello del proceso de sincronización de contraseña de hello es similar toohello sincronización de datos de usuario como nombre para mostrar o direcciones de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-132">hello actual data flow of hello password synchronization process is similar toohello synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="a1e8f-133">Sin embargo, las contraseñas se sincronizan con mayor frecuencia que la ventana de sincronización de directorios estándar de hello para otros atributos.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-133">However, passwords are synchronized more frequently than hello standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="a1e8f-134">proceso de sincronización de contraseña de Hola se ejecuta cada 2 minutos.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-134">hello password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="a1e8f-135">No se puede modificar la frecuencia de Hola de este proceso.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-135">You cannot modify hello frequency of this process.</span></span> <span data-ttu-id="a1e8f-136">Al sincronizar una contraseña, sobrescribe contraseña de hello existente en la nube.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-136">When you synchronize a password, it overwrites hello existing cloud password.</span></span>

<span data-ttu-id="a1e8f-137">Hello primera vez que habilite la característica de sincronización de contraseña de hello, realiza una sincronización inicial de las contraseñas de Hola de todos los usuarios en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-137">hello first time you enable hello password synchronization feature, it performs an initial synchronization of hello passwords of all in-scope users.</span></span> <span data-ttu-id="a1e8f-138">No se puede definir explícitamente un subconjunto de las contraseñas de usuario que desea toosynchronize.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-138">You cannot explicitly define a subset of user passwords that you want toosynchronize.</span></span>

<span data-ttu-id="a1e8f-139">Cuando se cambia una contraseña local, Hola actualizado contraseña se sincroniza, con mayor frecuencia en cuestión de minutos.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-139">When you change an on-premises password, hello updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="a1e8f-140">característica de sincronización de contraseña de Hello automáticamente reintenta la sincronización errónea.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-140">hello password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="a1e8f-141">Si produce un error durante un intento de toosynchronize una contraseña, se registra un error en el Visor de eventos.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-141">If an error occurs during an attempt toosynchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="a1e8f-142">sincronización de Hola de una contraseña no influye en usuario de Hola que actualmente ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-142">hello synchronization of a password has no impact on hello user  who is currently signed in.</span></span>
<span data-ttu-id="a1e8f-143">La sesión actual del servicio de nube no está afectada inmediatamente por un cambio de contraseña sincronizada que tiene lugar mientras se firman tooa del servicio en nube.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-143">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in tooa cloud service.</span></span> <span data-ttu-id="a1e8f-144">Sin embargo, al servicio en la nube Hola requiere que tooauthenticate nuevo, deberá tooprovide la nueva contraseña.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-144">However, when hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

<span data-ttu-id="a1e8f-145">Un usuario debe introducir sus credenciales corporativos un segundo tooAzure de tooauthenticate tiempo AD, independientemente de si has iniciado sesión en la red corporativa de tootheir.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-145">A user must enter their corporate credentials a second time tooauthenticate tooAzure AD, regardless of whether they're signed in tootheir corporate network.</span></span> <span data-ttu-id="a1e8f-146">Puede minimizar estos patrón, sin embargo, si el usuario de hello selecciona Hola tenga iniciada en la casilla de verificación (KMSI) en Inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-146">These pattern can be minimized, however, if hello user selects hello Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="a1e8f-147">Con esta activación se establece una cookie de sesión que omite la autenticación durante un breve período.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-147">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="a1e8f-148">Comportamiento KMSI se puede habilitar o deshabilitar Administrador de Azure AD Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-148">KMSI behavior can be enabled or disabled by hello Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="a1e8f-149">Solo se admite la sincronización de contraseñas de usuario de tipo de objeto de hello en Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-149">Password sync is only supported for hello object type user in Active Directory.</span></span> <span data-ttu-id="a1e8f-150">No se admite para el tipo de objeto iNetOrgPerson Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-150">It is not supported for hello iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="a1e8f-151">Descripción detallada de cómo funciona la sincronización de contraseña</span><span class="sxs-lookup"><span data-stu-id="a1e8f-151">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="a1e8f-152">Hola a continuación describe detallada cómo funciona la sincronización de contraseña entre Active Directory y Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-152">hello following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Flujo detallado de contraseñas](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="a1e8f-154">Cada dos minutos, agente de sincronización de contraseña de hello en servidor de hello AD Connect solicita hashes de contraseña almacenada (atributo de unicodePwd Hola) desde un controlador de dominio a través de hello estándar [MS-drsr a](https://msdn.microsoft.com/library/cc228086.aspx) protocolo de replicación utiliza datos toosynchronize entre los controladores de dominio.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-154">Every two minutes, hello password synchronization agent on hello AD Connect server requests stored password hashes (hello unicodePwd attribute) from a DC via hello standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used toosynchronize data between DCs.</span></span> <span data-ttu-id="a1e8f-155">cuenta de servicio de Hello debe tener replicar cambios de directorio y replicar Directory cambios, todos AD hashes de contraseña de Hola de tooobtain permisos (se conceden de manera predeterminada en la instalación).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-155">hello service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) tooobtain hello password hashes.</span></span>
2. <span data-ttu-id="a1e8f-156">Antes de enviar, Hola DC cifra hash de contraseña de hello MD4 mediante una clave que es un [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash de clave de sesión RPC de Hola y un valor "salt".</span><span class="sxs-lookup"><span data-stu-id="a1e8f-156">Before sending, hello DC encrypts hello MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of hello RPC session key and a salt.</span></span> <span data-ttu-id="a1e8f-157">A continuación, envía a agente de sincronización de contraseña de hello resultado toohello a través de RPC.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-157">It then sends hello result toohello password synchronization agent over RPC.</span></span> <span data-ttu-id="a1e8f-158">Hola DC también pasa a agente de sincronización de hello toohello "salt" con el protocolo de replicación de Hola DC, por lo que el agente de hello será toodecrypt capaz de sobres de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-158">hello DC also passes hello salt toohello synchronization agent by using hello DC replication protocol, so hello agent will be able toodecrypt hello envelope.</span></span>
3.  <span data-ttu-id="a1e8f-159">Después de agente de sincronización de contraseña de hello tiene sobre codificado hello, usa [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) y Hola toogenerate "salt" formato original MD4 en toodecrypt clave Hola recibido datos tooits atrás.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-159">After hello password synchronization agent has hello encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and hello salt toogenerate a key toodecrypt hello received data back tooits original MD4 format.</span></span> <span data-ttu-id="a1e8f-160">En ningún momento tiene agente de sincronización de contraseña de hello acceso toohello contraseña sin cifrado.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-160">At no point does hello password synchronization agent have access toohello clear text password.</span></span> <span data-ttu-id="a1e8f-161">Hello uso del agente de sincronización de contraseña de MD5 es estrictamente para la compatibilidad de protocolo de replicación con hello DC, y solo se utiliza de forma local entre Hola DC y agente de sincronización de contraseña de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-161">hello password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with hello DC, and it is only used on premises between hello DC and hello password synchronization agent.</span></span>
4.  <span data-ttu-id="a1e8f-162">agente de sincronización de contraseña de Hello amplía bytes de too64 de hash de contraseña binarios de 16 bytes de hello al primer convertir Hola hash tooa 32 bytes cadena hexadecimal, a continuación, convertir esta cadena de nuevo en binario con codificación UTF-16.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-162">hello password synchronization agent expands hello 16-byte binary password hash too64 bytes by first converting hello hash tooa 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="a1e8f-163">agente de sincronización de contraseña de Hello agrega un valor "salt", que consta de un valor "salt" longitud de 10 bytes, toofurther binario de 64 bits de toohello proteger hash original Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-163">hello password synchronization agent adds a salt, consisting of a 10-byte length salt, toohello 64-byte binary toofurther protect hello original hash.</span></span>
6.  <span data-ttu-id="a1e8f-164">agente de sincronización de contraseña de Hello, a continuación, combina hash MD4 hello más valor "salt" e introduce en hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) función.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-164">hello password synchronization agent then combines hello MD4 hash plus salt, and inputs it into hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="a1e8f-165">1000 iteraciones de hello [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) se utiliza el algoritmo hash con clave.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-165">1000 iterations of hello [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="a1e8f-166">agente de sincronización de contraseña de Hello toma el hash de 32 bytes resultante hello, concatena dos valor "salt" Hola y Hola número de SHA256 iteraciones tooit (para su uso con Azure AD) y transmite la cadena Hola de Azure AD Connect tooAzure AD a través de SSL.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-166">hello password synchronization agent takes hello resulting 32-byte hash, concatenates both hello salt and hello number of SHA256 iterations tooit (for use by Azure AD), then transmits hello string from Azure AD Connect tooAzure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="a1e8f-167">Cuando un usuario intenta toosign en tooAzure AD y escribe su contraseña, una contraseña de Hola se ejecutan a través de hello MD4 mismo + "salt" + PBKDF2 + HMAC-SHA256 proceso.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-167">When a user attempts toosign in tooAzure AD and enters their password, hello password is run through hello same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="a1e8f-168">Si hash resultante Hola coincide con hash Hola almacenada en Azure AD, usuario Hola especificó la contraseña correcta de Hola y se autentica.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-168">If hello resulting hash matches hello hash stored in Azure AD, hello user has entered hello correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="a1e8f-169">algoritmo hash MD4 original de Hello no es tooAzure transmitido AD.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-169">hello original MD4 hash is not transmitted tooAzure AD.</span></span> <span data-ttu-id="a1e8f-170">En su lugar, se transmite Hola hash SHA256 del algoritmo hash MD4 original Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-170">Instead, hello SHA256 hash of hello original MD4 hash is transmitted.</span></span> <span data-ttu-id="a1e8f-171">Como resultado, si se obtiene el hash de hello almacenada en Azure AD, no se pueden utilizar en un ataque de pass-the-hash en local.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-171">As a result, if hello hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="a1e8f-172">Funcionamiento de la sincronización de contraseñas con Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="a1e8f-172">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="a1e8f-173">También puede utilizar toosynchronize de característica de sincronización de contraseña de hello las contraseñas locales demasiado[servicios de dominio de Active Directory de Azure](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-173">You can also use hello password synchronization feature toosynchronize your on-premises passwords too[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="a1e8f-174">En este escenario, instancia de servicios de dominio de Active Directory de Azure Hola autentica los usuarios en la nube de hello con todos los métodos de hello disponibles en la instancia local de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-174">In this scenario, hello Azure Active Directory Domain Services instance authenticates your users in hello cloud with all hello methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="a1e8f-175">experiencia de Hola de este escenario es similar hello toousing herramienta de migración de Active Directory (ADMT) en un entorno local.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-175">hello experience of this scenario is similar toousing hello Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="a1e8f-176">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="a1e8f-176">Security considerations</span></span>
<span data-ttu-id="a1e8f-177">Al sincronizar contraseñas, versión de texto sin formato de saludo de la contraseña no es característica de sincronización de contraseña toohello expuesto, tooAzure AD o cualquiera de los servicios de hello asociado.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-177">When synchronizing passwords, hello plain-text version of your password is not exposed toohello password synchronization feature, tooAzure AD, or any of hello associated services.</span></span>

<span data-ttu-id="a1e8f-178">Autenticación de usuario tiene lugar en Azure AD, en lugar de en la instancia de Active Directory de la organización de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-178">User authentication takes place against Azure AD rather than against hello organization's own Active Directory instance.</span></span> <span data-ttu-id="a1e8f-179">Si su organización tiene preocupaciones sobre datos de contraseña en cualquier formato dejando Hola local, tenga en cuenta hechos Hola ese Hola SHA256 datos de contraseñas almacenados en Azure AD--un hash del algoritmo hash MD4 original Hola--es mucho más segura que el contenido almacenado en Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-179">If your organization has concerns about password data in any form leaving hello premises, consider hello fact that hello SHA256 password data stored in Azure AD--a hash of hello original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="a1e8f-180">Además, porque no se puede descifrar este hash SHA256, no se vuelve al entorno de Active Directory de la organización toohello y presenta como una contraseña de usuario válido en un ataque pass-the-hash.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-180">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back toohello organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="a1e8f-181">Consideraciones de la directiva de contraseña</span><span class="sxs-lookup"><span data-stu-id="a1e8f-181">Password policy considerations</span></span>
<span data-ttu-id="a1e8f-182">Existen dos tipos de directivas de contraseña que se ven afectados por la habilitación de la sincronización de contraseñas:</span><span class="sxs-lookup"><span data-stu-id="a1e8f-182">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="a1e8f-183">Directiva de complejidad de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-183">Password complexity policy</span></span>
* <span data-ttu-id="a1e8f-184">Directiva de expiración de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-184">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="a1e8f-185">Directiva de complejidad de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-185">Password complexity policy</span></span>  
<span data-ttu-id="a1e8f-186">Cuando se habilita la sincronización de contraseña, directivas de complejidad de contraseña de hello en la instancia de Active Directory local anulan las directivas de complejidad en la nube de Hola para los usuarios sincronizados.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-186">When password synchronization is enabled, hello password complexity policies in your on-premises Active Directory instance override complexity policies in hello cloud for synchronized users.</span></span> <span data-ttu-id="a1e8f-187">Puede usar todas Hola válido contraseñas de la instancia de Active Directory local tooaccess servicios de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-187">You can use all of hello valid passwords from your on-premises Active Directory instance tooaccess Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="a1e8f-188">Las contraseñas para los usuarios que se crean directamente en la nube de hello siguen siendo tal como se define en la nube de hello las directivas de toopassword de asunto.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-188">Passwords for users that are created directly in hello cloud are still subject toopassword policies as defined in hello cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="a1e8f-189">Directiva de expiración de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-189">Password expiration policy</span></span>  
<span data-ttu-id="a1e8f-190">Si un usuario está en ámbito de Hola de sincronización de contraseña, la contraseña de la cuenta de hello en la nube se establece demasiado*no Expire nunca*.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-190">If a user is in hello scope of password synchronization, hello cloud account password is set too*Never Expire*.</span></span>

<span data-ttu-id="a1e8f-191">Puede continuar toosign en servicios en la nube tooyour mediante una contraseña sincronizada que ha expirado en su entorno local.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-191">You can continue toosign in tooyour cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="a1e8f-192">Se actualiza la contraseña en la nube Hola la próxima vez que cambia la contraseña de hello en entorno local de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-192">Your cloud password is updated hello next time you change hello password in hello on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="a1e8f-193">Expiración de la cuenta</span><span class="sxs-lookup"><span data-stu-id="a1e8f-193">Account expiration</span></span>
<span data-ttu-id="a1e8f-194">Si su organización usa el atributo de hello accountExpires como parte de la administración de cuentas de usuario, tenga en cuenta que este atributo no está sincronizada tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-194">If your organization uses hello accountExpires attribute as part of user account management, be aware that this attribute is not synchronized tooAzure AD.</span></span> <span data-ttu-id="a1e8f-195">Por consiguiente, una cuenta de Active Directory expirada en un entorno configurado para la sincronización de contraseña seguirá activa en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-195">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="a1e8f-196">Se recomienda que, si la cuenta de hello ha expirado, una acción de flujo de trabajo debe desencadenar un script de PowerShell que deshabilita la cuenta de Azure AD del usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-196">We recommend that if hello account is expired, a workflow action should trigger a PowerShell script that disables hello user's Azure AD account.</span></span> <span data-ttu-id="a1e8f-197">Por el contrario, cuando se activa la cuenta de hello, instancia de Azure AD Hola debe estar activado.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-197">Conversely, when hello account is turned on, hello Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="a1e8f-198">Sobrescritura de las contraseñas sincronizadas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-198">Overwrite synchronized passwords</span></span>
<span data-ttu-id="a1e8f-199">Un administrador puede restablecer manualmente la contraseña mediante Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-199">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="a1e8f-200">En este caso, nueva contraseña de hello invalida su contraseña sincronizada, y todas las directivas de contraseñas definidas en la nube de hello son aplicados toohello nueva contraseña.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-200">In this case, hello new password overrides your synchronized password, and all password policies defined in hello cloud are applied toohello new password.</span></span>

<span data-ttu-id="a1e8f-201">Si cambia la contraseña local nuevo, Hola nueva contraseña es sincronizado toohello en la nube, y reemplaza contraseña Hola actualizado manualmente.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-201">If you change your on-premises password again, hello new password is synchronized toohello cloud, and it overrides hello manually updated password.</span></span>

<span data-ttu-id="a1e8f-202">sincronización de Hola de una contraseña no influye en hello Azure usuario que ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-202">hello synchronization of a password has no impact on hello Azure user who is signed in.</span></span> <span data-ttu-id="a1e8f-203">La sesión actual del servicio de nube no está afectada inmediatamente por un cambio de contraseña sincronizada que tiene lugar mientras ha iniciado sesión en el servicio en la nube tooa.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-203">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in tooa cloud service.</span></span> <span data-ttu-id="a1e8f-204">KMSI amplía esta diferencia de tiempo que dure Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-204">KMSI extends hello duration of this difference.</span></span> <span data-ttu-id="a1e8f-205">Al servicio en la nube Hola requiere que tooauthenticate nuevo, deberá tooprovide la nueva contraseña.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-205">When hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="a1e8f-206">Ventajas adicionales</span><span class="sxs-lookup"><span data-stu-id="a1e8f-206">Additional advantages</span></span>

- <span data-ttu-id="a1e8f-207">Por lo general, la sincronización de contraseña es más sencillo tooimplement que un servicio de federación.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-207">Generally, password synchronization is simpler tooimplement than a federation service.</span></span> <span data-ttu-id="a1e8f-208">No requiere ningún servidor adicionales y elimina la dependencia de a los usuarios tooauthenticate de servicio de federación de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-208">It doesn't require any additional servers, and eliminates dependence on a highly available federation service tooauthenticate users.</span></span> 
- <span data-ttu-id="a1e8f-209">Sincronización de contraseña también puede habilitarse en toofederation de adición.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-209">Password synchronization can also be enabled in addition toofederation.</span></span> <span data-ttu-id="a1e8f-210">Puede usarse como reserva en caso de que el servicio de federación experimente una interrupción del servicio.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-210">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="a1e8f-211">Habilitación de la sincronización de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-211">Enable password synchronization</span></span>
<span data-ttu-id="a1e8f-212">Cuando se instala Azure AD Connect con hello **configuración rápida** opción, la sincronización de contraseña se habilita automáticamente.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-212">When you install Azure AD Connect by using hello **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="a1e8f-213">Para conocer más detalles, consulte [Introducción a Azure AD Connect mediante la configuración rápida](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-213">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="a1e8f-214">Si utiliza una configuración personalizada al instalar Azure AD Connect, sincronización de contraseñas está disponible en la página de inicio de sesión de usuario de Hola.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-214">If you use custom settings when you install Azure AD Connect, password synchronization is available on hello user sign-in page.</span></span> <span data-ttu-id="a1e8f-215">Para más información, consulte [Instalación personalizada de Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-215">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Habilitación de la sincronización de contraseñas](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="a1e8f-217">Sincronización de contraseñas y FIPS</span><span class="sxs-lookup"><span data-stu-id="a1e8f-217">Password synchronization and FIPS</span></span>
<span data-ttu-id="a1e8f-218">Si el servidor se ha bloqueado según tooFederal Information Processing Standard (FIPS), se deshabilita MD5.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-218">If your server has been locked down according tooFederal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="a1e8f-219">**tooenable MD5 para la sincronización de contraseña, lleve a cabo Hola pasos:**</span><span class="sxs-lookup"><span data-stu-id="a1e8f-219">**tooenable MD5 for password synchronization, perform hello following steps:**</span></span>

1. <span data-ttu-id="a1e8f-220">Vaya too%programfiles%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-220">Go too%programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="a1e8f-221">Abra miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-221">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="a1e8f-222">Vaya toohello configuration/runtime nodo final Hola del archivo hello.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-222">Go toohello configuration/runtime node at hello end of hello file.</span></span>
4. <span data-ttu-id="a1e8f-223">Agregue Hola siguiente nodo:`<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="a1e8f-223">Add hello following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="a1e8f-224">Guarde los cambios.</span><span class="sxs-lookup"><span data-stu-id="a1e8f-224">Save your changes.</span></span>

<span data-ttu-id="a1e8f-225">Como referencia, este fragmento de código debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="a1e8f-225">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="a1e8f-226">Para obtener información sobre la seguridad y FIPS, vea [AAD Password Sync, Encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/) (Cumplimiento de sincronización de contraseña, cifrado y FIPS AAD).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-226">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="a1e8f-227">Solución de problemas de sincronización de contraseñas</span><span class="sxs-lookup"><span data-stu-id="a1e8f-227">Troubleshoot password synchronization</span></span>
<span data-ttu-id="a1e8f-228">Si tiene problemas con la sincronización de contraseña, vea [Solución de problemas de sincronización de contraseñas](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="a1e8f-228">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a1e8f-229">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a1e8f-229">Next steps</span></span>
* [<span data-ttu-id="a1e8f-230">Sincronización de Azure AD Connect: personalización de las opciones de sincronización</span><span class="sxs-lookup"><span data-stu-id="a1e8f-230">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="a1e8f-231">Integración de las identidades locales con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1e8f-231">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

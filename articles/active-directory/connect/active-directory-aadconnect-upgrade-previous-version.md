---
title: "Azure AD Connect: actualización desde una versión anterior | Microsoft Docs"
description: "Explica Hola distintos métodos tooupgrade toohello versión más reciente de Azure Active Directory Connect, incluida una actualización en contexto y una migración de recorrido."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="02617-103">Azure AD Connect: La actualización desde un toohello versión anterior más reciente</span><span class="sxs-lookup"><span data-stu-id="02617-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="02617-104">Este tema describe los distintos métodos de Hola que puede usar tooupgrade la versión más reciente de Connect de Azure Active Directory (Azure AD) instalación toohello.</span><span class="sxs-lookup"><span data-stu-id="02617-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="02617-105">Se recomienda que mantenga usted mismo actual con las versiones de Hola de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="02617-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="02617-106">También utilizar pasos Hola Hola [Swing migración](#swing-migration) sección al cambiar una configuración considerable.</span><span class="sxs-lookup"><span data-stu-id="02617-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="02617-107">Si desea tooupgrade de DirSync, consulte [actualizar desde la herramienta de sincronización de Azure AD (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="02617-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="02617-108">Hay algunas estrategias diferentes que puede usar tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="02617-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="02617-109">Método</span><span class="sxs-lookup"><span data-stu-id="02617-109">Method</span></span> | <span data-ttu-id="02617-110">Description</span><span class="sxs-lookup"><span data-stu-id="02617-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="02617-111">Actualización automática</span><span class="sxs-lookup"><span data-stu-id="02617-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="02617-112">Se trata de un método más sencillo de Hola para clientes con una instalación rápida.</span><span class="sxs-lookup"><span data-stu-id="02617-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="02617-113">Actualización local</span><span class="sxs-lookup"><span data-stu-id="02617-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="02617-114">Si tiene un solo servidor, puede actualizar la instalación hello en contexto en Hola el mismo servidor.</span><span class="sxs-lookup"><span data-stu-id="02617-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="02617-115">Migración oscilante</span><span class="sxs-lookup"><span data-stu-id="02617-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="02617-116">Con dos servidores, puede preparar uno de los servidores de hello con la nueva versión de Hola o la configuración y cambiar el servidor activo de hello cuando esté listo.</span><span class="sxs-lookup"><span data-stu-id="02617-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="02617-117">Para obtener información de permisos, vea hello [permisos necesarios para realizar una actualización](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="02617-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="02617-118">Después de habilitar el nuevo Azure AD Connect server toostart sincronizar cambios tooAzure AD, debe volver a la versión toousing DirSync o sincronización de Azure AD. Degradar de Azure AD Connect toolegacy los clientes, incluidos DirSync y Azure AD Sync, no se admite y puede provocar tooissues, como la pérdida de datos en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="02617-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="02617-119">Actualización local</span><span class="sxs-lookup"><span data-stu-id="02617-119">In-place upgrade</span></span>
<span data-ttu-id="02617-120">Una actualización local sirve para migrar de Azure AD Sync o Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="02617-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="02617-121">No sirve para mover de DirSync ni para una solución con Forefront Identity Manager (FIM) + Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="02617-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="02617-122">Este método es adecuado cuando tiene un único servidor y menos de unos 100 000 objetos.</span><span class="sxs-lookup"><span data-stu-id="02617-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="02617-123">Si hay algún cambio en las reglas de sincronización de out-of-box toohello, una importación completa y la sincronización completa se producen después de la actualización de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="02617-124">Este método garantiza que esa configuración hello es tooall aplicado los objetos existentes en el sistema de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="02617-125">Esta ejecución puede tardar unas horas, según el número Hola de objetos que están en el ámbito del motor de sincronización de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="02617-126">se suspende el programador de sincronización delta normal de Hello (que se sincroniza cada 30 minutos de forma predeterminada), pero continúa la sincronización de contraseña.</span><span class="sxs-lookup"><span data-stu-id="02617-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="02617-127">Considere la posibilidad de realizar la actualización en contexto de Hola durante un fin de semana.</span><span class="sxs-lookup"><span data-stu-id="02617-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="02617-128">Si no hay ninguna configuración de out-of-box toohello cambios con la versión de Hola nuevo Azure AD Connect, a continuación, una normal importación/sincronización diferencial se inicia en su lugar.</span><span class="sxs-lookup"><span data-stu-id="02617-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Actualización local](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="02617-130">Si ha realizado cambios toohello out-of-box sincronización reglas, a continuación, estas reglas se establecen volver toohello configuración predeterminada al actualizar.</span><span class="sxs-lookup"><span data-stu-id="02617-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="02617-131">toomake seguro de que la configuración se mantiene entre las actualizaciones, asegúrese de que se realice los cambios que se describen en [las prácticas recomendadas para cambiar la configuración predeterminada de hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="02617-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="02617-132">Durante la actualización en contexto, puede haber cambios introducidos que requieren sincronización específica actividades (incluidos los pasos de la importación completa y sincronización completa) toobe ejecutado una vez completada la actualización.</span><span class="sxs-lookup"><span data-stu-id="02617-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="02617-133">toodefer tales actividades, consulte toosection [cómo toodefer completa sincronización después de la actualización](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="02617-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="02617-134">Migración oscilante</span><span class="sxs-lookup"><span data-stu-id="02617-134">Swing migration</span></span>
<span data-ttu-id="02617-135">Si tiene una implementación compleja o muchos objetos, puede que sea práctico toodo una actualización en contexto en los sistemas en vivo de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="02617-136">En el caso de algunos clientes, este proceso podría tardar varios días y durante este tiempo no se procesará ningún cambio delta.</span><span class="sxs-lookup"><span data-stu-id="02617-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="02617-137">También puede usar este método si tiene previsto instalar toomake cambios sustanciales tooyour configuración y desea tootry desprotegerlos antes de que están insertados en la nube toohello.</span><span class="sxs-lookup"><span data-stu-id="02617-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="02617-138">Hola recomendada método para estos escenarios es toouse una recorrido de la migración.</span><span class="sxs-lookup"><span data-stu-id="02617-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="02617-139">Se necesitan (al menos) dos servidores, uno activo y otro provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="02617-140">servidor activo Hello (que se muestra con líneas azules sólidas Hola después de imagen) es responsable de la carga de producción activo de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="02617-141">Hola (se muestra con las líneas discontinuas de color púrpuras) del servidor de ensayo está preparado con la nueva versión de Hola o configuración.</span><span class="sxs-lookup"><span data-stu-id="02617-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="02617-142">Cuando esté totalmente preparado, se activa el servidor.</span><span class="sxs-lookup"><span data-stu-id="02617-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="02617-143">Hola anterior servidor activo, que ahora tiene una versión antigua Hola o una configuración instalado, se convierte en el servidor de almacenamiento provisional de Hola y se actualiza.</span><span class="sxs-lookup"><span data-stu-id="02617-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="02617-144">dos servidores de Hello pueden usar distintas versiones.</span><span class="sxs-lookup"><span data-stu-id="02617-144">hello two servers can use different versions.</span></span> <span data-ttu-id="02617-145">Por ejemplo, servidor activo de Hola que planea toodecommission puede utilizar Azure AD Sync y servidor de ensayo nueva Hola puede usar Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="02617-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="02617-146">Si usas swing migración toodevelop una nueva configuración, es una buena idea toohave Hola mismas versiones en Hola dos servidores.</span><span class="sxs-lookup"><span data-stu-id="02617-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Servidor provisional](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="02617-148">Algunos clientes prefieren toohave tres o cuatro servidores para este escenario.</span><span class="sxs-lookup"><span data-stu-id="02617-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="02617-149">Cuando se actualiza el servidor de almacenamiento provisional de hello, no tiene un servidor de copia de seguridad para [recuperación ante desastres](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="02617-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="02617-150">Con tres o cuatro servidores, puede preparar un conjunto de servidores primario/en espera con la versión nueva de hello, que garantiza que siempre es un servidor de ensayo que se tootake listo en.</span><span class="sxs-lookup"><span data-stu-id="02617-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="02617-151">Estos pasos también funcionan toomove de sincronización de Azure AD o una solución con FIM + conector de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="02617-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="02617-152">Estos pasos no funcionan para la sincronización de directorios, pero Hola mismo swing método de migración (también denominado implementación paralela) con los pasos para la sincronización de directorios está en [sincronización actualizar Azure Active Directory (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="02617-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="02617-153">Usar un tooupgrade de recorrido de la migración</span><span class="sxs-lookup"><span data-stu-id="02617-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="02617-154">Si utiliza Azure AD Connect en servidores y asegúrese de plan tooonly un cambio de configuración, asegúrese de que el servidor activo y el servidor de ensayo son utilizando Hola la misma versión.</span><span class="sxs-lookup"><span data-stu-id="02617-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="02617-155">Hace más fáciles diferencias toocompare más tarde.</span><span class="sxs-lookup"><span data-stu-id="02617-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="02617-156">Si va a realizar la actualización desde Sincronización de Azure AD, los servidores tienen versiones diferentes.</span><span class="sxs-lookup"><span data-stu-id="02617-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="02617-157">Si está actualizando desde una versión anterior de Azure AD Connect, es un toostart buena idea con servidores de hello dos que están usando Hola la misma versión, pero no es necesario.</span><span class="sxs-lookup"><span data-stu-id="02617-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="02617-158">Si ha realizado una configuración personalizada y el servidor de almacenamiento provisional no tiene, siga los pasos de hello en [mover una configuración personalizada de hello active server toohello servidor de ensayo](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="02617-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="02617-159">Si está actualizando desde una versión anterior de Azure AD Connect, actualizar hello toohello última versión de servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="02617-160">Si va a migrar desde Sincronización de Azure AD, instale Azure AD Connect en el servidor provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="02617-161">Permiten importación completa de ejecutar el motor de sincronización de Hola y sincronización completa en el servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="02617-162">Comprobar que la configuración nueva de hello no provoca cambios inesperados siguiendo los pasos de hello en "Comprobar" en [Compruebe la configuración de un servidor hello](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="02617-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="02617-163">Si algo no funciona como se esperaba, correcto, Ejecutar importación de Hola y de sincronización y compruebe datos Hola hasta que tenga un aspecto atractivo, siguiendo los pasos de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="02617-164">Cambiar hello toobe Hola active servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="02617-165">Esto es Hola último paso "Servidor activo de conmutador" en [Compruebe la configuración de un servidor hello](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="02617-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="02617-166">Si va a actualizar Azure AD Connect, actualice el servidor de Hola que ahora está en almacenamiento provisional versión más reciente de modo toohello.</span><span class="sxs-lookup"><span data-stu-id="02617-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="02617-167">Siga Hola mismo pasos como antes tooget datos de Hola y configuración actualizado.</span><span class="sxs-lookup"><span data-stu-id="02617-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="02617-168">Si va a actualizar desde Azure AD Sync, puede desactivar y retirar el servidor anterior.</span><span class="sxs-lookup"><span data-stu-id="02617-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="02617-169">Mover una configuración personalizada de servidor de ensayo toohello Hola servidor activo</span><span class="sxs-lookup"><span data-stu-id="02617-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="02617-170">Si ha realizado el servidor activo de toohello de cambios de configuración, deberá toomake seguro que Hola mismo cambios son aplicado toohello servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="02617-171">mover toohelp con esto, puede usar hello [Documentador de configuración de Azure AD Connect](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="02617-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="02617-172">Puede mover la sincronización personalizada hello las reglas que ha creado mediante el uso de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="02617-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="02617-173">Debe aplicar otra Hola cambios igual en los sistemas y no puede migrar cambios Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="02617-174">Hola [Documentador configuración](https://github.com/Microsoft/AADConnectConfigDocumenter) puede ayudarle a comparar Hola dos sistemas toomake seguro son idénticas.</span><span class="sxs-lookup"><span data-stu-id="02617-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="02617-175">herramienta de Hello también puede ayudar a automatizar algunos pasos hello en esta sección.</span><span class="sxs-lookup"><span data-stu-id="02617-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="02617-176">Necesita tooconfigure Hola siguiente cosas Hola misma forma en ambos servidores:</span><span class="sxs-lookup"><span data-stu-id="02617-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="02617-177">Conexión toohello mismo bosques</span><span class="sxs-lookup"><span data-stu-id="02617-177">Connection toohello same forests</span></span>
* <span data-ttu-id="02617-178">Filtrado por dominio y unidad organizativa</span><span class="sxs-lookup"><span data-stu-id="02617-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="02617-179">Hola mismo características opcionales, como la sincronización de contraseñas y la escritura diferida de contraseñas</span><span class="sxs-lookup"><span data-stu-id="02617-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="02617-180">**Movimiento las reglas de sincronización personalizadas**</span><span class="sxs-lookup"><span data-stu-id="02617-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="02617-181">reglas de sincronización personalizadas toomove, Hola siguientes:</span><span class="sxs-lookup"><span data-stu-id="02617-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="02617-182">Abra el **Editor de reglas de sincronización** en el servidor activo.</span><span class="sxs-lookup"><span data-stu-id="02617-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="02617-183">Seleccione una regla personalizada.</span><span class="sxs-lookup"><span data-stu-id="02617-183">Select a custom rule.</span></span> <span data-ttu-id="02617-184">Haga clic en **Exportar**.</span><span class="sxs-lookup"><span data-stu-id="02617-184">Click **Export**.</span></span> <span data-ttu-id="02617-185">Se abre una ventana del Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="02617-185">This brings up a Notepad window.</span></span> <span data-ttu-id="02617-186">Guarde el archivo temporal de hello con una extensión de archivo PS1.</span><span class="sxs-lookup"><span data-stu-id="02617-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="02617-187">Lo convierte en un script de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="02617-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="02617-188">Copie toohello de archivo PS1 Hola servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="02617-189">![Exportación de reglas de sincronización](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="02617-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="02617-190">Hola GUID del conector es diferente en el servidor de almacenamiento provisional de Hola y debe cambiarlo.</span><span class="sxs-lookup"><span data-stu-id="02617-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="02617-191">iniciar tooget Hola GUID, **Editor de reglas de sincronización**, seleccione una de las reglas de out-of-box Hola ese Hola representan mismo conectado sistema y haga clic en **exportar**.</span><span class="sxs-lookup"><span data-stu-id="02617-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="02617-192">Reemplace Hola GUID en el archivo PS1 por Hola GUID desde el servidor de almacenamiento provisional de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="02617-193">En un símbolo del sistema de PowerShell, ejecute el archivo hello PS1.</span><span class="sxs-lookup"><span data-stu-id="02617-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="02617-194">Esto crea reglas de sincronización personalizadas de hello en hello servidor de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="02617-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="02617-195">Repita esta operación para todas las reglas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="02617-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="02617-196">¿Cómo toodefer completa sincronización después de la actualización</span><span class="sxs-lookup"><span data-stu-id="02617-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="02617-197">Durante la actualización en contexto, puede haber cambios introducidos que requieren sincronización específica actividades (incluidos los pasos de la importación completa y sincronización completa) toobe ejecutado.</span><span class="sxs-lookup"><span data-stu-id="02617-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="02617-198">Por ejemplo, se requieren cambios de esquema de conector **importación completa** requieren cambios de regla de sincronización de paso y out-of-box **sincronización completa** paso toobe que se ejecuta en los conectores afectados.</span><span class="sxs-lookup"><span data-stu-id="02617-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="02617-199">Durante la actualización, Azure AD Connect determina las actividades de sincronización que son necesarias y las registra como *invalidaciones*.</span><span class="sxs-lookup"><span data-stu-id="02617-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="02617-200">En el siguiente ciclo de sincronización de hello, programador de sincronización de hello recoge estas invalidaciones y las ejecuta.</span><span class="sxs-lookup"><span data-stu-id="02617-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="02617-201">Una vez ejecutada correctamente una invalidación, se quita.</span><span class="sxs-lookup"><span data-stu-id="02617-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="02617-202">Puede haber situaciones donde no desee estas invalidaciones tootake lugar inmediatamente después de actualizar.</span><span class="sxs-lookup"><span data-stu-id="02617-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="02617-203">Por ejemplo, tiene numerosos objetos sincronizados y desea que estos toooccur de pasos de sincronización después del horario comercial.</span><span class="sxs-lookup"><span data-stu-id="02617-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="02617-204">tooremove estas invalidaciones:</span><span class="sxs-lookup"><span data-stu-id="02617-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="02617-205">Durante la actualización, **desactive** Hola opción **iniciar el proceso de sincronización de hello cuando finalice la configuración**.</span><span class="sxs-lookup"><span data-stu-id="02617-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="02617-206">Esto deshabilita el programador de sincronización de hello e impide ciclo de sincronización se está produciendo automáticamente antes de que se quitan Hola invalidaciones.</span><span class="sxs-lookup"><span data-stu-id="02617-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="02617-208">Una vez completada la actualización, ejecute hello después toofind cmdlet out qué invalidaciones se han agregado:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="02617-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="02617-209">Hola invalidaciones son específicos del conector.</span><span class="sxs-lookup"><span data-stu-id="02617-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="02617-210">Hola siguiente ejemplo, el paso de importación completa y el paso de sincronización completa se agregaron hello tooboth conector AD local y el conector de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="02617-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="02617-212">Anote las invalidaciones Hola existentes que se han agregado.</span><span class="sxs-lookup"><span data-stu-id="02617-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="02617-213">Hola tooremove invalidaciones para importación completa y sincronización completa en un conector arbitrario, ejecute hello siguiente cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="02617-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="02617-214">invalidaciones de hello tooremove en todos los conectores, ejecute hello siguiente script de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="02617-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="02617-215">Programador de hello tooresume, ejecute hello siguiente cmdlet:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="02617-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="02617-216">Recuerde tooexecute Hola requerido sincronización pasos con la mayor brevedad posible.</span><span class="sxs-lookup"><span data-stu-id="02617-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="02617-217">Manualmente puede ejecutar estos pasos con hello Synchronization Service Manager o agregar invalidaciones Hola nuevo mediante el cmdlet Set-ADSyncSchedulerConnectorOverride de Hola.</span><span class="sxs-lookup"><span data-stu-id="02617-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="02617-218">Hola tooadd invalidaciones para importación completa y sincronización completa en un conector arbitrario, ejecute hello siguiente cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="02617-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="02617-219">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="02617-219">Next steps</span></span>
<span data-ttu-id="02617-220">Más información acerca de la [integración de las identidades locales con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="02617-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

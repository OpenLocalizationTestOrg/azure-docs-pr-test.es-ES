---
title: "Configuración de filtrado de sincronización de Azure AD Connect | Microsoft Docs"
description: "Explica cómo configurar el filtrado en Azure AD Connect Sync."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 880facf6-1192-40e9-8181-544c0759d506
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 064642ebb9cafb0c6e1b3ff306241182a95215cc
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-configure-filtering"></a><span data-ttu-id="8f1f9-103">Azure AD Connect Sync: configuración del filtrado</span><span class="sxs-lookup"><span data-stu-id="8f1f9-103">Azure AD Connect sync: Configure filtering</span></span>
<span data-ttu-id="8f1f9-104">Con el filtrado puede controlar qué objetos aparecen en Azure Active Directory (Azure AD) desde el directorio local.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-104">By using filtering, you can control which objects appear in Azure Active Directory (Azure AD) from your on-premises directory.</span></span> <span data-ttu-id="8f1f9-105">La configuración predeterminada aceptará todos los objetos en todos los dominios de los bosques configurados.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-105">The default configuration takes all objects in all domains in the configured forests.</span></span> <span data-ttu-id="8f1f9-106">Por lo general, esta configuración es la recomendada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-106">In general, this is the recommended configuration.</span></span> <span data-ttu-id="8f1f9-107">Los usuarios con cargas de trabajo de Office 365, como Exchange Online y Skype Empresarial, se benefician de una lista global de direcciones completa para poder enviar correo electrónico y llamar a todos los integrantes.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-107">Users using Office 365 workloads, such as Exchange Online and Skype for Business, benefit from a complete Global Address List so they can send email and call everyone.</span></span> <span data-ttu-id="8f1f9-108">Con la configuración predeterminada, obtendrían la misma experiencia que con una implementación local de Exchange o Lync.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-108">With the default configuration, they would have the same experience that they would have with an on-premises implementation of Exchange or Lync.</span></span>

<span data-ttu-id="8f1f9-109">Sin embargo, en algunos casos se necesitan algunos cambios en la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-109">In some cases however, you're required make some changes to the default configuration.</span></span> <span data-ttu-id="8f1f9-110">Estos son algunos ejemplos:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-110">Here are some examples:</span></span>

* <span data-ttu-id="8f1f9-111">Quiere usar la [topología de varios directorios de Azure AD](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-111">You plan to use the [multi-Azure AD directory topology](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant).</span></span> <span data-ttu-id="8f1f9-112">Después, necesita aplicar un filtro para controlar qué objetos se sincronizan en un directorio determinado de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-112">Then you need to apply a filter to control which objects are synchronized to a particular Azure AD directory.</span></span>
* <span data-ttu-id="8f1f9-113">Va a ejecutar un piloto para Azure u Office 365 y desea solo un subconjunto de usuarios en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-113">You run a pilot for Azure or Office 365 and you only want a subset of users in Azure AD.</span></span> <span data-ttu-id="8f1f9-114">En el pequeño proyecto piloto, no es necesaria una lista global de direcciones completa para demostrar la funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-114">In the small pilot, it's not important to have a complete Global Address List to demonstrate the functionality.</span></span>
* <span data-ttu-id="8f1f9-115">Tiene numerosas cuentas de servicio y otras de carácter no personal que no desea en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-115">You have many service accounts and other nonpersonal accounts that you don't want in Azure AD.</span></span>
* <span data-ttu-id="8f1f9-116">Por motivos de cumplimiento, no elimina ninguna cuenta de usuario local.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-116">For compliance reasons, you don't delete any user accounts on-premises.</span></span> <span data-ttu-id="8f1f9-117">Solo las deshabilita.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-117">You only disable them.</span></span> <span data-ttu-id="8f1f9-118">Pero solo quiere encontrar las cuentas activas en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-118">But in Azure AD, you only want active accounts to be present.</span></span>

<span data-ttu-id="8f1f9-119">En este artículo, se trata cómo configurar los distintos métodos de filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-119">This article covers how to configure the different filtering methods.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8f1f9-120">Microsoft no admite la modificación ni el funcionamiento de la sincronización de Azure AD Connect con acciones distintas a estas que se documentan formalmente.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-120">Microsoft doesn't support modifying or operating Azure AD Connect sync outside of the actions that are formally documented.</span></span> <span data-ttu-id="8f1f9-121">Cualquiera de estas acciones pueden provocar un estado incoherente o incompatible de sincronización de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-121">Any of these actions might result in an inconsistent or unsupported state of Azure AD Connect sync.</span></span> <span data-ttu-id="8f1f9-122">Como resultado, Microsoft no ofrece soporte técnico para estas implementaciones.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-122">As a result, Microsoft can't provide technical support for such deployments.</span></span>

## <a name="basics-and-important-notes"></a><span data-ttu-id="8f1f9-123">Conceptos básicos y notas importantes</span><span class="sxs-lookup"><span data-stu-id="8f1f9-123">Basics and important notes</span></span>
<span data-ttu-id="8f1f9-124">En Azure AD Connect Sync, puede habilitar el filtrado en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-124">In Azure AD Connect sync, you can enable filtering at any time.</span></span> <span data-ttu-id="8f1f9-125">Si comienza con una configuración predeterminada de la sincronización de directorios y después configura el filtrado, los objetos que se filtren ya no se sincronizan con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-125">If you start with a default configuration of directory synchronization and then configure filtering, the objects that are filtered out are no longer synchronized to Azure AD.</span></span> <span data-ttu-id="8f1f9-126">Por este cambio, en Azure AD se eliminan los objetos de Azure AD que se sincronizaran previamente pero que se filtraran después.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-126">Because of this change, any objects in Azure AD that were previously synchronized but were then filtered are deleted in Azure AD.</span></span>

<span data-ttu-id="8f1f9-127">Antes de empezar a realizar cambios en el filtrado, asegúrese de [deshabilitar la tarea programada](#disable-scheduled-task) para no exportar cambios cuya corrección aún no se ha comprobado por error.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-127">Before you start making changes to filtering, make sure that you [disable the scheduled task](#disable-scheduled-task) so you don't accidentally export changes that you haven't yet verified to be correct.</span></span>

<span data-ttu-id="8f1f9-128">Como el filtrado puede quitar varios objetos al mismo tiempo, querrá asegurarse de que los nuevos filtros sean correctos antes de exportar los cambios a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-128">Because filtering can remove many objects at the same time, you want to make sure that your new filters are correct before you start exporting any changes to Azure AD.</span></span> <span data-ttu-id="8f1f9-129">Después de completar los pasos de configuración, se recomienda encarecidamente seguir los [pasos de comprobación](#apply-and-verify-changes) antes de exportar y realizar cambios en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-129">After you've completed the configuration steps, we strongly recommend that you follow the [verification steps](#apply-and-verify-changes) before you export and make changes to Azure AD.</span></span>

<span data-ttu-id="8f1f9-130">Para evitar eliminar muchos objetos por error, la característica para [evitar eliminaciones por error](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md) está activada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-130">To protect you from deleting many objects by accident, the feature "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" is on by default.</span></span> <span data-ttu-id="8f1f9-131">Si elimina muchos objetos debido al filtrado (de forma predeterminada, 500), debe seguir los pasos descritos en este artículo para permitir que las eliminaciones se reflejen en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-131">If you delete many objects due to filtering (500 by default), you need to follow the steps in this article to allow the deletes to go through to Azure AD.</span></span>

<span data-ttu-id="8f1f9-132">Si usa una compilación anterior a la de noviembre de 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)), realiza un cambio en la configuración de filtro y usa la sincronización de contraseñas, deberá desencadenar una sincronización completa de todas las contraseñas una vez terminada la configuración.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-132">If you use a build before November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)), make a change to a filter configuration, and use password synchronization, then you need to trigger a full sync of all passwords after you've completed the configuration.</span></span> <span data-ttu-id="8f1f9-133">Para conocer los pasos para desencadenar una sincronización completa de las contraseñas, consulte [Desencadenamiento de una sincronización completa de todas las contraseñas](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-133">For steps on how to trigger a password full sync, see [Trigger a full sync of all passwords](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords).</span></span> <span data-ttu-id="8f1f9-134">Si usa la compilación 1.0.9125 o una posterior, la acción de **sincronización completa** normal también calcula si se deben sincronizar las contraseñas, por lo que no se requiere este paso adicional.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-134">If you're on build 1.0.9125 or later, then the regular **full synchronization** action also calculates whether passwords should be synchronized and if this extra step is no longer required.</span></span>

<span data-ttu-id="8f1f9-135">Si los objetos de **usuario** se eliminaron involuntariamente en Azure AD por un error de filtrado, puede volver a crearlos en Azure AD al quitar las configuraciones de filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-135">If **user** objects were inadvertently deleted in Azure AD because of a filtering error, you can recreate the user objects in Azure AD by removing your filtering configurations.</span></span> <span data-ttu-id="8f1f9-136">A continuación, podrá volver a sincronizar los directorios.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-136">Then you can synchronize your directories again.</span></span> <span data-ttu-id="8f1f9-137">Esta acción restaura los usuarios de la papelera de reciclaje en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-137">This action restores the users from the recycle bin in Azure AD.</span></span> <span data-ttu-id="8f1f9-138">Sin embargo, no se pueden recuperar otros tipos de objeto.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-138">However, you can't undelete other object types.</span></span> <span data-ttu-id="8f1f9-139">Por ejemplo, si elimina por error un grupo de seguridad que se usara para incluir un recurso en una ACL, no podrá recuperar ni el grupo ni sus ACL.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-139">For example, if you accidentally delete a security group and it was used to ACL a resource, the group and its ACLs can't be recovered.</span></span>

<span data-ttu-id="8f1f9-140">Azure AD Connect solo elimina objetos que alguna vez haya considerado dentro del ámbito.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-140">Azure AD Connect only deletes objects that it has once considered to be in scope.</span></span> <span data-ttu-id="8f1f9-141">Si hay objetos en Azure AD que se crearon con otro motor de sincronización y que no estén dentro del ámbito, no se quitarán al agregar el filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-141">If there are objects in Azure AD that were created by another sync engine and these objects aren't in scope, adding filtering doesn't remove them.</span></span> <span data-ttu-id="8f1f9-142">Por ejemplo, si comienza con un servidor DirSync que creó una copia completa de todo el directorio en Azure AD e instala un nuevo servidor de sincronización de Azure AD Connect en paralelo con el filtrado habilitado desde el principio, Azure AD Connect no quita los objetos adicionales creados por DirSync.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-142">For example, if you start with a DirSync server that created a complete copy of your entire directory in Azure AD, and you install a new Azure AD Connect sync server in parallel with filtering enabled from the beginning, Azure AD Connect doesn't remove the extra objects that are created by DirSync.</span></span>

<span data-ttu-id="8f1f9-143">Se conservan las configuraciones de filtrado cuando instale o actualice a una versión más reciente de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-143">The filtering configuration is retained when you install or upgrade to a newer version of Azure AD Connect.</span></span> <span data-ttu-id="8f1f9-144">Es siempre un procedimiento recomendado comprobar que la configuración no se haya cambiado por error después de una actualización a una nueva versión antes de ejecutar el primer ciclo de sincronización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-144">It's always a best practice to verify that the configuration wasn't inadvertently changed after an upgrade to a newer version before running the first synchronization cycle.</span></span>

<span data-ttu-id="8f1f9-145">Si tiene más de un bosque, debe aplicar las configuraciones de filtrado que se describen en este tema a cada bosque (suponiendo que quiera la misma configuración para todos).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-145">If you have more than one forest, then you must apply the filtering configurations that are described in this topic to every forest (assuming that you want the same configuration for all of them).</span></span>

### <a name="disable-the-scheduled-task"></a><span data-ttu-id="8f1f9-146">Deshabilitación de la tarea programada</span><span class="sxs-lookup"><span data-stu-id="8f1f9-146">Disable the scheduled task</span></span>
<span data-ttu-id="8f1f9-147">Para deshabilitar el programador integrado que desencadena un ciclo de sincronización cada 30 horas, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-147">To disable the built-in scheduler that triggers a synchronization cycle every 30 minutes, follow these steps:</span></span>

1. <span data-ttu-id="8f1f9-148">Vaya a un símbolo del sistema de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-148">Go to a PowerShell prompt.</span></span>
2. <span data-ttu-id="8f1f9-149">Ejecute `Set-ADSyncScheduler -SyncCycleEnabled $False` para deshabilitar el programador.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-149">Run `Set-ADSyncScheduler -SyncCycleEnabled $False` to disable the scheduler.</span></span>
3. <span data-ttu-id="8f1f9-150">Realice los cambios que se documentan en este artículo.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-150">Make the changes that are documented in this article.</span></span>
4. <span data-ttu-id="8f1f9-151">Ejecute `Set-ADSyncScheduler -SyncCycleEnabled $True` para volver a habilitar el programador.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-151">Run `Set-ADSyncScheduler -SyncCycleEnabled $True` to enable the scheduler again.</span></span>

<span data-ttu-id="8f1f9-152">**Si usa una compilación de Azure AD Connect anterior a 1.1.105.0**</span><span class="sxs-lookup"><span data-stu-id="8f1f9-152">**If you use an Azure AD Connect build before 1.1.105.0**</span></span>  
<span data-ttu-id="8f1f9-153">Para deshabilitar la tarea programada que desencadena un ciclo de sincronización cada tres horas, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-153">To disable the scheduled task that triggers a synchronization cycle every three hours, follow these steps:</span></span>

1. <span data-ttu-id="8f1f9-154">Abra el **Programador de tareas** en el menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-154">Start **Task Scheduler** from the **Start** menu.</span></span>
2. <span data-ttu-id="8f1f9-155">Directamente bajo **Biblioteca del Programador de tareas**, busque la tarea **Programador de Sincronización de Azure AD**, haga clic con el botón derecho en ella y seleccione **Deshabilitar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-155">Directly under **Task Scheduler Library**, find the task named **Azure AD Sync Scheduler**, right-click, and select **Disable**.</span></span>  
   <span data-ttu-id="8f1f9-156">![Programador de tareas](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-156">![Task Scheduler](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span></span>  
3. <span data-ttu-id="8f1f9-157">Ahora podrá realizar cambios de configuración y ejecutar el motor de sincronización manualmente desde la consola de **Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-157">You can now make configuration changes and run the sync engine manually from the **Synchronization Service Manager** console.</span></span>

<span data-ttu-id="8f1f9-158">Después de completar todos los cambios de filtrado, no olvide volver a seleccionar **Habilitar** para la tarea.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-158">After you've completed all your filtering changes, don't forget to come back and **Enable** the task again.</span></span>

## <a name="filtering-options"></a><span data-ttu-id="8f1f9-159">Opciones de filtrado</span><span class="sxs-lookup"><span data-stu-id="8f1f9-159">Filtering options</span></span>
<span data-ttu-id="8f1f9-160">Puede aplicar los siguientes tipos de configuración de filtrado a la herramienta de sincronización de directorios:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-160">You can apply the following filtering configuration types to the directory synchronization tool:</span></span>

* <span data-ttu-id="8f1f9-161">[**Por grupo**](#group-based-filtering): el filtrado por grupo único solo se puede configurar durante la instalación inicial con el Asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-161">[**Group-based**](#group-based-filtering): Filtering based on a single group can only be configured on initial installation by using the installation wizard.</span></span>
* <span data-ttu-id="8f1f9-162">[**Por dominio**](#domain-based-filtering): esta opción permite seleccionar los dominios que se sincronizarán con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-162">[**Domain-based**](#domain-based-filtering): By using this option, you can select which domains synchronize to Azure AD.</span></span> <span data-ttu-id="8f1f9-163">También permite agregar y quitar dominios de la configuración del motor de sincronización al realizar cambios en la infraestructura local después de instalar la sincronización de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-163">You can also add and remove domains from the sync engine configuration when you make changes to your on-premises infrastructure after you install Azure AD Connect sync.</span></span>
* <span data-ttu-id="8f1f9-164">[**Por unidad organizativa (OU)**](#organizational-unitbased-filtering): esta opción permite seleccionar las unidades organizativas que se sincronizarán con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-164">[**Organizational unit (OU)–based**](#organizational-unitbased-filtering): By using this option, you can select which OUs synchronize to Azure AD.</span></span> <span data-ttu-id="8f1f9-165">Esta opción está en todos los tipos de objeto de las unidades organizativas seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-165">This option is for all object types in selected OUs.</span></span>
* <span data-ttu-id="8f1f9-166">[**Por atributo**](#attribute-based-filtering): esta opción permite filtrar objetos en función de los valores de sus atributos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-166">[**Attribute-based**](#attribute-based-filtering): By using this option, you can filter objects based on attribute values on the objects.</span></span> <span data-ttu-id="8f1f9-167">También puede tener filtros diferentes para distintos tipos de objetos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-167">You can also have different filters for different object types.</span></span>

<span data-ttu-id="8f1f9-168">Puede usar varias opciones de filtrado al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-168">You can use multiple filtering options at the same time.</span></span> <span data-ttu-id="8f1f9-169">Por ejemplo, puede usar el filtrado por unidad organizativa para incluir solo los objetos de una unidad organizativa.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-169">For example, you can use OU-based filtering to only include objects in one OU.</span></span> <span data-ttu-id="8f1f9-170">Al mismo tiempo, puede usar el filtrado por atributo para filtrar los objetos aún más.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-170">At the same time, you can use attribute-based filtering to filter the objects further.</span></span> <span data-ttu-id="8f1f9-171">Cuando se usan varios métodos de filtrado, los filtros utilizan el operador lógico "AND" entre los filtros.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-171">When you use multiple filtering methods, the filters use a logical "AND" between the filters.</span></span>

## <a name="domain-based-filtering"></a><span data-ttu-id="8f1f9-172">Filtrado basado en dominios</span><span class="sxs-lookup"><span data-stu-id="8f1f9-172">Domain-based filtering</span></span>
<span data-ttu-id="8f1f9-173">En esta sección se proporcionan los pasos para configurar el filtro de dominios.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-173">This section provides you with the steps to configure your domain filter.</span></span> <span data-ttu-id="8f1f9-174">Si agregó o quitó dominios del bosque después de instalar Azure AD Connect, también tendrá que actualizar la configuración del filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-174">If you added or removed domains in your forest after you installed Azure AD Connect, you also have to update the filtering configuration.</span></span>

<span data-ttu-id="8f1f9-175">La mejor manera de cambiar el filtrado por dominio es ejecutar el Asistente para instalación y cambiar el [filtrado por dominio y unidad organizativa](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-175">The preferred way to change domain-based filtering is by running the installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="8f1f9-176">El Asistente para instalación automatiza todas las tareas que se documentan en este tema.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-176">The installation wizard automates all the tasks that are documented in this topic.</span></span>

<span data-ttu-id="8f1f9-177">Solo debe seguir estos pasos si por alguna razón no se puede ejecutar el Asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-177">You should only follow these steps if you're unable to run the installation wizard for some reason.</span></span>

<span data-ttu-id="8f1f9-178">La configuración del filtrado basado en dominios consta de estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-178">Domain-based filtering configuration consists of these steps:</span></span>

1. <span data-ttu-id="8f1f9-179">[Seleccione los dominios](#select-domains-to-be-synchronized) que quiera incluir en la sincronización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-179">[Select the domains](#select-domains-to-be-synchronized) that you want to include in the synchronization.</span></span>
2. <span data-ttu-id="8f1f9-180">Para cada dominio agregado o quitado, ajuste de los [perfiles de ejecución](#update-run-profiles).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-180">For each added and removed domain, adjust the [run profiles](#update-run-profiles).</span></span>
3. <span data-ttu-id="8f1f9-181">[Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-181">[Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="select-the-domains-to-be-synchronized"></a><span data-ttu-id="8f1f9-182">Selección de los dominios que se van a sincronizar</span><span class="sxs-lookup"><span data-stu-id="8f1f9-182">Select the domains to be synchronized</span></span>
<span data-ttu-id="8f1f9-183">Para configurar el filtro de dominio, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-183">To set the domain filter, do the following steps:</span></span>

1. <span data-ttu-id="8f1f9-184">Inicie sesión en el servidor donde se ejecuta la sincronización de Azure AD Connect con una cuenta que pertenezca al grupo de seguridad **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="8f1f9-184">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="8f1f9-185">Inicie el **servicio de sincronización** desde el menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-185">Start **Synchronization Service** from the **Start** menu.</span></span>
3. <span data-ttu-id="8f1f9-186">Seleccione **Conectores** y, en la lista **Conectores**, elija el tipo de conector **Active Directory Domain Services**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-186">Select **Connectors**, and in the **Connectors** list, select the Connector with the type **Active Directory Domain Services**.</span></span> <span data-ttu-id="8f1f9-187">En **Acciones**, seleccione **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-187">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="8f1f9-188">![Propiedades del conector](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-188">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="8f1f9-189">Haga clic en **Configurar particiones de directorio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-189">Click **Configure Directory Partitions**.</span></span>
5. <span data-ttu-id="8f1f9-190">En la lista **Select directory partitions** (Seleccionar particiones de directorio), seleccione o anule la selección de los dominios según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-190">In the **Select directory partitions** list, select and unselect domains as needed.</span></span> <span data-ttu-id="8f1f9-191">Compruebe que solo estén seleccionadas las particiones que desee sincronizar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-191">Verify that only the partitions that you want to synchronize are selected.</span></span>  
   <span data-ttu-id="8f1f9-192">![Particiones](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-192">![Partitions](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span></span>  
   <span data-ttu-id="8f1f9-193">Si ha cambiado la infraestructura local de Active Directory y ha agregado dominios al bosque o los ha quitado, haga clic en el botón **Actualizar** para actualizar la lista.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-193">If you've changed your on-premises Active Directory infrastructure and added or removed domains from the forest, then click the **Refresh** button to get an updated list.</span></span> <span data-ttu-id="8f1f9-194">Al actualizar, se le pedirán las credenciales.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-194">When you refresh, you're asked for credentials.</span></span> <span data-ttu-id="8f1f9-195">Proporcione las credenciales con acceso de lectura a Windows Server Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-195">Provide any credentials with read access to Windows Server Active Directory.</span></span> <span data-ttu-id="8f1f9-196">No tiene por qué ser el usuario que aparezca en el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-196">It doesn't have to be the user that is prepopulated in the dialog box.</span></span>  
   <span data-ttu-id="8f1f9-197">![Actualización necesaria](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-197">![Refresh needed](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span></span>  
6. <span data-ttu-id="8f1f9-198">Cuando termine, haga clic en el botón **Aceptar** para cerrar el cuadro de diálogo **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-198">When you're done, close the **Properties** dialog by clicking **OK**.</span></span> <span data-ttu-id="8f1f9-199">Si quitó dominios del bosque, aparecerá un mensaje para indicar que se eliminó un dominio y se borrará esa configuración.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-199">If you removed domains from the forest, a message pop-up says that a domain was removed and that configuration will be cleaned up.</span></span>
7. <span data-ttu-id="8f1f9-200">Pase a ajustar el valor de [Run profiles](#update-run-profiles)(Perfiles de ejecución).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-200">Continue to adjust the [run profiles](#update-run-profiles).</span></span>

### <a name="update-the-run-profiles"></a><span data-ttu-id="8f1f9-201">Actualización de los perfiles de ejecución</span><span class="sxs-lookup"><span data-stu-id="8f1f9-201">Update the run profiles</span></span>
<span data-ttu-id="8f1f9-202">Si ha actualizado el filtro de dominio, también debe actualizar los perfiles de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-202">If you've updated your domain filter, you also need to update the run profiles.</span></span>

1. <span data-ttu-id="8f1f9-203">En la lista **Conectores**, asegúrese de que está seleccionado el conector que cambió en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-203">In the **Connectors** list, make sure that the Connector that you changed in the previous step is selected.</span></span> <span data-ttu-id="8f1f9-204">En **Acciones**, seleccione **Configure Run Profiles** (Configurar perfiles de ejecución).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-204">In **Actions**, select **Configure Run Profiles**.</span></span>  
   <span data-ttu-id="8f1f9-205">![Perfiles de ejecución de conector 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-205">![Connector run profiles 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span></span>  
2. <span data-ttu-id="8f1f9-206">Busque e identifique los siguientes perfiles:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-206">Find and identify the following profiles:</span></span>
    * <span data-ttu-id="8f1f9-207">Importación completa</span><span class="sxs-lookup"><span data-stu-id="8f1f9-207">Full Import</span></span>
    * <span data-ttu-id="8f1f9-208">sincronización completa</span><span class="sxs-lookup"><span data-stu-id="8f1f9-208">Full Synchronization</span></span>
    * <span data-ttu-id="8f1f9-209">Importación delta</span><span class="sxs-lookup"><span data-stu-id="8f1f9-209">Delta Import</span></span>
    * <span data-ttu-id="8f1f9-210">Sincronización delta</span><span class="sxs-lookup"><span data-stu-id="8f1f9-210">Delta Synchronization</span></span>
    * <span data-ttu-id="8f1f9-211">Exportación</span><span class="sxs-lookup"><span data-stu-id="8f1f9-211">Export</span></span>
3. <span data-ttu-id="8f1f9-212">En cada perfil, ajuste los dominios **agregados** y **quitados**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-212">For each profile, adjust the **added** and **removed** domains.</span></span>
    1. <span data-ttu-id="8f1f9-213">Para cada uno de los cinco perfiles, siga estos pasos para cada dominio **agregado**:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-213">For each of the five profiles, do the following steps for each **added** domain:</span></span>
        1. <span data-ttu-id="8f1f9-214">Seleccione el perfil de ejecución y haga clic en **Nuevo paso**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-214">Select the run profile and click **New Step**.</span></span>
        2. <span data-ttu-id="8f1f9-215">En la página **Configure Step** (Configurar paso), en la lista desplegable **Tipo**, seleccione el tipo de paso que comparta nombre con el perfil que esté configurando.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-215">On the **Configure Step** page, in the **Type** drop-down menu, select the step type with the same name as the profile that you're configuring.</span></span> <span data-ttu-id="8f1f9-216">A continuación, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-216">Then click **Next**.</span></span>  
        <span data-ttu-id="8f1f9-217">![Perfiles de ejecución de conector 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-217">![Connector run profiles 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span></span>  
        3. <span data-ttu-id="8f1f9-218">En la página **Connector Configuration** (Configuración de conector), en la lista desplegable **Partición**, seleccione el nombre del dominio que ha agregado al filtro de dominio.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-218">On the **Connector Configuration** page, in the **Partition** drop-down menu, select the name of the domain that you've added to your domain filter.</span></span>  
        <span data-ttu-id="8f1f9-219">![Perfiles de ejecución de conector 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-219">![Connector run profiles 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span></span>  
        4. <span data-ttu-id="8f1f9-220">Para cerrar el cuadro de diálogo **Configurar perfil de ejecución**, haga clic en **Finalizar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-220">To close the **Configure Run Profile** dialog, click **Finish**.</span></span>
    2. <span data-ttu-id="8f1f9-221">Para cada uno de los cinco perfiles, siga estos pasos para cada dominio **quitado**:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-221">For each of the five profiles, do the following steps for each **removed** domain:</span></span>
        1. <span data-ttu-id="8f1f9-222">Seleccione el perfil de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-222">Select the run profile.</span></span>
        2. <span data-ttu-id="8f1f9-223">Si el campo **Valor** del atributo **Partición**es un GUID, seleccione el paso de ejecución y haga clic en **Eliminar paso**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-223">If the **Value** of the **Partition** attribute is a GUID, select the run step and click **Delete Step**.</span></span>  
        <span data-ttu-id="8f1f9-224">![Perfiles de ejecución de conector 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-224">![Connector run profiles 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span></span>  
    3. <span data-ttu-id="8f1f9-225">Compruebe el cambio.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-225">Verify your change.</span></span> <span data-ttu-id="8f1f9-226">Cada dominio que desee sincronizar debe aparecer como paso en cada perfil de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-226">Each domain that you want to synchronize should be listed as a step in each run profile.</span></span>
4. <span data-ttu-id="8f1f9-227">Para cerrar el cuadro de diálogo **Configure Run Profiles** (Configurar perfiles de ejecución), haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-227">To close the **Configure Run Profiles** dialog, click **OK**.</span></span>
5.  <span data-ttu-id="8f1f9-228">Para completar la configuración, debe ejecutar una **Importación completa** y una **Sincronización diferencial**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-228">To complete the configuration, you need to run a **Full import** and a **Delta sync**.</span></span> <span data-ttu-id="8f1f9-229">Continúe leyendo la sección [Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-229">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="organizational-unitbased-filtering"></a><span data-ttu-id="8f1f9-230">Filtrado por unidad organizativa</span><span class="sxs-lookup"><span data-stu-id="8f1f9-230">Organizational unit–based filtering</span></span>
<span data-ttu-id="8f1f9-231">La mejor manera de cambiar el filtrado por unidad organizativa es ejecutar el Asistente para instalación y cambiar el [filtrado por dominio y unidad organizativa](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-231">The preferred way to change OU-based filtering is by running the installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="8f1f9-232">El Asistente para instalación automatiza todas las tareas que se documentan en este tema.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-232">The installation wizard automates all the tasks that are documented in this topic.</span></span>

<span data-ttu-id="8f1f9-233">Solo debe seguir estos pasos si por alguna razón no se puede ejecutar el Asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-233">You should only follow these steps if you're unable to run the installation wizard for some reason.</span></span>

<span data-ttu-id="8f1f9-234">Para configurar el filtrado por unidad organizativa, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-234">To configure organizational unit–based filtering, do the following steps:</span></span>

1. <span data-ttu-id="8f1f9-235">Inicie sesión en el servidor donde se ejecuta la sincronización de Azure AD Connect con una cuenta que pertenezca al grupo de seguridad **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="8f1f9-235">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="8f1f9-236">Inicie el **servicio de sincronización** desde el menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-236">Start **Synchronization Service** from the **Start** menu.</span></span>
3. <span data-ttu-id="8f1f9-237">Seleccione **Conectores** y, en la lista **Conectores**, elija el tipo de conector **Active Directory Domain Services**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-237">Select **Connectors**, and in the **Connectors** list, select the Connector with the type **Active Directory Domain Services**.</span></span> <span data-ttu-id="8f1f9-238">En **Acciones**, seleccione **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-238">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="8f1f9-239">![Propiedades del conector](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-239">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="8f1f9-240">Haga clic en **Configure Directory Partitions** (Configurar particiones de directorio), seleccione el dominio que desee configurar y haga clic en **Contenedores**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-240">Click **Configure Directory Partitions**, select the domain that you want to configure, and then click **Containers**.</span></span>
5. <span data-ttu-id="8f1f9-241">Cuando se le solicite, proporcione las credenciales con acceso de lectura al entorno local de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-241">When you're prompted, provide any credentials with read access to your on-premises Active Directory.</span></span> <span data-ttu-id="8f1f9-242">No tiene por qué ser el usuario que aparezca en el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-242">It doesn't have to be the user that is prepopulated in the dialog box.</span></span>
6. <span data-ttu-id="8f1f9-243">En el cuadro de diálogo **Select Containers** (Seleccionar contenedores), borre las unidades organizativas que no desee sincronizar con el directorio en la nube y luego haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-243">In the **Select Containers** dialog box, clear the OUs that you don’t want to synchronize with the cloud directory, and then click **OK**.</span></span>  
   <span data-ttu-id="8f1f9-244">![Unidades organizativas en el cuadro de diálogo Select Containers (Seleccionar contenedores)](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-244">![OUs in the Select Containers dialog box](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span></span>  
   * <span data-ttu-id="8f1f9-245">El contenedor **Computers** debe estar seleccionado para que los equipos con Windows 10 se sincronicen correctamente con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-245">The **Computers** container should be selected for your Windows 10 computers to be successfully synchronized to Azure AD.</span></span> <span data-ttu-id="8f1f9-246">Si los equipos unidos a un dominio se encuentran en otras unidades organizativas, asegúrese de que estén seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-246">If your domain-joined computers are located in other OUs, make sure those are selected.</span></span>
   * <span data-ttu-id="8f1f9-247">Se debe seleccionar el contenedor **ForeignSecurityPrincipals** si tiene varios bosques con confianzas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-247">The **ForeignSecurityPrincipals** container should be selected if you have multiple forests with trusts.</span></span> <span data-ttu-id="8f1f9-248">Este contenedor permitirá que se resuelva la pertenencia a grupos de seguridad de otros bosques.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-248">This container allows cross-forest security group membership to be resolved.</span></span>
   * <span data-ttu-id="8f1f9-249">La unidad organizativa **RegisteredDevices** debe estar seleccionada si ha habilitado la característica de escritura diferida de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-249">The **RegisteredDevices** OU should be selected if you enabled the device writeback feature.</span></span> <span data-ttu-id="8f1f9-250">Si usa otra característica de reescritura, como la de grupos, asegúrese de que estas ubicaciones estén seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-250">If you use another writeback feature, such as group writeback, make sure these locations are selected.</span></span>
   * <span data-ttu-id="8f1f9-251">Seleccione cualquier otra unidad organizativa donde se encuentren usuarios, objetos InetOrgPerson, grupos, contactos y equipos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-251">Select any other OU where Users, iNetOrgPersons, Groups, Contacts, and Computers are located.</span></span> <span data-ttu-id="8f1f9-252">En la imagen anterior, se encuentran en la unidad organizativa ManagedObjects.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-252">In the picture, all these OUs are located in the ManagedObjects OU.</span></span>
   * <span data-ttu-id="8f1f9-253">Si usa el filtrado basado en el grupo, se debe incluir la unidad organizativa donde se encuentra el grupo.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-253">If you use group-based filtering, then the OU where the group is located must be included.</span></span>
   * <span data-ttu-id="8f1f9-254">Tenga en cuenta que también puede configurar si las nuevas unidades organizativas agregadas tras la configuración de filtrado deben sincronizarse o no.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-254">Note that you can configure whether new OUs that are added after the filtering configuration finishes are synchronized or not synchronized.</span></span> <span data-ttu-id="8f1f9-255">Consulte la siguiente sección para obtener información detallada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-255">See the next section for details.</span></span>
7. <span data-ttu-id="8f1f9-256">Cuando termine, haga clic en el botón **Aceptar** para cerrar el cuadro de diálogo **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-256">When you're done, close the **Properties** dialog by clicking **OK**.</span></span>
8. <span data-ttu-id="8f1f9-257">Para completar la configuración, debe ejecutar una **Importación completa** y una **Sincronización diferencial**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-257">To complete the configuration, you need to run a **Full import** and a **Delta sync**.</span></span> <span data-ttu-id="8f1f9-258">Continúe leyendo la sección [Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-258">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="synchronize-new-ous"></a><span data-ttu-id="8f1f9-259">Sincronización de unidades organizativas nuevas</span><span class="sxs-lookup"><span data-stu-id="8f1f9-259">Synchronize new OUs</span></span>
<span data-ttu-id="8f1f9-260">Las unidades organizativas nuevas creadas una vez que se ha configurado el filtrado se sincronizan de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-260">New OUs that are created after filtering has been configured are synchronized by default.</span></span> <span data-ttu-id="8f1f9-261">Esto se indica mediante una marca en la casilla.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-261">This state is indicated by a selected check box.</span></span> <span data-ttu-id="8f1f9-262">También se puede anular la selección de algunas subunidades organizativas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-262">You can also unselect some sub-OUs.</span></span> <span data-ttu-id="8f1f9-263">Para conseguirlo, haga clic en la casilla hasta que se ponga blanca con una marca azul (su estado predeterminado).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-263">To get this behavior, click the box until it becomes white with a blue check mark (its default state).</span></span> <span data-ttu-id="8f1f9-264">Anule a continuación la selección de las subunidades que no desee sincronizar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-264">Then unselect any sub-OUs that you don't want to synchronize.</span></span>

<span data-ttu-id="8f1f9-265">Si todas las subunidades están sincronizadas, la casilla se pondrá blanca con una marca azul.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-265">If all sub-OUs are synchronized, then the box is white with a blue check mark.</span></span>  
![Unidad organizativa con todas las casillas activadas](./media/active-directory-aadconnectsync-configure-filtering/ousyncnewall.png)

<span data-ttu-id="8f1f9-267">Si ha anulado la selección de algunas subunidades, la casilla estará gris con una marca blanca.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-267">If some sub-OUs have been unselected, then the box is gray with a white check mark.</span></span>  
![Unidad organizativa con la selección de algunas subunidades organizativas anulada](./media/active-directory-aadconnectsync-configure-filtering/ousyncnew.png)

<span data-ttu-id="8f1f9-269">Con esta configuración, se sincronizará la nueva unidad organizativa que se creó en ManagedObjects.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-269">With this configuration, a new OU that was created under ManagedObjects is synchronized.</span></span>

<span data-ttu-id="8f1f9-270">El Asistente para la instalación de Azure AD Connect siempre creará esta configuración.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-270">The Azure AD Connect installation wizard always creates this configuration.</span></span>

### <a name="dont-synchronize-new-ous"></a><span data-ttu-id="8f1f9-271">No sincronizar unidades organizativas nuevas</span><span class="sxs-lookup"><span data-stu-id="8f1f9-271">Don't synchronize new OUs</span></span>
<span data-ttu-id="8f1f9-272">Puede configurar el motor de sincronización para que no sincronice las unidades organizativas nuevas una vez finalizada la configuración del filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-272">You can configure the sync engine to not synchronize new OUs after the filtering configuration has finished.</span></span> <span data-ttu-id="8f1f9-273">Este estado se indica en la interfaz de usuario con una casilla gris sin marcas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-273">This state is indicated in the UI by the box appearing solid gray with no check mark.</span></span> <span data-ttu-id="8f1f9-274">Para conseguirlo, haga clic en la casilla hasta que se ponga blanca sin marcas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-274">To get this behavior, click the box until it becomes white with no check mark.</span></span> <span data-ttu-id="8f1f9-275">A continuación, seleccione las subunidades que desee sincronizar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-275">Then select the sub-OUs that you want to synchronize.</span></span>

![Unidad organizativa con raíz sin seleccionar](./media/active-directory-aadconnectsync-configure-filtering/oudonotsyncnew.png)

<span data-ttu-id="8f1f9-277">Con esta configuración, no se sincronizará la nueva unidad organizativa que se creó en ManagedObjects.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-277">With this configuration, a new OU that was created under ManagedObjects isn't synchronized.</span></span>

## <a name="attribute-based-filtering"></a><span data-ttu-id="8f1f9-278">Filtrado basado en atributos</span><span class="sxs-lookup"><span data-stu-id="8f1f9-278">Attribute-based filtering</span></span>
<span data-ttu-id="8f1f9-279">Asegúrese de usar la compilación de noviembre de 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) o una posterior para que estos pasos funcionen.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-279">Make sure that you're using the November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) or later build for these steps to work.</span></span>

<span data-ttu-id="8f1f9-280">El filtrado por atributo es la manera más flexible de filtrar objetos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-280">Attribute-based filtering is the most flexible way to filter objects.</span></span> <span data-ttu-id="8f1f9-281">Puede usar la capacidad del [aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning.md) para controlar prácticamente todos los aspectos de la sincronización de un objeto con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-281">You can use the power of [declarative provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md) to control almost every aspect of when an object is synchronized to Azure AD.</span></span>

<span data-ttu-id="8f1f9-282">Se puede aplicar filtrado [entrante](#inbound-filtering), desde Active Directory hacia el metaverso, y [saliente](#outbound-filtering), desde el metaverso hacia Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-282">You can apply [inbound](#inbound-filtering) filtering from Active Directory to the metaverse, and [outbound](#outbound-filtering) filtering from the metaverse to Azure AD.</span></span> <span data-ttu-id="8f1f9-283">Se recomienda aplicar filtrado entrante, ya que es el más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-283">We recommend that you apply inbound filtering because that is the easiest to maintain.</span></span> <span data-ttu-id="8f1f9-284">El filtrado saliente solo debe usarse si es necesario para unir objetos de más de un bosque para realizar la evaluación.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-284">You should only use outbound filtering if it's required to join objects from more than one forest before the evaluation can take place.</span></span>

### <a name="inbound-filtering"></a><span data-ttu-id="8f1f9-285">Filtrado entrante</span><span class="sxs-lookup"><span data-stu-id="8f1f9-285">Inbound filtering</span></span>
<span data-ttu-id="8f1f9-286">El filtrado entrante utiliza la configuración predeterminada en la que los objetos que se dirigen a Azure AD no tienen el atributo de metaverso cloudFiltered establecido en ningún valor que se vaya a sincronizar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-286">Inbound filtering uses the default configuration, where objects going to Azure AD must have the metaverse attribute cloudFiltered not set to a value to be synchronized.</span></span> <span data-ttu-id="8f1f9-287">Si el valor de este atributo está establecido en **True**, el objeto no se sincroniza.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-287">If this attribute's value is set to **True**, then the object isn't synchronized.</span></span> <span data-ttu-id="8f1f9-288">No debería estar establecido en **False**, por diseño.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-288">It shouldn't be set to **False**, by design.</span></span> <span data-ttu-id="8f1f9-289">Para asegurarse de que otras reglas tengan la capacidad de aportar un valor, este atributo solo debería tener los valores **True** o **NULL** (ausente).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-289">To make sure other rules have the ability to contribute a value, this attribute is only supposed to have the values **True** or **NULL** (absent).</span></span>

<span data-ttu-id="8f1f9-290">En el filtrado entrante se utilizará el **ámbito** para determinar qué objetos se sincronizan y cuáles no.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-290">In inbound filtering, you use the power of **scope** to determine which objects to synchronize or not synchronize.</span></span> <span data-ttu-id="8f1f9-291">Aquí realizará ajustes para satisfacer los requisitos de su organización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-291">This is where you make adjustments to fit your own organization's requirements.</span></span> <span data-ttu-id="8f1f9-292">El módulo de ámbito cuenta con un **grupo** y una **cláusula** para determinar cuándo una regla de sincronización está dentro de él.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-292">The scope module has a **group** and a **clause** to determine when a sync rule is in scope.</span></span> <span data-ttu-id="8f1f9-293">Un grupo contiene una o varias cláusulas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-293">A group contains one or many clauses.</span></span> <span data-ttu-id="8f1f9-294">Existe un operador lógico AND entre varias cláusulas y un operador lógico OR entre varios grupos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-294">There is a logical "AND" between multiple clauses, and a logical "OR" between multiple groups.</span></span>

<span data-ttu-id="8f1f9-295">Veamos un ejemplo: </span><span class="sxs-lookup"><span data-stu-id="8f1f9-295">Let us look at an example:</span></span>  
<span data-ttu-id="8f1f9-296">![Ámbito](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-296">![Scope](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span></span>  
<span data-ttu-id="8f1f9-297">Se debe leer como **(departamento = TI) O BIEN (departamento = Ventas Y c = Estados Unidos)**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-297">This should be read as **(department = IT) OR (department = Sales AND c = US)**.</span></span>

<span data-ttu-id="8f1f9-298">En los ejemplos y los pasos siguientes, usaremos el objeto de usuario como ejemplo, pero esto sirve para todo tipo de objetos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-298">In the following samples and steps, you use the user object as an example, but you can use this for all object types.</span></span>

<span data-ttu-id="8f1f9-299">En los ejemplos siguientes, el valor de precedencia empieza por 50.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-299">In the following samples, the precedence value starts with 50.</span></span> <span data-ttu-id="8f1f9-300">Puede ser cualquier número no usado, pero debe ser menor que 100.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-300">This can be any number not used, but should be lower than 100.</span></span>

#### <a name="negative-filtering-do-not-sync-these"></a><span data-ttu-id="8f1f9-301">Filtrado negativo: "no sincronizar estos"</span><span class="sxs-lookup"><span data-stu-id="8f1f9-301">Negative filtering: "do not sync these"</span></span>
<span data-ttu-id="8f1f9-302">En el siguiente ejemplo, filtraremos (no sincronizaremos) todos los usuarios en los que **extensionAttribute15** tenga el valor **NoSync**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-302">In the following example, you filter out (not synchronize) all users where **extensionAttribute15** has the value **NoSync**.</span></span>

1. <span data-ttu-id="8f1f9-303">Inicie sesión en el servidor donde se ejecuta la sincronización de Azure AD Connect con una cuenta que pertenezca al grupo de seguridad **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="8f1f9-303">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="8f1f9-304">Inicie el **Synchronization Rules Editor** (Editor de reglas de sincronización) del menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-304">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="8f1f9-305">Asegúrese de que **Entrante** esté seleccionado y haga clic en **Agregar nueva regla**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-305">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="8f1f9-306">Asigne a la regla un nombre descriptivo, como "*Entrante desde AD – Usuario FiltroNoSincronizar*".</span><span class="sxs-lookup"><span data-stu-id="8f1f9-306">Give the rule a descriptive name, such as "*In from AD – User DoNotSyncFilter*".</span></span> <span data-ttu-id="8f1f9-307">Seleccione el bosque correcto: **Usuario** para **CS object type** (Tipo de objeto de sistema conectado) y **Persona** para **MV object type** (Tipo de objeto de metaverso).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-307">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="8f1f9-308">En **Tipo de vínculo**, seleccione **Unir**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-308">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="8f1f9-309">En **Precedencia**, escriba un valor que no use actualmente ninguna otra regla de sincronización (por ejemplo, 50) y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-309">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 50), and then click **Next**.</span></span>  
   <span data-ttu-id="8f1f9-310">![Descripción de entrante 1](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-310">![Inbound 1 description](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span></span>  
5. <span data-ttu-id="8f1f9-311">En **Scoping filter** (Filtro de ámbito), haga clic en **Agregar grupo** y en **Agregar cláusula**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-311">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="8f1f9-312">En **Atributo**, seleccione **ExtensionAttribute15**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-312">In **Attribute**, select **ExtensionAttribute15**.</span></span> <span data-ttu-id="8f1f9-313">Asegúrese de que el **Operador** esté configurado en **EQUAL** y escriba el valor **NoSync** en el cuadro **Valor**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-313">Make sure that **Operator** is set to **EQUAL**, and type the value **NoSync** in the **Value** box.</span></span> <span data-ttu-id="8f1f9-314">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-314">Click **Next**.</span></span>  
   <span data-ttu-id="8f1f9-315">![Ámbito de entrante 2](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-315">![Inbound 2 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span></span>  
6. <span data-ttu-id="8f1f9-316">Deje las reglas de **unión** vacías y, después, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-316">Leave the **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="8f1f9-317">Haga clic en **Add Transformation** (Agregar transformación), establezca **FlowType** en **Constante** y **Atributo de destino** en **cloudFiltered**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-317">Click **Add Transformation**, select the **FlowType** as **Constant**, and select **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="8f1f9-318">En el cuadro de texto **Origen**, escriba **True**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-318">In the **Source** text box, type **True**.</span></span> <span data-ttu-id="8f1f9-319">Haga clic en **Agregar** para guardar la regla.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-319">Click **Add** to save the rule.</span></span>  
   <span data-ttu-id="8f1f9-320">![Transformación de entrante 3](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-320">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>
8. <span data-ttu-id="8f1f9-321">Para completar la configuración, debe ejecutar una **sincronización completa**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-321">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="8f1f9-322">Continúe leyendo la sección [Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-322">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

#### <a name="positive-filtering-only-sync-these"></a><span data-ttu-id="8f1f9-323">Filtrado positivo: "solo sincronizar estos"</span><span class="sxs-lookup"><span data-stu-id="8f1f9-323">Positive filtering: "only sync these"</span></span>
<span data-ttu-id="8f1f9-324">Expresar el filtrado positivo puede ser más complicado, ya que también se deben considerar también objetos que no sea obvio que se vayan a sincronizar, como las salas de conferencias.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-324">Expressing positive filtering can be more challenging because you also have to consider objects that aren't obvious to be synchronized, such as conference rooms.</span></span> <span data-ttu-id="8f1f9-325">También va a invalidar el filtro predeterminado de la regla original **In from AD - User Join** (Dentro desde AD: unión de usuario).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-325">You are also going to override the default filter in the out-of-box rule **In from AD - User Join**.</span></span> <span data-ttu-id="8f1f9-326">Cuando cree un filtro personalizado, asegúrese de no incluir objetos críticos del sistema, objetos de conflictos de replicación, buzones especiales y las cuentas de servicio de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-326">When you create your custom filter, make sure to not include critical system objects, replication conflict objects, special mailboxes, and the service accounts for Azure AD Connect.</span></span>

<span data-ttu-id="8f1f9-327">La opción de filtrado positivo requiere dos reglas de sincronización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-327">The positive filtering option requires two sync rules.</span></span> <span data-ttu-id="8f1f9-328">Necesita una regla (o varias) con el ámbito correcto de los objetos para sincronizarlos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-328">You need one rule (or several) with the correct scope of objects to synchronize.</span></span> <span data-ttu-id="8f1f9-329">También necesita una segunda regla de sincronización general que filtre todos los objetos que aún no se hayan identificado como objeto para sincronizar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-329">You also need a second catch-all sync rule that filters out all objects that haven't yet been identified as an object that should be synchronized.</span></span>

<span data-ttu-id="8f1f9-330">En el ejemplo siguiente, solo sincronizaremos los objetos de usuario en los que el atributo departamento tenga el valor **Ventas**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-330">In the following example, you only synchronize user objects where the department attribute has the value **Sales**.</span></span>

1. <span data-ttu-id="8f1f9-331">Inicie sesión en el servidor donde se ejecuta la sincronización de Azure AD Connect con una cuenta que pertenezca al grupo de seguridad **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="8f1f9-331">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="8f1f9-332">Inicie el **Synchronization Rules Editor** (Editor de reglas de sincronización) del menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-332">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="8f1f9-333">Asegúrese de que **Entrante** esté seleccionado y haga clic en **Agregar nueva regla**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-333">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="8f1f9-334">Asigne a la regla un nombre descriptivo, como "*Entrante desde AD – Usuario Ventas sincronizar*".</span><span class="sxs-lookup"><span data-stu-id="8f1f9-334">Give the rule a descriptive name, such as "*In from AD – User Sales sync*".</span></span> <span data-ttu-id="8f1f9-335">Seleccione el bosque correcto: **Usuario** para **CS object type** (Tipo de objeto de sistema conectado) y **Persona** para **MV object type** (Tipo de objeto de metaverso).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-335">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="8f1f9-336">En **Tipo de vínculo**, seleccione **Unir**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-336">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="8f1f9-337">En **Precedencia**, escriba un valor que no use actualmente ninguna otra regla de sincronización (por ejemplo, 51) y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-337">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 51), and then click **Next**.</span></span>  
   <span data-ttu-id="8f1f9-338">![Descripción de entrante 4](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-338">![Inbound 4 description](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span></span>  
5. <span data-ttu-id="8f1f9-339">En **Scoping filter** (Filtro de ámbito), haga clic en **Agregar grupo** y en **Agregar cláusula**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-339">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="8f1f9-340">En **Atributo**, seleccione **department**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-340">In **Attribute**, select **department**.</span></span> <span data-ttu-id="8f1f9-341">Asegúrese de que el Operador esté configurado en **EQUAL** y escriba el valor **Sales** en el cuadro **Valor**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-341">Make sure that Operator is set to **EQUAL**, and type the value **Sales** in the **Value** box.</span></span> <span data-ttu-id="8f1f9-342">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-342">Click **Next**.</span></span>  
   <span data-ttu-id="8f1f9-343">![Ámbito de entrante 5](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-343">![Inbound 5 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span></span>  
6. <span data-ttu-id="8f1f9-344">Deje las reglas de **unión** vacías y, después, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-344">Leave the **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="8f1f9-345">Haga clic en **Add Transformation** (Agregar transformación), establezca **FlowType** en **Constante** y **Atributo de destino** en **cloudFiltered**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-345">Click **Add Transformation**, select **Constant** as the **FlowType**, and select the **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="8f1f9-346">En el cuadro **Origen**, escriba **False**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-346">In the **Source** box, type **False**.</span></span> <span data-ttu-id="8f1f9-347">Haga clic en **Agregar** para guardar la regla.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-347">Click **Add** to save the rule.</span></span>  
   <span data-ttu-id="8f1f9-348">![Transformación de entrante 6](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-348">![Inbound 6 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span></span>  
   <span data-ttu-id="8f1f9-349">Este es un caso especial en el que estableceremos cloudFiltered explícitamente en **False**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-349">This is a special case where you explicitly set cloudFiltered to **False**.</span></span>
8. <span data-ttu-id="8f1f9-350">Ahora tenemos que crear la regla de sincronización de comodín.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-350">We now have to create the catch-all sync rule.</span></span> <span data-ttu-id="8f1f9-351">Asigne a la regla un nombre descriptivo, como "*Entrante desde AD – Usuario Filtro de comodín*".</span><span class="sxs-lookup"><span data-stu-id="8f1f9-351">Give the rule a descriptive name, such as "*In from AD – User Catch-all filter*".</span></span> <span data-ttu-id="8f1f9-352">Seleccione el bosque correcto: **Usuario** para **CS object type** (Tipo de objeto de sistema conectado) y **Persona** para **MV object type** (Tipo de objeto de metaverso).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-352">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="8f1f9-353">En **Tipo de vínculo**, seleccione **Unir**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-353">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="8f1f9-354">En **Precedencia**, escriba un valor que no use actualmente ninguna otra regla de sincronización (por ejemplo, 99).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-354">In **Precedence**, type a value that isn't currently used by another Synchronization Rule (for example 99).</span></span> <span data-ttu-id="8f1f9-355">Ha seleccionado un valor de precedencia mayor (menor prioridad) que la regla de sincronización anterior.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-355">You've selected a precedence value that is higher (lower precedence) than the previous sync rule.</span></span> <span data-ttu-id="8f1f9-356">Pero también ha dejado algo de espacio para poder agregar más reglas de filtrado de sincronización más tarde, cuando quiera empezar a sincronizar departamentos adicionales.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-356">But you've also left some room so that you can add more filtering sync rules later when you want to start synchronizing additional departments.</span></span> <span data-ttu-id="8f1f9-357">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-357">Click **Next**.</span></span>  
   <span data-ttu-id="8f1f9-358">![Descripción de entrante 7](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-358">![Inbound 7 description](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span></span>  
9. <span data-ttu-id="8f1f9-359">Deje **Scoping filter** (Filtro de ámbito) vacío y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-359">Leave **Scoping filter** empty, and click **Next**.</span></span> <span data-ttu-id="8f1f9-360">Un filtro vacío indica que la regla se aplica a todos los objetos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-360">An empty filter indicates that the rule is to be applied to all objects.</span></span>
10. <span data-ttu-id="8f1f9-361">Deje las reglas de **unión** vacías y, después, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-361">Leave the **Join** rules empty, and then click **Next**.</span></span>
11. <span data-ttu-id="8f1f9-362">Haga clic en **Add Transformation** (Agregar transformación), establezca **FlowType** en **Constante** y **Atributo de destino** en **cloudFiltered**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-362">Click **Add Transformation**, select **Constant** as the **FlowType**, and select **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="8f1f9-363">En el cuadro **Origen**, escriba **True**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-363">In the **Source** box, type **True**.</span></span> <span data-ttu-id="8f1f9-364">Haga clic en **Agregar** para guardar la regla.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-364">Click **Add** to save the rule.</span></span>  
    <span data-ttu-id="8f1f9-365">![Transformación de entrante 3](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-365">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>  
12. <span data-ttu-id="8f1f9-366">Para completar la configuración, debe ejecutar una **sincronización completa**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-366">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="8f1f9-367">Continúe leyendo la sección [Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-367">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

<span data-ttu-id="8f1f9-368">Si es necesario, puede crear más reglas del primer tipo en las que se incluyan más objetos para la sincronización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-368">If you need to, you can create more rules of the first type where you include more objects in the synchronization.</span></span>

### <a name="outbound-filtering"></a><span data-ttu-id="8f1f9-369">Filtrado saliente</span><span class="sxs-lookup"><span data-stu-id="8f1f9-369">Outbound filtering</span></span>
<span data-ttu-id="8f1f9-370">En algunos casos es necesario realizar el filtrado después de que los objetos se hayan unido en metaverso.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-370">In some cases, it's necessary to do the filtering only after the objects have joined in the metaverse.</span></span> <span data-ttu-id="8f1f9-371">Por ejemplo, para determinar si debe sincronizarse un objeto, podría ser necesario observar el atributo mail del bosque de recursos y el atributo userPrincipalName del bosque de cuentas.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-371">For example, it might be necessary to look at the mail attribute from the resource forest, and the userPrincipalName attribute from the account forest, to determine if an object should be synchronized.</span></span> <span data-ttu-id="8f1f9-372">En estos casos, se crea el filtrado en la regla de salida.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-372">In these cases, you create the filtering on the outbound rule.</span></span>

<span data-ttu-id="8f1f9-373">En este ejemplo, se cambia el filtrado de manera que se sincronicen solo los usuarios cuyos mail y userPrincipalName terminen en @contoso.com:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-373">In this example, you change the filtering so that only users that have both their mail and userPrincipalName ending in @contoso.com are synchronized:</span></span>

1. <span data-ttu-id="8f1f9-374">Inicie sesión en el servidor donde se ejecuta la sincronización de Azure AD Connect con una cuenta que pertenezca al grupo de seguridad **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="8f1f9-374">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="8f1f9-375">Inicie el **Synchronization Rules Editor** (Editor de reglas de sincronización) del menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-375">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="8f1f9-376">En **Rules Type** (Tipo de reglas), haga clic en **Saliente**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-376">Under **Rules Type**, click **Outbound**.</span></span>
4. <span data-ttu-id="8f1f9-377">Busque la regla llamada **Out to AAD – User Join** y haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-377">Find the rule named **Out to AAD – User Join**, and click **Edit**.</span></span>
5. <span data-ttu-id="8f1f9-378">En el elemento emergente, responda **Sí** para crear una copia de la regla.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-378">In the pop-up, answer **Yes** to create a copy of the rule.</span></span>
6. <span data-ttu-id="8f1f9-379">En la página **Descripción**, cambie la **Precedencia** a un valor sin usar, como 50.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-379">On the **Description** page, change **Precedence** to an unused value, such as 50.</span></span>
7. <span data-ttu-id="8f1f9-380">Haga clic en **Scoping filter** (Filtro de ámbito) en el panel de navegación izquierdo y haga clic en **Agregar cláusula**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-380">Click **Scoping filter** on the left-hand navigation, and then click **Add clause**.</span></span> <span data-ttu-id="8f1f9-381">En **Atributo**, seleccione **mail**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-381">In **Attribute**, select **mail**.</span></span> <span data-ttu-id="8f1f9-382">En **Operador**, seleccione **ENDSWITH**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-382">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="8f1f9-383">En **Valor**, escriba **@contoso.com** y haga clic en **Agregar cláusula**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-383">In **Value**, type **@contoso.com**, and then click **Add clause**.</span></span> <span data-ttu-id="8f1f9-384">En **Atributo**, seleccione **userPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-384">In **Attribute**, select **userPrincipalName**.</span></span> <span data-ttu-id="8f1f9-385">En **Operador**, seleccione **ENDSWITH**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-385">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="8f1f9-386">En **Valor**, escriba **@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-386">In **Value**, type **@contoso.com**.</span></span>
8. <span data-ttu-id="8f1f9-387">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-387">Click **Save**.</span></span>
9. <span data-ttu-id="8f1f9-388">Para completar la configuración, debe ejecutar una **sincronización completa**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-388">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="8f1f9-389">Continúe leyendo la sección [Aplicación y comprobación de los cambios](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-389">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="apply-and-verify-changes"></a><span data-ttu-id="8f1f9-390">Aplicación y comprobación de los cambios</span><span class="sxs-lookup"><span data-stu-id="8f1f9-390">Apply and verify changes</span></span>
<span data-ttu-id="8f1f9-391">Una vez realizados los cambios de configuración, debe aplicarlos a los objetos ya presentes en el sistema.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-391">After you've made your configuration changes, you must apply them to the objects that are already present in the system.</span></span> <span data-ttu-id="8f1f9-392">También es posible que se deban procesar objetos que no estén en el motor de sincronización (y que el motor de sincronización necesite volver a leer el sistema de origen para comprobar el contenido).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-392">It might also be that the objects that aren't currently in the sync engine should be processed (and the sync engine needs to read the source system again to verify its content).</span></span>

<span data-ttu-id="8f1f9-393">Si cambió la configuración mediante el filtrado por **dominio** o **unidad organizativa**, deberá realizar una **Importación completa** seguida de una **Sincronización diferencial**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-393">If you changed the configuration by using **domain** or **organizational-unit** filtering, then you need to do a **Full import**, followed by **Delta synchronization**.</span></span>

<span data-ttu-id="8f1f9-394">Si cambió la configuración mediante el filtrado por **atributo**, deberá llevar a cabo una **Sincronización completa**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-394">If you changed the configuration by using **attribute** filtering, then you need to do a **Full synchronization**.</span></span>

<span data-ttu-id="8f1f9-395">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8f1f9-395">Do the following steps:</span></span>

1. <span data-ttu-id="8f1f9-396">Inicie el **servicio de sincronización** desde el menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-396">Start **Synchronization Service** from the **Start** menu.</span></span>
2. <span data-ttu-id="8f1f9-397">Seleccione **Conectores**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-397">Select **Connectors**.</span></span> <span data-ttu-id="8f1f9-398">En la lista **Conectores**, elija el conector en el que realizó un cambio de configuración antes.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-398">In the **Connectors** list, select the Connector where you made a configuration change earlier.</span></span> <span data-ttu-id="8f1f9-399">En **Acciones**, seleccione **Ejecutar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-399">In **Actions**, select **Run**.</span></span>  
   <span data-ttu-id="8f1f9-400">![Ejecución de conector](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span><span class="sxs-lookup"><span data-stu-id="8f1f9-400">![Connector run](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span></span>  
3. <span data-ttu-id="8f1f9-401">En **Run profiles**(Perfiles de ejecución), seleccione la operación mencionada en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-401">In **Run profiles**, select the operation that was mentioned in the previous section.</span></span> <span data-ttu-id="8f1f9-402">Si tiene que ejecutar dos acciones, ejecute la segunda una vez haya terminado la primera.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-402">If you need to run two actions, run the second after the first one has finished.</span></span> <span data-ttu-id="8f1f9-403">(La columna **State** (Estado) es **Inactivo** para el conector seleccionado).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-403">(The **State** column is **Idle** for the selected connector.)</span></span>

<span data-ttu-id="8f1f9-404">Después de la sincronización, todos los cambios se almacenan provisionalmente para exportarlos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-404">After the synchronization, all changes are staged to be exported.</span></span> <span data-ttu-id="8f1f9-405">Antes de realizar los cambios en Azure AD, se quiere comprobar que todos sean correctos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-405">Before you actually make the changes in Azure AD, you want to verify that all these changes are correct.</span></span>

1. <span data-ttu-id="8f1f9-406">Inicie un símbolo del sistema y vaya a `%Program Files%\Microsoft Azure AD Sync\bin`.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-406">Start a command prompt, and go to `%Program Files%\Microsoft Azure AD Sync\bin`.</span></span>
2. <span data-ttu-id="8f1f9-407">Ejecute `csexport "Name of Connector" %temp%\export.xml /f:x`.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-407">Run `csexport "Name of Connector" %temp%\export.xml /f:x`.</span></span>  
   <span data-ttu-id="8f1f9-408">El nombre del conector puede encontrarse en el servicio de sincronización.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-408">The name of the Connector is in Synchronization Service.</span></span> <span data-ttu-id="8f1f9-409">Tendrá un nombre similar a contoso.com – AAD en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-409">It has a name similar to "contoso.com – AAD" for Azure AD.</span></span>
3. <span data-ttu-id="8f1f9-410">Ejecute `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-410">Run `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`.</span></span>
4. <span data-ttu-id="8f1f9-411">Ahora tiene un archivo en %temp% denominado export.csv que se puede examinar en Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-411">You now have a file in %temp% named export.csv that can be examined in Microsoft Excel.</span></span> <span data-ttu-id="8f1f9-412">Este archivo contiene todos los cambios que se van a exportar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-412">This file contains all the changes that are about to be exported.</span></span>
5. <span data-ttu-id="8f1f9-413">Realice los cambios necesarios en los datos o la configuración y ejecute estos pasos de nuevo (importación y sincronización y comprobación) hasta que los cambios que se vayan a exportar sean los previstos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-413">Make the necessary changes to the data or configuration, and run these steps again (Import, Synchronize, and Verify) until the changes that are about to be exported are what you expect.</span></span>

<span data-ttu-id="8f1f9-414">Cuando esté satisfecho, exporte los cambios a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-414">When you're satisfied, export the changes to Azure AD.</span></span>

1. <span data-ttu-id="8f1f9-415">Seleccione **Conectores**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-415">Select **Connectors**.</span></span> <span data-ttu-id="8f1f9-416">En la lista **Conectores**, elija el conector de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-416">In the **Connectors** list, select the Azure AD Connector.</span></span> <span data-ttu-id="8f1f9-417">En **Acciones**, seleccione **Ejecutar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-417">In **Actions**, select **Run**.</span></span>
2. <span data-ttu-id="8f1f9-418">En **Run profiles** (Perfiles de ejecución), seleccione **Exportar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-418">In **Run profiles**, select **Export**.</span></span>
3. <span data-ttu-id="8f1f9-419">Si los cambios de configuración van a eliminar muchos objetos, verá un error al exportar si el número es mayor que el umbral configurado (de forma predeterminada, 500).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-419">If your configuration changes delete many objects, then you see an error in the export when the number is more than the configured threshold (by default 500).</span></span> <span data-ttu-id="8f1f9-420">Si aparece este error, deberá deshabilitar temporalmente la característica para [evitar eliminaciones por error](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-420">If you see this error, then you need to temporarily disable the "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" feature.</span></span>

<span data-ttu-id="8f1f9-421">Ahora es el momento de volver a habilitar el programador.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-421">Now it's time to enable the scheduler again.</span></span>

1. <span data-ttu-id="8f1f9-422">Abra el **Programador de tareas** en el menú **Inicio**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-422">Start **Task Scheduler** from the **Start** menu.</span></span>
2. <span data-ttu-id="8f1f9-423">Directamente en **Biblioteca del Programador de tareas**, busque la tarea **Programador de Sincronización de Azure AD**, haga clic con el botón derecho en ella y seleccione **Habilitar**.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-423">Directly under **Task Scheduler Library**, find the task named **Azure AD Sync Scheduler**, right-click, and select **Enable**.</span></span>

## <a name="group-based-filtering"></a><span data-ttu-id="8f1f9-424">Filtrado basado en grupo</span><span class="sxs-lookup"><span data-stu-id="8f1f9-424">Group-based filtering</span></span>
<span data-ttu-id="8f1f9-425">Puede configurar el filtrado por grupo la primera vez que instale Azure AD Connect con la [instalación personalizada](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-425">You can configure group-based filtering the first time that you install Azure AD Connect by using [custom installation](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups).</span></span> <span data-ttu-id="8f1f9-426">Se ha diseñado para una implementación piloto donde se vaya a sincronizar solo un pequeño conjunto de objetos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-426">It's intended for a pilot deployment where you want only a small set of objects to be synchronized.</span></span> <span data-ttu-id="8f1f9-427">Cuando deshabilite el filtrado por grupo, no lo podrá volver a habilitar.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-427">When you disable group-based filtering, it can't be enabled again.</span></span> <span data-ttu-id="8f1f9-428">El filtrado por grupo *no es compatible* con la configuración personalizada.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-428">It's *not supported* to use group-based filtering in a custom configuration.</span></span> <span data-ttu-id="8f1f9-429">Solo se admite para configurar esta característica con el Asistente para instalación.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-429">It's only supported to configure this feature by using the installation wizard.</span></span> <span data-ttu-id="8f1f9-430">Cuando haya completado la prueba piloto, utilice una de las opciones de filtrado de este tema.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-430">When you've completed your pilot, then use one of the other filtering options in this topic.</span></span> <span data-ttu-id="8f1f9-431">Si se usa el filtrado por UO junto con el filtrado basado en grupo, se deben incluir las unidades organizativas donde se encuentran el grupo y sus miembros.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-431">When using OU-based filtering in conjunction with group-based filtering, the OU(s) where the group and its members are located must be included.</span></span>

<span data-ttu-id="8f1f9-432">Al sincronizar varios bosques de AD, puede configurar el filtrado basado en grupos mediante la especificación de un grupo diferente para cada conector de AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-432">When synchronizing multiple AD forests, you can configure group-based filtering by specifying a different group for each AD connector.</span></span> <span data-ttu-id="8f1f9-433">Si desea sincronizar un usuario en un bosque de AD y el mismo usuario tiene uno o varios objetos de FSP (entidad de seguridad externa) en otros bosques de AD, debe asegurarse de que el objeto de usuario y todos sus objetos de FSP correspondientes se encuentran en el ámbito de filtrado basado en grupos.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-433">If you wish to synchronize a user in one AD forest and the same user has one or more corresponding FSP (Foreign Security Principal) objects in other AD forests, you must ensure that the user object and all its corresponding FSP objects are within group-based filtering scope.</span></span> <span data-ttu-id="8f1f9-434">Si uno o varios objetos de FSP se excluyen mediante el filtrado basado en grupos, el objeto de usuario no se sincronizará con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8f1f9-434">If one or more of the FSP objects are excluded by group-based filtering, the user object will not be synchronized to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8f1f9-435">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="8f1f9-435">Next steps</span></span>
- <span data-ttu-id="8f1f9-436">Más información sobre la configuración de la [Sincronización de Azure AD Connect](active-directory-aadconnectsync-whatis.md).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-436">Learn more about [Azure AD Connect sync](active-directory-aadconnectsync-whatis.md) configuration.</span></span>
- <span data-ttu-id="8f1f9-437">Más información sobre la [integración de las identidades locales con Azure AD](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="8f1f9-437">Learn more about [integrating your on-premises identities with Azure AD](active-directory-aadconnect.md).</span></span>

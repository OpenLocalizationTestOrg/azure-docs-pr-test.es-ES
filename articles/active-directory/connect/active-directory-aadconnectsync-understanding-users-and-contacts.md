---
title: "Sincronización de Azure AD Connect: descripción de usuarios y contactos | Microsoft Docs"
description: Explica los usuarios y los contactos en Azure AD Connect Sync.
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
ms.assetid: 8d204647-213a-4519-bd62-49563c421602
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: markvi;andkjell
ms.openlocfilehash: 495e926a1975128707212ba571d47cfc7c9507b3
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-users-and-contacts"></a><span data-ttu-id="7a9ce-103">Azure AD Connect Sync: descripción de usuarios y contactos</span><span class="sxs-lookup"><span data-stu-id="7a9ce-103">Azure AD Connect sync: Understanding Users and Contacts</span></span>
<span data-ttu-id="7a9ce-104">Hay diversas razones por las que podría interesarle tener varios bosques de Active Directory y hay diversas topologías de implementación.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-104">There are several different reasons why you would have multiple Active Directory forests and there are several different deployment topologies.</span></span> <span data-ttu-id="7a9ce-105">Los modelos comunes incluyen una implementación cuenta-recurso y bosques sincronizados de lista global de direcciones tras una fusión y adquisición.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-105">Common models include an account-resource deployment and GAL sync’ed forests after a merger & acquisition.</span></span> <span data-ttu-id="7a9ce-106">Sin embargo, aunque existan modelos puros, los modelos híbridos también son comunes.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-106">But even if there are pure models, hybrid models are common as well.</span></span> <span data-ttu-id="7a9ce-107">La configuración predeterminada de Azure AD Connect no da por supuesto ningún modelo en particular, pero en función de cómo se haya seleccionado la coincidencia de usuarios en la guía de instalación, pueden observarse comportamientos diferentes.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-107">The default configuration in Azure AD Connect sync does not assume any particular model but depending on how user matching was selected in the installation guide, different behaviors can be observed.</span></span>

<span data-ttu-id="7a9ce-108">En este tema, veremos cómo se comporta la configuración predeterminada en ciertas topologías.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-108">In this topic, we will go through how the default configuration behaves in certain topologies.</span></span> <span data-ttu-id="7a9ce-109">Además analizaremos la configuración, que puede examinarse mediante el Editor de reglas de sincronización.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-109">We will go through the configuration and the Synchronization Rules Editor can be used to look at the configuration.</span></span>

<span data-ttu-id="7a9ce-110">Existen varias reglas generales que la configuración da por supuesto:</span><span class="sxs-lookup"><span data-stu-id="7a9ce-110">There are a few general rules the configuration assumes:</span></span>

* <span data-ttu-id="7a9ce-111">Independientemente del orden en el que importemos los directorios de Active Directory de origen, el resultado final siempre debe ser el mismo.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-111">Regardless of which order we import from the source Active Directories, the end result should always be the same.</span></span>
* <span data-ttu-id="7a9ce-112">Una cuenta activa siempre aporta información de inicio de sesión, **userPrincipalName** y **sourceAnchor** incluidos.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-112">An active account will always contribute sign-in information, including **userPrincipalName** and **sourceAnchor**.</span></span>
* <span data-ttu-id="7a9ce-113">Una cuenta deshabilitada aportará userPrincipalName y sourceAnchor, a menos que sea un buzón vinculado si no hay ninguna cuenta activa a encontrar.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-113">A disabled account will contribute userPrincipalName and sourceAnchor, unless it is a linked mailbox, if there is no active account to be found.</span></span>
* <span data-ttu-id="7a9ce-114">Una cuenta con un buzón vinculado nunca se utilizará para userPrincipalName y sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-114">An account with a linked mailbox will never be used for userPrincipalName and sourceAnchor.</span></span> <span data-ttu-id="7a9ce-115">Se da por supuesto que más adelante se encontrará una cuenta activa.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-115">It is assumed that an active account will be found later.</span></span>
* <span data-ttu-id="7a9ce-116">Podría aprovisionarse un objeto de contacto en Azure AD como contacto o como usuario.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-116">A contact object might be provisioned to Azure AD as a contact or as a user.</span></span> <span data-ttu-id="7a9ce-117">No se sabe con seguridad hasta que se han procesado todos los bosques de Active Directory de origen.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-117">You don’t really know until all source Active Directory forests have been processed.</span></span>

## <a name="contacts"></a><span data-ttu-id="7a9ce-118">Contactos</span><span class="sxs-lookup"><span data-stu-id="7a9ce-118">Contacts</span></span>
<span data-ttu-id="7a9ce-119">Tras una fusión o una adquisición donde la solución GALSync actúa como puente entre dos o más bosques de Exchange, es habitual que los contactos representen a un usuario en un bosque diferente.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-119">Having contacts representing a user in a different forest is common after a merger & acquisition where a GALSync solution is bridging two or more Exchange forests.</span></span> <span data-ttu-id="7a9ce-120">El objeto de contacto siempre se une desde el espacio del conector al metaverso mediante el atributo de correo.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-120">The contact object is always joining from the connector space to the metaverse using the mail attribute.</span></span> <span data-ttu-id="7a9ce-121">Si ya existe un objeto de contacto o un objeto de usuario con la misma dirección de correo, los objetos se unen.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-121">If there is already a contact object or user object with the same mail address, the objects are joined together.</span></span> <span data-ttu-id="7a9ce-122">Esto se configura en la regla **In from AD – Contact Join**.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-122">This is configured in the rule **In from AD – Contact Join**.</span></span> <span data-ttu-id="7a9ce-123">Existe también una regla llamada **In from AD – Contact Common** con un flujo de atributos al atributo de metaverso **sourceObjectType** con la constante **Contact**.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-123">There is also a rule named **In from AD – Contact Common** with an attribute flow to the metaverse attribute **sourceObjectType** with the constant **Contact**.</span></span> <span data-ttu-id="7a9ce-124">Esta regla tiene una precedencia muy baja, por lo que si algún objeto de usuario se une al mismo objeto de metaverso, la regla **In from AD – User Common** aportará el valor User a este atributo.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-124">This rule has very low precedence so if any user object is joined to the same metaverse object, then the rule **In from AD – User Common** will contribute the value User to this attribute.</span></span> <span data-ttu-id="7a9ce-125">Con esta regla, este atributo tendrá el valor Contact si no se ha unido ningún usuario y el valor User si se ha encontrado por lo menos un usuario.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-125">With this rule, this attribute will have the value Contact if no user has been joined and the value User if at least one user has been found.</span></span>

<span data-ttu-id="7a9ce-126">Para aprovisionar un objeto en Azure AD, la regla saliente **Out to AAD – Contact Join** creará un objeto de contacto si el atributo de metaverso **sourceObjectType** se establece en **Contact**.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-126">For provisioning an object to Azure AD, the outbound rule **Out to AAD – Contact Join** will create a contact object if the metaverse attribute **sourceObjectType** is set to **Contact**.</span></span> <span data-ttu-id="7a9ce-127">En cambio, si este atributo se establece en **User**, la regla **Out to AAD – User Join** creará un objeto de usuario.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-127">If this attribute is set to **User**, then the rule **Out to AAD – User Join** will create a user object instead.</span></span>
<span data-ttu-id="7a9ce-128">Es posible que un objeto se promueva de Contact a User si se importan o sincronizan más directorios de Active Directory de origen.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-128">It is possible that an object is promoted from Contact to User when more source Active Directories are imported and synchronized.</span></span>

<span data-ttu-id="7a9ce-129">Por ejemplo, en una topología GALSync encontraremos objetos de contacto para todos los usuarios en el segundo bosque cuando importemos el primer bosque.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-129">For example, in a GALSync topology we will find contact objects for everyone in the second forest when we import the first forest.</span></span> <span data-ttu-id="7a9ce-130">Esto llevará a cabo nuevos objetos de contacto en el Conector AAD.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-130">This will stage new contact objects in the AAD Connector.</span></span> <span data-ttu-id="7a9ce-131">Cuando más adelante importemos y sincronicemos el segundo bosque, encontraremos los usuarios reales y los uniremos a los objetos de metaverso existentes.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-131">When we later import and synchronize the second forest, we will find the real users and join them to the existing metaverse objects.</span></span> <span data-ttu-id="7a9ce-132">Entonces eliminaremos el objeto de contacto en AAD y crearemos en su lugar un objeto de usuario nuevo.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-132">We will then delete the contact object in AAD and create a new user object instead.</span></span>

<span data-ttu-id="7a9ce-133">Si en su topología los usuarios están representados como contactos, asegúrese de que selecciona la coincidencia de usuario en el atributo de correo en la guía de instalación.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-133">If you have a topology where users are represented as contacts, make sure you select to match users on the mail attribute in the installation guide.</span></span> <span data-ttu-id="7a9ce-134">Si selecciona otra opción, tendrá una configuración que dependerá del orden.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-134">If you select another option, then you will have an order dependent configuration.</span></span> <span data-ttu-id="7a9ce-135">Los objetos de contacto siempre se unirán en el atributo de correo, mientras que los objetos de usuario solo se unirán en el atributo de correo si se seleccionó esta opción en la guía de instalación.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-135">Contact objects will always join on the mail attribute, but user objects will only join on the mail attribute if this option was selected in the installation guide.</span></span> <span data-ttu-id="7a9ce-136">Como resultado, puede tener dos objetos diferentes en el metaverso con el mismo atributo de correo si el objeto de contacto se importó antes del objeto de usuario.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-136">You could then end up with two different objects in the metaverse with the same mail attribute if the contact object was imported before the user object.</span></span> <span data-ttu-id="7a9ce-137">Durante la exportación a Azure AD, se producirá un error.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-137">During export to Azure AD, an error will be thrown.</span></span> <span data-ttu-id="7a9ce-138">Este comportamiento se debe a cuestiones de diseño, e indica que los datos son incorrectos o que la topología no se identificó correctamente durante la instalación.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-138">This behavior is by design and would indicate bad data or that the topology was not correctly identified during the installation.</span></span>

## <a name="disabled-accounts"></a><span data-ttu-id="7a9ce-139">Cuentas deshabilitadas</span><span class="sxs-lookup"><span data-stu-id="7a9ce-139">Disabled accounts</span></span>
<span data-ttu-id="7a9ce-140">Las cuentas deshabilitadas se sincronizan también en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-140">Disabled accounts are synchronized as well to Azure AD.</span></span> <span data-ttu-id="7a9ce-141">Las cuentas deshabilitadas suelen representar recursos en Exchange, por ejemplo salas de conferencias.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-141">Disabled accounts are common to represent resources in Exchange, for example conference rooms.</span></span> <span data-ttu-id="7a9ce-142">La excepción son los usuarios con un buzón vinculado; como ya se indicó anteriormente, nunca aprovisionarán una cuenta en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-142">The exception is users with a linked mailbox; as previously mentioned, these will never provision an account to Azure AD.</span></span>

<span data-ttu-id="7a9ce-143">Esto se basa en la suposición de que si se encuentra una cuenta de usuario deshabilitada, más adelante no se encontrará otra cuenta activa, y el objeto se aprovisiona en Azure AD con los valores encontrados para userPrincipalName y sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-143">The assumption is that if a disabled user account is found, then we will not find another active account later and the object is provisioned to Azure AD with the userPrincipalName and sourceAnchor found.</span></span> <span data-ttu-id="7a9ce-144">En caso de que otra cuenta activa se una al mismo objeto de metaverso, se usarán sus valores para userPrincipalName y sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-144">In case another active account will join to the same metaverse object, then its userPrincipalName and sourceAnchor will be used.</span></span>

## <a name="changing-sourceanchor"></a><span data-ttu-id="7a9ce-145">Cambiar sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="7a9ce-145">Changing sourceAnchor</span></span>
<span data-ttu-id="7a9ce-146">Si se ha exportado un objeto a Azure AD, ya no se permite cambiar el valor de sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-146">When an object has been exported to Azure AD then it is not allowed to change the sourceAnchor anymore.</span></span> <span data-ttu-id="7a9ce-147">Una vez exportado un objeto, el atributo de metaverso **cloudSourceAnchor** se establece con el valor de **sourceAnchor** que acepta Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-147">When the object has been exported the metaverse attribute **cloudSourceAnchor** is set with the **sourceAnchor** value accepted by Azure AD.</span></span> <span data-ttu-id="7a9ce-148">Si se cambia **sourceAnchor** y no coincide con **cloudSourceAnchor**, la regla **Out to AAD – User Join** producirá el error **El atributo sourceAnchor ha cambiado**.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-148">If **sourceAnchor** is changed and not match **cloudSourceAnchor**, the rule **Out to AAD – User Join** will throw the error **sourceAnchor attribute has changed**.</span></span> <span data-ttu-id="7a9ce-149">En este caso habrá que corregir la configuración o los datos, de modo que el mismo valor de sourceAnchor esté presente en el metaverso para que el objeto pueda sincronizarse de nuevo.</span><span class="sxs-lookup"><span data-stu-id="7a9ce-149">In this case, the configuration or data must be corrected so the same sourceAnchor is present in the metaverse again before the object can be synchronized again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7a9ce-150">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="7a9ce-150">Additional Resources</span></span>
* [<span data-ttu-id="7a9ce-151">Sincronización de Azure AD Connect: personalización de las opciones de sincronización</span><span class="sxs-lookup"><span data-stu-id="7a9ce-151">Azure AD Connect Sync: Customizing Synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="7a9ce-152">Integración de las identidades locales con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="7a9ce-152">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)


---
title: 'Azure AD Connect: conocimiento del aprovisionamiento declarativo | Microsoft Docs'
description: "Explica el modelo de configuración de aprovisionamiento declarativo en Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: cfbb870d-be7d-47b3-ba01-9e78121f0067
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 7497ec2ca658c3790227c56ef1755d9a1cb74e0a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-declarative-provisioning"></a><span data-ttu-id="acc05-103">Sincronización de Azure AD Connect: conocimiento del aprovisionamiento declarativo</span><span class="sxs-lookup"><span data-stu-id="acc05-103">Azure AD Connect sync: Understanding Declarative Provisioning</span></span>
<span data-ttu-id="acc05-104">Este tema explica el modelo de configuración de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="acc05-104">This topic explains the configuration model in Azure AD Connect.</span></span> <span data-ttu-id="acc05-105">El modelo se denomina aprovisionamiento declarativo y permite cambiar una configuración con facilidad.</span><span class="sxs-lookup"><span data-stu-id="acc05-105">The model is called Declarative Provisioning and it allows you to make a configuration change with ease.</span></span> <span data-ttu-id="acc05-106">Muchas cosas descritas en este tema son avanzadas y no son necesarias para la mayoría de los escenarios de los clientes.</span><span class="sxs-lookup"><span data-stu-id="acc05-106">Many things described in this topic are advanced and not required for most customer scenarios.</span></span>

## <a name="overview"></a><span data-ttu-id="acc05-107">Información general</span><span class="sxs-lookup"><span data-stu-id="acc05-107">Overview</span></span>
<span data-ttu-id="acc05-108">El aprovisionamiento declarativo consiste en procesar objetos procedentes de un directorio de origen conectado y determina cómo el objeto y los atributos deben transformarse desde un origen a un destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-108">Declarative provisioning is processing objects coming in from a source connected directory and determines how the object and attributes should be transformed from a source to a target.</span></span> <span data-ttu-id="acc05-109">Un objeto se procesa en una canalización de sincronización, que es la misma para las reglas de entrada y salidas.</span><span class="sxs-lookup"><span data-stu-id="acc05-109">An object is processed in a sync pipeline and the pipeline is the same for inbound and outbound rules.</span></span> <span data-ttu-id="acc05-110">Una regla de entrada es de un espacio conector al metaverso y una regla de salida del metaverso a un espacio conector.</span><span class="sxs-lookup"><span data-stu-id="acc05-110">An inbound rule is from a connector space to the metaverse and an outbound rule is from the metaverse to a connector space.</span></span>

![Canalización de sincronización](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/sync1.png)  

<span data-ttu-id="acc05-112">La canalización consta de varios módulos diferentes.</span><span class="sxs-lookup"><span data-stu-id="acc05-112">The pipeline has several different modules.</span></span> <span data-ttu-id="acc05-113">Cada uno de ellos es responsable de un concepto de sincronización de objetos.</span><span class="sxs-lookup"><span data-stu-id="acc05-113">Each one is responsible for one concept in object synchronization.</span></span>

![Canalización de sincronización](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/pipeline.png)  

* <span data-ttu-id="acc05-115">Origen: el objeto de origen.</span><span class="sxs-lookup"><span data-stu-id="acc05-115">Source, The source object</span></span>
* <span data-ttu-id="acc05-116">[Ámbito](#scope): busca todas las reglas de sincronización que están en ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-116">[Scope](#scope), Finds all sync rules that are in scope</span></span>
* <span data-ttu-id="acc05-117">[Unión](#join): determina la relación entre el espacio conector y el metaverso.</span><span class="sxs-lookup"><span data-stu-id="acc05-117">[Join](#join), Determines relationship between connector space and metaverse</span></span>
* <span data-ttu-id="acc05-118">[Transformación](#transform): calcula cómo deben transformarse los atributos y el flujo.</span><span class="sxs-lookup"><span data-stu-id="acc05-118">[Transform](#transform), Calculates how attributes should be transformed and flow</span></span>
* <span data-ttu-id="acc05-119">[Prioridad](#precedence): resuelve las contribuciones de atributo en conflicto.</span><span class="sxs-lookup"><span data-stu-id="acc05-119">[Precedence](#precedence), Resolves conflicting attribute contributions</span></span>
* <span data-ttu-id="acc05-120">Destino: el objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-120">Target, The target object</span></span>

## <a name="scope"></a><span data-ttu-id="acc05-121">Ámbito</span><span class="sxs-lookup"><span data-stu-id="acc05-121">Scope</span></span>
<span data-ttu-id="acc05-122">El módulo de ámbito consiste en evaluar un objeto, y determina las reglas que están en el ámbito y deben incluirse en el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="acc05-122">The scope module is evaluating an object and determines the rules that are in scope and should be included in the processing.</span></span> <span data-ttu-id="acc05-123">En función de los valores de los atributos en el objeto, se evalúan diferentes reglas de sincronización para que estén en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-123">Depending on the attributes values on the object, different sync rules are evaluated to be in scope.</span></span> <span data-ttu-id="acc05-124">Por ejemplo, un usuario deshabilitado sin ningún buzón de Exchange tiene reglas diferentes a las de un usuario con un buzón habilitado.</span><span class="sxs-lookup"><span data-stu-id="acc05-124">For example, a disabled user with no Exchange mailbox does have different rules than an enabled user with a mailbox.</span></span>  
![Ámbito](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope1.png)  

<span data-ttu-id="acc05-126">El ámbito se define como cláusulas y grupos.</span><span class="sxs-lookup"><span data-stu-id="acc05-126">The scope is defined as groups and clauses.</span></span> <span data-ttu-id="acc05-127">Las cláusulas están dentro de un grupo.</span><span class="sxs-lookup"><span data-stu-id="acc05-127">The clauses are inside a group.</span></span> <span data-ttu-id="acc05-128">Se usa un operador lógico AND entre todas las cláusulas de un grupo.</span><span class="sxs-lookup"><span data-stu-id="acc05-128">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="acc05-129">Por ejemplo, (departamento = IT AND país = Dinamarca).</span><span class="sxs-lookup"><span data-stu-id="acc05-129">For example, (department =IT AND country = Denmark).</span></span> <span data-ttu-id="acc05-130">Se usa un operador lógico OR entre los grupos.</span><span class="sxs-lookup"><span data-stu-id="acc05-130">A logical OR is used between groups.</span></span>

![Ámbito](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope2.png)  
<span data-ttu-id="acc05-132">El ámbito de esta imagen se debe leer como (departamento = IT AND país = Dinamarca) OR (país = Suecia).</span><span class="sxs-lookup"><span data-stu-id="acc05-132">The scope in this picture should be read as (department = IT AND country = Denmark) OR (country=Sweden).</span></span> <span data-ttu-id="acc05-133">Si el grupo 1 o el grupo 2 se evalúa como verdadero, la regla está en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-133">If either group 1 or group 2 is evaluated to true, then the rule is in scope.</span></span>

<span data-ttu-id="acc05-134">El módulo de ámbito admite las siguientes operaciones:</span><span class="sxs-lookup"><span data-stu-id="acc05-134">The scope module supports the following operations.</span></span>

| <span data-ttu-id="acc05-135">Operación</span><span class="sxs-lookup"><span data-stu-id="acc05-135">Operation</span></span> | <span data-ttu-id="acc05-136">Description</span><span class="sxs-lookup"><span data-stu-id="acc05-136">Description</span></span> |
| --- | --- |
| <span data-ttu-id="acc05-137">EQUAL, NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="acc05-137">EQUAL, NOTEQUAL</span></span> |<span data-ttu-id="acc05-138">Una comparación de cadenas que evalúa si el valor es igual al valor del atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-138">A string compare that evaluates if value is equal to the value in the attribute.</span></span> <span data-ttu-id="acc05-139">Para los atributos con varios valores, consulte ISIN e ISNOTIN.</span><span class="sxs-lookup"><span data-stu-id="acc05-139">For multi-valued attributes, see ISIN and ISNOTIN.</span></span> |
| <span data-ttu-id="acc05-140">LESSTHAN, LESSTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="acc05-140">LESSTHAN, LESSTHAN_OR_EQUAL</span></span> |<span data-ttu-id="acc05-141">Una comparación de cadenas que evalúa si el valor es menor que el valor en el atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-141">A string compare that evaluates if value is less than of the value in the attribute.</span></span> |
| <span data-ttu-id="acc05-142">CONTAINS, NOTCONTAINS</span><span class="sxs-lookup"><span data-stu-id="acc05-142">CONTAINS, NOTCONTAINS</span></span> |<span data-ttu-id="acc05-143">Una comparación de cadenas que evalúa si el valor puede encontrarse en cualquier lugar dentro del valor del atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-143">A string compare that evaluates if value can be found somewhere inside value in the attribute.</span></span> |
| <span data-ttu-id="acc05-144">STARTSWITH, NOTSTARTSWITH</span><span class="sxs-lookup"><span data-stu-id="acc05-144">STARTSWITH, NOTSTARTSWITH</span></span> |<span data-ttu-id="acc05-145">Una comparación de cadenas que evalúa si el valor está al principio del valor del atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-145">A string compare that evaluates if value is in the beginning of the value in the attribute.</span></span> |
| <span data-ttu-id="acc05-146">ENDSWITH, NOTENDSWITH</span><span class="sxs-lookup"><span data-stu-id="acc05-146">ENDSWITH, NOTENDSWITH</span></span> |<span data-ttu-id="acc05-147">Una comparación de cadenas que evalúa si el valor está al final del valor del atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-147">A string compare that evaluates if value is in the end of the value in the attribute.</span></span> |
| <span data-ttu-id="acc05-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="acc05-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span></span> |<span data-ttu-id="acc05-149">Una comparación de cadenas que evalúa si el valor es mayor que el valor en el atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-149">A string compare that evaluates if value is greater than of the value in the attribute.</span></span> |
| <span data-ttu-id="acc05-150">ISNULL, ISNOTNULL</span><span class="sxs-lookup"><span data-stu-id="acc05-150">ISNULL, ISNOTNULL</span></span> |<span data-ttu-id="acc05-151">Evalúa si el atributo no está presente en el objeto.</span><span class="sxs-lookup"><span data-stu-id="acc05-151">Evaluates if the attribute is absent from the object.</span></span> <span data-ttu-id="acc05-152">Si el atributo no está presente y, por tanto, es nulo, la regla está en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-152">If the attribute is not present and therefore null, then the rule is in scope.</span></span> |
| <span data-ttu-id="acc05-153">ISIN, ISNOTIN</span><span class="sxs-lookup"><span data-stu-id="acc05-153">ISIN, ISNOTIN</span></span> |<span data-ttu-id="acc05-154">Evalúa si el valor está presente en el atributo definido.</span><span class="sxs-lookup"><span data-stu-id="acc05-154">Evaluates if the value is present in the defined attribute.</span></span> <span data-ttu-id="acc05-155">Esta operación es la variación con múltiples valores de EQUAL y NOTEQUAL.</span><span class="sxs-lookup"><span data-stu-id="acc05-155">This operation is the multi-valued variation of EQUAL and NOTEQUAL.</span></span> <span data-ttu-id="acc05-156">Se supone que el atributo es tiene múltiples valores y si el valor puede encontrarse en cualquiera de los valores de atributo; en ese caso, la regla está en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-156">The attribute is supposed to be a multi-valued attribute and if the value can be found in any of the attribute values, then the rule is in scope.</span></span> |
| <span data-ttu-id="acc05-157">ISBITSET, ISNOTBITSET</span><span class="sxs-lookup"><span data-stu-id="acc05-157">ISBITSET, ISNOTBITSET</span></span> |<span data-ttu-id="acc05-158">Evalúa si hay un determinado bit establecido.</span><span class="sxs-lookup"><span data-stu-id="acc05-158">Evaluates if a particular bit is set.</span></span> <span data-ttu-id="acc05-159">Por ejemplo, se puede usar para evaluar los bits de userAccountControl para ver si un usuario está habilitado o deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="acc05-159">For example, can be used to evaluate the bits in userAccountControl to see if a user is enabled or disabled.</span></span> |
| <span data-ttu-id="acc05-160">ISMEMBEROF, ISNOTMEMBEROF</span><span class="sxs-lookup"><span data-stu-id="acc05-160">ISMEMBEROF, ISNOTMEMBEROF</span></span> |<span data-ttu-id="acc05-161">El valor debe contener un DN para un grupo en el espacio conector.</span><span class="sxs-lookup"><span data-stu-id="acc05-161">The value should contain a DN to a group in the connector space.</span></span> <span data-ttu-id="acc05-162">Si el objeto es un miembro del grupo especificado, la regla está en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-162">If the object is a member of the group specified, the rule is in scope.</span></span> |

## <a name="join"></a><span data-ttu-id="acc05-163">Unión</span><span class="sxs-lookup"><span data-stu-id="acc05-163">Join</span></span>
<span data-ttu-id="acc05-164">El módulo de unión en la canalización de sincronización es responsable de encontrar la relación entre el objeto en el origen y un objeto en el destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-164">The join module in the sync pipeline is responsible for finding the relationship between the object in the source and an object in the target.</span></span> <span data-ttu-id="acc05-165">En una regla de entrada, esta relación sería un objeto en un espacio conector que busca una relación con un objeto en el metaverso.</span><span class="sxs-lookup"><span data-stu-id="acc05-165">On an inbound rule, this relationship would be an object in a connector space finding a relationship to an object in the metaverse.</span></span>  
![Unión entre cs y mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join1.png)  
<span data-ttu-id="acc05-167">El objetivo es ver si ya hay un objeto en el metaverso, creado por otro conector, al que debe estar asociado.</span><span class="sxs-lookup"><span data-stu-id="acc05-167">The goal is to see if there is an object already in the metaverse, created by another Connector, it should be associated with.</span></span> <span data-ttu-id="acc05-168">Por ejemplo, en un bosque de cuenta-recurso, el usuario del bosque de cuentas debe unirse al usuario del bosque de recursos.</span><span class="sxs-lookup"><span data-stu-id="acc05-168">For example, in an account-resource forest the user from the account forest should be joined with the user from the resource forest.</span></span>

<span data-ttu-id="acc05-169">Las uniones se utilizan principalmente en las reglas de entrada para unir objetos del espacio conector para el mismo objeto de metaverso.</span><span class="sxs-lookup"><span data-stu-id="acc05-169">Joins are used mostly on inbound rules to join connector space objects together to the same metaverse object.</span></span>

<span data-ttu-id="acc05-170">Las uniones se definen como uno o varios grupos.</span><span class="sxs-lookup"><span data-stu-id="acc05-170">The joins are defined as one or more groups.</span></span> <span data-ttu-id="acc05-171">Dentro de un grupo hay cláusulas.</span><span class="sxs-lookup"><span data-stu-id="acc05-171">Inside a group, you have clauses.</span></span> <span data-ttu-id="acc05-172">Se usa un operador lógico AND entre todas las cláusulas de un grupo.</span><span class="sxs-lookup"><span data-stu-id="acc05-172">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="acc05-173">Se usa un operador lógico OR entre los grupos.</span><span class="sxs-lookup"><span data-stu-id="acc05-173">A logical OR is used between groups.</span></span> <span data-ttu-id="acc05-174">El orden de procesamiento de los grupos es de arriba a abajo.</span><span class="sxs-lookup"><span data-stu-id="acc05-174">The groups are processed in order from top to bottom.</span></span> <span data-ttu-id="acc05-175">Cuando un grupo encuentra exactamente una coincidencia con un objeto en el destino, no se evalúa ninguna otra regla de unión.</span><span class="sxs-lookup"><span data-stu-id="acc05-175">When one group has found exactly one match with an object in the target, then no other join rules are evaluated.</span></span> <span data-ttu-id="acc05-176">Si se encuentran cero o más de un objeto, el procesamiento continúa con el siguiente grupo de reglas.</span><span class="sxs-lookup"><span data-stu-id="acc05-176">If zero or more than one object is found, processing continues to the next group of rules.</span></span> <span data-ttu-id="acc05-177">Por este motivo, las reglas deben crearse en el orden de primero la más explícita y la más aproximada al final.</span><span class="sxs-lookup"><span data-stu-id="acc05-177">For this reason, the rules should be created in the order of most explicit first and more fuzzy at the end.</span></span>  
![Definición de unión](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join2.png)  
<span data-ttu-id="acc05-179">Las uniones de esta imagen se procesan de arriba a abajo.</span><span class="sxs-lookup"><span data-stu-id="acc05-179">The joins in this picture are processed from top to bottom.</span></span> <span data-ttu-id="acc05-180">En primer lugar, la canalización de sincronización ve si hay una coincidencia en employeeID.</span><span class="sxs-lookup"><span data-stu-id="acc05-180">First the sync pipeline sees if there is a match on employeeID.</span></span> <span data-ttu-id="acc05-181">Si no la hay, la segunda regla ve si el nombre de cuenta puede utilizarse para unir los objetos.</span><span class="sxs-lookup"><span data-stu-id="acc05-181">If not, the second rule sees if the account name can be used to join the objects together.</span></span> <span data-ttu-id="acc05-182">Si tampoco hay ninguna coincidencia, la tercera y última regla es una coincidencia más aproximada que utiliza el nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="acc05-182">If that is not a match either, the third and final rule is a more fuzzy match by using the name of user.</span></span>

<span data-ttu-id="acc05-183">Si se han evaluado todas las reglas de unión y no hay ninguna coincidencia exacta, se usa el valor de **Tipo de vínculo** en la página **Descripción**.</span><span class="sxs-lookup"><span data-stu-id="acc05-183">If all join rules have been evaluated and there is not exactly one match, the **Link Type** on the **Description** page is used.</span></span> <span data-ttu-id="acc05-184">Si este valor se establece en **Aprovisionar**, se crea un objeto en el destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-184">If this option is set to **Provision**, then a new object in the target is created.</span></span>  
<span data-ttu-id="acc05-185">![Aprovisionar o unir](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span><span class="sxs-lookup"><span data-stu-id="acc05-185">![Provision or join](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span></span>  

<span data-ttu-id="acc05-186">Un objeto solo debe tener una regla de sincronización con reglas de unión en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-186">An object should only have one single sync rule with join rules in scope.</span></span> <span data-ttu-id="acc05-187">Si hay varias reglas de sincronización donde se define la unión, se produce un error.</span><span class="sxs-lookup"><span data-stu-id="acc05-187">If there are multiple sync rules where join is defined, an error occurs.</span></span> <span data-ttu-id="acc05-188">No se utiliza la prioridad para resolver conflictos de unión.</span><span class="sxs-lookup"><span data-stu-id="acc05-188">Precedence is not used to resolve join conflicts.</span></span> <span data-ttu-id="acc05-189">Un objeto debe tener una regla de unión en el ámbito para que los atributos fluyan con la misma dirección entrante y saliente.</span><span class="sxs-lookup"><span data-stu-id="acc05-189">An object must have a join rule in scope for attributes to flow with the same inbound/outbound direction.</span></span> <span data-ttu-id="acc05-190">Si necesita que fluyan atributos entrantes y salientes al mismo objeto, debe tener una regla de sincronización de entrada y de salida con unión.</span><span class="sxs-lookup"><span data-stu-id="acc05-190">If you need to flow attributes both inbound and outbound to the same object, you must have both an inbound and an outbound sync rule with join.</span></span>

<span data-ttu-id="acc05-191">La unión de salida tiene un comportamiento especial cuando intenta aprovisionar un objeto en un espacio conector de destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-191">Outbound join has a special behavior when it tries to provision an object to a target connector space.</span></span> <span data-ttu-id="acc05-192">Se utiliza el atributo DN para probar primero una inversión-unión.</span><span class="sxs-lookup"><span data-stu-id="acc05-192">The DN attribute is used to first try a reverse-join.</span></span> <span data-ttu-id="acc05-193">Si ya hay un objeto en el espacio conector de destino con el mismo DN, los objetos se unen.</span><span class="sxs-lookup"><span data-stu-id="acc05-193">If there is already an object in the target connector space with the same DN, the objects are joined.</span></span>

<span data-ttu-id="acc05-194">El módulo de unión solo se evalúa una vez cuando una nueva regla de sincronización entra en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-194">The join module is only evaluated once when a new sync rule comes into scope.</span></span> <span data-ttu-id="acc05-195">Cuando se ha unido un objeto, no se anula la unión ni siquiera si ya no se cumplen los criterios de unión.</span><span class="sxs-lookup"><span data-stu-id="acc05-195">When an object has joined, it is not disjoining even if the join criteria is no longer satisfied.</span></span> <span data-ttu-id="acc05-196">Si desea anular la unión de un objeto, se debe sacar del ámbito la regla de sincronización que unió los objetos.</span><span class="sxs-lookup"><span data-stu-id="acc05-196">If you want to disjoin an object, the sync rule that joined the objects must go out of scope.</span></span>

### <a name="metaverse-delete"></a><span data-ttu-id="acc05-197">Eliminación del metaverso</span><span class="sxs-lookup"><span data-stu-id="acc05-197">Metaverse delete</span></span>
<span data-ttu-id="acc05-198">Un objeto de metaverso permanece mientras hay una regla de sincronización en el ámbito con **Tipo de vínculo** establecido en **Aprovisionar** o **StickyJoin** (Unión permanente).</span><span class="sxs-lookup"><span data-stu-id="acc05-198">A metaverse object remains as long as there is one sync rule in scope with **Link Type** set to **Provision** or **StickyJoin**.</span></span> <span data-ttu-id="acc05-199">Una unión permanente se utiliza cuando un conector no puede aprovisionar un nuevo objeto en el metaverso, pero cuando está unido, debe eliminarse en el origen antes de eliminar el objeto de metaverso.</span><span class="sxs-lookup"><span data-stu-id="acc05-199">A StickyJoin is used when a Connector is not allowed to provision a new object to the metaverse, but when it has joined, it must be deleted in the source before the metaverse object is deleted.</span></span>

<span data-ttu-id="acc05-200">Cuando se elimina un objeto de metaverso, todos los objetos asociados a una regla de sincronización de salida marcada para **aprovisionar** están marcados para su eliminación.</span><span class="sxs-lookup"><span data-stu-id="acc05-200">When a metaverse object is deleted, all objects associated with an outbound sync rule marked for **provision** are marked for a delete.</span></span>

## <a name="transformations"></a><span data-ttu-id="acc05-201">Transformaciones</span><span class="sxs-lookup"><span data-stu-id="acc05-201">Transformations</span></span>
<span data-ttu-id="acc05-202">Las transformaciones se usan para definir cómo deben fluir los atributos del origen al destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-202">The transformations are used to define how attributes should flow from the source to the target.</span></span> <span data-ttu-id="acc05-203">Los flujos pueden tener uno de los siguientes **tipos de flujo**: directo, constante o expresión.</span><span class="sxs-lookup"><span data-stu-id="acc05-203">The flows can have one of the following **flow types**: Direct, Constant, or Expression.</span></span> <span data-ttu-id="acc05-204">En un flujo directo, un valor de atributo fluye tal cual, sin transformaciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="acc05-204">A direct flow, flows an attribute value as-is with no additional transformations.</span></span> <span data-ttu-id="acc05-205">Un valor constante establece el valor especificado.</span><span class="sxs-lookup"><span data-stu-id="acc05-205">A constant value sets the specified value.</span></span> <span data-ttu-id="acc05-206">Una expresión utiliza el lenguaje de expresiones de aprovisionamiento declarativo para expresar cómo debe ser la transformación.</span><span class="sxs-lookup"><span data-stu-id="acc05-206">An expression uses the declarative provisioning expression language to express how the transformation should be.</span></span> <span data-ttu-id="acc05-207">Los detalles para el lenguaje de expresiones se pueden encontrar en el tema sobre el [conocimiento de expresiones de aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="acc05-207">The details for the expression language can be found in the [understanding declarative provisioning expression language](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) topic.</span></span>

![Aprovisionar o unir](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/transformations1.png)  

<span data-ttu-id="acc05-209">La casilla **Aplicar una vez** define que el atributo solo se debe establecer cuando el objeto se crea inicialmente.</span><span class="sxs-lookup"><span data-stu-id="acc05-209">The **Apply once** checkbox defines that the attribute should only be set when the object is initially created.</span></span> <span data-ttu-id="acc05-210">Por ejemplo, esta configuración se puede utilizar para establecer una contraseña inicial para un nuevo objeto de usuario.</span><span class="sxs-lookup"><span data-stu-id="acc05-210">For example, this configuration can be used to set an initial password for a new user object.</span></span>

### <a name="merging-attribute-values"></a><span data-ttu-id="acc05-211">Combinación de valores de atributo</span><span class="sxs-lookup"><span data-stu-id="acc05-211">Merging attribute values</span></span>
<span data-ttu-id="acc05-212">En los flujos de atributos hay un valor que determina si se deben combinar atributos con varios valores de distintos conectores.</span><span class="sxs-lookup"><span data-stu-id="acc05-212">In the attribute flows there is a setting to determine if multi-valued attributes should be merged from several different Connectors.</span></span> <span data-ttu-id="acc05-213">El valor predeterminado es **Update**, que indica que debe prevalecer la regla de sincronización con prioridad más alta.</span><span class="sxs-lookup"><span data-stu-id="acc05-213">The default value is **Update**, which indicates that the sync rule with highest precedence should win.</span></span>

![Mezcla de tipos](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/mergetype.png)  

<span data-ttu-id="acc05-215">También se pueden seleccionar los valores **Merge** y **MergeCaseInsensitive**.</span><span class="sxs-lookup"><span data-stu-id="acc05-215">There is also **Merge** and **MergeCaseInsensitive**.</span></span> <span data-ttu-id="acc05-216">Estas opciones permiten combinar valores de distintos orígenes.</span><span class="sxs-lookup"><span data-stu-id="acc05-216">These options allow you to merge values from different sources.</span></span> <span data-ttu-id="acc05-217">Por ejemplo, se pueden utilizar para combinar el miembro o el atributo proxyAddresses de varios bosques.</span><span class="sxs-lookup"><span data-stu-id="acc05-217">For example, it can be used to merge the member or proxyAddresses attribute from several different forests.</span></span> <span data-ttu-id="acc05-218">Si utiliza esta opción, todas las reglas de sincronización del ámbito de un objeto deben utilizar el mismo tipo de combinación.</span><span class="sxs-lookup"><span data-stu-id="acc05-218">When you use this option, all sync rules in scope for an object must use the same merge type.</span></span> <span data-ttu-id="acc05-219">No se puede definir **Update** de un conector y **Merge** de otro.</span><span class="sxs-lookup"><span data-stu-id="acc05-219">You cannot define **Update** from one Connector and **Merge** from another.</span></span> <span data-ttu-id="acc05-220">Si lo intenta, recibirá un error.</span><span class="sxs-lookup"><span data-stu-id="acc05-220">If you try, you receive an error.</span></span>

<span data-ttu-id="acc05-221">La diferencia entre **Merge** y **MergeCaseInsensitive** es la forma en que se procesan los valores duplicados del atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-221">The difference between **Merge** and **MergeCaseInsensitive** is how to process duplicate attribute values.</span></span> <span data-ttu-id="acc05-222">El motor de sincronización garantiza que no se insertan valores duplicados en el atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-222">The sync engine makes sure duplicate values are not inserted into the target attribute.</span></span> <span data-ttu-id="acc05-223">Con **MergeCaseInsensitive**, los valores duplicados que solo se diferencien por el uso de mayúscula y minúscula no estarán presentes.</span><span class="sxs-lookup"><span data-stu-id="acc05-223">With **MergeCaseInsensitive**, duplicate values with only a difference in case are not going to be present.</span></span> <span data-ttu-id="acc05-224">Por ejemplo, no debería ver "SMTP:bob@contoso.com" y "smtp:bob@contoso.com" en el atributo de destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-224">For example, you should not see both "SMTP:bob@contoso.com" and "smtp:bob@contoso.com" in the target attribute.</span></span> <span data-ttu-id="acc05-225">**Mezcla** solo examina los valores exactos y pueden estar presentes varios valores donde solo hay una diferencia en el uso de mayúscula y minúscula.</span><span class="sxs-lookup"><span data-stu-id="acc05-225">**Merge** is only looking at the exact values and multiple values where there only is a difference in case might be present.</span></span>

<span data-ttu-id="acc05-226">La opción **Replace** es igual que **Update**, pero no se usa.</span><span class="sxs-lookup"><span data-stu-id="acc05-226">The option **Replace** is the same as **Update**, but it is not used.</span></span>

### <a name="control-the-attribute-flow-process"></a><span data-ttu-id="acc05-227">Control del proceso de flujo de atributo</span><span class="sxs-lookup"><span data-stu-id="acc05-227">Control the attribute flow process</span></span>
<span data-ttu-id="acc05-228">Cuando se configuran varias reglas de sincronización de entrada para contribuir al mismo atributo de metaverso, se utiliza la prioridad para determinar al ganador.</span><span class="sxs-lookup"><span data-stu-id="acc05-228">When multiple inbound sync rules are configured to contribute to the same metaverse attribute, then precedence is used to determine the winner.</span></span> <span data-ttu-id="acc05-229">La regla de sincronización con prioridad más alta (cuyo valor numérico es el más bajo) va a aportar el valor.</span><span class="sxs-lookup"><span data-stu-id="acc05-229">The sync rule with highest precedence (lowest numeric value) is going to contribute the value.</span></span> <span data-ttu-id="acc05-230">Lo mismo sucede para las reglas de salida.</span><span class="sxs-lookup"><span data-stu-id="acc05-230">The same happens for outbound rules.</span></span> <span data-ttu-id="acc05-231">La regla de sincronización de prioridad más alta es la que gana y aporta el valor al directorio conectado.</span><span class="sxs-lookup"><span data-stu-id="acc05-231">The sync rule with highest precedence wins and contribute the value to the connected directory.</span></span>

<span data-ttu-id="acc05-232">En algunos casos, en lugar de aportar un valor, la regla de sincronización determina cómo deben comportarse las otras reglas.</span><span class="sxs-lookup"><span data-stu-id="acc05-232">In some cases, rather than contribute a value, the sync rule should determine how other rules should behave.</span></span> <span data-ttu-id="acc05-233">Hay algunos literales especiales que se utilizan para este caso.</span><span class="sxs-lookup"><span data-stu-id="acc05-233">There are some special literals used for this case.</span></span>

<span data-ttu-id="acc05-234">Para las reglas de sincronización de entrada, se puede usar el literal **NULL** para indicar que el flujo no tiene ningún valor para aportar.</span><span class="sxs-lookup"><span data-stu-id="acc05-234">For inbound Synchronization Rules, the literal **NULL** can be used to indicate that the flow has no value to contribute.</span></span> <span data-ttu-id="acc05-235">Otra regla con una prioridad más baja puede aportar un valor.</span><span class="sxs-lookup"><span data-stu-id="acc05-235">Another rule with lower precedence can contribute a value.</span></span> <span data-ttu-id="acc05-236">Si no hay ninguna regla que aporte un valor, se quita el atributo metaverse.</span><span class="sxs-lookup"><span data-stu-id="acc05-236">If no rule contributed a value, then the metaverse attribute is removed.</span></span> <span data-ttu-id="acc05-237">Para una regla de salida, si **NULL** es el valor final después de que se han procesado todas las reglas de sincronización, se quita el valor en el directorio conectado.</span><span class="sxs-lookup"><span data-stu-id="acc05-237">For an outbound rule, if **NULL** is the final value after all sync rules have been processed, then the value is removed in the connected directory.</span></span>

<span data-ttu-id="acc05-238">El literal **AuthoritativeNull** es similar a **NULL** pero con la diferencia de que ninguna regla de prioridad inferior puede aportar un valor.</span><span class="sxs-lookup"><span data-stu-id="acc05-238">The literal **AuthoritativeNull** is similar to **NULL** but with the difference that no lower precedence rules can contribute a value.</span></span>

<span data-ttu-id="acc05-239">Un flujo de atributo también puede usar el atributo **IgnoreThisFlow**.</span><span class="sxs-lookup"><span data-stu-id="acc05-239">An attribute flow can also use **IgnoreThisFlow**.</span></span> <span data-ttu-id="acc05-240">Es similar a NULL en el sentido de que indica que no hay nada que aportar.</span><span class="sxs-lookup"><span data-stu-id="acc05-240">It is similar to NULL in the sense that it indicates there is nothing to contribute.</span></span> <span data-ttu-id="acc05-241">La diferencia es que no se quita ningún valor existente en el destino.</span><span class="sxs-lookup"><span data-stu-id="acc05-241">The difference is that it does not remove an already existing value in the target.</span></span> <span data-ttu-id="acc05-242">Es como si el flujo de atributo nunca hubiera estado allí.</span><span class="sxs-lookup"><span data-stu-id="acc05-242">It is like the attribute flow has never been there.</span></span>

<span data-ttu-id="acc05-243">Aquí tiene un ejemplo:</span><span class="sxs-lookup"><span data-stu-id="acc05-243">Here is an example:</span></span>

<span data-ttu-id="acc05-244">En la regla *Out to AD - User Exchange hybrid* se puede encontrar el siguiente flujo:</span><span class="sxs-lookup"><span data-stu-id="acc05-244">In *Out to AD - User Exchange hybrid* the following flow can be found:</span></span>  
`IIF([cloudSOAExchMailbox] = True,[cloudMSExchSafeSendersHash],IgnoreThisFlow)`  
<span data-ttu-id="acc05-245">Esta expresión se debe leer como: si el buzón del usuario se encuentra en Azure AD, el flujo de atributo va de Azure AD a AD.</span><span class="sxs-lookup"><span data-stu-id="acc05-245">This expression should be read as: if the user mailbox is located in Azure AD, then flow the attribute from Azure AD to AD.</span></span> <span data-ttu-id="acc05-246">Si no es así, no vuelve nada a Active Directory.</span><span class="sxs-lookup"><span data-stu-id="acc05-246">If not, do not flow anything back to Active Directory.</span></span> <span data-ttu-id="acc05-247">En este caso, se mantiene el valor existente en AD.</span><span class="sxs-lookup"><span data-stu-id="acc05-247">In this case, it would keep the existing value in AD.</span></span>

### <a name="importedvalue"></a><span data-ttu-id="acc05-248">ImportedValue</span><span class="sxs-lookup"><span data-stu-id="acc05-248">ImportedValue</span></span>
<span data-ttu-id="acc05-249">La función ImportedValue es diferente de todas las demás funciones, ya que el nombre del atributo debe incluirse entre comillas, en lugar de corchetes: </span><span class="sxs-lookup"><span data-stu-id="acc05-249">The function ImportedValue is different than all other functions since the attribute name must be enclosed in quotes rather than square brackets:</span></span>  
<span data-ttu-id="acc05-250">`ImportedValue("proxyAddresses")`.</span><span class="sxs-lookup"><span data-stu-id="acc05-250">`ImportedValue("proxyAddresses")`.</span></span>

<span data-ttu-id="acc05-251">Normalmente, un atributo usa el valor esperado durante la sincronización, incluso si no se ha exportado todavía o se recibió un error durante la exportación ("parte superior de la torre").</span><span class="sxs-lookup"><span data-stu-id="acc05-251">Usually during synchronization an attribute uses the expected value, even if it hasn’t been exported yet or an error was received during export (“top of the tower”).</span></span> <span data-ttu-id="acc05-252">Una sincronización entrante supone que un atributo que todavía no ha llegado a un directorio conectado lo alcanzará en algún momento.</span><span class="sxs-lookup"><span data-stu-id="acc05-252">An inbound synchronization assumes that an attribute that hasn’t yet reached a connected directory eventually reaches it.</span></span> <span data-ttu-id="acc05-253">En algunos casos, es importante sincronizar únicamente un valor confirmado por el directorio conectado ("torre de importación delta y holograma").</span><span class="sxs-lookup"><span data-stu-id="acc05-253">In some cases, it is important to only synchronize a value that has been confirmed by the connected directory (“hologram and delta import tower”).</span></span>

<span data-ttu-id="acc05-254">Un ejemplo de esta función se puede encontrar en la regla de sincronización de serie *In from AD – User Common from Exchange*.</span><span class="sxs-lookup"><span data-stu-id="acc05-254">An example of this function can be found in the out-of-box Synchronization Rule *In from AD – User Common from Exchange*.</span></span> <span data-ttu-id="acc05-255">En Exchange híbrido, el valor agregado por Exchange Online solo se debe sincronizar cuando se ha confirmado que el valor se exportó correctamente: </span><span class="sxs-lookup"><span data-stu-id="acc05-255">In Hybrid Exchange, the value added by Exchange online should only be synchronized when it has been confirmed that the value was exported successfully:</span></span>  
`proxyAddresses` <- `RemoveDuplicates(Trim(ImportedValue("proxyAddresses")))`

## <a name="precedence"></a><span data-ttu-id="acc05-256">Prioridad</span><span class="sxs-lookup"><span data-stu-id="acc05-256">Precedence</span></span>
<span data-ttu-id="acc05-257">Cuando varias reglas de sincronización intentan contribuir con el mismo valor de atributo al destino, el valor de prioridad se utiliza para determinar el ganador.</span><span class="sxs-lookup"><span data-stu-id="acc05-257">When several sync rules try to contribute the same attribute value to the target, the precedence value is used to determine the winner.</span></span> <span data-ttu-id="acc05-258">En un conflicto, la regla con prioridad más alta y valor numérico más bajo contribuirá con el atributo.</span><span class="sxs-lookup"><span data-stu-id="acc05-258">The rule with highest precedence, lowest numeric value, is going to contribute the attribute in a conflict.</span></span>

![Mezcla de tipos](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/precedence1.png)  

<span data-ttu-id="acc05-260">Este orden puede utilizarse para definir flujos de atributo más precisos para un pequeño subconjunto de objetos.</span><span class="sxs-lookup"><span data-stu-id="acc05-260">This ordering can be used to define more precise attribute flows for a small subset of objects.</span></span> <span data-ttu-id="acc05-261">Por ejemplo, las reglas de configuración rápida garantizan que los atributos de una cuenta habilitada (**User AccountEnabled**) tengan prioridad sobre otras cuentas.</span><span class="sxs-lookup"><span data-stu-id="acc05-261">For example, the out-of-box-rules make sure that attributes from an enabled account (**User AccountEnabled**) have precedence from other accounts.</span></span>

<span data-ttu-id="acc05-262">Se puede definir la prioridad entre conectores.</span><span class="sxs-lookup"><span data-stu-id="acc05-262">Precedence can be defined between Connectors.</span></span> <span data-ttu-id="acc05-263">Esto permite que los conectores con mejores datos sean los primeros en aportar los valores.</span><span class="sxs-lookup"><span data-stu-id="acc05-263">That allows Connectors with better data to contribute values first.</span></span>

### <a name="multiple-objects-from-the-same-connector-space"></a><span data-ttu-id="acc05-264">Varios objetos desde el mismo espacio conector</span><span class="sxs-lookup"><span data-stu-id="acc05-264">Multiple objects from the same connector space</span></span>
<span data-ttu-id="acc05-265">Si tiene varios objetos en el mismo espacio conector unido al mismo objeto de metaverso, se debe ajustar la prioridad.</span><span class="sxs-lookup"><span data-stu-id="acc05-265">If you have several objects in the same connector space joined to the same metaverse object, precedence must be adjusted.</span></span> <span data-ttu-id="acc05-266">Si varios objetos están en el ámbito de la misma regla de sincronización, el motor de sincronización no es capaz de determinar la prioridad.</span><span class="sxs-lookup"><span data-stu-id="acc05-266">If several objects are in scope of the same sync rule, then the sync engine is not able to determine precedence.</span></span> <span data-ttu-id="acc05-267">Es ambiguo qué objeto de origen debe contribuir al valor en el metaverso.</span><span class="sxs-lookup"><span data-stu-id="acc05-267">It is ambiguous which source object should contribute the value to the metaverse.</span></span> <span data-ttu-id="acc05-268">Esta configuración se notifica como ambigua incluso si los atributos en el origen tienen el mismo valor.</span><span class="sxs-lookup"><span data-stu-id="acc05-268">This configuration is reported as ambiguous even if the attributes in the source have the same value.</span></span>  
![Varios objetos unidos al mismo objeto de mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple1.png)  

<span data-ttu-id="acc05-270">En este escenario, debe cambiar el ámbito de las reglas de sincronización para que los objetos de origen tengan reglas de sincronización diferentes en el ámbito.</span><span class="sxs-lookup"><span data-stu-id="acc05-270">For this scenario, you need to change the scope of the sync rules so the source objects have different sync rules in scope.</span></span> <span data-ttu-id="acc05-271">Esto permite definir una prioridad diferente.</span><span class="sxs-lookup"><span data-stu-id="acc05-271">That allows you to define different precedence.</span></span>  
![Varios objetos unidos al mismo objeto de mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple2.png)  

## <a name="next-steps"></a><span data-ttu-id="acc05-273">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="acc05-273">Next steps</span></span>
* <span data-ttu-id="acc05-274">Consulte más detalles sobre el lenguaje de expresiones en el artículo [Descripción de las expresiones de aprovisionamiento declarativo](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="acc05-274">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="acc05-275">Vea cómo se utiliza aprovisionamiento declarativo integrado en el artículo sobre la [configuración predeterminada](active-directory-aadconnectsync-understanding-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="acc05-275">See how declarative provisioning is used out-of-box in [Understanding the default configuration](active-directory-aadconnectsync-understanding-default-configuration.md).</span></span>
* <span data-ttu-id="acc05-276">Descubra cómo hacer un cambio práctico utilizando el aprovisionamiento declarativo en [Sincronización de Azure AD Connect: cómo realizar un cambio en la configuración predeterminada](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="acc05-276">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>
* <span data-ttu-id="acc05-277">Siga leyendo sobre cómo los usuarios y contactos se utilizan juntos en el artículo de [descripción de usuarios y contactos](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span><span class="sxs-lookup"><span data-stu-id="acc05-277">Continue to read how users and contacts work together in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span></span>

<span data-ttu-id="acc05-278">**Temas de introducción**</span><span class="sxs-lookup"><span data-stu-id="acc05-278">**Overview topics**</span></span>

* [<span data-ttu-id="acc05-279">Sincronización de Azure AD Connect: comprender y personalizar la sincronización</span><span class="sxs-lookup"><span data-stu-id="acc05-279">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="acc05-280">Integración de las identidades locales con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="acc05-280">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

<span data-ttu-id="acc05-281">**Temas de referencia**</span><span class="sxs-lookup"><span data-stu-id="acc05-281">**Reference topics**</span></span>

* [<span data-ttu-id="acc05-282">Azure AD Connect Sync: referencia de funciones</span><span class="sxs-lookup"><span data-stu-id="acc05-282">Azure AD Connect sync: Functions Reference</span></span>](active-directory-aadconnectsync-functions-reference.md)

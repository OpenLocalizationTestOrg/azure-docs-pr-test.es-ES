---
title: 'Azure AD Connect Sync: control de errores LargeObject causados por el atributo userCertificate | Microsoft Docs'
description: "En este tema se proporcionan los pasos de corrección de errores LargeObject causados por atributo userCertificate."
services: active-directory
documentationcenter: 
author: cychua
manager: femila
editor: 
ms.assetid: 146ad5b3-74d9-4a83-b9e8-0973a19828d9
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 2a5418ff61e07793fceca5a8207c1c5aa18847b4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-handling-largeobject-errors-caused-by-usercertificate-attribute"></a><span data-ttu-id="049d5-103">Azure AD Connect Sync: control de errores LargeObject causados por el atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="049d5-103">Azure AD Connect sync: Handling LargeObject errors caused by userCertificate attribute</span></span>

<span data-ttu-id="049d5-104">Azure AD exige un límite máximo de **15** valores de certificado en el atributo **userCertificate**.</span><span class="sxs-lookup"><span data-stu-id="049d5-104">Azure AD enforces a maximum limit of **15** certificate values on the **userCertificate** attribute.</span></span> <span data-ttu-id="049d5-105">Si Azure AD Connect exporta un objeto con más de 15 valores a Azure AD, este devuelve un error **LargeObject** con un mensaje que indica</span><span class="sxs-lookup"><span data-stu-id="049d5-105">If Azure AD Connect exports an object with more than 15 values to Azure AD, Azure AD returns a **LargeObject** error with message:</span></span>

><span data-ttu-id="049d5-106">*que el objeto aprovisionado es demasiado grande y se debe recordar el número de valores de atributo en este objeto. La operación se volverá a intentar en el siguiente ciclo de sincronización.*</span><span class="sxs-lookup"><span data-stu-id="049d5-106">*"The provisioned object is too large. Trim the number of attribute values on this object. The operation will be retried in the next synchronization cycle..."*</span></span>

<span data-ttu-id="049d5-107">El error LargeObject puede deberse a otros atributos de AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-107">The LargeObject error may be caused by other AD attributes.</span></span> <span data-ttu-id="049d5-108">Para confirmar que realmente está causado por el atributo userCertificate, debe comprobarlo en el objeto ya sea en AD local o en la [búsqueda de metaverso de Synchronization Service Manager](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span><span class="sxs-lookup"><span data-stu-id="049d5-108">To confirm it is indeed caused by the userCertificate attribute, you need to verify against the object either in on-premises AD or in the [Synchronization Service Manager Metaverse Search](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span></span>

<span data-ttu-id="049d5-109">Para obtener la lista de objetos en el inquilino con errores LargeObject, siga uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="049d5-109">To obtain the list of objects in your tenant with LargeObject errors, use one of the following methods:</span></span>

 * <span data-ttu-id="049d5-110">Si está habilitado el inquilino para Azure AD Connect Health para sincronización, puede hacer referencia al [informe de errores de sincronización](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) proporcionado.</span><span class="sxs-lookup"><span data-stu-id="049d5-110">If your tenant is enabled for Azure AD Connect Health for sync, you can refer to the [Synchronization Error Report](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) provided.</span></span>
 
 * <span data-ttu-id="049d5-111">El correo electrónico de notificación de los errores de sincronización de directorios que se envía al final de cada ciclo de sincronización tiene la lista de objetos con errores LargeObject.</span><span class="sxs-lookup"><span data-stu-id="049d5-111">The notification email for directory synchronization errors that is sent at the end of each sync cycle has the list of objects with LargeObject errors.</span></span> 
 * <span data-ttu-id="049d5-112">La pestaña [Operaciones de Synchronization Service Manager](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) muestra la lista de objetos con errores LargeObject si hace clic en la exportación más reciente a la operación de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-112">The [Synchronization Service Manager Operations tab](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) displays the list of objects with LargeObject errors if you click the latest Export to Azure AD operation.</span></span>
 
## <a name="mitigation-options"></a><span data-ttu-id="049d5-113">Opciones de mitigación</span><span class="sxs-lookup"><span data-stu-id="049d5-113">Mitigation options</span></span>
<span data-ttu-id="049d5-114">Hasta que se resuelva el error LargeObject, no se pueden exportar a Azure AD otros cambios de atributo en el mismo objeto.</span><span class="sxs-lookup"><span data-stu-id="049d5-114">Until the LargeObject error is resolved, other attribute changes to the same object cannot be exported to Azure AD.</span></span> <span data-ttu-id="049d5-115">Para resolver el error, puede considerar las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="049d5-115">To resolve the error, you can consider the following options:</span></span>

 * <span data-ttu-id="049d5-116">Actualice a la compilación 1.1.524.0 o posterior de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="049d5-116">Upgrade Azure AD Connect to build 1.1.524.0 or after.</span></span> <span data-ttu-id="049d5-117">En la compilación 1.1.524.0 de Azure AD Connect, las reglas de sincronización originales se han actualizado para no exportar los atributos userSMIMECertificate y userCertificate, si estos tienen más de 15 valores.</span><span class="sxs-lookup"><span data-stu-id="049d5-117">In Azure AD Connect build 1.1.524.0, the out-of-box synchronization rules have been updated to not export attributes userCertificate and userSMIMECertificate if the attributes have more than 15 values.</span></span> <span data-ttu-id="049d5-118">Para más información acerca cómo actualizar Azure AD Connect, consulte el artículo [Azure AD Connect: actualización de una versión anterior a la versión más reciente](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span><span class="sxs-lookup"><span data-stu-id="049d5-118">For details on how to upgrade Azure AD Connect, refer to article [Azure AD Connect: Upgrade from a previous version to the latest](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span></span>

 * <span data-ttu-id="049d5-119">Implemente una **regla de sincronización de salida** en Azure AD Connect que exporte un **valor null en lugar de los valores reales para objetos con más de 15 valores de certificado**.</span><span class="sxs-lookup"><span data-stu-id="049d5-119">Implement an **outbound sync rule** in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="049d5-120">Esta opción es adecuada si no necesita que ninguno de los valores de certificado se exporte a Azure AD para objetos con más de 15 valores.</span><span class="sxs-lookup"><span data-stu-id="049d5-120">This option is suitable if you do not require any of the certificate values to be exported to Azure AD for objects with more than 15 values.</span></span> <span data-ttu-id="049d5-121">Para más información sobre cómo implementar esta regla de sincronización, consulte la sección siguiente [Implementación de la regla de sincronización para limitar la exportación del atributo userCertificate](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span><span class="sxs-lookup"><span data-stu-id="049d5-121">For details on how to implement this sync rule, refer to next section [Implementing sync rule to limit export of userCertificate attribute](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span></span>

 * <span data-ttu-id="049d5-122">Reduzca el número de valores de certificado en el objeto de AD local (15 o menos) mediante la eliminación de los valores que ya no están en uso por su organización.</span><span class="sxs-lookup"><span data-stu-id="049d5-122">Reduce the number of certificate values on the on-premises AD object (15 or less) by removing values that are no longer in use by your organization.</span></span> <span data-ttu-id="049d5-123">Esto es adecuado si el sobredimensionamiento del atributo está causado por los certificados expirados o sin usar.</span><span class="sxs-lookup"><span data-stu-id="049d5-123">This is suitable if the attribute bloat is caused by expired or unused certificates.</span></span> <span data-ttu-id="049d5-124">Puede usar [el script de PowerShell disponible aquí](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) para buscar, hacer una copia de seguridad y eliminar certificados expirados en el AD local.</span><span class="sxs-lookup"><span data-stu-id="049d5-124">You can use the [PowerShell script available here](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) to help find, backup, and delete expired certificates in your on-premises AD.</span></span> <span data-ttu-id="049d5-125">Antes de eliminar los certificados, se recomienda que los compruebe con los administradores de infraestructura de clave pública de su organización.</span><span class="sxs-lookup"><span data-stu-id="049d5-125">Before deleting the certificates, it is recommended that you verify with the Public-Key-Infrastructure administrators in your organization.</span></span>

 * <span data-ttu-id="049d5-126">Configure Azure AD Connect para que el atributo userCertificate no se exporte a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-126">Configure Azure AD Connect to exclude the userCertificate attribute from being exported to Azure AD.</span></span> <span data-ttu-id="049d5-127">En general, no se recomienda esta opción ya que el atributo lo puede usar Microsoft Online Services para habilitar escenarios concretos.</span><span class="sxs-lookup"><span data-stu-id="049d5-127">In general, we do not recommend this option since the attribute may be used by Microsoft Online Services to enable specific scenarios.</span></span> <span data-ttu-id="049d5-128">En particular:</span><span class="sxs-lookup"><span data-stu-id="049d5-128">In particular:</span></span>
    * <span data-ttu-id="049d5-129">El atributo userCertificate del objeto de usuario lo usan los clientes de Outlook y Exchange Online para el cifrado y la firma de mensajes.</span><span class="sxs-lookup"><span data-stu-id="049d5-129">The userCertificate attribute on the User object is used by Exchange Online and Outlook clients for message signing and encryption.</span></span> <span data-ttu-id="049d5-130">Para más información sobre esta característica, consulte el artículo [S/MIME para la firma y el cifrado de mensajes](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span><span class="sxs-lookup"><span data-stu-id="049d5-130">To learn more about this feature, refer to article [S/MIME for message signing and encryption](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span></span>

    * <span data-ttu-id="049d5-131">El atributo userCertificate del objeto Computer lo utiliza Azure AD para permitir que dispositivos unidos a un dominio de Windows 10 local se conecten a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-131">The userCertificate attribute on the Computer object is used by Azure AD to allow Windows 10 on-premises domain-joined devices to connect to Azure AD.</span></span> <span data-ttu-id="049d5-132">Para más información sobre esta característica, consulte el artículo [Experiencias de conexión de dispositivos unidos a un dominio a Azure AD para Windows 10](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span><span class="sxs-lookup"><span data-stu-id="049d5-132">To learn more about this feature, please refer to article [Connect domain-joined devices to Azure AD for Windows 10 experiences](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span></span>

## <a name="implementing-sync-rule-to-limit-export-of-usercertificate-attribute"></a><span data-ttu-id="049d5-133">Implementación de la regla de sincronización para limitar la exportación del atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="049d5-133">Implementing sync rule to limit export of userCertificate attribute</span></span>
<span data-ttu-id="049d5-134">Para resolver el error LargeObject causado por el atributo userCertificate, puede implementar una regla de sincronización de salida en Azure AD Connect que exporte un **valor null en lugar de los valores reales para objetos con más de 15 valores de certificado**.</span><span class="sxs-lookup"><span data-stu-id="049d5-134">To resolve the LargeObject error caused by the userCertificate attribute, you can implement an outbound sync rule in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="049d5-135">En esta sección se describen los pasos necesarios para implementar la regla de sincronización para objetos **User**.</span><span class="sxs-lookup"><span data-stu-id="049d5-135">This section describes the steps required to implement the sync rule for **User** objects.</span></span> <span data-ttu-id="049d5-136">Los pasos se pueden adaptados para los objetos **Contact** y **Computer**.</span><span class="sxs-lookup"><span data-stu-id="049d5-136">The steps can be adapted for **Contact** and **Computer** objects.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="049d5-137">La exportación de un valor null quita los valores de certificado que se exportaron correctamente a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-137">Exporting null value removes certificate values previously exported successfully to Azure AD.</span></span>

<span data-ttu-id="049d5-138">Los pasos se pueden resumir como:</span><span class="sxs-lookup"><span data-stu-id="049d5-138">The steps can be summarized as:</span></span>

1. <span data-ttu-id="049d5-139">Deshabilitar el programador de sincronización y comprobar que no hay ninguna sincronización en curso.</span><span class="sxs-lookup"><span data-stu-id="049d5-139">Disable sync scheduler and verify there is no synchronization in progress.</span></span>
3. <span data-ttu-id="049d5-140">Buscar la regla de sincronización de salida existente para el atributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="049d5-140">Find the existing outbound sync rule for userCertificate attribute.</span></span>
4. <span data-ttu-id="049d5-141">Crear la regla de sincronización de salida requerida.</span><span class="sxs-lookup"><span data-stu-id="049d5-141">Create the outbound sync rule required.</span></span>
5. <span data-ttu-id="049d5-142">Comprobar la nueva regla de sincronización en un objeto existente con el error LargeObject.</span><span class="sxs-lookup"><span data-stu-id="049d5-142">Verify the new sync rule on an existing object with LargeObject error.</span></span>
6. <span data-ttu-id="049d5-143">Aplicar la nueva regla de sincronización a los objetos restantes con el error LargeObject.</span><span class="sxs-lookup"><span data-stu-id="049d5-143">Apply the new sync rule to remaining objects with LargeObject error.</span></span>
7. <span data-ttu-id="049d5-144">Comprobar que no hay ningún cambio inesperado en espera de su exportación a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-144">Verify there are no unexpected changes waiting to be exported to Azure AD.</span></span>
8. <span data-ttu-id="049d5-145">Exportar los cambios a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-145">Export the changes to Azure AD.</span></span>
9. <span data-ttu-id="049d5-146">Volver a habilitar el programador de sincronización.</span><span class="sxs-lookup"><span data-stu-id="049d5-146">Re-enable sync scheduler.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="049d5-147">Paso 1.</span><span class="sxs-lookup"><span data-stu-id="049d5-147">Step 1.</span></span> <span data-ttu-id="049d5-148">Deshabilitar el programador de sincronización y comprobar que no hay ninguna sincronización en curso</span><span class="sxs-lookup"><span data-stu-id="049d5-148">Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="049d5-149">Asegúrese de que no realiza ninguna sincronización mientras está en medio de implementar una nueva regla de sincronización para evitar que cambios no deseados se exporten a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-149">Ensure no synchronization takes place while you are in the middle of implementing a new sync rule to avoid unintended changes being exported to Azure AD.</span></span> <span data-ttu-id="049d5-150">Para deshabilitar el programador de sincronización integrado:</span><span class="sxs-lookup"><span data-stu-id="049d5-150">To disable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="049d5-151">Inicie una sesión de PowerShell en el servidor de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="049d5-151">Start PowerShell session on the Azure AD Connect server.</span></span>

2. <span data-ttu-id="049d5-152">Deshabilite la sincronización programada mediante la ejecución del cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="049d5-152">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

> [!Note]
> <span data-ttu-id="049d5-153">Los pasos anteriores solo se aplican a las versiones más recientes (1.1.xxx.x) de Azure AD Connect con el programador integrado.</span><span class="sxs-lookup"><span data-stu-id="049d5-153">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="049d5-154">Si usa versiones anteriores (1.0.xxx.x) de Azure AD Connect que utilizan el Programador de tareas de Windows, o que usa a su propio programador personalizado (no común) para desencadenar una sincronización periódica, debe deshabilitarlas según corresponda.</span><span class="sxs-lookup"><span data-stu-id="049d5-154">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

3. <span data-ttu-id="049d5-155">Inicie **Synchronization Service Manager**. Para ello, vaya a INICIO → Synchronization Service (Servicio de sincronización).</span><span class="sxs-lookup"><span data-stu-id="049d5-155">Start the **Synchronization Service Manager** by going to START → Synchronization Service.</span></span>

4. <span data-ttu-id="049d5-156">Vaya a la pestaña **Operations** (Operaciones) y confirme que no hay ninguna operación cuyo estado sea *"in progress"* (En curso).</span><span class="sxs-lookup"><span data-stu-id="049d5-156">Go to the **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

### <a name="step-2-find-the-existing-outbound-sync-rule-for-usercertificate-attribute"></a><span data-ttu-id="049d5-157">Paso 2:</span><span class="sxs-lookup"><span data-stu-id="049d5-157">Step 2.</span></span> <span data-ttu-id="049d5-158">Buscar la regla de sincronización de salida existente para el atributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="049d5-158">Find the existing outbound sync rule for userCertificate attribute</span></span>
<span data-ttu-id="049d5-159">Debería haber una regla de sincronización existente que esté habilitada y configurada para exportar el atributo userCertificate para objetos User a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-159">There should be an existing sync rule that is enabled and configured to export userCertificate attribute for User objects to Azure AD.</span></span> <span data-ttu-id="049d5-160">Busque esta regla de sincronización para averiguar la configuración de **precedencia** y **filtro de ámbito**:</span><span class="sxs-lookup"><span data-stu-id="049d5-160">Locate this sync rule to find out its **precedence** and **scoping filter** configuration:</span></span>

1. <span data-ttu-id="049d5-161">Inicie el **editor de reglas de sincronización**. Para ello, vaya a INICIO → Synchronization Rules Editor (Servicio de sincronización).</span><span class="sxs-lookup"><span data-stu-id="049d5-161">Start the **Synchronization Rules Editor** by going to START → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="049d5-162">Configure los filtros de búsqueda con los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="049d5-162">Configure the search filters with the following values:</span></span>

    | <span data-ttu-id="049d5-163">Atributo</span><span class="sxs-lookup"><span data-stu-id="049d5-163">Attribute</span></span> | <span data-ttu-id="049d5-164">Valor</span><span class="sxs-lookup"><span data-stu-id="049d5-164">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="049d5-165">Dirección</span><span class="sxs-lookup"><span data-stu-id="049d5-165">Direction</span></span> |<span data-ttu-id="049d5-166">**Outbound**</span><span class="sxs-lookup"><span data-stu-id="049d5-166">**Outbound**</span></span> |
    | <span data-ttu-id="049d5-167">Tipo de objeto del metaverso</span><span class="sxs-lookup"><span data-stu-id="049d5-167">MV Object Type</span></span> |<span data-ttu-id="049d5-168">**Person**</span><span class="sxs-lookup"><span data-stu-id="049d5-168">**Person**</span></span> |
    | <span data-ttu-id="049d5-169">Conector</span><span class="sxs-lookup"><span data-stu-id="049d5-169">Connector</span></span> |<span data-ttu-id="049d5-170">*nombre de su conector de Azure AD*</span><span class="sxs-lookup"><span data-stu-id="049d5-170">*name of your Azure AD connector*</span></span> |
    | <span data-ttu-id="049d5-171">Tipo de objeto de conector</span><span class="sxs-lookup"><span data-stu-id="049d5-171">Connector Object Type</span></span> |<span data-ttu-id="049d5-172">**user**</span><span class="sxs-lookup"><span data-stu-id="049d5-172">**user**</span></span> |
    | <span data-ttu-id="049d5-173">Atributos del metaverso</span><span class="sxs-lookup"><span data-stu-id="049d5-173">MV attribute</span></span> |<span data-ttu-id="049d5-174">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="049d5-174">**userCertificate**</span></span> |

3. <span data-ttu-id="049d5-175">Si está usando las reglas de sincronización integradas para el conector de Azure AD con el fin de exportar el atributo userCertificate para objetos User, debe volver a la regla *"Out to AAD – User ExchangeOnline"* (Fuera de AAD - User ExchangeOnline).</span><span class="sxs-lookup"><span data-stu-id="049d5-175">If you are using OOB (out-of-box) sync rules to Azure AD connector to export userCertficiate attribute for User objects, you should get back the *“Out to AAD – User ExchangeOnline”* rule.</span></span>
4. <span data-ttu-id="049d5-176">Anote el valor de **precedencia** de esta regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="049d5-176">Note down the **precedence** value of this sync rule.</span></span>
5. <span data-ttu-id="049d5-177">Seleccione la regla de sincronización y haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="049d5-177">Select the sync rule and click **Edit**.</span></span>
6. <span data-ttu-id="049d5-178">En el cuadro de diálogo emergente *"Edit Reserved Rule Confirmation"* (Editar confirmación de regla reservada), haga clic en **No**.</span><span class="sxs-lookup"><span data-stu-id="049d5-178">In the *“Edit Reserved Rule Confirmation”* pop-up dialog, click **No**.</span></span> <span data-ttu-id="049d5-179">(No se preocupe, no vamos a realizar ningún cambio en esta regla de sincronización).</span><span class="sxs-lookup"><span data-stu-id="049d5-179">(Don’t worry, we are not going to make any change to this sync rule).</span></span>
7. <span data-ttu-id="049d5-180">En la pantalla de edición, seleccione la pestaña **Scoping filter** (Filtro de ámbito).</span><span class="sxs-lookup"><span data-stu-id="049d5-180">In the edit screen, select the **Scoping filter** tab.</span></span>
8. <span data-ttu-id="049d5-181">Anote la configuración del filtro de ámbito.</span><span class="sxs-lookup"><span data-stu-id="049d5-181">Note down the scoping filter configuration.</span></span> <span data-ttu-id="049d5-182">Si se usa la regla de sincronización integrada, debe haber exactamente **un grupo de filtro de ámbito que contiene dos cláusulas**, incluido:</span><span class="sxs-lookup"><span data-stu-id="049d5-182">If you are using the OOB sync rule, there should exactly be **one scoping filter group containing two clauses**, including:</span></span>

    | <span data-ttu-id="049d5-183">Atributo</span><span class="sxs-lookup"><span data-stu-id="049d5-183">Attribute</span></span> | <span data-ttu-id="049d5-184">operador</span><span class="sxs-lookup"><span data-stu-id="049d5-184">Operator</span></span> | <span data-ttu-id="049d5-185">Valor</span><span class="sxs-lookup"><span data-stu-id="049d5-185">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="049d5-186">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="049d5-186">sourceObjectType</span></span> | <span data-ttu-id="049d5-187">EQUAL</span><span class="sxs-lookup"><span data-stu-id="049d5-187">EQUAL</span></span> | <span data-ttu-id="049d5-188">Usuario</span><span class="sxs-lookup"><span data-stu-id="049d5-188">User</span></span> |
    | <span data-ttu-id="049d5-189">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="049d5-189">cloudMastered</span></span> | <span data-ttu-id="049d5-190">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="049d5-190">NOTEQUAL</span></span> | <span data-ttu-id="049d5-191">True</span><span class="sxs-lookup"><span data-stu-id="049d5-191">True</span></span> |

### <a name="step-3-create-the-outbound-sync-rule-required"></a><span data-ttu-id="049d5-192">Paso 3:</span><span class="sxs-lookup"><span data-stu-id="049d5-192">Step 3.</span></span> <span data-ttu-id="049d5-193">Crear la regla de sincronización de salida requerida</span><span class="sxs-lookup"><span data-stu-id="049d5-193">Create the outbound sync rule required</span></span>
<span data-ttu-id="049d5-194">La nueva regla de sincronización debe tener el mismo **filtro de ámbito** y una **mayor precedencia** que la regla de sincronización existente.</span><span class="sxs-lookup"><span data-stu-id="049d5-194">The new sync rule must have the same **scoping filter** and **higher precedence** than the existing sync rule.</span></span> <span data-ttu-id="049d5-195">Esto asegura que la nueva regla de sincronización se aplica al mismo conjunto de objetos que la regla de sincronización existente y reemplaza la regla de sincronización existente por el atributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="049d5-195">This ensures that the new sync rule applies to the same set of objects as the existing sync rule and overrides the existing sync rule for the userCertificate attribute.</span></span> <span data-ttu-id="049d5-196">Para crear la regla de sincronización:</span><span class="sxs-lookup"><span data-stu-id="049d5-196">To create the sync rule:</span></span>
1. <span data-ttu-id="049d5-197">En el Editor de reglas de sincronización, haga clic en el botón **Agregar nueva regla**.</span><span class="sxs-lookup"><span data-stu-id="049d5-197">In the Synchronization Rules Editor, click the **Add new rule** button.</span></span>
2. <span data-ttu-id="049d5-198">En la pestaña **Descripción**, proporcione la siguiente configuración:</span><span class="sxs-lookup"><span data-stu-id="049d5-198">Under the **Description tab**, provide the following configuration:</span></span>

    | <span data-ttu-id="049d5-199">Atributo</span><span class="sxs-lookup"><span data-stu-id="049d5-199">Attribute</span></span> | <span data-ttu-id="049d5-200">Valor</span><span class="sxs-lookup"><span data-stu-id="049d5-200">Value</span></span> | <span data-ttu-id="049d5-201">Detalles</span><span class="sxs-lookup"><span data-stu-id="049d5-201">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="049d5-202">Nombre</span><span class="sxs-lookup"><span data-stu-id="049d5-202">Name</span></span> | <span data-ttu-id="049d5-203">*Proporcione un nombre*.</span><span class="sxs-lookup"><span data-stu-id="049d5-203">*Provide a name*</span></span> | <span data-ttu-id="049d5-204">Por ejemplo, *"Fuera de AAD – Reemplazo personalizado para userCertificate"*</span><span class="sxs-lookup"><span data-stu-id="049d5-204">E.g., *“Out to AAD – Custom override for userCertificate”*</span></span> |
    | <span data-ttu-id="049d5-205">Descripción</span><span class="sxs-lookup"><span data-stu-id="049d5-205">Description</span></span> | <span data-ttu-id="049d5-206">*Proporcione una descripción*</span><span class="sxs-lookup"><span data-stu-id="049d5-206">*Provide a description*</span></span> | <span data-ttu-id="049d5-207">Por ejemplo, *"Si el atributo userCertificate tiene más de 15 valores, la exportación es NULL".*</span><span class="sxs-lookup"><span data-stu-id="049d5-207">E.g., *“If userCertificate attribute has more than 15 values, export NULL.”*</span></span> |
    | <span data-ttu-id="049d5-208">Sistema conectado</span><span class="sxs-lookup"><span data-stu-id="049d5-208">Connected System</span></span> | <span data-ttu-id="049d5-209">*Seleccione Azure AD Connector*</span><span class="sxs-lookup"><span data-stu-id="049d5-209">*Select the Azure AD Connector*</span></span> |
    | <span data-ttu-id="049d5-210">Tipo de objeto de sistema conectado</span><span class="sxs-lookup"><span data-stu-id="049d5-210">Connected System Object Type</span></span> | <span data-ttu-id="049d5-211">**user**</span><span class="sxs-lookup"><span data-stu-id="049d5-211">**user**</span></span> | |
    | <span data-ttu-id="049d5-212">Propiedades de objeto de metaverso</span><span class="sxs-lookup"><span data-stu-id="049d5-212">Metaverse Object Type</span></span> | <span data-ttu-id="049d5-213">**person**</span><span class="sxs-lookup"><span data-stu-id="049d5-213">**person**</span></span> | |
    | <span data-ttu-id="049d5-214">Tipo de vínculo</span><span class="sxs-lookup"><span data-stu-id="049d5-214">Link Type</span></span> | <span data-ttu-id="049d5-215">**Join**</span><span class="sxs-lookup"><span data-stu-id="049d5-215">**Join**</span></span> | |
    | <span data-ttu-id="049d5-216">Prioridad</span><span class="sxs-lookup"><span data-stu-id="049d5-216">Precedence</span></span> | <span data-ttu-id="049d5-217">*Elija un número entre 1 y 99*</span><span class="sxs-lookup"><span data-stu-id="049d5-217">*Chose a number between 1 - 99*</span></span> | <span data-ttu-id="049d5-218">El número elegido no deben usarse por ninguna regla de sincronización existente y tiene un valor inferior (y por lo tanto, una mayor precedencia) que la regla de sincronización existente.</span><span class="sxs-lookup"><span data-stu-id="049d5-218">The number chosen must not be used by any existing sync rule and has a lower value (and therefore, higher precedence) than the existing sync rule.</span></span> |

3. <span data-ttu-id="049d5-219">Vaya a la pestaña **Scoping filter** (Filtro de ámbito) e implemente el mismo filtro de ámbito que está usando la regla de sincronización existente.</span><span class="sxs-lookup"><span data-stu-id="049d5-219">Go to the **Scoping filter** tab and implement the same scoping filter the existing sync rule is using.</span></span>
4. <span data-ttu-id="049d5-220">Omita pestaña **Join rules** (Reglas de unión).</span><span class="sxs-lookup"><span data-stu-id="049d5-220">Skip the **Join rules** tab.</span></span>
5. <span data-ttu-id="049d5-221">Vaya a la pestaña **Transformations** (Transformaciones) para agregar una nueva transformación mediante la configuración siguiente:</span><span class="sxs-lookup"><span data-stu-id="049d5-221">Go to the **Transformations** tab to add a new transformation using following configuration:</span></span>

    | <span data-ttu-id="049d5-222">Atributo</span><span class="sxs-lookup"><span data-stu-id="049d5-222">Attribute</span></span> | <span data-ttu-id="049d5-223">Valor</span><span class="sxs-lookup"><span data-stu-id="049d5-223">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="049d5-224">Tipo de flujo</span><span class="sxs-lookup"><span data-stu-id="049d5-224">Flow Type</span></span> |<span data-ttu-id="049d5-225">**Expression**</span><span class="sxs-lookup"><span data-stu-id="049d5-225">**Expression**</span></span> |
    | <span data-ttu-id="049d5-226">Atributo de destino</span><span class="sxs-lookup"><span data-stu-id="049d5-226">Target Attribute</span></span> |<span data-ttu-id="049d5-227">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="049d5-227">**userCertificate**</span></span> |
    | <span data-ttu-id="049d5-228">Atributo de origen</span><span class="sxs-lookup"><span data-stu-id="049d5-228">Source Attribute</span></span> |<span data-ttu-id="049d5-229">*Utilice la expresión siguiente*:`IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span><span class="sxs-lookup"><span data-stu-id="049d5-229">*Use the following expression*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span></span> |
    
6. <span data-ttu-id="049d5-230">Haga clic en el botón **Agregar** para crear la regla de sincronización.</span><span class="sxs-lookup"><span data-stu-id="049d5-230">Click the **Add** button to create the sync rule.</span></span>

### <a name="step-4-verify-the-new-sync-rule-on-an-existing-object-with-largeobject-error"></a><span data-ttu-id="049d5-231">Paso 4</span><span class="sxs-lookup"><span data-stu-id="049d5-231">Step 4.</span></span> <span data-ttu-id="049d5-232">Comprobar la nueva regla de sincronización en un objeto existente con el error LargeObject</span><span class="sxs-lookup"><span data-stu-id="049d5-232">Verify the new sync rule on an existing object with LargeObject error</span></span>
<span data-ttu-id="049d5-233">Esto sirve para comprobar que la regla de sincronización creada funciona correctamente en un objeto de AD existente con el error LargeObject antes de aplicarla a otros objetos:</span><span class="sxs-lookup"><span data-stu-id="049d5-233">This is to verify that the sync rule created is working correctly on an existing AD object with LargeObject error before you apply it to other objects:</span></span>
1. <span data-ttu-id="049d5-234">Vaya a la pestaña **Operations** (Operaciones) de Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="049d5-234">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="049d5-235">Seleccione la exportación más reciente de la operación de Azure AD y haga clic en uno de los objetos con errores LargeObject.</span><span class="sxs-lookup"><span data-stu-id="049d5-235">Select the most recent Export to Azure AD operation and click on one of the objects with LargeObject errors.</span></span>
3.  <span data-ttu-id="049d5-236">En la pantalla emergente Connector Space Object Properties (Propiedades de objeto del espacio de conector), haga clic en el botón **Preview** (Vista previa).</span><span class="sxs-lookup"><span data-stu-id="049d5-236">In the Connector Space Object Properties pop-up screen, click on the **Preview** button.</span></span>
4. <span data-ttu-id="049d5-237">En la pantalla emergente Preview (Vista previa), seleccione **Full synchronization** (Sincronización completa) y haga clic en **Commit Preview** (Confirmar vista previa).</span><span class="sxs-lookup"><span data-stu-id="049d5-237">In the Preview pop-up screen, select **Full synchronization** and click **Commit Preview**.</span></span>
5. <span data-ttu-id="049d5-238">Cierre la pantalla de vista previa y la pantalla de propiedades del objeto de espacio de conector.</span><span class="sxs-lookup"><span data-stu-id="049d5-238">Close the Preview screen and the Connector Space Object Properties screen.</span></span>
6. <span data-ttu-id="049d5-239">Vaya a la pestaña **Connectors** (Conectores) de Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="049d5-239">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
7. <span data-ttu-id="049d5-240">Haga clic con el botón derecho en el conector **Azure AD** y seleccione **Ejecutar...**</span><span class="sxs-lookup"><span data-stu-id="049d5-240">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
8. <span data-ttu-id="049d5-241">En el menú emergente Run Connector (Ejecutar conector), seleccione el paso **Exportar** (Exportar) y haga clic en **OK** (Aceptar).</span><span class="sxs-lookup"><span data-stu-id="049d5-241">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
9. <span data-ttu-id="049d5-242">Espere a que la exportación a Azure AD finalice y confirme que no hay ningún error LargeObject más en este objeto específico.</span><span class="sxs-lookup"><span data-stu-id="049d5-242">Wait for Export to Azure AD to complete and confirm there is no more LargeObject error on this specific object.</span></span>

### <a name="step-5-apply-the-new-sync-rule-to-remaining-objects-with-largeobject-error"></a><span data-ttu-id="049d5-243">Paso 5.</span><span class="sxs-lookup"><span data-stu-id="049d5-243">Step 5.</span></span> <span data-ttu-id="049d5-244">Aplicar la nueva regla de sincronización a los objetos restantes con el error LargeObject</span><span class="sxs-lookup"><span data-stu-id="049d5-244">Apply the new sync rule to remaining objects with LargeObject error</span></span>
<span data-ttu-id="049d5-245">Una vez que se ha agregado la regla de sincronización, debe ejecutar un paso de sincronización completa en el conector de AD:</span><span class="sxs-lookup"><span data-stu-id="049d5-245">Once the sync rule has been added, you need to run a full synchronization step on the AD Connector:</span></span>
1. <span data-ttu-id="049d5-246">Vaya a la pestaña **Connectors** (Conectores) de Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="049d5-246">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="049d5-247">Haga clic con el botón derecho en el conector **AD** y seleccione **Run...** (Ejecutar).</span><span class="sxs-lookup"><span data-stu-id="049d5-247">Right-click on the **AD** Connector and select **Run...**</span></span>
3. <span data-ttu-id="049d5-248">En el menú emergente Run Connector (Ejecutar conector), seleccione el paso **Full Synchronization** (Sincronización completa) y haga clic en **OK** (Aceptar).</span><span class="sxs-lookup"><span data-stu-id="049d5-248">In the Run Connector pop-up, select **Full Synchronization** step and click **OK**.</span></span>
4. <span data-ttu-id="049d5-249">Espere a que el paso de sincronización completa se complete.</span><span class="sxs-lookup"><span data-stu-id="049d5-249">Wait for the Full Synchronization step to complete.</span></span>
5. <span data-ttu-id="049d5-250">Repita los pasos anteriores para los conectores AD restantes si tiene más de uno.</span><span class="sxs-lookup"><span data-stu-id="049d5-250">Repeat the above steps for the remaining AD Connectors if you have more than one AD Connectors.</span></span> <span data-ttu-id="049d5-251">Normalmente, se necesitan varios conectores si tiene varios directorios locales.</span><span class="sxs-lookup"><span data-stu-id="049d5-251">Usually, multiple connectors are required if you have multiple on-premises directories.</span></span>

### <a name="step-6-verify-there-are-no-unexpected-changes-waiting-to-be-exported-to-azure-ad"></a><span data-ttu-id="049d5-252">Paso 6.</span><span class="sxs-lookup"><span data-stu-id="049d5-252">Step 6.</span></span> <span data-ttu-id="049d5-253">Comprobar que no hay ningún cambio inesperado en espera de su exportación a Azure AD</span><span class="sxs-lookup"><span data-stu-id="049d5-253">Verify there are no unexpected changes waiting to be exported to Azure AD</span></span>
1. <span data-ttu-id="049d5-254">Vaya a la pestaña **Connectors** (Conectores) de Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="049d5-254">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="049d5-255">Haga clic con el botón derecho en el conector **Azure AD** y seleccione **Search Connector Space** (Espacio del conector de búsqueda).</span><span class="sxs-lookup"><span data-stu-id="049d5-255">Right-click on the **Azure AD** Connector and select **Search Connector Space**.</span></span>
3. <span data-ttu-id="049d5-256">En el elemento emergente Search Connector Space (Espacio del conector de búsqueda):</span><span class="sxs-lookup"><span data-stu-id="049d5-256">In the Search Connector Space pop-up:</span></span>
    1. <span data-ttu-id="049d5-257">Establezca el ámbito en **Pending Export** (Exportación pendiente).</span><span class="sxs-lookup"><span data-stu-id="049d5-257">Set Scope to **Pending Export**.</span></span>
    2. <span data-ttu-id="049d5-258">Active las tres casillas, incluidas **Add** (Agregar), **Modify** (Modificar) y **Delete** (Eliminar).</span><span class="sxs-lookup"><span data-stu-id="049d5-258">Check all 3 checkboxes, including **Add**, **Modify** and **Delete**.</span></span>
    3. <span data-ttu-id="049d5-259">Haga clic en el botón **Search** (Buscar) para devolver todos los objetos con cambios que esperan su exportación a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="049d5-259">Click **Search** button to return all objects with changes waiting to be exported to Azure AD.</span></span>
    4. <span data-ttu-id="049d5-260">Compruebe que no hay cambios inesperados.</span><span class="sxs-lookup"><span data-stu-id="049d5-260">Verify there are no unexpected changes.</span></span> <span data-ttu-id="049d5-261">Para examinar los cambios de un determinado objeto, haga doble clic en el objeto.</span><span class="sxs-lookup"><span data-stu-id="049d5-261">To examine the changes for a given object, double-click on the object.</span></span>

### <a name="step-7-export-the-changes-to-azure-ad"></a><span data-ttu-id="049d5-262">Paso 7.</span><span class="sxs-lookup"><span data-stu-id="049d5-262">Step 7.</span></span> <span data-ttu-id="049d5-263">Exportar los cambios a Azure AD</span><span class="sxs-lookup"><span data-stu-id="049d5-263">Export the changes to Azure AD</span></span>
<span data-ttu-id="049d5-264">Para exportar los cambios a Azure AD:</span><span class="sxs-lookup"><span data-stu-id="049d5-264">To export the changes to Azure AD:</span></span>
1. <span data-ttu-id="049d5-265">Vaya a la pestaña **Connectors** (Conectores) de Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="049d5-265">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="049d5-266">Haga clic con el botón derecho en el conector **Azure AD** y seleccione **Ejecutar...**</span><span class="sxs-lookup"><span data-stu-id="049d5-266">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
4. <span data-ttu-id="049d5-267">En el menú emergente Run Connector (Ejecutar conector), seleccione el paso **Exportar** (Exportar) y haga clic en **OK** (Aceptar).</span><span class="sxs-lookup"><span data-stu-id="049d5-267">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
5. <span data-ttu-id="049d5-268">Espere a que la exportación a Azure AD finalice y confirme que no hay ningún error LargeObject más.</span><span class="sxs-lookup"><span data-stu-id="049d5-268">Wait for Export to Azure AD to complete and confirm there are no more LargeObject errors.</span></span>

### <a name="step-8-re-enable-sync-scheduler"></a><span data-ttu-id="049d5-269">Paso 8.</span><span class="sxs-lookup"><span data-stu-id="049d5-269">Step 8.</span></span> <span data-ttu-id="049d5-270">Volver a habilitar el programador de sincronización</span><span class="sxs-lookup"><span data-stu-id="049d5-270">Re-enable sync scheduler</span></span>
<span data-ttu-id="049d5-271">Ahora que el problema se ha resuelto, vuelva a habilitar el programador de sincronización integrado:</span><span class="sxs-lookup"><span data-stu-id="049d5-271">Now that the issue is resolved, re-enable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="049d5-272">Inicie la sesión de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="049d5-272">Start PowerShell session.</span></span>
2. <span data-ttu-id="049d5-273">Vuelva a habilitar la sincronización programada mediante la ejecución del cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="049d5-273">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

> [!Note]
> <span data-ttu-id="049d5-274">Los pasos anteriores solo se aplican a las versiones más recientes (1.1.xxx.x) de Azure AD Connect con el programador integrado.</span><span class="sxs-lookup"><span data-stu-id="049d5-274">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="049d5-275">Si usa versiones anteriores (1.0.xxx.x) de Azure AD Connect que utilizan el Programador de tareas de Windows, o que usa a su propio programador personalizado (no común) para desencadenar una sincronización periódica, debe deshabilitarlas según corresponda.</span><span class="sxs-lookup"><span data-stu-id="049d5-275">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

## <a name="next-steps"></a><span data-ttu-id="049d5-276">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="049d5-276">Next steps</span></span>
<span data-ttu-id="049d5-277">Obtenga más información sobre la [Integración de las identidades locales con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="049d5-277">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>


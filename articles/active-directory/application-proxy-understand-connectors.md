---
title: "Descripción de los conectores del Proxy de aplicación de Azure AD | Microsoft Docs"
description: "Se explican los conceptos básicos acerca de los conectores del Proxy de aplicación de Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: c18d0a2bff654573e6e28a7cd7fad853b3a11346
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="7b689-103">Descripción de los conectores del Proxy de aplicación de Azure AD</span><span class="sxs-lookup"><span data-stu-id="7b689-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="7b689-104">Los conectores son los que hacen posible el Proxy de aplicación de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7b689-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="7b689-105">Son simples, fáciles de implementar y mantener y muy eficaces.</span><span class="sxs-lookup"><span data-stu-id="7b689-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="7b689-106">En este artículo se habla de qué son los conectores, cómo funcionan, y se ofrecen algunas sugerencias para optimizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="7b689-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="7b689-107">Qué es un conector proxy de aplicación</span><span class="sxs-lookup"><span data-stu-id="7b689-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="7b689-108">Los conectores son agentes ligeros que se colocan en local y facilitan la conexión saliente del servicio Proxy de aplicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="7b689-109">Los conectores deben instalarse en un servidor de Windows Server con acceso a la aplicación de back-end.</span><span class="sxs-lookup"><span data-stu-id="7b689-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="7b689-110">Puede organizar los conectores en grupos; cada grupo controla el tráfico a aplicaciones concretas.</span><span class="sxs-lookup"><span data-stu-id="7b689-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="7b689-111">Los conectores equilibran la cargan automáticamente y pueden ayudar a optimizar la estructura de red.</span><span class="sxs-lookup"><span data-stu-id="7b689-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="7b689-112">Requisitos e implementación</span><span class="sxs-lookup"><span data-stu-id="7b689-112">Requirements and deployment</span></span>

<span data-ttu-id="7b689-113">Para implementar correctamente Proxy de aplicación necesita al menos un conector, pero se recomiendan dos o más para conseguir una mayor resistencia.</span><span class="sxs-lookup"><span data-stu-id="7b689-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="7b689-114">Instale el conector en un equipo Windows Server 2012 R2 o 2016.</span><span class="sxs-lookup"><span data-stu-id="7b689-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="7b689-115">El conector debe ser capaz de comunicarse con el servicio Proxy de aplicación, así como con las aplicaciones locales que se publican.</span><span class="sxs-lookup"><span data-stu-id="7b689-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="7b689-116">Para más información sobre los requisitos de red del servidor del conector, vea [Get started with Application Proxy and install a connector (Información general sobre Proxy de aplicación e instalación de un conector)](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="7b689-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="7b689-117">Mantenimiento</span><span class="sxs-lookup"><span data-stu-id="7b689-117">Maintenance</span></span>
<span data-ttu-id="7b689-118">Los conectores y el servicio se encargan de todas las tareas de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="7b689-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="7b689-119">Se pueden agregar o quitar de forma dinámica.</span><span class="sxs-lookup"><span data-stu-id="7b689-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="7b689-120">Cada vez que llega una solicitud nueva, esta se enruta a uno de los conectores que estén disponibles en ese momento.</span><span class="sxs-lookup"><span data-stu-id="7b689-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="7b689-121">Si un conector no está disponible temporalmente, no responde a este tráfico.</span><span class="sxs-lookup"><span data-stu-id="7b689-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="7b689-122">Los conectores no tienen estado ni datos de configuración en el equipo.</span><span class="sxs-lookup"><span data-stu-id="7b689-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="7b689-123">Los únicos datos que almacenan son los valores de configuración para conectar el servicio y su certificado de autenticación.</span><span class="sxs-lookup"><span data-stu-id="7b689-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="7b689-124">Cuando se conectan al servicio, extraen todos los datos de configuración requeridos y los actualizan cada dos minutos.</span><span class="sxs-lookup"><span data-stu-id="7b689-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="7b689-125">Los conectores también sondean al servidor para averiguar si hay una versión más reciente del conector.</span><span class="sxs-lookup"><span data-stu-id="7b689-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="7b689-126">Si se encuentra alguna, los conectores se actualizan.</span><span class="sxs-lookup"><span data-stu-id="7b689-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="7b689-127">Puede supervisar los conectores desde el equipo en que se ejecutan, con el registro de eventos y los contadores de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7b689-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="7b689-128">O puede ver su estado desde la página Application Proxy de Azure Portal:</span><span class="sxs-lookup"><span data-stu-id="7b689-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![Conectores del Proxy de aplicación de Azure AD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="7b689-130">No es necesario que elimine manualmente los conectores que no se están utilizando.</span><span class="sxs-lookup"><span data-stu-id="7b689-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="7b689-131">Cuando hay un conector en ejecución, este permanece activo tal y como se conecta al servicio.</span><span class="sxs-lookup"><span data-stu-id="7b689-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="7b689-132">Los conectores que no se están usando se etiquetan como _inactivos_ y se quitan tras 10 días de inactividad.</span><span class="sxs-lookup"><span data-stu-id="7b689-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="7b689-133">No obstante, si quiere desinstalar un conector, desinstale el servicio de conector y el servicio de actualizador del servidor.</span><span class="sxs-lookup"><span data-stu-id="7b689-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="7b689-134">Reinicie el equipo para quitar completamente el servicio.</span><span class="sxs-lookup"><span data-stu-id="7b689-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="7b689-135">Actualizaciones automáticas</span><span class="sxs-lookup"><span data-stu-id="7b689-135">Automatic updates</span></span>

<span data-ttu-id="7b689-136">Azure AD proporciona actualizaciones automáticas para todos los conectores que se implementen.</span><span class="sxs-lookup"><span data-stu-id="7b689-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="7b689-137">Mientras se esté ejecutando el servicio de actualización de conectores del Proxy de aplicación, los conectores se actualizan automáticamente.</span><span class="sxs-lookup"><span data-stu-id="7b689-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="7b689-138">Si no ve el servicio de actualización de conectores en el servidor, debe [volver a instalar el conector](active-directory-application-proxy-enable.md) con el fin de obtener las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="7b689-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](active-directory-application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="7b689-139">Si no quiere esperar a que una actualización automática llegue al conector, puede realizar una actualización manual.</span><span class="sxs-lookup"><span data-stu-id="7b689-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="7b689-140">Vaya a la [página de descarga del conector](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) en el servidor en el que se encuentra el conector y seleccione **Descargar**.</span><span class="sxs-lookup"><span data-stu-id="7b689-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="7b689-141">Este proceso inicia una actualización del conector local.</span><span class="sxs-lookup"><span data-stu-id="7b689-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="7b689-142">Para los inquilinos con varios conectores, las actualizaciones automáticas se dirigen a un conector cada vez en cada grupo para evitar tiempos de inactividad en su entorno.</span><span class="sxs-lookup"><span data-stu-id="7b689-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="7b689-143">Puede experimentar un tiempo de inactividad cuando el conector se actualiza si:</span><span class="sxs-lookup"><span data-stu-id="7b689-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="7b689-144">Solo tiene un conector.</span><span class="sxs-lookup"><span data-stu-id="7b689-144">You only have one connector.</span></span> <span data-ttu-id="7b689-145">Para evitar este tiempo de inactividad y garantizar una alta disponibilidad, se recomienda instalar un segundo conector y [crear un grupo de conectores](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7b689-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="7b689-146">Un conector estaba en medio de una transacción cuando comenzó la actualización.</span><span class="sxs-lookup"><span data-stu-id="7b689-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="7b689-147">Aunque se pierde la transacción inicial, el explorador debería reintentar automáticamente la operación o el usuario podría actualizar la página.</span><span class="sxs-lookup"><span data-stu-id="7b689-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="7b689-148">Cuando se vuelve a enviar la solicitud, el tráfico se enruta a un conector de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7b689-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="7b689-149">Creación de grupos de conectores</span><span class="sxs-lookup"><span data-stu-id="7b689-149">Creating connector groups</span></span>

<span data-ttu-id="7b689-150">Los grupos de conectores permiten asignar conectores específicos para atender a aplicaciones específicas.</span><span class="sxs-lookup"><span data-stu-id="7b689-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="7b689-151">Puede agrupar varios conectores y, a continuación, asignar cada aplicación a un grupo.</span><span class="sxs-lookup"><span data-stu-id="7b689-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="7b689-152">Los grupos de conectores facilitan la administración de implementaciones a gran escala.</span><span class="sxs-lookup"><span data-stu-id="7b689-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="7b689-153">También mejoran la latencia para los inquilinos que tienen aplicaciones hospedadas en distintas regiones, porque se pueden crear grupos de conectores basados en la ubicación para atender solo a las aplicaciones locales.</span><span class="sxs-lookup"><span data-stu-id="7b689-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="7b689-154">Para más información acerca de los grupos de conectores, consulte [Publicación de aplicaciones en redes independientes y ubicaciones mediante grupos de conectores](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7b689-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="7b689-155">Seguridad y redes</span><span class="sxs-lookup"><span data-stu-id="7b689-155">Security and networking</span></span>

<span data-ttu-id="7b689-156">Los conectores pueden instalarse en cualquier ubicación de la red que les permita enviar solicitudes al servicio Proxy de aplicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-156">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="7b689-157">Lo importante es que el equipo que ejecuta el conector también tenga acceso a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7b689-157">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="7b689-158">Puede instalar conectores dentro de la red corporativa o en una máquina virtual que se ejecute en la nube.</span><span class="sxs-lookup"><span data-stu-id="7b689-158">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="7b689-159">Los conectores se pueden ejecutar en una red perimetral (DMZ), pero no es necesario, ya que todo el tráfico es saliente, así que la red se mantiene protegida.</span><span class="sxs-lookup"><span data-stu-id="7b689-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="7b689-160">Los conectores solo envían solicitudes salientes.</span><span class="sxs-lookup"><span data-stu-id="7b689-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="7b689-161">El tráfico saliente se envía al servicio de Proxy de aplicación y a las aplicaciones publicadas.</span><span class="sxs-lookup"><span data-stu-id="7b689-161">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="7b689-162">No hay que abrir los puertos de entrada, porque una vez que se ha establecido una sesión, el tráfico fluye en ambos sentidos.</span><span class="sxs-lookup"><span data-stu-id="7b689-162">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="7b689-163">No es necesario configurar el equilibrio de carga entre los conectores ni configurar el acceso de entrada a través de los firewalls.</span><span class="sxs-lookup"><span data-stu-id="7b689-163">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="7b689-164">Para más información sobre cómo configurar reglas de firewall de salida, vea [Trabajo con servidores proxy locales existentes](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="7b689-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="7b689-165">Use la [herramienta de prueba Connector Ports del proxy de aplicación de Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) para comprobar que el conector puede comunicarse con el servicio Proxy de aplicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-165">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="7b689-166">Como mínimo, asegúrese de que la región de centro de EE. UU. y la región más cercana tienen todas las marcas de verificación en verde.</span><span class="sxs-lookup"><span data-stu-id="7b689-166">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="7b689-167">Además, cuantas más marcas de verificación verde haya, mayor resistencia habrá.</span><span class="sxs-lookup"><span data-stu-id="7b689-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="7b689-168">Rendimiento y escalabilidad</span><span class="sxs-lookup"><span data-stu-id="7b689-168">Performance and scalability</span></span>

<span data-ttu-id="7b689-169">La escala del servicio Proxy de aplicación es transparente, pero es un factor en lo que respecta a los conectores.</span><span class="sxs-lookup"><span data-stu-id="7b689-169">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="7b689-170">Debe tener suficientes conectores para administrar el tráfico en sus momentos de pico.</span><span class="sxs-lookup"><span data-stu-id="7b689-170">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="7b689-171">Pero no es necesario configurar el equilibrio de carga, ya que todos los conectores de un grupo de conectores equilibran la carga automáticamente.</span><span class="sxs-lookup"><span data-stu-id="7b689-171">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="7b689-172">Puesto que los conectores no tienen estado, no dependen del número de usuarios ni sesiones.</span><span class="sxs-lookup"><span data-stu-id="7b689-172">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="7b689-173">Más bien dependen del número de solicitudes y del tamaño de la carga.</span><span class="sxs-lookup"><span data-stu-id="7b689-173">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="7b689-174">En el caso del tráfico web estándar, una máquina puede controlar en promedio unas dos mil solicitudes por segundo.</span><span class="sxs-lookup"><span data-stu-id="7b689-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="7b689-175">La capacidad específica depende de las características exactas de la máquina.</span><span class="sxs-lookup"><span data-stu-id="7b689-175">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="7b689-176">El rendimiento del conector viene determinado por las redes y la CPU.</span><span class="sxs-lookup"><span data-stu-id="7b689-176">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="7b689-177">El rendimiento de la CPU es necesario para el cifrado y el descifrado SSL, mientras que las redes son importantes para conectar rápidamente con las aplicaciones y el servicio en línea de Azure.</span><span class="sxs-lookup"><span data-stu-id="7b689-177">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="7b689-178">En cambio, la memoria no supone un problema para los conectores.</span><span class="sxs-lookup"><span data-stu-id="7b689-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="7b689-179">El servicio en línea se encarga de gran parte del procesamiento y de todo el tráfico no autenticado.</span><span class="sxs-lookup"><span data-stu-id="7b689-179">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="7b689-180">Todo lo que puede realizarse en la nube se realiza en la nube.</span><span class="sxs-lookup"><span data-stu-id="7b689-180">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="7b689-181">Otro factor que incide el rendimiento es la calidad de las conexiones entre los conectores; en particular:</span><span class="sxs-lookup"><span data-stu-id="7b689-181">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="7b689-182">**El servicio en línea**: unas conexiones de baja o alta latencia al servicio Proxy de aplicación de Azure influyen en el rendimiento del conector.</span><span class="sxs-lookup"><span data-stu-id="7b689-182">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="7b689-183">Para optimizar el rendimiento, conecte la organización a Azure con Express Route.</span><span class="sxs-lookup"><span data-stu-id="7b689-183">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="7b689-184">Si no, el equipo de redes debe asegurarse de que las conexiones a Azure se administren de la manera más eficaz posible.</span><span class="sxs-lookup"><span data-stu-id="7b689-184">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="7b689-185">**Las aplicaciones de back-end:** en algunos casos, hay servidores proxy adicionales entre el conector y las aplicaciones de back-end que pueden ralentizar o evitar las conexiones.</span><span class="sxs-lookup"><span data-stu-id="7b689-185">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="7b689-186">Para solucionar esta situación, abra un explorador desde el servidor del conector e intente acceder a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-186">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="7b689-187">Si ejecuta los conectores en Azure pero las aplicaciones están en local, la experiencia podría no corresponderse a lo que esperan los usuarios.</span><span class="sxs-lookup"><span data-stu-id="7b689-187">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="7b689-188">**Los controladores de dominio:** si los conectores realizan el SSO mediante delegación limitada de kerberos, se ponen en contacto con los controladores de dominio antes de enviar la solicitud al back-end.</span><span class="sxs-lookup"><span data-stu-id="7b689-188">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="7b689-189">Los conectores tienen una memoria caché de vales Kerberos, pero en un entorno ocupado, la capacidad de respuesta de los controladores de dominio puede repercutir en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7b689-189">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="7b689-190">Este problema es más común en el caso de los conectores que se ejecutan en Azure pero se comunican con controladores de dominio que están en local.</span><span class="sxs-lookup"><span data-stu-id="7b689-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="7b689-191">Para más información sobre la optimización de la red, vea [Consideraciones sobre la topología de red al utilizar el Proxy de aplicación de Azure Active Directory](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="7b689-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="7b689-192">Unión a dominio</span><span class="sxs-lookup"><span data-stu-id="7b689-192">Domain joining</span></span>

<span data-ttu-id="7b689-193">Los conectores se pueden ejecutar en un equipo que no esté unido a dominio.</span><span class="sxs-lookup"><span data-stu-id="7b689-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="7b689-194">Sin embargo, si desea usar el inicio de sesión único (SSO) para aplicaciones que usan la autenticación integrada de Windows (IWA), necesita una máquina unida a dominio.</span><span class="sxs-lookup"><span data-stu-id="7b689-194">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="7b689-195">En este caso, los equipos del conector deben estar unidos a un dominio que pueda llevar a cabo la delegación limitada de [kerberos](https://web.mit.edu/kerberos) en nombre de los usuarios para las aplicaciones publicadas.</span><span class="sxs-lookup"><span data-stu-id="7b689-195">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="7b689-196">Los conectores también pueden estar unidos a dominios o bosques que tienen una relación de confianza parcial o a controladores de dominio de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="7b689-196">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="7b689-197">Implementaciones del conector en entornos protegidos</span><span class="sxs-lookup"><span data-stu-id="7b689-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="7b689-198">Por lo general, la implementación del conector es sencilla y no requiere ninguna configuración especial.</span><span class="sxs-lookup"><span data-stu-id="7b689-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="7b689-199">Sin embargo, hay algunas condiciones únicas que deben tenerse en cuenta:</span><span class="sxs-lookup"><span data-stu-id="7b689-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="7b689-200">Las organizaciones que limitan el tráfico saliente deben [abrir los puertos necesarios](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="7b689-200">Organizations that limit the outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="7b689-201">Podría ser necesario que las máquinas compatibles con FIPS cambiaran su configuración para permitir que los procesos del conector generaran y almacenaran un certificado.</span><span class="sxs-lookup"><span data-stu-id="7b689-201">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="7b689-202">Las organizaciones que bloquean su entorno en función de los procesos que emiten las solicitudes de red tienen que asegurarse de que los servicios del conector estén habilitados para tener acceso a todas las direcciones IP y puertos necesarios.</span><span class="sxs-lookup"><span data-stu-id="7b689-202">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="7b689-203">En algunos casos, los proxy de reenvío de salida pueden interrumpir la autenticación de certificado de dos direcciones y provocar un error en la comunicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-203">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="7b689-204">Autenticación de conector</span><span class="sxs-lookup"><span data-stu-id="7b689-204">Connector authentication</span></span>

<span data-ttu-id="7b689-205">Para proporcionar un servicio seguro, los conectores tienen que autenticarse hacia el servicio y el servicio tiene que autenticarse hacia el conector.</span><span class="sxs-lookup"><span data-stu-id="7b689-205">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="7b689-206">Esta autenticación se lleva a cabo mediante certificados de cliente y servidor cuando los conectores inician la conexión.</span><span class="sxs-lookup"><span data-stu-id="7b689-206">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="7b689-207">De este modo, el nombre de usuario y la contraseña del administrador no se almacenan en el equipo del conector.</span><span class="sxs-lookup"><span data-stu-id="7b689-207">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="7b689-208">Los certificados utilizados son específicos del servicio de Proxy de aplicación.</span><span class="sxs-lookup"><span data-stu-id="7b689-208">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="7b689-209">Se crean durante el registro inicial y se renuevan automáticamente por los conectores cada dos meses.</span><span class="sxs-lookup"><span data-stu-id="7b689-209">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="7b689-210">Si un conector no se conecta al servicio durante varios meses, puede que tenga los certificados caducados.</span><span class="sxs-lookup"><span data-stu-id="7b689-210">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="7b689-211">En este caso, desinstale y vuelva a instalar el conector para provocar el registro.</span><span class="sxs-lookup"><span data-stu-id="7b689-211">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="7b689-212">Puede ejecutar los siguientes comandos de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="7b689-212">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="7b689-213">En segundo plano</span><span class="sxs-lookup"><span data-stu-id="7b689-213">Under the hood</span></span>

<span data-ttu-id="7b689-214">Los conectores se basan en el Proxy de aplicación web de Windows Server, por lo que coinciden mayoritariamente respecto a las herramientas de administración, incluidos los Registros de eventos de Windows.</span><span class="sxs-lookup"><span data-stu-id="7b689-214">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Administración de registros de eventos con el Visor de eventos](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="7b689-216">y contadores de rendimiento de Windows.</span><span class="sxs-lookup"><span data-stu-id="7b689-216">and Windows performance counters.</span></span> 

 ![Adición de contadores al conector con el Monitor de rendimiento](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="7b689-218">Los conectores tienen registros de administración y sesión.</span><span class="sxs-lookup"><span data-stu-id="7b689-218">The connectors have both admin and session logs.</span></span> <span data-ttu-id="7b689-219">Los registros de administración incluyen eventos importantes y sus errores.</span><span class="sxs-lookup"><span data-stu-id="7b689-219">The admin logs include key events and their errors.</span></span> <span data-ttu-id="7b689-220">Los registros de sesión incluyen todas las transacciones y sus detalles de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="7b689-220">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="7b689-221">Para poder verlos, vaya al Visor de eventos, abra el menú **Ver** y active **Mostrar registros analíticos y de depuración**.</span><span class="sxs-lookup"><span data-stu-id="7b689-221">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="7b689-222">A continuación, habilítelos para que puedan comenzar a recopilar eventos.</span><span class="sxs-lookup"><span data-stu-id="7b689-222">Then, enable them to start collecting events.</span></span> <span data-ttu-id="7b689-223">Estos registros no aparecen en el Proxy de aplicación web en Windows Server 2012 R2, ya que los conectores se basan en una versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="7b689-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="7b689-224">Puede examinar el estado del servicio en la ventana Servicios.</span><span class="sxs-lookup"><span data-stu-id="7b689-224">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="7b689-225">El conector consta de dos servicios de Windows: el conector real y el actualizador.</span><span class="sxs-lookup"><span data-stu-id="7b689-225">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="7b689-226">Ambos deben ejecutarse todo el tiempo.</span><span class="sxs-lookup"><span data-stu-id="7b689-226">Both of them must run all the time.</span></span>

 ![Local de servicios de Azure AD](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="7b689-228">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="7b689-228">Next steps</span></span>


* [<span data-ttu-id="7b689-229">Publicación de aplicaciones en redes independientes y ubicaciones mediante grupos de conectores</span><span class="sxs-lookup"><span data-stu-id="7b689-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="7b689-230">Trabajo con servidores proxy locales existentes</span><span class="sxs-lookup"><span data-stu-id="7b689-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="7b689-231">Solución de problemas y mensajes de error de Proxy de aplicación</span><span class="sxs-lookup"><span data-stu-id="7b689-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="7b689-232">Cómo instalar de forma silenciosa el conector de Proxy de aplicación de Azure AD</span><span class="sxs-lookup"><span data-stu-id="7b689-232">How to silently install the Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)


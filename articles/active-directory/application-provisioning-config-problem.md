---
title: "Problema al configurar el aprovisionamiento de usuarios para una aplicación de la galería de Azure AD | Microsoft Docs"
description: "Cómo solucionar los problemas habituales que surgen al configurar el aprovisionamiento de usuarios para una aplicación que ya aparece en la galería de aplicaciones de Azure AD"
services: active-directory
documentationcenter: 
author: ajamess
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: asteen
ms.openlocfilehash: 44e344095352f2bc6b27e389fc8be2cdf3e368d8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="problem-configuring-user-provisioning-to-an-azure-ad-gallery-application"></a><span data-ttu-id="0f82e-103">Problema al configurar el aprovisionamiento de usuarios para una aplicación de la galería de Azure AD</span><span class="sxs-lookup"><span data-stu-id="0f82e-103">Problem configuring user provisioning to an Azure AD Gallery application</span></span>

<span data-ttu-id="0f82e-104">La configuración del [aprovisionamiento automático de usuarios](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) para una aplicación (si se admite) requiere que se sigan las instrucciones concretas para preparar la aplicación para el aprovisionamiento automático.</span><span class="sxs-lookup"><span data-stu-id="0f82e-104">Configuring [automatic user provisioning](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) for an app (where supported), requires that specific instructions be followed to prepare the application for automatic provisioning.</span></span> <span data-ttu-id="0f82e-105">A continuación, puede usar Azure Portal para configurar el servicio de aprovisionamiento para sincronizar las cuentas de usuario con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-105">Then you can use the Azure portal to configure the provisioning service to synchronize user accounts to the application.</span></span>

<span data-ttu-id="0f82e-106">Siempre debería empezar buscando el tutorial de configuración específico para configurar el aprovisionamiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-106">You should always start by finding the setup tutorial specific to setting up provisioning for your application.</span></span> <span data-ttu-id="0f82e-107">A continuación, siga esos pasos para configurar tanto la aplicación como Azure AD para crear la conexión de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="0f82e-107">Then follow those steps to configure both the app and Azure AD to create the provisioning connection.</span></span> <span data-ttu-id="0f82e-108">Puede encontrar una lista de tutoriales sobre aplicaciones en [Lista de tutoriales sobre cómo integrar aplicaciones SaaS con Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span><span class="sxs-lookup"><span data-stu-id="0f82e-108">A list of app tutorials can be found at [List of Tutorials on How to Integrate SaaS Apps with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span></span>

## <a name="how-to-see-if-provisioning-is-working"></a><span data-ttu-id="0f82e-109">Comprobación de si el aprovisionamiento está funcionando</span><span class="sxs-lookup"><span data-stu-id="0f82e-109">How to see if provisioning is working</span></span> 

<span data-ttu-id="0f82e-110">Una vez que el servicio está configurado, se puede extraer la mayor parte de la información sobre el funcionamiento del servicio de dos lugares:</span><span class="sxs-lookup"><span data-stu-id="0f82e-110">Once the service is configured, most insights into the operation of the service can be drawn from two places:</span></span>

-   <span data-ttu-id="0f82e-111">**Registros de auditoría**: los registros de auditoría de aprovisionamiento registran todas las operaciones realizadas por el servicio de aprovisionamiento, incluidas las consultas en Azure AD de los usuarios asignados que pertenecen al ámbito de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="0f82e-111">**Audit logs** – The provisioning audit logs record all the operations performed by the provisioning service, including querying Azure AD for assigned users that are in scope for provisioning.</span></span> <span data-ttu-id="0f82e-112">Consulte la existencia de esos usuarios en la aplicación de destino y compare los objetos de usuario entre el sistema.</span><span class="sxs-lookup"><span data-stu-id="0f82e-112">Query the target app for the existence of those users, comparing the user objects between the system.</span></span> <span data-ttu-id="0f82e-113">Después, agregue, actualice o deshabilite la cuenta de usuario en el sistema de destino en función de la comparación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-113">Then add, update, or disable the user account in the target system based on the comparison.</span></span> <span data-ttu-id="0f82e-114">Puede acceder a los registros de auditoría de aprovisionamiento en Azure Portal, en la pestaña **Azure Active Directory &gt; Aplicaciones empresariales &gt; \[Nombre de la aplicación\] &gt; Registros de auditoría**.</span><span class="sxs-lookup"><span data-stu-id="0f82e-114">The provisioning audit logs can be accessed in the Azure portal, in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt; Audit Logs** tab.</span></span> <span data-ttu-id="0f82e-115">Filtre los registros en la categoría **Aprovisionamiento de cuentas** para ver solo los eventos de aprovisionamiento para esa aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-115">Filter the logs on the **Account Provisioning** category to only see the provisioning events for that app.</span></span>

-   <span data-ttu-id="0f82e-116">**Estado de aprovisionamiento**: se puede ver un resumen de aprovisionamiento de la última ejecución del aprovisionamiento para una aplicación determinada en la sección **Azure Active Directory &gt; Aplicaciones empresariales &gt; \[Nombre de la aplicación\] &gt;Aprovisionamiento**, en la parte inferior de la pantalla bajo la configuración del servicio.</span><span class="sxs-lookup"><span data-stu-id="0f82e-116">**Provisioning status –** A summary of the last provisioning run for a given app can be seen in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section, at the bottom of the screen under the service settings.</span></span> <span data-ttu-id="0f82e-117">En esta sección se resume cuántos usuarios (o grupos) se están sincronizando actualmente entre ambos sistemas y si se han producido errores.</span><span class="sxs-lookup"><span data-stu-id="0f82e-117">This section summarizes how many users (and/or groups) are currently being synchronized between the two systems, and if there are any errors.</span></span> <span data-ttu-id="0f82e-118">Los detalles del error se encuentran en los registros de auditoría.</span><span class="sxs-lookup"><span data-stu-id="0f82e-118">Error details be in the audit logs.</span></span> <span data-ttu-id="0f82e-119">Tenga en cuenta que el estado de aprovisionamiento no se rellena hasta que se ha completado una sincronización inicial completa entre Azure AD y la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-119">Note that the provisioning status not be populated until one full initial synchronization has been completed between Azure AD and the app.</span></span>

## <a name="general-problem-areas-with-provisioning-to-consider"></a><span data-ttu-id="0f82e-120">Áreas problemáticas generales con el aprovisionamiento que tener en cuenta</span><span class="sxs-lookup"><span data-stu-id="0f82e-120">General problem areas with provisioning to consider</span></span>

<span data-ttu-id="0f82e-121">A continuación, se muestra una lista de las áreas problemáticas generales en las que puede profundizar si tiene idea de por dónde empezar.</span><span class="sxs-lookup"><span data-stu-id="0f82e-121">Below is a list of the general problem areas that you can drill into if you have an idea of where to start.</span></span>

* [<span data-ttu-id="0f82e-122">No parece que el servicio de aprovisionamiento se inicie</span><span class="sxs-lookup"><span data-stu-id="0f82e-122">Provisioning service does not appear to start</span></span>](#provisioning-service-does-not-appear-to-start)
* [<span data-ttu-id="0f82e-123">No se puede guardar la configuración porque las credenciales de la aplicación no funcionan</span><span class="sxs-lookup"><span data-stu-id="0f82e-123">Can’t save configuration due to app credentials not working</span></span>](#can’t-save-configuration-due-to-app-credentials-not-working)
* [<span data-ttu-id="0f82e-124">Los registros de auditoría indican que hay usuarios "omitidos" y no aprovisionados, aunque estén asignados</span><span class="sxs-lookup"><span data-stu-id="0f82e-124">Audit logs say users are “skipped” and not provisioned, even though they are assigned</span></span>](#audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a><span data-ttu-id="0f82e-125">No parece que el servicio de aprovisionamiento se inicie</span><span class="sxs-lookup"><span data-stu-id="0f82e-125">Provisioning service does not appear to start</span></span>

<span data-ttu-id="0f82e-126">Si establece **Estado de aprovisionamiento** en **Activado** en la sección **Azure Active Directory &gt; Aplicaciones empresariales &gt; \[Nombre de la aplicación\] &gt;Aprovisionamiento** de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="0f82e-126">If you set the **Provisioning Status** to be **On** in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section of the Azure portal.</span></span> <span data-ttu-id="0f82e-127">No obstante, no se muestran más detalles de estado en esa página tras recargas posteriores.</span><span class="sxs-lookup"><span data-stu-id="0f82e-127">However no other status details are shown on that page after subsequent reloads.</span></span> <span data-ttu-id="0f82e-128">Es probable que el servicio se esté ejecutando pero que no se haya completado aún una sincronización inicial.</span><span class="sxs-lookup"><span data-stu-id="0f82e-128">It is likely that the service is running but has not completed an initial synchronization yet.</span></span> <span data-ttu-id="0f82e-129">Compruebe los **registros de auditoría** descritos antes para determinar qué operaciones está realizando el servicio y si se han producido errores.</span><span class="sxs-lookup"><span data-stu-id="0f82e-129">Check the **Audit logs** described above to determine what operations the service is performing, and if there are any errors.</span></span>

>[!NOTE]
><span data-ttu-id="0f82e-130">Una sincronización inicial puede tardar desde 20 minutos hasta varias horas, según el tamaño del directorio de Azure AD y el número de usuarios en el ámbito de aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="0f82e-130">An initial sync can take anywhere from 20 minutes to several hours, depending on the size of the Azure AD directory and the number of users in scope for provisioning.</span></span> <span data-ttu-id="0f82e-131">Las sincronizaciones posteriores a la inicial serán más rápidas, ya que el servicio de aprovisionamiento almacena marcas de agua que representan el estado de ambos sistemas tras la sincronización inicial, lo cual mejora el rendimiento de las posteriores.</span><span class="sxs-lookup"><span data-stu-id="0f82e-131">Subsequent syncs after the initial sync be faster, as the provisioning service stores watermarks that represent the state of both systems after the initial sync, improving performance of subsequent syncs.</span></span>
>
>

## <a name="cant-save-configuration-due-to-app-credentials-not-working"></a><span data-ttu-id="0f82e-132">No se puede guardar la configuración porque las credenciales de la aplicación no funcionan</span><span class="sxs-lookup"><span data-stu-id="0f82e-132">Can’t save configuration due to app credentials not working</span></span>

<span data-ttu-id="0f82e-133">Para que funcione el aprovisionamiento, Azure AD necesita credenciales válidas que le permitan conectarse a una API de administración de usuarios proporcionada por esa aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-133">In order for provisioning to work, Azure AD requires valid credentials that allow it to connect to a user management API provided by that app.</span></span> <span data-ttu-id="0f82e-134">Si estas credenciales no funcionan o las desconoce, revise el tutorial para configurar esta aplicación, como se ha descrito antes.</span><span class="sxs-lookup"><span data-stu-id="0f82e-134">If these credentials do not work, or you don’t know wat they are, review the tutorial for setting up this app, described previously.</span></span>

## <a name="audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a><span data-ttu-id="0f82e-135">Los registros de auditoría indican que hay usuarios omitidos y no aprovisionados, aunque estén asignados</span><span class="sxs-lookup"><span data-stu-id="0f82e-135">Audit logs say users are skipped and not provisioned even though they are assigned</span></span>

<span data-ttu-id="0f82e-136">Cuando un usuario se muestra como "Omitido" en los registros de auditoría, es muy importante que lea los detalles ampliados en el mensaje del registro para determinar la razón.</span><span class="sxs-lookup"><span data-stu-id="0f82e-136">When a user shows up as “skipped” in the audit logs, it is very important to read the extended details in the log message to determine the reason.</span></span> <span data-ttu-id="0f82e-137">Algunas razones y soluciones habituales son:</span><span class="sxs-lookup"><span data-stu-id="0f82e-137">Below are common reasons and resolutions:</span></span>

-   <span data-ttu-id="0f82e-138">**Se ha configurado un filtro de ámbito** **que está filtrando al usuario por un valor de atributo**.</span><span class="sxs-lookup"><span data-stu-id="0f82e-138">**A scoping filter has been configured** **that is filtering the user out based on an attribute value**.</span></span> <span data-ttu-id="0f82e-139">Para más información sobre los filtros de ámbito, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span><span class="sxs-lookup"><span data-stu-id="0f82e-139">For more information on scoping filters, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span></span>

-   <span data-ttu-id="0f82e-140">**El usuario no está autorizado de forma efectiva.**</span><span class="sxs-lookup"><span data-stu-id="0f82e-140">**The user is “not effectively entitled”.**</span></span> <span data-ttu-id="0f82e-141">Si ve un mensaje de error de este tipo, se debe a que hay un problema con el registro de asignación de usuarios almacenado en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0f82e-141">If you see this specific error message, it is because there is a problem with the user assignment record stored in Azure AD.</span></span> <span data-ttu-id="0f82e-142">Para corregir este problema, cancele la asignación del usuario (o grupo) de la aplicación y vuelva a repetirla.</span><span class="sxs-lookup"><span data-stu-id="0f82e-142">To fix this issue, un-assign the user (or group) from the app, and re-assign it again.</span></span> <span data-ttu-id="0f82e-143">Para más información sobre la asignación, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span><span class="sxs-lookup"><span data-stu-id="0f82e-143">For more information on assignment, see <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span></span>

-   <span data-ttu-id="0f82e-144">**Un atributo obligatorio falta o no se ha llenado para un usuario.**</span><span class="sxs-lookup"><span data-stu-id="0f82e-144">**A required attribute is missing or not populated for a user.**</span></span> <span data-ttu-id="0f82e-145">Una cuestión importante que tener en cuenta al configurar el aprovisionamiento es revisar y configurar las asignaciones de atributos y los flujos de trabajo que definen qué propiedades de usuario (o de grupo) fluyen de Azure AD a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0f82e-145">An important thing to consider when setting up provisioning be to review and configure the attribute mappings and workflows that define which user (or group) properties flow from Azure AD to the application.</span></span> <span data-ttu-id="0f82e-146">Esto incluye la configuración de la "propiedad de coincidencia" que se usa para identificar de forma exclusiva y emparejar a usuarios y grupos entre ambos sistemas.</span><span class="sxs-lookup"><span data-stu-id="0f82e-146">This includes setting the “matching property” that be used to uniquely identify and match users/groups between the two systems.</span></span> <span data-ttu-id="0f82e-147">Para más información sobre este importante proceso, consulte <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span><span class="sxs-lookup"><span data-stu-id="0f82e-147">For more information on this important process, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span></span>

   * <span data-ttu-id="0f82e-148">**Asignaciones de atributos para grupos:** aprovisionamiento del nombre del grupo y los detalles del grupo, además de los miembros, si se admite para algunas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0f82e-148">**Attribute mappings for groups:** Provisioning of the group name and group details, in addition to the members, if supported for some applications.</span></span> <span data-ttu-id="0f82e-149">Puede habilitar o deshabilitar esta funcionalidad habilitando o deshabilitando el valor de **Asignación** para los objetos de grupo que se muestran en la pestaña **Aprovisionamiento**.</span><span class="sxs-lookup"><span data-stu-id="0f82e-149">You can enable or disable this functionality by enabling or disabling the **Mapping** for group objects shown in the **Provisioning** tab.</span></span> <span data-ttu-id="0f82e-150">Si los grupos de aprovisionamiento están habilitados, asegúrese de revisar las asignaciones de atributos para asegurarse de que se use un campo apropiado para el "identificador de coincidencia".</span><span class="sxs-lookup"><span data-stu-id="0f82e-150">If provisioning groups is enabled, be sure to review the attribute mappings to ensure an appropriate field is being used for the “matching ID”.</span></span> <span data-ttu-id="0f82e-151">Esto puede ser el nombre para mostrar o el alias de correo electrónico, ya que el grupo y sus miembros no se habrán aprovisionado si la propiedad de coincidencia está vacía o no se ha rellenado para un grupo en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0f82e-151">This can be the display name or email alias), as the group and its members not be provisioned if the matching property is empty or not populated for a group in Azure AD.</span></span>

#<a name="next-steps"></a><span data-ttu-id="0f82e-152">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0f82e-152">Next steps</span></span>
[<span data-ttu-id="0f82e-153">Automatización del aprovisionamiento y desaprovisionamiento de usuarios para aplicaciones SaaS con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="0f82e-153">Automate User Provisioning and Deprovisioning to SaaS Applications with Azure Active Directory</span></span>](active-directory-saas-app-provisioning.md)

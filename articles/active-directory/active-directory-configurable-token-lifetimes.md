---
title: Vigencia de tokens configurable en Azure Active Directory | Microsoft Docs
description: Aprenda a establecer la vigencia de los tokens emitidos por Azure AD.
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 06f5b317-053e-44c3-aaaa-cf07d8692735
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/20/2017
ms.author: billmath
ms.custom: aaddev
ms.reviewer: anchitn
ms.openlocfilehash: d23721eba308096a05211eb6e26e1338a69cae0c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="configurable-token-lifetimes-in-azure-active-directory-public-preview"></a><span data-ttu-id="c9e28-103">Vigencia de tokens configurables de Azure Active Directory (versión preliminar pública)</span><span class="sxs-lookup"><span data-stu-id="c9e28-103">Configurable token lifetimes in Azure Active Directory (Public Preview)</span></span>
<span data-ttu-id="c9e28-104">Puede especificar la vigencia de un token emitido por Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="c9e28-104">You can specify the lifetime of a token issued by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="c9e28-105">La vigencia de los tokens se puede configurar para todas las aplicaciones de una organización, para una aplicación multiinquilino (multiorganización) o para una entidad de servicio específica de una organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span>

> [!NOTE]
> <span data-ttu-id="c9e28-106">Esta funcionalidad se encuentra actualmente en versión preliminar pública.</span><span class="sxs-lookup"><span data-stu-id="c9e28-106">This capability currently is in Public Preview.</span></span> <span data-ttu-id="c9e28-107">Debe estar preparado para deshacer o eliminar los cambios.</span><span class="sxs-lookup"><span data-stu-id="c9e28-107">Be prepared to revert or remove any changes.</span></span> <span data-ttu-id="c9e28-108">La característica estará disponible en cualquier suscripción de Azure Active Directory durante el período de versión preliminar pública.</span><span class="sxs-lookup"><span data-stu-id="c9e28-108">The feature is available in any Azure Active Directory subscription during Public Preview.</span></span> <span data-ttu-id="c9e28-109">Sin embargo, cuando ya esté disponible con carácter general, algunos aspectos de ella podrían requerir una suscripción de [Azure Active Directory Premium](active-directory-get-started-premium.md).</span><span class="sxs-lookup"><span data-stu-id="c9e28-109">However, when the feature becomes generally available, some aspects of the feature might require an [Azure Active Directory Premium](active-directory-get-started-premium.md) subscription.</span></span>
>
>

<span data-ttu-id="c9e28-110">En Azure AD, un objeto de directiva representa un conjunto de reglas que se exigen en algunas o todas las aplicaciones de una organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-110">In Azure AD, a policy object represents a set of rules that are enforced on individual applications or on all applications in an organization.</span></span> <span data-ttu-id="c9e28-111">Cada tipo de directiva tiene una estructura única con un conjunto de propiedades que luego se aplican a los objetos a los que están asignadas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-111">Each policy type has a unique structure, with a set of properties that are applied to objects to which they are assigned.</span></span>

<span data-ttu-id="c9e28-112">Puede designar una directiva como la directiva predeterminada para su organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-112">You can designate a policy as the default policy for your organization.</span></span> <span data-ttu-id="c9e28-113">La directiva se aplicará a cualquier aplicación que resida dentro de esa organización, siempre y cuando no se haya reemplazado por una directiva con una prioridad más alta.</span><span class="sxs-lookup"><span data-stu-id="c9e28-113">The policy is applied to any application in the organization, as long as it is not overridden by a policy with a higher priority.</span></span> <span data-ttu-id="c9e28-114">También puede asignar una directiva a aplicaciones específicas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-114">You also can assign a policy to specific applications.</span></span> <span data-ttu-id="c9e28-115">El orden de prioridad varía según el tipo de directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-115">The order of priority varies by policy type.</span></span>


## <a name="token-types"></a><span data-ttu-id="c9e28-116">Tipos de token</span><span class="sxs-lookup"><span data-stu-id="c9e28-116">Token types</span></span>

<span data-ttu-id="c9e28-117">Las directivas de vigencia del token se pueden establecer para tokens de actualización, tokens de acceso, tokens de sesión y tokens de identificador.</span><span class="sxs-lookup"><span data-stu-id="c9e28-117">You can set token lifetime policies for refresh tokens, access tokens, session tokens, and ID tokens.</span></span>

### <a name="access-tokens"></a><span data-ttu-id="c9e28-118">Tokens de acceso</span><span class="sxs-lookup"><span data-stu-id="c9e28-118">Access tokens</span></span>
<span data-ttu-id="c9e28-119">Los clientes utilizan tokens de acceso para acceder a un recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="c9e28-119">Clients use access tokens to access a protected resource.</span></span> <span data-ttu-id="c9e28-120">Solo se puede utilizar un token de acceso para una combinación específica de usuario, cliente y recurso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-120">An access token can be used only for a specific combination of user, client, and resource.</span></span> <span data-ttu-id="c9e28-121">Los tokens de acceso no se pueden revocar y son válidos hasta que caducan.</span><span class="sxs-lookup"><span data-stu-id="c9e28-121">Access tokens cannot be revoked and are valid until their expiry.</span></span> <span data-ttu-id="c9e28-122">Un individuo maltintencionado que haya obtenido un token de acceso puede usarlo durante toda su vigencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-122">A malicious actor that has obtained an access token can use it for extent of its lifetime.</span></span> <span data-ttu-id="c9e28-123">El ajuste de la vigencia de un token de acceso es un balance entre la mejora del rendimiento del sistema y el aumento de la cantidad de tiempo que el cliente conserva el acceso después de que la cuenta de usuario está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-123">Adjusting the lifetime of an access token is a trade-off between improving system performance and increasing the amount of time that the client retains access after the user’s account is disabled.</span></span> <span data-ttu-id="c9e28-124">Se consigue un rendimiento mejorado del sistema al reducir el número de veces que un cliente necesita adquirir un token de acceso nuevo.</span><span class="sxs-lookup"><span data-stu-id="c9e28-124">Improved system performance is achieved by reducing the number of times a client needs to acquire a fresh access token.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="c9e28-125">Tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-125">Refresh tokens</span></span>
<span data-ttu-id="c9e28-126">Cuando un cliente adquiere un token de acceso para acceder a un recurso protegido, recibe un token de actualización y un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-126">When a client acquires an access token to access a protected resource, the client receives both a refresh token and an access token.</span></span> <span data-ttu-id="c9e28-127">El token de actualización se usa para obtener nuevos pares de tokens de acceso/actualización cuando el token de acceso actual expira.</span><span class="sxs-lookup"><span data-stu-id="c9e28-127">The refresh token is used to obtain new access/refresh token pairs when the current access token expires.</span></span> <span data-ttu-id="c9e28-128">Un token de actualización se enlaza a una combinación de usuario y cliente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-128">A refresh token is bound to a combination of user and client.</span></span> <span data-ttu-id="c9e28-129">Se puede revocar un token de actualización y se comprobará la validez de este cada vez que se use.</span><span class="sxs-lookup"><span data-stu-id="c9e28-129">A refresh token can be revoked, and the token's validity is checked every time the token is used.</span></span>

<span data-ttu-id="c9e28-130">Es importante diferenciar entre clientes públicos y confidenciales.</span><span class="sxs-lookup"><span data-stu-id="c9e28-130">It's important to make a distinction between confidential clients and public clients.</span></span> <span data-ttu-id="c9e28-131">Para más información sobre los diferentes tipos de clientes, consulte [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span><span class="sxs-lookup"><span data-stu-id="c9e28-131">For more information about different types of clients, see [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span></span>

#### <a name="token-lifetimes-with-confidential-client-refresh-tokens"></a><span data-ttu-id="c9e28-132">Vigencia de los tokens de actualización de cliente confidencial</span><span class="sxs-lookup"><span data-stu-id="c9e28-132">Token lifetimes with confidential client refresh tokens</span></span>
<span data-ttu-id="c9e28-133">Los clientes confidenciales son aplicaciones que pueden almacenar de forma segura una contraseña (secreto) de un cliente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-133">Confidential clients are applications that can securely store a client password (secret).</span></span> <span data-ttu-id="c9e28-134">Pueden comprobar que las solicitudes proceden de la aplicación cliente y no de un individuo malintencionado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-134">They can prove that requests are coming from the client application and not from a malicious actor.</span></span> <span data-ttu-id="c9e28-135">Por ejemplo, una aplicación web es un cliente confidencial ya que puede almacenar un secreto de cliente en el servidor web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-135">For example, a web app is a confidential client because it can store a client secret on the web server.</span></span> <span data-ttu-id="c9e28-136">Y, por tanto, este secreto no se expone.</span><span class="sxs-lookup"><span data-stu-id="c9e28-136">It is not exposed.</span></span> <span data-ttu-id="c9e28-137">Dado que estos flujos resultan más seguros, las duraciones predeterminadas de tokens de actualización emitidos para estos flujos será `until-revoked`, no se podrán cambiar mediante la directiva y no se revocarán en los restablecimientos de contraseña voluntarios.</span><span class="sxs-lookup"><span data-stu-id="c9e28-137">Because these flows are more secure, the default lifetimes of refresh tokens issued to these flows is `until-revoked`, cannot be changed by using policy, and will not be revoked on voluntary password resets.</span></span>

#### <a name="token-lifetimes-with-public-client-refresh-tokens"></a><span data-ttu-id="c9e28-138">Vigencia de los tokens de actualización de cliente público</span><span class="sxs-lookup"><span data-stu-id="c9e28-138">Token lifetimes with public client refresh tokens</span></span>

<span data-ttu-id="c9e28-139">Los clientes públicos no pueden almacenar de forma segura una contraseña (secreto) de cliente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-139">Public clients cannot securely store a client password (secret).</span></span> <span data-ttu-id="c9e28-140">Por ejemplo, una aplicación de iOS o Android no puede ofuscar un secreto del propietario del recurso y, por ello, se considera a la aplicación un cliente público.</span><span class="sxs-lookup"><span data-stu-id="c9e28-140">For example, an iOS/Android app cannot obfuscate a secret from the resource owner, so it is considered a public client.</span></span> <span data-ttu-id="c9e28-141">Se pueden establecer directivas sobre los recursos para evitar que los tokens de actualización de clientes públicos anteriores a un período especificado obtengan un nuevo par de tokens de acceso/actualización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-141">You can set policies on resources to prevent refresh tokens from public clients older than a specified period from obtaining a new access/refresh token pair.</span></span> <span data-ttu-id="c9e28-142">(Para ello, utilice la propiedad de tiempo máximo de inactividad del token de actualización). También puede utilizar directivas para establecer un período más allá del cual ya no se aceptan los tokens de actualización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-142">(To do this, use the Refresh Token Max Inactive Time property.) You also can use policies to set a period beyond which the refresh tokens are no longer accepted.</span></span> <span data-ttu-id="c9e28-143">(Para ello, utilice la propiedad de antigüedad máxima del token de actualización). Puede ajustar la vigencia del token de actualización para controlar cuándo y con qué frecuencia es necesario que el usuario vuelva a escribir las credenciales en lugar de volver a autenticarse de forma silenciosa al usar una aplicación cliente pública.</span><span class="sxs-lookup"><span data-stu-id="c9e28-143">(To do this, use the Refresh Token Max Age property.) You can adjust the lifetime of a refresh token to control when and how often the user is required to reenter credentials, instead of being silently reauthenticated, when using a public client application.</span></span>

### <a name="id-tokens"></a><span data-ttu-id="c9e28-144">Tokens de identificador</span><span class="sxs-lookup"><span data-stu-id="c9e28-144">ID tokens</span></span>
<span data-ttu-id="c9e28-145">Los tokens de identificador se pasan a los clientes nativos y de sitios web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-145">ID tokens are passed to websites and native clients.</span></span> <span data-ttu-id="c9e28-146">Los tokens de identificador contienen información de perfil de un usuario.</span><span class="sxs-lookup"><span data-stu-id="c9e28-146">ID tokens contain profile information about a user.</span></span> <span data-ttu-id="c9e28-147">Un token de identificador se enlaza a una combinación específica de usuario y cliente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-147">An ID token is bound to a specific combination of user and client.</span></span> <span data-ttu-id="c9e28-148">Los tokens de identificador se consideran válidos hasta que expiran.</span><span class="sxs-lookup"><span data-stu-id="c9e28-148">ID tokens are considered valid until their expiry.</span></span> <span data-ttu-id="c9e28-149">Normalmente, una aplicación web relaciona la vigencia de la sesión de un usuario en la aplicación con la vigencia del token de identificador emitido para el usuario.</span><span class="sxs-lookup"><span data-stu-id="c9e28-149">Usually, a web application matches a user’s session lifetime in the application to the lifetime of the ID token issued for the user.</span></span> <span data-ttu-id="c9e28-150">Puede ajustar la vigencia del token de identificador para controlar la frecuencia con la que la aplicación web expirará la sesión de la aplicación y requerirá que el usuario se vuelva a autenticar en Azure AD (de forma silenciosa o interactiva).</span><span class="sxs-lookup"><span data-stu-id="c9e28-150">You can adjust the lifetime of an ID token to control how often the web application expires the application session, and how often it requires the user to be reauthenticated with Azure AD (either silently or interactively).</span></span>

### <a name="single-sign-on-session-tokens"></a><span data-ttu-id="c9e28-151">Tokens de sesión de inicio de sesión único</span><span class="sxs-lookup"><span data-stu-id="c9e28-151">Single sign-on session tokens</span></span>
<span data-ttu-id="c9e28-152">Cuando un usuario se autentica en Azure AD y activa la casilla **Mantener la sesión iniciada**, se establece una sesión de inicio de sesión único (SSO) con Azure AD y el explorador del usuario.</span><span class="sxs-lookup"><span data-stu-id="c9e28-152">When a user authenticates with Azure AD and selects the **Keep me signed in** check box, a single sign-on session (SSO) is established with the user’s browser and Azure AD.</span></span> <span data-ttu-id="c9e28-153">El token de SSO, en forma de cookie, representa esta sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-153">The SSO token, in the form of a cookie, represents this session.</span></span> <span data-ttu-id="c9e28-154">Tenga en cuenta que el token de sesión SSO no está enlazado a una aplicación específica cliente o de recursos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-154">Note that the SSO session token is not bound to a specific resource/client application.</span></span> <span data-ttu-id="c9e28-155">Los tokens de sesión SSO se pueden revocar y su validez se comprueba cada vez que se utilizan.</span><span class="sxs-lookup"><span data-stu-id="c9e28-155">SSO session tokens can be revoked, and their validity is checked every time they are used.</span></span>

<span data-ttu-id="c9e28-156">Azure AD usa dos tipos de tokens de sesión SSO: persistente y no persistente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-156">Azure AD uses two kinds of SSO session tokens: persistent and nonpersistent.</span></span> <span data-ttu-id="c9e28-157">El explorador almacena los tokens de sesión persistentes como cookies.</span><span class="sxs-lookup"><span data-stu-id="c9e28-157">Persistent session tokens are stored as persistent cookies by the browser.</span></span> <span data-ttu-id="c9e28-158">Los tokens de sesión no persistentes se almacenan como cookies de sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-158">Nonpersistent session tokens are stored as session cookies.</span></span> <span data-ttu-id="c9e28-159">(Las cookies de sesión se destruyen cuando se cierra el explorador).</span><span class="sxs-lookup"><span data-stu-id="c9e28-159">(Session cookies are destroyed when the browser is closed.)</span></span>

<span data-ttu-id="c9e28-160">Los tokens de sesión no persistentes tienen una vigencia de 24 horas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-160">Nonpersistent session tokens have a lifetime of 24 hours.</span></span> <span data-ttu-id="c9e28-161">Los tokens persistentes tienen una vigencia de 180 días.</span><span class="sxs-lookup"><span data-stu-id="c9e28-161">Persistent tokens have a lifetime of 180 days.</span></span> <span data-ttu-id="c9e28-162">Cada vez que se utilice el token de sesión SSO dentro de su período de validez, este se amplía otras 24 horas o 180 días, dependiendo del tipo de token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-162">Any time an SSO session token is used within its validity period, the validity period is extended another 24 hours or 180 days, depending on the token type.</span></span> <span data-ttu-id="c9e28-163">Si un token de sesión SSO no se usa dentro de su período de validez, se considerará caducado y ya no se aceptará.</span><span class="sxs-lookup"><span data-stu-id="c9e28-163">If an SSO session token is not used within its validity period, it is considered expired and is no longer accepted.</span></span>

<span data-ttu-id="c9e28-164">Puede utilizar una directiva para establecer el período de tiempo después de la emisión del primer token de sesión, más allá del cual ya no se aceptará este token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-164">You can use a policy to set the time after the first session token was issued beyond which the session token is no longer accepted.</span></span> <span data-ttu-id="c9e28-165">(Para ello, utilice la propiedad de antigüedad máxima del token de sesión). Puede ajustar la vigencia de un token de sesión para controlar cuándo y con qué frecuencia el usuario debe volver a escribir las credenciales en lugar de autenticarse de forma silenciosa cuando se usa una aplicación web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-165">(To do this, use the Session Token Max Age property.) You can adjust the lifetime of a session token to control when and how often a user is required to reenter credentials, instead of being silently authenticated, when using a web application.</span></span>

### <a name="token-lifetime-policy-properties"></a><span data-ttu-id="c9e28-166">Propiedades de la directiva de vigencia del token</span><span class="sxs-lookup"><span data-stu-id="c9e28-166">Token lifetime policy properties</span></span>
<span data-ttu-id="c9e28-167">Una directiva de vigencia del token es un tipo de objeto de directiva que contiene reglas de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-167">A token lifetime policy is a type of policy object that contains token lifetime rules.</span></span> <span data-ttu-id="c9e28-168">Use las propiedades de la directiva para controlar las vigencias de tokens especificados.</span><span class="sxs-lookup"><span data-stu-id="c9e28-168">Use the properties of the policy to control specified token lifetimes.</span></span> <span data-ttu-id="c9e28-169">Si no se establece ninguna directiva, el sistema aplica el valor de vigencia predeterminado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-169">If no policy is set, the system enforces the default lifetime value.</span></span>

### <a name="configurable-token-lifetime-properties"></a><span data-ttu-id="c9e28-170">Propiedades de vigencia de tokens configurables</span><span class="sxs-lookup"><span data-stu-id="c9e28-170">Configurable token lifetime properties</span></span>
| <span data-ttu-id="c9e28-171">Propiedad</span><span class="sxs-lookup"><span data-stu-id="c9e28-171">Property</span></span> | <span data-ttu-id="c9e28-172">Cadena de propiedad de directiva</span><span class="sxs-lookup"><span data-stu-id="c9e28-172">Policy property string</span></span> | <span data-ttu-id="c9e28-173">Afecta a</span><span class="sxs-lookup"><span data-stu-id="c9e28-173">Affects</span></span> | <span data-ttu-id="c9e28-174">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="c9e28-174">Default</span></span> | <span data-ttu-id="c9e28-175">Mínima</span><span class="sxs-lookup"><span data-stu-id="c9e28-175">Minimum</span></span> | <span data-ttu-id="c9e28-176">Máxima</span><span class="sxs-lookup"><span data-stu-id="c9e28-176">Maximum</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c9e28-177">Vigencia del token de acceso</span><span class="sxs-lookup"><span data-stu-id="c9e28-177">Access Token Lifetime</span></span> |<span data-ttu-id="c9e28-178">AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="c9e28-178">AccessTokenLifetime</span></span> |<span data-ttu-id="c9e28-179">Tokens de acceso, tokens de identificador, tokens de SAML2</span><span class="sxs-lookup"><span data-stu-id="c9e28-179">Access tokens, ID tokens, SAML2 tokens</span></span> |<span data-ttu-id="c9e28-180">1 hora</span><span class="sxs-lookup"><span data-stu-id="c9e28-180">1 hour</span></span> |<span data-ttu-id="c9e28-181">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-181">10 minutes</span></span> |<span data-ttu-id="c9e28-182">1 día</span><span class="sxs-lookup"><span data-stu-id="c9e28-182">1 day</span></span> |
| <span data-ttu-id="c9e28-183">Tiempo máximo de inactividad del token de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-183">Refresh Token Max Inactive Time</span></span> |<span data-ttu-id="c9e28-184">MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="c9e28-184">MaxInactiveTime</span></span> |<span data-ttu-id="c9e28-185">Tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-185">Refresh tokens</span></span> |<span data-ttu-id="c9e28-186">14 días</span><span class="sxs-lookup"><span data-stu-id="c9e28-186">14 days</span></span> |<span data-ttu-id="c9e28-187">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-187">10 minutes</span></span> |<span data-ttu-id="c9e28-188">90 días</span><span class="sxs-lookup"><span data-stu-id="c9e28-188">90 days</span></span> |
| <span data-ttu-id="c9e28-189">Antigüedad máxima del token de actualización (un solo factor)</span><span class="sxs-lookup"><span data-stu-id="c9e28-189">Single-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="c9e28-190">MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-190">MaxAgeSingleFactor</span></span> |<span data-ttu-id="c9e28-191">Tokens de actualización (para los usuarios)</span><span class="sxs-lookup"><span data-stu-id="c9e28-191">Refresh tokens (for any users)</span></span> |<span data-ttu-id="c9e28-192">Hasta que se revoca</span><span class="sxs-lookup"><span data-stu-id="c9e28-192">Until-revoked</span></span> |<span data-ttu-id="c9e28-193">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-193">10 minutes</span></span> |<span data-ttu-id="c9e28-194">Hasta que se revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-194">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="c9e28-195">Antigüedad máxima del token de actualización (varios factores)</span><span class="sxs-lookup"><span data-stu-id="c9e28-195">Multi-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="c9e28-196">MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-196">MaxAgeMultiFactor</span></span> |<span data-ttu-id="c9e28-197">Tokens de actualización (para los usuarios)</span><span class="sxs-lookup"><span data-stu-id="c9e28-197">Refresh tokens (for any users)</span></span> |<span data-ttu-id="c9e28-198">Hasta que se revoca</span><span class="sxs-lookup"><span data-stu-id="c9e28-198">Until-revoked</span></span> |<span data-ttu-id="c9e28-199">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-199">10 minutes</span></span> |<span data-ttu-id="c9e28-200">Hasta que se revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-200">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="c9e28-201">Antigüedad máxima del token de sesión (un solo factor)</span><span class="sxs-lookup"><span data-stu-id="c9e28-201">Single-Factor Session Token Max Age</span></span> |<span data-ttu-id="c9e28-202">MaxAgeSessionSingleFactor<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-202">MaxAgeSessionSingleFactor<sup>2</sup></span></span> |<span data-ttu-id="c9e28-203">Tokens de sesión (persistentes y no persistentes)</span><span class="sxs-lookup"><span data-stu-id="c9e28-203">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="c9e28-204">Hasta que se revoca</span><span class="sxs-lookup"><span data-stu-id="c9e28-204">Until-revoked</span></span> |<span data-ttu-id="c9e28-205">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-205">10 minutes</span></span> |<span data-ttu-id="c9e28-206">Hasta que se revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-206">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="c9e28-207">Antigüedad máxima del token de sesión (varios factores)</span><span class="sxs-lookup"><span data-stu-id="c9e28-207">Multi-Factor Session Token Max Age</span></span> |<span data-ttu-id="c9e28-208">MaxAgeSessionMultiFactor<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-208">MaxAgeSessionMultiFactor<sup>3</sup></span></span> |<span data-ttu-id="c9e28-209">Tokens de sesión (persistentes y no persistentes)</span><span class="sxs-lookup"><span data-stu-id="c9e28-209">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="c9e28-210">Hasta que se revoca</span><span class="sxs-lookup"><span data-stu-id="c9e28-210">Until-revoked</span></span> |<span data-ttu-id="c9e28-211">10 minutos</span><span class="sxs-lookup"><span data-stu-id="c9e28-211">10 minutes</span></span> |<span data-ttu-id="c9e28-212">Hasta que se revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c9e28-212">Until-revoked<sup>1</sup></span></span> |

* <span data-ttu-id="c9e28-213"><sup>1</sup>365 días es la vigencia explícita máxima que se puede establecer para estos atributos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-213"><sup>1</sup>365 days is the maximum explicit length that can be set for these attributes.</span></span>
* <span data-ttu-id="c9e28-214"><sup>2</sup>Si no se establece **MaxAgeSessionSingleFactor**, este valor adquiere el valor de **MaxAgeSingleFactor**.</span><span class="sxs-lookup"><span data-stu-id="c9e28-214"><sup>2</sup>If  **MaxAgeSessionSingleFactor** is not set, this value takes the **MaxAgeSingleFactor** value.</span></span> <span data-ttu-id="c9e28-215">Si no se establece ningún parámetro, la propiedad adquiere el valor predeterminado (hasta que se revoca).</span><span class="sxs-lookup"><span data-stu-id="c9e28-215">If neither parameter is set, the property takes the default value (until-revoked).</span></span>
* <span data-ttu-id="c9e28-216"><sup>3</sup>Si **MaxAgeSessionMultiFactor** no se establece, este valor adquiere entonces el valor de **MaxAgeMultiFactor**.</span><span class="sxs-lookup"><span data-stu-id="c9e28-216"><sup>3</sup>If  **MaxAgeSessionMultiFactor** is not set, this value takes the **MaxAgeMultiFactor** value.</span></span> <span data-ttu-id="c9e28-217">Si no se establece ningún parámetro, la propiedad adquiere el valor predeterminado (hasta que se revoca).</span><span class="sxs-lookup"><span data-stu-id="c9e28-217">If neither parameter is set, the property takes the default value (until-revoked).</span></span>

### <a name="exceptions"></a><span data-ttu-id="c9e28-218">Excepciones</span><span class="sxs-lookup"><span data-stu-id="c9e28-218">Exceptions</span></span>
| <span data-ttu-id="c9e28-219">Propiedad</span><span class="sxs-lookup"><span data-stu-id="c9e28-219">Property</span></span> | <span data-ttu-id="c9e28-220">Afecta a</span><span class="sxs-lookup"><span data-stu-id="c9e28-220">Affects</span></span> | <span data-ttu-id="c9e28-221">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="c9e28-221">Default</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c9e28-222">Antigüedad máxima de los tokens de actualización (emitidos para usuarios federados con información de revocación insuficiente<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="c9e28-222">Refresh Token Max Age (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="c9e28-223">Tokens de actualización (emitidos para usuarios federados con información de revocación insuficiente<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="c9e28-223">Refresh tokens (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="c9e28-224">12 horas</span><span class="sxs-lookup"><span data-stu-id="c9e28-224">12 hours</span></span> |
| <span data-ttu-id="c9e28-225">Tiempo máximo de inactividad del token de actualización (emitido para clientes confidenciales)</span><span class="sxs-lookup"><span data-stu-id="c9e28-225">Refresh Token Max Inactive Time (issued for confidential clients)</span></span> |<span data-ttu-id="c9e28-226">Tokens de actualización (emitidos para clientes confidenciales)</span><span class="sxs-lookup"><span data-stu-id="c9e28-226">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="c9e28-227">90 días</span><span class="sxs-lookup"><span data-stu-id="c9e28-227">90 days</span></span> |
| <span data-ttu-id="c9e28-228">Antigüedad máxima del token de actualización (emitido para clientes confidenciales)</span><span class="sxs-lookup"><span data-stu-id="c9e28-228">Refresh Token Max Age (issued for confidential clients)</span></span> |<span data-ttu-id="c9e28-229">Tokens de actualización (emitidos para clientes confidenciales)</span><span class="sxs-lookup"><span data-stu-id="c9e28-229">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="c9e28-230">Hasta que se revoca</span><span class="sxs-lookup"><span data-stu-id="c9e28-230">Until-revoked</span></span> |

* <span data-ttu-id="c9e28-231"><sup>1</sup>Entre los usuarios federados que tienen información de revocación insuficiente se incluyen todos los usuarios que no tienen el atributo "LastPasswordChangeTimestamp" sincronizado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-231"><sup>1</sup>Federated users who have insufficient revocation information include any users who do not have the "LastPasswordChangeTimestamp" attribute synced.</span></span> <span data-ttu-id="c9e28-232">A estos usuarios se les da esta antigüedad máxima tan corta porque AAD no puede comprobar cuándo se deben revocar los tokens asociados a una credencial antigua (como una contraseña que se ha modificado) y deben realizar comprobaciones más frecuentes para asegurarse de que el usuario y los tokens asociados están aún activos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-232">These users are given this short Max Age because AAD is unable to verify when to revoke tokens that are tied to an old credential (such as a password that has been changed) and must check back in more frequently to ensure that the user and associated tokens are still in good standing.</span></span> <span data-ttu-id="c9e28-233">Para mejorar esta experiencia, los administradores de los inquilinos deben asegurarse de que están sincronizando el atributo "LastPasswordChangeTimestamp" (esto se puede establecer en el objeto de usuario con PowerShell o a través de AADSync).</span><span class="sxs-lookup"><span data-stu-id="c9e28-233">To improve this experience, tenant admins must ensure that they are syncing the “LastPasswordChangeTimestamp” attribute (this can be set on the user object using Powershell or through AADSync).</span></span>

### <a name="policy-evaluation-and-prioritization"></a><span data-ttu-id="c9e28-234">Evaluación y prioridades de directivas</span><span class="sxs-lookup"><span data-stu-id="c9e28-234">Policy evaluation and prioritization</span></span>
<span data-ttu-id="c9e28-235">Puede crear y, a continuación, asignar una directiva de vigencia del token a una aplicación específica, a su organización y a las entidades de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-235">You can create and then assign a token lifetime policy to a specific application, to your organization, and to service principals.</span></span> <span data-ttu-id="c9e28-236">Se pueden aplicar varias directivas a una aplicación específica.</span><span class="sxs-lookup"><span data-stu-id="c9e28-236">Multiple policies might apply to a specific application.</span></span> <span data-ttu-id="c9e28-237">La directiva de vigencia del token que entra en vigor sigue estas reglas:</span><span class="sxs-lookup"><span data-stu-id="c9e28-237">The token lifetime policy that takes effect follows these rules:</span></span>

* <span data-ttu-id="c9e28-238">Si una directiva se asigna explícitamente a la entidad de servicio, se aplicará.</span><span class="sxs-lookup"><span data-stu-id="c9e28-238">If a policy is explicitly assigned to the service principal, it is enforced.</span></span>
* <span data-ttu-id="c9e28-239">Si no hay ninguna directiva que se asigne explícitamente a la entidad de servicio, se aplicará una directiva asignada explícitamente a la organización primaria de la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-239">If no policy is explicitly assigned to the service principal, a policy explicitly assigned to the parent organization of the service principal is enforced.</span></span>
* <span data-ttu-id="c9e28-240">Si no hay ninguna directiva que se asigne explícitamente a la entidad de servicio o a la organización, se aplicará la directiva asignada a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-240">If no policy is explicitly assigned to the service principal or to the organization, the policy assigned to the application is enforced.</span></span>
* <span data-ttu-id="c9e28-241">Si no se ha asignado ninguna directiva a la entidad de servicio, la organización o el objeto de aplicación, se aplicarán los valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="c9e28-241">If no policy has been assigned to the service principal, the organization, or the application object, the default values is enforced.</span></span> <span data-ttu-id="c9e28-242">(Consulte la tabla que aparece en [Propiedades de vigencia de tokens configurables](#configurable-token-lifetime-properties)).</span><span class="sxs-lookup"><span data-stu-id="c9e28-242">(See the table in [Configurable token lifetime properties](#configurable-token-lifetime-properties).)</span></span>

<span data-ttu-id="c9e28-243">Para más información sobre la relación entre objetos de aplicación y objetos de entidad de servicio, consulte [Objetos de aplicación y de entidad de servicio de Azure Active Directory](active-directory-application-objects.md).</span><span class="sxs-lookup"><span data-stu-id="c9e28-243">For more information about the relationship between application objects and service principal objects, see [Application and service principal objects in Azure Active Directory](active-directory-application-objects.md).</span></span>

<span data-ttu-id="c9e28-244">La validez de un token se evalúa en el momento en el que se usa.</span><span class="sxs-lookup"><span data-stu-id="c9e28-244">A token’s validity is evaluated at the time the token is used.</span></span> <span data-ttu-id="c9e28-245">La directiva con la prioridad más alta en la aplicación a la que se accede es la que se aplica.</span><span class="sxs-lookup"><span data-stu-id="c9e28-245">The policy with the highest priority on the application that is being accessed takes effect.</span></span>

> [!NOTE]
> <span data-ttu-id="c9e28-246">Este es un escenario de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9e28-246">Here's an example scenario.</span></span>
>
> <span data-ttu-id="c9e28-247">Un usuario desea tener acceso a dos aplicaciones web: aplicación web A y aplicación web B.</span><span class="sxs-lookup"><span data-stu-id="c9e28-247">A user wants to access two web applications: Web Application A and Web Application B.</span></span>
> 
> <span data-ttu-id="c9e28-248">Factores:</span><span class="sxs-lookup"><span data-stu-id="c9e28-248">Factors:</span></span>
> * <span data-ttu-id="c9e28-249">Ambas aplicaciones web están en la misma organización primaria.</span><span class="sxs-lookup"><span data-stu-id="c9e28-249">Both web applications are in the same parent organization.</span></span>
> * <span data-ttu-id="c9e28-250">La directiva 1 de vigencia del token con una antigüedad máxima del token de sesión de ocho horas se establece como valor predeterminado de la organización primaria.</span><span class="sxs-lookup"><span data-stu-id="c9e28-250">Token Lifetime Policy 1 with a Session Token Max Age of eight hours is set as the parent organization’s default.</span></span>
> * <span data-ttu-id="c9e28-251">La aplicación web A es una aplicación web de uso habitual que no está vinculada a ninguna directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-251">Web Application A is a regular-use web application and isn’t linked to any policies.</span></span>
> * <span data-ttu-id="c9e28-252">La aplicación web B se usa para procesos altamente confidenciales.</span><span class="sxs-lookup"><span data-stu-id="c9e28-252">Web Application B is used for highly sensitive processes.</span></span> <span data-ttu-id="c9e28-253">Su entidad de servicio está vinculada a la directiva 2 de vigencia del token, que tiene una antigüedad máxima de token de sesión de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-253">Its service principal is linked to Token Lifetime Policy 2, which has a Session Token Max Age of 30 minutes.</span></span>
>
> <span data-ttu-id="c9e28-254">A las 12:00 p.m. el usuario inicia una nueva sesión en el explorador e intenta acceder a la aplicación web A. El usuario es redirigido a Azure AD y se le pide que inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-254">At 12:00 PM, the user starts a new browser session and tries to access Web Application A. The user is redirected to Azure AD and is asked to sign in.</span></span> <span data-ttu-id="c9e28-255">Esta acción crea una cookie con un token de sesión en el explorador.</span><span class="sxs-lookup"><span data-stu-id="c9e28-255">This creates a cookie that has a session token in the browser.</span></span> <span data-ttu-id="c9e28-256">El usuario es redirigido de nuevo a la aplicación web A con un token de identificador que le permite acceder a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-256">The user is redirected back to Web Application A with an ID token that allows the user to access the application.</span></span>
>
> <span data-ttu-id="c9e28-257">A las 12:15 p.m., el usuario intenta acceder a la aplicación web B. El explorador redirige a Azure AD, que detecta la cookie de sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-257">At 12:15 PM, the user tries to access Web Application B. The browser redirects to Azure AD, which detects the session cookie.</span></span> <span data-ttu-id="c9e28-258">La entidad de servicio de la aplicación web B está vinculada a la directiva 2 de vigencia del token, pero también forma parte de la organización primaria con la directiva 1 de vigencia del token predeterminada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-258">Web Application B’s service principal is linked to Token Lifetime Policy 2, but it's also part of the parent organization, with default Token Lifetime Policy 1.</span></span> <span data-ttu-id="c9e28-259">La directiva 2 de vigencia del token se aplica porque las directivas vinculadas a entidades de servicio tienen una prioridad más alta que las directivas predeterminadas de la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-259">Token Lifetime Policy 2 takes effect because policies linked to service principals have a higher priority than organization default policies.</span></span> <span data-ttu-id="c9e28-260">El token de sesión se emitió originalmente en los últimos 30 minutos, por lo que se considera válido.</span><span class="sxs-lookup"><span data-stu-id="c9e28-260">The session token was originally issued within the last 30 minutes, so it is considered valid.</span></span> <span data-ttu-id="c9e28-261">El usuario es redirigido de nuevo a la aplicación web B con un token de identificador que le concede acceso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-261">The user is redirected back to Web Application B with an ID token that grants them access.</span></span>
>
> <span data-ttu-id="c9e28-262">A la 1 p.m., el usuario intenta acceder a la aplicación web A y se le redirige a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c9e28-262">At 1:00 PM, the user tries to access Web Application A. The user is redirected to Azure AD.</span></span> <span data-ttu-id="c9e28-263">La aplicación web A no está vinculada a ninguna directiva, pero como está en una organización con la directiva predeterminada 1 de vigencia del token, se aplica esta directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-263">Web Application A is not linked to any policies, but because it is in an organization with default Token Lifetime Policy 1, that policy takes effect.</span></span> <span data-ttu-id="c9e28-264">Se detectó la cookie de sesión que se emitió originalmente en las últimas ocho horas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-264">The session cookie that was originally issued within the last eight hours is detected.</span></span> <span data-ttu-id="c9e28-265">En modo silencioso, se redirige al usuario a la aplicación web A con un nuevo token de identificador.</span><span class="sxs-lookup"><span data-stu-id="c9e28-265">The user is silently redirected back to Web Application A with a new ID token.</span></span> <span data-ttu-id="c9e28-266">No es necesario que el usuario se autentique.</span><span class="sxs-lookup"><span data-stu-id="c9e28-266">The user is not required to authenticate.</span></span>
>
> <span data-ttu-id="c9e28-267">Inmediatamente después, el usuario intenta acceder a la aplicación web B y se le redirige a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c9e28-267">Immediately afterward, the user tries to access Web Application B. The user is redirected to Azure AD.</span></span> <span data-ttu-id="c9e28-268">Como antes, se aplica la directiva 2 de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-268">As before, Token Lifetime Policy 2 takes effect.</span></span> <span data-ttu-id="c9e28-269">Dado que el token se emitió hace más de 30 minutos, se le solicita al usuario que vuelva a escribir sus credenciales de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-269">Because the token was issued more than 30 minutes ago, the user is prompted to reenter their sign-in credentials.</span></span> <span data-ttu-id="c9e28-270">Se emite un nuevo token de sesión y de identificador.</span><span class="sxs-lookup"><span data-stu-id="c9e28-270">A brand-new session token and ID token are issued.</span></span> <span data-ttu-id="c9e28-271">El usuario puede acceder entonces a la aplicación web B.</span><span class="sxs-lookup"><span data-stu-id="c9e28-271">The user can then access Web Application B.</span></span>
>
>

## <a name="configurable-policy-property-details"></a><span data-ttu-id="c9e28-272">Detalles de las propiedades de directiva configurables</span><span class="sxs-lookup"><span data-stu-id="c9e28-272">Configurable policy property details</span></span>
### <a name="access-token-lifetime"></a><span data-ttu-id="c9e28-273">Vigencia del token de acceso</span><span class="sxs-lookup"><span data-stu-id="c9e28-273">Access Token Lifetime</span></span>
<span data-ttu-id="c9e28-274">**Cadena:** AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="c9e28-274">**String:** AccessTokenLifetime</span></span>

<span data-ttu-id="c9e28-275">**Afecta a:** tokens de acceso, tokens de identificador</span><span class="sxs-lookup"><span data-stu-id="c9e28-275">**Affects:** Access tokens, ID tokens</span></span>

<span data-ttu-id="c9e28-276">**Resumen:** esta directiva controla cuánto tiempo se consideran válidos los token de acceso y de identificador para este recurso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-276">**Summary:** This policy controls how long access and ID tokens for this resource are considered valid.</span></span> <span data-ttu-id="c9e28-277">Reducir la vigencia de los tokens de acceso disminuye el riesgo de que un individuo malintencionado use un token de acceso o de identificador durante un período de tiempo prolongado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-277">Reducing the Access Token Lifetime property mitigates the risk of an access token or ID token being used by a malicious actor for an extended period of time.</span></span> <span data-ttu-id="c9e28-278">(Estos tokens no se pueden revocar). El inconveniente es que afecta negativamente al rendimiento, ya que los tokens tendrán que reemplazarse con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-278">(These tokens cannot be revoked.) The trade-off is that performance is adversely affected, because the tokens have to be replaced more often.</span></span>

### <a name="refresh-token-max-inactive-time"></a><span data-ttu-id="c9e28-279">Tiempo máximo de inactividad del token de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-279">Refresh Token Max Inactive Time</span></span>
<span data-ttu-id="c9e28-280">**Cadena:** MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="c9e28-280">**String:** MaxInactiveTime</span></span>

<span data-ttu-id="c9e28-281">**Afecta a:** tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-281">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="c9e28-282">**Resumen:** esta directiva controla la antigüedad máxima que puede tener un token de actualización antes de que un cliente ya no pueda usarlo para recuperar un nuevo par de tokens de acceso/actualización al intentar acceder a este recurso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-282">**Summary:** This policy controls how old a refresh token can be before a client can no longer use it to retrieve a new access/refresh token pair when attempting to access this resource.</span></span> <span data-ttu-id="c9e28-283">Dado que un nuevo token de actualización normalmente se devuelve cuando se usa un token de actualización, esta directiva impedirá el acceso si el cliente intenta acceder a algún recurso con el token de actualización actual durante el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-283">Because a new refresh token usually is returned when a refresh token is used, this policy prevents access if the client tries to access any resource by using the current refresh token during the specified period of time.</span></span>

<span data-ttu-id="c9e28-284">Esta directiva obligará a los usuarios que no hayan estado activos en su cliente a volver a autenticarse para recuperar un nuevo token de actualización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-284">This policy forces users who have not been active on their client to reauthenticate to retrieve a new refresh token.</span></span>

<span data-ttu-id="c9e28-285">El tiempo máximo de inactividad del token de actualización debe establecerse en un valor inferior a la antigüedad máxima del token de un solo factor y la antigüedad máxima del token de actualización de varios factores.</span><span class="sxs-lookup"><span data-stu-id="c9e28-285">The Refresh Token Max Inactive Time property must be set to a lower value than the Single-Factor Token Max Age and the Multi-Factor Refresh Token Max Age properties.</span></span>

### <a name="single-factor-refresh-token-max-age"></a><span data-ttu-id="c9e28-286">Antigüedad máxima del token de actualización (un solo factor)</span><span class="sxs-lookup"><span data-stu-id="c9e28-286">Single-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="c9e28-287">**Cadena:** MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-287">**String:** MaxAgeSingleFactor</span></span>

<span data-ttu-id="c9e28-288">**Afecta a:** tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-288">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="c9e28-289">**Resumen:** esta directiva controla cuánto tiempo un usuario puede seguir usando tokens de actualización para obtener nuevos pares de tokens de acceso/actualización desde la última vez que se autenticara correctamente con un solo factor.</span><span class="sxs-lookup"><span data-stu-id="c9e28-289">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="c9e28-290">Después de que un usuario se autentica y recibe un nuevo token de actualización, este puede utilizar el flujo del token de actualización durante el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-290">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="c9e28-291">(Esto ocurre siempre que el token de actualización actual no esté revocado y no se quede sin usar más tiempo que el período de inactividad). En ese momento, el usuario se verá obligado a volver a autenticarse para recibir un nuevo token de actualización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-291">(This is true as long as the current refresh token is not revoked, and it is not left unused for longer than the inactive time.) At that point, the user is forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="c9e28-292">Reducir la antigüedad máxima obliga a los usuarios a autenticarse con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-292">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="c9e28-293">Puesto que la autenticación de un solo factor se considera menos segura que la autenticación multifactor, se recomienda establecer esta propiedad en un valor igual o inferior al de la propiedad de antigüedad máxima del token de actualización de varios factores.</span><span class="sxs-lookup"><span data-stu-id="c9e28-293">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or lesser than the Multi-Factor Refresh Token Max Age property.</span></span>

### <a name="multi-factor-refresh-token-max-age"></a><span data-ttu-id="c9e28-294">Antigüedad máxima del token de actualización (varios factores)</span><span class="sxs-lookup"><span data-stu-id="c9e28-294">Multi-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="c9e28-295">**Cadena:** MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-295">**String:** MaxAgeMultiFactor</span></span>

<span data-ttu-id="c9e28-296">**Afecta a:** tokens de actualización</span><span class="sxs-lookup"><span data-stu-id="c9e28-296">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="c9e28-297">**Resumen:** esta directiva controla cuánto tiempo un usuario puede seguir usando tokens de actualización para obtener nuevos pares de tokens de acceso/actualización desde la última vez que se autenticara correctamente con varios factores.</span><span class="sxs-lookup"><span data-stu-id="c9e28-297">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="c9e28-298">Después de que un usuario se autentica y recibe un nuevo token de actualización, este puede utilizar el flujo del token de actualización durante el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-298">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="c9e28-299">(Esto ocurre siempre que el token de actualización actual no esté revocado y no se quede sin usar más tiempo que el período de inactividad). En ese momento, los usuarios se verán obligados a volver a autenticarse para recibir un nuevo token de actualización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-299">(This is true as long as the current refresh token is not revoked, and it is not unused for longer than the inactive time.) At that point, users are forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="c9e28-300">Reducir la antigüedad máxima obliga a los usuarios a autenticarse con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-300">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="c9e28-301">Puesto que la autenticación de un solo factor se considera menos segura que la autenticación multifactor, se recomienda establecer esta propiedad en un valor igual o superior al de la propiedad de antigüedad máxima del token de actualización de un solo factor.</span><span class="sxs-lookup"><span data-stu-id="c9e28-301">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Refresh Token Max Age property.</span></span>

### <a name="single-factor-session-token-max-age"></a><span data-ttu-id="c9e28-302">Antigüedad máxima del token de sesión (un solo factor)</span><span class="sxs-lookup"><span data-stu-id="c9e28-302">Single-Factor Session Token Max Age</span></span>
<span data-ttu-id="c9e28-303">**Cadena:** MaxAgeSessionSingleFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-303">**String:** MaxAgeSessionSingleFactor</span></span>

<span data-ttu-id="c9e28-304">**Afecta a:** tokens de sesión (persistentes y no persistentes)</span><span class="sxs-lookup"><span data-stu-id="c9e28-304">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="c9e28-305">**Resumen:** esta directiva controla cuánto tiempo un usuario puede seguir usando tokens de actualización para obtener un nuevo token de identificador y de sesión desde la última vez que se autenticara correctamente con un solo factor.</span><span class="sxs-lookup"><span data-stu-id="c9e28-305">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="c9e28-306">Después de que un usuario se autentica y recibe un nuevo token de sesión, este puede utilizar el flujo del token de sesión durante el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-306">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="c9e28-307">(Esto ocurre siempre que el token de sesión actual no esté revocado y no haya expirado). Tras el período de tiempo especificado, el usuario se ve obligado a autenticarse para recibir un nuevo token de sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-307">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="c9e28-308">Reducir la antigüedad máxima obliga a los usuarios a autenticarse con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-308">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="c9e28-309">Puesto que la autenticación de un solo factor se considera menos segura que la autenticación multifactor, se recomienda establecer esta propiedad en un valor igual o inferior al de la propiedad de antigüedad máxima del token de sesión de varios factores.</span><span class="sxs-lookup"><span data-stu-id="c9e28-309">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or less than the Multi-Factor Session Token Max Age property.</span></span>

### <a name="multi-factor-session-token-max-age"></a><span data-ttu-id="c9e28-310">Antigüedad máxima del token de sesión (varios factores)</span><span class="sxs-lookup"><span data-stu-id="c9e28-310">Multi-Factor Session Token Max Age</span></span>
<span data-ttu-id="c9e28-311">**Cadena:** MaxAgeSessionMultiFactor</span><span class="sxs-lookup"><span data-stu-id="c9e28-311">**String:** MaxAgeSessionMultiFactor</span></span>

<span data-ttu-id="c9e28-312">**Afecta a:** tokens de sesión (persistentes y no persistentes)</span><span class="sxs-lookup"><span data-stu-id="c9e28-312">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="c9e28-313">**Resumen:** esta directiva controla cuánto tiempo un usuario puede seguir usando tokens de actualización para obtener un nuevo token de identificador y de sesión desde la última vez que se autenticara correctamente con varios factores.</span><span class="sxs-lookup"><span data-stu-id="c9e28-313">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after the last time they authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="c9e28-314">Después de que un usuario se autentica y recibe un nuevo token de sesión, este puede utilizar el flujo del token de sesión durante el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c9e28-314">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="c9e28-315">(Esto ocurre siempre que el token de sesión actual no esté revocado y no haya expirado). Tras el período de tiempo especificado, el usuario se ve obligado a autenticarse para recibir un nuevo token de sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-315">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="c9e28-316">Reducir la antigüedad máxima obliga a los usuarios a autenticarse con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-316">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="c9e28-317">Puesto que la autenticación de un solo factor se considera menos segura que la autenticación multifactor, se recomienda establecer esta propiedad en un valor igual o superior al de la propiedad de antigüedad máxima del token de sesión de un solo factor.</span><span class="sxs-lookup"><span data-stu-id="c9e28-317">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Session Token Max Age property.</span></span>

## <a name="example-token-lifetime-policies"></a><span data-ttu-id="c9e28-318">Ejemplo de directivas de vigencia del token</span><span class="sxs-lookup"><span data-stu-id="c9e28-318">Example token lifetime policies</span></span>
<span data-ttu-id="c9e28-319">En Azure AD, hay muchos escenarios posibles a la hora de crear y administrar la vigencia de los tokens para aplicaciones, entidades de servicio y la organización en general.</span><span class="sxs-lookup"><span data-stu-id="c9e28-319">Many scenarios are possible in Azure AD when you can create and manage token lifetimes for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="c9e28-320">En esta sección, se explican algunos escenarios de directiva comunes que le ayudarán a imponer nuevas reglas para:</span><span class="sxs-lookup"><span data-stu-id="c9e28-320">In this section, we walk through a few common policy scenarios that can help you impose new rules for:</span></span>

* <span data-ttu-id="c9e28-321">Vigencia del token</span><span class="sxs-lookup"><span data-stu-id="c9e28-321">Token Lifetime</span></span>
* <span data-ttu-id="c9e28-322">Tiempos máximos de inactividad del token</span><span class="sxs-lookup"><span data-stu-id="c9e28-322">Token Max Inactive Time</span></span>
* <span data-ttu-id="c9e28-323">Antigüedad máxima del token</span><span class="sxs-lookup"><span data-stu-id="c9e28-323">Token Max Age</span></span>

<span data-ttu-id="c9e28-324">En los ejemplos, puede aprender a:</span><span class="sxs-lookup"><span data-stu-id="c9e28-324">In the examples, you can learn how to:</span></span>

* <span data-ttu-id="c9e28-325">Administrar una directiva predeterminada de una organización</span><span class="sxs-lookup"><span data-stu-id="c9e28-325">Manage an organization's default policy</span></span>
* <span data-ttu-id="c9e28-326">Crear una directiva para inicio de sesión web</span><span class="sxs-lookup"><span data-stu-id="c9e28-326">Create a policy for web sign-in</span></span>
* <span data-ttu-id="c9e28-327">Crear una directiva para una aplicación nativa que llama a una API web</span><span class="sxs-lookup"><span data-stu-id="c9e28-327">Create a policy for a native app that calls a web API</span></span>
* <span data-ttu-id="c9e28-328">Administrar una directiva avanzada</span><span class="sxs-lookup"><span data-stu-id="c9e28-328">Manage an advanced policy</span></span>

### <a name="prerequisites"></a><span data-ttu-id="c9e28-329">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="c9e28-329">Prerequisites</span></span>
<span data-ttu-id="c9e28-330">En los ejemplos siguientes, va a crear, actualizar, vincular y eliminar directivas de aplicaciones, entidades de servicio y de la organización en general.</span><span class="sxs-lookup"><span data-stu-id="c9e28-330">In the following examples, you create, update, link, and delete policies for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="c9e28-331">Si no está familiarizado con Azure AD, se recomienda que aprenda [cómo obtener un inquilino de Azure AD](active-directory-howto-tenant.md) antes de continuar con estos ejemplos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-331">If you are new to Azure AD, we recommend that you learn about [how to get an Azure AD tenant](active-directory-howto-tenant.md) before you proceed with these examples.</span></span>  

<span data-ttu-id="c9e28-332">Para comenzar, realice uno de los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="c9e28-332">To get started, do the following steps:</span></span>

1. <span data-ttu-id="c9e28-333">Descargue la [versión preliminar pública más reciente del módulo de PowerShell de Azure AD](https://www.powershellgallery.com/packages/AzureADPreview).</span><span class="sxs-lookup"><span data-stu-id="c9e28-333">Download the latest [Azure AD PowerShell Module Public Preview release](https://www.powershellgallery.com/packages/AzureADPreview).</span></span>
2. <span data-ttu-id="c9e28-334">Ejecute el comando `Connect` para iniciar sesión en la cuenta de administrador de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c9e28-334">Run the `Connect` command to sign in to your Azure AD admin account.</span></span> <span data-ttu-id="c9e28-335">Ejecute este comando cada vez que inicie una nueva sesión.</span><span class="sxs-lookup"><span data-stu-id="c9e28-335">Run this command each time you start a new session.</span></span>

    ```PowerShell
    Connect-AzureAD -Confirm
    ```

3. <span data-ttu-id="c9e28-336">Ejecute el siguiente comando para ver todas las directivas que se han creado en la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-336">To see all policies that have been created in your organization, run the following command.</span></span> <span data-ttu-id="c9e28-337">Este comando debe ejecutarse después de la mayoría de las operaciones en los escenarios siguientes.</span><span class="sxs-lookup"><span data-stu-id="c9e28-337">Run this command after most operations in the following scenarios.</span></span> <span data-ttu-id="c9e28-338">La ejecución del comando también lo ayudará a obtener el valor de ** ** de sus directivas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-338">Running the command also helps you get the ** ** of your policies.</span></span>

    ```PowerShell
    Get-AzureADPolicy
    ```

### <a name="example-manage-an-organizations-default-policy"></a><span data-ttu-id="c9e28-339">Ejemplo: Administración de una directiva predeterminada de una organización</span><span class="sxs-lookup"><span data-stu-id="c9e28-339">Example: Manage an organization's default policy</span></span>
<span data-ttu-id="c9e28-340">En este ejemplo, crearemos una directiva que permita a sus usuarios iniciar sesión con menos frecuencia en toda su organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-340">In this example, you create a policy that lets your users sign in less frequently across your entire organization.</span></span> <span data-ttu-id="c9e28-341">Para ello, creamos una directiva de vigencia del token para tokens de actualización de un solo factor que se aplica en toda la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-341">To do this, create a token lifetime policy for Single-Factor Refresh Tokens, which is applied across your organization.</span></span> <span data-ttu-id="c9e28-342">Esta directiva se aplicará a todas las aplicaciones de su organización y a todas las entidades de servicio que aún no tengan una directiva establecida en ella.</span><span class="sxs-lookup"><span data-stu-id="c9e28-342">The policy is applied to every application in your organization, and to each service principal that doesn’t already have a policy set.</span></span>

1. <span data-ttu-id="c9e28-343">Cree una directiva de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-343">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="c9e28-344">Establezca el token de actualización de un solo factor en "hasta que se revoca".</span><span class="sxs-lookup"><span data-stu-id="c9e28-344">Set the Single-Factor Refresh Token to "until-revoked."</span></span> <span data-ttu-id="c9e28-345">El token no expira hasta que se revoca el acceso.</span><span class="sxs-lookup"><span data-stu-id="c9e28-345">The token doesn't expire until access is revoked.</span></span> <span data-ttu-id="c9e28-346">Cree la siguiente definición de directiva:</span><span class="sxs-lookup"><span data-stu-id="c9e28-346">Create the following policy definition:</span></span>

        ```PowerShell
        @('{
            "TokenLifetimePolicy":
            {
                "Version":1,
                "MaxAgeSingleFactor":"until-revoked"
            }
        }')
        ```

    2.  <span data-ttu-id="c9e28-347">Ejecute el siguiente comando para crear la directiva:</span><span class="sxs-lookup"><span data-stu-id="c9e28-347">To create the policy, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1, "MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "OrganizationDefaultPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    3.  <span data-ttu-id="c9e28-348">Para ver su nueva directiva y obtener el **ObjectID** de esta, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-348">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="c9e28-349">Actualice la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-349">Update the policy.</span></span>

    <span data-ttu-id="c9e28-350">Puede decidir que la primera directiva que se establece en este ejemplo no sea tan estricta como exige el servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-350">You might decide that the first policy you set in this example is not as strict as your service requires.</span></span> <span data-ttu-id="c9e28-351">Para establecer que el token de actualización de un solo factor expire en dos días, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-351">To set your Single-Factor Refresh Token to expire in two days, run the following command:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId FROM GET COMMAND> -DisplayName "OrganizationDefaultPolicyUpdatedScenario" -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"2.00:00:00"}}')
    ```

### <a name="example-create-a-policy-for-web-sign-in"></a><span data-ttu-id="c9e28-352">Ejemplo: Creación de una directiva para inicio de sesión web</span><span class="sxs-lookup"><span data-stu-id="c9e28-352">Example: Create a policy for web sign-in</span></span>

<span data-ttu-id="c9e28-353">En este ejemplo, va a crear una directiva que requerirá que los usuarios se autentiquen con más frecuencia en la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-353">In this example, you create a policy that requires users to authenticate more frequently in your web app.</span></span> <span data-ttu-id="c9e28-354">Esta directiva establecerá la vigencia de los tokens de acceso y de identificador y la antigüedad máxima de un token de sesión de varios factores en la entidad de servicio de su aplicación web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-354">This policy sets the lifetime of the access/ID tokens and the max age of a multi-factor session token to the service principal of your web app.</span></span>

1. <span data-ttu-id="c9e28-355">Cree una directiva de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-355">Create a token lifetime policy.</span></span>

    <span data-ttu-id="c9e28-356">Para el inicio de sesión web esta directiva establecerá la vigencia del token de acceso y de identificador y la antigüedad máxima del token de sesión de un solo factor en 2 horas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-356">This policy, for web sign-in, sets the access/ID token lifetime and the max single-factor session token age to two hours.</span></span>

    1.  <span data-ttu-id="c9e28-357">Ejecute este comando para crear la directiva:</span><span class="sxs-lookup"><span data-stu-id="c9e28-357">To create the policy, run this command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"AccessTokenLifetime":"02:00:00","MaxAgeSessionSingleFactor":"02:00:00"}}') -DisplayName "WebPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="c9e28-358">Para ver su nueva directiva y obtener el **ObjectID** de esta, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-358">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2.  <span data-ttu-id="c9e28-359">Asigne la directiva a su entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-359">Assign the policy to your service principal.</span></span> <span data-ttu-id="c9e28-360">También necesitará obtener el valor de **ObjectId** de su entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-360">You also need to get the **ObjectId** of your service principal.</span></span> 

    1.  <span data-ttu-id="c9e28-361">Para ver todas las entidades de servicio de su organización, puede consultar [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="c9e28-361">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="c9e28-362">O bien, en [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), inicie sesión en su cuenta de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c9e28-362">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in to your Azure AD account.</span></span>

    2.  <span data-ttu-id="c9e28-363">Cuando tenga el valor de **ObjectId** de la entidad de servicio, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-363">When you have the **ObjectId** of your service principal, run the following command:</span></span>

        ```PowerShell
        Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-create-a-policy-for-a-native-app-that-calls-a-web-api"></a><span data-ttu-id="c9e28-364">Ejemplo: Creación de una directiva para una aplicación nativa que llama a una API web</span><span class="sxs-lookup"><span data-stu-id="c9e28-364">Example: Create a policy for a native app that calls a web API</span></span>
<span data-ttu-id="c9e28-365">En este ejemplo, va a crear una directiva que requerirá que los usuarios se autentiquen con menos frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c9e28-365">In this example, you create a policy that requires users to authenticate less frequently.</span></span> <span data-ttu-id="c9e28-366">La directiva también aumenta la cantidad de tiempo que un usuario puede estar inactivo antes de que este deba volver a autenticarse.</span><span class="sxs-lookup"><span data-stu-id="c9e28-366">The policy also lengthens the amount of time a user can be inactive before the user must reauthenticate.</span></span> <span data-ttu-id="c9e28-367">La directiva se aplica a la API web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-367">The policy is applied to the web API.</span></span> <span data-ttu-id="c9e28-368">Cuando la aplicación nativa solicita la API web como recurso, se aplica esta directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-368">When the native app requests the web API as a resource, this policy is applied.</span></span>

1. <span data-ttu-id="c9e28-369">Cree una directiva de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-369">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="c9e28-370">Para crear una directiva estricta para una API web, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-370">To create a strict policy for a web API, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"30.00:00:00","MaxAgeMultiFactor":"until-revoked","MaxAgeSingleFactor":"180.00:00:00"}}') -DisplayName "WebApiDefaultPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="c9e28-371">Para ver su nueva directiva y obtener el **ObjectID** de esta, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-371">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="c9e28-372">Asigne la directiva a la API web.</span><span class="sxs-lookup"><span data-stu-id="c9e28-372">Assign the policy to your web API.</span></span> <span data-ttu-id="c9e28-373">También necesitará obtener el valor de **ObjectId** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-373">You also need to get the **ObjectId** of your application.</span></span> <span data-ttu-id="c9e28-374">La mejor manera de encontrar el valor de **ObjectId** de la aplicación es usar [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c9e28-374">The best way to find your app's **ObjectId** is to use the [Azure portal](https://portal.azure.com/).</span></span>

   <span data-ttu-id="c9e28-375">Cuando tenga el valor de **ObjectId** de la aplicación, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-375">When you have the **ObjectId** of your app, run the following command:</span></span>

        ```PowerShell
        Add-AzureADApplicationPolicy -Id <ObjectId of the Application> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-manage-an-advanced-policy"></a><span data-ttu-id="c9e28-376">Ejemplo: Administración de una directiva avanzada</span><span class="sxs-lookup"><span data-stu-id="c9e28-376">Example: Manage an advanced policy</span></span>
<span data-ttu-id="c9e28-377">En este ejemplo, va a crear algunas directivas para obtener información sobre cómo funciona el sistema de prioridad.</span><span class="sxs-lookup"><span data-stu-id="c9e28-377">In this example, you create a few policies, to learn how the priority system works.</span></span> <span data-ttu-id="c9e28-378">También puede aprender a administrar varias directivas que se aplican a varios objetos.</span><span class="sxs-lookup"><span data-stu-id="c9e28-378">You also can learn how to manage multiple policies that are applied to several objects.</span></span>

1. <span data-ttu-id="c9e28-379">Cree una directiva de vigencia del token.</span><span class="sxs-lookup"><span data-stu-id="c9e28-379">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="c9e28-380">Para crear una directiva predeterminada de organización que establece la vigencia del token de actualización de un solo factor en 30 días, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-380">To create an organization default policy that sets the Single-Factor Refresh Token lifetime to 30 days, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"30.00:00:00"}}') -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="c9e28-381">Para ver su nueva directiva y obtener el **ObjectID** de esta, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-381">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="c9e28-382">Asigne la directiva a una entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-382">Assign the policy to a service principal.</span></span>

    <span data-ttu-id="c9e28-383">Ahora tiene una directiva que se aplica a toda la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-383">Now, you have a policy that applies to the entire organization.</span></span> <span data-ttu-id="c9e28-384">Es posible que quiera conservar esta directiva 30 días para una entidad de servicio específica, pero cambiar la directiva predeterminada de organización para que sea el límite superior de "hasta que se revoque".</span><span class="sxs-lookup"><span data-stu-id="c9e28-384">You might want to preserve this 30-day policy for a specific service principal, but change the organization default policy to the upper limit of "until-revoked."</span></span>

    1.  <span data-ttu-id="c9e28-385">Para ver todas las entidades de servicio de su organización, puede consultar [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="c9e28-385">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="c9e28-386">O bien, en [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), inicie sesión mediante su cuenta de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c9e28-386">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in by using your Azure AD account.</span></span>

    2.  <span data-ttu-id="c9e28-387">Cuando tenga el valor de **ObjectId** de la entidad de servicio, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="c9e28-387">When you have the **ObjectId** of your service principal, run the following command:</span></span>

            ```PowerShell
            Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
            ```
        
3. <span data-ttu-id="c9e28-388">Establezca la marca `IsOrganizationDefault` en false:</span><span class="sxs-lookup"><span data-stu-id="c9e28-388">Set the `IsOrganizationDefault` flag to false:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $false
    ```

4. <span data-ttu-id="c9e28-389">Cree una nueva directiva predeterminada de organización:</span><span class="sxs-lookup"><span data-stu-id="c9e28-389">Create a new organization default policy:</span></span>

    ```PowerShell
    New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "ComplexPolicyScenarioTwo" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
    ```

    <span data-ttu-id="c9e28-390">Ahora tiene la directiva original vinculada a la entidad de servicio y la nueva directiva establecida como su directiva predeterminada de organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-390">You now have the original policy linked to your service principal, and the new policy is set as your organization default policy.</span></span> <span data-ttu-id="c9e28-391">Es importante recordar que las directivas aplicadas a las entidades de servicio tienen prioridad sobre las directivas predeterminadas de organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-391">It's important to remember that policies applied to service principals have priority over organization default policies.</span></span>

## <a name="cmdlet-reference"></a><span data-ttu-id="c9e28-392">Referencia de cmdlets</span><span class="sxs-lookup"><span data-stu-id="c9e28-392">Cmdlet reference</span></span>

### <a name="manage-policies"></a><span data-ttu-id="c9e28-393">Administración de directivas</span><span class="sxs-lookup"><span data-stu-id="c9e28-393">Manage policies</span></span>

<span data-ttu-id="c9e28-394">Los cmdlets siguientes se pueden usar para administrar directivas.</span><span class="sxs-lookup"><span data-stu-id="c9e28-394">You can use the following cmdlets to manage policies.</span></span>

#### <a name="new-azureadpolicy"></a><span data-ttu-id="c9e28-395">New-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-395">New-AzureADPolicy</span></span>

<span data-ttu-id="c9e28-396">Crea una nueva directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-396">Creates a new policy.</span></span>

```PowerShell
New-AzureADPolicy -Definition <Array of Rules> -DisplayName <Name of Policy> -IsOrganizationDefault <boolean> -Type <Policy Type>
```

| <span data-ttu-id="c9e28-397">parameters</span><span class="sxs-lookup"><span data-stu-id="c9e28-397">Parameters</span></span> | <span data-ttu-id="c9e28-398">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-398">Description</span></span> | <span data-ttu-id="c9e28-399">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-399">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Definition</code> |<span data-ttu-id="c9e28-400">La matriz de cadenas JSON que contiene todas las reglas de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-400">Array of stringified JSON that contains all the policy's rules.</span></span> | `-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="c9e28-401">Cadena del nombre de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-401">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <code>&#8209;IsOrganizationDefault</code> |<span data-ttu-id="c9e28-402">Si es true establece la directiva como directiva predeterminada de la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-402">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="c9e28-403">Si es false, no hace nada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-403">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <code>&#8209;Type</code> |<span data-ttu-id="c9e28-404">Tipo de directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-404">Type of policy.</span></span> <span data-ttu-id="c9e28-405">Para la vigencia de los tokens, use siempre "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="c9e28-405">For token lifetimes, always use "TokenLifetimePolicy."</span></span> | `-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="c9e28-406"><code>&#8209;AlternativeIdentifier</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-406"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="c9e28-407">Establece un id alternativo para la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-407">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="get-azureadpolicy"></a><span data-ttu-id="c9e28-408">Get-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-408">Get-AzureADPolicy</span></span>
<span data-ttu-id="c9e28-409">Obtiene todas las directivas de AzureAD o una directiva especificada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-409">Gets all Azure AD policies or a specified policy.</span></span>

```PowerShell
Get-AzureADPolicy
```

| <span data-ttu-id="c9e28-410">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-410">Parameters</span></span> | <span data-ttu-id="c9e28-411">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-411">Description</span></span> | <span data-ttu-id="c9e28-412">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-412">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c9e28-413"><code>&#8209;Id</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-413"><code>&#8209;Id</code> [Optional]</span></span> |<span data-ttu-id="c9e28-414">El valor de **ObjectId (Id)** de la directiva que desea.</span><span class="sxs-lookup"><span data-stu-id="c9e28-414">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadpolicyappliedobject"></a><span data-ttu-id="c9e28-415">Get-AzureADPolicyAppliedObject</span><span class="sxs-lookup"><span data-stu-id="c9e28-415">Get-AzureADPolicyAppliedObject</span></span>
<span data-ttu-id="c9e28-416">Obtiene todas las aplicaciones y entidades de servicio vinculadas a una directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-416">Gets all apps and service principals that are linked to a policy.</span></span>

```PowerShell
Get-AzureADPolicyAppliedObject -Id <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-417">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-417">Parameters</span></span> | <span data-ttu-id="c9e28-418">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-418">Description</span></span> | <span data-ttu-id="c9e28-419">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-419">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-420">El valor de **ObjectId (Id)** de la directiva que desea.</span><span class="sxs-lookup"><span data-stu-id="c9e28-420">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="set-azureadpolicy"></a><span data-ttu-id="c9e28-421">Set-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-421">Set-AzureADPolicy</span></span>
<span data-ttu-id="c9e28-422">Actualiza una directiva existente.</span><span class="sxs-lookup"><span data-stu-id="c9e28-422">Updates an existing policy.</span></span>

```PowerShell
Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName <string>
```

| <span data-ttu-id="c9e28-423">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-423">Parameters</span></span> | <span data-ttu-id="c9e28-424">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-424">Description</span></span> | <span data-ttu-id="c9e28-425">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-425">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-426">El valor de **ObjectId (Id)** de la directiva que desea.</span><span class="sxs-lookup"><span data-stu-id="c9e28-426">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="c9e28-427">Cadena del nombre de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-427">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <span data-ttu-id="c9e28-428"><code>&#8209;Definition</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-428"><code>&#8209;Definition</code> [Optional]</span></span> |<span data-ttu-id="c9e28-429">La matriz de cadenas JSON que contiene todas las reglas de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-429">Array of stringified JSON that contains all the policy's rules.</span></span> |`-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <span data-ttu-id="c9e28-430"><code>&#8209;IsOrganizationDefault</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-430"><code>&#8209;IsOrganizationDefault</code> [Optional]</span></span> |<span data-ttu-id="c9e28-431">Si es true establece la directiva como directiva predeterminada de la organización.</span><span class="sxs-lookup"><span data-stu-id="c9e28-431">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="c9e28-432">Si es false, no hace nada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-432">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <span data-ttu-id="c9e28-433"><code>&#8209;Type</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-433"><code>&#8209;Type</code> [Optional]</span></span> |<span data-ttu-id="c9e28-434">Tipo de directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-434">Type of policy.</span></span> <span data-ttu-id="c9e28-435">Para la vigencia de los tokens, use siempre "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="c9e28-435">For token lifetimes, always use "TokenLifetimePolicy."</span></span> |`-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="c9e28-436"><code>&#8209;AlternativeIdentifier</code> [Opcional]</span><span class="sxs-lookup"><span data-stu-id="c9e28-436"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="c9e28-437">Establece un id alternativo para la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-437">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="remove-azureadpolicy"></a><span data-ttu-id="c9e28-438">Remove-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-438">Remove-AzureADPolicy</span></span>
<span data-ttu-id="c9e28-439">Elimina la directiva especificada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-439">Deletes the specified policy.</span></span>

```PowerShell
 Remove-AzureADPolicy -Id <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-440">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-440">Parameters</span></span> | <span data-ttu-id="c9e28-441">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-441">Description</span></span> | <span data-ttu-id="c9e28-442">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-442">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-443">El valor de **ObjectId (Id)** de la directiva que desea.</span><span class="sxs-lookup"><span data-stu-id="c9e28-443">**ObjectId (Id)** of the policy you want.</span></span> | `-Id <ObjectId of Policy>` |

</br></br>

### <a name="application-policies"></a><span data-ttu-id="c9e28-444">Directivas de aplicación</span><span class="sxs-lookup"><span data-stu-id="c9e28-444">Application policies</span></span>
<span data-ttu-id="c9e28-445">Los cmdlets siguientes se pueden usar para directivas de aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-445">You can use the following cmdlets for application policies.</span></span></br></br>

#### <a name="add-azureadapplicationpolicy"></a><span data-ttu-id="c9e28-446">Add-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-446">Add-AzureADApplicationPolicy</span></span>
<span data-ttu-id="c9e28-447">Vincula la directiva especificada a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-447">Links the specified policy to an application.</span></span>

```PowerShell
Add-AzureADApplicationPolicy -Id <ObjectId of Application> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-448">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-448">Parameters</span></span> | <span data-ttu-id="c9e28-449">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-449">Description</span></span> | <span data-ttu-id="c9e28-450">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-450">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-451">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-451">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="c9e28-452">El valor de **ObjectId** de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-452">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadapplicationpolicy"></a><span data-ttu-id="c9e28-453">Get-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-453">Get-AzureADApplicationPolicy</span></span>
<span data-ttu-id="c9e28-454">Obtiene la directiva asignada a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-454">Gets the policy that is assigned to an application.</span></span>

```PowerShell
Get-AzureADApplicationPolicy -Id <ObjectId of Application>
```

| <span data-ttu-id="c9e28-455">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-455">Parameters</span></span> | <span data-ttu-id="c9e28-456">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-456">Description</span></span> | <span data-ttu-id="c9e28-457">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-457">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-458">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-458">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadapplicationpolicy"></a><span data-ttu-id="c9e28-459">Remove-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-459">Remove-AzureADApplicationPolicy</span></span>
<span data-ttu-id="c9e28-460">Quita una directiva de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-460">Removes a policy from an application.</span></span>

```PowerShell
Remove-AzureADApplicationPolicy -Id <ObjectId of Application> -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-461">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-461">Parameters</span></span> | <span data-ttu-id="c9e28-462">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-462">Description</span></span> | <span data-ttu-id="c9e28-463">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-463">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-464">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-464">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="c9e28-465">El valor de **ObjectId** de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-465">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |

</br></br>

### <a name="service-principal-policies"></a><span data-ttu-id="c9e28-466">Directivas de la entidad de servicio</span><span class="sxs-lookup"><span data-stu-id="c9e28-466">Service principal policies</span></span>
<span data-ttu-id="c9e28-467">Los cmdlets siguientes se pueden usar para las directivas de entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-467">You can use the following cmdlets for service principal policies.</span></span>

#### <a name="add-azureadserviceprincipalpolicy"></a><span data-ttu-id="c9e28-468">Add-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-468">Add-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="c9e28-469">Vincula la directiva especificada a una entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="c9e28-469">Links the specified policy to a service principal.</span></span>

```PowerShell
Add-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-470">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-470">Parameters</span></span> | <span data-ttu-id="c9e28-471">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-471">Description</span></span> | <span data-ttu-id="c9e28-472">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-472">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-473">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-473">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="c9e28-474">El valor de **ObjectId** de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-474">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadserviceprincipalpolicy"></a><span data-ttu-id="c9e28-475">Get-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-475">Get-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="c9e28-476">Obtiene cualquier directiva vinculada a la entidad de servicio especificada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-476">Gets any policy linked to the specified service principal.</span></span>

```PowerShell
Get-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>
```

| <span data-ttu-id="c9e28-477">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-477">Parameters</span></span> | <span data-ttu-id="c9e28-478">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-478">Description</span></span> | <span data-ttu-id="c9e28-479">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-479">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-480">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-480">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadserviceprincipalpolicy"></a><span data-ttu-id="c9e28-481">Remove-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="c9e28-481">Remove-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="c9e28-482">Quita la directiva de la entidad de servicio especificada.</span><span class="sxs-lookup"><span data-stu-id="c9e28-482">Removes the policy from the specified service principal.</span></span>

```PowerShell
Remove-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>  -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="c9e28-483">Parámetros</span><span class="sxs-lookup"><span data-stu-id="c9e28-483">Parameters</span></span> | <span data-ttu-id="c9e28-484">Descripción</span><span class="sxs-lookup"><span data-stu-id="c9e28-484">Description</span></span> | <span data-ttu-id="c9e28-485">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9e28-485">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="c9e28-486">El valor de **ObjectId (Id)** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9e28-486">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="c9e28-487">El valor de **ObjectId** de la directiva.</span><span class="sxs-lookup"><span data-stu-id="c9e28-487">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |

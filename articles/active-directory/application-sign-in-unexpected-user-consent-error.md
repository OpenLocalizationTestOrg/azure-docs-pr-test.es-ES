---
title: "Error inesperado al otorgar consentimiento a una aplicación | Microsoft Docs"
description: "Explica los errores que pueden producirse durante el proceso de otorgar su consentimiento a una aplicación y qué puede hacer al respecto"
services: active-directory
documentationcenter: 
author: ajamess
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: asteen
ms.openlocfilehash: fd500fdd4c8642bad96dcf71eebcf1fad461a35f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="unexpected-error-when-performing-consent-to-an-application"></a><span data-ttu-id="becf1-103">Error inesperado al otorgar consentimiento a una aplicación</span><span class="sxs-lookup"><span data-stu-id="becf1-103">Unexpected error when performing consent to an application</span></span>

<span data-ttu-id="becf1-104">En este artículo, se explican los errores que pueden producirse durante el proceso de otorgar su consentimiento a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="becf1-104">This article discusses errors that can occur during the process of consenting to an application.</span></span> <span data-ttu-id="becf1-105">Si está solucionando solicitudes de consentimiento inesperadas que no contienen ningún mensaje de error, consulte [Escenarios de autenticación para Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-authentication-scenarios).</span><span class="sxs-lookup"><span data-stu-id="becf1-105">If you are Troubleshoot unexpected consent prompts that do not contain any error messages, see [Authentication Scenarios for Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-authentication-scenarios).</span></span>

<span data-ttu-id="becf1-106">Muchas aplicaciones que se integran con Azure Active Directory requieren permisos para acceder a otros recursos a fin de funcionar.</span><span class="sxs-lookup"><span data-stu-id="becf1-106">Many applications that integrate with Azure Active Directory require permissions to access other resources in order to function.</span></span> <span data-ttu-id="becf1-107">Cuando estos recursos también se integran con Azure Active Directory, suelen solicitarse permisos para acceder a ellos mediante el marco de consentimiento común.</span><span class="sxs-lookup"><span data-stu-id="becf1-107">When these resources are also integrated with Azure Active Directory, permissions to access them is often requested using the common consent framework.</span></span> 

<span data-ttu-id="becf1-108">Esto produce que se muestre una solicitud de consentimiento, que generalmente ocurre la primera vez que se usa una aplicación, pero que también se puede producir en un uso posterior de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="becf1-108">This results in a consent prompt being displayed, which generally occurs the first time an application is used but can also occur on a subsequent use of the application.</span></span>

<span data-ttu-id="becf1-109">Determinadas condiciones deben cumplirse para que un usuario otorgue su consentimiento a los permisos que requiere una aplicación.</span><span class="sxs-lookup"><span data-stu-id="becf1-109">Certain conditions must be true for a user to consent to the permissions an application requires.</span></span> <span data-ttu-id="becf1-110">Si no se cumplen estas condiciones, pueden producirse varios errores.</span><span class="sxs-lookup"><span data-stu-id="becf1-110">If these conditions are not met, various errors can occur.</span></span> <span data-ttu-id="becf1-111">Entre ellos se incluyen los siguientes:</span><span class="sxs-lookup"><span data-stu-id="becf1-111">These include:</span></span>

## <a name="requesting-not-authorized-permissions-error"></a><span data-ttu-id="becf1-112">Error por solicitud de permisos no autorizados</span><span class="sxs-lookup"><span data-stu-id="becf1-112">Requesting not authorized permissions error</span></span>
* <span data-ttu-id="becf1-113">**AADSTS90093:** &lt;clientAppDisplayName&gt; solicita uno o más permisos que no está autorizado a conceder.</span><span class="sxs-lookup"><span data-stu-id="becf1-113">**AADSTS90093:** &lt;clientAppDisplayName&gt; is requesting one or more permissions that you are not authorized to grant.</span></span> <span data-ttu-id="becf1-114">Póngase en contacto con el administrador, que puede dar su consentimiento para esta aplicación en su nombre.</span><span class="sxs-lookup"><span data-stu-id="becf1-114">Contact an administrator, who can consent to this application on your behalf.</span></span>

<span data-ttu-id="becf1-115">Este error se produce cuando un usuario que no es administrador de la empresa intenta usar una aplicación que está solicitando permisos que solo un administrador puede conceder.</span><span class="sxs-lookup"><span data-stu-id="becf1-115">This error occurs when a user who is not a company administrator attempts to use an application that is requesting permissions that only an administrator can grant.</span></span> <span data-ttu-id="becf1-116">Este error se puede solucionar si un administrador otorga el acceso a la aplicación en nombre de la organización.</span><span class="sxs-lookup"><span data-stu-id="becf1-116">This error can be resolved by an administrator granting access to the application on behalf of their organization.</span></span>

## <a name="policy-prevents-granting-permissions-error"></a><span data-ttu-id="becf1-117">Error porque la directiva impide conceder permisos</span><span class="sxs-lookup"><span data-stu-id="becf1-117">Policy prevents granting permissions error</span></span>
* <span data-ttu-id="becf1-118">**AADSTS90093:** un administrador de &lt;tenantDisplayName&gt; ha establecido una directiva que le impide otorgar a &lt;nombre de la aplicación&gt; los permisos que está solicitando.</span><span class="sxs-lookup"><span data-stu-id="becf1-118">**AADSTS90093:** An administrator of &lt;tenantDisplayName&gt; has set a policy that prevents you from granting &lt;name of app&gt; the permissions it is requesting.</span></span> <span data-ttu-id="becf1-119">Póngase en contacto con un administrador de &lt;tenantDisplayName&gt;, que puede conceder permisos a esta aplicación en su nombre.</span><span class="sxs-lookup"><span data-stu-id="becf1-119">Contact an administrator of &lt;tenantDisplayName&gt;, who can grant permissions to this app on your behalf.</span></span>

<span data-ttu-id="becf1-120">Este error se produce cuando el administrador de una empresa desactiva la funcionalidad para que los usuarios otorguen consentimiento a aplicaciones y, a continuación, un usuario sin privilegios de administrador intenta usar una aplicación que requiere el consentimiento.</span><span class="sxs-lookup"><span data-stu-id="becf1-120">This error occurs when a company administrator turns off the ability for users to consent to applications, then a non-administrator user attempts to use an application that requires consent.</span></span> <span data-ttu-id="becf1-121">Este error se puede solucionar si un administrador otorga el acceso a la aplicación en nombre de la organización.</span><span class="sxs-lookup"><span data-stu-id="becf1-121">This error can be resolved by an administrator granting access to the application on behalf of their organization.</span></span>

## <a name="intermittent-problem-error"></a><span data-ttu-id="becf1-122">Error de un problema intermitente</span><span class="sxs-lookup"><span data-stu-id="becf1-122">Intermittent problem error</span></span>
* <span data-ttu-id="becf1-123">**AADSTS90090:** al parecer hemos detectado un problema intermitente para grabar los permisos que intenta conceder a &lt;clientAppDisplayName&gt;.</span><span class="sxs-lookup"><span data-stu-id="becf1-123">**AADSTS90090:** It looks like we encountered an intermittent problem recording the permissions you attempted to grant to &lt;clientAppDisplayName&gt;.</span></span> <span data-ttu-id="becf1-124">Inténtelo de nuevo más tarde.</span><span class="sxs-lookup"><span data-stu-id="becf1-124">try again later.</span></span>

<span data-ttu-id="becf1-125">Este error indica que se ha producido un problema de servicio intermitente.</span><span class="sxs-lookup"><span data-stu-id="becf1-125">This error indicates that an intermittent service side issue has occurred.</span></span> <span data-ttu-id="becf1-126">Se puede resolver intentando otorgar su consentimiento a la aplicación de nuevo.</span><span class="sxs-lookup"><span data-stu-id="becf1-126">It can be resolved by attempting to consent to the application again.</span></span>

## <a name="resource-not-available-error"></a><span data-ttu-id="becf1-127">Error de recurso no disponible</span><span class="sxs-lookup"><span data-stu-id="becf1-127">Resource not available error</span></span>
* <span data-ttu-id="becf1-128">**AADSTS65005:** la aplicación &lt;clientAppDisplayName&gt; solicitó permisos para acceder al recurso &lt;resourceAppDisplayName&gt; que no está disponible.</span><span class="sxs-lookup"><span data-stu-id="becf1-128">**AADSTS65005:** The app &lt;clientAppDisplayName&gt; requested permissions to access a resource &lt;resourceAppDisplayName&gt; that is not available.</span></span> 

<span data-ttu-id="becf1-129">Póngase en contacto con el desarrollador de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="becf1-129">Contact the application developer.</span></span>

##  <a name="resource-not-available-in-tenant-error"></a><span data-ttu-id="becf1-130">Error de recurso no disponible en el inquilino</span><span class="sxs-lookup"><span data-stu-id="becf1-130">Resource not available in tenant error</span></span>
* <span data-ttu-id="becf1-131">**AADSTS65005:** &lt;clientAppDisplayName&gt; solicitó permiso para acceder al recurso &lt;resourceAppDisplayName&gt; que no está disponible en su organización &lt;tenantDisplayName&gt;.</span><span class="sxs-lookup"><span data-stu-id="becf1-131">**AADSTS65005:** &lt;clientAppDisplayName&gt; is requesting access to a resource &lt;resourceAppDisplayName&gt; that is not available in your organization &lt;tenantDisplayName&gt;.</span></span> 

<span data-ttu-id="becf1-132">Asegúrese de que este recurso esté disponible o póngase en contacto con un administrador de &lt;tenantDisplayName&gt;.</span><span class="sxs-lookup"><span data-stu-id="becf1-132">Ensure that this resource is available or contact an administrator of &lt;tenantDisplayName&gt;.</span></span>

## <a name="permissions-mismatch-error"></a><span data-ttu-id="becf1-133">Error de coincidencia de permisos</span><span class="sxs-lookup"><span data-stu-id="becf1-133">Permissions mismatch error</span></span>
* <span data-ttu-id="becf1-134">**AADSTS65005:** la aplicación solicitó el consentimiento para acceder al recurso &lt;resourceAppDisplayName&gt;.</span><span class="sxs-lookup"><span data-stu-id="becf1-134">**AADSTS65005:** The app requested consent to access resource &lt;resourceAppDisplayName&gt;.</span></span> <span data-ttu-id="becf1-135">Hay un error en esta solicitud porque no coincide con cómo se configuró anteriormente la aplicación durante el registro de aplicación.</span><span class="sxs-lookup"><span data-stu-id="becf1-135">This request failed because it does not match how the app was pre-configured during app registration.</span></span> <span data-ttu-id="becf1-136">Póngase en contacto con el proveedor de la aplicación**.</span><span class="sxs-lookup"><span data-stu-id="becf1-136">Contact the app vendor.**</span></span>

<span data-ttu-id="becf1-137">Todos estos errores se producen cuando la aplicación a la que un usuario está intentando otorgar consentimiento solicita permisos para tener acceso a una aplicación de recursos que no se encuentra en el directorio de la organización (inquilino).</span><span class="sxs-lookup"><span data-stu-id="becf1-137">These errors all occur when the application a user is trying to consent to is requesting permissions to access a resource application that cannot be found in the organization’s directory (tenant).</span></span> <span data-ttu-id="becf1-138">Esto puede ocurrir por varios motivos:</span><span class="sxs-lookup"><span data-stu-id="becf1-138">This can occur for several reasons:</span></span>

-   <span data-ttu-id="becf1-139">El desarrollador de aplicaciones cliente configuró su aplicación incorrectamente, lo que provocó que solicitara acceso a un recurso no válido.</span><span class="sxs-lookup"><span data-stu-id="becf1-139">The client application developer has configured their application incorrectly, causing it to request access to an invalid resource.</span></span> <span data-ttu-id="becf1-140">En este caso, el desarrollador de aplicaciones debe actualizar la configuración de la aplicación cliente para resolver este problema.</span><span class="sxs-lookup"><span data-stu-id="becf1-140">In this case, the application developer must update the configuration of the client application to resolve this issue.</span></span>

-   <span data-ttu-id="becf1-141">Una entidad de servicio que representa la aplicación de recurso de destino no existe en la organización o existía en el pasado, pero se ha eliminado.</span><span class="sxs-lookup"><span data-stu-id="becf1-141">A Service Principal representing the target resource application does not exist in the organization, or existed in the past but has been removed.</span></span> <span data-ttu-id="becf1-142">Para resolver este problema, se debe haber aprovisionado a una entidad de servicio en la organización para la aplicación de recurso a fin de que la aplicación cliente pueda solicitar permisos a ella.</span><span class="sxs-lookup"><span data-stu-id="becf1-142">To resolve this issue, a Service Principal for the resource application must be provisioned in the organization so the client application can request permissions to it.</span></span> <span data-ttu-id="becf1-143">Esto puede ocurrir de varias maneras, según el tipo de aplicación, como por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="becf1-143">This can happen in an number of ways, depending on the type of application, including:</span></span>

    -   <span data-ttu-id="becf1-144">Adquirir una suscripción para la aplicación del recurso (aplicaciones publicadas de Microsoft)</span><span class="sxs-lookup"><span data-stu-id="becf1-144">Acquiring a subscription for the resource application (Microsoft published applications)</span></span>

    -   <span data-ttu-id="becf1-145">Otorgar consentimiento a la aplicación del recurso</span><span class="sxs-lookup"><span data-stu-id="becf1-145">Consenting to the resource application</span></span>

    -   <span data-ttu-id="becf1-146">Otorgar permisos a la aplicación en Azure Portal</span><span class="sxs-lookup"><span data-stu-id="becf1-146">Granting the application permissions via the Azure Portal</span></span>

    -   <span data-ttu-id="becf1-147">Agregar la aplicación desde la Galería de aplicaciones de Azure AD</span><span class="sxs-lookup"><span data-stu-id="becf1-147">Adding the application from the Azure AD Application Gallery</span></span>

## <a name="next-steps"></a><span data-ttu-id="becf1-148">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="becf1-148">Next steps</span></span> 

[<span data-ttu-id="becf1-149">Aplicaciones, permisos y consentimiento en Azure Active Directory (punto de conexión v1)</span><span class="sxs-lookup"><span data-stu-id="becf1-149">Apps, permissions, and consent in Azure Active Directory (v1 endpoint)</span></span>](https://docs.microsoft.com/azure/active-directory/active-directory-apps-permissions-consent)<br>

[<span data-ttu-id="becf1-150">Ámbitos, permisos y consentimiento en Azure Active Directory (punto de conexión v2.0)</span><span class="sxs-lookup"><span data-stu-id="becf1-150">Scopes, permissions, and consent in the Azure Active Directory (v2.0 endpoint)</span></span>](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes)



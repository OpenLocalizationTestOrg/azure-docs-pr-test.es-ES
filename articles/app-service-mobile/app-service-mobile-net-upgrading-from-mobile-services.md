---
title: "Actualización de Servicios móviles a Servicio de aplicaciones de Azure"
description: "Aprenda a actualizar fácilmente la aplicación de Servicios móviles a una aplicación móvil del Servicio de aplicaciones."
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 81173b34d0d3b07c5c49d867b1dc5060c7311f12
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-to-app-service"></a><span data-ttu-id="9678b-103">Actualización del Servicio móvil de .NET existente a Servicio de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="9678b-103">Upgrade your existing .NET Azure Mobile Service to App Service</span></span>
<span data-ttu-id="9678b-104">Aplicaciones móviles del Servicio de aplicaciones es una nueva forma de crear aplicaciones móviles con Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9678b-104">App Service Mobile is a new way to build mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="9678b-105">Para más información, vea [¿Qué es Aplicaciones móviles?].</span><span class="sxs-lookup"><span data-stu-id="9678b-105">To learn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="9678b-106">En este tema se describe cómo actualizar una aplicación back-end de .NET existente en Servicios móviles de Azure a una nueva instancia de Aplicaciones móviles del Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="9678b-106">This topic describes how to upgrade an existing .NET backend application from Azure Mobile Services to a new App Service Mobile Apps.</span></span> <span data-ttu-id="9678b-107">Cuando realice esta migración, la aplicación de Servicios móviles existente puede continuar funcionando.</span><span class="sxs-lookup"><span data-stu-id="9678b-107">While you perform this upgrade, your existing Mobile Services application can continue to operate.</span></span>   <span data-ttu-id="9678b-108">Si necesita actualizar una aplicación back-end de Node.js, consulte [Actualización de Mobile Services de Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="9678b-108">If you need to upgrade a Node.js backend application, refer to [Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="9678b-109">Cuando un back-end móvil se actualiza a Servicio de aplicaciones de Azure, accede a todas las características de Servicio de aplicaciones y se factura conforme a los [precios del Servicio de aplicaciones], no según los precios de Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-109">When a mobile backend is upgraded to Azure App Service, it has access to all App Service features and are billed according to [App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="9678b-110">Migración frente a actualización</span><span class="sxs-lookup"><span data-stu-id="9678b-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="9678b-111">Se recomienda [realizar una migración](app-service-mobile-migrating-from-mobile-services.md) antes de pasar por una actualización.</span><span class="sxs-lookup"><span data-stu-id="9678b-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="9678b-112">De este modo, puede colocar las dos versiones de la aplicación en el mismo Plan del Servicio de aplicaciones y no incurrir en ningún coste adicional.</span><span class="sxs-lookup"><span data-stu-id="9678b-112">This way, you can put both versions of your application on the same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="9678b-113">Mejoras en el SDK de servidor .NET de Aplicaciones móviles</span><span class="sxs-lookup"><span data-stu-id="9678b-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="9678b-114">La actualización al nuevo [SDK de Aplicaciones móviles](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) ofrece las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="9678b-114">Upgrading to the new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides the following benefits:</span></span>

* <span data-ttu-id="9678b-115">Más flexibilidad en las dependencias de NuGet.</span><span class="sxs-lookup"><span data-stu-id="9678b-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="9678b-116">El entorno de hospedaje ya no proporciona sus propias versiones de paquetes NuGet, por lo que puede usar versiones compatibles alternativas.</span><span class="sxs-lookup"><span data-stu-id="9678b-116">The hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="9678b-117">Sin embargo, si hay nuevas actualizaciones de seguridad o correcciones de errores importantes para el SDK de servidor móvil o dependencias, debe actualizar el servicio manualmente.</span><span class="sxs-lookup"><span data-stu-id="9678b-117">However, if there are new critical bugfixes or security updates to the Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="9678b-118">Más flexibilidad en el SDK móvil.</span><span class="sxs-lookup"><span data-stu-id="9678b-118">More flexibility in the mobile SDK.</span></span> <span data-ttu-id="9678b-119">Puede controlar explícitamente qué características y rutas se configuran, como la autenticación, las API de la tabla y el punto de conexión de registro de inserción.</span><span class="sxs-lookup"><span data-stu-id="9678b-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and the push registration endpoint.</span></span> <span data-ttu-id="9678b-120">Para más información, vea [Trabajar con el SDK del servidor back-end de .NET para Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="9678b-120">To learn more, see [How to use the .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="9678b-121">Compatibilidad con otras rutas y tipos de proyecto ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9678b-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="9678b-122">Ahora puede hospedar controladores Web API y MVC en el mismo proyecto que el proyecto de back-end móvil.</span><span class="sxs-lookup"><span data-stu-id="9678b-122">You can now host MVC and Web API controllers in the same project as your mobile backend project.</span></span>
* <span data-ttu-id="9678b-123">Compatibilidad con nuevas características de autenticación de Servicio de aplicaciones, que le permiten usar una configuración de autenticación común a través de aplicaciones web y móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-123">Support for new App Service authentication features, which allow you to use a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="9678b-124"><a name="overview"></a>Información general básica de actualización</span><span class="sxs-lookup"><span data-stu-id="9678b-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="9678b-125">En muchos casos, la actualización será tan sencilla como cambiar al nuevo SDK de servidor de Aplicaciones móviles y volver a publicar el código en una nueva instancia de Aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-125">In many cases, upgrading will be as simple as switching to the new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="9678b-126">Sin embargo, hay algunos escenarios que requieren una configuración adicional, como los escenarios de autenticación avanzada y el trabajo con trabajos programados.</span><span class="sxs-lookup"><span data-stu-id="9678b-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="9678b-127">Cada uno de ellos se trata en las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="9678b-127">Each of these is covered in the later sections.</span></span>

> [!TIP]
> <span data-ttu-id="9678b-128">Se recomienda leer y comprender totalmente el resto de este tema antes de iniciar una actualización.</span><span class="sxs-lookup"><span data-stu-id="9678b-128">It is advised that you read and understand the rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="9678b-129">Tome nota de cualquier característica usada que se mencione a continuación.</span><span class="sxs-lookup"><span data-stu-id="9678b-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="9678b-130">Los SDK de cliente de Servicios móviles **no** son compatibles con el nuevo SDK de servidor de Aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-130">The Mobile Services client SDKs are **not** compatible with the new Mobile Apps server SDK.</span></span> <span data-ttu-id="9678b-131">A fin de ofrecer continuidad del servicio para la aplicación, no debe publicar cambios en un sitio que actualmente presta servicio a clientes publicados.</span><span class="sxs-lookup"><span data-stu-id="9678b-131">In order to provide continuity of service for your app, you should not publish changes to a site currently serving published clients.</span></span> <span data-ttu-id="9678b-132">En su lugar, debe crear una aplicación móvil que actúe como duplicado.</span><span class="sxs-lookup"><span data-stu-id="9678b-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="9678b-133">Puede colocar esta aplicación en el mismo Plan del Servicio de aplicaciones para evitar incurrir en costos financieros adicionales.</span><span class="sxs-lookup"><span data-stu-id="9678b-133">You can put this application on the same App Service plan to avoid incurring additional financial cost.</span></span>

<span data-ttu-id="9678b-134">Entonces tendrá dos versiones de la aplicación,: una que permanece igual y presta servicio a aplicaciones publicadas en su estado natural, y otra que después se puede actualizar y destinar a una nueva versión del cliente.</span><span class="sxs-lookup"><span data-stu-id="9678b-134">You will then have two versions of the application: one which stays the same and serves published apps in the wild, and the other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="9678b-135">Puede mover y probar el código a su ritmo, pero debe asegurarse de que las correcciones de errores se apliquen a ambas.</span><span class="sxs-lookup"><span data-stu-id="9678b-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied to both.</span></span> <span data-ttu-id="9678b-136">Cuando crea que la cantidad que elija de aplicaciones cliente en estado natural se han actualizado a la versión más reciente, puede eliminar si quiere la aplicación migrada original.</span><span class="sxs-lookup"><span data-stu-id="9678b-136">Once you feel that a desired number of client apps in the wild have updated to the latest version, you can delete the original migrated app if you desire.</span></span>

<span data-ttu-id="9678b-137">El esquema completo del proceso de actualización es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="9678b-137">The full outline for the upgrade process is as follows:</span></span>

1. <span data-ttu-id="9678b-138">Creación de una aplicación móvil</span><span class="sxs-lookup"><span data-stu-id="9678b-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="9678b-139">Actualización del proyecto para usar los nuevos SDK de servidor</span><span class="sxs-lookup"><span data-stu-id="9678b-139">Update the project to use the new Server SDKs</span></span>
3. <span data-ttu-id="9678b-140">Publique una versión nueva de la aplicación cliente</span><span class="sxs-lookup"><span data-stu-id="9678b-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="9678b-141">(Opcional) Eliminación de la instancia original migrada</span><span class="sxs-lookup"><span data-stu-id="9678b-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="9678b-142"><a name="mobile-app-version"></a>Creación de una segunda instancia de aplicación</span><span class="sxs-lookup"><span data-stu-id="9678b-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="9678b-143">El primer paso en la actualización es crear el recurso de aplicación móvil que hospedará la nueva versión de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9678b-143">The first step in upgrading is to create the Mobile App resource which will host the new version of your application.</span></span> <span data-ttu-id="9678b-144">Si ya ha migrado un servicio móvil existente, conviene crear esta versión en el mismo plan de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="9678b-144">If you have already migrated an existing mobile service, you will want to create this version on the same hosting plan.</span></span> <span data-ttu-id="9678b-145">Abra el [Azure Portal] y vaya a la aplicación migrada.</span><span class="sxs-lookup"><span data-stu-id="9678b-145">Open the [Azure portal] and navigate to your migrated application.</span></span> <span data-ttu-id="9678b-146">Tome nota del Plan del Servicio de aplicaciones en el que se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="9678b-146">Make note of the App Service Plan it is running on.</span></span>

<span data-ttu-id="9678b-147">A continuación, cree la segunda instancia de aplicación siguiendo las [instrucciones de creación de back-end de .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="9678b-147">Next, create the second application instance by following the [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="9678b-148">Cuando se le pida que seleccione el Plan del Servicio de aplicaciones o el "plan de hospedaje", elija el plan de la aplicación migrada.</span><span class="sxs-lookup"><span data-stu-id="9678b-148">When prompted to select you App Service Plan or "hosting plan" choose the plan of your migrated application.</span></span>

<span data-ttu-id="9678b-149">Probablemente deseará usar la misma base de datos y la base de datos central de notificaciones como hizo en Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-149">You will likely want to use the same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="9678b-150">Para copiar estos valores, abra [Azure Portal] y navegue hasta la aplicación original, haga clic en **Configuración** > **Configuración de aplicación**.</span><span class="sxs-lookup"><span data-stu-id="9678b-150">You can copy these values by opening [Azure portal] and navigating to the original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="9678b-151">En **Cadenas de conexión**, copie `MS_NotificationHubConnectionString` y `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="9678b-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="9678b-152">Navegue al nuevo sitio de actualización y péguelos en él, sobrescribiendo los valores existentes.</span><span class="sxs-lookup"><span data-stu-id="9678b-152">Navigate to your new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="9678b-153">Repita este proceso para cualquier otra opción de configuración de la aplicación que la aplicación requiera.</span><span class="sxs-lookup"><span data-stu-id="9678b-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="9678b-154">Si no usa un servicio migrado, puede leer las cadenas de conexión y la configuración de la aplicación en la pestaña **Configurar** de la sección Servicios móviles del [Portal de Azure clásico].</span><span class="sxs-lookup"><span data-stu-id="9678b-154">If not using a migrated service, you can read connection strings and app settings from the **Configure** tab of the Mobile Services section of the [Azure classic portal].</span></span>

<span data-ttu-id="9678b-155">Haga una copia del proyecto de ASP.NET para la aplicación y publíquela en el nuevo sitio web.</span><span class="sxs-lookup"><span data-stu-id="9678b-155">Make a copy of the ASP.NET project for your application and publish it to your new site.</span></span> <span data-ttu-id="9678b-156">Mediante una copia de la aplicación cliente actualizada con la nueva dirección URL, compruebe que todo funciona según lo esperado.</span><span class="sxs-lookup"><span data-stu-id="9678b-156">Using a copy of your client application updated with the new URL, validate that everything works as expected.</span></span>

## <a name="updating-the-server-project"></a><span data-ttu-id="9678b-157">Actualización del proyecto de servidor</span><span class="sxs-lookup"><span data-stu-id="9678b-157">Updating the server project</span></span>
<span data-ttu-id="9678b-158">Las aplicaciones móviles ofrecen un nuevo [SDK de servidor de aplicaciones móviles] que proporciona en gran medida la misma funcionalidad que el tiempo de ejecución de Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of the same functionality as the Mobile Services runtime.</span></span> <span data-ttu-id="9678b-159">En primer lugar, debe quitar todas las referencias a los paquetes de Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-159">First, you should remove all references to the Mobile Services packages.</span></span> <span data-ttu-id="9678b-160">En el Administrador de paquetes NuGet, busque `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="9678b-160">In the NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="9678b-161">En la mayoría de aplicaciones se verán varios paquetes aquí, incluidos `WindowsAzure.MobileServices.Backend.Tables` y `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="9678b-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="9678b-162">En tal caso, empiece por el paquete más bajo en el árbol de dependencias, como `Entity`, y elimínelo.</span><span class="sxs-lookup"><span data-stu-id="9678b-162">In such a case, start with the lowest package in the dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="9678b-163">Cuando se le pregunte, no quite todos los paquetes dependientes.</span><span class="sxs-lookup"><span data-stu-id="9678b-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="9678b-164">Repita este proceso hasta que haya quitado el propio `WindowsAzure.MobileServices.Backend` .</span><span class="sxs-lookup"><span data-stu-id="9678b-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="9678b-165">En este punto, tendrá un proyecto que ya no hace referencia a los SDK de Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="9678b-166">A continuación, agregará referencias al SDK de aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-166">Next you will add references the Mobile Apps SDK.</span></span> <span data-ttu-id="9678b-167">Para esta actualización, la mayoría de los desarrolladores prefieren descargar e instalar el paquete `Microsoft.Azure.Mobile.Server.Quickstart` ya que, de esta manera, se extrae el conjunto necesario completo.</span><span class="sxs-lookup"><span data-stu-id="9678b-167">For this upgrade, most developers will want to download and install the `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in the entire required set.</span></span>

<span data-ttu-id="9678b-168">Habrá algunos errores del compilador resultantes de las diferencias entre los SDK, pero son fáciles de resolver y se tratan en el resto de esta sección.</span><span class="sxs-lookup"><span data-stu-id="9678b-168">There will be quite a few compiler errors resulting from differences between the SDKs, but these are easy to address and are covered in the rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="9678b-169">Configuración base</span><span class="sxs-lookup"><span data-stu-id="9678b-169">Base configuration</span></span>
<span data-ttu-id="9678b-170">Luego, en WebApiConfig.cs, puede reemplazar.</span><span class="sxs-lookup"><span data-stu-id="9678b-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class to set configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class to set WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="9678b-171">por</span><span class="sxs-lookup"><span data-stu-id="9678b-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="9678b-172">Si desea más información sobre el nuevo SDK de servidor .NET y sobre cómo agregar o quitar características de la aplicación, vea el tema [Uso del SDK de servidor .NET] .</span><span class="sxs-lookup"><span data-stu-id="9678b-172">If you wish to learn more about the new .NET server SDK and how to add/remove features from your app, please see the [How to use the .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="9678b-173">Si la aplicación hace uso de las características de autenticación, también debe registrar un middleware de OWIN.</span><span class="sxs-lookup"><span data-stu-id="9678b-173">If your app makes use of the authentication features, you will also need to register an OWIN middleware.</span></span> <span data-ttu-id="9678b-174">En este caso, debe mover el código de configuración anterior a una nueva clase de inicio OWIN.</span><span class="sxs-lookup"><span data-stu-id="9678b-174">In this case, you should move the above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="9678b-175">Agregue el paquete NuGet `Microsoft.Owin.Host.SystemWeb` si no está ya incluido en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="9678b-175">Add the NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="9678b-176">En Visual Studio, haga clic con el botón derecho en el proyecto y seleccione **Agregar** -> **Nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="9678b-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="9678b-177">Seleccione **Web** -> **General** -> **Clase de inicio OWIN**.</span><span class="sxs-lookup"><span data-stu-id="9678b-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="9678b-178">Mueva el código anterior de MobileAppConfiguration del método `WebApiConfig.Register()` al `Configuration()` de la nueva clase de inicio.</span><span class="sxs-lookup"><span data-stu-id="9678b-178">Move the above code for MobileAppConfiguration from `WebApiConfig.Register()` to the `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="9678b-179">Asegúrese de que el método `Configuration()` termina con:</span><span class="sxs-lookup"><span data-stu-id="9678b-179">Make sure the `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="9678b-180">Hay cambios adicionales relacionados con la autenticación que se tratan a continuación en la sección de autenticación completa.</span><span class="sxs-lookup"><span data-stu-id="9678b-180">There are additional changes related to authentication which are covered in the full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="9678b-181">Trabajo con datos</span><span class="sxs-lookup"><span data-stu-id="9678b-181">Working with Data</span></span>
<span data-ttu-id="9678b-182">En Servicios móviles, el nombre de la aplicación móvil actúa como nombre del esquema predeterminado en la configuración de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="9678b-182">In Mobile Services, the mobile app name served as the default schema name in the Entity Framework setup.</span></span>

<span data-ttu-id="9678b-183">Para asegurarse de que tiene el mismo esquema al que se hace referencia que antes, use lo siguiente para establecer el esquema en el DbContext de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="9678b-183">To ensure that you have the same schema being referenced as before, use the following to set the schema in the DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="9678b-184">Si hace lo anterior, asegúrese de que tiene MS_MobileServiceName establecido.</span><span class="sxs-lookup"><span data-stu-id="9678b-184">Please make sure you have MS_MobileServiceName set if you do the above.</span></span> <span data-ttu-id="9678b-185">También puede especificar otro nombre de esquema si la aplicación lo personalizó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9678b-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="9678b-186">Propiedades del sistema</span><span class="sxs-lookup"><span data-stu-id="9678b-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="9678b-187">Nomenclatura</span><span class="sxs-lookup"><span data-stu-id="9678b-187">Naming</span></span>
<span data-ttu-id="9678b-188">En el SDK de servidor de Servicios móviles de Azure, las propiedades del sistema siempre contienen un doble prefijo subrayado (`__`) para las propiedades:</span><span class="sxs-lookup"><span data-stu-id="9678b-188">In the Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for the properties:</span></span>

* <span data-ttu-id="9678b-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="9678b-189">__createdAt</span></span>
* <span data-ttu-id="9678b-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="9678b-190">__updatedAt</span></span>
* <span data-ttu-id="9678b-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="9678b-191">__deleted</span></span>
* <span data-ttu-id="9678b-192">__version</span><span class="sxs-lookup"><span data-stu-id="9678b-192">__version</span></span>

<span data-ttu-id="9678b-193">Los SDK de cliente de Servicios móviles tienen una lógica especial para analizar las propiedades del sistema en este formato.</span><span class="sxs-lookup"><span data-stu-id="9678b-193">The Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="9678b-194">En Aplicaciones móviles de Azure, las propiedades del sistema ya no tienen un formato especial y tienen los nombres siguientes:</span><span class="sxs-lookup"><span data-stu-id="9678b-194">In Azure Mobile Apps, system properties no longer have a special format and have the following names:</span></span>

* <span data-ttu-id="9678b-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="9678b-195">createdAt</span></span>
* <span data-ttu-id="9678b-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="9678b-196">updatedAt</span></span>
* <span data-ttu-id="9678b-197">deleted</span><span class="sxs-lookup"><span data-stu-id="9678b-197">deleted</span></span>
* <span data-ttu-id="9678b-198">versión</span><span class="sxs-lookup"><span data-stu-id="9678b-198">version</span></span>

<span data-ttu-id="9678b-199">Los SDK de cliente de Aplicaciones móviles usan los nuevos nombres de propiedades del sistema, por lo que no es necesario realizar cambios al código de cliente.</span><span class="sxs-lookup"><span data-stu-id="9678b-199">The Mobile Apps client SDKs use the new system properties names, so no changes are required to client code.</span></span> <span data-ttu-id="9678b-200">Pero, si realiza llamadas REST directamente al servicio, debe cambiar las consultas en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="9678b-200">However, if you are directly making REST calls to your service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="9678b-201">Almacén local.</span><span class="sxs-lookup"><span data-stu-id="9678b-201">Local store</span></span>
<span data-ttu-id="9678b-202">Los cambios en los nombres de propiedades del sistema se traducen en que una base de datos local de sincronización sin conexión para Servicios móviles no es compatible con Aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-202">The changes to the names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="9678b-203">Si es posible, debe evitar la actualización de aplicaciones cliente de Servicios móviles a Aplicaciones móviles hasta que los cambios pendientes se hayan enviado al servidor.</span><span class="sxs-lookup"><span data-stu-id="9678b-203">If possible, you should avoid upgrading client apps from Mobile Services to Mobile Apps until after pending changes have been sent to the server.</span></span> <span data-ttu-id="9678b-204">A continuación, la aplicación actualizada debe usar un nuevo nombre de archivo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9678b-204">Then, the upgraded app should use a new database filename.</span></span>

<span data-ttu-id="9678b-205">Si una aplicación cliente se actualiza desde Servicios móviles a Aplicaciones móviles mientras hay cambios sin conexión pendientes en la cola de la operación, el sistema de base de datos debe actualizarse para reflejar los nuevos nombres de columna.</span><span class="sxs-lookup"><span data-stu-id="9678b-205">If a client app is upgraded from Mobile Services to Mobile Apps while there are pending offline changes in the operation queue, then the system database must be updated to use the new column names.</span></span> <span data-ttu-id="9678b-206">En iOS, esto puede lograrse mediante migraciones ligeras para cambiar los nombres de columna.</span><span class="sxs-lookup"><span data-stu-id="9678b-206">On iOS, this can be achieved using lightweight migrations to change the column names.</span></span> <span data-ttu-id="9678b-207">En Android y en el cliente administrado de .NET, debe escribir SQL personalizado para cambiar el nombre de las columnas de las tablas de objeto de datos.</span><span class="sxs-lookup"><span data-stu-id="9678b-207">On Android and the .NET managed client, you should write custom SQL to rename the columns for your data object tables.</span></span>

<span data-ttu-id="9678b-208">En iOS, debe cambiar el esquema de datos principal de las entidades de datos para que coincida con el siguiente.</span><span class="sxs-lookup"><span data-stu-id="9678b-208">On iOS, you should change your Core Data schema for your data entities to match the following.</span></span> <span data-ttu-id="9678b-209">Tenga en cuenta que las propiedades `createdAt`, `updatedAt` y `version` ya no tienen un prefijo `ms_`:</span><span class="sxs-lookup"><span data-stu-id="9678b-209">Note that the properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="9678b-210">Atributo</span><span class="sxs-lookup"><span data-stu-id="9678b-210">Attribute</span></span> | <span data-ttu-id="9678b-211">Escriba</span><span class="sxs-lookup"><span data-stu-id="9678b-211">Type</span></span> | <span data-ttu-id="9678b-212">Nota:</span><span class="sxs-lookup"><span data-stu-id="9678b-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9678b-213">id</span><span class="sxs-lookup"><span data-stu-id="9678b-213">id</span></span> |<span data-ttu-id="9678b-214">Cadena, marcado obligatorio</span><span class="sxs-lookup"><span data-stu-id="9678b-214">String, marked required</span></span> |<span data-ttu-id="9678b-215">primary key in remote store</span><span class="sxs-lookup"><span data-stu-id="9678b-215">primary key in remote store</span></span> |
| <span data-ttu-id="9678b-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="9678b-216">createdAt</span></span> |<span data-ttu-id="9678b-217">Date</span><span class="sxs-lookup"><span data-stu-id="9678b-217">Date</span></span> |<span data-ttu-id="9678b-218">(opcional) se asigna a la propiedad del sistema createdAt</span><span class="sxs-lookup"><span data-stu-id="9678b-218">(optional) maps to createdAt system property</span></span> |
| <span data-ttu-id="9678b-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="9678b-219">updatedAt</span></span> |<span data-ttu-id="9678b-220">Date</span><span class="sxs-lookup"><span data-stu-id="9678b-220">Date</span></span> |<span data-ttu-id="9678b-221">(opcional) se asigna a la propiedad del sistema updatedAt</span><span class="sxs-lookup"><span data-stu-id="9678b-221">(optional) maps to updatedAt system property</span></span> |
| <span data-ttu-id="9678b-222">versión</span><span class="sxs-lookup"><span data-stu-id="9678b-222">version</span></span> |<span data-ttu-id="9678b-223">String</span><span class="sxs-lookup"><span data-stu-id="9678b-223">String</span></span> |<span data-ttu-id="9678b-224">(opcional) se usa para detectar conflictos, se asigna a la versión</span><span class="sxs-lookup"><span data-stu-id="9678b-224">(optional) used to detect conflicts, maps to version</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="9678b-225">Consulta de propiedades del sistema</span><span class="sxs-lookup"><span data-stu-id="9678b-225">Querying system properties</span></span>
<span data-ttu-id="9678b-226">En Servicios móviles de Azure, las propiedades del sistema no se envían de forma predeterminada, sino únicamente cuando se solicitan mediante la cadena de consulta `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="9678b-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using the query string `__systemProperties`.</span></span> <span data-ttu-id="9678b-227">En cambio, en el sistema de Aplicaciones móviles de Azure están **siempre activadas** dado que forman parte del modelo de objetos del SDK de servidor.</span><span class="sxs-lookup"><span data-stu-id="9678b-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of the server SDK object model.</span></span>

<span data-ttu-id="9678b-228">Este cambio afecta principalmente a las implementaciones personalizadas de los administradores de dominio, como las extensiones de `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="9678b-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="9678b-229">En Servicios móviles, si un cliente no solicita nunca ninguna propiedad del sistema, es posible utilizar una `MappedEntityDomainManager` que realmente no asigna todas las propiedades.</span><span class="sxs-lookup"><span data-stu-id="9678b-229">In Mobile Services, if a client never requests any system properties, it is possible to use a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="9678b-230">Pero, en Aplicaciones móviles de Azure, estas propiedades sin asignar producirán un error en las consultas GET.</span><span class="sxs-lookup"><span data-stu-id="9678b-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="9678b-231">La manera más fácil de resolver el problema consiste en modificar los DTO para que se hereden de `ITableData` y no de `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="9678b-231">The easiest way to resolve the issue is to modify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="9678b-232">Seguidamente, agregue el atributo `[NotMapped]` a los campos que se deben omitir.</span><span class="sxs-lookup"><span data-stu-id="9678b-232">Then, add the `[NotMapped]` attribute to the fields that should be omitted.</span></span>

<span data-ttu-id="9678b-233">Por ejemplo, el código siguiente define `TodoItem` sin propiedades del sistema:</span><span class="sxs-lookup"><span data-stu-id="9678b-233">For example, the following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="9678b-234">Nota: En caso de errores en `NotMapped`, agregue una referencia al ensamblado `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="9678b-234">Note: if you get errors on `NotMapped`, add a reference to the assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="9678b-235">CORS</span><span class="sxs-lookup"><span data-stu-id="9678b-235">CORS</span></span>
<span data-ttu-id="9678b-236">Servicios móviles incluye cierta compatibilidad con CORS ajustando la solución ASP.NET CORS.</span><span class="sxs-lookup"><span data-stu-id="9678b-236">Mobile Services included some support for CORS by wrapping the ASP.NET CORS solution.</span></span> <span data-ttu-id="9678b-237">Se ha quitado esta capa de ajuste para dar al desarrollador más control, a fin de que pueda aprovechar directamente la [compatibilidad con ASP.NET CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="9678b-237">This wrapping layer has been removed to give the developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="9678b-238">El principal motivo de preocupación si se usa CORS es que deben permitirse los encabezados `eTag` y `Location` para que los SDK de cliente funcionen correctamente.</span><span class="sxs-lookup"><span data-stu-id="9678b-238">The main areas of concern if using CORS are that the `eTag` and `Location` headers must be allowed in order for the client SDKs to work properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="9678b-239">Notificaciones de inserción</span><span class="sxs-lookup"><span data-stu-id="9678b-239">Push Notifications</span></span>
<span data-ttu-id="9678b-240">Para la inserción, el elemento principal que puede faltar desde el SDK de servidor es la clase PushRegistrationHandler.</span><span class="sxs-lookup"><span data-stu-id="9678b-240">For push, the main item that you may find missing from the Server SDK is the PushRegistrationHandler class.</span></span> <span data-ttu-id="9678b-241">Los registros se controlan de forma ligeramente diferente en las aplicaciones móviles y los registros sin etiqueta están habilitados de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="9678b-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="9678b-242">Se puede lograr la administración de etiquetas mediante API personalizadas.</span><span class="sxs-lookup"><span data-stu-id="9678b-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="9678b-243">Vea la instrucciones de [registro de etiquetas](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) para más información.</span><span class="sxs-lookup"><span data-stu-id="9678b-243">Please see the [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="9678b-244">Trabajos programados</span><span class="sxs-lookup"><span data-stu-id="9678b-244">Scheduled Jobs</span></span>
<span data-ttu-id="9678b-245">Los trabajos programados no están integrados en las aplicaciones móviles, por lo que tendrá que actualizar individualmente los trabajos existentes que tenga en el back-end de .NET.</span><span class="sxs-lookup"><span data-stu-id="9678b-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need to be upgraded individually.</span></span> <span data-ttu-id="9678b-246">Una opción es crear un [trabajo web] programado en el sitio del código de aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="9678b-246">One option is to create a scheduled [Web Job] on the Mobile App code site.</span></span> <span data-ttu-id="9678b-247">También puede configurar un controlador que contiene el código de trabajo y configurar el [Programador de Azure] para acertar ese extremo en la programación prevista.</span><span class="sxs-lookup"><span data-stu-id="9678b-247">You could also set up a controller that holds your job code and configure the [Azure Scheduler] to hit that endpoint on the expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="9678b-248">Cambios varios</span><span class="sxs-lookup"><span data-stu-id="9678b-248">Miscellaneous changes</span></span>
<span data-ttu-id="9678b-249">Todos los ApiControllers que use un cliente móvil deben tener ahora el atributo `[MobileAppController]` .</span><span class="sxs-lookup"><span data-stu-id="9678b-249">All ApiControllers which will be consumed by a mobile client must now have the `[MobileAppController]` attribute.</span></span> <span data-ttu-id="9678b-250">Este ya no se incluye de forma predeterminada para que otros ApiControllers no se vean afectados por los formateadores de móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-250">This is no longer included by default so that other ApiControllers to go unaffected by the mobile formatters.</span></span>

<span data-ttu-id="9678b-251">El objeto `ApiServices` ya no forma parte del SDK.</span><span class="sxs-lookup"><span data-stu-id="9678b-251">The `ApiServices` object is no longer part of the SDK.</span></span> <span data-ttu-id="9678b-252">Para obtener acceso a la configuración de la aplicación móvil, puede usar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="9678b-252">To access Mobile App settings, you can use the following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="9678b-253">De forma similar, el registro ahora se realiza mediante la escritura de seguimiento estándar de ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="9678b-253">Similarly, logging is now accomplished using the standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="9678b-254"><a name="authentication"></a>Consideraciones de autenticación</span><span class="sxs-lookup"><span data-stu-id="9678b-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="9678b-255">Ahora, los componentes de autenticación de Servicios móviles se han movido a la característica Autenticación/autorización de Servicio de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="9678b-255">The authentication components of Mobile Services have now been moved into the App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="9678b-256">Para aprender a habilitar esta característica para el sitio, lea el tema [Incorporación de autenticación a una aplicación móvil](app-service-mobile-ios-get-started-users.md) .</span><span class="sxs-lookup"><span data-stu-id="9678b-256">You can learn about enabling this for your site by reading the [Add authentication to your mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="9678b-257">Con algunos proveedores, como AAD, Facebook y Google, podrá aprovechar el registro existente de la aplicación de copia.</span><span class="sxs-lookup"><span data-stu-id="9678b-257">For some providers, such as AAD, Facebook, and Google, you should be able to leverage the existing registration from your copy application.</span></span> <span data-ttu-id="9678b-258">Basta con ir al portal del proveedor de identidades y agregar una nueva dirección URL de redirección al registro.</span><span class="sxs-lookup"><span data-stu-id="9678b-258">You simply need to navigate to the identity provider's portal and add a new redirect URL to the registration.</span></span> <span data-ttu-id="9678b-259">Seguidamente, configure Autenticación/autorización de Servicio de aplicaciones con el identificador y el secreto del cliente.</span><span class="sxs-lookup"><span data-stu-id="9678b-259">Then configure App Service Authentication/Authorization with the client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="9678b-260">Autorización de acción de controlador</span><span class="sxs-lookup"><span data-stu-id="9678b-260">Controller action authorization</span></span>
<span data-ttu-id="9678b-261">Todas las instancias del atributo `[AuthorizeLevel(AuthorizationLevel.User)]` ahora deben cambiarse para usar el atributo `[Authorize]` de ASP.NET estándar.</span><span class="sxs-lookup"><span data-stu-id="9678b-261">Any instances of the `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed to use the standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="9678b-262">Además, los controladores son ahora de tipo anónimo de forma predeterminada, al igual que en otras aplicaciones de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9678b-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="9678b-263">Si usaba una de las demás opciones de AuthorizeLevel, como administrador o aplicación, tenga en cuenta que estas han desaparecido.</span><span class="sxs-lookup"><span data-stu-id="9678b-263">If you were using one of the other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="9678b-264">En su lugar, puede configurar AuthorizationFilters para secretos compartidos o configurar una entidad de servicio de AAD para habilitar llamadas entre servicios de forma segura.</span><span class="sxs-lookup"><span data-stu-id="9678b-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal to enable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="9678b-265">Información adicional del usuario</span><span class="sxs-lookup"><span data-stu-id="9678b-265">Getting additional user information</span></span>
<span data-ttu-id="9678b-266">Puede obtener información adicional del usuario, como tokens de acceso a través del método `GetAppServiceIdentityAsync()` :</span><span class="sxs-lookup"><span data-stu-id="9678b-266">You can get additional user information, including access tokens through the `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="9678b-267">Además, si la aplicación tiene dependencias de identificadores de usuario, por ejemplo, su almacenamiento en una base de datos, es importante tener en cuenta que los identificadores de usuario entre Servicios móviles y Aplicaciones móviles del Servicio de aplicaciones son diferentes.</span><span class="sxs-lookup"><span data-stu-id="9678b-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important to note that the user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="9678b-268">Aunque todavía puede obtener el identificador de usuario de Servicios móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-268">You can still get the Mobile Services User ID, though.</span></span> <span data-ttu-id="9678b-269">Todas las subclases ProviderCredentials tienen una propiedad UserId.</span><span class="sxs-lookup"><span data-stu-id="9678b-269">All of the ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="9678b-270">Por lo que si se continúa con el ejemplo anterior:</span><span class="sxs-lookup"><span data-stu-id="9678b-270">So continuing from the example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="9678b-271">Si la aplicación sí adopta las dependencias de los identificadores de usuario, es importante aprovechar el mismo registro con un proveedor de identidades siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="9678b-271">If your app does take any dependencies on user IDs, it is important that you leverage the same registration with an identity provider if possible.</span></span> <span data-ttu-id="9678b-272">Los identificadores de usuario normalmente tienen como ámbito el registro de la aplicación que se utilizó, por lo que introducir un nuevo registro podría crear problemas con la correspondencia entre usuarios y sus datos.</span><span class="sxs-lookup"><span data-stu-id="9678b-272">User IDs are typically scoped to the application registration that was used, so introducing a new registration could create problems with matching users to their data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="9678b-273">Autenticación personalizada</span><span class="sxs-lookup"><span data-stu-id="9678b-273">Custom authentication</span></span>
<span data-ttu-id="9678b-274">Si la aplicación usa una solución de autenticación personalizada, conviene asegurarse de que el sitio actualizado tiene acceso al sistema.</span><span class="sxs-lookup"><span data-stu-id="9678b-274">If your app is using a custom authentication solution, you will want to make sure that the upgraded site has access to the system.</span></span> <span data-ttu-id="9678b-275">Para integrar la solución, siga las nuevas instrucciones de autenticación personalizada del tema [Información general del SDK de .NET] .</span><span class="sxs-lookup"><span data-stu-id="9678b-275">Follow the new instructions for custom authentication in the [.NET server SDK overview] to integrate your solution.</span></span> <span data-ttu-id="9678b-276">Tenga en cuenta que los componentes de autenticación personalizada siguen en vista previa.</span><span class="sxs-lookup"><span data-stu-id="9678b-276">Please note that the custom authentication components are still in preview.</span></span>

## <span data-ttu-id="9678b-277"><a name="updating-clients"></a>Actualización de clientes</span><span class="sxs-lookup"><span data-stu-id="9678b-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="9678b-278">Cuando tenga un back-end de aplicación móvil operativo, podrá trabajar en una nueva versión de la aplicación cliente que lo usa.</span><span class="sxs-lookup"><span data-stu-id="9678b-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="9678b-279">Aplicaciones móviles incluye también una nueva versión de los SDK de cliente y, de forma similar a la actualización del servidor anterior, tendrá que quitar todas las referencias a los SDK de Servicios móviles antes de instalar las versiones de Aplicaciones móviles.</span><span class="sxs-lookup"><span data-stu-id="9678b-279">Mobile Apps also includes a new version of the client SDKs, and similar to the server upgrade above, you will need to remove all references to the Mobile Services SDKs before installing the Mobile Apps versions.</span></span>

<span data-ttu-id="9678b-280">Uno de los principales cambios entre las versiones es que los constructores ya no requieren una clave de aplicación.</span><span class="sxs-lookup"><span data-stu-id="9678b-280">One of the main changes between the versions is that the constructors no longer require an application key.</span></span> <span data-ttu-id="9678b-281">Ahora basta con pasar la dirección URL de la aplicación móvil.</span><span class="sxs-lookup"><span data-stu-id="9678b-281">You now simply pass in the URL of your Mobile App.</span></span> <span data-ttu-id="9678b-282">Por ejemplo, en los clientes .NET, el constructor `MobileServiceClient` es ahora:</span><span class="sxs-lookup"><span data-stu-id="9678b-282">For example, on the .NET clients, the `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of the Mobile App
        );

<span data-ttu-id="9678b-283">Encontrará información sobre cómo instalar los nuevos SDK y cómo usar la nueva estructura a través de los vínculos siguientes:</span><span class="sxs-lookup"><span data-stu-id="9678b-283">You can read about installing the new SDKs and using the new structure via the links below:</span></span>

* [<span data-ttu-id="9678b-284">iOS versión 3.0.0 o posterior</span><span class="sxs-lookup"><span data-stu-id="9678b-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="9678b-285">.NET (Windows/Xamarin) versión 2.0.0 o posterior</span><span class="sxs-lookup"><span data-stu-id="9678b-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="9678b-286">Si la aplicación hace uso de notificaciones de inserción, tome nota de las instrucciones de registro específicas para cada plataforma, ya que también ha habido algunos cambios al respecto.</span><span class="sxs-lookup"><span data-stu-id="9678b-286">If your application makes use of push notifications, make note of the specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="9678b-287">Cuando tenga la nueva versión de cliente lista, pruébela en el proyecto de servidor actualizado.</span><span class="sxs-lookup"><span data-stu-id="9678b-287">When you have the new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="9678b-288">Después de comprobar que funciona, puede publicar una nueva versión de la aplicación para clientes.</span><span class="sxs-lookup"><span data-stu-id="9678b-288">After validating that it works, you can release a new version of your application to customers.</span></span> <span data-ttu-id="9678b-289">Al final, cuando los clientes hayan tenido ocasión de recibir estas actualizaciones, puede eliminar la versión de Servicios móviles de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="9678b-289">Eventually, once your customers have had a chance to receive these updates, you can delete the Mobile Services version of your app.</span></span> <span data-ttu-id="9678b-290">Llegados a este punto, ha actualizado completamente a una aplicación móvil del Servicio de aplicaciones mediante el SDK de servidor de Aplicaciones móviles más reciente.</span><span class="sxs-lookup"><span data-stu-id="9678b-290">At this point, you have completely upgraded to an App Service Mobile App using the latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

<span data-ttu-id="9678b-291">[Azure Portal]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="9678b-291">[Azure portal]: https://portal.azure.com/</span></span>
<span data-ttu-id="9678b-292">[Portal de Azure clásico]: https://manage.windowsazure.com/</span><span class="sxs-lookup"><span data-stu-id="9678b-292">[Azure classic portal]: https://manage.windowsazure.com/</span></span>
<span data-ttu-id="9678b-293">[¿Qué es Aplicaciones móviles?]: app-service-mobile-value-prop.md</span><span class="sxs-lookup"><span data-stu-id="9678b-293">[What are Mobile Apps?]: app-service-mobile-value-prop.md</span></span>
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
<span data-ttu-id="9678b-294">[SDK de servidor de aplicaciones móviles]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span><span class="sxs-lookup"><span data-stu-id="9678b-294">[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span></span>
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications to your mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication to your mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
<span data-ttu-id="9678b-295">[Programador de Azure]: /en-us/documentation/services/scheduler/</span><span class="sxs-lookup"><span data-stu-id="9678b-295">[Azure Scheduler]: /en-us/documentation/services/scheduler/</span></span>
<span data-ttu-id="9678b-296">[trabajo web]: ../app-service-web/websites-webjobs-resources.md</span><span class="sxs-lookup"><span data-stu-id="9678b-296">[Web Job]: ../app-service-web/websites-webjobs-resources.md</span></span>
<span data-ttu-id="9678b-297">[Uso del SDK de servidor .NET]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="9678b-297">[How to use the .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
[Migrate from Mobile Services to an App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service to App Service]: app-service-mobile-migrating-from-mobile-services.md
<span data-ttu-id="9678b-298">[precios del Servicio de aplicaciones]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span><span class="sxs-lookup"><span data-stu-id="9678b-298">[App Service pricing]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span></span>
<span data-ttu-id="9678b-299">[Información general del SDK de .NET]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="9678b-299">[.NET server SDK overview]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>

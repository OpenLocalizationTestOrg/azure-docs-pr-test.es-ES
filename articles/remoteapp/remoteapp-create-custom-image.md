---
title: "Creación de una imagen de plantilla personalizada para Azure RemoteApp | Microsoft Docs"
description: "Aprenda a crear una imagen de plantilla personalizada para Azure RemoteApp. Puede usar esta plantilla con una colección híbrida o en la nube."
services: remoteapp
documentationcenter: 
author: msmbaldwin
manager: mbaldwin
editor: 
ms.assetid: b9ec5b51-f7cd-470b-8545-d0fd714c5982
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/26/2017
ms.author: mbaldwin
ms.openlocfilehash: f529a5526f266c7dbac3c719b244d05ab7705941
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-create-a-custom-template-image-for-azure-remoteapp"></a><span data-ttu-id="0a453-104">Creación de una imagen de plantilla personalizada para Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="0a453-104">How to create a custom template image for Azure RemoteApp</span></span>
> [!IMPORTANT]
> <span data-ttu-id="0a453-105">Azure RemoteApp dejará de estar disponible el 31 de agosto de 2017.</span><span class="sxs-lookup"><span data-stu-id="0a453-105">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="0a453-106">Para obtener más información, lea el [anuncio](https://go.microsoft.com/fwlink/?linkid=821148) .</span><span class="sxs-lookup"><span data-stu-id="0a453-106">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="0a453-107">RemoteApp de Azure usa una imagen de plantilla de Windows Server 2012 R2 para hospedar todos los programas que desea compartir con sus usuarios.</span><span class="sxs-lookup"><span data-stu-id="0a453-107">Azure RemoteApp uses a Windows Server 2012 R2 template image to host all the programs that you want to share with your users.</span></span> <span data-ttu-id="0a453-108">Para crear una imagen de plantilla de RemoteApp, puede comenzar a usar una imagen existente o crear una nueva.</span><span class="sxs-lookup"><span data-stu-id="0a453-108">To create a custom RemoteApp template image, you can start with an existing image or create a new one.</span></span> 

> [!TIP]
> <span data-ttu-id="0a453-109">¿Sabía que ahora puede crear una imagen a partir de una máquina virtual de Azure?</span><span class="sxs-lookup"><span data-stu-id="0a453-109">Did you know you can create an image from an Azure VM?</span></span> <span data-ttu-id="0a453-110">Verídico, y esto reduce la cantidad de tiempo que se tarda en importar la imagen.</span><span class="sxs-lookup"><span data-stu-id="0a453-110">True story, and it cuts down on the amount of time it takes to import the image.</span></span> <span data-ttu-id="0a453-111">Consulte los pasos [aquí](remoteapp-image-on-azurevm.md).</span><span class="sxs-lookup"><span data-stu-id="0a453-111">Check out the steps [here](remoteapp-image-on-azurevm.md).</span></span>
> 
> 

<span data-ttu-id="0a453-112">Los requisitos para la imagen que se pueden cargar para usarse con RemoteApp de Azure son:</span><span class="sxs-lookup"><span data-stu-id="0a453-112">The requirements for the image that can be uploaded for use with Azure RemoteApp are:</span></span>

* <span data-ttu-id="0a453-113">El tamaño de la imagen debe ser un múltiplo de MB.</span><span class="sxs-lookup"><span data-stu-id="0a453-113">The image size should be a multiple of MBs.</span></span> <span data-ttu-id="0a453-114">Si se intenta cargar una imagen que no es un múltiplo exacto, la carga no se realizará.</span><span class="sxs-lookup"><span data-stu-id="0a453-114">If you try to upload an image that is not an exact multiple, the upload will fail.</span></span>
* <span data-ttu-id="0a453-115">El tamaño de imagen debe ser de 127 GB o menos.</span><span class="sxs-lookup"><span data-stu-id="0a453-115">The image size must be 127 GB or smaller.</span></span>
* <span data-ttu-id="0a453-116">Debe estar en un archivo VHD (los archivos VHDX [unidades de disco duro virtuales de Hyper-V] no se admiten actualmente).</span><span class="sxs-lookup"><span data-stu-id="0a453-116">It must be on a VHD file (VHDX files [Hyper-V virtual hard drives] are not currently supported).</span></span>
* <span data-ttu-id="0a453-117">El disco duro virtual no debe ser una máquina virtual de generación 2.</span><span class="sxs-lookup"><span data-stu-id="0a453-117">The VHD must not be a generation 2 virtual machine.</span></span>
* <span data-ttu-id="0a453-118">El archivo VHD puede ser de tamaño fijo o expandirse dinámicamente.</span><span class="sxs-lookup"><span data-stu-id="0a453-118">The VHD can be either fixed-size or dynamically expanding.</span></span> <span data-ttu-id="0a453-119">Se recomienda un archivo VHD que se expanda dinámicamente porque tarda menos tiempo en cargarse en Azure que un archivo VHD de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="0a453-119">A dynamically expanding VHD is recommended because it takes less time to upload to Azure than a fixed-size VHD file.</span></span>
* <span data-ttu-id="0a453-120">El disco se debe inicializar usando el estilo de particiones Registro de arranque maestro (MBR, Master Boot Record).</span><span class="sxs-lookup"><span data-stu-id="0a453-120">The disk must be initialized using the Master Boot Record (MBR) partitioning style.</span></span> <span data-ttu-id="0a453-121">El estilo de particiones de tabla de particiones GUID (GPT) no se admite.</span><span class="sxs-lookup"><span data-stu-id="0a453-121">The GUID partition table (GPT) partition style is not supported.</span></span>
* <span data-ttu-id="0a453-122">El archivo VHD debe contener una sola instalación de Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-122">The VHD must contain a single installation of Windows Server 2012 R2.</span></span> <span data-ttu-id="0a453-123">Puede contener varios volúmenes, pero uno de ellos con una instalación de Windows.</span><span class="sxs-lookup"><span data-stu-id="0a453-123">It can contain multiple volumes, but only one that contains an installation of Windows.</span></span>
* <span data-ttu-id="0a453-124">El rol Host de sesión de Escritorio remoto (RDSH, Remote Desktop Session Host) y la característica Experiencia de escritorio deben estar instalados.</span><span class="sxs-lookup"><span data-stu-id="0a453-124">The Remote Desktop Session Host (RDSH) role and the Desktop Experience feature must be installed.</span></span>
* <span data-ttu-id="0a453-125">El rol Agente de conexión a Escritorio remoto *no* debe instalarse.</span><span class="sxs-lookup"><span data-stu-id="0a453-125">The Remote Desktop Connection Broker role must *not* be installed.</span></span>
* <span data-ttu-id="0a453-126">El Sistema de cifrado de archivos (EFS, Encrypting File System) debe estar instalado.</span><span class="sxs-lookup"><span data-stu-id="0a453-126">The Encrypting File System (EFS) must be disabled.</span></span>
* <span data-ttu-id="0a453-127">La imagen debe estar preparada con sysprep con los parámetros **/oobe /generalize /shutdown** (No USE el parámetro **/mode:vm**).</span><span class="sxs-lookup"><span data-stu-id="0a453-127">The image must be SYSPREPed using the parameters **/oobe /generalize /shutdown** (DO NOT use the **/mode:vm** parameter).</span></span>
* <span data-ttu-id="0a453-128">No se admite la carga de su VHD desde una cadena de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="0a453-128">Uploading your VHD from a snapshot chain is not supported.</span></span>

<span data-ttu-id="0a453-129">**Antes de empezar**</span><span class="sxs-lookup"><span data-stu-id="0a453-129">**Before you begin**</span></span>

<span data-ttu-id="0a453-130">Necesita llevar a cabo los pasos siguientes antes de crear el servicio:</span><span class="sxs-lookup"><span data-stu-id="0a453-130">You need to do the following before creating the service:</span></span>

* <span data-ttu-id="0a453-131">[Suscríbase](https://azure.microsoft.com/services/remoteapp/) a RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-131">[Sign up](https://azure.microsoft.com/services/remoteapp/) for RemoteApp.</span></span>
* <span data-ttu-id="0a453-132">Cree una cuenta de usuario en Active Directory para usar la cuenta de servicio RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-132">Create a user account in Active Directory to use as the RemoteApp service account.</span></span> <span data-ttu-id="0a453-133">Restrinja los permisos para esta cuenta de forma que solamente pueda unir máquinas al dominio.</span><span class="sxs-lookup"><span data-stu-id="0a453-133">Restrict the permissions for this account so that it can only join machines to the domain.</span></span> <span data-ttu-id="0a453-134">Consulte [Configuración de Azure Active Directory para RemoteApp](remoteapp-ad.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="0a453-134">See [Configure Azure Active Directory for RemoteApp](remoteapp-ad.md) for more information.</span></span>
* <span data-ttu-id="0a453-135">Recopile información sobre la red local: dirección IP de información y detalles de dispositivos VPN.</span><span class="sxs-lookup"><span data-stu-id="0a453-135">Gather information about your on-premises network: IP address information and VPN device details.</span></span>
* <span data-ttu-id="0a453-136">Instale el módulo de [Azure PowerShell](/powershell/azure/overview) .</span><span class="sxs-lookup"><span data-stu-id="0a453-136">Install the [Azure PowerShell](/powershell/azure/overview) module.</span></span>
* <span data-ttu-id="0a453-137">Recopile información sobre los usuarios a los que quiera conceder acceso.</span><span class="sxs-lookup"><span data-stu-id="0a453-137">Gather information about the users that you want to grant access to.</span></span> <span data-ttu-id="0a453-138">Esta información puede ser información de cuentas de Microsoft o información de cuentas de trabajo de Active Directory de usuarios.</span><span class="sxs-lookup"><span data-stu-id="0a453-138">This can be either Microsoft account information or Active Directory work account information for users.</span></span>

## <a name="create-a-template-image"></a><span data-ttu-id="0a453-139">Creación de una imagen de plantilla</span><span class="sxs-lookup"><span data-stu-id="0a453-139">Create a template image</span></span>
<span data-ttu-id="0a453-140">Estos son los pasos de alto nivel para crear una nueva imagen de plantilla desde el principio:</span><span class="sxs-lookup"><span data-stu-id="0a453-140">These are the high level steps to create a new template image from scratch:</span></span>

1. <span data-ttu-id="0a453-141">Busque un DVD o una imagen ISO de actualización de Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-141">Locate a Windows Server 2012 R2 Update DVD or ISO image.</span></span>
2. <span data-ttu-id="0a453-142">Cree un archivo VHD.</span><span class="sxs-lookup"><span data-stu-id="0a453-142">Create a VHD file.</span></span>
3. <span data-ttu-id="0a453-143">Instale Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-143">Install Windows Server 2012 R2.</span></span>
4. <span data-ttu-id="0a453-144">Instale el rol Host de sesión de Escritorio remoto (RDSH, Remote Desktop Session Host) y la característica Experiencia de escritorio.</span><span class="sxs-lookup"><span data-stu-id="0a453-144">Install the Remote Desktop Session Host (RDSH) role and the Desktop Experience feature.</span></span>
5. <span data-ttu-id="0a453-145">Instale las características adicionales que necesitan sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-145">Install additional features required by your applications.</span></span>
6. <span data-ttu-id="0a453-146">Instale y configure sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-146">Install and configure your applications.</span></span> <span data-ttu-id="0a453-147">Para que le resulte más fácil compartir aplicaciones, agregue las aplicaciones o los programas que quiera compartir al menú **Inicio** de la imagen, específicamente en **%systemdrive%\ProgramData\Microsoft\Windows\Menú Inicio\Programas.</span><span class="sxs-lookup"><span data-stu-id="0a453-147">To make sharing apps easier, add any apps or programs that you want to share to the **Start** menu of the image, specifically in **%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programs.</span></span>
7. <span data-ttu-id="0a453-148">Realice cualquier configuración adicional de Windows que requieran sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-148">Perform any additional Windows configurations required by your applications.</span></span>
8. <span data-ttu-id="0a453-149">Deshabilite el Sistema de cifrado de archivos (EFS).</span><span class="sxs-lookup"><span data-stu-id="0a453-149">Disable the Encrypting File System (EFS).</span></span>
9. <span data-ttu-id="0a453-150">**REQERIDO:** vaya a Windows Update e instale todas las actualizaciones importantes.</span><span class="sxs-lookup"><span data-stu-id="0a453-150">**REQUIRED:** Go to Windows Update and install all important updates.</span></span>
10. <span data-ttu-id="0a453-151">Aplique la herramienta SYSPREP a la imagen.</span><span class="sxs-lookup"><span data-stu-id="0a453-151">SYSPREP the image.</span></span>

<span data-ttu-id="0a453-152">A continuación se indican los pasos detallados para crear una nueva imagen:</span><span class="sxs-lookup"><span data-stu-id="0a453-152">The detailed steps for creating a new image are:</span></span>

1. <span data-ttu-id="0a453-153">Busque un DVD o una imagen ISO de actualización de Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-153">Locate a Windows Server 2012 R2 Update DVD or ISO image.</span></span>
2. <span data-ttu-id="0a453-154">Cree un archivo VHD usando Administración de discos.</span><span class="sxs-lookup"><span data-stu-id="0a453-154">Create a VHD file by using Disk Management.</span></span>
   
   1. <span data-ttu-id="0a453-155">Inicie Administración de discos (diskmgmt.msc).</span><span class="sxs-lookup"><span data-stu-id="0a453-155">Launch Disk Management (diskmgmt.msc).</span></span>
   2. <span data-ttu-id="0a453-156">Cree un archivo VHD que se expanda dinámicamente con un tamaño mínimo de 40 GB.</span><span class="sxs-lookup"><span data-stu-id="0a453-156">Create a dynamically expanding VHD of 40 GB or more in size.</span></span> <span data-ttu-id="0a453-157">(Calcule la cantidad de espacio necesario para Windows, sus aplicaciones y personalizaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-157">(Estimate the amount of space needed for Windows, your applications, and customizations.</span></span> <span data-ttu-id="0a453-158">Windows Server con el rol RDSH y la característica Experiencia de escritorio instalados requerirán 10 GB de espacio aproximadamente).</span><span class="sxs-lookup"><span data-stu-id="0a453-158">Windows Server with the RDSH role and Desktop Experience feature installed will require about 10 GB of space).</span></span>
      
      1. <span data-ttu-id="0a453-159">Haga clic en **Acción > Crear VHD**.</span><span class="sxs-lookup"><span data-stu-id="0a453-159">Click **Action > Create VHD**.</span></span>
      2. <span data-ttu-id="0a453-160">Especifique la ubicación, el tamaño y el formato VHD.</span><span class="sxs-lookup"><span data-stu-id="0a453-160">Specify the location, size, and VHD format.</span></span> <span data-ttu-id="0a453-161">Seleccione **Expansión dinámica** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0a453-161">Select **Dynamically expanding**, and then click **OK**.</span></span>
      
      <span data-ttu-id="0a453-162">Esto se ejecutará durante varios segundos.</span><span class="sxs-lookup"><span data-stu-id="0a453-162">This will run for several seconds.</span></span> <span data-ttu-id="0a453-163">Cuando la creación del archivo VHD se complete, debe ver un nuevo disco sin ninguna letra de unidad y en el estado "No inicializado" en la consola Administración de discos.</span><span class="sxs-lookup"><span data-stu-id="0a453-163">When the VHD creation is complete, you should see a new disk without any drive letter and in “Not initialized" state in the Disk Management console.</span></span>
      
      * <span data-ttu-id="0a453-164">Haga clic con el botón secundario en el disco (no en el espacio sin asignar) y haga clic en **Inicializar disco**.</span><span class="sxs-lookup"><span data-stu-id="0a453-164">Right-click the disk (not the unallocated space), and then click **Initialize Disk**.</span></span> <span data-ttu-id="0a453-165">Seleccione **MBR** (registro de arranque maestro) como estilo de partición y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0a453-165">Select **MBR** (Master Boot Record) as the partition style, and then click **OK**.</span></span>
      * <span data-ttu-id="0a453-166">Cree un nuevo volumen: haga clic con el botón secundario en el espacio sin asignar y, luego, haga clic en **Nuevo volumen simple**.</span><span class="sxs-lookup"><span data-stu-id="0a453-166">Create a new volume: right-click the unallocated space, and then click **New Simple Volume**.</span></span> <span data-ttu-id="0a453-167">Puede aceptar los valores predeterminados del asistente pero asegúrese de asignar una letra de unidad para evitar problemas potenciales cuando cargue la imagen de plantilla.</span><span class="sxs-lookup"><span data-stu-id="0a453-167">You can accept the defaults in the wizard, but make sure you assign a drive letter to avoid potential problems when you upload the template image.</span></span>
      * <span data-ttu-id="0a453-168">Haga clic con el botón secundario en el disco y después en **Ocultar VHD**.</span><span class="sxs-lookup"><span data-stu-id="0a453-168">Right-click the disk, and then click **Detach VHD**.</span></span>
3. <span data-ttu-id="0a453-169">Instale Windows Server 2012 R2:</span><span class="sxs-lookup"><span data-stu-id="0a453-169">Install Windows Server 2012 R2:</span></span>
   
   1. <span data-ttu-id="0a453-170">Cree una nueva máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0a453-170">Create a new virtual machine.</span></span> <span data-ttu-id="0a453-171">Use el Asistente para nueva máquina virtual de Administrador de Hyper-V o Cliente Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="0a453-171">Use the New Virtual Machine Wizard in Hyper-V Manager or Client Hyper-V.</span></span>
      1. <span data-ttu-id="0a453-172">En la página Especificar generación, elija **Generación 1**.</span><span class="sxs-lookup"><span data-stu-id="0a453-172">On the Specify Generation page, choose  **Generation 1**.</span></span>
      2. <span data-ttu-id="0a453-173">En la página Conectar disco duro virtual, seleccione **Usar un disco duro virtual existente**y busque el VHD que creó en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="0a453-173">On the Connect Virtual Hard Disk page, select **Use an existing virtual hard disk**, and browse to the VHD you created in the previous step.</span></span>
      3. <span data-ttu-id="0a453-174">En la página Opciones de instalación, seleccione **Instalar un sistema operativo desde un CD/DVD-ROM de arranque** y después seleccione la ubicación del disco de instalación de Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-174">On the Installation Options page, select **Install an operating system from a boot CD/DVD_ROM**, and then select the location of your Windows Server 2012 R2 installation media.</span></span>
      4. <span data-ttu-id="0a453-175">Elija otras opciones del asistente necesarias para instalar Windows y sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-175">Choose other options in the wizard necessary to install Windows and your applications.</span></span> <span data-ttu-id="0a453-176">Finalice el asistente.</span><span class="sxs-lookup"><span data-stu-id="0a453-176">Finish the wizard.</span></span>
   2. <span data-ttu-id="0a453-177">Después de finalizar el asistente, edite la configuración de la máquina virtual y realice cualquier cambio necesario para instalar Windows y sus programas —por ejemplo, el número de procesadores virtuales— y, por último, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0a453-177">After the wizard finishes, edit the settings of the virtual machine and make any other changes necessary to install Windows and your programs, such as the number of virtual processors, and then click **OK**.</span></span>
   3. <span data-ttu-id="0a453-178">Conéctese a la máquina virtual e instale Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="0a453-178">Connect to the virtual machine and install Windows Server 2012 R2.</span></span>
4. <span data-ttu-id="0a453-179">Instale el rol Host de sesión de Escritorio remoto (RDSH, Remote Desktop Session Host) y la característica Experiencia de escritorio:</span><span class="sxs-lookup"><span data-stu-id="0a453-179">Install the Remote Desktop Session Host (RDSH) role and the Desktop Experience feature:</span></span>
   1. <span data-ttu-id="0a453-180">Inicie Administrador de servidores.</span><span class="sxs-lookup"><span data-stu-id="0a453-180">Launch Server Manager.</span></span>
   2. <span data-ttu-id="0a453-181">Haga clic en **Agregar roles y características** en la pantalla de bienvenida o desde el menú **Administrar**.</span><span class="sxs-lookup"><span data-stu-id="0a453-181">Click **Add Roles and features** on the Welcome screen or from the **Manage** menu.</span></span>
   3. <span data-ttu-id="0a453-182">Haga clic en **Siguiente** en la página Antes de empezar.</span><span class="sxs-lookup"><span data-stu-id="0a453-182">Click **Next** on the Before You Begin page.</span></span>
   4. <span data-ttu-id="0a453-183">Seleccione **Instalación basada en características o en roles** y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-183">Select **Role-based or feature-based installation**, and then click **Next**.</span></span>
   5. <span data-ttu-id="0a453-184">Seleccione la máquina local en la lista y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-184">Select the local machine from the list, and then click **Next**.</span></span>
   6. <span data-ttu-id="0a453-185">Seleccione **Servicios de Escritorio remoto** y haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-185">Select **Remote Desktop Services**, and then click **Next**.</span></span>
   7. <span data-ttu-id="0a453-186">Expanda **Infraestructura e interfaces de usuario** y seleccione **Experiencia de escritorio**.</span><span class="sxs-lookup"><span data-stu-id="0a453-186">Expand **User Interfaces and Infrastructure** and select **Desktop Experience**.</span></span>
   8. <span data-ttu-id="0a453-187">Haga clic en **Agregar características** y después en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-187">Click **Add Features**, and then click **Next**.</span></span>
   9. <span data-ttu-id="0a453-188">En la página Servicios de Escritorio remoto, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-188">On the Remote Desktop Services page, click **Next**.</span></span>
   10. <span data-ttu-id="0a453-189">Haga clic en **Host de sesión de Escritorio remoto**.</span><span class="sxs-lookup"><span data-stu-id="0a453-189">Click **Remote Desktop Session Host**.</span></span>
   11. <span data-ttu-id="0a453-190">Haga clic en **Agregar características** y después en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="0a453-190">Click **Add Features**, and then click **Next**.</span></span>
   12. <span data-ttu-id="0a453-191">En la página Confirmar selecciones de instalación, seleccione **Reiniciar automáticamente el servidor de destino en caso necesario** y haga clic en **Sí** en la advertencia de reinicio.</span><span class="sxs-lookup"><span data-stu-id="0a453-191">On the Confirm installation selections page, select **Restart the destination server automatically if required**, and then click **Yes** on the restart warning.</span></span>
   13. <span data-ttu-id="0a453-192">Haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="0a453-192">Click **Install**.</span></span> <span data-ttu-id="0a453-193">El equipo se reiniciará.</span><span class="sxs-lookup"><span data-stu-id="0a453-193">The computer will restart.</span></span>
5. <span data-ttu-id="0a453-194">Instale las características adicionales que necesiten sus aplicaciones, como por ejemplo .NET Framework 3.5.</span><span class="sxs-lookup"><span data-stu-id="0a453-194">Install additional features required by your applications, such as the .NET Framework 3.5.</span></span> <span data-ttu-id="0a453-195">Para instalar las características, ejecute el Asistente para agregar roles y características.</span><span class="sxs-lookup"><span data-stu-id="0a453-195">To install the features, run the Add Roles and Features Wizard.</span></span>
6. <span data-ttu-id="0a453-196">Instale y configure los programas y aplicaciones que desee publicar a través de RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-196">Install and configure the programs and applications you want to publish through RemoteApp.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0a453-197">Instale el rol RDSH antes de instalar las aplicaciones para garantizar que se detecta cualquier problema con la compatibilidad de aplicaciones antes de que la imagen se cargue en RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-197">Install the RDSH role before installing applications to ensure that any issues with application compatibility are discovered before the image is uploaded to RemoteApp.</span></span>
> 
> <span data-ttu-id="0a453-198">Asegúrese de que aparece un acceso directo a la aplicación (archivo **.lnk**) en el menú **Inicio** para todos los usuarios (%systemdrive%\ProgramData\Microsoft\Windows\Menú Inicio\Programas).</span><span class="sxs-lookup"><span data-stu-id="0a453-198">Make sure a shortcut to your application (**.lnk** file) appears in the **Start** menu for all users (%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programs).</span></span> <span data-ttu-id="0a453-199">Asegúrese también de que el icono que ve en el menú **Inicio** es lo que quiere que vean los usuarios.</span><span class="sxs-lookup"><span data-stu-id="0a453-199">Also ensure that the icon you see in the **Start** menu is what you want users to see.</span></span> <span data-ttu-id="0a453-200">Si no es así, cámbielo.</span><span class="sxs-lookup"><span data-stu-id="0a453-200">If not, change it.</span></span> <span data-ttu-id="0a453-201">(No *tiene* que agregar la aplicación al menú Inicio, pero resulta mucho más fácil publicar la aplicación en RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-201">(You do not *have* to add the application to the Start menu, but it makes it much easier to publish the application in RemoteApp.</span></span> <span data-ttu-id="0a453-202">De lo contrario, debe proporcionar la ruta de instalación de la aplicación cuando publique la aplicación.)</span><span class="sxs-lookup"><span data-stu-id="0a453-202">Otherwise, you have to provide the installation path for the application when you publish the app.)</span></span>
> 
> 

1. <span data-ttu-id="0a453-203">Realice cualquier configuración adicional de Windows que requieran sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-203">Perform any additional Windows configurations required by your applications.</span></span>
2. <span data-ttu-id="0a453-204">Deshabilite el Sistema de cifrado de archivos (EFS).</span><span class="sxs-lookup"><span data-stu-id="0a453-204">Disable the Encrypting File System (EFS).</span></span> <span data-ttu-id="0a453-205">Ejecute el comando siguiente en una ventana de comandos con privilegios elevados:</span><span class="sxs-lookup"><span data-stu-id="0a453-205">Run the following command at an elevated command window:</span></span>
   
     <span data-ttu-id="0a453-206">Fsutil behavior set disableencryption 1</span><span class="sxs-lookup"><span data-stu-id="0a453-206">Fsutil behavior set disableencryption 1</span></span>
   
   <span data-ttu-id="0a453-207">Alternativamente, puede establecer o agregar el siguiente valor DWORD en el Registro:</span><span class="sxs-lookup"><span data-stu-id="0a453-207">Alternatively, you can set or add the following DWORD value in the registry:</span></span>
   
     <span data-ttu-id="0a453-208">HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisableEncryption = 1</span><span class="sxs-lookup"><span data-stu-id="0a453-208">HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisableEncryption = 1</span></span>
3. <span data-ttu-id="0a453-209">Si crea la imagen dentro de una máquina virtual de Azure, cambie el nombre del archivo **\%windir%\Panther\Unattend.xml**, ya que bloqueará el script de carga usado posteriormente desde el trabajo.</span><span class="sxs-lookup"><span data-stu-id="0a453-209">If you are building your image inside an Azure virtual machine, rename the **\%windir%\Panther\Unattend.xml** file, as this will block the upload script used later from working.</span></span> <span data-ttu-id="0a453-210">Cambie el nombre de este archivo por Unattend.old; de este modo, seguirá teniendo el archivo en caso de que necesite revertir la implementación.</span><span class="sxs-lookup"><span data-stu-id="0a453-210">Change the name of this file to Unattend.old so that you will still have the file in case you need to revert your deployment.</span></span>
4. <span data-ttu-id="0a453-211">vaya a Windows Update e instale todas las actualizaciones importantes.</span><span class="sxs-lookup"><span data-stu-id="0a453-211">Go to Windows Update and install all important updates.</span></span> <span data-ttu-id="0a453-212">Puede que tenga que ejecutar varias veces Windows Update para obtener todas las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="0a453-212">You might need to run Windows Update multiple times to get all updates.</span></span> <span data-ttu-id="0a453-213">(A veces se instala una actualización, y esa misma actualización requiere una actualización).</span><span class="sxs-lookup"><span data-stu-id="0a453-213">(Sometimes you install an update, and that update itself requires an update.)</span></span>
5. <span data-ttu-id="0a453-214">Aplique la herramienta SYSPREP a la imagen.</span><span class="sxs-lookup"><span data-stu-id="0a453-214">SYSPREP the image.</span></span> <span data-ttu-id="0a453-215">En un símbolo del sistema con privilegios elevados, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="0a453-215">At an elevated command prompt, run the following command:</span></span>
   
   <span data-ttu-id="0a453-216">**C:\Windows\System32\sysprep\sysprep.exe /generalize /oobe /shutdown**</span><span class="sxs-lookup"><span data-stu-id="0a453-216">**C:\Windows\System32\sysprep\sysprep.exe /generalize /oobe /shutdown**</span></span>
   
   <span data-ttu-id="0a453-217">**Nota:** no use el modificador **/mode:vm** del comando SYSPREP aunque se trate de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0a453-217">**Note:** Do not use the **/mode:vm** switch of the SYSPREP command even though this is a virtual machine.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0a453-218">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0a453-218">Next steps</span></span>
<span data-ttu-id="0a453-219">Ahora que ya tiene su imagen de plantilla personalizada, es necesario que la cargue en su colección de RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="0a453-219">Now that you have your custom template image, you need to upload that image to your RemoteApp collection.</span></span> <span data-ttu-id="0a453-220">Para obtener información sobre cómo crear la colección, lea los artículos siguientes:</span><span class="sxs-lookup"><span data-stu-id="0a453-220">Use the information in the following articles to create your collection:</span></span>

* [<span data-ttu-id="0a453-221">Creación de una colección híbrida de RemoteApp</span><span class="sxs-lookup"><span data-stu-id="0a453-221">How to create a hybrid collection of RemoteApp</span></span>](remoteapp-create-hybrid-deployment.md)
* [<span data-ttu-id="0a453-222">Creación de una colección en la nube de RemoteApp</span><span class="sxs-lookup"><span data-stu-id="0a453-222">How to create a cloud collection of RemoteApp</span></span>](remoteapp-create-cloud-deployment.md)


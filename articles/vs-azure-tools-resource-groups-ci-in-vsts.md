---
title: "Integración continua en VS Team Services mediante proyectos del Grupo de recursos de Azure | Microsoft Docs"
description: "Describe cómo configurar la integración continua en Visual Studio Team Services mediante proyectos de implementación del Grupo de recursos de Azure en Visual Studio."
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: e7d98ca3fa281a136595c37ed9b7e71de0cf7bff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="eb63c-103">Integración continua en Visual Studio Team Services mediante proyectos de implementación del Grupo de recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="eb63c-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="eb63c-104">Para implementar una plantilla de Azure, se realizan tareas en diversas fases: compilación, prueba, copia en Azure (también denominada "almacenamiento provisional") y plantilla de implementación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-104">To deploy an Azure template, you perform tasks in various stages: Build, Test, Copy to Azure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="eb63c-105">Hay dos maneras distintas de implementar plantillas en Visual Studio Team Services (VS Team Services).</span><span class="sxs-lookup"><span data-stu-id="eb63c-105">There are two different ways to deploy templates to Visual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="eb63c-106">Ambos métodos proporcionan los mismos resultados, así que puede elegir el que mejor se adapte a su flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="eb63c-106">Both methods provide the same results, so choose the one that best fits your workflow.</span></span>

1. <span data-ttu-id="eb63c-107">Agregue un paso único a la definición de compilación que ejecuta el script de PowerShell incluido en el proyecto de implementación del Grupo de recursos de Azure (Deploy-AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="eb63c-107">Add a single step to your build definition that runs the PowerShell script that’s included in the Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="eb63c-108">El script copia los artefactos y, a continuación, implementa la plantilla.</span><span class="sxs-lookup"><span data-stu-id="eb63c-108">The script copies artifacts and then deploys the template.</span></span>
2. <span data-ttu-id="eb63c-109">Agregue varios pasos de compilación de VS Team Services, cada uno de los cuales realiza una tarea de fase.</span><span class="sxs-lookup"><span data-stu-id="eb63c-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="eb63c-110">En este artículo se muestran ambas opciones.</span><span class="sxs-lookup"><span data-stu-id="eb63c-110">This article demonstrates both options.</span></span> <span data-ttu-id="eb63c-111">La primera opción tiene la ventaja de usar el mismo script que usan los desarrolladores en Visual Studio y proporcionar coherencia en todo el ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="eb63c-111">The first option has the advantage of using the same script used by developers in Visual Studio and providing consistency throughout the lifecycle.</span></span> <span data-ttu-id="eb63c-112">La segunda opción ofrece una alternativa conveniente al script integrado.</span><span class="sxs-lookup"><span data-stu-id="eb63c-112">The second option offers a convenient alternative to the built-in script.</span></span> <span data-ttu-id="eb63c-113">Ambos procedimientos suponen que ya tiene un proyecto de implementación de Visual Studio activado en VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="eb63c-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-to-azure"></a><span data-ttu-id="eb63c-114">Copia de artefactos en Azure</span><span class="sxs-lookup"><span data-stu-id="eb63c-114">Copy artifacts to Azure</span></span>
<span data-ttu-id="eb63c-115">Independientemente del escenario, si dispone de los artefactos necesarios para la implementación de plantillas, debe dar a Azure Resource Manager acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="eb63c-115">Regardless of the scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access to them.</span></span> <span data-ttu-id="eb63c-116">Estos artefactos pueden incluir archivos como:</span><span class="sxs-lookup"><span data-stu-id="eb63c-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="eb63c-117">Plantillas anidadas</span><span class="sxs-lookup"><span data-stu-id="eb63c-117">Nested templates</span></span>
* <span data-ttu-id="eb63c-118">Scripts de configuración y de DSC</span><span class="sxs-lookup"><span data-stu-id="eb63c-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="eb63c-119">Archivos binarios de aplicación</span><span class="sxs-lookup"><span data-stu-id="eb63c-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="eb63c-120">Plantillas anidadas y scripts de configuración</span><span class="sxs-lookup"><span data-stu-id="eb63c-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="eb63c-121">Al utilizar las plantillas proporcionadas por Visual Studio (o compilar con fragmentos de código de Visual Studio), el script de PowerShell no solo almacena provisionalmente los artefactos, sino que parametriza también el URI de los recursos de las distintas implementaciones.</span><span class="sxs-lookup"><span data-stu-id="eb63c-121">When you use the templates provided by Visual Studio (or built with Visual Studio snippets), the PowerShell script not only stages the artifacts, it also parameterizes the URI for the resources for different deployments.</span></span> <span data-ttu-id="eb63c-122">El script copia los artefactos en un contenedor seguro de Azure, crea un token de SaS para dicho contenedor y, a continuación, pasa esta información a la implementación de plantilla.</span><span class="sxs-lookup"><span data-stu-id="eb63c-122">The script then copies the artifacts to a secure container in Azure, creates a SaS token for that container, and then passes that information on to the template deployment.</span></span> <span data-ttu-id="eb63c-123">Consulte [Crear una implementación de plantilla](https://msdn.microsoft.com/library/azure/dn790564.aspx) para obtener más información acerca de las plantillas anidadas.</span><span class="sxs-lookup"><span data-stu-id="eb63c-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) to learn more about nested templates.</span></span>  <span data-ttu-id="eb63c-124">Cuando se usan tareas en VS Team Services, debe seleccionar las tareas adecuadas para la implementación de plantilla y, si es necesario, pasar valores de parámetro desde el paso de almacenamiento provisional a la implementación de plantilla.</span><span class="sxs-lookup"><span data-stu-id="eb63c-124">When using tasks in VS Team Services, you must select the appropriate tasks for your template deployment and if necessary, pass parameter values from the staging step to the template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="eb63c-125">Configuración de la implementación continua en VS Team Services</span><span class="sxs-lookup"><span data-stu-id="eb63c-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="eb63c-126">Para llamar al script de PowerShell en VS Team Services, debe actualizar la definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-126">To call the PowerShell script in VS Team Services, you need to update your build definition.</span></span> <span data-ttu-id="eb63c-127">En resumen, los pasos son:</span><span class="sxs-lookup"><span data-stu-id="eb63c-127">In brief, the steps are:</span></span> 

1. <span data-ttu-id="eb63c-128">Edición de la definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-128">Edit the build definition.</span></span>
2. <span data-ttu-id="eb63c-129">Configuración de la autorización de Azure en VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="eb63c-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="eb63c-130">Incorporación de un paso de compilación de Azure PowerShell que hace referencia al script de PowerShell en el proyecto de implementación del Grupo de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="eb63c-130">Add an Azure PowerShell build step that references the PowerShell script in the Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="eb63c-131">Establecimiento del valor del parámetro *-ArtifactsStagingDirectory* para trabajar con un proyecto compilado en VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="eb63c-131">Set the value of the *-ArtifactsStagingDirectory* parameter to work with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="eb63c-132">Tutorial detallado para la opción 1</span><span class="sxs-lookup"><span data-stu-id="eb63c-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="eb63c-133">Los procedimientos siguientes le guiarán a través de los pasos necesarios para configurar la implementación continua en VS Team Services con una sola tarea que ejecuta el script de PowerShell en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="eb63c-133">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using a single task that runs the PowerShell script in your project.</span></span> 

1. <span data-ttu-id="eb63c-134">Edite la definición de compilación de VS Team Services y agregue un paso de compilación de Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="eb63c-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="eb63c-135">Elija la definición de compilación en la categoría **Definiciones de compilación** y, a continuación, elija el vínculo **Editar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-135">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Edición de la definición de compilación][0]
2. <span data-ttu-id="eb63c-137">Agregue un nuevo paso de compilación de **Azure PowerShell** a la definición de compilación y elija el botón **Agregar paso de compilación...**</span><span class="sxs-lookup"><span data-stu-id="eb63c-137">Add a new **Azure PowerShell** build step to the build definition and then choose the **Add build step…**</span></span> <span data-ttu-id="eb63c-138">.</span><span class="sxs-lookup"><span data-stu-id="eb63c-138">button.</span></span>
   
   ![Incorporación de un paso "Compilar"][1]
3. <span data-ttu-id="eb63c-140">Elija la categoría de **tarea Implementar**, seleccione la tarea **Azure PowerShell** y, a continuación, elija el botón **Agregar** correspondiente.</span><span class="sxs-lookup"><span data-stu-id="eb63c-140">Choose the **Deploy task** category, select the **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Adición de tareas][2]
4. <span data-ttu-id="eb63c-142">Elija el paso de compilación **Azure PowerShell** y rellene sus valores.</span><span class="sxs-lookup"><span data-stu-id="eb63c-142">Choose the **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="eb63c-143">Si ya tiene un punto de conexión de servicio de Azure agregado a VS Team Services, elija la suscripción en el cuadro de lista desplegable **Suscripción de Azure** y vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="eb63c-143">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box and then skip to the next section.</span></span> 
      
      <span data-ttu-id="eb63c-144">Si no tiene ningún punto de conexión de servicio de Azure en VS Team Services, debe agregar uno.</span><span class="sxs-lookup"><span data-stu-id="eb63c-144">If you don’t have an Azure service endpoint in VS Team Services, you need to add one.</span></span> <span data-ttu-id="eb63c-145">Este subapartado le guiará por el proceso.</span><span class="sxs-lookup"><span data-stu-id="eb63c-145">This subsection takes you through the process.</span></span> <span data-ttu-id="eb63c-146">Si su cuenta de Azure usa una cuenta de Microsoft (como Hotmail), debe seguir estos pasos para obtener una autenticación de entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="eb63c-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take the following steps to get a Service Principal authentication.</span></span>
   2. <span data-ttu-id="eb63c-147">Elija el vínculo **Administrar** situado junto al cuadro de lista desplegable **Suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-147">Choose the **Manage** link next to the **Azure Subscription** drop-down list box.</span></span>
      
      ![Administración de suscripciones de Azure][3]
   3. <span data-ttu-id="eb63c-149">Elija **Azure** en el cuadro de lista desplegable **Nuevo punto de conexión de servicio**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-149">Choose **Azure** in the **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nuevo punto de conexión de servicio][4]
   4. <span data-ttu-id="eb63c-151">En el cuadro de diálogo **Agregar suscripción de Azure**, seleccione la opción **Entidad de servicio**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-151">In the **Add Azure Subscription** dialog box, select the **Service Principal** option.</span></span>
      
      ![Opción de entidad de servicio][5]
   5. <span data-ttu-id="eb63c-153">Agregue la información de suscripción de Azure en el cuadro de diálogo **Agregar suscripción de Azure** .</span><span class="sxs-lookup"><span data-stu-id="eb63c-153">Add your Azure subscription information to the **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="eb63c-154">Debe proporcionar los siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="eb63c-154">You need to provide the following items:</span></span>
      
      * <span data-ttu-id="eb63c-155">Id. de suscripción</span><span class="sxs-lookup"><span data-stu-id="eb63c-155">Subscription Id</span></span>
      * <span data-ttu-id="eb63c-156">Subscription Name</span><span class="sxs-lookup"><span data-stu-id="eb63c-156">Subscription Name</span></span>
      * <span data-ttu-id="eb63c-157">Id. de entidad del servicio</span><span class="sxs-lookup"><span data-stu-id="eb63c-157">Service Principal Id</span></span>
      * <span data-ttu-id="eb63c-158">Clave de entidad del servicio </span><span class="sxs-lookup"><span data-stu-id="eb63c-158">Service Principal Key</span></span>
      * <span data-ttu-id="eb63c-159">Identificador de inquilino</span><span class="sxs-lookup"><span data-stu-id="eb63c-159">Tenant Id</span></span>
   6. <span data-ttu-id="eb63c-160">Agregue un nombre de su elección en el cuadro de nombre **Suscripción** .</span><span class="sxs-lookup"><span data-stu-id="eb63c-160">Add a name of your choice to the **Subscription** name box.</span></span> <span data-ttu-id="eb63c-161">Este valor aparecerá más adelante en la lista desplegable **Suscripción de Azure** en VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="eb63c-161">This value appears later in the **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="eb63c-162">Si no conoce el identificador de la suscripción de Azure, puede usar uno de los siguientes comandos para recuperarlo.</span><span class="sxs-lookup"><span data-stu-id="eb63c-162">If you don’t know your Azure subscription ID, you can use one of the following commands to retrieve it.</span></span>
      
      <span data-ttu-id="eb63c-163">Para scripts de PowerShell, use:</span><span class="sxs-lookup"><span data-stu-id="eb63c-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="eb63c-164">Para la CLI de Azure, utilice:</span><span class="sxs-lookup"><span data-stu-id="eb63c-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="eb63c-165">Para obtener un id. de entidad de servicio, una clave de entidad de servicio y un id. de inquilino, siga el procedimiento de [Creación de aplicación de Active Directory y entidad de servicio mediante el portal](resource-group-create-service-principal-portal.md) o [Autenticación de una entidad de servicio con Azure Resource Manager](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="eb63c-165">To get a Service Principal ID, Service Principal Key, and Tenant ID, follow the procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="eb63c-166">Agregue los valores del identificador de entidad de servicio, de la clave de entidad de servicio y del identificador de inquilino en el cuadro de diálogo **Agregar suscripción de Azure** y, después, elija el botón **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-166">Add the Service Principal ID, Service Principal Key, and Tenant ID values to the **Add Azure Subscription** dialog box and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="eb63c-167">Ahora dispone de una entidad de servicio válida que puede utilizar para ejecutar el script de Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="eb63c-167">You now have a valid Service Principal to use to run the Azure PowerShell script.</span></span>
5. <span data-ttu-id="eb63c-168">Edite la definición de compilación y elija el paso de compilación **Azure PowerShell** .</span><span class="sxs-lookup"><span data-stu-id="eb63c-168">Edit the build definition and choose the **Azure PowerShell** build step.</span></span> <span data-ttu-id="eb63c-169">Seleccione la suscripción en el cuadro de lista desplegable **Suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-169">Select the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="eb63c-170">(Si la suscripción no aparece, elija el botón **Actualizar** junto al vínculo **Administrar**).</span><span class="sxs-lookup"><span data-stu-id="eb63c-170">(If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.)</span></span> 
   
   ![Configure la tarea de compilación de Azure PowerShell][8]
6. <span data-ttu-id="eb63c-172">Proporcione una ruta de acceso al script de PowerShell Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="eb63c-172">Provide a path to the Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="eb63c-173">Para ello, elija el botón de puntos suspensivos (...) junto al cuadro **Ruta de acceso del script**, vaya al script de PowerShell Deploy-AzureResourceGroup.ps1 en la carpeta **Scripts** del proyecto, selecciónelo y elija el botón **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-173">To do this, choose the ellipsis (…) button next to the **Script Path** box, navigate to the Deploy-AzureResourceGroup.ps1 PowerShell script in the **Scripts** folder of your project, select it, and then choose the **OK** button.</span></span>    
   
   ![Selección de ruta de acceso a script][9]
7. <span data-ttu-id="eb63c-175">Después de seleccionar el script, actualice la ruta de acceso al script para que se ejecute desde Build.StagingDirectory (el mismo directorio en el que está establecido *ArtifactsLocation* ).</span><span class="sxs-lookup"><span data-stu-id="eb63c-175">After you select the script, update the path to the script so that it’s run from the Build.StagingDirectory (the same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="eb63c-176">Puede hacerlo agregando “$(Build.StagingDirectory)/” al principio de la ruta de acceso del script.</span><span class="sxs-lookup"><span data-stu-id="eb63c-176">You can do this by adding “$(Build.StagingDirectory)/” to the beginning of the script path.</span></span>
   
    ![Edición de ruta de acceso a script][10]
8. <span data-ttu-id="eb63c-178">En el cuadro **Argumentos del script** escriba los parámetros siguientes (en una sola línea).</span><span class="sxs-lookup"><span data-stu-id="eb63c-178">In the **Script Arguments** box, enter the following parameters (in a single line).</span></span> <span data-ttu-id="eb63c-179">Al ejecutar el script en Visual Studio, puede ver cómo usa VS los parámetros en la ventana **Resultados** .</span><span class="sxs-lookup"><span data-stu-id="eb63c-179">When you run the script in Visual Studio, you can see how VS uses the parameters in the **Output** window.</span></span> <span data-ttu-id="eb63c-180">Se puede utilizar como punto de partida para configurar los valores de parámetro en el paso de compilación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-180">You can use this as a starting point for setting the parameter values in your build step.</span></span>
   
   | <span data-ttu-id="eb63c-181">Parámetro</span><span class="sxs-lookup"><span data-stu-id="eb63c-181">Parameter</span></span> | <span data-ttu-id="eb63c-182">Descripción</span><span class="sxs-lookup"><span data-stu-id="eb63c-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="eb63c-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="eb63c-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="eb63c-184">El valor de la ubicación geográfica donde se encuentra el grupo de recursos, como **eastus** o **'Este de EE. UU.'**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-184">The geo-location value where the resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="eb63c-185">(Agregue comillas simples si hay un espacio en el nombre). Para más información, consulte [Regiones de Azure](https://azure.microsoft.com/en-us/regions/).</span><span class="sxs-lookup"><span data-stu-id="eb63c-185">(Add single quotes if there's a space in the name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="eb63c-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="eb63c-186">-ResourceGroupName</span></span> |<span data-ttu-id="eb63c-187">El nombre del grupo de recursos que se usa para esta implementación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-187">The name of the resource group used for this deployment.</span></span> |
   | <span data-ttu-id="eb63c-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="eb63c-188">-UploadArtifacts</span></span> |<span data-ttu-id="eb63c-189">Este parámetro, cuando está presente, especifica que los artefactos tienen que cargarse en Azure desde el sistema local.</span><span class="sxs-lookup"><span data-stu-id="eb63c-189">This parameter, when present, specifies that artifacts that need to be uploaded to Azure from the local system.</span></span> <span data-ttu-id="eb63c-190">Solo debe establecer este modificador si su implementación de plantilla requiere artefactos adicionales que desea almacenar provisionalmente mediante el script de PowerShell (como scripts de configuración o plantillas anidadas).</span><span class="sxs-lookup"><span data-stu-id="eb63c-190">You only need to set this switch if your template deployment requires extra artifacts that you want to stage using the PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="eb63c-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="eb63c-191">-StorageAccountName</span></span> |<span data-ttu-id="eb63c-192">El nombre de la cuenta de almacenamiento utilizada para almacenar provisionalmente los artefactos en esta implementación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-192">The name of the storage account used to stage artifacts for this deployment.</span></span> <span data-ttu-id="eb63c-193">Este parámetro solo se usa si almacena provisionalmente los artefactos para la implementación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="eb63c-194">Si se suministra este parámetro se crea una cuenta de almacenamiento nueva si el script no creó ninguna durante una implementación anterior.</span><span class="sxs-lookup"><span data-stu-id="eb63c-194">If this parameter is supplied, a new storage account is created if the script has not created one during a previous deployment.</span></span> <span data-ttu-id="eb63c-195">Si se especifica el parámetro, ya debe existir la cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="eb63c-195">If the parameter is specified, the storage account must already exist.</span></span> |
   | <span data-ttu-id="eb63c-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="eb63c-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="eb63c-197">El nombre del grupo de recursos asociado a la cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="eb63c-197">The name of the resource group associated with the storage account.</span></span> <span data-ttu-id="eb63c-198">Este parámetro solo se requiere si se proporciona un valor para el parámetro StorageAccountName.</span><span class="sxs-lookup"><span data-stu-id="eb63c-198">This parameter is required only if you provide a value for the StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="eb63c-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="eb63c-199">-TemplateFile</span></span> |<span data-ttu-id="eb63c-200">La ruta de acceso al archivo de plantilla en el proyecto de implementación del Grupo de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="eb63c-200">The path to the template file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="eb63c-201">Para mejorar la flexibilidad, utilice una ruta de acceso para este parámetro que sea relativa a la ubicación del script de PowerShell en lugar de una ruta de acceso absoluta.</span><span class="sxs-lookup"><span data-stu-id="eb63c-201">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="eb63c-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="eb63c-202">-TemplateParametersFile</span></span> |<span data-ttu-id="eb63c-203">La ruta de acceso al archivo de parámetros en el proyecto de implementación del Grupo de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="eb63c-203">The path to the parameters file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="eb63c-204">Para mejorar la flexibilidad, utilice una ruta de acceso para este parámetro que sea relativa a la ubicación del script de PowerShell en lugar de una ruta de acceso absoluta.</span><span class="sxs-lookup"><span data-stu-id="eb63c-204">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="eb63c-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="eb63c-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="eb63c-206">Este parámetro permite que el script de PowerShell conozca la carpeta desde la que se deben copiar los archivos binarios del proyecto.</span><span class="sxs-lookup"><span data-stu-id="eb63c-206">This parameter lets the PowerShell script know the folder from where the project’s binary files should be copied.</span></span> <span data-ttu-id="eb63c-207">Este valor invalida el valor predeterminado usado por el script de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="eb63c-207">This value overrides the default value used by the PowerShell script.</span></span> <span data-ttu-id="eb63c-208">Para el uso de VS Team Services, establezca el valor en: ArtifactStagingDirectory $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="eb63c-208">For VS Team Services use, set the value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="eb63c-209">A continuación se muestra un ejemplo de argumentos de script (línea dividida para mejorar la legibilidad):</span><span class="sxs-lookup"><span data-stu-id="eb63c-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="eb63c-210">Cuando haya terminado, el cuadro **Argumentos del script** debe ser similar a la lista siguiente:</span><span class="sxs-lookup"><span data-stu-id="eb63c-210">When you’re finished, the **Script Arguments** box should resemble the following list:</span></span>
   
   ![Argumentos de script][11]
9. <span data-ttu-id="eb63c-212">Después de agregar todos los elementos necesarios para el paso de compilación de Azure PowerShell, elija el botón de compilación **Cola** para generar el proyecto de compilación.</span><span class="sxs-lookup"><span data-stu-id="eb63c-212">After you’ve added all the required items to the Azure PowerShell build step, choose the **Queue** build button to build the project.</span></span> <span data-ttu-id="eb63c-213">La pantalla **Compilación** muestra el resultado del script de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="eb63c-213">The **Build** screen shows the output from the PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="eb63c-214">Tutorial detallado para la opción 2</span><span class="sxs-lookup"><span data-stu-id="eb63c-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="eb63c-215">Los procedimientos siguientes le guiarán por los pasos necesarios para configurar la implementación continua en VS Team Services con las tareas integradas.</span><span class="sxs-lookup"><span data-stu-id="eb63c-215">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using the built-in tasks.</span></span>

1. <span data-ttu-id="eb63c-216">Edite la definición de compilación de VS Team Services para agregar dos pasos de compilación nuevos.</span><span class="sxs-lookup"><span data-stu-id="eb63c-216">Edit your VS Team Services build definition to add two new build steps.</span></span> <span data-ttu-id="eb63c-217">Elija la definición de compilación en la categoría **Definiciones de compilación** y, a continuación, elija el vínculo **Editar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-217">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Edición de la definición de compilación][12]
2. <span data-ttu-id="eb63c-219">Agregue los pasos de compilación nuevos a la definición de compilación con el botón **Incorporación de un paso "Compilar"...**</span><span class="sxs-lookup"><span data-stu-id="eb63c-219">Add the new build steps to the build definition using the **Add build step…**</span></span> <span data-ttu-id="eb63c-220">.</span><span class="sxs-lookup"><span data-stu-id="eb63c-220">button.</span></span>
   
   ![Incorporación de un paso "Compilar"][13]
3. <span data-ttu-id="eb63c-222">Elija la categoría de tarea **Implementar**, seleccione la tarea **Copia de archivos de Azure** y, luego, haga clic en el botón **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-222">Choose the **Deploy** task category, select the **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Incorporación de la tarea Copia de archivos de Azure][14]
4. <span data-ttu-id="eb63c-224">Elija la tarea **Implementación de un grupo de recursos de Azure** y, luego, haga clic en el botón **Agregar** y, luego, elija **Cerrar** el **Catálogo de tareas**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-224">Choose the **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** the **Task Catalog**.</span></span>
   
   ![Incorporación de la tarea Implementación de un grupo de recursos de Azure][15]
5. <span data-ttu-id="eb63c-226">Elija la tarea **Copia de archivos de Azure** y rellene sus valores.</span><span class="sxs-lookup"><span data-stu-id="eb63c-226">Choose the **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="eb63c-227">Si ya tiene un punto de conexión de servicio de Azure agregado a VS Team Services, elija la suscripción en el cuadro de lista desplegable **Suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-227">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="eb63c-228">Si no tiene suscripción, vea la [opción 1](#detailed-walkthrough-for-option-1) para obtener las instrucciones sobre cómo configurar una en VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="eb63c-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="eb63c-229">Origen: escriba **$(Build.StagingDirectory)**</span><span class="sxs-lookup"><span data-stu-id="eb63c-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="eb63c-230">Tipo de conexión de Azure: seleccione **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="eb63c-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="eb63c-231">Suscripción de Azure RM: seleccione la suscripción correspondiente a la cuenta de almacenamiento que desea usar en el cuadro de lista desplegable **Suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-231">Azure RM Subscription - select the subscription for the storage account you want to use in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="eb63c-232">Si la suscripción no aparece, elija el botón **Actualizar** junto al vínculo **Administrar**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-232">If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.</span></span>
   * <span data-ttu-id="eb63c-233">Tipo de destino: seleccione **Blob de Azure**</span><span class="sxs-lookup"><span data-stu-id="eb63c-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="eb63c-234">Cuenta de almacenamiento de RM: seleccione la cuenta de almacenamiento que desea usar para almacenar artefactos provisionalmente</span><span class="sxs-lookup"><span data-stu-id="eb63c-234">RM Storage Account - select the storage account you would like to use for staging artifacts</span></span>
   * <span data-ttu-id="eb63c-235">Nombre de contenedor: escriba el nombre del contenedor que desea usar para el almacenamiento provisional; puede ser cualquier nombre de controlador válido, pero use uno dedicado a esta definición de compilación</span><span class="sxs-lookup"><span data-stu-id="eb63c-235">Container Name - enter the name of the container you would like to use for staging; it can be any valid container name, but use one dedicated to this build definition</span></span>
   
   <span data-ttu-id="eb63c-236">Para los valores de salida:</span><span class="sxs-lookup"><span data-stu-id="eb63c-236">For the output values:</span></span>
   
   * <span data-ttu-id="eb63c-237">URI de contenedor de almacenamiento: escriba **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="eb63c-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="eb63c-238">Token SAS de contenedor de almacenamiento: escriba **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="eb63c-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Configuración de la tarea Copia de archivos de Azure][16]
6. <span data-ttu-id="eb63c-240">Elija el paso de compilación **Implementación de un grupo de recursos de Azure** y rellene sus valores.</span><span class="sxs-lookup"><span data-stu-id="eb63c-240">Choose the **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="eb63c-241">Tipo de conexión de Azure: seleccione **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="eb63c-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="eb63c-242">Suscripción de Azure RM: seleccione la suscripción correspondiente a la implementación en el cuadro de lista desplegable **Suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="eb63c-242">Azure RM Subscription - select the subscription for deployment in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="eb63c-243">Habitualmente, será la misma suscripción que se usó en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="eb63c-243">This will usually be the same subscription used in the previous step</span></span>
   * <span data-ttu-id="eb63c-244">Acción: seleccione **Creación o actualización del grupo de recursos**</span><span class="sxs-lookup"><span data-stu-id="eb63c-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="eb63c-245">Grupo de recursos: seleccione un grupo de recursos o escriba el nombre de un grupo de recursos nuevo para la implementación</span><span class="sxs-lookup"><span data-stu-id="eb63c-245">Resource Group - select a resource group or enter the name of a new resource group for the deployment</span></span>
   * <span data-ttu-id="eb63c-246">Ubicación: seleccione la ubicación del grupo de recursos</span><span class="sxs-lookup"><span data-stu-id="eb63c-246">Location - select the location for the resource group</span></span>
   * <span data-ttu-id="eb63c-247">Plantilla: escriba la ruta de acceso y el nombre de la plantilla que se implementarán; para ello, anteponga **$(Build.StagingDirectory)**, por ejemplo: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="eb63c-247">Template - enter the path and name of the template to be deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="eb63c-248">Parámetros de plantilla: escriba la ruta de acceso y el nombre de los parámetros que se usarán; para ello, anteponga **$(Build.StagingDirectory)**, por ejemplo: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="eb63c-248">Template Parameters - enter the path and name of the parameters to be used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="eb63c-249">Reemplazar parámetros de plantilla: escriba o copie y pegue el siguiente código:</span><span class="sxs-lookup"><span data-stu-id="eb63c-249">Override Template Parameters - enter or copy and paste the following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Configuración de la tarea Implementación de un grupo de recursos de Azure][17]
7. <span data-ttu-id="eb63c-251">Una vez que agregue todos los elementos requeridos, guarde la definición de compilación y elija **Poner nueva compilación en cola** en la parte superior.</span><span class="sxs-lookup"><span data-stu-id="eb63c-251">After you’ve added all the required items, save the build definition and choose **Queue new build** at the top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="eb63c-252">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="eb63c-252">Next steps</span></span>
<span data-ttu-id="eb63c-253">Consulte [Información general sobre Azure Resource Manager](azure-resource-manager/resource-group-overview.md) para más información sobre Azure Resource Manager y los grupos de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="eb63c-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) to learn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png

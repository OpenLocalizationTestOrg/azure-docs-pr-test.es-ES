---
title: "Lección 4 del tutorial de Azure Analysis Services: creación de roles | Microsoft Docs"
description: "En este artículo se describe cómo crear relaciones en el proyecto del tutorial de Azure Analysis Services."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: d79af3915c718a79f60e5f589527eb4c2ae8b367
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="4ff15-103">Lección 4: Creación de relaciones</span><span class="sxs-lookup"><span data-stu-id="4ff15-103">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="4ff15-104">En esta lección, comprobará las relaciones que se crearon automáticamente cuando importó los datos y agregará nuevas relaciones entre tablas diferentes.</span><span class="sxs-lookup"><span data-stu-id="4ff15-104">In this lesson, you verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="4ff15-105">Una relación es una conexión entre dos tablas que establecen cómo se deben relacionar los datos de esas tablas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-105">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="4ff15-106">Por ejemplo, las tablas DimProduct y DimProductSubcategory tienen una relación basada en el hecho de que cada producto pertenece a una subcategoría.</span><span class="sxs-lookup"><span data-stu-id="4ff15-106">For example, the DimProduct table and the DimProductSubcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="4ff15-107">Para obtener más información, consulte el artículo de [relaciones](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="4ff15-107">To learn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="4ff15-108">Tiempo estimado para completar esta lección: **10 minutos**</span><span class="sxs-lookup"><span data-stu-id="4ff15-108">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="4ff15-109">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="4ff15-109">Prerequisites</span></span>  
<span data-ttu-id="4ff15-110">Este tema forma parte de un tutorial de modelado tabular, que se debe completar en orden.</span><span class="sxs-lookup"><span data-stu-id="4ff15-110">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="4ff15-111">Antes de realizar las tareas de esta lección, debe haber completado la lección anterior: [Lección 3: Marcado como tabla de fechas](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="4ff15-111">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="4ff15-112">Revisión de las relaciones existentes e incorporación de nuevas relaciones</span><span class="sxs-lookup"><span data-stu-id="4ff15-112">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="4ff15-113">Al importar los datos mediante Obtener datos, se obtendrán siete tablas de la base de datos AdventureWorksDW2014.</span><span class="sxs-lookup"><span data-stu-id="4ff15-113">When you imported data by using Get Data, you got seven tables from the AdventureWorksDW2014 database.</span></span> <span data-ttu-id="4ff15-114">Por lo general, al importar datos de un origen relacional, las relaciones existentes se importan automáticamente junto con los datos.</span><span class="sxs-lookup"><span data-stu-id="4ff15-114">Generally, when you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="4ff15-115">Sin embargo, antes de continuar creando el modelo, debe comprobar que las relaciones entre tablas se crearon correctamente.</span><span class="sxs-lookup"><span data-stu-id="4ff15-115">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="4ff15-116">En este tutorial, agregará tres relaciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-116">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="4ff15-117">Procedimiento para revisar las relaciones existentes</span><span class="sxs-lookup"><span data-stu-id="4ff15-117">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="4ff15-118">Haga clic en el menú **Modelo** > **Vista de modelo** > **Vista de diagrama**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-118">Click the **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="4ff15-119">El diseñador de modelos aparece ahora en la vista de diagrama, un formato gráfico que muestra todas las tablas que importó con líneas entre ellas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-119">The model designer now appears in Diagram View, a graphical format displaying all the tables you imported with lines between them.</span></span> <span data-ttu-id="4ff15-120">Las líneas entre las tablas indican las relaciones que se crearon automáticamente cuando importó los datos.</span><span class="sxs-lookup"><span data-stu-id="4ff15-120">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="4ff15-122">Incluya todas las tablas posibles utilizando los controles de minimapa de la esquina inferior derecha del diseñador de modelos.</span><span class="sxs-lookup"><span data-stu-id="4ff15-122">Include as many of the tables as possible by using minimap controls in the lower-right corner of the model designer.</span></span> <span data-ttu-id="4ff15-123">También puede hacer clic y arrastrar las tablas a ubicaciones diferentes, aunando las tablas o colocándolas en un orden concreto.</span><span class="sxs-lookup"><span data-stu-id="4ff15-123">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="4ff15-124">Mover tablas no afecta a las relaciones existentes entre las tablas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-124">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="4ff15-125">Para ver todas las columnas de una tabla determinada, haga clic y arrastre un borde de la tabla para expandir o reducir el tamaño.</span><span class="sxs-lookup"><span data-stu-id="4ff15-125">To view all the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="4ff15-126">Haga clic en la línea sólida entre las tablas **DimCustomer** y **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-126">Click the solid line between the **DimCustomer** table and the **DimGeography** table.</span></span> <span data-ttu-id="4ff15-127">La línea sólida entre estas dos tablas muestra que esta relación está activa, es decir, se utiliza de forma predeterminada al calcular las fórmulas DAX.</span><span class="sxs-lookup"><span data-stu-id="4ff15-127">The solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="4ff15-128">Observe la columna **GeographyKey** de la tabla **DimCustomer** y la columna **GeographyKey** de la tabla **DimGeography**, que ahora aparecen dentro de un cuadro de tabla.</span><span class="sxs-lookup"><span data-stu-id="4ff15-128">Notice the **GeographyKey** column in the **DimCustomer** table and the **GeographyKey** column in the **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="4ff15-129">Estas columnas se utilizan en la relación.</span><span class="sxs-lookup"><span data-stu-id="4ff15-129">These columns are used in the relationship.</span></span> <span data-ttu-id="4ff15-130">Las propiedades de la relación aparecen ahora también en la ventana **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-130">The relationship’s properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="4ff15-131">Además de utilizar el Diseñador de modelos en la vista de diagrama, también puede usar el cuadro de diálogo Administrar relaciones para mostrar las relaciones entre todas las tablas en un formato de tabla.</span><span class="sxs-lookup"><span data-stu-id="4ff15-131">In addition to using the model designer in diagram view, you can also use the Manage Relationships dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="4ff15-132">En el Explorador de modelos tabulares, haga clic con el botón derecho en **Relaciones** > **Administrar relaciones**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-132">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="4ff15-133">Compruebe que se crearon las siguientes relaciones cuando se importó cada una de las tablas de la base de datos AdventureWorksDW:</span><span class="sxs-lookup"><span data-stu-id="4ff15-133">Verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="4ff15-134">Active</span><span class="sxs-lookup"><span data-stu-id="4ff15-134">Active</span></span>|<span data-ttu-id="4ff15-135">Tabla</span><span class="sxs-lookup"><span data-stu-id="4ff15-135">Table</span></span>|<span data-ttu-id="4ff15-136">Tabla de búsquedas relacionadas</span><span class="sxs-lookup"><span data-stu-id="4ff15-136">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="4ff15-137">Sí</span><span class="sxs-lookup"><span data-stu-id="4ff15-137">Yes</span></span>|<span data-ttu-id="4ff15-138">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-138">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="4ff15-139">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-139">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="4ff15-140">Sí</span><span class="sxs-lookup"><span data-stu-id="4ff15-140">Yes</span></span>|<span data-ttu-id="4ff15-141">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-141">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="4ff15-142">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-142">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="4ff15-143">Sí</span><span class="sxs-lookup"><span data-stu-id="4ff15-143">Yes</span></span>|<span data-ttu-id="4ff15-144">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-144">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="4ff15-145">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-145">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="4ff15-146">Sí</span><span class="sxs-lookup"><span data-stu-id="4ff15-146">Yes</span></span>|<span data-ttu-id="4ff15-147">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-147">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="4ff15-148">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-148">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="4ff15-149">Sí</span><span class="sxs-lookup"><span data-stu-id="4ff15-149">Yes</span></span>|<span data-ttu-id="4ff15-150">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-150">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="4ff15-151">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="4ff15-151">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="4ff15-152">Si falta cualquiera de las relaciones, compruebe que el modelo incluye las siguientes tablas: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory y FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="4ff15-152">If any of the relationships are missing, verify that your model includes the following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="4ff15-153">Si las tablas de la misma conexión de origen de datos se importaron en momentos distintos, las relaciones entre esas tablas no se crearon y tendrá que crearlas manualmente.</span><span class="sxs-lookup"><span data-stu-id="4ff15-153">If tables from the same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="4ff15-154">Un examen más profundo</span><span class="sxs-lookup"><span data-stu-id="4ff15-154">Take a closer look</span></span>
<span data-ttu-id="4ff15-155">En la vista de diagrama, observe una flecha, un asterisco y un número en las líneas que muestran la relación entre las tablas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-155">In Diagram View, notice an arrow, an asterisk, and a number on the lines that show the relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="4ff15-157">La flecha muestra la dirección del filtro.</span><span class="sxs-lookup"><span data-stu-id="4ff15-157">The arrow shows the filter direction.</span></span> <span data-ttu-id="4ff15-158">El asterisco muestra que esta tabla es el lado Varios en la cardinalidad de la relación y el 1 indica que esta tabla es el lado Uno de la relación.</span><span class="sxs-lookup"><span data-stu-id="4ff15-158">The asterisk shows this table is the many side in the relationship's cardinality, and the one shows this table is the one side of the relationship.</span></span> <span data-ttu-id="4ff15-159">Si tiene que modificar una relación; por ejemplo, cambie la dirección del filtro de la relación y cardinalidad, y haga doble clic en la línea de relación para abrir el cuadro de diálogo Editar relación.</span><span class="sxs-lookup"><span data-stu-id="4ff15-159">If you need to edit a relationship; for example, change the relationship's filter direction or cardinality, double-click the relationship line to open the Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="4ff15-161">Estas características están diseñadas para el modelado de datos avanzados y están fuera del ámbito de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="4ff15-161">These features are meant for advanced data modeling and are outside the scope of this tutorial.</span></span> <span data-ttu-id="4ff15-162">Para obtener más información, consulte el artículo sobre los [filtros cruzados bidireccionales para modelos tabulares de Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="4ff15-162">To learn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="4ff15-163">En algunos casos, debe crear relaciones adicionales entre las tablas del modelo para admitir una determinada lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="4ff15-163">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="4ff15-164">Para este tutorial, debe crear tres relaciones adicionales entre las tablas FactInternetSales y DimDate.</span><span class="sxs-lookup"><span data-stu-id="4ff15-164">For this tutorial, you need to create three additional relationships between the FactInternetSales table and the DimDate table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="4ff15-165">Procedimiento para agregar nuevas relaciones entre tablas</span><span class="sxs-lookup"><span data-stu-id="4ff15-165">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="4ff15-166">En la tabla **FactInternetSales** del diseñador de modelos, haga clic en la columna **OrderDate** y mantenga presionado el botón; luego, arrastre el cursor hasta la columna **Date** de la tabla **DimDate**. Finalmente, suelte el botón.</span><span class="sxs-lookup"><span data-stu-id="4ff15-166">In the model designer, in the **FactInternetSales** table, click, and hold on the **OrderDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="4ff15-167">Aparece una línea sólida que indica que ha creado una relación activa entre la columna **OrderDate** de la tabla **Internet Sales** y la columna **Date** de la tabla **Date**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-167">A solid line appears showing you have created an active relationship between the **OrderDate** column in the **Internet Sales** table, and the **Date** column in the **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="4ff15-169">Al crear relaciones, se selecciona automáticamente la dirección del filtro y cardinalidad entre la tabla principal y la tabla de búsqueda relacionada.</span><span class="sxs-lookup"><span data-stu-id="4ff15-169">When creating relationships, the cardinality and filter direction between the primary table and the related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="4ff15-170">En la tabla **FactInternetSales**, haga clic en la columna **DueDate** y mantenga presionado el botón izquierdo del mouse; luego, arrastre el cursor hasta la columna **Date** de la tabla **DimDate**. Finalmente, suelte el botón.</span><span class="sxs-lookup"><span data-stu-id="4ff15-170">In the **FactInternetSales** table, click and hold on the **DueDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="4ff15-171">Aparece una línea punteada que indica que ha creado una relación inactiva entre la columna **DueDate** de la tabla **FactInternetSales** y la columna **Date** de la tabla **DimDate**.</span><span class="sxs-lookup"><span data-stu-id="4ff15-171">A dotted line appears showing you have created an inactive relationship between the **DueDate** column in the **FactInternetSales** table, and the **Date** column in the **DimDate** table.</span></span> <span data-ttu-id="4ff15-172">Puede tener varias relaciones entre tablas, pero solo una relación puede estar activa simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="4ff15-172">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="4ff15-173">Las relaciones inactivas pueden hacerse activas para realizar agregaciones especiales en expresiones de DAX personalizadas.</span><span class="sxs-lookup"><span data-stu-id="4ff15-173">Inactive relationships can be made active to perform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="4ff15-174">Finalmente, cree una relación más.</span><span class="sxs-lookup"><span data-stu-id="4ff15-174">Finally, create one more relationship.</span></span> <span data-ttu-id="4ff15-175">En la tabla **FactInternetSales**, haga clic en la columna **ShipDate** y mantenga presionado el botón; luego, arrastre el cursor hasta la columna **Date** de la tabla **DimDate**. Finalmente, suelte el botón.</span><span class="sxs-lookup"><span data-stu-id="4ff15-175">In the **FactInternetSales** table, click and hold on the **ShipDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="4ff15-177">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="4ff15-177">What's next?</span></span>
<span data-ttu-id="4ff15-178">[Lección 5: Creación de columnas calculadas](../tutorials/aas-lesson-5-create-calculated-columns.md)</span><span class="sxs-lookup"><span data-stu-id="4ff15-178">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  

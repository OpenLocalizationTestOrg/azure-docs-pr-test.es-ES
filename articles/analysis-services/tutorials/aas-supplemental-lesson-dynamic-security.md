---
<span data-ttu-id="dc968-101">título: aaa "lección complementaria tutorial de Analysis Services de Azure: seguridad dinámica | Descripción de Microsoft Docs": describe cómo toouse la seguridad dinámica utilizando fila filtra hello Azure tutorial de Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="dc968-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="dc968-102">servicios: documentationcenter de analysis services: '' autor: minewiskan manager: erikre editor: '' etiquetas: ''</span><span class="sxs-lookup"><span data-stu-id="dc968-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="dc968-103">MS.AssetId: ms.service: ms.devlang de analysis services: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 26/05/2017 ms.author: owend</span><span class="sxs-lookup"><span data-stu-id="dc968-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="dc968-104">Lección complementaria: Seguridad dinámica</span><span class="sxs-lookup"><span data-stu-id="dc968-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="dc968-105">En esta lección complementaria, creará un rol función que implementa la seguridad dinámica.</span><span class="sxs-lookup"><span data-stu-id="dc968-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="dc968-106">Seguridad dinámica proporciona seguridad de nivel de fila en función de Id. de inicio de sesión o nombre del usuario de hello del usuario de hello ha iniciado sesión actualmente.</span><span class="sxs-lookup"><span data-stu-id="dc968-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="dc968-107">tooimplement la seguridad dinámica, agregue un modelo de tooyour de tabla que contiene los nombres de usuario de Hola de los usuarios que pueden conectarse toohello modelo y examinar los datos y objetos del modelo.</span><span class="sxs-lookup"><span data-stu-id="dc968-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="dc968-108">modelo de Hola que se crea con este tutorial está en contexto de Hola de Adventure Works; Sin embargo, toocomplete esta lección, debe agregar una tabla que contiene los usuarios de su propio dominio.</span><span class="sxs-lookup"><span data-stu-id="dc968-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="dc968-109">No es necesario contraseñas Hola Hola nombres de usuario que se agregan.</span><span class="sxs-lookup"><span data-stu-id="dc968-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="dc968-110">toocreate una tabla de EmployeeSecurity, con una pequeña muestra de los usuarios de su propio dominio, se usan Hola pegar, pegar datos de empleados desde una hoja de cálculo de Excel.</span><span class="sxs-lookup"><span data-stu-id="dc968-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="dc968-111">En un escenario real, tabla de Hola que contiene los nombres de usuario normalmente sería una tabla de una base de datos real como origen de datos; Por ejemplo, una tabla DimEmployee real.</span><span class="sxs-lookup"><span data-stu-id="dc968-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="dc968-112">tooimplement la seguridad dinámica, se utilizan dos funciones DAX: [función USERNAME (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) y [función LOOKUPVALUE (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="dc968-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="dc968-113">Estas funciones, aplicadas en una fórmula de filtro de fila, se definen en un nuevo rol.</span><span class="sxs-lookup"><span data-stu-id="dc968-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="dc968-114">Al usar la función LOOKUPVALUE de hello, fórmula Hola especifica un valor de tabla de EmployeeSecurity Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="dc968-115">fórmula de Hello, a continuación, pasa el que la función de valor toohello USERNAME, que especifica el nombre de usuario de Hola de una sesión de usuario de Hola pertenece toothis rol.</span><span class="sxs-lookup"><span data-stu-id="dc968-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="dc968-116">Hola usuario puede examinar los datos especificados por los filtros de fila del rol de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="dc968-117">En este escenario, puede especificar que los empleados de ventas solo pueden examinar los datos de ventas de Internet de territorios de ventas de hello en el que son miembros.</span><span class="sxs-lookup"><span data-stu-id="dc968-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="dc968-118">Las tareas que son toothis único escenario de modelo tabular de Adventure Works, pero no se aplicarían necesariamente escenario real de tooa se identifican como tales.</span><span class="sxs-lookup"><span data-stu-id="dc968-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="dc968-119">Cada tarea incluye información adicional que describa el propósito de Hola de tarea hello.</span><span class="sxs-lookup"><span data-stu-id="dc968-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="dc968-120">Estimado toocomplete de tiempo en esta lección: **30 minutos**</span><span class="sxs-lookup"><span data-stu-id="dc968-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="dc968-121">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="dc968-121">Prerequisites</span></span>  
<span data-ttu-id="dc968-122">Este tema de la lección complementaria forma parte de un tutorial de modelado tabular, que debe completar en orden.</span><span class="sxs-lookup"><span data-stu-id="dc968-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="dc968-123">Antes de realizar tareas de hello en esta lección complementaria, deberá haber finalizado todas las lecciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="dc968-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="dc968-124">Agregar hello DimSalesTerritory tabla toohello proyecto de modelo Tabular de ventas de Internet de AW</span><span class="sxs-lookup"><span data-stu-id="dc968-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="dc968-125">tooimplement la seguridad dinámica para este escenario de Adventure Works, debe agregar dos modelos de tooyour tablas adicionales.</span><span class="sxs-lookup"><span data-stu-id="dc968-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="dc968-126">primera tabla de Hello agregará es DimSalesTerritory (como Sales Territory) de Hola misma base de datos AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="dc968-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="dc968-127">Adelante aplicar una tabla de SalesTerritory de toohello de filtros de fila que define datos determinado Hola Hola usuario que inició sesión puede examinar.</span><span class="sxs-lookup"><span data-stu-id="dc968-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="dc968-128">tabla de tooadd hello DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="dc968-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="dc968-129">En el Explorador de modelos tabulares, expanda **Orígenes de datos**, haga clic con el botón derecho en la conexión y, luego, haga clic en **Importar nuevas tablas**.</span><span class="sxs-lookup"><span data-stu-id="dc968-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="dc968-130">Si aparece el cuadro de diálogo de credenciales de suplantación de hello, escriba las credenciales de suplantación de Hola que usó en la lección 2: agregar datos.</span><span class="sxs-lookup"><span data-stu-id="dc968-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="dc968-131">En el navegador, seleccione hello **DimSalesTerritory** de tabla y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="dc968-132">En el Editor de consultas, haga clic en hello **DimSalesTerritory** de consulta y, a continuación, quitar **SalesTerritoryAlternateKey** columna.</span><span class="sxs-lookup"><span data-stu-id="dc968-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="dc968-133">Haga clic en **Import**.</span><span class="sxs-lookup"><span data-stu-id="dc968-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="dc968-134">nueva tabla de Hola se agrega el área de trabajo de toohello modelo.</span><span class="sxs-lookup"><span data-stu-id="dc968-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="dc968-135">Objetos y datos de tabla de origen DimSalesTerritory de hello, a continuación, se importan en el MT ventas AW.</span><span class="sxs-lookup"><span data-stu-id="dc968-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="dc968-136">Después de tabla Hola se ha importado correctamente, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="dc968-137">Incorporación de una tabla con datos de nombres de usuario</span><span class="sxs-lookup"><span data-stu-id="dc968-137">Add a table with user name data</span></span>  
<span data-ttu-id="dc968-138">tabla DimEmployee de Hello en la base de datos de ejemplo de Hola AdventureWorksDW contiene usuarios del dominio de AdventureWorks de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="dc968-139">Los nombres de usuario no existen en su propio entorno.</span><span class="sxs-lookup"><span data-stu-id="dc968-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="dc968-140">Debe crear una tabla en el modelo que contenga una pequeña muestra de usuarios reales de su organización (al menos tres).</span><span class="sxs-lookup"><span data-stu-id="dc968-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="dc968-141">A continuación, agregar estos usuarios como miembros toohello nuevo rol.</span><span class="sxs-lookup"><span data-stu-id="dc968-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="dc968-142">No necesita las contraseñas de Hola para nombres de usuario de ejemplo de Hola, pero necesita nombres de usuario de Windows reales de su propio dominio.</span><span class="sxs-lookup"><span data-stu-id="dc968-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="dc968-143">tooadd una tabla EmployeeSecurity</span><span class="sxs-lookup"><span data-stu-id="dc968-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="dc968-144">Abra Microsoft Excel para crear una hoja de cálculo.</span><span class="sxs-lookup"><span data-stu-id="dc968-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="dc968-145">Copie hello en la tabla, incluida la fila de encabezado de hello, siguiente y, a continuación, péguelo en la hoja de cálculo de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="dc968-146">Reemplace Hola nombre, apellido y dominio ombre de usuario con nombres de hello e identificadores de inicio de sesión de tres usuarios de su organización.</span><span class="sxs-lookup"><span data-stu-id="dc968-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="dc968-147">Colocar Hola mismo usuario en dos primeras filas de hello, EmployeeId 1, que muestra toomore a un territorio de ventas que pertenece este usuario.</span><span class="sxs-lookup"><span data-stu-id="dc968-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="dc968-148">Deje Hola campos EmployeeId y SalesTerritoryId tal como están.</span><span class="sxs-lookup"><span data-stu-id="dc968-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="dc968-149">Guardar la hoja de cálculo de hello como **SampleEmployee**.</span><span class="sxs-lookup"><span data-stu-id="dc968-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="dc968-150">En la hoja de cálculo de hello, seleccionar todas las celdas de hello con datos de empleados, incluidos los encabezados de hello, a continuación, haga clic en datos de hello seleccionado y, a continuación, haga clic en **copia**.</span><span class="sxs-lookup"><span data-stu-id="dc968-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="dc968-151">En SSDT, haga clic en hello **editar** menú y, a continuación, haga clic en **pegar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="dc968-152">Si está atenuado pegar, haga clic en cualquier columna de cualquier tabla en la ventana del Diseñador de modelos Hola e inténtelo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="dc968-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="dc968-153">Hola **vista previa de pegado** cuadro de diálogo **nombre de la tabla**, tipo **EmployeeSecurity**.</span><span class="sxs-lookup"><span data-stu-id="dc968-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="dc968-154">En **toobe datos pegar**, compruebe los datos de hello incluyen todos los datos de usuario de Hola y encabezados de hoja de cálculo de hello SampleEmployee.</span><span class="sxs-lookup"><span data-stu-id="dc968-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="dc968-155">Compruebe que la casilla **Usar primera fila como encabezados de columna** está activada y, luego, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="dc968-156">Se crea una nueva tabla denominada EmployeeSecurity con datos de empleado copiados desde la hoja de cálculo de hello SampleEmployee.</span><span class="sxs-lookup"><span data-stu-id="dc968-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="dc968-157">Creación de relaciones entre las tablas FactInternetSales, DimGeography y DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="dc968-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="dc968-158">tabla de FactInternetSales, DimGeography y DimSalesTerritory de Hello todos contiene una columna común, SalesTerritoryId.</span><span class="sxs-lookup"><span data-stu-id="dc968-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="dc968-159">columna de SalesTerritoryId Hello en la tabla DimSalesTerritory de hello contiene valores con un identificador distinto para cada territorio de ventas.</span><span class="sxs-lookup"><span data-stu-id="dc968-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="dc968-160">relaciones de toocreate entre hello FactInternetSales, DimGeography y tabla de hello DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="dc968-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="dc968-161">En la vista de diagrama de hello **DimGeography** de tabla, haga clic y mantenga en hello **SalesTerritoryId** columna y, a continuación, arrastre Hola cursor toohello **SalesTerritoryId** columna Hola **DimSalesTerritory** de tabla y, a continuación, la versión.</span><span class="sxs-lookup"><span data-stu-id="dc968-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="dc968-162">Hola **FactInternetSales** de tabla, haga clic y mantenga en hello **SalesTerritoryId** columna y, a continuación, arrastre Hola cursor toohello **SalesTerritoryId** columna Hola  **DimSalesTerritory** de tabla y, a continuación, la versión.</span><span class="sxs-lookup"><span data-stu-id="dc968-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="dc968-163">Hola aviso propiedad Active de esta relación es False, lo que significa que está inactivo.</span><span class="sxs-lookup"><span data-stu-id="dc968-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="dc968-164">tabla de Hello FactInternetSales ya tiene otra relación activa.</span><span class="sxs-lookup"><span data-stu-id="dc968-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="dc968-165">Ocultar hello EmployeeSecurity tabla desde las aplicaciones cliente</span><span class="sxs-lookup"><span data-stu-id="dc968-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="dc968-166">En esta tarea, Ocultar tabla EmployeeSecurity de hello, evitando que aparezca en la lista de campos de la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="dc968-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="dc968-167">Tenga en cuenta que ocultar una tabla no significa protegerla.</span><span class="sxs-lookup"><span data-stu-id="dc968-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="dc968-168">Los usuarios todavía pueden consultar datos de la tabla EmployeeSecurity, si saben cómo.</span><span class="sxs-lookup"><span data-stu-id="dc968-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="dc968-169">toosecure Hola EmployeeSecurity: datos de la tabla, impide que los usuarios tooquery capaz de cualquiera de sus datos, aplicar un filtro en una tarea posterior.</span><span class="sxs-lookup"><span data-stu-id="dc968-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="dc968-170">tabla de EmployeeSecurity toohide Hola desde aplicaciones cliente</span><span class="sxs-lookup"><span data-stu-id="dc968-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="dc968-171">En el Diseñador de modelos de hello, en la vista de diagrama, haga clic en hello **empleado** encabezado de tabla y, a continuación, haga clic en **ocultar en las herramientas de cliente de**.</span><span class="sxs-lookup"><span data-stu-id="dc968-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="dc968-172">Creación de un rol de usuario Empleados de ventas por territorio</span><span class="sxs-lookup"><span data-stu-id="dc968-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="dc968-173">En esta tarea, creará un rol de usuario.</span><span class="sxs-lookup"><span data-stu-id="dc968-173">In this task, you create a user role.</span></span> <span data-ttu-id="dc968-174">Este rol incluye un filtro de fila define qué filas de la tabla DimSalesTerritory de hello son toousers visible.</span><span class="sxs-lookup"><span data-stu-id="dc968-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="dc968-175">Hola, a continuación, aplicar filtro en la relación de uno a varios Hola dirección tooall otras tablas relacionada tooDimSalesTerritory.</span><span class="sxs-lookup"><span data-stu-id="dc968-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="dc968-176">También aplica un filtro que protege Hola toda EmployeeSecurity la tabla de consultas por cualquier usuario que sea miembro del rol de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="dc968-177">Hola empleados de ventas por el rol de territorio que creará en esta lección restringe los miembros toobrowse (o consultas) solo datos de ventas de hello toowhich de territorio de ventas al que pertenecen.</span><span class="sxs-lookup"><span data-stu-id="dc968-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="dc968-178">Si agrega un usuario como un miembro toohello empleados de ventas por el rol de territorio que también existe como un miembro de un rol creado en [lección 11: crear Roles](../tutorials/aas-lesson-11-create-roles.md), obtendrá una combinación de permisos.</span><span class="sxs-lookup"><span data-stu-id="dc968-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="dc968-179">Cuando un usuario es miembro de varios roles, permisos de Hola y filtros de fila definidos para cada rol son acumulativos.</span><span class="sxs-lookup"><span data-stu-id="dc968-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="dc968-180">Es decir, usuario de hello tiene permisos mayores de hello determinados por la combinación de Hola de roles.</span><span class="sxs-lookup"><span data-stu-id="dc968-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="dc968-181">toocreate empleados de ventas por el rol de usuario de territorio</span><span class="sxs-lookup"><span data-stu-id="dc968-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="dc968-182">En SSDT, haga clic en hello **modelo** menú y, a continuación, haga clic en **Roles**.</span><span class="sxs-lookup"><span data-stu-id="dc968-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="dc968-183">En **Administrador de roles**, haga clic en **Nuevo**.</span><span class="sxs-lookup"><span data-stu-id="dc968-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="dc968-184">Un nuevo rol con hello agregar ninguna permiso es toohello lista.</span><span class="sxs-lookup"><span data-stu-id="dc968-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="dc968-185">Haga clic en nuevo rol de hello y, a continuación, en hello **nombre** columna, cambie el nombre de rol de hello demasiado**empleados de ventas por territorio**.</span><span class="sxs-lookup"><span data-stu-id="dc968-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="dc968-186">Hola **permisos** columna, haga clic en la lista desplegable de hello y, a continuación, seleccione hello **lectura** permiso.</span><span class="sxs-lookup"><span data-stu-id="dc968-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="dc968-187">Haga clic en hello **miembros** ficha y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="dc968-188">Hola **Seleccionar usuario o grupo** cuadro de diálogo **objeto de hello ENTRAR denominado tooselect**, escriba Hola primer ejemplo nombre de usuario que utilizó al crear la tabla de EmployeeSecurity Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="dc968-189">Haga clic en **comprobar nombres** tooverify nombre de usuario de hello es válida y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="dc968-190">Repita este paso, agregar Hola otros nombres de usuario de ejemplo que utilizó al crear la tabla de EmployeeSecurity Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="dc968-191">Haga clic en hello **filtros de fila** ficha.</span><span class="sxs-lookup"><span data-stu-id="dc968-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="dc968-192">Para hello **EmployeeSecurity** tabla Hola **filtro DAX** columna, Hola de tipo siguiente fórmula:</span><span class="sxs-lookup"><span data-stu-id="dc968-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="dc968-193">Esta fórmula especifica que todas las columnas resolverán toohello de condición booleana false.</span><span class="sxs-lookup"><span data-stu-id="dc968-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="dc968-194">No hay columnas de tabla de hello EmployeeSecurity pueden ser consultadas por un miembro de hello empleados de ventas por el rol de usuario de territorio.</span><span class="sxs-lookup"><span data-stu-id="dc968-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="dc968-195">Para hello **DimSalesTerritory** tabla, Hola de tipo siguiente fórmula:</span><span class="sxs-lookup"><span data-stu-id="dc968-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="dc968-196">En esta fórmula, Hola función LOOKUPVALUE devuelve todos los valores de columna de hello DimEmployeeSecurity [SalesTerritoryId], donde hello EmployeeSecurity [LoginId] es Hola igual como Hola actual ha iniciado sesión nombre de usuario de Windows y EmployeeSecurity [ SalesTerritoryId] es Hola igual que hello DimSalesTerritory [SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="dc968-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="dc968-197">Hello conjunto de identificadores de territorio de ventas devueltos por LOOKUPVALUE es toorestrict usado Hola filas que se muestran en la tabla DimSalesTerritory Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="dc968-198">Se muestran solo las filas donde hello SalesTerritoryID por fila Hola está en hello conjunto de identificadores devueltos por la función LOOKUPVALUE de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="dc968-199">En el Administrador de roles, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="dc968-200">Probar los empleados de ventas de Hola por el rol de usuario de territorio</span><span class="sxs-lookup"><span data-stu-id="dc968-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="dc968-201">En esta tarea, se usa Hola analizar esta característica en la eficacia de hello tootest SSDT de hello empleados de ventas por el rol de usuario de territorio.</span><span class="sxs-lookup"><span data-stu-id="dc968-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="dc968-202">Especifique uno de los nombres de usuario de hello agregó toohello EmployeeSecurity tabla y como un miembro del rol de Hola.</span><span class="sxs-lookup"><span data-stu-id="dc968-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="dc968-203">Este nombre de usuario, a continuación, se utiliza como nombre de usuario efectivo de hello en conexión de hello creada entre Excel y Hola modelo.</span><span class="sxs-lookup"><span data-stu-id="dc968-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="dc968-204">Hola tootest empleados de ventas por el rol de usuario de territorio</span><span class="sxs-lookup"><span data-stu-id="dc968-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="dc968-205">En SSDT, haga clic en hello **modelo** menú y, a continuación, haga clic en **analizar en Excel**.</span><span class="sxs-lookup"><span data-stu-id="dc968-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="dc968-206">Hola **analizar en Excel** cuadro de diálogo **especificar Hola nombre o rol toouse tooconnect toohello modelo de usuario**, seleccione **otro usuario de Windows**y, a continuación, haga clic en **Examinar**.</span><span class="sxs-lookup"><span data-stu-id="dc968-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="dc968-207">Hola **Seleccionar usuario o grupo** cuadro de diálogo **escriba Hola objeto nombre tooselect**, escriba un nombre de usuario incluido en la tabla de EmployeeSecurity de hello y, a continuación, haga clic en **comprobar nombres**.</span><span class="sxs-lookup"><span data-stu-id="dc968-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="dc968-208">Haga clic en **Aceptar** tooclose hello **Seleccionar usuario o grupo** cuadro de diálogo y, a continuación, haga clic en **Aceptar** tooclose hello **analizar en Excel** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="dc968-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="dc968-209">Excel se abre con un nuevo libro.</span><span class="sxs-lookup"><span data-stu-id="dc968-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="dc968-210">Automáticamente se crea una tabla dinámica.</span><span class="sxs-lookup"><span data-stu-id="dc968-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="dc968-211">Hola lista PivotTable Fields incluye la mayoría de campos de datos de hello disponibles en el nuevo modelo.</span><span class="sxs-lookup"><span data-stu-id="dc968-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="dc968-212">Tabla de aviso hello EmployeeSecurity no está visible en hello lista PivotTable Fields.</span><span class="sxs-lookup"><span data-stu-id="dc968-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="dc968-213">Ocultó esta tabla de las herramientas de cliente en una tarea anterior.</span><span class="sxs-lookup"><span data-stu-id="dc968-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="dc968-214">Hola **campos** lista **∑ Internet Sales** (medidas), seleccione hello **InternetTotalSales** medida.</span><span class="sxs-lookup"><span data-stu-id="dc968-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="dc968-215">medida de Hola se introduce en hello **valores** campos.</span><span class="sxs-lookup"><span data-stu-id="dc968-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="dc968-216">Seleccione hello **SalesTerritoryId** columna de hello **DimSalesTerritory** tabla.</span><span class="sxs-lookup"><span data-stu-id="dc968-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="dc968-217">columna de Hola se introduce en hello **etiquetas de fila** campos.</span><span class="sxs-lookup"><span data-stu-id="dc968-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="dc968-218">Internet aviso cifras de ventas solo aparecen para hello una región toowhich Hola nombre de usuario efectivo que usó pertenece.</span><span class="sxs-lookup"><span data-stu-id="dc968-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="dc968-219">Si selecciona otra columna, como la ciudad de la tabla de hello DimGeography como campo de etiqueta de fila, solo ciudades de usuario efectivo de hello territorio de ventas toowhich Hola pertenece se muestran.</span><span class="sxs-lookup"><span data-stu-id="dc968-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="dc968-220">Este usuario no se puede examinar o consultar los datos de ventas de Internet para otros territorios distintos Hola uno al que pertenecen.</span><span class="sxs-lookup"><span data-stu-id="dc968-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="dc968-221">Esta restricción es porque el filtro de fila definido para la tabla DimSalesTerritory de hello, Hola empleados de ventas por el rol de usuario de territorio, hello protege los datos para todos los datos relacionados con los territorios de ventas de tooother.</span><span class="sxs-lookup"><span data-stu-id="dc968-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dc968-222">Otras referencias</span><span class="sxs-lookup"><span data-stu-id="dc968-222">See Also</span></span>  
[<span data-ttu-id="dc968-223">Función USERNAME (DAX)</span><span class="sxs-lookup"><span data-stu-id="dc968-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="dc968-224">Función LOOKUPVALUE (DAX)</span><span class="sxs-lookup"><span data-stu-id="dc968-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="dc968-225">Función CUSTOMDATA (DAX)</span><span class="sxs-lookup"><span data-stu-id="dc968-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  
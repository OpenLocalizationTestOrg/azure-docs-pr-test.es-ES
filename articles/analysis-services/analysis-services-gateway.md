---
title: Puerta de enlace de datos local | Microsoft Docs
description: "Necesitará una puerta de enlace local si el servidor de Analysis Services de Azure se debe conectar a orígenes de datos locales."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: cd596155-b608-4a34-935e-e45c95d884a9
ms.service: analysis-services
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 08/21/2017
ms.author: owend
ms.openlocfilehash: 514b5404e8cbfa0baa657eb41736e20cad502638
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="connecting-to-on-premises-data-sources-with-azure-on-premises-data-gateway"></a><span data-ttu-id="a42b0-103">Conexión a orígenes de datos locales con la puerta de enlace de datos local de Azure</span><span class="sxs-lookup"><span data-stu-id="a42b0-103">Connecting to on-premises data sources with Azure On-premises Data Gateway</span></span>
<span data-ttu-id="a42b0-104">La puerta de enlace de datos local actúa como un puente, ya que proporciona una transferencia de datos segura entre orígenes de datos locales y los servidores de Azure Analysis Services en la nube.</span><span class="sxs-lookup"><span data-stu-id="a42b0-104">The on-premises data gateway acts as a bridge, providing secure data transfer between on-premises data sources and your Azure Analysis Services servers in the cloud.</span></span> <span data-ttu-id="a42b0-105">Además de funcionar con varios servidores de Azure Analysis Services en la misma región, la versión más reciente de la puerta de enlace también funciona con Azure Logic Apps, Power BI, Power Apps y Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="a42b0-105">In addition to working with multiple Azure Analysis Services servers in the same region, the latest version of the gateway also works with Azure Logic Apps, Power BI, Power Apps, and Microsoft Flow.</span></span> <span data-ttu-id="a42b0-106">Puede asociar varios servicios de la misma región con una sola puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-106">You can associate multiple services in the same region with a single gateway.</span></span> 

 <span data-ttu-id="a42b0-107">Azure Analysis Services requiere un recurso de puerta de enlace en la misma región.</span><span class="sxs-lookup"><span data-stu-id="a42b0-107">Azure Analysis Services requires a gateway resource in the same region.</span></span> <span data-ttu-id="a42b0-108">Por ejemplo, si tiene servidores de Azure Analysis Services en la región este de EE. UU. 2, necesita un recurso de puerta de enlace en la región este de EE. UU. 2.</span><span class="sxs-lookup"><span data-stu-id="a42b0-108">For example, if you have Azure Analysis Services servers in the East US 2 region, you need a gateway resource in the East US 2 region.</span></span> <span data-ttu-id="a42b0-109">Varios servidores de Este de EE. UU. 2 pueden utilizar la misma puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-109">Multiple servers in East US 2 can use the same gateway.</span></span>

<span data-ttu-id="a42b0-110">El proceso de instalación de la puerta de enlace consta de cuatro partes:</span><span class="sxs-lookup"><span data-stu-id="a42b0-110">Getting setup with the gateway the first time is a four-part process:</span></span>

- <span data-ttu-id="a42b0-111">**Descargar y ejecutar el programa de instalación**: en este paso se instala un servicio de puerta de enlace en un equipo de la organización.</span><span class="sxs-lookup"><span data-stu-id="a42b0-111">**Download and run setup** - This step installs a gateway service on a computer in your organization.</span></span>

- <span data-ttu-id="a42b0-112">**Registrar la puerta de enlace**: en este paso se especifica el nombre y la clave de recuperación de la puerta de enlace y se selecciona la región, con lo que la puerta de enlace se registra en con el servicio en la nube de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-112">**Register your gateway** - In this step, you specify a name and recovery key for your gateway, and select a region, registering your gateway with the Gateway Cloud Service.</span></span>

- <span data-ttu-id="a42b0-113">**Crear un recurso de puerta de enlace en Azure**: en este paso se crea un recurso de puerta de enlace en una suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-113">**Create a gateway resource in Azure** - In this step, you create a gateway resource in your Azure subscription.</span></span>

- <span data-ttu-id="a42b0-114">**Conectar los servidores a los recursos de puerta de enlace**: una vez que tiene un recurso de puerta de enlace en la suscripción, puede empezar a conectar los servidores a él.</span><span class="sxs-lookup"><span data-stu-id="a42b0-114">**Connect your servers to your gateway resource** - Once you have a gateway resource in your subscription, you can begin connecting your servers to it.</span></span>

<span data-ttu-id="a42b0-115">Una vez que tiene un recurso de puerta de enlace configurado para una suscripción, puede conectarle varios servidores y otros servicios.</span><span class="sxs-lookup"><span data-stu-id="a42b0-115">Once you have a gateway resource configured for your subscription, you can connect multiple servers, and other services to it.</span></span> <span data-ttu-id="a42b0-116">Solo necesita instalar otra puerta de enlace diferente y crear más recursos de puerta de enlace si tiene servidores u otros servicios en otra región.</span><span class="sxs-lookup"><span data-stu-id="a42b0-116">You only need to install a different gateway and create additional gateway resources if you have servers or other services in a different region.</span></span>

<span data-ttu-id="a42b0-117">Para comenzar inmediatamente, consulte [Instalación y configuración de una puerta de enlace de datos local](analysis-services-gateway-install.md).</span><span class="sxs-lookup"><span data-stu-id="a42b0-117">To get started right away, see [Install and configure on-premises data gateway](analysis-services-gateway-install.md).</span></span>

## <span data-ttu-id="a42b0-118"><a name="how-it-works"> </a>Funcionamiento</span><span class="sxs-lookup"><span data-stu-id="a42b0-118"><a name="how-it-works"> </a>How it works</span></span>
<span data-ttu-id="a42b0-119">La puerta de enlace que se instala en un equipo de la organización funciona como un servicio de Windows, **Puerta de enlace de datos local**.</span><span class="sxs-lookup"><span data-stu-id="a42b0-119">The gateway you install on a computer in your organization runs as a Windows service, **On-premises data gateway**.</span></span> <span data-ttu-id="a42b0-120">Este servicio local se registra en el servicio en la nube de puerta de enlace a través de Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="a42b0-120">This local service is registered with the Gateway Cloud Service through Azure Service Bus.</span></span> <span data-ttu-id="a42b0-121">Luego se crea un servicio en la nube de puerta de enlace del recurso de puerta de enlace para la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-121">You then create a gateway resource Gateway Cloud Service for your Azure subscription.</span></span> <span data-ttu-id="a42b0-122">Posteriormente, los servidores de servicios de Azure Analysis Services se conectan al recurso de puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-122">Your Azure Analysis Services servers are then connected to your gateway resource.</span></span> <span data-ttu-id="a42b0-123">Cuando los modelos del servidor necesitan conectarse a los orígenes de datos locales para realizar consultas o procesamiento, un flujo de datos y consultas atraviesa el recurso de puerta de enlace, Azure Service Bus, el servicio de puerta de enlace de datos local y los orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="a42b0-123">When models on your server need to connect to your on-premises data sources for queries or processing, a query and data flow traverses the gateway resource, Azure Service Bus, the local on-premises data gateway service, and your data sources.</span></span> 

![Cómo funciona](./media/analysis-services-gateway/aas-gateway-how-it-works.png)

<span data-ttu-id="a42b0-125">Flujo de datos y consultas:</span><span class="sxs-lookup"><span data-stu-id="a42b0-125">Queries and data flow:</span></span>

1. <span data-ttu-id="a42b0-126">El servicio en la nube crea una consulta con las credenciales cifradas para el origen de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-126">A query is created by the cloud service with the encrypted credentials for the on-premises data source.</span></span> <span data-ttu-id="a42b0-127">A continuación, se envía a una cola de la puerta de enlace para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="a42b0-127">It's then sent to a queue for the gateway to process.</span></span>
2. <span data-ttu-id="a42b0-128">El servicio en la nube de puerta de enlace analiza la consulta e inserta la solicitud en la instancia de [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="a42b0-128">The gateway cloud service analyzes the query and pushes the request to the [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span></span>
3. <span data-ttu-id="a42b0-129">La puerta de enlace de datos local sondea el bus de servicio de Azure en busca de solicitudes pendientes.</span><span class="sxs-lookup"><span data-stu-id="a42b0-129">The on-premises data gateway polls the Azure Service Bus for pending requests.</span></span>
4. <span data-ttu-id="a42b0-130">La puerta de enlace obtiene la consulta, descifra las credenciales y se conecta a los orígenes de datos con ellas.</span><span class="sxs-lookup"><span data-stu-id="a42b0-130">The gateway gets the query, decrypts the credentials, and connects to the data sources with those credentials.</span></span>
5. <span data-ttu-id="a42b0-131">La puerta de enlace envía la consulta al origen de datos para su ejecución.</span><span class="sxs-lookup"><span data-stu-id="a42b0-131">The gateway sends the query to the data source for execution.</span></span>
6. <span data-ttu-id="a42b0-132">Los resultados se devuelven desde el origen de datos a la puerta de enlace y luego se envían al servicio en la nube y al servidor.</span><span class="sxs-lookup"><span data-stu-id="a42b0-132">The results are sent from the data source, back to the gateway, and then onto the cloud service and your server.</span></span>

## <span data-ttu-id="a42b0-133"><a name="windows-service-account"> </a>Cuenta de servicio de Windows</span><span class="sxs-lookup"><span data-stu-id="a42b0-133"><a name="windows-service-account"> </a>Windows Service account</span></span>
<span data-ttu-id="a42b0-134">La puerta de enlace de datos local está configurada para usar *NT SERVICE\PBIEgwService* para las credenciales de inicio de sesión del servicio de Windows.</span><span class="sxs-lookup"><span data-stu-id="a42b0-134">The on-premises data gateway is configured to use *NT SERVICE\PBIEgwService* for the Windows service logon credential.</span></span> <span data-ttu-id="a42b0-135">De manera predeterminada, tiene el derecho de iniciar sesión como un servicio en el contexto de la máquina en la que va a instalar la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-135">By default, it has the right of Logon as a service; in the context of the machine that you are installing the gateway on.</span></span> <span data-ttu-id="a42b0-136">Esta credencial no es la misma cuenta utilizada para conectarse a orígenes de datos locales o a la cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-136">This credential is not the same account used to connect to on-premises data sources or your Azure account.</span></span>  

<span data-ttu-id="a42b0-137">Si tiene problemas con el servidor proxy debido a la autenticación, puede cambiar la cuenta de servicio de Windows a un usuario de dominio o cuenta de servicio administrada.</span><span class="sxs-lookup"><span data-stu-id="a42b0-137">If you encounter issues with your proxy server due to authentication, you may want to change the Windows service account to a domain user or managed service account.</span></span>

## <span data-ttu-id="a42b0-138"><a name="ports"> </a>Puertos</span><span class="sxs-lookup"><span data-stu-id="a42b0-138"><a name="ports"> </a>Ports</span></span>
<span data-ttu-id="a42b0-139">La puerta de enlace crea una conexión de salida con el bus de servicio de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-139">The gateway creates an outbound connection to Azure Service Bus.</span></span> <span data-ttu-id="a42b0-140">Se comunica en los puertos de salida siguientes: TCP 443 (valor predeterminado), 5671, 5672 y del 9350 al 9354.</span><span class="sxs-lookup"><span data-stu-id="a42b0-140">It communicates on outbound ports: TCP 443 (default), 5671, 5672, 9350 through 9354.</span></span>  <span data-ttu-id="a42b0-141">La puerta de enlace no requiere puertos de entrada.</span><span class="sxs-lookup"><span data-stu-id="a42b0-141">The gateway does not require inbound ports.</span></span>

<span data-ttu-id="a42b0-142">Se recomienda crear una lista de direcciones IP permitidas de la región de datos en el firewall.</span><span class="sxs-lookup"><span data-stu-id="a42b0-142">We recommend you whitelist the IP addresses for your data region in your firewall.</span></span> <span data-ttu-id="a42b0-143">Puede descargar la [lista de direcciones IP del centro de datos de Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="a42b0-143">You can download the [Microsoft Azure Datacenter IP list](https://www.microsoft.com/download/details.aspx?id=41653).</span></span> <span data-ttu-id="a42b0-144">La lista se actualiza semanalmente.</span><span class="sxs-lookup"><span data-stu-id="a42b0-144">This list is updated weekly.</span></span>

> [!NOTE]
> <span data-ttu-id="a42b0-145">Las direcciones IP mostradas en la lista de direcciones IP del centro de datos de Azure están en notación CIDR.</span><span class="sxs-lookup"><span data-stu-id="a42b0-145">The IP Addresses listed in the Azure Datacenter IP list are in CIDR notation.</span></span> <span data-ttu-id="a42b0-146">Por ejemplo, 10.0.0.0/24 no significa de 10.0.0.0 a 10.0.0.24.</span><span class="sxs-lookup"><span data-stu-id="a42b0-146">For example, 10.0.0.0/24 does not mean 10.0.0.0 through 10.0.0.24.</span></span> <span data-ttu-id="a42b0-147">Conozca más información acerca de la [notación CIDR](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="a42b0-147">Learn more about the [CIDR notation](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="a42b0-148">Éstos son los nombres de dominio completos utilizados por la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-148">The following are the fully qualified domain names used by the gateway.</span></span>

| <span data-ttu-id="a42b0-149">Nombres de dominio</span><span class="sxs-lookup"><span data-stu-id="a42b0-149">Domain names</span></span> | <span data-ttu-id="a42b0-150">Puertos de salida</span><span class="sxs-lookup"><span data-stu-id="a42b0-150">Outbound ports</span></span> | <span data-ttu-id="a42b0-151">Descripción</span><span class="sxs-lookup"><span data-stu-id="a42b0-151">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a42b0-152">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="a42b0-152">*.powerbi.com</span></span> |<span data-ttu-id="a42b0-153">80</span><span class="sxs-lookup"><span data-stu-id="a42b0-153">80</span></span> |<span data-ttu-id="a42b0-154">HTTP que se utiliza para descargar el instalador.</span><span class="sxs-lookup"><span data-stu-id="a42b0-154">HTTP used to download the installer.</span></span> |
| <span data-ttu-id="a42b0-155">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="a42b0-155">*.powerbi.com</span></span> |<span data-ttu-id="a42b0-156">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-156">443</span></span> |<span data-ttu-id="a42b0-157">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-157">HTTPS</span></span> |
| <span data-ttu-id="a42b0-158">*. analysis.windows.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-158">*.analysis.windows.net</span></span> |<span data-ttu-id="a42b0-159">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-159">443</span></span> |<span data-ttu-id="a42b0-160">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-160">HTTPS</span></span> |
| <span data-ttu-id="a42b0-161">*.login.windows.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-161">*.login.windows.net</span></span> |<span data-ttu-id="a42b0-162">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-162">443</span></span> |<span data-ttu-id="a42b0-163">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-163">HTTPS</span></span> |
| <span data-ttu-id="a42b0-164">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-164">*.servicebus.windows.net</span></span> |<span data-ttu-id="a42b0-165">5671-5672</span><span class="sxs-lookup"><span data-stu-id="a42b0-165">5671-5672</span></span> |<span data-ttu-id="a42b0-166">Advanced Message Queuing Protocol (AMQP)</span><span class="sxs-lookup"><span data-stu-id="a42b0-166">Advanced Message Queuing Protocol (AMQP)</span></span> |
| <span data-ttu-id="a42b0-167">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-167">*.servicebus.windows.net</span></span> |<span data-ttu-id="a42b0-168">443, 9350-9354</span><span class="sxs-lookup"><span data-stu-id="a42b0-168">443, 9350-9354</span></span> |<span data-ttu-id="a42b0-169">Agentes de escucha en Service Bus Relay sobre TCP (requiere 443 para la adquisición del token de Access Control)</span><span class="sxs-lookup"><span data-stu-id="a42b0-169">Listeners on Service Bus Relay over TCP (requires 443 for Access Control token acquisition)</span></span> |
| <span data-ttu-id="a42b0-170">*.frontend.clouddatahub.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-170">*.frontend.clouddatahub.net</span></span> |<span data-ttu-id="a42b0-171">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-171">443</span></span> |<span data-ttu-id="a42b0-172">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-172">HTTPS</span></span> |
| <span data-ttu-id="a42b0-173">*.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="a42b0-173">*.core.windows.net</span></span> |<span data-ttu-id="a42b0-174">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-174">443</span></span> |<span data-ttu-id="a42b0-175">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-175">HTTPS</span></span> |
| <span data-ttu-id="a42b0-176">login.microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="a42b0-176">login.microsoftonline.com</span></span> |<span data-ttu-id="a42b0-177">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-177">443</span></span> |<span data-ttu-id="a42b0-178">HTTPS</span><span class="sxs-lookup"><span data-stu-id="a42b0-178">HTTPS</span></span> |
| <span data-ttu-id="a42b0-179">*.msftncsi.com</span><span class="sxs-lookup"><span data-stu-id="a42b0-179">*.msftncsi.com</span></span> |<span data-ttu-id="a42b0-180">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-180">443</span></span> |<span data-ttu-id="a42b0-181">Se utiliza para probar la conectividad a Internet si el servicio Power BI no puede acceder a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-181">Used to test internet connectivity if the gateway is unreachable by the Power BI service.</span></span> |
| <span data-ttu-id="a42b0-182">*.microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="a42b0-182">*.microsoftonline-p.com</span></span> |<span data-ttu-id="a42b0-183">443</span><span class="sxs-lookup"><span data-stu-id="a42b0-183">443</span></span> |<span data-ttu-id="a42b0-184">Se utiliza para la autenticación dependiendo de la configuración.</span><span class="sxs-lookup"><span data-stu-id="a42b0-184">Used for authentication depending on configuration.</span></span> |

### <span data-ttu-id="a42b0-185"><a name="force-https"></a>Forzar la comunicación HTTPS con Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="a42b0-185"><a name="force-https"></a>Forcing HTTPS communication with Azure Service Bus</span></span>
<span data-ttu-id="a42b0-186">Puede hacer que la puerta de enlace se comunique con Azure Service Bus mediante HTTPS en lugar de TCP directo. Sin embargo, de ese modo puede reducir en gran medida el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a42b0-186">You can force the gateway to communicate with Azure Service Bus by using HTTPS instead of direct TCP; however, doing so can greatly reduce performance.</span></span> <span data-ttu-id="a42b0-187">Debe modificar el archivo *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* cambiando el valor de `AutoDetect` por `Https`.</span><span class="sxs-lookup"><span data-stu-id="a42b0-187">You can modify the *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* file by changing the value from `AutoDetect` to `Https`.</span></span> <span data-ttu-id="a42b0-188">Este archivo suele encontrarse en *C:\Archivos de programa\Puerta de enlace de datos local*.</span><span class="sxs-lookup"><span data-stu-id="a42b0-188">This file is typically located at *C:\Program Files\On-premises data gateway*.</span></span>

```
<setting name="ServiceBusSystemConnectivityModeString" serializeAs="String">
    <value>Https</value>
</setting>
```

## <span data-ttu-id="a42b0-189"><a name="faq"></a>Preguntas más frecuentes</span><span class="sxs-lookup"><span data-stu-id="a42b0-189"><a name="faq"></a>Frequently asked questions</span></span>

### <a name="general"></a><span data-ttu-id="a42b0-190">General</span><span class="sxs-lookup"><span data-stu-id="a42b0-190">General</span></span>

<span data-ttu-id="a42b0-191">**P**: ¿Necesito una puerta de enlace para orígenes de datos en la nube como, por ejemplo, Azure SQL Database?</span><span class="sxs-lookup"><span data-stu-id="a42b0-191">**Q**: Do I need a gateway for data sources in the cloud, such as Azure SQL Database?</span></span> <br/><span data-ttu-id="a42b0-192">
**R:** No.</span><span class="sxs-lookup"><span data-stu-id="a42b0-192">
**A**: No.</span></span> <span data-ttu-id="a42b0-193">Las puertas de enlace se conectan únicamente a orígenes de datos locales.</span><span class="sxs-lookup"><span data-stu-id="a42b0-193">A gateway connects to on-premises data sources only.</span></span>

<span data-ttu-id="a42b0-194">**P**: ¿La puerta de enlace debe estar instalada en la misma máquina que el origen de datos?</span><span class="sxs-lookup"><span data-stu-id="a42b0-194">**Q**: Does the gateway have to be installed on the same machine as the data source?</span></span> <br/><span data-ttu-id="a42b0-195">
**R:** No.</span><span class="sxs-lookup"><span data-stu-id="a42b0-195">
**A**: No.</span></span> <span data-ttu-id="a42b0-196">La puerta de enlace se conecta al origen de datos mediante la información de conexión que se proporcionó.</span><span class="sxs-lookup"><span data-stu-id="a42b0-196">The gateway connects to the data source using the connection information that was provided.</span></span> <span data-ttu-id="a42b0-197">Considere la puerta de enlace como una aplicación cliente en este sentido.</span><span class="sxs-lookup"><span data-stu-id="a42b0-197">Consider the gateway as a client application in this sense.</span></span> <span data-ttu-id="a42b0-198">La puerta de enlace solo necesita la funcionalidad para conectarse al nombre de servidor que se proporcionó, por lo general, en la misma red.</span><span class="sxs-lookup"><span data-stu-id="a42b0-198">The gateway just needs the capability to connect to the server name that was provided, typically on the same network.</span></span>

<a name="why-azure-work-school-account"></a>

<span data-ttu-id="a42b0-199">**P**: ¿Por qué hay que usar una cuenta profesional o educativa para iniciar sesión?</span><span class="sxs-lookup"><span data-stu-id="a42b0-199">**Q**: Why do I need to use a work or school account to sign in?</span></span> <br/><span data-ttu-id="a42b0-200">
**R**: Solo puede usar una cuenta profesional o educativa de Azure al instalar la puerta de enlace de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-200">
**A**: You can only use an Azure work or school account when you install the on-premises data gateway.</span></span> <span data-ttu-id="a42b0-201">Su cuenta de inicio de sesión se almacena en un inquilino administrado por Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="a42b0-201">Your sign-in account is stored in a tenant that's managed by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="a42b0-202">Por lo general, el nombre principal de usuario (UPN) de la cuenta de Azure AD coincide con la dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="a42b0-202">Usually, your Azure AD account's user principal name (UPN) matches the email address.</span></span>

<span data-ttu-id="a42b0-203">**P**: ¿Dónde se almacenan mis credenciales?</span><span class="sxs-lookup"><span data-stu-id="a42b0-203">**Q**: Where are my credentials stored?</span></span> <br/><span data-ttu-id="a42b0-204">
**R**: Las credenciales que especifique para un origen de datos se cifran y almacenan en el servicio en la nube de la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-204">
**A**: The credentials that you enter for a data source are encrypted and stored in the Gateway Cloud Service.</span></span> <span data-ttu-id="a42b0-205">Las credenciales se descifran en la puerta de enlace de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-205">The credentials are decrypted at the on-premises data gateway.</span></span>

<span data-ttu-id="a42b0-206">**P**: ¿Hay algún requisito con respecto al ancho de banda de red?</span><span class="sxs-lookup"><span data-stu-id="a42b0-206">**Q**: Are there any requirements for network bandwidth?</span></span> <br/><span data-ttu-id="a42b0-207">
**R**: Es aconsejable que la conexión de red tenga buen rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a42b0-207">
**A**: It's recommend your network connection has good throughput.</span></span> <span data-ttu-id="a42b0-208">Cada entorno es diferente, y la cantidad de datos que se envíe afecta a los resultados.</span><span class="sxs-lookup"><span data-stu-id="a42b0-208">Every environment is different, and the amount of data being sent affects the results.</span></span> <span data-ttu-id="a42b0-209">Si usa ExpressRoute, podrá ayudar a garantizar un nivel de rendimiento entre los centros de datos locales y los de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-209">Using ExpressRoute could help to guarantee a level of throughput between on-premises and the Azure datacenters.</span></span>
<span data-ttu-id="a42b0-210">Puede usar la aplicación Azure Speed Test (desarrollada por un tercero) para medir su rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a42b0-210">You can use the third-party tool Azure Speed Test app to help gauge your throughput.</span></span>

<span data-ttu-id="a42b0-211">**P**: ¿cuál es la latencia para la ejecución de consultas en un origen de datos desde la puerta de enlace?</span><span class="sxs-lookup"><span data-stu-id="a42b0-211">**Q**: What is the latency for running queries to a data source from the gateway?</span></span> <span data-ttu-id="a42b0-212">¿Cuál es la mejor arquitectura?</span><span class="sxs-lookup"><span data-stu-id="a42b0-212">What is the best architecture?</span></span> <br/><span data-ttu-id="a42b0-213">
**R**: Para reducir la latencia de red, instale la puerta de enlace lo más cerca posible del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="a42b0-213">
**A**: To reduce network latency, install the gateway as close to the data source as possible.</span></span> <span data-ttu-id="a42b0-214">Si puede instalar la puerta de enlace en el propio origen de datos, esta proximidad minimizará la latencia introducida.</span><span class="sxs-lookup"><span data-stu-id="a42b0-214">If you can install the gateway on the actual data source, this proximity minimizes the latency introduced.</span></span> <span data-ttu-id="a42b0-215">Tenga en cuenta también los centros de datos.</span><span class="sxs-lookup"><span data-stu-id="a42b0-215">Consider the datacenters too.</span></span> <span data-ttu-id="a42b0-216">Por ejemplo, si el servicio usa el centro de datos del oeste de EE. UU. y tiene SQL Server hospedado en una máquina virtual de Azure, esta debería encontrarse también en el oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="a42b0-216">For example, if your service uses the West US datacenter, and you have SQL Server hosted in an Azure VM, your Azure VM should be in the West US too.</span></span> <span data-ttu-id="a42b0-217">Esta proximidad minimiza la latencia y evita los cargos de salida en la máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-217">This proximity minimizes latency and avoids egress charges on the Azure VM.</span></span>

<span data-ttu-id="a42b0-218">**P**: ¿Cómo se devuelven los resultados a la nube?</span><span class="sxs-lookup"><span data-stu-id="a42b0-218">**Q**: How are results sent back to the cloud?</span></span> <br/><span data-ttu-id="a42b0-219">
**R**: Los resultados se envían a través de Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="a42b0-219">
**A**: Results are sent through the Azure Service Bus.</span></span>

<span data-ttu-id="a42b0-220">**P**: ¿Hay alguna conexión de entrada a la puerta de enlace desde la nube?</span><span class="sxs-lookup"><span data-stu-id="a42b0-220">**Q**: Are there any inbound connections to the gateway from the cloud?</span></span> <br/><span data-ttu-id="a42b0-221">
**R:** No.</span><span class="sxs-lookup"><span data-stu-id="a42b0-221">
**A**: No.</span></span> <span data-ttu-id="a42b0-222">La puerta de enlace usa conexiones de salida al bus de servicio de Azure.</span><span class="sxs-lookup"><span data-stu-id="a42b0-222">The gateway uses outbound connections to Azure Service Bus.</span></span>

<span data-ttu-id="a42b0-223">**P**: ¿Qué sucede si bloqueo las conexiones de salida?</span><span class="sxs-lookup"><span data-stu-id="a42b0-223">**Q**: What if I block outbound connections?</span></span> <span data-ttu-id="a42b0-224">¿Qué tengo que abrir?</span><span class="sxs-lookup"><span data-stu-id="a42b0-224">What do I need to open?</span></span> <br/><span data-ttu-id="a42b0-225">
**R**: Consulte los puertos y los hosts que usa la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-225">
**A**: See the ports and hosts that the gateway uses.</span></span>

<span data-ttu-id="a42b0-226">**P**: ¿Cómo se llama el servicio real de Windows?</span><span class="sxs-lookup"><span data-stu-id="a42b0-226">**Q**: What is the actual Windows service called?</span></span><br/><span data-ttu-id="a42b0-227">
**R**: En los servicios, la puerta de enlace se llama servicio de puerta de enlace de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-227">
**A**: In Services, the gateway is called On-premises data gateway service.</span></span>

<span data-ttu-id="a42b0-228">**P**: ¿Se puede ejecutar el servicio de Windows de puerta de enlace con una cuenta de Azure Active Directory?</span><span class="sxs-lookup"><span data-stu-id="a42b0-228">**Q**: Can the gateway Windows service run with an Azure Active Directory account?</span></span> <br/><span data-ttu-id="a42b0-229">
**R:** No.</span><span class="sxs-lookup"><span data-stu-id="a42b0-229">
**A**: No.</span></span> <span data-ttu-id="a42b0-230">El servicio de Windows debe tener una cuenta de Windows válida.</span><span class="sxs-lookup"><span data-stu-id="a42b0-230">The Windows service must have a valid Windows account.</span></span> <span data-ttu-id="a42b0-231">De forma predeterminada, el servicio se ejecuta con el SID de servicio NT SERVICE\PBIEgwService.</span><span class="sxs-lookup"><span data-stu-id="a42b0-231">By default, the service runs with the Service SID, NT SERVICE\PBIEgwService.</span></span>

### <span data-ttu-id="a42b0-232"><a name="high-availability"></a>Alta disponibilidad y recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="a42b0-232"><a name="high-availability"></a>High availability and disaster recovery</span></span>

<span data-ttu-id="a42b0-233">**P**: ¿Cuáles son las opciones de recuperación ante desastres disponibles?</span><span class="sxs-lookup"><span data-stu-id="a42b0-233">**Q**: What options are available for disaster recovery?</span></span> <br/><span data-ttu-id="a42b0-234">
**R**: Puede usar la clave de recuperación para restaurar o mover una puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="a42b0-234">
**A**: You can use the recovery key to restore or move a gateway.</span></span> <span data-ttu-id="a42b0-235">Cuando instale la puerta de enlace, especifique la clave de recuperación.</span><span class="sxs-lookup"><span data-stu-id="a42b0-235">When you install the gateway, specify the recovery key.</span></span>

<span data-ttu-id="a42b0-236">**P**: ¿Qué ventaja aporta la clave de recuperación?</span><span class="sxs-lookup"><span data-stu-id="a42b0-236">**Q**: What is the benefit of the recovery key?</span></span> <br/><span data-ttu-id="a42b0-237">
**R**: La clave de recuperación proporciona una forma de migrar o recuperar la configuración de la puerta de enlace después de un desastre.</span><span class="sxs-lookup"><span data-stu-id="a42b0-237">
**A**: The recovery key provides a way to migrate or recover your gateway settings after a disaster.</span></span>

## <span data-ttu-id="a42b0-238"><a name="troubleshooting"> </a>Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="a42b0-238"><a name="troubleshooting"> </a>Troubleshooting</span></span>

<span data-ttu-id="a42b0-239">**P**: ¿Cómo se pueden ver las consultas que se envían al origen de datos local?</span><span class="sxs-lookup"><span data-stu-id="a42b0-239">**Q**: How can I see what queries are being sent to the on-premises data source?</span></span> <br/><span data-ttu-id="a42b0-240">
**R**: Puede habilitar el seguimiento de consultas, que incluye las consultas que se envían.</span><span class="sxs-lookup"><span data-stu-id="a42b0-240">
**A**: You can enable query tracing, which includes the queries that are sent.</span></span> <span data-ttu-id="a42b0-241">No olvide devolver el seguimiento de consultas al valor original cuando haya terminado de solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="a42b0-241">Remember to change query tracing back to the original value when done troubleshooting.</span></span> <span data-ttu-id="a42b0-242">Si lo deja activado, crea registros de mayor tamaño.</span><span class="sxs-lookup"><span data-stu-id="a42b0-242">Leaving query tracing turned on creates larger logs.</span></span>

<span data-ttu-id="a42b0-243">También puede examinar las herramientas de que dispone su origen de datos para el seguimiento de consultas.</span><span class="sxs-lookup"><span data-stu-id="a42b0-243">You can also look at tools that your data source has for tracing queries.</span></span> <span data-ttu-id="a42b0-244">Por ejemplo, puede utilizar Eventos extendidos o SQL Profiler en SQL Server y Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="a42b0-244">For example, you can use Extended Events or SQL Profiler for SQL Server and Analysis Services.</span></span>

<span data-ttu-id="a42b0-245">**P**: ¿Dónde están los registros de la puerta de enlace?</span><span class="sxs-lookup"><span data-stu-id="a42b0-245">**Q**: Where are the gateway logs?</span></span> <br/><span data-ttu-id="a42b0-246">
**R**: Consulte la sección Registros en este mismo tema.</span><span class="sxs-lookup"><span data-stu-id="a42b0-246">
**A**: See Logs later in this topic.</span></span>

### <span data-ttu-id="a42b0-247"><a name="update"></a>Actualización a la versión más reciente</span><span class="sxs-lookup"><span data-stu-id="a42b0-247"><a name="update"></a>Update to the latest version</span></span>

<span data-ttu-id="a42b0-248">Pueden surgir muchos problemas cuando la versión de la puerta de enlace deja de estar actualizada.</span><span class="sxs-lookup"><span data-stu-id="a42b0-248">Many issues can surface when the gateway version becomes outdated.</span></span> <span data-ttu-id="a42b0-249">Como buena práctica general, asegúrese de que está usando la versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="a42b0-249">As good general practice, make sure that you use the latest version.</span></span> <span data-ttu-id="a42b0-250">Si no ha actualizado la puerta de enlace durante un mes o más, debería plantearse instalar su versión más reciente y comprobar si puede reproducir el problema.</span><span class="sxs-lookup"><span data-stu-id="a42b0-250">If you haven't updated the gateway for a month or longer, you might consider installing the latest version of the gateway, and see if you can reproduce the issue.</span></span>

### <a name="error-failed-to-add-user-to-group--2147463168-pbiegwservice-performance-log-users"></a><span data-ttu-id="a42b0-251">Error: Error al agregar el usuario al grupo.</span><span class="sxs-lookup"><span data-stu-id="a42b0-251">Error: Failed to add user to group.</span></span> <span data-ttu-id="a42b0-252">(Usuarios del registro de rendimiento de-2147463168 PBIEgwService)</span><span class="sxs-lookup"><span data-stu-id="a42b0-252">(-2147463168 PBIEgwService Performance Log Users)</span></span>

<span data-ttu-id="a42b0-253">Es posible que reciba este error si intenta instalar la puerta de enlace en un controlador de dominio, lo cual no se admite.</span><span class="sxs-lookup"><span data-stu-id="a42b0-253">You might get this error if you try to install the gateway on a domain controller, which isn't supported.</span></span> <span data-ttu-id="a42b0-254">Asegúrese de implementar la puerta de enlace en una máquina que no sea un controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="a42b0-254">Make sure that you deploy the gateway on a machine that isn't a domain controller.</span></span>

## <span data-ttu-id="a42b0-255"><a name="logs"></a>Registros</span><span class="sxs-lookup"><span data-stu-id="a42b0-255"><a name="logs"></a>Logs</span></span>

<span data-ttu-id="a42b0-256">Los archivos de registro son un recurso importante a la hora de solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="a42b0-256">Log files are an important resource when troubleshooting.</span></span>

#### <a name="enterprise-gateway-service-logs"></a><span data-ttu-id="a42b0-257">Registros del servicio de puerta de enlace empresarial</span><span class="sxs-lookup"><span data-stu-id="a42b0-257">Enterprise gateway service logs</span></span>

`C:\Users\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway\<yyyyymmdd>.<Number>.log`

#### <a name="configuration-logs"></a><span data-ttu-id="a42b0-258">Registros de configuración</span><span class="sxs-lookup"><span data-stu-id="a42b0-258">Configuration logs</span></span>

`C:\Users\<username>\AppData\Local\Microsoft\On-premises data gateway\GatewayConfigurator.log`




#### <a name="event-logs"></a><span data-ttu-id="a42b0-259">Registros de eventos</span><span class="sxs-lookup"><span data-stu-id="a42b0-259">Event logs</span></span>

<span data-ttu-id="a42b0-260">Puede encontrar los registros de Data Management Gateway y PowerBIGateway en **Registros de aplicaciones y servicios**.</span><span class="sxs-lookup"><span data-stu-id="a42b0-260">You can find the Data Management Gateway and PowerBIGateway logs under **Application and Services Logs**.</span></span>


## <span data-ttu-id="a42b0-261"><a name="telemetry"></a>Telemetría</span><span class="sxs-lookup"><span data-stu-id="a42b0-261"><a name="telemetry"></a>Telemetry</span></span>
<span data-ttu-id="a42b0-262">La telemetría puede usarse para tareas de supervisión y solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="a42b0-262">Telemetry can be used for monitoring and troubleshooting.</span></span> <span data-ttu-id="a42b0-263">De forma predeterminada</span><span class="sxs-lookup"><span data-stu-id="a42b0-263">By default</span></span>

<span data-ttu-id="a42b0-264">**Para activar la telemetría:**</span><span class="sxs-lookup"><span data-stu-id="a42b0-264">**To turn on telemetry**</span></span>

1.  <span data-ttu-id="a42b0-265">Compruebe el directorio de cliente de puerta de enlace de datos local en el equipo.</span><span class="sxs-lookup"><span data-stu-id="a42b0-265">Check the On-premises data gateway client directory on the computer.</span></span> <span data-ttu-id="a42b0-266">Normalmente, es **%systemdrive%\Program Files\On-premises data gateway**.</span><span class="sxs-lookup"><span data-stu-id="a42b0-266">Typically, it is **%systemdrive%\Program Files\On-premises data gateway**.</span></span> <span data-ttu-id="a42b0-267">O bien, puede abrir una consola de servicios y comprobar la ruta de acceso al archivo ejecutable: una propiedad del servicio de puerta de enlace de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-267">Or, you can open a Services console and check the Path to executable: A property of the On-premises data gateway service.</span></span>
2.  <span data-ttu-id="a42b0-268">En el archivo Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config del directorio del cliente,</span><span class="sxs-lookup"><span data-stu-id="a42b0-268">In the Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config file from client directory.</span></span> <span data-ttu-id="a42b0-269">cambie el valor SendTelemetry a true.</span><span class="sxs-lookup"><span data-stu-id="a42b0-269">Change the SendTelemetry setting to true.</span></span>
        
    ```
        <setting name="SendTelemetry" serializeAs="String">
                    <value>true</value>
        </setting>
    ```

3.  <span data-ttu-id="a42b0-270">Guarde los cambios y reinicie el servicio de Windows: el servicio de puerta de enlace de datos local.</span><span class="sxs-lookup"><span data-stu-id="a42b0-270">Save your changes and restart the Windows service: On-premises data gateway service.</span></span>




## <a name="next-steps"></a><span data-ttu-id="a42b0-271">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a42b0-271">Next steps</span></span>
* [<span data-ttu-id="a42b0-272">Administración de Analysis Services</span><span class="sxs-lookup"><span data-stu-id="a42b0-272">Manage Analysis Services</span></span>](analysis-services-manage.md)
* [<span data-ttu-id="a42b0-273">Obtención de datos de Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="a42b0-273">Get data from Azure Analysis Services</span></span>](analysis-services-connect.md)

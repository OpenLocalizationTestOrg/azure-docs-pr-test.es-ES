---
title: "aaaEncrypt máquinas virtuales de Azure | Documentos de Microsoft"
description: "Este documento le ayuda a tooencrypt máquinas virtuales de Azure después de recibir una alerta desde el centro de seguridad de Azure."
services: security, security-center
documentationcenter: na
author: TomShinder
manager: swadhwa
editor: 
ms.assetid: f6c28bc4-1f79-4352-89d0-03659b2fa2f5
ms.service: security
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/15/2017
ms.author: tomsh
ms.openlocfilehash: 7c7c6eed39d16bde8a0dfaffe3a3331c58101634
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="encrypt-an-azure-virtual-machine"></a><span data-ttu-id="22b32-103">Cifrado de una máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="22b32-103">Encrypt an Azure Virtual Machine</span></span>
<span data-ttu-id="22b32-104">Azure Security Center le avisará si tiene máquinas virtuales que no estén cifradas.</span><span class="sxs-lookup"><span data-stu-id="22b32-104">Azure Security Center will alert you if you have virtual machines that are not encrypted.</span></span> <span data-ttu-id="22b32-105">Estas alertas se mostrarán como recomendación hello y gravedad alta es tooencrypt estas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="22b32-105">These alerts will show as High Severity and hello recommendation is tooencrypt these virtual machines.</span></span>

![Recomendación de cifrado de disco](./media/security-center-disk-encryption/security-center-disk-encryption-fig1.png)

> [!NOTE]
> <span data-ttu-id="22b32-107">información de Hello en este documento aplica a las máquinas virtuales tooencrypting sin usar una clave de cifrado de clave (que es necesario para realizar una copia de seguridad de máquinas virtuales mediante copia de seguridad de Azure).</span><span class="sxs-lookup"><span data-stu-id="22b32-107">hello information in this document applies tooencrypting virtual machines without using a Key Encryption Key (which is required for backing up virtual machines using Azure Backup).</span></span> <span data-ttu-id="22b32-108">Consulte el artículo de hello [cifrado de disco de Azure para Windows y máquinas virtuales de Linux Azure](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption) para obtener información acerca de cómo toouse un toosupport de clave de cifrado de clave cifrada máquinas virtuales de Azure de copia de seguridad de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-108">Please see hello article [Azure Disk Encryption for Windows and Linux Azure Virtual Machines](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption) for information on how toouse a Key Encryption Key toosupport Azure Backup for encrypted Azure Virtual Machines.</span></span>
>
>

<span data-ttu-id="22b32-109">tooencrypt máquinas virtuales de Azure que se han identificado por el centro de seguridad de Azure como la necesidad de cifrado, se recomienda Hola pasos:</span><span class="sxs-lookup"><span data-stu-id="22b32-109">tooencrypt Azure Virtual Machines that have been identified by Azure Security Center as needing encryption, we recommend hello following steps:</span></span>

* <span data-ttu-id="22b32-110">Instale y configure Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="22b32-110">Install and configure Azure PowerShell.</span></span> <span data-ttu-id="22b32-111">Esto le permitirá toorun Hola PowerShell comandos necesario tooset seguridad Hola requisitos previos necesarios tooencrypt máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-111">This will enable you toorun hello PowerShell commands required tooset up hello prerequisites required tooencrypt Azure Virtual Machines.</span></span>
* <span data-ttu-id="22b32-112">Obtener y ejecutar el script de PowerShell de Azure de requisitos previos de cifrado de disco de Azure Hola</span><span class="sxs-lookup"><span data-stu-id="22b32-112">Obtain and run hello Azure Disk Encryption Prerequisites Azure PowerShell script</span></span>
* <span data-ttu-id="22b32-113">Cifre las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="22b32-113">Encrypt your virtual machines</span></span>

<span data-ttu-id="22b32-114">objetivo de Hola de este documento es tooenable tooencrypt las máquinas virtuales, incluso si tienen poca o ninguna fondo en PowerShell de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-114">hello goal of this document is tooenable you tooencrypt your virtual machines, even if you have little or no background in Azure PowerShell.</span></span>
<span data-ttu-id="22b32-115">Este documento se supone que usa Windows 10 como equipo de cliente de Hola desde el que va a configurar el cifrado del disco de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-115">This document assumes you are using Windows 10 as hello client machine from which you will configure Azure Disk Encryption.</span></span>

<span data-ttu-id="22b32-116">Existen muchos enfoques que pueden ser requisitos previos de hello toosetup utilizado y cifrado tooconfigure máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-116">There are many approaches that can be used toosetup hello prerequisites and tooconfigure encryption for Azure Virtual Machines.</span></span> <span data-ttu-id="22b32-117">Si ya están muy versado en Azure PowerShell o CLI de Azure, quizás prefiera toouse los métodos alternativos.</span><span class="sxs-lookup"><span data-stu-id="22b32-117">If you are already well-versed in Azure PowerShell or Azure CLI, then you may prefer toouse alternate approaches.</span></span>

> [!NOTE]
> <span data-ttu-id="22b32-118">toolearn más información acerca del cifrado de tooconfiguring de métodos alternativos para máquinas virtuales de Azure, visite [cifrado de disco de Azure para Windows y máquinas virtuales de Linux Azure](https://gallery.technet.microsoft.com/Azure-Disk-Encryption-for-a0018eb0).</span><span class="sxs-lookup"><span data-stu-id="22b32-118">toolearn more about alternate approaches tooconfiguring encryption for Azure virtual machines, please see [Azure Disk Encryption for Windows and Linux Azure Virtual Machines](https://gallery.technet.microsoft.com/Azure-Disk-Encryption-for-a0018eb0).</span></span>
>
>

## <a name="install-and-configure-azure-powershell"></a><span data-ttu-id="22b32-119">Instale y configure Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="22b32-119">Install and configure Azure PowerShell</span></span>
<span data-ttu-id="22b32-120">Debe tener Azure PowerShell versión 1.2.1 o superior instalado en el equipo.</span><span class="sxs-lookup"><span data-stu-id="22b32-120">You need Azure PowerShell version 1.2.1 or above installed on your computer.</span></span> <span data-ttu-id="22b32-121">artículo de Hello [cómo tooinstall y configurar Azure PowerShell](/powershell/azure/overview) contiene todos los pasos de hello necesita tooprovision su toowork equipo con Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="22b32-121">hello article [How tooinstall and configure Azure PowerShell](/powershell/azure/overview) contains all hello steps you need tooprovision your computer toowork with Azure PowerShell.</span></span> <span data-ttu-id="22b32-122">enfoque más sencillo de Hello es el enfoque de instalación de Web PI toouse Hola mencionado en dicho artículo.</span><span class="sxs-lookup"><span data-stu-id="22b32-122">hello most straightforward approach is toouse hello Web PI installation approach mentioned in that article.</span></span> <span data-ttu-id="22b32-123">Incluso si ya tiene instalado PowerShell de Azure, instale utilizando de nuevo enfoque de hello Web PI para que tenga la versión más reciente de Hola de PowerShell de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-123">Even if you already have Azure PowerShell installed, install again using hello Web PI approach so that you have hello latest version of Azure PowerShell.</span></span>

## <a name="obtain-and-run-hello-azure-disk-encryption-prerequisites-configuration-script"></a><span data-ttu-id="22b32-124">Obtener y ejecutar script de configuración de requisitos previos de cifrado de disco de Azure Hola</span><span class="sxs-lookup"><span data-stu-id="22b32-124">Obtain and run hello Azure disk encryption prerequisites configuration script</span></span>
<span data-ttu-id="22b32-125">Hola Script de configuración de requisitos previos de cifrado de disco de Azure a configurar todos los requisitos previos de hello necesarios para el cifrado de las máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-125">hello Azure Disk Encryption Prerequisites Configuration Script will set up all hello prerequisites required for encrypting your Azure Virtual Machines.</span></span>

1. <span data-ttu-id="22b32-126">Página de GitHub de toohello vaya con hello [Script requisitos previos de instalación de Azure disco cifrado](https://github.com/Azure/azure-powershell/blob/master/src/ResourceManager/Compute/Commands.Compute/Extension/AzureDiskEncryption/Scripts/AzureDiskEncryptionPreRequisiteSetup.ps1).</span><span class="sxs-lookup"><span data-stu-id="22b32-126">Go toohello GitHub page that has hello [Azure Disk Encryption Prerequisite Setup Script](https://github.com/Azure/azure-powershell/blob/master/src/ResourceManager/Compute/Commands.Compute/Extension/AzureDiskEncryption/Scripts/AzureDiskEncryptionPreRequisiteSetup.ps1).</span></span>
2. <span data-ttu-id="22b32-127">En la página de GibHub hello, haga clic en hello **Raw** botón.</span><span class="sxs-lookup"><span data-stu-id="22b32-127">On hello GibHub page, click hello **Raw** button.</span></span>
3. <span data-ttu-id="22b32-128">Usar **CTRL+a** tooselect todos los Hola texto en la página de hello y, a continuación, usar **CTRL-C** toocopy todos Hola texto hello página toohello Portapapeles.</span><span class="sxs-lookup"><span data-stu-id="22b32-128">Use **CTRL-A** tooselect all hello text on hello page and then use **CTRL-C** toocopy all hello text on hello page toohello clipboard.</span></span>
4. <span data-ttu-id="22b32-129">Abra **el Bloc de notas** y pegue el texto hello copiado en el Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="22b32-129">Open **Notepad** and paste hello copied text into Notepad.</span></span>
5. <span data-ttu-id="22b32-130">Cree una nueva carpeta en la unidad C: denominada **AzureADEScript**.</span><span class="sxs-lookup"><span data-stu-id="22b32-130">Create a new folder on your C: drive named **AzureADEScript**.</span></span>
6. <span data-ttu-id="22b32-131">Guardar archivo de Bloc de notas de hello: haga clic en **archivo**, a continuación, haga clic en **Guardar como**.</span><span class="sxs-lookup"><span data-stu-id="22b32-131">Save hello Notepad file – click **File**, then click **Save As**.</span></span> <span data-ttu-id="22b32-132">En el cuadro de texto de nombre de archivo hello, escriba **"ADEPrereqScript.ps1"** y haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="22b32-132">In hello File name textbox, enter **“ADEPrereqScript.ps1”** and click **Save**.</span></span> <span data-ttu-id="22b32-133">(asegúrese de que se ponga comillas de hello en nombre de hello, en caso contrario, guardará el archivo hello con una extensión de archivo .txt).</span><span class="sxs-lookup"><span data-stu-id="22b32-133">(make sure you put hello quotation marks around hello name, otherwise it will save hello file with a .txt file extension).</span></span>

<span data-ttu-id="22b32-134">Ahora que se guarda el contenido del script de Hola, abra el script de Hola Hola PowerShell ISE:</span><span class="sxs-lookup"><span data-stu-id="22b32-134">Now that hello script content is saved, open hello script in hello PowerShell ISE:</span></span>

1. <span data-ttu-id="22b32-135">Hola menú Inicio, haga clic en **Cortana**.</span><span class="sxs-lookup"><span data-stu-id="22b32-135">In hello Start Menu, click **Cortana**.</span></span> <span data-ttu-id="22b32-136">Pida **Cortana** "PowerShell" escribiendo **PowerShell** en el cuadro de texto de búsqueda de hello Cortana.</span><span class="sxs-lookup"><span data-stu-id="22b32-136">Ask **Cortana** “PowerShell” by typing **PowerShell** in hello Cortana search text box.</span></span>
2. <span data-ttu-id="22b32-137">Haga clic con el botón derecho en **Windows PowerShell ISE** y haga clic en **Ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="22b32-137">Right click **Windows PowerShell ISE** and click **Run as administrator**.</span></span>
3. <span data-ttu-id="22b32-138">Hola **administrador: Windows PowerShell ISE** ventana, haga clic en **vista** y, a continuación, haga clic en **Mostrar panel de scripts**.</span><span class="sxs-lookup"><span data-stu-id="22b32-138">In hello **Administrator: Windows PowerShell ISE** window, click **View** and then click **Show Script Pane**.</span></span>
4. <span data-ttu-id="22b32-139">Si ve hello **comandos** panel de hello derecha de la ventana de hello, haga clic en hello **"x"** en hello superior derecho de hello panel tooclose se.</span><span class="sxs-lookup"><span data-stu-id="22b32-139">If you see hello **Commands** pane on hello right side of hello window, click hello **“x”** in hello top right corner of hello pane tooclose it.</span></span> <span data-ttu-id="22b32-140">Si es demasiado pequeño para toosee texto hello, use **CTRL + agregar** ("Agregar" Hola "+" iniciar sesión).</span><span class="sxs-lookup"><span data-stu-id="22b32-140">If hello text is too small for you toosee, use **CTRL+Add** (“Add” is hello “+” sign).</span></span> <span data-ttu-id="22b32-141">Si el texto hello es demasiado grande, use **CTRL + restar** (restar es hello "-" inicio de sesión).</span><span class="sxs-lookup"><span data-stu-id="22b32-141">If hello text is too large, use **CTRL+Subtract** (Subtract is hello “-“ sign).</span></span>
5. <span data-ttu-id="22b32-142">Haga clic en **Archivo** y, a continuación, en **Abrir**.</span><span class="sxs-lookup"><span data-stu-id="22b32-142">Click **File** and then click **Open**.</span></span> <span data-ttu-id="22b32-143">Navegue toohello **C:\AzureADEScript** hello y carpeta, haga doble clic en hello **ADEPrereqScript**.</span><span class="sxs-lookup"><span data-stu-id="22b32-143">Navigate toohello **C:\AzureADEScript** folder and hello double-click on hello **ADEPrereqScript**.</span></span>
6. <span data-ttu-id="22b32-144">Hola **ADEPrereqScript** contenido debería aparecer ahora en PowerShell ISE hello y está codificada por colores toohelp vea varios componentes, como comandos, parámetros y variables más fácilmente.</span><span class="sxs-lookup"><span data-stu-id="22b32-144">hello **ADEPrereqScript** contents should now appear in hello PowerShell ISE and is color-coded toohelp you see various components, such as commands, parameters and variables more easily.</span></span>

<span data-ttu-id="22b32-145">Ahora debería ver algo parecido a Hola figura a continuación.</span><span class="sxs-lookup"><span data-stu-id="22b32-145">You should now see something like hello figure below.</span></span>

![Ventana de PowerShell ISE](./media/security-center-disk-encryption/security-center-disk-encryption-fig2.png)

<span data-ttu-id="22b32-147">panel superior de Hello es que se hace referencia tooas hello "panel de scripts" y panel inferior de hello es que se hace referencia tooas hello "consola".</span><span class="sxs-lookup"><span data-stu-id="22b32-147">hello top pane is referred tooas hello “script pane” and hello bottom pane is referred tooas hello “console”.</span></span> <span data-ttu-id="22b32-148">Estos términos se utilizarán más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="22b32-148">We will use these terms later in this article.</span></span>

## <a name="run-hello-azure-disk-encryption-prerequisites-powershell-command"></a><span data-ttu-id="22b32-149">Ejecutar comando de PowerShell de requisitos previos de cifrado de disco de Azure de Hola</span><span class="sxs-lookup"><span data-stu-id="22b32-149">Run hello Azure disk encryption prerequisites PowerShell command</span></span>
<span data-ttu-id="22b32-150">Hello secuencia de comandos de requisitos previos de cifrado de disco de Azure le pedirá Hola siguiente información después de iniciar la secuencia de comandos de hello:</span><span class="sxs-lookup"><span data-stu-id="22b32-150">hello Azure Disk Encryption Prerequisites script will ask you for hello following information after you start hello script:</span></span>

* <span data-ttu-id="22b32-151">**Nombre del grupo de recursos de** : el nombre de grupo de recursos que desea tooput hello hello en el almacén de claves.</span><span class="sxs-lookup"><span data-stu-id="22b32-151">**Resource Group Name** - Name of hello Resource Group that you want tooput hello Key Vault into.</span></span>  <span data-ttu-id="22b32-152">Si no hay ya uno con ese nombre creado, se creará un nuevo grupo de recursos con nombre de Hola que especifique.</span><span class="sxs-lookup"><span data-stu-id="22b32-152">A new Resource Group with hello name you enter will be created if there isn’t already one with that name created.</span></span> <span data-ttu-id="22b32-153">Si ya tiene un grupo de recursos que desea toouse en esta suscripción, a continuación, escriba el nombre de Hola de ese grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="22b32-153">If you already have a Resource Group that you want toouse in this subscription, then enter hello name of that Resource Group.</span></span>
* <span data-ttu-id="22b32-154">**Nombre del almacén de claves** -nombre del almacén de claves de hello en que el cifrado de claves son toobe colocado.</span><span class="sxs-lookup"><span data-stu-id="22b32-154">**Key Vault Name** - Name of hello Key Vault in which encryption keys are toobe placed.</span></span> <span data-ttu-id="22b32-155">Si aún no hay ninguno, se creará un Almacén de claves con este nombre.</span><span class="sxs-lookup"><span data-stu-id="22b32-155">A new Key Vault with this name will be created if you don’t already have a Key Vault with this name.</span></span> <span data-ttu-id="22b32-156">Si ya tiene un almacén de claves que desee toouse, escriba el nombre de Hola de hello existente en el almacén de claves.</span><span class="sxs-lookup"><span data-stu-id="22b32-156">If you already have a Key Vault that you want toouse, enter hello name of hello existing Key Vault.</span></span>
* <span data-ttu-id="22b32-157">**Ubicación** -ubicación de almacén de claves de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-157">**Location** - Location of hello Key Vault.</span></span> <span data-ttu-id="22b32-158">Asegurarse de que toobe de almacén de claves y las máquinas virtuales de hello cifra Hola misma ubicación.</span><span class="sxs-lookup"><span data-stu-id="22b32-158">Make sure hello Key Vault and VMs toobe encrypted are in hello same location.</span></span> <span data-ttu-id="22b32-159">Si no conoce la ubicación de hello, hay pasos más adelante en este artículo que le mostrará cómo toofind out.</span><span class="sxs-lookup"><span data-stu-id="22b32-159">If you don’t know hello location, there are steps later in this article that will show you how toofind out.</span></span>
* <span data-ttu-id="22b32-160">**Azure Active Directory NombreAplicación** -nombre del programa Hola a aplicaciones de Azure Active Directory que serán usado toowrite secretos toohello el almacén de claves.</span><span class="sxs-lookup"><span data-stu-id="22b32-160">**Azure Active Directory Application Name** - Name of hello Azure Active Directory application that will be used toowrite secrets toohello Key Vault.</span></span> <span data-ttu-id="22b32-161">Si no existe, se creará una aplicación con este nombre.</span><span class="sxs-lookup"><span data-stu-id="22b32-161">A new application with this name will be created if one doesn't exist.</span></span> <span data-ttu-id="22b32-162">Si ya tiene una aplicación de Azure Active Directory que desea que toouse, escriba el nombre de Hola de esa aplicación de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="22b32-162">If you already have an Azure Active Directory application that you want toouse, enter hello name of that Azure Active Directory application.</span></span>

> [!NOTE]
> <span data-ttu-id="22b32-163">Si tiene curiosidad como toowhy necesita toocreate una aplicación de Azure Active Directory, vea *registrar una aplicación con Azure Active Directory* sección en el artículo hello [Introducción al almacén de claves de Azure](../key-vault/key-vault-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="22b32-163">If you’re curious as toowhy you need toocreate an Azure Active Directory application, please see *Register an application with Azure Active Directory* section in hello article [Getting Started with Azure Key Vault](../key-vault/key-vault-get-started.md).</span></span>
>
>

<span data-ttu-id="22b32-164">Lleve a cabo Hola siguiendo los pasos tooencrypt máquinas virtuales de Azure:</span><span class="sxs-lookup"><span data-stu-id="22b32-164">Perform hello following steps tooencrypt an Azure Virtual Machine:</span></span>

1. <span data-ttu-id="22b32-165">Si ha cerrado Hola PowerShell ISE, abra una instancia con privilegios elevados de hello PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="22b32-165">If you closed hello PowerShell ISE, open an elevated instance of hello PowerShell ISE.</span></span> <span data-ttu-id="22b32-166">Siga las instrucciones de hello anteriormente en este artículo si abre Hola que PowerShell ISE ya no está.</span><span class="sxs-lookup"><span data-stu-id="22b32-166">Follow hello instructions earlier in this article if hello PowerShell ISE is not already open.</span></span> <span data-ttu-id="22b32-167">Si lo ha cerrado la secuencia de comandos de hello, a continuación, abra hello **ADEPrereqScript.ps1** al hacer clic en **archivo**, a continuación, **abrir** y selecciona la secuencia de comandos de hello en hello **c:\ AzureADEScript** carpeta.</span><span class="sxs-lookup"><span data-stu-id="22b32-167">If you closed hello script, then open hello **ADEPrereqScript.ps1** clicking **File**, then **Open** and selecting hello script from hello **c:\AzureADEScript** folder.</span></span> <span data-ttu-id="22b32-168">Si ha seguido en este artículo de inicio de hello, a continuación, mover en toohello siguiente paso.</span><span class="sxs-lookup"><span data-stu-id="22b32-168">If you have followed this article from hello start, then just move on toohello next step.</span></span>
2. <span data-ttu-id="22b32-169">En la consola de Hola de hello (Hola inferior de hello PowerShell ISE) de PowerShell ISE, cambiar Hola foco toohello local del script de Hola escribiendo **cd c:\AzureADEScript** y presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-169">In hello console of hello PowerShell ISE (hello bottom pane of hello PowerShell ISE), change hello focus toohello local of hello script by typing **cd c:\AzureADEScript** and press **ENTER**.</span></span>
3. <span data-ttu-id="22b32-170">Configurar directiva de ejecución de hello en el equipo para que pueda ejecutar script de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-170">Set hello execution policy on your machine so that you can run hello script.</span></span> <span data-ttu-id="22b32-171">Tipo de **Set-ExecutionPolicy Unrestricted** Hola consola y, a continuación, presione ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="22b32-171">Type **Set-ExecutionPolicy Unrestricted** in hello console and then press ENTER.</span></span> <span data-ttu-id="22b32-172">Si ve un cuadro de diálogo informar acerca de los efectos de Hola de directiva de tooexecution de cambio de hello, haga clic en **sí tooall** o **Sí** (si ve **sí tooall**, seleccione esta opción: si no se ve **sí tooall**, a continuación, haga clic en **Sí**).</span><span class="sxs-lookup"><span data-stu-id="22b32-172">If you see a dialog box telling about hello effects of hello change tooexecution policy, click either **Yes tooall** or **Yes** (if you see **Yes tooall**, select that option – if you do not see **Yes tooall**, then click **Yes**).</span></span>
4. <span data-ttu-id="22b32-173">Inicie sesión en la cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-173">Log into your Azure account.</span></span> <span data-ttu-id="22b32-174">En la consola de hello, escriba **AzureRmAccount de inicio de sesión** y presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-174">In hello console, type **Login-AzureRmAccount** and press **ENTER**.</span></span> <span data-ttu-id="22b32-175">Aparecerá un cuadro de diálogo en el que escriba sus credenciales (asegúrese de que tiene derechos toochange Hola máquinas virtuales si no tiene derechos, no será capaz de tooencrypt ellos.</span><span class="sxs-lookup"><span data-stu-id="22b32-175">A dialog box will appear in which you enter your credentials (make sure you have rights toochange hello virtual machines – if you do not have rights, you will not be able tooencrypt them.</span></span> <span data-ttu-id="22b32-176">Si no está seguro, pregunte al administrador o propietario de la suscripción).</span><span class="sxs-lookup"><span data-stu-id="22b32-176">If you are not sure, ask your subscription owner or administrator).</span></span> <span data-ttu-id="22b32-177">Debería ver la información de los valores **Environment**, **Account**, **TenantId**, **SubscriptionId** y **CurrentStorageAccount**.</span><span class="sxs-lookup"><span data-stu-id="22b32-177">You should see information about your **Environment**, **Account**, **TenantId**, **SubscriptionId** and **CurrentStorageAccount**.</span></span> <span data-ttu-id="22b32-178">Hola copia **SubscriptionId** tooNotepad.</span><span class="sxs-lookup"><span data-stu-id="22b32-178">Copy hello **SubscriptionId** tooNotepad.</span></span> <span data-ttu-id="22b32-179">Deberá toouse esto en el paso 6 de #.</span><span class="sxs-lookup"><span data-stu-id="22b32-179">You will need toouse this in step #6.</span></span>
5. <span data-ttu-id="22b32-180">Buscar qué suscripción de la máquina virtual pertenece tooand su ubicación.</span><span class="sxs-lookup"><span data-stu-id="22b32-180">Find what subscription your virtual machine belongs tooand its location.</span></span> <span data-ttu-id="22b32-181">Vaya demasiado[https://portal.azure.com](ttps://portal.azure.com) e inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="22b32-181">Go too[https://portal.azure.com](ttps://portal.azure.com) and log in.</span></span>  <span data-ttu-id="22b32-182">En la parte izquierda de la página de Hola de hello, haga clic en **máquinas virtuales**.</span><span class="sxs-lookup"><span data-stu-id="22b32-182">On hello left side of hello page, click **Virtual Machines**.</span></span> <span data-ttu-id="22b32-183">Verá una lista de las máquinas virtuales y las suscripciones de Hola que pertenecen.</span><span class="sxs-lookup"><span data-stu-id="22b32-183">You will see a list of your virtual machines and hello subscriptions they belong to.</span></span>

   ![Máquinas virtuales](./media/security-center-disk-encryption/security-center-disk-encryption-fig3.png)
6. <span data-ttu-id="22b32-185">Devolver toohello PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="22b32-185">Return toohello PowerShell ISE.</span></span> <span data-ttu-id="22b32-186">Establecer el contexto de la suscripción de hello en el que se ejecutará el script de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-186">Set hello subscription context in which hello script will be run.</span></span> <span data-ttu-id="22b32-187">En la consola de hello, escriba **seleccione AzureRmSubscription: Id. de suscripción < your_subscription_Id >** (reemplace **< your_subscription_Id >** con su identificador de suscripción real) y presione  **Escriba**.</span><span class="sxs-lookup"><span data-stu-id="22b32-187">In hello console, type **Select-AzureRmSubscription –SubscriptionId <your_subscription_Id>** (replace **< your_subscription_Id >** with your actual Subscription ID) and press **ENTER**.</span></span> <span data-ttu-id="22b32-188">Verá información sobre el entorno, Hola **cuenta**, **TenantId**, **SubscriptionId** y **CurrentStorageAccount**.</span><span class="sxs-lookup"><span data-stu-id="22b32-188">You will see information about hello Environment, **Account**, **TenantId**, **SubscriptionId** and **CurrentStorageAccount**.</span></span>
7. <span data-ttu-id="22b32-189">Ya estás listo toorun script de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-189">You are now ready toorun hello script.</span></span> <span data-ttu-id="22b32-190">Haga clic en hello **ejecutar Script** o presionen **F5** teclado Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-190">Click hello **Run Script** button or press **F5** on hello keyboard.</span></span>

   ![Ejecución del script de PowerShell](./media/security-center-disk-encryption/security-center-disk-encryption-fig4.png)
8. <span data-ttu-id="22b32-192">script de Hola pide **resourceGroupName:** -escriba nombre Hola de *grupo de recursos* desea toouse, a continuación, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-192">hello script asks for **resourceGroupName:** - enter hello name of *Resource Group* you want toouse, then press **ENTER**.</span></span> <span data-ttu-id="22b32-193">Si no tiene uno, escriba un nombre que desee toouse para una nueva.</span><span class="sxs-lookup"><span data-stu-id="22b32-193">If you don’t have one, enter a name you want toouse for a new one.</span></span> <span data-ttu-id="22b32-194">Si ya tiene un *grupo de recursos* que desea toouse (por ejemplo, Hola uno que la máquina virtual se encuentra en), escriba Hola nombre del programa Hola a grupo de recursos existente.</span><span class="sxs-lookup"><span data-stu-id="22b32-194">If you already have a *Resource Group* that you want toouse (such as hello one that your virtual machine is in), enter hello name of hello existing Resource Group.</span></span>
9. <span data-ttu-id="22b32-195">script de Hola pide **keyVaultName:** -escriba nombre Hola de hello *el almacén de claves* que desee toouse, y después presione ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="22b32-195">hello script asks for **keyVaultName:** - enter hello name of hello *Key Vault* you want toouse, then press ENTER.</span></span> <span data-ttu-id="22b32-196">Si no tiene uno, escriba un nombre que desee toouse para una nueva.</span><span class="sxs-lookup"><span data-stu-id="22b32-196">If you don’t have one, enter a name you want toouse for a new one.</span></span> <span data-ttu-id="22b32-197">Si ya tiene un almacén de claves que desee toouse, escriba el nombre de Hola de hello existente *el almacén de claves*.</span><span class="sxs-lookup"><span data-stu-id="22b32-197">If you already have a Key Vault that you want toouse, enter hello name of hello existing *Key Vault*.</span></span>
10. <span data-ttu-id="22b32-198">script de Hola pide **ubicación:** : escriba nombre de Hola de ubicación de hello en qué Hola se encuentra máquina virtual que desee tooencrypt, a continuación, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-198">hello script asks for **location:** - enter hello name of hello location in which hello VM you want tooencrypt is located, then press **ENTER**.</span></span> <span data-ttu-id="22b32-199">Si no recuerda la ubicación de hello, volver atrás toostep #5.</span><span class="sxs-lookup"><span data-stu-id="22b32-199">If you don’t remember hello location, go back toostep #5.</span></span>
11. <span data-ttu-id="22b32-200">script de Hola pide **aadAppName:** -escriba nombre Hola de hello *Azure Active Directory* aplicación desea toouse, a continuación, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-200">hello script asks for **aadAppName:** - enter hello name of hello *Azure Active Directory* application you want toouse, then press **ENTER**.</span></span> <span data-ttu-id="22b32-201">Si no tiene uno, escriba un nombre que desee toouse para una nueva.</span><span class="sxs-lookup"><span data-stu-id="22b32-201">If you don’t have one, enter a name you want toouse for a new one.</span></span> <span data-ttu-id="22b32-202">Si ya tiene un *aplicación de Azure Active Directory* que desea toouse, escriba nombre Hola de hello existente *aplicación de Azure Active Directory*.</span><span class="sxs-lookup"><span data-stu-id="22b32-202">If you already have an *Azure Active Directory application* that you want toouse, enter hello name of hello existing *Azure Active Directory application*.</span></span>
12. <span data-ttu-id="22b32-203">Aparece un cuadro de diálogo de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="22b32-203">A log in dialog box will appear.</span></span> <span data-ttu-id="22b32-204">Proporcione sus credenciales (Sí, iniciar sesión una vez, pero ahora necesita toodo vuelva a).</span><span class="sxs-lookup"><span data-stu-id="22b32-204">Provide your credentials (yes, you have logged in once, but now you need toodo it again).</span></span>
13. <span data-ttu-id="22b32-205">Hola script se ejecuta y cuando haya finalizado, le pedirá que los valores de hello toocopy de hello **aadClientID**, **aadClientSecret**, **diskEncryptionKeyVaultUrl**y **keyVaultResourceId**.</span><span class="sxs-lookup"><span data-stu-id="22b32-205">hello script runs and when complete it will ask you toocopy hello values of hello **aadClientID**, **aadClientSecret**, **diskEncryptionKeyVaultUrl**, and **keyVaultResourceId**.</span></span> <span data-ttu-id="22b32-206">Copiar cada uno de estos Portapapeles toohello de valores y péguelos en el Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="22b32-206">Copy each of these values toohello clipboard and paste them into Notepad.</span></span>
14. <span data-ttu-id="22b32-207">Devolver toohello PowerShell ISE y coloque el cursor de hello final hello de la última línea de hello y presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-207">Return toohello PowerShell ISE and place hello cursor at hello end of hello last line, and press **ENTER**.</span></span>

<span data-ttu-id="22b32-208">salida de Hello de script de Hola debe tener un aspecto como pantalla de bienvenida a continuación:</span><span class="sxs-lookup"><span data-stu-id="22b32-208">hello output of hello script should look something like hello screen below:</span></span>

![Salida de PowerShell](./media/security-center-disk-encryption/security-center-disk-encryption-fig5.png)

## <a name="encrypt-hello-azure-virtual-machine"></a><span data-ttu-id="22b32-210">Cifrar Hola máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="22b32-210">Encrypt hello Azure virtual machine</span></span>
<span data-ttu-id="22b32-211">Se está ahora listo tooencrypt la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="22b32-211">You are now ready tooencrypt your virtual machine.</span></span> <span data-ttu-id="22b32-212">Si la máquina virtual se encuentra en Hola mismo grupo de recursos como su almacén de claves, puede mover en la sección de pasos de cifrado de toohello.</span><span class="sxs-lookup"><span data-stu-id="22b32-212">If your virtual machine is located in hello same Resource Group as your Key Vault, you can move on toohello encryption steps section.</span></span> <span data-ttu-id="22b32-213">Sin embargo, si la máquina virtual no está en hello mismo grupo de recursos como su almacén de claves, necesitará tooenter siguiente de hello en la consola de hello en hello PowerShell ISE:</span><span class="sxs-lookup"><span data-stu-id="22b32-213">However, if your virtual machine is not in hello same Resource Group as your Key Vault, you will need tooenter hello following in hello console in hello PowerShell ISE:</span></span>

<span data-ttu-id="22b32-214">**$resourceGroupName = &lt;’Virtual_Machine_RG’&gt;**</span><span class="sxs-lookup"><span data-stu-id="22b32-214">**$resourceGroupName = <’Virtual_Machine_RG’>**</span></span>

<span data-ttu-id="22b32-215">Reemplace **< Virtual_Machine_RG >** con nombre de Hola Hola del grupo de recursos en el que se encuentran las máquinas virtuales, flanqueado por comillas simples.</span><span class="sxs-lookup"><span data-stu-id="22b32-215">Replace **< Virtual_Machine_RG >** with hello name of hello Resource Group in which your virtual machines are contained, surrounded by a single quote.</span></span> <span data-ttu-id="22b32-216">A continuación, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-216">Then press **ENTER**.</span></span>
<span data-ttu-id="22b32-217">tooconfirm que Hola correcta de escribir el nombre de grupo de recursos, escriba el siguiente de Hola Hola consola de PowerShell ISE:</span><span class="sxs-lookup"><span data-stu-id="22b32-217">tooconfirm that hello correct Resource Group name was entered, type hello following in hello PowerShell ISE console:</span></span>

<span data-ttu-id="22b32-218">**$resourceGroupName**</span><span class="sxs-lookup"><span data-stu-id="22b32-218">**$resourceGroupName**</span></span>

<span data-ttu-id="22b32-219">Presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-219">Press **ENTER**.</span></span> <span data-ttu-id="22b32-220">Debería ver el nombre de hello del grupo de recursos que se encuentran las máquinas virtuales en.</span><span class="sxs-lookup"><span data-stu-id="22b32-220">You should see hello name of Resource Group that your virtual machines are located in.</span></span> <span data-ttu-id="22b32-221">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="22b32-221">For example:</span></span>

![Salida de PowerShell](./media/security-center-disk-encryption/security-center-disk-encryption-fig6.png)

### <a name="encryption-steps"></a><span data-ttu-id="22b32-223">Pasos de cifrado</span><span class="sxs-lookup"><span data-stu-id="22b32-223">Encryption steps</span></span>
<span data-ttu-id="22b32-224">En primer lugar, necesita nombre de tootell PowerShell Hola de máquina virtual de hello desea tooencrypt.</span><span class="sxs-lookup"><span data-stu-id="22b32-224">First, you need tootell PowerShell hello name of hello virtual machine you want tooencrypt.</span></span> <span data-ttu-id="22b32-225">En la consola de hello, escriba:</span><span class="sxs-lookup"><span data-stu-id="22b32-225">In hello console, type:</span></span>

<span data-ttu-id="22b32-226">**$vmName = &lt;’your_vm_name’&gt;**</span><span class="sxs-lookup"><span data-stu-id="22b32-226">**$vmName = <’your_vm_name’>**</span></span>

<span data-ttu-id="22b32-227">Reemplace **<'your_vm_name ' >** con el nombre de saludo de la máquina virtual (asegúrese de que nombre Hola se incluye entre comillas simples) y, a continuación, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-227">Replace **<’your_vm_name’>** with hello name of your VM (make sure hello name is surrounded by a single quote) and then press **ENTER**.</span></span>

<span data-ttu-id="22b32-228">tooconfirm que Hola correcta de escribir el nombre de máquina virtual, escriba:</span><span class="sxs-lookup"><span data-stu-id="22b32-228">tooconfirm that hello correct VM name was entered, type:</span></span>

<span data-ttu-id="22b32-229">**$vmName**</span><span class="sxs-lookup"><span data-stu-id="22b32-229">**$vmName**</span></span>

<span data-ttu-id="22b32-230">Presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-230">Press **ENTER**.</span></span> <span data-ttu-id="22b32-231">Debería ver Hola nombre de máquina virtual de hello desea tooencrypt.</span><span class="sxs-lookup"><span data-stu-id="22b32-231">You should see hello name of hello virtual machine you want tooencrypt.</span></span> <span data-ttu-id="22b32-232">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="22b32-232">For example:</span></span>

![Salida de PowerShell](./media/security-center-disk-encryption/security-center-disk-encryption-fig7.png)

<span data-ttu-id="22b32-234">Hay dos métodos toorun Hola cifrado comando tooencrypt todas las unidades en la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-234">There are two methods toorun hello encryption command tooencrypt all drives on hello virtual machine.</span></span> <span data-ttu-id="22b32-235">Hola primer método es hello tootype siguiente comando en la consola de PowerShell ISE hello:</span><span class="sxs-lookup"><span data-stu-id="22b32-235">hello first method is tootype hello following command in hello PowerShell ISE console:</span></span>

~~~
Set-AzureRmVMDiskEncryptionExtension -ResourceGroupName $resourceGroupName -VMName $vmName -AadClientID $aadClientID -AadClientSecret $aadClientSecret -DiskEncryptionKeyVaultUrl $diskEncryptionKeyVaultUrl -DiskEncryptionKeyVaultId $keyVaultResourceId -VolumeType All
~~~

<span data-ttu-id="22b32-236">Después de escribir este comando, presione **ENTRAR**.</span><span class="sxs-lookup"><span data-stu-id="22b32-236">After typing this command press **ENTER**.</span></span>

<span data-ttu-id="22b32-237">Hola segundo método es tooclick en panel de scripts de hello (panel superior de Hola de hello PowerShell ISE) y desplácese hacia abajo de la parte inferior de toohello de script de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-237">hello second method is tooclick in hello script pane (hello top pane of hello PowerShell ISE) and scroll down toohello bottom of hello script.</span></span> <span data-ttu-id="22b32-238">Resalte comando hello mencionado anteriormente y, a continuación, haga clic y, a continuación, haga clic en **Ejecutar selección** o presione **F8** teclado Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-238">Highlight hello command listed above, and then right click it and then click **Run Selection** or press **F8** on hello keyboard.</span></span>

![PowerShell ISE](./media/security-center-disk-encryption/security-center-disk-encryption-fig8.png)

<span data-ttu-id="22b32-240">Independientemente del método hello usas, aparecerá un cuadro de diálogo que le informa de que tarda 10 y 15 minutos para hello operación toocomplete.</span><span class="sxs-lookup"><span data-stu-id="22b32-240">Regardless of hello method you use, a dialog box will appear informing you that it will take 10-15 minutes for hello operation toocomplete.</span></span> <span data-ttu-id="22b32-241">Haga clic en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="22b32-241">Click **Yes**.</span></span>

<span data-ttu-id="22b32-242">Mientras lleva a cabo el proceso de cifrado de hello, puede devolver toohello Portal de Azure y ver estado de saludo de la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-242">While hello encryption process is taking place, you can return toohello Azure Portal and see hello status of hello virtual machine.</span></span> <span data-ttu-id="22b32-243">En la parte izquierda de la página de Hola de hello, haga clic en **máquinas virtuales**, a continuación, en hello **máquinas virtuales** hoja, haga clic en nombre de Hola de máquina virtual de hello está cifrado.</span><span class="sxs-lookup"><span data-stu-id="22b32-243">On hello left side of hello page, click **Virtual Machines**, then in hello **Virtual Machines** blade, click hello name of hello virtual machine you’re encrypting.</span></span> <span data-ttu-id="22b32-244">En la hoja de Hola que aparece, observará que hello **estado** dice que es **actualizar**.</span><span class="sxs-lookup"><span data-stu-id="22b32-244">In hello blade that appears, you’ll notice that hello **Status** says that it’s **Updating**.</span></span> <span data-ttu-id="22b32-245">Esto demuestra que el cifrado está en proceso.</span><span class="sxs-lookup"><span data-stu-id="22b32-245">This demonstrates that encryption is in process.</span></span>

![Obtener más detalles sobre Hola VM](./media/security-center-disk-encryption/security-center-disk-encryption-fig9.png)

<span data-ttu-id="22b32-247">Devolver toohello PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="22b32-247">Return toohello PowerShell ISE.</span></span> <span data-ttu-id="22b32-248">Cuando se completa el script de Hola, podrá ver lo que aparece en la siguiente ilustración de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-248">When hello script completes, you’ll see what appears in hello figure below.</span></span>

![Salida de PowerShell](./media/security-center-disk-encryption/security-center-disk-encryption-fig10.png)

<span data-ttu-id="22b32-250">Ahora se cifra toodemonstrate que Hola máquina virtual, devolver toohello Portal de Azure y haga clic en **máquinas virtuales** en la parte izquierda de la página de Hola de Hola.</span><span class="sxs-lookup"><span data-stu-id="22b32-250">toodemonstrate that hello virtual machine is now encrypted, return toohello Azure Portal and click **Virtual Machines** on hello left side of hello page.</span></span> <span data-ttu-id="22b32-251">Haga clic en el nombre de Hola de máquina virtual de Hola que se ha cifrado.</span><span class="sxs-lookup"><span data-stu-id="22b32-251">Click hello name of hello virtual machine you encrypted.</span></span> <span data-ttu-id="22b32-252">Hola **configuración** hoja, haga clic en **discos**.</span><span class="sxs-lookup"><span data-stu-id="22b32-252">In hello **Settings** blade, click **Disks**.</span></span>

![Opciones de configuración](./media/security-center-disk-encryption/security-center-disk-encryption-fig11.png)

<span data-ttu-id="22b32-254">En hello **discos** hoja, verá que **cifrado** es **habilitado**.</span><span class="sxs-lookup"><span data-stu-id="22b32-254">On hello **Disks** blade, you will see that **Encryption** is **Enabled**.</span></span>

![Propiedades de discos](./media/security-center-disk-encryption/security-center-disk-encryption-fig12.png)

## <a name="next-steps"></a><span data-ttu-id="22b32-256">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="22b32-256">Next steps</span></span>
<span data-ttu-id="22b32-257">En este documento, se habrá aprendido cómo tooencrypt máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-257">In this document, you learned how tooencrypt an Azure Virtual Machine.</span></span> <span data-ttu-id="22b32-258">toolearn más información acerca del centro de seguridad de Azure, vea Hola recursos siguientes:</span><span class="sxs-lookup"><span data-stu-id="22b32-258">toolearn more about Azure Security Center, see hello following:</span></span>

* <span data-ttu-id="22b32-259">[Supervisión de estado de seguridad de Azure Security Center](security-center-monitoring.md) : Obtenga información acerca de cómo toomonitor Hola estado de los recursos de Azure</span><span class="sxs-lookup"><span data-stu-id="22b32-259">[Security health monitoring in Azure Security Center](security-center-monitoring.md) – Learn how toomonitor hello health of your Azure resources</span></span>
* <span data-ttu-id="22b32-260">[Toosecurity responde y administrar las alertas en Azure Security Center](security-center-managing-and-responding-alerts.md) -Obtenga información acerca de cómo toomanage y que responden las alertas de toosecurity</span><span class="sxs-lookup"><span data-stu-id="22b32-260">[Managing and responding toosecurity alerts in Azure Security Center](security-center-managing-and-responding-alerts.md) - Learn how toomanage and respond toosecurity alerts</span></span>
* <span data-ttu-id="22b32-261">[Preguntas más frecuentes de Azure Security Center](security-center-faq.md) : preguntas más frecuentes sobre el uso de servicio de Hola de búsqueda</span><span class="sxs-lookup"><span data-stu-id="22b32-261">[Azure Security Center FAQ](security-center-faq.md) – Find frequently asked questions about using hello service</span></span>
* <span data-ttu-id="22b32-262">[Blog de seguridad de Azure](http://blogs.msdn.com/b/azuresecurity/) : Encuentre entradas de blog sobre el cumplimiento y la seguridad de Azure.</span><span class="sxs-lookup"><span data-stu-id="22b32-262">[Azure Security Blog](http://blogs.msdn.com/b/azuresecurity/) – Find blog posts about Azure security and compliance</span></span>

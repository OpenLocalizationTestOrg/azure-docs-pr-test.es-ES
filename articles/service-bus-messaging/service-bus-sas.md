---
title: "autenticación de Service Bus aaaAzure con firmas de acceso compartido | Documentos de Microsoft"
description: "Información general sobre la autenticación en Service Bus con Firma de acceso compartido, detalles de la autenticación con SAS en Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 773bb11720384d7245820b56dc25b8e064ffa746
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="a704a-103">Autenticación en Service Bus con Firmas de acceso compartido</span><span class="sxs-lookup"><span data-stu-id="a704a-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="a704a-104">*Firmas de acceso compartido* (SAS) son el mecanismo de seguridad principal de hello para la mensajería de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-104">*Shared Access Signatures* (SAS) are hello primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="a704a-105">Este artículo describe SAS, cómo funcionan y cómo toouse ellas de forma independiente de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="a704a-105">This article discusses SAS, how they work, and how toouse them in a platform-agnostic way.</span></span>

<span data-ttu-id="a704a-106">Autenticación de SAS permite que las aplicaciones tooauthenticate tooService Bus mediante una clave de acceso configurada en el espacio de nombres de Hola o en hello entidad (cola o tema) de mensajería con qué derechos específicos que están asociados.</span><span class="sxs-lookup"><span data-stu-id="a704a-106">SAS authentication enables applications tooauthenticate tooService Bus using an access key configured on hello namespace, or on hello messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="a704a-107">A continuación, puede usar esta clave toogenerate un token SAS que los clientes pueden usar a su vez tooauthenticate tooService Bus.</span><span class="sxs-lookup"><span data-stu-id="a704a-107">You can then use this key toogenerate a SAS token that clients can in turn use tooauthenticate tooService Bus.</span></span>

<span data-ttu-id="a704a-108">Compatibilidad con la autenticación de SAS se incluye en hello Azure SDK versión 2.0 y versiones posterior.</span><span class="sxs-lookup"><span data-stu-id="a704a-108">SAS authentication support is included in hello Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="a704a-109">Información general de SAS</span><span class="sxs-lookup"><span data-stu-id="a704a-109">Overview of SAS</span></span>

<span data-ttu-id="a704a-110">Firmas de acceso compartido son un mecanismo de autenticación basado en URI y valores hash seguros SHA-256.</span><span class="sxs-lookup"><span data-stu-id="a704a-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="a704a-111">SAS es un mecanismo muy eficaz que se usa por todos los servicios del Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="a704a-112">En el uso real, SAS tiene dos componentes: una *directiva de acceso compartido* y una *firma de acceso compartido* (a menudo denominada *token*).</span><span class="sxs-lookup"><span data-stu-id="a704a-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="a704a-113">Autenticación con SAS en el Bus de servicio implica la configuración de Hola de una clave criptográfica con derechos asociados en un recurso de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-113">SAS authentication in Service Bus involves hello configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="a704a-114">Los clientes notificación acceso tooService Bus recursos presentando un token SAS.</span><span class="sxs-lookup"><span data-stu-id="a704a-114">Clients claim access tooService Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="a704a-115">Este token consta del URI que se obtiene acceso de recurso de hello y una fecha de expiración firmada con hello configurado clave.</span><span class="sxs-lookup"><span data-stu-id="a704a-115">This token consists of hello resource URI being accessed, and an expiry signed with hello configured key.</span></span>

<span data-ttu-id="a704a-116">Puede configurar reglas de autorización de firma de acceso compartido en [retransmisiones](service-bus-fundamentals-hybrid-solutions.md#relays), [colas](service-bus-fundamentals-hybrid-solutions.md#queues) y [temas](service-bus-fundamentals-hybrid-solutions.md#topics) de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="a704a-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="a704a-117">La autenticación SAS usa Hola siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="a704a-117">SAS authentication uses hello following elements:</span></span>

* <span data-ttu-id="a704a-118">[Regla de autorización de acceso compartido](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): clave criptográfica principal de 256 bits en representación Base64, una clave secundaria opcional y un nombre de clave y derechos asociados (una colección de derechos de *escucha*, *envío* o *administración*).</span><span class="sxs-lookup"><span data-stu-id="a704a-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="a704a-119">[Firma de acceso compartido](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: generado con hello HMAC-SHA256 de una cadena de recurso, que consta de hello URI del recurso de Hola que se tiene acceso y una fecha de expiración, con la clave criptográfica de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using hello HMAC-SHA256 of a resource string, consisting of hello URI of hello resource that is accessed and an expiry, with hello cryptographic key.</span></span> <span data-ttu-id="a704a-120">firma de Hola y otros elementos que se describen en las secciones siguientes de hello tienen formato de un saludo de tooform cadena token SAS.</span><span class="sxs-lookup"><span data-stu-id="a704a-120">hello signature and other elements described in hello following sections are formatted into a string tooform hello SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="a704a-121">Directiva de acceso compartido</span><span class="sxs-lookup"><span data-stu-id="a704a-121">Shared access policy</span></span>

<span data-ttu-id="a704a-122">Una toounderstand importante sobre SAS es que inicia con una directiva.</span><span class="sxs-lookup"><span data-stu-id="a704a-122">An important thing toounderstand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="a704a-123">Para cada directiva, decida tres tipos de información: **nombre**, **ámbito** y **permisos**.</span><span class="sxs-lookup"><span data-stu-id="a704a-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="a704a-124">Hola **nombre** justamente eso; es un nombre único dentro de ese ámbito.</span><span class="sxs-lookup"><span data-stu-id="a704a-124">hello **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="a704a-125">Hola ámbito es bastante fácil: Hola de su URI del recurso de hello en cuestión.</span><span class="sxs-lookup"><span data-stu-id="a704a-125">hello scope is easy enough: it's hello URI of hello resource in question.</span></span> <span data-ttu-id="a704a-126">Un espacio de nombres de Bus de servicio, el ámbito de hello es nombre Hola de dominio completo (FQDN), como `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="a704a-126">For a Service Bus namespace, hello scope is hello fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="a704a-127">permisos disponibles de Hola para una directiva son autoexplicativos en gran medida:</span><span class="sxs-lookup"><span data-stu-id="a704a-127">hello available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="a704a-128">Los métodos Send</span><span class="sxs-lookup"><span data-stu-id="a704a-128">Send</span></span>
* <span data-ttu-id="a704a-129">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-129">Listen</span></span>
* <span data-ttu-id="a704a-130">Administrar</span><span class="sxs-lookup"><span data-stu-id="a704a-130">Manage</span></span>

<span data-ttu-id="a704a-131">Después de crear directivas de hello, se asigna un *Primary Key* y un *clave secundaria*.</span><span class="sxs-lookup"><span data-stu-id="a704a-131">After you create hello policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="a704a-132">Son claves de alta seguridad criptográfica.</span><span class="sxs-lookup"><span data-stu-id="a704a-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="a704a-133">No perderlo o la pérdida de ellos: siempre estará disponibles en hello [portal de Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="a704a-133">Don't lose them or leak them - they'll always be available in hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="a704a-134">Puede utilizar cualquiera de las claves de hello generado y se puede regenerar en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="a704a-134">You can use either of hello generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="a704a-135">Sin embargo, si generar o cambiar la clave principal de hello en la directiva de hello, se invalidarán las firmas de acceso compartido creado a partir de él.</span><span class="sxs-lookup"><span data-stu-id="a704a-135">However, if you regenerate or change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="a704a-136">Cuando se crea un espacio de nombres de Bus de servicio, automáticamente se crea una directiva para hello todo espacio de nombres denominado **RootManageSharedAccessKey**, y esta directiva tiene todos los permisos.</span><span class="sxs-lookup"><span data-stu-id="a704a-136">When you create a Service Bus namespace, a policy is automatically created for hello entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="a704a-137">No inicia sesión como **raíz**; por tanto, no use esta directiva a menos que exista realmente una buena razón.</span><span class="sxs-lookup"><span data-stu-id="a704a-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="a704a-138">También puede crear directivas adicionales en hello **configurar** pestaña de espacio de nombres de hello en el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-138">You can create additional policies in hello **Configure** tab for hello namespace in hello portal.</span></span> <span data-ttu-id="a704a-139">Es importante toonote que sólo puede tener un nivel del árbol único en el Bus de servicio (espacio de nombres, cola, etc.) hasta too12 las directivas adjuntas tooit.</span><span class="sxs-lookup"><span data-stu-id="a704a-139">It's important toonote that a single tree level in Service Bus (namespace, queue, etc.) can only have up too12 policies attached tooit.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="a704a-140">Configuración de la autenticación de firma de acceso compartido</span><span class="sxs-lookup"><span data-stu-id="a704a-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="a704a-141">Puede configurar hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) regla en espacios de nombres de Bus de servicio, colas o temas.</span><span class="sxs-lookup"><span data-stu-id="a704a-141">You can configure hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="a704a-142">Configurar un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) en un Bus de servicio de suscripción no se admite actualmente, pero puede usar las reglas configuradas en un toosubscriptions de acceso de toosecure de espacio de nombres o un tema.</span><span class="sxs-lookup"><span data-stu-id="a704a-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic toosecure access toosubscriptions.</span></span> <span data-ttu-id="a704a-143">Para obtener un ejemplo funcional que muestra este procedimiento, vea hello [autenticación de uso de firma de acceso compartido (SAS) con suscripciones de Bus de servicio](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) ejemplo.</span><span class="sxs-lookup"><span data-stu-id="a704a-143">For a working sample that illustrates this procedure, see hello [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="a704a-144">Puede configurarse un máximo de 12 reglas en un espacio de nombres, una cola o un tema del Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="a704a-145">Las reglas que se configuran en un espacio de nombres de Bus de servicio aplican las entidades tooall en ese espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="a704a-145">Rules that are configured on a Service Bus namespace apply tooall entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="a704a-147">En esta ilustración, Hola *manageRuleNS*, *sendRuleNS*, y *listenRuleNS* tooboth cola Q1 y tema T1, aplican las reglas de autorización mientras *listenRuleQ*  y *sendRuleQ* aplicar solo tooqueue Q1 y *sendRuleT* se aplica solo tootopic T1.</span><span class="sxs-lookup"><span data-stu-id="a704a-147">In this figure, hello *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply tooboth queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only tooqueue Q1 and *sendRuleT* applies only tootopic T1.</span></span>

<span data-ttu-id="a704a-148">Hola parámetros principales de un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="a704a-148">hello key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="a704a-149">Parámetro</span><span class="sxs-lookup"><span data-stu-id="a704a-149">Parameter</span></span> | <span data-ttu-id="a704a-150">Descripción</span><span class="sxs-lookup"><span data-stu-id="a704a-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a704a-151">*KeyName*</span><span class="sxs-lookup"><span data-stu-id="a704a-151">*KeyName*</span></span> |<span data-ttu-id="a704a-152">Una cadena que describe la regla de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-152">A string that describes hello authorization rule.</span></span> |
| <span data-ttu-id="a704a-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="a704a-153">*PrimaryKey*</span></span> |<span data-ttu-id="a704a-154">Una codificación base64 de 256 bits clave principal para firmar y validar el token de SAS de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-154">A base64-encoded 256-bit primary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="a704a-155">*SecondaryKey*</span><span class="sxs-lookup"><span data-stu-id="a704a-155">*SecondaryKey*</span></span> |<span data-ttu-id="a704a-156">Una con codificación base64 de 256 bits clave secundaria para firmar y validar el token de SAS de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-156">A base64-encoded 256-bit secondary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="a704a-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="a704a-157">*AccessRights*</span></span> |<span data-ttu-id="a704a-158">Una lista de derechos de acceso concedidos por la regla de autorización de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-158">A list of access rights granted by hello authorization rule.</span></span> <span data-ttu-id="a704a-159">Estos derechos pueden ser cualquier colección de derechos de escucha, envío y administración.</span><span class="sxs-lookup"><span data-stu-id="a704a-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="a704a-160">Cuando se aprovisiona un espacio de nombres de Bus de servicio, un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), con [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) establecido demasiado**RootManageSharedAccessKey**, se crea de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a704a-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set too**RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="a704a-161">Generación de firmas de acceso compartido (tokens)</span><span class="sxs-lookup"><span data-stu-id="a704a-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="a704a-162">Hola propia directiva no es el token de acceso de Hola para Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-162">hello policy itself is not hello access token for Service Bus.</span></span> <span data-ttu-id="a704a-163">Es objeto de Hola desde qué Hola se genera el token de acceso - mediante la clave principal o secundaria Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-163">It is hello object from which hello access token is generated - using either hello primary or secondary key.</span></span> <span data-ttu-id="a704a-164">Cualquier cliente que tiene toohello de acceso especificadas en la regla de autorización de acceso compartido de Hola de claves de firma puede generar el token de SAS de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-164">Any client that has access toohello signing keys specified in hello shared access authorization rule can generate hello SAS token.</span></span> <span data-ttu-id="a704a-165">símbolo (token) de Hello genera reflexionar profundamente sobre una cadena en hello siguiendo el formato:</span><span class="sxs-lookup"><span data-stu-id="a704a-165">hello token is generated by carefully crafting a string in hello following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="a704a-166">Donde `signature-string` es hash Hola SHA-256 de ámbito de hello del token de hello (**ámbito** tal y como se describe en la sección anterior de hello) con un CRLF anexado y una hora de expiración (en segundos transcurridos desde la época de hello: `00:00:00 UTC` de 1 de enero de 1970).</span><span class="sxs-lookup"><span data-stu-id="a704a-166">Where `signature-string` is hello SHA-256 hash of hello scope of hello token (**scope** as described in hello previous section) with a CRLF appended and an expiry time (in seconds since hello epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="a704a-167">tooavoid una hora de caducidad del token corto, se recomienda que codificar el valor de hora de expiración de hello como al menos un entero de 32 bits sin signo o, preferiblemente en un entero largo (64 bits).</span><span class="sxs-lookup"><span data-stu-id="a704a-167">tooavoid a short token expiry time, it is recommended that you encode hello expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="a704a-168">hash de Hello parece similar toohello siguiente pseudocódigo y devuelve 32 bytes.</span><span class="sxs-lookup"><span data-stu-id="a704a-168">hello hash looks similar toohello following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="a704a-169">valores de Hello no aplica un algoritmo hash que se encuentran en hello **SharedAccessSignature** de cadena para que hello destinatario puede calcular el hash de hello con hello toobe seguro de que se devuelven los mismos parámetros Hola el mismo resultado.</span><span class="sxs-lookup"><span data-stu-id="a704a-169">hello non-hashed values are in hello **SharedAccessSignature** string so that hello recipient can compute hello hash with hello same parameters, toobe sure that it returns hello same result.</span></span> <span data-ttu-id="a704a-170">Hola URI especifica el ámbito de Hola y nombre de clave de hello identifica Hola directiva toobe utiliza toocompute Hola hash.</span><span class="sxs-lookup"><span data-stu-id="a704a-170">hello URI specifies hello scope, and hello key name identifies hello policy toobe used toocompute hello hash.</span></span> <span data-ttu-id="a704a-171">Esto es importante desde una perspectiva de seguridad.</span><span class="sxs-lookup"><span data-stu-id="a704a-171">This is important from a security standpoint.</span></span> <span data-ttu-id="a704a-172">Si firma hello no coincide con la que calcula qué destinatario hello (Service Bus), se deniega el acceso.</span><span class="sxs-lookup"><span data-stu-id="a704a-172">If hello signature doesn't match that which hello recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="a704a-173">En este momento se puede conocer ese remitente Hola tenía la clave de acceso toohello y debe tener derechos de hello especificado en la directiva de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-173">At this point you can be sure that hello sender had access toohello key and should be granted hello rights specified in hello policy.</span></span>

<span data-ttu-id="a704a-174">Tenga en cuenta que debe usar el URI de recurso de hello codificado para esta operación.</span><span class="sxs-lookup"><span data-stu-id="a704a-174">Note that you should use hello encoded resource URI for this operation.</span></span> <span data-ttu-id="a704a-175">URI de recurso de Hello es hello que se notifica el URI completo de hello acceso a Service Bus toowhich los recursos.</span><span class="sxs-lookup"><span data-stu-id="a704a-175">hello resource URI is hello full URI of hello Service Bus resource toowhich access is claimed.</span></span> <span data-ttu-id="a704a-176">Por ejemplo, `http://<namespace>.servicebus.windows.net/<entityPath>` o `sb://<namespace>.servicebus.windows.net/<entityPath>`; es decir, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="a704a-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="a704a-177">regla de autorización de acceso compartido Hola usada para firmar debe configurarse en la entidad de hello especificada por este identificador URI, o en uno de sus elementos primarios jerárquicos.</span><span class="sxs-lookup"><span data-stu-id="a704a-177">hello shared access authorization rule used for signing must be configured on hello entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="a704a-178">Por ejemplo, `http://contoso.servicebus.windows.net/contosoTopics/T1` o `http://contoso.servicebus.windows.net` en el ejemplo anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in hello previous example.</span></span>

<span data-ttu-id="a704a-179">Un token SAS es válido para todos los recursos en hello `<resourceURI>` utilizados en hello `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="a704a-179">A SAS token is valid for all resources under hello `<resourceURI>` used in hello `signature-string`.</span></span>

<span data-ttu-id="a704a-180">Hola [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) en hello SAS token refiere toohello **keyName** de hello regla de autorización de acceso compartido utiliza símbolo (token) de toogenerate Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-180">hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token refers toohello **keyName** of hello shared access authorization rule used toogenerate hello token.</span></span>

<span data-ttu-id="a704a-181">Hola *URL-encoded-resourceURI* debe Hola igual Hola URI que se usa en string-to-sign de Hola durante el cálculo de Hola de firma de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-181">hello *URL-encoded-resourceURI* must be hello same as hello URI used in hello string-to-sign during hello computation of hello signature.</span></span> <span data-ttu-id="a704a-182">Debe estar [codificado por porcentaje](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="a704a-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="a704a-183">Se recomienda regenerar periódicamente las claves de hello utilizadas en hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objeto.</span><span class="sxs-lookup"><span data-stu-id="a704a-183">It is recommended that you periodically regenerate hello keys used in hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="a704a-184">Las aplicaciones deben utilizar generalmente hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate un token de SAS.</span><span class="sxs-lookup"><span data-stu-id="a704a-184">Applications should generally use hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate a SAS token.</span></span> <span data-ttu-id="a704a-185">Al volver a generar las claves de hello, debe reemplazar hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) con principal antiguo Hola clave y generar una nueva clave como la nueva clave principal de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-185">When regenerating hello keys, you should replace hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with hello old primary key, and generate a new key as hello new primary key.</span></span> <span data-ttu-id="a704a-186">Esto le permite toocontinue mediante tokens de autorización que se emitieron con la clave principal antigua de Hola y que aún no haya expirado.</span><span class="sxs-lookup"><span data-stu-id="a704a-186">This enables you toocontinue using tokens for authorization that were issued with hello old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="a704a-187">Si una clave está en peligro y tiene toorevoke Hola claves, puede volver a generar ambos hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) hello y [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) de un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), reemplazarlos con nuevas claves.</span><span class="sxs-lookup"><span data-stu-id="a704a-187">If a key is compromised and you have toorevoke hello keys, you can regenerate both hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="a704a-188">Este procedimiento invalida todos los tokens firmados con claves antiguas Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-188">This procedure invalidates all tokens signed with hello old keys.</span></span>

## <a name="how-toouse-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="a704a-189">¿Cómo toouse autenticación de firma de acceso compartido con Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="a704a-189">How toouse Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="a704a-190">Hola los escenarios siguientes están la configuración de reglas de autorización y la generación de tokens de SAS y la autorización de cliente.</span><span class="sxs-lookup"><span data-stu-id="a704a-190">hello following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="a704a-191">Para un completo ejemplo funcional de una aplicación de Bus de servicio que muestra la autorización de SAS de configuración y usa hello, consulte [autenticación de firma de acceso compartido con Bus de servicio](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="a704a-191">For a full working sample of a Service Bus application that illustrates hello configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="a704a-192">Un ejemplo relacionado que se muestra el uso de Hola de reglas de autorización de SAS configuradas en los espacios de nombres o temas suscripciones del Bus de servicio toosecure está disponible aquí: [autenticación de uso de firma de acceso compartido (SAS) con suscripciones de Bus de servicio ](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="a704a-192">A related sample that illustrates hello use of SAS authorization rules configured on namespaces or topics toosecure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="a704a-193">Acceso a las reglas de autorización de acceso compartido en un espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="a704a-194">Operaciones en la raíz de espacio de nombres de Bus de servicio de hello requerir autenticación de certificado.</span><span class="sxs-lookup"><span data-stu-id="a704a-194">Operations on hello Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="a704a-195">Debe cargar un certificado de administración para la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="a704a-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="a704a-196">tooupload un certificado de administración, siga los pasos de hello [aquí](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), con hello [portal de Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="a704a-196">tooupload a management certificate, follow hello steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="a704a-197">Para obtener más información acerca de los certificados de administración de Azure, vea hello [Introducción a los certificados de Azure](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="a704a-197">For more information about Azure management certificates, see hello [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="a704a-198">punto de conexión de Hello para tener acceso a las reglas de autorización de acceso compartido en un espacio de nombres de Bus de servicio es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="a704a-198">hello endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="a704a-199">toocreate una [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) de objetos en un espacio de nombres de Bus de servicio, ejecute una operación POST en este punto de conexión con la información de la regla de hello serializada como JSON o XML.</span><span class="sxs-lookup"><span data-stu-id="a704a-199">toocreate a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with hello rule information serialized as JSON or XML.</span></span> <span data-ttu-id="a704a-200">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="a704a-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on hello Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access hello management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on hello baseAddress above toocreate an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="a704a-201">Asimismo, utilice una operación GET en hello extremo tooread hello las reglas de autorización configuradas en el espacio de nombres de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-201">Similarly, use a GET operation on hello endpoint tooread hello authorization rules configured on hello namespace.</span></span>

<span data-ttu-id="a704a-202">tooupdate o eliminar una regla de autorización específica, use Hola después de punto de conexión:</span><span class="sxs-lookup"><span data-stu-id="a704a-202">tooupdate or delete a specific authorization rule, use hello following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="a704a-203">Acceso a las reglas de autorización de acceso compartido en una entidad</span><span class="sxs-lookup"><span data-stu-id="a704a-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="a704a-204">Puede tener acceso a un [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objeto configurado en una cola de Bus de servicio o un tema a través de hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) colección Hola correspondiente [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) o [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="a704a-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in hello corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="a704a-205">Hola siguiente código muestra cómo las reglas de autorización de tooadd para una cola.</span><span class="sxs-lookup"><span data-stu-id="a704a-205">hello following code shows how tooadd authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for hello operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it toohello queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create hello queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="a704a-206">Uso de la autorización de la firma de acceso compartido</span><span class="sxs-lookup"><span data-stu-id="a704a-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="a704a-207">Uso hello Azure SDK para .NET con las bibliotecas de .NET de Bus de servicio de hello las aplicaciones pueden utilizar la autorización de SAS a través de hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) clase.</span><span class="sxs-lookup"><span data-stu-id="a704a-207">Applications using hello Azure .NET SDK with hello Service Bus .NET libraries can use SAS authorization through hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="a704a-208">Hello siguiente código muestra hello uso de cola de Bus de servicio de tooa de mensajes de Hola proveedor de tokens toosend.</span><span class="sxs-lookup"><span data-stu-id="a704a-208">hello following code illustrates hello use of hello token provider toosend messages tooa Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message tooqueue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="a704a-209">Las aplicaciones también pueden usar SAS para la autenticación mediante una cadena de conexión SAS en métodos que acepten cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="a704a-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="a704a-210">Tenga en cuenta esa autorización de SAS toouse con las retransmisiones de Bus de servicio, puede usar claves de SAS configuradas en el espacio de nombres de Bus de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-210">Note that toouse SAS authorization with Service Bus relays, you can use SAS keys configured on hello Service Bus namespace.</span></span> <span data-ttu-id="a704a-211">Si crea explícitamente una retransmisión en el espacio de nombres de hello ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) con un [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) del objeto, puede establecer reglas SAS de Hola para dicha retransmisión.</span><span class="sxs-lookup"><span data-stu-id="a704a-211">If you explicitly create a relay on hello namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set hello SAS rules just for that relay.</span></span> <span data-ttu-id="a704a-212">toouse autorización de SAS con suscripciones de Bus de servicio, puede usar claves de SAS configuradas en un espacio de nombres de Bus de servicio o en un tema.</span><span class="sxs-lookup"><span data-stu-id="a704a-212">toouse SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-hello-shared-access-signature-at-http-level"></a><span data-ttu-id="a704a-213">Usar hello firma de acceso compartido (en el nivel HTTP)</span><span class="sxs-lookup"><span data-stu-id="a704a-213">Use hello Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="a704a-214">Ahora que sabe cómo toocreate firmas de acceso compartido para todas las entidades de Bus de servicio, está listo tooperform una solicitud HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="a704a-214">Now that you know how toocreate Shared Access Signatures for any entities in Service Bus, you are ready tooperform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="a704a-215">Recuerde que esto funciona para todo.</span><span class="sxs-lookup"><span data-stu-id="a704a-215">Remember, this works for everything.</span></span> <span data-ttu-id="a704a-216">Puede crear SAS para una cola, un tema o una suscripción.</span><span class="sxs-lookup"><span data-stu-id="a704a-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="a704a-217">Si se concede a un remitente o cliente un token de SAS, no tienen clave Hola directamente y no es posible revertir Hola hash tooobtain lo.</span><span class="sxs-lookup"><span data-stu-id="a704a-217">If you give a sender or client a SAS token, they don't have hello key directly, and they cannot reverse hello hash tooobtain it.</span></span> <span data-ttu-id="a704a-218">Como tal, tiene control sobre a lo que pueden tener acceso y durante cuánto tiempo.</span><span class="sxs-lookup"><span data-stu-id="a704a-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="a704a-219">Un tooremember lo importante es que si cambia la clave principal de hello en la directiva de hello, se invalidarán las firmas de acceso compartido creado a partir de él.</span><span class="sxs-lookup"><span data-stu-id="a704a-219">An important thing tooremember is that if you change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-hello-shared-access-signature-at-amqp-level"></a><span data-ttu-id="a704a-220">Usar hello firma de acceso compartido (en el nivel AMQP)</span><span class="sxs-lookup"><span data-stu-id="a704a-220">Use hello Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="a704a-221">En la sección anterior de hello, ha visto cómo toouse Hola token SAS con una solicitud HTTP POST para enviar datos toohello Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-221">In hello previous section, you saw how toouse hello SAS token with an HTTP POST request for sending data toohello Service Bus.</span></span> <span data-ttu-id="a704a-222">Como sabe, puede tener acceso a Service Bus utilizando Hola Advanced Message Queuing Protocol (AMQP), es toouse de protocolo de hello preferido por motivos de rendimiento en muchos escenarios.</span><span class="sxs-lookup"><span data-stu-id="a704a-222">As you know, you can access Service Bus using hello Advanced Message Queuing Protocol (AMQP) that is hello preferred protocol toouse for performance reasons, in many scenarios.</span></span> <span data-ttu-id="a704a-223">Hola uso del token de SAS con AMQP se describe en el documento de hello [AMQP Claim-Based seguridad versión 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) decir en borrador de trabajo a partir de 2013 pero ampliamente admitido por Azure hoy en día.</span><span class="sxs-lookup"><span data-stu-id="a704a-223">hello SAS token usage with AMQP is described in hello document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="a704a-224">Antes de iniciar toosend datos tooService Bus, Hola publicador tiene que enviar token SAS de hello dentro de un AMQP mensaje tooa bien definidos AMQP nodo denominado **$cbs** (puede ver como una cola "especial" utilizada por tooacquire de servicio de Hola y todas las validar tokens SAS Hello).</span><span class="sxs-lookup"><span data-stu-id="a704a-224">Before starting toosend data tooService Bus, hello publisher must send hello SAS token inside an AMQP message tooa well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by hello service tooacquire and validate all hello SAS tokens).</span></span> <span data-ttu-id="a704a-225">publicador de Hello debe especificar hello **ReplyTo** campo dentro del mensaje de Hola AMQP; se trata de nodo de hello en qué Hola servicio responde toohello publicador con el resultado de hello de validación de tokens de hello (un sencillo modelo solicitud-respuesta entre publicador y el servicio).</span><span class="sxs-lookup"><span data-stu-id="a704a-225">hello publisher must specify hello **ReplyTo** field inside hello AMQP message; this is hello node in which hello service replies toohello publisher with hello result of hello token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="a704a-226">Se crea este nodo de respuesta "en hello marcha," habla sobre "creación dinámica de nodo remoto", como se describe en la especificación de hello AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="a704a-226">This reply node is created "on hello fly," speaking about "dynamic creation of remote node" as described by hello AMQP 1.0 specification.</span></span> <span data-ttu-id="a704a-227">Después de comprobar que ese token SAS hello es válido, publisher Hola puede avanzar e iniciar servicio toohello de toosend datos.</span><span class="sxs-lookup"><span data-stu-id="a704a-227">After checking that hello SAS token is valid, hello publisher can go forward and start toosend data toohello service.</span></span>

<span data-ttu-id="a704a-228">Hello pasos siguientes muestran cómo toosend Hola token de SAS con protocolo AMQP con hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) biblioteca.</span><span class="sxs-lookup"><span data-stu-id="a704a-228">hello following steps show how toosend hello SAS token with AMQP protocol using hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="a704a-229">Esto es útil si no se puede utilizar oficial de hello SDK del Bus de servicio (por ejemplo, en WinRT, .net Compact Framework, .net Framework Micro y Mono) desarrollar en C\#.</span><span class="sxs-lookup"><span data-stu-id="a704a-229">This is useful if you can't use hello official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="a704a-230">Por supuesto, esta biblioteca es útil toohelp comprender la seguridad basada en notificaciones cómo funciona en el nivel AMQP de hello, tal como se ha visto cómo funciona en el nivel de hello HTTP (con un encabezado HTTP POST hello y solicitud de SAS token Hola enviado dentro de "Autorización").</span><span class="sxs-lookup"><span data-stu-id="a704a-230">Of course, this library is useful toohelp understand how claims-based security works at hello AMQP level, as you saw how it works at hello HTTP level (with an HTTP POST request and hello SAS token sent inside hello "Authorization" header).</span></span> <span data-ttu-id="a704a-231">Si no es necesario este tipo profundo conocimiento acerca de AMQP, puede usar oficial de hello SDK de Service Bus con .net las aplicaciones de Framework, lo hará por usted.</span><span class="sxs-lookup"><span data-stu-id="a704a-231">If you don't need such deep knowledge about AMQP, you can use hello official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="a704a-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="a704a-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) toosend</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct hello put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive hello response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // hello sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="a704a-233">Hola `PutCbsToken()` método recibe hello *conexión* (instancia de la clase de la conexión AMQP proporcionados por hello [AMQP .NET Lite biblioteca](https://github.com/Azure/amqpnetlite)) que representa el servicio de toohello de conexión de TCP de Hola y Hola *sasToken* parámetro hello SAS token toosend.</span><span class="sxs-lookup"><span data-stu-id="a704a-233">hello `PutCbsToken()` method receives hello *connection* (AMQP connection class instance as provided by hello [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents hello TCP connection toohello service and hello *sasToken* parameter that is hello SAS token toosend.</span></span> 

> [!NOTE]
> <span data-ttu-id="a704a-234">Es importante que la conexión de Hola se crea con **mecanismo de autenticación SASL establece tooEXTERNAL** (y no Hola simple de forma predeterminada con el nombre de usuario y contraseña que se usa cuando no se necesitan token de SAS de hello toosend).</span><span class="sxs-lookup"><span data-stu-id="a704a-234">It's important that hello connection is created with **SASL authentication mechanism set tooEXTERNAL** (and not hello default PLAIN with username and password used when you don't need toosend hello SAS token).</span></span>
> 
> 

<span data-ttu-id="a704a-235">A continuación, el publicador de hello crea dos vínculos AMQP para enviar el token de SAS de Hola y reciben respuesta hello (resultado de validación del token de hello) de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-235">Next, hello publisher creates two AMQP links for sending hello SAS token and receiving hello reply (hello token validation result) from hello service.</span></span>

<span data-ttu-id="a704a-236">mensaje de bienvenida de AMQP contiene un conjunto de propiedades y más información que un mensaje sencillo.</span><span class="sxs-lookup"><span data-stu-id="a704a-236">hello AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="a704a-237">token SAS de Hello es cuerpo Hola de mensaje de saludo (mediante su constructor).</span><span class="sxs-lookup"><span data-stu-id="a704a-237">hello SAS token is hello body of hello message (using its constructor).</span></span> <span data-ttu-id="a704a-238">Hola **"ReplyTo"** propiedad está establecida en nombre del nodo toohello para recibir el resultado de la validación de hello en vínculo de receptor de hello (puede cambiar su nombre si desea y se creará dinámicamente por el servicio de hello).</span><span class="sxs-lookup"><span data-stu-id="a704a-238">hello **"ReplyTo"** property is set toohello node name for receiving hello validation result on hello receiver link (you can change its name if you want, and it will be created dynamically by hello service).</span></span> <span data-ttu-id="a704a-239">Hello propiedades de aplicación/personalizada tres últimas usan Hola servicio tooindicate qué tipo de operación tiene tooexecute.</span><span class="sxs-lookup"><span data-stu-id="a704a-239">hello last three application/custom properties are used by hello service tooindicate what kind of operation it has tooexecute.</span></span> <span data-ttu-id="a704a-240">Como se describe en hello borrador de especificación de CBS, deben ser hello **nombre de la operación** ("put-token"), hello **tipo de token** (en este caso, un "servicebus.windows.net:sastoken"), hello y **" nombre"de audiencia de hello** (Hola toda la entidad) aplica el token de hello toowhich.</span><span class="sxs-lookup"><span data-stu-id="a704a-240">As described by hello CBS draft specification, they must be hello **operation name** ("put-token"), hello **type of token** (in this case, a "servicebus.windows.net:sastoken"), and hello **"name" of hello audience** toowhich hello token applies (hello entire entity).</span></span>

<span data-ttu-id="a704a-241">Después de enviar el token de SAS de hello en el vínculo de remitente de hello, publisher Hola debe leer la respuesta de hello en el vínculo de receptor de Hola.</span><span class="sxs-lookup"><span data-stu-id="a704a-241">After sending hello SAS token on hello sender link, hello publisher must read hello reply on hello receiver link.</span></span> <span data-ttu-id="a704a-242">Hola de respuesta es un mensaje AMQP simple con una propiedad de la aplicación denominada **"código de estado"** que puede contener Hola mismo valores como un código de estado HTTP.</span><span class="sxs-lookup"><span data-stu-id="a704a-242">hello reply is a simple AMQP message with an application property named **"status-code"** that can contain hello same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="a704a-243">Derechos necesarios para realizar operaciones del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="a704a-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="a704a-244">Hello tabla siguiente muestran los derechos de acceso de hello necesarios para realizar diversas operaciones en recursos de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="a704a-244">hello following table shows hello access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="a704a-245">Operación</span><span class="sxs-lookup"><span data-stu-id="a704a-245">Operation</span></span> | <span data-ttu-id="a704a-246">Solicitud necesaria</span><span class="sxs-lookup"><span data-stu-id="a704a-246">Claim Required</span></span> | <span data-ttu-id="a704a-247">Ámbito de solicitud</span><span class="sxs-lookup"><span data-stu-id="a704a-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a704a-248">**Espacio de nombres**</span><span class="sxs-lookup"><span data-stu-id="a704a-248">**Namespace**</span></span> | | |
| <span data-ttu-id="a704a-249">Configurar la regla de autorización en un espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="a704a-250">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-250">Manage</span></span> |<span data-ttu-id="a704a-251">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-251">Any namespace address</span></span> |
| <span data-ttu-id="a704a-252">**Registro del servicio**</span><span class="sxs-lookup"><span data-stu-id="a704a-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="a704a-253">Enumerar directivas privadas</span><span class="sxs-lookup"><span data-stu-id="a704a-253">Enumerate Private Policies</span></span> |<span data-ttu-id="a704a-254">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-254">Manage</span></span> |<span data-ttu-id="a704a-255">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-255">Any namespace address</span></span> |
| <span data-ttu-id="a704a-256">Empezar a escuchar en un espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-256">Begin listening on a namespace</span></span> |<span data-ttu-id="a704a-257">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-257">Listen</span></span> |<span data-ttu-id="a704a-258">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-258">Any namespace address</span></span> |
| <span data-ttu-id="a704a-259">Enviar el agente de escucha de mensajes tooa en un espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-259">Send messages tooa listener at a namespace</span></span> |<span data-ttu-id="a704a-260">Los métodos Send</span><span class="sxs-lookup"><span data-stu-id="a704a-260">Send</span></span> |<span data-ttu-id="a704a-261">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-261">Any namespace address</span></span> |
| <span data-ttu-id="a704a-262">**Cola**</span><span class="sxs-lookup"><span data-stu-id="a704a-262">**Queue**</span></span> | | |
| <span data-ttu-id="a704a-263">Creación de una cola</span><span class="sxs-lookup"><span data-stu-id="a704a-263">Create a queue</span></span> |<span data-ttu-id="a704a-264">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-264">Manage</span></span> |<span data-ttu-id="a704a-265">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-265">Any namespace address</span></span> |
| <span data-ttu-id="a704a-266">Eliminación de una cola</span><span class="sxs-lookup"><span data-stu-id="a704a-266">Delete a queue</span></span> |<span data-ttu-id="a704a-267">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-267">Manage</span></span> |<span data-ttu-id="a704a-268">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-268">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-269">Enumerar colas</span><span class="sxs-lookup"><span data-stu-id="a704a-269">Enumerate queues</span></span> |<span data-ttu-id="a704a-270">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-270">Manage</span></span> |<span data-ttu-id="a704a-271">/$Resources/Queues</span><span class="sxs-lookup"><span data-stu-id="a704a-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="a704a-272">Obtener la descripción de la cola de Hola</span><span class="sxs-lookup"><span data-stu-id="a704a-272">Get hello queue description</span></span> |<span data-ttu-id="a704a-273">Administrar</span><span class="sxs-lookup"><span data-stu-id="a704a-273">Manage</span></span> |<span data-ttu-id="a704a-274">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-274">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-275">Configurar la regla de autorización para una cola</span><span class="sxs-lookup"><span data-stu-id="a704a-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="a704a-276">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-276">Manage</span></span> |<span data-ttu-id="a704a-277">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-277">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-278">Enviar a la cola de toohello</span><span class="sxs-lookup"><span data-stu-id="a704a-278">Send into toohello queue</span></span> |<span data-ttu-id="a704a-279">Los métodos Send</span><span class="sxs-lookup"><span data-stu-id="a704a-279">Send</span></span> |<span data-ttu-id="a704a-280">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-280">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-281">mensajes de una cola</span><span class="sxs-lookup"><span data-stu-id="a704a-281">Receive messages from a queue</span></span> |<span data-ttu-id="a704a-282">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-282">Listen</span></span> |<span data-ttu-id="a704a-283">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-283">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-284">Abandonar o completar mensajes después de recibir el mensaje de bienvenida en modo de bloqueo de inspección</span><span class="sxs-lookup"><span data-stu-id="a704a-284">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="a704a-285">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-285">Listen</span></span> |<span data-ttu-id="a704a-286">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-286">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-287">Aplazar un mensaje para su recuperación posterior</span><span class="sxs-lookup"><span data-stu-id="a704a-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="a704a-288">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-288">Listen</span></span> |<span data-ttu-id="a704a-289">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-289">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-290">Mensaje fallido</span><span class="sxs-lookup"><span data-stu-id="a704a-290">Deadletter a message</span></span> |<span data-ttu-id="a704a-291">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-291">Listen</span></span> |<span data-ttu-id="a704a-292">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-292">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-293">Obtener estado de hello asociado a una sesión de cola de mensajes</span><span class="sxs-lookup"><span data-stu-id="a704a-293">Get hello state associated with a message queue session</span></span> |<span data-ttu-id="a704a-294">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-294">Listen</span></span> |<span data-ttu-id="a704a-295">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-295">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-296">Estado de hello conjunto asociado a una sesión de cola de mensajes</span><span class="sxs-lookup"><span data-stu-id="a704a-296">Set hello state associated with a message queue session</span></span> |<span data-ttu-id="a704a-297">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-297">Listen</span></span> |<span data-ttu-id="a704a-298">Cualquier dirección de cola válida</span><span class="sxs-lookup"><span data-stu-id="a704a-298">Any valid queue address</span></span> |
| <span data-ttu-id="a704a-299">**Tema.**</span><span class="sxs-lookup"><span data-stu-id="a704a-299">**Topic**</span></span> | | |
| <span data-ttu-id="a704a-300">de un tema</span><span class="sxs-lookup"><span data-stu-id="a704a-300">Create a topic</span></span> |<span data-ttu-id="a704a-301">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-301">Manage</span></span> |<span data-ttu-id="a704a-302">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-302">Any namespace address</span></span> |
| <span data-ttu-id="a704a-303">Eliminación de un tema</span><span class="sxs-lookup"><span data-stu-id="a704a-303">Delete a topic</span></span> |<span data-ttu-id="a704a-304">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-304">Manage</span></span> |<span data-ttu-id="a704a-305">Cualquier dirección de tema válida</span><span class="sxs-lookup"><span data-stu-id="a704a-305">Any valid topic address</span></span> |
| <span data-ttu-id="a704a-306">Enumerar temas</span><span class="sxs-lookup"><span data-stu-id="a704a-306">Enumerate topics</span></span> |<span data-ttu-id="a704a-307">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-307">Manage</span></span> |<span data-ttu-id="a704a-308">/$Resources/Topics</span><span class="sxs-lookup"><span data-stu-id="a704a-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="a704a-309">Obtener la descripción del tema Hola</span><span class="sxs-lookup"><span data-stu-id="a704a-309">Get hello topic description</span></span> |<span data-ttu-id="a704a-310">Administrar</span><span class="sxs-lookup"><span data-stu-id="a704a-310">Manage</span></span> |<span data-ttu-id="a704a-311">Cualquier dirección de tema válida</span><span class="sxs-lookup"><span data-stu-id="a704a-311">Any valid topic address</span></span> |
| <span data-ttu-id="a704a-312">Configurar la regla de autorización para un tema</span><span class="sxs-lookup"><span data-stu-id="a704a-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="a704a-313">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-313">Manage</span></span> |<span data-ttu-id="a704a-314">Cualquier dirección de tema válida</span><span class="sxs-lookup"><span data-stu-id="a704a-314">Any valid topic address</span></span> |
| <span data-ttu-id="a704a-315">Enviar tema toohello</span><span class="sxs-lookup"><span data-stu-id="a704a-315">Send toohello topic</span></span> |<span data-ttu-id="a704a-316">Los métodos Send</span><span class="sxs-lookup"><span data-stu-id="a704a-316">Send</span></span> |<span data-ttu-id="a704a-317">Cualquier dirección de tema válida</span><span class="sxs-lookup"><span data-stu-id="a704a-317">Any valid topic address</span></span> |
| <span data-ttu-id="a704a-318">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="a704a-318">**Subscription**</span></span> | | |
| <span data-ttu-id="a704a-319">una suscripción</span><span class="sxs-lookup"><span data-stu-id="a704a-319">Create a subscription</span></span> |<span data-ttu-id="a704a-320">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-320">Manage</span></span> |<span data-ttu-id="a704a-321">Cualquier dirección de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="a704a-321">Any namespace address</span></span> |
| <span data-ttu-id="a704a-322">Eliminar suscripción</span><span class="sxs-lookup"><span data-stu-id="a704a-322">Delete subscription</span></span> |<span data-ttu-id="a704a-323">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-323">Manage</span></span> |<span data-ttu-id="a704a-324">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-325">Enumerar suscripciones</span><span class="sxs-lookup"><span data-stu-id="a704a-325">Enumerate subscriptions</span></span> |<span data-ttu-id="a704a-326">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-326">Manage</span></span> |<span data-ttu-id="a704a-327">../myTopic/Subscriptions</span><span class="sxs-lookup"><span data-stu-id="a704a-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="a704a-328">Obtener la descripción de la suscripción</span><span class="sxs-lookup"><span data-stu-id="a704a-328">Get subscription description</span></span> |<span data-ttu-id="a704a-329">Administrar</span><span class="sxs-lookup"><span data-stu-id="a704a-329">Manage</span></span> |<span data-ttu-id="a704a-330">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-331">Abandonar o completar mensajes después de recibir el mensaje de bienvenida en modo de bloqueo de inspección</span><span class="sxs-lookup"><span data-stu-id="a704a-331">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="a704a-332">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-332">Listen</span></span> |<span data-ttu-id="a704a-333">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-334">Aplazar un mensaje para su recuperación posterior</span><span class="sxs-lookup"><span data-stu-id="a704a-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="a704a-335">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-335">Listen</span></span> |<span data-ttu-id="a704a-336">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-337">Mensaje fallido</span><span class="sxs-lookup"><span data-stu-id="a704a-337">Deadletter a message</span></span> |<span data-ttu-id="a704a-338">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-338">Listen</span></span> |<span data-ttu-id="a704a-339">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-340">Obtener estado de hello asociado a una sesión de tema</span><span class="sxs-lookup"><span data-stu-id="a704a-340">Get hello state associated with a topic session</span></span> |<span data-ttu-id="a704a-341">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-341">Listen</span></span> |<span data-ttu-id="a704a-342">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-343">Definir estado de hello asociado a una sesión de tema</span><span class="sxs-lookup"><span data-stu-id="a704a-343">Set hello state associated with a topic session</span></span> |<span data-ttu-id="a704a-344">Escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-344">Listen</span></span> |<span data-ttu-id="a704a-345">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-346">**Reglas**</span><span class="sxs-lookup"><span data-stu-id="a704a-346">**Rules**</span></span> | | |
| <span data-ttu-id="a704a-347">Crear una regla</span><span class="sxs-lookup"><span data-stu-id="a704a-347">Create a rule</span></span> |<span data-ttu-id="a704a-348">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-348">Manage</span></span> |<span data-ttu-id="a704a-349">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-350">Eliminar una regla</span><span class="sxs-lookup"><span data-stu-id="a704a-350">Delete a rule</span></span> |<span data-ttu-id="a704a-351">administración</span><span class="sxs-lookup"><span data-stu-id="a704a-351">Manage</span></span> |<span data-ttu-id="a704a-352">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="a704a-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="a704a-353">Enumerar reglas</span><span class="sxs-lookup"><span data-stu-id="a704a-353">Enumerate rules</span></span> |<span data-ttu-id="a704a-354">Administrar o escuchar</span><span class="sxs-lookup"><span data-stu-id="a704a-354">Manage or Listen</span></span> |<span data-ttu-id="a704a-355">../myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="a704a-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="a704a-356">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="a704a-356">Next steps</span></span>

<span data-ttu-id="a704a-357">toolearn más información acerca de la mensajería de Bus de servicio, vea Hola temas siguientes.</span><span class="sxs-lookup"><span data-stu-id="a704a-357">toolearn more about Service Bus messaging, see hello following topics.</span></span>

* [<span data-ttu-id="a704a-358">Elementos fundamentales de Service Bus</span><span class="sxs-lookup"><span data-stu-id="a704a-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="a704a-359">Colas, temas y suscripciones de Service Bus</span><span class="sxs-lookup"><span data-stu-id="a704a-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="a704a-360">¿Cómo toouse colas de Service Bus</span><span class="sxs-lookup"><span data-stu-id="a704a-360">How toouse Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="a704a-361">¿Cómo toouse Service Bus temas y suscripciones</span><span class="sxs-lookup"><span data-stu-id="a704a-361">How toouse Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com
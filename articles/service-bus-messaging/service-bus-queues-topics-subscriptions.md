---
title: "aaaOverview de colas, temas y suscripciones de mensajería de Service Bus de Azure | Documentos de Microsoft"
description: "Información general de las entidades de mensajería del Bus de servicio."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a306ced4-74e9-47c6-990a-d9c47efa31d5
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2017
ms.author: sethm
ms.openlocfilehash: 73135d2658e341c14dbb114ab938faed91578ff1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-queues-topics-and-subscriptions"></a><span data-ttu-id="73c5a-103">Colas, temas y suscripciones de Service Bus</span><span class="sxs-lookup"><span data-stu-id="73c5a-103">Service Bus queues, topics, and subscriptions</span></span>

<span data-ttu-id="73c5a-104">Microsoft Azure Service Bus admite un conjunto de tecnologías de middleware basadas en la nube y orientadas a mensajes, incluidas una cola de mensajes de confianza y una mensajería de publicación/suscripción duradera.</span><span class="sxs-lookup"><span data-stu-id="73c5a-104">Microsoft Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="73c5a-105">Estas capacidades de mensajes "asíncronas" pueden considerarse como desacoplada características que admiten la publicación y suscripción de mensajería, temporal desacoplamiento y escenarios que se utiliza el tejido de mensajería de Bus de servicio de Hola de equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="73c5a-105">These "brokered" messaging capabilities can be thought of as decoupled messaging features that support publish-subscribe, temporal decoupling, and load balancing scenarios using hello Service Bus messaging fabric.</span></span> <span data-ttu-id="73c5a-106">La comunicación desacoplada ofrece muchas ventajas; por ejemplo, los clientes y servidores pueden conectarse según sea necesario y realizar sus operaciones de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="73c5a-106">Decoupled communication has many advantages; for example, clients and servers can connect as needed and perform their operations in an asynchronous fashion.</span></span>

<span data-ttu-id="73c5a-107">entidades de mensajería de Hola que forman el núcleo de Hola de hello capacidades de Bus de servicio de mensajería son colas, temas y suscripciones y reglas/acciones.</span><span class="sxs-lookup"><span data-stu-id="73c5a-107">hello messaging entities that form hello core of hello messaging capabilities in Service Bus are queues, topics and subscriptions, and rules/actions.</span></span>

## <a name="queues"></a><span data-ttu-id="73c5a-108">Colas</span><span class="sxs-lookup"><span data-stu-id="73c5a-108">Queues</span></span>

<span data-ttu-id="73c5a-109">Las colas ofrecen *primero en ENTRAR, primero en salir* tooone de entrega de mensajes (FIFO) o varios consumidores en competencia.</span><span class="sxs-lookup"><span data-stu-id="73c5a-109">Queues offer *First In, First Out* (FIFO) message delivery tooone or more competing consumers.</span></span> <span data-ttu-id="73c5a-110">Es decir, los mensajes son normalmente esperado toobe recibe y procesa receptores de hello en orden de hello en el que se agregaron toohello cola, y cada mensaje lo recibe y procesa por un solo consumidor de mensaje.</span><span class="sxs-lookup"><span data-stu-id="73c5a-110">That is, messages are typically expected toobe received and processed by hello receivers in hello order in which they were added toohello queue, and each message is received and processed by only one message consumer.</span></span> <span data-ttu-id="73c5a-111">Una ventaja clave del uso de colas es tooachieve "desacoplamiento temporal" de componentes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="73c5a-111">A key benefit of using queues is tooachieve "temporal decoupling" of application components.</span></span> <span data-ttu-id="73c5a-112">Hola en otras palabras, los productores (remitentes) y los consumidores (receptores) no es necesario enviar toobe y reciben mensajes en hello mismo tiempo, ya que los mensajes se almacenan de manera duradera en cola de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-112">In other words, hello producers (senders) and consumers (receivers) do not have toobe sending and receiving messages at hello same time, because messages are stored durably in hello queue.</span></span> <span data-ttu-id="73c5a-113">Además, productor hello no tienen toowait una respuesta de consumidor de hello en orden toocontinue tooprocess y enviar mensajes.</span><span class="sxs-lookup"><span data-stu-id="73c5a-113">Furthermore, hello producer does not have toowait for a reply from hello consumer in order toocontinue tooprocess and send messages.</span></span>

<span data-ttu-id="73c5a-114">Una ventaja relacionada es "equilibrio de la carga," que permite a los productores y consumidores toosend y recibe mensajes a distintas tasas.</span><span class="sxs-lookup"><span data-stu-id="73c5a-114">A related benefit is "load leveling," which enables producers and consumers toosend and receive messages at different rates.</span></span> <span data-ttu-id="73c5a-115">En muchas aplicaciones, la carga del sistema Hola varía con el tiempo; Sin embargo, el tiempo de procesamiento de hello necesario para cada unidad de trabajo es normalmente constante.</span><span class="sxs-lookup"><span data-stu-id="73c5a-115">In many applications, hello system load varies over time; however, hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="73c5a-116">Intermediar de mensaje de productores y consumidores con una cola significa ese Hola consumiendo aplicación únicamente tiene aprovisionado toobe toobe toohandle capaz de carga Media en lugar de carga máxima.</span><span class="sxs-lookup"><span data-stu-id="73c5a-116">Intermediating message producers and consumers with a queue means that hello consuming application only has toobe provisioned toobe able toohandle average load instead of peak load.</span></span> <span data-ttu-id="73c5a-117">profundidad de Hola de cola de hello aumenta y disminuye medida que varía la carga entrante Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-117">hello depth of hello queue grows and contracts as hello incoming load varies.</span></span> <span data-ttu-id="73c5a-118">Esto directamente ahorra dinero con cantidad de toohello independientemente de la carga de la aplicación de infraestructura necesario tooservice Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-118">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span> <span data-ttu-id="73c5a-119">Como Hola aumenta la carga, más procesos de trabajo pueden ser agregado tooread de cola de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-119">As hello load increases, more worker processes can be added tooread from hello queue.</span></span> <span data-ttu-id="73c5a-120">Cada mensaje se procesa solamente mediante uno de los procesos de trabajo de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-120">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="73c5a-121">Además, este equilibrio de carga basados en extracción permite un uso óptimo de los equipos de trabajo de hello incluso si los equipos de trabajo de hello diferencian la potencia de tooprocessing tener en cuenta, ya que extraerán mensajes a su propia velocidad máxima.</span><span class="sxs-lookup"><span data-stu-id="73c5a-121">Furthermore, this pull-based load balancing allows for optimum use of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="73c5a-122">Este patrón a menudo se denomina patrón de Hola "consumidor en competencia".</span><span class="sxs-lookup"><span data-stu-id="73c5a-122">This pattern is often termed hello "competing consumer" pattern.</span></span>

<span data-ttu-id="73c5a-123">Uso de colas toointermediate entre los consumidores y productores de mensajes proporciona un acoplamiento débil inherente entre los componentes de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-123">Using queues toointermediate between message producers and consumers provides an inherent loose coupling between hello components.</span></span> <span data-ttu-id="73c5a-124">Como los productores y consumidores no son compatibles con unos de otros, un consumidor puede actualizarse sin tener ningún efecto en productor Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-124">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span>

<span data-ttu-id="73c5a-125">La creación de una cola es un proceso de varios pasos.</span><span class="sxs-lookup"><span data-stu-id="73c5a-125">Creating a queue is a multi-step process.</span></span> <span data-ttu-id="73c5a-126">Realizar operaciones de administración de entidades (colas y temas) a través de Hola de mensajería de Service Bus [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) (clase), que se construye suministrando la dirección base de Hola de hello Bus de servicio credenciales de usuario de hello y espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="73c5a-126">You perform management operations for Service Bus messaging entities (both queues and topics) via hello [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, which is constructed by supplying hello base address of hello Service Bus namespace and hello user credentials.</span></span> <span data-ttu-id="73c5a-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) proporciona métodos toocreate, enumerar y eliminar entidades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="73c5a-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="73c5a-128">Después de crear un [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) objeto objeto de nombre de la SAS de Hola y clave y una administración de espacio de nombres de servicio, puede usar hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) cola de método toocreate Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-128">After creating a [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) object from hello SAS name and key, and a service namespace management object, you can use hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method toocreate hello queue.</span></span> <span data-ttu-id="73c5a-129">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="73c5a-129">For example:</span></span>

```csharp
// Create management credentials
TokenProvider credentials = TokenProvider.CreateSharedAccessSignatureTokenProvider(sasKeyName,sasKeyValue);
// Create namespace client
NamespaceManager namespaceClient = new NamespaceManager(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials);
```

<span data-ttu-id="73c5a-130">A continuación, puede crear un objeto de cola y una fábrica de mensajería con hello URI de Bus de servicio como un argumento.</span><span class="sxs-lookup"><span data-stu-id="73c5a-130">You can then create a queue object and a messaging factory with hello Service Bus URI as an argument.</span></span> <span data-ttu-id="73c5a-131">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="73c5a-131">For example:</span></span>

```csharp
QueueDescription myQueue;
myQueue = namespaceClient.CreateQueue("TestQueue");
MessagingFactory factory = MessagingFactory.Create(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials); 
QueueClient myQueueClient = factory.CreateQueueClient("TestQueue");
```

<span data-ttu-id="73c5a-132">A continuación, puede enviar la cola de mensajes toohello.</span><span class="sxs-lookup"><span data-stu-id="73c5a-132">You can then send messages toohello queue.</span></span> <span data-ttu-id="73c5a-133">Por ejemplo, si tiene una lista de mensajes asíncronos llamada `MessageList`, código de hello aparece a continuación toohello similar:</span><span class="sxs-lookup"><span data-stu-id="73c5a-133">For example, if you have a list of brokered messages called `MessageList`, hello code appears similar toohello following:</span></span>

```csharp
for (int count = 0; count < 6; count++)
{
    var issue = MessageList[count];
    issue.Label = issue.Properties["IssueTitle"].ToString();
    myQueueClient.Send(issue);
}
```

<span data-ttu-id="73c5a-134">A continuación, recibe los mensajes de cola de hello como sigue:</span><span class="sxs-lookup"><span data-stu-id="73c5a-134">You then receive messages from hello queue as follows:</span></span>

```csharp
while ((message = myQueueClient.Receive(new TimeSpan(hours: 0, minutes: 0, seconds: 5))) != null)
    {
        Console.WriteLine(string.Format("Message received: {0}, {1}, {2}", message.SequenceNumber, message.Label, message.MessageId));
        message.Complete();

        Console.WriteLine("Processing message (sleeping...)");
        Thread.Sleep(1000);
    }
```

<span data-ttu-id="73c5a-135">Hola [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) Hola de modo de recepción operación es sola fase; es decir, al Bus de servicio recibe una solicitud de hello, marca Hola mensaje como consumido y lo devuelve toohello aplicación.</span><span class="sxs-lookup"><span data-stu-id="73c5a-135">In hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation is single-shot; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="73c5a-136">**ReceiveAndDelete** modo es el modelo más sencillo de Hola y funciona mejor para escenarios en que Hola aplicación puede tolerar no procesar un mensaje en caso de hello de un error.</span><span class="sxs-lookup"><span data-stu-id="73c5a-136">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message in hello event of a failure.</span></span> <span data-ttu-id="73c5a-137">toounderstand esto, considere un escenario en los problemas del consumidor Hola Hola recibir la solicitud y, a continuación, se bloquea antes de procesarlo.</span><span class="sxs-lookup"><span data-stu-id="73c5a-137">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="73c5a-138">Dado que Service Bus marca mensaje Hola como consumido, cuando la aplicación hello se reinicia y comienza a consumir mensajes de nuevo, habrá perdido mensaje Hola que estaba consumido bloqueo toohello anterior.</span><span class="sxs-lookup"><span data-stu-id="73c5a-138">Because Service Bus marks hello message as being consumed, when hello application restarts and begins consuming messages again, it will have missed hello message that was consumed prior toohello crash.</span></span>

<span data-ttu-id="73c5a-139">En [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) Hola de modo de recepción operación se convierte en dos fases, por lo que hace que las aplicaciones de toosupport posible que no pueden tolerar mensajes perdidos.</span><span class="sxs-lookup"><span data-stu-id="73c5a-139">In [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation becomes two-stage, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="73c5a-140">Al Bus de servicio recibe una solicitud de hello, busca Hola siguiente mensaje toobe consumido, la bloquea tooprevent otros consumidores de recibir y, a continuación, lo devuelve toohello aplicación.</span><span class="sxs-lookup"><span data-stu-id="73c5a-140">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers from receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="73c5a-141">Después de aplicación hello finaliza el procesamiento de mensajes de bienvenida (o lo almacena de forma confiable para el procesamiento futuro), completa Hola segunda fase del programa Hola a recibir el proceso mediante una llamada a [completar](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) en mensajes de bienvenida recibido.</span><span class="sxs-lookup"><span data-stu-id="73c5a-141">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="73c5a-142">Al Bus de servicio ve hello **completar** llamada, marca Hola mensaje como consumido.</span><span class="sxs-lookup"><span data-stu-id="73c5a-142">When Service Bus sees hello **Complete** call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="73c5a-143">Si no puede aplicación hello tooprocess Hola mensaje por alguna razón, puede llamar a hello [abandonar](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) método en mensajes de bienvenida recibido (en lugar de [completar](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="73c5a-143">If hello application is unable tooprocess hello message for some reason, it can call hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) method on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="73c5a-144">Esto permite que el mensaje de bienvenida de Bus de servicio toounlock y hacerla disponible toobe recibido de nuevo, ya sea mediante Hola mismo consumidor o por otro consumidor en competencia.</span><span class="sxs-lookup"><span data-stu-id="73c5a-144">This enables Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another competing consumer.</span></span> <span data-ttu-id="73c5a-145">En segundo lugar, no existe un tiempo de espera asociado con la tecla BLOQ hello y aplicación hello provoca un error tooprocess Hola mensaje antes de tiempo de espera de bloqueo de hello expira (por ejemplo, si se bloquea aplicación hello), a continuación, desbloquea el mensaje de bienvenida de Bus de servicio y la convierte en disponible toobe recibido nuevo (básicamente realizar un [abandonar](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operación de forma predeterminada).</span><span class="sxs-lookup"><span data-stu-id="73c5a-145">Secondly, there is a timeout associated with hello lock and if hello application fails tooprocess hello message before hello lock timeout expires (for example, if hello application crashes), then Service Bus unlocks hello message and makes it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="73c5a-146">Tenga en cuenta que en hello eventos que Hola aplicación se bloquea después de procesar el mensaje de bienvenida, pero antes de hello **completar** se emite la solicitud, mensaje de bienvenida es la aplicación de toohello entregados de nuevo cuando se reinicia.</span><span class="sxs-lookup"><span data-stu-id="73c5a-146">Note that in hello event that hello application crashes after processing hello message, but before hello **Complete** request is issued, hello message is redelivered toohello application when it restarts.</span></span> <span data-ttu-id="73c5a-147">Esto se conoce como *Al menos un procesamiento*; es decir, cada mensaje se procesa como mínimo una vez.</span><span class="sxs-lookup"><span data-stu-id="73c5a-147">This is often called *At Least Once* processing; that is, each message is processed at least once.</span></span> <span data-ttu-id="73c5a-148">Sin embargo, en cierto Hola situaciones mismo mensaje puede volverse a entregar.</span><span class="sxs-lookup"><span data-stu-id="73c5a-148">However, in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="73c5a-149">Si el escenario de hello no puede tolerar el procesamiento duplicado, hará falta lógica adicional en duplicados de toodetect de aplicación Hola que se pueden lograr en función de hello **MessageId** propiedad de mensaje hello, que sigue siendo constante entre intentos de entrega.</span><span class="sxs-lookup"><span data-stu-id="73c5a-149">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates which can be achieved based upon hello **MessageId** property of hello message, which remains constant across delivery attempts.</span></span> <span data-ttu-id="73c5a-150">Esto se conoce como procesamiento *Exactamente una vez*.</span><span class="sxs-lookup"><span data-stu-id="73c5a-150">This is known as *Exactly Once* processing.</span></span>

## <a name="topics-and-subscriptions"></a><span data-ttu-id="73c5a-151">Temas y suscripciones</span><span class="sxs-lookup"><span data-stu-id="73c5a-151">Topics and subscriptions</span></span>
<span data-ttu-id="73c5a-152">En contraste tooqueues, en el que se procesa cada mensaje mediante un único consumidor *temas* y *suscripciones* proporcionan una forma de comunicación, uno a varios en una *depublicación/suscripción* patrón.</span><span class="sxs-lookup"><span data-stu-id="73c5a-152">In contrast tooqueues, in which each message is processed by a single consumer, *topics* and *subscriptions* provide a one-to-many form of communication, in a *publish/subscribe* pattern.</span></span> <span data-ttu-id="73c5a-153">Es útil para ajustar la escala toovery gran número de destinatarios, cada mensaje publicado se pone tooeach disponibles las suscripciones registradas con el tema de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-153">Useful for scaling toovery large numbers of recipients, each published message is made available tooeach subscription registered with hello topic.</span></span> <span data-ttu-id="73c5a-154">Se envían mensajes tooa tema y entregado tooone o más suscripciones asociadas, según las reglas de filtro que se pueden establecer por suscripción.</span><span class="sxs-lookup"><span data-stu-id="73c5a-154">Messages are sent tooa topic and delivered tooone or more associated subscriptions, depending on filter rules that can be set on a per-subscription basis.</span></span> <span data-ttu-id="73c5a-155">las suscripciones de Hello pueden utilizar mensajes de saludo de toorestrict filtros adicionales que desean tooreceive.</span><span class="sxs-lookup"><span data-stu-id="73c5a-155">hello subscriptions can use additional filters toorestrict hello messages that they want tooreceive.</span></span> <span data-ttu-id="73c5a-156">Los mensajes se envían tooa tema Hola misma forma se envían tooa cola, pero no se reciben mensajes de tema de hello directamente.</span><span class="sxs-lookup"><span data-stu-id="73c5a-156">Messages are sent tooa topic in hello same way they are sent tooa queue, but messages are not received from hello topic directly.</span></span> <span data-ttu-id="73c5a-157">En su lugar, se reciben de las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="73c5a-157">Instead, they are received from subscriptions.</span></span> <span data-ttu-id="73c5a-158">Una suscripción de tema es similar a una cola virtual que recibe copias de mensajes de saludo que se envían toohello tema.</span><span class="sxs-lookup"><span data-stu-id="73c5a-158">A topic subscription resembles a virtual queue that receives copies of hello messages that are sent toohello topic.</span></span> <span data-ttu-id="73c5a-159">Se reciben mensajes de una suscripción de forma idéntica forma toohello que se reciben de una cola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-159">Messages are received from a subscription identically toohello way they are received from a queue.</span></span>

<span data-ttu-id="73c5a-160">Si se compara, hello funcionalidad de envío de mensajes de una cola asigna directamente tooa tema y su funcionalidad de recepción de mensajes asigna tooa suscripción.</span><span class="sxs-lookup"><span data-stu-id="73c5a-160">By way of comparison, hello message-sending functionality of a queue maps directly tooa topic and its message-receiving functionality maps tooa subscription.</span></span> <span data-ttu-id="73c5a-161">Entre otras cosas, esto significa que las suscripciones admiten Hola mismos patrones descritos anteriormente en esta sección con tooqueues de tener en cuenta: consumidor en competencia, desacoplamiento temporal, nivelado de carga y equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="73c5a-161">Among other things, this means that subscriptions support hello same patterns described earlier in this section with regard tooqueues: competing consumer, temporal decoupling, load leveling, and load balancing.</span></span>

<span data-ttu-id="73c5a-162">Crear un tema es similar toocreating una cola, tal y como se muestra en el ejemplo de Hola en la sección anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-162">Creating a topic is similar toocreating a queue, as shown in hello example in hello previous section.</span></span> <span data-ttu-id="73c5a-163">Crear el URI del servicio de hello y, a continuación, usar hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) cliente de espacio de nombres de clase toocreate Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-163">Create hello service URI, and then use hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class toocreate hello namespace client.</span></span> <span data-ttu-id="73c5a-164">A continuación, puede crear un tema mediante hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) método.</span><span class="sxs-lookup"><span data-stu-id="73c5a-164">You can then create a topic using hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method.</span></span> <span data-ttu-id="73c5a-165">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="73c5a-165">For example:</span></span>

```csharp
TopicDescription dataCollectionTopic = namespaceClient.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="73c5a-166">Después, agregue las suscripciones que desee:</span><span class="sxs-lookup"><span data-stu-id="73c5a-166">Next, add subscriptions as desired:</span></span>

```csharp
SubscriptionDescription myAgentSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Inventory");
SubscriptionDescription myAuditSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Dashboard");
```

<span data-ttu-id="73c5a-167">Luego puede crear un cliente del tema.</span><span class="sxs-lookup"><span data-stu-id="73c5a-167">You can then create a topic client.</span></span> <span data-ttu-id="73c5a-168">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="73c5a-168">For example:</span></span>

```csharp
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider);
TopicClient myTopicClient = factory.CreateTopicClient(myTopic.Path)
```

<span data-ttu-id="73c5a-169">El remitente del mensaje de Hola puede enviar y recibir mensajes tooand de tema de hello, como se muestra en la sección anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="73c5a-169">Using hello message sender, you can send and receive messages tooand from hello topic, as shown in hello previous section.</span></span> <span data-ttu-id="73c5a-170">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="73c5a-170">For example:</span></span>

```csharp
foreach (BrokeredMessage message in messageList)
{
    myTopicClient.Send(message);
    Console.WriteLine(
    string.Format("Message sent: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

<span data-ttu-id="73c5a-171">Tooqueues similar, los mensajes se reciben de una suscripción con un [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) objeto en lugar de un [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) objeto.</span><span class="sxs-lookup"><span data-stu-id="73c5a-171">Similar tooqueues, messages are received from a subscription using a [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) object instead of a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object.</span></span> <span data-ttu-id="73c5a-172">Crear a cliente de suscripción de hello, pasando Hola nombre de tema de hello, nombre de Hola de suscripción de hello, y (opcionalmente) Hola modo de recepción como parámetros.</span><span class="sxs-lookup"><span data-stu-id="73c5a-172">Create hello subscription client, passing hello name of hello topic, hello name of hello subscription, and (optionally) hello receive mode as parameters.</span></span> <span data-ttu-id="73c5a-173">Por ejemplo, con hello **inventario** suscripción:</span><span class="sxs-lookup"><span data-stu-id="73c5a-173">For example, with hello **Inventory** subscription:</span></span>

```csharp
// Create hello subscription client
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider); 

SubscriptionClient agentSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Inventory", ReceiveMode.PeekLock);
SubscriptionClient auditSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Dashboard", ReceiveMode.ReceiveAndDelete); 

while ((message = agentSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Inventory...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
    message.Complete();
}          

// Create a receiver using ReceiveAndDelete mode
while ((message = auditSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Dashboard...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

### <a name="rules-and-actions"></a><span data-ttu-id="73c5a-174">Reglas y acciones</span><span class="sxs-lookup"><span data-stu-id="73c5a-174">Rules and actions</span></span>
<span data-ttu-id="73c5a-175">En muchos escenarios, los mensajes que tienen características específicas deben procesarse de maneras diferentes.</span><span class="sxs-lookup"><span data-stu-id="73c5a-175">In many scenarios, messages that have specific characteristics must be processed in different ways.</span></span> <span data-ttu-id="73c5a-176">tooenable esto, puede configurar mensajes de toofind de las suscripciones que tengan las propiedades adecuadas y, a continuación, realizan ciertas propiedades de toothose modificaciones.</span><span class="sxs-lookup"><span data-stu-id="73c5a-176">tooenable this, you can configure subscriptions toofind messages that have desired properties and then perform certain modifications toothose properties.</span></span> <span data-ttu-id="73c5a-177">Mientras que las suscripciones de Bus de servicio ven todos los mensajes enviados toohello tema, puede copiar solo un subconjunto de esas cola de mensajes toohello suscripción virtual.</span><span class="sxs-lookup"><span data-stu-id="73c5a-177">While Service Bus subscriptions see all messages sent toohello topic, you can only copy a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="73c5a-178">Esto se consigue mediante los filtros de suscripción.</span><span class="sxs-lookup"><span data-stu-id="73c5a-178">This is accomplished using subscription filters.</span></span> <span data-ttu-id="73c5a-179">Dichas modificaciones se denominan *acciones de filtrado*.</span><span class="sxs-lookup"><span data-stu-id="73c5a-179">Such modifications are called *filter actions*.</span></span> <span data-ttu-id="73c5a-180">Cuando se crea una suscripción, puede proporcionar una expresión de filtro que opera en las propiedades de Hola de mensaje de bienvenida, ambos Hola propiedades del sistema (por ejemplo, **etiqueta**) y las propiedades de la aplicación personalizada (por ejemplo, **StoreName**.) Hola expresión de filtro SQL es opcional en este caso; sin una expresión de filtro SQL, se realizará ninguna acción de filtro definida en una suscripción en todos los mensajes de Hola para esa suscripción.</span><span class="sxs-lookup"><span data-stu-id="73c5a-180">When a subscription is created, you can supply a filter expression that operates on hello properties of hello message, both hello system properties (for example, **Label**) and custom application properties (for example, **StoreName**.) hello SQL filter expression is optional in this case; without a SQL filter expression, any filter action defined on a subscription will be performed on all hello messages for that subscription.</span></span>

<span data-ttu-id="73c5a-181">Mediante el ejemplo anterior de hello, mensajes toofilter procedentes únicamente de **Store1**, debe crear suscripción de panel de hello como sigue:</span><span class="sxs-lookup"><span data-stu-id="73c5a-181">Using hello previous example, toofilter messages coming only from **Store1**, you would create hello Dashboard subscription as follows:</span></span>

```csharp
namespaceManager.CreateSubscription("IssueTrackingTopic", "Dashboard", new SqlFilter("StoreName = 'Store1'"));
```

<span data-ttu-id="73c5a-182">Con este filtro de suscripción en su lugar, sólo los mensajes que tienen hello `StoreName` propiedad establecida demasiado`Store1` son copiados toohello cola virtual para hello `Dashboard` suscripción.</span><span class="sxs-lookup"><span data-stu-id="73c5a-182">With this subscription filter in place, only messages that have hello `StoreName` property set too`Store1` are copied toohello virtual queue for hello `Dashboard` subscription.</span></span>

<span data-ttu-id="73c5a-183">Para obtener más información acerca de los valores de filtro posibles, vea la documentación Hola Hola [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) y [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) clases.</span><span class="sxs-lookup"><span data-stu-id="73c5a-183">For more information about possible filter values, see hello documentation for hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) and [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) classes.</span></span> <span data-ttu-id="73c5a-184">Consulte también hello [mensajería asíncrona: filtro avanzado](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) y [tema filtros](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) ejemplos.</span><span class="sxs-lookup"><span data-stu-id="73c5a-184">Also, see hello [Brokered Messaging: Advanced Filters](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) and [Topic Filters](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) samples.</span></span>

## <a name="next-steps"></a><span data-ttu-id="73c5a-185">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="73c5a-185">Next steps</span></span>
<span data-ttu-id="73c5a-186">Vea a continuación Hola avanzado de temas para obtener más información y ejemplos del uso de la mensajería de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="73c5a-186">See hello following advanced topics for more information and examples of using Service Bus messaging.</span></span>

* [<span data-ttu-id="73c5a-187">Introducción a la mensajería del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="73c5a-187">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="73c5a-188">Tutorial de .NET de mensajería asincrónica de Service Bus</span><span class="sxs-lookup"><span data-stu-id="73c5a-188">Service Bus brokered messaging .NET tutorial</span></span>](service-bus-brokered-tutorial-dotnet.md)
* [<span data-ttu-id="73c5a-189">Tutorial de REST de mensajería asincrónica de Service Bus</span><span class="sxs-lookup"><span data-stu-id="73c5a-189">Service Bus brokered messaging REST tutorial</span></span>](service-bus-brokered-tutorial-rest.md)
* [<span data-ttu-id="73c5a-190">Ejemplo de filtros de tema</span><span class="sxs-lookup"><span data-stu-id="73c5a-190">Topic Filters sample </span></span>](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/TopicFilters)
* [<span data-ttu-id="73c5a-191">Mensajería asincrónica: ejemplo de filtros avanzados</span><span class="sxs-lookup"><span data-stu-id="73c5a-191">Brokered Messaging: Advanced Filters sample</span></span>](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749)


---
title: "Información general de los elementos fundamentales de Azure Service Bus | Microsoft Docs"
description: "Una introducción a la utilización del Bus de servicio para conectar aplicaciones de Azure a otro software."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 12654cdd-82ab-4b95-b56f-08a5a8bbc6f9
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/15/2017
ms.author: sethm
ms.openlocfilehash: af8b10f0a460e695a39879718174e81f78934ef8
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="azure-service-bus"></a><span data-ttu-id="ded9f-103">Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="ded9f-103">Azure Service Bus</span></span>

<span data-ttu-id="ded9f-104">Cuando una aplicación o servicio se ejecutan en la nube o de manera local, a menudo tienen que interactuar con otras aplicaciones o servicios.</span><span class="sxs-lookup"><span data-stu-id="ded9f-104">Whether an application or service runs in the cloud or on premises, it often needs to interact with other applications or services.</span></span> <span data-ttu-id="ded9f-105">Para proporcionar una manera enormemente útil de hacerlo, Microsoft Azure ofrece el Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="ded9f-105">To provide a broadly useful way to do this, Microsoft Azure offers Service Bus.</span></span> <span data-ttu-id="ded9f-106">En este artículo nos centramos en esta tecnología, describiendo qué es y los beneficios que ofrece.</span><span class="sxs-lookup"><span data-stu-id="ded9f-106">This article looks at this technology, describing what it is and why you might want to use it.</span></span>

## <a name="service-bus-fundamentals"></a><span data-ttu-id="ded9f-107">Elementos fundamentales del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="ded9f-107">Service Bus fundamentals</span></span>

<span data-ttu-id="ded9f-108">Las distintas situaciones requieren distintos estilos de comunicación.</span><span class="sxs-lookup"><span data-stu-id="ded9f-108">Different situations call for different styles of communication.</span></span> <span data-ttu-id="ded9f-109">A veces, permitir a las aplicaciones enviar y recibir mensajes mediante una simple cola es la mejor solución.</span><span class="sxs-lookup"><span data-stu-id="ded9f-109">Sometimes, letting applications send and receive messages through a simple queue is the best solution.</span></span> <span data-ttu-id="ded9f-110">En otras situaciones, una cola ordinaria no es suficiente y es mejor una cola con un mecanismo de publicación y suscripción.</span><span class="sxs-lookup"><span data-stu-id="ded9f-110">In other situations, an ordinary queue isn't enough; a queue with a publish-and-subscribe mechanism is better.</span></span> <span data-ttu-id="ded9f-111">En algunos casos, todo lo que hace falta es una conexión entre las aplicaciones y no se requieren colas.</span><span class="sxs-lookup"><span data-stu-id="ded9f-111">In some cases, all that's needed is a connection between applications, and queues are not required.</span></span> <span data-ttu-id="ded9f-112">El Bus de servicio ofrece las tres opciones, por lo que sus aplicaciones pueden interactuar de varias maneras diferentes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-112">Service Bus provides all three options, enabling your applications to interact in several different ways.</span></span>

<span data-ttu-id="ded9f-113">El Bus de servicio es un servicio en la nube multiinquilino, lo que significa que varios usuarios comparten el servicio.</span><span class="sxs-lookup"><span data-stu-id="ded9f-113">Service Bus is a multi-tenant cloud service, which means that the service is shared by multiple users.</span></span> <span data-ttu-id="ded9f-114">Cada usuario, como desarrollador de aplicaciones, crea un *espacio de nombres* y luego define los mecanismos de comunicación que necesita dentro de ese espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="ded9f-114">Each user, such as an application developer, creates a *namespace*, then defines the communication mechanisms needed within that namespace.</span></span> <span data-ttu-id="ded9f-115">La figura 1 muestra el aspecto de esta arquitectura.</span><span class="sxs-lookup"><span data-stu-id="ded9f-115">Figure 1 shows how this architecture looks.</span></span>

![][1]

<span data-ttu-id="ded9f-116">**Ilustración 1: el Bus de servicio proporciona un servicio multiinquilino para conectar aplicaciones a través de la nube.**</span><span class="sxs-lookup"><span data-stu-id="ded9f-116">**Figure 1: Service Bus provides a multi-tenant service for connecting applications through the cloud.**</span></span>

<span data-ttu-id="ded9f-117">Dentro de un espacio de nombres puede usar uno o más ejemplos de los tres mecanismos de comunicación diferentes, que se conectan a las aplicaciones de forma distinta.</span><span class="sxs-lookup"><span data-stu-id="ded9f-117">Within a namespace, you can use one or more instances of three different communication mechanisms, each of which connects applications in a different way.</span></span> <span data-ttu-id="ded9f-118">Las opciones son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="ded9f-118">The choices are:</span></span>

* <span data-ttu-id="ded9f-119">*Colas*, que permiten una comunicación unidireccional.</span><span class="sxs-lookup"><span data-stu-id="ded9f-119">*Queues*, which allow one-directional communication.</span></span> <span data-ttu-id="ded9f-120">Cada cola funciona como un intermediario (al que se le llama a veces *agente*) que almacena los mensajes enviados hasta que se reciben.</span><span class="sxs-lookup"><span data-stu-id="ded9f-120">Each queue acts as an intermediary (sometimes called a *broker*) that stores sent messages until they are received.</span></span> <span data-ttu-id="ded9f-121">Cada mensaje lo recibe un único destinatario.</span><span class="sxs-lookup"><span data-stu-id="ded9f-121">Each message is received by a single recipient.</span></span>
* <span data-ttu-id="ded9f-122">*Temas*, que proporcionan una comunicación unidireccional mediante *suscripciones* (un solo tema puede tener varias suscripciones).</span><span class="sxs-lookup"><span data-stu-id="ded9f-122">*Topics*, which provide one-directional communication using *subscriptions*-a single topic can have multiple subscriptions.</span></span> <span data-ttu-id="ded9f-123">Al igual que las colas, los temas funcionan como agentes, pero cada suscripción puede usar opcionalmente un filtro para recibir solo los mensajes que cumplan criterios concretos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-123">Like a queue, a topic acts as a broker, but each subscription can optionally use a filter to receive only messages that match specific criteria.</span></span>
* <span data-ttu-id="ded9f-124">*Retransmisiones*, que permiten una comunicación bidireccional.</span><span class="sxs-lookup"><span data-stu-id="ded9f-124">*Relays*, which provide bi-directional communication.</span></span> <span data-ttu-id="ded9f-125">A diferencia de las colas y los temas, las retransmisiones no almacenan mensajes que se encuentran en proceso; no son agentes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-125">Unlike queues and topics, a relay doesn't store in-flight messages; it's not a broker.</span></span> <span data-ttu-id="ded9f-126">Simplemente los transmiten a la aplicación de destino.</span><span class="sxs-lookup"><span data-stu-id="ded9f-126">Instead, it just passes them on to the destination application.</span></span>

<span data-ttu-id="ded9f-127">Cuando cree una cola, un tema o una retransmisión, asígneles un nombre.</span><span class="sxs-lookup"><span data-stu-id="ded9f-127">When you create a queue, topic, or relay, you give it a name.</span></span> <span data-ttu-id="ded9f-128">Cuando se combina con el nombre del espacio de nombres, se crea un identificador exclusivo para el objeto.</span><span class="sxs-lookup"><span data-stu-id="ded9f-128">Combined with whatever you called your namespace, this name creates a unique identifier for the object.</span></span> <span data-ttu-id="ded9f-129">Las aplicaciones pueden proporcionar ese nombre al bus de servicio y, a continuación, usar esa cola, tema o relé para comunicarse con los demás.</span><span class="sxs-lookup"><span data-stu-id="ded9f-129">Applications can provide this name to Service Bus, then use that queue, topic, or relay to communicate with one another.</span></span> 

<span data-ttu-id="ded9f-130">Para usar cualquiera de estos objetos en el escenario de retransmisión, las aplicaciones de Windows pueden usar Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="ded9f-130">To use any of these objects in the relay scenario, Windows applications can use Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="ded9f-131">Este servicio se conoce como [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span><span class="sxs-lookup"><span data-stu-id="ded9f-131">This service is known as [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span></span> <span data-ttu-id="ded9f-132">En el caso de las colas y los temas, las aplicaciones de Windows pueden usar las API de mensajería definidas por el bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="ded9f-132">For queues and topics, Windows applications can use Service Bus-defined messaging APIs.</span></span> <span data-ttu-id="ded9f-133">Para facilitar el uso de estos objetos desde aplicaciones que no sean de Windows, Microsoft proporciona SDK para Java, Node.js y otros lenguajes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-133">To make these objects easier to use from non-Windows applications, Microsoft provides SDKs for Java, Node.js, and other languages.</span></span> <span data-ttu-id="ded9f-134">También se puede acceder a las colas y a los temas mediante las [API de REST](/rest/api/servicebus/) sobre HTTP(s).</span><span class="sxs-lookup"><span data-stu-id="ded9f-134">You can also access queues and topics using [REST APIs](/rest/api/servicebus/) over HTTP(s).</span></span> 

<span data-ttu-id="ded9f-135">Es importante comprender que aunque el Bus de servicio se ejecute en la nube (es decir, en los centros de datos de Azure de Microsoft), las aplicaciones que usa pueden ejecutarse desde cualquier lugar.</span><span class="sxs-lookup"><span data-stu-id="ded9f-135">It's important to understand that even though Service Bus itself runs in the cloud (that is, in Microsoft's Azure datacenters), applications that use it can run anywhere.</span></span> <span data-ttu-id="ded9f-136">Puede usar el Bus de servicio para conectarse a aplicaciones que se ejecutan, por ejemplo, en Azure o aplicaciones que se ejecutan dentro de su propio centro de datos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-136">You can use Service Bus to connect applications running on Azure, for example, or applications running inside your own datacenter.</span></span> <span data-ttu-id="ded9f-137">También puede usarlo para conectarse a una aplicación que se ejecuta en Azure o a otra plataforma en la nube con una aplicación local o con tabletas y teléfonos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-137">You can also use it to connect an application running on Azure or another cloud platform with an on-premises application or with tablets and phones.</span></span> <span data-ttu-id="ded9f-138">Es posible incluso conectar aparatos domésticos, sensores y otros dispositivos a una aplicación central o entre ellos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-138">It's even possible to connect household appliances, sensors, and other devices to a central application or to one other.</span></span> <span data-ttu-id="ded9f-139">El bus de servicio es un mecanismo de comunicación en la nube al que se puede acceder desde prácticamente cualquier lugar.</span><span class="sxs-lookup"><span data-stu-id="ded9f-139">Service Bus is a communication mechanism in the cloud that's accessible from pretty much anywhere.</span></span> <span data-ttu-id="ded9f-140">La forma en la que lo use depende de las tareas que tengan que realizar sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="ded9f-140">How you use it depends on what your applications need to do.</span></span>

## <a name="queues"></a><span data-ttu-id="ded9f-141">Colas</span><span class="sxs-lookup"><span data-stu-id="ded9f-141">Queues</span></span>

<span data-ttu-id="ded9f-142">Supongamos que decide conectar dos aplicaciones con una cola de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="ded9f-142">Suppose you decide to connect two applications using a Service Bus queue.</span></span> <span data-ttu-id="ded9f-143">La ilustración 2 muestra esa situación.</span><span class="sxs-lookup"><span data-stu-id="ded9f-143">Figure 2 illustrates this situation.</span></span>

![][2]

<span data-ttu-id="ded9f-144">**Figura 2: las colas del Bus de servicio proporcionan una cola asincrónica unidireccional.**</span><span class="sxs-lookup"><span data-stu-id="ded9f-144">**Figure 2: Service Bus queues provide one-way asynchronous queuing.**</span></span>

<span data-ttu-id="ded9f-145">El proceso es sencillo: un usuario A envía un mensaje a la cola del Bus de servicio y un receptor recoge ese mensaje más tarde.</span><span class="sxs-lookup"><span data-stu-id="ded9f-145">The process is simple: A sender sends a message to a Service Bus queue, and a receiver picks up that message at some later time.</span></span> <span data-ttu-id="ded9f-146">Una cola puede tener solo un único receptor, como muestra la Figura 2,</span><span class="sxs-lookup"><span data-stu-id="ded9f-146">A queue can have just a single receiver, as Figure 2 shows.</span></span> <span data-ttu-id="ded9f-147">o bien varias aplicaciones pueden leer de la misma cola.</span><span class="sxs-lookup"><span data-stu-id="ded9f-147">Or, multiple applications can read from the same queue.</span></span> <span data-ttu-id="ded9f-148">En el segundo caso, cada mensaje lo lee un solo receptor.</span><span class="sxs-lookup"><span data-stu-id="ded9f-148">In the latter situation, each message is read by just one receiver.</span></span> <span data-ttu-id="ded9f-149">Para un servicio de multidifusión, es preciso utilizar un tema.</span><span class="sxs-lookup"><span data-stu-id="ded9f-149">For a multi-cast service, you should use a topic instead.</span></span>

<span data-ttu-id="ded9f-150">Cada mensaje tiene dos partes: un conjunto de propiedades, cada una de ellas, un par clave/valor, y una carga de mensaje.</span><span class="sxs-lookup"><span data-stu-id="ded9f-150">Each message has two parts: a set of properties, each a key/value pair, and a message payload.</span></span> <span data-ttu-id="ded9f-151">La carga de mensaje puede ser binaria, texto o incluso XML.</span><span class="sxs-lookup"><span data-stu-id="ded9f-151">The payload can be binary, text, or even XML.</span></span> <span data-ttu-id="ded9f-152">El modo en que se usan depende de lo que una aplicación esté tratando de hacer.</span><span class="sxs-lookup"><span data-stu-id="ded9f-152">How they're used depends on what an application is trying to do.</span></span> <span data-ttu-id="ded9f-153">Por ejemplo, una aplicación que envía un mensaje sobre una venta reciente podría incluir las propiedades **Seller="Ava"** y **Amount=10000**.</span><span class="sxs-lookup"><span data-stu-id="ded9f-153">For example, an application sending a message about a recent sale might include the properties **Seller="Ava"** and **Amount=10000**.</span></span> <span data-ttu-id="ded9f-154">El cuerpo del mensaje puede contener una imagen escaneada del contrato firmado de la venta o, si no la hubiera, puede aparecer vacío.</span><span class="sxs-lookup"><span data-stu-id="ded9f-154">The message body might contain a scanned image of the sale's signed contract or, if there isn't one, remain empty.</span></span>

<span data-ttu-id="ded9f-155">El receptor puede leer los mensajes de la cola del bus de servicio de dos formas distintas.</span><span class="sxs-lookup"><span data-stu-id="ded9f-155">A receiver can read a message from a Service Bus queue in two different ways.</span></span> <span data-ttu-id="ded9f-156">La primera opción, denominada *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, quita un mensaje de la cola y lo elimina de inmediato.</span><span class="sxs-lookup"><span data-stu-id="ded9f-156">The first option, called *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, removes a message from the queue and immediately deletes it.</span></span> <span data-ttu-id="ded9f-157">Esta opción es sencilla, pero si se produce un error por parte del receptor antes de que finalice el procesamiento del mensaje, este se perderá.</span><span class="sxs-lookup"><span data-stu-id="ded9f-157">This option is simple, but if the receiver crashes before it finishes processing the message, the message is lost.</span></span> <span data-ttu-id="ded9f-158">Puesto que se quita de la cola, ningún otro receptor podrá obtener acceso a él.</span><span class="sxs-lookup"><span data-stu-id="ded9f-158">Because it's been removed from the queue, no other receiver can access it.</span></span> 

<span data-ttu-id="ded9f-159">La segunda opción, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, se ha creado para solucionar este problema.</span><span class="sxs-lookup"><span data-stu-id="ded9f-159">The second option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, is meant to help with this problem.</span></span> <span data-ttu-id="ded9f-160">Como ocurre con **ReceiveAndDelete**, una lectura de **PeekLock** quita un mensaje de la cola.</span><span class="sxs-lookup"><span data-stu-id="ded9f-160">Like **ReceiveAndDelete**, a **PeekLock** read removes a message from the queue.</span></span> <span data-ttu-id="ded9f-161">Sin embargo, no elimina el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ded9f-161">It doesn't delete the message, however.</span></span> <span data-ttu-id="ded9f-162">En este caso, bloquea el mensaje, por lo que se oculta a los demás receptores. A continuación, espera a que se produzca uno de los tres eventos:</span><span class="sxs-lookup"><span data-stu-id="ded9f-162">Instead, it locks the message, making it invisible to other receivers, then waits for one of three events:</span></span>

* <span data-ttu-id="ded9f-163">Si el receptor procesa el mensaje correctamente, invoca [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) y la cola elimina el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ded9f-163">If the receiver processes the message successfully, it calls [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), and the queue deletes the message.</span></span> 
* <span data-ttu-id="ded9f-164">Si el receptor decide que no puede procesar el mensaje correctamente, invoca [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span><span class="sxs-lookup"><span data-stu-id="ded9f-164">If the receiver decides that it can't process the message successfully, it calls [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span></span> <span data-ttu-id="ded9f-165">La cola quita el bloqueo del mensaje y se pone a disposición de otros receptores.</span><span class="sxs-lookup"><span data-stu-id="ded9f-165">The queue then removes the lock from the message and makes it available to other receivers.</span></span>
* <span data-ttu-id="ded9f-166">Si el receptor no invoca ninguno de estos métodos en un período configurable (60 segundos de forma predeterminada), la cola presupone que se ha producido un error con el receptor.</span><span class="sxs-lookup"><span data-stu-id="ded9f-166">If the receiver calls neither of these methods within a configurable period of time (by default, 60 seconds), the queue assumes the receiver has failed.</span></span> <span data-ttu-id="ded9f-167">En ese caso, se comporta como si el receptor hubiera llamado a **Abandon**, lo que hace que el mensaje esté disponible para otros receptores.</span><span class="sxs-lookup"><span data-stu-id="ded9f-167">In this case, it behaves as if the receiver had called **Abandon**, making the message available to other receivers.</span></span>

<span data-ttu-id="ded9f-168">Observe lo que ocurre aquí: el mismo mensaje puede enviarse dos veces, quizás a dos receptores distintos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-168">Notice what can happen here: the same message might be delivered twice, perhaps to two different receivers.</span></span> <span data-ttu-id="ded9f-169">Las aplicaciones que usan colas de Service Bus deben estar preparadas para este evento.</span><span class="sxs-lookup"><span data-stu-id="ded9f-169">Applications using Service Bus queues must be prepared for this event.</span></span> <span data-ttu-id="ded9f-170">Para facilitar la detección de duplicados, cada mensaje dispone de una propiedad [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) única que no se modifica de forma predeterminada, independientemente del número de veces que se lea un mensaje en una cola.</span><span class="sxs-lookup"><span data-stu-id="ded9f-170">To make duplicate detection easier, each message has a unique [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property that by default stays the same no matter how many times the message is read from a queue.</span></span> 

<span data-ttu-id="ded9f-171">Las colas son útiles en determinadas situaciones.</span><span class="sxs-lookup"><span data-stu-id="ded9f-171">Queues are useful in quite a few situations.</span></span> <span data-ttu-id="ded9f-172">Permiten a las aplicaciones comunicarse incluso si no se están ejecutando a la vez. Esto es especialmente útil con aplicaciones móviles y por lotes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-172">They enable applications to communicate even when both aren't running at the same time, something that's especially handy with batch and mobile applications.</span></span> <span data-ttu-id="ded9f-173">Una cola con varios receptores también proporciona un equilibrio de carga automático, ya que los mensajes enviados se difunden a través de esos receptores.</span><span class="sxs-lookup"><span data-stu-id="ded9f-173">A queue with multiple receivers also provides automatic load balancing, since sent messages are spread across these receivers.</span></span>

## <a name="topics"></a><span data-ttu-id="ded9f-174">Temas</span><span class="sxs-lookup"><span data-stu-id="ded9f-174">Topics</span></span>

<span data-ttu-id="ded9f-175">Aunque son útiles, las colas no siempre son la solución adecuada.</span><span class="sxs-lookup"><span data-stu-id="ded9f-175">Useful as they are, queues aren't always the right solution.</span></span> <span data-ttu-id="ded9f-176">A veces, los temas de bus de servicio son mejores.</span><span class="sxs-lookup"><span data-stu-id="ded9f-176">Sometimes, Service Bus topics are better.</span></span> <span data-ttu-id="ded9f-177">La ilustración 3 muestra esa perspectiva.</span><span class="sxs-lookup"><span data-stu-id="ded9f-177">Figure 3 illustrates this idea.</span></span>

![][3]

<span data-ttu-id="ded9f-178">**Figura 3: En función del filtro que especifique la aplicación de suscripción, puede recibir algunos de los mensajes enviados a un tema de Service Bus, o todos ellos.**</span><span class="sxs-lookup"><span data-stu-id="ded9f-178">**Figure 3: Based on the filter a subscribing application specifies, it can receive some or all the messages sent to a Service Bus topic.**</span></span>

<span data-ttu-id="ded9f-179">Un *tema* se parece en muchos aspectos a una cola.</span><span class="sxs-lookup"><span data-stu-id="ded9f-179">A *topic* is similar in many ways to a queue.</span></span> <span data-ttu-id="ded9f-180">Los remitentes envían mensajes a un tema de la misma forma que a una cola, y dichos mensajes tienen la misma apariencia que las colas.</span><span class="sxs-lookup"><span data-stu-id="ded9f-180">Senders submit messages to a topic in the same way that they submit messages to a queue, and those messages look the same as with queues.</span></span> <span data-ttu-id="ded9f-181">La diferencia es que los temas permiten a cada aplicación de recepción crear su propia *suscripción* mediante la definición de un *filtro*.</span><span class="sxs-lookup"><span data-stu-id="ded9f-181">The difference is that topics enable each receiving application to create its own *subscription* by defining a *filter*.</span></span> <span data-ttu-id="ded9f-182">Un suscriptor ve, por lo tanto, solo los mensajes que coincidan con ese filtro.</span><span class="sxs-lookup"><span data-stu-id="ded9f-182">A subscriber then sees only the messages that match that filter.</span></span> <span data-ttu-id="ded9f-183">Por ejemplo, la Figura 3 muestra un remitente y un tema con tres suscriptores, cada uno con su propio filtro:</span><span class="sxs-lookup"><span data-stu-id="ded9f-183">For example, Figure 3 shows a sender and a topic with three subscribers, each with its own filter:</span></span>

* <span data-ttu-id="ded9f-184">El suscriptor 1 recibe solo mensajes que contienen la propiedad *Seller="Ava"*.</span><span class="sxs-lookup"><span data-stu-id="ded9f-184">Subscriber 1 receives only messages that contain the property *Seller="Ava"*.</span></span>
* <span data-ttu-id="ded9f-185">El suscriptor 2 recibe mensajes que contienen la propiedad *Seller="Ruby"* o la propiedad *Amount* cuyo valor es superior a 100.000.</span><span class="sxs-lookup"><span data-stu-id="ded9f-185">Subscriber 2 receives messages that contain the property *Seller="Ruby"* and/or contain an *Amount* property whose value is greater than 100,000.</span></span> <span data-ttu-id="ded9f-186">Quizás Ruby es la directora de ventas, y por eso quiere ver sus propias ventas y todas las ventas importantes con independencia de quién las haga.</span><span class="sxs-lookup"><span data-stu-id="ded9f-186">Perhaps Ruby is the sales manager, so she wants to see both her own sales and all large sales regardless of who makes them.</span></span>
* <span data-ttu-id="ded9f-187">El suscriptor 3 ha establecido su filtro en *True*, lo que significa que recibe todos los mensajes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-187">Subscriber 3 has set its filter to *True*, which means that it receives all messages.</span></span> <span data-ttu-id="ded9f-188">Por ejemplo, esta aplicación puede ser responsable de mantener una traza de auditoría y, por tanto, necesita ver todos los mensajes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-188">For example, this application might be responsible for maintaining an audit trail and therefore it needs to see all the messages.</span></span>

<span data-ttu-id="ded9f-189">Como ocurre con las colas, los suscriptores a un tema pueden leer los mensajes utilizando [ReceiveAndDelete o PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="ded9f-189">As with queues, subscribers to a topic can read messages using either [ReceiveAndDelete or PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span></span> <span data-ttu-id="ded9f-190">Sin embargo, a diferencia de las colas, varias suscripciones pueden recibir un mensaje individual enviado a un tema.</span><span class="sxs-lookup"><span data-stu-id="ded9f-190">Unlike queues, however, a single message sent to a topic can be received by multiple subscriptions.</span></span> <span data-ttu-id="ded9f-191">Este enfoque, que se denomina normalmente *publicar y suscribir* (o *pub/sub*), es útil cuando hay varias aplicaciones interesadas en los mismos mensajes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-191">This approach, commonly called *publish and subscribe* (or *pub/sub*), is useful whenever multiple applications are interested in the same messages.</span></span> <span data-ttu-id="ded9f-192">Si se define el filtro adecuado, cada suscriptor puede pulsar solo la parte de la secuencia de mensaje que necesita ver.</span><span class="sxs-lookup"><span data-stu-id="ded9f-192">By defining the right filter, each subscriber can tap into just the part of the message stream that it needs to see.</span></span>

## <a name="relays"></a><span data-ttu-id="ded9f-193">Retransmisiones</span><span class="sxs-lookup"><span data-stu-id="ded9f-193">Relays</span></span>

<span data-ttu-id="ded9f-194">Tanto las colas como los temas proporcionan una comunicación asincrónica unidireccional a través de un agente.</span><span class="sxs-lookup"><span data-stu-id="ded9f-194">Both queues and topics provide one-way asynchronous communication through a broker.</span></span> <span data-ttu-id="ded9f-195">El tráfico fluye en una única dirección y no existe una conexión directa entre los remitentes y los receptores.</span><span class="sxs-lookup"><span data-stu-id="ded9f-195">Traffic flows in just one direction, and there's no direct connection between senders and receivers.</span></span> <span data-ttu-id="ded9f-196">Sin embargo, ¿qué ocurre si no quiere esa conexión?</span><span class="sxs-lookup"><span data-stu-id="ded9f-196">But what if you don't want this connection?</span></span> <span data-ttu-id="ded9f-197">Supongamos que sus aplicaciones necesitan enviar y recibir mensajes, o que quizás quiere un vínculo directo entre ellas y necesita un agente para almacenar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="ded9f-197">Suppose your applications need to both send and receive messages, or perhaps you want a direct link between them and you don't need a broker to store messages.</span></span> <span data-ttu-id="ded9f-198">Para afrontar escenarios como este, el Bus de servicio proporciona *retransmisiones*, como muestra la Figura 4.</span><span class="sxs-lookup"><span data-stu-id="ded9f-198">To address scenarios such as this, Service Bus provides *relays*, as Figure 4 shows.</span></span>

![][4]

<span data-ttu-id="ded9f-199">**Figura 4: la retransmisión del Bus de servicio proporciona comunicación sincrónica bidireccional entre aplicaciones.**</span><span class="sxs-lookup"><span data-stu-id="ded9f-199">**Figure 4: Service Bus relay provides synchronous, two-way communication between applications.**</span></span>

<span data-ttu-id="ded9f-200">La pregunta obvia que se plantea acerca de las retransmisiones es la siguiente: ¿por qué habría de usar una?</span><span class="sxs-lookup"><span data-stu-id="ded9f-200">The obvious question to ask about relays is this: why would I use one?</span></span> <span data-ttu-id="ded9f-201">Incluso si no necesito colas, ¿por qué hacer que las aplicaciones se comuniquen a través de un servicio en la nube en lugar de interactuar directamente?</span><span class="sxs-lookup"><span data-stu-id="ded9f-201">Even if I don't need queues, why make applications communicate via a cloud service rather than just interact directly?</span></span> <span data-ttu-id="ded9f-202">La respuesta es que hablar directamente puede ser más complicado de lo que se piensa.</span><span class="sxs-lookup"><span data-stu-id="ded9f-202">The answer is that talking directly can be harder than you might think.</span></span>

<span data-ttu-id="ded9f-203">Supongamos que desea conectar dos aplicaciones locales que se ejecutan dentro de centros de datos corporativos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-203">Suppose you want to connect two on-premises applications, both running inside corporate datacenters.</span></span> <span data-ttu-id="ded9f-204">Cada una de esas aplicaciones se encuentran protegidas por un firewall y cada centro de datos usa probablemente la traducción de direcciones de red (NAT).</span><span class="sxs-lookup"><span data-stu-id="ded9f-204">Each of these applications sits behind a firewall, and each datacenter probably uses network address translation (NAT).</span></span> <span data-ttu-id="ded9f-205">El firewall bloquea los datos entrantes en casi todos los puertos y NAT implica que la máquina en la que se ejecuta cada aplicación no dispone de una dirección IP fija a la que se pueda llegar directamente desde fuera del centro de datos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-205">The firewall blocks incoming data on all but a few ports, and NAT implies that the machine each application is running on doesn't have a fixed IP address that you can reach directly from outside the datacenter.</span></span> <span data-ttu-id="ded9f-206">Si no se cuenta con ayuda adicional, conectar esas aplicaciones mediante una conexión pública a Internet es complicado.</span><span class="sxs-lookup"><span data-stu-id="ded9f-206">Without some extra help, connecting these applications over the public internet is problematic.</span></span>

<span data-ttu-id="ded9f-207">Una retransmisión de bus de servicio puede ser de gran ayuda.</span><span class="sxs-lookup"><span data-stu-id="ded9f-207">A Service Bus relay can help.</span></span> <span data-ttu-id="ded9f-208">Para comunicarse de forma bidireccional a través de un relé, cada aplicación establece una conexión TCP saliente con el Bus de servicio y, a continuación, la mantiene abierta.</span><span class="sxs-lookup"><span data-stu-id="ded9f-208">To communicate bi-directionally through a relay, each application establishes an outbound TCP connection with Service Bus, then keeps it open.</span></span> <span data-ttu-id="ded9f-209">Todas las comunicaciones entre las dos aplicaciones se llevarán a cabo a través de esas conexiones.</span><span class="sxs-lookup"><span data-stu-id="ded9f-209">All communication between the two applications travels over these connections.</span></span> <span data-ttu-id="ded9f-210">Puesto que cada conexión se estableció desde dentro del centro de datos, el firewall permite el tráfico entrante a cada aplicación sin abrir puertos nuevos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-210">Because each connection was established from inside the datacenter, the firewall allows incoming traffic to each application without opening new ports.</span></span> <span data-ttu-id="ded9f-211">Este enfoque también evita el problema de NAT, puesto que cada aplicación cuenta con un extremo coherente en la nube a través de la comunicación.</span><span class="sxs-lookup"><span data-stu-id="ded9f-211">This approach also gets around the NAT problem, because each application has a consistent endpoint in the cloud throughout the communication.</span></span> <span data-ttu-id="ded9f-212">Las aplicaciones pueden evitar los problemas que podrían complicar la comunicación mediante el intercambio de datos a través del relé.</span><span class="sxs-lookup"><span data-stu-id="ded9f-212">By exchanging data through the relay, the applications can avoid the problems that would otherwise make communication difficult.</span></span> 

<span data-ttu-id="ded9f-213">Para utilizar retransmisiones de Bus de servicio, las aplicaciones se basan en Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="ded9f-213">To use Service Bus relays, applications rely on the Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="ded9f-214">El bus de servicio proporciona enlaces a WCF que facilitan la interactuación de las aplicaciones de Windows a través de los relés.</span><span class="sxs-lookup"><span data-stu-id="ded9f-214">Service Bus provides WCF bindings that make it straightforward for Windows applications to interact via relays.</span></span> <span data-ttu-id="ded9f-215">Las aplicaciones que ya usan WCF pueden normalmente especificar solo uno de esos enlaces y después comunicarse con los demás a través de una retransmisión.</span><span class="sxs-lookup"><span data-stu-id="ded9f-215">Applications that already use WCF can typically specify one of these bindings, then talk to each other through a relay.</span></span> <span data-ttu-id="ded9f-216">Sin embargo, a diferencia de las colas y los temas, el uso, cuando sea posible, de retransmisiones desde aplicaciones que no sean de Windows requiere cierto esfuerzo de programación; no se proporcionan bibliotecas estándar.</span><span class="sxs-lookup"><span data-stu-id="ded9f-216">Unlike queues and topics, however, using relays from non-Windows applications, while possible, requires some programming effort; no standard libraries are provided.</span></span>

<span data-ttu-id="ded9f-217">A diferencia de lo que ocurre con las colas y los temas, las aplicaciones no crean retransmisiones explícitamente.</span><span class="sxs-lookup"><span data-stu-id="ded9f-217">Unlike queues and topics, applications don't explicitly create relays.</span></span> <span data-ttu-id="ded9f-218">En este caso, cuando una aplicación que desea recibir mensajes establece una conexión TCP con el bus de servicio, se crea un relé automáticamente.</span><span class="sxs-lookup"><span data-stu-id="ded9f-218">Instead, when an application that wishes to receive messages establishes a TCP connection with Service Bus, a relay is created automatically.</span></span> <span data-ttu-id="ded9f-219">Cuando se abandona la conexión, el relé se elimina.</span><span class="sxs-lookup"><span data-stu-id="ded9f-219">When the connection is dropped, the relay is deleted.</span></span> <span data-ttu-id="ded9f-220">Para que una aplicación encuentre una retransmisión creada por un agente de escucha específico, el Bus de servicio proporciona un registro que permite a las aplicaciones ubicar una retransmisión específica por nombre.</span><span class="sxs-lookup"><span data-stu-id="ded9f-220">To enable an application to find the relay created by a specific listener, Service Bus provides a registry that enables applications to locate a specific relay by name.</span></span>

<span data-ttu-id="ded9f-221">Las retransmisiones son la solución adecuada cuando se necesita una comunicación directa entre las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="ded9f-221">Relays are the right solution when you need direct communication between applications.</span></span> <span data-ttu-id="ded9f-222">Por ejemplo, piense en un sistema de reserva de una aerolínea que se ejecute en un centro de datos local y al que deba poder accederse desde mostradores de facturación, dispositivos móviles y otros equipos.</span><span class="sxs-lookup"><span data-stu-id="ded9f-222">For example, consider an airline reservation system running in an on-premises datacenter that must be accessed from check-in kiosks, mobile devices, and other computers.</span></span> <span data-ttu-id="ded9f-223">Las aplicaciones que se ejecuten en todos esos sistemas podrían confiar en las retransmisiones de Service Bus en la nube para comunicarse, con independencia del lugar en el que lo hagan.</span><span class="sxs-lookup"><span data-stu-id="ded9f-223">Applications running on all these systems could rely on Service Bus relays in the cloud to communicate, wherever they might be running.</span></span>

## <a name="summary"></a><span data-ttu-id="ded9f-224">Resumen</span><span class="sxs-lookup"><span data-stu-id="ded9f-224">Summary</span></span>

<span data-ttu-id="ded9f-225">La conexión de aplicaciones forma parte desde siempre de la creación de soluciones completas. El tipo de escenarios que requieren las aplicaciones y los servicios para comunicarse entre sí se configura de forma que aumente en función de las aplicaciones y los dispositivos que se conectan a Internet.</span><span class="sxs-lookup"><span data-stu-id="ded9f-225">Connecting applications has always been part of building complete solutions, and the range of scenarios that require applications and services to communicate with each other is set to increase as more applications and devices are connected to the internet.</span></span> <span data-ttu-id="ded9f-226">Al proporcionar tecnologías basadas en la nube para lograrlo a través de colas, temas y retransmisiones, el objetivo de Service Bus es facilitar la implementación de esta función fundamental y ofrecer una disponibilidad más amplia.</span><span class="sxs-lookup"><span data-stu-id="ded9f-226">By providing cloud-based technologies for achieving communication through queues, topics, and relays, Service Bus aims to make this essential function easier to implement and more broadly available.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ded9f-227">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="ded9f-227">Next steps</span></span>

<span data-ttu-id="ded9f-228">Ahora que conoce los fundamentos del Bus de servicio de Azure, siga estos vínculos para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="ded9f-228">Now that you've learned the fundamentals of Azure Service Bus, follow these links to learn more.</span></span>

* <span data-ttu-id="ded9f-229">[Utilización de las colas de Service Bus](service-bus-dotnet-get-started-with-queues.md)</span><span class="sxs-lookup"><span data-stu-id="ded9f-229">How to use [Service Bus queues](service-bus-dotnet-get-started-with-queues.md)</span></span>
* <span data-ttu-id="ded9f-230">Uso de [temas de Service Bus](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span><span class="sxs-lookup"><span data-stu-id="ded9f-230">How to use [Service Bus topics](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span></span>
* <span data-ttu-id="ded9f-231">Uso de [retransmisión de Bus de servicio](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span><span class="sxs-lookup"><span data-stu-id="ded9f-231">How to use [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span></span>
* [<span data-ttu-id="ded9f-232">Ejemplos del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="ded9f-232">Service Bus samples</span></span>](service-bus-samples.md)

[1]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_01_architecture.png
[2]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_02_queues.png
[3]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_03_topicsandsubscriptions.png
[4]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_04_relay.png

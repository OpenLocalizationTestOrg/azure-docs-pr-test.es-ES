---
title: aaaCreate particiones temas y colas de Service Bus de Azure | Documentos de Microsoft
description: "Describe cómo corredores de temas mediante el uso de varios mensajes y colas de Bus de servicio de toopartition."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 6d42556a0714d6a012dc319f662521c8b0bb958b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="e06d6-103">Temas y colas con particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-103">Partitioned queues and topics</span></span>
<span data-ttu-id="e06d6-104">Service Bus de Azure emplea varios mensajes de corredores de bolsa tooprocess mensajes y mensajería múltiple almacena los mensajes de toostore.</span><span class="sxs-lookup"><span data-stu-id="e06d6-104">Azure Service Bus employs multiple message brokers tooprocess messages and multiple messaging stores toostore messages.</span></span> <span data-ttu-id="e06d6-105">Un único agente de mensajes controla una cola o tema convencional, que se almacena en un almacén de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="e06d6-106">Bus de servicio *particiones* habilitar las colas y temas, o *entidades de mensajería*, toobe particionado entre varios agentes de mensajes y almacenes de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, toobe partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="e06d6-107">Esto significa que el rendimiento global de una entidad con particiones de Hola ya no está limitado por el rendimiento de Hola de un solo agente de mensajes o almacén de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-107">This means that hello overall throughput of a partitioned entity is no longer limited by hello performance of a single message broker or messaging store.</span></span> <span data-ttu-id="e06d6-108">Además, una interrupción temporal de un almacén de mensajería no hace que una cola o tema con particiones deje de estar disponible.</span><span class="sxs-lookup"><span data-stu-id="e06d6-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="e06d6-109">Las colas y los temas con particiones pueden contener todas las características avanzadas de Service Bus, como la compatibilidad con transacciones y sesiones.</span><span class="sxs-lookup"><span data-stu-id="e06d6-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="e06d6-110">Para obtener información sobre características internas de Bus de servicio, vea hello [arquitectura de Service Bus] [ Service Bus architecture] artículo.</span><span class="sxs-lookup"><span data-stu-id="e06d6-110">For information about Service Bus internals, see hello [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="e06d6-111">La partición está activada de forma predeterminada al crear la entidad en todas las colas y temas de mensajería Estándar y Premium.</span><span class="sxs-lookup"><span data-stu-id="e06d6-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="e06d6-112">Puede crear entidades de nivel de mensajería Estándar sin particiones, pero las colas y los temas en un espacio de nombres Premium siempre están particionados; esta opción no se puede deshabilitar.</span><span class="sxs-lookup"><span data-stu-id="e06d6-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="e06d6-113">No es posible toochange Hola particiones opción en una cola o tema existente en los niveles Standard o Premium, puede establecer solo la opción de hello cuando se crea la entidad de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-113">It is not possible toochange hello partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set hello option when you create hello entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="e06d6-114">Cómo funciona</span><span class="sxs-lookup"><span data-stu-id="e06d6-114">How it works</span></span>

<span data-ttu-id="e06d6-115">Cada cola o tema con particiones consta de varios fragmentos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="e06d6-116">Cada fragmento se almacena en un almacén de mensajería diferente y se controla por un agente de mensajes diferente.</span><span class="sxs-lookup"><span data-stu-id="e06d6-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="e06d6-117">Cuando se envía un mensaje tooa cola o tema particionado, Service Bus asigna tooone de mensaje Hola de fragmentos de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-117">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="e06d6-118">selección de saludo se realiza aleatoriamente por Bus de servicio o mediante una clave de partición que Hola remitente puede especificar.</span><span class="sxs-lookup"><span data-stu-id="e06d6-118">hello selection is done randomly by Service Bus or by using a partition key that hello sender can specify.</span></span>

<span data-ttu-id="e06d6-119">Cuando un cliente desea tooreceive un mensaje de una cola con particiones, o desde un tema con particiones tooa de suscripción, Bus de servicio consulta todos los fragmentos de mensajes, a continuación, devuelve Hola primer mensaje que se obtiene de cualquiera de hello receptor toohello de almacenes de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-119">When a client wants tooreceive a message from a partitioned queue, or from a subscription tooa partitioned topic, Service Bus queries all fragments for messages, then returns hello first message that is obtained from any of hello messaging stores toohello receiver.</span></span> <span data-ttu-id="e06d6-120">Las memorias caché de Bus de servicio Hola otros mensajes y la devuelve cuando recibe adicionales reciban solicitudes.</span><span class="sxs-lookup"><span data-stu-id="e06d6-120">Service Bus caches hello other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="e06d6-121">Un cliente de recepción no es consciente de hello particiones; Hola comportamiento de cara al cliente de una cola o tema particionado (por ejemplo, leer, finalización, aplazamiento, mensajes fallidos y captura previa) es idéntica toohello comportamiento de una entidad regular.</span><span class="sxs-lookup"><span data-stu-id="e06d6-121">A receiving client is not aware of hello partitioning; hello client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical toohello behavior of a regular entity.</span></span>

<span data-ttu-id="e06d6-122">No hay costos adicionales cuando se envía un mensaje a una cola o tema con particiones o cuando se recibe un mensaje de ellos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="e06d6-123">Habilitación de las particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-123">Enable partitioning</span></span>

<span data-ttu-id="e06d6-124">toouse particiones colas y temas con Bus de servicio de Azure, usar hello Azure SDK versión 2.2 o posterior, o especificar `api-version=2013-10` en sus solicitudes HTTP.</span><span class="sxs-lookup"><span data-stu-id="e06d6-124">toouse partitioned queues and topics with Azure Service Bus, use hello Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="e06d6-125">Estándar</span><span class="sxs-lookup"><span data-stu-id="e06d6-125">Standard</span></span>

<span data-ttu-id="e06d6-126">En el nivel de mensajería estándar de hello, puede crear colas de Bus de servicio y los temas de los tamaños de 1, 2, 3, 4 o 5 GB (valor predeterminado de hello es 1 GB).</span><span class="sxs-lookup"><span data-stu-id="e06d6-126">In hello Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="e06d6-127">Con las particiones habilitadas, Bus de servicio crea 16 (16 particiones) de copias de entidad de Hola por cada GB que especifique.</span><span class="sxs-lookup"><span data-stu-id="e06d6-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of hello entity for each GB you specify.</span></span> <span data-ttu-id="e06d6-128">Por lo tanto, si crea una cola que es de 5 GB de tamaño, con 16 particiones tamaño máximo de cola de Hola se convierte en (5 \* 16) = 80 GB.</span><span class="sxs-lookup"><span data-stu-id="e06d6-128">As such, if you create a queue that's 5 GB in size, with 16 partitions hello maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="e06d6-129">Puede ver el tamaño máximo de saludo de la cola o tema particionados examinando su entrada en hello [portal de Azure][Azure portal], Hola **Introducción** hoja para esa entidad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-129">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="e06d6-130">Premium</span><span class="sxs-lookup"><span data-stu-id="e06d6-130">Premium</span></span>

<span data-ttu-id="e06d6-131">En un espacio de nombres de nivel Premium, puede crear colas de Bus de servicio y los temas de los tamaños de 1, 2, 3, 4, 5, 10, 20, 40 o 80 GB (valor predeterminado de hello es 1 GB).</span><span class="sxs-lookup"><span data-stu-id="e06d6-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="e06d6-132">Con las particiones habilitadas de forma predeterminada, Service Bus crea dos particiones por entidad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="e06d6-133">Puede ver el tamaño máximo de saludo de la cola o tema particionados examinando su entrada en hello [portal de Azure][Azure portal], Hola **Introducción** hoja para esa entidad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-133">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

<span data-ttu-id="e06d6-134">Para obtener más información acerca de las particiones en el nivel de mensajería de hello Premium, consulte [Premium de Bus de servicio y niveles de mensajes estándares](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="e06d6-134">For more information about partitioning in hello Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="e06d6-135">Creación de una entidad particionada</span><span class="sxs-lookup"><span data-stu-id="e06d6-135">Create a partitioned entity</span></span>

<span data-ttu-id="e06d6-136">Hay varias maneras toocreate una cola con particiones o un tema.</span><span class="sxs-lookup"><span data-stu-id="e06d6-136">There are several ways toocreate a partitioned queue or topic.</span></span> <span data-ttu-id="e06d6-137">Cuando creas Hola cola o tema de la aplicación, puede habilitar las particiones para hello cola o tema por respectivamente Hola de configuración [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] o [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] propiedad demasiado**true**.</span><span class="sxs-lookup"><span data-stu-id="e06d6-137">When you create hello queue or topic from your application, you can enable partitioning for hello queue or topic by respectively setting hello [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property too**true**.</span></span> <span data-ttu-id="e06d6-138">Estas propiedades deben establecerse en hello tiempo Hola cola o tema se crea.</span><span class="sxs-lookup"><span data-stu-id="e06d6-138">These properties must be set at hello time hello queue or topic is created.</span></span> <span data-ttu-id="e06d6-139">Como se mencionó anteriormente, es imposible toochange estas propiedades en una cola o tema existente.</span><span class="sxs-lookup"><span data-stu-id="e06d6-139">As stated previously, it is not possible toochange these properties on an existing queue or topic.</span></span> <span data-ttu-id="e06d6-140">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e06d6-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="e06d6-141">Como alternativa, puede crear una cola o tema particionado Hola [portal de Azure] [ Azure portal] o en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e06d6-141">Alternatively, you can create a partitioned queue or topic in hello [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="e06d6-142">Cuando se crea una cola o tema en el portal de hello, Hola **habilitar las particiones** opción en hello cola o tema **crear** hoja está activada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e06d6-142">When you create a queue or topic in hello portal, hello **Enable partitioning** option in hello queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="e06d6-143">Solo puede deshabilitar esta opción en una entidad de nivel estándar; Hola siempre está habilitada la creación de particiones de nivel Premium.</span><span class="sxs-lookup"><span data-stu-id="e06d6-143">You can only disable this option in a Standard tier entity; in hello Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="e06d6-144">En Visual Studio, haga clic en hello **habilitar particiones** checkbox en hello **nueva cola** o **nuevo tema** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="e06d6-144">In Visual Studio, click hello **Enable Partitioning** checkbox in hello **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="e06d6-145">Uso de claves de partición</span><span class="sxs-lookup"><span data-stu-id="e06d6-145">Use of partition keys</span></span>
<span data-ttu-id="e06d6-146">Cuando un mensaje se pone en cola en una cola o tema particionado, Bus de servicio comprueba Hola presencia de una clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for hello presence of a partition key.</span></span> <span data-ttu-id="e06d6-147">Si encuentra uno, selecciona el fragmento de hello basado en esa clave.</span><span class="sxs-lookup"><span data-stu-id="e06d6-147">If it finds one, it selects hello fragment based on that key.</span></span> <span data-ttu-id="e06d6-148">Si no encuentra una clave de partición, selecciona el fragmento de hello basado en un algoritmo interno.</span><span class="sxs-lookup"><span data-stu-id="e06d6-148">If it does not find a partition key, it selects hello fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="e06d6-149">Uso de una clave de partición</span><span class="sxs-lookup"><span data-stu-id="e06d6-149">Using a partition key</span></span>
<span data-ttu-id="e06d6-150">Algunos escenarios, como sesiones o transacciones, requieren toobe de mensajes almacenado en un fragmento específico.</span><span class="sxs-lookup"><span data-stu-id="e06d6-150">Some scenarios, such as sessions or transactions, require messages toobe stored in a specific fragment.</span></span> <span data-ttu-id="e06d6-151">Todos estos escenarios requieren el uso de Hola de una clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-151">All these scenarios require hello use of a partition key.</span></span> <span data-ttu-id="e06d6-152">Todos los mensajes que Hola de uso se asignan la misma clave de partición toohello mismo fragmento.</span><span class="sxs-lookup"><span data-stu-id="e06d6-152">All messages that use hello same partition key are assigned toohello same fragment.</span></span> <span data-ttu-id="e06d6-153">Si no está disponible temporalmente el fragmento de hello, Bus de servicio devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="e06d6-153">If hello fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="e06d6-154">Según el escenario de hello, se usan diferentes propiedades de mensaje como una clave de partición:</span><span class="sxs-lookup"><span data-stu-id="e06d6-154">Depending on hello scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="e06d6-155">**SessionId**: si un mensaje tiene hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propiedad establecida, a continuación, Bus de servicio usa esta propiedad como clave de partición de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-155">**SessionId**: If a message has hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as hello partition key.</span></span> <span data-ttu-id="e06d6-156">De este modo, todos los mensajes que pertenecen toohello misma sesión se controlan mediante Hola mismo agente de mensajes.</span><span class="sxs-lookup"><span data-stu-id="e06d6-156">This way, all messages that belong toohello same session are handled by hello same message broker.</span></span> <span data-ttu-id="e06d6-157">Esto permite ordenamiento, así como la coherencia de Hola de Estados de sesión de mensajes de tooguarantee de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="e06d6-157">This enables Service Bus tooguarantee message ordering as well as hello consistency of session states.</span></span>

<span data-ttu-id="e06d6-158">**PartitionKey**: si un mensaje tiene hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propiedad pero no hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propiedad establecida, a continuación, Service Bus usa hello [PartitionKey] [ PartitionKey] propiedad como clave de partición de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-158">**PartitionKey**: If a message has hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses hello [PartitionKey][PartitionKey] property as hello partition key.</span></span> <span data-ttu-id="e06d6-159">Si el mensaje de Hola tiene ambos hello [SessionId] [ SessionId] hello y [PartitionKey] [ PartitionKey] propiedades establecidas, ambas propiedades deben ser idénticas.</span><span class="sxs-lookup"><span data-stu-id="e06d6-159">If hello message has both hello [SessionId][SessionId] and hello [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="e06d6-160">Si hello [PartitionKey] [ PartitionKey] propiedad se establece el valor diferente tooa hello [SessionId] [ SessionId] propiedad, Service Bus devuelve no válido excepción de operación.</span><span class="sxs-lookup"><span data-stu-id="e06d6-160">If hello [PartitionKey][PartitionKey] property is set tooa different value than hello [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="e06d6-161">Hola [PartitionKey] [ PartitionKey] propiedad debe utilizarse si un remitente envía mensajes transaccionales de sesión no es compatible con.</span><span class="sxs-lookup"><span data-stu-id="e06d6-161">hello [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="e06d6-162">Hello clave de partición asegura que todos los mensajes que se envían dentro de una transacción se gestionan por hello mismo agente de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-162">hello partition key ensures that all messages that are sent within a transaction are handled by hello same messaging broker.</span></span>

<span data-ttu-id="e06d6-163">**MessageId**: si Hola cola o tema tiene hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propiedad establecida demasiado**true** hello y[BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] o [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propiedades no están establecidos, a continuación Hola [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] propiedad actúa como clave de partición de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-163">**MessageId**: If hello queue or topic has hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set too**true** and hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as hello partition key.</span></span> <span data-ttu-id="e06d6-164">(Tenga en cuenta que las bibliotecas de Microsoft .NET y AMQP Hola asignar automáticamente un identificador de mensaje si la aplicación de envío de hello no lo hace). En este caso, todas las copias de hello controla mismo mensaje Hola a miso agente de mensajes.</span><span class="sxs-lookup"><span data-stu-id="e06d6-164">(Note that hello Microsoft .NET and AMQP libraries automatically assign a message ID if hello sending application does not.) In this case, all copies of hello same message are handled by hello same message broker.</span></span> <span data-ttu-id="e06d6-165">Esto permite toodetect de Bus de servicio y eliminar mensajes duplicados.</span><span class="sxs-lookup"><span data-stu-id="e06d6-165">This enables Service Bus toodetect and eliminate duplicate messages.</span></span> <span data-ttu-id="e06d6-166">Si hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propiedad no se establece demasiado**true**, Bus de servicio no tiene en cuenta hello [MessageId] [ MessageId] propiedad como una clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-166">If hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set too**true**, Service Bus does not consider hello [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="e06d6-167">Sin uso de una clave de partición</span><span class="sxs-lookup"><span data-stu-id="e06d6-167">Not using a partition key</span></span>
<span data-ttu-id="e06d6-168">En ausencia de Hola de una clave de partición, Bus de servicio distribuye los mensajes en una fragmentos de hello tooall turnos de hello cola o tema particionado.</span><span class="sxs-lookup"><span data-stu-id="e06d6-168">In hello absence of a partition key, Service Bus distributes messages in a round-robin fashion tooall hello fragments of hello partitioned queue or topic.</span></span> <span data-ttu-id="e06d6-169">Si el fragmento de hello elegido no está disponible, Service Bus asigna tooa otro fragmento de mensaje de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-169">If hello chosen fragment is not available, Service Bus assigns hello message tooa different fragment.</span></span> <span data-ttu-id="e06d6-170">Operación de envío Hola de este modo, se realiza correctamente a pesar de no disponibilidad temporal de Hola de un almacén de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-170">This way, hello send operation succeeds despite hello temporary unavailability of a messaging store.</span></span> <span data-ttu-id="e06d6-171">Sin embargo, no consigan Hola garantizada el orden que proporciona una clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-171">However, you will not achieve hello guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="e06d6-172">Para obtener una explicación más detallada de compromiso de hello entre la disponibilidad (sin clave de partición) y coherencia (mediante una clave de partición), consulte [este artículo](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="e06d6-172">For a more in-depth discussion of hello tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="e06d6-173">Esta información aplica igualmente toopartitioned entidades de Bus de servicio y las particiones de los centros de eventos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-173">This information applies equally toopartitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="e06d6-174">toogive servicio Bus suficiente mensaje Hola de tooenqueue de tiempo en un fragmento diferente, hello [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] valor especificado por el cliente de Hola que envía el mensaje de bienvenida debe ser mayor que 15 segundos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-174">toogive Service Bus enough time tooenqueue hello message into a different fragment, hello [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by hello client that sends hello message must be greater than 15 seconds.</span></span> <span data-ttu-id="e06d6-175">Se recomienda que establezca hello [OperationTimeout] [ OperationTimeout] valor de propiedad toohello predeterminado de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-175">It is recommended that you set hello [OperationTimeout][OperationTimeout] property toohello default value of 60 seconds.</span></span>

<span data-ttu-id="e06d6-176">Tenga en cuenta que una clave de partición "ancla" un fragmento específico de mensaje tooa.</span><span class="sxs-lookup"><span data-stu-id="e06d6-176">Note that a partition key "pins" a message tooa specific fragment.</span></span> <span data-ttu-id="e06d6-177">Si el almacén de mensajes de Hola que contiene este fragmento no está disponible, Bus de servicio devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="e06d6-177">If hello messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="e06d6-178">En ausencia de Hola de una clave de partición, Bus de servicio puede elegir un fragmento diferente y Hola operación se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="e06d6-178">In hello absence of a partition key, Service Bus can choose a different fragment and hello operation succeeds.</span></span> <span data-ttu-id="e06d6-179">Por lo tanto, se recomienda no suministrar una clave de partición a menos que sea necesario.</span><span class="sxs-lookup"><span data-stu-id="e06d6-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="e06d6-180">Temas avanzados: uso de transacciones con entidades con particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="e06d6-181">Los mensajes que se envían como parte de una transacción deben especificar una clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="e06d6-182">Esto puede ser uno de hello propiedades siguientes: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], o [ BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="e06d6-182">This can be one of hello following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="e06d6-183">Hola a todos los mensajes que se envían como parte del programa Hola debe especificar la misma transacción misma clave de partición.</span><span class="sxs-lookup"><span data-stu-id="e06d6-183">All messages that are sent as part of hello same transaction must specify hello same partition key.</span></span> <span data-ttu-id="e06d6-184">Si intenta toosend un mensaje sin una clave de partición dentro de una transacción, Bus de servicio devuelve una excepción de operación no válida.</span><span class="sxs-lookup"><span data-stu-id="e06d6-184">If you attempt toosend a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="e06d6-185">Si intentas toosend varios mensajes dentro de Hola la misma transacción que tienen diferentes claves de partición, Bus de servicio devuelve una excepción de operación no válida.</span><span class="sxs-lookup"><span data-stu-id="e06d6-185">If you attempt toosend multiple messages within hello same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="e06d6-186">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e06d6-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="e06d6-187">Si se establece cualquiera de las propiedades de Hola que actúan como una clave de partición, PIN de Bus de servicio Hola fragmento de mensaje tooa específico.</span><span class="sxs-lookup"><span data-stu-id="e06d6-187">If any of hello properties that serve as a partition key are set, Service Bus pins hello message tooa specific fragment.</span></span> <span data-ttu-id="e06d6-188">Este comportamiento se produce independientemente de si se usa una transacción o no.</span><span class="sxs-lookup"><span data-stu-id="e06d6-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="e06d6-189">Se recomienda que no especifique una clave de partición si no es necesario.</span><span class="sxs-lookup"><span data-stu-id="e06d6-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="e06d6-190">Uso de sesiones con entidades con particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="e06d6-191">toosend un tema de cuenta para la sesión de tooa mensaje transaccional o una cola, los mensajes de bienvenida deben tener Hola [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] conjunto de propiedades.</span><span class="sxs-lookup"><span data-stu-id="e06d6-191">toosend a transactional message tooa session-aware topic or queue, hello message must have hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="e06d6-192">Si hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propiedad también se especifica, debe ser idéntico toohello [SessionId] [ SessionId] propiedad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-192">If hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical toohello [SessionId][SessionId] property.</span></span> <span data-ttu-id="e06d6-193">Si difieren, Service Bus devuelve una excepción de operación no válida.</span><span class="sxs-lookup"><span data-stu-id="e06d6-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="e06d6-194">A diferencia de colas normales (sin particiones) o temas, no es posible toouse toosend de una sola transacción varias sesiones de toodifferent de mensajes.</span><span class="sxs-lookup"><span data-stu-id="e06d6-194">Unlike regular (non-partitioned) queues or topics, it is not possible toouse a single transaction toosend multiple messages toodifferent sessions.</span></span> <span data-ttu-id="e06d6-195">Si se intenta, Service Bus devuelve una excepción de operación no válida.</span><span class="sxs-lookup"><span data-stu-id="e06d6-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="e06d6-196">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e06d6-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="e06d6-197">Reenvío automático de mensajes en entidades con particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="e06d6-198">Service Bus de Azure admite el reenvío automático de mensajes desde entidades con particiones, así como a ellas y entre ellas.</span><span class="sxs-lookup"><span data-stu-id="e06d6-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="e06d6-199">tooenable automática reenvío de mensajes, establezca hello [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] propiedad en la cola de origen de Hola o suscripción.</span><span class="sxs-lookup"><span data-stu-id="e06d6-199">tooenable automatic message forwarding, set hello [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on hello source queue or subscription.</span></span> <span data-ttu-id="e06d6-200">Si el mensaje de Hola especifica una clave de partición ([SessionId][SessionId], [PartitionKey][PartitionKey], o [MessageId] [ MessageId]), se utilizará dicha clave de partición para la entidad de destino de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-200">If hello message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for hello destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="e06d6-201">Consideraciones e instrucciones</span><span class="sxs-lookup"><span data-stu-id="e06d6-201">Considerations and guidelines</span></span>
* <span data-ttu-id="e06d6-202">**La funcionalidad de consistencia alta**: si una entidad utiliza características como las sesiones, detección de duplicados o control explícito de la clave de partición, las operaciones de mensajería de hello siempre son fragmentos de toospecific enrutado.</span><span class="sxs-lookup"><span data-stu-id="e06d6-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then hello messaging operations are always routed toospecific fragments.</span></span> <span data-ttu-id="e06d6-203">Si cualquiera de los fragmentos de hello experiencia mucho tráfico o almacén subyacente Hola está en mal estado, esas operaciones producirá un error y se reduce la disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-203">If any of hello fragments experience high traffic or hello underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="e06d6-204">En general, la coherencia de hello es todavía mucho mayor que las entidades sin particiones; solo un subconjunto de tráfico está experimentando problemas, como el tráfico de hello tooall opuestos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-204">Overall, hello consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed tooall hello traffic.</span></span> <span data-ttu-id="e06d6-205">Para obtener más información, consulte este [análisis sobre la disponibilidad y la coherencia](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="e06d6-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="e06d6-206">**Administración**: operaciones como la creación, actualización y eliminación deben realizarse en todos los fragmentos de Hola de entidad de Hola.</span><span class="sxs-lookup"><span data-stu-id="e06d6-206">**Management**: Operations such as Create, Update and Delete must be performed on all hello fragments of hello entity.</span></span> <span data-ttu-id="e06d6-207">Si algún fragmento es incorrecto, podría provocar errores en estas operaciones.</span><span class="sxs-lookup"><span data-stu-id="e06d6-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="e06d6-208">Para la operación de obtención de hello, información como números de mensajes se debe agregar de todos los fragmentos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-208">For hello Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="e06d6-209">Si cualquier fragmento que está en mal estado, se notifica el estado de disponibilidad de entidad de hello como limited.</span><span class="sxs-lookup"><span data-stu-id="e06d6-209">If any fragment is unhealthy, hello entity availability status is reported as limited.</span></span>
* <span data-ttu-id="e06d6-210">**Escenarios de mensajes de volumen de baja**: para estos escenarios, especialmente cuando se usa el protocolo de hello HTTP, es posible que tenga tooperform varias operaciones de recepción en orden tooobtain todos los mensajes de saludo.</span><span class="sxs-lookup"><span data-stu-id="e06d6-210">**Low volume message scenarios**: For such scenarios, especially when using hello HTTP protocol, you may have tooperform multiple receive operations in order tooobtain all hello messages.</span></span> <span data-ttu-id="e06d6-211">Para las solicitudes de recepción, front-end de hello realiza una operación de recepción en todos los fragmentos de Hola y almacena en caché todas las respuestas de saludo recibidas.</span><span class="sxs-lookup"><span data-stu-id="e06d6-211">For receive requests, hello front end performs a receive on all hello fragments and caches all hello responses received.</span></span> <span data-ttu-id="e06d6-212">Una solicitud de recepción posterior en la misma conexión podría beneficiarse de este almacenamiento en caché y recibir las latencias de hello será menor.</span><span class="sxs-lookup"><span data-stu-id="e06d6-212">A subsequent receive request on hello same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="e06d6-213">Sin embargo, si tiene varias conexiones o utiliza el protocolo HTTP, se establecerá una conexión nueva para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="e06d6-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="e06d6-214">Por lo tanto, no hay ninguna garantía de que llegaría en hello mismo nodo.</span><span class="sxs-lookup"><span data-stu-id="e06d6-214">As such, there is no guarantee that it would land on hello same node.</span></span> <span data-ttu-id="e06d6-215">Si todos los mensajes existentes están bloqueados y se almacena en caché en otro front-end, Hola recibir operación devuelve **null**.</span><span class="sxs-lookup"><span data-stu-id="e06d6-215">If all existing messages are locked and cached in another front end, hello receive operation returns **null**.</span></span> <span data-ttu-id="e06d6-216">Finalmente, los mensajes caducan y podrá volver a recibirlos.</span><span class="sxs-lookup"><span data-stu-id="e06d6-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="e06d6-217">Se recomienda mantener la conexión HTTP.</span><span class="sxs-lookup"><span data-stu-id="e06d6-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="e06d6-218">**Examinar/Peek mensajes**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) no siempre devuelven número Hola de mensajes especificado en hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) propiedad.</span><span class="sxs-lookup"><span data-stu-id="e06d6-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return hello number of messages specified in hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="e06d6-219">Esto tiene dos motivos habituales.</span><span class="sxs-lookup"><span data-stu-id="e06d6-219">There are two common reasons for this.</span></span> <span data-ttu-id="e06d6-220">Una razón es que hello agregado tamaño de colección Hola de mensajes supera el tamaño máximo de Hola de 256KB.</span><span class="sxs-lookup"><span data-stu-id="e06d6-220">One reason is that hello aggregated size of hello collection of messages exceeds hello maximum size of 256KB.</span></span> <span data-ttu-id="e06d6-221">Otro motivo es que si Hola cola o tema tiene hello [EnablePartitioning propiedad](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) establecido demasiado**true**, una partición no tenga suficientes mensajes hello toocomplete solicita el número de mensajes.</span><span class="sxs-lookup"><span data-stu-id="e06d6-221">Another reason is that if hello queue or topic has hello [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set too**true**, a partition may not have enough messages toocomplete hello requested number of messages.</span></span> <span data-ttu-id="e06d6-222">En general, si una aplicación desea tooreceive un número concreto de mensajes, debe llamar a [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repetidamente hasta que se llega a ese número de mensajes o no hay ningún toopeek mensajes más.</span><span class="sxs-lookup"><span data-stu-id="e06d6-222">In general, if an application wants tooreceive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages toopeek.</span></span> <span data-ttu-id="e06d6-223">Para más información, incluidos algunos ejemplos de código, consulte [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) o [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="e06d6-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="e06d6-224">Características agregadas más recientes</span><span class="sxs-lookup"><span data-stu-id="e06d6-224">Latest added features</span></span>
* <span data-ttu-id="e06d6-225">La opción Agregar o quitar regla ya es compatible con las entidades con particiones.</span><span class="sxs-lookup"><span data-stu-id="e06d6-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="e06d6-226">A diferencia de las entidades sin particiones, estas operaciones no se admiten en las transacciones.</span><span class="sxs-lookup"><span data-stu-id="e06d6-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="e06d6-227">Ahora se admite AMQP para enviar y recibir mensajes tooand de una entidad con particiones.</span><span class="sxs-lookup"><span data-stu-id="e06d6-227">AMQP is now supported for sending and receiving messages tooand from a partitioned entity.</span></span>
* <span data-ttu-id="e06d6-228">Ahora se admite AMQP para hello las siguientes operaciones: [enviar lote](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [por lotes de recepción](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [recepción por número de secuencia](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [ Renovar el bloqueo](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [programar mensaje](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancelar mensaje programada](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Agregar regla](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Quitar regla](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Bloqueo de renovación de sesión](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [estado de la sesión de conjunto](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [obtener el estado de sesión](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), y [enumerar las sesiones](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="e06d6-228">AMQP is now supported for hello following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="e06d6-229">Limitaciones de las entidades con particiones</span><span class="sxs-lookup"><span data-stu-id="e06d6-229">Partitioned entities limitations</span></span>
<span data-ttu-id="e06d6-230">Actualmente, Bus de servicio impone Hola siguientes limitaciones en los temas y las colas con particiones:</span><span class="sxs-lookup"><span data-stu-id="e06d6-230">Currently Service Bus imposes hello following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="e06d6-231">Temas y colas con particiones no admiten el envío de mensajes que pertenecen toodifferent sesiones en una sola transacción.</span><span class="sxs-lookup"><span data-stu-id="e06d6-231">Partitioned queues and topics do not support sending messages that belong toodifferent sessions in a single transaction.</span></span>
* <span data-ttu-id="e06d6-232">Bus de servicio permite que actualmente un too100 particionado colas o temas por espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="e06d6-232">Service Bus currently allows up too100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="e06d6-233">Cada cola o tema particionado se cuenta en la cuota de Hola de 10 000 entidades por espacio de nombres (no se aplica el nivel de tooPremium).</span><span class="sxs-lookup"><span data-stu-id="e06d6-233">Each partitioned queue or topic counts towards hello quota of 10,000 entities per namespace (does not apply tooPremium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e06d6-234">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e06d6-234">Next steps</span></span>
<span data-ttu-id="e06d6-235">Vea la descripción de Hola de [compatibilidad con AMQP 1.0 para Bus de servicio con particiones colas y temas] [ AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn más acerca de las particiones de las entidades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e06d6-235">See hello discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md

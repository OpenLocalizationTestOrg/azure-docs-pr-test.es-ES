---
title: "Introducción a la arquitectura de procesamiento de mensajes de Azure Service Bus | Microsoft Docs"
description: "En este artículo se describe la arquitectura de procesamiento de mensajes de Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 83456d775c5ff2a2476ba46e9c78a8dc1bb482e8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="87aa1-103">Arquitectura del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="87aa1-103">Service Bus architecture</span></span>
<span data-ttu-id="87aa1-104">En este artículo se describe la arquitectura de procesamiento de mensajes del Bus de servicio de Azure.</span><span class="sxs-lookup"><span data-stu-id="87aa1-104">This article describes the message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="87aa1-105">Unidades de escala del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="87aa1-105">Service Bus scale units</span></span>
<span data-ttu-id="87aa1-106">El Bus de servicio se organizada por *unidades de escala*.</span><span class="sxs-lookup"><span data-stu-id="87aa1-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="87aa1-107">Una unidad de escalado es una unidad de implementación y contiene todos los componentes necesarios para ejecutar el servicio.</span><span class="sxs-lookup"><span data-stu-id="87aa1-107">A scale unit is a unit of deployment and contains all components required run the service.</span></span> <span data-ttu-id="87aa1-108">Cada región implementa una o más unidades de escala del Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="87aa1-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="87aa1-109">Un espacio de nombres del Bus de servicio se asigna a una unidad de escalado.</span><span class="sxs-lookup"><span data-stu-id="87aa1-109">A Service Bus namespace is mapped to a scale unit.</span></span> <span data-ttu-id="87aa1-110">La unidad de escalado controla todos los tipos de entidades de Service Bus: (colas, temas, suscripciones).</span><span class="sxs-lookup"><span data-stu-id="87aa1-110">The scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="87aa1-111">Una unidad de escalado del Bus de servicio consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="87aa1-111">A Service Bus scale unit consists of the following components:</span></span>

* <span data-ttu-id="87aa1-112">**Un conjunto de nodos de puerta de enlace.**</span><span class="sxs-lookup"><span data-stu-id="87aa1-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="87aa1-113">Los nodos de puerta de enlace autentican las solicitudes entrantes.</span><span class="sxs-lookup"><span data-stu-id="87aa1-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="87aa1-114">Cada nodo de puerta de enlace tiene una dirección IP pública.</span><span class="sxs-lookup"><span data-stu-id="87aa1-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="87aa1-115">**Un conjunto de nodos de agente de mensajería.**</span><span class="sxs-lookup"><span data-stu-id="87aa1-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="87aa1-116">Los nodos de agente de mensajería procesan solicitudes relacionadas con entidades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="87aa1-117">**Un almacén de puerta de enlace.**</span><span class="sxs-lookup"><span data-stu-id="87aa1-117">**One gateway store.**</span></span> <span data-ttu-id="87aa1-118">El almacén de puerta de enlace contiene los datos para todas las entidades que se definen en esta unidad de escalado.</span><span class="sxs-lookup"><span data-stu-id="87aa1-118">The gateway store holds the data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="87aa1-119">El almacén de puerta de enlace se implementa sobre una base de datos SQL de Azure.</span><span class="sxs-lookup"><span data-stu-id="87aa1-119">The gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="87aa1-120">**Varios almacenes de mensajería.**</span><span class="sxs-lookup"><span data-stu-id="87aa1-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="87aa1-121">Los almacenes de mensajería contienen los mensajes de todas las colas, los temas y las suscripciones que se definen en esta unidad de escalado.</span><span class="sxs-lookup"><span data-stu-id="87aa1-121">Messaging stores hold the messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="87aa1-122">También contiene todos los datos de suscripción.</span><span class="sxs-lookup"><span data-stu-id="87aa1-122">It also contains all subscription data.</span></span> <span data-ttu-id="87aa1-123">A menos que estén habilitadas las [entidades de mensajería con particiones](service-bus-partitioning.md), se asigna una cola o un tema a un almacén de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped to one messaging store.</span></span> <span data-ttu-id="87aa1-124">Las suscripciones se almacenan en el mismo almacén de mensajería como su tema principal.</span><span class="sxs-lookup"><span data-stu-id="87aa1-124">Subscriptions are stored in the same messaging store as their parent topic.</span></span> <span data-ttu-id="87aa1-125">Excepto en el caso de la [mensajería Premium](service-bus-premium-messaging.md)de Service Bus, los almacenes de mensajería se implementan sobre bases de datos SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="87aa1-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), the messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="87aa1-126">Contenedores</span><span class="sxs-lookup"><span data-stu-id="87aa1-126">Containers</span></span>
<span data-ttu-id="87aa1-127">A cada entidad de mensajería se le asigna a un contenedor específico.</span><span class="sxs-lookup"><span data-stu-id="87aa1-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="87aa1-128">Un contenedor es una construcción lógica que usa exactamente un almacén de mensajería para almacenar todos los datos relevantes para este contenedor.</span><span class="sxs-lookup"><span data-stu-id="87aa1-128">A container is a logical construct that uses exactly one messaging store to store all relevant data for this container.</span></span> <span data-ttu-id="87aa1-129">A cada contenedor se le asigna un nodo de agente de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-129">Each container is assigned to a messaging broker node.</span></span> <span data-ttu-id="87aa1-130">Normalmente, hay más contenedores que nodos de agente de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="87aa1-131">Por tanto, cada nodo de agente de mensajería carga varios contenedores.</span><span class="sxs-lookup"><span data-stu-id="87aa1-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="87aa1-132">La distribución de contenedores a un nodo de agente de mensajería se organiza de modo que todos los nodos de agente de mensajes se cargan por igual.</span><span class="sxs-lookup"><span data-stu-id="87aa1-132">The distribution of containers to a messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="87aa1-133">Si cambia el modelo de carga(por ejemplo, uno de los contenedores se vuelve muy ocupado), o si un nodo de agente de mensajería deja de estar disponible temporalmente, los contenedores se redistribuyen entre los nodos de agente de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-133">If the load pattern changes (for example, one of the containers gets very busy), or if a messaging broker node becomes temporarily unavailable, the containers are redistributed among the messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="87aa1-134">Procesamiento de solicitudes entrantes de mensajería</span><span class="sxs-lookup"><span data-stu-id="87aa1-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="87aa1-135">Cuando un cliente envía una solicitud al Bus de servicio, el equilibrador de carga de Azure lo enruta a cualquiera de los nodos de puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="87aa1-135">When a client sends a request to Service Bus, the Azure load balancer routes it to any of the gateway nodes.</span></span> <span data-ttu-id="87aa1-136">El nodo de puerta de enlace autoriza la solicitud.</span><span class="sxs-lookup"><span data-stu-id="87aa1-136">The gateway node authorizes the request.</span></span> <span data-ttu-id="87aa1-137">Si la solicitud se refiere a una entidad de mensajería (cola, tema, suscripción), el nodo de la puerta de enlace busca la entidad en el almacén de puerta de enlace y determina en qué almacén de mensajería se encuentra la entidad.</span><span class="sxs-lookup"><span data-stu-id="87aa1-137">If the request concerns a messaging entity (queue, topic, subscription), the gateway node looks up the entity in the gateway store and determines in which messaging store the entity is located.</span></span> <span data-ttu-id="87aa1-138">Después, busca qué nodo de agente de mensajería está dando servicio actualmente a este contenedor y envía la solicitud a ese nodo de agente de mensajería.</span><span class="sxs-lookup"><span data-stu-id="87aa1-138">It then looks up which messaging broker node is currently servicing this container, and sends the request to that messaging broker node.</span></span> <span data-ttu-id="87aa1-139">El nodo de agente de mensajería procesa la solicitud y actualiza el estado de la entidad en el almacén del contenedor.</span><span class="sxs-lookup"><span data-stu-id="87aa1-139">The messaging broker node processes the request and updates the entity state in the container store.</span></span> <span data-ttu-id="87aa1-140">El nodo de agente de mensajería envía entonces la respuesta al nodo de puerta de enlace, que envía a su vez una respuesta adecuada al cliente que emitió la solicitud original.</span><span class="sxs-lookup"><span data-stu-id="87aa1-140">The messaging broker node then sends the response back to the gateway node, which sends an appropriate response back to the client that issued the original request.</span></span>

![Procesamiento de solicitudes entrantes de mensajería](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="87aa1-142">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="87aa1-142">Next steps</span></span>
<span data-ttu-id="87aa1-143">Ahora que ha leído una introducción sobre la arquitectura de Service Bus, visite los siguientes vínculos para más información:</span><span class="sxs-lookup"><span data-stu-id="87aa1-143">Now that you've read an overview of Service Bus architecture, visit the following links for more information:</span></span>

* [<span data-ttu-id="87aa1-144">Introducción a la mensajería del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="87aa1-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="87aa1-145">Elementos fundamentales del Bus de servicio</span><span class="sxs-lookup"><span data-stu-id="87aa1-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* <span data-ttu-id="87aa1-146">Una [solución de mensajería en cola mediante las colas de Service Bus](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)</span><span class="sxs-lookup"><span data-stu-id="87aa1-146">[A queued messaging solution using Service Bus queues](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)</span></span>



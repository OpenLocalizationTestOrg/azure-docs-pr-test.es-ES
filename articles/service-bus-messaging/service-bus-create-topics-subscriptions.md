---
title: las aplicaciones de aaaCreate que usan los temas de Service Bus de Azure y suscripciones | Documentos de Microsoft
description: "Introducción toohello publicación / suscripción capacidades que ofrecen las suscripciones y los temas de Bus de servicio."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="e6fa1-103">Creación de aplicaciones que usan temas y suscripciones de Service Bus</span><span class="sxs-lookup"><span data-stu-id="e6fa1-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="e6fa1-104">El Bus de servicio de Azure admite un conjunto de tecnologías middleware orientadas a mensajes basadas en la nube, entre las que se incluyen una cola de mensajes de confianza y una mensajería de publicación/suscripción duradera.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="e6fa1-105">En este artículo se basa en información de hello proporcionada en [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md) y ofrece una introducción de capacidades de publicación/suscripción toohello ofrecidas por temas de Bus de servicio.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="e6fa1-106">Escenario minorista en evolución</span><span class="sxs-lookup"><span data-stu-id="e6fa1-106">Evolving retail scenario</span></span>
<span data-ttu-id="e6fa1-107">Este artículo continúa el escenario de venta directa de hello utilizado en [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="e6fa1-108">Recuerde que los datos de ventas de los terminales individuales de punto de venta (POS) deben ser el sistema de administración de inventario de tooan enrutado que utiliza ese toodetermine datos cuándo toobe reponerse existencias.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="e6fa1-109">Cada terminal de punto de venta informa de sus datos de venta enviando mensajes toohello **DataCollectionQueue** cola, donde permanecen hasta que se reciben por el sistema de administración de inventario de hello, como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Service Bus 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="e6fa1-111">tooevolve este escenario, un nuevo requisito ha sido agregado toohello sistema: propietario de la tienda de hello desea toobe toomonitor capaz de rendimiento de almacén de hello en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="e6fa1-112">tooaddress este requisito, sistema de hello debe "cerrar" flujo de datos de ventas de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="e6fa1-113">Todavía queremos que cada mensaje enviado por hello POS terminales toobe envía toohello sistema de administración de inventario como antes pero queremos otra copia de cada mensaje que podemos usar propietario de la tienda de toopresent Hola panel Vista toohello.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="e6fa1-114">En cualquier situación como esta, en el que necesita cada toobe mensaje consumido por varias partes, puede utilizar Service Bus *temas*.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="e6fa1-115">Temas proporcionan un modelo de publicación/suscripción en la que cada mensaje publicado se pone disponible tooone o más suscripciones registradas con tema de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="e6fa1-116">En cambio, con las colas cada mensaje lo recibe un único consumidor.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="e6fa1-117">Tema de tooa se envían los mensajes de Hola misma forma en que se envían tooa cola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="e6fa1-118">Sin embargo, los mensajes no se reciben del tema de hello directamente; que se reciben de las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="e6fa1-119">Un tema de tooa de suscripción se puede considerar como una cola virtual que recibe copias de mensajes de saludo que se envían toothat tema.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="e6fa1-120">Los mensajes se reciben de una suscripción Hola de igual manera que se reciben de una cola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="e6fa1-121">Volviendo toohello escenario de venta directa, cola de Hola se sustituye por un tema y se agrega una suscripción, puede usar qué componente de sistema de administración de inventario de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="e6fa1-122">sistema de Hello aparece ahora como sigue:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-122">hello system now appears as follows:</span></span>

![Service Bus 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="e6fa1-124">configuración de Hello aquí tiene un rendimiento idéntico toohello anterior basada en cola diseño.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="e6fa1-125">Es decir, los mensajes enviados toohello tema son enrutado toohello **inventario** suscripción, de qué hello **sistema de administración de inventario** los consume.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="e6fa1-126">En el panel de administración de orden toosupport hello, creamos una segunda suscripción en el tema de hello, como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Service Bus 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="e6fa1-128">Con esta configuración, cada mensaje de los terminales de hello POS estará disponible tooboth hello **panel** y **inventario** suscripciones.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="e6fa1-129">Muéstrame el código de hello</span><span class="sxs-lookup"><span data-stu-id="e6fa1-129">Show me hello code</span></span>
<span data-ttu-id="e6fa1-130">artículo de Hello [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md) describe cómo toosign una copia de seguridad para una cuenta de Azure y crear un espacio de nombres de servicio.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="e6fa1-131">dependencias de Bus de servicio de manera más fáciles de Hello tooreference es tooinstall hello Service Bus [paquete Nuget](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="e6fa1-132">También puede encontrar hello las bibliotecas de Bus de servicio como parte del programa Hola a Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="e6fa1-133">Hello descarga está disponible en hello [página de descarga del SDK de Azure](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="e6fa1-134">Crear suscripciones y tema Hola</span><span class="sxs-lookup"><span data-stu-id="e6fa1-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="e6fa1-135">Las operaciones de administración de Service Bus entidades de mensajería (colas y publicación/suscripción temas) se realizan a través de hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) clase.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="e6fa1-136">Son necesarias las credenciales adecuadas en orden toocreate una **NamespaceManager** instancia para un espacio de nombres determinado.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="e6fa1-137">Service Bus usa un modelo de seguridad basado en la [firma de acceso compartido (SAS)](service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="e6fa1-138">Hola [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) clase representa un proveedor de tokens de seguridad con métodos de fábrica integrados que devuelven algunos proveedores de tokens bien conocidos.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="e6fa1-139">Vamos a usar un [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) credenciales SAS de método toohold Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="e6fa1-140">Hola [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instancia, a continuación, se construye con la dirección base de hello del espacio de nombres de Bus de servicio de Hola y el proveedor de tokens de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="e6fa1-141">Hola [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) clase proporciona métodos toocreate, enumerar y eliminar entidades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="e6fa1-142">Hola código que se muestra a continuación se muestra cómo Hola **NamespaceManager** instancia es Hola crea y se utiliza toocreate **DataCollectionTopic** tema.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="e6fa1-143">Tenga en cuenta que hay sobrecargas de hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) método que le permiten tooset propiedades de tema de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="e6fa1-144">Por ejemplo, puede establecer Hola time-to-live (TTL) predeterminado para los mensajes enviados toohello tema.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="e6fa1-145">A continuación, agregue hello **inventario** y **panel** suscripciones.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="e6fa1-146">Enviar tema toohello de mensajes</span><span class="sxs-lookup"><span data-stu-id="e6fa1-146">Send messages toohello topic</span></span>
<span data-ttu-id="e6fa1-147">En el caso de operaciones en tiempo de ejecución en entidades de Service Bus (por ejemplo, enviar y recibir mensajes), una aplicación debe crear primero un objeto [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="e6fa1-148">Toohello similar [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) clase hello **MessagingFactory** se crea una instancia de la dirección base de Hola de espacio de nombres de servicio de Hola y el proveedor de tokens de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="e6fa1-149">Tooand envía los mensajes recibido de temas de Bus de servicio, son instancias de hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) clase.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="e6fa1-150">Esta clase está formada por un conjunto de propiedades estándar (como [etiqueta](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) y [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), un diccionario de propiedades de la aplicación de uso toohold y un cuerpo de datos de aplicación arbitrarios.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="e6fa1-151">Una aplicación puede establecer cuerpo Hola pasando cualquier objeto serializable (hello en el ejemplo siguiente se pasa en un **SalesData** objeto que representa los datos de ventas de Hola de terminal de hello POS), que va a usar hello [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) objeto de hello tooserialize.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="e6fa1-152">También se puede proporcionar un objeto [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="e6fa1-153">tema de Hello más fácil manera toosend mensajes toohello es toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate una [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) objeto directamente desde hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instancia:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="e6fa1-154">Recepción de mensajes de una suscripción</span><span class="sxs-lookup"><span data-stu-id="e6fa1-154">Receive messages from a subscription</span></span>
<span data-ttu-id="e6fa1-155">Colas de toousing similar, los mensajes de tooreceive de una suscripción puede utilizar un [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objeto que cree directamente desde hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) con [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="e6fa1-156">Puede usar uno de hello diferentes modos de recepción (**ReceiveAndDelete** y **PeekLock**), como se describe en [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="e6fa1-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="e6fa1-157">Tenga en cuenta que, cuando se crea un **MessageReceiver** para las suscripciones, Hola *entityPath* parámetro tiene forma de hello `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="e6fa1-158">Por lo tanto, toocreate una **MessageReceiver** para hello **inventario** suscripción de hello **DataCollectionTopic** tema, *entityPath*debe establecerse demasiado`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="e6fa1-159">código de Hello aparece como sigue:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="e6fa1-160">Filtros de suscripción</span><span class="sxs-lookup"><span data-stu-id="e6fa1-160">Subscription filters</span></span>
<span data-ttu-id="e6fa1-161">Hasta ahora, en este escenario, todos los mensajes enviados toohello tema se realizan suscripciones disponibles tooall registrado.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="e6fa1-162">Hola de frases clave aquí es "puesto a disposición."</span><span class="sxs-lookup"><span data-stu-id="e6fa1-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="e6fa1-163">Mientras que las suscripciones de Bus de servicio ven todos los mensajes enviados toohello tema, puede copiar solo un subconjunto de esas cola de mensajes toohello suscripción virtual.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="e6fa1-164">Esto se realiza mediante los *filtros* de suscripción.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="e6fa1-165">Cuando se crea una suscripción, puede proporcionar una expresión de filtro en forma de Hola de un predicado de estilo de SQL92 que opera en las propiedades de Hola de mensaje de bienvenida, ambos Hola propiedades del sistema (por ejemplo, [etiqueta](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) y la aplicación hello propiedades, como **StoreName** en el ejemplo anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="e6fa1-166">Evolucionando Hola escenario tooillustrate esto, es un segundo almacén de escenario de venta directa de toobe tooour agregada.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="e6fa1-167">Datos de ventas de todos los terminales de hello POS desde ambos almacenes de todavía tienen sistema de administración de inventario de toobe enrutan toohello centralizada, pero un jefe de tienda con hello panel herramienta solo está interesado en el rendimiento de Hola de ese almacén.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="e6fa1-168">Puede usar el filtrado tooachieve esto de suscripción.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="e6fa1-169">Tenga en cuenta que cuando los terminales de hello POS publican mensajes, establezca hello **StoreName** propiedad de la aplicación en el mensaje de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="e6fa1-170">Proporcionar dos almacenes, por ejemplo **Redmond** y **Seattle**, terminales de hello POS Hola Redmond almacenan marca los mensajes de sus datos de ventas con un **StoreName** igual demasiado **Redmond**, mientras que Hola Seattle almacenar POS terminales use un **StoreName** igual demasiado**Seattle**.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="e6fa1-171">Administrador de almacén de Hola de hello Redmond almacenar solo desea toosee datos de sus terminales de punto de venta.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="e6fa1-172">sistema de Hello aparece como sigue:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-172">hello system appears as follows:</span></span>

![Service-Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="e6fa1-174">tooset el enrutamiento, creas hello **panel** suscripción como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="e6fa1-175">Con este [filtro de suscripción](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), sólo los mensajes que tienen hello **StoreName** propiedad establecida demasiado**Redmond** será toohello copiada cola virtual para hello **Panel** suscripción.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="e6fa1-176">Hay mucho más toosubscription filtrado, sin embargo.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="e6fa1-177">Las aplicaciones pueden tener varias reglas de filtro por suscripción en suma toohello capacidad toomodify Hola propiedades de un mensaje cuando pasan cola virtual de la suscripción de tooa.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="e6fa1-178">Resumen</span><span class="sxs-lookup"><span data-stu-id="e6fa1-178">Summary</span></span>
<span data-ttu-id="e6fa1-179">Todos de hello motivos toouse Queue descritos en [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md) también se aplican tootopics, específicamente:</span><span class="sxs-lookup"><span data-stu-id="e6fa1-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="e6fa1-180">Desacoplamiento temporal: mensaje productores y consumidores no tienen toobe en línea en hello mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="e6fa1-181">Nivelado de carga: picos de carga son atenuados por tema Hola habilitar consumo toobe aplicaciones aprovisionado para la carga Media en lugar de carga máxima.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="e6fa1-182">Equilibrio de carga: cola tooa similar, puede tener varios consumidores en competencia escuchando una sola suscripción, con cada mensaje entregado tooonly uno de los consumidores de hello, con lo que Equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="e6fa1-183">Acoplamiento flexible: puede evolucionar Hola mensajería red sin que afecte a los extremos existentes; Por ejemplo, agregando suscripciones o cambiando filtros tooa tema tooallow nuevos consumidores.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e6fa1-184">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e6fa1-184">Next steps</span></span>

<span data-ttu-id="e6fa1-185">Vea [crear aplicaciones que usan colas de Service Bus](service-bus-create-queues.md) para obtener información acerca de cómo toouse pone en cola en el escenario de venta directa de hello POS.</span><span class="sxs-lookup"><span data-stu-id="e6fa1-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>


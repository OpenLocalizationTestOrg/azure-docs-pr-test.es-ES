---
title: Uso de Service Bus desde .NET con AMQP 1.0 | Microsoft Docs
description: Uso de Azure Service Bus desde .NET con AMQP
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 332bcb13-e287-4715-99ee-3d7d97396487
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/19/2017
ms.author: sethm
ms.openlocfilehash: e089a7d772b51194d8300beb99797bf40a8611b1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="using-service-bus-from-net-with-amqp-10"></a><span data-ttu-id="113ed-103">Uso de Service Bus desde .NET con AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="113ed-103">Using Service Bus from .NET with AMQP 1.0</span></span>

## <a name="downloading-the-service-bus-sdk"></a><span data-ttu-id="113ed-104">Descargar el SDK del bus de servicio</span><span class="sxs-lookup"><span data-stu-id="113ed-104">Downloading the Service Bus SDK</span></span>

<span data-ttu-id="113ed-105">La compatibilidad con AMQP 1.0 está disponible en el SDK de Service Bus versión 2.1 o posterior.</span><span class="sxs-lookup"><span data-stu-id="113ed-105">AMQP 1.0 support is available in the Service Bus SDK version 2.1 or later.</span></span> <span data-ttu-id="113ed-106">Asegúrese de tener la versión más reciente descargando los bits de Service Bus desde [NuGet][NuGet].</span><span class="sxs-lookup"><span data-stu-id="113ed-106">You can ensure you have the latest version by downloading the Service Bus bits from [NuGet][NuGet].</span></span>

## <a name="configuring-net-applications-to-use-amqp-10"></a><span data-ttu-id="113ed-107">Configuración de aplicaciones .NET para usar AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="113ed-107">Configuring .NET applications to use AMQP 1.0</span></span>

<span data-ttu-id="113ed-108">De manera predeterminada, la biblioteca de clientes .NET de Service Bus se comunica con el servicio de Service Bus utilizando un protocolo dedicado basado en SOAP.</span><span class="sxs-lookup"><span data-stu-id="113ed-108">By default, the Service Bus .NET client library communicates with the Service Bus service using a dedicated SOAP-based protocol.</span></span> <span data-ttu-id="113ed-109">Para usar AMQP 1.0 en lugar del protocolo predeterminado, es necesario configurar de manera explícita la cadena de conexión de Service Bus tal y como se describe en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="113ed-109">To use AMQP 1.0 instead of the default protocol requires explicit configuration on the Service Bus connection string, as described in the next section.</span></span> <span data-ttu-id="113ed-110">Aparte de este cambio, el código de la aplicación permanece invariable al utilizar AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="113ed-110">Other than this change, application code remains unchanged when using AMQP 1.0.</span></span>

<span data-ttu-id="113ed-111">La versión actual incluye unas cuantas funciones de la API que no son compatibles con el uso de AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-111">In the current release, there are a few API features that are not supported when using AMQP.</span></span> <span data-ttu-id="113ed-112">Estas funciones incompatibles se enumeran más adelante en la sección [Funciones no admitidas, restricciones y diferencias de comportamiento](#unsupported-features-restrictions-and-behavioral-differences).</span><span class="sxs-lookup"><span data-stu-id="113ed-112">These unsupported features are listed later in the section [Unsupported features, restrictions, and behavioral differences](#unsupported-features-restrictions-and-behavioral-differences).</span></span> <span data-ttu-id="113ed-113">Algunos de los parámetros de configuración avanzados también adquieren un significado diferente cuando se usa AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-113">Some of the advanced configuration settings also have a different meaning when using AMQP.</span></span>

### <a name="configuration-using-appconfig"></a><span data-ttu-id="113ed-114">Configuración mediante App.config</span><span class="sxs-lookup"><span data-stu-id="113ed-114">Configuration using App.config</span></span>

<span data-ttu-id="113ed-115">Es recomendable que las aplicaciones utilicen el archivo de configuración App.config para almacenar la configuración.</span><span class="sxs-lookup"><span data-stu-id="113ed-115">It is good practice for applications to use the App.config configuration file to store settings.</span></span> <span data-ttu-id="113ed-116">En el caso de las aplicaciones de Service Bus, puede usar App.config para almacenar la cadena de conexión de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="113ed-116">For Service Bus applications, you can use App.config to store the Service Bus connection string.</span></span> <span data-ttu-id="113ed-117">A continuación se muestra un archivo App.config de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="113ed-117">An example App.config file is as follows:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString"
             value="Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp" />
    </appSettings>
</configuration>
```

<span data-ttu-id="113ed-118">El valor del parámetro `Microsoft.ServiceBus.ConnectionString` es la cadena de conexión de Service Bus que se usa para configurar la conexión a Service Bus.</span><span class="sxs-lookup"><span data-stu-id="113ed-118">The value of the `Microsoft.ServiceBus.ConnectionString` setting is the Service Bus connection string that is used to configure the connection to Service Bus.</span></span> <span data-ttu-id="113ed-119">El formato es como sigue:</span><span class="sxs-lookup"><span data-stu-id="113ed-119">The format is as follows:</span></span>

`Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp`

<span data-ttu-id="113ed-120">Donde `[namespace]` y `SharedAccessKey` se obtienen de [Azure Portal][Azure portal] al crear un espacio de nombres de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="113ed-120">Where `[namespace]` and `SharedAccessKey` are obtained from the [Azure portal][Azure portal] when you create a Service Bus namespace.</span></span> <span data-ttu-id="113ed-121">Para más información, vea [Creación de un espacio de nombres de Service Bus mediante Azure Portal][Create a Service Bus namespace using the Azure portal].</span><span class="sxs-lookup"><span data-stu-id="113ed-121">For more information, see [Create a Service Bus namespace using the Azure portal][Create a Service Bus namespace using the Azure portal].</span></span>

<span data-ttu-id="113ed-122">Al usar AMQP, anexe la cadena de conexión a `;TransportType=Amqp`.</span><span class="sxs-lookup"><span data-stu-id="113ed-122">When using AMQP, append the connection string with `;TransportType=Amqp`.</span></span> <span data-ttu-id="113ed-123">Esta notación informa a la biblioteca de cliente que realice la conexión con Service Bus mediante AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="113ed-123">This notation instructs the client library to make its connection to Service Bus using AMQP 1.0.</span></span>

## <a name="message-serialization"></a><span data-ttu-id="113ed-124">Serialización de mensajes</span><span class="sxs-lookup"><span data-stu-id="113ed-124">Message serialization</span></span>

<span data-ttu-id="113ed-125">Cuando se usa el protocolo predeterminado, el comportamiento de serialización predeterminado de la biblioteca de cliente de .NET consiste en usar el tipo [DataContractSerializer][DataContractSerializer] para serializar una instancia de [BrokeredMessage][BrokeredMessage] para el transporte entre la biblioteca de cliente y el servicio de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="113ed-125">When using the default protocol, the default serialization behavior of the .NET client library is to use the [DataContractSerializer][DataContractSerializer] type to serialize a [BrokeredMessage][BrokeredMessage] instance for transport between the client library and the Service Bus service.</span></span> <span data-ttu-id="113ed-126">Cuando se usa el modo de transporte de AMQP, la biblioteca de cliente emplea el sistema de tipos de AMQP para la serialización del [mensaje asincrónico][BrokeredMessage] en un mensaje de AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-126">When using the AMQP transport mode, the client library uses the AMQP type system for serialization of the [brokered message][BrokeredMessage] into an AMQP message.</span></span> <span data-ttu-id="113ed-127">Esta serialización permite que el mensaje se reciba e interprete por una aplicación receptora que se ejecuta potencialmente en una plataforma diferente, por ejemplo, una aplicación Java que usa la API de JMS para tener acceso a Service Bus.</span><span class="sxs-lookup"><span data-stu-id="113ed-127">This serialization enables the message to be received and interpreted by a receiving application that is potentially running on a different platform, for example, a Java application that uses the JMS API to access Service Bus.</span></span>

<span data-ttu-id="113ed-128">Cuando se construye una instancia [BrokeredMessage][BrokeredMessage], puede proporcionar un objeto .NET como un parámetro al constructor para que actúe como el cuerpo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="113ed-128">When you construct a [BrokeredMessage][BrokeredMessage] instance, you can provide a .NET object as a parameter to the constructor to serve as the body of the message.</span></span> <span data-ttu-id="113ed-129">Para los objetos que se pueden asignar a tipos primitivos de AMQP, el cuerpo se serializa en tipos de datos de AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-129">For objects that can be mapped to AMQP primitive types, the body is serialized into AMQP data types.</span></span> <span data-ttu-id="113ed-130">Si el objeto no se puede asignar directamente a un tipo primitivo de AMQP, es decir, un tipo personalizado definido por la aplicación, el objeto se serializa con [DataContractSerializer][DataContractSerializer] y los bytes serializados se envían en un mensaje de datos de AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-130">If the object cannot be directly mapped into an AMQP primitive type; that is, a custom type defined by the application, then the object is serialized using the [DataContractSerializer][DataContractSerializer], and the serialized bytes are sent in an AMQP data message.</span></span>

<span data-ttu-id="113ed-131">Para facilitar la interoperabilidad con clientes que no sean de .NET, use solo los tipos de .NET que se puedan serializar directamente en tipos AMQP para el cuerpo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="113ed-131">To facilitate interoperability with non-.NET clients, use only .NET types that can be serialized directly into AMQP types for the body of the message.</span></span> <span data-ttu-id="113ed-132">En la siguiente tabla se detallan estos tipos y la asignación correspondiente al sistema de tipos de AMQP.</span><span class="sxs-lookup"><span data-stu-id="113ed-132">The following table details those types and the corresponding mapping to the AMQP type system.</span></span>

| <span data-ttu-id="113ed-133">Tipo de objeto de cuerpo de .NET</span><span class="sxs-lookup"><span data-stu-id="113ed-133">.NET Body Object Type</span></span> | <span data-ttu-id="113ed-134">Tipo de AMQP asignado</span><span class="sxs-lookup"><span data-stu-id="113ed-134">Mapped AMQP Type</span></span> | <span data-ttu-id="113ed-135">Tipo de sección de cuerpo de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-135">AMQP Body Section Type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="113ed-136">booleano</span><span class="sxs-lookup"><span data-stu-id="113ed-136">bool</span></span> |<span data-ttu-id="113ed-137">boolean</span><span class="sxs-lookup"><span data-stu-id="113ed-137">boolean</span></span> |<span data-ttu-id="113ed-138">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-138">AMQP Value</span></span> |
| <span data-ttu-id="113ed-139">byte</span><span class="sxs-lookup"><span data-stu-id="113ed-139">byte</span></span> |<span data-ttu-id="113ed-140">ubyte</span><span class="sxs-lookup"><span data-stu-id="113ed-140">ubyte</span></span> |<span data-ttu-id="113ed-141">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-141">AMQP Value</span></span> |
| <span data-ttu-id="113ed-142">ushort</span><span class="sxs-lookup"><span data-stu-id="113ed-142">ushort</span></span> |<span data-ttu-id="113ed-143">ushort</span><span class="sxs-lookup"><span data-stu-id="113ed-143">ushort</span></span> |<span data-ttu-id="113ed-144">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-144">AMQP Value</span></span> |
| <span data-ttu-id="113ed-145">uint</span><span class="sxs-lookup"><span data-stu-id="113ed-145">uint</span></span> |<span data-ttu-id="113ed-146">uint</span><span class="sxs-lookup"><span data-stu-id="113ed-146">uint</span></span> |<span data-ttu-id="113ed-147">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-147">AMQP Value</span></span> |
| <span data-ttu-id="113ed-148">ulong</span><span class="sxs-lookup"><span data-stu-id="113ed-148">ulong</span></span> |<span data-ttu-id="113ed-149">ulong</span><span class="sxs-lookup"><span data-stu-id="113ed-149">ulong</span></span> |<span data-ttu-id="113ed-150">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-150">AMQP Value</span></span> |
| <span data-ttu-id="113ed-151">sbyte</span><span class="sxs-lookup"><span data-stu-id="113ed-151">sbyte</span></span> |<span data-ttu-id="113ed-152">byte</span><span class="sxs-lookup"><span data-stu-id="113ed-152">byte</span></span> |<span data-ttu-id="113ed-153">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-153">AMQP Value</span></span> |
| <span data-ttu-id="113ed-154">short</span><span class="sxs-lookup"><span data-stu-id="113ed-154">short</span></span> |<span data-ttu-id="113ed-155">short</span><span class="sxs-lookup"><span data-stu-id="113ed-155">short</span></span> |<span data-ttu-id="113ed-156">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-156">AMQP Value</span></span> |
| <span data-ttu-id="113ed-157">int</span><span class="sxs-lookup"><span data-stu-id="113ed-157">int</span></span> |<span data-ttu-id="113ed-158">int</span><span class="sxs-lookup"><span data-stu-id="113ed-158">int</span></span> |<span data-ttu-id="113ed-159">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-159">AMQP Value</span></span> |
| <span data-ttu-id="113ed-160">long</span><span class="sxs-lookup"><span data-stu-id="113ed-160">long</span></span> |<span data-ttu-id="113ed-161">long</span><span class="sxs-lookup"><span data-stu-id="113ed-161">long</span></span> |<span data-ttu-id="113ed-162">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-162">AMQP Value</span></span> |
| <span data-ttu-id="113ed-163">float</span><span class="sxs-lookup"><span data-stu-id="113ed-163">float</span></span> |<span data-ttu-id="113ed-164">float</span><span class="sxs-lookup"><span data-stu-id="113ed-164">float</span></span> |<span data-ttu-id="113ed-165">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-165">AMQP Value</span></span> |
| <span data-ttu-id="113ed-166">double</span><span class="sxs-lookup"><span data-stu-id="113ed-166">double</span></span> |<span data-ttu-id="113ed-167">double</span><span class="sxs-lookup"><span data-stu-id="113ed-167">double</span></span> |<span data-ttu-id="113ed-168">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-168">AMQP Value</span></span> |
| <span data-ttu-id="113ed-169">decimal</span><span class="sxs-lookup"><span data-stu-id="113ed-169">decimal</span></span> |<span data-ttu-id="113ed-170">decimal128</span><span class="sxs-lookup"><span data-stu-id="113ed-170">decimal128</span></span> |<span data-ttu-id="113ed-171">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-171">AMQP Value</span></span> |
| <span data-ttu-id="113ed-172">char</span><span class="sxs-lookup"><span data-stu-id="113ed-172">char</span></span> |<span data-ttu-id="113ed-173">char</span><span class="sxs-lookup"><span data-stu-id="113ed-173">char</span></span> |<span data-ttu-id="113ed-174">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-174">AMQP Value</span></span> |
| <span data-ttu-id="113ed-175">DateTime</span><span class="sxs-lookup"><span data-stu-id="113ed-175">DateTime</span></span> |<span data-ttu-id="113ed-176">timestamp</span><span class="sxs-lookup"><span data-stu-id="113ed-176">timestamp</span></span> |<span data-ttu-id="113ed-177">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-177">AMQP Value</span></span> |
| <span data-ttu-id="113ed-178">Guid</span><span class="sxs-lookup"><span data-stu-id="113ed-178">Guid</span></span> |<span data-ttu-id="113ed-179">uuid</span><span class="sxs-lookup"><span data-stu-id="113ed-179">uuid</span></span> |<span data-ttu-id="113ed-180">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-180">AMQP Value</span></span> |
| <span data-ttu-id="113ed-181">byte[]</span><span class="sxs-lookup"><span data-stu-id="113ed-181">byte[]</span></span> |<span data-ttu-id="113ed-182">binary</span><span class="sxs-lookup"><span data-stu-id="113ed-182">binary</span></span> |<span data-ttu-id="113ed-183">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-183">AMQP Value</span></span> |
| <span data-ttu-id="113ed-184">string</span><span class="sxs-lookup"><span data-stu-id="113ed-184">string</span></span> |<span data-ttu-id="113ed-185">string</span><span class="sxs-lookup"><span data-stu-id="113ed-185">string</span></span> |<span data-ttu-id="113ed-186">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-186">AMQP Value</span></span> |
| <span data-ttu-id="113ed-187">System.Collections.IList</span><span class="sxs-lookup"><span data-stu-id="113ed-187">System.Collections.IList</span></span> |<span data-ttu-id="113ed-188">list</span><span class="sxs-lookup"><span data-stu-id="113ed-188">list</span></span> |<span data-ttu-id="113ed-189">Valor de AMQP: los elementos contenidos en la colección solo pueden ser los definidos en esta tabla.</span><span class="sxs-lookup"><span data-stu-id="113ed-189">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="113ed-190">System.Array</span><span class="sxs-lookup"><span data-stu-id="113ed-190">System.Array</span></span> |<span data-ttu-id="113ed-191">array</span><span class="sxs-lookup"><span data-stu-id="113ed-191">array</span></span> |<span data-ttu-id="113ed-192">Valor de AMQP: los elementos contenidos en la colección solo pueden ser los definidos en esta tabla.</span><span class="sxs-lookup"><span data-stu-id="113ed-192">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="113ed-193">System.Collections.IDictionary</span><span class="sxs-lookup"><span data-stu-id="113ed-193">System.Collections.IDictionary</span></span> |<span data-ttu-id="113ed-194">map</span><span class="sxs-lookup"><span data-stu-id="113ed-194">map</span></span> |<span data-ttu-id="113ed-195">Valor de AMQP: los elementos contenidos en la colección solo pueden ser los definidos en esta tabla. Nota: solo se admiten claves de cadena.</span><span class="sxs-lookup"><span data-stu-id="113ed-195">AMQP Value: items contained in the collection can only be those that are defined in this table.Note: only String keys are supported.</span></span> |
| <span data-ttu-id="113ed-196">Identificador URI</span><span class="sxs-lookup"><span data-stu-id="113ed-196">Uri</span></span> |<span data-ttu-id="113ed-197">Cadena descrita (consulte la tabla siguiente)</span><span class="sxs-lookup"><span data-stu-id="113ed-197">Described string(see the following table)</span></span> |<span data-ttu-id="113ed-198">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-198">AMQP Value</span></span> |
| <span data-ttu-id="113ed-199">DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="113ed-199">DateTimeOffset</span></span> |<span data-ttu-id="113ed-200">Longitud descrita (consulte la tabla siguiente)</span><span class="sxs-lookup"><span data-stu-id="113ed-200">Described long(see the following table)</span></span> |<span data-ttu-id="113ed-201">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-201">AMQP Value</span></span> |
| <span data-ttu-id="113ed-202">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="113ed-202">TimeSpan</span></span> |<span data-ttu-id="113ed-203">Longitud descrita (consulte a continuación)</span><span class="sxs-lookup"><span data-stu-id="113ed-203">Described long(see the following)</span></span> |<span data-ttu-id="113ed-204">Valor de AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-204">AMQP Value</span></span> |
| <span data-ttu-id="113ed-205">Stream</span><span class="sxs-lookup"><span data-stu-id="113ed-205">Stream</span></span> |<span data-ttu-id="113ed-206">binary</span><span class="sxs-lookup"><span data-stu-id="113ed-206">binary</span></span> |<span data-ttu-id="113ed-207">Datos de AMQP (pueden ser varios)</span><span class="sxs-lookup"><span data-stu-id="113ed-207">AMQP Data (may be multiple).</span></span> <span data-ttu-id="113ed-208">Las secciones de datos contienen los bytes sin formato que se leen desde el objeto de secuencia.</span><span class="sxs-lookup"><span data-stu-id="113ed-208">The Data sections contain the raw bytes read from the Stream object.</span></span> |
| <span data-ttu-id="113ed-209">Otro objeto</span><span class="sxs-lookup"><span data-stu-id="113ed-209">Other Object</span></span> |<span data-ttu-id="113ed-210">binary</span><span class="sxs-lookup"><span data-stu-id="113ed-210">binary</span></span> |<span data-ttu-id="113ed-211">Datos de AMQP (pueden ser varios)</span><span class="sxs-lookup"><span data-stu-id="113ed-211">AMQP Data (may be multiple).</span></span> <span data-ttu-id="113ed-212">Contiene el binario serializado del objeto que usa DataContractSerializer o un serializador proporcionado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="113ed-212">Contains the serialized binary of the object that uses the DataContractSerializer or a serializer supplied by the application.</span></span> |

| <span data-ttu-id="113ed-213">Tipo .NET</span><span class="sxs-lookup"><span data-stu-id="113ed-213">.NET Type</span></span> | <span data-ttu-id="113ed-214">Mapped AMQP Described Type</span><span class="sxs-lookup"><span data-stu-id="113ed-214">Mapped AMQP Described Type</span></span> | <span data-ttu-id="113ed-215">Notas</span><span class="sxs-lookup"><span data-stu-id="113ed-215">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="113ed-216">Identificador URI</span><span class="sxs-lookup"><span data-stu-id="113ed-216">Uri</span></span> |`<type name=”uri” class=restricted source=”string”> <descriptor name=”com.microsoft:uri” /></type>` |<span data-ttu-id="113ed-217">Uri.AbsoluteUri</span><span class="sxs-lookup"><span data-stu-id="113ed-217">Uri.AbsoluteUri</span></span> |
| <span data-ttu-id="113ed-218">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="113ed-218">DateTimeOffset</span></span> |`<type name=”datetime-offset” class=restricted source=”long”> <descriptor name=”com.microsoft:datetime-offset” /></type>` |<span data-ttu-id="113ed-219">DateTimeOffset.UtcTicks</span><span class="sxs-lookup"><span data-stu-id="113ed-219">DateTimeOffset.UtcTicks</span></span> |
| <span data-ttu-id="113ed-220">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="113ed-220">TimeSpan</span></span> |`<type name=”timespan” class=restricted source=”long”> <descriptor name=”com.microsoft:timespan” /></type> ` |<span data-ttu-id="113ed-221">TimeSpan.Ticks</span><span class="sxs-lookup"><span data-stu-id="113ed-221">TimeSpan.Ticks</span></span> |

## <a name="unsupported-features-restrictions-and-behavioral-differences"></a><span data-ttu-id="113ed-222">Características no admitidas, restricciones y diferencias de comportamiento</span><span class="sxs-lookup"><span data-stu-id="113ed-222">Unsupported features, restrictions, and behavioral differences</span></span>

<span data-ttu-id="113ed-223">Actualmente no se admiten las siguientes características de la API de .NET de Service Bus al usar AMQP:</span><span class="sxs-lookup"><span data-stu-id="113ed-223">The following features of the Service Bus .NET API are not currently supported when using AMQP:</span></span>

* <span data-ttu-id="113ed-224">Transacciones</span><span class="sxs-lookup"><span data-stu-id="113ed-224">Transactions</span></span>
* <span data-ttu-id="113ed-225">Envío a través de un destino de transferencia</span><span class="sxs-lookup"><span data-stu-id="113ed-225">Send via transfer destination</span></span>

<span data-ttu-id="113ed-226">También hay algunas pequeñas diferencias en el comportamiento de la API de .NET de Service Bus al usar AMQP, en comparación con el protocolo predeterminado:</span><span class="sxs-lookup"><span data-stu-id="113ed-226">There are also some small differences in the behavior of the Service Bus .NET API when using AMQP, compared to the default protocol:</span></span>

* <span data-ttu-id="113ed-227">La propiedad [OperationTimeout][OperationTimeout] se omite.</span><span class="sxs-lookup"><span data-stu-id="113ed-227">The [OperationTimeout][OperationTimeout] property is ignored.</span></span>
* <span data-ttu-id="113ed-228">`MessageReceiver.Receive(TimeSpan.Zero)` se implementa como `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span><span class="sxs-lookup"><span data-stu-id="113ed-228">`MessageReceiver.Receive(TimeSpan.Zero)` is implemented as `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span></span>
* <span data-ttu-id="113ed-229">La finalización de mensajes mediante tokens de bloqueo solo puede realizarse por los receptores del mensaje que reciben inicialmente los mensajes.</span><span class="sxs-lookup"><span data-stu-id="113ed-229">Completing messages by lock tokens can only be done by the message receivers that initially received the messages.</span></span>

## <a name="controlling-amqp-protocol-settings"></a><span data-ttu-id="113ed-230">Control de la configuración del protocolo AMQP</span><span class="sxs-lookup"><span data-stu-id="113ed-230">Controlling AMQP protocol settings</span></span>

<span data-ttu-id="113ed-231">Las [API de .NET](/dotnet/api/) exponen varias opciones para controlar el comportamiento del protocolo AMQP:</span><span class="sxs-lookup"><span data-stu-id="113ed-231">The [.NET APIs](/dotnet/api/) expose several settings to control the behavior of the AMQP protocol:</span></span>

* <span data-ttu-id="113ed-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: controla el crédito inicial que se aplica a un vínculo.</span><span class="sxs-lookup"><span data-stu-id="113ed-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: Controls the initial credit applied to a link.</span></span> <span data-ttu-id="113ed-233">El valor predeterminado es 0.</span><span class="sxs-lookup"><span data-stu-id="113ed-233">The default is 0.</span></span>
* <span data-ttu-id="113ed-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: controla el tamaño máximo del marco de AMQP ofrecido durante la negociación en el momento de apertura de la conexión.</span><span class="sxs-lookup"><span data-stu-id="113ed-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: Controls the maximum AMQP frame size offered during the negotiation at connection open time.</span></span> <span data-ttu-id="113ed-235">The default is 65.536 bytes.</span><span class="sxs-lookup"><span data-stu-id="113ed-235">The default is 65,536 bytes.</span></span>
* <span data-ttu-id="113ed-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: si las transferencias se pueden definir por lotes, este valor determina el retraso máximo de las disposiciones de envío.</span><span class="sxs-lookup"><span data-stu-id="113ed-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: If transfers are batchable, this value determines the maximum delay for sending dispositions.</span></span> <span data-ttu-id="113ed-237">Heredado por remitentes/receptores de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="113ed-237">Inherited by senders/receivers by default.</span></span> <span data-ttu-id="113ed-238">El remitente/receptor individual puede invalidar el valor predeterminado, que es de 20 milisegundos.</span><span class="sxs-lookup"><span data-stu-id="113ed-238">Individual sender/receiver can override the default, which is 20 milliseconds.</span></span>
* <span data-ttu-id="113ed-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: controla si las conexiones de AMQP se establecen a través de una conexión SSL.</span><span class="sxs-lookup"><span data-stu-id="113ed-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: Controls whether AMQP connections are established over an SSL connection.</span></span> <span data-ttu-id="113ed-240">El valor predeterminado es **true**.</span><span class="sxs-lookup"><span data-stu-id="113ed-240">The default is **true**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="113ed-241">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="113ed-241">Next steps</span></span>

<span data-ttu-id="113ed-242">¿Listo para obtener más información?</span><span class="sxs-lookup"><span data-stu-id="113ed-242">Ready to learn more?</span></span> <span data-ttu-id="113ed-243">Consulte los siguientes vínculos:</span><span class="sxs-lookup"><span data-stu-id="113ed-243">Visit the following links:</span></span>

* <span data-ttu-id="113ed-244">[Información general sobre AMQP para Service Bus]</span><span class="sxs-lookup"><span data-stu-id="113ed-244">[Service Bus AMQP overview]</span></span>
* <span data-ttu-id="113ed-245">[Compatibilidad de AMQP 1.0 con los temas y las colas con particiones de Service Bus]</span><span class="sxs-lookup"><span data-stu-id="113ed-245">[AMQP 1.0 support for Service Bus partitioned queues and topics]</span></span>
* <span data-ttu-id="113ed-246">[AMQP de Service Bus para Windows Server]</span><span class="sxs-lookup"><span data-stu-id="113ed-246">[AMQP in Service Bus for Windows Server]</span></span>

[Create a Service Bus namespace using the Azure portal]: service-bus-create-namespace-portal.md
[DataContractSerializer]: https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage?view=azureservicebus-4.0.0
[Microsoft.ServiceBus.Messaging.MessagingFactory.AcceptMessageSession]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory.acceptmessagesession?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactory_AcceptMessageSession
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[NuGet]: http://nuget.org/packages/WindowsAzure.ServiceBus/
[Azure portal]: https://portal.azure.com
<span data-ttu-id="113ed-247">[Información general sobre AMQP para Service Bus]: service-bus-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="113ed-247">[Service Bus AMQP overview]: service-bus-amqp-overview.md</span></span>
<span data-ttu-id="113ed-248">[Compatibilidad de AMQP 1.0 con los temas y las colas con particiones de Service Bus]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="113ed-248">[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span></span>
<span data-ttu-id="113ed-249">[AMQP de Service Bus para Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span><span class="sxs-lookup"><span data-stu-id="113ed-249">[AMQP in Service Bus for Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span></span>

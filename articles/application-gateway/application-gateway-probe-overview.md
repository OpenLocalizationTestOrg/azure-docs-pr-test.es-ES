---
title: "aaaHealth información general de supervisión para la puerta de enlace de aplicaciones de Azure | Documentos de Microsoft"
description: "Obtenga información acerca de hello las funciones de puerta de enlace de aplicaciones de Azure de seguimiento"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="aaad3-103">Información general sobre la supervisión de estado de la puerta de enlace de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="aaad3-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="aaad3-104">Azure puerta de enlace de aplicaciones de forma predeterminada se supervisa el estado de Hola de todos los recursos de su grupo back-end y se quita automáticamente cualquier recurso que se considera incorrecto del grupo de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="aaad3-105">Puerta de enlace de aplicación continúa instancias toomonitor hello en mal estado y se agregan hacer copia de grupo de back-end de toohello correcto una vez que estén disponibles y responden toohealth sondeos.</span><span class="sxs-lookup"><span data-stu-id="aaad3-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="aaad3-106">Puerta de enlace de aplicación envía Hola sondeos de estado con hello mismo puerto que se define en la configuración de HTTP de back-end de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="aaad3-107">Esta configuración garantiza que sondeo Hola está probando Hola mismo número de puerto que los clientes sería utilizar back-end de tooconnect toohello.</span><span class="sxs-lookup"><span data-stu-id="aaad3-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![ejemplo de sondeo de Application Gateway][1]

<span data-ttu-id="aaad3-109">En suma toousing predeterminado sondeo supervisión de estado, también puede personalizar toosuit de sondeo de estado de hello requisitos de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="aaad3-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="aaad3-110">En este artículo trataremos ambos sondeos de estado: el personalizado y el predeterminado.</span><span class="sxs-lookup"><span data-stu-id="aaad3-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="aaad3-111">Si hay un NSG de subred de puerta de enlace de aplicaciones, intervalos de puertos 65503-65534 deben abrirse en la subred de puerta de enlace de aplicación hello para el tráfico entrante.</span><span class="sxs-lookup"><span data-stu-id="aaad3-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="aaad3-112">Estos puertos son necesarios para toowork de API de mantenimiento de hello back-end.</span><span class="sxs-lookup"><span data-stu-id="aaad3-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="aaad3-113">Sondeo de estado predeterminado</span><span class="sxs-lookup"><span data-stu-id="aaad3-113">Default health probe</span></span>

<span data-ttu-id="aaad3-114">Una puerta de enlace de aplicaciones configura automáticamente un sondeo de estado predeterminado cuando no hay ningún sondeo personalizado configurado.</span><span class="sxs-lookup"><span data-stu-id="aaad3-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="aaad3-115">Hola supervisión comportamiento funciona convirtiendo que resuelve una dirección IP toohello de solicitud HTTP configurados para el grupo de back-end de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="aaad3-116">Para los sondeos de forma predeterminada si Hola back-end http se configura para HTTPS, sondeo hello usa HTTPS como tootest y mantenimiento de hello back-ends.</span><span class="sxs-lookup"><span data-stu-id="aaad3-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="aaad3-117">Por ejemplo: configurar la aplicación puerta de enlace toouse servidores back-end A, B y C tooreceive HTTP tráfico de red en el puerto 80.</span><span class="sxs-lookup"><span data-stu-id="aaad3-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="aaad3-118">supervisión de estado de saludo predeterminado comprueba tres servidores de hello cada 30 segundos para una respuesta HTTP correcto.</span><span class="sxs-lookup"><span data-stu-id="aaad3-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="aaad3-119">Una respuesta HTTP correcta tiene un [código de estado](https://msdn.microsoft.com/library/aa287675.aspx) entre 200 y 399.</span><span class="sxs-lookup"><span data-stu-id="aaad3-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="aaad3-120">Si se produce un error en la comprobación de sondeo de hello predeterminada para que el servidor, puerta de enlace de aplicaciones de Hola quita de su grupo back-end y el tráfico de red deje de fluir toothis server.</span><span class="sxs-lookup"><span data-stu-id="aaad3-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="aaad3-121">sondeo de Hello predeterminado conservará toocheck para servidor un cada 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="aaad3-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="aaad3-122">Cuando el servidor A responde correctamente tooone solicitud de un sondeo de estado de manera predeterminada, se agrega nuevo como grupo de back-end de toohello correcto y comienza a tráfico fluir toohello servidor nuevo.</span><span class="sxs-lookup"><span data-stu-id="aaad3-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="aaad3-123">Configuración de sondeo de estado predeterminado</span><span class="sxs-lookup"><span data-stu-id="aaad3-123">Default health probe settings</span></span>

| <span data-ttu-id="aaad3-124">Propiedad de sondeo</span><span class="sxs-lookup"><span data-stu-id="aaad3-124">Probe property</span></span> | <span data-ttu-id="aaad3-125">Valor</span><span class="sxs-lookup"><span data-stu-id="aaad3-125">Value</span></span> | <span data-ttu-id="aaad3-126">Description</span><span class="sxs-lookup"><span data-stu-id="aaad3-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="aaad3-127">Dirección URL de sondeo</span><span class="sxs-lookup"><span data-stu-id="aaad3-127">Probe URL</span></span> |<span data-ttu-id="aaad3-128">http://127.0.0.1:\<puerto\>/</span><span class="sxs-lookup"><span data-stu-id="aaad3-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="aaad3-129">Ruta de acceso URL</span><span class="sxs-lookup"><span data-stu-id="aaad3-129">URL path</span></span> |
| <span data-ttu-id="aaad3-130">Intervalo</span><span class="sxs-lookup"><span data-stu-id="aaad3-130">Interval</span></span> |<span data-ttu-id="aaad3-131">30</span><span class="sxs-lookup"><span data-stu-id="aaad3-131">30</span></span> |<span data-ttu-id="aaad3-132">Intervalo de sondeo en segundos</span><span class="sxs-lookup"><span data-stu-id="aaad3-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="aaad3-133">Tiempo de espera</span><span class="sxs-lookup"><span data-stu-id="aaad3-133">Time-out</span></span> |<span data-ttu-id="aaad3-134">30</span><span class="sxs-lookup"><span data-stu-id="aaad3-134">30</span></span> |<span data-ttu-id="aaad3-135">Tiempo de espera del sondeo en segundos</span><span class="sxs-lookup"><span data-stu-id="aaad3-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="aaad3-136">Umbral incorrecto</span><span class="sxs-lookup"><span data-stu-id="aaad3-136">Unhealthy threshold</span></span> |<span data-ttu-id="aaad3-137">3</span><span class="sxs-lookup"><span data-stu-id="aaad3-137">3</span></span> |<span data-ttu-id="aaad3-138">Número de reintentos de sondeo.</span><span class="sxs-lookup"><span data-stu-id="aaad3-138">Probe retry count.</span></span> <span data-ttu-id="aaad3-139">servidor de back-end de Hola está marcado después de recuento de errores de sondeo consecutivos Hola alcanza el umbral de estado incorrecto de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="aaad3-140">Hello puerto es Hola mismo puerto como configuración de HTTP de back-end de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="aaad3-141">sondeo de Hello predeterminado solo examina http://127.0.0.1:\<puerto\> toodetermine estado de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="aaad3-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="aaad3-142">Si necesita tooconfigure Hola mantenimiento sondeo toogo tooa dirección URL personalizada o modificar las opciones de configuración, debe usar sondeos personalizados como se describe en hello pasos:</span><span class="sxs-lookup"><span data-stu-id="aaad3-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="aaad3-143">Sondeo de estado personalizado</span><span class="sxs-lookup"><span data-stu-id="aaad3-143">Custom health probe</span></span>

<span data-ttu-id="aaad3-144">Sondeos personalizados le permiten toohave un control más granular sobre supervisión de estado de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="aaad3-145">Cuando se usa sondeos personalizados, puede configurar intervalo de sondeo de saludo, tootest de dirección URL y la ruta de acceso de Hola y cuántos tooaccept de respuestas error antes de marcar la instancia de grupo de servidores de back-end de hello como en mal estado.</span><span class="sxs-lookup"><span data-stu-id="aaad3-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="aaad3-146">Configuración de sondeo de estado personalizado</span><span class="sxs-lookup"><span data-stu-id="aaad3-146">Custom health probe settings</span></span>

<span data-ttu-id="aaad3-147">Hello tabla siguiente proporciona las definiciones de propiedades de Hola de un sondeo de estado personalizado.</span><span class="sxs-lookup"><span data-stu-id="aaad3-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="aaad3-148">Propiedad de sondeo</span><span class="sxs-lookup"><span data-stu-id="aaad3-148">Probe property</span></span> | <span data-ttu-id="aaad3-149">Description</span><span class="sxs-lookup"><span data-stu-id="aaad3-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="aaad3-150">Nombre</span><span class="sxs-lookup"><span data-stu-id="aaad3-150">Name</span></span> |<span data-ttu-id="aaad3-151">Nombre del sondeo de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-151">Name of hello probe.</span></span> <span data-ttu-id="aaad3-152">También se denomina sondeo de toohello toorefer usado en la configuración de HTTP de back-end.</span><span class="sxs-lookup"><span data-stu-id="aaad3-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="aaad3-153">Protocol</span><span class="sxs-lookup"><span data-stu-id="aaad3-153">Protocol</span></span> |<span data-ttu-id="aaad3-154">Usa el protocolo de sondeo de hello toosend.</span><span class="sxs-lookup"><span data-stu-id="aaad3-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="aaad3-155">sondeo de Hello usa el protocolo de hello definido en la configuración de HTTP de back-end de Hola</span><span class="sxs-lookup"><span data-stu-id="aaad3-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="aaad3-156">Host</span><span class="sxs-lookup"><span data-stu-id="aaad3-156">Host</span></span> |<span data-ttu-id="aaad3-157">Sondeo de Hola de toosend de nombre de host.</span><span class="sxs-lookup"><span data-stu-id="aaad3-157">Host name toosend hello probe.</span></span> <span data-ttu-id="aaad3-158">Solo se puede aplicar cuando se ha configurado un entorno multisitio en Application Gateway; de lo contrario hay que usar '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="aaad3-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="aaad3-159">Este valor es distinto del nombre de host de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="aaad3-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="aaad3-160">Ruta de acceso</span><span class="sxs-lookup"><span data-stu-id="aaad3-160">Path</span></span> |<span data-ttu-id="aaad3-161">Ruta de acceso relativa del sondeo de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-161">Relative path of hello probe.</span></span> <span data-ttu-id="aaad3-162">ruta de acceso válida de Hola se inicia desde '/'.</span><span class="sxs-lookup"><span data-stu-id="aaad3-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="aaad3-163">Intervalo</span><span class="sxs-lookup"><span data-stu-id="aaad3-163">Interval</span></span> |<span data-ttu-id="aaad3-164">Intervalo de sondeo en segundos.</span><span class="sxs-lookup"><span data-stu-id="aaad3-164">Probe interval in seconds.</span></span> <span data-ttu-id="aaad3-165">Este valor es el intervalo de tiempo de hello entre dos sondeos consecutivos.</span><span class="sxs-lookup"><span data-stu-id="aaad3-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="aaad3-166">Tiempo de espera</span><span class="sxs-lookup"><span data-stu-id="aaad3-166">Time-out</span></span> |<span data-ttu-id="aaad3-167">Tiempo de espera del sondeo en segundos.</span><span class="sxs-lookup"><span data-stu-id="aaad3-167">Probe time-out in seconds.</span></span> <span data-ttu-id="aaad3-168">Si no se recibe una respuesta válida dentro de este período de tiempo de espera, el sondeo de Hola se marcará como incorrecta.</span><span class="sxs-lookup"><span data-stu-id="aaad3-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="aaad3-169">Umbral incorrecto</span><span class="sxs-lookup"><span data-stu-id="aaad3-169">Unhealthy threshold</span></span> |<span data-ttu-id="aaad3-170">Número de reintentos de sondeo.</span><span class="sxs-lookup"><span data-stu-id="aaad3-170">Probe retry count.</span></span> <span data-ttu-id="aaad3-171">servidor de back-end de Hola está marcado después de recuento de errores de sondeo consecutivos Hola alcanza el umbral de estado incorrecto de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="aaad3-172">Si la puerta de enlace de aplicaciones está configurada para un único sitio, por hello predeterminado Host nombre debe especificarse como "127.0.0.1", a menos que en caso contrario, se configura en sondeo personalizado.</span><span class="sxs-lookup"><span data-stu-id="aaad3-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="aaad3-173">Como referencia un sondeo personalizado se envía demasiado\<protocolo\>://\<host\>:\<puerto\>\<ruta de acceso\>.</span><span class="sxs-lookup"><span data-stu-id="aaad3-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="aaad3-174">Hello puerto utilizado será Hola mismo puerto, tal como se define en la configuración de HTTP de back-end de Hola.</span><span class="sxs-lookup"><span data-stu-id="aaad3-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="aaad3-175">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="aaad3-175">Next steps</span></span>
<span data-ttu-id="aaad3-176">Después de aprendizaje sobre la supervisión de estado de puerta de enlace de aplicaciones, puede configurar un [sondeo de estado personalizado](application-gateway-create-probe-portal.md) Hola portal de Azure o un [sondeo de estado personalizado](application-gateway-create-probe-ps.md) con PowerShell y hello Azure Resource Manager modelo de implementación.</span><span class="sxs-lookup"><span data-stu-id="aaad3-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png

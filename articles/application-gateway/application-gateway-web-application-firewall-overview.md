---
title: "Introducción al firewall de aplicaciones web (WAF) para Azure Application Gateway| Microsoft Docs"
description: "En esta página se proporciona información general sobre el firewall de aplicaciones web (WAF) de Application Gateway."
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 50863b60f2843f033bdb07f4564d937cd6f0b7be
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="1b206-103">Firewall de aplicaciones web (WAF)</span><span class="sxs-lookup"><span data-stu-id="1b206-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="1b206-104">Firewall de aplicaciones web (WAF) es una característica de Application Gateway que proporciona a las aplicaciones una protección centralizada contra vulnerabilidades de seguridad comunes.</span><span class="sxs-lookup"><span data-stu-id="1b206-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="1b206-105">Firewall de aplicaciones web se basa en las reglas contenidas en [OWASP Core Rule Set](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 o 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="1b206-105">Web application firewall is based on rules from the [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="1b206-106">Las aplicaciones web son cada vez más los objetivos de ataques malintencionados que aprovechan vulnerabilidades comunes conocidas, como</span><span class="sxs-lookup"><span data-stu-id="1b206-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="1b206-107">ataques por inyección de código SQL o ataques de scripts de sitios, por nombrar unos pocos.</span><span class="sxs-lookup"><span data-stu-id="1b206-107">Common among these exploits are SQL injection attacks, cross site scripting attacks to name a few.</span></span> <span data-ttu-id="1b206-108">Impedir tales ataques en el código de aplicación puede ser un verdadero desafío y requerir tareas rigurosas de mantenimiento, aplicación de revisiones y supervisión en varias capas de la topología de aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b206-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of the application topology.</span></span> <span data-ttu-id="1b206-109">Un firewall de aplicaciones web centralizado facilita enormemente la administración de la seguridad y proporciona mayor protección a los administradores de la aplicación frente a amenazas o intrusiones.</span><span class="sxs-lookup"><span data-stu-id="1b206-109">A centralized web application firewall helps make security management much simpler and gives better assurance to application administrators against threats or intrusions.</span></span> <span data-ttu-id="1b206-110">Las soluciones de WAF también pueden reaccionar más rápido ante una amenaza de la seguridad aplicando revisiones que aborden una vulnerabilidad conocida en una ubicación central en lugar de proteger cada una de las aplicaciones web por separado.</span><span class="sxs-lookup"><span data-stu-id="1b206-110">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="1b206-111">Las puertas de enlace de aplicaciones existentes pueden transformarse rápidamente en puertas de enlace con un firewall de aplicaciones web habilitado.</span><span class="sxs-lookup"><span data-stu-id="1b206-111">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="1b206-113">Application Gateway funciona como un controlador de entrega de aplicaciones y ofrece terminación SSL, afinidad de sesión basada en cookies, distribución de la carga en operaciones por turnos, enrutamiento basado en contenido, posibilidad de hospedar varios sitios y mejoras de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1b206-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability to host multiple websites and security enhancements.</span></span> <span data-ttu-id="1b206-114">Algunas de las mejoras de seguridad que se ofrecen en Application Gateway son administración de directivas SSL y compatibilidad con SSL de extremo a extremo.</span><span class="sxs-lookup"><span data-stu-id="1b206-114">Security enhancements offered by Application Gateway include SSL policy management, end to end SSL support.</span></span> <span data-ttu-id="1b206-115">La seguridad de las aplicaciones se mejora mediante un WAF (firewall de aplicaciones web) integrado directamente en la oferta de ADC.</span><span class="sxs-lookup"><span data-stu-id="1b206-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into the ADC offering.</span></span> <span data-ttu-id="1b206-116">De esta forma se proporciona una ubicación central fácil de configurar para administrar y proteger las aplicaciones web frente a vulnerabilidades web comunes.</span><span class="sxs-lookup"><span data-stu-id="1b206-116">This provides an easy to configure central location to manage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="1b206-117">Ventajas</span><span class="sxs-lookup"><span data-stu-id="1b206-117">Benefits</span></span>

<span data-ttu-id="1b206-118">Estas son las principales ventajas proporcionadas por Application Gateway y el firewall de aplicaciones web:</span><span class="sxs-lookup"><span data-stu-id="1b206-118">The following are the core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="1b206-119">Protección</span><span class="sxs-lookup"><span data-stu-id="1b206-119">Protection</span></span>

* <span data-ttu-id="1b206-120">Protección de la aplicación web contra las vulnerabilidades y los ataques web sin modificación del código de back-end.</span><span class="sxs-lookup"><span data-stu-id="1b206-120">Protect your web application from web vulnerabilities and attacks without modification to backend code.</span></span>

* <span data-ttu-id="1b206-121">Protección de varias aplicaciones web al mismo tiempo detrás de una puerta de enlace de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="1b206-121">Protect multiple web applications at the same time behind an application gateway.</span></span> <span data-ttu-id="1b206-122">Application Gateway admite el hospedaje de hasta 20 sitios web detrás de una única puerta de enlace. Todos ellos se pueden proteger contra los ataques web mediante WAF.</span><span class="sxs-lookup"><span data-stu-id="1b206-122">Application gateway supports hosting up to 20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="1b206-123">Supervisión</span><span class="sxs-lookup"><span data-stu-id="1b206-123">Monitoring</span></span>

* <span data-ttu-id="1b206-124">Supervise la aplicación web frente a ataques mediante un registro de WAF en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="1b206-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="1b206-125">Este registro se integra con [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) para realizar un seguimiento de los registros y alertas de WAF y permite supervisar con facilidad las tendencias.</span><span class="sxs-lookup"><span data-stu-id="1b206-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) to track WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="1b206-126">WAF se integrará con Azure Security Center pronto.</span><span class="sxs-lookup"><span data-stu-id="1b206-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="1b206-127">Azure Security Center permite obtener una visión central del estado de la seguridad de todos sus recursos en Azure.</span><span class="sxs-lookup"><span data-stu-id="1b206-127">Azure Security Center allows for a central view of the security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="1b206-128">Personalización</span><span class="sxs-lookup"><span data-stu-id="1b206-128">Customization</span></span>

* <span data-ttu-id="1b206-129">La capacidad para personalizar las reglas y grupos de reglas del WAF para satisfacer las necesidades de su aplicación y eliminar los falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="1b206-129">The ability to customize WAF rules and rule groups to suit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="1b206-130">Características</span><span class="sxs-lookup"><span data-stu-id="1b206-130">Features</span></span>

<span data-ttu-id="1b206-131">El firewall de aplicaciones web viene preconfigurado con CRS 3.0 de forma predeterminada, aunque también puede usar la versión 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="1b206-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose to use 2.2.9.</span></span> <span data-ttu-id="1b206-132">CRS 3.0 permite reducir el número de falsos positivos con respecto a la versión 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="1b206-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="1b206-133">Se ofrece la posibilidad de [personalizar reglas para adaptarse a sus necesidades](application-gateway-customize-waf-rules-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1b206-133">The ability to [customize rules to suit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="1b206-134">Entre las vulnerabilidades web más habituales frente a las que protege el firewall de aplicaciones web se incluyen:</span><span class="sxs-lookup"><span data-stu-id="1b206-134">Some of the common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="1b206-135">Protección contra la inyección de código SQL</span><span class="sxs-lookup"><span data-stu-id="1b206-135">SQL injection protection</span></span>
* <span data-ttu-id="1b206-136">Protección contra scripts entre sitios</span><span class="sxs-lookup"><span data-stu-id="1b206-136">Cross site scripting protection</span></span>
* <span data-ttu-id="1b206-137">Protección contra ataques web comunes, como inyección de comandos, contrabando de solicitudes HTTP, división de respuestas HTTP y ataque remoto de inclusión de archivos</span><span class="sxs-lookup"><span data-stu-id="1b206-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="1b206-138">Protección contra infracciones del protocolo HTTP</span><span class="sxs-lookup"><span data-stu-id="1b206-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="1b206-139">Protección contra anomalías del protocolo HTTP, como la falta de agentes de usuario de host y encabezados de aceptación</span><span class="sxs-lookup"><span data-stu-id="1b206-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="1b206-140">Prevención contra bots, rastreadores y escáneres</span><span class="sxs-lookup"><span data-stu-id="1b206-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="1b206-141">Detección de errores de configuración comunes (es decir, Apache, IIS, etc.)</span><span class="sxs-lookup"><span data-stu-id="1b206-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="1b206-142">Para una lista más detallada de las reglas y los mecanismos de protección, consulte el siguiente apartado sobre [conjuntos de reglas principales](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="1b206-142">For a more detailed list of rules and their protections see the following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="1b206-143">Conjuntos de reglas principales</span><span class="sxs-lookup"><span data-stu-id="1b206-143">Core rule sets</span></span>

<span data-ttu-id="1b206-144">Application Gateway admite dos conjuntos de reglas: CRS 3.0 y CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="1b206-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="1b206-145">Estos conjuntos de reglas principales son colecciones de reglas que protegen las aplicaciones web frente a actividades malintencionadas.</span><span class="sxs-lookup"><span data-stu-id="1b206-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="1b206-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="1b206-146">OWASP_3.0</span></span>

<span data-ttu-id="1b206-147">CRS 3.0 proporciona 13 grupos de reglas, tal como se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="1b206-147">The 3.0 core rule set provided has 13 rule groups as shown in the following table.</span></span> <span data-ttu-id="1b206-148">Cada uno de estos grupos de reglas contiene varias reglas que se pueden deshabilitar.</span><span class="sxs-lookup"><span data-stu-id="1b206-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="1b206-149">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="1b206-149">RuleGroup</span></span>|<span data-ttu-id="1b206-150">Descripción</span><span class="sxs-lookup"><span data-stu-id="1b206-150">Description</span></span>|
|---|---|
|<span data-ttu-id="1b206-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="1b206-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="1b206-152">Contiene reglas para protegerse frente a remitentes de spam conocidos o actividades malintencionadas.</span><span class="sxs-lookup"><span data-stu-id="1b206-152">Contains rules to protect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="1b206-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="1b206-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="1b206-154">Contiene reglas para bloquear métodos (PUT, PATCH< ..)</span><span class="sxs-lookup"><span data-stu-id="1b206-154">Contains rules to lock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="1b206-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="1b206-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="1b206-156">Contiene reglas para protegerse contra ataques de denegación de servicio (DoS).</span><span class="sxs-lookup"><span data-stu-id="1b206-156">Contains rules to protect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="1b206-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="1b206-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="1b206-158">Contiene reglas para protegerse de los escáneres de puertos y entornos.</span><span class="sxs-lookup"><span data-stu-id="1b206-158">Contains rules to protect against port and environment scanners.</span></span>|
|<span data-ttu-id="1b206-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="1b206-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="1b206-160">Contiene reglas para protegerse de problemas de protocolo y codificación.</span><span class="sxs-lookup"><span data-stu-id="1b206-160">Contains rules to protect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="1b206-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="1b206-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="1b206-162">Contiene reglas para protegerse frente a ataques por inyección de encabezado, contrabando de solicitudes y división de respuestas</span><span class="sxs-lookup"><span data-stu-id="1b206-162">Contains rules to protect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="1b206-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="1b206-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="1b206-164">Contiene reglas para protegerse contra ataques a archivos y rutas de acceso.</span><span class="sxs-lookup"><span data-stu-id="1b206-164">Contains rules to protect against file and path attacks.</span></span>|
|<span data-ttu-id="1b206-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="1b206-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="1b206-166">Contiene reglas para protegerse contra ataques remotos de inclusión de archivos (RFI)</span><span class="sxs-lookup"><span data-stu-id="1b206-166">Contains rules to protect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="1b206-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="1b206-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="1b206-168">Contiene reglas para protegerse contra la ejecución remota de código.</span><span class="sxs-lookup"><span data-stu-id="1b206-168">Contains rules to protect again Remote Code Execution.</span></span>|
|<span data-ttu-id="1b206-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="1b206-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="1b206-170">Contiene reglas para protegerse contra ataques por inyección en PHP.</span><span class="sxs-lookup"><span data-stu-id="1b206-170">Contains rules to protect against PHP injection attacks.</span></span>|
|<span data-ttu-id="1b206-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="1b206-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="1b206-172">Contiene reglas para protegerse contra los scripts entre sitios.</span><span class="sxs-lookup"><span data-stu-id="1b206-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="1b206-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="1b206-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="1b206-174">Contiene reglas para protegerse contra los ataques de inyección de código SQL.</span><span class="sxs-lookup"><span data-stu-id="1b206-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="1b206-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="1b206-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="1b206-176">Contiene reglas para protegerse contra los ataques por fijación de sesión.</span><span class="sxs-lookup"><span data-stu-id="1b206-176">Contains rules to protect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="1b206-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="1b206-177">OWASP_2.2.9</span></span>

<span data-ttu-id="1b206-178">CRS 2.2.9 proporciona 10 grupos de reglas, tal como se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="1b206-178">The 2.2.9 core rule set provided has 10 rule groups as shown in the following table.</span></span> <span data-ttu-id="1b206-179">Cada uno de estos grupos de reglas contiene varias reglas que se pueden deshabilitar.</span><span class="sxs-lookup"><span data-stu-id="1b206-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="1b206-180">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="1b206-180">RuleGroup</span></span>|<span data-ttu-id="1b206-181">Descripción</span><span class="sxs-lookup"><span data-stu-id="1b206-181">Description</span></span>|
|---|---|
|<span data-ttu-id="1b206-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="1b206-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="1b206-183">Contiene reglas para protegerse frente a las infracciones de protocolo (caracteres no válidos, GET con un cuerpo de solicitud, etc).</span><span class="sxs-lookup"><span data-stu-id="1b206-183">Contains rules to protect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="1b206-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="1b206-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="1b206-185">Contiene reglas para protegerse frente a una información de encabezados incorrecta.</span><span class="sxs-lookup"><span data-stu-id="1b206-185">Contains rules to protect against incorrect header information.</span></span>|
|<span data-ttu-id="1b206-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="1b206-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="1b206-187">Contiene reglas para protegerse frente a argumentos o archivos que superan las limitaciones.</span><span class="sxs-lookup"><span data-stu-id="1b206-187">Contains rules to protect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="1b206-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="1b206-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="1b206-189">Contiene reglas para protegerse frente a métodos, encabezados y tipos de archivo restringidos.</span><span class="sxs-lookup"><span data-stu-id="1b206-189">Contains rules to protect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="1b206-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="1b206-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="1b206-191">Contiene reglas para protegerse frente a escáneres y rastreadores web.</span><span class="sxs-lookup"><span data-stu-id="1b206-191">Contains rules to protect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="1b206-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="1b206-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="1b206-193">Contiene reglas para protegerse contra ataques genéricos (fijación de sesión, ataque remoto de inclusión de archivos, inyección en PHP, etc.)</span><span class="sxs-lookup"><span data-stu-id="1b206-193">Contains rules to protect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="1b206-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="1b206-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="1b206-195">Contiene reglas para protegerse contra ataques de inyección de código SQL.</span><span class="sxs-lookup"><span data-stu-id="1b206-195">Contains rules to protect against SQL injection attacks</span></span>|
|<span data-ttu-id="1b206-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="1b206-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="1b206-197">Contiene reglas para protegerse contra los scripts entre sitios.</span><span class="sxs-lookup"><span data-stu-id="1b206-197">Contains rules to protect against cross site scripting.</span></span>|
|<span data-ttu-id="1b206-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="1b206-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="1b206-199">Contiene una regla para protegerse contra los ataques punto punto barra</span><span class="sxs-lookup"><span data-stu-id="1b206-199">Contains a rule to protect against path traversal attacks</span></span>|
|<span data-ttu-id="1b206-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="1b206-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="1b206-201">Contiene reglas para protegerse frente a troyanos de puerta trasera.</span><span class="sxs-lookup"><span data-stu-id="1b206-201">Contains rules to protect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="1b206-202">Modos de WAF</span><span class="sxs-lookup"><span data-stu-id="1b206-202">WAF Modes</span></span>

<span data-ttu-id="1b206-203">WAF de Application Gateway se puede configurar para ejecutarse en dos modos:</span><span class="sxs-lookup"><span data-stu-id="1b206-203">Application Gateway WAF can be configured to run in the following two modes:</span></span>

* <span data-ttu-id="1b206-204">**Modo de detección**: en este modo, WAF de Application Gateway supervisa y registra todas las alertas de amenazas en un archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="1b206-204">**Detection mode** – When configured to run in detection mode, Application Gateway WAF monitors and logs all threat alerts in to a log file.</span></span> <span data-ttu-id="1b206-205">El registro de diagnósticos para Application Gateway se debe activar mediante la sección **Diagnósticos**.</span><span class="sxs-lookup"><span data-stu-id="1b206-205">Logging diagnostics for Application Gateway should be turned on using the **Diagnostics** section.</span></span> <span data-ttu-id="1b206-206">También debe asegurarse de que el registro de WAF esté seleccionado y activado.</span><span class="sxs-lookup"><span data-stu-id="1b206-206">You also need to ensure that the WAF log is selected and turned on.</span></span> <span data-ttu-id="1b206-207">Cuando se ejecuta en modo de detección, el firewall de aplicaciones de web no bloquea las solicitudes entrantes.</span><span class="sxs-lookup"><span data-stu-id="1b206-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="1b206-208">**Modo de prevención** : en este modo, Application Gateway bloquea activamente las intrusiones y los ataques detectados por sus reglas.</span><span class="sxs-lookup"><span data-stu-id="1b206-208">**Prevention mode** – When configured to run in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="1b206-209">El atacante recibe una excepción de acceso no autorizado 403 y se termina la conexión.</span><span class="sxs-lookup"><span data-stu-id="1b206-209">The attacker receives a 403 unauthorized access exception and the connection is terminated.</span></span> <span data-ttu-id="1b206-210">El modo de prevención continúa registrando estos ataques en los registros de WAF.</span><span class="sxs-lookup"><span data-stu-id="1b206-210">Prevention mode continues to log such attacks in the WAF logs.</span></span>

### <span data-ttu-id="1b206-211"><a name="application-gateway-waf-reports"></a>Supervisión de WAF</span><span class="sxs-lookup"><span data-stu-id="1b206-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="1b206-212">Es importante supervisar el estado de la instancia de Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="1b206-212">Monitoring the health of your application gateway is important.</span></span> <span data-ttu-id="1b206-213">La supervisión del estado del firewall de aplicaciones web y las aplicaciones que este protege se proporciona mediante el registro y la integración con Azure Monitor, Azure Security Center (que estará disponible en breve) y Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="1b206-213">Monitoring the health of your web application firewall and the applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![diagnóstico](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="1b206-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="1b206-215">Azure Monitor</span></span>

<span data-ttu-id="1b206-216">Cada registro de Application Gateway se integra con [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1b206-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="1b206-217">Esto permite realizar un seguimiento de la información de diagnóstico incluidos los registros y alertas de WAF.</span><span class="sxs-lookup"><span data-stu-id="1b206-217">This allows you to track diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="1b206-218">Esta funcionalidad se proporciona en el recurso de Application Gateway en el portal en la pestaña **Diagnóstico** o mediante el servicio Azure Monitor directamente.</span><span class="sxs-lookup"><span data-stu-id="1b206-218">This capability is provided within the Application Gateway resource in the portal under the **Diagnostics** tab or through the Azure Monitor service directly.</span></span> <span data-ttu-id="1b206-219">Para más información acerca de cómo habilitar los registros de diagnóstico de Application Gateway, visite [Diagnósticos de Application Gateway](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="1b206-219">To learn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="1b206-220">Azure Security Center</span><span class="sxs-lookup"><span data-stu-id="1b206-220">Azure Security Center</span></span>

<span data-ttu-id="1b206-221">[Azure Security Center](../security-center/security-center-intro.md) ayuda a evitar, detectar y responder a amenazas con más visibilidad y control sobre la seguridad de sus recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="1b206-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond to threats with increased visibility into and control over the security of your Azure resources.</span></span> <span data-ttu-id="1b206-222">Application Gateway ahora [se integra en Azure Security Center](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="1b206-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="1b206-223">Azure Security Center examina su entorno para detectar aplicaciones web no protegidas.</span><span class="sxs-lookup"><span data-stu-id="1b206-223">Azure Security Center scans your environment to detect unprotected web applications.</span></span> <span data-ttu-id="1b206-224">Después, puede recomendar el firewall de aplicación web (WAF) de Application Gateway para proteger estos recursos vulnerables.</span><span class="sxs-lookup"><span data-stu-id="1b206-224">It can now recommend application gateway WAF to protect these vulnerable resources.</span></span> <span data-ttu-id="1b206-225">Puede crear el WAF de Application Gateway directamente desde Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="1b206-225">You can directly create application gateway WAF from the Azure Security Center.</span></span>  <span data-ttu-id="1b206-226">Estas instancias de WAF se integran con Azure Security Center y envían alertas e información de estado a Azure Security Center para crear informes.</span><span class="sxs-lookup"><span data-stu-id="1b206-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back to Azure Security Center for reporting.</span></span>

![Figura 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="1b206-228">Registro</span><span class="sxs-lookup"><span data-stu-id="1b206-228">Logging</span></span>

<span data-ttu-id="1b206-229">WAF de Application Gateway ofrece informes detallados sobre las amenazas detectadas.</span><span class="sxs-lookup"><span data-stu-id="1b206-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="1b206-230">El registro se integra con los registros de Diagnósticos de Azure y las alertas se registran en formato json.</span><span class="sxs-lookup"><span data-stu-id="1b206-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="1b206-231">Estos registros pueden integrarse con [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="1b206-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="1b206-233">Precios de las SKU de WAF de Application Gateway</span><span class="sxs-lookup"><span data-stu-id="1b206-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="1b206-234">El firewall de aplicaciones web está disponible en una nueva SKU de WAF.</span><span class="sxs-lookup"><span data-stu-id="1b206-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="1b206-235">Esta SKU está disponible solo en el modelo de aprovisionamiento de Azure Resource Manager y no en el modelo de implementación clásica.</span><span class="sxs-lookup"><span data-stu-id="1b206-235">This SKU is available only in Azure Resource Manager provisioning model and not under the classic deployment model.</span></span> <span data-ttu-id="1b206-236">Además, la SKU de WAF está solo disponible para tamaños de instancias medianas y grandes de Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="1b206-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="1b206-237">Todos los límites de Application Gateway también se aplican a la SKU de WAF.</span><span class="sxs-lookup"><span data-stu-id="1b206-237">All the limits for application gateway also apply to the WAF SKU.</span></span> <span data-ttu-id="1b206-238">El precio se basa en una tarifa por instancia de puerta de enlace por hora y una tarifa de procesamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="1b206-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="1b206-239">El precio de puerta de enlace por hora para una SKU de WAF es diferente a los costos de una SKU estándar y puede encontrar más información sobre estos en los [detalles de precios de Application Gateway](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="1b206-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="1b206-240">Los costos por procesamiento de datos permanecen iguales.</span><span class="sxs-lookup"><span data-stu-id="1b206-240">Data processing charges remain the same.</span></span> <span data-ttu-id="1b206-241">No hay ningún costo por regla o grupo de reglas.</span><span class="sxs-lookup"><span data-stu-id="1b206-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="1b206-242">Puede proteger varias aplicaciones web mediante el mismo firewall de aplicaciones web y no hay ningún cargo adicional por admitir varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="1b206-242">You can protect multiple web applications behind the same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="1b206-243">La facturación de WAF se inicia de forma efectiva a partir del 5/5/2017. Hasta entonces, las puertas de enlace de SKU de WAF se continuarán cobrando a las tarifas estándar.</span><span class="sxs-lookup"><span data-stu-id="1b206-243">Billing for WAF starts effectively 5/5/2017, until then the WAF SKU gateways continues to be charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1b206-244">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="1b206-244">Next steps</span></span>

<span data-ttu-id="1b206-245">Después de conocer más sobre las funcionalidades de WAF, consulte [cómo configurar el firewall de aplicaciones web en Application Gateway](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1b206-245">After learning more about the capabilities of WAF, visit [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>


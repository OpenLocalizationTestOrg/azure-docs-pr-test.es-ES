---
title: Portal de Azure - puerta de enlace de aplicaciones de Azure - sondeo de aaaCreate personalizado | Documentos de Microsoft
description: "Obtenga información acerca de cómo toocreate personalizado de sondeo para puerta de enlace de aplicaciones mediante el portal de Hola"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 9e9309045ef33ba1010868783949b4fde31619ec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-hello-portal"></a><span data-ttu-id="7403c-103">Crear un sondeo personalizado para puerta de enlace de aplicaciones mediante el portal de Hola</span><span class="sxs-lookup"><span data-stu-id="7403c-103">Create a custom probe for Application Gateway by using hello portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="7403c-104">Portal de Azure</span><span class="sxs-lookup"><span data-stu-id="7403c-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="7403c-105">PowerShell de Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="7403c-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="7403c-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="7403c-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="7403c-107">En este artículo, se agregará un sondeo personalizado tooan aplicación puerta de enlace existente a través de hello portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="7403c-107">In this article, you add a custom probe tooan existing application gateway through hello Azure portal.</span></span> <span data-ttu-id="7403c-108">Sondeos personalizados son útiles para las aplicaciones que tienen una página de comprobación de mantenimiento específico o para aplicaciones que no proporcionan una respuesta correcta en la aplicación web de hello predeterminada.</span><span class="sxs-lookup"><span data-stu-id="7403c-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on hello default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="7403c-109">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="7403c-109">Before you begin</span></span>

<span data-ttu-id="7403c-110">Si no dispone de una puerta de enlace de aplicaciones, visite [crear una puerta de enlace de la aplicación](application-gateway-create-gateway-portal.md) toocreate un toowork de puerta de enlace de aplicaciones con.</span><span class="sxs-lookup"><span data-stu-id="7403c-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) toocreate an application gateway toowork with.</span></span>

## <span data-ttu-id="7403c-111"><a name="createprobe"></a>Crear el sondeo de Hola</span><span class="sxs-lookup"><span data-stu-id="7403c-111"><a name="createprobe"></a>Create hello probe</span></span>

<span data-ttu-id="7403c-112">Los sondeos están configurados en un proceso de dos pasos a través del portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-112">Probes are configured in a two-step process through hello portal.</span></span> <span data-ttu-id="7403c-113">Hola primer paso es sondeo de hello toocreate.</span><span class="sxs-lookup"><span data-stu-id="7403c-113">hello first step is toocreate hello probe.</span></span> <span data-ttu-id="7403c-114">En el segundo paso de hello, agregar configuración Hola sondeo toohello back-end http de puerta de enlace de aplicación Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-114">In hello second step, you add hello probe toohello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="7403c-115">Inicie sesión en toohello [portal de Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7403c-115">Log in toohello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="7403c-116">Si aún no tiene cuenta, puede registrarse para obtener [una evaluación gratuita durante un mes](https://azure.microsoft.com/free).</span><span class="sxs-lookup"><span data-stu-id="7403c-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="7403c-117">Hola portal de Azure panel Favoritos, haga clic en todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="7403c-117">In hello Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="7403c-118">Haga clic en puerta de enlace de aplicaciones de Hola Hola todos los módulos de recursos.</span><span class="sxs-lookup"><span data-stu-id="7403c-118">Click hello application gateway in hello All resources blade.</span></span> <span data-ttu-id="7403c-119">Si la suscripción de Hola que ha seleccionado ya tiene varios recursos en ella, puede escribir partners.contoso.net en hello filtro por nombre...</span><span class="sxs-lookup"><span data-stu-id="7403c-119">If hello subscription you selected already has several resources in it, you can enter partners.contoso.net in hello Filter by name…</span></span> <span data-ttu-id="7403c-120">puerta de enlace de cuadro tooeasily acceso Hola aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7403c-120">box tooeasily access hello application gateway.</span></span>

1. <span data-ttu-id="7403c-121">Haga clic en **sondeos** y haga clic en hello **agregar** botón tooadd un sondeo.</span><span class="sxs-lookup"><span data-stu-id="7403c-121">Click **Probes** and click hello **Add** button tooadd a probe.</span></span>

  ![Agregar hoja Sondeo con la información rellena][1]

1. <span data-ttu-id="7403c-123">En hello **sondeo de estado del complemento** hoja, rellene la información de hello necesario para la sonda de Hola y cuando haya terminado haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="7403c-123">On hello **Add health probe** blade, fill out hello required information for hello probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="7403c-124">**Configuración**</span><span class="sxs-lookup"><span data-stu-id="7403c-124">**Setting**</span></span> | <span data-ttu-id="7403c-125">**Valor**</span><span class="sxs-lookup"><span data-stu-id="7403c-125">**Value**</span></span> | <span data-ttu-id="7403c-126">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="7403c-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="7403c-127">**Name**</span><span class="sxs-lookup"><span data-stu-id="7403c-127">**Name**</span></span>|<span data-ttu-id="7403c-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="7403c-128">customProbe</span></span>|<span data-ttu-id="7403c-129">Este valor es un sondeo de toohello nombre descriptivo que sea accesible en el portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-129">This value is a friendly name toohello probe that is accessible in hello portal.</span></span>|
  |<span data-ttu-id="7403c-130">**Protocolo**</span><span class="sxs-lookup"><span data-stu-id="7403c-130">**Protocol**</span></span>|<span data-ttu-id="7403c-131">HTTP o HTTPS</span><span class="sxs-lookup"><span data-stu-id="7403c-131">HTTP or HTTPS</span></span> | <span data-ttu-id="7403c-132">se utiliza el protocolo de Hola Hola de sondeo de estado.</span><span class="sxs-lookup"><span data-stu-id="7403c-132">hello protocol that hello health probe uses.</span></span>|
  |<span data-ttu-id="7403c-133">**Host**</span><span class="sxs-lookup"><span data-stu-id="7403c-133">**Host**</span></span>|<span data-ttu-id="7403c-134">es decir,</span><span class="sxs-lookup"><span data-stu-id="7403c-134">i.e</span></span> <span data-ttu-id="7403c-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="7403c-135">contoso.com</span></span>|<span data-ttu-id="7403c-136">Este valor es el nombre de host de Hola que se usa para la sonda de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-136">This value is hello host name that is used for hello probe.</span></span> <span data-ttu-id="7403c-137">Solo se puede aplicar cuando se ha configurado un entorno multisitio en Application Gateway; de lo contrario hay que usar '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="7403c-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="7403c-138">Este valor es diferente del nombre de host de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-138">This value is different from hello VM host name.</span></span>|
  |<span data-ttu-id="7403c-139">**Ruta de acceso**</span><span class="sxs-lookup"><span data-stu-id="7403c-139">**Path**</span></span>|<span data-ttu-id="7403c-140">/ u otra ruta de acceso</span><span class="sxs-lookup"><span data-stu-id="7403c-140">/ or another path</span></span>|<span data-ttu-id="7403c-141">resto de Hola de dirección url completa de hello para el sondeo personalizado Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-141">hello remainder of hello full url for hello custom probe.</span></span> <span data-ttu-id="7403c-142">Las rutas de acceso válidas comienzan por '/'.</span><span class="sxs-lookup"><span data-stu-id="7403c-142">A valid path starts with '/'.</span></span> <span data-ttu-id="7403c-143">Ruta de acceso de saludo predeterminado de http://contoso.com simplemente usar '/'</span><span class="sxs-lookup"><span data-stu-id="7403c-143">For hello default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="7403c-144">**Intervalo (segundos)**</span><span class="sxs-lookup"><span data-stu-id="7403c-144">**Interval (secs)**</span></span>|<span data-ttu-id="7403c-145">30</span><span class="sxs-lookup"><span data-stu-id="7403c-145">30</span></span>|<span data-ttu-id="7403c-146">¿Con qué frecuencia hello sondeo se ejecuta toocheck para el estado.</span><span class="sxs-lookup"><span data-stu-id="7403c-146">How often hello probe is run toocheck for health.</span></span> <span data-ttu-id="7403c-147">No se recomienda tooset Hola inferior a 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="7403c-147">It is not recommended tooset hello lower than 30 seconds.</span></span>|
  |<span data-ttu-id="7403c-148">**Tiempo de espera (segundos)**</span><span class="sxs-lookup"><span data-stu-id="7403c-148">**Timeout (secs)**</span></span>|<span data-ttu-id="7403c-149">30</span><span class="sxs-lookup"><span data-stu-id="7403c-149">30</span></span>|<span data-ttu-id="7403c-150">cantidad de Hola de sondeo de Hola de tiempo espera antes de expirar. Hola tiempo de espera intervalo necesidades toobe lo suficientemente alto como para que se puede realizar una llamada http página de estado de back-end de hello tooensure está disponible.</span><span class="sxs-lookup"><span data-stu-id="7403c-150">hello amount of time hello probe waits before timing out. hello timeout interval needs toobe high enough that an http call can be made tooensure hello backend health page is available.</span></span>|
  |<span data-ttu-id="7403c-151">**Umbral incorrecto**</span><span class="sxs-lookup"><span data-stu-id="7403c-151">**Unhealthy threshold**</span></span>|<span data-ttu-id="7403c-152">3</span><span class="sxs-lookup"><span data-stu-id="7403c-152">3</span></span>|<span data-ttu-id="7403c-153">Número de error toobe intentos considera incorrecto.</span><span class="sxs-lookup"><span data-stu-id="7403c-153">Number of failed attempts toobe considered unhealthy.</span></span> <span data-ttu-id="7403c-154">Un umbral de 0 significa que si se produce un error en una comprobación de mantenimiento Hola back-end se determina de forma negativa inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="7403c-154">A threshold of 0 means that if a health check fails hello back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="7403c-155">nombre de host de Hello no es Hola igual que el nombre del servidor.</span><span class="sxs-lookup"><span data-stu-id="7403c-155">hello host name is not hello same as server name.</span></span> <span data-ttu-id="7403c-156">Este valor es nombre Hola Hola virtual del host de ejecutando en servidor de aplicaciones de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-156">This value is hello name of hello virtual host running on hello application server.</span></span> <span data-ttu-id="7403c-157">sondeo de Hola se envía toohttp: / /(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="7403c-157">hello probe is sent toohttp://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-toohello-gateway"></a><span data-ttu-id="7403c-158">Agregar puerta de enlace de sondeo toohello</span><span class="sxs-lookup"><span data-stu-id="7403c-158">Add probe toohello gateway</span></span>

<span data-ttu-id="7403c-159">Ahora que hello sondeo se ha creado, es el tiempo tooadd se toohello puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="7403c-159">Now that hello probe has been created, it is time tooadd it toohello gateway.</span></span> <span data-ttu-id="7403c-160">Configuración de sondeo se establece en la configuración de http de back-end de Hola de puerta de enlace de aplicación Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-160">Probe settings are set on hello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="7403c-161">Haga clic en **configuración HTTP** en puerta de enlace de aplicaciones de hello, toobring una hoja de configuración de hello, haga clic en hello back-end http configuración actual aparece en la ventana hello.</span><span class="sxs-lookup"><span data-stu-id="7403c-161">Click **HTTP settings** on hello application gateway, toobring up hello configuration blade click hello current backend http settings listed in hello window.</span></span>

  ![ventana de configuración de https][2]

1. <span data-ttu-id="7403c-163">En hello **appGatewayBackEndHttpSettings** hoja de configuración, verificación hello **sondeo personalizado de uso** casilla y elija sondeo Hola creado en hello [sondeo de hello Create](#createprobe) sección en hello **sondeo personalizado** desplegable...</span><span class="sxs-lookup"><span data-stu-id="7403c-163">On hello **appGatewayBackEndHttpSettings** settings blade, check hello **Use custom probe** checkbox and choose hello probe created in hello [Create hello probe](#createprobe) section on hello **Custom probe** drop-down..</span></span>
<span data-ttu-id="7403c-164">Cuando haya terminado, haga clic en **guardar** y se aplican los valores de hello.</span><span class="sxs-lookup"><span data-stu-id="7403c-164">When complete, click **Save** and hello settings are applied.</span></span>

<span data-ttu-id="7403c-165">sondeo de Hello predeterminado comprueba Hola predeterminado toohello aplicación web.</span><span class="sxs-lookup"><span data-stu-id="7403c-165">hello default probe checks hello default access toohello web application.</span></span> <span data-ttu-id="7403c-166">Ahora que se ha creado un sondeo personalizado, puerta de enlace de aplicaciones de hello usa Hola definido por la ruta de acceso personalizada toomonitor mantenimiento para servidores de back-end de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-166">Now that a custom probe has been created, hello application gateway uses hello custom path defined toomonitor health for hello backend servers.</span></span> <span data-ttu-id="7403c-167">En función de criterios de Hola que se definió, puerta de enlace de aplicaciones de hello comprueba Hola ruta especificada en el sondeo de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-167">Based on hello criteria that was defined, hello application gateway checks hello path specified in hello probe.</span></span> <span data-ttu-id="7403c-168">Si Hola llamar toohost:Port / ruta de acceso no devuelve HTTP 200-399 estado respuesta, servidor Hola se saca de rotación tras alcanzar el umbral de estado incorrecto de Hola.</span><span class="sxs-lookup"><span data-stu-id="7403c-168">If hello call toohost:Port/path does not return an HTTP 200-399 status response, hello server is taken out of rotation after hello unhealthy threshold is reached.</span></span> <span data-ttu-id="7403c-169">Probing continúa en hello instancia incorrecto toodetermine cuando vuelve a correcto.</span><span class="sxs-lookup"><span data-stu-id="7403c-169">Probing continues on hello unhealthy instance toodetermine when it becomes healthy again.</span></span> <span data-ttu-id="7403c-170">Una vez instancia Hola se agrega el grupo de servidores de back-toohealthy, tráfico comienza flujo tooit nuevo y sondeo toohello instancia continúa en el intervalo especificado de usuario como normal.</span><span class="sxs-lookup"><span data-stu-id="7403c-170">Once hello instance is added back toohealthy server pool, traffic begins flowing tooit again and probing toohello instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7403c-171">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="7403c-171">Next steps</span></span>

<span data-ttu-id="7403c-172">toolearn tooconfigure la descarga de SSL con la puerta de enlace de aplicaciones de Azure, vea [configurar la descarga de SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="7403c-172">toolearn how tooconfigure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png


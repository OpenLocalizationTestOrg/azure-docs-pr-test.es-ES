---
title: "Creación o actualización de una instancia de Azure Application Gateway con el firewall de aplicaciones web | Microsoft Docs"
description: Aprenda a crear una puerta de enlace de aplicaciones con el firewall de aplicaciones web mediante el portal.
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: b561a210-ed99-4ab4-be06-b49215e3255a
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: gwallace
ms.openlocfilehash: 650f26d19615d27a94f3947aad7b7904b6c1fabc
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/18/2017
---
# <a name="create-an-application-gateway-with-web-application-firewall-by-using-the-portal"></a><span data-ttu-id="085e5-103">Creación de una puerta de enlace de aplicaciones con el firewall de aplicaciones web mediante el portal</span><span class="sxs-lookup"><span data-stu-id="085e5-103">Create an application gateway with web application firewall by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="085e5-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="085e5-104">Azure portal</span></span>](application-gateway-web-application-firewall-portal.md)
> * [<span data-ttu-id="085e5-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="085e5-105">PowerShell</span></span>](application-gateway-web-application-firewall-powershell.md)
> * [<span data-ttu-id="085e5-106">CLI de Azure</span><span class="sxs-lookup"><span data-stu-id="085e5-106">Azure CLI</span></span>](application-gateway-web-application-firewall-cli.md)

<span data-ttu-id="085e5-107">Aprenda a crear una puerta de enlace de aplicaciones web habilitada para un firewall de aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="085e5-107">Learn how to create a web application firewall enabled application gateway.</span></span>

<span data-ttu-id="085e5-108">El firewall de aplicaciones web (WAF) de Azure Application Gateway protege las aplicaciones web de ataques web comunes, como inyección de código SQL, ataques de scripts entre sitios y secuestros de sesiones.</span><span class="sxs-lookup"><span data-stu-id="085e5-108">The web application firewall (WAF) in Azure Application Gateway protects web applications from common web-based attacks like SQL injection, cross-site scripting attacks, and session hijacks.</span></span> <span data-ttu-id="085e5-109">La aplicación web protege de muchas de las vulnerabilidades web de OWASP Top 10.</span><span class="sxs-lookup"><span data-stu-id="085e5-109">Web application protects against many of the OWASP top 10 common web vulnerabilities.</span></span>

## <a name="scenarios"></a><span data-ttu-id="085e5-110">Escenarios</span><span class="sxs-lookup"><span data-stu-id="085e5-110">Scenarios</span></span>

<span data-ttu-id="085e5-111">En este artículo, hay dos escenarios:</span><span class="sxs-lookup"><span data-stu-id="085e5-111">In this article there are two scenarios:</span></span>

<span data-ttu-id="085e5-112">En el primer escenario, aprenderá a [crear una puerta de enlace de aplicaciones con el firewall de aplicaciones web](#create-an-application-gateway-with-web-application-firewall)</span><span class="sxs-lookup"><span data-stu-id="085e5-112">In the first scenario, you learn to [create an application gateway with web application firewall](#create-an-application-gateway-with-web-application-firewall)</span></span>

<span data-ttu-id="085e5-113">En el segundo escenario, aprenderá a [agregar el firewall de aplicaciones web a una puerta de enlace de aplicaciones existente](#add-web-application-firewall-to-an-existing-application-gateway).</span><span class="sxs-lookup"><span data-stu-id="085e5-113">In the second scenario, you learn to [add web application firewall to an existing application gateway](#add-web-application-firewall-to-an-existing-application-gateway).</span></span>

![Escenario de ejemplo][scenario]

> [!NOTE]
> <span data-ttu-id="085e5-115">La configuración adicional de la puerta de enlace de aplicaciones, incluidos los sondeos personalizados sobre el estado, las direcciones del grupo de back-end y las reglas se realiza después de que se configura la puerta de enlace de aplicaciones, no durante la implementación inicial.</span><span class="sxs-lookup"><span data-stu-id="085e5-115">Additional configuration of the application gateway, including custom health probes, backend pool addresses, and additional rules are configured after the application gateway is configured and not during initial deployment.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="085e5-116">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="085e5-116">Before you begin</span></span>

<span data-ttu-id="085e5-117">Azure Application Gateway requiere su propia subred.</span><span class="sxs-lookup"><span data-stu-id="085e5-117">Azure Application Gateway requires its own subnet.</span></span> <span data-ttu-id="085e5-118">Al crear una red virtual, asegúrese de dejar suficiente espacio de direcciones para que tenga varias subredes.</span><span class="sxs-lookup"><span data-stu-id="085e5-118">When creating a virtual network, ensure that you leave enough address space to have multiple subnets.</span></span> <span data-ttu-id="085e5-119">Una vez que se implementa una puerta de enlace de aplicaciones en una subred adicional solo se pueden agregar a ella puertas de enlace de aplicaciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="085e5-119">Once you deploy an application gateway to a subnet, only additional application gateways are able to be added to the subnet.</span></span>

##<span data-ttu-id="085e5-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a> Adición del firewall de aplicaciones web a una puerta de enlace de aplicaciones existente</span><span class="sxs-lookup"><span data-stu-id="085e5-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a> Add web application firewall to an existing application gateway</span></span>

<span data-ttu-id="085e5-121">En este ejemplo se actualiza una puerta de enlace de aplicaciones existente para admitir el firewall de aplicaciones web en modo de prevención.</span><span class="sxs-lookup"><span data-stu-id="085e5-121">This example updates an existing application gateway to support web application firewall in prevention mode.</span></span>

1. <span data-ttu-id="085e5-122">En el panel **Favoritos** de Azure Portal, haga clic en **Todos los recursos**.</span><span class="sxs-lookup"><span data-stu-id="085e5-122">In the Azure portal **Favorites** pane, click **All resources**.</span></span> <span data-ttu-id="085e5-123">Haga clic en la puerta de enlace de aplicaciones existente en la hoja **Todos los recursos**.</span><span class="sxs-lookup"><span data-stu-id="085e5-123">Click the existing Application Gateway in the **All resources** blade.</span></span> <span data-ttu-id="085e5-124">Si la suscripción que seleccionó ya tiene varios recursos en ella, puede escribir el nombre en **Filtrar por nombre...**</span><span class="sxs-lookup"><span data-stu-id="085e5-124">If the subscription you selected already has several resources in it, you can enter the name in the **Filter by name…**</span></span> <span data-ttu-id="085e5-125">para acceder fácilmente a la zona DNS.</span><span class="sxs-lookup"><span data-stu-id="085e5-125">box to easily access the DNS zone.</span></span>

   ![Creación de una puerta de enlace de aplicaciones][1]

1. <span data-ttu-id="085e5-127">Haga clic en **Firewall de aplicaciones web** y actualice la configuración de la puerta de enlace de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="085e5-127">Click **Web application firewall** and update the application gateway settings.</span></span> <span data-ttu-id="085e5-128">Cuando haya terminado, haga clic en **Guardar**</span><span class="sxs-lookup"><span data-stu-id="085e5-128">When complete click **Save**</span></span>

    <span data-ttu-id="085e5-129">La configuración para actualizar una puerta de enlace de aplicaciones existente para admitir el firewall de aplicaciones web es:</span><span class="sxs-lookup"><span data-stu-id="085e5-129">The settings to update an existing application gateway to support web application firewall are:</span></span>

   | <span data-ttu-id="085e5-130">**Configuración**</span><span class="sxs-lookup"><span data-stu-id="085e5-130">**Setting**</span></span> | <span data-ttu-id="085e5-131">**Valor**</span><span class="sxs-lookup"><span data-stu-id="085e5-131">**Value**</span></span> | <span data-ttu-id="085e5-132">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="085e5-132">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="085e5-133">**Actualizar al nivel WAF**</span><span class="sxs-lookup"><span data-stu-id="085e5-133">**Upgrade to WAF Tier**</span></span>| <span data-ttu-id="085e5-134">Activado</span><span class="sxs-lookup"><span data-stu-id="085e5-134">Checked</span></span> | <span data-ttu-id="085e5-135">Esta opción establece el nivel de la puerta de enlace de aplicaciones al nivel WAFS.</span><span class="sxs-lookup"><span data-stu-id="085e5-135">This sets the tier of the application gateway to the WAF tier.</span></span>|
   |<span data-ttu-id="085e5-136">**Estado de Firewall**</span><span class="sxs-lookup"><span data-stu-id="085e5-136">**Firewall status**</span></span>| <span data-ttu-id="085e5-137">habilitado</span><span class="sxs-lookup"><span data-stu-id="085e5-137">Enabled</span></span> | <span data-ttu-id="085e5-138">Esta configuración habilita el firewall en el WAF.</span><span class="sxs-lookup"><span data-stu-id="085e5-138">This setting enables the firewall on the WAF.</span></span>|
   |<span data-ttu-id="085e5-139">**Modo de firewall**</span><span class="sxs-lookup"><span data-stu-id="085e5-139">**Firewall mode**</span></span> | <span data-ttu-id="085e5-140">Prevención</span><span class="sxs-lookup"><span data-stu-id="085e5-140">Prevention</span></span> | <span data-ttu-id="085e5-141">Esta configuración hace referencia a cómo el firewall de aplicaciones web se ocupa del tráfico malintencionado.</span><span class="sxs-lookup"><span data-stu-id="085e5-141">This setting is how web application firewall deals with malicious traffic.</span></span> <span data-ttu-id="085e5-142">El modo **Detección** solo registra los eventos, mientras que el modo **Prevención** registra los eventos y detiene el tráfico malintencionado.</span><span class="sxs-lookup"><span data-stu-id="085e5-142">**Detection** mode only logs the events, where **Prevention** mode logs the events and stops the malicious traffic.</span></span>|
   |<span data-ttu-id="085e5-143">**Conjunto de reglas**</span><span class="sxs-lookup"><span data-stu-id="085e5-143">**Rule set**</span></span>|<span data-ttu-id="085e5-144">3.0</span><span class="sxs-lookup"><span data-stu-id="085e5-144">3.0</span></span>|<span data-ttu-id="085e5-145">Esta configuración determina el [conjunto de reglas básico](application-gateway-web-application-firewall-overview.md#core-rule-sets) que se usa para proteger a los miembros del grupo de back-end.</span><span class="sxs-lookup"><span data-stu-id="085e5-145">This setting determines the [core rule set](application-gateway-web-application-firewall-overview.md#core-rule-sets) that is used to protect the backend pool members.</span></span>|
   |<span data-ttu-id="085e5-146">**Configurar reglas deshabilitadas**</span><span class="sxs-lookup"><span data-stu-id="085e5-146">**Configure disabled rules**</span></span>|<span data-ttu-id="085e5-147">Varía</span><span class="sxs-lookup"><span data-stu-id="085e5-147">varies</span></span>|<span data-ttu-id="085e5-148">Para evitar posibles falsos positivos, esta configuración le permite deshabilitar ciertas [reglas y grupos de reglas](application-gateway-crs-rulegroups-rules.md).</span><span class="sxs-lookup"><span data-stu-id="085e5-148">To prevent possible false positives, this setting allows you to disable certain [rules and rule groups](application-gateway-crs-rulegroups-rules.md).</span></span>|

    >[!NOTE]
    > <span data-ttu-id="085e5-149">Al actualizar una puerta de enlace de aplicaciones existente para la SKU de WAF, cambia el tamaño de la SKU a **medio**.</span><span class="sxs-lookup"><span data-stu-id="085e5-149">When upgrading an existing application gateway to the WAF SKU, the SKU size changes to **medium**.</span></span> <span data-ttu-id="085e5-150">Este cambio se puede reconfigurar una vez finalizada la configuración.</span><span class="sxs-lookup"><span data-stu-id="085e5-150">This can be reconfigured after configuration is complete.</span></span>

    ![hoja que muestra configuración básica][2-1]

    > [!NOTE]
    > <span data-ttu-id="085e5-152">Para ver los registros del firewall de aplicaciones web, se deben habilitar los diagnósticos y se debe seleccionar ApplicationGatewayFirewallLog.</span><span class="sxs-lookup"><span data-stu-id="085e5-152">To view web application firewall logs, diagnostics must be enabled and ApplicationGatewayFirewallLog selected.</span></span> <span data-ttu-id="085e5-153">Para las pruebas se puede elegir 1 en Número de instancias.</span><span class="sxs-lookup"><span data-stu-id="085e5-153">An instance count of 1 can be chosen for testing purposes.</span></span> <span data-ttu-id="085e5-154">Es importante saber que el SLA no cubre ningún número de instancias que esté por debajo de las dos instancias y, por consiguiente, no se recomienda.</span><span class="sxs-lookup"><span data-stu-id="085e5-154">It is important to know that any instance count under two instances is not covered by the SLA and are therefore not recommended.</span></span> <span data-ttu-id="085e5-155">Las puertas de enlace pequeñas no están disponibles cuando se usa el firewall de aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="085e5-155">Small gateways are not available when using web application firewall.</span></span>

## <a name="create-an-application-gateway-with-web-application-firewall"></a><span data-ttu-id="085e5-156">crear una puerta de enlace de aplicaciones con el firewall de aplicaciones web</span><span class="sxs-lookup"><span data-stu-id="085e5-156">Create an application gateway with web application firewall</span></span>

<span data-ttu-id="085e5-157">En este escenario:</span><span class="sxs-lookup"><span data-stu-id="085e5-157">This scenario will:</span></span>

* <span data-ttu-id="085e5-158">Creará una puerta de enlace de aplicaciones de firewall de aplicaciones web con dos instancias.</span><span class="sxs-lookup"><span data-stu-id="085e5-158">Create a medium web application firewall application gateway with two instances.</span></span>
* <span data-ttu-id="085e5-159">Creará una red virtual denominada AdatumAppGatewayVNET con un bloque CIDR reservado de 10.0.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="085e5-159">Create a virtual network named AdatumAppGatewayVNET with a reserved CIDR block of 10.0.0.0/16.</span></span>
* <span data-ttu-id="085e5-160">Creará una subred denominada Appgatewaysubnet que usa 10.0.0.0/28 como bloque CIDR.</span><span class="sxs-lookup"><span data-stu-id="085e5-160">Create a subnet called Appgatewaysubnet that uses 10.0.0.0/28 as its CIDR block.</span></span>
* <span data-ttu-id="085e5-161">Configurará un certificado para la descarga SSL.</span><span class="sxs-lookup"><span data-stu-id="085e5-161">Configure a certificate for SSL offload.</span></span>

1. <span data-ttu-id="085e5-162">Inicie sesión en [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="085e5-162">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="085e5-163">Si aún no tiene cuenta, puede registrarse para obtener [una evaluación gratuita durante un mes](https://azure.microsoft.com/free).</span><span class="sxs-lookup"><span data-stu-id="085e5-163">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>
1. <span data-ttu-id="085e5-164">En el panel Favoritos del portal, haga clic en **Nuevo**.</span><span class="sxs-lookup"><span data-stu-id="085e5-164">In the Favorites pane of the portal, click **New**</span></span>
1. <span data-ttu-id="085e5-165">En la hoja **Nuevo**, haga clic en **Redes**.</span><span class="sxs-lookup"><span data-stu-id="085e5-165">In the **New** blade, click **Networking**.</span></span> <span data-ttu-id="085e5-166">En la hoja **Redes**, haga clic en **Application Gateway**, como se muestra en la siguiente imagen:</span><span class="sxs-lookup"><span data-stu-id="085e5-166">In the **Networking** blade, click **Application Gateway**, as shown in the following image:</span></span>
1. <span data-ttu-id="085e5-167">Navegue a Azure Portal, haga clic en **Nuevo** > **Redes** > **Application Gateway**</span><span class="sxs-lookup"><span data-stu-id="085e5-167">Navigate to the Azure portal, click **New** > **Networking** > **Application Gateway**</span></span>

    ![Creación de una puerta de enlace de aplicaciones][1]

1. <span data-ttu-id="085e5-169">En la hoja **Datos básicos** que aparece, escriba los valores siguientes y haga clic en **Aceptar**:</span><span class="sxs-lookup"><span data-stu-id="085e5-169">In the **Basics** blade that appears, enter the following values, then click **OK**:</span></span>

   | <span data-ttu-id="085e5-170">**Configuración**</span><span class="sxs-lookup"><span data-stu-id="085e5-170">**Setting**</span></span> | <span data-ttu-id="085e5-171">**Valor**</span><span class="sxs-lookup"><span data-stu-id="085e5-171">**Value**</span></span> | <span data-ttu-id="085e5-172">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="085e5-172">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="085e5-173">**Name**</span><span class="sxs-lookup"><span data-stu-id="085e5-173">**Name**</span></span>|<span data-ttu-id="085e5-174">AdatumAppGateway</span><span class="sxs-lookup"><span data-stu-id="085e5-174">AdatumAppGateway</span></span>|<span data-ttu-id="085e5-175">Nombre de la puerta de enlace de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="085e5-175">The name of the application gateway</span></span>|
   |<span data-ttu-id="085e5-176">**Nivel**</span><span class="sxs-lookup"><span data-stu-id="085e5-176">**Tier**</span></span>|<span data-ttu-id="085e5-177">WAF</span><span class="sxs-lookup"><span data-stu-id="085e5-177">WAF</span></span>|<span data-ttu-id="085e5-178">Los valores disponibles son Estándar y WAF.</span><span class="sxs-lookup"><span data-stu-id="085e5-178">Available values are Standard and WAF.</span></span> <span data-ttu-id="085e5-179">Visite [Firewall de aplicaciones web](application-gateway-web-application-firewall-overview.md) para obtener más información sobre WAFS.</span><span class="sxs-lookup"><span data-stu-id="085e5-179">Visit [web application firewall](application-gateway-web-application-firewall-overview.md) to learn more about WAF.</span></span>|
   |<span data-ttu-id="085e5-180">**Tamaño de la SKU**</span><span class="sxs-lookup"><span data-stu-id="085e5-180">**SKU Size**</span></span>|<span data-ttu-id="085e5-181">Mediano</span><span class="sxs-lookup"><span data-stu-id="085e5-181">Medium</span></span>|<span data-ttu-id="085e5-182">Las opciones al elegir el nivel Estándar son pequeño, mediano y grande.</span><span class="sxs-lookup"><span data-stu-id="085e5-182">Choices when choosing Standard tier are Small, Medium, and Large.</span></span> <span data-ttu-id="085e5-183">Al elegir el nivel de WAF, las opciones solo son mediano y grande.</span><span class="sxs-lookup"><span data-stu-id="085e5-183">When choosing WAF tier, options are Medium and Large only.</span></span>|
   |<span data-ttu-id="085e5-184">**Recuento de instancias**</span><span class="sxs-lookup"><span data-stu-id="085e5-184">**Instance count**</span></span>|<span data-ttu-id="085e5-185">2</span><span class="sxs-lookup"><span data-stu-id="085e5-185">2</span></span>|<span data-ttu-id="085e5-186">Número de instancias de la puerta de enlace de aplicaciones para alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="085e5-186">Number of instances of the application gateway for high availability.</span></span> <span data-ttu-id="085e5-187">Los recuentos de instancias de 1 solo deben usarse para fines de pruebas.</span><span class="sxs-lookup"><span data-stu-id="085e5-187">Instance counts of 1 should only be used for testing purposes.</span></span>|
   |<span data-ttu-id="085e5-188">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="085e5-188">**Subscription**</span></span>|<span data-ttu-id="085e5-189">[Su suscripción]</span><span class="sxs-lookup"><span data-stu-id="085e5-189">[Your subscription]</span></span>|<span data-ttu-id="085e5-190">Seleccione una suscripción donde se va a crear la puerta de enlace de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="085e5-190">Select a subscription to create the application gateway in.</span></span>|
   |<span data-ttu-id="085e5-191">**Grupos de recursos**</span><span class="sxs-lookup"><span data-stu-id="085e5-191">**Resource group**</span></span>|<span data-ttu-id="085e5-192">**Crear nuevo:** AdatumAppGatewayRG</span><span class="sxs-lookup"><span data-stu-id="085e5-192">**Create new:** AdatumAppGatewayRG</span></span>|<span data-ttu-id="085e5-193">Cree un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="085e5-193">Create a resource group.</span></span> <span data-ttu-id="085e5-194">El nombre del grupo de recursos debe ser único dentro de la suscripción seleccionada.</span><span class="sxs-lookup"><span data-stu-id="085e5-194">The resource group name must be unique within the subscription you selected.</span></span> <span data-ttu-id="085e5-195">Para más información sobre los grupos de recursos, lea el artículo [Información general de Azure Resource Manager](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="085e5-195">To learn more about resource groups, read the [Resource Manager](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups) overview article.</span></span>|
   |<span data-ttu-id="085e5-196">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="085e5-196">**Location**</span></span>|<span data-ttu-id="085e5-197">Oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="085e5-197">West US</span></span>||

   ![hoja que muestra configuración básica][2-2]

1. <span data-ttu-id="085e5-199">En la hoja **Configuración** que aparece en **Red virtual**, haga clic en **Elegir una red virtual**.</span><span class="sxs-lookup"><span data-stu-id="085e5-199">In the **Settings** blade that appears under **Virtual network**, click **Choose a virtual network**.</span></span> <span data-ttu-id="085e5-200">Este paso abre la hoja **Elegir una red virtual**.</span><span class="sxs-lookup"><span data-stu-id="085e5-200">This step opens enter the **Choose virtual network** blade.</span></span>  <span data-ttu-id="085e5-201">Haga clic en **Crear nuevo** para abrir la hoja **Crear red virtual**.</span><span class="sxs-lookup"><span data-stu-id="085e5-201">Click **Create new** to open the **Create virtual network** blade.</span></span>

   ![Elegir una red virtual][2]

1. <span data-ttu-id="085e5-203">En la hoja **Crear red virtual**, escriba los valores siguientes y luego haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="085e5-203">On the **Create virtual network blade** enter the following values, then click **OK**.</span></span> <span data-ttu-id="085e5-204">Este paso cierra las hojas **Crear red virtual** y **Elegir una red virtual**.</span><span class="sxs-lookup"><span data-stu-id="085e5-204">This step closes the **Create virtual network** and **Choose virtual network** blades.</span></span> <span data-ttu-id="085e5-205">Además, en este paso se rellena el campo **Subred** en la hoja **Configuración** con la subred elegida.</span><span class="sxs-lookup"><span data-stu-id="085e5-205">This populates the **Subnet** field on the **Settings** blade with the subnet chosen.</span></span>

   |<span data-ttu-id="085e5-206">**Configuración**</span><span class="sxs-lookup"><span data-stu-id="085e5-206">**Setting**</span></span> | <span data-ttu-id="085e5-207">**Valor**</span><span class="sxs-lookup"><span data-stu-id="085e5-207">**Value**</span></span> | <span data-ttu-id="085e5-208">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="085e5-208">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="085e5-209">**Name**</span><span class="sxs-lookup"><span data-stu-id="085e5-209">**Name**</span></span>|<span data-ttu-id="085e5-210">AdatumAppGatewayVNET</span><span class="sxs-lookup"><span data-stu-id="085e5-210">AdatumAppGatewayVNET</span></span>|<span data-ttu-id="085e5-211">Nombre de la puerta de enlace de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="085e5-211">Name of the application gateway</span></span>|
   |<span data-ttu-id="085e5-212">**Espacio de direcciones**</span><span class="sxs-lookup"><span data-stu-id="085e5-212">**Address Space**</span></span>|<span data-ttu-id="085e5-213">10.0.0.0/16</span><span class="sxs-lookup"><span data-stu-id="085e5-213">10.0.0.0/16</span></span>| <span data-ttu-id="085e5-214">Este valor es el espacio de direcciones de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="085e5-214">This value is the address space for the virtual network</span></span>|
   |<span data-ttu-id="085e5-215">**Nombre de subred**</span><span class="sxs-lookup"><span data-stu-id="085e5-215">**Subnet name**</span></span>|<span data-ttu-id="085e5-216">AppGatewaySubnet</span><span class="sxs-lookup"><span data-stu-id="085e5-216">AppGatewaySubnet</span></span>|<span data-ttu-id="085e5-217">Nombre de la subred de la puerta de enlace de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="085e5-217">Name of the subnet for the application gateway</span></span>|
   |<span data-ttu-id="085e5-218">**Intervalo de direcciones de subred**</span><span class="sxs-lookup"><span data-stu-id="085e5-218">**Subnet address range**</span></span>|<span data-ttu-id="085e5-219">10.0.0.0/28</span><span class="sxs-lookup"><span data-stu-id="085e5-219">10.0.0.0/28</span></span> | <span data-ttu-id="085e5-220">Esta subred permite más subredes en la red virtual para miembros del grupo de back-end.</span><span class="sxs-lookup"><span data-stu-id="085e5-220">This subnet allows more additional subnets in the virtual network for backend pool members</span></span>|

1. <span data-ttu-id="085e5-221">En la hoja **Configuración** de **Configuración de IP de front-end**, seleccione **Pública** como el **Tipo de dirección IP**.</span><span class="sxs-lookup"><span data-stu-id="085e5-221">On the **Settings** blade under **Frontend IP configuration**, choose **Public** as the **IP address type**</span></span>

1. <span data-ttu-id="085e5-222">En la hoja **Configuración** de **Dirección IP pública**, haga clic en **Elegir una dirección IP pública** para abrir la hoja **Elegir una dirección IP pública** y luego haga clic en **Crear nuevo**.</span><span class="sxs-lookup"><span data-stu-id="085e5-222">On the **Settings** blade under **Public IP address**, click **Choose a public IP address**, this step opens the **Choose public IP address** blade, click **Create new**.</span></span>

   ![Elegir una dirección IP pública][3]

1. <span data-ttu-id="085e5-224">En la hoja **Crear dirección IP pública**, acepte el valor predeterminado y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="085e5-224">On the **Create public IP address** blade, accept the default value, and click **OK**.</span></span> <span data-ttu-id="085e5-225">De esta forma, se cierran las hojas **Elegir dirección IP pública** y **Crear dirección IP pública** y se rellena el campo **Dirección IP pública** con la dirección IP pública elegida.</span><span class="sxs-lookup"><span data-stu-id="085e5-225">This step closes the **Choose public IP address** blade, the **Create public IP address** blade, and populate **Public IP address** with the public IP address chosen.</span></span>

1. <span data-ttu-id="085e5-226">En la hoja **Configuración** en **Configuración de agente de escucha**, haga clic en **HTTP** en **Protocolo**.</span><span class="sxs-lookup"><span data-stu-id="085e5-226">On the **Settings** blade under **Listener configuration**, click **HTTP** under **Protocol**.</span></span> <span data-ttu-id="085e5-227">Para usar **https**, se requiere un certificado.</span><span class="sxs-lookup"><span data-stu-id="085e5-227">To use **https**, a certificate is required.</span></span> <span data-ttu-id="085e5-228">La clave privada del certificado es necesaria, por lo que es preciso proporcionar un .pfx exportado del certificado y la contraseña del archivo.</span><span class="sxs-lookup"><span data-stu-id="085e5-228">The private key of the certificate is needed so a .pfx export of the certificate needs to be provided and the password for the file.</span></span>

1. <span data-ttu-id="085e5-229">Configure los valores específicos de **WAF** .</span><span class="sxs-lookup"><span data-stu-id="085e5-229">Configure the **WAF** specific settings.</span></span>

   |<span data-ttu-id="085e5-230">**Configuración**</span><span class="sxs-lookup"><span data-stu-id="085e5-230">**Setting**</span></span> | <span data-ttu-id="085e5-231">**Valor**</span><span class="sxs-lookup"><span data-stu-id="085e5-231">**Value**</span></span> | <span data-ttu-id="085e5-232">**Detalles**</span><span class="sxs-lookup"><span data-stu-id="085e5-232">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="085e5-233">**Estado de Firewall**</span><span class="sxs-lookup"><span data-stu-id="085e5-233">**Firewall status**</span></span>| <span data-ttu-id="085e5-234">habilitado</span><span class="sxs-lookup"><span data-stu-id="085e5-234">Enabled</span></span>| <span data-ttu-id="085e5-235">Esta opción activa o desactiva WAF.</span><span class="sxs-lookup"><span data-stu-id="085e5-235">This setting turns WAF on or off.</span></span>|
   |<span data-ttu-id="085e5-236">**Modo de firewall**</span><span class="sxs-lookup"><span data-stu-id="085e5-236">**Firewall mode**</span></span> | <span data-ttu-id="085e5-237">Prevención</span><span class="sxs-lookup"><span data-stu-id="085e5-237">Prevention</span></span>| <span data-ttu-id="085e5-238">Esta configuración determina las acciones que realiza WAF sobre el tráfico malintencionado.</span><span class="sxs-lookup"><span data-stu-id="085e5-238">This setting determines the actions WAF takes on malicious traffic.</span></span> <span data-ttu-id="085e5-239">Si se elige **Detección** , solo se registra el tráfico.</span><span class="sxs-lookup"><span data-stu-id="085e5-239">If **Detection** is chosen, traffic is only logged.</span></span>  <span data-ttu-id="085e5-240">Si se elige **Prevención** , el tráfico se registra y se detiene con una respuesta de error 403 no autorizado.</span><span class="sxs-lookup"><span data-stu-id="085e5-240">If **Prevention** is chosen, traffic is logged and stopped with a 403 Unauthorized response.</span></span>|


1. <span data-ttu-id="085e5-241">Revise la página Resumen y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="085e5-241">Review the Summary page and click **OK**.</span></span>  <span data-ttu-id="085e5-242">La puerta de enlace de aplicaciones se pone en cola y se crea.</span><span class="sxs-lookup"><span data-stu-id="085e5-242">Now the application gateway is queued up and created.</span></span>

1. <span data-ttu-id="085e5-243">Una vez creada la puerta de enlace de aplicaciones, navegue hasta ella en el portal para continuar con su configuración.</span><span class="sxs-lookup"><span data-stu-id="085e5-243">Once the application gateway has been created, navigate to it in the portal to continue configuration of the application gateway.</span></span>

    ![Vista de recursos de Application Gateway][10]

<span data-ttu-id="085e5-245">Estos pasos permiten crear una puerta de enlace de aplicaciones básica con la configuración predeterminada para el agente de escucha, el grupo de back-end, la configuración de http de back-end y las reglas.</span><span class="sxs-lookup"><span data-stu-id="085e5-245">These steps create a basic application gateway with default settings for the listener, backend pool, backend http settings, and rules.</span></span> <span data-ttu-id="085e5-246">Esta configuración se puede modificar para adaptarse a la implementación una vez que el aprovisionamiento sea correcto</span><span class="sxs-lookup"><span data-stu-id="085e5-246">You can modify these settings to suit your deployment once the provisioning is successful</span></span>

> [!NOTE]
> <span data-ttu-id="085e5-247">Las puertas de enlace de la aplicación creadas con la configuración de firewall de aplicación web básica se configuran con CRS 3.0 para protección.</span><span class="sxs-lookup"><span data-stu-id="085e5-247">Application gateways created with the basic web application firewall configuration are configured with CRS 3.0 for protections.</span></span>

## <a name="next-steps"></a><span data-ttu-id="085e5-248">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="085e5-248">Next steps</span></span>

<span data-ttu-id="085e5-249">A continuación, puede aprender a configurar un alias de dominio personalizado para la [dirección IP pública](../dns/dns-custom-domain.md#public-ip-address) con Azure DNS u otro proveedor DNS.</span><span class="sxs-lookup"><span data-stu-id="085e5-249">Next, you can learn how to configure a custom domain alias for the [public IP address](../dns/dns-custom-domain.md#public-ip-address) using Azure DNS or another DNS provider.</span></span>

<span data-ttu-id="085e5-250">Aprenda a configurar el registro de diagnóstico para registrar los eventos que se detectan o impiden con el firewall de aplicaciones web en [Diagnósticos de Application Gateway](application-gateway-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="085e5-250">Learn how to configure diagnostic logging, to log the events that are detected or prevented with web application firewall by visiting [Application Gateway Diagnostics](application-gateway-diagnostics.md)</span></span>

<span data-ttu-id="085e5-251">Para aprender a crear sondeos de estado personalizado, visite [Create a custom probe for Application Gateway by using the portal](application-gateway-create-probe-portal.md)</span><span class="sxs-lookup"><span data-stu-id="085e5-251">Learn how to create custom health probes by visiting [Create a custom health probe](application-gateway-create-probe-portal.md)</span></span>

<span data-ttu-id="085e5-252">Para aprender a configurar la descarga de SSL y eliminar la cara descripción de SSL de los servidores web, visite [Configuración de una puerta de enlace de aplicaciones para la descarga SSL mediante Azure Resource Manager](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="085e5-252">Learn how to configure SSL Offloading and take the costly SSL decryption off your web servers by visiting [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

<!--Image references-->
[1]: ./media/application-gateway-web-application-firewall-portal/figure1.png
[2]: ./media/application-gateway-web-application-firewall-portal/figure2.png
[2-1]: ./media/application-gateway-web-application-firewall-portal/figure2-1.png
[2-2]: ./media/application-gateway-web-application-firewall-portal/figure2-2.png
[3]: ./media/application-gateway-web-application-firewall-portal/figure3.png
[10]: ./media/application-gateway-web-application-firewall-portal/figure10.png
[scenario]: ./media/application-gateway-web-application-firewall-portal/scenario.png

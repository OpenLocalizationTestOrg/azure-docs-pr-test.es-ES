---
title: aaaDesign Azure plantillas con soluciones complejas | Documentos de Microsoft
description: "Muestra los procedimientos recomendados para diseñar plantillas de Azure Resource Manager para escenarios complejos"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="edb7a-103">Diseño de patrones para plantillas de Azure Resource Manager cuando implementa soluciones complejas</span><span class="sxs-lookup"><span data-stu-id="edb7a-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="edb7a-104">Con un enfoque flexible basado en plantillas de Azure Resource Manager, puede implementar topologías complejas de forma rápida y coherente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="edb7a-105">Puede adaptar estas implementaciones fácilmente como variantes de tooaccommodate para escenarios de valores atípicos o clientes o core evolucionan ofertas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="edb7a-106">Este tema forma parte de un artículo más extenso.</span><span class="sxs-lookup"><span data-stu-id="edb7a-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="edb7a-107">Hola tooread completa papel, descargue [clase Azure recursos el Administrador de plantillas de consideraciones y prácticas comprobadas](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="edb7a-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="edb7a-108">Las plantillas combinan ventajas Hola de hello subyacente Azure Resource Manager con capacidad de adaptación de Hola y mejorar la legibilidad de JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="edb7a-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="edb7a-109">El uso de plantillas le permite:</span><span class="sxs-lookup"><span data-stu-id="edb7a-109">Using templates, you can:</span></span>

* <span data-ttu-id="edb7a-110">Implementar topologías y sus cargas de trabajo de forma coherente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="edb7a-111">Administrar juntos todos los recursos de una aplicación mediante grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="edb7a-112">Aplicar servicios, grupos y toousers de acceso basado en roles (RBAC) control toogrant acceso adecuado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="edb7a-113">Usar tareas de toostreamline asociaciones etiquetado como paquetes acumulativos de facturación.</span><span class="sxs-lookup"><span data-stu-id="edb7a-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="edb7a-114">Este artículo proporciona información detallada sobre escenarios de consumo, arquitectura y patrones de implementación identificados durante nuestras sesiones de diseño e implementaciones de plantillas reales con los clientes del equipo de asesoría de clientes de Azure (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="edb7a-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="edb7a-115">Lejos de academic, estos métodos se ha comprobado prácticas informadas por desarrollo Hola de plantillas para el 12 de tecnologías de hello principales sistemas operativos basados en Linux, incluyendo: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, Enterprise DataStax con la tecnología Apache Casandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis y Nagios.</span><span class="sxs-lookup"><span data-stu-id="edb7a-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="edb7a-116">Este artículo comparte estos toohelp prácticas demostradas diseñar plantillas de Azure Resource Manager de clase mundial.</span><span class="sxs-lookup"><span data-stu-id="edb7a-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="edb7a-117">En nuestro trabajo con los clientes, hemos identificado varias experiencias de consumo de plantillas de Resource Manager en empresas, integradores de sistemas y proveedores de soluciones en la nube.</span><span class="sxs-lookup"><span data-stu-id="edb7a-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="edb7a-118">Hello secciones siguientes proporcionan información general de escenarios y patrones comunes para distintos tipos de clientes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="edb7a-119">Empresas e integradores de sistemas</span><span class="sxs-lookup"><span data-stu-id="edb7a-119">Enterprises and system integrators</span></span>
<span data-ttu-id="edb7a-120">En las grandes organizaciones, observamos normalmente dos consumidores de plantillas de Resource Manager: los equipos de desarrollo de software internos y los grupos de TI corporativos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="edb7a-121">Hemos observado que los escenarios de Hola para hello SIs asignan toohello escenarios para las empresas, Hola por lo que se aplican las mismas consideraciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="edb7a-122">Equipos de desarrollo de software internos</span><span class="sxs-lookup"><span data-stu-id="edb7a-122">Internal software development teams</span></span>
<span data-ttu-id="edb7a-123">Si su equipo desarrolla software toosupport su negocio, las plantillas proporcionan una manera fácil tooquickly implementar tecnologías para su uso en soluciones empresariales específicas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="edb7a-124">También puede utilizar plantillas toorapidly crear entornos de entrenamiento que permiten los conocimientos necesarios de toogain de los miembros de equipo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="edb7a-125">Puede utilizar plantillas como-es ampliar o combinarlos tooaccommodate sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="edb7a-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="edb7a-126">El uso de etiquetado dentro de las plantillas permite proporcionar un resumen de facturación con diversas vistas como equipo, proyecto, individuo y educación.</span><span class="sxs-lookup"><span data-stu-id="edb7a-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="edb7a-127">A menudo, las empresas desean toocreate los equipos de desarrollo de software una plantilla para la implementación coherente de una solución.</span><span class="sxs-lookup"><span data-stu-id="edb7a-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="edb7a-128">plantilla de Hello facilita las restricciones para que determinados elementos dentro de ese entorno permanecen fijas y no se puede invalidar.</span><span class="sxs-lookup"><span data-stu-id="edb7a-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="edb7a-129">Por ejemplo, un banco puede requerir un tooinclude plantilla RBAC por lo que un programador no puede revisar una solución de banca cuenta de almacenamiento personal de toosend datos tooa.</span><span class="sxs-lookup"><span data-stu-id="edb7a-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="edb7a-130">Grupos de TI corporativos</span><span class="sxs-lookup"><span data-stu-id="edb7a-130">Corporate IT</span></span>
<span data-ttu-id="edb7a-131">Las organizaciones de TI corporativa suelen usar plantillas para ofrecer capacidad en la nube y funcionalidades hospedadas en la nube.</span><span class="sxs-lookup"><span data-stu-id="edb7a-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="edb7a-132">Capacidad en la nube</span><span class="sxs-lookup"><span data-stu-id="edb7a-132">Cloud capacity</span></span>
<span data-ttu-id="edb7a-133">Es una manera común de corporativa TI grupos tooprovide capacidad de la nube para que los equipos con "tamaños de camiseta", que son estándar oferta tamaños como pequeñas, medianas y grandes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="edb7a-134">ofertas de Hello camiseta tamaño pueden mezclar distintos tipos de recursos y las cantidades y proporcionan un nivel de estandarización que hace posible toouse plantillas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="edb7a-135">plantillas de Hello ofrecen una capacidad de una manera coherente que aplica las directivas corporativas y usa las organizaciones tooconsuming de anulación de etiquetado tooprovide.</span><span class="sxs-lookup"><span data-stu-id="edb7a-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="edb7a-136">Por ejemplo, puede que necesite tooprovide desarrollo, prueba o entornos de producción dentro de qué Hola los equipos de desarrollo de software pueden implementar sus soluciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="edb7a-137">entorno de Hello tiene una topología de red predefinida y no se pueden cambiar elementos que Hola los equipos de desarrollo de software, como las reglas que rigen el acceso toohello internet y paquete inspección pública.</span><span class="sxs-lookup"><span data-stu-id="edb7a-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="edb7a-138">También puede tener funciones específicas de la organización para estos entornos con derechos de acceso para el entorno de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="edb7a-139">Funcionalidades hospedadas en la nube</span><span class="sxs-lookup"><span data-stu-id="edb7a-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="edb7a-140">Puede utilizar plantillas toosupport hospedada en la nube funciones, incluidos los paquetes de software individuales o compuestas ofertas que se ofrecen toointernal líneas de negocios.</span><span class="sxs-lookup"><span data-stu-id="edb7a-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="edb7a-141">Un ejemplo de una oferta compuesta sería el análisis como servicio: análisis, visualización y otras tecnologías, proporcionado en una configuración optimizada y conectada en una topología de red predefinida.</span><span class="sxs-lookup"><span data-stu-id="edb7a-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="edb7a-142">Capacidades hospedada en la nube se ven afectadas por hello consideraciones de seguridad y roles establecidas por la capacidad de la nube de hello oferta en que están integradas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="edb7a-143">Estas funcionalidades se ofrecen tal y como están o como un servicio administrado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="edb7a-144">Para este último de hello, son necesarios los roles de restricción de acceso tooenable acceso en el entorno de Hola para fines de administración.</span><span class="sxs-lookup"><span data-stu-id="edb7a-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="edb7a-145">Proveedores de servicios en la nube</span><span class="sxs-lookup"><span data-stu-id="edb7a-145">Cloud service vendors</span></span>
<span data-ttu-id="edb7a-146">Después de hablar toomany CSV, hemos identificado varios enfoques que puede realizar toodeploy servicios para sus clientes y los requisitos asociados.</span><span class="sxs-lookup"><span data-stu-id="edb7a-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="edb7a-147">Oferta hospeda por el CSV</span><span class="sxs-lookup"><span data-stu-id="edb7a-147">CSV-hosted offering</span></span>
<span data-ttu-id="edb7a-148">Si hospeda su oferta en su propia suscripción de Azure, dos son los enfoques de hospedaje más comunes: realizar una implementación distinta para cada cliente o implementar unidades de escalado que respalden una infraestructura compartida usada para todos los clientes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="edb7a-149">**Implementaciones distintas para cada cliente.**</span><span class="sxs-lookup"><span data-stu-id="edb7a-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="edb7a-150">Las implementaciones distintas por cliente requieren topologías fijas de diferentes configuraciones conocidas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="edb7a-151">Dichas implementaciones pueden tener diferentes tamaños de máquinas virtuales, un número variable de nodos y distintas cantidades de almacenamiento asociado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="edb7a-152">El etiquetado de las implementaciones se usa en el resumen de facturación de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="edb7a-153">RBAC puede ser habilitado tooallow tooaspects de acceso de los clientes de su entorno de nube.</span><span class="sxs-lookup"><span data-stu-id="edb7a-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="edb7a-154">**Unidades de escalado en entornos multiempresa compartidos.**</span><span class="sxs-lookup"><span data-stu-id="edb7a-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="edb7a-155">Una plantilla puede representar una unidad de escalado en entornos multiempresa.</span><span class="sxs-lookup"><span data-stu-id="edb7a-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="edb7a-156">Hola en este caso, la misma infraestructura es toosupport usado todos los clientes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="edb7a-157">las implementaciones de Hello representan un grupo de recursos que ofrecen un nivel de capacidad para hello hospedada que ofrece, como el número de usuarios y el número de transacciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="edb7a-158">Estas unidades de escalado se aumentan o disminuyen según exija la demanda.</span><span class="sxs-lookup"><span data-stu-id="edb7a-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="edb7a-159">Oferta de CSV insertada en la suscripción del cliente</span><span class="sxs-lookup"><span data-stu-id="edb7a-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="edb7a-160">Puede que desee toodeploy el software en las suscripciones poseídas por los clientes finales.</span><span class="sxs-lookup"><span data-stu-id="edb7a-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="edb7a-161">Puede utilizar distintas implementaciones de toodeploy de plantillas en la cuenta de Azure de un cliente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="edb7a-162">Estas implementaciones utilizan RBAC para que pueda actualizar y administrar la implementación de hello dentro de la cuenta del cliente de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="edb7a-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="edb7a-163">Azure Marketplace</span></span>
<span data-ttu-id="edb7a-164">tooadvertise y vender sus ofertas a través de un mercado, como Azure Marketplace, es posible desarrollar plantillas toodeliver distintos tipos de implementaciones que se ejecutan en la cuenta de Azure de un cliente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="edb7a-165">Estas distintas implementaciones pueden describirse normalmente como una talla de camiseta (pequeña, mediana, grande), el tipo de producto/público (comunidad, desarrollador, empresa) o el tipo de característica (básica, alta disponibilidad).</span><span class="sxs-lookup"><span data-stu-id="edb7a-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="edb7a-166">En algunos casos, estos tipos permiten toospecify determinados atributos de implementación de hello, como tipo de máquina virtual o el número de discos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="edb7a-167">Proyectos de software de código abierto</span><span class="sxs-lookup"><span data-stu-id="edb7a-167">OSS projects</span></span>
<span data-ttu-id="edb7a-168">Dentro de los proyectos de código abierto, plantillas de administrador de recursos permiten a una comunidad toodeploy una solución rápidamente mediante prácticas demostradas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="edb7a-169">Puede almacenar plantillas en un repositorio de GitHub para que la Comunidad de hello puede modificar con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="edb7a-170">Los usuarios implementan estas plantillas en sus propias suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="edb7a-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="edb7a-171">Hello secciones siguientes identifican aspectos Hola necesita tooconsider antes de diseñar la solución.</span><span class="sxs-lookup"><span data-stu-id="edb7a-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="edb7a-172">Identificación de lo que está dentro y fuera de una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="edb7a-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="edb7a-173">Al diseñar la plantilla, resulta útil toolook en requisitos de hello en cuanto a lo que está fuera y dentro de hello las máquinas virtuales (VM):</span><span class="sxs-lookup"><span data-stu-id="edb7a-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="edb7a-174">Exterior significa Hola máquinas virtuales y otros recursos de la implementación, como la topología de red de hello, etiquetado, referencias toohello certificados/secretos y control de acceso basado en roles.</span><span class="sxs-lookup"><span data-stu-id="edb7a-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="edb7a-175">Todos estos recursos forman parte de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="edb7a-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="edb7a-176">Inside significa Hola software instalado y general deseado estado de configuración.</span><span class="sxs-lookup"><span data-stu-id="edb7a-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="edb7a-177">Otros mecanismos, como extensiones de máquina virtual o scripts, se usan en su totalidad o en parte.</span><span class="sxs-lookup"><span data-stu-id="edb7a-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="edb7a-178">Estos mecanismos pueden identificarse y ejecutados por plantilla de hello, pero no están en él.</span><span class="sxs-lookup"><span data-stu-id="edb7a-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="edb7a-179">Algunos ejemplos comunes de actividades "dentro del cuadro de Hola" incluiría:</span><span class="sxs-lookup"><span data-stu-id="edb7a-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="edb7a-180">Instalar o quitar características y roles de servidor</span><span class="sxs-lookup"><span data-stu-id="edb7a-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="edb7a-181">Instalar y configurar el software en el nivel de nodo o el clúster de Hola</span><span class="sxs-lookup"><span data-stu-id="edb7a-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="edb7a-182">Implementar sitios web en un servidor web</span><span class="sxs-lookup"><span data-stu-id="edb7a-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="edb7a-183">Implementar esquemas de base de datos</span><span class="sxs-lookup"><span data-stu-id="edb7a-183">Deploy database schemas</span></span>
* <span data-ttu-id="edb7a-184">Administrar el Registro u otros tipos de valores de configuración</span><span class="sxs-lookup"><span data-stu-id="edb7a-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="edb7a-185">Administrar archivos y directorios</span><span class="sxs-lookup"><span data-stu-id="edb7a-185">Manage files and directories</span></span>
* <span data-ttu-id="edb7a-186">Iniciar, detener y administrar procesos y servicios</span><span class="sxs-lookup"><span data-stu-id="edb7a-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="edb7a-187">Administrar cuentas de usuario y grupos locales</span><span class="sxs-lookup"><span data-stu-id="edb7a-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="edb7a-188">Instalar y administrar paquetes (.msi, .exe, yum, etc.).</span><span class="sxs-lookup"><span data-stu-id="edb7a-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="edb7a-189">Administrar variables de entorno</span><span class="sxs-lookup"><span data-stu-id="edb7a-189">Manage environment variables</span></span>
* <span data-ttu-id="edb7a-190">Ejecutar scripts nativos (Windows PowerShell, bash, etc.)</span><span class="sxs-lookup"><span data-stu-id="edb7a-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="edb7a-191">Configuración de estado deseado (DSC)</span><span class="sxs-lookup"><span data-stu-id="edb7a-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="edb7a-192">Pensar en estado interno de Hola de las máquinas virtuales más allá de la implementación, desea toomake seguro esta implementación no "desfase" de configuración de Hola que ha definido y protegido en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="edb7a-193">Este enfoque garantiza que los desarrolladores o personal de operaciones no realiza el entorno de tooan de cambios ad hoc que no están puestas a prueba, probado o se registran en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="edb7a-194">Este control es importante, porque los cambios manuales hello no están en control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="edb7a-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="edb7a-195">También no son parte de la implementación estándar de Hola y afectará a futuras implementaciones automatizadas de software de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="edb7a-196">Dejando a un lado los empleados internos, la configuración de estado deseado también es importante desde el punto de vista de la seguridad.</span><span class="sxs-lookup"><span data-stu-id="edb7a-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="edb7a-197">Los piratas informáticos con regularidad están tratando de toocompromise y sistemas de software de vulnerabilidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="edb7a-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="edb7a-198">Cuando se realiza correctamente, se archivos tooinstall comunes y se cambian Hola estado de un sistema en peligro.</span><span class="sxs-lookup"><span data-stu-id="edb7a-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="edb7a-199">Utilizar la configuración de estado deseado, puede identificar diferencias entre Hola deseado y el estado real y restaurar una configuración conocida.</span><span class="sxs-lookup"><span data-stu-id="edb7a-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="edb7a-200">Existen extensiones de recursos hello más populares mecanismos para DSC - PowerShell DSC, Chef y Puppet.</span><span class="sxs-lookup"><span data-stu-id="edb7a-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="edb7a-201">Cada una de estas extensiones puede implementar el estado inicial de saludo de la máquina virtual y también ser utilizado toomake seguro Hola deseado se mantiene el estado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="edb7a-202">Ámbitos comunes de plantillas</span><span class="sxs-lookup"><span data-stu-id="edb7a-202">Common template scopes</span></span>
<span data-ttu-id="edb7a-203">En nuestra experiencia, hemos asistido al surgimiento de tres ámbitos de plantillas de soluciones principales.</span><span class="sxs-lookup"><span data-stu-id="edb7a-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="edb7a-204">Estos tres ámbitos: capacidad, la capacidad y solución end-to-end: se describen en las secciones siguientes de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="edb7a-205">Ámbito de capacidad</span><span class="sxs-lookup"><span data-stu-id="edb7a-205">Capacity scope</span></span>
<span data-ttu-id="edb7a-206">Un ámbito de capacidad ofrece un conjunto de recursos en una topología estándar que está preconfigurado toobe conforme a los Reglamentos y directivas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="edb7a-207">ejemplo de Hola más común es implementar un entorno de desarrollo estándar en un escenario de TI de las empresas o SI.</span><span class="sxs-lookup"><span data-stu-id="edb7a-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="edb7a-208">Ámbito de funcionalidad</span><span class="sxs-lookup"><span data-stu-id="edb7a-208">Capability scope</span></span>
<span data-ttu-id="edb7a-209">Un ámbito de funcionalidad se centra en la implementación y configuración de una topología para una tecnología determinada.</span><span class="sxs-lookup"><span data-stu-id="edb7a-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="edb7a-210">Los escenarios comunes incluyen tecnologías como SQL Server, Cassandra y Hadoop.</span><span class="sxs-lookup"><span data-stu-id="edb7a-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="edb7a-211">Ámbito de solución completa</span><span class="sxs-lookup"><span data-stu-id="edb7a-211">End-to-end solution scope</span></span>
<span data-ttu-id="edb7a-212">Un ámbito de la solución-to-End es más allá de una única función de destino y en su lugar se encarga de entregar una solución de tooend end consta de varias funciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="edb7a-213">Una plantilla con ámbito de solución se manifiesta como un conjunto de una o varias plantillas con ámbito de funcionalidad con recursos, lógica y estado deseado específicos de una solución.</span><span class="sxs-lookup"><span data-stu-id="edb7a-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="edb7a-214">Un ejemplo de una plantilla de solución de ámbito es una plantilla de solución final tooend datos canalización.</span><span class="sxs-lookup"><span data-stu-id="edb7a-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="edb7a-215">plantilla de Hello puede mezclar topología específica de la solución y el estado con varias plantillas de solución de ámbito de capacidad como Kafka, Storm y Hadoop.</span><span class="sxs-lookup"><span data-stu-id="edb7a-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="edb7a-216">Elección de configuraciones conocidas frente a forma libre</span><span class="sxs-lookup"><span data-stu-id="edb7a-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="edb7a-217">Puede que piense inicialmente en una plantilla debe conceder a los consumidores mayor flexibilidad de hello, pero muchas consideraciones afecta al elegir Hola si las configuraciones de forma libre de toouse frente a configuraciones conocidas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="edb7a-218">Esta sección identifican los requisitos del cliente clave hello y consideraciones técnicas que en forma de enfoque de hello compartido en este documento.</span><span class="sxs-lookup"><span data-stu-id="edb7a-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="edb7a-219">Configuraciones de forma libre</span><span class="sxs-lookup"><span data-stu-id="edb7a-219">Free-form configurations</span></span>
<span data-ttu-id="edb7a-220">En la superficie de hello, configuraciones de forma libre de sonido ideales.</span><span class="sxs-lookup"><span data-stu-id="edb7a-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="edb7a-221">Permiten tooselect un tipo de máquina virtual y proporcionar un número arbitrario de nodos y discos para los nodos conectados, y hágalo como plantilla de tooa de parámetros.</span><span class="sxs-lookup"><span data-stu-id="edb7a-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="edb7a-222">Sin embargo, este enfoque no es el ideal para algunos escenarios.</span><span class="sxs-lookup"><span data-stu-id="edb7a-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="edb7a-223">En [tamaños de máquinas virtuales](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), se identifican diferentes tipos de VM hello y los tamaños disponibles, y cada uno de número de Hola de durable discos (2, 4, 8, 16 ó 32) que se pueden adjuntar.</span><span class="sxs-lookup"><span data-stu-id="edb7a-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="edb7a-224">Cada disco conectado proporciona 500 IOPS, y se pueden agrupar múltiplos de estos discos por un multiplicador de ese número de IOPS.</span><span class="sxs-lookup"><span data-stu-id="edb7a-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="edb7a-225">Por ejemplo, 16 discos puede ser tooprovide agrupado 8.000 e/s por segundo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="edb7a-226">La agrupación se realiza con la configuración en el sistema operativo de hello, usando espacios de almacenamiento de Microsoft Windows o matriz redundante de discos independientes (RAID) de Linux.</span><span class="sxs-lookup"><span data-stu-id="edb7a-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="edb7a-227">Una configuración de forma libre permite selección Hola varias instancias de máquina virtual, VM de varios tipos y tamaños para esas instancias, de varios discos para hello tipo de máquina virtual, y uno o varios scripts de contenido VM de tooconfigure Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="edb7a-228">Es frecuente que una implementación pueda tener varios tipos de nodos, como nodos maestros y de datos, por lo que esta flexibilidad se proporciona a menudo para cada tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="edb7a-229">En cuanto comience toodeploy clústeres de importancia, comenzar toowork con estos escenarios complejos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="edb7a-230">Si estuviera implementando un clúster de Hadoop, por ejemplo, con 8 nodos maestros y los nodos de datos de 200 y agrupados 4 discos conectados en cada nodo principal y agrupados 16 discos conectados por nodo de datos, deberá 208 máquinas virtuales y 3,232 discos toomanage.</span><span class="sxs-lookup"><span data-stu-id="edb7a-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="edb7a-231">Una cuenta de almacenamiento limitar las solicitudes anteriores que su 20.000 identificado limitar las transacciones por segundo, por lo que debe buscar en la creación de particiones de cuenta de almacenamiento y usar cálculos número adecuado de hello toodetermine de almacenamiento cuentas tooaccommodate esta topología.</span><span class="sxs-lookup"><span data-stu-id="edb7a-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="edb7a-232">Dada la gran cantidad de Hola de combinaciones compatibles con el enfoque de forma libre de hello, cálculos dinámicos se requiere toodetermine Hola a creación de particiones adecuada.</span><span class="sxs-lookup"><span data-stu-id="edb7a-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="edb7a-233">Hola idioma de plantilla del Administrador de recursos de Azure no proporciona actualmente funciones matemáticas, por lo que debe realizar estos cálculos en el código, generar una plantilla única, codificado de forma rígida con detalles adecuados de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="edb7a-234">En escenarios de SI y TI empresarial, alguien debe mantener las plantillas de Hola y admitir topologías Hola implementado para una o varias organizaciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="edb7a-235">Esta sobrecarga adicional, configuraciones y plantillas diferentes para cada cliente, está lejos de ser deseable.</span><span class="sxs-lookup"><span data-stu-id="edb7a-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="edb7a-236">Puede usar estos entornos de toodeploy plantillas de suscripción de Azure de su cliente, pero los equipos de TI corporativos y CSV normalmente implementarlos en sus propias suscripciones, con un toobill de la función de anulación sus clientes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="edb7a-237">En estos escenarios, objetivo hello es toodeploy capacidad para varios clientes a través de un grupo de suscripciones e implementaciones de mantener densamente rellenadas en hello suscripciones toominimize suscripción proliferación: es decir, más toomanage de suscripciones.</span><span class="sxs-lookup"><span data-stu-id="edb7a-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="edb7a-238">Con tamaños de implementación dinámico, para lograr este tipo de densidad requiere una cuidadosa planificación y desarrollo adicional para el trabajo de la técnica scaffolding en nombre de organización de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="edb7a-239">Además, no se puede crear suscripciones a través de una llamada de API pero debe hacerlo manualmente a través del portal de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="edb7a-240">A medida que aumenta el número de Hola de suscripciones, cualquier proliferación resultante de la suscripción requiere intervención humana: no se puede automatizar.</span><span class="sxs-lookup"><span data-stu-id="edb7a-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="edb7a-241">Con tanta variabilidad en tamaños de Hola de las implementaciones, tendrás que toopre aprovisionar un número de suscripciones manualmente tooensure suscripciones están disponibles.</span><span class="sxs-lookup"><span data-stu-id="edb7a-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="edb7a-242">Teniendo en cuenta todos estos factores, una configuración verdaderamente de forma libre es menos atractiva que a primera vista.</span><span class="sxs-lookup"><span data-stu-id="edb7a-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="edb7a-243">Conoce las configuraciones: Hola enfoque de ajuste de tamaño de camiseta</span><span class="sxs-lookup"><span data-stu-id="edb7a-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="edb7a-244">En su lugar de ofrecer una plantilla que proporciona total flexibilidad y muchas variaciones, en nuestra experiencia un patrón común es tooprovide Hola capacidad tooselect conocida las configuraciones, en efecto, tamaños de camiseta estándar como espacio aislado, pequeño, mediano y grande.</span><span class="sxs-lookup"><span data-stu-id="edb7a-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="edb7a-245">Otros ejemplos de tamaños de camiseta son ofertas de productos, como edición para la comunidad o edición para impresa.</span><span class="sxs-lookup"><span data-stu-id="edb7a-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="edb7a-246">En otros casos, pueden ser configuraciones de una tecnología específicas de la carga de trabajo, como MapReduce o NoSQL.</span><span class="sxs-lookup"><span data-stu-id="edb7a-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="edb7a-247">Muchas organizaciones de TI corporativa, proveedores de software de código abierto e integradores de sistemas permiten que sus ofertas estén disponibles de esta manera en entornos virtualizados locales (empresas) o como ofertas de software como servicio (SaaS) (CSV y OSV).</span><span class="sxs-lookup"><span data-stu-id="edb7a-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="edb7a-248">Este enfoque proporciona configuraciones bien conocidas de tamaños variables que están preconfiguradas para los clientes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="edb7a-249">Sin configuraciones conocidas, los clientes finales deben determinar el tamaño de clúster por sí solas, tener en cuenta las restricciones de recursos de plataforma y realice matemáticas tooidentify Hola resultante particiones de las cuentas de almacenamiento y otros recursos (vence toocluster tamaño y recursos restricciones).</span><span class="sxs-lookup"><span data-stu-id="edb7a-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="edb7a-250">Conoce las configuraciones permiten el tamaño adecuado de camiseta de clientes tooeasily seleccione hello, es decir, una implementación determinada.</span><span class="sxs-lookup"><span data-stu-id="edb7a-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="edb7a-251">Además toomaking una mejor experiencia de cliente hello, un pequeño número de configuraciones conocidas es más fácil toosupport y puede ayudarle a ofrecer un mayor nivel de densidad.</span><span class="sxs-lookup"><span data-stu-id="edb7a-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="edb7a-252">Un enfoque de configuración conocida centrado en los tamaños de camiseta también puede tener un número variable de nodos dentro de un mismo tamaño.</span><span class="sxs-lookup"><span data-stu-id="edb7a-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="edb7a-253">Por ejemplo, un tamaño de camiseta pequeña puede estar entre 3 y 10 nodos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="edb7a-254">tamaño de la camiseta de Hello podría tener diseñada tooaccommodate los nodos too10 y proporcionar Hola selecciones de forma libre de consumidor Hola capacidad toomake de tamaño máximo de toohello identificado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="edb7a-255">Un tamaño de la camiseta según el tipo de carga de trabajo, puede ser más forma libre de naturaleza en cuanto al número de Hola de nodos que se pueden implementar pero tendrán tamaño de nodo distintos de carga de trabajo y la configuración del software de hello en el nodo de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="edb7a-256">Tamaños de camiseta basados en las ofertas de productos, como community o Enterprise, puede tener tipos de recursos distintos y número máximo de nodos que se puede implementar, vinculados normalmente toolicensing consideraciones o disponibilidad de las características a través de diferentes ofertas de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="edb7a-257">También puede dar cabida a los clientes con variantes únicas mediante plantillas de hello basada en JSON.</span><span class="sxs-lookup"><span data-stu-id="edb7a-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="edb7a-258">Cuando se trabaja con valores atípicos, puede incorporar planeamiento adecuado de Hola y consideraciones para el desarrollo, la compatibilidad y la administración de costos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="edb7a-259">En función de los escenarios de consumo de plantilla de cliente de Hola y requisitos identificados en el inicio de Hola de este documento, hemos identificado un patrón para la descomposición de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="edb7a-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="edb7a-260">Plantillas de soluciones con ámbito de capacidad y de funcionalidad</span><span class="sxs-lookup"><span data-stu-id="edb7a-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="edb7a-261">Descomposición proporciona un desarrollo tootemplate enfoque modular que admite su reutilización, extensibilidad, pruebas y conjunto de herramientas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="edb7a-262">En esta sección se ofrece detalles sobre cómo un enfoque de descomposición puede ser aplicada tootemplates con un ámbito de capacidad o la capacidad.</span><span class="sxs-lookup"><span data-stu-id="edb7a-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="edb7a-263">En este enfoque, una plantilla principal recibe valores de parámetro de un consumidor de plantilla, a continuación, vincula tooseveral tipos de plantillas y las secuencias de comandos en un nivel inferior, tal y como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="edb7a-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="edb7a-264">Parámetros, variables estáticas y variables generadas son valores de tooprovide usado dentro y fuera de plantillas de hello vinculado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Parámetros de plantilla](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="edb7a-266">**Los parámetros se pasan tooa principal de plantillas, a continuación, plantillas de toolinked**</span><span class="sxs-lookup"><span data-stu-id="edb7a-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="edb7a-267">Hola siguiendo el enfoque de secciones en tipos de Hola de plantillas y secuencias de comandos que se descompone una única plantilla en.</span><span class="sxs-lookup"><span data-stu-id="edb7a-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="edb7a-268">las secciones de Hello presentan enfoques para pasar información de estado entre las plantillas de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="edb7a-269">Cada tipo de secuencia de comandos hello y plantilla en la imagen de Hola se describe junto con ejemplos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="edb7a-270">Para obtener un ejemplo contextual, vea "Integración: una implementación de ejemplo" más adelante en este documento.</span><span class="sxs-lookup"><span data-stu-id="edb7a-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="edb7a-271">Metadatos de plantilla</span><span class="sxs-lookup"><span data-stu-id="edb7a-271">Template metadata</span></span>
<span data-ttu-id="edb7a-272">Metadatos de la plantilla (archivo de hello metadata.json) contienen los pares de clave/valor que describen una plantilla en JSON, que se puede leer los seres humanos y sistemas de software.</span><span class="sxs-lookup"><span data-stu-id="edb7a-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metadatos de plantilla](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="edb7a-274">**Metadatos de la plantilla se describen en el archivo de hello metadata.json**</span><span class="sxs-lookup"><span data-stu-id="edb7a-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="edb7a-275">Agentes del software pueden recuperar el archivo de metadata.json hello y publicar información de hello y una plantilla de toohello de vínculo en una página web o el directorio.</span><span class="sxs-lookup"><span data-stu-id="edb7a-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="edb7a-276">Los elementos incluyen *itemDisplayName*, *description*, *summary*, *githubUsername* y *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="edb7a-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="edb7a-277">A continuación, se muestra un archivo de ejemplo en su totalidad.</span><span class="sxs-lookup"><span data-stu-id="edb7a-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="edb7a-278">Plantilla principal</span><span class="sxs-lookup"><span data-stu-id="edb7a-278">Main template</span></span>
<span data-ttu-id="edb7a-279">plantilla principal Hola recibe parámetros de un usuario, usa esa variables de objeto complejo de toopopulate de información y ejecuta Hola vinculado plantillas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Plantilla principal](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="edb7a-281">**plantilla de Hello principal recibe parámetros de un usuario**</span><span class="sxs-lookup"><span data-stu-id="edb7a-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="edb7a-282">Un parámetro proporcionado es un tipo de configuración conocida también conocido como parámetro de tamaño de hello camiseta debido a sus valores estándar como pequeña, mediana o grande.</span><span class="sxs-lookup"><span data-stu-id="edb7a-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="edb7a-283">En la práctica, puede usar este parámetro de varias formas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="edb7a-284">Para obtener más información, vea "Plantilla de recursos de configuración conocida" más adelante en este documento.</span><span class="sxs-lookup"><span data-stu-id="edb7a-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="edb7a-285">Algunos recursos se implementan con independencia de la configuración conocida de hello especificada por un parámetro de usuario.</span><span class="sxs-lookup"><span data-stu-id="edb7a-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="edb7a-286">Estos recursos se aprovisionan con una plantilla de recurso compartido único y se comparten con otras plantillas, por lo que la plantilla del recurso compartido de Hola se ejecuta primero.</span><span class="sxs-lookup"><span data-stu-id="edb7a-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="edb7a-287">Algunos recursos se implementan, opcionalmente, independientemente de la configuración conocida de hello especificado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="edb7a-288">Plantilla de recursos compartidos</span><span class="sxs-lookup"><span data-stu-id="edb7a-288">Shared resources template</span></span>
<span data-ttu-id="edb7a-289">Esta plantilla proporciona los recursos que son comunes a todas las configuraciones conocidas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="edb7a-290">Contiene la red virtual de hello, conjuntos de disponibilidad y otros recursos que son necesarios, independientemente de la plantilla de configuración conocida de Hola que se implementa.</span><span class="sxs-lookup"><span data-stu-id="edb7a-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Recursos de plantilla](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="edb7a-292">**Plantilla de recursos compartidos**</span><span class="sxs-lookup"><span data-stu-id="edb7a-292">**Shared resources template**</span></span>

<span data-ttu-id="edb7a-293">Nombres de los recursos, como el nombre de red virtual de hello, se basan en la plantilla principal Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="edb7a-294">Puede especificarlos como una variable dentro de dicha plantilla o recibirlos como un parámetro de usuario de hello, según sea necesario por su organización.</span><span class="sxs-lookup"><span data-stu-id="edb7a-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="edb7a-295">Plantilla de recursos opcionales</span><span class="sxs-lookup"><span data-stu-id="edb7a-295">Optional resources template</span></span>
<span data-ttu-id="edb7a-296">plantilla de recursos opcional Hello contiene recursos que se implementan mediante programación en función de valor de Hola de un parámetro o variable.</span><span class="sxs-lookup"><span data-stu-id="edb7a-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Recursos opcionales](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="edb7a-298">**Plantilla de recursos opcionales**</span><span class="sxs-lookup"><span data-stu-id="edb7a-298">**Optional resources template**</span></span>

<span data-ttu-id="edb7a-299">Por ejemplo, puede usar un tooconfigure de plantilla de recursos opcional un jumpbox que permite acceso indirecto tooa implementado entorno de hello Internet pública.</span><span class="sxs-lookup"><span data-stu-id="edb7a-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="edb7a-300">Usaría un parámetro o variable tooidentify si se debe habilitar jumpbox Hola y Hola *concat* toobuild Hola destino nombre para la plantilla de hello, de la función como *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="edb7a-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="edb7a-301">Vinculación de plantilla utilizaría Hola resultante tooinstall variable hello jumpbox.</span><span class="sxs-lookup"><span data-stu-id="edb7a-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="edb7a-302">Puede vincular la plantilla de recursos opcional Hola desde varios lugares:</span><span class="sxs-lookup"><span data-stu-id="edb7a-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="edb7a-303">Cuando la implementación tooevery aplicables, crear un vínculo controlado por el parámetro de plantilla de recursos compartidos de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="edb7a-304">Cuando tooselect aplicable conocida las configuraciones, por ejemplo, solo se instale en implementaciones a grandes escala: crear un vínculo controlada por la variable o controlados por el parámetro de plantilla de configuración conocida de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="edb7a-305">Si un recurso determinado es opcional pueden no está determinado por consumidor de la plantilla de hello sino más bien por el proveedor de la plantilla de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="edb7a-306">Por ejemplo, puede que necesite toosatisfy un requisito de producto determinado o el complemento de producto (común para los CSV) o directivas tooenforce (común para SIs y TI empresarial grupos).</span><span class="sxs-lookup"><span data-stu-id="edb7a-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="edb7a-307">En estos casos, puede usar una variable tooidentify si se deben implementar los recursos de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="edb7a-308">Plantilla de recursos de configuración conocida</span><span class="sxs-lookup"><span data-stu-id="edb7a-308">Known configuration resources template</span></span>
<span data-ttu-id="edb7a-309">En la plantilla principal de hello, un parámetro puede ser tooallow expuesto Hola plantilla consumidor toospecify un toodeploy de configuración conocido deseada.</span><span class="sxs-lookup"><span data-stu-id="edb7a-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="edb7a-310">A menudo, esta configuración conocida usa un enfoque de tamaño de camiseta, con un conjunto de tamaños de configuración fijos, como espacio aislado, pequeña, mediana y grande.</span><span class="sxs-lookup"><span data-stu-id="edb7a-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Recursos de configuración conocida](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="edb7a-312">**Plantilla de recursos de configuración conocida**</span><span class="sxs-lookup"><span data-stu-id="edb7a-312">**Known configuration resources template**</span></span>

<span data-ttu-id="edb7a-313">enfoque de tamaño de Hello camiseta es más frecuente, pero los parámetros de hello pueden representar cualquier conjunto de configuraciones conocidas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="edb7a-314">Por ejemplo, puede especificar un conjunto de entornos para una aplicación empresarial, como Desarrollo, Prueba y Producto.</span><span class="sxs-lookup"><span data-stu-id="edb7a-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="edb7a-315">O bien se puede usar para un toorepresent de servicio de nube diferente escalar unidades, las versiones de producto o configuraciones de productos, como la Comunidad, Developer o Enterprise.</span><span class="sxs-lookup"><span data-stu-id="edb7a-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="edb7a-316">Al igual que con la plantilla del recurso compartido de hello, las variables se pasan plantilla configuraciones conocidas de toohello desde:</span><span class="sxs-lookup"><span data-stu-id="edb7a-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="edb7a-317">Un usuario final, es decir, los parámetros de hello envían toohello principal de plantillas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="edb7a-318">Una organización, es decir, Hola variables de plantilla principal de Hola que representan requisitos internos o directivas de.</span><span class="sxs-lookup"><span data-stu-id="edb7a-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="edb7a-319">Plantilla de recursos de miembros</span><span class="sxs-lookup"><span data-stu-id="edb7a-319">Member resources template</span></span>
<span data-ttu-id="edb7a-320">Dentro de una configuración conocida, a menudo se incluyen uno o más tipos de nodos de miembros.</span><span class="sxs-lookup"><span data-stu-id="edb7a-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="edb7a-321">Por ejemplo, con Hadoop tiene nodos maestros y de datos.</span><span class="sxs-lookup"><span data-stu-id="edb7a-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="edb7a-322">Si instala MongoDB, tiene nodos de datos y un árbitro.</span><span class="sxs-lookup"><span data-stu-id="edb7a-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="edb7a-323">Si implementa DataStax, tiene nodos de datos, así como una máquina virtual con OpsCenter instalado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Recursos de miembros](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="edb7a-325">**Plantilla de recursos de miembros**</span><span class="sxs-lookup"><span data-stu-id="edb7a-325">**Member resources template**</span></span>

<span data-ttu-id="edb7a-326">Cada tipo de nodos puede tener distintos tamaños de máquinas virtuales, número de discos conectados, tooinstall de secuencias de comandos y configurar nodos hello, configuraciones de puerto para las máquinas virtuales de hello, número de instancias y otros detalles.</span><span class="sxs-lookup"><span data-stu-id="edb7a-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="edb7a-327">Para que cada tipo de nodo obtiene su propia plantilla de recursos de miembro, que contiene Hola detalles para implementar y configurar una infraestructura, así como para ejecutar secuencias de comandos toodeploy y configure software de hello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="edb7a-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="edb7a-328">Para las máquinas virtuales se usan normalmente dos tipos de scripts: scripts ampliamente reutilizables y scripts personalizados.</span><span class="sxs-lookup"><span data-stu-id="edb7a-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="edb7a-329">Scripts ampliamente reutilizables</span><span class="sxs-lookup"><span data-stu-id="edb7a-329">Widely reusable scripts</span></span>
<span data-ttu-id="edb7a-330">Los scripts ampliamente reutilizables se pueden usar en varios tipos de plantillas.</span><span class="sxs-lookup"><span data-stu-id="edb7a-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="edb7a-331">Uno de hello mejor ejemplos de estos scripts ampliamente reutilizables configura RAID en Linux toopool discos y obtener un mayor número de IOPS.</span><span class="sxs-lookup"><span data-stu-id="edb7a-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="edb7a-332">Independientemente del software de hello instalándose Hola VM, esta secuencia de comandos proporciona la reutilización de prácticas demostradas para escenarios comunes.</span><span class="sxs-lookup"><span data-stu-id="edb7a-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Scripts reutilizables](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="edb7a-334">**Las plantillas de recursos de miembros pueden llamar a los scripts ampliamente reutilizables**</span><span class="sxs-lookup"><span data-stu-id="edb7a-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="edb7a-335">Scripts personalizados</span><span class="sxs-lookup"><span data-stu-id="edb7a-335">Custom scripts</span></span>
<span data-ttu-id="edb7a-336">Las plantillas llaman habitualmente a uno o varios scripts que instalan y configuran software en las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="edb7a-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="edb7a-337">Se considera un patrón común con topologías grandes donde se implementan varias instancias de uno o varios tipos de miembros.</span><span class="sxs-lookup"><span data-stu-id="edb7a-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="edb7a-338">Se inicia un script de instalación para cada máquina virtual que se puede ejecutar en paralelo, seguido de un script de configuración al que se llama después de que se implementan todas las máquinas virtuales (o todas las máquinas virtuales de un tipo de miembro especificado).</span><span class="sxs-lookup"><span data-stu-id="edb7a-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Scripts personalizados](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="edb7a-340">**Las plantillas de recursos de miembros pueden llamar a scripts de fin específico, como la configuración de una máquina virtual**</span><span class="sxs-lookup"><span data-stu-id="edb7a-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="edb7a-341">Ejemplo de plantilla de solución con ámbito de funcionalidad: Redis</span><span class="sxs-lookup"><span data-stu-id="edb7a-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="edb7a-342">tooshow cómo podría funcionar una implementación, echemos un vistazo a un ejemplo práctico de creación de una plantilla que facilita la implementación de Hola y configuración de Redis en tamaños estándar de la camiseta.</span><span class="sxs-lookup"><span data-stu-id="edb7a-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="edb7a-343">Para la implementación de hello, hay un conjunto de recursos compartidos (red virtual, cuenta de almacenamiento, los conjuntos de disponibilidad) y un recurso opcional (jumpbox).</span><span class="sxs-lookup"><span data-stu-id="edb7a-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="edb7a-344">Hay varias configuraciones conocidas representadas como tamaños de camiseta (pequeña, mediana, grande), pero cada una con un único tipo de nodo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="edb7a-345">También hay dos scripts de fin específico (instalación, configuración).</span><span class="sxs-lookup"><span data-stu-id="edb7a-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="edb7a-346">Crear archivos de plantilla de Hola</span><span class="sxs-lookup"><span data-stu-id="edb7a-346">Creating hello template files</span></span>
<span data-ttu-id="edb7a-347">Crea una plantilla principal denominada azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="edb7a-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="edb7a-348">Crea una plantilla de recursos compartidos denominada resources.json.</span><span class="sxs-lookup"><span data-stu-id="edb7a-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="edb7a-349">Se crea una implementación de plantilla de recursos opcional tooenable Hola de un jumpbox, denominado jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="edb7a-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="edb7a-350">Redis usa un solo tipo de nodo, así que crea una sola plantilla de recursos de miembros denominada node-resources.json.</span><span class="sxs-lookup"><span data-stu-id="edb7a-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="edb7a-351">Con Redis, desea tooinstall cada nodo individual y, a continuación, configurar el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="edb7a-352">Tiene scripts tooaccommodate Hola instalación y configurar, "Install.sh". de clúster redis y setup.sh de clúster de redis.</span><span class="sxs-lookup"><span data-stu-id="edb7a-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="edb7a-353">Plantillas de hello vinculación</span><span class="sxs-lookup"><span data-stu-id="edb7a-353">Linking hello templates</span></span>
<span data-ttu-id="edb7a-354">Vinculación de la plantilla principal de plantillas de hello vincula fuera de la plantilla de recursos compartidos de toohello, que establece Hola de red virtual.</span><span class="sxs-lookup"><span data-stu-id="edb7a-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="edb7a-355">Se agrega lógica dentro de los consumidores tooenable principal de plantillas de Hola de hello plantilla toospecify si se debe implementar un jumpbox.</span><span class="sxs-lookup"><span data-stu-id="edb7a-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="edb7a-356">Un *habilitado* valor de hello *EnableJumpbox* parámetro indica que el cliente hello desea toodeploy una jumpbox.</span><span class="sxs-lookup"><span data-stu-id="edb7a-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="edb7a-357">Cuando se proporciona este valor, la plantilla de hello concatena *_enabled* como un nombre de sufijo tooa Basar plantilla para la capacidad de jumpbox Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="edb7a-358">plantilla principal Hola aplica hello *grandes* valor del parámetro como un nombre de plantilla de base de sufijo tooa tamaños camiseta y, a continuación, utiliza ese valor en un vínculo de la plantilla fuera demasiado*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="edb7a-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="edb7a-359">topología de Hello podría parecerse a esta ilustración.</span><span class="sxs-lookup"><span data-stu-id="edb7a-359">hello topology would resemble this illustration.</span></span>

![Plantilla de Redis](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="edb7a-361">**Estructura de plantilla para una plantilla de Redis**</span><span class="sxs-lookup"><span data-stu-id="edb7a-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="edb7a-362">Estado de configuración</span><span class="sxs-lookup"><span data-stu-id="edb7a-362">Configuring state</span></span>
<span data-ttu-id="edb7a-363">Para los nodos de hello en clúster de hello, hay dos pasos tooconfiguring estado de hello, representan secuencias de comandos específicos de propósito.</span><span class="sxs-lookup"><span data-stu-id="edb7a-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="edb7a-364">Redis "redis-clúster-install.sh" instala y configura clúster Hola "redis-clúster-setup.sh".</span><span class="sxs-lookup"><span data-stu-id="edb7a-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="edb7a-365">Soporte de implementaciones de diferentes tamaños</span><span class="sxs-lookup"><span data-stu-id="edb7a-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="edb7a-366">Dentro de las variables, plantilla de tamaño de hello camiseta especifica número Hola de nodos de cada tipo toodeploy para hello tamaño especificado (*grandes*).</span><span class="sxs-lookup"><span data-stu-id="edb7a-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="edb7a-367">A continuación, implementa ese número de instancias de máquina virtual mediante bucles de recursos, proporcionar nombres únicos tooresources anexando un nombre de nodo con una secuencia numérica de *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="edb7a-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="edb7a-368">Realiza estos pasos tanto las máquinas virtuales de zona activa y activa, tal como se define en la plantilla del nombre del saludo camiseta</span><span class="sxs-lookup"><span data-stu-id="edb7a-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="edb7a-369">Descomposición y plantillas con ámbito de solución completa</span><span class="sxs-lookup"><span data-stu-id="edb7a-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="edb7a-370">Una plantilla de solución con ámbito de solución completa se centra en proporcionar una solución completa.</span><span class="sxs-lookup"><span data-stu-id="edb7a-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="edb7a-371">Normalmente, este enfoque es una composición de varias plantillas con ámbito de funcionalidad con recursos, lógica y estado adicionales.</span><span class="sxs-lookup"><span data-stu-id="edb7a-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="edb7a-372">Como se resalta en la imagen de hello siguiente, hello mismo modelo que se usa para las plantillas de función con ámbito se extiende para plantillas con un ámbito de la solución de extremo a extremo.</span><span class="sxs-lookup"><span data-stu-id="edb7a-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="edb7a-373">Una plantilla de recursos compartidos y plantillas de recursos opcional sirven Hola misma función que en la capacidad de hello ámbito enfoques de plantilla, pero el ámbito de la solución de hello end tooend.</span><span class="sxs-lookup"><span data-stu-id="edb7a-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="edb7a-374">Como solución de tooend completa el ámbito plantillas también normalmente pueden tener tamaños de la camiseta, la plantilla de recursos de configuración conocido de hello refleja lo que se requiere para una determinada configuración conocida de solución de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="edb7a-375">tooone de vínculos de plantilla de recursos de configuración conocido de Hola o más capacidad de ámbito de plantillas de solución toohello relevante solución tooend, así como Hola plantillas de recursos de miembro que son necesarios para la solución de hello end tooend.</span><span class="sxs-lookup"><span data-stu-id="edb7a-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="edb7a-376">Como tamaño de la camiseta de Hola de solución de Hola puede ser diferente de la plantilla de ámbito de capacidad de hello individual, las variables dentro de hello conoce plantilla de recursos de configuración son utilizados tooprovide Hola los valores adecuados para la solución de capacidad de nivel inferior con ámbito plantillas toodeploy Hola camiseta tamaño adecuado.</span><span class="sxs-lookup"><span data-stu-id="edb7a-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![Completa](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="edb7a-378">**modelo de Hello utilizado para la capacidad o plantillas de solución de capacidad de ámbito se pueden ampliar fácilmente para ámbitos de plantilla de solución de tooend final**</span><span class="sxs-lookup"><span data-stu-id="edb7a-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="edb7a-379">Preparación de las plantillas para hello Marketplace</span><span class="sxs-lookup"><span data-stu-id="edb7a-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="edb7a-380">Hola anterior enfoque fácilmente dé cabida a escenarios donde las empresas y SIs, CSV tooeither desea implementar plantillas Hola por sí mismos o habilitar su toodeploy de clientes en su propio.</span><span class="sxs-lookup"><span data-stu-id="edb7a-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="edb7a-381">Otro escenario deseado está implementando una plantilla a través de marketplace de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="edb7a-382">Este enfoque de descomposición funciona en marketplace de hello, con algunos cambios menores.</span><span class="sxs-lookup"><span data-stu-id="edb7a-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="edb7a-383">Como se mencionó anteriormente, plantillas pueden ser tipos de implementación distintos de toooffer usado para la venta en marketplace Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="edb7a-384">Algunos tipos de implementaciones diferentes pueden ser tamaños de camiseta (pequeña, mediana, grande), tipo de producto/público (comunidad, desarrollador, empresa) o tipo de característica (básica, alta disponibilidad).</span><span class="sxs-lookup"><span data-stu-id="edb7a-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="edb7a-385">Como se muestra a continuación, Hola existente final tooend soluciones o la funcionalidad de plantillas de ámbito pueden ser fácilmente utiliza configuraciones conocidas de toolist Hola diferentes en marketplace Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="edb7a-386">Hello parámetros toohello principal plantilla son primero modificar tooremove Hola entrante parámetro denominado tshirtSize.</span><span class="sxs-lookup"><span data-stu-id="edb7a-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="edb7a-387">Mientras toohello conoce plantilla de recursos de configuración asignan los tipos de implementación distintos de hello, también necesitan recursos comunes de Hola y encuentra la configuración de Hola plantilla de recursos compartidos y potencialmente los de las plantillas de recursos opcional.</span><span class="sxs-lookup"><span data-stu-id="edb7a-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="edb7a-388">Si desea toopublish el marketplace de toohello de plantilla, establecer distintas copias de la plantilla principal que reemplaza previamente hello como parámetro de entrada disponible de tshirtSize tooa variable incrustado en la plantilla de Hola.</span><span class="sxs-lookup"><span data-stu-id="edb7a-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="edb7a-390">**Adaptar una solución de ámbito de plantilla para la tienda de Hola**</span><span class="sxs-lookup"><span data-stu-id="edb7a-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="edb7a-391">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="edb7a-391">Next steps</span></span>
* <span data-ttu-id="edb7a-392">toolearn acerca de cómo compartir el estado dentro y fuera de las plantillas, consulte [compartir el estado en las plantillas de Azure Resource Manager](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="edb7a-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="edb7a-393">Para obtener instrucciones sobre cómo las empresas pueden usar el Administrador de recursos tooeffectively administrar suscripciones, vea [scaffold Azure enterprise - regulador prescriptiva suscripción](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="edb7a-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>


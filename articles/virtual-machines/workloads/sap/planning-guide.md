---
title: "Implementación y planeamiento de Azure Virtual Machines para SAP NetWeaver | Microsoft Docs"
description: "Implementación y planeamiento de Azure Virtual Machines para SAP NetWeaver"
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: d7c59cc1-b2d0-4d90-9126-628f9c7a5538
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 17b2277de7df2ce534896c73bc9a682b9e72196f
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="azure-virtual-machines-planning-and-implementation-for-sap-netweaver"></a><span data-ttu-id="8da91-103">Implementación y planeamiento de Azure Virtual Machines para SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="8da91-103">Azure Virtual Machines planning and implementation for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md  
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/planning-monitoring-overview-2502.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-2901]:media/virtual-machines-shared-sap-planning-guide/2901-azure-ha-sap-ha-md.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-3201]:media/virtual-machines-shared-sap-planning-guide/3201-sap-ha-with-sql-md.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:virtual-machines-linux-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-windows-capture-image-resource-manager]:../../windows/capture-image.md
[virtual-machines-windows-capture-image]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-create-upload-vhd-oracle]:../../linux/oracle-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability]:../../linux/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics-windows]:../../windows/multiple-nics.md
[virtual-networks-multiple-nics-linux]:../../linux/multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md
[capture-image-linux-step-2-create-vm-image]:../../linux/capture-image.md#step-2-create-vm-image

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="8da91-117">Microsoft Azure permite a las empresas adquirir recursos de proceso y almacenamiento en un tiempo mínimo sin ciclos de adquisición prolongados.</span><span class="sxs-lookup"><span data-stu-id="8da91-117">Microsoft Azure enables companies to acquire compute and storage resources in minimal time without lengthy procurement cycles.</span></span> <span data-ttu-id="8da91-118">Las máquinas virtuales de Azure permiten a las empresas implementar aplicaciones clásicas (por ejemplo, aplicaciones basadas en SAP NetWeaver) en Azure y extender su confiabilidad y disponibilidad sin tener más recursos disponibles de forma local.</span><span class="sxs-lookup"><span data-stu-id="8da91-118">Azure Virtual Machines allow companies to deploy classical applications, like SAP NetWeaver based applications into Azure and extend their reliability and availability without having further resources available on-premises.</span></span> <span data-ttu-id="8da91-119">Los servicios de máquinas virtuales de Azure también admiten la conectividad entre locales, que permite a las empresas integrar activamente las máquinas virtuales de Azure en sus dominios locales, nubes privadas e infraestructura del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-119">Azure Virtual Machine Services also supports cross-premises connectivity, which enables companies to actively integrate Azure Virtual Machines into their on-premises domains, their Private Clouds and their SAP System Landscape.</span></span>
<span data-ttu-id="8da91-120">Estas notas del producto describen los fundamentos de las máquinas virtuales de Microsoft Azure y proporcionan un tutorial sobre los aspectos que tener en cuenta al planear e implementar instalaciones de SAP NetWeaver en Azure y, por lo tanto, es el documento que se debe leer antes de iniciar las implementaciones reales de SAP NetWeaver en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-120">This white paper describes the fundamentals of Microsoft Azure Virtual Machine and provides a walk-through of planning and implementation considerations for SAP NetWeaver installations in Azure and as such should be the document to read before starting actual deployments of SAP NetWeaver on Azure.</span></span>
<span data-ttu-id="8da91-121">El documento complementa la Documentación de instalación de SAP y las Notas de SAP, que representan los principales recursos para las instalaciones e implementaciones de software de SAP en las plataformas proporcionadas.</span><span class="sxs-lookup"><span data-stu-id="8da91-121">The paper complements the SAP Installation Documentation and SAP Notes, which represent the primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="summary"></a><span data-ttu-id="8da91-122">Resumen</span><span class="sxs-lookup"><span data-stu-id="8da91-122">Summary</span></span>
<span data-ttu-id="8da91-123">La informática en la nube es un término ampliamente usado que está cobrando cada vez más importancia en la industria de TI, desde pequeñas empresas hasta las grandes corporaciones y multinacionales.</span><span class="sxs-lookup"><span data-stu-id="8da91-123">Cloud Computing is a widely used term, which is gaining more and more importance within the IT industry, from small companies up to large and multinational corporations.</span></span>

<span data-ttu-id="8da91-124">Microsoft Azure es la plataforma de Cloud Services de Microsoft que ofrece una amplia gama de nuevas posibilidades.</span><span class="sxs-lookup"><span data-stu-id="8da91-124">Microsoft Azure is the Cloud Services Platform from Microsoft, which offers a wide spectrum of new possibilities.</span></span> <span data-ttu-id="8da91-125">Ahora los clientes pueden aprovisionar y desaprovisionar rápidamente aplicaciones como un servicio en la nube, por lo que no se verán limitados por restricciones técnicas o presupuestarias.</span><span class="sxs-lookup"><span data-stu-id="8da91-125">Now customers are able to rapidly provision and de-provision applications as a service in the cloud, so they are not limited to technical or budgeting restrictions.</span></span> <span data-ttu-id="8da91-126">En lugar de invertir tiempo y presupuesto en infraestructura de hardware, las empresas pueden centrarse en la aplicación, en los procesos empresariales y en sus beneficios para clientes y usuarios.</span><span class="sxs-lookup"><span data-stu-id="8da91-126">Instead of investing time and budget into hardware infrastructure, companies can focus on the application, business processes, and its benefits for customers and users.</span></span>

<span data-ttu-id="8da91-127">Con los servicios de máquinas virtuales de Microsoft Azure, Microsoft ofrece una completa plataforma de infraestructura como servicio (IaaS).</span><span class="sxs-lookup"><span data-stu-id="8da91-127">With Microsoft Azure Virtual Machine Services, Microsoft offers a comprehensive Infrastructure as a Service (IaaS) platform.</span></span> <span data-ttu-id="8da91-128">Las aplicaciones de basadas en SAP NetWeaver son compatibles en las máquinas virtuales de Azure (IaaS).</span><span class="sxs-lookup"><span data-stu-id="8da91-128">SAP NetWeaver based applications are supported on Azure Virtual Machines (IaaS).</span></span> <span data-ttu-id="8da91-129">En estas notas del producto se describe cómo planear e implementar aplicaciones basadas en SAP NetWeaver en Microsoft Azure como plataforma preferida.</span><span class="sxs-lookup"><span data-stu-id="8da91-129">This whitepaper describes how to plan and implement SAP NetWeaver based applications within Microsoft Azure as the platform of choice.</span></span>

<span data-ttu-id="8da91-130">El documento en sí se centrará en dos aspectos principales:</span><span class="sxs-lookup"><span data-stu-id="8da91-130">The paper itself focuses on two main aspects:</span></span>

* <span data-ttu-id="8da91-131">La primera parte describe dos modelos de implementación compatibles para las aplicaciones basadas en SAP NetWeaver en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-131">The first part describes two supported deployment patterns for SAP NetWeaver based applications on Azure.</span></span> <span data-ttu-id="8da91-132">También describe el control general de Azure desde el punto de vista de las implementaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-132">It also describes general handling of Azure with SAP deployments in mind.</span></span>
* <span data-ttu-id="8da91-133">La segunda parte detalla la implementación de los dos escenarios descritos en la primera.</span><span class="sxs-lookup"><span data-stu-id="8da91-133">The second part details implementing the two different scenarios described in the first part.</span></span>

<span data-ttu-id="8da91-134">Para obtener recursos adicionales, consulte el capítulo [Recursos][planning-guide-1.2] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-134">For additional resources see chapter [Resources][planning-guide-1.2] in this document.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="8da91-135">Lista de definiciones</span><span class="sxs-lookup"><span data-stu-id="8da91-135">Definitions upfront</span></span>
<span data-ttu-id="8da91-136">En el documento se utilizarán los términos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-136">Throughout the document, we use the following terms:</span></span>

* <span data-ttu-id="8da91-137">IaaS: infraestructura como servicio</span><span class="sxs-lookup"><span data-stu-id="8da91-137">IaaS: Infrastructure as a Service</span></span>
* <span data-ttu-id="8da91-138">PaaS: plataforma como servicio</span><span class="sxs-lookup"><span data-stu-id="8da91-138">PaaS: Platform as a Service</span></span>
* <span data-ttu-id="8da91-139">SaaS: software como servicio</span><span class="sxs-lookup"><span data-stu-id="8da91-139">SaaS: Software as a Service</span></span>
* <span data-ttu-id="8da91-140">ARM: Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="8da91-140">ARM: Azure Resource Manager</span></span>
* <span data-ttu-id="8da91-141">Componente de SAP: una aplicación de SAP individual, como ECC, BW, Solution Manager o EP.</span><span class="sxs-lookup"><span data-stu-id="8da91-141">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="8da91-142">Los componentes de SAP pueden basarse en tecnologías tradicionales, como ABAP o Java, o en una aplicación no basada en NetWeaver, como Business Objects.</span><span class="sxs-lookup"><span data-stu-id="8da91-142">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="8da91-143">Entorno de SAP: uno o varios componentes de SAP agrupados lógicamente para desempeñar una función empresarial, como desarrollo, control de calidad, aprendizaje, recuperación ante desastres o producción.</span><span class="sxs-lookup"><span data-stu-id="8da91-143">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="8da91-144">Infraestructura de SAP: hace referencia a todos los activos de SAP de la infraestructura de TI de un cliente.</span><span class="sxs-lookup"><span data-stu-id="8da91-144">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="8da91-145">La infraestructura de SAP incluye todos los entornos, tanto los que son de producción como los que no.</span><span class="sxs-lookup"><span data-stu-id="8da91-145">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="8da91-146">Sistema SAP: la combinación de la capa de DBMS y la capa de aplicación de, por ejemplo, un sistema de desarrollo SAP ERP, un sistema de prueba SAP BW, un sistema de producción SAP CRM, etc.</span><span class="sxs-lookup"><span data-stu-id="8da91-146">SAP System: The combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc..</span></span> <span data-ttu-id="8da91-147">En las implementaciones de Azure no se admite la división de estas dos capas entre la infraestructura local y de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-147">In Azure deployments, it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="8da91-148">Esto significa que un sistema SAP debe implementarse de forma local o en Azure, pero no en ambos.</span><span class="sxs-lookup"><span data-stu-id="8da91-148">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="8da91-149">Sin embargo, los diferentes sistemas de una infraestructura de SAP pueden implementarse en Azure o de forma local.</span><span class="sxs-lookup"><span data-stu-id="8da91-149">However, you can deploy the different systems of an SAP landscape into either Azure or on-premises.</span></span> <span data-ttu-id="8da91-150">Por ejemplo, pueden implementarse sistemas de pruebas y de desarrollo de SAP CRM en Azure, a la vez que se implementa el sistema de producción de forma local.</span><span class="sxs-lookup"><span data-stu-id="8da91-150">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="8da91-151">Implementación exclusiva en la nube: una implementación donde la suscripción de Azure no está conectada de sitio a sitio o a través de ExpressRoute a la infraestructura de red local.</span><span class="sxs-lookup"><span data-stu-id="8da91-151">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="8da91-152">En la documentación habitual de Azure este tipo de implementaciones se denomina "implementaciones exclusivas en la nube".</span><span class="sxs-lookup"><span data-stu-id="8da91-152">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="8da91-153">A las máquinas virtuales implementadas con este método se tiene acceso a través de Internet y una dirección IP pública o un nombre DNS público asignado a las máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-153">Virtual Machines deployed with this method are accessed through the internet and a public IP address and/or a public DNS name assigned to the VMs in Azure.</span></span> <span data-ttu-id="8da91-154">En Microsoft Windows, el DNS y Active Directory (AD) locales no se extienden a Azure en este tipo de implementaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-154">For Microsoft Windows the on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="8da91-155">Por lo tanto, las máquinas virtuales no forman parte de Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="8da91-155">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="8da91-156">Ocurre lo mismo en implementaciones de Linux en las que se usa, por ejemplo, OpenLDAP y Kerberos.</span><span class="sxs-lookup"><span data-stu-id="8da91-156">Same is true for Linux implementations using, for example, OpenLDAP + Kerberos.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-157">La implementación exclusiva en la nube se define en este documento como infraestructuras de SAP completas ejecutadas exclusivamente en Azure sin extensión de Active Directory/OpenLDAP ni resolución de nombres desde la infraestructura local a la nube pública.</span><span class="sxs-lookup"><span data-stu-id="8da91-157">Cloud-Only deployment in this document is defined as complete SAP landscapes are running exclusively in Azure without extension of Active Directory / OpenLDAP  or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="8da91-158">No se admiten configuraciones exclusivas en la nube con sistemas de producción SAP, o con configuraciones donde deban usarse SAP STMS u otros recursos locales entre sistemas SAP hospedados en Azure y recursos locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-158">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
>
>

* <span data-ttu-id="8da91-159">Entre locales: describe un escenario donde se implementan máquinas virtuales en una suscripción de Azure con conexión de sitio a sitio, entre varios sitios o de ExpressRoute entre los centros de datos locales y Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-159">Cross-premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="8da91-160">En la documentación habitual de Azure, este tipo de implementaciones se denominan "escenarios entre locales".</span><span class="sxs-lookup"><span data-stu-id="8da91-160">In common Azure documentation, these kinds of deployments are also described as cross-premises scenarios.</span></span> <span data-ttu-id="8da91-161">La razón tras la conexión es extender los dominios locales, Active Directory/OpenLDAP locales y DNS local a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-161">The reason for the connection is to extend on-premises domains, on-premises Active Directory/OpenLDAP, and on-premises DNS into Azure.</span></span> <span data-ttu-id="8da91-162">La infraestructura local se extiende a los recursos de Azure de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="8da91-162">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="8da91-163">Con esta extensión, las máquinas virtuales pueden formar parte del dominio local.</span><span class="sxs-lookup"><span data-stu-id="8da91-163">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="8da91-164">Los usuarios del dominio local pueden tener acceso a los servidores y ejecutar servicios en esas máquinas virtuales (por ejemplo, servicios de DBMS).</span><span class="sxs-lookup"><span data-stu-id="8da91-164">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="8da91-165">Es posible la comunicación y resolución de nombres entre máquinas virtuales implementadas de forma local y en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-165">Communication and name resolution between VMs deployed on-premises and Azure deployed VMs is possible.</span></span> <span data-ttu-id="8da91-166">Este es el escenario de implementación más previsible de los activos de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-166">This is the scenario we expect most SAP assets to be deployed in.</span></span> <span data-ttu-id="8da91-167">Para más información, vea [este][vpn-gateway-cross-premises-options] artículo y [este][vpn-gateway-site-to-site-create] vínculo.</span><span class="sxs-lookup"><span data-stu-id="8da91-167">For more information, see [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-168">En sistemas de producción SAP, se admiten implementaciones entre locales de sistemas SAP donde las máquinas virtuales de Azure que ejecuten sistemas SAP pertenezcan a un dominio local.</span><span class="sxs-lookup"><span data-stu-id="8da91-168">Cross-premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="8da91-169">Las configuraciones entre locales se admiten para la implementación completa o parcial de infraestructuras de SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-169">Cross-premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="8da91-170">Se requiere que esas máquinas virtuales formen parte del dominio y ADS/OpenLDAP locales incluso al ejecutar una infraestructura completa de SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-170">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS/OpenLDAP.</span></span> <span data-ttu-id="8da91-171">En versiones anteriores de la documentación se describen escenarios de TI híbridos, donde "híbrido" implica una conectividad entre locales de la infraestructura local y Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-171">In former versions of the documentation, we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="8da91-172">Además, se da la circunstancia de que las máquinas virtuales de Azure forman parte de Active Directory / OpenLDAP local.</span><span class="sxs-lookup"><span data-stu-id="8da91-172">Plus, the fact that the VMs in Azure are part of the on-premises Active Directory / OpenLDAP.</span></span>
>
>

<span data-ttu-id="8da91-173">Algunos documentos de Microsoft describen escenarios entre locales de un modo ligeramente distinto, en especial en configuraciones de DBMS de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-173">Some Microsoft documentation describes cross-premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="8da91-174">En el caso de documentos relacionados con SAP, el escenario entre locales se reduce a una conectividad de sitio a sitio o privada (ExpressRoute), y a la distribución de la infraestructura de SAP entre medios locales y Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-174">In the case of the SAP-related documents, the cross-premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>  

### <span data-ttu-id="8da91-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Recursos</span><span class="sxs-lookup"><span data-stu-id="8da91-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resources</span></span>
<span data-ttu-id="8da91-176">Las siguientes guías incluyen temas sobre implementaciones de SAP en Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-176">The following additional guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="8da91-177">[Implementación y planeamiento de Azure Virtual Machines para SAP NetWeaver (este documento)][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="8da91-177">[Azure Virtual Machines planning and implementation for SAP NetWeaver (this document)][planning-guide]</span></span>
* <span data-ttu-id="8da91-178">[Implementación de Azure Virtual Machines para SAP NetWeaver][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="8da91-178">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="8da91-179">[Implementación de DBMS de Azure Virtual Machines para SAP NetWeaver][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="8da91-179">[Azure Virtual Machines DBMS deployment for SAP NetWeaver][dbms-guide]</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8da91-180">Siempre que sea posible, se usa un vínculo a la guía de instalación de SAP a la que se hace referencia (referencia InstGuide-01, consulte <http://service.sap.com/instguides>).</span><span class="sxs-lookup"><span data-stu-id="8da91-180">Wherever possible a link to the referring SAP Installation Guide is used (Reference InstGuide-01, see <http://service.sap.com/instguides>).</span></span> <span data-ttu-id="8da91-181">En cuanto a los requisitos previos y el proceso de instalación, las guías de instalación de SAP NetWeaver deben leerse detenidamente, dado que el presente documento solo trata tareas específicas para sistemas SAP NetWeaver instalados en una máquina virtual de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-181">When it comes to the prerequisites and installation process, the SAP NetWeaver Installation Guides should always be read carefully, as this document only covers specific tasks for SAP NetWeaver systems installed in a Microsoft Azure Virtual Machine.</span></span>
>
>

<span data-ttu-id="8da91-182">Las siguientes notas de SAP están relacionadas con el tema de SAP en Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-182">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="8da91-183">Número de nota</span><span class="sxs-lookup"><span data-stu-id="8da91-183">Note number</span></span> | <span data-ttu-id="8da91-184">Título</span><span class="sxs-lookup"><span data-stu-id="8da91-184">Title</span></span> |
| --- | --- |
| <span data-ttu-id="8da91-185">[1928533]</span><span class="sxs-lookup"><span data-stu-id="8da91-185">[1928533]</span></span> |<span data-ttu-id="8da91-186">SAP Applications on Azure: Supported Products and Sizing (Aplicaciones SAP en Azure: productos y tamaños compatibles)</span><span class="sxs-lookup"><span data-stu-id="8da91-186">SAP Applications on Azure: Supported Products and Sizing</span></span> |
| <span data-ttu-id="8da91-187">[2015553]</span><span class="sxs-lookup"><span data-stu-id="8da91-187">[2015553]</span></span> |<span data-ttu-id="8da91-188">SAP on Microsoft Azure: Support Prerequisites (SAP en Microsoft Azure: requisitos previos de compatibilidad)</span><span class="sxs-lookup"><span data-stu-id="8da91-188">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="8da91-189">[1999351]</span><span class="sxs-lookup"><span data-stu-id="8da91-189">[1999351]</span></span> |<span data-ttu-id="8da91-190">Troubleshooting Enhanced Azure Monitoring for SAP (Solución de problemas de la supervisión mejorada de Azure para SAP)</span><span class="sxs-lookup"><span data-stu-id="8da91-190">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="8da91-191">[2178632]</span><span class="sxs-lookup"><span data-stu-id="8da91-191">[2178632]</span></span> |<span data-ttu-id="8da91-192">Key Monitoring Metrics for SAP on Microsoft Azure (Métricas de supervisión clave para SAP en Microsoft Azure)</span><span class="sxs-lookup"><span data-stu-id="8da91-192">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="8da91-193">[1409604]</span><span class="sxs-lookup"><span data-stu-id="8da91-193">[1409604]</span></span> |<span data-ttu-id="8da91-194">Virtualization on Windows: Enhanced Monitoring (Virtualización en Windows: supervisión mejorada)</span><span class="sxs-lookup"><span data-stu-id="8da91-194">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="8da91-195">[2191498]</span><span class="sxs-lookup"><span data-stu-id="8da91-195">[2191498]</span></span> |<span data-ttu-id="8da91-196">SAP on Linux with Azure: Enhanced Monitoring (SAP en Linux con Azure: supervisión mejorada)</span><span class="sxs-lookup"><span data-stu-id="8da91-196">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="8da91-197">[2243692]</span><span class="sxs-lookup"><span data-stu-id="8da91-197">[2243692]</span></span> |<span data-ttu-id="8da91-198">Linux on Microsoft Azure (IaaS) VM: SAP license issues (Linux y máquinas virtuales de Microsoft Azure (IaaS): problemas de licencia de SAP)</span><span class="sxs-lookup"><span data-stu-id="8da91-198">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="8da91-199">[1984787]</span><span class="sxs-lookup"><span data-stu-id="8da91-199">[1984787]</span></span> |<span data-ttu-id="8da91-200">SUSE LINUX Enterprise Server 12: Installation notes (SUSE Linux Enterprise Server 12: notas de instalación)</span><span class="sxs-lookup"><span data-stu-id="8da91-200">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="8da91-201">[2002167]</span><span class="sxs-lookup"><span data-stu-id="8da91-201">[2002167]</span></span> |<span data-ttu-id="8da91-202">Red Hat Enterprise Linux 7.x: Installation and Upgrade (Red Hat Enterprise Linux 7.x: instalación y actualización)</span><span class="sxs-lookup"><span data-stu-id="8da91-202">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="8da91-203">[2069760]</span><span class="sxs-lookup"><span data-stu-id="8da91-203">[2069760]</span></span> |<span data-ttu-id="8da91-204">Instalación y actualización de SAP en Oracle Linux 7.x</span><span class="sxs-lookup"><span data-stu-id="8da91-204">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="8da91-205">[1597355]</span><span class="sxs-lookup"><span data-stu-id="8da91-205">[1597355]</span></span> |<span data-ttu-id="8da91-206">Recomendación de espacio de intercambio para Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-206">Swap-space recommendation for Linux</span></span> |

<span data-ttu-id="8da91-207">Consulte también la [wiki de SCN](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes), que contiene todas las notas de SAP para Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-207">Also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="8da91-208">En [este artículo][azure-subscription-service-limits-subscription] se exponen las limitaciones generales predeterminadas y el límite máximo de suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-208">General default limitations and maximum limitations of Azure subscriptions can be found in [this article][azure-subscription-service-limits-subscription].</span></span>

## <a name="possible-scenarios"></a><span data-ttu-id="8da91-209">Escenarios posibles</span><span class="sxs-lookup"><span data-stu-id="8da91-209">Possible Scenarios</span></span>
<span data-ttu-id="8da91-210">Con frecuencia, SAP se considera una de las aplicaciones críticas en las empresas.</span><span class="sxs-lookup"><span data-stu-id="8da91-210">SAP is often seen as one of the most mission-critical applications within enterprises.</span></span> <span data-ttu-id="8da91-211">La arquitectura y las operaciones de estas aplicaciones suelen resultar muy complejas. Es importante asegurarse de que se cumplen los requisitos de disponibilidad y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-211">The architecture and operations of these applications is mostly very complex and ensuring that you meet requirements on availability and performance is important.</span></span>

<span data-ttu-id="8da91-212">Por ello, las empresas tienen que pensar detenidamente qué aplicaciones pueden ejecutarse en un entorno de nube pública, independientemente del proveedor de nube elegido.</span><span class="sxs-lookup"><span data-stu-id="8da91-212">Thus enterprises have to think carefully about which applications can be run in a public cloud environment, independent of the chosen cloud provider.</span></span>

<span data-ttu-id="8da91-213">La lista siguiente muestra los posibles tipos de sistemas para la implementación de aplicaciones basadas en SAP NetWeaver en entornos de nube pública:</span><span class="sxs-lookup"><span data-stu-id="8da91-213">Possible system types for deploying SAP NetWeaver based applications within public cloud environments are listed below:</span></span>

1. <span data-ttu-id="8da91-214">Sistemas de producción de tamaño medio</span><span class="sxs-lookup"><span data-stu-id="8da91-214">Medium-sized production systems</span></span>
2. <span data-ttu-id="8da91-215">Sistemas de desarrollo</span><span class="sxs-lookup"><span data-stu-id="8da91-215">Development systems</span></span>
3. <span data-ttu-id="8da91-216">Sistemas de pruebas</span><span class="sxs-lookup"><span data-stu-id="8da91-216">Testing systems</span></span>
4. <span data-ttu-id="8da91-217">Sistemas de prototipos</span><span class="sxs-lookup"><span data-stu-id="8da91-217">Prototype systems</span></span>
5. <span data-ttu-id="8da91-218">Sistemas de aprendizaje y de demostración</span><span class="sxs-lookup"><span data-stu-id="8da91-218">Learning / Demonstration systems</span></span>

<span data-ttu-id="8da91-219">Para implementar correctamente sistemas SAP en una IaaS general o en la de Azure, es importante comprender las diferencias significativas entre las ofertas de outsourcers o proveedores de servicios de hosting tradicionales y las ofertas de IaaS.</span><span class="sxs-lookup"><span data-stu-id="8da91-219">In order to successfully deploy SAP systems into either Azure IaaS or IaaS in general, it is important to understand the significant differences between the offerings of traditional outsourcers or hosters and IaaS offerings.</span></span> <span data-ttu-id="8da91-220">Mientras que el outsourcer o proveedor de hosting tradicional adapta la infraestructura (tipo de red, almacenamiento y servidor) a la carga de trabajo que el cliente desea hospedar, en realidad es responsabilidad del cliente elegir la carga de trabajo adecuada para las implementaciones de IaaS.</span><span class="sxs-lookup"><span data-stu-id="8da91-220">Whereas the traditional hoster or outsourcer adapts infrastructure (network, storage and server type) to the workload a customer wants to host, it is instead the customer’s responsibility to choose the right workload for IaaS deployments.</span></span>

<span data-ttu-id="8da91-221">Como primer paso, los clientes deben comprobar los elementos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-221">As a first step, customers need to verify the following items:</span></span>

* <span data-ttu-id="8da91-222">Los tipos de máquina virtual de Azure compatibles con SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-222">The SAP supported VM types of Azure</span></span>
* <span data-ttu-id="8da91-223">Productos/versiones de Azure compatibles con SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-223">The SAP supported products/releases on Azure</span></span>
* <span data-ttu-id="8da91-224">Las versiones de SO y DBMS compatibles para las versiones específicas de SAP en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-224">The supported OS and DBMS releases for the specific SAP releases in Azure</span></span>
* <span data-ttu-id="8da91-225">Rendimiento de SAPS proporcionado por diferentes SKU de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-225">SAPS throughput provided by different Azure SKUs</span></span>

<span data-ttu-id="8da91-226">Las respuestas a estas preguntas pueden encontrarse en la nota de SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="8da91-226">The answers to these questions can be read in SAP Note [1928533].</span></span>

<span data-ttu-id="8da91-227">Como segundo paso, las limitaciones de recursos y ancho de banda de Azure deben compararse con el consumo de recursos real en los sistemas locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-227">As a second step, Azure resource and bandwidth limitations need to be compared to actual resource consumption of on-premises systems.</span></span> <span data-ttu-id="8da91-228">Por lo tanto, los clientes deben estar familiarizados con las diferentes funcionalidades de los tipos de Azure compatibles con SAP en lo que respecta a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-228">Therefore, customers need to be familiar with the different capabilities of the Azure types supported with SAP in the area of:</span></span>

* <span data-ttu-id="8da91-229">Recursos de CPU y memoria de diferentes tipos de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-229">CPU and memory resources of different VM types and</span></span>
* <span data-ttu-id="8da91-230">Ancho de banda de IOPS de diferentes tipos de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-230">IOPS bandwidth of different VM types and</span></span>
* <span data-ttu-id="8da91-231">Funcionalidades de red de diferentes tipos de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-231">Network capabilities of different VM types.</span></span>

<span data-ttu-id="8da91-232">Se puede encontrar la mayoría de los datos [aquí (Linux)][virtual-machines-sizes-linux] y [aquí (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="8da91-232">Most of that data can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="8da91-233">Tenga en cuenta que los límites mencionados en el vínculo anterior son los superiores.</span><span class="sxs-lookup"><span data-stu-id="8da91-233">Keep in mind that the limits listed in the link above are upper limits.</span></span> <span data-ttu-id="8da91-234">No significa que siempre puedan proporcionarse esos límites para todos los recursos, como, por ejemplo, E/S por segundo.</span><span class="sxs-lookup"><span data-stu-id="8da91-234">It does not mean that the limits for any of the resources, for example IOPS can be provided under all circumstances.</span></span> <span data-ttu-id="8da91-235">Sin embargo, las excepciones son los recursos de CPU y memoria de un tipo de máquina virtual elegido.</span><span class="sxs-lookup"><span data-stu-id="8da91-235">The exceptions though are the CPU and memory resources of a chosen VM type.</span></span> <span data-ttu-id="8da91-236">Para los tipos de máquina virtual compatibles con SAP, los recursos de CPU y memoria están reservados y, por tanto, están disponibles en cualquier momento para su consumo en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-236">For the VM types supported by SAP, the CPU and memory resources are reserved and as such available at any point in time for consumption within the VM.</span></span>

<span data-ttu-id="8da91-237">La plataforma Microsoft Azure, como otras plataformas de IaaS, es una plataforma multiempresa.</span><span class="sxs-lookup"><span data-stu-id="8da91-237">The Microsoft Azure platform like other IaaS platforms is a multi-tenant platform.</span></span> <span data-ttu-id="8da91-238">Esto significa que el almacenamiento, la red y otros recursos se comparten entre los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="8da91-238">This means that storage, network, and other resources are shared between tenants.</span></span> <span data-ttu-id="8da91-239">Se usa la limitación inteligente y la lógica de cuotas para impedir que un inquilino perjudique el rendimiento de otro (vecino ruidoso) significativamente.</span><span class="sxs-lookup"><span data-stu-id="8da91-239">Intelligent throttling and quota logic is used to prevent one tenant from impacting the performance of another tenant (noisy neighbor) in a drastic way.</span></span> <span data-ttu-id="8da91-240">Aunque la lógica de Azure intenta que las variaciones de ancho de banda sean pequeñas, las plataformas con más uso compartido suelen generar mayores variaciones en la disponibilidad de recursos y ancho de banda que las experimentadas por muchos clientes en sus implementaciones locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-240">Though logic in Azure tries to keep variances in bandwidth experienced small, highly shared platforms tend to introduce larger variances in resource/bandwidth availability than many customers are used to in their on-premises deployments.</span></span> <span data-ttu-id="8da91-241">Como resultado, pueden experimentarse diferentes niveles de ancho de banda en lo que respecta a los valores de E/S de datos en redes o almacenamiento (volumen y latencia) de un minuto a otro.</span><span class="sxs-lookup"><span data-stu-id="8da91-241">As a result, you might experience different levels of bandwidth regarding networking or storage I/O (the volume as well as latency) from minute to minute.</span></span> <span data-ttu-id="8da91-242">Debe tenerse en cuenta que un sistema SAP en Azure podría sufrir mayores variaciones que un entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-242">The probability that an SAP system on Azure could experience larger variances than in an on-premises system needs to be taken into account.</span></span>

<span data-ttu-id="8da91-243">Un último paso es evaluar los requisitos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-243">A last step is to evaluate availability requirements.</span></span> <span data-ttu-id="8da91-244">Puede ocurrir que la infraestructura subyacente de Azure necesite actualizarse y que los hosts que ejecuten las máquinas virtuales tengan que reiniciarse.</span><span class="sxs-lookup"><span data-stu-id="8da91-244">It can happen, that the underlying Azure infrastructure needs to get updated and requires the hosts running VMs to be rebooted.</span></span> <span data-ttu-id="8da91-245">En ese caso, estas máquinas virtuales también se cerrarán y reiniciarán.</span><span class="sxs-lookup"><span data-stu-id="8da91-245">In these cases, VMs running on those hosts would be shut down and restarted as well.</span></span> <span data-ttu-id="8da91-246">Este mantenimiento se lleva a cabo fuera del horario de oficina de una región concreta, pero el intervalo de varias horas durante el cual puede ocurrir el reinicio es relativamente amplio.</span><span class="sxs-lookup"><span data-stu-id="8da91-246">The timing of such maintenance is done during non-core business hours for a particular region but the potential window of a few hours during which a restart will occur is relatively wide.</span></span> <span data-ttu-id="8da91-247">Hay varias tecnologías en la plataforma Azure que pueden configurarse para mitigar total o parcialmente los efectos de estas actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-247">There are various technologies within the Azure platform that can be configured to mitigate some or all of the impact of such updates.</span></span> <span data-ttu-id="8da91-248">Se han diseñado mejoras futuras de la plataforma Azure, DBMS y la aplicación SAP para minimizar el impacto de estos reinicios.</span><span class="sxs-lookup"><span data-stu-id="8da91-248">Future enhancements of the Azure platform, DBMS, and SAP application are designed to minimize the impact of such restarts.</span></span>

<span data-ttu-id="8da91-249">Para implementar correctamente un sistema SAP en Azure, el sistema operativo, la base de datos y las aplicaciones SAP del entorno SAP local deben aparecer en la matriz de soporte de SAP de Azure. Además, deben ser adecuados a los recursos que la infraestructura de Azure puede proporcionar y deben funcionar con los contratos de nivel de servicio que ofrece Microsoft Azure en lo que respecta a la disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-249">In order to successfully deploy an SAP system onto Azure, the on-premises SAP system(s) Operating System, Database, and SAP applications must appear on the SAP Azure support matrix, fit within the resources the Azure infrastructure can provide and which can work with the Availability SLAs Microsoft Azure offers.</span></span> <span data-ttu-id="8da91-250">Cuando identifique esos sistemas, debe decidirse por uno de los dos siguientes escenarios de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-250">As those systems are identified, you need to decide on one of the following two deployment scenarios.</span></span>

### <span data-ttu-id="8da91-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Solo en la nube: implementaciones de máquina virtual en Azure sin dependencias en la red local del cliente</span><span class="sxs-lookup"><span data-stu-id="8da91-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network</span></span>
![Implementación de una sola máquina virtual con un escenario de demostración o aprendizaje de SAP en Azure][planning-guide-figure-100]

<span data-ttu-id="8da91-253">Este escenario es típico de aprendizajes o sistemas de demostración, donde se instalan todos los componentes del software, ya sean de SAP o no, dentro de una única máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-253">This scenario is typical for trainings or demo systems, where all the components of SAP and non-SAP software are installed within a single VM.</span></span> <span data-ttu-id="8da91-254">No se admiten sistemas de producción de SAP en este escenario de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-254">Production SAP systems are not supported in this deployment scenario.</span></span> <span data-ttu-id="8da91-255">En general, este escenario cumple los requisitos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-255">In general, this scenario meets the following requirements:</span></span>

* <span data-ttu-id="8da91-256">Se puede acceder a las propias máquinas virtuales a través de la red pública.</span><span class="sxs-lookup"><span data-stu-id="8da91-256">The VMs themselves are accessible over the public network.</span></span> <span data-ttu-id="8da91-257">No se requiere conectividad de red directa entre las aplicaciones que se ejecutan dentro de las máquinas virtuales y la red local del cliente o de la empresa que posee el contenido de demostración o aprendizaje.</span><span class="sxs-lookup"><span data-stu-id="8da91-257">Direct network connectivity for the applications running within the VMs to the on-premises network of either the company owning the demos or trainings content or the customer is not necessary.</span></span>
* <span data-ttu-id="8da91-258">Si hay varias máquinas virtuales involucradas en el escenario de aprendizaje o demostración, la resolución de nombres y las comunicaciones de red deben funcionar entre dichas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-258">In case of multiple VMs representing the trainings or demo scenario, network communications and name resolution needs to work between the VMs.</span></span> <span data-ttu-id="8da91-259">No obstante, las comunicaciones entre el conjunto de máquinas virtuales tienen que estar aisladas para que varios conjuntos de máquinas virtuales puedan implementarse en paralelo sin interferencias.</span><span class="sxs-lookup"><span data-stu-id="8da91-259">But communications between the set of VMs need to be isolated so that several sets of VMs can be deployed side by side without interference.</span></span>  
* <span data-ttu-id="8da91-260">Se requiere conectividad a Internet para que el usuario final inicie sesión de forma remota en las máquinas virtuales hospedadas en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-260">Internet connectivity is required for the end user to remote login into to the VMs hosted in Azure.</span></span> <span data-ttu-id="8da91-261">Dependiendo del SO invitado, se usará Terminal Services / RDS o VNC/ssh para tener acceso a la máquina virtual con el fin de completar las tareas de aprendizaje o realizar las demostraciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-261">Depending on the guest OS, Terminal Services/RDS or VNC/ssh is used to access the VM to either fulfill the training tasks or perform the demos.</span></span> <span data-ttu-id="8da91-262">Si también pueden exponerse puertos SAP, como 3200, 3300 y 3600, se podrá acceder a la instancia de la aplicación SAP desde cualquier PC de sobremesa conectado a Internet.</span><span class="sxs-lookup"><span data-stu-id="8da91-262">If SAP ports such as 3200, 3300 & 3600 can also be exposed the SAP application instance can be accessed from any Internet connected desktop.</span></span>
* <span data-ttu-id="8da91-263">Los sistemas y máquinas virtuales de SAP representan un escenario independiente en Azure que solo requiere una conexión pública a Internet para el acceso de los usuarios finales y no precisa una conexión a otras máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-263">The SAP system(s) (and VM(s)) represent a standalone scenario in Azure, which only requires public internet connectivity for end-user access and does not require a connection to other VMs in Azure.</span></span>
* <span data-ttu-id="8da91-264">En la máquina virtual se instalan y se ejecutan directamente SAPGUI y un explorador.</span><span class="sxs-lookup"><span data-stu-id="8da91-264">SAPGUI and a browser are installed and run directly on the VM.</span></span>
* <span data-ttu-id="8da91-265">Se requiere el restablecimiento rápido de una máquina virtual a su estado original y una nueva implementación de ese estado original.</span><span class="sxs-lookup"><span data-stu-id="8da91-265">A fast reset of a VM to the original state and new deployment of that original state again is required.</span></span>
* <span data-ttu-id="8da91-266">En el caso de escenarios de demostración y aprendizaje que se llevan a cabo en varias máquinas virtuales, se requiere un servicio de DNS o Active Directory/OpenLDAP para cada conjunto de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-266">In the case of demo and training scenarios, which are realized in multiple VMs, an Active Directory / OpenLDAP and/or DNS service is required for each set of VMs.</span></span>

![Representación de un escenario de demostración o aprendizaje por parte de un grupo de VM en un servicio en la nube de Azure][planning-guide-figure-200]

<span data-ttu-id="8da91-268">Es importante tener en cuenta que las máquinas virtuales de cada conjunto deben implementarse en paralelo y que los nombres de las máquinas virtuales son los mismos en cada conjunto.</span><span class="sxs-lookup"><span data-stu-id="8da91-268">It is important to keep in mind that the VM(s) in each of the sets need to be deployed in parallel, where the VM names in each of the set are the same.</span></span>

### <span data-ttu-id="8da91-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Entre locales: implementación de una o varias máquinas virtuales de SAP en Azure con el requisito de estar totalmente integradas en la red local</span><span class="sxs-lookup"><span data-stu-id="8da91-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network</span></span>
![VPN con conectividad de sitio a sitio (entre locales)][planning-guide-figure-300]

<span data-ttu-id="8da91-271">Este es un escenario entre locales con numerosos patrones de implementación posibles.</span><span class="sxs-lookup"><span data-stu-id="8da91-271">This scenario is a cross-premises scenario with many possible deployment patterns.</span></span> <span data-ttu-id="8da91-272">Puede describirse como de una forma tan simple como la ejecución de algunas partes de la infraestructura de SAP en sistemas locales y otras en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-272">It can be described as simply as running some parts of the SAP landscape on-premises and other parts of the SAP landscape on Azure.</span></span> <span data-ttu-id="8da91-273">Todos los aspectos relativos al hecho de que parte de los componentes de SAP se ejecuten en Azure deben ser transparentes para los usuarios finales.</span><span class="sxs-lookup"><span data-stu-id="8da91-273">All aspects of the fact that part of the SAP components are running on Azure should be transparent for end users.</span></span> <span data-ttu-id="8da91-274">Por lo tanto, elementos como el sistema de corrección de transporte de SAP (STMS), comunicación de RFC, impresión, seguridad (como SSO), etc., funcionan perfectamente en los sistemas SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-274">Hence the SAP Transport Correction System (STMS), RFC Communication, Printing, Security (like SSO), etc. work seamlessly for the SAP systems running on Azure.</span></span> <span data-ttu-id="8da91-275">Sin embargo, el escenario entre locales también describe un escenario donde toda la infraestructura de SAP se ejecuta en Azure con el DNS y dominio del cliente extendidos a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-275">But the cross-premises scenario also describes a scenario where the complete SAP landscape runs in Azure with the customer’s domain and DNS extended into Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-276">Este es el escenario de implementación admitido para la ejecución de sistemas SAP productivos.</span><span class="sxs-lookup"><span data-stu-id="8da91-276">This is the deployment scenario, which is supported for running productive SAP systems.</span></span>
>
>

<span data-ttu-id="8da91-277">Consulte [este artículo][vpn-gateway-create-site-to-site-rm-powershell] para obtener más información sobre cómo conectar la red local con Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-277">Read [this article][vpn-gateway-create-site-to-site-rm-powershell] for more information on how to connect your on-premises network to Microsoft Azure</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8da91-278">Cuando se habla de escenarios entre locales en los que intervienen implementaciones del cliente locales y de Azure, hay que detenerse en la granularidad de sistemas SAP completos.</span><span class="sxs-lookup"><span data-stu-id="8da91-278">When we are talking about cross-premises scenarios between Azure and on-premises customer deployments, we are looking at the granularity of whole SAP systems.</span></span> <span data-ttu-id="8da91-279">Los casos que *no admiten* escenarios entre locales son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-279">Scenarios which are *not supported* for cross-premises scenarios are:</span></span>
>
> * <span data-ttu-id="8da91-280">La ejecución de varias capas de aplicaciones SAP en diferentes métodos de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-280">Running different layers of SAP applications in different deployment methods.</span></span> <span data-ttu-id="8da91-281">Por ejemplo, la ejecución de la capa DBMS en local y el nivel de aplicación de SAP en máquinas virtuales de Azure o viceversa.</span><span class="sxs-lookup"><span data-stu-id="8da91-281">For example running the DBMS layer on-premises, but the SAP application layer in VMs deployed as Azure VMs or vice versa.</span></span>
> * <span data-ttu-id="8da91-282">Combinar algunos componentes de una capa SAP en Azure y otras en medios locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-282">Some components of an SAP layer in Azure and some on-premises.</span></span> <span data-ttu-id="8da91-283">Por ejemplo, dividir las instancias del nivel de aplicación SAP entre máquinas virtuales locales y de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-283">For example splitting Instances of the SAP application layer between on-premises and Azure VMs.</span></span>
> * <span data-ttu-id="8da91-284">No se admite la distribución de máquinas virtuales que ejecuten instancias SAP de un sistema en varias regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-284">Distribution of VMs running SAP instances of one system over multiple Azure Regions is not supported.</span></span>
>
> <span data-ttu-id="8da91-285">La razón de estas restricciones es el requisito de una red de alto rendimiento de latencia muy baja en un sistema SAP, especialmente entre las instancias de la aplicación y la capa DBMS de un sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-285">The reason for these restrictions is the requirement for a very low latency high-performance network within one SAP system, especially between the application instances and the DBMS layer of an SAP system.</span></span>
>
>

### <a name="supported-os-and-database-releases"></a><span data-ttu-id="8da91-286">Versiones de bases de datos y sistemas operativos compatibles</span><span class="sxs-lookup"><span data-stu-id="8da91-286">Supported OS and Database Releases</span></span>
* <span data-ttu-id="8da91-287">Este artículo incluye una lista del software de servidor de Microsoft compatible con los servicios de Azure Virtual Machine: <http://support.microsoft.com/kb/2721672>.</span><span class="sxs-lookup"><span data-stu-id="8da91-287">Microsoft server software supported for Azure Virtual Machine Services is listed in this article: <http://support.microsoft.com/kb/2721672>.</span></span>
* <span data-ttu-id="8da91-288">La nota de SAP [1928533]indica las versiones de sistemas operativos y de bases de datos admitidos en los servicios de máquinas virtuales de Azure con software SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-288">Supported operating system releases, database system releases supported on Azure Virtual Machine Services in conjunction with SAP software are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="8da91-289">La nota de SAP [1928533]muestra las aplicaciones y versiones de SAP compatibles con los servicios de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-289">SAP applications and releases supported on Azure Virtual Machine Services are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="8da91-290">Solo se admite la ejecución de imágenes de 64 bits como máquinas virtuales invitadas en Azure para escenarios de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-290">Only 64Bit images are supported to run as Guest VMs in Azure for SAP scenarios.</span></span> <span data-ttu-id="8da91-291">Por ello, solo se admiten aplicaciones y bases de datos de SAP de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="8da91-291">This also means that only 64-bit SAP applications and databases are supported.</span></span>

## <a name="microsoft-azure-virtual-machine-services"></a><span data-ttu-id="8da91-292">Servicios de máquinas virtuales de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-292">Microsoft Azure Virtual Machine Services</span></span>
<span data-ttu-id="8da91-293">La plataforma Microsoft Azure es una plataforma de servicios en la nube a escala de Internet hospedada y cuyo funcionamiento se dirige desde los centros de datos de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="8da91-293">The Microsoft Azure platform is an internet-scale cloud services platform hosted and operated in Microsoft data centers.</span></span> <span data-ttu-id="8da91-294">La plataforma incluye los servicios de máquinas virtuales de Microsoft Azure (infraestructura como servicio o IaaS) y un conjunto de funcionalidades sofisticadas de plataforma como servicio (PaaS).</span><span class="sxs-lookup"><span data-stu-id="8da91-294">The platform includes the Microsoft Azure Virtual Machine Services (Infrastructure as a Service, or IaaS) and a set of rich Platform as a Service (PaaS) capabilities.</span></span>

<span data-ttu-id="8da91-295">La plataforma Azure reduce la necesidad de adquisiciones iniciales de tecnología e infraestructura.</span><span class="sxs-lookup"><span data-stu-id="8da91-295">The Azure platform reduces the need for up-front technology and infrastructure purchases.</span></span> <span data-ttu-id="8da91-296">Simplifica el mantenimiento y funcionamiento de aplicaciones proporcionando procesos y almacenamiento a petición para hospedar, escalar y administrar aplicaciones web y aplicaciones conectadas.</span><span class="sxs-lookup"><span data-stu-id="8da91-296">It simplifies maintaining and operating applications by providing on-demand compute and storage to host, scale, and manage web application and connected applications.</span></span> <span data-ttu-id="8da91-297">La administración de la infraestructura se automatiza con una plataforma diseñada para lograr alta disponibilidad y escalado dinámico con el fin de satisfacer las necesidades de uso con la opción de un modelo de precios de pago por uso.</span><span class="sxs-lookup"><span data-stu-id="8da91-297">Infrastructure management is automated with a platform that is designed for high availability and dynamic scaling to match usage needs with the option of a pay-as-you-go pricing model.</span></span>

![Posicionamiento de servicios de máquinas virtuales de Microsoft Azure][planning-guide-figure-400]

<span data-ttu-id="8da91-299">Con los servicios de máquina virtual de Azure, Microsoft permite implementar imágenes de servidor personalizadas en Azure como instancias de IaaS (consulte la ilustración 4).</span><span class="sxs-lookup"><span data-stu-id="8da91-299">With Azure Virtual Machine Services, Microsoft is enabling you to deploy custom server images to Azure as IaaS instances (see Figure 4).</span></span> <span data-ttu-id="8da91-300">Las máquinas virtuales de Azure se basan en unidades de disco duro virtuales (VHD) Hyper-V y pueden ejecutar diferentes sistemas operativos como SO invitado.</span><span class="sxs-lookup"><span data-stu-id="8da91-300">The Virtual Machines in Azure are based on Hyper-V virtual hard drives (VHD) and are able to run different operating systems as Guest OS.</span></span>

<span data-ttu-id="8da91-301">Desde una perspectiva operativa, el servicio de máquinas virtuales de Azure es similar a las máquinas virtuales implementadas en local.</span><span class="sxs-lookup"><span data-stu-id="8da91-301">From an operational perspective, the Azure Virtual Machine Service offers similar experiences as virtual machines deployed on premises.</span></span> <span data-ttu-id="8da91-302">Sin embargo, la gran ventaja es que la infraestructura no requiere adquisición ni ningún tipo de administración.</span><span class="sxs-lookup"><span data-stu-id="8da91-302">However, it has the significant advantage that you don’t need to procure, administer, and manage the infrastructure.</span></span> <span data-ttu-id="8da91-303">Los desarrolladores y administradores tienen control total de la imagen de sistema operativo dentro de estas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-303">Developers and Administrators have full control of the operating system image within these virtual machines.</span></span> <span data-ttu-id="8da91-304">Los administradores pueden iniciar sesión de forma remota en las máquinas virtuales para realizar tareas de mantenimiento, de solución de problemas y de implementación de software.</span><span class="sxs-lookup"><span data-stu-id="8da91-304">Administrators can log on remotely in to those virtual machines to perform maintenance and troubleshooting tasks as well as software deployment tasks.</span></span> <span data-ttu-id="8da91-305">Con respecto a la implementación, las únicas restricciones son los tamaños y las capacidades de las máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-305">In regard to deployment, the only restrictions are the sizes and capabilities of Azure VMs.</span></span> <span data-ttu-id="8da91-306">Su configuración podría no ser tan granular como en el caso del entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-306">These may not be as fine granular in configuration as this could be done on premises.</span></span> <span data-ttu-id="8da91-307">Hay una gran variedad de tipos de máquina virtual que combinan lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-307">There is a choice of VM types that represent a combination of:</span></span>

* <span data-ttu-id="8da91-308">Cantidad de vCPU</span><span class="sxs-lookup"><span data-stu-id="8da91-308">Number of vCPUs,</span></span>
* <span data-ttu-id="8da91-309">Memoria</span><span class="sxs-lookup"><span data-stu-id="8da91-309">Memory,</span></span>
* <span data-ttu-id="8da91-310">Número de discos duros virtuales que se pueden conectar</span><span class="sxs-lookup"><span data-stu-id="8da91-310">Number of VHDs that can be attached,</span></span>
* <span data-ttu-id="8da91-311">Anchos de banda de red y almacenamiento</span><span class="sxs-lookup"><span data-stu-id="8da91-311">Network and Storage bandwidths.</span></span>

<span data-ttu-id="8da91-312">El tamaño y las limitaciones de varios tamaños de máquinas virtuales están documentados en una tabla de [este artículo (Linux)][virtual-machines-sizes-linux] y de [este otro (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="8da91-312">The size and limitations of various different virtual machines sizes offered can be seen in a table in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="8da91-313">Como puede observar, hay diversas familias o series de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-313">As you realize, there are different families or series of virtual machines.</span></span> <span data-ttu-id="8da91-314">Pueden distinguirse las siguientes familias de máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="8da91-314">You can distinguish the following families of VMs:</span></span>

* <span data-ttu-id="8da91-315">Tipos de máquinas virtuales A0-A7: no todos están certificados para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-315">A0-A7 VM types: Not all of those are certified for SAP.</span></span> <span data-ttu-id="8da91-316">Primera serie de máquinas virtuales en las que se introdujo IaaS de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-316">First VM series that Azure IaaS got introduced with.</span></span>
* <span data-ttu-id="8da91-317">Tipos de máquinas virtuales A8-A11: instancias de procesos de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-317">A8-A11 VM types: High Performance computing instances.</span></span> <span data-ttu-id="8da91-318">Ejecución en distintos hosts con procesos de mejor rendimiento que otras máquinas virtuales de la serie A.</span><span class="sxs-lookup"><span data-stu-id="8da91-318">Running on different better performing compute hosts than other A-series VMs.</span></span>
* <span data-ttu-id="8da91-319">Tipos de máquinas virtuales de las series D/Dv2: mejor rendimiento que las series A0-A7.</span><span class="sxs-lookup"><span data-stu-id="8da91-319">D/Dv2-Series VM types: Better performing than A0-A7.</span></span> <span data-ttu-id="8da91-320">No todos los tipos de máquina virtual están certificadas para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-320">Not all of the VM types are certified with SAP.</span></span>
* <span data-ttu-id="8da91-321">Tipos de máquinas virtuales de las series DS/DSv2: son similares a las series D/Dv2, pero pueden conectarse a Azure Premium Storage (consulte el capítulo [Azure Premium Storage][planning-guide-3.3.2] de este documento).</span><span class="sxs-lookup"><span data-stu-id="8da91-321">DS/DSv2-Series VM types: Similar to D/Dv2-series, but are able to connect to Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="8da91-322">De nuevo, no todos los tipos de máquinas virtuales están certificadas para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-322">Again not all VM types are certified with SAP.</span></span>
* <span data-ttu-id="8da91-323">Tipos de máquinas virtuales de la serie G: tipos de máquinas virtuales de memoria alta.</span><span class="sxs-lookup"><span data-stu-id="8da91-323">G-Series VM types: High memory VM types.</span></span>
* <span data-ttu-id="8da91-324">Tipos de máquinas virtuales de la serie GS: son análogas a la serie G, pero con la opción de usar Azure Premium Storage (consulte el capítulo [Azure Premium Storage][planning-guide-3.3.2] de este documento).</span><span class="sxs-lookup"><span data-stu-id="8da91-324">GS-Series VM types: like G-Series but including the option to use Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="8da91-325">Si se usan máquinas virtuales de la serie GS como servidores de base de datos, es obligatorio utilizar Premium Storage para los archivos de registro de datos y transacciones de las base de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-325">When using GS-Series VMs as database servers, it's mandatory to use Premium Storage for DB data and transaction log files</span></span>

<span data-ttu-id="8da91-326">Se pueden encontrar las mismas configuraciones de memoria y CPU en varias series de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-326">You may find the same CPU and memory configurations in different VM series.</span></span> <span data-ttu-id="8da91-327">No obstante, el rendimiento de estas máquinas virtuales de distintas series podría diferir significativamente.</span><span class="sxs-lookup"><span data-stu-id="8da91-327">Nevertheless, when you look up the throughput performance of these VMs out of the different series they might differ significantly.</span></span> <span data-ttu-id="8da91-328">Esto sucede a pesar de tener la misma configuración de memoria y CPU.</span><span class="sxs-lookup"><span data-stu-id="8da91-328">Despite having the same CPU and memory configuration.</span></span> <span data-ttu-id="8da91-329">El motivo es que el hardware de servidor del host subyacente durante la introducción de los diferentes tipos de máquina virtual tenía características de rendimiento diferentes.</span><span class="sxs-lookup"><span data-stu-id="8da91-329">Reason is that the underlying host server hardware at the introduction of the different VM types had different throughput characteristics.</span></span>  <span data-ttu-id="8da91-330">Normalmente la diferencia en rendimiento también se refleja en el precio de las diferentes máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-330">Usually the difference shown in throughput performance also is reflected in the price of the different VMs.</span></span>

<span data-ttu-id="8da91-331">No todas las distintas series de máquinas virtuales podrían ofrecerse en todas las regiones de Azure (consulte el capítulo siguiente para obtener información sobre las regiones de Azure).</span><span class="sxs-lookup"><span data-stu-id="8da91-331">Not all different VM series might be offered in each one of the Azure Regions (for Azure Regions see next chapter).</span></span> <span data-ttu-id="8da91-332">También hay que saber que no todas las máquinas virtuales o series de máquinas virtuales están certificadas para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-332">Also be aware that not all VMs or VM-Series are certified for SAP.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8da91-333">Al usar aplicaciones basadas en SAP NetWeaver, solo se admite el subconjunto de tipos de máquinas virtuales y configuraciones indicados en la nota de SAP [1928533] .</span><span class="sxs-lookup"><span data-stu-id="8da91-333">For the use of SAP NetWeaver based applications, only the subset of VM types and configurations listed in SAP Note [1928533] are supported.</span></span>
>
>

### <span data-ttu-id="8da91-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Regiones de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Azure Regions</span></span>
<span data-ttu-id="8da91-335">Microsoft permite implementar máquinas virtuales en las denominadas "regiones de Azure".</span><span class="sxs-lookup"><span data-stu-id="8da91-335">Microsoft allows to deploy Virtual Machines into so called ‘Azure Regions’.</span></span> <span data-ttu-id="8da91-336">Una región de Azure puede constar de uno o varios centros de datos próximos entre sí.</span><span class="sxs-lookup"><span data-stu-id="8da91-336">An Azure Region may be one or multiple data centers that are located in close proximity.</span></span> <span data-ttu-id="8da91-337">En la mayoría de las regiones geopolíticas en el mundo, Microsoft tiene al menos dos regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-337">For most of the geopolitical regions in the world Microsoft has at least two Azure Regions.</span></span> <span data-ttu-id="8da91-338">Por ejemplo, en Europa hay una región de Azure "Europa del Norte" y otra "Europa Occidental".</span><span class="sxs-lookup"><span data-stu-id="8da91-338">For example, in Europe there is an Azure Region of ‘North Europe’ and one of ‘West Europe’.</span></span> <span data-ttu-id="8da91-339">Estas dos regiones de Azure dentro de una misma área geopolítica están separadas por una distancia suficiente para que los desastres naturales o técnicos no afecten a ambas al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="8da91-339">Such two Azure Regions within a geopolitical region are separated by significant enough distance so that natural or technical disasters do not affect both Azure Regions in the same geopolitical region.</span></span> <span data-ttu-id="8da91-340">Puesto que Microsoft está creando continuamente nuevas regiones de Azure en diferentes áreas geopolíticas en todo el mundo, el número de las regiones de Azure crece de manera constante y en diciembre de 2015 ya había 20 y se habían anunciado otras nuevas.</span><span class="sxs-lookup"><span data-stu-id="8da91-340">Since Microsoft is steadily building out new Azure Regions in different geopolitical regions globally, the number of these regions is steadily growing and as of Dec 2015 reached the number of 20 Azure Regions with additional Regions announced already.</span></span> <span data-ttu-id="8da91-341">Los clientes pueden implementar sistemas SAP en todas estas regiones, incluidas las dos regiones de Azure en China.</span><span class="sxs-lookup"><span data-stu-id="8da91-341">You as a customer can deploy SAP systems into all these regions, including the two Azure Regions in China.</span></span> <span data-ttu-id="8da91-342">Para información actualizada sobre las regiones de Azure, vea este sitio web: <https://azure.microsoft.com/regions/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-342">For current up-to-date information about Azure regions see this website: <https://azure.microsoft.com/regions/></span></span>

### <span data-ttu-id="8da91-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>El concepto de máquina virtual de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>The Microsoft Azure Virtual Machine Concept</span></span>
<span data-ttu-id="8da91-344">Microsoft Azure ofrece una solución de infraestructura como servicio (IaaS) para hospedar máquinas virtuales con funcionalidades similares como una solución de virtualización local.</span><span class="sxs-lookup"><span data-stu-id="8da91-344">Microsoft Azure offers an Infrastructure as a Service (IaaS) solution to host Virtual Machines with similar functionalities as an on-premises virtualization solution.</span></span> <span data-ttu-id="8da91-345">Se pueden crear máquinas virtuales desde Azure Portal, PowerShell o la CLI, que también ofrecen funcionalidades de implementación y administración.</span><span class="sxs-lookup"><span data-stu-id="8da91-345">You are able to create Virtual Machines from within the Azure portal, PowerShell or CLI, which also offer deployment and management capabilities.</span></span>

<span data-ttu-id="8da91-346">El Administrador de recursos de Azure le permite aprovisionar sus aplicaciones mediante una plantilla declarativa.</span><span class="sxs-lookup"><span data-stu-id="8da91-346">Azure Resource Manager allows you to provision your applications using a declarative template.</span></span> <span data-ttu-id="8da91-347">En una plantilla, puede implementar varios servicios junto con sus dependencias.</span><span class="sxs-lookup"><span data-stu-id="8da91-347">In a single template, you can deploy multiple services along with their dependencies.</span></span> <span data-ttu-id="8da91-348">Se usa la misma plantilla de forma repetida para implementar la aplicación en cada fase de su ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="8da91-348">You use the same template to repeatedly deploy your application during every stage of the application life cycle.</span></span>

<span data-ttu-id="8da91-349">Puede encontrar más información sobre el uso de las plantillas de Resource Manager aquí:</span><span class="sxs-lookup"><span data-stu-id="8da91-349">More information about using Resource Manager templates can be found here:</span></span>

* <span data-ttu-id="8da91-350">[Implementación y administración de máquinas virtuales mediante plantillas de Azure Resource Manager y la CLI de Azure][../../linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="8da91-350">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="8da91-351">[Administre máquinas virtuales con Azure Resource Manager y PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span><span class="sxs-lookup"><span data-stu-id="8da91-351">[Manage virtual machines using Azure Resource Manager and PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span></span>
* <span data-ttu-id="8da91-352"><https://azure.microsoft.com/documentation/templates/></span><span class="sxs-lookup"><span data-stu-id="8da91-352"><https://azure.microsoft.com/documentation/templates/></span></span>

<span data-ttu-id="8da91-353">Otra característica interesante es la posibilidad de crear imágenes de máquinas virtuales, lo cual permite preparar algunos repositorios desde los que implementar rápidamente instancias de máquinas virtuales para satisfacer cualquier necesidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-353">Another interesting feature is the ability to create images from Virtual Machines, which allows you to prepare certain repositories from which you are able to quickly deploy Virtual machine instances, which meet your requirements.</span></span>

<span data-ttu-id="8da91-354">Para más información sobre la creación de imágenes de máquinas virtuales, vea [este artículo (Linux)][virtual-machines-linux-capture-image-resource-manager] o [este otro (Windows)][virtual-machines-windows-capture-image-resource-manager].</span><span class="sxs-lookup"><span data-stu-id="8da91-354">More information about creating images from Virtual Machines can be found in [this article (Linux)][virtual-machines-linux-capture-image-resource-manager] and [this article (Windows)][virtual-machines-windows-capture-image-resource-manager].</span></span>

#### <span data-ttu-id="8da91-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Dominios de error</span><span class="sxs-lookup"><span data-stu-id="8da91-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Fault Domains</span></span>
<span data-ttu-id="8da91-356">Los dominios de error representan una unidad física de error. Están relacionados muy estrechamente con la infraestructura física en los centros de datos y, si bien un bastidor o blade físico puede considerarse un dominio de error, no hay ninguna relación directa entre ambos.</span><span class="sxs-lookup"><span data-stu-id="8da91-356">Fault Domains represent a physical unit of failure, very closely related to the physical infrastructure contained in data centers, and while a physical blade or rack can be considered a Fault Domain, there is no direct one-to-one mapping between the two.</span></span>

<span data-ttu-id="8da91-357">Cuando se implementen varias máquinas virtuales como parte de un sistema SAP en los servicios de máquina virtual de Microsoft Azure, se puede influir en el controlador de tejido de Azure para implementar su aplicación en diferentes dominios de error, lo cual cumple los requisitos del Acuerdo de Nivel de Servicio de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-357">When you deploy multiple Virtual Machines as part of one SAP system in Microsoft Azure Virtual Machine Services, you can influence the Azure Fabric Controller to deploy your application into different Fault Domains, thereby meeting the requirements of the Microsoft Azure SLA.</span></span> <span data-ttu-id="8da91-358">Sin embargo, no se tienen el control de la distribución de los dominios de error en una unidad de escalado de Azure (colección de cientos de nodos de proceso o nodos de almacenamiento y redes) ni de la asignación de máquinas virtuales a un dominio de error específico.</span><span class="sxs-lookup"><span data-stu-id="8da91-358">However, the distribution of Fault Domains over an Azure Scale Unit (collection of hundreds of Compute nodes or Storage nodes and networking) or the assignment of VMs to a specific Fault Domain is something over which you do not have direct control.</span></span> <span data-ttu-id="8da91-359">Para ordenar al controlador de tejido de Azure que implemente un conjunto de máquinas virtuales en diferentes dominios de error, debe asignar un conjunto de disponibilidad de Azure a las máquinas virtuales en tiempo de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-359">In order to direct the Azure fabric controller to deploy a set of VMs over different Fault Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="8da91-360">Para más información sobre los conjuntos de disponibilidad de Azure, consulte el capítulo [Conjuntos de disponibilidad de Azure][planning-guide-3.2.3] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-360">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] in this document.</span></span>

#### <span data-ttu-id="8da91-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Dominios de actualización</span><span class="sxs-lookup"><span data-stu-id="8da91-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Upgrade Domains</span></span>
<span data-ttu-id="8da91-362">Los dominios de actualización representan una unidad lógica que ayuda a determinar cómo se actualiza una máquina virtual dentro de un sistema SAP, compuesto por instancias de SAP ejecutadas en varias máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-362">Upgrade Domains represent a logical unit that help to determine how a VM within an SAP system, that consists of SAP instances running in multiple VMs, is updated.</span></span> <span data-ttu-id="8da91-363">Cuando se produzca una actualización, Microsoft Azure actualiza estos dominios de actualización uno a uno.</span><span class="sxs-lookup"><span data-stu-id="8da91-363">When an upgrade occurs, Microsoft Azure goes through the process of updating these Upgrade Domains one by one.</span></span> <span data-ttu-id="8da91-364">Al distribuir las máquinas virtuales en tiempo de implementación en diferentes dominios de actualización, se puede proteger parcialmente el sistema SAP frente a posibles tiempos de inactividad.</span><span class="sxs-lookup"><span data-stu-id="8da91-364">By spreading VMs at deployment time over different Upgrade Domains, you can protect your SAP system partly from potential downtime.</span></span> <span data-ttu-id="8da91-365">Para forzar que Azure implemente las máquinas virtuales de un sistema SAP distribuidas en diferentes dominios de actualización, se debe establecer un atributo específico durante la implementación de cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-365">In order to force Azure to deploy the VMs of an SAP system spread over different Upgrade Domains, you need to set a specific attribute at deployment time of each VM.</span></span> <span data-ttu-id="8da91-366">De un modo similar a los dominios de error, una unidad de escalado de Azure se divide en varios dominios de actualización.</span><span class="sxs-lookup"><span data-stu-id="8da91-366">Similar to Fault Domains, an Azure Scale Unit is divided into multiple Upgrade Domains.</span></span> <span data-ttu-id="8da91-367">Para ordenar al controlador de tejido de Azure que implemente un conjunto de máquinas virtuales en diferentes dominios de actualización, debe asignar un conjunto de disponibilidad de Azure a las máquinas virtuales en tiempo de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-367">In order to direct the Azure fabric controller to deploy a set of VMs over different Upgrade Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="8da91-368">Para más información sobre conjuntos de disponibilidad de Azure, consulte el capítulo [Conjuntos de disponibilidad de Azure][planning-guide-3.2.3] a continuación.</span><span class="sxs-lookup"><span data-stu-id="8da91-368">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] below.</span></span>

#### <span data-ttu-id="8da91-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Conjuntos de disponibilidad de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Azure Availability Sets</span></span>
<span data-ttu-id="8da91-370">El controlador de tejido de Azure distribuye las instancias de Azure Virtual Machines de un conjunto de disponibilidad de Azure en diferentes dominios de error y de actualización.</span><span class="sxs-lookup"><span data-stu-id="8da91-370">Azure Virtual Machines within one Azure Availability Set are distributed by the Azure Fabric Controller over different Fault and Upgrade Domains.</span></span> <span data-ttu-id="8da91-371">El propósito de la distribución en diferentes dominios de error y de actualización es evitar el cierre de todas las máquinas virtuales de un sistema SAP en caso de mantenimiento de la infraestructura o error en un dominio de error.</span><span class="sxs-lookup"><span data-stu-id="8da91-371">The purpose of the distribution over different Fault and Upgrade Domains is to prevent all VMs of an SAP system from being shut down in the case of infrastructure maintenance or a failure within one Fault Domain.</span></span> <span data-ttu-id="8da91-372">De forma predeterminada, las máquinas virtuales no forman parte de un conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-372">By default, VMs are not part of an Availability Set.</span></span> <span data-ttu-id="8da91-373">La participación de una máquina virtual en un conjunto de disponibilidad se define en tiempo de implementación o más adelante mediante una reconfiguración y reimplementación de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-373">The participation of a VM in an Availability Set is defined at deployment time or later on by a reconfiguration and re-deployment of a VM.</span></span>

<span data-ttu-id="8da91-374">Para comprender el concepto de conjuntos de disponibilidad de Azure y la relación entre los conjuntos de disponibilidad y los dominios de error y actualización, lea [este artículo][virtual-machines-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="8da91-374">To understand the concept of Azure Availability Sets and the way Availability Sets relate to Fault and Upgrade Domains, read [this article][virtual-machines-manage-availability]</span></span>

<span data-ttu-id="8da91-375">Para definir conjuntos de disponibilidad para ARM mediante una plantilla de json, consulte las [especificaciones de la API de REST](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) y busque "disponibilidad".</span><span class="sxs-lookup"><span data-stu-id="8da91-375">To define availability sets for ARM via a json template see [the rest-api specs](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) and search for "availability".</span></span>

### <span data-ttu-id="8da91-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Almacenamiento: Almacenamiento de Microsoft Azure y discos de datos</span><span class="sxs-lookup"><span data-stu-id="8da91-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Storage: Microsoft Azure Storage and Data Disks</span></span>
<span data-ttu-id="8da91-377">Las máquinas virtuales de Microsoft Azure usan varios tipos de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-377">Microsoft Azure Virtual Machines utilize different storage types.</span></span> <span data-ttu-id="8da91-378">Al implementar SAP en los servicios de máquina virtual de Azure, es importante comprender las diferencias entre estos dos tipos principales de almacenamiento:</span><span class="sxs-lookup"><span data-stu-id="8da91-378">When implementing SAP on Azure Virtual Machine Services, it is important to understand the differences between these two main types of storage:</span></span>

* <span data-ttu-id="8da91-379">Almacenamiento volátil, no persistente.</span><span class="sxs-lookup"><span data-stu-id="8da91-379">Non-Persistent, volatile storage.</span></span>
* <span data-ttu-id="8da91-380">Almacenamiento persistente.</span><span class="sxs-lookup"><span data-stu-id="8da91-380">Persistent storage.</span></span>

<span data-ttu-id="8da91-381">El almacenamiento no persistente está conectado directamente a las máquinas virtuales en ejecución y reside en los propios nodos de proceso: el almacenamiento de instancia local (almacenamiento temporal).</span><span class="sxs-lookup"><span data-stu-id="8da91-381">The non-persistent storage is directly attached to the running Virtual Machines and resides on the compute nodes themselves – the local instance storage (temporary storage).</span></span> <span data-ttu-id="8da91-382">El tamaño depende del tamaño de la máquina virtual elegida en el inicio de la implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-382">The size depends on the size of the Virtual Machine chosen when the deployment started.</span></span> <span data-ttu-id="8da91-383">Este tipo de almacenamiento es volátil y, por tanto, el disco se inicializa cuando se reinicia una instancia de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-383">This storage type is volatile and therefore the disk is initialized when a Virtual Machine instance is restarted.</span></span> <span data-ttu-id="8da91-384">Normalmente, el archivo de paginación del sistema operativo se encuentra en este disco temporal.</span><span class="sxs-lookup"><span data-stu-id="8da91-384">Typically, the pagefile for the operating system is located on this temporary disk.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-386">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-386">Windows</span></span>
>
> <span data-ttu-id="8da91-387">En las máquinas virtuales de Windows la unidad temporal se monta como unidad D:\ en una máquina virtual implementada.</span><span class="sxs-lookup"><span data-stu-id="8da91-387">On Windows VMs the temp drive is mounted as drive D:\ in a deployed VM.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-389">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-389">Linux</span></span>
>
> <span data-ttu-id="8da91-390">En las máquinas virtuales de Linux está montada como /mnt/Resource o /mnt.</span><span class="sxs-lookup"><span data-stu-id="8da91-390">On Linux VMs, it's mounted as /mnt/resource or /mnt.</span></span> <span data-ttu-id="8da91-391">Para obtener información, consulte:</span><span class="sxs-lookup"><span data-stu-id="8da91-391">See more details here:</span></span>
>
> * <span data-ttu-id="8da91-392">[Acoplamiento de un disco de datos a una máquina virtual Linux][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="8da91-392">[How to Attach a Data Disk to a Linux Virtual Machine][virtual-machines-linux-how-to-attach-disk]</span></span>
> * <span data-ttu-id="8da91-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span><span class="sxs-lookup"><span data-stu-id="8da91-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span></span>
>
>

- - -
<span data-ttu-id="8da91-394">La unidad en sí es volátil porque se almacena en el servidor host.</span><span class="sxs-lookup"><span data-stu-id="8da91-394">The actual drive is volatile because it is getting stored on the host server itself.</span></span> <span data-ttu-id="8da91-395">Si mueve la máquina virtual en una reimplementación (por ejemplo, debido a mantenimiento en el host o el apagado y reinicio), el contenido de la unidad se pierde.</span><span class="sxs-lookup"><span data-stu-id="8da91-395">If the VM moved in a redeployment (for example due to maintenance on the host or shutdown and restart) the content of the drive is lost.</span></span> <span data-ttu-id="8da91-396">Por tanto, no deben almacenarse datos importantes en esta unidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-396">Therefore, it is not an option to store any important data on this drive.</span></span> <span data-ttu-id="8da91-397">El tipo de medios usados para este tipo de almacenamiento es diferente en cada serie de máquinas virtuales. Las características de rendimiento eran las siguientes en junio de 2015:</span><span class="sxs-lookup"><span data-stu-id="8da91-397">The type of media used for this type of storage differs between different VM series with very different performance characteristics which as of June 2015 look like:</span></span>

* <span data-ttu-id="8da91-398">A5-A7: rendimiento muy limitado.</span><span class="sxs-lookup"><span data-stu-id="8da91-398">A5-A7: Very limited performance.</span></span> <span data-ttu-id="8da91-399">Solo se recomienda para el archivo de paginación.</span><span class="sxs-lookup"><span data-stu-id="8da91-399">Not recommended for anything beyond page file</span></span>
* <span data-ttu-id="8da91-400">A8-A11: características de rendimiento muy buenas con 10 000 IOPS y una tasa de más de 1 GB/seg.</span><span class="sxs-lookup"><span data-stu-id="8da91-400">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="8da91-401">Serie D: características de rendimiento muy buenas con 10 000 IOPS y una tasa de más de 1 GB/seg.</span><span class="sxs-lookup"><span data-stu-id="8da91-401">D-Series: Very good performance characteristics with some then thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="8da91-402">Serie DS: características de rendimiento muy buenas con 10 000 IOPS y una tasa de más de 1 GB/seg.</span><span class="sxs-lookup"><span data-stu-id="8da91-402">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="8da91-403">Serie G: características de rendimiento muy buenas con 10 000 IOPS y una tasa de más de 1 GB/seg.</span><span class="sxs-lookup"><span data-stu-id="8da91-403">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="8da91-404">Serie GS: características de rendimiento muy buenas con 10 000 IOPS y una tasa de más de 1 GB/seg.</span><span class="sxs-lookup"><span data-stu-id="8da91-404">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>

<span data-ttu-id="8da91-405">Las afirmaciones anteriores se aplican a los tipos de máquinas virtuales que estén certificados para utilizarse con SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-405">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="8da91-406">Algunas características de DBMS sacan partido a las series de máquinas virtuales con rendimiento y cantidad de IOPS excelentes.</span><span class="sxs-lookup"><span data-stu-id="8da91-406">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features.</span></span> <span data-ttu-id="8da91-407">Para más información, vea la [guía de implementación de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-407">For more information, see the [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="8da91-408">El almacenamiento de Microsoft Azure proporciona almacenamiento persistente y los niveles habituales de protección y redundancia del almacenamiento SAN.</span><span class="sxs-lookup"><span data-stu-id="8da91-408">Microsoft Azure Storage provides persisted storage and the typical levels of protection and redundancy seen on SAN storage.</span></span> <span data-ttu-id="8da91-409">Los discos basados en el almacenamiento de Azure son el disco duro virtual (VHD) ubicado en los servicios de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-409">Disks based on Azure Storage are virtual hard disk (VHDs) located in the Azure Storage Services.</span></span> <span data-ttu-id="8da91-410">El disco de sistema operativo local (Windows C:\, Linux /dev/sda1) se guarda en Azure Storage, al igual que los volúmenes o discos adicionales montados en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-410">The local OS-Disk (Windows C:\, Linux /dev/sda1) is stored on the Azure Storage, and additional Volumes/Disks mounted to the VM get stored there, too.</span></span>

<span data-ttu-id="8da91-411">Se puede cargar un disco duro virtual desde el sistema local o crear unidades virtuales vacías en Azure para asociarlas a las máquinas virtuales implementadas.</span><span class="sxs-lookup"><span data-stu-id="8da91-411">It is possible to upload an existing VHD from on-premises or create empty ones from within Azure and attach those to deployed VMs.</span></span>

<span data-ttu-id="8da91-412">Después de crear o cargar un disco duro virtual en el almacenamiento de Azure, se puede montar o conectar esta unidad a una máquina virtual, así como copiar discos duros virtuales (no montados).</span><span class="sxs-lookup"><span data-stu-id="8da91-412">After creating or uploading a VHD into Azure Storage, it is possible to mount and attach those to an existing Virtual Machine and to copy existing (unmounted) VHD.</span></span>

<span data-ttu-id="8da91-413">Dado que esos discos duros virtuales son persistentes, los datos y las modificaciones no se pierden en los reinicios y nuevas instancias de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-413">As those VHDs are persisted, data and changes within those are safe when rebooting and recreating a Virtual Machine instance.</span></span> <span data-ttu-id="8da91-414">Incluso aunque se elimine una instancia, estos discos duros virtuales se mantienen a salvo y pueden volver a implementarse o, en el caso de discos de SO, pueden montarse en otras máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-414">Even if an instance is deleted, these VHDs stay safe and can be redeployed or in case of non-OS disks can be mounted to other VMs.</span></span>

<span data-ttu-id="8da91-415">Dentro de la red de almacenamiento de Azure pueden configurarse varios niveles de redundancia:</span><span class="sxs-lookup"><span data-stu-id="8da91-415">Within the network of Azure Storage different redundancy levels can be configured:</span></span>

* <span data-ttu-id="8da91-416">El nivel mínimo que se puede seleccionar es "redundancia local", que es equivalente a tres réplicas de los datos en el mismo centro de datos de una región de Azure (consulte el capítulo [Regiones de Azure][planning-guide-3.1]).</span><span class="sxs-lookup"><span data-stu-id="8da91-416">Minimum level that can be selected is ‘local redundancy’, which is equivalent to three-replica of the data within the same data center of an Azure Region (see chapter [Azure Regions][planning-guide-3.1]).</span></span>
* <span data-ttu-id="8da91-417">En el almacenamiento con redundancia de zona se propagan las tres imágenes en diferentes centros de datos en la misma región de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-417">Zone redundant storage, which spreads the three images over different data centers within the same Azure Region.</span></span>
* <span data-ttu-id="8da91-418">El nivel de redundancia predeterminado es la redundancia geográfica, que replica asincrónicamente el contenido en otras tres imágenes de los datos en otra región de Azure ubicada en la misma región geopolítica.</span><span class="sxs-lookup"><span data-stu-id="8da91-418">Default redundancy level is geographic redundancy, which asynchronously replicates the content into another three images of the data into another Azure Region, which is hosted in the same geopolitical region.</span></span>

<span data-ttu-id="8da91-419">Consulte también la tabla de la parte superior de este artículo para ver las diferentes opciones de redundancia: <https://azure.microsoft.com/pricing/details/storage/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-419">Also see the table on top of this article regarding the different redundancy options: <https://azure.microsoft.com/pricing/details/storage/></span></span>

<span data-ttu-id="8da91-420">Las siguientes referencias incluyen más información sobre Azure Storage:</span><span class="sxs-lookup"><span data-stu-id="8da91-420">More information about Azure Storage can be found here:</span></span>

* <span data-ttu-id="8da91-421"><https://azure.microsoft.com/documentation/services/storage/></span><span class="sxs-lookup"><span data-stu-id="8da91-421"><https://azure.microsoft.com/documentation/services/storage/></span></span>
* <span data-ttu-id="8da91-422"><https://azure.microsoft.com/services/site-recovery></span><span class="sxs-lookup"><span data-stu-id="8da91-422"><https://azure.microsoft.com/services/site-recovery></span></span>
* <span data-ttu-id="8da91-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span><span class="sxs-lookup"><span data-stu-id="8da91-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span></span>
* <span data-ttu-id="8da91-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span><span class="sxs-lookup"><span data-stu-id="8da91-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span></span>

#### <a name="azure-standard-storage"></a><span data-ttu-id="8da91-425">Almacenamiento de Azure estándar</span><span class="sxs-lookup"><span data-stu-id="8da91-425">Azure Standard Storage</span></span>
<span data-ttu-id="8da91-426">El almacenamiento estándar de Azure era el tipo de almacenamiento disponible cuando se lanzó IaaS de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-426">Azure Standard storage was the type of storage available when Azure IaaS was released.</span></span> <span data-ttu-id="8da91-427">Se exigían cuotas de E/S por segundo por cada disco.</span><span class="sxs-lookup"><span data-stu-id="8da91-427">There were IOPS quotas enforced per single disk.</span></span> <span data-ttu-id="8da91-428">La latencia experimentada no estaba en el mismo nivel que la de los dispositivos de SAN/NAS implementados habitualmente en sistemas de gama alta de SAP hospedados de forma local.</span><span class="sxs-lookup"><span data-stu-id="8da91-428">Latency experienced was not in the same class as SAN/NAS devices typically deployed for high-end SAP systems hosted on-premises.</span></span> <span data-ttu-id="8da91-429">No obstante, el almacenamiento estándar de Azure resultó suficiente para cientos de sistemas SAP implementados en Azure en ese momento.</span><span class="sxs-lookup"><span data-stu-id="8da91-429">Nevertheless, the Azure Standard Storage proved sufficient for many hundreds SAP systems meanwhile deployed in Azure.</span></span>

<span data-ttu-id="8da91-430">Los discos almacenados en las cuentas de almacenamiento estándar de Azure se cobran según los datos reales que se almacenan, el volumen de las transacciones de almacenamiento, las transferencias de datos salientes y la opción de redundancia seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8da91-430">Disks that are stored on Azure Standard Storage Accounts are charged based on the actual data that is stored, the volume of storage transactions, outbound data transfers, and redundancy option chosen.</span></span> <span data-ttu-id="8da91-431">Pueden crearse varios discos con el tamaño máximo de 1 TB, pero, mientras permanezcan vacíos, no se realiza ningún cobro.</span><span class="sxs-lookup"><span data-stu-id="8da91-431">Many disks can be created at the maximum 1TB in size, but as long as those remain empty there is no charge.</span></span> <span data-ttu-id="8da91-432">Si después se llena un disco duro virtual con 100 GB, se cobra el almacenamiento de 100 GB y no el tamaño nominal con el que se creó.</span><span class="sxs-lookup"><span data-stu-id="8da91-432">If you then fill one VHD with 100GB each, you are charged for storing 100GB and not for the nominal size the VHD got created with.</span></span>

#### <span data-ttu-id="8da91-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Almacenamiento premium de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Azure Premium Storage</span></span>
<span data-ttu-id="8da91-434">En abril de 2015, Microsoft presentó Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-434">In April 2015, Microsoft introduced Azure Premium Storage.</span></span> <span data-ttu-id="8da91-435">El almacenamiento Premium se introdujo con el objetivo de proporcionar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-435">Premium Storage got introduced with the goal to provide:</span></span>

* <span data-ttu-id="8da91-436">Mejor latencia de E/S</span><span class="sxs-lookup"><span data-stu-id="8da91-436">Better I/O latency.</span></span>
* <span data-ttu-id="8da91-437">Mejor rendimiento</span><span class="sxs-lookup"><span data-stu-id="8da91-437">Better throughput.</span></span>
* <span data-ttu-id="8da91-438">Menor variabilidad de la latencia de E/S</span><span class="sxs-lookup"><span data-stu-id="8da91-438">Less variability in I/O latency.</span></span>

<span data-ttu-id="8da91-439">Para ello, se introdujeron numerosos cambios. Los dos más importantes son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-439">For that purpose, many changes were introduced of which the two most significant are:</span></span>

* <span data-ttu-id="8da91-440">Uso de discos SSD en los nodos de almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-440">Usage of SSD disks in the Azure Storage nodes</span></span>
* <span data-ttu-id="8da91-441">Una nueva memoria caché de lectura respaldada por el SSD local de un nodo de proceso de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-441">A new read cache that is backed by the local SSD of an Azure compute node</span></span>

<span data-ttu-id="8da91-442">En contraposición al almacenamiento Estándar, cuyas funcionalidades no dependían del tamaño del disco (o disco duro virtual), Premium Storage tiene actualmente tres categorías diferentes de disco, que se indican al final de este artículo antes de la sección de preguntas más frecuentes: <https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-442">In opposite to Standard storage where capabilities did not change dependent on the size of the disk (or VHD), Premium Storage currently has three different disk categories, which are shown in this article: <https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/></span></span>

<span data-ttu-id="8da91-443">Se puede comprobar que la cantidad de E/S por segundo y el rendimiento de cada disco dependen de la categoría de tamaño de los discos.</span><span class="sxs-lookup"><span data-stu-id="8da91-443">You see that IOPS/disk and disk throughput/disk are dependent on the size category of the disks</span></span>

<span data-ttu-id="8da91-444">La base del coste en el caso de Premium Storage no es el volumen real de los datos almacenados en estos discos, sino la categoría de tamaño de estas unidades, independientemente de la cantidad de datos almacenados en ellas.</span><span class="sxs-lookup"><span data-stu-id="8da91-444">Cost basis in the case of Premium Storage is not the actual data volume stored in such disks, but the size category of such a disk, independent of the amount of the data that is stored within the disk.</span></span>

<span data-ttu-id="8da91-445">También se pueden crear discos en Premium Storage sin correspondencia directa con las categorías de tamaño mostradas.</span><span class="sxs-lookup"><span data-stu-id="8da91-445">You also can create disks on Premium Storage that are not directly mapping into the size categories shown.</span></span> <span data-ttu-id="8da91-446">Esto puede ocurrir especialmente cuando se copian discos del almacenamiento estándar en Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-446">This may be the case, especially when copying disks from Standard Storage into Premium Storage.</span></span> <span data-ttu-id="8da91-447">En esos casos, se asigna la opción de disco de almacenamiento Premium inmediatamente superior.</span><span class="sxs-lookup"><span data-stu-id="8da91-447">In such cases a mapping to the next largest Premium Storage disk option is performed.</span></span>

<span data-ttu-id="8da91-448">Hay que tener en cuenta que solo ciertas series de máquinas virtuales pueden beneficiarse de Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-448">Be aware that only certain VM series can benefit from the Azure Premium Storage.</span></span> <span data-ttu-id="8da91-449">En diciembre de 2015, estas series eran la DS y GS.</span><span class="sxs-lookup"><span data-stu-id="8da91-449">As of Dec 2015, these are the DS- and GS-series.</span></span> <span data-ttu-id="8da91-450">La serie DS es prácticamente idéntica a la serie D, con la excepción de que en la serie DS se pueden montar máquinas virtuales basadas en Premium Storage además de los discos hospedados en el almacenamiento estándar de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-450">The DS-series is basically the same as D-series with the exception that DS-series has the ability to mount Premium Storage based VMs additionally to disks that are hosted on Azure Standard Storage.</span></span> <span data-ttu-id="8da91-451">Ocurre lo mismo con la serie G en comparación con la serie GS.</span><span class="sxs-lookup"><span data-stu-id="8da91-451">Same thing is valid for G-series compared to GS-series.</span></span>

<span data-ttu-id="8da91-452">En la sección sobre máquinas virtuales de la serie DS de [este artículo (Linux)][virtual-machines-sizes-linux] y de [este otro (Windows)][virtual-machines-sizes-windows] también se indica que existen limitaciones del volumen de datos en discos de Premium Storage en lo que respecta a la granularidad del nivel de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-452">If you are checking out the part of the DS-series VMs in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows], you realize that there are data volume limitations to Premium Storage disks on the granularity of the VM level.</span></span> <span data-ttu-id="8da91-453">Las máquinas virtuales de las series DS o GS también tienen limitaciones diferentes con respecto al número de discos de datos que se pueden montar.</span><span class="sxs-lookup"><span data-stu-id="8da91-453">Different DS-series or GS-series VMs also have different limitations in regards to the number of data disks that can be mounted.</span></span> <span data-ttu-id="8da91-454">Estos límites están documentados en el artículo mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8da91-454">These limits are documented in the article mentioned above as well.</span></span> <span data-ttu-id="8da91-455">Básicamente significa que si, por ejemplo, se montan 32 discos P30 en una sola máquina virtual DS14, NO se puede obtener 32 veces el rendimiento máximo de un disco P30.</span><span class="sxs-lookup"><span data-stu-id="8da91-455">But in essence it means that if you, for example, mount 32 x P30 disks to a single DS14 VM you can NOT get 32 x the maximum throughput of a P30 disk.</span></span> <span data-ttu-id="8da91-456">En su lugar, el rendimiento máximo en el nivel de máquina virtual limita el rendimiento, como se indica en el artículo.</span><span class="sxs-lookup"><span data-stu-id="8da91-456">Instead the maximum throughput on VM level as documented in the article limits data throughput.</span></span>

<span data-ttu-id="8da91-457">Se puede encontrar más información sobre Premium Storage aquí: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2>.</span><span class="sxs-lookup"><span data-stu-id="8da91-457">More information on Premium Storage can be found here: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span></span>

#### <span data-ttu-id="8da91-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Managed Disks</span><span class="sxs-lookup"><span data-stu-id="8da91-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Managed Disks</span></span>
<span data-ttu-id="8da91-459">Los discos Managed Disks son un tipo de recurso nuevo de Azure Resource Manager que puede usarse en lugar de discos duros virtuales almacenados en cuentas de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-459">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="8da91-460">Los discos Managed Disks se alinean automáticamente con el conjunto de disponibilidad de la máquina virtual a la que están conectados y, por tanto, aumentan la disponibilidad de la máquina virtual y los servicios que se ejecutan en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-460">Managed Disks automatically align with the Availability Set of the virtual machine they are attached to and therefore increase the availability of your virtual machine and the services that are running on the virtual machine.</span></span> <span data-ttu-id="8da91-461">Para más información, lea [este artículo de información general](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="8da91-461">For more information, read the [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="8da91-462">Se recomienda usar discos Managed Disks, porque simplifican la implementación y administración de las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-462">We recommend to you use Managed disk, because they simplify the deployment and management of your virtual machines.</span></span>
<span data-ttu-id="8da91-463">SAP actualmente solo admite Managed Disks de tipo Premium.</span><span class="sxs-lookup"><span data-stu-id="8da91-463">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="8da91-464">Para más información, lea la nota de SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="8da91-464">For more information, read SAP Note [1928533].</span></span>

#### <a name="azure-storage-accounts"></a><span data-ttu-id="8da91-465">Cuentas de almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-465">Azure Storage Accounts</span></span>
<span data-ttu-id="8da91-466">Al implementar servicios o máquinas virtuales en Azure, la implementación de discos duros virtuales e imágenes de máquinas virtuales puede estar organizada en unidades denominadas cuentas de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-466">When deploying services or VMs in Azure, deployment of VHDs and VM Images can be organized in units called Azure Storage Accounts.</span></span> <span data-ttu-id="8da91-467">Al planear una implementación de Azure, debe considerar detenidamente las restricciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-467">When planning an Azure deployment, you need to carefully consider the restrictions of Azure.</span></span> <span data-ttu-id="8da91-468">Por un lado, hay un número limitado de cuentas de almacenamiento por suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-468">On the one side, there is a limited number of Storage Accounts per Azure subscription.</span></span> <span data-ttu-id="8da91-469">Aunque cada cuenta de almacenamiento de Azure puede contener un gran número de archivos de disco duro virtual, hay un límite fijo en el número total de IOPS por cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-469">Although each Azure Storage Account can hold a large number of VHD files, there is a fixed limit on the total IOPS per Storage Account.</span></span> <span data-ttu-id="8da91-470">Al implementar cientos de máquinas virtuales de SAP con sistemas DBMS que generen una cantidad importante de llamadas de E/S, se recomienda distribuir las máquinas virtuales de DBMS con IOPS elevado entre varias cuentas de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-470">When deploying hundreds of SAP VMs with DBMS systems creating significant IO calls, it is recommended to distribute high IOPS DBMS VMs between multiple Azure Storage Accounts.</span></span> <span data-ttu-id="8da91-471">Hay que tener cuidado para no superar el límite actual de cuentas de almacenamiento de Azure por suscripción.</span><span class="sxs-lookup"><span data-stu-id="8da91-471">Care must be taken not to exceed the current limit of Azure Storage Accounts per subscription.</span></span> <span data-ttu-id="8da91-472">Dado que el almacenamiento es una parte fundamental de la implementación de bases de datos en un sistema SAP, este concepto se analiza con más detenimiento en la [Guía de implementación de DBMS][dbms-guide] ya mencionada.</span><span class="sxs-lookup"><span data-stu-id="8da91-472">Because storage is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the already referenced [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="8da91-473">Se puede encontrar más información sobre las cuentas de Azure Storage en [este artículo][storage-scalability-targets].</span><span class="sxs-lookup"><span data-stu-id="8da91-473">More information about Azure Storage Accounts can be found in [this article][storage-scalability-targets].</span></span> <span data-ttu-id="8da91-474">En este artículo se indican las diferencias de limitaciones entre las cuentas de almacenamiento estándar y las cuentas de Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-474">Reading this article, you realize that there are differences in the limitations between Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="8da91-475">Las mayores diferencias vienen del volumen de datos que se pueden almacenar en cada cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-475">Major differences are the volume of data that can be stored within such a Storage Account.</span></span> <span data-ttu-id="8da91-476">En el almacenamiento estándar el volumen es una magnitud mayor que en el almacenamiento Premium.</span><span class="sxs-lookup"><span data-stu-id="8da91-476">In Standard Storage the volume is a magnitude larger than with Premium Storage.</span></span> <span data-ttu-id="8da91-477">Por otro lado, la cuenta de almacenamiento estándar está muy limitada en lo que respecta a E/S por segundo (consulte la columna "Velocidad de solicitudes"), mientras que la cuenta de Azure Premium Storage no tiene estas limitaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-477">On the other side, the Standard Storage Account is severely limited in IOPS (see column ‘Total Request Rate’), whereas the Azure Premium Storage Account has no such limitation.</span></span> <span data-ttu-id="8da91-478">Los detalles y los resultados de estas diferencias cuando se tratan en la sección sobre implementaciones de sistemas SAP, especialmente los servidores DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-478">We will discuss details and results of these differences when discussing the deployments of SAP systems, especially the DBMS servers.</span></span>

<span data-ttu-id="8da91-479">En una cuenta de almacenamiento, pueden crearse contenedores diferentes con el fin de organizar y clasificar varios discos duros virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-479">Within a Storage Account, you have the possibility to create different containers for the purpose of organizing and categorizing different VHDs.</span></span> <span data-ttu-id="8da91-480">Estos contenedores se suelen usar para, por ejemplo, separar discos duros virtuales de diferentes máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-480">These containers are usually used to, for example, separate VHDs of different VMs.</span></span> <span data-ttu-id="8da91-481">Usar un único contenedor o varios contenedores en una sola cuenta de almacenamiento de Azure no influye en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-481">There are no performance implications in using just one container or multiple containers underneath a single Azure Storage Account.</span></span>

<span data-ttu-id="8da91-482">Dentro de Azure, un nombre de disco duro virtual tiene la siguiente nomenclatura, que debe indicar un nombre único para el disco duro virtual en Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-482">Within Azure a VHD name follows the following naming connection that needs to provide a unique name for the VHD within Azure:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="8da91-483">Como se ha mencionado, la cadena de texto anterior debe identificar de forma unívoca el disco duro virtual almacenado en el almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-483">As mentioned the string above needs to uniquely identify the VHD that is stored on Azure Storage.</span></span>

### <span data-ttu-id="8da91-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Redes de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Microsoft Azure Networking</span></span>
<span data-ttu-id="8da91-485">Microsoft Azure proporciona una infraestructura de red que permite la correspondencia de todos los escenarios que deseamos obtener con el software SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-485">Microsoft Azure provides a network infrastructure, which allows the mapping of all scenarios, which we want to realize with SAP software.</span></span> <span data-ttu-id="8da91-486">Principales capacidades:</span><span class="sxs-lookup"><span data-stu-id="8da91-486">The capabilities are:</span></span>

* <span data-ttu-id="8da91-487">Acceso desde el exterior directamente a las máquinas virtuales a través de ssh/VNC o de Windows Terminal Services</span><span class="sxs-lookup"><span data-stu-id="8da91-487">Access from the outside, directly to the VMs via Windows Terminal Services or ssh/VNC</span></span>
* <span data-ttu-id="8da91-488">Acceso a servicios y puertos específicos usados por las aplicaciones dentro de las máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="8da91-488">Access to services and specific ports used by applications within the VMs</span></span>
* <span data-ttu-id="8da91-489">Comunicación interna y resolución de nombres entre un grupo de máquinas virtuales implementadas como máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-489">Internal Communication and Name Resolution between a group of VMs deployed as Azure VMs</span></span>
* <span data-ttu-id="8da91-490">Conectividad entre locales entre la red local de un cliente y la red de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-490">Cross-premises Connectivity between a customer’s on-premises network and the Azure network</span></span>
* <span data-ttu-id="8da91-491">Conectividad entre sitios de Azure y varias regiones de Azure o varios centros de datos</span><span class="sxs-lookup"><span data-stu-id="8da91-491">Cross Azure Region or data center connectivity between Azure sites</span></span>

<span data-ttu-id="8da91-492">Se puede encontrar más información así: <https://azure.microsoft.com/documentation/services/virtual-network/></span><span class="sxs-lookup"><span data-stu-id="8da91-492">More information can be found here: <https://azure.microsoft.com/documentation/services/virtual-network/></span></span>

<span data-ttu-id="8da91-493">Hay muchas posibilidades diferentes para configurar el nombre y la resolución IP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-493">There are many different possibilities to configure name and IP resolution in Azure.</span></span> <span data-ttu-id="8da91-494">En este documento, los escenarios exclusivos en la nube dependen del uso predeterminado de DNS de Azure (a diferencia de definir un servicio propio de DNS).</span><span class="sxs-lookup"><span data-stu-id="8da91-494">In this document, Cloud-Only scenarios rely on the default of using Azure DNS (in contrast to defining an own DNS service).</span></span> <span data-ttu-id="8da91-495">También puede usarse un nuevo servicio DNS de Azure en lugar de configurar un servidor DNS propio.</span><span class="sxs-lookup"><span data-stu-id="8da91-495">There is also a new Azure DNS service, which can be used instead of setting up your own DNS server.</span></span> <span data-ttu-id="8da91-496">Se puede encontrar más información en [este artículo][virtual-networks-manage-dns-in-vnet] y en [esta página](https://azure.microsoft.com/services/dns/).</span><span class="sxs-lookup"><span data-stu-id="8da91-496">More information can be found in [this article][virtual-networks-manage-dns-in-vnet] and on [this page](https://azure.microsoft.com/services/dns/).</span></span>

<span data-ttu-id="8da91-497">Para escenarios entre locales se da por hecho que las instalaciones locales de AD/OpenLDAP/DNS se han ampliado a través de VPN o con una conexión privada a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-497">For cross-premises scenarios, we are relying on the fact that the on-premises AD/OpenLDAP/DNS has been extended via VPN or private connection to Azure.</span></span> <span data-ttu-id="8da91-498">Para determinados escenarios documentados aquí, sería necesario disponer de una réplica de AD/OpenLDAP instalada en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-498">For certain scenarios as documented here, it might be necessary to have an AD/OpenLDAP replica installed in Azure.</span></span>

<span data-ttu-id="8da91-499">Dado que la red y la resolución de nombres es una parte fundamental de la implementación de bases de datos en un sistema SAP, este concepto se analiza con más detenimiento en la [Guía de implementación de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-499">Because networking and name resolution is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the [DBMS Deployment Guide][dbms-guide].</span></span>

##### <a name="azure-virtual-networks"></a><span data-ttu-id="8da91-500">Redes virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-500">Azure Virtual Networks</span></span>
<span data-ttu-id="8da91-501">Se puede definir el intervalo de direcciones IP privadas asignadas por la funcionalidad de DHCP de Azure mediante la creación de una instancia de Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="8da91-501">By building up an Azure Virtual Network, you can define the address range of the private IP addresses allocated by Azure DHCP functionality.</span></span> <span data-ttu-id="8da91-502">En escenarios entre locales, Azure seguirá asignando el intervalo de direcciones IP definido mediante DHCP.</span><span class="sxs-lookup"><span data-stu-id="8da91-502">In cross-premises scenarios, the IP address range defined is still allocated using DHCP by Azure.</span></span> <span data-ttu-id="8da91-503">Sin embargo, la resolución de nombres de dominio se lleva a cabo en local (suponiendo que las máquinas virtuales formen parte de un dominio local) y, por tanto, se pueden resolver direcciones independientemente de los diferentes servicios de Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="8da91-503">However, Domain Name resolution is done on-premises (assuming that the VMs are a part of an on-premises domain) and hence can resolve addresses beyond different Azure Cloud Services.</span></span>

<span data-ttu-id="8da91-504">Cada máquina virtual de Azure debe estar conectada a una red virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-504">Every Virtual Machine in Azure needs to be connected to a Virtual Network.</span></span>

<span data-ttu-id="8da91-505">Se puede encontrar más información en [este artículo][resource-groups-networking] y en [esta página](https://azure.microsoft.com/documentation/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="8da91-505">More details can be found in [this article][resource-groups-networking] and on [this page](https://azure.microsoft.com/documentation/services/virtual-network/).</span></span>

[comment]: <> (MShermannd TODO Couldn't find an article which includes the OpenLDAP topic + ARM; )
[comment]: <> (MSSedusch <https://channel9.msdn.com/Blogs/Open/Load-balancing-highly-available-Linux-services-on-Windows-Azure-OpenLDAP-and-MySQL>)

> [!NOTE]
> <span data-ttu-id="8da91-508">De forma predeterminada, una vez que se implementa una máquina virtual no se puede cambiar la configuración de red virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-508">By default, once a VM is deployed you cannot change the Virtual Network configuration.</span></span> <span data-ttu-id="8da91-509">La configuración de TCP/IP debe depender del servidor DHCP de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-509">The TCP/IP settings must be left to the Azure DHCP server.</span></span> <span data-ttu-id="8da91-510">El comportamiento predeterminado es la asignación de IP dinámicas.</span><span class="sxs-lookup"><span data-stu-id="8da91-510">Default behavior is Dynamic IP assignment.</span></span>
>
>

<span data-ttu-id="8da91-511">La dirección MAC de la tarjeta de red virtual puede cambiar, por ejemplo, después de un cambio de tamaño. En ese caso, el SO invitado Windows o Linux identifica la nueva tarjeta de red y utiliza automáticamente DHCP para asignar las direcciones IP y DNS.</span><span class="sxs-lookup"><span data-stu-id="8da91-511">The MAC address of the virtual network card may change, for example after resize and the Windows or Linux guest OS picks up the new network card and automatically uses DHCP to assign the IP and DNS addresses in this case.</span></span>

##### <a name="static-ip-assignment"></a><span data-ttu-id="8da91-512">Asignación de direcciones IP estáticas</span><span class="sxs-lookup"><span data-stu-id="8da91-512">Static IP Assignment</span></span>
<span data-ttu-id="8da91-513">Se pueden asignar direcciones IP reservadas o fijas a las máquinas virtuales de una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-513">It is possible to assign fixed or reserved IP addresses to VMs within an Azure Virtual Network.</span></span> <span data-ttu-id="8da91-514">La ejecución de máquinas virtuales en una red virtual de Azure es una gran oportunidad para aprovechar esta funcionalidad así lo requieren algunos escenarios.</span><span class="sxs-lookup"><span data-stu-id="8da91-514">Running the VMs in an Azure Virtual Network opens a great possibility to leverage this functionality if needed or required for some scenarios.</span></span> <span data-ttu-id="8da91-515">La asignación de IP seguirá siendo válida mientras exista la máquina virtual, independientemente de si la máquina virtual está en ejecución o cerrada.</span><span class="sxs-lookup"><span data-stu-id="8da91-515">The IP assignment remains valid throughout the existence of the VM, independent of whether the VM is running or shutdown.</span></span> <span data-ttu-id="8da91-516">Como resultado, se debe tener en cuenta el número total de máquinas virtuales (en ejecución y detenidas) al definir el intervalo de direcciones IP para la red virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-516">As a result, you need to take the overall number of VMs (running and stopped VMS) into account when defining the range of IP addresses for the Virtual Network.</span></span> <span data-ttu-id="8da91-517">La asignación de dirección IP se mantiene hasta que se elimine la máquina virtual y su interfaz de red o hasta que se cancele la asignación.</span><span class="sxs-lookup"><span data-stu-id="8da91-517">The IP address remains assigned either until the VM and its Network Interface is deleted or until the IP address gets de-assigned again.</span></span> <span data-ttu-id="8da91-518">Para más información, lea [este artículo][virtual-networks-static-private-ip-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="8da91-518">For more information, read [this article][virtual-networks-static-private-ip-arm-pportal].</span></span>

##### <a name="multiple-nics-per-vm"></a><span data-ttu-id="8da91-519">Varias NIC por máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-519">Multiple NICs per VM</span></span>
<span data-ttu-id="8da91-520">Se pueden definir varias tarjetas de interfaz de red virtual (vNIC) en una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-520">You can define multiple virtual network interface cards (vNIC) for an Azure Virtual Machine.</span></span> <span data-ttu-id="8da91-521">Con la capacidad de tener varias vNIC, se puede comenzar a configurar el tráfico de red donde, por ejemplo, el tráfico del cliente se enrute a través de una vNIC y el tráfico back-end se enrute a través de una segunda vNIC.</span><span class="sxs-lookup"><span data-stu-id="8da91-521">With the ability to have multiple vNICs you can start to set up network traffic separation where, for example, client traffic is routed through one vNIC and backend traffic is routed through a second vNIC.</span></span> <span data-ttu-id="8da91-522">En función del tipo de máquina virtual, hay varias limitaciones con respecto al número de vNICs.</span><span class="sxs-lookup"><span data-stu-id="8da91-522">Dependent on the type of VM there are different limitations in regards to the number of vNICs.</span></span> <span data-ttu-id="8da91-523">En los artículos siguientes se indican los detalles, las funcionalidades y las restricciones:</span><span class="sxs-lookup"><span data-stu-id="8da91-523">Exact details, functionality, and restrictions can be found in these articles:</span></span>

* <span data-ttu-id="8da91-524">[Creación de una máquina virtual Windows con varias tarjetas de interfaz de red][virtual-networks-multiple-nics-windows]</span><span class="sxs-lookup"><span data-stu-id="8da91-524">[Create a Windows VM with multiple NICs][virtual-networks-multiple-nics-windows]</span></span>
* <span data-ttu-id="8da91-525">[Creación de una máquina virtual Linux con varias NIC][virtual-networks-multiple-nics-linux]</span><span class="sxs-lookup"><span data-stu-id="8da91-525">[Create a Linux VM with multiple NICs][virtual-networks-multiple-nics-linux]</span></span>
* <span data-ttu-id="8da91-526">[Implementación de varias máquinas virtuales de NIC con una plantilla][virtual-network-deploy-multinic-arm-template]</span><span class="sxs-lookup"><span data-stu-id="8da91-526">[Deploy multi NIC VMs using a template][virtual-network-deploy-multinic-arm-template]</span></span>
* <span data-ttu-id="8da91-527">[Implementación de máquinas virtuales con varias NIC mediante PowerShell][virtual-network-deploy-multinic-arm-ps]</span><span class="sxs-lookup"><span data-stu-id="8da91-527">[Deploy multi NIC VMs using PowerShell][virtual-network-deploy-multinic-arm-ps]</span></span>
* <span data-ttu-id="8da91-528">[Implementación de varias máquinas virtuales de la NIC con la CLI de Azure][virtual-network-deploy-multinic-arm-cli]</span><span class="sxs-lookup"><span data-stu-id="8da91-528">[Deploy multi NIC VMs using the Azure CLI][virtual-network-deploy-multinic-arm-cli]</span></span>

#### <a name="site-to-site-connectivity"></a><span data-ttu-id="8da91-529">Conectividad de sitio a sitio</span><span class="sxs-lookup"><span data-stu-id="8da91-529">Site-to-Site Connectivity</span></span>
<span data-ttu-id="8da91-530">Las máquinas virtuales de Azure tienen características entre locales, mientras que las instalaciones locales están vinculadas a una conexión VPN permanente y transparente.</span><span class="sxs-lookup"><span data-stu-id="8da91-530">Cross-premises is Azure VMs and On-Premises linked with a transparent and permanent VPN connection.</span></span> <span data-ttu-id="8da91-531">Se espera que se convierta en el modelo de implementación de SAP más común en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-531">It is expected to become the most common SAP deployment pattern in Azure.</span></span> <span data-ttu-id="8da91-532">Se supone que los procesos y procedimientos operativos con instancias de SAP en Azure deben funcionar de forma transparente.</span><span class="sxs-lookup"><span data-stu-id="8da91-532">The assumption is that operational procedures and processes with SAP instances in Azure should work transparently.</span></span> <span data-ttu-id="8da91-533">Esto significa que se podrá imprimir a partir de estos sistemas, así como el sistema de administración del transporte (TMS) de SAP para el transporte de cambios de un sistema de desarrollo en Azure a un sistema de prueba de implementación local.</span><span class="sxs-lookup"><span data-stu-id="8da91-533">This means you should be able to print out of these systems as well as use the SAP Transport Management System (TMS) to transport changes from a development system in Azure to a test system, which is deployed on-premises.</span></span> <span data-ttu-id="8da91-534">Se puede encontrar más documentación sobre la conectividad de sitio a sitio en [este artículo][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="8da91-534">More documentation around site-to-site can be found in [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

##### <a name="vpn-tunnel-device"></a><span data-ttu-id="8da91-535">Dispositivo de túnel VPN</span><span class="sxs-lookup"><span data-stu-id="8da91-535">VPN Tunnel Device</span></span>
<span data-ttu-id="8da91-536">Para crear una conexión de sitio a sitio (centro de datos local al centro de datos de Azure), necesita obtener o configurar un dispositivo VPN, o utilizar el servicio de Enrutamiento y acceso remoto (RRAS) que se introdujo como componente de software en Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="8da91-536">In order to create a site-to-site connection (on-premises data center to Azure data center), you need to either obtain and configure a VPN device, or use Routing and Remote Access Service (RRAS) which was introduced as a software component with Windows Server 2012.</span></span>

* <span data-ttu-id="8da91-537">[Crear una red virtual con una conexión VPN de sitio a sitio mediante PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="8da91-537">[Create a virtual network with a site-to-site VPN connection using PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span></span>
* <span data-ttu-id="8da91-538">[Acerca de los dispositivos VPN para las conexiones VPN Gateway de sitio a sitio][vpn-gateway-about-vpn-devices]</span><span class="sxs-lookup"><span data-stu-id="8da91-538">[About VPN devices for Site-to-Site VPN Gateway connections][vpn-gateway-about-vpn-devices]</span></span>
* <span data-ttu-id="8da91-539">[Preguntas más frecuentes sobre VPN Gateway][vpn-gateway-vpn-faq]</span><span class="sxs-lookup"><span data-stu-id="8da91-539">[VPN Gateway FAQ][vpn-gateway-vpn-faq]</span></span>

![Conexión de sitio a sitio entre sistemas locales y Azure][planning-guide-figure-600]

<span data-ttu-id="8da91-541">La ilustración anterior muestra dos suscripciones de Azure con subintervalos de direcciones IP reservados para las redes virtuales en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-541">The Figure above shows two Azure subscriptions have IP address subranges reserved for usage in Virtual Networks in Azure.</span></span> <span data-ttu-id="8da91-542">La conectividad desde la red local a Azure se establece a través de VPN.</span><span class="sxs-lookup"><span data-stu-id="8da91-542">The connectivity from the on-premises network to Azure is established via VPN.</span></span>

#### <a name="point-to-site-vpn"></a><span data-ttu-id="8da91-543">VPN de punto a sitio</span><span class="sxs-lookup"><span data-stu-id="8da91-543">Point-to-Site VPN</span></span>
<span data-ttu-id="8da91-544">VPN de punto a sitio requiere que cada equipo cliente se conecte a Azure con su propio VPN.</span><span class="sxs-lookup"><span data-stu-id="8da91-544">Point-to-site VPN requires every client machine to connect with its own VPN into Azure.</span></span> <span data-ttu-id="8da91-545">En los escenarios SAP examinados aquí, la conectividad de punto a sitio no es práctica.</span><span class="sxs-lookup"><span data-stu-id="8da91-545">For the SAP scenarios we are looking at, point-to-site connectivity is not practical.</span></span> <span data-ttu-id="8da91-546">Por tanto, no se proporcionan más referencias de la conectividad VPN punto a sitio.</span><span class="sxs-lookup"><span data-stu-id="8da91-546">Therefore, no further references are given to point-to-site VPN connectivity.</span></span>

<span data-ttu-id="8da91-547">Puede encontrar más información aquí.</span><span class="sxs-lookup"><span data-stu-id="8da91-547">More information can be found here</span></span>
* [<span data-ttu-id="8da91-548">Configuración de una conexión de punto a sitio a una red virtual mediante Azure Portal</span><span class="sxs-lookup"><span data-stu-id="8da91-548">Configure a Point-to-Site connection to a VNet using the Azure portal</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal)
* [<span data-ttu-id="8da91-549">Configuración de una conexión de punto a sitio a una red virtual mediante PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-549">Configure a Point-to-Site connection to a VNet using PowerShell</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps)

#### <a name="multi-site-vpn"></a><span data-ttu-id="8da91-550">VPN de varios sitios</span><span class="sxs-lookup"><span data-stu-id="8da91-550">Multi-Site VPN</span></span>
<span data-ttu-id="8da91-551">Asimismo, en la actualidad Azure ofrece la posibilidad de crear una conectividad VPN multisitio para una suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-551">Azure also nowadays offers the possibility to create Multi-Site VPN connectivity for one Azure subscription.</span></span> <span data-ttu-id="8da91-552">Anteriormente, las suscripciones únicas estaban limitaban a una conexión VPN de sitio a sitio.</span><span class="sxs-lookup"><span data-stu-id="8da91-552">Previously a single subscription was limited to one site-to-site VPN connection.</span></span> <span data-ttu-id="8da91-553">Esta limitación desapareció con las conexiones VPN multisitio para suscripciones únicas.</span><span class="sxs-lookup"><span data-stu-id="8da91-553">This limitation went away with Multi-Site VPN connections for a single subscription.</span></span> <span data-ttu-id="8da91-554">De este modo, una suscripción específica puede aprovechar varias regiones de Azure mediante configuraciones entre locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-554">This makes it possible to leverage more than one Azure Region for a specific subscription through cross-premises configurations.</span></span>

<span data-ttu-id="8da91-555">Para obtener documentación vea [este artículo][vpn-gateway-create-site-to-site-rm-powershell].</span><span class="sxs-lookup"><span data-stu-id="8da91-555">For more documentation, please see [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

[comment]: <> (MShermannd TODO found no ARM docu link)

#### <a name="vnet-to-vnet-connection"></a><span data-ttu-id="8da91-557">Conexión de red virtual a red virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-557">VNet to VNet Connection</span></span>
<span data-ttu-id="8da91-558">Con VPN multisitio, se debe configurar una red virtual de Azure independiente en cada región.</span><span class="sxs-lookup"><span data-stu-id="8da91-558">Using Multi-Site VPN, you need to configure a separate Azure Virtual Network in each of the regions.</span></span> <span data-ttu-id="8da91-559">Sin embargo, a menudo se requiere que los componentes de software de las diferentes regiones se comuniquen entre sí.</span><span class="sxs-lookup"><span data-stu-id="8da91-559">However very often you have the requirement that the software components in the different regions should communicate with each other.</span></span> <span data-ttu-id="8da91-560">Lo ideal sería que esta comunicación no se enrutara desde una región de Azure a instalaciones locales, y desde ahí a otra región de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-560">Ideally this communication should not be routed from one Azure Region to on-premises and from there to the other Azure Region.</span></span> <span data-ttu-id="8da91-561">Para el acceso directo, Azure ofrece la posibilidad de configurar una conexión de una red virtual de Azure en una región a una red virtual de Azure hospedada en otra región.</span><span class="sxs-lookup"><span data-stu-id="8da91-561">To shortcut, Azure offers the possibility to configure a connection from one Azure Virtual Network in one region to another Azure Virtual Network hosted in another region.</span></span> <span data-ttu-id="8da91-562">Esta funcionalidad se denomina conexión de red virtual a red virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-562">This functionality is called VNet-to-VNet connection.</span></span> <span data-ttu-id="8da91-563">Se puede encontrar más información sobre esta funcionalidad aquí: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-563">More details on this functionality can be found here: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span></span>

#### <a name="private-connection-to-azure--expressroute"></a><span data-ttu-id="8da91-564">Conexión privada a Azure: ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="8da91-564">Private Connection to Azure – ExpressRoute</span></span>
<span data-ttu-id="8da91-565">Microsoft Azure ExpressRoute permite la creación de conexiones privadas entre centros de datos de Azure y la infraestructura local del cliente o un entorno de colocalización.</span><span class="sxs-lookup"><span data-stu-id="8da91-565">Microsoft Azure ExpressRoute allows the creation of private connections between Azure data centers and either the customer's on-premises infrastructure or in a co-location environment.</span></span> <span data-ttu-id="8da91-566">ExpressRoute está disponible en varios proveedores de VPN de MPLS (conmutación por paquetes) u otros proveedores de servicios de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-566">ExpressRoute is offered by various MPLS (packet switched) VPN providers or other Network Service Providers.</span></span> <span data-ttu-id="8da91-567">Las conexiones ExpressRoute no pasan por la red pública de Internet.</span><span class="sxs-lookup"><span data-stu-id="8da91-567">ExpressRoute connections do not go over the public Internet.</span></span> <span data-ttu-id="8da91-568">Las conexiones ExpressRoute ofrecen más confiabilidad, velocidad y seguridad en varios circuitos en paralelo, además de mayor velocidad y menor latencia que las conexiones a Internet habituales.</span><span class="sxs-lookup"><span data-stu-id="8da91-568">ExpressRoute connections offer higher security, more reliability through multiple parallel circuits, faster speeds, and lower latencies than typical connections over the Internet.</span></span>

<span data-ttu-id="8da91-569">Se puede obtener más información sobre Azure ExpressRoute y su oferta aquí:</span><span class="sxs-lookup"><span data-stu-id="8da91-569">Find more details on Azure ExpressRoute and offerings here:</span></span>

* <span data-ttu-id="8da91-570"><https://azure.microsoft.com/documentation/services/expressroute/></span><span class="sxs-lookup"><span data-stu-id="8da91-570"><https://azure.microsoft.com/documentation/services/expressroute/></span></span>
* <span data-ttu-id="8da91-571"><https://azure.microsoft.com/pricing/details/expressroute/></span><span class="sxs-lookup"><span data-stu-id="8da91-571"><https://azure.microsoft.com/pricing/details/expressroute/></span></span>
* <span data-ttu-id="8da91-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span><span class="sxs-lookup"><span data-stu-id="8da91-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span></span>

<span data-ttu-id="8da91-573">ExpressRoute permite varias suscripciones de Azure a través de un circuito ExpressRoute, como está documentado aquí</span><span class="sxs-lookup"><span data-stu-id="8da91-573">Express Route enables multiple Azure subscriptions through one ExpressRoute circuit as documented here</span></span>

* <span data-ttu-id="8da91-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span><span class="sxs-lookup"><span data-stu-id="8da91-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span></span>
* <span data-ttu-id="8da91-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span><span class="sxs-lookup"><span data-stu-id="8da91-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span></span>

#### <a name="forced-tunneling-in-case-of-cross-premises"></a><span data-ttu-id="8da91-576">Tunelización forzada en instalaciones entre locales</span><span class="sxs-lookup"><span data-stu-id="8da91-576">Forced tunneling in case of cross-premises</span></span>
<span data-ttu-id="8da91-577">Con las máquinas virtuales que unan dominios locales a través de conexiones sitio a sitio, punto a sitio o de ExpressRoute, también hay que asegurarse de implementar la configuración de proxy de Internet para todos los usuarios de esas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-577">For VMs joining on-premises domains through site-to-site, point-to-site or ExpressRoute, you need to make sure that the Internet proxy settings are getting deployed for all the users in those VMs as well.</span></span> <span data-ttu-id="8da91-578">De forma predeterminada, el software ejecutado en esas máquinas virtuales y los usuarios que empleen un navegador se conectarán directamente a Internet a través de Azure, en lugar de a través del proxy de la empresa.</span><span class="sxs-lookup"><span data-stu-id="8da91-578">By default, software running in those VMs or users using a browser to access the internet would not go through the company proxy, but would connect straight through Azure to the internet.</span></span> <span data-ttu-id="8da91-579">Aun así, la configuración de proxy no es una solución completa para dirigir el tráfico a través del proxy de la empresa, ya que es responsabilidad del software y los servicios buscar el servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="8da91-579">But even the proxy setting is not a 100% solution to direct the traffic through the company proxy since it is responsibility of software and services to check for the proxy.</span></span> <span data-ttu-id="8da91-580">Si el software ejecutado en la máquina virtual no lleva a cabo esta operación o un administrador modifica la configuración, el tráfico a Internet podría desviarse de nuevo directamente a través de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-580">If software running in the VM is not doing that or an administrator manipulates the settings, traffic to the Internet can be detoured again directly through Azure to the Internet.</span></span>

<span data-ttu-id="8da91-581">Para evitar esta situación, puede configurar la tunelización forzada con conectividad de sitio a sitio entre instalaciones locales y Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-581">In order to avoid this, you can configure Forced Tunneling with site-to-site connectivity between on-premises and Azure.</span></span> <span data-ttu-id="8da91-582">La descripción detallada de la característica de tunelización forzada está publicada aquí <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-582">The detailed description of the Forced Tunneling feature is published here <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span></span>

<span data-ttu-id="8da91-583">La tunelización forzada con ExpressRoute la habilitan clientes que anuncian una ruta predeterminada a través de las sesiones de emparejamiento BGP de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8da91-583">Forced Tunneling with ExpressRoute is enabled by customers advertising a default route via the ExpressRoute BGP peering sessions.</span></span>

#### <a name="summary-of-azure-networking"></a><span data-ttu-id="8da91-584">Resumen de las redes de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-584">Summary of Azure Networking</span></span>
<span data-ttu-id="8da91-585">Este capítulo contiene muchos puntos importantes sobre la red de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-585">This chapter contained many important points about Azure Networking.</span></span> <span data-ttu-id="8da91-586">Este es un resumen de los puntos principales:</span><span class="sxs-lookup"><span data-stu-id="8da91-586">Here is a summary of the main points:</span></span>

* <span data-ttu-id="8da91-587">Las redes virtuales de Azure permiten configurar la red según cada necesidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-587">Azure Virtual Networks allows to set up the network according to your own needs</span></span>
* <span data-ttu-id="8da91-588">Las redes virtuales de Azure pueden aprovecharse para asignar intervalos de direcciones IP a las máquinas virtuales o asignar direcciones IP fijas a máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-588">Azure Virtual Networks can be leveraged to assign IP address ranges to VMs or assign fixed IP addresses to VMs</span></span>
* <span data-ttu-id="8da91-589">Para configurar una conexión de sitio a sitio o de punto a sitio, primero se debe crear una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-589">To set up a Site-To-Site or Point-To-Site connection you need to create an Azure Virtual Network first</span></span>
* <span data-ttu-id="8da91-590">Una vez que se ha implementado una máquina virtual, ya no se puede cambiar la red virtual asignada a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-590">Once a virtual machine has been deployed, it is no longer possible to change the Virtual Network assigned to the VM</span></span>

### <a name="quotas-in-azure-virtual-machine-services"></a><span data-ttu-id="8da91-591">Cuotas de los servicios de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-591">Quotas in Azure Virtual Machine Services</span></span>
<span data-ttu-id="8da91-592">Debe quedar claro que la infraestructura de red y almacenamiento se comparte entre las máquinas virtuales que ejecuten una amplia variedad de servicios en la infraestructura de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-592">We need to be clear about the fact that the storage and network infrastructure is shared between VMs running a variety of services in the Azure infrastructure.</span></span> <span data-ttu-id="8da91-593">Y, al igual que en los centros de datos del cliente, hay un cierto aprovisionamiento excesivo de algunos de los recursos de la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="8da91-593">And just as in the customer’s own data centers, over-provisioning of some of the infrastructure resources does take place to a degree.</span></span> <span data-ttu-id="8da91-594">La plataforma Microsoft Azure utiliza cuotas de disco, de CPU, de red y otras cuotas para limitar el consumo de recursos y mantener un rendimiento uniforme y determinista.</span><span class="sxs-lookup"><span data-stu-id="8da91-594">The Microsoft Azure Platform uses disk, CPU, network, and other quotas to limit the resource consumption and to preserve consistent and deterministic performance.</span></span>  <span data-ttu-id="8da91-595">Los diferentes tipos de máquinas virtuales (A5, A6, etc.) tienen diferentes cuotas de número de discos, CPU, RAM y red.</span><span class="sxs-lookup"><span data-stu-id="8da91-595">The different VM types (A5, A6, etc.) have different quotas for the number of disks, CPU, RAM, and Network.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-596">Los recursos de memoria y CPU de los tipos de máquina virtual compatibles con SAP se preasignan en los nodos de host.</span><span class="sxs-lookup"><span data-stu-id="8da91-596">CPU and memory resources of the VM types supported by SAP are pre-allocated on the host nodes.</span></span> <span data-ttu-id="8da91-597">Esto significa que, una vez implementada la máquina virtual, los recursos en el host están disponibles según defina el tipo de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-597">This means that once the VM is deployed, the resources on the host are available as defined by the VM type.</span></span>
>
>

<span data-ttu-id="8da91-598">Al planear y dimensionar SAP en soluciones de Azure, se deben tener en cuenta las cuotas de tamaño de cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-598">When planning and sizing SAP on Azure solutions the quotas for each virtual machine size must be considered.</span></span> <span data-ttu-id="8da91-599">Las cuotas de máquina virtual se describen [aquí (Linux)][virtual-machines-sizes-linux] y [aquí (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="8da91-599">The VM quotas are described [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="8da91-600">Las cuotas descritas representan los valores máximos teóricos.</span><span class="sxs-lookup"><span data-stu-id="8da91-600">The quotas described represent the theoretical maximum values.</span></span>  <span data-ttu-id="8da91-601">El límite de E/S por segundo por disco se puede lograr con valores de E/S pequeños (8 kB), pero posiblemente no pueda lograrse con valores de E/S grandes (1 MB).</span><span class="sxs-lookup"><span data-stu-id="8da91-601">The limit of IOPS per disk may be achieved with small IOs (8kb) but possibly may not be achieved with large IOs (1Mb).</span></span>  <span data-ttu-id="8da91-602">El límite de E/S por segundo se aplica en la granularidad de discos únicos.</span><span class="sxs-lookup"><span data-stu-id="8da91-602">The IOPS limit is enforced on the granularity of single disk.</span></span>

<span data-ttu-id="8da91-603">Es posible utilizar el siguiente árbol de decisión aproximado para decidir si un sistema SAP encaja en los servicios de máquinas virtuales de Azure y sus funciones, o bien si un sistema existente debe configurarse de otro modo para poder implementar el sistema en Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-603">As a rough decision tree to decide whether an SAP system fits into Azure Virtual Machine Services and its capabilities or whether an existing system needs to be configured differently in order to deploy the system on Azure, the decision tree below can be used:</span></span>

![Árbol de decisión para decidir la capacidad de implementación de SAP en Azure][planning-guide-figure-700]

<span data-ttu-id="8da91-605">**Paso 1:**La información más importante por la que empezar es el requisito de SAPS de un sistema SAP determinado.</span><span class="sxs-lookup"><span data-stu-id="8da91-605">**Step 1**: The most important information to start with is the SAPS requirement for a given SAP system.</span></span> <span data-ttu-id="8da91-606">Los requisitos de SAPS deben dividirse en la parte de DBMS y en la de la aplicación SAP, aunque el sistema SAP ya esté implementado de forma local en una configuración de dos niveles.</span><span class="sxs-lookup"><span data-stu-id="8da91-606">The SAPS requirements need to be separated out into the DBMS part and the SAP application part, even if the SAP system is already deployed on-premises in a 2-tier configuration.</span></span> <span data-ttu-id="8da91-607">Para los sistemas existentes, los SAPS relacionados con el hardware que se usa se suele poder determinar o calcular mediante los bancos de pruebas de SAP existentes.</span><span class="sxs-lookup"><span data-stu-id="8da91-607">For existing systems, the SAPS related to the hardware in use often can be determined or estimated based on existing SAP benchmarks.</span></span> <span data-ttu-id="8da91-608">Los resultados se pueden encontrar aquí: <http://global.sap.com/campaigns/benchmark/index.epx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-608">The results can be found here: <http://global.sap.com/campaigns/benchmark/index.epx>.</span></span>
<span data-ttu-id="8da91-609">En lo que respecta a los sistemas SAP de implementación reciente, tendrá que haber efectuado una tarea de determinación del tamaño con la que se habrán identificado los requisitos de SAPS del sistema.</span><span class="sxs-lookup"><span data-stu-id="8da91-609">For newly deployed SAP systems, you should have gone through a sizing exercise, which should determine the SAPS requirements of the system.</span></span>
<span data-ttu-id="8da91-610">Consulte también este blog y el documento adjunto para ver el ajuste de tamaño de SAP en Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-610">See also this blog and attached document for SAP sizing on Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="8da91-611">**Paso 2:**Para los sistemas existentes, se debe medir el volumen de E/S y las operaciones de E/S por segundo en el servidor de DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-611">**Step 2**: For existing systems, the I/O volume and I/O operations per second on the DBMS server should be measured.</span></span> <span data-ttu-id="8da91-612">En el caso de los sistemas planeados recientemente, la tarea de determinación de tamaño para el nuevo sistema también debe aportar una idea aproximada de los requisitos de E/S para DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-612">For newly planned systems, the sizing exercise for the new system also should give rough ideas of the I/O requirements on the DBMS side.</span></span> <span data-ttu-id="8da91-613">Si no está seguro, tendrá que terminar realizando una prueba de concepto.</span><span class="sxs-lookup"><span data-stu-id="8da91-613">If unsure, you eventually need to conduct a Proof of Concept.</span></span>

<span data-ttu-id="8da91-614">**Paso 3:**Compare el requisito de SAPS del servidor de DBMS con los SAPS que pueden proporcionar los distintos tipos de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-614">**Step 3**: Compare the SAPS requirement for the DBMS server with the SAPS the different VM types of Azure can provide.</span></span> <span data-ttu-id="8da91-615">La información sobre los SAPS de los diferentes tipos de máquinas virtuales de Azure se incluye en la nota de SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="8da91-615">The information on SAPS of the different Azure VM types is documented in SAP Note [1928533].</span></span> <span data-ttu-id="8da91-616">Primero hay que centrarse en la máquina virtual de DBMS, puesto que la de la base de datos es la capa de un sistema SAP NetWeaver que no se escala horizontalmente en la mayoría de las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-616">The focus should be on the DBMS VM first since the database layer is the layer in an SAP NetWeaver system that does not scale out in the majority of deployments.</span></span> <span data-ttu-id="8da91-617">Por el contrario, la capa de aplicaciones de SAP se puede escalar horizontalmente. Si ninguno de los tipos de máquinas virtuales de Azure compatibles con SAP puede proporcionar los SAPS necesarios, la carga de trabajo del sistema SAP planeado no podrá ejecutarse en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-617">In contrast, the SAP application layer can be scaled out. If none of the SAP supported Azure VM types can deliver the required SAPS, the workload of the planned SAP system can’t be run on Azure.</span></span> <span data-ttu-id="8da91-618">Tendrá que implementar el sistema de forma local o cambiar su volumen de carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8da91-618">You either need to deploy the system on-premises or you need to change the workload volume for the system.</span></span>

<span data-ttu-id="8da91-619">**Paso 4**: Como se documenta [aquí (Linux)][virtual-machines-sizes-linux] y [aquí (Windows)][virtual-machines-sizes-windows], Azure exige una cuota de E/S por segundo para cada disco, al margen de si se usa almacenamiento estándar o Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-619">**Step 4**: As documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows], Azure enforces an IOPS quota per disk independent whether you use Standard Storage or Premium Storage.</span></span> <span data-ttu-id="8da91-620">El número de discos de datos que se pueden montar varía según el tipo de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-620">Dependent on the VM type, the number of data disks, which can be mounted varies.</span></span> <span data-ttu-id="8da91-621">Como resultado, puede calcular el número máximo de IOPS que se puede lograr con cada uno de los distintos tipos de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-621">As a result, you can calculate a maximum IOPS number that can be achieved with each of the different VM types.</span></span> <span data-ttu-id="8da91-622">Según el diseño del archivo de base de datos, puede seccionar los discos para convertirlos en un volumen en el SO invitado.</span><span class="sxs-lookup"><span data-stu-id="8da91-622">Dependent on the database file layout, you can stripe disks to become one volume in the guest OS.</span></span> <span data-ttu-id="8da91-623">Sin embargo, si el volumen actual de IOPS de un sistema SAP implementado supera los límites calculados del tipo de máquina virtual más grande de Azure y no hay ninguna posibilidad de compensar con más memoria, la carga de trabajo del sistema SAP puede verse gravemente afectada.</span><span class="sxs-lookup"><span data-stu-id="8da91-623">However, if the current IOPS volume of a deployed SAP system exceeds the calculated limits of the largest VM type of Azure and if there is no chance to compensate with more memory, the workload of the SAP system can be impacted severely.</span></span> <span data-ttu-id="8da91-624">En tales casos, se puede llegar a un punto en el que no se debería implementar el sistema en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-624">In such cases, you can hit a point where you should not deploy the system on Azure.</span></span>

<span data-ttu-id="8da91-625">**Paso 5:** Especialmente en sistemas SAP que estén implementados localmente en configuraciones de dos niveles, lo más probable es que el sistema deba configurarse en Azure en una configuración de tres niveles.</span><span class="sxs-lookup"><span data-stu-id="8da91-625">**Step 5**: Especially in SAP systems, which are deployed on-premises in 2-Tier configurations, the chances are that the system might need to be configured on Azure in a 3-Tier configuration.</span></span> <span data-ttu-id="8da91-626">En este paso, debe comprobar si hay algún componente en la capa de aplicaciones de SAP que no se pueda escalar horizontalmente y que no podría encajar con los recursos de memoria y CPU que ofrecen los distintos tipos de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-626">In this step, you need to check whether there is a component in the SAP application layer, which can’t be scaled out and which would not fit into the CPU and memory resources the different Azure VM types offer.</span></span> <span data-ttu-id="8da91-627">Si, en efecto, se detecta tal componente, no se podrá implementar en Azure el sistema SAP ni su carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8da91-627">If there indeed is such a component, the SAP system and its workload can’t be deployed into Azure.</span></span> <span data-ttu-id="8da91-628">Pero, si es posible escalar horizontalmente los componentes de las aplicaciones de SAP en varias máquinas virtuales de Azure, el sistema puede implementarse en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-628">But if you can scale out the SAP application components into multiple Azure VMs, the system can be deployed into Azure.</span></span>

<span data-ttu-id="8da91-629">**Paso 6:**Si los componentes de capa de la aplicación de SAP y DBMS pueden ejecutarse en máquinas virtuales de Azure, se debe definir una serie de opciones de configuración relacionadas con los siguientes aspectos:</span><span class="sxs-lookup"><span data-stu-id="8da91-629">**Step 6**: If the DBMS and SAP application layer components can be run in Azure VMs, the configuration needs to be defined with regard to:</span></span>

* <span data-ttu-id="8da91-630">Número de máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-630">Number of Azure VMs</span></span>
* <span data-ttu-id="8da91-631">Tipos de máquinas virtuales para los componentes individuales</span><span class="sxs-lookup"><span data-stu-id="8da91-631">VM types for the individual components</span></span>
* <span data-ttu-id="8da91-632">Número de VHD en la máquina virtual de DBMS para proporcionar IOPS suficientes</span><span class="sxs-lookup"><span data-stu-id="8da91-632">Number of VHDs in DBMS VM to provide enough IOPS</span></span>

## <a name="managing-azure-assets"></a><span data-ttu-id="8da91-633">Administración de activos de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-633">Managing Azure Assets</span></span>
### <a name="azure-portal"></a><span data-ttu-id="8da91-634">Portal de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-634">Azure Portal</span></span>
<span data-ttu-id="8da91-635">Azure Portal constituye una de las tres interfaces creadas para administrar las implementaciones de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-635">The Azure portal is one of three interfaces to manage Azure VM deployments.</span></span> <span data-ttu-id="8da91-636">Es posible realizar las tareas de administración básicas, como implementar máquinas virtuales a partir de imágenes, a través de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-636">The basic management tasks, like deploying VMs from images, can be done through the Azure portal.</span></span> <span data-ttu-id="8da91-637">Además, la creación de cuentas de almacenamiento, redes virtuales y otros componentes de Azure son tareas que pueden desempeñarse con resultados muy satisfactorios en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-637">In addition, the creation of Storage Accounts, Virtual Networks, and other Azure components are also tasks the Azure portal can handle very well.</span></span> <span data-ttu-id="8da91-638">No obstante, funciones como la carga de VHD de entornos locales a Azure o la copia de un VHD dentro de Azure constituyen tareas para las que se requiere bien una herramienta de terceros, bien conocimientos de administración a través de PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-638">However, functionality like uploading VHDs from on-premises to Azure or copying a VHD within Azure are tasks, which require either third-party tools or administration through PowerShell or CLI.</span></span>

![Microsoft Azure Portal: información general sobre las máquinas virtuales][planning-guide-figure-800]

[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/>)
[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/>)

<span data-ttu-id="8da91-642">También es posible llevar a cabo tareas de administración y configuración para las instancias de las máquinas virtuales desde Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-642">Administration and configuration tasks for the Virtual Machine instance are possible from within the Azure portal.</span></span>

<span data-ttu-id="8da91-643">Aparte de reiniciar y apagar una máquina virtual, también puede asociar, desasociar y crear discos de datos para la instancia de la VM con el objetivo de capturarla para preparar una imagen y configurar el tamaño de dicha instancia.</span><span class="sxs-lookup"><span data-stu-id="8da91-643">Besides restarting and shutting down a Virtual Machine you can also attach, detach, and create data disks for the Virtual Machine instance, to capture the instance for image preparation and configure the size of the Virtual Machine instance.</span></span>

<span data-ttu-id="8da91-644">Azure Portal proporciona funciones básicas con las que implementar y configurar las máquinas virtuales y muchos otros servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-644">The Azure portal provides basic functionality to deploy and configure VMs and many other Azure services.</span></span> <span data-ttu-id="8da91-645">Sin embargo, Azure Portal no abarca todas las funciones disponibles.</span><span class="sxs-lookup"><span data-stu-id="8da91-645">However not all available functionality is covered by the Azure portal.</span></span> <span data-ttu-id="8da91-646">En Azure Portal, no es posible realizar tareas como las siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-646">In the Azure portal, it’s not possible to perform tasks like:</span></span>

* <span data-ttu-id="8da91-647">Cargar discos duros virtuales en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-647">Uploading VHDs to Azure</span></span>
* <span data-ttu-id="8da91-648">Copiar máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="8da91-648">Copying VMs</span></span>

[comment]: <> (MShermannd TODO what about automation service for SAP VMs ? )
[comment]: <> (MSSedusch deployment of multiple VMs os meanwhile possible)
[comment]: <> (MSSedusch Also any type of automation regarding deployment is not possible with the Azure portal. Las tareas como la implementación por script de varias máquinas virtuales no se pueden realizar en Azure Portal.)

### <a name="management-via-microsoft-azure-powershell-cmdlets"></a><span data-ttu-id="8da91-652">Administración mediante los cmdlets de Microsoft Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-652">Management via Microsoft Azure PowerShell cmdlets</span></span>
<span data-ttu-id="8da91-653">Windows PowerShell es un marco eficaz y extensible que ha tenido una amplia adopción entre clientes que implementan un mayor número de sistemas en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-653">Windows PowerShell is a powerful and extensible framework that has been widely adopted by customers deploying larger numbers of systems in Azure.</span></span> <span data-ttu-id="8da91-654">Es posible ejecutar de forma remota los cmdlets de PowerShell tras instalarlos en un equipo de escritorio, un portátil o una estación de administración dedicada.</span><span class="sxs-lookup"><span data-stu-id="8da91-654">After the installation of PowerShell cmdlets on a desktop, laptop or dedicated management station, the PowerShell cmdlets can be run remotely.</span></span>

<span data-ttu-id="8da91-655">En [este artículo][powershell-install-configure] se describe el proceso mediante el cual se habilita el uso de cmdlets de Azure PowerShell en un equipo de escritorio o portátil local, así como el modo de configurarlos para su uso con las suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-655">The process to enable a local desktop/laptop for the usage of Azure PowerShell cmdlets and how to configure those for the usage with the Azure subscription(s) is described in [this article][powershell-install-configure].</span></span>

<span data-ttu-id="8da91-656">También podrá encontrar pasos más detallados sobre cómo instalar, actualizar y configurar los cmdlets de Azure PowerShell en [este capítulo de la Guía de implementación][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="8da91-656">More detailed steps on how to install, update, and configure the Azure PowerShell cmdlets can also be found in [this chapter of the Deployment Guide][deployment-guide-4.1].</span></span>

<span data-ttu-id="8da91-657">Hasta el momento, de la experiencia de los clientes se extrae que PowerShell (PS) es sin lugar a dudas la herramienta más eficaz para implementar máquinas virtuales y crear pasos personalizados en la implementación de estas.</span><span class="sxs-lookup"><span data-stu-id="8da91-657">Customer experience so far has been that PowerShell (PS) is certainly the more powerful tool to deploy VMs and to create custom steps in the deployment of VMs.</span></span> <span data-ttu-id="8da91-658">Todos los clientes que ejecutan instancias de SAP en Azure usan cmdlets de PS como complemento a las tareas de administración que llevan a cabo en Azure Portal o incluso los utilizan exclusivamente para administrar sus implementaciones en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-658">All of the customers running SAP instances in Azure are using PS cmdlets to supplement management tasks they do in the Azure portal or are even using PS cmdlets exclusively to manage their deployments in Azure.</span></span> <span data-ttu-id="8da91-659">Como los cmdlets específicos de Azure comparten la misma convención de nomenclatura que los más de 2000 cmdlets relacionados con Windows, a los administradores de Windows les resulta sencillo utilizarlos.</span><span class="sxs-lookup"><span data-stu-id="8da91-659">Since the Azure-specific cmdlets share the same naming convention as the more than 2000 Windows-related cmdlets, it is an easy task for Windows administrators to leverage those cmdlets.</span></span>

<span data-ttu-id="8da91-660">Consulte el ejemplo aquí: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-660">See example here: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span></span>

[comment]: <> (MShermannd TODO describe new CLI command when tested )
<span data-ttu-id="8da91-662">La implementación de la extensión de supervisión de Azure para SAP (consulte el capítulo [Solución de supervisión de Azure para SAP][planning-guide-9.1] de este documento) solo es posible mediante PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-662">Deployment of the Azure Monitoring Extension for SAP (see chapter [Azure Monitoring Solution for SAP][planning-guide-9.1] in this document) is only possible via PowerShell or CLI.</span></span> <span data-ttu-id="8da91-663">Por lo tanto, es obligatorio para instalar y configurar PowerShell o la CLI al implementar o administrar un sistema SAP NetWeaver en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-663">Therefore it is mandatory to set up and configure PowerShell or CLI when deploying or administering an SAP NetWeaver system in Azure.</span></span>  

<span data-ttu-id="8da91-664">Como Azure ofrece más funciones, se agregarán nuevos cmdlets de PS que requieren una actualización de los cmdlets.</span><span class="sxs-lookup"><span data-stu-id="8da91-664">As Azure provides more functionality, new PS cmdlets are going to be added that requires an update of the cmdlets.</span></span> <span data-ttu-id="8da91-665">Por lo tanto, es recomendable consultar el sitio de descargas de Azure al menos una vez al mes <https://azure.microsoft.com/downloads/> para ver si se ha publicado una nueva versión de los cmdlets.</span><span class="sxs-lookup"><span data-stu-id="8da91-665">Therefore it makes sense to check the Azure Download site at least once the month <https://azure.microsoft.com/downloads/> for a new version of the cmdlets.</span></span> <span data-ttu-id="8da91-666">La nueva versión se instala sobre la anterior.</span><span class="sxs-lookup"><span data-stu-id="8da91-666">The new version is installed on top of the older version.</span></span>

<span data-ttu-id="8da91-667">Para ver una lista general de comandos de PowerShell relacionados con Azure, consulte aquí: <https://docs.microsoft.com/powershell/azure/overview>.</span><span class="sxs-lookup"><span data-stu-id="8da91-667">For a general list of Azure-related PowerShell commands check here: <https://docs.microsoft.com/powershell/azure/overview>.</span></span>

### <a name="management-via-microsoft-azure-cli-commands"></a><span data-ttu-id="8da91-668">Administración a través de los comandos de CLI de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-668">Management via Microsoft Azure CLI commands</span></span>
<span data-ttu-id="8da91-669">Para los clientes que utilizan Linux y desean administrar recursos de Azure, es posible que puedan recurrir a PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8da91-669">For customers who use Linux and want to manage Azure resources Powershell might not be an option.</span></span> <span data-ttu-id="8da91-670">Microsoft ofrece la CLI de Azure como una alternativa.</span><span class="sxs-lookup"><span data-stu-id="8da91-670">Microsoft offers Azure CLI as an alternative.</span></span>
<span data-ttu-id="8da91-671">La CLI de Azure proporciona un conjunto de comandos de código abierto y multiplataforma para trabajar con la plataforma de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-671">The Azure CLI provides a set of open source, cross-platform commands for working with the Azure Platform.</span></span> <span data-ttu-id="8da91-672">La CLI de Azure proporciona muchas de las mismas funciones presentes en el Portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-672">The Azure CLI provides much of the same functionality found in the Azure portal.</span></span>

<span data-ttu-id="8da91-673">Para obtener más información sobre la instalación, la configuración y el uso de los comandos de la CLI para realizar tareas de Azure, consulte estos temas:</span><span class="sxs-lookup"><span data-stu-id="8da91-673">For information about installation, configuration and how to use CLI commands to accomplish Azure tasks see</span></span>

* <span data-ttu-id="8da91-674">[Instalación de la CLI de Azure][xplat-cli]</span><span class="sxs-lookup"><span data-stu-id="8da91-674">[Install the Azure CLI][xplat-cli]</span></span>
* <span data-ttu-id="8da91-675">[Implementación y administración de máquinas virtuales mediante plantillas de Azure Resource Manager y la CLI de Azure][../../linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="8da91-675">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="8da91-676">[Uso de la CLI de Azure para Mac, Linux y Windows con Azure Resource Manager][xplat-cli-azure-resource-manager]</span><span class="sxs-lookup"><span data-stu-id="8da91-676">[Use the Azure CLI for Mac, Linux, and Windows with Azure Resource Manager][xplat-cli-azure-resource-manager]</span></span>

<span data-ttu-id="8da91-677">Lea también el capítulo [CLI de Azure para máquinas virtuales de Linux][deployment-guide-4.5.2] de la [Guía de implementación][planning-guide] a fin de descubrir cómo usar la CLI de Azure para implementar la extensión de supervisión de Azure para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-677">Also read chapter [Azure CLI for Linux VMs][deployment-guide-4.5.2] in the [Deployment Guide][planning-guide] on how to use Azure CLI to deploy the Azure Monitoring Extension for SAP.</span></span>

## <a name="different-ways-to-deploy-vms-for-sap-in-azure"></a><span data-ttu-id="8da91-678">Diferentes formas de implementar máquinas virtuales para SAP en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-678">Different ways to deploy VMs for SAP in Azure</span></span>
<span data-ttu-id="8da91-679">En este capítulo, se exponen las diferentes formas de implementar una máquina virtual en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-679">In this chapter, you learn the different ways to deploy a VM in Azure.</span></span> <span data-ttu-id="8da91-680">En este capítulo también se tratan los procedimientos de preparación adicionales, así como la administración de VHD y máquinas virtuales en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-680">Additional preparation procedures, as well as handling of VHDs and VMs in Azure are covered in this chapter.</span></span>

### <a name="deployment-of-vms-for-sap"></a><span data-ttu-id="8da91-681">Implementación de máquinas virtuales para SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-681">Deployment of VMs for SAP</span></span>
<span data-ttu-id="8da91-682">Microsoft Azure ofrece varias maneras de implementar máquinas virtuales y discos asociados.</span><span class="sxs-lookup"><span data-stu-id="8da91-682">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="8da91-683">Por lo tanto, es muy importante comprender las diferencias, puesto que los preparativos de las máquinas virtuales pueden variar según el método de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-683">Thus it is very important to understand the differences since preparations of the VMs might differ depending on the method of deployment.</span></span> <span data-ttu-id="8da91-684">En general, se analizan los siguientes escenarios:</span><span class="sxs-lookup"><span data-stu-id="8da91-684">In general, we take a look at the following scenarios:</span></span>

#### <span data-ttu-id="8da91-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Procedimiento para mover máquinas virtuales del entorno local a Azure con un disco no generalizado</span><span class="sxs-lookup"><span data-stu-id="8da91-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="8da91-686">Planea mover un sistema SAP específico desde un entorno local a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-686">You plan to move a specific SAP system from on-premises to Azure.</span></span> <span data-ttu-id="8da91-687">Esto puede hacerse cargando en Azure el VHD que contiene el sistema operativo, los archivos binarios de SAP y los de DBMS, así como los discos duros virtuales con los archivos de registro y de datos del DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-687">This can be done by uploading the VHD, which contains the OS, the SAP Binaries, and DBMS binaries plus the VHDs with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="8da91-688">En contraposición al [segundo escenario siguiente][planning-guide-5.1.2], mantendrá el nombre de host, el SID de SAP y las cuentas de usuario de SAP en la máquina virtual de Azure, ya que se configuraron en el entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-688">In contrast to [scenario #2 below][planning-guide-5.1.2], you keep the hostname, SAP SID, and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="8da91-689">Por lo tanto, no es necesario generalizar la imagen.</span><span class="sxs-lookup"><span data-stu-id="8da91-689">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="8da91-690">Consulte el capítulo [Preparación para mover máquinas virtuales del entorno local a Azure con un disco no generalizado][planning-guide-5.2.1] de este documento para obtener información sobre los pasos de preparación del entorno local y la carga de máquinas virtuales o VHD no generalizados en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-690">See chapters [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document for on-premises preparation steps and upload of non-generalized VMs or VHDs to Azure.</span></span> <span data-ttu-id="8da91-691">Lea el capítulo [Escenario 3: Mover una máquina virtual desde una ubicación local con un VHD no generalizado de Azure con SAP][deployment-guide-3.4] de la [Guía de implementación][deployment-guide] para obtener pasos detallados relativos a la implementación de dicha imagen en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-691">Read chapter [Scenario 3: Moving a VM from on-premises using a non-generalized Azure VHD with SAP][deployment-guide-3.4] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <span data-ttu-id="8da91-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Implementación de una máquina virtual con una imagen específica del cliente</span><span class="sxs-lookup"><span data-stu-id="8da91-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Deploying a VM with a customer-specific image</span></span>
<span data-ttu-id="8da91-693">Debido a los requisitos de revisión específicos de la versión del SO o DBMS, puede que las imágenes proporcionadas en Azure Marketplace no satisfagan sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="8da91-693">Due to specific patch requirements of your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="8da91-694">Por lo tanto, se recomienda crear una máquina virtual con su propia imagen privada de máquina virtual de SO o DBMS, que podrá implementarse varias veces más adelante.</span><span class="sxs-lookup"><span data-stu-id="8da91-694">Therefore, you might need to create a VM using your own ‘private’ OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="8da91-695">Para preparar una imagen "privada" con fines de duplicación, se deben tener en cuenta los siguientes aspectos:</span><span class="sxs-lookup"><span data-stu-id="8da91-695">To prepare such a ‘private’ image for duplication, the following items have to be considered:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-697">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-697">Windows</span></span>
>
> <span data-ttu-id="8da91-698">Vea más detalles aquí: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> La configuración de Windows (como el nombre de host y el SID de Windows) debe abstraerse o generalizarse en la máquina virtual local mediante el comando Sysprep.</span><span class="sxs-lookup"><span data-stu-id="8da91-698">See more details here: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> The Windows settings (like Windows SID and hostname) must be abstracted/generalized on the on-premises VM via the sysprep command.</span></span>
>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-700">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-700">Linux</span></span>
>
> <span data-ttu-id="8da91-701">Siga los pasos descritos en los siguientes artículos para [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd] u [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle] para preparar un disco duro virtual que se cargará en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-701">Follow the steps described in these articles for [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd], or [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle], to prepare a VHD to be uploaded to Azure.</span></span>
>
>

- - -
<span data-ttu-id="8da91-702">Si ya ha instalado contenido de SAP en la máquina virtual local (especialmente en los sistemas de dos niveles), puede adaptar la configuración del sistema SAP después de realizar la implementación de la máquina virtual de Azure mediante el procedimiento de cambio de nombre de instancia admitido por el administrador de aprovisionamiento de software de SAP (nota de SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="8da91-702">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="8da91-703">Consulte los capítulos [Preparación para la implementación de una máquina virtual con una imagen específica del cliente para SAP][planning-guide-5.2.2] y [Carga de un VHD desde una instalación local a Azure][planning-guide-5.3.2] de este documento para información sobre los pasos de preparación del entorno local y la carga de una máquina virtual generalizada en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-703">See chapters [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] and [Uploading a VHD from on-premises to Azure][planning-guide-5.3.2] of this document for on-premises preparation steps and upload of a generalized VM to Azure.</span></span> <span data-ttu-id="8da91-704">Lea el capítulo [Escenario 2: Implementación de una máquina virtual con una imagen personalizada para SAP][deployment-guide-3.3] de la [Guía de implementación][deployment-guide] para obtener pasos detallados relativos a la implementación de dicha imagen en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-704">Read chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <a name="deploying-a-vm-out-of-the-azure-marketplace"></a><span data-ttu-id="8da91-705">Implementación de máquinas virtuales de Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="8da91-705">Deploying a VM out of the Azure Marketplace</span></span>
<span data-ttu-id="8da91-706">Desea usar una imagen de máquina virtual proporcionada por Microsoft o un tercero en Azure Marketplace para implementar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-706">You would like to use a Microsoft or third-party provided VM image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="8da91-707">Una vez que se ha implementado la máquina virtual en Azure, sigue las mismas instrucciones y utilice las mismas herramientas para instalar el software de SAP o DBMS en la máquina virtual de la misma forma que lo haría en un entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-707">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software and/or DBMS inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="8da91-708">Para una descripción más detallada de la implementación, consulte el capítulo [Escenario 1: Implementación de una máquina virtual de Azure Marketplace para SAP][deployment-guide-3.2] de la [Guía de implementación][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-708">For more detailed deployment description, please see chapter [Scenario 1: Deploying a VM out of the Azure Marketplace for SAP][deployment-guide-3.2] in the [Deployment Guide][deployment-guide].</span></span>

### <span data-ttu-id="8da91-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparación de máquinas virtuales con SAP para Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparing VMs with SAP for Azure</span></span>
<span data-ttu-id="8da91-710">Antes de cargar las máquinas en Azure, debe asegurarse de que las VM y los VHD cumplan determinados requisitos.</span><span class="sxs-lookup"><span data-stu-id="8da91-710">Before uploading VMs into Azure you need to make sure the VMs and VHDs fulfill certain requirements.</span></span> <span data-ttu-id="8da91-711">Existen pequeñas diferencias según el método de implementación que se utilice.</span><span class="sxs-lookup"><span data-stu-id="8da91-711">There are small differences depending on the deployment method that is used.</span></span>

#### <span data-ttu-id="8da91-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparación para mover máquinas virtuales del entorno local a Azure con un disco no generalizado</span><span class="sxs-lookup"><span data-stu-id="8da91-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparation for moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="8da91-713">Un método de implementación habitual consiste en mover una máquina virtual existente en la que se ejecuta un sistema SAP del entorno local a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-713">A common deployment method is to move an existing VM which runs an SAP system from on-premises to Azure.</span></span> <span data-ttu-id="8da91-714">Esa máquina virtual y el sistema SAP incluido en ella deben ejecutarse en Azure con el mismo nombre de host y, con toda probabilidad, el mismo SID de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-714">That VM and the SAP system in the VM just should run in Azure using the same hostname and very likely the same SAP SID.</span></span> <span data-ttu-id="8da91-715">En este caso, no debe generalizarse el SO invitado de la máquina virtual para varias implementaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-715">In this case the guest OS of VM should not be generalized for multiple deployments.</span></span> <span data-ttu-id="8da91-716">Si la red local se ha ampliado en Azure (consulte el capítulo [Entre locales: implementación de una o varias máquinas virtuales de SAP en Azure con el requisito de estar totalmente integradas en la red local][planning-guide-2.2] de este documento), se podrán usar en la máquina virtual incluso las mismas cuentas de dominio usadas en el entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-716">If the on-premises network got extended into Azure (see chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document), then even the same domain accounts can be used within the VM as those were used before on-premises.</span></span>

<span data-ttu-id="8da91-717">Estos son los requisitos que se deben cumplir a la hora de preparar su propio disco de VM de Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-717">Requirements when preparing your own Azure VM Disk are:</span></span>

* <span data-ttu-id="8da91-718">Originalmente, el VHD que contiene el sistema operativo podía tener un tamaño máximo de 127 GB.</span><span class="sxs-lookup"><span data-stu-id="8da91-718">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="8da91-719">Esta limitación se eliminó a finales de marzo de 2015.</span><span class="sxs-lookup"><span data-stu-id="8da91-719">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="8da91-720">Ahora el VHD que contiene el sistema operativo puede tener un tamaño máximo de 1 TB, al igual que cualquier otro VHD hospedado en Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-720">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="8da91-721">Debe tener el formato de VHD fijo.</span><span class="sxs-lookup"><span data-stu-id="8da91-721">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="8da91-722">Los VHD dinámicos o en formato VHDx aún no se admiten en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-722">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="8da91-723">Los VHD dinámicos se convertirán en VHD estáticos al cargarlos con los cmdlets de PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-723">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="8da91-724">Los VHD que estén montados en la máquina virtual y se deban volver a montar en ella en Azure deben tener el formato VHD fijo.</span><span class="sxs-lookup"><span data-stu-id="8da91-724">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="8da91-725">Lea [este artículo (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) y [este otro (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) para conocer los límites de tamaño de los discos de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-725">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="8da91-726">Los VHD dinámicos se convertirán en VHD estáticos al cargarlos con los cmdlets de PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-726">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="8da91-727">Agregue otra cuenta local con privilegios de administrador, que puede utilizar el soporte técnico de Microsoft o que se puede asignar como contexto para que se ejecuten los servicios y las aplicaciones hasta que se implemente la máquina virtual y se puedan usuarios más adecuados.</span><span class="sxs-lookup"><span data-stu-id="8da91-727">Add another local account with administrator privileges which can be used by Microsoft support or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="8da91-728">Para los casos en los que se use el escenario de implementación exclusiva en la nube (consulte el capítulo [Solo en la nube: implementaciones de máquina virtual en Azure sin dependencias en la red local del cliente][planning-guide-2.1] de este documento) en combinación con este método de implementación, las cuentas de dominio podrían no funcionar una vez que el disco de Azure se implemente en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-728">For the case of using a Cloud-Only deployment scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document) in combination with this deployment method, domain accounts might not work once the Azure Disk is deployed in Azure.</span></span> <span data-ttu-id="8da91-729">Esto se aplica especialmente a las cuentas que se usan para ejecutar servicios como las aplicaciones de DBMS o SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-729">This is especially true for accounts which are used to run services like the DBMS or SAP applications.</span></span> <span data-ttu-id="8da91-730">Por lo tanto, debe reemplazar esas cuentas de dominio por cuentas locales de máquinas virtuales y eliminar las cuentas de dominio locales de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-730">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="8da91-731">Como se describe en el capítulo [Entre locales: implementación de una o varias máquinas virtuales de SAP en Azure con el requisito de estar totalmente integradas en la red local][planning-guide-2.2] de este documento, mantener a los usuarios del dominio local en la imagen de la máquina virtual no supone un problema cuando esta se implementa en el escenario entre locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-731">Keeping on-premises domain users in the VM image is not an issue when the VM is deployed in the cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="8da91-732">Si las cuentas de dominio se usaron como usuarios o inicios de sesión de DBMS al ejecutar el sistema de forma local y esas máquinas virtuales se deben implementar en escenarios exclusivos en la nube, se tendrán que eliminar los usuarios del dominio.</span><span class="sxs-lookup"><span data-stu-id="8da91-732">If domain accounts were used as DBMS logins or users when running the system on-premises and those VMs are supposed to be deployed in Cloud-Only scenarios, the domain users need to be deleted.</span></span> <span data-ttu-id="8da91-733">Debe asegurarse de agregar al administrador local, más otro usuario local de la máquina virtual, como inicio de sesión o usuario en el DBMS (como administradores).</span><span class="sxs-lookup"><span data-stu-id="8da91-733">You need to make sure that the local administrator plus another VM local user is added as a login/user into the DBMS as administrators.</span></span>
* <span data-ttu-id="8da91-734">Agregue otras cuentas locales, ya que se podrían necesitar para el escenario de implementación concreto.</span><span class="sxs-lookup"><span data-stu-id="8da91-734">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-736">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-736">Windows</span></span>
>
> <span data-ttu-id="8da91-737">En este escenario, no hace falta generalizar (Sysprep) la máquina virtual para cargarla e implementarla en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-737">In this scenario no generalization (sysprep) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="8da91-738">Asegúrese de que la unidad D:\ no se esté usando.</span><span class="sxs-lookup"><span data-stu-id="8da91-738">Make sure that drive D:\ is not used.</span></span>
> <span data-ttu-id="8da91-739">Configure el montaje automático de los discos conectados tal y como se describe en el capítulo [Configuración de montaje automático para discos conectados][planning-guide-5.5.3] del presente documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-739">Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-741">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-741">Linux</span></span>
>
> <span data-ttu-id="8da91-742">En este escenario, no hace falta generalizar (waagent -deprovision) la máquina virtual para cargarla e implementarla en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-742">In this scenario no generalization (waagent -deprovision) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="8da91-743">Asegúrese de que no se usa /mnt/resource y de que todos los discos se montan mediante UUID.</span><span class="sxs-lookup"><span data-stu-id="8da91-743">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="8da91-744">En lo que respecta al disco del SO, asegúrese de que la entrada del cargador de arranque también refleja el montaje basado en UUID.</span><span class="sxs-lookup"><span data-stu-id="8da91-744">For the OS disk, make sure that the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
#### <span data-ttu-id="8da91-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparación para la implementación de una máquina virtual con una imagen específica del cliente para SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparation for deploying a VM with a customer-specific image for SAP</span></span>
<span data-ttu-id="8da91-746">Los archivos VHD que contienen un SO generalizado se almacenan en contenedores en cuentas de Azure Storage o como imágenes de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-746">VHD files that contain a generalized OS are stored in containers on Azure Storage Accounts or as Managed Disk images.</span></span> <span data-ttu-id="8da91-747">Puede implementar una nueva máquina virtual de dicha imagen si hace referencia al VHD o a la imagen de Managed Disks como un origen en los archivos de plantilla de implementación, tal y como se describe en el capítulo [Escenario 2: Implementación de una máquina virtual con una imagen personalizada para SAP][deployment-guide-3.3] de la [Guía de implementación][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-747">You can deploy a new VM from such an image by referencing the VHD or Managed Disk image as a source in your deployment template files as described in chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] of the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="8da91-748">Estos son los requisitos que se deben cumplir a la hora de preparar su propia imagen de VM de Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-748">Requirements when preparing your own Azure VM Image are:</span></span>

* <span data-ttu-id="8da91-749">Originalmente, el VHD que contiene el sistema operativo podía tener un tamaño máximo de 127 GB.</span><span class="sxs-lookup"><span data-stu-id="8da91-749">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="8da91-750">Esta limitación se eliminó a finales de marzo de 2015.</span><span class="sxs-lookup"><span data-stu-id="8da91-750">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="8da91-751">Ahora el VHD que contiene el sistema operativo puede tener un tamaño máximo de 1 TB, al igual que cualquier otro VHD hospedado en Almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-751">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="8da91-752">Debe tener el formato de VHD fijo.</span><span class="sxs-lookup"><span data-stu-id="8da91-752">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="8da91-753">Los VHD dinámicos o en formato VHDx aún no se admiten en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-753">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="8da91-754">Los VHD dinámicos se convertirán en VHD estáticos al cargarlos con los cmdlets de PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-754">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="8da91-755">Los VHD que estén montados en la máquina virtual y se deban volver a montar en ella en Azure deben tener el formato VHD fijo.</span><span class="sxs-lookup"><span data-stu-id="8da91-755">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="8da91-756">Lea [este artículo (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) y [este otro (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) para conocer los límites de tamaño de los discos de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-756">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="8da91-757">Los VHD dinámicos se convertirán en VHD estáticos al cargarlos con los cmdlets de PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-757">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="8da91-758">Puesto que todos los usuarios del dominio registrados como usuarios de la máquina virtual no existirán en un escenario de implementación exclusiva en la nube (consulte el capítulo [Solo en la nube: implementaciones de máquina virtual en Azure sin dependencias en la red local del cliente][planning-guide-2.1] de este documento), es posible que los servicios que usen estas cuentas de dominio no funcionen una vez que se haya implementado la imagen en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-758">Since all the Domain users registered as users in the VM will not exist in a Cloud-Only scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document), services using such domain accounts might not work once the Image is deployed in Azure.</span></span> <span data-ttu-id="8da91-759">Esto se aplica especialmente a las cuentas que se usan para ejecutar servicios como las aplicaciones de DBMS o SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-759">This is especially true for accounts which are used to run services like DBMS or SAP applications.</span></span> <span data-ttu-id="8da91-760">Por lo tanto, debe reemplazar esas cuentas de dominio por cuentas locales de máquinas virtuales y eliminar las cuentas de dominio locales de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-760">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="8da91-761">Como se describe en el capítulo [Entre locales: implementación de una o varias máquinas virtuales de SAP en Azure con el requisito de estar totalmente integradas en la red local][planning-guide-2.2] de este documento, es posible que mantener a los usuarios del dominio local en la imagen de la máquina virtual no suponga un problema cuando esta se implementa en el escenario entre locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-761">Keeping on-premises domain users in the VM image might not be an issue when the VM is deployed in the cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="8da91-762">Agregue otra cuenta local con privilegios de administrador, que puede utilizar el soporte técnico de Microsoft durante investigaciones de problemas o que se puede asignar como contexto para que se ejecuten los servicios y las aplicaciones hasta que se implemente la máquina virtual y se puedan usuarios más adecuados.</span><span class="sxs-lookup"><span data-stu-id="8da91-762">Add another local account with administrator privileges which can be used by Microsoft support in problem investigations or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="8da91-763">En implementaciones exclusivas en la nube y situaciones en las que las cuentas de dominio se usaran como usuarios o inicios de sesión de DBMS mientras se ejecuta el sistema de forma local, se deberán eliminar los usuarios de dominio.</span><span class="sxs-lookup"><span data-stu-id="8da91-763">In Cloud-Only deployments and where domain accounts were used as DBMS logins or users when running the system on-premises, the domain users should be deleted.</span></span> <span data-ttu-id="8da91-764">Debe asegurarse de agregar al administrador local, más otro usuario local de la máquina virtual, como inicio de sesión o usuario de DBMS (como administradores).</span><span class="sxs-lookup"><span data-stu-id="8da91-764">You need to make sure that the local administrator plus another VM local user is added as a login/user of the DBMS as administrators.</span></span>
* <span data-ttu-id="8da91-765">Agregue otras cuentas locales, ya que se podrían necesitar para el escenario de implementación concreto.</span><span class="sxs-lookup"><span data-stu-id="8da91-765">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>
* <span data-ttu-id="8da91-766">Si la imagen contiene una instalación de SAP NetWeaver y es probable que se vaya a modificar el nombre original del host en el momento de la implementación de Azure, se recomienda copiar en la plantilla las últimas versiones del DVD del administrador de aprovisionamiento de software de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-766">If the image contains an installation of SAP NetWeaver and renaming of the host name from the original name at the point of the Azure deployment is likely, it is recommended to copy the latest versions of the SAP Software Provisioning Manager DVD into the template.</span></span> <span data-ttu-id="8da91-767">Así podrá utilizar fácilmente la función de cambio de nombre de SAP proporciona para adaptar el nombre de host cambiado o modificar al SID del sistema SAP dentro de la imagen de la máquina virtual implementada en cuanto se inicie una nueva copia.</span><span class="sxs-lookup"><span data-stu-id="8da91-767">This will enable you to easily use the SAP provided rename functionality to adapt the changed hostname and/or change the SID of the SAP system within the deployed VM image as soon as a new copy is started.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-769">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-769">Windows</span></span>
>
> <span data-ttu-id="8da91-770">Asegúrese de que la unidad D:\ no se esté usando. Configure el montaje automático para los discos conectados tal y como se describe en el capítulo [Configuración de montaje automático para discos conectados][planning-guide-5.5.3] del presente documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-770">Make sure that drive D:\ is not used Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-772">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-772">Linux</span></span>
>
> <span data-ttu-id="8da91-773">Asegúrese de que no se usa /mnt/resource y de que todos los discos se montan mediante UUID.</span><span class="sxs-lookup"><span data-stu-id="8da91-773">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="8da91-774">En lo que respecta al disco del SO, cerciórese de que la entrada del cargador de arranque también refleja el montaje basado en UUID.</span><span class="sxs-lookup"><span data-stu-id="8da91-774">For the OS disk, make sure the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
* <span data-ttu-id="8da91-775">GUI de SAP (para fines de administración e instalación) pueden estar ya instalados en dicha plantilla.</span><span class="sxs-lookup"><span data-stu-id="8da91-775">SAP GUI (for administrative and setup purposes) can be pre-installed in such a template.</span></span>
* <span data-ttu-id="8da91-776">Es posible instalar cualquier otro software necesario para ejecutar la máquina virtual correctamente en escenarios entre locales siempre que este pueda funcionar con el cambio de nombre de la VM.</span><span class="sxs-lookup"><span data-stu-id="8da91-776">Other software necessary to run the VMs successfully in cross-premises scenarios can be installed as long as this software can work with the rename of the VM.</span></span>

<span data-ttu-id="8da91-777">Si la máquina virtual está lo suficientemente preparada para ser genérica y finalmente independiente de cuentas o usuarios no disponibles en el escenario de implementación de Azure objetivo, se lleva a cabo el último paso de preparación, que consiste en la generalización de la imagen.</span><span class="sxs-lookup"><span data-stu-id="8da91-777">If the VM is prepared sufficiently to be generic and eventually independent of accounts/users not available in the targeted Azure deployment scenario, the last preparation step of generalizing such an image is conducted.</span></span>

##### <a name="generalizing-a-vm"></a><span data-ttu-id="8da91-778">Generalización de una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-778">Generalizing a VM</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-780">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-780">Windows</span></span>
>
> <span data-ttu-id="8da91-781">El último paso es iniciar sesión en una máquina virtual con una cuenta de administrador.</span><span class="sxs-lookup"><span data-stu-id="8da91-781">The last step is to log in to a VM with an Administrator account.</span></span> <span data-ttu-id="8da91-782">Abra una ventana de comandos de Windows como administrador.</span><span class="sxs-lookup"><span data-stu-id="8da91-782">Open a Windows command window as ‘administrator’.</span></span> <span data-ttu-id="8da91-783">Vaya a %windir%\windows\system32\sysprep y ejecute sysprep.exe.</span><span class="sxs-lookup"><span data-stu-id="8da91-783">Go to %windir%\windows\system32\sysprep and execute sysprep.exe.</span></span>
> <span data-ttu-id="8da91-784">Se mostrará una pequeña ventana.</span><span class="sxs-lookup"><span data-stu-id="8da91-784">A small window will appear.</span></span> <span data-ttu-id="8da91-785">Es importante marcar la opción "Generalizar" (estará desmarcada de manera predeterminada) y cambie la opción de apagado de "Reiniciar" (el valor predeterminado) a "Apagar".</span><span class="sxs-lookup"><span data-stu-id="8da91-785">It is important to check the ‘Generalize’ option (the default is un-checked) and change the Shutdown Option from its default of ‘Reboot’ to ‘Shutdown’.</span></span> <span data-ttu-id="8da91-786">Para este procedimiento, se supone que el proceso de sysprep se ejecuta localmente en el SO invitado de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-786">This procedure assumes that the sysprep process is executed on-premises in the Guest OS of a VM.</span></span>
> <span data-ttu-id="8da91-787">Si desea llevar a cabo el procedimiento con una máquina virtual que ya se ejecute en Azure, siga los pasos que se describen en [este artículo](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span><span class="sxs-lookup"><span data-stu-id="8da91-787">If you want to perform the procedure with a VM already running in Azure, follow the steps described in [this article](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-789">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-789">Linux</span></span>
>
> <span data-ttu-id="8da91-790">[Captura de una máquina virtual con Linux para usarla como plantilla de Resource Manager][capture-image-linux-step-2-create-vm-image]</span><span class="sxs-lookup"><span data-stu-id="8da91-790">[How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image]</span></span>
>
>

- - -
### <a name="transferring-vms-and-vhds-between-on-premises-to-azure"></a><span data-ttu-id="8da91-791">Transferencia de máquinas y discos duros virtuales entre locales a Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-791">Transferring VMs and VHDs between on-premises to Azure</span></span>
<span data-ttu-id="8da91-792">Como no es posible cargar discos e imágenes de máquinas virtuales en Azure mediante Azure Portal, tendrá que usar los cmdlets de Azure PowerShell o la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-792">Since uploading VM images and disks to Azure is not possible via the Azure portal, you need to use Azure PowerShell cmdlets or CLI.</span></span> <span data-ttu-id="8da91-793">Otra posibilidad es utilizar la herramienta AzCopy.</span><span class="sxs-lookup"><span data-stu-id="8da91-793">Another possibility is the use of the tool ‘AzCopy’.</span></span> <span data-ttu-id="8da91-794">Esta herramienta puede copiar discos duros virtuales entre locales y Azure (en ambas direcciones).</span><span class="sxs-lookup"><span data-stu-id="8da91-794">The tool can copy VHDs between on-premises and Azure (in both directions).</span></span> <span data-ttu-id="8da91-795">También puede copiar discos duros virtuales entre las regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-795">It also can copy VHDs between Azure Regions.</span></span> <span data-ttu-id="8da91-796">Consulte [esta documentación][storage-use-azcopy] para conocer cómo descargar y usar AzCopy.</span><span class="sxs-lookup"><span data-stu-id="8da91-796">Please consult [this documentation][storage-use-azcopy] for download and usage of AzCopy.</span></span>

<span data-ttu-id="8da91-797">Una tercera alternativa sería usar varias herramientas orientadas a GUI de terceros.</span><span class="sxs-lookup"><span data-stu-id="8da91-797">A third alternative would be to use various third-party GUI-oriented tools.</span></span> <span data-ttu-id="8da91-798">Sin embargo, asegúrese de que estas herramientas son compatibles con los blobs en páginas de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-798">However, please make sure that these tools are supporting Azure Page Blobs.</span></span> <span data-ttu-id="8da91-799">Para nuestros propósitos, se debe usar el almacén de blob en páginas de Azure (las diferencias se describen aquí: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span><span class="sxs-lookup"><span data-stu-id="8da91-799">For our purposes we need to use Azure Page Blob store (the differences are described here: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span></span> <span data-ttu-id="8da91-800">Por su parte, las herramientas que proporciona Azure también resultan muy eficaces a la hora de comprimir las máquinas y los discos duros virtuales que se deban cargar.</span><span class="sxs-lookup"><span data-stu-id="8da91-800">Also the tools provided by Azure are very efficient in compressing the VMs and VHDs which need to be uploaded.</span></span> <span data-ttu-id="8da91-801">Se trata de un factor importante, ya que esta eficacia en la compresión permite reducir el tiempo de carga (que varía según el vínculo de carga a Internet de las instalaciones locales y la región de implementación de Azure objetivo).</span><span class="sxs-lookup"><span data-stu-id="8da91-801">This is important because this efficiency in compression reduces the upload time (which varies anyway depending on the upload link to the internet from the on-premises facility and the Azure deployment region targeted).</span></span> <span data-ttu-id="8da91-802">En este sentido, resulta razonable suponer que la carga de una máquina virtual o un disco duro virtual desde una ubicación europea en los centros de datos de Azure situados en los EE. UU. tardará más que si se cargan los mismos elementos a los centros de datos europeos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-802">It is a fair assumption that uploading a VM or VHD from European location to the U.S.-based Azure data centers will take longer than uploading the same VMs/VHDs to the European Azure data centers.</span></span>

#### <span data-ttu-id="8da91-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Carga de un VHD desde una instalación local a Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Uploading a VHD from on-premises to Azure</span></span>
<span data-ttu-id="8da91-804">Para cargar una máquina virtual o VHD existente desde la red local, dichos elementos deben cumplir los requisitos especificados en el capítulo [Preparación para mover máquinas virtuales del entorno local a Azure con un disco no generalizado][planning-guide-5.2.1] del presente documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-804">To upload an existing VM or VHD from the on-premises network such a VM or VHD needs to meet the requirements as listed in chapter [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document.</span></span>

<span data-ttu-id="8da91-805">No hace falta generalizar dicha máquina virtual, sino que se puede cargar con el estado y la forma que tenga tras su apagado en el lado local.</span><span class="sxs-lookup"><span data-stu-id="8da91-805">Such a VM does NOT need to be generalized and can be uploaded in the state and shape it has after shutdown on the on-premises side.</span></span> <span data-ttu-id="8da91-806">Lo mismo se aplica a los VHD adicionales que no contengan ningún sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="8da91-806">The same is true for additional VHDs which don’t contain any operating system.</span></span>

##### <a name="uploading-a-vhd-and-making-it-an-azure-disk"></a><span data-ttu-id="8da91-807">Carga de un VHD y su conversión en un disco de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-807">Uploading a VHD and making it an Azure Disk</span></span>
<span data-ttu-id="8da91-808">En este caso, queremos cargar un VHD (con o sin un sistema operativo en él) y montarlo en una máquina virtual como un disco de datos o utilizarlo a modo de disco del SO.</span><span class="sxs-lookup"><span data-stu-id="8da91-808">In this case we want to upload a VHD, either with or without an OS in it, and mount it to a VM as a data disk or use it as OS disk.</span></span> <span data-ttu-id="8da91-809">Se trata de un proceso compuesto por varios pasos.</span><span class="sxs-lookup"><span data-stu-id="8da91-809">This is a multi-step process</span></span>

<span data-ttu-id="8da91-810">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="8da91-810">**Powershell**</span></span>

* <span data-ttu-id="8da91-811">Inicie sesión en su suscripción con *Login-AzureRmAccount*.</span><span class="sxs-lookup"><span data-stu-id="8da91-811">Log in to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="8da91-812">Establezca la suscripción de su contexto con *Set-AzureRmContext* y el parámetro SubscriptionId o SubscriptionName (consulte <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext>).</span><span class="sxs-lookup"><span data-stu-id="8da91-812">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="8da91-813">Cargue el VHD con *Add-AzureRmVhd* en una cuenta de Azure Storage (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd>).</span><span class="sxs-lookup"><span data-stu-id="8da91-813">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="8da91-814">(Opcional) Cree un disco Managed Disks a partir del disco duro virtual con *New-AzureRmDisk* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk>).</span><span class="sxs-lookup"><span data-stu-id="8da91-814">(Optional) Create a Managed Disk from the VHD with *New-AzureRmDisk*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk></span></span>
* <span data-ttu-id="8da91-815">Defina el disco del sistema operativo de una configuración nueva de máquina virtual en el VHD o en el disco de Managed Disks con *Set-AzureRmVMOSDisk* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk>).</span><span class="sxs-lookup"><span data-stu-id="8da91-815">Set the OS disk of a new VM config to the VHD or Managed Disk with *Set-AzureRmVMOSDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
* <span data-ttu-id="8da91-816">Cree una máquina virtual a partir de la configuración de la máquina virtual con *New-AzureRmVM* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm>).</span><span class="sxs-lookup"><span data-stu-id="8da91-816">Create a new VM from the VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>
* <span data-ttu-id="8da91-817">Agregue un disco de datos a una máquina virtual nueva con *Add-AzureRmVMDataDisk* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk>).</span><span class="sxs-lookup"><span data-stu-id="8da91-817">Add a data disk to a new VM with *Add-AzureRmVMDataDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk></span></span>

<span data-ttu-id="8da91-818">**CLI de Azure 2.0**</span><span class="sxs-lookup"><span data-stu-id="8da91-818">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="8da91-819">Inicie sesión en la suscripción con *az login*.</span><span class="sxs-lookup"><span data-stu-id="8da91-819">Log in to your subscription with *az login*</span></span>
* <span data-ttu-id="8da91-820">Seleccione su suscripción con *az account set --subscription `<subscription name or id`>*.</span><span class="sxs-lookup"><span data-stu-id="8da91-820">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="8da91-821">Cargue el VHD con *az storage blob upload* (consulte [Uso de la CLI de Azure con Azure Storage][storage-azure-cli]).</span><span class="sxs-lookup"><span data-stu-id="8da91-821">Upload the VHD with *az storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="8da91-822">(Opcional) Cree un disco de Managed Disks a partir del VHD con *az disk create* (consulte https://docs.microsoft.com/cli/azure/disk#create).</span><span class="sxs-lookup"><span data-stu-id="8da91-822">(Optional) Create a Managed Disk from the VHD with *az disk create* - see https://docs.microsoft.com/cli/azure/disk#create</span></span>
* <span data-ttu-id="8da91-823">Cree una máquina virtual especificando el VHD o el disco de Managed Disks cargados como disco del sistema operativo con *az vm create* y el parámetro *--attach-os-disk*.</span><span class="sxs-lookup"><span data-stu-id="8da91-823">Create a new VM specifying the uploaded VHD or Managed Disk as OS disk with *az vm create* and parameter *--attach-os-disk*</span></span>
* <span data-ttu-id="8da91-824">Agregue un disco de datos a una nueva máquina virtual con *az vm disk attach* y el parámetro *--new*.</span><span class="sxs-lookup"><span data-stu-id="8da91-824">Add a data disk to a new VM with *az vm disk attach* and parameter *--new*</span></span>

<span data-ttu-id="8da91-825">**Plantilla**</span><span class="sxs-lookup"><span data-stu-id="8da91-825">**Template**</span></span>

* <span data-ttu-id="8da91-826">Cargue el VHD con PowerShell o la CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-826">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="8da91-827">(Opcional) Cree un disco de Managed Disks a partir del VHD con PowerShell, la CLI de Azure o Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-827">(Optional) Create a Managed Disk from the VHD with Powershell, Azure CLI or the Azure portal</span></span>
* <span data-ttu-id="8da91-828">Implemente la VM con una plantilla de JSON en la que se haga referencia al VHD, como se muestra en [esta plantilla de JSON de ejemplo](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) o con un disco de Managed Disks, como se muestra en [esta plantilla de JSON de ejemplo](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="8da91-828">Deploy the VM with a JSON template referencing the VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) or using Managed Disks as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span></span>

#### <a name="deployment-of-a-vm-image"></a><span data-ttu-id="8da91-829">Implementación de una imagen de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-829">Deployment of a VM Image</span></span>
<span data-ttu-id="8da91-830">Para cargar una máquina virtual o un VHD existente desde la red local a fin de poder utilizarlos como una imagen de máquina virtual de Azure, dichos elementos tendrán que cumplir los requisitos enumerados en el capítulo [Preparación para la implementación de una máquina virtual con una imagen específica del cliente para SAP][planning-guide-5.2.2] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-830">To upload an existing VM or VHD from the on-premises network in order to use it as an Azure VM image such a VM or VHD need to meet the requirements listed in chapter [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] of this document.</span></span>

* <span data-ttu-id="8da91-831">Utilice *sysprep* en Windows o *waagent -deprovision* en Linux para generalizar la máquina virtual (consulte [Referencia técnica de Sysprep](https://technet.microsoft.com/library/cc766049.aspx) para Windows o[ Captura de una máquina virtual Linux para usarla como plantilla de Resource Manager][capture-image-linux-step-2-create-vm-image] para Linux).</span><span class="sxs-lookup"><span data-stu-id="8da91-831">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="8da91-832">Inicie sesión en su suscripción con *Login-AzureRmAccount*.</span><span class="sxs-lookup"><span data-stu-id="8da91-832">Log in to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="8da91-833">Establezca la suscripción de su contexto con *Set-AzureRmContext* y el parámetro SubscriptionId o SubscriptionName (consulte <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext>).</span><span class="sxs-lookup"><span data-stu-id="8da91-833">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="8da91-834">Cargue el VHD con *Add-AzureRmVhd* en una cuenta de Azure Storage (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd>).</span><span class="sxs-lookup"><span data-stu-id="8da91-834">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="8da91-835">(Opcional) Cree una imagen de la instancia de Managed Disks a partir del VHD con *New-AzureRmImage* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage>).</span><span class="sxs-lookup"><span data-stu-id="8da91-835">(Optional) Create a Managed Disk Image from the VHD with *New-AzureRmImage*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage></span></span>
* <span data-ttu-id="8da91-836">Configure el disco del sistema operativo de una nueva configuración de máquina virtual para:</span><span class="sxs-lookup"><span data-stu-id="8da91-836">Set the OS disk of a new VM config to the</span></span>
  * <span data-ttu-id="8da91-837">VHD con *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk>).</span><span class="sxs-lookup"><span data-stu-id="8da91-837">VHD with *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
  * <span data-ttu-id="8da91-838">Imagen de Managed Disks *Set-AzureRmVMSourceImage* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage>).</span><span class="sxs-lookup"><span data-stu-id="8da91-838">Managed Disk Image *Set-AzureRmVMSourceImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage></span></span>
* <span data-ttu-id="8da91-839">Cree una máquina virtual a partir de la configuración de la máquina virtual con *New-AzureRmVM* (consulte <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm>).</span><span class="sxs-lookup"><span data-stu-id="8da91-839">Create a new VM from the VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>

<span data-ttu-id="8da91-840">**CLI de Azure 2.0**</span><span class="sxs-lookup"><span data-stu-id="8da91-840">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="8da91-841">Utilice *sysprep* en Windows o *waagent -deprovision* en Linux para generalizar la máquina virtual (consulte [Referencia técnica de Sysprep](https://technet.microsoft.com/library/cc766049.aspx) para Windows o[ Captura de una máquina virtual Linux para usarla como plantilla de Resource Manager][capture-image-linux-step-2-create-vm-image] para Linux).</span><span class="sxs-lookup"><span data-stu-id="8da91-841">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="8da91-842">Inicie sesión en la suscripción con *az login*.</span><span class="sxs-lookup"><span data-stu-id="8da91-842">Log in to your subscription with *az login*</span></span>
* <span data-ttu-id="8da91-843">Seleccione su suscripción con *az account set --subscription `<subscription name or id`>*.</span><span class="sxs-lookup"><span data-stu-id="8da91-843">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="8da91-844">Cargue el VHD con *az storage blob upload* (consulte [Uso de la CLI de Azure con Azure Storage][storage-azure-cli]).</span><span class="sxs-lookup"><span data-stu-id="8da91-844">Upload the VHD with *az storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="8da91-845">(Opcional) Cree una imagen de Managed Disks a partir del VHD con *az image create* (consulte https://docs.microsoft.com/cli/azure/image#create).</span><span class="sxs-lookup"><span data-stu-id="8da91-845">(Optional) Create a Managed Disk Image from the VHD with *az image create* - see https://docs.microsoft.com/cli/azure/image#create</span></span>
* <span data-ttu-id="8da91-846">Cree una máquina virtual especificando el VHD o la imagen de Managed Disks cargados como disco del sistema operativo con *az vm create* y el parámetro *--image*.</span><span class="sxs-lookup"><span data-stu-id="8da91-846">Create a new VM specifying the uploaded VHD or Managed Disk Image as OS disk with *az vm create* and parameter *--image*</span></span>

<span data-ttu-id="8da91-847">**Plantilla**</span><span class="sxs-lookup"><span data-stu-id="8da91-847">**Template**</span></span>

* <span data-ttu-id="8da91-848">Utilice *sysprep* en Windows o *waagent -deprovision* en Linux para generalizar la máquina virtual (consulte [Referencia técnica de Sysprep](https://technet.microsoft.com/library/cc766049.aspx) para Windows o[ Captura de una máquina virtual Linux para usarla como plantilla de Resource Manager][capture-image-linux-step-2-create-vm-image] para Linux).</span><span class="sxs-lookup"><span data-stu-id="8da91-848">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="8da91-849">Cargue el VHD con PowerShell o la CLI de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-849">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="8da91-850">(Opcional) Cree una imagen de Managed Disks a partir del VHD con PowerShell, la CLI de Azure o Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-850">(Optional) Create a Managed Disk Image from the VHD with Powershell, Azure CLI or the Azure portal</span></span>
* <span data-ttu-id="8da91-851">Implemente la VM con una plantilla de JSON en la que se haga referencia al VHD de la imagen, como se muestra en [esta plantilla de JSON de ejemplo](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) o con una imagen de Managed Disks, como se muestra en [esta plantilla de JSON de ejemplo](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="8da91-851">Deploy the VM with a JSON template referencing the image VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) or using the Managed Disk Image as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span></span>

#### <a name="downloading-vhds-or-managed-disks-to-on-premises"></a><span data-ttu-id="8da91-852">Descarga local de discos duros virtuales o discos de Managed Disks</span><span class="sxs-lookup"><span data-stu-id="8da91-852">Downloading VHDs or Managed Disks to on-premises</span></span>
<span data-ttu-id="8da91-853">La solución de infraestructura como servicio de Azure no solo funciona unidireccionalmente, en el sentido de que solo permite cargar sistemas SAP y VHD,</span><span class="sxs-lookup"><span data-stu-id="8da91-853">Azure Infrastructure as a Service is not a one-way street of only being able to upload VHDs and SAP systems.</span></span> <span data-ttu-id="8da91-854">sino que también puede mover sistemas SAP de Azure de nuevo al entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-854">You can move SAP systems from Azure back into the on-premises world as well.</span></span>

<span data-ttu-id="8da91-855">Durante la descarga, los discos duros virtuales o los discos de Managed Disks no pueden estar activos.</span><span class="sxs-lookup"><span data-stu-id="8da91-855">During the time of the download the VHDs or Managed Disks can’t be active.</span></span> <span data-ttu-id="8da91-856">Incluso cuando se descargan los discos que están montados en máquinas virtuales, la máquina virtual debe estar apagada y desasignada.</span><span class="sxs-lookup"><span data-stu-id="8da91-856">Even when downloading disks which are mounted to VMs, the VM needs to be shut down and deallocated.</span></span> <span data-ttu-id="8da91-857">Si solo quiere descargar el contenido de la base de datos, que después se debe usar para configurar un nuevo sistema local, y si desea que, durante el tiempo que dure la descarga y la configuración del nuevo sistema, el sistema presente en Azure continúe estando operativo, podría evitar un tiempo de inactividad prolongado realizando una copia de seguridad comprimida de la base de datos en un disco para sencillamente descargar este último en lugar de descargar también la VM base del SO.</span><span class="sxs-lookup"><span data-stu-id="8da91-857">If you only want to download the database content which then should be used to set up a new system on-premises and if it is acceptable that during the time of the download and the setup of the new system that the system in Azure can still be operational, you could avoid a long downtime by performing a compressed database backup into a disk and just download that disk instead of also downloading the OS base VM.</span></span>

#### <a name="powershell"></a><span data-ttu-id="8da91-858">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-858">Powershell</span></span>

  * <span data-ttu-id="8da91-859">Descarga de un disco de Managed Disks</span><span class="sxs-lookup"><span data-stu-id="8da91-859">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="8da91-860">En primer lugar, debe acceder al blob subyacente del disco de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-860">You first need to get access to the underlying blob of the Managed Disk.</span></span> <span data-ttu-id="8da91-861">Después, puede copiar el blob subyacente en una cuenta de almacenamiento nueva y descargarlo desde esta cuenta.</span><span class="sxs-lookup"><span data-stu-id="8da91-861">Then you can copy the underlying blob to a new storage account and download the blob from this storage account.</span></span>

  ```powershell
  $access = Grant-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name> -Access Read -DurationInSecond 3600
  $key = (Get-AzureRmStorageAccountKey -ResourceGroupName <resource group> -Name <storage account name>)[0].Value
  $destContext = (New-AzureStorageContext -StorageAccountName <storage account name -StorageAccountKey $key)
  Start-AzureStorageBlobCopy -AbsoluteUri $access.AccessSAS -DestContainer <container name> -DestBlob <blob name> -DestContext $destContext
  # Wait for blob copy to finish
  Get-AzureStorageBlobCopyState -Container <container name> -Blob <blob name> -Context $destContext
  Save-AzureRmVhd -SourceUri <blob in new storage account> -LocalFilePath <local file path> -StorageKey $key
  # Wait for download to finish
  Revoke-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name>
  ```

  * <span data-ttu-id="8da91-862">Descarga de un disco duro virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-862">Downloading a VHD</span></span>  
  <span data-ttu-id="8da91-863">Una vez que se haya detenido el sistema SAP y se haya apagado la máquina virtual, podrá usar el cmdlet de PowerShell Save-AzureRmVhd en el destino local para volver a descargar los discos VHD al entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-863">Once the SAP system is stopped and the VM is shut down, you can use the PowerShell cmdlet Save-AzureRmVhd on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="8da91-864">Para ello, necesita la dirección URL del VHD, que puede encontrar en la sección "Almacenamiento" de Azure Portal (debe ir a la cuenta de almacenamiento y al contenedor de almacenamiento donde se creó el disco duro virtual), y tiene que saber dónde se debe copiar el VHD.</span><span class="sxs-lookup"><span data-stu-id="8da91-864">In order to do that, you need the URL of the VHD which you can find in the ‘Storage Section’ of the Azure portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

  <span data-ttu-id="8da91-865">Entonces podrá utilizar el comando con solo definir el parámetro SourceUri como la URL del VHD que se va a descargar y LocalFilePath como la ubicación física del disco duro virtual (incluido su nombre).</span><span class="sxs-lookup"><span data-stu-id="8da91-865">Then you can leverage the command by simply defining the parameter SourceUri as the URL of the VHD to download and the LocalFilePath as the physical location of the VHD (including its name).</span></span> <span data-ttu-id="8da91-866">El comando podría presentar una sintaxis parecida a esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-866">The command could look like:</span></span>

  ```powerhell
  Save-AzureRmVhd -ResourceGroupName <resource group name of storage account> -SourceUri http://<storage account name>.blob.core.windows.net/<container name>/sapidedata.vhd -LocalFilePath E:\Azure_downloads\sapidesdata.vhd
  ```

  <span data-ttu-id="8da91-867">Para obtener más detalles sobre el cmdlet Save-AzureRmVhd, revise lo siguiente <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span><span class="sxs-lookup"><span data-stu-id="8da91-867">For more details of the Save-AzureRmVhd cmdlet, please check here <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span></span>

#### <a name="cli-20"></a><span data-ttu-id="8da91-868">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="8da91-868">CLI 2.0</span></span>
  * <span data-ttu-id="8da91-869">Descarga de un disco de Managed Disks</span><span class="sxs-lookup"><span data-stu-id="8da91-869">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="8da91-870">En primer lugar, debe acceder al blob subyacente del disco de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-870">You first need to get access to the underlying blob of the Managed Disk.</span></span> <span data-ttu-id="8da91-871">Después, puede copiar el blob subyacente en una cuenta de almacenamiento nueva y descargarlo desde esta cuenta.</span><span class="sxs-lookup"><span data-stu-id="8da91-871">Then you can copy the underlying blob to a new storage account and download the blob from this storage account.</span></span>
  ```
  az disk grant-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --duration-in-seconds 3600
  az storage blob download --sas-token "<sas token>" --account-name <account name> --container-name <container name> --name <blob name> --file <local file>
  az disk revoke-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>"
  ```

  * <span data-ttu-id="8da91-872">Descarga de un disco duro virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-872">Downloading a VHD</span></span>   
  <span data-ttu-id="8da91-873">Una vez que se haya detenido el sistema SAP y se haya apagado la máquina virtual, podrá usar el comando de la CLI de Azure _azure storage blob download_ en el destino local para volver a descargar los discos VHD al entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-873">Once the SAP system is stopped and the VM is shut down, you can use the Azure CLI command _azure storage blob download_ on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="8da91-874">Para ello, necesita el nombre y el contenedor del VHD, que puede encontrar en la sección "Almacenamiento" de Azure Portal (debe ir a la cuenta de almacenamiento y al contenedor de almacenamiento donde se creó el disco duro virtual), y tiene que saber dónde se debe copiar el VHD.</span><span class="sxs-lookup"><span data-stu-id="8da91-874">In order to do that, you need the name and the container of the VHD which you can find in the ‘Storage Section’ of the Azure portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

  <span data-ttu-id="8da91-875">Entonces podrá utilizar el comando con solo definir los parámetros blob y container del VHD que se va a descargar, y destination como la ubicación física de destino del disco duro virtual (incluido su nombre).</span><span class="sxs-lookup"><span data-stu-id="8da91-875">Then you can leverage the command by simply defining the parameters blob and container of the VHD to download and the destination as the physical target location of the VHD (including its name).</span></span> <span data-ttu-id="8da91-876">El comando podría presentar una sintaxis parecida a esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-876">The command could look like:</span></span>

  ```
  az storage blob download --name <name of the VHD to download> --container-name <container of the VHD to download> --account-name <storage account name of the VHD to download> --account-key <storage account key> --file <destination of the VHD to download>
  ```

### <a name="transferring-vms-and-disks-within-azure"></a><span data-ttu-id="8da91-877">Transferencia de máquinas virtuales y discos dentro de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-877">Transferring VMs and disks within Azure</span></span>
#### <a name="copying-sap-systems-within-azure"></a><span data-ttu-id="8da91-878">Copia de los sistemas SAP en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-878">Copying SAP systems within Azure</span></span>
<span data-ttu-id="8da91-879">Es probable que un sistema SAP o incluso un servidor de DBMS dedicado que respalde una capa de aplicaciones de SAP se componga de varios discos que contengan el sistema operativo con los archivos binarios o los archivos de registro y datos de la base de datos de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-879">An SAP system or even a dedicated DBMS server supporting an SAP application layer will likely consist of several disks which contain either the OS with the binaries or the data and log file(s) of the SAP database.</span></span> <span data-ttu-id="8da91-880">Ni la funcionalidad de copiar discos de Azure ni la de guardar dichos discos en un disco local cuenta con un mecanismo de sincronización que pueda realizar instantáneas de varios discos al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="8da91-880">Neither the Azure functionality of copying disks nor the Azure functionality of saving disks to a local disk has a synchronization mechanism, which would snapshot multiple disks synchronously.</span></span> <span data-ttu-id="8da91-881">Por lo tanto, el estado de los discos copiados o guardados, aunque estén montados en la misma máquina virtual, sería distinto.</span><span class="sxs-lookup"><span data-stu-id="8da91-881">Therefore, the state of the copied or saved disks even if those are mounted against the same VM would be different.</span></span> <span data-ttu-id="8da91-882">Es decir, en el caso concreto de tener distintos archivos de registro y datos incluidos en los distintos discos, la base de datos terminaría siendo incoherente.</span><span class="sxs-lookup"><span data-stu-id="8da91-882">This means that in the concrete case of having different data and logfile(s) contained in the different disks, the database in the end would be inconsistent.</span></span>

<span data-ttu-id="8da91-883">**Conclusión: para copiar o guardar discos que formen parte de la configuración de un sistema SAP, tendrá que detener dicho sistema y también apagar las máquinas virtuales implementadas. Solo entonces podrá copiar o descargar el conjunto de discos para crear una copia del sistema SAP en Azure o en el entorno local.**</span><span class="sxs-lookup"><span data-stu-id="8da91-883">**Conclusion: In order to copy or save disks which are part of an SAP system configuration you need to stop the SAP system and also need to shut down the deployed VM. Only then you can copy or download the set of disks to either create a copy of the SAP system in Azure or on-premises.**</span></span>

<span data-ttu-id="8da91-884">Los discos de datos pueden almacenarse como archivos VHD en una cuenta de Azure Storage y se pueden asociar a una máquina virtual directamente o utilizarse como una imagen.</span><span class="sxs-lookup"><span data-stu-id="8da91-884">Data disks can be stored as VHD files in an Azure Storage Account and can be directly attached to a virtual machine or be used as an image.</span></span> <span data-ttu-id="8da91-885">En este caso, el VHD se copia en otra ubicación antes de asociarse a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-885">In this case, the VHD is copied to another location before being attached to the virtual machine.</span></span> <span data-ttu-id="8da91-886">El nombre completo del archivo VHD de Azure debe ser único dentro de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-886">The full name of the VHD file in Azure must be unique within Azure.</span></span> <span data-ttu-id="8da91-887">Como ya se ha mencionado anteriormente, el nombre se compone de tres partes y presenta una sintaxis similar a esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-887">As mentioned earlier already, the name is kind of a three-part name that looks like:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="8da91-888">Los discos de datos también pueden ser discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-888">Data disks can also be Managed Disks.</span></span> <span data-ttu-id="8da91-889">En este caso, el disco de Managed Disks se usa para crear un disco de Managed Disks antes de conectarlo a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-889">In this case, the Managed Disk is used to create a new Managed Disk before being attached to the virtual machine.</span></span> <span data-ttu-id="8da91-890">El nombre del disco de Managed Disks debe ser exclusivo dentro de un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8da91-890">The name of the Managed Disk must be unique within a resource group.</span></span>

##### <a name="powershell"></a><span data-ttu-id="8da91-891">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-891">Powershell</span></span>
<span data-ttu-id="8da91-892">Puede usar cmdlets de Azure PowerShell para copiar un VHD, como se muestra en [este artículo][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="8da91-892">You can use Azure PowerShell cmdlets to copy a VHD as shown in [this article][storage-powershell-guide-full-copy-vhd].</span></span> <span data-ttu-id="8da91-893">Para crear un disco de Managed Disks, use New-AzureRmDiskConfig y New-AzureRmDisk como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="8da91-893">To create a new Managed Disk, use New-AzureRmDiskConfig and New-AzureRmDisk as shown in the following example.</span></span>

```powershell
$config = New-AzureRmDiskConfig -CreateOption Copy -SourceUri "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" -Location <location>
New-AzureRmDisk -ResourceGroupName <resource group name> -DiskName <disk name> -Disk $config
```

##### <a name="cli-20"></a><span data-ttu-id="8da91-894">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="8da91-894">CLI 2.0</span></span>
<span data-ttu-id="8da91-895">Puede utilizar la CLI de Azure para copiar un VHD, como se muestra en [este artículo][storage-azure-cli-copy-blobs].</span><span class="sxs-lookup"><span data-stu-id="8da91-895">You can use Azure CLI to copy a VHD as shown in [this article][storage-azure-cli-copy-blobs].</span></span> <span data-ttu-id="8da91-896">Para crear un disco de Managed Disks, use *az disk create* como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="8da91-896">To create a new Managed Disk, use *az disk create* as shown in the following example.</span></span>

```
az disk create --source "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --name <disk name> --resource-group <resource group name> --location <location>
```

##### <a name="azure-storage-tools"></a><span data-ttu-id="8da91-897">Herramientas de Almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-897">Azure Storage tools</span></span>
* <span data-ttu-id="8da91-898"><http://storageexplorer.com/></span><span class="sxs-lookup"><span data-stu-id="8da91-898"><http://storageexplorer.com/></span></span>

<span data-ttu-id="8da91-899">Las ediciones profesionales de los Exploradores de Azure Storage se pueden encontrar aquí:</span><span class="sxs-lookup"><span data-stu-id="8da91-899">Professional editions of Azure Storage Explorers can be found here:</span></span>

* <span data-ttu-id="8da91-900"><http://www.cerebrata.com/></span><span class="sxs-lookup"><span data-stu-id="8da91-900"><http://www.cerebrata.com/></span></span>
* <span data-ttu-id="8da91-901"><http://clumsyleaf.com/products/cloudxplorer></span><span class="sxs-lookup"><span data-stu-id="8da91-901"><http://clumsyleaf.com/products/cloudxplorer></span></span>

<span data-ttu-id="8da91-902">La copia de un VHD dentro de una cuenta de almacenamiento es un proceso que solo tarda unos pocos segundos (como sucede en el caso de la creación de instantáneas con copia diferida y copia en escritura por parte de hardware de SAN).</span><span class="sxs-lookup"><span data-stu-id="8da91-902">The copy of a VHD itself within a storage account is a process which takes only a few seconds (similar to SAN hardware creating snapshots with lazy copy and copy on write).</span></span> <span data-ttu-id="8da91-903">Una vez que tenga una copia del archivo VHD, podrá asociarla a una máquina virtual o usarla como una imagen para conectar copias del VHD a máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-903">After you have a copy of the VHD file you can attach it to a virtual machine or use it as an image to attach copies of the VHD to virtual machines.</span></span>

##### <a name="powershell"></a><span data-ttu-id="8da91-904">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-904">Powershell</span></span>
```powershell
# attach a vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -VhdUri <path to vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a managed disk to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -ManagedDiskId <managed disk id> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a copy of the vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name <disk name> -VhdUri <new path of vhd> -SourceImageUri <path to image vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption fromImage
$vm | Update-AzureRmVM

# attach a copy of the managed disk to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$diskConfig = New-AzureRmDiskConfig -Location $vm.Location -CreateOption Copy -SourceUri <source managed disk id>
$disk = New-AzureRmDisk -DiskName <disk name> -Disk $diskConfig -ResourceGroupName <resource group name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Caching <caching option> -Lun <lun, for example 0> -CreateOption attach -ManagedDiskId $disk.Id
$vm | Update-AzureRmVM
```
##### <a name="cli-20"></a><span data-ttu-id="8da91-905">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="8da91-905">CLI 2.0</span></span>
```

# attach a vhd to a vm
az vm unmanaged-disk attach --resource-group <resource group name> --vm-name <vm name> --vhd-uri <path to vhd>

# attach a managed disk to a vm
az vm disk attach --resource-group <resource group name> --vm-name <vm name> --disk <managed disk id>

# attach a copy of the vhd to a vm
# this scenario is currently not possible with Azure CLI. A workaround is to manually copy the vhd to the destination.

# attach a copy of a managed disk to a vm
az disk create --name <new disk name> --resource-group <resource group name> --location <location of target virtual machine> --source <source managed disk id>
az vm disk attach --disk <new disk name or managed disk id> --resource-group <resource group name> --vm-name <vm name> --caching <caching option> --lun <lun, for example 0>
```

#### <span data-ttu-id="8da91-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copia de discos entre cuentas de almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copying disks between Azure Storage Accounts</span></span>
<span data-ttu-id="8da91-907">Esta tarea no puede realizarse en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-907">This task cannot be performed on the Azure portal.</span></span> <span data-ttu-id="8da91-908">Puede usar cmdlets de Azure PowerShell, la CLI de Azure o un explorador de almacenamiento de terceros.</span><span class="sxs-lookup"><span data-stu-id="8da91-908">You can use Azure PowerShell cmdlets, Azure CLI or a third-party storage browser.</span></span> <span data-ttu-id="8da91-909">Los cmdlets de PowerShell o los comandos de la CLI pueden crear y administrar blobs, lo que abarca la capacidad de copiar blobs de forma asincrónica entre las distintas cuentas de almacenamiento y regiones de la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-909">The PowerShell cmdlets or CLI commands can create and manage blobs, which include the ability to asynchronously copy blobs across Storage Accounts and across regions within the Azure subscription.</span></span>

##### <a name="powershell"></a><span data-ttu-id="8da91-910">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-910">Powershell</span></span>
<span data-ttu-id="8da91-911">También puede copiar discos duros virtuales entre suscripciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-911">You can also copy VHDs between subscriptions.</span></span> <span data-ttu-id="8da91-912">Para más información, consulte [este artículo][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="8da91-912">For more information read [this article][storage-powershell-guide-full-copy-vhd].</span></span>

<span data-ttu-id="8da91-913">El flujo básico de la lógica de los cmdlets de PowerShell se compone, a grandes rasgos, de estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8da91-913">The basic flow of the PS cmdlet logic looks like this:</span></span>

* <span data-ttu-id="8da91-914">Crear un contexto de la cuenta de almacenamiento de la cuenta de almacenamiento de **origen** con *New-AzureStorageContext* (consulte <https://msdn.microsoft.com/library/dn806380.aspx>).</span><span class="sxs-lookup"><span data-stu-id="8da91-914">Create a storage account context for the **source** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="8da91-915">Crear un contexto de cuenta de almacenamiento para la cuenta de almacenamiento de **destino** con *New-AzureStorageContext* (consulte <https://msdn.microsoft.com/library/dn806380.aspx>).</span><span class="sxs-lookup"><span data-stu-id="8da91-915">Create a storage account context for the **target** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="8da91-916">Inicie la copia con</span><span class="sxs-lookup"><span data-stu-id="8da91-916">Start the copy with</span></span>

```powershell
Start-AzureStorageBlobCopy -SrcBlob <source blob name> -SrcContainer <source container name> -SrcContext <variable containing context of source storage account> -DestBlob <target blob name> -DestContainer <target container name> -DestContext <variable containing context of target storage account>
```

* <span data-ttu-id="8da91-917">Compruebe el estado de la copia en un bucle con</span><span class="sxs-lookup"><span data-stu-id="8da91-917">Check the status of the copy in a loop with</span></span>

```powershell
Get-AzureStorageBlobCopyState -Blob <target blob name> -Container <target container name> -Context <variable containing context of target storage account>
```

* <span data-ttu-id="8da91-918">Asocie el nuevo VHD a una máquina virtual como se describió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8da91-918">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="8da91-919">Consulte [este artículo][storage-powershell-guide-full-copy-vhd] para obtener ejemplos.</span><span class="sxs-lookup"><span data-stu-id="8da91-919">For examples see [this article][storage-powershell-guide-full-copy-vhd].</span></span>

##### <a name="cli-20"></a><span data-ttu-id="8da91-920">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="8da91-920">CLI 2.0</span></span>
* <span data-ttu-id="8da91-921">Inicie la copia con</span><span class="sxs-lookup"><span data-stu-id="8da91-921">Start the copy with</span></span>

```
az storage blob copy start --source-blob <source blob name> --source-container <source container name> --source-account-name <source storage account name> --source-account-key <source storage account key> --destination-container <target container name> --destination-blob <target blob name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="8da91-922">Compruebe el estado de la copia en un bucle con</span><span class="sxs-lookup"><span data-stu-id="8da91-922">Check the status if the copy in a loop with</span></span>

```
az storage blob show --name <target blob name> --container <target container name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="8da91-923">Asocie el nuevo VHD a una máquina virtual como se describió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8da91-923">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="8da91-924">Consulte [este artículo][storage-azure-cli-copy-blobs] para obtener ejemplos.</span><span class="sxs-lookup"><span data-stu-id="8da91-924">For examples see [this article][storage-azure-cli-copy-blobs].</span></span>

### <a name="disk-handling"></a><span data-ttu-id="8da91-925">Administración de discos</span><span class="sxs-lookup"><span data-stu-id="8da91-925">Disk Handling</span></span>
#### <span data-ttu-id="8da91-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>Estructura de VM/disco para implementaciones de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>VM/disk structure for SAP deployments</span></span>
<span data-ttu-id="8da91-927">Lo ideal es que la administración de la estructura de una máquina virtual y los discos asociados sea muy sencilla.</span><span class="sxs-lookup"><span data-stu-id="8da91-927">Ideally the handling of the structure of a VM and the associated disks should be very simple.</span></span> <span data-ttu-id="8da91-928">En las instalaciones locales, los clientes han desarrollado muchas formas de estructurar una instalación de servidor.</span><span class="sxs-lookup"><span data-stu-id="8da91-928">In on-premises installations, customers developed many ways of structuring a server installation.</span></span>

* <span data-ttu-id="8da91-929">Un disco base que contenga el sistema operativo y todos los archivos binarios de DBMS o SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-929">One base disk which contains the OS and all the binaries of the DBMS and/or SAP.</span></span> <span data-ttu-id="8da91-930">Desde marzo de 2015, este disco puede tener un tamaño máximo de 1 TB en lugar de las restricciones anteriores que lo limitaban a 127 GB.</span><span class="sxs-lookup"><span data-stu-id="8da91-930">Since March 2015, this disk can be up to 1TB in size instead of earlier restrictions that limited it to 127GB.</span></span>
* <span data-ttu-id="8da91-931">Uno o varios discos que contengan el archivo de registro de DBMS de la base de datos SAP y el del área de almacenamiento temporal de DBMS (si el DBMS es compatible con esto).</span><span class="sxs-lookup"><span data-stu-id="8da91-931">One or multiple disks which contains the DBMS log file of the SAP database and the log file of the DBMS temp storage area (if the DBMS supports this).</span></span> <span data-ttu-id="8da91-932">Si los requisitos de E/S por segundo de registro de la base de datos son elevados, tendrá que seccionar varios discos para lograr el volumen de E/S por segundo necesario.</span><span class="sxs-lookup"><span data-stu-id="8da91-932">If the database log IOPS requirements are high, you need to stripe multiple disks in order to reach the IOPS volume required.</span></span>
* <span data-ttu-id="8da91-933">Diversos discos que contengan uno o dos archivos de base de datos de la base de datos de SAP, así como los archivos de datos temporales de DBMS (si el DBMS es compatible con esto).</span><span class="sxs-lookup"><span data-stu-id="8da91-933">A number of disks containing one or two database files of the SAP database and the DBMS temp data files as well (if the DBMS supports this).</span></span>

![Configuración de referencia de máquinas virtuales IaaS de Azure en SAP][planning-guide-figure-1300]

[comment]: <> (MShermannd  TODO describe Linux structure  )

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-937">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-937">Windows</span></span>
>
> <span data-ttu-id="8da91-938">En el caso de muchos clientes, observamos configuraciones en las que, por ejemplo, los archivos binarios de SAP y DBMS no estaban instalados en la unidad c:\ en la que sí lo estaba el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="8da91-938">With many customers we saw configurations where, for example, SAP and DBMS binaries were not installed on the c:\ drive where the OS was installed.</span></span> <span data-ttu-id="8da91-939">Existían varios motivos para ello, pero cuando nos fijábamos en la causa principal, normalmente se debía a que los discos eran pequeños y actualizaciones del sistema operativo necesitaban más espacio hace 10 o 15 años.</span><span class="sxs-lookup"><span data-stu-id="8da91-939">There were various reasons for this, but when we went back to the root, it usually was that the drives were small and OS upgrades needed additional space 10-15 years ago.</span></span> <span data-ttu-id="8da91-940">Ambas condiciones han dejado de aplicarse actualmente.</span><span class="sxs-lookup"><span data-stu-id="8da91-940">Both conditions do not apply these days too often anymore.</span></span> <span data-ttu-id="8da91-941">En la actualidad, la unidad c:\ puede asignarse a máquinas virtuales o discos de gran volumen.</span><span class="sxs-lookup"><span data-stu-id="8da91-941">Today the c:\ drive can be mapped on large volume disks or VMs.</span></span> <span data-ttu-id="8da91-942">A fin de simplificar la estructura de las implementaciones, se recomienda seguir el patrón de implementación para sistemas SAP NetWeaver en Azure que verá a continuación.</span><span class="sxs-lookup"><span data-stu-id="8da91-942">In order to keep deployments simple in their structure, it is recommended to follow the following deployment pattern for SAP NetWeaver systems in Azure</span></span>
>
> <span data-ttu-id="8da91-943">El archivo de paginación del sistema operativo de Windows debe estar en la unidad D:\ (disco no persistente).</span><span class="sxs-lookup"><span data-stu-id="8da91-943">The Windows operating system pagefile should be on the D: drive (non-persistent disk)</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-945">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-945">Linux</span></span>
>
> <span data-ttu-id="8da91-946">Coloque el archivo de intercambio de Linux en /mnt/mnt/resource en Linux, tal y como se describe en [este artículo][virtual-machines-linux-agent-user-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-946">Place the Linux swapfile under /mnt /mnt/resource on Linux as described in [this article][virtual-machines-linux-agent-user-guide].</span></span> <span data-ttu-id="8da91-947">El archivo de intercambio puede configurarse en el archivo de configuración del /etc/waagent.conf del agente de Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-947">The swap file can be configured in the configuration file of the Linux Agent /etc/waagent.conf.</span></span> <span data-ttu-id="8da91-948">Agregue o cambie las siguientes opciones de configuración:</span><span class="sxs-lookup"><span data-stu-id="8da91-948">Add or change the following settings:</span></span>
>
>

```
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=30720
```

<span data-ttu-id="8da91-949">Para activar los cambios, debe reiniciar al agente de Linux con</span><span class="sxs-lookup"><span data-stu-id="8da91-949">To activate the changes, you need to restart the Linux Agent with</span></span>

```
sudo service waagent restart
```

<span data-ttu-id="8da91-950">Lea la nota de SAP [1597355] para más información sobre el tamaño recomendado del archivo de intercambio.</span><span class="sxs-lookup"><span data-stu-id="8da91-950">Please read SAP Note [1597355] for more details on the recommended swap file size</span></span>

- - -
<span data-ttu-id="8da91-951">Los requisitos de E/S por segundo y la latencia necesaria determinan el número de discos utilizados para los archivos de datos de DBMS y el tipo de almacenamiento de Azure Storage en el que se hospedan estos discos.</span><span class="sxs-lookup"><span data-stu-id="8da91-951">The number of disks used for the DBMS data files and the type of Azure Storage these disks are hosted on should be determined by the IOPS requirements and the latency required.</span></span> <span data-ttu-id="8da91-952">Las cuotas exactas se describen en [este artículo (Linux)][virtual-machines-sizes-linux] y en [este otro (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="8da91-952">Exact quotas are described in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="8da91-953">La experiencia en implementaciones de SAP que hemos acumulado durante los últimos 2 años nos ha permitido aprender una serie de lecciones que se pueden resumir del siguiente modo:</span><span class="sxs-lookup"><span data-stu-id="8da91-953">Experience of SAP deployments over the last 2 years taught us some lessons which can be summarized as:</span></span>

* <span data-ttu-id="8da91-954">El tráfico de IOPS a los diferentes archivos de datos no es siempre el mismo porque puede que los sistemas existentes del cliente presenten archivos de datos de distinto tamaño, los cuales que representan sus bases de datos de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-954">IOPS traffic to different data files is not always the same since existing customer systems might have differently sized data files representing their SAP database(s).</span></span> <span data-ttu-id="8da91-955">Por tanto, resultó ser más recomendable usar una configuración de RAID en lugar de varios discos para colocar los LUN de archivos de datos extraídos de estos.</span><span class="sxs-lookup"><span data-stu-id="8da91-955">As a result it turned out to be better using a RAID configuration over multiple disks to place the data files LUNs carved out of those.</span></span> <span data-ttu-id="8da91-956">Se han producido situaciones, especialmente con el almacenamiento estándar de Azure, en las que una tasa E/S por segundo alcanzó la cuota de un solo disco en relación con el registro de transacciones del DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-956">There were situations, especially with Azure Standard Storage where an IOPS rate hit the quota of a single disk against the DBMS transaction log.</span></span> <span data-ttu-id="8da91-957">En estos casos, se recomienda usar Premium Storage o, como método alternativo, agregar varios discos de almacenamiento estándar con un RAID de software.</span><span class="sxs-lookup"><span data-stu-id="8da91-957">In such scenarios the use of Premium Storage is recommended or alternatively aggregating multiple Standard Storage disks with a software RAID.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-959">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-959">Windows</span></span>
>
> * <span data-ttu-id="8da91-960">[Procedimientos recomendados para SQL Server en Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]</span><span class="sxs-lookup"><span data-stu-id="8da91-960">[Performance best practices for SQL Server in Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-962">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-962">Linux</span></span>
>
> * <span data-ttu-id="8da91-963">[Configuración del RAID de software en Linux][virtual-machines-linux-configure-raid]</span><span class="sxs-lookup"><span data-stu-id="8da91-963">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid]</span></span>
> * <span data-ttu-id="8da91-964">[Configuración del LVM en una máquina virtual Linux en Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="8da91-964">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> * [<span data-ttu-id="8da91-965">Azure Storage secrets and Linux I/O optimizations (Secretos de Almacenamiento de Azure y optimizaciones de E/S de Linux)</span><span class="sxs-lookup"><span data-stu-id="8da91-965">Azure Storage secrets and Linux I/O optimizations</span></span>](http://blogs.msdn.com/b/igorpag/archive/2014/10/23/azure-storage-secrets-and-linux-i-o-optimizations.aspx)
>
>

- - -
* <span data-ttu-id="8da91-966">El almacenamiento premium muestra un rendimiento bastante superior, especialmente en el caso de escrituras del registro de transacciones cruciales.</span><span class="sxs-lookup"><span data-stu-id="8da91-966">Premium Storage is showing significant better performance, especially for critical transaction log writes.</span></span> <span data-ttu-id="8da91-967">Para escenarios de SAP en los que se espera obtener un rendimiento similar al de un entorno de producción, se recomienda encarecidamente usar una serie de máquinas virtuales que puedan aprovechar el almacenamiento premium de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-967">For SAP scenarios that are expected to deliver production like performance, it is highly recommended to use VM-Series that can leverage Azure Premium Storage.</span></span>

<span data-ttu-id="8da91-968">Tenga en cuenta que el disco que contiene el sistema operativo y, como se recomienda, también los archivos binarios de SAP y la base de datos (la máquina virtual base), ya no se encuentra limitado a 127 GB.</span><span class="sxs-lookup"><span data-stu-id="8da91-968">Keep in mind that the disk which contains the OS, and as we recommend, the binaries of SAP and the database (base VM) as well, is not anymore limited to 127GB.</span></span> <span data-ttu-id="8da91-969">Ahora puede tener un tamaño máximo de 1 TB.</span><span class="sxs-lookup"><span data-stu-id="8da91-969">It now can have up to 1TB in size.</span></span> <span data-ttu-id="8da91-970">Con este límite, se contará con espacio suficiente para guardar todos los archivos necesarios, incluidos los registros de trabajos por lotes de SAP, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="8da91-970">This should be enough space to keep all the necessary file including, for example, SAP batch job logs.</span></span>

<span data-ttu-id="8da91-971">Para más sugerencias e información, en concreto para las máquinas virtuales de DBMS, consulte la [Guía de implementación de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-971">For more suggestions and more details, specifically for DBMS VMs, please consult the [DBMS Deployment Guide][dbms-guide]</span></span>

#### <a name="disk-handling"></a><span data-ttu-id="8da91-972">Administración de discos</span><span class="sxs-lookup"><span data-stu-id="8da91-972">Disk Handling</span></span>
<span data-ttu-id="8da91-973">En la mayoría de los escenarios, tendrá que crear discos adicionales para implementar la base de datos de SAP en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-973">In most scenarios you need to create additional disks in order to deploy the SAP database into the VM.</span></span> <span data-ttu-id="8da91-974">En el capítulo [Estructura de VM/disco para implementaciones de SAP][planning-guide-5.5.1] de este documento ya se trataron las consideraciones sobre el número de discos.</span><span class="sxs-lookup"><span data-stu-id="8da91-974">We talked about the considerations on number of disks in chapter [VM/disk structure for SAP deployments][planning-guide-5.5.1] of this document.</span></span> <span data-ttu-id="8da91-975">Azure Portal permite asociar y desasociar discos una vez implementada una máquina virtual base.</span><span class="sxs-lookup"><span data-stu-id="8da91-975">The Azure portal allows to attach and detach disks once a base VM is deployed.</span></span> <span data-ttu-id="8da91-976">Los discos se pueden asociar y desasociar cuando la máquina virtual se está ejecutando, así como cuando se encuentra detenida.</span><span class="sxs-lookup"><span data-stu-id="8da91-976">The disks can be attached/detached when the VM is up and running as well as when it is stopped.</span></span> <span data-ttu-id="8da91-977">Al asociar un disco, Azure Portal ofrece la posibilidad de asociar un disco vacío o uno existente que en ese momento no esté conectado a ninguna otra máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-977">When attaching a disk, the Azure portal offers to attach an empty disk or an existing disk which at this point in time is not attached to another VM.</span></span>

<span data-ttu-id="8da91-978">**Note:** Los discos solo pueden estar asociados a una máquina virtual al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="8da91-978">**Note**: Disks can only be attached to one VM at any given time.</span></span>

![Conexión/desconexión de discos con el almacenamiento estándar de Azure][planning-guide-figure-1400]

<span data-ttu-id="8da91-980">Durante la implementación de una nueva máquina virtual, puede decidir si desea usar discos de Managed Disks o colocar los discos en las cuentas de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="8da91-980">During the deployment of a new virtual machine, you can decide whether you want to use Managed Disks or place your disks on Azure Storage Accounts.</span></span> <span data-ttu-id="8da91-981">Si desea usar Premium Storage, se recomienda utilizar discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-981">If you want to use Premium Storage, we recommend using Managed Disks.</span></span>

<span data-ttu-id="8da91-982">Después, debe decidir si desea crear un disco vacío o si quiere seleccionar un disco existente que se haya cargado con anterioridad y deba asociar ahora a la VM.</span><span class="sxs-lookup"><span data-stu-id="8da91-982">Next, you need to decide whether you want to create a new and empty disk or whether you want to select an existing disk that was uploaded earlier and should be attached to the VM now.</span></span>

<span data-ttu-id="8da91-983">**IMPORTANTE**: **no** se recomienda usar el almacenamiento en caché de host con almacenamiento Estándar de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-983">**IMPORTANT**: You **DO NOT** want to use Host Caching with Azure Standard Storage.</span></span> <span data-ttu-id="8da91-984">Debe dejar la preferencia de caché de host en el valor predeterminado, es decir, NINGUNO.</span><span class="sxs-lookup"><span data-stu-id="8da91-984">You should leave the Host Cache preference at the default of NONE.</span></span> <span data-ttu-id="8da91-985">Con el almacenamiento premium de Azure, debería habilitar el almacenamiento en caché de lectura si la característica de E/S es principalmente de lectura, como el tráfico de E/S relativo a archivos de datos de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-985">With Azure Premium Storage you should enable Read Caching if the I/O characteristic is mostly read like typical I/O traffic against database data files.</span></span> <span data-ttu-id="8da91-986">En el caso del archivo de registro de transacciones, se recomienda no utilizar el almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="8da91-986">In case of database transaction log file no caching is recommended.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-988">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-988">Windows</span></span>
>
> <span data-ttu-id="8da91-989">[Cómo conectar un disco de datos en Azure Portal][virtual-machines-linux-attach-disk-portal]</span><span class="sxs-lookup"><span data-stu-id="8da91-989">[How to attach a data disk in the Azure portal][virtual-machines-linux-attach-disk-portal]</span></span>
>
> <span data-ttu-id="8da91-990">Si los discos están conectados, debe iniciar sesión en la máquina virtual para abrir el administrador de discos de Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-990">If disks are attached, you need to log in to the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="8da91-991">Si el montaje automático no está habilitado como se recomienda en el capítulo [Configuración de montaje automático para discos conectados][planning-guide-5.5.3], el volumen recién conectado debe activarse e inicializarse.</span><span class="sxs-lookup"><span data-stu-id="8da91-991">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3], the newly attached volume needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-993">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-993">Linux</span></span>
>
> <span data-ttu-id="8da91-994">Si los discos están conectados, debe iniciar sesión en la máquina virtual e inicializar los discos, como se describe en [este artículo][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span><span class="sxs-lookup"><span data-stu-id="8da91-994">If disks are attached, you need to log in to the VM and initialize the disks as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span></span>
>
>

- - -
<span data-ttu-id="8da91-995">Si el nuevo disco es un disco vacío, también debe dar formato al disco.</span><span class="sxs-lookup"><span data-stu-id="8da91-995">If the new disk is an empty disk, you need to format the disk as well.</span></span> <span data-ttu-id="8da91-996">Para dar formato, especialmente en el caso de los archivos de datos y de registro de DBMS, se aplican las mismas recomendaciones en cuanto a implementaciones sin sistema operativo del DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-996">For formatting, especially for DBMS data and log files the same recommendations as for bare-metal deployments of the DBMS apply.</span></span>

<span data-ttu-id="8da91-997">Como ya se ha mencionado en el capítulo [El concepto de máquina virtual de Microsoft Azure][planning-guide-3.2], una cuenta de Azure Storage no proporciona recursos infinitos en lo relativo a volumen de E/S, E/S por segundo y volumen de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-997">As already mentioned in chapter [The Microsoft Azure Virtual Machine Concept][planning-guide-3.2], an Azure Storage account does not provide infinite resources in terms of I/O volume, IOPS and data volume.</span></span> <span data-ttu-id="8da91-998">Por lo general, las máquinas virtuales de DBMS son las que más afectadas se ven por esto.</span><span class="sxs-lookup"><span data-stu-id="8da91-998">Usually DBMS VMs are most affected by this.</span></span> <span data-ttu-id="8da91-999">Puede que resulte más recomendable utilizar una cuenta de almacenamiento independiente para cada máquina virtual si tiene que implementar algunas VM con un gran volumen de E/S. De este modo, podrá respetar el límite de volumen de la cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-999">It might be best to use a separate Storage Account for each VM if you have few high I/O volume VMs to deploy in order to stay within the limit of the Azure Storage Account volume.</span></span> <span data-ttu-id="8da91-1000">De lo contrario, tendrá que analizar cómo puede asignar estas máquinas virtuales a distintas cuentas de almacenamiento sin superar el límite de cada una de ellas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1000">Otherwise, you need to see how you can balance these VMs between different Storage accounts without hitting the limit of each single Storage Account.</span></span> <span data-ttu-id="8da91-1001">En la [Guía de implementación de DBMS][dbms-guide] podrá encontrar más información al respecto.</span><span class="sxs-lookup"><span data-stu-id="8da91-1001">More details are discussed in the [DBMS Deployment Guide][dbms-guide].</span></span> <span data-ttu-id="8da91-1002">También debe tener en cuenta estas limitaciones para máquinas virtuales de servidor de aplicaciones de SAP puras u otras VM que podrían terminar por necesitar VHD adicionales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1002">You should also keep these limitations in mind for pure SAP application server VMs or other VMs which eventually might require additional VHDs.</span></span> <span data-ttu-id="8da91-1003">Estas restricciones no se aplican si usa un disco de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1003">These restrictions do not apply if you use Managed Disk.</span></span> <span data-ttu-id="8da91-1004">Si pretende usar Premium Storage, se recomienda utilizar discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1004">If you plan to use Premium Storage, we recommend using Managed Disk.</span></span>

<span data-ttu-id="8da91-1005">Otro tema pertinente para las cuentas de almacenamiento es si los VHD de una cuenta de almacenamiento se replican geográficamente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1005">Another topic which is relevant for Storage Accounts is whether the VHDs in a Storage Account are getting Geo-replicated.</span></span> <span data-ttu-id="8da91-1006">La replicación geográfica se habilita o deshabilita en el nivel de cuenta de almacenamiento, y no en el de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1006">Geo-replication is enabled or disabled on the Storage Account level and not on the VM level.</span></span> <span data-ttu-id="8da91-1007">Si la replicación geográfica está habilitada, los VHD incluidos en la cuenta de almacenamiento podrían replicarse en otro centro de datos de Azure de la misma región.</span><span class="sxs-lookup"><span data-stu-id="8da91-1007">If geo-replication is enabled, the VHDs within the Storage Account would be replicated into another Azure data center within the same region.</span></span> <span data-ttu-id="8da91-1008">Antes tomar una decisión al respecto, debería considerar la siguiente restricción:</span><span class="sxs-lookup"><span data-stu-id="8da91-1008">Before deciding on this, you should think about the following restriction:</span></span>

<span data-ttu-id="8da91-1009">La replicación geográfica de Azure funciona localmente en cada disco duro virtual de una máquina virtual y no replica las E/S por orden cronológico a lo largo de varios VHD de una VM.</span><span class="sxs-lookup"><span data-stu-id="8da91-1009">Azure Geo-replication works locally on each VHD in a VM and does not replicate the IOs in chronological order across multiple VHDs in a VM.</span></span> <span data-ttu-id="8da91-1010">Por lo tanto, el disco duro virtual que representa la máquina virtual base, así como cualquier VHD adicional asociado a la VM, se replican sin tener en cuenta los demás.</span><span class="sxs-lookup"><span data-stu-id="8da91-1010">Therefore, the VHD that represents the base VM as well as any additional VHDs attached to the VM are replicated independent of each other.</span></span> <span data-ttu-id="8da91-1011">Es decir, los cambios de los distintos VHD no están sincronizados.</span><span class="sxs-lookup"><span data-stu-id="8da91-1011">This means there is no synchronization between the changes in the different VHDs.</span></span> <span data-ttu-id="8da91-1012">El hecho de que las E/S se replican independientemente del orden en el que se escriben significa que la replicación geográfica no aporta ninguna ventaja para los servidores de bases de datos que tienen sus bases de datos distribuidas en diversos VHD.</span><span class="sxs-lookup"><span data-stu-id="8da91-1012">The fact that the IOs are replicated independently of the order in which they are written means that geo-replication is not of value for database servers that have their databases distributed over multiple VHDs.</span></span> <span data-ttu-id="8da91-1013">Además del DBMS, también puede haber otras aplicaciones en las que los procesos escriben o manipulan datos en diferentes VHD y donde es importante mantener el orden de los cambios.</span><span class="sxs-lookup"><span data-stu-id="8da91-1013">In addition to the DBMS, there also might be other applications where processes write or manipulate data in different VHDs and where it is important to keep the order of changes.</span></span> <span data-ttu-id="8da91-1014">Si esto último figura como requisito, no debe habilitarse la replicación geográfica en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1014">If that is a requirement, geo-replication in Azure should not be enabled.</span></span> <span data-ttu-id="8da91-1015">En función de si necesita o desea la habilitar la replicación geográfica para un conjunto de máquinas virtuales, pero no para otro conjunto, ya puede categorizar las VM y sus VHD relacionados en distintas cuentas de almacenamiento que tengan la replicación geográfica habilitada o deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="8da91-1015">Dependent on whether you need or want geo-replication for a set of VMs, but not for another set, you can already categorize VMs and their related VHDs into different Storage Accounts that have geo-replication enabled or disabled.</span></span>

#### <span data-ttu-id="8da91-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Configuración de montaje automático para discos conectados</span><span class="sxs-lookup"><span data-stu-id="8da91-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Setting automount for attached disks</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1018">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1018">Windows</span></span>
>
> <span data-ttu-id="8da91-1019">En el caso de las máquinas virtuales que se crean a partir de imágenes o discos propios, hay que comprobar y, posiblemente, establecer el parámetro automount.</span><span class="sxs-lookup"><span data-stu-id="8da91-1019">For VMs which are created from own Images or Disks, it is necessary to check and possibly set the automount parameter.</span></span> <span data-ttu-id="8da91-1020">Si se establece este parámetro, la máquina virtual podrá, tras un reinicio o una nueva implementación en Azure, volver a montar automáticamente las unidades asociadas o montadas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1020">Setting this parameter will allow the VM after a restart or redeployment in Azure to mount the attached/mounted drives again automatically.</span></span>
> <span data-ttu-id="8da91-1021">El parámetro ya está establecido en las imágenes que proporciona Microsoft en Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8da91-1021">The parameter is set for the images provided by Microsoft in the Azure Marketplace.</span></span>
>
> <span data-ttu-id="8da91-1022">Para configurar el montaje automático, consulte la documentación del ejecutable de línea de comandos diskpart.exe aquí:</span><span class="sxs-lookup"><span data-stu-id="8da91-1022">In order to set the automount, please check the documentation of the command-line executable diskpart.exe here:</span></span>
>
> * [<span data-ttu-id="8da91-1023">Opciones de línea de comandos de DiskPart</span><span class="sxs-lookup"><span data-stu-id="8da91-1023">DiskPart Command-Line Options</span></span>](https://technet.microsoft.com/library/bb490893.aspx)
> * [<span data-ttu-id="8da91-1024">Automount (Montaje automático)</span><span class="sxs-lookup"><span data-stu-id="8da91-1024">Automount</span></span>](http://technet.microsoft.com/library/cc753703.aspx)
>
> <span data-ttu-id="8da91-1025">Se debe abrir la ventana de línea de comandos de Windows como administrador.</span><span class="sxs-lookup"><span data-stu-id="8da91-1025">The Windows command-line window should be opened as administrator.</span></span>
>
> <span data-ttu-id="8da91-1026">Si los discos están conectados, debe iniciar sesión en la máquina virtual para abrir el administrador de discos de Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-1026">If disks are attached, you need to log in to the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="8da91-1027">Si el montaje automático no está habilitado como se recomienda en el capítulo [Configuración de montaje automático para discos conectados][planning-guide-5.5.3], el volumen recién conectado debe activarse e inicializarse.</span><span class="sxs-lookup"><span data-stu-id="8da91-1027">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3],  the newly attached volume >needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-1029">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1029">Linux</span></span>
>
> <span data-ttu-id="8da91-1030">Debe inicializar un disco vacío recién conectado, como se describe en [este artículo][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span><span class="sxs-lookup"><span data-stu-id="8da91-1030">You need to initialize a newly attached empty disk as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span></span>
> <span data-ttu-id="8da91-1031">También debe agregar discos nuevos a /etc/fstab.</span><span class="sxs-lookup"><span data-stu-id="8da91-1031">You also need to add new disks to the /etc/fstab.</span></span>
>
>

- - -
### <a name="final-deployment"></a><span data-ttu-id="8da91-1032">Implementación final</span><span class="sxs-lookup"><span data-stu-id="8da91-1032">Final Deployment</span></span>
<span data-ttu-id="8da91-1033">Para más información sobre la implementación final y los pasos exactos, especialmente en relación con la implementación de la supervisión extendida de SAP, consulte la [Guía de implementación][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1033">For the final deployment and exact steps, especially with regards to the deployment of SAP Extended Monitoring, please refer to the [Deployment Guide][deployment-guide].</span></span>

## <a name="accessing-sap-systems-running-within-azure-vms"></a><span data-ttu-id="8da91-1034">Acceso a sistemas SAP que se ejecutan en máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1034">Accessing SAP systems running within Azure VMs</span></span>
<span data-ttu-id="8da91-1035">Para escenarios exclusivos en la nube, se recomienda establecer la conexión a esos sistemas SAP a través de la red pública de Internet mediante la GUI de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1035">For Cloud-Only scenarios, you might want to connect to those SAP systems across the public internet using SAP GUI.</span></span> <span data-ttu-id="8da91-1036">En estos casos, deben aplicarse los siguientes procedimientos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1036">For these cases, the following procedures need to be applied.</span></span>

<span data-ttu-id="8da91-1037">Más adelante en el documento, se verá el otro escenario principal, la conexión a sistemas SAP en implementaciones entre locales que tienen una conexión de sitio a sitio (túnel VPN) o conexión de Azure ExpressRoute entre los sistemas locales y los de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1037">Later in the document we will discuss the other major scenario, connecting to SAP systems in cross-premises deployments which have a site-to-site connection (VPN tunnel) or Azure ExpressRoute connection between the on-premises systems and Azure systems.</span></span>

### <a name="remote-access-to-sap-systems"></a><span data-ttu-id="8da91-1038">Acceso remoto a sistemas SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1038">Remote Access to SAP systems</span></span>
<span data-ttu-id="8da91-1039">Con Azure Resource Manager, ya no hay ningún punto de conexión predeterminado, como sucedía en el modelo clásico anterior.</span><span class="sxs-lookup"><span data-stu-id="8da91-1039">With Azure Resource Manager there are no default endpoints anymore like in the former classic model.</span></span> <span data-ttu-id="8da91-1040">Todos los puertos de una máquina virtual de Azure Resource Manager están abiertos siempre que se cumplan estos requisitos:</span><span class="sxs-lookup"><span data-stu-id="8da91-1040">All ports of an Azure ARM VM are open as long as:</span></span>

1. <span data-ttu-id="8da91-1041">No haya ningún grupo de seguridad de red definido para la subred o la interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1041">No Network Security Group is defined for the subnet or the network interface.</span></span> <span data-ttu-id="8da91-1042">El tráfico de red a las máquinas virtuales de Azure puede protegerse mediante los denominados "grupos de seguridad de red".</span><span class="sxs-lookup"><span data-stu-id="8da91-1042">Network traffic to Azure VMs can be secured via so-called "Network Security Groups".</span></span> <span data-ttu-id="8da91-1043">Para más información, consulte [¿Qué es un grupo de seguridad de red?][virtual-networks-nsg]</span><span class="sxs-lookup"><span data-stu-id="8da91-1043">For more information see [What is a Network Security Group (NSG)?][virtual-networks-nsg]</span></span>
2. <span data-ttu-id="8da91-1044">No se haya definido ningún Azure Load Balancer para la interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1044">No Azure Load Balancer is defined for the network interface</span></span>   

<span data-ttu-id="8da91-1045">Consulte la diferencia de arquitectura entre el modelo clásico y el de Azure Resource Manager, que se describe en [este artículo][virtual-machines-azure-resource-manager-architecture].</span><span class="sxs-lookup"><span data-stu-id="8da91-1045">See the architecture difference between classic model and ARM as described in [this article][virtual-machines-azure-resource-manager-architecture].</span></span>

#### <a name="configuration-of-the-sap-system-and-sap-gui-connectivity-for-cloud-only-scenario"></a><span data-ttu-id="8da91-1046">Configuración de la conectividad del sistema SAP y la GUI de SAP para el escenario exclusivo en la nube</span><span class="sxs-lookup"><span data-stu-id="8da91-1046">Configuration of the SAP System and SAP GUI connectivity for Cloud-Only scenario</span></span>
<span data-ttu-id="8da91-1047">Consulte este artículo que describe los detalles de este tema: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1047">Please see this article which describes details to this topic: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span></span>

#### <a name="changing-firewall-settings-within-vm"></a><span data-ttu-id="8da91-1048">Cambio de la configuración del firewall en la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="8da91-1048">Changing Firewall Settings within VM</span></span>
<span data-ttu-id="8da91-1049">Puede que haga falta configurar el firewall en las máquinas virtuales para permitir el tráfico entrante al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1049">It might be necessary to configure the firewall on your virtual machines to allow inbound traffic to your SAP system.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1051">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1051">Windows</span></span>
>
> <span data-ttu-id="8da91-1052">De forma predeterminada, el Firewall de Windows está activado en una máquina virtual implementada de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1052">By default, the Windows Firewall within an Azure deployed VM is turned on.</span></span> <span data-ttu-id="8da91-1053">Ahora debe permitir la apertura del puerto de SAP; de lo contrario, la GUI de SAP no podrá conectarse.</span><span class="sxs-lookup"><span data-stu-id="8da91-1053">You now need to allow the SAP Port to be opened, otherwise the SAP GUI will not be able to connect.</span></span>
> <span data-ttu-id="8da91-1054">Para ello, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8da91-1054">To do this:</span></span>
>
> * <span data-ttu-id="8da91-1055">Abra Panel de control\Sistema y seguridad\Firewall de Windows y vaya a "Configuración avanzada".</span><span class="sxs-lookup"><span data-stu-id="8da91-1055">Open Control Panel\System and Security\Windows Firewall to ‘Advanced Settings’.</span></span>
> * <span data-ttu-id="8da91-1056">Ahora haga clic con el botón derecho en Reglas de entrada y seleccione "Nueva regla".</span><span class="sxs-lookup"><span data-stu-id="8da91-1056">Now right-click on Inbound Rules and chose ‘New Rule’.</span></span>
> * <span data-ttu-id="8da91-1057">En el asistente que aparece a continuación, elija crear una nueva regla de "Puerto".</span><span class="sxs-lookup"><span data-stu-id="8da91-1057">In the following Wizard chose to create a new ‘Port’ rule.</span></span>
> * <span data-ttu-id="8da91-1058">En el paso siguiente del asistente, deje marcada la opción TCP y escriba el número del puerto que desea abrir.</span><span class="sxs-lookup"><span data-stu-id="8da91-1058">In the next step of the wizard, leave the setting at TCP and type in the port number you want to open.</span></span> <span data-ttu-id="8da91-1059">Puesto que el identificador de instancia de SAP es 00, utilizamos 3200.</span><span class="sxs-lookup"><span data-stu-id="8da91-1059">Since our SAP instance ID is 00, we took 3200.</span></span> <span data-ttu-id="8da91-1060">Si la instancia tiene un número de instancia distinto, deberá abrir el puerto que definió anteriormente según el número de instancia.</span><span class="sxs-lookup"><span data-stu-id="8da91-1060">If your instance has a different instance number, the port you defined earlier based on the instance number should be opened.</span></span>
> * <span data-ttu-id="8da91-1061">En la siguiente ventana del asistente, tendrá que dejar marcado el elemento "Permitir la conexión".</span><span class="sxs-lookup"><span data-stu-id="8da91-1061">In the next part of the wizard, you need to leave the item ‘Allow Connection’ checked.</span></span>
> * <span data-ttu-id="8da91-1062">En el siguiente paso, tendrá que definir si la regla se aplica a redes de tipo Dominio, Privado o Público.</span><span class="sxs-lookup"><span data-stu-id="8da91-1062">In the next step of the wizard you need to define whether the rule applies for Domain, Private and Public network.</span></span> <span data-ttu-id="8da91-1063">Ajuste las opciones necesarias para satisfacer sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="8da91-1063">Please adjust it if necessary to your needs.</span></span> <span data-ttu-id="8da91-1064">Sin embargo, si va a conectarse a la GUI de SAP desde el exterior a través de la red pública, tendrá que tener la regla aplicada a dicho tipo de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1064">However, connecting with SAP GUI from the outside through the public network, you need to have the rule applied to the public network.</span></span>
> * <span data-ttu-id="8da91-1065">En el último paso del asistente, asigne el nombre a la regla y presione "Finalizar" para guardarlo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1065">In the last step of the wizard, name the rule and save by pressing ‘Finish’</span></span>
>
> <span data-ttu-id="8da91-1066">La regla se empieza a aplicar de inmediato.</span><span class="sxs-lookup"><span data-stu-id="8da91-1066">The rule becomes effective immediately.</span></span>
>
> ![Definición de la regla de puertos][planning-guide-figure-1600]
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-1069">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1069">Linux</span></span>
>
> <span data-ttu-id="8da91-1070">Las imágenes de Linux de Azure Marketplace no habilitan el firewall iptables de forma predeterminada, por lo que la conexión a su sistema SAP debe funcionar.</span><span class="sxs-lookup"><span data-stu-id="8da91-1070">The Linux images in the Azure Marketplace do not enable the iptables firewall by default and the connection to your SAP system should work.</span></span> <span data-ttu-id="8da91-1071">Si habilitó iptables u otro firewall, consulte la documentación de iptables o del firewall utilizado para permitir el tráfico TCP entrante al puerto 32xx (donde xx es el número de su sistema SAP).</span><span class="sxs-lookup"><span data-stu-id="8da91-1071">If you enabled iptables or another firewall, please refer to the documentation of iptables or the used firewall to allow inbound tcp traffic to  port 32xx (where xx is the system number of your SAP system).</span></span>
>
>

- - -
#### <a name="security-recommendations"></a><span data-ttu-id="8da91-1072">Recomendaciones de seguridad</span><span class="sxs-lookup"><span data-stu-id="8da91-1072">Security recommendations</span></span>
<span data-ttu-id="8da91-1073">La GUI de SAP no se conecta inmediatamente a cualquiera de las instancias de SAP (puerto 32xx) que se están ejecutando, sino que primero se conecta mediante el puerto abierto para el proceso de servidor de mensajes de SAP (puerto 36xx).</span><span class="sxs-lookup"><span data-stu-id="8da91-1073">The SAP GUI does not connect immediately to any of the SAP instances (port 32xx) which are running, but first connects via the port opened to the SAP message server process (port 36xx).</span></span> <span data-ttu-id="8da91-1074">Anteriormente, el servidor de mensajes usaba el mismo puerto para la comunicación interna con las instancias de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1074">In the past the very same port was used by the message server for the internal communication to the application instances.</span></span> <span data-ttu-id="8da91-1075">Para evitar que los servidores de aplicaciones locales se comuniquen por accidente con un servidor de mensajes en Azure, es posible cambiar los puertos de comunicación internos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1075">To prevent on-premises application servers from inadvertently communicating with a message server in Azure the internal communication ports can be changed.</span></span> <span data-ttu-id="8da91-1076">Se recomienda encarecidamente cambiar la comunicación interna entre el servidor de mensajes de SAP y sus instancias de aplicación a un número de puerto diferente en los sistemas que se hayan clonado a partir de sistemas locales, como un clon de desarrollo para pruebas de proyectos, entre otros casos. Esto puede hacerse con el parámetro de perfil predeterminado:</span><span class="sxs-lookup"><span data-stu-id="8da91-1076">It is highly recommended to change the internal communication between the SAP message server and its application instances to a different port number on systems that have been cloned from on-premises systems, such as a clone of development for project testing etc. This can be done with the default profile parameter:</span></span>

> <span data-ttu-id="8da91-1077">rdisp/msserv_internal</span><span class="sxs-lookup"><span data-stu-id="8da91-1077">rdisp/msserv_internal</span></span>
>
>

<span data-ttu-id="8da91-1078">Como se documenta en [Security Settings for the SAP Message Server ](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm) (Configuración de seguridad del servidor de mensajes de SAP)</span><span class="sxs-lookup"><span data-stu-id="8da91-1078">as documented in [Security Settings for the SAP Message Server ](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)</span></span>

## <span data-ttu-id="8da91-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Conceptos de implementación solo en la nube de instancias de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Concepts of Cloud-Only deployment of SAP instances</span></span>
### <span data-ttu-id="8da91-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Escenario de demostración/aprendizaje de máquina virtual única con SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="8da91-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Single VM with SAP NetWeaver demo/training scenario</span></span>
![Ejecución de sistemas de demostración de SAP de una sola máquina virtual con los mismos nombres de VM, de forma aislada en Azure Cloud Services][planning-guide-figure-1700]

<span data-ttu-id="8da91-1082">En este caso (consulte el capítulo [Solo en la nube][planning-guide-2.1] de este documento), se va a implementar un escenario habitual de sistema de demostración o aprendizaje en el que dicho escenario se encuentra por completo en una sola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1082">In this scenario (see chapter [Cloud-Only][planning-guide-2.1] of this document) we are implementing a typical training/demo system scenario where the complete training/demo scenario is contained in a single VM.</span></span> <span data-ttu-id="8da91-1083">Se supone que la implementación se realiza mediante plantillas de imagen de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1083">We assume that the deployment is done through VM image templates.</span></span> <span data-ttu-id="8da91-1084">También se supone que se deben implementar varias de estas máquinas virtuales de demostración o aprendizaje, y que estas tendrán el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="8da91-1084">We also assume that multiple of these demo/trainings VMs need to be deployed with the VMs having the same name.</span></span>

<span data-ttu-id="8da91-1085">La suposición es que ha creado una imagen de máquina virtual como se describe en algunas secciones del capítulo [Preparación de máquinas virtuales con SAP para Azure][planning-guide-5.2] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1085">The assumption is that you created a VM Image as described in some sections of chapter [Preparing VMs with SAP for Azure][planning-guide-5.2] in this document.</span></span>

<span data-ttu-id="8da91-1086">La secuencia de eventos para implementar el escenario es similar a esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-1086">The sequence of events to implement the scenario looks like this:</span></span>

##### <a name="powershell"></a><span data-ttu-id="8da91-1087">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8da91-1087">Powershell</span></span>
* <span data-ttu-id="8da91-1088">Cree un grupo de recursos para cada entorno de aprendizaje o demostración.</span><span class="sxs-lookup"><span data-stu-id="8da91-1088">Create a new resource group for every training/demo landscape</span></span>

```powershell
$rgName = "SAPERPDemo1"
New-AzureRmResourceGroup -Name $rgName -Location "North Europe"
```
* <span data-ttu-id="8da91-1089">Cree una cuenta de almacenamiento si no desea usar discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1089">Create a new storage account if you don't want to use Managed Disks</span></span>

```powershell
$suffix = Get-Random -Minimum 100000 -Maximum 999999
$account = New-AzureRmStorageAccount -ResourceGroupName $rgName -Name "saperpdemo$suffix" -SkuName Standard_LRS -Kind "Storage" -Location "North Europe"
```

* <span data-ttu-id="8da91-1090">Cree una nueva red virtual para cada entorno de aprendizaje o demostración a fin de habilitar el uso del mismo nombre de host y las mismas direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1090">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="8da91-1091">La red virtual está protegida por un grupo de seguridad de red que solo permite el tráfico dirigido al puerto 3389 para habilitar el acceso de escritorio remoto y al puerto 22 para SSH.</span><span class="sxs-lookup"><span data-stu-id="8da91-1091">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```powershell
# Create a new Virtual Network
$rdpRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGRDP -Protocol * -SourcePortRange * -DestinationPortRange 3389 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 100
$sshRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGSSH -Protocol * -SourcePortRange * -DestinationPortRange 22 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 101
$nsg = New-AzureRmNetworkSecurityGroup -Name SAPERPDemoNSG -ResourceGroupName $rgName -Location  "North Europe" -SecurityRules $rdpRule,$sshRule

$subnetConfig = New-AzureRmVirtualNetworkSubnetConfig -Name Subnet1 -AddressPrefix  10.0.1.0/24 -NetworkSecurityGroup $nsg
$vnet = New-AzureRmVirtualNetwork -Name SAPERPDemoVNet -ResourceGroupName $rgName -Location "North Europe"  -AddressPrefix 10.0.1.0/24 -Subnet $subnetConfig
```

* <span data-ttu-id="8da91-1092">Cree una nueva dirección IP pública que se pueda usar para acceder a la máquina virtual desde Internet.</span><span class="sxs-lookup"><span data-stu-id="8da91-1092">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```powershell
# Create a public IP address with a DNS name
$pip = New-AzureRmPublicIpAddress -Name SAPERPDemoPIP -ResourceGroupName $rgName -Location "North Europe" -DomainNameLabel $rgName.ToLower() -AllocationMethod Dynamic
```

* <span data-ttu-id="8da91-1093">Cree una nueva interfaz de red para la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1093">Create a new network interface for the virtual machine</span></span>

```powershell
# Create a new Network Interface
$nic = New-AzureRmNetworkInterface -Name SAPERPDemoNIC -ResourceGroupName $rgName -Location "North Europe" -Subnet $vnet.Subnets[0] -PublicIpAddress $pip
```

* <span data-ttu-id="8da91-1094">Cree una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1094">Create a virtual machine.</span></span> <span data-ttu-id="8da91-1095">Para el escenario exclusivo en la nube, todas las máquinas virtuales presentarán el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="8da91-1095">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="8da91-1096">El SID de SAP de las instancias de SAP NetWeaver de esas máquinas virtuales será el mismo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1096">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="8da91-1097">Dentro de un grupo de recursos de Azure, el nombre de la máquina virtual debe ser único, pero puede ejecutar máquinas virtuales con el mismo nombre en diferentes grupos de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1097">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="8da91-1098">La cuenta "Administrador" predeterminada de Windows o "root" de Linux no son válidas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1098">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="8da91-1099">Por lo tanto, se debe definir un nuevo nombre de usuario administrador, junto con una contraseña.</span><span class="sxs-lookup"><span data-stu-id="8da91-1099">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="8da91-1100">También debe definirse el tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1100">The size of the VM also needs to be defined.</span></span>

```powershell
#####
# Create a new virtual machine with an official image from the Azure Marketplace
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

# select image
$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "MicrosoftWindowsServer" -Offer "WindowsServer" -Skus "2012-R2-Datacenter" -Version "latest"
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred -ProvisionVMAgent -EnableAutoUpdate
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "SUSE" -Offer "SLES-SAP" -Skus "12-SP1" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "RedHat" -Offer "RHEL" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "Oracle" -Offer "Oracle-Linux" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="osfromimage"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"

$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Windows
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Linux
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a Managed Disk Image
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -Id <Id of Managed Disk Image>
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

* <span data-ttu-id="8da91-1101">Opcionalmente, agregue discos adicionales y restaure el contenido necesario.</span><span class="sxs-lookup"><span data-stu-id="8da91-1101">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="8da91-1102">Tenga en cuenta que todos los nombres de blob (direcciones URL para acceder a los blobs) deben ser únicos dentro de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1102">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```powershell
# Optional: Attach additional VHD data disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
$dataDiskUri = $account.PrimaryEndpoints.Blob.ToString() + "vhds/datadisk.vhd"
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -VhdUri $dataDiskUri -DiskSizeInGB 1023 -CreateOption empty | Update-AzureRmVM

# Optional: Attach additional Managed Disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -DiskSizeInGB 1023 -CreateOption empty -Lun 0 | Update-AzureRmVM
```

##### <a name="cli"></a><span data-ttu-id="8da91-1103">CLI</span><span class="sxs-lookup"><span data-stu-id="8da91-1103">CLI</span></span>
<span data-ttu-id="8da91-1104">El siguiente código de ejemplo puede utilizarse en Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-1104">The following example code can be used on Linux.</span></span> <span data-ttu-id="8da91-1105">En el caso de Windows, use PowerShell como se describe arriba o adapte el ejemplo para usar %rgName% en lugar de $rgName y establezca la variable de entorno con el comando de Windows *set*.</span><span class="sxs-lookup"><span data-stu-id="8da91-1105">For Windows, please either use PowerShell as described above or adapt the example to use %rgName% instead of $rgName and set the environment variable using the Windows command *set*.</span></span>

* <span data-ttu-id="8da91-1106">Cree un grupo de recursos para cada entorno de aprendizaje o demostración.</span><span class="sxs-lookup"><span data-stu-id="8da91-1106">Create a new resource group for every training/demo landscape</span></span>

```
rgName=SAPERPDemo1
rgNameLower=saperpdemo1
az group create --name $rgName --location "North Europe"
```

* <span data-ttu-id="8da91-1107">Creación de una cuenta de almacenamiento nueva</span><span class="sxs-lookup"><span data-stu-id="8da91-1107">Create a new storage account</span></span>

```
az storage account create --resource-group $rgName --location "North Europe" --kind Storage --sku Standard_LRS --name $rgNameLower
```

* <span data-ttu-id="8da91-1108">Cree una nueva red virtual para cada entorno de aprendizaje o demostración a fin de habilitar el uso del mismo nombre de host y las mismas direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1108">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="8da91-1109">La red virtual está protegida por un grupo de seguridad de red que solo permite el tráfico dirigido al puerto 3389 para habilitar el acceso de escritorio remoto y al puerto 22 para SSH.</span><span class="sxs-lookup"><span data-stu-id="8da91-1109">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```
az network nsg create --resource-group $rgName --location "North Europe" --name SAPERPDemoNSG
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGRDP --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 3389 --access Allow --priority 100 --direction Inbound
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGSSH --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 22 --access Allow --priority 101 --direction Inbound

az network vnet create --resource-group $rgName --name SAPERPDemoVNet --location "North Europe" --address-prefixes 10.0.1.0/24
az network vnet subnet create --resource-group $rgName --vnet-name SAPERPDemoVNet --name Subnet1 --address-prefix 10.0.1.0/24 --network-security-group SAPERPDemoNSG
```

* <span data-ttu-id="8da91-1110">Cree una nueva dirección IP pública que se pueda usar para acceder a la máquina virtual desde Internet.</span><span class="sxs-lookup"><span data-stu-id="8da91-1110">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```
az network public-ip create --resource-group $rgName --name SAPERPDemoPIP --location "North Europe" --dns-name $rgNameLower --allocation-method Dynamic
```

* <span data-ttu-id="8da91-1111">Cree una nueva interfaz de red para la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1111">Create a new network interface for the virtual machine</span></span>

```
az network nic create --resource-group $rgName --location "North Europe" --name SAPERPDemoNIC --public-ip-address SAPERPDemoPIP --subnet Subnet1 --vnet-name SAPERPDemoVNet
```

* <span data-ttu-id="8da91-1112">Cree una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1112">Create a virtual machine.</span></span> <span data-ttu-id="8da91-1113">Para el escenario exclusivo en la nube, todas las máquinas virtuales presentarán el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="8da91-1113">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="8da91-1114">El SID de SAP de las instancias de SAP NetWeaver de esas máquinas virtuales será el mismo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1114">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="8da91-1115">Dentro de un grupo de recursos de Azure, el nombre de la máquina virtual debe ser único, pero puede ejecutar máquinas virtuales con el mismo nombre en diferentes grupos de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1115">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="8da91-1116">La cuenta "Administrador" predeterminada de Windows o "root" de Linux no son válidas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1116">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="8da91-1117">Por lo tanto, se debe definir un nuevo nombre de usuario administrador, junto con una contraseña.</span><span class="sxs-lookup"><span data-stu-id="8da91-1117">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="8da91-1118">También debe definirse el tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1118">The size of the VM also needs to be defined.</span></span>

```
#####
# Create virtual machines using storage accounts
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password

#####
# Create virtual machines using Managed Disks
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
```

```
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Windows --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Linux --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd> --authentication-type password

#####
# Create a new virtual machine with a Managed Disk Image
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id> --authentication-type password
```

* <span data-ttu-id="8da91-1119">Opcionalmente, agregue discos adicionales y restaure el contenido necesario.</span><span class="sxs-lookup"><span data-stu-id="8da91-1119">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="8da91-1120">Tenga en cuenta que todos los nombres de blob (direcciones URL para acceder a los blobs) deben ser únicos dentro de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1120">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```
# Optional: Attach additional VHD data disks
az vm unmanaged-disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --vhd-uri https://$rgNameLower.blob.core.windows.net/vhds/data.vhd  --new

# Optional: Attach additional Managed Disks
az vm disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --disk datadisk --new
```

##### <a name="template"></a><span data-ttu-id="8da91-1121">Plantilla</span><span class="sxs-lookup"><span data-stu-id="8da91-1121">Template</span></span>
<span data-ttu-id="8da91-1122">Puede utilizar las plantillas de ejemplo del repositorio de plantillas de inicio rápido de Azure en GitHub.</span><span class="sxs-lookup"><span data-stu-id="8da91-1122">You can use the sample templates on the azure-quickstart-templates repository on github.</span></span>

* [<span data-ttu-id="8da91-1123">Máquina virtual de Linux simple</span><span class="sxs-lookup"><span data-stu-id="8da91-1123">Simple Linux VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-linux)
* [<span data-ttu-id="8da91-1124">Máquina virtual de Windows simple</span><span class="sxs-lookup"><span data-stu-id="8da91-1124">Simple Windows VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows)
* [<span data-ttu-id="8da91-1125">Máquina virtual a partir de imagen</span><span class="sxs-lookup"><span data-stu-id="8da91-1125">VM from image</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image)

### <a name="implement-a-set-of-vms-which-need-to-communicate-within-azure"></a><span data-ttu-id="8da91-1126">Implementación de un conjunto de máquinas virtuales que necesitan comunicarse en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1126">Implement a set of VMs which need to communicate within Azure</span></span>
<span data-ttu-id="8da91-1127">Este escenario exclusivo en la nube es uno habitual para fines de aprendizaje y demostración, en el que el software que representa el escenario de aprendizaje o demostración se divide entre varias máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1127">This Cloud-Only scenario is a typical scenario for training and demo purposes where the software representing the demo/training scenario is spread over multiple VMs.</span></span> <span data-ttu-id="8da91-1128">Los diferentes componentes instalados en las distintas máquinas virtuales deben comunicarse entre sí.</span><span class="sxs-lookup"><span data-stu-id="8da91-1128">The different components installed in the different VMs need to communicate with each other.</span></span> <span data-ttu-id="8da91-1129">Una vez más, en este escenario no se requiere ninguna comunicación de red local ni ningún escenario entre locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1129">Again, in this scenario no on-premises network communication or cross-premises scenario is needed.</span></span>

<span data-ttu-id="8da91-1130">Este escenario es una extensión de la instalación descrita en el capítulo [Escenario de demostración/aprendizaje de máquina virtual única con SAP NetWeaver][planning-guide-7.1] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1130">This scenario is an extension of the installation described in chapter [Single VM with SAP NetWeaver demo/training scenario][planning-guide-7.1] of this document.</span></span> <span data-ttu-id="8da91-1131">En este caso, se agregarán más máquinas virtuales a un grupo de recursos existente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1131">In this case more virtual machines will be added to an existing resource group.</span></span> <span data-ttu-id="8da91-1132">En el ejemplo siguiente el entorno de aprendizaje consta de una máquina virtual de SAP ASCS/SCS, una VM que ejecuta un DBMS y otra de instancia del servidor de aplicaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1132">In the following example the training landscape consists of an SAP ASCS/SCS VM, a VM running a DBMS and an SAP Application Server instance VM.</span></span>

<span data-ttu-id="8da91-1133">Antes de poner en práctica este escenario, tendrá que considerar la configuración básica, como ya se hizo en el escenario anterior.</span><span class="sxs-lookup"><span data-stu-id="8da91-1133">Before you build this scenario you need to think about basic settings as already exercised in the scenario before.</span></span>

#### <a name="resource-group-and-virtual-machine-naming"></a><span data-ttu-id="8da91-1134">Nomenclatura de los grupos de recursos y las máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="8da91-1134">Resource Group and Virtual Machine naming</span></span>
<span data-ttu-id="8da91-1135">Todos los nombres de los grupos de recursos deben ser únicos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1135">All resource group names must be unique.</span></span> <span data-ttu-id="8da91-1136">Desarrolle su propio esquema de nomenclatura de los recursos como, por ejemplo, `<rg-name`>-sufijo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1136">Develop your own naming scheme of your resources, such as `<rg-name`>-suffix.</span></span>

<span data-ttu-id="8da91-1137">El nombre de la máquina virtual tiene que ser único dentro del grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1137">The virtual machine name has to be unique within the resource group.</span></span>

#### <a name="set-up-network-for-communication-between-the-different-vms"></a><span data-ttu-id="8da91-1138">Configuración de la red para la comunicación entre las distintas máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="8da91-1138">Set up Network for communication between the different VMs</span></span>
![Conjunto de máquinas virtuales dentro de una red virtual de Azure][planning-guide-figure-1900]

<span data-ttu-id="8da91-1140">Para evitar colisiones de nomenclatura con clones de los mismos entornos de aprendizaje o demostración, deberá crear una red virtual de Azure para cada entorno.</span><span class="sxs-lookup"><span data-stu-id="8da91-1140">To prevent naming collisions with clones of the same training/demo landscapes, you need to create an Azure Virtual Network for every landscape.</span></span> <span data-ttu-id="8da91-1141">La resolución de nombres DNS correrá a cargo de Azure o podrá configurar su propio servidor DNS fuera de Azure (sobre lo cual no se proporcionarán más detalles en el presente artículo).</span><span class="sxs-lookup"><span data-stu-id="8da91-1141">DNS name resolution will be provided by Azure or you can configure your own DNS server outside Azure (not to be further discussed here).</span></span> <span data-ttu-id="8da91-1142">En este escenario, no se debe configurar un DNS propio.</span><span class="sxs-lookup"><span data-stu-id="8da91-1142">In this scenario we do not configure our own DNS.</span></span> <span data-ttu-id="8da91-1143">La comunicación a través de los nombres de host se habilitará para todas las máquinas virtuales dentro de Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="8da91-1143">For all virtual machines inside one Azure Virtual Network, communication via hostnames will be enabled.</span></span>

<span data-ttu-id="8da91-1144">Los motivos para separar los entornos de aprendizaje o demostración por redes virtuales en lugar de por grupos de recursos pueden ser los siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-1144">The reasons to separate training or demo landscapes by virtual networks and not only resource groups could be:</span></span>

* <span data-ttu-id="8da91-1145">Tal y como está configurado, el entorno de SAP necesita su propio AD/OpenLDAP y un servidor de dominio debe formar parte de cada uno de los entornos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1145">The SAP landscape as set up needs its own AD/OpenLDAP and a Domain Server needs to be part of each of the landscapes.</span></span>  
* <span data-ttu-id="8da91-1146">Tal y como está configurado, el entorno de SAP tiene componentes que deben funcionar con direcciones IP fijas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1146">The SAP landscape as set up has components that need to work with fixed IP addresses.</span></span>

<span data-ttu-id="8da91-1147">Se puede encontrar información más detallada sobre las redes virtuales de Azure y cómo definirlas en [este artículo][virtual-networks-create-vnet-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="8da91-1147">More details about Azure Virtual Networks and how to define them can be found in [this article][virtual-networks-create-vnet-arm-pportal].</span></span>

## <a name="deploying-sap-vms-with-corporate-network-connectivity-cross-premises"></a><span data-ttu-id="8da91-1148">Implementación de máquinas virtuales de SAP con conectividad de red corporativa (entre locales)</span><span class="sxs-lookup"><span data-stu-id="8da91-1148">Deploying SAP VMs with Corporate Network Connectivity (Cross-Premises)</span></span>
<span data-ttu-id="8da91-1149">Ejecuta un entorno de SAP y desea dividir la implementación entre equipos sin sistema operativo para servidores de DBMS de gama alta, entornos locales virtualizados para capas de aplicaciones, así como sistemas SAP e IaaS de Azure de menor tamaño configurados en dos niveles.</span><span class="sxs-lookup"><span data-stu-id="8da91-1149">You run an SAP landscape and want to divide the deployment between bare-metal for high-end DBMS servers, on-premises virtualized environments for application layers and smaller 2-Tier configured SAP systems and Azure IaaS.</span></span> <span data-ttu-id="8da91-1150">El supuesto básico es que los sistemas SAP dentro de un entorno de SAP deben comunicarse entre sí y con muchos otros componentes de software implementados en la empresa, independientemente del modo de implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1150">The base assumption is that SAP systems within one SAP landscape need to communicate with each other and with many other software components deployed in the company, independent of their deployment form.</span></span> <span data-ttu-id="8da91-1151">El modo de implementación tampoco debería introducir ninguna diferencia para el usuario final que se conecta con la GUI de SAP u otras interfaces.</span><span class="sxs-lookup"><span data-stu-id="8da91-1151">There also should be no differences introduced by the deployment form for the end user connecting with SAP GUI or other interfaces.</span></span> <span data-ttu-id="8da91-1152">Estas condiciones solo pueden cumplirse cuando se dispone de servicios de Active Directory/OpenLDAP locales y servicios DNS extendidos a los sistemas de Azure por medio de una conectividad de sitio a sitio o de varios sitios, o mediante conexiones privadas como Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8da91-1152">These conditions can only be met when we have the on-premises Active Directory/OpenLDAP and DNS services extended to the Azure systems through site-to-site/multi-site connectivity or private connections like Azure ExpressRoute.</span></span>

<span data-ttu-id="8da91-1153">Para más información sobre los detalles de implementación de SAP en Azure, se recomienda leer el capítulo [Conceptos de implementación solo en la nube de instancias de SAP][planning-guide-7] de este documento, donde se explican algunas de las construcciones básicas de Azure y cómo deben utilizarse con aplicaciones de SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1153">In order to get more background on the implementation details of SAP on Azure, we encourage you to read chapter [Concepts of Cloud-Only deployment of SAP instances][planning-guide-7] of this document which explains some of the basics constructs of Azure and how these should be used with SAP applications in Azure.</span></span>

### <a name="scenario-of-an-sap-landscape"></a><span data-ttu-id="8da91-1154">Escenario de un entorno de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1154">Scenario of an SAP landscape</span></span>
<span data-ttu-id="8da91-1155">El escenario entre locales se puede describir aproximadamente como se indica en los gráficos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-1155">The cross-premises scenario can be roughly described like in the graphics below:</span></span>

![Conectividad de sitio a sitio entre activos locales y de Azure][planning-guide-figure-2100]

<span data-ttu-id="8da91-1157">El escenario mostrado anteriormente describe un escenario donde los AD/OpenLDAP y DNS locales se extienden a Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1157">The scenario shown above describes a scenario where the on-premises AD/OpenLDAP and DNS are extended to Azure.</span></span> <span data-ttu-id="8da91-1158">En el lado local, hay un intervalo de direcciones IP determinado reservado por la suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1158">On the on-premises side, a certain IP address range is reserved per Azure subscription.</span></span> <span data-ttu-id="8da91-1159">El intervalo de direcciones IP se asignará a una red virtual de Azure en el lado de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1159">The IP address range will be assigned to an Azure Virtual Network on the Azure side.</span></span>

#### <a name="security-considerations"></a><span data-ttu-id="8da91-1160">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="8da91-1160">Security considerations</span></span>
<span data-ttu-id="8da91-1161">El requisito mínimo es el uso de protocolos de comunicaciones seguras como SSL/TLS para el acceso del navegador o conexiones basadas en VPN para el acceso del sistema a los servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1161">The minimum requirement is the use of secure communication protocols such as SSL/TLS for browser access or VPN-based connections for system access to the Azure services.</span></span> <span data-ttu-id="8da91-1162">Se presupone que las empresas controlan la conexión VPN entre su red corporativa y Azure de forma muy distinta.</span><span class="sxs-lookup"><span data-stu-id="8da91-1162">The assumption is that companies handle the VPN connection between their corporate network and Azure very differently.</span></span> <span data-ttu-id="8da91-1163">Puede que algunas empresas se limiten a abrir todos los puertos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1163">Some companies might blankly open all the ports.</span></span> <span data-ttu-id="8da91-1164">Es posible que otras deseen ser muy precisas, por ejemplo, en cuanto a los puertos que hay que abrir.</span><span class="sxs-lookup"><span data-stu-id="8da91-1164">Some other companies might want to be very precise in which ports they need to open, etc.</span></span>

<span data-ttu-id="8da91-1165">En la tabla siguiente, se enumeran los puertos de comunicación de SAP típicos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1165">In the table below typical SAP communication ports are listed.</span></span> <span data-ttu-id="8da91-1166">Básicamente, basta con abrir el puerto de la puerta de enlace de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1166">Basically it is sufficient to open the SAP gateway port.</span></span>

| <span data-ttu-id="8da91-1167">Servicio</span><span class="sxs-lookup"><span data-stu-id="8da91-1167">Service</span></span> | <span data-ttu-id="8da91-1168">Nombre del puerto</span><span class="sxs-lookup"><span data-stu-id="8da91-1168">Port Name</span></span> | <span data-ttu-id="8da91-1169">Ejemplo `<nn`> = 01</span><span class="sxs-lookup"><span data-stu-id="8da91-1169">Example `<nn`> = 01</span></span> | <span data-ttu-id="8da91-1170">Intervalo predeterminado (mín.-máx.)</span><span class="sxs-lookup"><span data-stu-id="8da91-1170">Default Range (min-max)</span></span> | <span data-ttu-id="8da91-1171">Comentario</span><span class="sxs-lookup"><span data-stu-id="8da91-1171">Comment</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="8da91-1172">Distribuidor</span><span class="sxs-lookup"><span data-stu-id="8da91-1172">Dispatcher</span></span> |<span data-ttu-id="8da91-1173">sapdp`<nn>` consulte *</span><span class="sxs-lookup"><span data-stu-id="8da91-1173">sapdp`<nn>` see *</span></span> |<span data-ttu-id="8da91-1174">3201</span><span class="sxs-lookup"><span data-stu-id="8da91-1174">3201</span></span> |<span data-ttu-id="8da91-1175">3200-3299</span><span class="sxs-lookup"><span data-stu-id="8da91-1175">3200 – 3299</span></span> |<span data-ttu-id="8da91-1176">Distribuidor de SAP, utilizado por la GUI de SAP para Windows y Java</span><span class="sxs-lookup"><span data-stu-id="8da91-1176">SAP Dispatcher, used by SAP GUI for Windows and Java</span></span> |
| <span data-ttu-id="8da91-1177">Servidor de mensajes</span><span class="sxs-lookup"><span data-stu-id="8da91-1177">Message server</span></span> |<span data-ttu-id="8da91-1178">sapms`<sid`> consulte **</span><span class="sxs-lookup"><span data-stu-id="8da91-1178">sapms`<sid`> see **</span></span> |<span data-ttu-id="8da91-1179">3600</span><span class="sxs-lookup"><span data-stu-id="8da91-1179">3600</span></span> |<span data-ttu-id="8da91-1180">sapms libre`<anySID`></span><span class="sxs-lookup"><span data-stu-id="8da91-1180">free sapms`<anySID`></span></span> |<span data-ttu-id="8da91-1181">sid = identificador del sistema SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1181">sid = SAP-System-ID</span></span> |
| <span data-ttu-id="8da91-1182">Puerta de enlace</span><span class="sxs-lookup"><span data-stu-id="8da91-1182">Gateway</span></span> |<span data-ttu-id="8da91-1183">sapgw`<nn`> consulte *</span><span class="sxs-lookup"><span data-stu-id="8da91-1183">sapgw`<nn`> see *</span></span> |<span data-ttu-id="8da91-1184">3301</span><span class="sxs-lookup"><span data-stu-id="8da91-1184">3301</span></span> |<span data-ttu-id="8da91-1185">libre</span><span class="sxs-lookup"><span data-stu-id="8da91-1185">free</span></span> |<span data-ttu-id="8da91-1186">Puerta de enlace de SAP, utilizada para la comunicación de CPIC y RFC</span><span class="sxs-lookup"><span data-stu-id="8da91-1186">SAP gateway, used for CPIC and RFC communication</span></span> |
| <span data-ttu-id="8da91-1187">Enrutador de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1187">SAP router</span></span> |<span data-ttu-id="8da91-1188">sapdp99</span><span class="sxs-lookup"><span data-stu-id="8da91-1188">sapdp99</span></span> |<span data-ttu-id="8da91-1189">3299</span><span class="sxs-lookup"><span data-stu-id="8da91-1189">3299</span></span> |<span data-ttu-id="8da91-1190">libre</span><span class="sxs-lookup"><span data-stu-id="8da91-1190">free</span></span> |<span data-ttu-id="8da91-1191">Solo los nombres de servicio de CI (instancia central) se pueden reasignar a /etc/services con un valor arbitrario después de la instalación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1191">Only CI (central instance) Service names can be reassigned in /etc/services to an arbitrary value after installation.</span></span> |

<span data-ttu-id="8da91-1192">*) nn = número de instancia de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1192">*) nn = SAP Instance Number</span></span>

<span data-ttu-id="8da91-1193">**) sid = identificador del sistema SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1193">**) sid = SAP-System-ID</span></span>

<span data-ttu-id="8da91-1194">Podrá encontrar información más detallada sobre los puertos necesarios para diferentes productos o servicios de productos de SAP aquí <http://scn.sap.com/docs/DOC-17124>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1194">More detailed information on ports required for different SAP products or services by SAP products can be found here <http://scn.sap.com/docs/DOC-17124>.</span></span>
<span data-ttu-id="8da91-1195">Con este documento debería poder abrir los puertos dedicados del dispositivo VPN necesarios para escenarios y productos de SAP concretos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1195">With this document you should be able to open dedicated ports in the VPN device necessary for specific SAP products and scenarios.</span></span>

<span data-ttu-id="8da91-1196">Otra posible medida de seguridad para la implementación de máquinas virtuales en este escenario es la creación de un [grupo de seguridad de red][virtual-networks-nsg] para definir las reglas de acceso.</span><span class="sxs-lookup"><span data-stu-id="8da91-1196">Other security measures when deploying VMs in such a scenario could be to create a [Network Security Group][virtual-networks-nsg] to define access rules.</span></span>

### <a name="dealing-with-different-virtual-machine-series"></a><span data-ttu-id="8da91-1197">Manejo de varias series de máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="8da91-1197">Dealing with different Virtual Machine Series</span></span>
<span data-ttu-id="8da91-1198">Durante los últimos 12 meses, Microsoft agregó muchos más tipos VM que difieren en el número de vCPU, en la memoria o, lo que es más importante, en el hardware en el que se ejecutan.</span><span class="sxs-lookup"><span data-stu-id="8da91-1198">In the course of last 12 months Microsoft added many more VM types that differ either in number of vCPUs, memory or more important on hardware it is running on.</span></span> <span data-ttu-id="8da91-1199">No todas las máquinas virtuales son compatibles con SAP (consulte los tipos de VM admitidos en la nota de SAP [1928533]).</span><span class="sxs-lookup"><span data-stu-id="8da91-1199">Not all those VMs are supported with SAP (see supported VM types in SAP Note [1928533]).</span></span> <span data-ttu-id="8da91-1200">Algunas de estas máquinas virtuales se ejecutan en generaciones de hardware de host distintas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1200">Some of those VMs run on different host hardware generations.</span></span> <span data-ttu-id="8da91-1201">Estas generaciones de hardware de host se implementan en la granularidad de una unidad de escalado de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1201">These host hardware generations are getting deployed in the granularity of an Azure Scale-Unit.</span></span> <span data-ttu-id="8da91-1202">Esto significa que se pueden dar casos en los que los diferentes tamaños de VM elegidos no se puedan ejecutar en la misma unidad de escalado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1202">Means cases may arise where the different VM sizes you chose can’t be run on the same Scale-Unit.</span></span> <span data-ttu-id="8da91-1203">Un conjunto de disponibilidad tiene una capacidad limitada para abarcar unidades de escalado basadas en diversos productos de hardware.</span><span class="sxs-lookup"><span data-stu-id="8da91-1203">An Availability Set is limited in the ability to span Scale-Units based of different hardware.</span></span>  <span data-ttu-id="8da91-1204">Por ejemplo, si desea ejecutar el DBMS en máquinas virtuales A5-A11 y la capa de aplicación de SAP en máquinas virtuales de la serie G, deberá implementar un único sistema SAP o diversos sistemas SAP en conjuntos de disponibilidad distintos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1204">For example if you want to run the DBMS on A5-A11 VMs and the SAP application layer on G-Series VMs, you would be forced to deploy a single SAP system or different SAP systems within different Availability Sets.</span></span>

#### <a name="printing-on-a-local-network-printer-from-sap-instance-in-azure"></a><span data-ttu-id="8da91-1205">Impresión en una impresora de red local desde la instancia de SAP en Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1205">Printing on a local network printer from SAP instance in Azure</span></span>
##### <a name="printing-over-tcpip-in-cross-premises-scenario"></a><span data-ttu-id="8da91-1206">Impresión por TCP/IP en el escenario entre locales</span><span class="sxs-lookup"><span data-stu-id="8da91-1206">Printing over TCP/IP in Cross-Premises scenario</span></span>
<span data-ttu-id="8da91-1207">La configuración de las impresoras de red basadas en TCP/IP locales en una VM de Azure es generalmente la misma que la de la red corporativa, partiendo de la base de que tenga establecidos un túnel VPN de sitio a sitio o una conexión ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8da91-1207">Setting up your on-premises TCP/IP based network printers in an Azure VM is overall the same as in your corporate network, assuming you do have a VPN Site-To-Site tunnel or ExpressRoute connection established.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1209">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1209">Windows</span></span>
>
> <span data-ttu-id="8da91-1210">Para ello, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="8da91-1210">To do this:</span></span>
>
> * <span data-ttu-id="8da91-1211">Algunas impresoras de red incluyen un Asistente para la configuración, lo que permite configurarlas más fácilmente en una VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1211">Some network printers come with a configuration wizard which makes it easy to set up your printer in an Azure VM.</span></span> <span data-ttu-id="8da91-1212">Si no se distribuyó ningún software de asistente con la impresora, la forma "manual" de configurar la impresora consiste en crear un nuevo puerto de impresora TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1212">If no wizard software has been distributed with the printer the “manual” way to set up the printer is to create a new TCP/IP printer port.</span></span>
> * <span data-ttu-id="8da91-1213">Abra Panel de control -> Dispositivos e impresoras -> Agregar una impresora.</span><span class="sxs-lookup"><span data-stu-id="8da91-1213">Open Control Panel -> Devices and Printers -> Add a printer</span></span>
> * <span data-ttu-id="8da91-1214">Elija Agregar una impresora por medio de una dirección TCP/IP o un nombre de host.</span><span class="sxs-lookup"><span data-stu-id="8da91-1214">Choose Add a printer using a TCP/IP address or hostname</span></span>
> * <span data-ttu-id="8da91-1215">Escriba la dirección IP de la impresora.</span><span class="sxs-lookup"><span data-stu-id="8da91-1215">Type in the IP address of the printer</span></span>
> * <span data-ttu-id="8da91-1216">Puerto de impresora estándar 9100.</span><span class="sxs-lookup"><span data-stu-id="8da91-1216">Printer Port standard 9100</span></span>
> * <span data-ttu-id="8da91-1217">Si es necesario, instale manualmente el controlador de impresora adecuado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1217">If necessary install the appropriate printer driver manually.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-1219">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1219">Linux</span></span>
>
> * <span data-ttu-id="8da91-1220">Como en Windows, solo tiene que seguir el procedimiento estándar para la instalación de una impresora de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1220">like for Windows just follow the standard procedure to install a network printer</span></span>
> * <span data-ttu-id="8da91-1221">Solo siga las guías de Linux públicas de [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) o [Red Hat y Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) sobre cómo agregar una impresora.</span><span class="sxs-lookup"><span data-stu-id="8da91-1221">just follow the public Linux guides for [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) or [Red Hat and Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) on how to add a printer.</span></span>
>
>

- - -
![Impresión en red][planning-guide-figure-2200]

##### <a name="host-based-printer-over-smb-shared-printer-in-cross-premises-scenario"></a><span data-ttu-id="8da91-1223">Impresora basada en host por SMB (impresora compartida) en el escenario entre locales</span><span class="sxs-lookup"><span data-stu-id="8da91-1223">Host-based printer over SMB (shared printer) in Cross-Premises scenario</span></span>
<span data-ttu-id="8da91-1224">Las impresoras basadas en host están diseñadas para no ser compatibles con la red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1224">Host-based printers are not network-compatible by design.</span></span> <span data-ttu-id="8da91-1225">No obstante, una impresora basada en host se puede compartir entre los equipos de una red si la impresora está conectada a un equipo encendido.</span><span class="sxs-lookup"><span data-stu-id="8da91-1225">But a host-based printer can be shared among computers on a network as long as the printer is connected to a powered-on computer.</span></span> <span data-ttu-id="8da91-1226">Conecte la red corporativa sitio a sitio o por ExpressRoute y comparta la impresora local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1226">Connect your corporate network either Site-To-Site or ExpressRoute and share your local printer.</span></span> <span data-ttu-id="8da91-1227">El protocolo SMB usa NetBIOS en lugar de DNS como servicio de nombres.</span><span class="sxs-lookup"><span data-stu-id="8da91-1227">The SMB protocol uses NetBIOS instead of DNS as name service.</span></span> <span data-ttu-id="8da91-1228">El nombre de host de NetBIOS puede ser diferente del nombre de host de DNS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1228">The NetBIOS host name can be different from the DNS host name.</span></span> <span data-ttu-id="8da91-1229">Lo normal es que el nombre de host de NetBIOS y el nombre de host de DNS sean idénticos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1229">The standard case is that the NetBIOS host name and the DNS host name are identical.</span></span> <span data-ttu-id="8da91-1230">El dominio de DNS no tiene sentido en el espacio de nombres de NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1230">The DNS domain does not make sense in the NetBIOS name space.</span></span> <span data-ttu-id="8da91-1231">En consecuencia, el nombre de host de DNS completo que consta del nombre de host de DNS y el dominio de DNS no debe utilizarse en el espacio de nombres de NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1231">Accordingly, the fully qualified DNS host name consisting of the DNS host name and DNS domain must not be used in the NetBIOS name space.</span></span>

<span data-ttu-id="8da91-1232">El recurso compartido de impresora se identifica mediante un nombre único en la red:</span><span class="sxs-lookup"><span data-stu-id="8da91-1232">The printer share is identified by a unique name in the network:</span></span>

* <span data-ttu-id="8da91-1233">Nombre de host del host de SMB (se requiere siempre).</span><span class="sxs-lookup"><span data-stu-id="8da91-1233">Host name of the SMB host (always needed).</span></span>
* <span data-ttu-id="8da91-1234">Nombre del recurso compartido (se requiere siempre).</span><span class="sxs-lookup"><span data-stu-id="8da91-1234">Name of the share (always needed).</span></span>
* <span data-ttu-id="8da91-1235">Nombre del dominio si el recurso compartido de impresora no está en el mismo dominio que el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1235">Name of the domain if printer share is not in the same domain as SAP system.</span></span>
* <span data-ttu-id="8da91-1236">Además, puede que se requieran un nombre de usuario y una contraseña para acceder al recurso compartido de impresora.</span><span class="sxs-lookup"><span data-stu-id="8da91-1236">Additionally, a user name and a password may be required to access the printer share.</span></span>

<span data-ttu-id="8da91-1237">Control de</span><span class="sxs-lookup"><span data-stu-id="8da91-1237">How to:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1239">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1239">Windows</span></span>
>
> <span data-ttu-id="8da91-1240">Comparta la impresora local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1240">Share your local printer.</span></span>
> <span data-ttu-id="8da91-1241">En la máquina virtual de Azure, abra el Explorador de Windows y escriba el nombre del recurso compartido de impresora.</span><span class="sxs-lookup"><span data-stu-id="8da91-1241">In the Azure VM, open the Windows Explorer and type in the share name of the printer.</span></span>
> <span data-ttu-id="8da91-1242">El Asistente para la instalación de la impresora le guiará a través del proceso de instalación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1242">A printer installation wizard will guide you through the installation process.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-1244">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1244">Linux</span></span>
>
> <span data-ttu-id="8da91-1245">A continuación, se ofrecen algunos ejemplos de documentación sobre la configuración de impresoras de red en Linux e incluso un capítulo sobre la impresión en Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-1245">Here are some examples of documentation about configuring network printers in Linux or including a chapter regarding printing in Linux.</span></span> <span data-ttu-id="8da91-1246">Funcionará del mismo modo que en una máquina virtual de Linux en Azure si la máquina virtual forma parte de una VPN:</span><span class="sxs-lookup"><span data-stu-id="8da91-1246">It will work the same way in an Azure Linux VM as long as the VM is part of a VPN:</span></span>
>
> * <span data-ttu-id="8da91-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span><span class="sxs-lookup"><span data-stu-id="8da91-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span></span>
> * <span data-ttu-id="8da91-1248">RHEL u Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span><span class="sxs-lookup"><span data-stu-id="8da91-1248">RHEL or Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span></span>
>
>

- - -
##### <a name="usb-printer-printer-forwarding"></a><span data-ttu-id="8da91-1249">Impresora USB (reenvío de impresora)</span><span class="sxs-lookup"><span data-stu-id="8da91-1249">USB Printer (printer forwarding)</span></span>
<span data-ttu-id="8da91-1250">En Azure, la capacidad de los Servicios de Escritorio remoto para permitir a los usuarios que accedan a sus dispositivos de impresora local en una sesión remota no está disponible.</span><span class="sxs-lookup"><span data-stu-id="8da91-1250">In Azure the ability of the Remote Desktop Services to provide users the access to their local printer devices in a remote session is not available.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1252">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1252">Windows</span></span>
>
> <span data-ttu-id="8da91-1253">Se pueden encontrar más detalles sobre la impresión con Windows aquí: <http://technet.microsoft.com/library/jj590748.aspx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1253">More details on printing with Windows can be found here: <http://technet.microsoft.com/library/jj590748.aspx>.</span></span>
>
>

- - -
#### <a name="integration-of-sap-azure-systems-into-correction-and-transport-system-tms-in-cross-premises"></a><span data-ttu-id="8da91-1254">Integración de sistemas SAP de Azure en el sistema de corrección y transporte (TMS) en el escenario entre locales</span><span class="sxs-lookup"><span data-stu-id="8da91-1254">Integration of SAP Azure Systems into Correction and Transport System (TMS) in Cross-Premises</span></span>
<span data-ttu-id="8da91-1255">Se debe configurar Change and Transport System (TMS) de SAP para exportar las solicitudes de transporte en todos los sistemas del entorno e importarlas de ellos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1255">The SAP Change and Transport System (TMS) needs to be configured to export and import transport request across systems in the landscape.</span></span> <span data-ttu-id="8da91-1256">Se presupone que las instancias de desarrollo de un sistema SAP (de desarrollo) se encuentran en Azure, mientras que el control de calidad (QA) y los sistemas productivos (PRD) son locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1256">We assume that the development instances of an SAP system (DEV) are located in Azure whereas the quality assurance (QA) and productive systems (PRD) are on-premises.</span></span> <span data-ttu-id="8da91-1257">Además, se presupone que hay un directorio central de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1257">Furthermore, we assume that there is a central transport directory.</span></span>

##### <a name="configuring-the-transport-domain"></a><span data-ttu-id="8da91-1258">Configuración del dominio de transporte</span><span class="sxs-lookup"><span data-stu-id="8da91-1258">Configuring the Transport Domain</span></span>
<span data-ttu-id="8da91-1259">Configure el dominio de transporte en el sistema que designó como controlador de dominio de transporte según lo descrito en [Configuring the Transport Domain Controller](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm)(Configuración del controlador del dominio de transporte).</span><span class="sxs-lookup"><span data-stu-id="8da91-1259">Configure your Transport Domain on the system you designated as the Transport Domain Controller as described in [Configuring the Transport Domain Controller](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span></span> <span data-ttu-id="8da91-1260">Se creará un TMSADM de usuarios del sistema y se generará el destino requerido de la RFC.</span><span class="sxs-lookup"><span data-stu-id="8da91-1260">A system user TMSADM will be created and the required RFC destination will be generated.</span></span> <span data-ttu-id="8da91-1261">Puede comprobar estas conexiones RFC mediante el SM59 de transacciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-1261">You may check these RFC connections using the transaction SM59.</span></span> <span data-ttu-id="8da91-1262">La resolución de nombre de host debe estar habilitada en todo el dominio de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1262">Hostname resolution must be enabled across your transport domain.</span></span>

<span data-ttu-id="8da91-1263">Control de</span><span class="sxs-lookup"><span data-stu-id="8da91-1263">How to:</span></span>

* <span data-ttu-id="8da91-1264">En nuestro escenario, hemos decidido que el sistema de control de calidad local será el controlador de dominio de CTS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1264">In our scenario we decided the on-premises QAS system will be the CTS domain controller.</span></span> <span data-ttu-id="8da91-1265">Llame al STMS de transacciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-1265">Call transaction STMS.</span></span> <span data-ttu-id="8da91-1266">Aparecerá el cuadro de diálogo de TMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1266">The TMS dialog box appears.</span></span> <span data-ttu-id="8da91-1267">Se mostrará un cuadro de diálogo Configure Transport Domain (Configurar dominio de transporte).</span><span class="sxs-lookup"><span data-stu-id="8da91-1267">A Configure Transport Domain dialog box is displayed.</span></span> <span data-ttu-id="8da91-1268">(Este cuadro de diálogo aparecerá solo si todavía no ha configurado un dominio de transporte).</span><span class="sxs-lookup"><span data-stu-id="8da91-1268">(This dialog box only appears if you have not yet configured a transport domain.)</span></span>
* <span data-ttu-id="8da91-1269">Asegúrese de que el TMSADM de usuario creado automáticamente está autorizado (SM59 -> ABAP Connection [Conexión ABAP] -> TMSADM@E61.DOMAIN_E61 -> Details [Detalles] -> Utilities(M) [Utilidades (M)] -> Authorization Test [Prueba de autorización]).</span><span class="sxs-lookup"><span data-stu-id="8da91-1269">Make sure that the automatically created user TMSADM is authorized (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test).</span></span> <span data-ttu-id="8da91-1270">La pantalla inicial del STMS de transacciones debería mostrar que este sistema SAP ahora funciona como el controlador del dominio de transporte, tal y como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="8da91-1270">The initial screen of transaction STMS should show that this SAP System is now functioning as the controller of the transport domain as shown here:</span></span>

![Pantalla inicial del STMS de transacciones en el controlador de dominio][planning-guide-figure-2300]

#### <a name="including-sap-systems-in-the-transport-domain"></a><span data-ttu-id="8da91-1272">Inclusión de los sistemas SAP en el dominio de transporte</span><span class="sxs-lookup"><span data-stu-id="8da91-1272">Including SAP Systems in the Transport Domain</span></span>
<span data-ttu-id="8da91-1273">La secuencia de inclusión de un sistema SAP en un dominio de transporte tiene el aspecto siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-1273">The sequence of including an SAP system in a transport domain looks as follows:</span></span>

* <span data-ttu-id="8da91-1274">En el sistema de desarrollo de Azure, vaya al sistema de transporte (cliente 000) y llame al STMS de transacciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-1274">On the DEV system in Azure, go to the transport system (Client 000) and call transaction STMS.</span></span> <span data-ttu-id="8da91-1275">Elija Other Configuration (Otra configuración) en el cuadro de diálogo y continúe con Include System in Domain (Incluir sistema en el dominio).</span><span class="sxs-lookup"><span data-stu-id="8da91-1275">Choose Other Configuration from the dialog box and continue with Include System in Domain.</span></span> <span data-ttu-id="8da91-1276">Especifique el controlador de dominio como host de destino [[Including SAP Systems in the Transport Domain](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)(Inclusión de los sistemas SAP en el dominio de transporte)].</span><span class="sxs-lookup"><span data-stu-id="8da91-1276">Specify the Domain Controller as target host ([Including SAP Systems in the Transport Domain](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span></span> <span data-ttu-id="8da91-1277">El sistema se pondrá en espera de que se le incluya en el dominio de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1277">The system is now waiting to be included in the transport domain.</span></span>
* <span data-ttu-id="8da91-1278">Por motivos de seguridad, deberá volver al controlador de dominio para confirmar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="8da91-1278">For security reasons, you then have to go back to the domain controller to confirm your request.</span></span> <span data-ttu-id="8da91-1279">Elija System Overview (Información general del sistema) y Approve of the waiting system (Aprobar el sistema en espera).</span><span class="sxs-lookup"><span data-stu-id="8da91-1279">Choose System Overview and Approve of the waiting system.</span></span> <span data-ttu-id="8da91-1280">A continuación, confirme el aviso y la configuración se distribuirá.</span><span class="sxs-lookup"><span data-stu-id="8da91-1280">Then confirm the prompt and the configuration will be distributed.</span></span>

<span data-ttu-id="8da91-1281">Este sistema SAP ahora contiene la información necesaria sobre todos los demás sistemas SAP en el dominio de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1281">This SAP system now contains the necessary information about all the other SAP systems in the transport domain.</span></span> <span data-ttu-id="8da91-1282">Al mismo tiempo, los datos de la dirección del nuevo sistema SAP se envían a todos los demás sistemas SAP y el sistema SAP se introduce en el perfil de transporte del programa de control de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1282">At the same time, the address data of the new SAP system is sent to all the other SAP systems, and the SAP system is entered in the transport profile of the transport control program.</span></span> <span data-ttu-id="8da91-1283">Compruebe si las RFC y el acceso al directorio de transporte del dominio funcionan.</span><span class="sxs-lookup"><span data-stu-id="8da91-1283">Check whether RFCs and access to the transport directory of the domain work.</span></span>

<span data-ttu-id="8da91-1284">Continúe con la configuración del sistema de transporte como de costumbre según lo descrito en la documentación [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)(Sistema de cambios y transportes).</span><span class="sxs-lookup"><span data-stu-id="8da91-1284">Continue with the configuration of your transport system as usual as described in the documentation [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span></span>

<span data-ttu-id="8da91-1285">Control de</span><span class="sxs-lookup"><span data-stu-id="8da91-1285">How to:</span></span>

* <span data-ttu-id="8da91-1286">Asegúrese de que su STMS local está configurado correctamente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1286">Make sure your STMS on premises is configured correctly.</span></span>
* <span data-ttu-id="8da91-1287">Asegúrese de que la máquina virtual en Azure puede resolver el nombre de host del controlador de dominio de transporte y viceversa.</span><span class="sxs-lookup"><span data-stu-id="8da91-1287">Make sure the hostname of the Transport Domain Controller can be resolved by your virtual machine on Azure and vice visa.</span></span>
* <span data-ttu-id="8da91-1288">Call transaction STMS (Llamar a STMS de transacciones) -> Other Configuration (Otra configuración) -> Include System in Domain (Incluir sistema en el dominio).</span><span class="sxs-lookup"><span data-stu-id="8da91-1288">Call transaction STMS -> Other Configuration -> Include System in Domain.</span></span>
* <span data-ttu-id="8da91-1289">Confirme la conexión en el sistema de TMS local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1289">Confirm the connection in the on premises TMS system.</span></span>
* <span data-ttu-id="8da91-1290">Configure las rutas, grupos y capas de transporte como de costumbre.</span><span class="sxs-lookup"><span data-stu-id="8da91-1290">Configure transport routes, groups and layers as usual.</span></span>

<span data-ttu-id="8da91-1291">En escenarios conectados entre locales conectados de sitio a sitio, la latencia entre el entorno local y el de Azure todavía puede ser considerable.</span><span class="sxs-lookup"><span data-stu-id="8da91-1291">In site-to-site connected cross-premises scenarios, the latency between on-premises and Azure still can be substantial.</span></span> <span data-ttu-id="8da91-1292">Si sigue la secuencia del transporte de objetos a través de los sistemas de desarrollo y pruebas hasta la producción o se plantea la aplicación de paquetes de transporte o de soporte a los distintos sistemas, se dará cuenta de que, en función de la ubicación del directorio central de transporte, algunos de los sistemas experimentarán una alta latencia al leer o escribir datos en dicho directorio.</span><span class="sxs-lookup"><span data-stu-id="8da91-1292">If we follow the sequence of transporting objects through development and test systems to production or think about applying transports or support packages to the different systems, you realize that, dependent on the location of the central transport directory, some of the systems will encounter high latency reading or writing data in the central transport directory.</span></span> <span data-ttu-id="8da91-1293">La situación es similar a las configuraciones en el entorno de SAP, donde los distintos sistemas se propagan a través de diversos centros de datos con una distancia considerable entre los centros de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1293">The situation is similar to SAP landscape configurations where the different systems are spread through different data centers with substantial distance between the data centers.</span></span>

<span data-ttu-id="8da91-1294">Para solucionar tal latencia y que los sistemas funcionen con rapidez para las tareas de lectura o escritura o desde el directorio de transporte, puede configurar dos dominios de transporte STMS (uno para los sistemas locales y otro con los sistemas en Azure) y vincular los dominios de transporte.</span><span class="sxs-lookup"><span data-stu-id="8da91-1294">In order to work around such latency and have the systems work fast in reading or writing to or from the transport directory, you can set up two STMS transport domains (one for on-premises and one with the systems in Azure and link the transport domains.</span></span> <span data-ttu-id="8da91-1295">Revise esta documentación que explica los principios que se esconden tras este concepto en el TMS de SAP: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1295">Please check this documentation which explains the principles behind this concept in the SAP TMS: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span></span>

<span data-ttu-id="8da91-1296">Control de</span><span class="sxs-lookup"><span data-stu-id="8da91-1296">How to:</span></span>

* <span data-ttu-id="8da91-1297">Configurar un dominio de transporte en cada ubicación (local y Azure) mediante STMS de transacciones <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span><span class="sxs-lookup"><span data-stu-id="8da91-1297">Set up a transport domain on each location (on-premises and Azure) using transaction STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span></span>
* <span data-ttu-id="8da91-1298">Vincular los dominios con un vínculo de dominio y confirmar el vínculo entre ambos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1298">Link the domains with a domain link and confirm the link between the two domains.</span></span>
  <span data-ttu-id="8da91-1299"><http://help.SAP.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/Content.htm></span><span class="sxs-lookup"><span data-stu-id="8da91-1299"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span></span>
* <span data-ttu-id="8da91-1300">Distribución de la configuración al sistema vinculado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1300">Distribute the configuration to the linked system.</span></span>

#### <a name="rfc-traffic-between-sap-instances-located-in-azure-and-on-premises-cross-premises"></a><span data-ttu-id="8da91-1301">Tráfico de RFC entre las instancias de SAP ubicadas en Azure y las locales (entre locales)</span><span class="sxs-lookup"><span data-stu-id="8da91-1301">RFC traffic between SAP instances located in Azure and on-premises (Cross-Premises)</span></span>
<span data-ttu-id="8da91-1302">El tráfico de RFC entre los sistemas en Azure y los locales debe funcionar.</span><span class="sxs-lookup"><span data-stu-id="8da91-1302">RFC traffic between systems which are on-premises and in Azure needs to work.</span></span> <span data-ttu-id="8da91-1303">Para configurar un SM59 de transacciones de llamadas de conexión en un sistema de origen donde se debe definir una conexión RFC hacia el sistema de destino.</span><span class="sxs-lookup"><span data-stu-id="8da91-1303">To set up a connection call transaction SM59 in a source system where you need to define an RFC connection towards the target system.</span></span> <span data-ttu-id="8da91-1304">La configuración es similar a la configuración estándar de una conexión RFC estándar.</span><span class="sxs-lookup"><span data-stu-id="8da91-1304">The configuration is similar to the standard setup of an RFC Connection.</span></span>

<span data-ttu-id="8da91-1305">Se presupone que en el escenario entre locales, las máquinas virtuales que ejecutan sistemas SAP que deben comunicarse entre sí se encuentran en el mismo dominio.</span><span class="sxs-lookup"><span data-stu-id="8da91-1305">We assume that in the cross-premises scenario, the VMs which run SAP systems that need to communicate with each other are in the same domain.</span></span> <span data-ttu-id="8da91-1306">Por lo tanto, la configuración de una conexión RFC entre sistemas SAP no difiere de los pasos y las entradas de configuración de los escenarios locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1306">Therefore the setup of an RFC connection between SAP systems does not differ from the setup steps and inputs in on-premises scenarios.</span></span>

#### <a name="accessing-local-fileshares-from-sap-instances-located-in-azure-or-vice-versa"></a><span data-ttu-id="8da91-1307">Acceso a recursos compartidos de archivos "locales" desde instancias de SAP ubicadas en Azure o viceversa</span><span class="sxs-lookup"><span data-stu-id="8da91-1307">Accessing ‘local’ fileshares from SAP instances located in Azure or vice versa</span></span>
<span data-ttu-id="8da91-1308">Las instancias de SAP ubicadas en Azure deben acceder a los recursos compartidos de archivos que están dentro de los locales corporativos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1308">SAP instances located in Azure need to access file shares which are within the corporate premises.</span></span> <span data-ttu-id="8da91-1309">Además, las instancias de SAP locales deben acceder a los recursos compartidos de archivos que se encuentran en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1309">In addition, on-premises SAP instances need to access file shares which are located in Azure.</span></span> <span data-ttu-id="8da91-1310">Para habilitar los recursos compartidos de archivos, se deben configurar los permisos y las opciones de uso compartido en el sistema local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1310">To enable the file shares you must configure the permissions and sharing options on the local system.</span></span> <span data-ttu-id="8da91-1311">Asegúrese de abrir los puertos en la conexión VPN o ExpressRoute entre Azure y su centro de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1311">Make sure to open the ports on the VPN or ExpressRoute connection between Azure and your datacenter.</span></span>

## <a name="supportability"></a><span data-ttu-id="8da91-1312">Compatibilidad</span><span class="sxs-lookup"><span data-stu-id="8da91-1312">Supportability</span></span>
### <span data-ttu-id="8da91-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Solución de supervisión de Azure para SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Azure Monitoring Solution for SAP</span></span>
<span data-ttu-id="8da91-1314">Para habilitar la supervisión de sistemas SAP críticos en Azure, las herramientas de supervisión de SAP SAPOSCOL o SAP Host Agent obtienen datos del host del servicio de máquina virtual de Azure por medio de una extensión de supervisión de Azure para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1314">In order to enable the monitoring of mission critical SAP systems on Azure the SAP monitoring tools SAPOSCOL or SAP Host Agent get data off the Azure Virtual Machine Service host via an Azure Monitoring Extension for SAP.</span></span> <span data-ttu-id="8da91-1315">Puesto que las demandas de SAP eran muy específicas para las aplicaciones de SAP, Microsoft decidió implementar de forma no genérica la funcionalidad requerida en Azure, pero dejar al criterio de los clientes la implementación de las configuraciones y componentes de supervisión necesarios para sus máquinas virtuales que se ejecuten en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1315">Since the demands by SAP were very specific to SAP applications, Microsoft decided not to generically implement the required functionality into Azure, but leave it for customers to deploy the necessary monitoring components and configurations to their Virtual Machines running in Azure.</span></span> <span data-ttu-id="8da91-1316">Sin embargo, Azure automatizará la mayor parte de la implementación y la administración del ciclo de vida de los componentes.</span><span class="sxs-lookup"><span data-stu-id="8da91-1316">However, deployment and lifecycle management of the monitoring components will be mostly automated by Azure.</span></span>

#### <a name="solution-design"></a><span data-ttu-id="8da91-1317">Diseño de la solución</span><span class="sxs-lookup"><span data-stu-id="8da91-1317">Solution design</span></span>
<span data-ttu-id="8da91-1318">La solución desarrollada para habilitar la supervisión de SAP se basa en la arquitectura del marco de agente y extensión de VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1318">The solution developed to enable SAP Monitoring is based on the architecture of Azure VM Agent and Extension framework.</span></span> <span data-ttu-id="8da91-1319">La idea del marco de agente y extensión de VM Azure es permitir la instalación de las aplicaciones de software disponibles en la galería de extensiones de VM de Azure dentro de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1319">The idea of the Azure VM Agent and Extension framework is to allow installation of software application(s) available in the Azure VM Extension gallery within a VM.</span></span> <span data-ttu-id="8da91-1320">La idea principal que subyace tras este concepto es permitir (en casos como el de la extensión de supervisión de Azure para SAP) la implementación de una funcionalidad especial en una máquina virtual y la configuración de dicho software al realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1320">The principle idea behind this concept is to allow (in cases like the Azure Monitoring Extension for SAP), the deployment of special functionality into a VM and the configuration of such software at deployment time.</span></span>

<span data-ttu-id="8da91-1321">El "agente de VM de Azure" que permite controlar extensiones específicas de VM de Azure dentro de la máquina virtual se inyecta en las máquinas virtuales de Windows de forma predeterminada al crear VM en Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-1321">The 'Azure VM Agent' that enables handling of specific Azure VM Extensions within the VM is injected into Windows VMs by default on VM creation in the Azure portal.</span></span> <span data-ttu-id="8da91-1322">En el caso de SUSE, Red Hat u Oracle Linux, el agente de VM ya forma parte de la imagen de Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8da91-1322">In case of SUSE, Red Hat or Oracle Linux, the VM agent is already part of the Azure Marketplace image.</span></span> <span data-ttu-id="8da91-1323">En caso de que se desee cargar una VM de Linux desde un sistema local a Azure, el agente de VM se debe instalar manualmente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1323">In case one would upload a Linux VM from on-premises to Azure the VM agent has to be installed manually.</span></span>

<span data-ttu-id="8da91-1324">Los bloques de creación básicos de la solución de supervisión de Azure para SAP tienen el aspecto siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-1324">The basic building blocks of the Monitoring solution in Azure for SAP looks like this:</span></span>

![Componentes de la extensión de Microsoft Azure][planning-guide-figure-2400]

<span data-ttu-id="8da91-1326">Como se muestra en el diagrama de bloques anterior, una parte de la solución de supervisión para SAP se hospeda en la galería de imágenes de VM de Azure y de extensiones de Azure (un repositorio replicado globalmente que está administrado por las operaciones de Azure).</span><span class="sxs-lookup"><span data-stu-id="8da91-1326">As shown in the block diagram above, one part of the monitoring solution for SAP is hosted in the Azure VM Image and Azure Extension Gallery which is a globally replicated repository that is managed by Azure Operations.</span></span> <span data-ttu-id="8da91-1327">El equipo conjunto de SAP/Microsoft que trabaja en la implementación de SAP en Azure debe trabajar con las operaciones de Azure para publicar nuevas versiones de la extensión de supervisión de Azure para SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1327">It is the responsibility of the joint SAP/MS team working on the Azure implementation of SAP to work with Azure Operations to publish new versions of the Azure Monitoring Extension for SAP.</span></span>

<span data-ttu-id="8da91-1328">Cuando se implementa una máquina virtual de Windows nueva, el "agente de VM de Azure" se agrega automáticamente a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1328">When you deploy a new Windows VM, the ‘Azure VM Agent’ is automatically added into the VM.</span></span> <span data-ttu-id="8da91-1329">La función de este agente es coordinar la carga y la configuración de las extensiones de Azure para la supervisión de los sistemas SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="8da91-1329">The function of this agent is to coordinate the loading and configuration of the Azure Extensions for monitoring of SAP NetWeaver Systems.</span></span> <span data-ttu-id="8da91-1330">En las máquinas virtuales de Linux, el agente de VM de Azure ya forma parte de la imagen de SO de Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8da91-1330">For Linux VMs the Azure VM Agent is already part of the Azure Marketplace OS image.</span></span>

<span data-ttu-id="8da91-1331">Sin embargo, el cliente aún deberá realizar otro paso,</span><span class="sxs-lookup"><span data-stu-id="8da91-1331">However, there is a step that still needs to be executed by the customer.</span></span> <span data-ttu-id="8da91-1332">que consiste en habilitar y configurar la recopilación de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1332">This is the enablement and configuration of the performance collection.</span></span> <span data-ttu-id="8da91-1333">El proceso relacionado con la "configuración" se automatiza mediante un script de PowerShell o un comando de la CLI.</span><span class="sxs-lookup"><span data-stu-id="8da91-1333">The process related to the ‘configuration’ is automated by a PowerShell script or CLI command.</span></span> <span data-ttu-id="8da91-1334">Se puede descargar el script de PowerShell en el Centro de scripts de Microsoft Azure como se describe en la [Guía de implementación][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1334">The PowerShell script can be downloaded in the Microsoft Azure Script Center as described in the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="8da91-1335">La arquitectura general de la solución de supervisión de Azure para SAP tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="8da91-1335">The overall Architecture of the Azure monitoring solution for SAP looks like:</span></span>

![Solución de supervisión de Azure para SAP NetWeaver][planning-guide-figure-2500]

<span data-ttu-id="8da91-1337">**Para obtener las instrucciones exactas y los pasos detallados para utilizar estos cmdlets de PowerShell o el comando de la CLI durante las implementaciones, siga las instrucciones indicadas la [Guía de implementación][deployment-guide].**</span><span class="sxs-lookup"><span data-stu-id="8da91-1337">**For the exact how-to and for detailed steps of using these PowerShell cmdlets or CLI command during deployments, follow the instructions given in the [Deployment Guide][deployment-guide].**</span></span>

### <a name="integration-of-azure-located-sap-instance-into-saprouter"></a><span data-ttu-id="8da91-1338">Integración de una instancia de SAP ubicada en Azure en SAProuter</span><span class="sxs-lookup"><span data-stu-id="8da91-1338">Integration of Azure located SAP instance into SAProuter</span></span>
<span data-ttu-id="8da91-1339">Las instancias de SAP que se ejecutan en Azure también deben ser accesibles desde SAProuter.</span><span class="sxs-lookup"><span data-stu-id="8da91-1339">SAP instances running in Azure need to be accessible from SAProuter as well.</span></span>

![Conexión de red SAP-enrutador][planning-guide-figure-2600]

<span data-ttu-id="8da91-1341">SAProuter permite la comunicación de TCP/IP entre los sistemas participantes si no hay ninguna conexión IP directa.</span><span class="sxs-lookup"><span data-stu-id="8da91-1341">A SAProuter enables the TCP/IP communication between participating systems if there is no direct IP connection.</span></span> <span data-ttu-id="8da91-1342">Esto aporta la ventaja de que no se requiere ninguna conexión de un extremo a otro entre los asociados de comunicación en el ámbito de la red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1342">This provides the advantage that no end-to-end connection between the communication partners is necessary on network level.</span></span> <span data-ttu-id="8da91-1343">De forma predeterminada, SAProuter escucha en el puerto 3299.</span><span class="sxs-lookup"><span data-stu-id="8da91-1343">The SAProuter is listening on port 3299 by default.</span></span>
<span data-ttu-id="8da91-1344">Para conectarse a instancias de SAP por medio de SAProuter, se debe proporcionar la cadena y el nombre de host de SAProuter cada vez que trate de conectarse.</span><span class="sxs-lookup"><span data-stu-id="8da91-1344">To connect SAP instances through a SAProuter you need to give the SAProuter string and host name with any attempt to connect.</span></span>

## <a name="sap-netweaver-as-java"></a><span data-ttu-id="8da91-1345">AS de SAP NetWeaver en Java</span><span class="sxs-lookup"><span data-stu-id="8da91-1345">SAP NetWeaver AS Java</span></span>
<span data-ttu-id="8da91-1346">Hasta ahora, este documento se ha centrado en SAP NetWeaver en general o en la pila de ABAP de SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="8da91-1346">So far the focus of the document has been SAP NetWeaver in general or the SAP NetWeaver ABAP stack.</span></span> <span data-ttu-id="8da91-1347">En esta pequeña sección, se ofrecen las consideraciones específicas para la pila de Java de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1347">In this small section, specific considerations for the SAP Java stack are listed.</span></span> <span data-ttu-id="8da91-1348">Una de las aplicaciones de SAP NetWeaver basadas exclusivamente en Java más importantes es SAP Enterprise Portal.</span><span class="sxs-lookup"><span data-stu-id="8da91-1348">One of the most important SAP NetWeaver Java exclusively based applications is the SAP Enterprise Portal.</span></span> <span data-ttu-id="8da91-1349">Otras aplicaciones basadas en SAP NetWeaver como SAP PI y SAP Solution Manager usan las pilas de ABAP y de Java de SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="8da91-1349">Other SAP NetWeaver based applications like SAP PI and SAP Solution Manager use both the SAP NetWeaver ABAP and Java stacks.</span></span> <span data-ttu-id="8da91-1350">Por lo tanto, indudablemente también se deben tener en consideración los aspectos específicos relacionados con la pila de Java de SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="8da91-1350">Therefore, there certainly is a need to consider specific aspects related to the SAP NetWeaver Java stack as well.</span></span>

### <a name="sap-enterprise-portal"></a><span data-ttu-id="8da91-1351">SAP Enterprise Portal</span><span class="sxs-lookup"><span data-stu-id="8da91-1351">SAP Enterprise Portal</span></span>
<span data-ttu-id="8da91-1352">La configuración de un portal de SAP en una máquina virtual de Azure no difiere de la instalación local si se desea implementar escenarios entre locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1352">The setup of an SAP Portal in an Azure Virtual Machine does not differ from an on premises installation if you are deploying in cross-premises scenarios.</span></span> <span data-ttu-id="8da91-1353">Dado que el DNS se ejecuta en el entorno local, la configuración local se puede extrapolar a la de los puertos de las instancias individuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1353">Since the DNS is done by on-premises, the port settings of the individual instances can be done as configured on-premises.</span></span> <span data-ttu-id="8da91-1354">Las recomendaciones y restricciones descritas hasta ahora en este documento se aplican en una aplicación como SAP Enterprise Portal o la pila de Java de SAP NetWeaver en general.</span><span class="sxs-lookup"><span data-stu-id="8da91-1354">The recommendations and restrictions described in this document so far apply for an application like SAP Enterprise Portal or the SAP NetWeaver Java stack in general.</span></span>

![Exposición del portal de SAP][planning-guide-figure-2700]

<span data-ttu-id="8da91-1356">Un escenario de implementación especial de algunos clientes es la exposición directa de SAP Enterprise Portal a Internet mientras el host de máquina virtual está conectado a la red corporativa por medio del túnel VPN de sitio a sitio o ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8da91-1356">A special deployment scenario by some customers is the direct exposure of the SAP Enterprise Portal to the Internet while the virtual machine host is connected to the company network via site-to-site VPN tunnel or ExpressRoute.</span></span> <span data-ttu-id="8da91-1357">En semejante escenario, hay que asegurarse de que determinados puertos estén abiertos y no estén bloqueados por el firewall ni por el grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="8da91-1357">For such a scenario, you have to make sure that specific ports are open and not blocked by firewall or network security group.</span></span> <span data-ttu-id="8da91-1358">Se deberá aplicar la misma mecánica si desea conectarse a una instancia de Java de SAP desde un sistema local en un escenario exclusivo en la nube.</span><span class="sxs-lookup"><span data-stu-id="8da91-1358">The same mechanics would need to be applied when you want to connect to an SAP Java instance from on-premises in a Cloud-Only scenario.</span></span>

<span data-ttu-id="8da91-1359">El URI inicial del portal es http(s):`<Portalserver`>:5XX00/irj, donde el puerto está formado por un valor superior a 50000 (número de sistema x 100).</span><span class="sxs-lookup"><span data-stu-id="8da91-1359">The initial portal URI is http(s):`<Portalserver`>:5XX00/irj where the port is formed by 50000 plus (Systemnumber × 100).</span></span> <span data-ttu-id="8da91-1360">El URI predeterminado del portal del sistema SAP 00 es `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span><span class="sxs-lookup"><span data-stu-id="8da91-1360">The default portal URI of SAP system 00 is `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span></span> <span data-ttu-id="8da91-1361">Para más información, eche un vistazo a <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1361">For more details, have a look at <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span></span>

![Configuración del punto de conexión][planning-guide-figure-2800]

<span data-ttu-id="8da91-1363">Si desea personalizar la URL o los puertos de SAP Enterprise Portal, consulte esta documentación:</span><span class="sxs-lookup"><span data-stu-id="8da91-1363">If you want to customize the URL and/or ports of your SAP Enterprise Portal, please check this documentation:</span></span>

* [<span data-ttu-id="8da91-1364">Change Portal URL (Cambio de la dirección URL del portal)</span><span class="sxs-lookup"><span data-stu-id="8da91-1364">Change Portal URL</span></span>](http://wiki.scn.sap.com/wiki/display/EP/Change+Portal+URL)
* [<span data-ttu-id="8da91-1365">Change Default port numbers, Portal port numbers (Cambio de los números de puerto predeterminados y los números de puerto del portal)</span><span class="sxs-lookup"><span data-stu-id="8da91-1365">Change Default port numbers, Portal port numbers</span></span>](http://wiki.scn.sap.com/wiki/display/NWTech/Change+Default++port+numbers%2C+Portal+port+numbers)

## <a name="high-availability-ha-and-disaster-recovery-dr-for-sap-netweaver-running-on-azure-virtual-machines"></a><span data-ttu-id="8da91-1366">Alta disponibilidad (HA) y recuperación ante desastres (DR) para la ejecución de SAP NetWeaver en máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1366">High Availability (HA) and Disaster Recovery (DR) for SAP NetWeaver running on Azure Virtual Machines</span></span>
### <a name="definition-of-terminologies"></a><span data-ttu-id="8da91-1367">Definición de terminología</span><span class="sxs-lookup"><span data-stu-id="8da91-1367">Definition of terminologies</span></span>
<span data-ttu-id="8da91-1368">El término **alta disponibilidad (HA)** se asocia generalmente a un conjunto de tecnologías que minimiza las interrupciones de TI al proporcionar una continuidad empresarial de los servicios de TI mediante componentes redundantes, tolerantes a errores o protegidos mediante conmutación por error dentro del **mismo** centro de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1368">The term **high availability (HA)** is generally related to a set of technologies that minimizes IT disruptions by providing business continuity of IT services through redundant, fault-tolerant or failover protected components inside the **same** data center.</span></span> <span data-ttu-id="8da91-1369">En nuestro caso, dentro de una sola región de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1369">In our case, within one Azure Region.</span></span>

<span data-ttu-id="8da91-1370">La **recuperación ante desastres (DR)** también tiene el objetivo de minimizar las interrupciones en los servicios de TI y recuperarlos pero en **distintos** centros de datos que suelen encontrarse a cientos de kilómetros de distancia.</span><span class="sxs-lookup"><span data-stu-id="8da91-1370">**Disaster recovery (DR)** is also targeting minimizing IT services disruption, and their recovery but across **different** data centers, that are usually located hundreds of kilometers away.</span></span> <span data-ttu-id="8da91-1371">En nuestro caso, suelen estar repartidos entre distintas regiones de Azure dentro de la misma región geopolítica o según lo haya establecido usted como cliente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1371">In our case usually between different Azure Regions within the same geopolitical region or as established by you as a customer.</span></span>

### <a name="overview-of-high-availability"></a><span data-ttu-id="8da91-1372">Información general sobre la alta disponibilidad</span><span class="sxs-lookup"><span data-stu-id="8da91-1372">Overview of High Availability</span></span>
<span data-ttu-id="8da91-1373">Podemos descomponer la explicación sobre la alta disponibilidad de SAP en Azure en dos partes:</span><span class="sxs-lookup"><span data-stu-id="8da91-1373">We can separate the discussion about SAP high availability in Azure into two parts:</span></span>

* <span data-ttu-id="8da91-1374">**Alta disponibilidad de la infraestructura de Azure**, por ejemplo, la alta disponibilidad del proceso (VM), la red, el almacenamiento, etc., y sus beneficios para aumentar la disponibilidad de las aplicaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1374">**Azure infrastructure high availability**, for example HA of compute (VMs), network, storage etc. and its benefits for increasing SAP application availability.</span></span>
* <span data-ttu-id="8da91-1375">**Alta disponibilidad de las aplicaciones de SAP**, por ejemplo, la alta disponibilidad de los componentes de software de SAP:</span><span class="sxs-lookup"><span data-stu-id="8da91-1375">**SAP application high availability**, for example HA of SAP software components:</span></span>
  * <span data-ttu-id="8da91-1376">servidores de aplicaciones de SAP,</span><span class="sxs-lookup"><span data-stu-id="8da91-1376">SAP application servers</span></span>
  * <span data-ttu-id="8da91-1377">instancia de SAP ASCS/SCS,</span><span class="sxs-lookup"><span data-stu-id="8da91-1377">SAP ASCS/SCS instance</span></span>
  * <span data-ttu-id="8da91-1378">servidor de base de datos,</span><span class="sxs-lookup"><span data-stu-id="8da91-1378">DB server</span></span>

<span data-ttu-id="8da91-1379">y cómo se puede combinar con la alta disponibilidad de la infraestructura de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1379">and how it can be combined with Azure infrastructure HA.</span></span>

<span data-ttu-id="8da91-1380">La alta disponibilidad de SAP en Azure presenta algunas diferencias con respecto a la alta disponibilidad de SAP en un entorno físico o virtual local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1380">SAP High Availability in Azure has some differences compared to SAP High Availability in an on-premises physical or virtual environment.</span></span> <span data-ttu-id="8da91-1381">Las siguientes notas del producto de SAP describen las configuraciones estándares de la alta disponibilidad de SAP en entornos virtualizados de Windows: <http://scn.sap.com/docs/DOC-44415>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1381">The following paper from SAP describes standard SAP High Availability configurations in virtualized environments on Windows: <http://scn.sap.com/docs/DOC-44415>.</span></span> <span data-ttu-id="8da91-1382">No hay ninguna configuración de alta disponibilidad de SAP integrada en SAPInst para Linux como la que existe para Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-1382">There is no sapinst-integrated SAP-HA configuration for Linux like it exists for Windows.</span></span> <span data-ttu-id="8da91-1383">Con respecto a la alta disponibilidad de SAP local para Linux, se puede encontrar más información aquí: <http://scn.sap.com/docs/DOC-8541>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1383">Regarding SAP HA on-premises for Linux find more information here: <http://scn.sap.com/docs/DOC-8541>.</span></span>

### <a name="azure-infrastructure-high-availability"></a><span data-ttu-id="8da91-1384">Alta disponibilidad de la infraestructura de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1384">Azure Infrastructure High Availability</span></span>
<span data-ttu-id="8da91-1385">Actualmente hay un contrato de nivel de servicio del 99,9 % para una única máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1385">There is currently a single-VM SLA of 99.9%.</span></span> <span data-ttu-id="8da91-1386">Para hacerse una idea de cómo podría ser la disponibilidad de una sola máquina virtual, basta con compilar el producto de los distintos SLA de Azure disponibles: <https://azure.microsoft.com/support/legal/sla/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1386">To get an idea how the availability of a single VM might look like you can simply build the product of the different available Azure SLAs: <https://azure.microsoft.com/support/legal/sla/>.</span></span>

<span data-ttu-id="8da91-1387">La base para el cálculo es de30 días por mes o 43 200 minutos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1387">The basis for the calculation is 30 days per month, or 43200 minutes.</span></span> <span data-ttu-id="8da91-1388">Por lo tanto, un tiempo de inactividad del 0,05 % corresponde a 21,6 minutos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1388">Therefore, 0.05% downtime corresponds to 21.6 minutes.</span></span> <span data-ttu-id="8da91-1389">Como de costumbre, la disponibilidad de los distintos servicios se multiplicará de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8da91-1389">As usual, the availability of the different services will multiply in the following way:</span></span>

<span data-ttu-id="8da91-1390">(Servicio de disponibilidad n.º 1/100) * (servicio de disponibilidad n.º 2/100) * (servicio de disponibilidad n.º 3/100) *…</span><span class="sxs-lookup"><span data-stu-id="8da91-1390">(Availability Service #1/100) * (Availability Service #2/100) * (Availability Service #3/100) *…</span></span>

<span data-ttu-id="8da91-1391">Como, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="8da91-1391">Like:</span></span>

<span data-ttu-id="8da91-1392">(99,95/100) * (99,9/100) * (99,9/100) = 0,9975 o una disponibilidad general del 99,75 %.</span><span class="sxs-lookup"><span data-stu-id="8da91-1392">(99.95/100) * (99.9/100) * (99.9/100) = 0.9975 or an overall availability of 99.75%.</span></span>

#### <a name="virtual-machine-vm-high-availability"></a><span data-ttu-id="8da91-1393">Alta disponibilidad de la máquina virtual (VM)</span><span class="sxs-lookup"><span data-stu-id="8da91-1393">Virtual Machine (VM) High Availability</span></span>
<span data-ttu-id="8da91-1394">Existen dos tipos de eventos de plataforma Azure que pueden afectar a la disponibilidad de sus máquinas virtuales: mantenimiento planeado y mantenimiento no planeado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1394">There are two types of Azure platform events that can affect the availability of your virtual machines: planned maintenance and unplanned maintenance.</span></span>

* <span data-ttu-id="8da91-1395">Eventos de mantenimiento planeado son actualizaciones periódicas realizadas por Microsoft en la plataforma Azure subyacente para mejorar en general la fiabilidad, el rendimiento y la seguridad de la infraestructura de la plataforma sobre las que se funcionan sus máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1395">Planned maintenance events are periodic updates made by Microsoft to the underlying Azure platform to improve overall reliability, performance, and security of the platform infrastructure that your virtual machines run on.</span></span>
* <span data-ttu-id="8da91-1396">Eventos de mantenimiento no planeado se producen cuando el hardware o la infraestructura física subyacente a su máquina virtual presentan algún tipo de error.</span><span class="sxs-lookup"><span data-stu-id="8da91-1396">Unplanned maintenance events occur when the hardware or physical infrastructure underlying your virtual machine has faulted in some way.</span></span> <span data-ttu-id="8da91-1397">Entre estos podemos encontrar errores de la red local, errores de los discos locales u otras errores a nivel de bastidor.</span><span class="sxs-lookup"><span data-stu-id="8da91-1397">This may include local network failures, local disk failures, or other rack level failures.</span></span> <span data-ttu-id="8da91-1398">Cuando se encuentra un error de este tipo, la plataforma Azure migrará automáticamente la máquina virtual del servidor físico en mal estado que hospeda la máquina virtual a un servidor físico con un estado correcto.</span><span class="sxs-lookup"><span data-stu-id="8da91-1398">When such a failure is detected, the Azure platform will automatically migrate your virtual machine from the unhealthy physical server hosting your virtual machine to a healthy physical server.</span></span> <span data-ttu-id="8da91-1399">Estos eventos no son habituales, pero pueden hacer que su máquina virtual se reinicie.</span><span class="sxs-lookup"><span data-stu-id="8da91-1399">Such events are rare, but may also cause your virtual machine to reboot.</span></span>

<span data-ttu-id="8da91-1400">Se pueden encontrar más detalles en esta documentación: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1400">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="azure-storage-redundancy"></a><span data-ttu-id="8da91-1401">Redundancia de almacenamiento de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1401">Azure Storage Redundancy</span></span>
<span data-ttu-id="8da91-1402">Los datos de la cuenta de Microsoft Azure Storage se replican siempre para garantizar su durabilidad y alta disponibilidad, en cumplimiento con el contrato de nivel de servicio de Azure Storage, incluso en caso de errores transitorios del hardware.</span><span class="sxs-lookup"><span data-stu-id="8da91-1402">The data in your Microsoft Azure Storage Account is always replicated to ensure durability and high availability, meeting the Azure Storage SLA even in the face of transient hardware failures.</span></span>

<span data-ttu-id="8da91-1403">Dado que Azure Storage mantiene de forma predeterminada tres imágenes de los datos, no se precisan RAID5 o RAID1 en varios discos de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1403">Since Azure Storage is keeping three images of the data by default, RAID5 or RAID1 across multiple Azure disks are not necessary.</span></span>

<span data-ttu-id="8da91-1404">Se pueden encontrar más detalles en este artículo: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span><span class="sxs-lookup"><span data-stu-id="8da91-1404">More details can be found in this article: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span></span>

#### <a name="utilizing-azure-infrastructure-vm-restart-to-achieve-higher-availability-of-sap-applications"></a><span data-ttu-id="8da91-1405">Utilización del reinicio de VM de la infraestructura de Azure para lograr una "mayor disponibilidad" de las aplicaciones de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1405">Utilizing Azure Infrastructure VM Restart to Achieve “Higher Availability” of SAP Applications</span></span>
<span data-ttu-id="8da91-1406">Si decide no utilizar funcionalidades como los clústeres de conmutación por error de Windows Server (WSFC) o Pacemaker en Linux (compatible actualmente solo para SLES 12 y versiones posteriores), el reinicio de VM de Azure se utiliza para proteger un sistema SAP contra el tiempo de inactividad, ya esté planeado o no, de la infraestructura de servidores físicos de Azure y la plataforma Azure global subyacente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1406">If you decide not to use functionalities like Windows Server Failover Clustering (WSFC) or Pacemaker on Linux (currently only supported for SLES 12 and higher), Azure VM Restart is utilized to protect an SAP System against planned and unplanned downtime of the Azure physical server infrastructure and overall underlying Azure platform.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-1407">Es importante mencionar que el reinicio de VM de Azure protege principalmente las máquinas virtuales, pero NO las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-1407">It is important to mention that Azure VM Restart primarily protects VMs and NOT applications.</span></span> <span data-ttu-id="8da91-1408">El reinicio de VM no ofrece una alta disponibilidad en las aplicaciones de SAP, pero sí un cierto grado de disponibilidad de la infraestructura y, por tanto, ofrece indirectamente una "mayor disponibilidad" de los sistemas SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1408">VM Restart does not offer high availability for SAP applications, but it does offer a certain level of infrastructure availability and therefore indirectly “higher availability” of SAP systems.</span></span> <span data-ttu-id="8da91-1409">Tampoco hay ningún acuerdo de nivel de servicio para el tiempo que se tarda en reiniciar una máquina virtual después de una interrupción del host planeada o no planeada.</span><span class="sxs-lookup"><span data-stu-id="8da91-1409">There is also no SLA for the time it will take to restart a VM after a planned or unplanned host outage.</span></span> <span data-ttu-id="8da91-1410">Por lo tanto, este método de "alta disponibilidad" no es adecuado para los componentes esenciales de un sistema SAP como (A)SCS o DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1410">Therefore, this method of ‘high availability’ is not suitable for critical components of an SAP system like (A)SCS or DBMS.</span></span>
>
>

<span data-ttu-id="8da91-1411">El almacenamiento es otro elemento infraestructural importante para la alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-1411">Another important infrastructure element for high availability is storage.</span></span> <span data-ttu-id="8da91-1412">Por ejemplo, el contrato de nivel de servicio de Azure Storage presenta una disponibilidad del 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="8da91-1412">For example Azure Storage SLA is 99,9 % availability.</span></span> <span data-ttu-id="8da91-1413">Si se implementan todas las máquinas virtuales con sus discos en una sola cuenta de almacenamiento de Azure, la eventual indisponibilidad del almacenamiento de Azure ocasionará que no estén disponibles ninguna de las máquinas virtuales ubicadas en dicha cuenta de almacenamiento ni tampoco los componentes de SAP que se ejecutan dentro de esas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1413">If one deploys all VMs with its disks into a single Azure Storage Account, potential Azure Storage unavailability will cause unavailability of all VMs that are placed in that Azure Storage Account, and also all SAP components running inside of those VMs.</span></span>  

<span data-ttu-id="8da91-1414">En lugar de colocar todas las máquinas virtuales en una sola cuenta de almacenamiento de Azure, también puede usar cuentas de almacenamiento dedicadas para cada máquina virtual y, de esta manera, aumentar la disponibilidad general de las aplicaciones de SAP al usar varias cuentas de almacenamiento de Azure independientes.</span><span class="sxs-lookup"><span data-stu-id="8da91-1414">Instead of putting all VMs into one single Azure Storage Account, you can also use dedicated storage accounts for each VM, and in this way increase overall VM and SAP application availability by using multiple independent Azure Storage Accounts.</span></span>

<span data-ttu-id="8da91-1415">Los discos de Azure Managed Disks se colocan automáticamente en el dominio de error de la máquina virtual a la que están conectados.</span><span class="sxs-lookup"><span data-stu-id="8da91-1415">Azure Managed Disks are automatically placed in the Fault Domain of the virtual machine they are attached to.</span></span> <span data-ttu-id="8da91-1416">Si coloca dos máquinas virtuales en un conjunto de disponibilidad y usa discos de Managed Disks, la plataforma también se encargará de distribuir estos discos a los diferentes dominios de error.</span><span class="sxs-lookup"><span data-stu-id="8da91-1416">If you place two virtual machines in an availability set and use Managed Disks, the platform will take care of distributing the Managed Disks into different Fault Domains as well.</span></span> <span data-ttu-id="8da91-1417">Si pretende usar Premium Storage, se recomienda encarecidamente utilizar también discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1417">If you plan to use Premium Storage, we highly recommend using Manage Disks as well.</span></span>

<span data-ttu-id="8da91-1418">La arquitectura de ejemplo de un sistema SAP NetWeaver que utilice la alta disponibilidad de la infraestructura de Azure y las cuentas de almacenamiento podría ser como esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-1418">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and storage accounts could look like this:</span></span>

![Utilización de la alta disponibilidad de la infraestructura de Azure para lograr una "mayor" disponibilidad de las aplicaciones de SAP][planning-guide-figure-2900]

<span data-ttu-id="8da91-1420">La arquitectura de ejemplo de un sistema SAP NetWeaver que utilice la alta disponibilidad de la infraestructura de Azure y los discos de Managed Disks podría ser como esta:</span><span class="sxs-lookup"><span data-stu-id="8da91-1420">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and Managed Disks could look like this:</span></span>

![Utilización de la alta disponibilidad de la infraestructura de Azure para lograr una "mayor" disponibilidad de las aplicaciones de SAP][planning-guide-figure-2901]

<span data-ttu-id="8da91-1422">Hasta la fecha, en los componentes esenciales de SAP se ha conseguido lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8da91-1422">For critical SAP components we achieved the following so far:</span></span>

* <span data-ttu-id="8da91-1423">Alta disponibilidad de los servidores de aplicaciones (AS) de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1423">High Availability of SAP Application Servers (AS)</span></span>

  <span data-ttu-id="8da91-1424">Las instancias de los servidores de aplicaciones de SAP son componentes redundantes.</span><span class="sxs-lookup"><span data-stu-id="8da91-1424">SAP application server instances are redundant components.</span></span> <span data-ttu-id="8da91-1425">Cada instancia del servidor de aplicaciones de SAP se implementa en su propia máquina virtual, que se ejecuta en otro dominio de error y de actualización de Azure (consulte los capítulos [Dominios de error][planning-guide-3.2.1] y [Dominios de actualización][planning-guide-3.2.2]).</span><span class="sxs-lookup"><span data-stu-id="8da91-1425">Each SAP AS instance is deployed on its own VM, that is running in a different Azure Fault and Upgrade Domain (see chapters [Fault Domains][planning-guide-3.2.1] and [Upgrade Domains][planning-guide-3.2.2]).</span></span> <span data-ttu-id="8da91-1426">Esto se garantiza empleando conjuntos de disponibilidad de Azure (consulte el capítulo [Conjuntos de disponibilidad de Azure][planning-guide-3.2.3]).</span><span class="sxs-lookup"><span data-stu-id="8da91-1426">This is ensured by using Azure Availability Sets (see chapter [Azure Availability Sets][planning-guide-3.2.3]).</span></span> <span data-ttu-id="8da91-1427">La eventual indisponibilidad planeada o no de un dominio de error o de actualización de Azure hará que un número limitado de máquinas virtuales y sus respectivas instancias de SAP no estén disponibles.</span><span class="sxs-lookup"><span data-stu-id="8da91-1427">Potential planned or unplanned unavailability of an Azure Fault or Upgrade Domain will cause unavailability of a restricted number of VMs with their SAP AS instances.</span></span>

  <span data-ttu-id="8da91-1428">Cada instancia del servidor de aplicaciones de SAP se coloca en su propia cuenta de almacenamiento de Azure, por lo que la eventual indisponibilidad de una cuenta de almacenamiento de Azure hará que solo deje de estar disponible una máquina virtual y su respectiva instancia de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1428">Each SAP AS instance is placed in its own Azure Storage account – potential unavailability of one Azure Storage Account will cause unavailability of only one VM with its SAP AS instance.</span></span> <span data-ttu-id="8da91-1429">Sin embargo, tenga en cuenta que las suscripciones de Azure admiten un número de cuentas de almacenamiento de Azure limitado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1429">However, be aware that there is a limit of Azure Storage Accounts within one Azure subscription.</span></span> <span data-ttu-id="8da91-1430">Para garantizar el inicio automático de la instancia de (A)SCS después del reinicio de la máquina virtual, asegúrese de establecer el parámetro Autostart en el perfil de inicio de la instancia de (A)SCS como se indica en el capítulo [Uso de Autostart en las instancias de SAP][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="8da91-1430">To ensure automatic start of (A)SCS instance after the VM reboot, make sure to set the Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span>
  <span data-ttu-id="8da91-1431">Lea también el capítulo [Alta disponibilidad en los servidores de aplicaciones de SAP][planning-guide-11.4.1] para más información.</span><span class="sxs-lookup"><span data-stu-id="8da91-1431">Please also read chapter [High Availability for SAP Application Servers][planning-guide-11.4.1] for more details.</span></span>

  <span data-ttu-id="8da91-1432">Incluso si usa discos de Managed Disks, estos también se almacenan en una cuenta de Azure Storage y pueden no estar disponibles en caso de que se produzca alguna interrupción del almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1432">Even if you use Managed Disks, those disks are also stored in an Azure Storage Account and can be unavailable in an event of a storage outage.</span></span>

* <span data-ttu-id="8da91-1433">*Mayor* disponibilidad de la instancia de SAP (A)SCS</span><span class="sxs-lookup"><span data-stu-id="8da91-1433">*Higher* Availability of SAP (A)SCS instance</span></span>

  <span data-ttu-id="8da91-1434">Aquí se utiliza el reinicio de VM de Azure para proteger la máquina virtual con la instancia de SAP (A)SCS instalada.</span><span class="sxs-lookup"><span data-stu-id="8da91-1434">Here we utilize Azure VM Restart to protect the VM with installed SAP (A)SCS instance.</span></span> <span data-ttu-id="8da91-1435">En el caso de un tiempo de inactividad planeado o no de los servidores de Azure, las máquinas virtuales se reiniciarán en otro servidor disponible.</span><span class="sxs-lookup"><span data-stu-id="8da91-1435">In the case of planned or unplanned downtime of Azure severs, VMs will be restarted on another available server.</span></span> <span data-ttu-id="8da91-1436">Como se mencionó anteriormente, el reinicio de VM de Azure protege principalmente las máquinas virtuales, pero NO las aplicaciones (en este caso, la instancia de [A]SCS).</span><span class="sxs-lookup"><span data-stu-id="8da91-1436">As mentioned earlier, Azure VM Restart primarily protects VMs and NOT applications, in this case the (A)SCS instance.</span></span> <span data-ttu-id="8da91-1437">Mediante el reinicio de VM, se alcanza indirectamente una "mayor disponibilidad" de la instancia de SAP (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1437">Through the VM Restart we’ll reach indirectly “higher availability” of SAP (A)SCS instance.</span></span> <span data-ttu-id="8da91-1438">Para garantizar el inicio automático de la instancia de (A)SCS después del reinicio de la máquina virtual, asegúrese de establecer el parámetro Autostart en el perfil de inicio de la instancia de (A)SCS como se indica en el capítulo [Uso de Autostart en las instancias de SAP][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="8da91-1438">To insure automatic start of (A)SCS instance after the VM reboot, make sure to set Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span> <span data-ttu-id="8da91-1439">Esto significa que la instancia de (A)SCS como único punto de error (SPOF) que se ejecuta en una sola máquina virtual será el factor determinante para la disponibilidad de todo el entorno de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1439">This means the (A)SCS instance as a Single Point of Failure (SPOF) running in a single VM will be the determinative factor for the availability of the whole SAP landscape.</span></span>

* <span data-ttu-id="8da91-1440">*Mayor* disponibilidad del servidor de DBMS</span><span class="sxs-lookup"><span data-stu-id="8da91-1440">*Higher* Availability of DBMS Server</span></span>

  <span data-ttu-id="8da91-1441">Aquí, de forma similar al caso de uso de la instancia de SAP (A)SCS, se utiliza el reinicio de VM de Azure para proteger la máquina virtual con el software de DBMS instalado, y se alcanza una "mayor disponibilidad" del software de DBMS al reiniciar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1441">Here, similar to the SAP (A)SCS instance use case, we utilize Azure VM Restart to protect the VM with installed DBMS software, and we achieve “higher availability” of DBMS software through VM Restart.</span></span>
  <span data-ttu-id="8da91-1442">El DBMS que se ejecute en una sola máquina virtual también es un SPOF, por lo que es el factor determinante para la disponibilidad de todo el entorno de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1442">DBMS running in a single VM is also a SPOF, and it is the determinative factor for the availability of the whole SAP landscape.</span></span>

### <a name="sap-application-high-availability-on-azure-iaas"></a><span data-ttu-id="8da91-1443">Alta disponibilidad de las aplicaciones de SAP en IaaS de Azure</span><span class="sxs-lookup"><span data-stu-id="8da91-1443">SAP Application High Availability on Azure IaaS</span></span>
<span data-ttu-id="8da91-1444">Para alcanzar una alta disponibilidad total en el sistema SAP, se deben proteger todos los componentes esenciales del sistema SAP como, por ejemplo, los servidores de aplicaciones de SAP redundantes y los componentes únicos (por ejemplo, único punto de error) como la instancia de SAP (A)SCS y el DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1444">To achieve full SAP system high availability, we need to protect all critical SAP system components, for example redundant SAP application servers, and unique components (for example Single Point of Failure) like SAP (A)SCS instance and DBMS.</span></span>

#### <span data-ttu-id="8da91-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>Alta disponibilidad en los servidores de aplicaciones de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>High Availability for SAP Application Servers</span></span>
<span data-ttu-id="8da91-1446">Para las instancias de diálogo o de servidores de aplicaciones de SAP no hay que buscar una solución específica de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-1446">For the SAP application servers/dialog instances it’s not necessary to think about a specific high availability solution.</span></span> <span data-ttu-id="8da91-1447">La alta disponibilidad se consigue simplemente mediante la redundancia y, por tanto, disponiendo de la redundancia suficiente en las distintas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1447">High availability is simply achieved by redundancy and thereby having enough of them in different virtual machines.</span></span> <span data-ttu-id="8da91-1448">Todas se deben colocar en el mismo conjunto de disponibilidad de Azure para evitar la posibilidad de que las máquinas virtuales se actualicen al mismo tiempo durante el tiempo de inactividad planeado de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1448">They should all be placed in the same Azure Availability Set to avoid that the VMs might be updated at the same time during planned maintenance downtime.</span></span> <span data-ttu-id="8da91-1449">La funcionalidad básica que se basa en diversos dominios de actualización y de error dentro de una unidad de escalado de Azure ya se presentó en el capítulo [Dominios de actualización][planning-guide-3.2.2].</span><span class="sxs-lookup"><span data-stu-id="8da91-1449">The basic functionality which builds on different Upgrade and Fault Domains within an Azure Scale Unit was already introduced in chapter [Upgrade Domains][planning-guide-3.2.2].</span></span> <span data-ttu-id="8da91-1450">Los conjuntos de disponibilidad de Azure se presentaron en el capítulo [Conjuntos de disponibilidad de Azure][planning-guide-3.2.3] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1450">Azure Availability Sets were presented in chapter [Azure Availability Sets][planning-guide-3.2.3] of this document.</span></span>

<span data-ttu-id="8da91-1451">El número de dominios de error y de actualización que puede utilizar un conjunto de disponibilidad de Azure dentro de una unidad de escalado de Azure no es infinito.</span><span class="sxs-lookup"><span data-stu-id="8da91-1451">There is no infinite number of Fault and Upgrade Domains that can be used by an Azure Availability Set within an Azure Scale Unit.</span></span> <span data-ttu-id="8da91-1452">Esto significa que, al colocar un número de máquinas virtuales dentro de un conjunto de disponibilidad, tarde o temprano más de una máquina virtual acabará en el mismo dominio de error o de actualización.</span><span class="sxs-lookup"><span data-stu-id="8da91-1452">This means that putting a number of VMs into one Availability Set, sooner or later more than one VM ends up in the same Fault or Upgrade Domain.</span></span>

<span data-ttu-id="8da91-1453">Si se implementan unas cuantas instancias del servidor de aplicaciones de SAP en sus máquinas virtuales dedicadas y se parte de la base de que hay cinco dominios de actualización, al final se obtendrá la imagen siguiente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1453">Deploying a few SAP application server instances in their dedicated VMs and assuming that we got five Upgrade Domains, the following picture emerges at the end.</span></span> <span data-ttu-id="8da91-1454">El número máximo real de dominios de error y de actualización dentro de un conjunto de disponibilidad podría cambiar en el futuro:</span><span class="sxs-lookup"><span data-stu-id="8da91-1454">The actual max number of fault and update domains within an availability set might change in the future:</span></span>

![Alta disponibilidad de los servidores de aplicaciones de SAP en Azure][planning-guide-figure-3000]

<span data-ttu-id="8da91-1456">Se pueden encontrar más detalles en esta documentación: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1456">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-windows"></a><span data-ttu-id="8da91-1457">Alta disponibilidad en la instancia de SAP (A)SCS en Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1457">High Availability for the SAP (A)SCS instance on Windows</span></span>
<span data-ttu-id="8da91-1458">El clúster de conmutación por error de Windows Server (WSFC) es una solución que se usa con frecuencia para proteger la instancia de SAP (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1458">Windows Server Failover Cluster (WSFC) is a frequently used solution to protect the SAP (A)SCS instance.</span></span> <span data-ttu-id="8da91-1459">Además, está integrada en SAPInst como una "instalación de alta disponibilidad".</span><span class="sxs-lookup"><span data-stu-id="8da91-1459">It is also integrated into sapinst in form of an "HA installation".</span></span> <span data-ttu-id="8da91-1460">En estos momentos, la infraestructura de Azure no puede proporcionar la funcionalidad necesaria para configurar el clúster de conmutación por error de Windows Server del mismo modo que en el entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1460">At this point in time the Azure infrastructure is not able to provide the functionality to set up the required Windows Server Failover Cluster the same way as it's done on-premises.</span></span>

<span data-ttu-id="8da91-1461">Desde enero de 2016, la plataforma en la nube de Azure que se ejecuta en el sistema operativo Windows no permite usar un volumen compartido de clúster en un disco compartido entre dos máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1461">As of January 2016 the Azure cloud platform running the Windows operating system does not provide the possibility of using a cluster shared volume on a disk shared between two Azure VMs.</span></span>

<span data-ttu-id="8da91-1462">Sin embargo, hay una solución válida que consiste en usar un software de terceros que proporcione un volumen compartido mediante la replicación sincrónica y transparente del disco y que se pueda integrar en el WSFC.</span><span class="sxs-lookup"><span data-stu-id="8da91-1462">A valid solution though is the usage of 3rd-party software which provides a shared volume by synchronous and transparent disk replication which can be integrated into WSFC.</span></span> <span data-ttu-id="8da91-1463">Este método implica que solo el nodo de clúster activo podrá acceder a una de las copias del disco en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1463">This approach implies that only the active cluster node is able to access one of the disk copies at a point in time.</span></span> <span data-ttu-id="8da91-1464">Desde enero de 2016, se admite esta configuración de alta disponibilidad para proteger la instancia de SAP (A)SCS en el SO invitado Windows en máquinas virtuales de Azure en combinación con el software de terceros SIOS DataKeeper.</span><span class="sxs-lookup"><span data-stu-id="8da91-1464">As of January 2016 this HA configuration is supported to protect the SAP (A)SCS instance on Windows guest OS on Azure VMs in combination with 3rd-party software SIOS DataKeeper.</span></span>

<span data-ttu-id="8da91-1465">La solución SIOS DataKeeper proporciona un clúster de disco compartido para los clústeres de conmutación por error de Windows si se reúnen las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-1465">The SIOS DataKeeper solution provides a shared disk cluster resource to Windows Failover Clusters by having:</span></span>

* <span data-ttu-id="8da91-1466">Un VHD de Azure adicional conectado a cada una de las máquinas virtuales (VM) que se encuentran en una configuración de clúster de Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-1466">An additional Azure VHD attached to each of the virtual machines (VMs) that are in a Windows Cluster configuration</span></span>
* <span data-ttu-id="8da91-1467">SIOS DataKeeper Cluster Edition debe ejecutarse en ambos nodos de VM.</span><span class="sxs-lookup"><span data-stu-id="8da91-1467">SIOS DataKeeper Cluster Edition running on both VM nodes</span></span>
* <span data-ttu-id="8da91-1468">SIOS DataKeeper Cluster Edition debe estar configurado de forma que refleje de forma sincrónica el contenido del volumen del VHD adicional conectado procedente de las máquinas virtuales de origen en el volumen del VHD adicional conectado a la máquina virtual de destino.</span><span class="sxs-lookup"><span data-stu-id="8da91-1468">Having SIOS DataKeeper Cluster Edition configured in a way that it synchronously mirrors the content of the additional VHD attached volume from source VMs to additional VHD attached volume of target VM.</span></span>
* <span data-ttu-id="8da91-1469">SIOS DataKeeper debe abstraer los volúmenes locales de origen y de destino presentarlos en el clúster de conmutación por error de Windows como un único disco compartido.</span><span class="sxs-lookup"><span data-stu-id="8da91-1469">SIOS DataKeeper is abstracting the source and target local volumes and presenting them to Windows Failover Cluster as a single shared disk.</span></span>

<span data-ttu-id="8da91-1470">Se pueden encontrar todos los detalles sobre cómo instalar un clúster de conmutación por error de Windows con SIOS Datakeeper y SAP en las notas del producto [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] (Agrupación en clústeres de una instancias de SAP ASCS usando el clúster de conmutación por error de Windows Server en Azure con SIOS DataKeeper).</span><span class="sxs-lookup"><span data-stu-id="8da91-1470">You can find all details on how to install a Windows Failover Cluster with SIOS DataKeeper and SAP in the [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] white paper.</span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-linux"></a><span data-ttu-id="8da91-1471">Alta disponibilidad en la instancia de SAP (A)SCS en Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1471">High Availability for the SAP (A)SCS instance on Linux</span></span>
<span data-ttu-id="8da91-1472">Desde diciembre de 2015, tampoco hay ningún equivalente para WSFC de disco compartido para las máquinas virtuales de Linux en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1472">As of Dec 2015 there is also no equivalent to shared disk WSFC for Linux VMs on Azure.</span></span> <span data-ttu-id="8da91-1473">Las soluciones alternativas mediante software de terceros como SIOS para Windows aún no están validadas para que se en ejecuten en SAP en Linux con Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1473">Alternative solutions using 3rd-party software like SIOS for Windows are not validated yet for running SAP on Linux on Azure.</span></span>

#### <a name="high-availability-for-the-sap-database-instance"></a><span data-ttu-id="8da91-1474">Alta disponibilidad en la instancia de base de datos de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1474">High Availability for the SAP database instance</span></span>
<span data-ttu-id="8da91-1475">La configuración típica de alta disponibilidad del DBMS de SAP se basa en dos máquinas virtuales de DBMS donde la funcionalidad de alta disponibilidad del DBMS se utiliza para replicar datos de la instancia activa del DBMS a la segunda máquina virtual en una instancia pasiva del DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1475">The typical SAP DBMS HA setup is based on two DBMS VMs where DBMS high-availability functionality is used to replicate data from the active DBMS instance to the second VM into a passive DBMS instance.</span></span>

<span data-ttu-id="8da91-1476">La funcionalidad de recuperación ante desastres y de alta disponibilidad del DBMS en general, así como de los DBMS específicos, se describe en la [Guía de implementación de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1476">High Availability and Disaster recovery functionality for DBMS in general as well as specific DBMS are described in the [DBMS Deployment Guide][dbms-guide].</span></span>

#### <a name="end-to-end-high-availability-for-the-complete-sap-system"></a><span data-ttu-id="8da91-1477">Alta disponibilidad de un extremo a otro en todo el sistema SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1477">End-to-End High Availability for the Complete SAP System</span></span>
<span data-ttu-id="8da91-1478">A continuación, se ofrecen dos ejemplos de una arquitectura completa de alta disponibilidad de SAP NetWeaver en Azure: una para Windows y otra para Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-1478">Here are two examples of a complete SAP NetWeaver HA architecture in Azure - one for Windows and one for Linux.</span></span>

<span data-ttu-id="8da91-1479">Solo discos no administrados: es posible que se deba cuestionar la siguiente explicación de los conceptos cuando se implementen muchos sistemas SAP y que el número de máquinas virtuales implementadas supere el límite máximo de cuentas de almacenamiento por suscripción.</span><span class="sxs-lookup"><span data-stu-id="8da91-1479">Unmanaged disks only: The concepts as explained below may need to be compromised a bit when you deploy many SAP systems and the number of VMs deployed are exceeding the maximum limit of Storage Accounts per subscription.</span></span> <span data-ttu-id="8da91-1480">En tales casos, se deben combinar los VHD de las máquinas virtuales dentro de una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1480">In such cases, VHDs of VMs need to be combined within one Storage Account.</span></span> <span data-ttu-id="8da91-1481">Normalmente, este procedimiento se llevaría a cabo combinando los VHD de las máquinas virtuales de la capa de aplicación de SAP en diversos sistemas SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1481">Usually you would do so by combining VHDs of SAP application layer VMs of different SAP systems.</span></span>  <span data-ttu-id="8da91-1482">También se combinan varios VHD de diversas máquinas virtuales del DBMS de sistemas SAP distintos en una sola cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1482">We also combined different VHDs of different DBMS VMs of different SAP systems in one Azure Storage Account.</span></span> <span data-ttu-id="8da91-1483">Por lo tanto, teniendo en cuenta los límites de E/S por segundo de cuentas de Azure Storage (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>).</span><span class="sxs-lookup"><span data-stu-id="8da91-1483">Thereby keeping the IOPS limits of Azure Storage Accounts in mind (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>)</span></span>


##### <a name="windowslogowindows-ha-on-windows"></a>![Windows][Logo_Windows] <span data-ttu-id="8da91-1485">Alta disponibilidad en Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1485">HA on Windows</span></span>
![Arquitectura de alta disponibilidad de las aplicaciones de SAP NetWeaver con SQL Server en IaaS de Azure][planning-guide-figure-3200]

<span data-ttu-id="8da91-1487">Las siguientes construcciones de Azure se utilizan en el sistema SAP NetWeaver para minimizar el impacto causado por problemas de infraestructura y la aplicación de revisiones en el host:</span><span class="sxs-lookup"><span data-stu-id="8da91-1487">The following Azure constructs are used for the SAP NetWeaver system, to minimize impact by infrastructure issues and host patching:</span></span>

* <span data-ttu-id="8da91-1488">El sistema completo se implementa en Azure (obligatorio: la capa del DBMS, la instancia de [A]SCS y la capa de aplicación completa deben ejecutarse en la misma ubicación).</span><span class="sxs-lookup"><span data-stu-id="8da91-1488">The complete system is deployed on Azure (required - DBMS layer, (A)SCS instance and complete application layer need to run in the same location).</span></span>
* <span data-ttu-id="8da91-1489">El sistema se ejecuta completamente dentro de una suscripción de Azure (obligatorio).</span><span class="sxs-lookup"><span data-stu-id="8da91-1489">The complete system runs within one Azure subscription (required).</span></span>
* <span data-ttu-id="8da91-1490">El sistema se ejecuta completamente dentro de una red virtual de Azure (obligatorio).</span><span class="sxs-lookup"><span data-stu-id="8da91-1490">The complete system runs within one Azure Virtual Network (required).</span></span>
* <span data-ttu-id="8da91-1491">Las máquinas virtuales de un sistema SAP se pueden dividir en tres conjuntos de disponibilidad aunque todas las máquinas virtuales pertenezcan a la misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1491">The separation of the VMs of one SAP system into three Availability Sets is possible even with all the VMs belonging to the same Virtual Network.</span></span>
* <span data-ttu-id="8da91-1492">Todas las máquinas virtuales que ejecutan instancias del DBMS de un sistema SAP se encuentran en un único conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-1492">All VMs running DBMS instances of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="8da91-1493">Se presupone que hay más de una máquina virtual que ejecuta instancias del DBMS por sistema, ya que se utilizan características nativas de alta disponibilidad del DBMS como SQL Server AlwaysOn u Oracle Data Guard.</span><span class="sxs-lookup"><span data-stu-id="8da91-1493">We assume that there is more than one VM running DBMS instances per system since native DBMS high availability features are used, like SQL Server AlwaysOn or Oracle Data Guard.</span></span>
* <span data-ttu-id="8da91-1494">Todas las máquinas virtuales que ejecutan instancias del DBMS utilizan su propia cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1494">All VMs running DBMS instances use their own storage account.</span></span> <span data-ttu-id="8da91-1495">Los archivos de registro y datos del DBMS se replican desde una cuenta de almacenamiento a otra mediante funciones de alta disponibilidad del DBMS que sincronizan los datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1495">DBMS data and log files are replicated from one storage account to another storage account using DBMS high availability functions that synchronize the data.</span></span> <span data-ttu-id="8da91-1496">La indisponibilidad de una cuenta de almacenamiento ocasionará que uno de los nodos de clúster de SQL de Windows deje de estar disponible, pero no el servicio de SQL Server al completo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1496">Unavailability of one storage account will cause unavailability of one SQL Windows cluster node, but not the whole SQL Server service.</span></span>
* <span data-ttu-id="8da91-1497">Todas las máquinas virtuales que ejecutan la instancia de (A)SCS de un sistema SAP se encuentran en un único conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-1497">All VMs running (A)SCS instance of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="8da91-1498">Un clúster de conmutación por error de Windows Server (WSFC) se configura dentro de las máquinas virtuales para proteger la instancia de (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1498">A Windows Server Failover Cluster (WSFC) is configured inside of those VMs to protect the (A)SCS instance.</span></span>
* <span data-ttu-id="8da91-1499">Todas las máquinas virtuales que ejecutan instancias de (A)SCS utilizan su propia cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1499">All VMs running (A)SCS instances use their own storage account.</span></span> <span data-ttu-id="8da91-1500">Los archivos de la instancia de (A)SCS y la carpeta global de SAP se replican de una cuenta de almacenamiento a otra mediante la replicación de SIOS DataKeeper.</span><span class="sxs-lookup"><span data-stu-id="8da91-1500">(A)SCS instance files and SAP global folder are replicated from one storage account to another storage account using SIOS DataKeeper replication.</span></span> <span data-ttu-id="8da91-1501">La indisponibilidad de una cuenta de almacenamiento ocasionará que uno de los nodos de clúster de (A)SCS de Windows deje de estar disponible, pero no el servicio de (A)SCS al completo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1501">Unavailability of one storage account will cause unavailability of one (A)SCS Windows cluster node, but not the whole (A)SCS service.</span></span>
* <span data-ttu-id="8da91-1502">TODAS las máquinas virtuales que representa la capa del servidor de aplicaciones de SAP se encuentran en un tercer conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="8da91-1502">ALL the VMs representing the SAP application server layer are in a third Availability Set.</span></span>
* <span data-ttu-id="8da91-1503">TODAS las máquinas virtuales que ejecutan servidores de aplicaciones de SAP usan su propia cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1503">ALL the VMs running SAP application servers use their own storage account.</span></span> <span data-ttu-id="8da91-1504">La indisponibilidad de una cuenta de almacenamiento ocasionará que un servidor de aplicaciones de SAP deje de estar disponible, mientras que el resto de los servidores de aplicaciones de SAP continuarán ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="8da91-1504">Unavailability of one storage account will cause unavailability of one SAP application server, where other SAP AS continue to run.</span></span>

<span data-ttu-id="8da91-1505">En la siguiente figura se ilustra el mismo entorno con la utilización de discos de Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1505">The following figure illustrated the same landscape using Managed Disks.</span></span>

![Arquitectura de alta disponibilidad de las aplicaciones de SAP NetWeaver con SQL Server en IaaS de Azure][planning-guide-figure-3201]

##### <a name="linuxlogolinux-ha-on-linux"></a>![Linux][Logo_Linux] <span data-ttu-id="8da91-1508">Alta disponibilidad en Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1508">HA on Linux</span></span>
<span data-ttu-id="8da91-1509">La arquitectura de alta disponibilidad de SAP en Linux en Azure es básicamente la misma que la descrita anteriormente para Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-1509">The architecture for SAP HA on Linux on Azure is basically the same as for Windows as described above.</span></span> <span data-ttu-id="8da91-1510">Desde enero de 2016, no hay ninguna solución de alta disponibilidad de SAP (A)SCS compatible con Linux en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1510">As of Jan 2016 there is no SAP (A)SCS HA solution supported yet on Linux on Azure</span></span>

<span data-ttu-id="8da91-1511">Como consecuencia, desde enero de 2016, un sistema SAP-Linux-Azure no puede alcanzar la misma disponibilidad que un sistema SAP-Windows-Azure debido a falta de alta disponibilidad en la instancia de (A)SCS y en la base de datos de SAP ASE de una sola instancia.</span><span class="sxs-lookup"><span data-stu-id="8da91-1511">As a consequence as of January 2016 an SAP-Linux-Azure system cannot achieve the same availability as an SAP-Windows-Azure system because of missing HA for the (A)SCS instance and the single-instance SAP ASE database.</span></span>

### <span data-ttu-id="8da91-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Uso de Autostart en las instancias de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Using Autostart for SAP instances</span></span>
<span data-ttu-id="8da91-1513">SAP ofrecía una funcionalidad para iniciar las instancias de SAP inmediatamente después de iniciar el sistema operativo en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1513">SAP offered the functionality to start SAP instances immediately after the start of the OS within the VM.</span></span> <span data-ttu-id="8da91-1514">Los pasos exactos están documentados en el artículo de Knowledge Base sobre SAP [1909114].</span><span class="sxs-lookup"><span data-stu-id="8da91-1514">The exact steps were documented in SAP Knowledge Base Article [1909114].</span></span> <span data-ttu-id="8da91-1515">Sin embargo, SAP recomienda dejar de utilizar esta configuración, ya que no hay ningún control del orden en el que se reinicia la instancia en el caso de que se vean afectadas más de una máquina virtual o que se ejecuten varias instancias por máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1515">However, SAP is not recommending to use the setting anymore because there is no control in the order of instance restarts, assuming more than one VM got affected or multiple instances ran per VM.</span></span> <span data-ttu-id="8da91-1516">Si se presupone un escenario de Azure típico de una instancia del servidor de aplicaciones de SAP en una máquina virtual y la circunstancia de que solo acabe reiniciándose una sola máquina virtual, Autostart no planteará ningún verdadero problema, por lo que podrá habilitarse agregando este parámetro:</span><span class="sxs-lookup"><span data-stu-id="8da91-1516">Assuming a typical Azure scenario of one SAP application server instance in a VM and the case of a single VM eventually getting restarted, the Autostart is not really critical and can be enabled by adding this parameter:</span></span>

    Autostart = 1

<span data-ttu-id="8da91-1517">Se debe agregar en el perfil de inicio de la instancia de ABAP o Java de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1517">Into the start profile of the SAP ABAP and/or Java instance.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-1518">El parámetro Autostart también puede presentar algunas deficiencias.</span><span class="sxs-lookup"><span data-stu-id="8da91-1518">The Autostart parameter can have some downfalls as well.</span></span> <span data-ttu-id="8da91-1519">Concretamente, este parámetro desencadena el inicio de una instancia de Java o ABAP de SAP cuando se inicia el servicio de Windows/Linux relacionado de la instancia.</span><span class="sxs-lookup"><span data-stu-id="8da91-1519">In more detail, the parameter triggers the start of an SAP ABAP or Java instance when the related Windows/Linux service of the instance is started.</span></span> <span data-ttu-id="8da91-1520">No cabe duda de que esto es lo que sucede cuando se inicia el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1520">That certainly is the case when the operating system boots up.</span></span> <span data-ttu-id="8da91-1521">Sin embargo, los reinicios de los servicios de SAP también son frecuentes en la funcionalidad de administración del ciclo de vida de software de SAP como SUM u otras actualizaciones o modificaciones.</span><span class="sxs-lookup"><span data-stu-id="8da91-1521">However, restarts of SAP services are also a common thing for SAP Software Lifecycle Management functionality like SUM or other updates or upgrades.</span></span> <span data-ttu-id="8da91-1522">Estas funcionalidades no esperan en absoluto que una instancia se reinicie automáticamente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1522">These functionalities are not expecting an instance to be restarted automatically at all.</span></span> <span data-ttu-id="8da91-1523">Por lo tanto, se debe deshabilitar el parámetro Autostart antes de ejecutar tales tareas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1523">Therefore, the Autostart parameter should be disabled before running such tasks.</span></span> <span data-ttu-id="8da91-1524">El parámetro Autostart tampoco debe usarse en las instancias de SAP agrupadas en clústeres como ASCS, SCS o CI.</span><span class="sxs-lookup"><span data-stu-id="8da91-1524">The Autostart parameter also should not be used for SAP instances that are clustered, like ASCS/SCS/CI.</span></span>
>
>

<span data-ttu-id="8da91-1525">Se puede consultar más información sobre el inicio automático de las instancias de SAP aquí:</span><span class="sxs-lookup"><span data-stu-id="8da91-1525">See additional information regarding autostart for SAP instances here:</span></span>

* [<span data-ttu-id="8da91-1526">Start/Stop SAP along with your Unix Server Start/Stop (Inicio/detención de SAP al iniciar/detener el servidor de Unix)</span><span class="sxs-lookup"><span data-stu-id="8da91-1526">Start/Stop SAP along with your Unix Server Start/Stop</span></span>](http://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop)
* [<span data-ttu-id="8da91-1527">Starting and Stopping SAP NetWeaver Management Agents (Inicio y detención de los agentes de administración de SAP NetWeaver)</span><span class="sxs-lookup"><span data-stu-id="8da91-1527">Starting and Stopping SAP NetWeaver Management Agents</span></span>](https://help.sap.com/saphelp_nwpi711/helpdata/en/49/9a15525b20423ee10000000a421938/content.htm)
* [<span data-ttu-id="8da91-1528">How to enable auto Start of HANA Database (Habilitación del inicio automático de la base de datos HANA)</span><span class="sxs-lookup"><span data-stu-id="8da91-1528">How to enable auto Start of HANA Database</span></span>](http://www.freehanatutorials.com/2012/10/how-to-enable-auto-start-of-hana.html)

### <a name="larger-3-tier-sap-systems"></a><span data-ttu-id="8da91-1529">Sistemas SAP de tres niveles más grandes</span><span class="sxs-lookup"><span data-stu-id="8da91-1529">Larger 3-Tier SAP systems</span></span>
<span data-ttu-id="8da91-1530">Los aspectos relativos a la alta disponibilidad de las configuraciones de SAP de tres niveles ya se comentaron en las secciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="8da91-1530">High-Availability aspects of 3-Tier SAP configurations got discussed in earlier sections already.</span></span> <span data-ttu-id="8da91-1531">¿Pero qué sucede con los sistemas en los que los requisitos del servidor del DBMS son demasiado grandes como para que este se encuentre en Azure, pero la capa de aplicación de SAP podría implementarse en Azure?</span><span class="sxs-lookup"><span data-stu-id="8da91-1531">But what about systems where the DBMS server requirements are too large to have it located in Azure, but the SAP application layer could be deployed into Azure?</span></span>

#### <a name="location-of-3-tier-sap-configurations"></a><span data-ttu-id="8da91-1532">Ubicación de las configuraciones de SAP de tres niveles</span><span class="sxs-lookup"><span data-stu-id="8da91-1532">Location of 3-Tier SAP configurations</span></span>
<span data-ttu-id="8da91-1533">No se puede dividir la propia capa de aplicación ni la aplicación y la capa del DBMS entre un sistema local y Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1533">It is not supported to split the application tier itself or the application and DBMS tier between on-premises and Azure.</span></span> <span data-ttu-id="8da91-1534">Un sistema SAP se debe implementar completamente en el entorno local O en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1534">An SAP system is either completely deployed on-premises OR in Azure.</span></span> <span data-ttu-id="8da91-1535">Tampoco se puede hacer que algunos de los servidores de aplicaciones se ejecuten en el entorno local y otros, en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1535">It is also not supported to have some of the application servers run on-premises and some others in Azure.</span></span> <span data-ttu-id="8da91-1536">Este es el punto de partida de esta exposición.</span><span class="sxs-lookup"><span data-stu-id="8da91-1536">That is the starting point of the discussion.</span></span> <span data-ttu-id="8da91-1537">Tampoco se permite implementar los componentes del DBMS de un sistema SAP y la capa del servidor de aplicaciones de SAP en dos regiones de Azure diferentes.</span><span class="sxs-lookup"><span data-stu-id="8da91-1537">We also are not supporting to have the DBMS components of an SAP system and the SAP application server layer deployed in two different Azure Regions.</span></span> <span data-ttu-id="8da91-1538">Por ejemplo, implementar DBMS en el oeste de EE. UU. y la capa de aplicación de SAP en el centro de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="8da91-1538">For example DBMS in West US and SAP application layer in Central US.</span></span> <span data-ttu-id="8da91-1539">El motivo para no admitir tales configuraciones es la sensibilidad a la latencia de la arquitectura de SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="8da91-1539">Reason for not supporting such configurations is the latency sensitivity of the SAP NetWeaver architecture.</span></span>

<span data-ttu-id="8da91-1540">Sin embargo, a lo largo del año pasado, unos asociados de centro de datos desarrollaron coubicaciones de las regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1540">However, over the course of last year data center partners developed co-locations to Azure Regions.</span></span> <span data-ttu-id="8da91-1541">Dichas coubicaciones suelen estar muy cerca de los centros de datos físicos de Azure de una región de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1541">These co-locations often are in very close proximity to the physical Azure data centers within an Azure Region.</span></span> <span data-ttu-id="8da91-1542">Esta reducida distancia y la conexión de los activos de la coubicación con Azure por medio de ExpressRoute pueden generar una latencia inferior a 2 ms.</span><span class="sxs-lookup"><span data-stu-id="8da91-1542">The short distance and connection of assets in the co-location through ExpressRoute into Azure can result in a latency that is less than 2ms.</span></span> <span data-ttu-id="8da91-1543">En tales casos, se puede localizar la capa del DBMS (incluidos la SAN o el NAS de almacenamiento) en esta coubicación y la capa de aplicación de SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1543">In such cases, to locate the DBMS layer (including storage SAN/NAS) in such a co-location and the SAP application layer in Azure is possible.</span></span> <span data-ttu-id="8da91-1544">Desde diciembre de 2015, ya no se realizan implementaciones de ese tipo.</span><span class="sxs-lookup"><span data-stu-id="8da91-1544">As of Dec 2015, we don’t have any deployments like that.</span></span> <span data-ttu-id="8da91-1545">No obstante, hay diversos clientes con implementaciones de aplicaciones distintas de SAP que siguen empleando tales métodos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1545">But different customers with non-SAP application deployments are using such approaches already.</span></span>

### <a name="offline-backup-of-sap-systems"></a><span data-ttu-id="8da91-1546">Copia de seguridad sin conexión de sistemas SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1546">Offline Backup of SAP systems</span></span>
<span data-ttu-id="8da91-1547">En función de la configuración de SAP elegida (de dos o de tres niveles) es posible que se deba realizar una copia de seguridad,</span><span class="sxs-lookup"><span data-stu-id="8da91-1547">Dependent on the SAP configuration chosen (2-Tier or 3-Tier) there could be a need to back up.</span></span> <span data-ttu-id="8da91-1548">tanto del contenido de la propia máquina virtual como de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1548">The content of the VM itself plus to have a backup of the database.</span></span> <span data-ttu-id="8da91-1549">Se espera que las copias de seguridad relacionadas con el DBMS se realicen mediante métodos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1549">The DBMS-related backups are expected to be done with database methods.</span></span> <span data-ttu-id="8da91-1550">Se puede encontrar una descripción detallada de las distintas bases de datos en la [Guía de implementación de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1550">A detailed description for the different databases, can be found in [DBMS Guide][dbms-guide].</span></span> <span data-ttu-id="8da91-1551">Por otro lado, se puede realizar una copia de seguridad sin conexión de los datos de SAP (incluido el contenido de la base de datos) tal y como se describe en esta sección o realizarla en línea como se describe en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="8da91-1551">On the other hand, the SAP data can be backed up in an offline manner (including the database content as well) as described in this section or online as described in the next section.</span></span>

<span data-ttu-id="8da91-1552">La copia de seguridad sin conexión requiere básicamente apagar la máquina virtual mediante Azure Portal, así como realizar una copia del disco de la VM base y de todos los discos conectados a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="8da91-1552">The offline backup would basically require a shutdown of the VM through the Azure portal and a copy of the base VM disk plus all attached disks to the VM.</span></span> <span data-ttu-id="8da91-1553">De este modo, se puede conservar una imagen de la VM y su disco asociado en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="8da91-1553">This would preserve a point in time image of the VM and its associated disk.</span></span> <span data-ttu-id="8da91-1554">Se recomienda copiar las "copias de seguridad" en otra cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1554">It is recommended to copy the ‘backups’ into a different Azure Storage Account.</span></span> <span data-ttu-id="8da91-1555">Por lo tanto, se aplicaría el procedimiento descrito en el capítulo [Copia de discos entre cuentas de Azure Storage][planning-guide-5.4.2] de este documento.</span><span class="sxs-lookup"><span data-stu-id="8da91-1555">Hence the procedure described in chapter [Copying disks between Azure Storage Accounts][planning-guide-5.4.2] of this document would apply.</span></span>
<span data-ttu-id="8da91-1556">Además del apagado mediante Azure Portal, también se puede hacer a través de PowerShell o la CLI, como se describe aquí: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1556">Besides the shutdown using the Azure portal one can also do it via Powershell or CLI as described here: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span></span>

<span data-ttu-id="8da91-1557">Para realizar una restauración a este estado, se debe eliminar la VM base, así como los discos originales y los discos montados de dicha VM; volver a copiar los discos guardados en la cuenta de almacenamiento original o el grupo de recursos de los discos de Managed Disks y, luego, volver a implementar el sistema.</span><span class="sxs-lookup"><span data-stu-id="8da91-1557">A restore of that state would consist of deleting the base VM as well as the original disks of the base VM and mounted disks, copying back the saved disks to the original Storage Account or resource group for managed disks and then redeploying the system.</span></span>
<span data-ttu-id="8da91-1558">En este artículo se muestra un ejemplo de cómo crear un script de este proceso en PowerShell: <http://www.westerndevs.com/azure-snapshots/>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1558">This article shows an example how to script this process in Powershell: <http://www.westerndevs.com/azure-snapshots/></span></span>

<span data-ttu-id="8da91-1559">Hay que asegurarse de instalar una nueva licencia de SAP, ya que al restaurar una copia de seguridad de la máquina virtual del modo descrito más arriba, se crea una clave de hardware.</span><span class="sxs-lookup"><span data-stu-id="8da91-1559">Please make sure to install a new SAP license since restoring a VM backup as described above creates a new hardware key.</span></span>

### <a name="online-backup-of-an-sap-system"></a><span data-ttu-id="8da91-1560">Copia de seguridad en línea de un sistema SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1560">Online backup of an SAP system</span></span>
<span data-ttu-id="8da91-1561">Las copias de seguridad de DBMS se realizan mediante métodos específicos para DBMS descritos en la [Guía de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1561">Backup of the DBMS is performed with DBMS-specific methods as described in the [DBMS Guide][dbms-guide].</span></span>

<span data-ttu-id="8da91-1562">Se puede efectuar una copa de seguridad de otras máquinas virtuales dentro del sistema SAP mediante la funcionalidad de copia de seguridad de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1562">Other VMs within the SAP system can be backed up using Azure Virtual Machine Backup functionality.</span></span> <span data-ttu-id="8da91-1563">Esta funcionalidad se introdujo a principios de 2015 y, desde entonces, es un método estándar para la realización de una copia de seguridad de una máquina virtual completa en Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1563">Azure Virtual Machine Backup got introduced early in 2015 and meanwhile is a standard method to back up a complete VM in Azure.</span></span> <span data-ttu-id="8da91-1564">La copia de seguridad de Azure almacena las copias de seguridad en Azure y permite volver a restaurarlas.</span><span class="sxs-lookup"><span data-stu-id="8da91-1564">Azure Backup stores the backups in Azure and allows a restore of a VM again.</span></span>

> [!NOTE]
> <span data-ttu-id="8da91-1565">Desde diciembre de 2015, la copia de seguridad de máquinas virtuales NO conserva el identificador único de VM que se utiliza para la concesión de licencias de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1565">As of Dec 2015 using VM Backup does NOT keep the unique VM ID which is used for SAP licensing.</span></span> <span data-ttu-id="8da91-1566">Esto significa que restaurar la copia de seguridad de una máquina virtual requiere instalar una clave de licencia de SAP nueva, ya que se considera que la máquina virtual restaurada es una máquina virtual nueva en lugar de una sustitución de la anterior que estaba guardada.</span><span class="sxs-lookup"><span data-stu-id="8da91-1566">This means that a restore from a VM backup requires installation of a new SAP license key as the restored VM is considered to be a new VM and not a replacement of the former one which was saved.</span></span>
>
> ![Windows][Logo_Windows] <span data-ttu-id="8da91-1568">Windows</span><span class="sxs-lookup"><span data-stu-id="8da91-1568">Windows</span></span>
>
> <span data-ttu-id="8da91-1569">Teóricamente, también se puede realizar una copia de seguridad de las máquinas virtuales que ejecutan bases de datos de forma coherente si el sistema de DBMS admite Windows VSS (Servicio de instantáneas de volumen <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>) como, por ejemplo, hace SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8da91-1569">Theoretically, VMs that run databases can be backed up in a consistent manner as well if the DBMS system supports the Windows VSS (Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>) as, for example, SQL Server does.</span></span>
> <span data-ttu-id="8da91-1570">Sin embargo, se debe tener en cuenta que no se pueden restaurar bases de datos en un momento dado a partir de las copias de seguridad de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1570">However, be aware that based on Azure VM backups point-in-time restores of databases are not possible.</span></span> <span data-ttu-id="8da91-1571">Por lo tanto, se recomienda realizar copias de seguridad de las bases de datos con la funcionalidad del DBMS en lugar de confiar en la copia de seguridad de máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="8da91-1571">Therefore, the recommendation is to perform backups of databases with DBMS functionality instead of relying on Azure VM Backup.</span></span>
>
> <span data-ttu-id="8da91-1572">Para familiarizarse con la Copia de seguridad de la máquina virtual de Azure, comience aquí: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1572">To get familiar with Azure Virtual Machine Backup please start here: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span></span>
>
> <span data-ttu-id="8da91-1573">Otras posibilidades son usar una combinación del Microsoft Data Protection Manager instalado en una máquina virtual de Azure y la copia de seguridad de Azure para efectuar copias de seguridad o restaurar bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1573">Other possibilities are to use a combination of Microsoft Data Protection Manager installed in an Azure VM and Azure Backup to backup/restore databases.</span></span> <span data-ttu-id="8da91-1574">Se puede encontrar más información aquí: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1574">More information can be found here: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span></span>  
>
> ![Linux][Logo_Linux] <span data-ttu-id="8da91-1576">Linux</span><span class="sxs-lookup"><span data-stu-id="8da91-1576">Linux</span></span>
>
> <span data-ttu-id="8da91-1577">No hay ningún equivalente de Windows VSS en Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-1577">There is no equivalent to Windows VSS in Linux.</span></span> <span data-ttu-id="8da91-1578">Por lo tanto, solo se pueden realizar copias de seguridad coherentes con archivos, pero no copias de seguridad coherentes con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8da91-1578">Therefore only file-consistent backups are possible but not application-consistent backups.</span></span> <span data-ttu-id="8da91-1579">La copia de seguridad del DBMS de SAP se debe efectuar mediante la funcionalidad del DBMS.</span><span class="sxs-lookup"><span data-stu-id="8da91-1579">The SAP DBMS backup should be done using DBMS functionality.</span></span> <span data-ttu-id="8da91-1580">El sistema de archivos que incluye los datos relacionados con SAP se pueden guardar, por ejemplo, mediante tar, como se describe aquí: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1580">The file system which includes the SAP-related data can be saved, for example, using tar as described here: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span></span>
>
>

### <a name="azure-as-dr-site-for-production-sap-landscapes"></a><span data-ttu-id="8da91-1581">Azure como sitio de recuperación ante desastres para entornos de producción de SAP</span><span class="sxs-lookup"><span data-stu-id="8da91-1581">Azure as DR site for production SAP landscapes</span></span>
<span data-ttu-id="8da91-1582">Desde mediados de 2014, las extensiones de diversos componentes de Hyper-V, System Center y Azure permiten el uso de Azure como sitio de recuperación ante desastres para las máquinas virtuales basadas en Hyper-V que se ejecutan en el entorno local.</span><span class="sxs-lookup"><span data-stu-id="8da91-1582">Since Mid 2014, extensions to various components around Hyper-V, System Center and Azure enable the usage of Azure as DR site for VMs running on-premises based on Hyper-V.</span></span>

<span data-ttu-id="8da91-1583">Hay un blog en el que se detalla cómo implementar esta solución que se documenta aquí: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span><span class="sxs-lookup"><span data-stu-id="8da91-1583">A blog detailing how to deploy this solution is documented here: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span></span>

## <a name="summary"></a><span data-ttu-id="8da91-1584">Resumen</span><span class="sxs-lookup"><span data-stu-id="8da91-1584">Summary</span></span>
<span data-ttu-id="8da91-1585">Los aspectos más destacados de la alta disponibilidad en los sistemas SAP en Azure son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="8da91-1585">The key points of High Availability for SAP systems in Azure are:</span></span>

* <span data-ttu-id="8da91-1586">En estos momentos, el único punto de error de SAP no se puede proteger exactamente del mismo modo que en las implementaciones locales.</span><span class="sxs-lookup"><span data-stu-id="8da91-1586">At this point in time, the SAP single point of failure cannot be secured exactly the same way as it can be done in on-premises deployments.</span></span> <span data-ttu-id="8da91-1587">El motivo es que todavía no se pueden compilar clústeres de disco compartido en Azure sin recurrir a software de terceros.</span><span class="sxs-lookup"><span data-stu-id="8da91-1587">The reason is that Shared Disk clusters can’t yet be built in Azure without the use of 3rd party software.</span></span>
* <span data-ttu-id="8da91-1588">Para la capa del DBMS, se debe utilizar una funcionalidad del DBMS que no se basa en la tecnología de clúster de disco compartido.</span><span class="sxs-lookup"><span data-stu-id="8da91-1588">For the DBMS layer you need to use DBMS functionality that does not rely on shared disk cluster technology.</span></span> <span data-ttu-id="8da91-1589">Los detalles están documentados en la [Guía de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1589">Details are documented in the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="8da91-1590">Para minimizar el impacto de los problemas que se produzcan en los dominios de error sobre la infraestructura de Azure o el mantenimiento de hosts, se deben usar los conjuntos de disponibilidad de Azure:</span><span class="sxs-lookup"><span data-stu-id="8da91-1590">To minimize the impact of problems within Fault Domains in the Azure infrastructure or host maintenance, you should use Azure Availability Sets:</span></span>
  * <span data-ttu-id="8da91-1591">Se recomienda tener un conjunto de disponibilidad para la capa de aplicación de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1591">It is recommended to have one Availability Set for the SAP application layer.</span></span>
  * <span data-ttu-id="8da91-1592">Se recomienda tener un conjunto de disponibilidad independiente para la capa del DBMS de SAP.</span><span class="sxs-lookup"><span data-stu-id="8da91-1592">It is recommended to have a separate Availability Set for the SAP DBMS layer.</span></span>
  * <span data-ttu-id="8da91-1593">NO se recomienda aplicar el mismo conjunto de disponibilidad a las máquinas virtuales de sistemas SAP distintos.</span><span class="sxs-lookup"><span data-stu-id="8da91-1593">It is NOT recommended to apply the same Availability set for VMs of different SAP systems.</span></span>
  * <span data-ttu-id="8da91-1594">Se recomienda utilizar Premium Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="8da91-1594">It is recommended to use Premium Managed Disks.</span></span>
* <span data-ttu-id="8da91-1595">Para realizar copias de seguridad de la capa de DBMS de SAP, se debe consultar la [Guía de DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="8da91-1595">For Backup purposes of the SAP DBMS layer, please check the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="8da91-1596">No tiene mucho sentido efectuar una copia de seguridad de las instancias de diálogo de SAP, ya que volver a implementar instancias de diálogo sencillas suele ser un método más rápido.</span><span class="sxs-lookup"><span data-stu-id="8da91-1596">Backing up SAP Dialog instances makes little sense since it is usually faster to redeploy simple dialog instances.</span></span>
* <span data-ttu-id="8da91-1597">Por el contrario, sí que tiene sentido realizar una copia de seguridad de la máquina virtual que contiene el directorio global del sistema SAP y, con él, todos los perfiles de las distintas instancias, lo cual debe hacerse mediante las copias de seguridad de Windows o, por ejemplo, mediante tar en Linux.</span><span class="sxs-lookup"><span data-stu-id="8da91-1597">Backing up the VM which contains the global directory of the SAP system and with it all the profiles of the different instances, does make sense and should be performed with Windows Backup or, for example, tar on Linux.</span></span> <span data-ttu-id="8da91-1598">Dado que existen diferencias entre Windows Server 2008 (R2) y Windows Server 2012 (R2), pues las últimas versiones de Windows Server facilitan la realización de copias de seguridad, se recomienda ejecutar Windows Server 2012 (R2) como sistema operativo invitado Windows.</span><span class="sxs-lookup"><span data-stu-id="8da91-1598">Since there are differences between Windows Server 2008 (R2) and Windows Server 2012 (R2), which make it easier to back up using the more recent Windows Server releases, we recommend to run Windows Server 2012 (R2) as Windows guest operating system.</span></span>

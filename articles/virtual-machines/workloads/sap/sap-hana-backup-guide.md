---
title: "Guía de aaaBackup para SAP HANA en máquinas virtuales de Azure | Documentos de Microsoft"
description: "Guía de copia de seguridad para SAP HANA proporciona dos posibilidades de copia de seguridad principales para SAP HANA en Azure Virtual Machines"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="7c4bc-103">Guía de copia de seguridad de SAP HANA en Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="7c4bc-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="7c4bc-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="7c4bc-104">Getting Started</span></span>

<span data-ttu-id="7c4bc-105">manual de copia de seguridad de Hola para SAP HANA que se ejecutan en máquinas virtuales de Azure solo se describen los temas específicos de Azure.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="7c4bc-106">Para general SAP HANA copia de seguridad elementos relacionados, consulte la documentación de SAP HANA Hola (vea _documentación de copia de seguridad de SAP HANA_ más adelante en este artículo).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="7c4bc-107">enfoque de Hola de este artículo se encuentra en dos principales copia de seguridad posibilidades de SAP HANA en máquinas virtuales de Azure:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="7c4bc-108">Sistema de archivos de copia de seguridad toohello HANA en una máquina Virtual de Linux de Azure (consulte [SAP HANA Azure copia de seguridad en el nivel de archivo](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="7c4bc-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="7c4bc-109">Copia de seguridad HANA en función de las instantáneas de almacenamiento en función de instantánea de blob de almacenamiento de Azure de hello manualmente o servicio de copia de seguridad de Azure (consulte [copia de seguridad de SAP HANA basándose en instantáneas de almacenamiento](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="7c4bc-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="7c4bc-110">SAP HANA ofrece una API, lo que permite toointegrate de herramientas de copia de seguridad de terceros directamente con SAP HANA de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="7c4bc-111">(Que no está dentro del ámbito de Hola de esta guía.) No hay ninguna integración directa de SAP HANA con el servicio Azure Backup disponible actualmente basada en esta API.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="7c4bc-112">SAP HANA se admite oficialmente en el tipo de máquina virtual de Azure GS5 como instancia única con cargas de trabajo de tooOLAP de una restricción adicional (consulte [buscar plataformas de IaaS certificadas](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) en el sitio Web SAP de hello).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="7c4bc-113">En este artículo se actualizará a medida que estén disponibles nuevas ofertas para SAP HANA en Azure.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="7c4bc-114">También hay una solución híbrida de SAP HANA en Azure, donde SAP HANA ejecuta elementos no virtualizados en servidores físicos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="7c4bc-115">Sin embargo, esta guía de Azure Backup para SAP HANA cubre un entorno puro de Azure donde se ejecuta SAP HANA en una máquina virtual de Azure, no SAP HANA en &quot;instancias de gran tamaño.&quot; Vea [Introducción y arquitectura de SAP HANA en Azure (instancias grandes)](hana-overview-architecture.md) para obtener más información sobre esta solución de copia de seguridad en &quot;instancias grandes&quot; basada en instantáneas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="7c4bc-116">Puede obtener información general sobre productos SAP admitidos en Azure en la [nota 1928533 de SAP](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="7c4bc-117">Hello tres ilustraciones siguientes proporcionan una visión general del programa Hola a opciones de copia de seguridad de SAP HANA con las capacidades nativas de Azure actualmente y también muestran tres escenarios posibles de copia de seguridad futuras.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="7c4bc-118">artículos relacionados con Hello [SAP HANA Azure copia de seguridad en el nivel de archivo](sap-hana-backup-file-level.md) y [copia de seguridad de SAP HANA basándose en instantáneas de almacenamiento](sap-hana-backup-storage-snapshots.md) se describen estas opciones con más detalle, incluidas las consideraciones de tamaño y rendimiento para SAP Copias de seguridad HANA varios terabytes de tamaño.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Esta ilustración muestra dos posibilidades para guardar el estado actual de VM de Hola](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="7c4bc-120">Esta ilustración muestra la posibilidad de Hola de guardar Hola VM estado actual, ya sea a través del servicio de copia de seguridad de Azure o instantánea manual de los discos de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="7c4bc-121">Con este enfoque, una &#39; no tiene copias de seguridad de toomanage SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="7c4bc-122">desafío de Hola de escenario de instantánea de disco de hello es coherencia del sistema de archivos y el estado de disco coherentes con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="7c4bc-123">tema de coherencia de Hola se describe en la sección de hello _coherencia de datos de SAP HANA al tomar instantáneas de almacenamiento_ más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="7c4bc-124">Capacidades y las restricciones de las copias de seguridad de tooSAP HANA también se describen más adelante en este artículo relacionados con el servicio de copia de seguridad de Azure.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Esta ilustración muestra opciones para realizar un SAP HANA archivo de copia de seguridad dentro de hello VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="7c4bc-126">En esta ilustración se muestra opciones para realizar una copia de seguridad de archivos de SAP HANA dentro de hello VM y, a continuación, almacenarlos archivos de copia de seguridad de HANA en algún lugar else con herramientas diferentes.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="7c4bc-127">La realización de una copia de seguridad de HANA requiere más tiempo que una solución de copia de seguridad basada en instantáneas, pero tiene ventajas con respecto a la integridad y la coherencia.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="7c4bc-128">Se proporcionarán más detalles más tarde en este artículo.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-128">More details are provided later in this article.</span></span>

![Esta ilustración muestra un posible escenario futuro de copia de seguridad de SAP HANA](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="7c4bc-130">Esta ilustración muestra un posible escenario futuro de copia de seguridad de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="7c4bc-131">Si SAP HANA permitió realizar copias de seguridad desde una replicación secundaria, agregaría opciones adicionales para las estrategias de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="7c4bc-132">Actualmente no es posible según tooa post en hello SAP HANA Wiki:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="7c4bc-133">_&quot;¿Es posible tootake copias de seguridad lado secundario Hola?_</span><span class="sxs-lookup"><span data-stu-id="7c4bc-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="7c4bc-134">_No, actualmente solo puede tomar datos y copias de seguridad en el lado principal de Hola de registro. Si está habilitada la copia de seguridad de inicio de sesión automático, después de la adquisición toohello lado secundario, las copias de seguridad del registro de hello automáticamente se escribirán no existe.&quot;_</span><span class="sxs-lookup"><span data-stu-id="7c4bc-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="7c4bc-135">Recursos SAP para copia de seguridad de HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="7c4bc-136">Documentación de copia de seguridad de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="7c4bc-137">Introducción tooSAP HANA administración</span><span class="sxs-lookup"><span data-stu-id="7c4bc-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="7c4bc-138">Planeación de su estrategia de copia de seguridad y recuperación</span><span class="sxs-lookup"><span data-stu-id="7c4bc-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="7c4bc-139">Programación de la copia de seguridad de HANA mediante ABAP DBACOCKPIT</span><span class="sxs-lookup"><span data-stu-id="7c4bc-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="7c4bc-140">Programación de copias de seguridad de datos (SAP HANA Cockpit)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="7c4bc-141">Preguntas más frecuentes sobre la copia de seguridad de SAP HANA en la [nota 1642148 de SAP](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="7c4bc-142">Preguntas más frecuentes sobre las instantáneas de base de datos y almacenamiento en la [nota 2039883 de SAP](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="7c4bc-143">Sistemas de archivos de red no apropiados para la copia de seguridad y la recuperación en la [nota 1820529 de SAP](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="7c4bc-144">¿Por qué la copia de seguridad de SAP HANA?</span><span class="sxs-lookup"><span data-stu-id="7c4bc-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="7c4bc-145">Almacenamiento de Azure ofrece disponibilidad y confiabilidad fuera del cuadro de hello (vea [Introducción tooMicrosoft almacenamiento de Azure](../../../storage/common/storage-introduction.md) para obtener más información sobre el almacenamiento de Azure).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="7c4bc-146">Hola mínimo para &quot;copia de seguridad&quot; es toorely en hello SLA de Azure: Hola de mantener los archivos de registro y datos de SAP HANA en máquina virtual del servidor de SAP HANA discos duros virtuales de Azure toohello adjunto.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="7c4bc-147">Este enfoque trata sobre errores de la máquina virtual, pero no posibles datos de SAP HANA toohello de daños y archivos de registro o errores lógicos como eliminar archivos de datos o por accidente.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="7c4bc-148">Las copias de seguridad también son necesarias para el cumplimiento o por motivos legales.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="7c4bc-149">En resumen, las copias de seguridad de SAP HANA son siempre necesarias.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="7c4bc-150">La corrección de tooverify de copia de seguridad de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="7c4bc-151">Cuando se usan instantáneas de almacenamiento, se recomienda ejecutar una restauración de prueba en un sistema diferente.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="7c4bc-152">Este enfoque proporciona una tooensure de manera que una copia de seguridad es correcta e internos procesos de trabajo de copia de seguridad y restauración según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="7c4bc-153">Aunque esto es una importante obstáculo local, es mucho más fácil tooaccomplish en la nube de hello al proporcionar temporalmente los recursos necesarios para este propósito.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="7c4bc-154">Tenga en cuenta que realizar una restauración simple y comprobar si HANA está listo para empezar no es suficiente.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="7c4bc-155">Idealmente, uno debe ejecutar un toobe de comprobación de coherencia de tabla seguro de que esa base de datos de hello restaurado es correcto.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="7c4bc-156">SAP HANA ofrece varios tipos de comprobaciones de coherencia que se describen en la [nota 1977584 de SAP](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="7c4bc-157">También encontrará información sobre la comprobación de coherencia de tabla de hello en el sitio Web SAP de hello en [tabla y comprobaciones de coherencia de catálogo](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="7c4bc-158">Para las copias de seguridad de archivos estándar no es necesaria una restauración de prueba.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="7c4bc-159">Existen dos herramientas de SAP HANA que le ayudan a toocheck qué copia de seguridad se puede utilizar para restore: hdbbackupdiag y hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="7c4bc-160">Vea [Comprobación manual si una recuperación es posible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) para obtener más información sobre estas herramientas.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="7c4bc-161">Ventajas y desventajas de la copia de seguridad de HANA frente a instantáneas de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="7c4bc-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="7c4bc-162">SAP &#39; t dar preferencia tooeither HANA copia de seguridad frente a instantáneas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="7c4bc-163">Enumera sus ventajas y desventajas, por lo que uno puede determinar qué toouse según la situación de Hola y tecnología de almacenamiento disponible (vea [planear la copia de seguridad y la estrategia de recuperación](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="7c4bc-164">En Azure, tenga en cuenta el hecho de Hola Hola no de característica de instantánea de blob de Azure &#39; t garantizar la coherencia del sistema de archivos (vea [mediante instantáneas de blob con PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="7c4bc-165">Hola la siguiente sección, _coherencia de datos de SAP HANA al tomar instantáneas de almacenamiento_, se describen algunas consideraciones relacionadas con esta característica.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="7c4bc-166">Asimismo, uno tiene toounderstand Hola implicaciones de facturación cuando se trabaja con frecuencia con instantáneas de blob, como se describe en este artículo: [comprender cómo las instantáneas pueden incrementar los](/rest/api/storageservices/understanding-how-snapshots-accrue-charges): lo ejecutando &#39; t evidente como uso de Azure discos virtuales.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="7c4bc-167">Coherencia de datos de SAP HANA al tomar instantáneas de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="7c4bc-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="7c4bc-168">La coherencia del sistema de archivos y la aplicación es un problema complejo cuando se toman instantáneas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="7c4bc-169">problemas de tooavoid de manera más fáciles de Hello estaría tooshut hacia abajo de SAP HANA, o quizás incluso Hola todo el equipo virtual.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="7c4bc-170">El cierre puede ser factible con una demostración o prototipo, o incluso en un sistema de desarrollo, pero no es una opción para un sistema de producción.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="7c4bc-171">En Azure, uno tiene tookeep en cuenta que Hola no de característica de instantánea de blob de Azure &#39; t garantizar la coherencia del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="7c4bc-172">Funciona correctamente sin embargo, mediante el uso de hello SAP HANA instantánea característica, siempre que hay un único disco virtual implicados.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="7c4bc-173">Pero incluso con un solo disco, elementos adicionales tienen toobe activada.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="7c4bc-174">La [nota 2039883 de SAP](https://launchpad.support.sap.com/#/notes/2039883) dispone de información importante sobre las copias de seguridad de SAP HANA a través de instantáneas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="7c4bc-175">Por ejemplo, menciona que, con el sistema de archivos de hello XFS, es necesario toorun **xfs\_inmovilizar** antes de iniciar un almacenamiento de instantáneas tooguarantee coherencia (vea [xfs\_freeze(8) - man de Linux página](https://linux.die.net/man/8/xfs_freeze) para obtener más información sobre **xfs\_inmovilizar**).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="7c4bc-176">tema de Hola de coherencia pasa a ser incluso más complejo en un escenario donde un sistema de archivos de solo abarca varios discos o volúmenes.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="7c4bc-177">Por ejemplo, si utiliza mdadm o LVM, y fragmentación.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="7c4bc-178">Hola nota de SAP mencionadas anteriormente estados:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="7c4bc-179">_&quot;Pero tenga en cuenta que el sistema de almacenamiento de hello tenga coherencia tooguarantee E/S al crear una instantánea de almacenamiento por volumen de datos de SAP HANA, es decir, la toma de instantáneas de un volumen de datos específicos del servicio de SAP HANA debe ser una operación atómica.&quot;_</span><span class="sxs-lookup"><span data-stu-id="7c4bc-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="7c4bc-180">Suponiendo que existe un sistema de archivos XFS expansión cuatro discos virtuales de Azure, hello pasos siguientes proporcionan una instantánea coherente que representa el área de datos HANA hello:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="7c4bc-181">Preparación de la instantánea de HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="7c4bc-182">Inmovilizar el sistema de archivos de hello (por ejemplo, utilice **xfs\_inmovilizar**)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="7c4bc-183">Creación de todas las instantáneas de blob necesarias en Azure</span><span class="sxs-lookup"><span data-stu-id="7c4bc-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="7c4bc-184">Anular la inmovilización de sistema de archivos de Hola</span><span class="sxs-lookup"><span data-stu-id="7c4bc-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="7c4bc-185">Confirmar la instantánea HANA Hola</span><span class="sxs-lookup"><span data-stu-id="7c4bc-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="7c4bc-186">La recomendación es toouse Hola procedimiento anteriormente toobe de todos los casos en lado de hello seguro, con independencia de qué sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="7c4bc-187">O bien, si es un solo disco o una fragmentación, a través de mdadm o LVM en varios discos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="7c4bc-188">Es importante tooconfirm Hola HANA instantánea.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="7c4bc-189">Due toohello &quot;copia en escritura&quot; SAP HANA no pueden requerir espacio en disco adicional en este modo de preparación de instantánea.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="7c4bc-190">&#39; s también no es posible toostart nuevas copias de seguridad hasta que se confirma la instantánea de SAP HANA Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="7c4bc-191">Servicio de copia de seguridad de Azure usa tootake de extensiones de máquina virtual de Azure atención Hola coherencia del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="7c4bc-192">Estas extensiones de VM no están disponibles para el uso independiente.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="7c4bc-193">Aún una coherencia de SAP HANA toomanage.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="7c4bc-194">Consulte el artículo relacionado de hello [copia de seguridad de Azure de SAP HANA en el nivel de archivo](sap-hana-backup-file-level.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="7c4bc-195">Estrategia de programación de copia de seguridad de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="7c4bc-196">artículo de SAP HANA Hello [planear la copia de seguridad y la estrategia de recuperación](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) Estados a basic plan las copias de seguridad de toodo:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="7c4bc-197">Instantánea del almacenamiento (diaria)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="7c4bc-198">Copia de seguridad de datos completa con formato de archivo o backint (una vez a la semana)</span><span class="sxs-lookup"><span data-stu-id="7c4bc-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="7c4bc-199">Copias de seguridad de registro automáticas</span><span class="sxs-lookup"><span data-stu-id="7c4bc-199">Automatic log backups</span></span>

<span data-ttu-id="7c4bc-200">Opcionalmente, puede realizar el proceso completo sin instantáneas de almacenamiento; se reemplazarán por copias de seguridad diferenciales de HANA, como copias de seguridad incrementales o diferenciales (vea [Copias de seguridad diferenciales](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="7c4bc-201">Guía de administración de HANA Hola proporciona una lista de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="7c4bc-202">Sugiere que uno recuperar momento específico de SAP HANA tooa en el tiempo con hello sigue la secuencia de copias de seguridad:</span><span class="sxs-lookup"><span data-stu-id="7c4bc-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="7c4bc-203">Copia de seguridad de datos completa</span><span class="sxs-lookup"><span data-stu-id="7c4bc-203">Full data backup</span></span>
2. <span data-ttu-id="7c4bc-204">Copia de seguridad diferencial</span><span class="sxs-lookup"><span data-stu-id="7c4bc-204">Differential backup</span></span>
3. <span data-ttu-id="7c4bc-205">Copia de seguridad incremental 1</span><span class="sxs-lookup"><span data-stu-id="7c4bc-205">Incremental backup 1</span></span>
4. <span data-ttu-id="7c4bc-206">Copia de seguridad incremental 2</span><span class="sxs-lookup"><span data-stu-id="7c4bc-206">Incremental backup 2</span></span>
5. <span data-ttu-id="7c4bc-207">Copias de seguridad de registro</span><span class="sxs-lookup"><span data-stu-id="7c4bc-207">Log backups</span></span>

<span data-ttu-id="7c4bc-208">Con respecto a una programación exacta como toowhen y la frecuencia con la que debe ocurrir un tipo de copia de seguridad específico, no es posible toogive norma general, es muy específica del cliente y depende de cuántos cambios de datos se producen en el sistema de Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="7c4bc-209">Una recomendación básica del lado SAP, que se puede ver como guía general, es toomake una HANA copia de seguridad completa una vez por semana.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="7c4bc-210">Sobre copias de seguridad de registro, consulte la documentación de SAP HANA Hola [copias de seguridad del registro](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="7c4bc-211">SAP también recomienda realizar algunas tareas de mantenimiento de tookeep de catálogo de copia de seguridad de Hola que crezca de forma desmesurada (vea [de limpieza para el catálogo de copia de seguridad y el almacenamiento de copia de seguridad](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="7c4bc-212">Archivos de configuración de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-212">SAP HANA configuration files</span></span>

<span data-ttu-id="7c4bc-213">Como se indica en las P+F de hello en [1642148 de nota de SAP](https://launchpad.support.sap.com/#/notes/1642148), archivos de configuración de SAP HANA hello no forman parte de una copia de seguridad HANA estándar.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="7c4bc-214">No son esencial toorestore un sistema.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="7c4bc-215">configuración de HANA Hola podría cambiarse manualmente después de la restauración de Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="7c4bc-216">En caso de que se desee tooget Hola misma configuración personalizada durante el proceso de restauración de hello, es necesario tooback seguridad de los archivos de configuración de HANA Hola por separado.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="7c4bc-217">Si las copias de seguridad HANA estándar van tooa dedicado de sistema de archivos de copia de seguridad de HANA, uno podría copiar toohello de archivos de configuración de hello mismo sistema de archivos de copia de seguridad y, a continuación, copiarlo todo como destino de final de almacenamiento toohello juntos estupendo almacenamiento de blobs.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="7c4bc-218">SAP HANA Cockpit</span><span class="sxs-lookup"><span data-stu-id="7c4bc-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="7c4bc-219">SAP HANA cabina ofrece la posibilidad de Hola de supervisión y administración de SAP HANA a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="7c4bc-220">También permite el tratamiento de las copias de seguridad de SAP HANA y, por lo tanto, puede utilizarse como una alternativa tooSAP Studio HANA y ABAP DBACOCKPIT (consulte [SAP HANA cabina](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) para obtener más información).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Esta ilustración muestra la pantalla de administración de base de datos de SAP HANA cabina Hola](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="7c4bc-222">Este Hola de ilustración se muestra en pantalla de administración de base de datos de SAP HANA cabina y el icono de copia de seguridad de hello en hello deja.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="7c4bc-223">Icono de copia de seguridad de hello realizar requiere permisos de usuario apropiados para la cuenta de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![Las copias de seguridad pueden supervisarse en SAP HANA Cockpit mientras están en curso](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="7c4bc-225">Las copias de seguridad pueden supervisarse en la cabina de SAP HANA mientras están en curso y, una vez que haya finalizado, todos los detalles de copia de seguridad de hello están disponibles.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Un ejemplo de uso de Firefox en una VM de Azure SLES 12 con el escritorio de Gnome](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="7c4bc-227">Hola capturas de pantalla anteriores se han realizado desde una VM de Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="7c4bc-228">Este es un ejemplo de uso de Firefox en una VM de Azure SLES 12 con el escritorio de Gnome</span><span class="sxs-lookup"><span data-stu-id="7c4bc-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="7c4bc-229">Programaciones de copia de seguridad de hello opción toodefine SAP HANA muestran en la cabina de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="7c4bc-230">A medida que también puede ver uno, sugiere fecha y hora como prefijo para los archivos de copia de seguridad de Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="7c4bc-231">En SAP HANA Studio, es el prefijo predeterminado de hello &quot;completar\_datos\_copia de seguridad&quot; al realizar una copia de seguridad completa.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="7c4bc-232">Se recomienda usar un prefijo único.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="7c4bc-233">Cifrado de copia de seguridad de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="7c4bc-234">SAP HANA ofrece cifrado de datos y de registro.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="7c4bc-235">Si no se cifran los datos de SAP HANA y de registro, a continuación, las copias de seguridad de hello también no se cifran.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="7c4bc-236">Es una toohello cliente toouse alguna forma de copias de seguridad de soluciones de terceros tooencrypt Hola SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="7c4bc-237">Vea [datos y el cifrado del volumen de registro](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind más información sobre el cifrado de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="7c4bc-238">En Microsoft Azure, un cliente puede utilizar hello tooencrypt de característica de cifrado de VM IaaS.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="7c4bc-239">Por ejemplo, uno podría utilizar toohello adjunto de discos de datos dedicada VM, que son utilizado toostore copias de seguridad de SAP HANA, a continuación, realizar copias de estos discos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="7c4bc-240">Servicio de copia de seguridad de Azure puede controlar las máquinas virtuales/discos cifrados (vea [cómo tooback seguridad y restauración cifran las máquinas virtuales con copia de seguridad de Azure](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="7c4bc-241">Otra opción sería toomaintain Hola SAP HANA VM y sus discos sin cifrar y almacenar los archivos de copia de seguridad de SAP HANA hello en una cuenta de almacenamiento para el que ha habilitado el cifrado (vea [cifrado del servicio de almacenamiento de Azure para datos en reposo](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="7c4bc-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="7c4bc-242">Prueba de configuración</span><span class="sxs-lookup"><span data-stu-id="7c4bc-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="7c4bc-243">Prueba de la máquina virtual en Azure</span><span class="sxs-lookup"><span data-stu-id="7c4bc-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="7c4bc-244">Una instalación de SAP HANA en una máquina virtual GS5 de Azure se usó para hello después de las pruebas de copia de seguridad/restauración.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Esta ilustración muestra parte de información general del portal Azure para la máquina virtual de prueba HANA Hola Hola](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="7c4bc-246">En esta ilustración se muestra parte de hello Azure información general del portal para la máquina virtual de prueba HANA Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="7c4bc-247">Prueba de tamaño de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="7c4bc-247">Test backup size</span></span>

![En esta ilustración se ha tomado de la consola de copia de seguridad de hello en Studio HANA y muestra el tamaño de archivo de copia de seguridad de Hola para servidor de indexación HANA Hola de 229 GB](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="7c4bc-249">Una tabla ficticia se llena con datos tooget un tamaño de la copia de seguridad total de los datos más de 200 GB tooderive realista de datos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="7c4bc-250">Figura Hola se ha tomado de la consola de copia de seguridad de hello en Studio HANA y muestra el tamaño de archivo de copia de seguridad de Hola para servidor de indexación HANA Hola de 229 GB.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="7c4bc-251">Para las pruebas de hello, Hola predeterminado copia de seguridad "COMPLETE_DATA_BACKUP" en SAP HANA Studio se utilizaba.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="7c4bc-252">En los sistemas de producción real, debe definirse un prefijo más útil.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="7c4bc-253">SAP HANA Cockpit sugiere la fecha/hora.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="7c4bc-254">Toocopy de la herramienta de prueba directamente archivos de almacenamiento de tooAzure</span><span class="sxs-lookup"><span data-stu-id="7c4bc-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="7c4bc-255">los archivos de copia de seguridad de SAP HANA de tootransfer directamente el almacenamiento de blobs de tooAzure o recursos compartidos de archivos de Azure hello blobxfer usó la herramienta porque admite destinos y pueden integrarse fácilmente en los scripts de automatización de vencimiento tooits interfaz de línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="7c4bc-256">Hola blobxfer herramienta está disponible en [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="7c4bc-257">Prueba de estimación del tamaño de la copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="7c4bc-257">Test backup size estimation</span></span>

<span data-ttu-id="7c4bc-258">Es importante tooestimate Hola copia de seguridad tamaño de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="7c4bc-259">Esta estimación mejora el rendimiento de tooimprove mediante la definición de tamaño máximo de archivo de copia de seguridad de Hola durante un número de archivos de copia de seguridad, tooparallelism debido al hacer una copia de archivo.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="7c4bc-260">(Estos detalles se explican posteriormente en este artículo). También se debe decidir si toodo una completa de copia de seguridad o un delta de copia de seguridad (incremental o diferencial).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="7c4bc-261">Afortunadamente, hay una instrucción SQL que calcula el tamaño de Hola de archivos de copia de seguridad de hello: **seleccione \* de M\_copia de seguridad\_tamaño\_estimaciones** (consulte [ Hola de estimación espacio necesario en hello sistema de archivos para una copia de seguridad de datos](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![salida de Hello de esta instrucción SQL coincide con casi exactamente Hola tamaño real de copia de seguridad de datos completa de hello en disco](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="7c4bc-263">Para el sistema de prueba de hello, salida de hello de esta instrucción SQL coincide con casi exactamente Hola tamaño real de copia de seguridad de datos completa de hello en el disco.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="7c4bc-264">Prueba del tamaño del archivo de copia de seguridad de HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-264">Test HANA backup file size</span></span>

![consola de copia de seguridad de Hello HANA Studio permite un tamaño máximo de archivo de hello toorestrict de archivos de copia de seguridad de HANA](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="7c4bc-266">consola de copia de seguridad de Hello HANA Studio permite un tamaño máximo de archivo de hello toorestrict de archivos de copia de seguridad de HANA.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="7c4bc-267">En el entorno de ejemplo de Hola, esa característica hace posible tooget varias copias de seguridad más pequeños archivos en lugar de un archivo de copia de seguridad de 230 GB.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="7c4bc-268">Tamaño de archivo tiene un impacto significativo en el rendimiento (consulte el artículo relacionado de hello [copia de seguridad de Azure de SAP HANA en el nivel de archivo](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="7c4bc-269">Resumen</span><span class="sxs-lookup"><span data-stu-id="7c4bc-269">Summary</span></span>

<span data-ttu-id="7c4bc-270">Se basa en los resultados de pruebas de Hola Hola las tablas siguientes muestra ventajas y desventajas de las soluciones tooback una base de datos de SAP HANA que se ejecutan en máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="7c4bc-271">**Realizar copias de seguridad de copia y sistema de archivos de SAP HANA toohello copia de seguridad de archivos después toohello destino de copia de seguridad final**</span><span class="sxs-lookup"><span data-stu-id="7c4bc-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="7c4bc-272">Solución</span><span class="sxs-lookup"><span data-stu-id="7c4bc-272">Solution</span></span>                                           |<span data-ttu-id="7c4bc-273">Ventajas</span><span class="sxs-lookup"><span data-stu-id="7c4bc-273">Pros</span></span>                                 |<span data-ttu-id="7c4bc-274">Desventajas</span><span class="sxs-lookup"><span data-stu-id="7c4bc-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="7c4bc-275">Conservación de copias de seguridad de HANA en discos de VM</span><span class="sxs-lookup"><span data-stu-id="7c4bc-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="7c4bc-276">No hay esfuerzos de administración adicionales</span><span class="sxs-lookup"><span data-stu-id="7c4bc-276">No additional management efforts</span></span>     |<span data-ttu-id="7c4bc-277">Consume espacio en disco de VM local</span><span class="sxs-lookup"><span data-stu-id="7c4bc-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="7c4bc-278">Almacenamiento de tooblob de Blobxfer herramienta toocopy archivos de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="7c4bc-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="7c4bc-279">Paralelismo toocopy varios archivos, el almacenamiento de blobs de acceso esporádico de toouse de elección</span><span class="sxs-lookup"><span data-stu-id="7c4bc-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="7c4bc-280">Mantenimiento de la herramienta adicional y scripting personalizado</span><span class="sxs-lookup"><span data-stu-id="7c4bc-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="7c4bc-281">Copia de blobs a través de Powershell o CLI</span><span class="sxs-lookup"><span data-stu-id="7c4bc-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="7c4bc-282">No es necesaria ninguna herramienta adicional, puede realizarse a través de Azure Powershell o CLI</span><span class="sxs-lookup"><span data-stu-id="7c4bc-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="7c4bc-283">proceso manual, el cliente tiene tootake atención scripting y administración de blobs copiados para la restauración</span><span class="sxs-lookup"><span data-stu-id="7c4bc-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="7c4bc-284">Recurso compartido de tooNFS</span><span class="sxs-lookup"><span data-stu-id="7c4bc-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="7c4bc-285">Posterior al procesamiento de archivos de copia de seguridad en otra máquina virtual sin impacto en el servidor de archivos de HANA Hola</span><span class="sxs-lookup"><span data-stu-id="7c4bc-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="7c4bc-286">Proceso de copia lento</span><span class="sxs-lookup"><span data-stu-id="7c4bc-286">Slow copy process</span></span>|
|<span data-ttu-id="7c4bc-287">Blobxfer copia tooAzure servicio de archivos</span><span class="sxs-lookup"><span data-stu-id="7c4bc-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="7c4bc-288">No consume espacio en discos de VM locales</span><span class="sxs-lookup"><span data-stu-id="7c4bc-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="7c4bc-289">Escritura directa no compatible con copia de seguridad de HANA, restricción del tamaño del recurso compartido de archivo actual de 5 TB</span><span class="sxs-lookup"><span data-stu-id="7c4bc-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="7c4bc-290">Azure Backup Agent</span><span class="sxs-lookup"><span data-stu-id="7c4bc-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="7c4bc-291">Sería la mejor solución</span><span class="sxs-lookup"><span data-stu-id="7c4bc-291">Would be preferred solution</span></span>         | <span data-ttu-id="7c4bc-292">No disponible actualmente en Linux</span><span class="sxs-lookup"><span data-stu-id="7c4bc-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="7c4bc-293">**Copia de seguridad de SAP HANA basada en instantáneas de almacenamiento**</span><span class="sxs-lookup"><span data-stu-id="7c4bc-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="7c4bc-294">Solución</span><span class="sxs-lookup"><span data-stu-id="7c4bc-294">Solution</span></span>                                           |<span data-ttu-id="7c4bc-295">Ventajas</span><span class="sxs-lookup"><span data-stu-id="7c4bc-295">Pros</span></span>                                 |<span data-ttu-id="7c4bc-296">Desventajas</span><span class="sxs-lookup"><span data-stu-id="7c4bc-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="7c4bc-297">Servicio Azure Backup</span><span class="sxs-lookup"><span data-stu-id="7c4bc-297">Azure Backup Service</span></span>                               | <span data-ttu-id="7c4bc-298">Permite la copia de seguridad de VM basada en instantáneas de blobs</span><span class="sxs-lookup"><span data-stu-id="7c4bc-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="7c4bc-299">Si no usa restore a nivel de archivo, requiere la creación de hello de una nueva máquina virtual para el proceso de restauración de hello, lo que, a continuación, implica la necesidad de Hola de una nueva clave de licencia de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="7c4bc-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="7c4bc-300">Instantáneas de blobs manuales</span><span class="sxs-lookup"><span data-stu-id="7c4bc-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="7c4bc-301">Flexibilidad toocreate y restore específicos discos de máquina virtual sin cambiar Hola Id. único de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="7c4bc-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="7c4bc-302">Todo el trabajo manual, que tiene toobe realizarla cliente hello</span><span class="sxs-lookup"><span data-stu-id="7c4bc-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="7c4bc-303">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="7c4bc-303">Next steps</span></span>
* <span data-ttu-id="7c4bc-304">[SAP HANA Azure copia de seguridad en el nivel de archivo](sap-hana-backup-file-level.md) describe la opción de copia de seguridad basados en archivos Hola.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="7c4bc-305">[Copia de seguridad de SAP HANA basándose en instantáneas de almacenamiento](sap-hana-backup-storage-snapshots.md) describe Hola almacenamiento basados en instantáneas copia de seguridad de las opciones.</span><span class="sxs-lookup"><span data-stu-id="7c4bc-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="7c4bc-306">toolearn tooestablish alta disponibilidad y el plan de recuperación ante desastres de SAP HANA en Azure (instancias grandes), vea [SAP HANA (instancias de gran tamaño) alta disponibilidad y recuperación ante desastres en Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="7c4bc-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>

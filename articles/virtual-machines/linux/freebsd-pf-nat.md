---
title: toocreate de filtro de paquetes de FreeBSD aaaUse un firewall en Azure | Documentos de Microsoft
description: "Obtenga información acerca de cómo toodeploy una NAT FreeBSD de firewall PF en Azure."
services: virtual-machines-linux
documentationcenter: 
author: KylieLiang
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 02/20/2017
ms.author: kyliel
ms.openlocfilehash: 3d3a5dde2ca03ba6fc384581c786f5eb746e6d92
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-freebsds-packet-filter-toocreate-a-secure-firewall-in-azure"></a><span data-ttu-id="0f3c3-103">¿Cómo toocreate de filtro de paquetes de FreeBSD toouse un firewall seguro en Azure</span><span class="sxs-lookup"><span data-stu-id="0f3c3-103">How toouse FreeBSD's Packet Filter toocreate a secure firewall in Azure</span></span>
<span data-ttu-id="0f3c3-104">Este artículo se detallan cómo toodeploy un firewall NAT con filtro de compresor de FreeBSD a través de la plantilla del Administrador de recursos de Azure para el escenario común de servidor web.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-104">This article introduces how toodeploy a NAT firewall using FreeBSD’s Packer Filter through Azure Resource Manager template for common web server scenario.</span></span>

## <a name="what-is-pf"></a><span data-ttu-id="0f3c3-105">¿Qué es el filtro de paquetes (PF)?</span><span class="sxs-lookup"><span data-stu-id="0f3c3-105">What is PF?</span></span>
<span data-ttu-id="0f3c3-106">PF es un filtro de paquetes con estado con licencia para BSD, una pieza central del software de cortafuegos.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-106">PF (Packet Filter, also written pf) is a BSD licensed stateful packet filter, a central piece of software for firewalling.</span></span> <span data-ttu-id="0f3c3-107">Esta herramienta se ha desarrollado rápidamente y ahora tiene varias ventajas con respecto a otros firewalls disponibles.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-107">PF has since evolved quickly and now has several advantages over other available firewalls.</span></span> <span data-ttu-id="0f3c3-108">Traducción de direcciones de red (NAT) está en PF desde el día uno, a continuación, el programador de paquetes y administración de cola activa se han integrado en PF, mediante la integración de hello ALTQ y lo que puede configurar mediante la configuración de PF.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-108">Network Address Translation (NAT) is in PF since day one, then packet scheduler and active queue management have been integrated into PF, by integrating hello ALTQ and making it configurable through PF's configuration.</span></span> <span data-ttu-id="0f3c3-109">Características como pfsync y CARP para conmutación por error y redundancia, authpf para la autenticación de sesión y proxy ftp tooease Firewall Hola difíciles de protocolo FTP, también han extendido PF.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-109">Features such as pfsync and CARP for failover and redundancy, authpf for session authentication, and ftp-proxy tooease firewalling hello difficult FTP protocol, have also extended PF.</span></span> <span data-ttu-id="0f3c3-110">En resumen, PF es un firewall eficaz y con numerosas características.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-110">In short, PF is a powerful and feature-rich firewall.</span></span> 

## <a name="get-started"></a><span data-ttu-id="0f3c3-111">Primeros pasos</span><span class="sxs-lookup"><span data-stu-id="0f3c3-111">Get started</span></span>
<span data-ttu-id="0f3c3-112">Si está interesado en la configuración de un firewall seguro en la nube de Hola para los servidores web, vamos a empezar a trabajar.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-112">If you are interested in setting up a secure firewall in hello cloud for your web servers, then let’s get started.</span></span> <span data-ttu-id="0f3c3-113">También puede aplicar scripts de hello usados en este tooset de plantilla de Azure Resource Manager de su topología de red.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-113">You can also apply hello scripts used in this Azure Resource Manager template tooset up your networking topology.</span></span>
<span data-ttu-id="0f3c3-114">plantilla de Azure Resource Manager Hola configurar una máquina virtual de FreeBSD que realiza /redirection NAT con dos máquinas virtuales de FreeBSD y PF con el servidor de web Nginx de hello instalado y configurado.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-114">hello Azure Resource Manager template set up a FreeBSD virtual machine that performs NAT /redirection using PF and two FreeBSD virtual machines with hello Nginx web server installed and configured.</span></span> <span data-ttu-id="0f3c3-115">Además tooperforming NAT para dos servidores web de hello salida tráfico, máquina virtual NAT/redirección de hello intercepta las solicitudes HTTP y los redirigirá toohello dos servidores web en modo round-robin.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-115">In addition tooperforming NAT for hello two web servers egress traffic, hello NAT/redirection virtual machine intercepts HTTP requests and redirect them toohello two web servers in round-robin fashion.</span></span> <span data-ttu-id="0f3c3-116">Hola red virtual usa Hola privadas no enrutables IP dirección espacio 10.0.0.2/24 y puede modificar Hola parámetros de plantilla de Hola.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-116">hello VNet uses hello private non-routable IP address space 10.0.0.2/24 and you can modify hello parameters of hello template.</span></span> <span data-ttu-id="0f3c3-117">plantilla de Azure Resource Manager Hello también define una tabla de rutas para hello toda red virtual, que es una colección de rutas individuales usa rutas de Azure predeterminado toooverride en función de la dirección IP de destino de Hola.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-117">hello Azure Resource Manager template also defines a route table for hello whole VNet, which is a collection of individual routes used toooverride Azure default routes based on hello destination IP address.</span></span> 

![pf_topology](./media/freebsd-pf-nat/pf_topology.jpg)
    
### <a name="deploy-through-azure-cli"></a><span data-ttu-id="0f3c3-119">Implementación a través de la CLI de Azure</span><span class="sxs-lookup"><span data-stu-id="0f3c3-119">Deploy through Azure CLI</span></span>
<span data-ttu-id="0f3c3-120">Necesita hello más reciente [CLI de Azure 2.0](/cli/azure/install-az-cli2) instalado y registrado en tooan cuenta de Azure mediante [inicio de sesión de az](/cli/azure/#login).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-120">You need hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooan Azure account using [az login](/cli/azure/#login).</span></span> <span data-ttu-id="0f3c3-121">Cree un grupo de recursos con [az group create](/cli/azure/group#create).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-121">Create a resource group with [az group create](/cli/azure/group#create).</span></span> <span data-ttu-id="0f3c3-122">Hello en el ejemplo siguiente se crea un nombre de grupo de recursos `myResourceGroup` en hello `West US` ubicación.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-122">hello following example creates a resource group name `myResourceGroup` in hello `West US` location.</span></span>

```azurecli
az group create --name myResourceGroup --location westus
```

<span data-ttu-id="0f3c3-123">A continuación, implementar la plantilla de hello [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) con [Crear implementación de grupo az](/cli/azure/group/deployment#create).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-123">Next, deploy hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) with [az group deployment create](/cli/azure/group/deployment#create).</span></span> <span data-ttu-id="0f3c3-124">Descargar [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) en Hola la misma ruta de acceso y definir sus propios valores de recursos, como `adminPassword`, `networkPrefix`, y `domainNamePrefix`.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) under hello same path and define your own resource values, such as `adminPassword`, `networkPrefix`, and `domainNamePrefix`.</span></span> 

```azurecli
az group deployment create --resource-group myResourceGroup --name myDeploymentName \
    --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/pf-freebsd-setup/azuredeploy.json \
    --parameters '@azuredeploy.parameters.json' --verbose
```

<span data-ttu-id="0f3c3-125">Después de aproximadamente cinco minutos, obtendrá información Hola de `"provisioningState": "Succeeded"`.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-125">After about five minutes, you will get hello information of `"provisioningState": "Succeeded"`.</span></span> <span data-ttu-id="0f3c3-126">Puede ssh toohello front-end VM (NAT) o tener acceso a servidor de web Nginx en un explorador mediante la dirección IP pública de Hola o FQDN del servidor front-end de hello VM (NAT).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-126">Then you can ssh toohello frontend VM (NAT) or access Nginx web server in a browser using hello public IP address or FQDN of hello frontend VM (NAT).</span></span> <span data-ttu-id="0f3c3-127">Hello en el ejemplo siguiente se enumera FQDN y la dirección IP pública que asigna toohello front-end VM (NAT) en hello `myResourceGroup` grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-127">hello following example lists FQDN and public IP address that assigned toohello frontend VM (NAT) in hello `myResourceGroup` resource group.</span></span> 

```azurecli
az network public-ip list --resource-group myResourceGroup
```
    
## <a name="next-steps"></a><span data-ttu-id="0f3c3-128">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="0f3c3-128">Next steps</span></span>
<span data-ttu-id="0f3c3-129">¿Desea tooset seguridad su propia NAT en Azure?</span><span class="sxs-lookup"><span data-stu-id="0f3c3-129">Do you want tooset up your own NAT in Azure?</span></span> <span data-ttu-id="0f3c3-130">El código abierto es gratis, pero ¿es eficaz?</span><span class="sxs-lookup"><span data-stu-id="0f3c3-130">Open Source, free but powerful?</span></span> <span data-ttu-id="0f3c3-131">PF es una buena elección.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-131">Then PF is a good choice.</span></span> <span data-ttu-id="0f3c3-132">Mediante la plantilla de hello [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), solo necesita tooset de cinco minutos de un firewall NAT con FreeBSD de equilibrio de carga round robin PF en Azure para el escenario común de servidor web.</span><span class="sxs-lookup"><span data-stu-id="0f3c3-132">By using hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), you only need five minutes tooset up a NAT firewall with round-robin load balancing using FreeBSD's PF in Azure for common web server scenario.</span></span> 

<span data-ttu-id="0f3c3-133">Si desea que la oferta de hello toolearn de FreeBSD en Azure, consulte demasiado[tooFreeBSD de introducción en Azure](freebsd-intro-on-azure.md).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-133">If you want toolearn hello offering of FreeBSD in Azure, refer too[introduction tooFreeBSD on Azure](freebsd-intro-on-azure.md).</span></span>

<span data-ttu-id="0f3c3-134">Si desea más información acerca de PF tooknow, consulte demasiado[manual de FreeBSD](https://www.freebsd.org/doc/handbook/firewalls-pf.html) o [manual del usuario PF](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span><span class="sxs-lookup"><span data-stu-id="0f3c3-134">If you want tooknow more about PF, refer too[FreeBSD handbook](https://www.freebsd.org/doc/handbook/firewalls-pf.html) or [PF-User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span></span>

---
title: "Solución de problemas detallada de SSH para una máquina virtual de Azure | Microsoft Docs"
description: "Pasos de solución de problemas de SSH más detallados para los problemas de conexión a una máquina virtual de Azure"
keywords: "conexión ssh rechazada, error de ssh azure ssh, error de conexión ssh"
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 9ccdb3fbca21264065eeb1c4e46314c62af4c2e8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-to-a-linux-vm-in-azure"></a><span data-ttu-id="7cd0d-104">Pasos detallados de solución de problemas de SSH para los problemas de conexión a una máquina virtual Linux en Azure</span><span class="sxs-lookup"><span data-stu-id="7cd0d-104">Detailed SSH troubleshooting steps for issues connecting to a Linux VM in Azure</span></span>
<span data-ttu-id="7cd0d-105">Hay muchas razones posibles por las que el cliente SSH podría no ser capaz de ponerse en contacto con el servicio SSH en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-105">There are many possible reasons that the SSH client might not be able to reach the SSH service on the VM.</span></span> <span data-ttu-id="7cd0d-106">Si ha seguido los [pasos más generales de solución de problemas de SSH](troubleshoot-ssh-connection.md), debe solucionar además el problema de conexión.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-106">If you have followed through the more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need to further troubleshoot the connection issue.</span></span> <span data-ttu-id="7cd0d-107">Este artículo le guiará por los pasos de solución de problemas detallados para determinar dónde se producen errores en la conexión SSH y cómo resolverlos.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-107">This article guides you through detailed troubleshooting steps to determine where the SSH connection is failing and how to resolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="7cd0d-108">Pasos previos</span><span class="sxs-lookup"><span data-stu-id="7cd0d-108">Take preliminary steps</span></span>
<span data-ttu-id="7cd0d-109">El siguiente diagrama muestra los componentes que intervienen.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-109">The following diagram shows the components that are involved.</span></span>

![Diagrama que muestra los componentes del servicio SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="7cd0d-111">Los siguientes pasos ayudan a aislar la causa del error y a averiguar soluciones o alternativas.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-111">The following steps help you isolate the source of the failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="7cd0d-112">Compruebe el estado de la máquina virtual en el portal.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-112">Check the status of the VM in the portal.</span></span>
   <span data-ttu-id="7cd0d-113">En [Azure Portal](https://portal.azure.com), seleccione **Máquinas virtuales** > *Nombre de máquina virtual*.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-113">In the [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="7cd0d-114">El panel de estado de la máquina virtual debe mostrar **En ejecución**.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-114">The status pane for the VM should show **Running**.</span></span> <span data-ttu-id="7cd0d-115">Desplácese hacia abajo para ver la actividad reciente de los recursos de proceso, almacenamiento y de red.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-115">Scroll down to show recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="7cd0d-116">Seleccione **Configuración** para examinar los puntos de conexión, las direcciones IP, los grupos de seguridad de red y otros valores de configuración.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-116">Select **Settings** to examine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="7cd0d-117">La máquina virtual debe tener un punto de conexión definido para el tráfico SSH que puede ver en **Puntos de conexión** o en **[Grupo de seguridad de red](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-117">The VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="7cd0d-118">Los puntos de conexión en las máquinas virtuales que se crearon con Resource Manager se almacenan en un grupo de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="7cd0d-119">Compruebe también que se hayan aplicado reglas al grupo de seguridad de red y que se les haga referencia en la subred.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-119">Also, verify that the rules have been applied to the network security group and that they're referenced in the subnet.</span></span>

<span data-ttu-id="7cd0d-120">Para comprobar la conectividad de red, compruebe los puntos de conexión configurados y vea si puede llegar a la máquina virtual a través de otro protocolo, como HTTP u otro servicio.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-120">To verify network connectivity, check the configured endpoints and see if you can reach the VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="7cd0d-121">Después de realizar estos pasos, vuelva a intentar la conexión a SSH.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-121">After these steps, try the SSH connection again.</span></span>

## <a name="find-the-source-of-the-issue"></a><span data-ttu-id="7cd0d-122">Averiguar el origen del problema</span><span class="sxs-lookup"><span data-stu-id="7cd0d-122">Find the source of the issue</span></span>
<span data-ttu-id="7cd0d-123">El cliente de SSH de su equipo podría generar un error al establecer conexión con el servicio de SSH en la máquina virtual de Azure debido a problemas o errores de configuración en las siguientes áreas:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-123">The SSH client on your computer might fail to reach the SSH service on the Azure VM due to issues or misconfigurations in the following areas:</span></span>

* [<span data-ttu-id="7cd0d-124">Equipo cliente de SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="7cd0d-125">Dispositivo perimetral de la organización</span><span class="sxs-lookup"><span data-stu-id="7cd0d-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="7cd0d-126">Extremo de servicio en la nube y lista de control de acceso (ACL)</span><span class="sxs-lookup"><span data-stu-id="7cd0d-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="7cd0d-127">Grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="7cd0d-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="7cd0d-128">Máquina virtual de Azure basada en Linux</span><span class="sxs-lookup"><span data-stu-id="7cd0d-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="7cd0d-129">Causa 1: Equipo cliente de SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="7cd0d-130">Para descartar el equipo como causa del error, compruebe que puede establecer conexiones a SSH con otro equipo local basado en Linux.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-130">To eliminate your computer as the source of the failure, verify that it can make SSH connections to another on-premises, Linux-based computer.</span></span>

![Diagrama que resalta los componentes del equipo cliente de SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="7cd0d-132">Si la conexión falla, compruebe si el equipo tiene los siguientes errores:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-132">If the connection fails, check for the following issues on your computer:</span></span>

* <span data-ttu-id="7cd0d-133">Una configuración del firewall local que está bloqueando el tráfico SSH entrante o saliente (TCP 22)</span><span class="sxs-lookup"><span data-stu-id="7cd0d-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="7cd0d-134">Software de proxy de cliente instalado localmente que impide las conexiones a SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="7cd0d-135">Software de supervisión de red instalado localmente que impide las conexiones a SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="7cd0d-136">Otro tipo de software de seguridad que o bien, supervisar el tráfico o bien, permite o impide ciertos tipos de tráfico.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="7cd0d-137">Si alguna de estas condiciones es aplicable, deshabilite el software temporalmente e intente una conexión SSH a un equipo local para averiguar el motivo de que la conexión esté bloqueada en su equipo.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-137">If one of these conditions apply, temporarily disable the software and try an SSH connection to an on-premises computer to find out the reason the connection is being blocked on your computer.</span></span> <span data-ttu-id="7cd0d-138">Después, colabore con el administrador de red para corregir la configuración del software a fin de permitir conexiones SSH.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-138">Then work with your network administrator to correct the software settings to allow SSH connections.</span></span>

<span data-ttu-id="7cd0d-139">Si utiliza la autenticación de certificados, compruebe que dispone de estos permisos a la carpeta .ssh en el directorio principal:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-139">If you are using certificate authentication, verify that you have these permissions to the .ssh folder in your home directory:</span></span>

* <span data-ttu-id="7cd0d-140">Chmod 700 ~/.ssh</span><span class="sxs-lookup"><span data-stu-id="7cd0d-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="7cd0d-141">Chmod 644 ~/.ssh/\*.pub</span><span class="sxs-lookup"><span data-stu-id="7cd0d-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="7cd0d-142">Chmod 600 ~/.ssh/id_rsa (o cualquier otro archivo en el que tenga almacenadas las claves privadas)</span><span class="sxs-lookup"><span data-stu-id="7cd0d-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="7cd0d-143">Chmod 644 ~/.ssh/known_hosts (contiene los hosts a los que se ha conectado a través de SSH)</span><span class="sxs-lookup"><span data-stu-id="7cd0d-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected to via SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="7cd0d-144">Causa 2: Dispositivo perimetral de la organización</span><span class="sxs-lookup"><span data-stu-id="7cd0d-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="7cd0d-145">Para descartar el dispositivo perimetral de la organización como causa de los errores, compruebe que un equipo conectado directamente a Internet puede establecer conexiones a SSH con la máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-145">To eliminate your organization edge device as the source of the failure, verify that a computer that's directly connected to the Internet can make SSH connections to your Azure VM.</span></span> <span data-ttu-id="7cd0d-146">Si va a acceder a la máquina virtual a través de una conexión VPN de sitio a sitio o de ExpressRoute de Azure, vaya a [Causa 4: Grupos de seguridad de red](#nsg).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-146">If you are accessing the VM over a site-to-site VPN or an Azure ExpressRoute connection, skip to [Source 4: Network security groups](#nsg).</span></span>

![Diagrama que resalta el dispositivo perimetral de la organización](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="7cd0d-148">Si no tiene un equipo conectado directamente a Internet, cree una nueva máquina virtual de Azure en su propio grupo de recursos o servicio en la nube y úsela.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-148">If you don't have a computer that is directly connected to the Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="7cd0d-149">Para más información, consulte [Creación de una máquina virtual que ejecuta Linux en Azure](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="7cd0d-150">Cuando acabe de realizar las pruebas, elimine el grupo de recursos o la máquina virtual y el servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-150">Delete the resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="7cd0d-151">Si puede crear una conexión SSH con un equipo que esté conectado directamente a Internet, compruebe si el dispositivo perimetral de la organización tiene lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-151">If you can create an SSH connection with a computer that's directly connected to the Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="7cd0d-152">Un firewall interno que bloquea el tráfico SSH a Internet</span><span class="sxs-lookup"><span data-stu-id="7cd0d-152">An internal firewall that's blocking SSH traffic with the Internet</span></span>
* <span data-ttu-id="7cd0d-153">Un servidor proxy que impide las conexiones SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="7cd0d-154">Software de detección de intrusiones o supervisión de red en ejecución en los dispositivos de la red perimetral que impide las conexiones SSH</span><span class="sxs-lookup"><span data-stu-id="7cd0d-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="7cd0d-155">Trabaje con el administrador de red para corregir la configuración de los dispositivos perimetrales de la organización para permitir el tráfico SSH a Internet.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-155">Work with your network administrator to correct the settings of your organization edge devices to allow SSH traffic with the Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="7cd0d-156">Causa 3: extremo de servicio en la nube y ACL</span><span class="sxs-lookup"><span data-stu-id="7cd0d-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="7cd0d-157">Esta causa se aplica solo a las máquinas virtuales creadas con el modelo de implementación clásica.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-157">This source applies only to VMs that were created by using the classic deployment model.</span></span> <span data-ttu-id="7cd0d-158">Para las máquinas virtuales creadas mediante Resource Manager, vaya a [Causa 4: Grupos de seguridad de red](#nsg).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-158">For VMs that were created by using Resource Manager, skip to [source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="7cd0d-159">Para descartar el punto de conexión de servicio en la nube y ACL como el origen del error, compruebe si otra máquina virtual de Azure de la misma red virtual puede realizar conexiones SSH a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-159">To eliminate the cloud service endpoint and ACL as the source of the failure, verify that another Azure VM in the same virtual network can make SSH connections to your VM.</span></span>

![Diagrama que resalta el punto de conexión del servicio en la nube y ACL](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="7cd0d-161">Si no tiene otra máquina virtual en la misma red virtual, puede crear una fácilmente.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-161">If you don't have another VM in the same virtual network, you can easily create one.</span></span> <span data-ttu-id="7cd0d-162">Para más información, consulte [Creación de una máquina virtual Linux en Azure mediante la CLI](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-162">For more information, see [Create a Linux VM on Azure using the CLI](quick-create-cli.md).</span></span> <span data-ttu-id="7cd0d-163">Cuando acabe de realizar las pruebas, elimine la máquina virtual que creó.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-163">Delete the extra VM when you are done with your testing.</span></span>

<span data-ttu-id="7cd0d-164">Si puede crear una conexión SSH con una máquina virtual en la misma red virtual, compruebe las siguientes áreas:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-164">If you can create an SSH connection with a VM in the same virtual network, check the following areas:</span></span>

* <span data-ttu-id="7cd0d-165">**La configuración del punto de conexión para el tráfico de SSH en la máquina virtual de destino.**</span><span class="sxs-lookup"><span data-stu-id="7cd0d-165">**The endpoint configuration for SSH traffic on the target VM.**</span></span> <span data-ttu-id="7cd0d-166">El puerto TCP privado del punto de conexión debe coincidir con el puerto TCP en el que escucha el servicio SSH en la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-166">The private TCP port of the endpoint should match the TCP port on which the SSH service on the VM is listening.</span></span> <span data-ttu-id="7cd0d-167">(El puerto predeterminado es 22).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-167">(The default port is 22).</span></span> <span data-ttu-id="7cd0d-168">Para comprobar que el número de puerto TCP de SSH en Azure Portal, seleccione **Máquinas virtuales** > *Nombre de máquina virtual* > **Configuración** > **Puntos de conexión**.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-168">Verify the SSH TCP port number in the Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="7cd0d-169">**La ACL del punto de conexión para el tráfico de SSH en la máquina virtual de destino.**</span><span class="sxs-lookup"><span data-stu-id="7cd0d-169">**The ACL for the SSH traffic endpoint on the target virtual machine.**</span></span> <span data-ttu-id="7cd0d-170">Una ACL permite especificar el tráfico entrante de Internet que se permite o se deniega en función de la dirección IP de origen.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-170">An ACL enables you to specify allowed or denied incoming traffic from the Internet, based on its source IP address.</span></span> <span data-ttu-id="7cd0d-171">Las ACL mal configuradas pueden impedir el tráfico entrante de SSH al punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-171">Misconfigured ACLs can prevent incoming SSH traffic to the endpoint.</span></span> <span data-ttu-id="7cd0d-172">Compruebe las ACL para asegurarse de que está permitido el tráfico entrante desde las direcciones IP públicas del proxy o de otro servidor perimetral.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-172">Check your ACLs to ensure that incoming traffic from the public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="7cd0d-173">Para obtener más información, consulte [Acerca de las listas de control de acceso (ACL) de red](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="7cd0d-174">Para descartar el punto de conexión como causa del problema, quite el actual, cree uno y especifique el nombre SSH (puerto TCP 22 para el número de puerto público y privado).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-174">To eliminate the endpoint as a source of the problem, remove the current endpoint, create another endpoint, and specify the SSH name (TCP port 22 for the public and private port number).</span></span> <span data-ttu-id="7cd0d-175">Para obtener más información, vea [Configuración de puntos de conexión en una máquina virtual en Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="7cd0d-176">Causa 4: Grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="7cd0d-176">Source 4: Network security groups</span></span>
<span data-ttu-id="7cd0d-177">Los grupos de seguridad de red permiten un control pormenorizado del tráfico entrante y saliente permitido.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-177">Network security groups enable you to have more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="7cd0d-178">Puede crear reglas que abarquen subredes y servicios en la nube en una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="7cd0d-179">Compruebe las reglas de los grupos de seguridad de red para asegurarse de que se permite el tráfico de SSH tanto a Internet como desde Internet.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-179">Check your network security group rules to ensure that SSH traffic to and from the Internet is allowed.</span></span>
<span data-ttu-id="7cd0d-180">Para obtener más información, consulte [Acerca de los grupos de seguridad de red](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="7cd0d-181">También puede usar la comprobación de IP para validar la configuración de NSG.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-181">You can also use IP Verify to validate the NSG configuration.</span></span> <span data-ttu-id="7cd0d-182">Para más información, consulte [Información general sobre la supervisión de red de Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="7cd0d-183">Causa 5: Máquina virtual de Azure basada en Linux</span><span class="sxs-lookup"><span data-stu-id="7cd0d-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="7cd0d-184">La última causa de los posibles problemas puede residir en la propia máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-184">The last source of possible problems is the Azure virtual machine itself.</span></span>

![Diagrama que resalta la máquina virtual de Azure basada en Linux](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="7cd0d-186">Si aún no lo ha hecho, siga las instrucciones [para restablecer una contraseña o clave SSH para máquinas virtuales basadas en Linux](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-186">If you haven't done so already, follow the instructions [to reset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="7cd0d-187">Pruebe de nuevo la conexión desde su equipo.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-187">Try connecting from your computer again.</span></span> <span data-ttu-id="7cd0d-188">Si sigue sin funcionar, estos son algunos de los posibles problemas:</span><span class="sxs-lookup"><span data-stu-id="7cd0d-188">If it still fails, the following are some of the possible issues:</span></span>

* <span data-ttu-id="7cd0d-189">El servicio de SSH no se está ejecutando en la máquina virtual de destino.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-189">The SSH service is not running on the target virtual machine.</span></span>
* <span data-ttu-id="7cd0d-190">El servicio SSH no está escuchando en el puerto TCP 22.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-190">The SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="7cd0d-191">Para probar esto, instale un cliente telnet en el equipo local y ejecute "telnet *cloudServiceName*.cloudapp.net 22".</span><span class="sxs-lookup"><span data-stu-id="7cd0d-191">To test, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="7cd0d-192">Este paso determina si la máquina virtual permite la comunicación entrante y saliente con el punto de conexión SSH.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-192">This step determines if the virtual machine allows inbound and outbound communication to the SSH endpoint.</span></span>
* <span data-ttu-id="7cd0d-193">El firewall local en la máquina virtual de destino tiene reglas que impiden el tráfico entrante o saliente de SSH.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-193">The local firewall on the target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="7cd0d-194">El software de detección de intrusiones o supervisión de red que se ejecuta en la máquina virtual de Azure impide las conexiones SSH.</span><span class="sxs-lookup"><span data-stu-id="7cd0d-194">Intrusion detection or network monitoring software that's running on the Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7cd0d-195">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="7cd0d-195">Additional resources</span></span>
<span data-ttu-id="7cd0d-196">Para más información sobre cómo solucionar problemas de acceso a las aplicaciones, consulte [Solución de problemas de acceso a una aplicación que se ejecuta en una máquina virtual de Azure](troubleshoot-app-connection.md).</span><span class="sxs-lookup"><span data-stu-id="7cd0d-196">For more information about troubleshooting application access, see [Troubleshoot access to an application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>

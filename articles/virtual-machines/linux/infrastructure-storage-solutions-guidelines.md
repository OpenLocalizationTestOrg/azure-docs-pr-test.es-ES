---
title: Soluciones de almacenamiento para VM de Linux en Azure| Microsoft Docs
description: "Obtenga información sobre las directrices clave de diseño e implementación para implementar soluciones de almacenamiento en los servicios de infraestructura de Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 7c5089b9db945b0e0f4523e53bb44c178ffd0781
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/03/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="60792-103">Directrices de infraestructura de Azure Storage para máquinas virtuales Linux</span><span class="sxs-lookup"><span data-stu-id="60792-103">Azure storage infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="60792-104">Este artículo se centra en entender las necesidades de almacenamiento y las consideraciones de diseño para conseguir un rendimiento óptimo de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="60792-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="60792-105">Directrices de implementación para el almacenamiento</span><span class="sxs-lookup"><span data-stu-id="60792-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="60792-106">Decisiones:</span><span class="sxs-lookup"><span data-stu-id="60792-106">Decisions:</span></span>

* <span data-ttu-id="60792-107">¿Va a usar Azure Managed Disks o discos no administrados?</span><span class="sxs-lookup"><span data-stu-id="60792-107">Are you going to use Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="60792-108">¿Necesita usar el almacenamiento Estándar o Premium para la carga de trabajo?</span><span class="sxs-lookup"><span data-stu-id="60792-108">Do you need to use Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="60792-109">¿Necesita crear bandas en los discos para crear discos de más de 4 TB?</span><span class="sxs-lookup"><span data-stu-id="60792-109">Do you need disk striping to create disks larger than 4TB?</span></span>
* <span data-ttu-id="60792-110">¿Necesita crear bandas en los discos para lograr un rendimiento óptimo de E/S para la carga de trabajo?</span><span class="sxs-lookup"><span data-stu-id="60792-110">Do you need disk striping to achieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="60792-111">¿Qué conjunto de cuentas de almacenamiento necesita para hospedar su infraestructura o carga de trabajo de TI?</span><span class="sxs-lookup"><span data-stu-id="60792-111">What set of storage accounts do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="60792-112">Tareas:</span><span class="sxs-lookup"><span data-stu-id="60792-112">Tasks:</span></span>

* <span data-ttu-id="60792-113">Revise las solicitudes de E/S de las aplicaciones que va a implementar y planee el número y el tipo adecuados de cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="60792-113">Review I/O demands of the applications you are deploying and plan the appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="60792-114">Cree el conjunto de cuentas de almacenamiento usando su convención de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="60792-114">Create the set of storage accounts using your naming convention.</span></span> <span data-ttu-id="60792-115">Puede usar la CLI o el Portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="60792-115">You can use the Azure CLI or the portal.</span></span>

## <a name="storage"></a><span data-ttu-id="60792-116">Almacenamiento</span><span class="sxs-lookup"><span data-stu-id="60792-116">Storage</span></span>
<span data-ttu-id="60792-117">Almacenamiento de Azure es una parte clave del proceso de implementación y administración de aplicaciones y máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="60792-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="60792-118">Almacenamiento de Azure proporciona servicios para almacenar datos de archivos, datos sin estructura y mensajes, y también forma parte de la infraestructura que da soporte a las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="60792-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of the infrastructure supporting VMs.</span></span>

<span data-ttu-id="60792-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) controla automáticamente el almacenamiento en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="60792-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind the scenes.</span></span> <span data-ttu-id="60792-120">Con los discos no administrados, era preciso crear cuentas de almacenamiento que contuvieran los discos (archivos VHD) de las máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="60792-120">With unmanaged disks, you create storage accounts to hold the disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="60792-121">Al escalar verticalmente, era preciso asegurarse de que se habían creado cuentas de almacenamiento adicionales, para que no se superar el límite de IOPS de almacenamiento con cualquiera de los discos.</span><span class="sxs-lookup"><span data-stu-id="60792-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed the IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="60792-122">Si Managed Disks controla el almacenamiento, desaparecen los límites de la cuenta de almacenamiento (por ejemplo, 20 000 IOPS por cuenta).</span><span class="sxs-lookup"><span data-stu-id="60792-122">With Managed Disks handling storage, you are no longer limited by the storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="60792-123">Tampoco es preciso copiar las imágenes personalizadas (archivos VHD) en varias cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="60792-123">You also no longer have to copy your custom images (VHD files) to multiple storage accounts.</span></span> <span data-ttu-id="60792-124">Puede administrarlas en una ubicación central (una cuenta de almacenamiento por región de Azure) y utilizarlas para crear cientos de máquinas virtuales en una suscripción.</span><span class="sxs-lookup"><span data-stu-id="60792-124">You can manage them in a central location – one storage account per Azure region – and use them to create hundreds of VMs in a subscription.</span></span> <span data-ttu-id="60792-125">Se recomienda utilizar Managed Disks para las nuevas implementaciones.</span><span class="sxs-lookup"><span data-stu-id="60792-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="60792-126">Existen dos tipos de cuentas de almacenamiento disponibles para la compatibilidad con máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="60792-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="60792-127">Las cuentas de Standard Storage proporcionan acceso a Blob Storage (que se usa para almacenar discos de VM de Azure), Table Storage, Queue Storage y File Storage.</span><span class="sxs-lookup"><span data-stu-id="60792-127">Standard storage accounts give you access to blob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="60792-128">[Premium Storage](../../storage/storage-premium-storage.md) ofrecen compatibilidad con discos de alto rendimiento y baja latencia para cargas de trabajo de E/S intensivas, como el clúster MongoDB particionado.</span><span class="sxs-lookup"><span data-stu-id="60792-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as MongoDB Sharded cluster.</span></span> <span data-ttu-id="60792-129">En estos momentos, Premium Storage solo admite discos de VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="60792-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="60792-130">Azure crea máquinas virtuales con un disco del sistema operativo, un disco temporal y ninguno o varios discos de datos opcionales.</span><span class="sxs-lookup"><span data-stu-id="60792-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="60792-131">Tanto el disco del sistema operativo como los discos de datos son blobs en páginas de Azure, mientras que el disco temporal se almacena localmente en el nodo en que reside el equipo.</span><span class="sxs-lookup"><span data-stu-id="60792-131">The operating system disk and data disks are Azure page blobs, whereas the temporary disk is stored locally on the node where the machine lives.</span></span> <span data-ttu-id="60792-132">Tenga cuidado al diseñar aplicaciones para que solo utilice este disco temporal para datos no persistentes, ya que la máquina virtual se puede migrar entre hosts durante un evento de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="60792-132">Take care when designing applications to only use this temporary disk for non-persistent data as the VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="60792-133">Se podrían perder los datos almacenados en el disco temporal.</span><span class="sxs-lookup"><span data-stu-id="60792-133">Any data stored on the temporary disk would be lost.</span></span>

<span data-ttu-id="60792-134">El entorno de Azure Storage subyacente proporciona alta disponibilidad y durabilidad para garantizar que los datos permanezcan protegidos frente a errores de hardware o mantenimientos no planeados.</span><span class="sxs-lookup"><span data-stu-id="60792-134">Durability and high availability is provided by the underlying Azure Storage environment to ensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="60792-135">Al diseñar el entorno de Azure Storage, puede decidir replicar el almacenamiento de máquina virtual de los siguientes modos:</span><span class="sxs-lookup"><span data-stu-id="60792-135">As you design your Azure Storage environment, you can choose to replicate VM storage:</span></span>

* <span data-ttu-id="60792-136">Localmente dentro de un determinado centro de datos de Azure</span><span class="sxs-lookup"><span data-stu-id="60792-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="60792-137">En centros de datos de Azure dentro de una región determinada</span><span class="sxs-lookup"><span data-stu-id="60792-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="60792-138">En centros de datos de Azure de diferentes regiones</span><span class="sxs-lookup"><span data-stu-id="60792-138">across Azure datacenters across different regions.</span></span>

<span data-ttu-id="60792-139">Puede leer [más información acerca de las opciones de replicación para una alta disponibilidad](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="60792-139">You can read [more about the replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="60792-140">Los discos de datos y del sistema operativo tienen un tamaño máximo de 4 TB.</span><span class="sxs-lookup"><span data-stu-id="60792-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="60792-141">Puede usar el Administrador de volúmenes lógicos (LVM) para superar este límite mediante la agrupación de discos de datos para presentar volúmenes lógicos de más de 1023 GB a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="60792-141">You can use Logical Volume Manager (LVM) to surpass this limit by pooling together data disks to present logical volumes larger than 1023GB to your VM.</span></span>

<span data-ttu-id="60792-142">Existen algunos límites de escalabilidad que se aplican a la hora de diseñar las implementaciones de Azure Storage. Consulte [Límites, cuotas y restricciones de suscripción y servicios de Microsoft Azure](../../azure-subscription-service-limits.md#storage-limits) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="60792-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="60792-143">Consulte también [Objetivos de escalabilidad y rendimiento del almacenamiento en Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="60792-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="60792-144">En cuanto al almacenamiento de aplicaciones, puede guardar datos de objetos no estructurados como documentos, imágenes, copias de seguridad, datos de configuración, registros, etc.</span><span class="sxs-lookup"><span data-stu-id="60792-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="60792-145">mediante Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="60792-145">using blob storage.</span></span> <span data-ttu-id="60792-146">En lugar de que aplicación escriba en un disco virtual asociado a la máquina virtual, la aplicación puede escribir directamente en el Almacenamiento de blobs de Azure.</span><span class="sxs-lookup"><span data-stu-id="60792-146">Rather than your application writing to a virtual disk attached to the VM, the application can write directly to Azure blob storage.</span></span> <span data-ttu-id="60792-147">Blob Storage también proporciona la opción de [capas de almacenamiento de acceso frecuente y acceso esporádico](../../storage/storage-blob-storage-tiers.md) según las necesidades de disponibilidad y las restricciones de costo.</span><span class="sxs-lookup"><span data-stu-id="60792-147">Blob storage also provides the option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="60792-148">Discos con bandas</span><span class="sxs-lookup"><span data-stu-id="60792-148">Striped disks</span></span>
<span data-ttu-id="60792-149">Además de ofrecer la posibilidad de crear discos de más de 1023 GB, en muchos casos, la creación de bandas en los discos de datos mejorará el rendimiento, ya que permite que varios blobs respalden el almacenamiento de un solo volumen.</span><span class="sxs-lookup"><span data-stu-id="60792-149">Besides allowing you to create disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs to back the storage for a single volume.</span></span> <span data-ttu-id="60792-150">Con la creación de bandas, las operaciones de E/S necesarias para escribir y leer datos de un único disco lógico se realizan en paralelo.</span><span class="sxs-lookup"><span data-stu-id="60792-150">With striping, the I/O required to write and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="60792-151">Azure impone límites en la cantidad de discos de datos y la cantidad de ancho de banda disponible en función del tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="60792-151">Azure imposes limits on the number of data disks and amount of bandwidth available, depending on the VM size.</span></span> <span data-ttu-id="60792-152">Para obtener más información, consulte [Tamaños de máquinas virtuales](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="60792-152">For details, see [Sizes for virtual machines](sizes.md)</span></span>

<span data-ttu-id="60792-153">Si usa la creación de bandas en discos de datos de Azure, tenga en cuenta las siguientes directrices:</span><span class="sxs-lookup"><span data-stu-id="60792-153">If you are using disk striping for Azure data disks, consider the following guidelines:</span></span>

* <span data-ttu-id="60792-154">Conecte los discos de datos máximos que se permiten para el tamaño de la VM.</span><span class="sxs-lookup"><span data-stu-id="60792-154">Attach the maximum data disks allowed for the VM size.</span></span>
* <span data-ttu-id="60792-155">Use LVM.</span><span class="sxs-lookup"><span data-stu-id="60792-155">Use LVM.</span></span>
* <span data-ttu-id="60792-156">Evite el uso de opciones de almacenamiento en caché del disco de datos de Azure (directiva de almacenamiento en caché = ninguna).</span><span class="sxs-lookup"><span data-stu-id="60792-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="60792-157">Para más información, consulte [Configuración del LVM en una máquina virtual Linux en Azure](configure-lvm.md).</span><span class="sxs-lookup"><span data-stu-id="60792-157">For more information, see [Configuring LVM on a Linux VM](configure-lvm.md).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="60792-158">Cuentas de almacenamiento múltiples</span><span class="sxs-lookup"><span data-stu-id="60792-158">Multiple storage accounts</span></span>
<span data-ttu-id="60792-159">En esta sección no se aplica a [Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), ya que no creará cuentas de almacenamiento independientes.</span><span class="sxs-lookup"><span data-stu-id="60792-159">This section does not apply to [Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="60792-160">Al diseñar el entorno de Azure Storage para los discos no administrados, puede utilizar varias cuentas de almacenamiento a medida que el número de máquinas virtuales implementadas aumente.</span><span class="sxs-lookup"><span data-stu-id="60792-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as the number of VMs you deploy increases.</span></span> <span data-ttu-id="60792-161">Este enfoque ayuda a distribuir la E/S entre la infraestructura subyacente de Azure Storage con el fin de mantener un rendimiento óptimo para las VM y aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="60792-161">This approach helps distribute out the I/O across the underlying Azure Storage infrastructure to maintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="60792-162">Al diseñar las aplicaciones que se van a implementar, tenga en cuenta los requisitos que E/S de cada VM tendrá y compense esas VM entre las cuentas de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="60792-162">As you design the applications that you are deploying, consider the I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="60792-163">Trate de evitar agrupar todas las máquinas virtuales que exigen E/S elevadas en una o dos cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="60792-163">Try to avoid grouping all the high I/O demanding VMs in to just one or two storage accounts.</span></span>

<span data-ttu-id="60792-164">Para obtener más información sobre las funcionalidades de E/S de las distintas opciones de Azure Storage y algunos máximos recomendados, consulte [Objetivos de escalabilidad y rendimiento del almacenamiento de Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="60792-164">For more information about the I/O capabilities of the different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="60792-165">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="60792-165">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]


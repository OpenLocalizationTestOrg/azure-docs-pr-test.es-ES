---
title: "aaaDNS opciones de resolución de nombres para las máquinas virtuales de Linux en Azure"
description: "Escenarios de resolución de nombres DNS para máquinas virtuales Linux en IaaS de Azure, incluidos los servicios DNS proporcionados y el servidor DNS externo híbrido y Bring Your Own DNS."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="93e2e-103">Opciones de resolución de nombres DNS para máquinas virtuales Linux en Azure</span><span class="sxs-lookup"><span data-stu-id="93e2e-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="93e2e-104">Azure proporciona resolución de nombres DNS de forma predeterminada para todas las máquinas virtuales de una única red virtual.</span><span class="sxs-lookup"><span data-stu-id="93e2e-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="93e2e-105">Puede implementar su propia solución de resolución de nombre DNS si configura sus propios servicios DNS en las máquinas virtuales hospedadas de Azure.</span><span class="sxs-lookup"><span data-stu-id="93e2e-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="93e2e-106">Hello siguientes escenarios deben ayudarle a elegir Hola uno que funciona para su situación.</span><span class="sxs-lookup"><span data-stu-id="93e2e-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="93e2e-107">Resolución de nombres que proporciona Azure</span><span class="sxs-lookup"><span data-stu-id="93e2e-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="93e2e-108">Resolución de nombres mediante su propio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="93e2e-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="93e2e-109">tipo Hello de resolución de nombres que utilice depende de cómo las máquinas virtuales y las instancias de rol necesitan toocommunicate entre sí.</span><span class="sxs-lookup"><span data-stu-id="93e2e-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="93e2e-110">Hello tabla siguiente muestra escenarios y soluciones de resolución de nombre correspondientes:</span><span class="sxs-lookup"><span data-stu-id="93e2e-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="93e2e-111">**Escenario**</span><span class="sxs-lookup"><span data-stu-id="93e2e-111">**Scenario**</span></span> | <span data-ttu-id="93e2e-112">**Solución**</span><span class="sxs-lookup"><span data-stu-id="93e2e-112">**Solution**</span></span> | <span data-ttu-id="93e2e-113">**Sufijo**</span><span class="sxs-lookup"><span data-stu-id="93e2e-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="93e2e-114">Resolución de nombres entre instancias de rol o máquinas virtuales en hello misma red virtual</span><span class="sxs-lookup"><span data-stu-id="93e2e-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="93e2e-115">Resolución de nombres que proporciona Azure</span><span class="sxs-lookup"><span data-stu-id="93e2e-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="93e2e-116">El nombre de host o el nombre de dominio completo (FQDN)</span><span class="sxs-lookup"><span data-stu-id="93e2e-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="93e2e-117">Resolución de nombres entre instancias de rol o máquinas virtuales de redes virtuales diferentes</span><span class="sxs-lookup"><span data-stu-id="93e2e-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="93e2e-118">Servidores DNS administrados por el cliente que reenvían consultas entre redes virtuales para la resolución mediante Azure (proxy DNS).</span><span class="sxs-lookup"><span data-stu-id="93e2e-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="93e2e-119">Consulte [Resolución de nombres mediante su propio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="93e2e-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="93e2e-120">Solo FQDN</span><span class="sxs-lookup"><span data-stu-id="93e2e-120">FQDN only</span></span> |
| <span data-ttu-id="93e2e-121">Resolución de nombres de servicios y de equipos locales desde instancias de rol o máquinas virtuales en Azure</span><span class="sxs-lookup"><span data-stu-id="93e2e-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="93e2e-122">Servidores DNS administrados por el cliente (por ejemplo, controlador de dominio local, controlador de dominio de solo lectura local o un DNS secundario sincronizado mediante transferencias de zona).</span><span class="sxs-lookup"><span data-stu-id="93e2e-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="93e2e-123">Consulte [Resolución de nombres mediante su propio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="93e2e-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="93e2e-124">Solo FQDN</span><span class="sxs-lookup"><span data-stu-id="93e2e-124">FQDN only</span></span> |
| <span data-ttu-id="93e2e-125">Resolución de nombres de host de Azure desde equipos locales</span><span class="sxs-lookup"><span data-stu-id="93e2e-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="93e2e-126">Reenviar consultas tooa administrada por el cliente DNS servidor proxy en la red virtual de hello correspondiente.</span><span class="sxs-lookup"><span data-stu-id="93e2e-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="93e2e-127">servidor proxy de Hello reenvía tooAzure de consultas para la resolución.</span><span class="sxs-lookup"><span data-stu-id="93e2e-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="93e2e-128">Consulte [Resolución de nombres mediante su propio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="93e2e-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="93e2e-129">Solo FQDN</span><span class="sxs-lookup"><span data-stu-id="93e2e-129">FQDN only</span></span> |
| <span data-ttu-id="93e2e-130">DNS inverso para direcciones IP internas</span><span class="sxs-lookup"><span data-stu-id="93e2e-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="93e2e-131">Resolución de nombres mediante su propio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="93e2e-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="93e2e-132">N/D</span><span class="sxs-lookup"><span data-stu-id="93e2e-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="93e2e-133">Resolución de nombres que proporciona Azure</span><span class="sxs-lookup"><span data-stu-id="93e2e-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="93e2e-134">Junto con la resolución de nombres DNS públicos, Azure proporciona resolución de nombres interna para máquinas virtuales e instancias de rol que se encuentran en Hola misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="93e2e-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="93e2e-135">En redes virtuales que se basan en el Administrador de recursos de Azure, sufijo DNS de hello es coherente a través de la red virtual de hello; Hola FQDN no es necesaria.</span><span class="sxs-lookup"><span data-stu-id="93e2e-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="93e2e-136">Los nombres DNS pueden asignarse tooboth tarjetas de interfaz de red (NIC) y máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="93e2e-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="93e2e-137">Aunque la resolución de nombres Hola que proporciona Azure no requiere ninguna configuración, no es Hola opción adecuada para todos los escenarios de implementación, tal como se muestra en la tabla anterior de Hola.</span><span class="sxs-lookup"><span data-stu-id="93e2e-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="93e2e-138">Características y consideraciones</span><span class="sxs-lookup"><span data-stu-id="93e2e-138">Features and considerations</span></span>
<span data-ttu-id="93e2e-139">**Características**</span><span class="sxs-lookup"><span data-stu-id="93e2e-139">**Features:**</span></span>

* <span data-ttu-id="93e2e-140">Toouse requiere la resolución de nombres que proporciona Azure no es ninguna configuración.</span><span class="sxs-lookup"><span data-stu-id="93e2e-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="93e2e-141">servicio de resolución de nombres de Hola que proporciona Azure está altamente disponible.</span><span class="sxs-lookup"><span data-stu-id="93e2e-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="93e2e-142">No necesita toocreate y administrar clústeres de sus propios servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="93e2e-143">servicio de resolución de nombres de Hola que proporciona Azure puede utilizarse junto con su propios tooresolve de servidores DNS locales y los nombres de host de Azure.</span><span class="sxs-lookup"><span data-stu-id="93e2e-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="93e2e-144">Se proporciona resolución de nombres entre máquinas virtuales en redes virtuales sin necesidad de hello FQDN.</span><span class="sxs-lookup"><span data-stu-id="93e2e-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="93e2e-145">Puede usar los nombres de host que describan mejor las implementaciones, en lugar de trabajar con nombres generados automáticamente.</span><span class="sxs-lookup"><span data-stu-id="93e2e-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="93e2e-146">**Consideraciones:**</span><span class="sxs-lookup"><span data-stu-id="93e2e-146">**Considerations:**</span></span>

* <span data-ttu-id="93e2e-147">no se puede modificar el sufijo DNS de Hola que Azure crea.</span><span class="sxs-lookup"><span data-stu-id="93e2e-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="93e2e-148">No se pueden registrar manualmente los registros propios.</span><span class="sxs-lookup"><span data-stu-id="93e2e-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="93e2e-149">No se admiten ni WINS ni NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="93e2e-150">Los nombres de host deben ser compatibles con DNS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="93e2e-151">Los nombres solamente pueden contener caracteres 0-9, a-z y "-", y no pueden comenzar ni terminar por "-".</span><span class="sxs-lookup"><span data-stu-id="93e2e-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="93e2e-152">Consulte la sección 2 de RFC 3696.</span><span class="sxs-lookup"><span data-stu-id="93e2e-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="93e2e-153">El tráfico de consultas de DNS está limitado en cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="93e2e-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="93e2e-154">La limitación no debería afectar a la mayoría de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="93e2e-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="93e2e-155">Si se observa una limitación de solicitudes, asegúrese de que está habilitado el almacenamiento en caché del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="93e2e-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="93e2e-156">Para obtener más información, consulte [obtener la mayoría de resolución de nombres que proporciona Azure hello](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="93e2e-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="93e2e-157">Obtener la mayoría de resolución de nombres que proporciona Azure Hola</span><span class="sxs-lookup"><span data-stu-id="93e2e-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="93e2e-158">**Almacenamiento en caché del lado cliente:**</span><span class="sxs-lookup"><span data-stu-id="93e2e-158">**Client-side caching:**</span></span>

<span data-ttu-id="93e2e-159">Algunas consultas DNS no se envían a través de red de Hola.</span><span class="sxs-lookup"><span data-stu-id="93e2e-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="93e2e-160">Almacenamiento en caché de cliente le ayuda a reducir la latencia y mejorar las incoherencias de toonetwork de resistencia al resolver las consultas DNS periódicas desde una memoria caché local.</span><span class="sxs-lookup"><span data-stu-id="93e2e-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="93e2e-161">Los registros DNS contienen un período de vida (TTL), lo que permite el registro de hello caché toostore Hola tanto como sea posible sin afectar a la actualización del registro.</span><span class="sxs-lookup"><span data-stu-id="93e2e-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="93e2e-162">Por ello, la caché del cliente es adecuada para la mayoría de las situaciones.</span><span class="sxs-lookup"><span data-stu-id="93e2e-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="93e2e-163">Algunas distribuciones de Linux no incluyen el almacenamiento en caché de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="93e2e-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="93e2e-164">Se recomienda agregar una máquina virtual de Linux de tooeach de memoria caché después de comprobar que no hay una memoria caché local ya.</span><span class="sxs-lookup"><span data-stu-id="93e2e-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="93e2e-165">Hay disponibles varios paquetes de almacenamiento en caché DNS, como dnsmasq.</span><span class="sxs-lookup"><span data-stu-id="93e2e-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="93e2e-166">Estos son Hola pasos tooinstall dnsmasq en distribuciones de hello más comunes:</span><span class="sxs-lookup"><span data-stu-id="93e2e-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="93e2e-167">**Ubuntu (usa resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="93e2e-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="93e2e-168">Instalar paquetes de saludo dnsmasq ("sudo instalación apt get dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="93e2e-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="93e2e-169">**SUSE (usa netconf)**:</span><span class="sxs-lookup"><span data-stu-id="93e2e-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="93e2e-170">Instalar paquetes de saludo dnsmasq ("sudo zypper install dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="93e2e-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="93e2e-171">Habilitar hello dnsmasq servicio ("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="93e2e-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="93e2e-172">Iniciar servicio de hello dnsmasq ("systemctl inicio dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="93e2e-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="93e2e-173">Editar "/ etcetera/sysconfig/red/config" y cambiar NETCONFIG_DNS_FORWARDER = "" demasiado "dnsmasq".</span><span class="sxs-lookup"><span data-stu-id="93e2e-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="93e2e-174">Actualizar resolv.conf ("actualización de netconfig") tooset Hola caché como Hola a resolución DNS local.</span><span class="sxs-lookup"><span data-stu-id="93e2e-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="93e2e-175">**CentOS de Rogue Wave Software (anteriormente OpenLogic; usa NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="93e2e-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="93e2e-176">Instalar paquetes de saludo dnsmasq ("sudo yum install dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="93e2e-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="93e2e-177">Habilitar hello dnsmasq servicio ("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="93e2e-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="93e2e-178">Iniciar servicio de hello dnsmasq ("systemctl inicio dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="93e2e-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="93e2e-179">Agregar "anteponer servidores de nombres de dominio 127.0.0.1;" too"/etc/dhclient-eth0.conf".</span><span class="sxs-lookup"><span data-stu-id="93e2e-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="93e2e-180">Reinicie caché de Hola de tooset ("reinicio de red de servicio") del servicio de la red hello como Hola a resolución DNS local</span><span class="sxs-lookup"><span data-stu-id="93e2e-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="93e2e-181">: paquete de 'dnsmasq' hello es solo una de hello muchos DNS almacena en caché que están disponibles para Linux.</span><span class="sxs-lookup"><span data-stu-id="93e2e-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="93e2e-182">Antes de usarlo, compruebe su idoneidad para sus necesidades y asegúrese de que no haya instalada ninguna otra memoria caché.</span><span class="sxs-lookup"><span data-stu-id="93e2e-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="93e2e-183">**Reintentos del cliente:**</span><span class="sxs-lookup"><span data-stu-id="93e2e-183">**Client-side retries**</span></span>

<span data-ttu-id="93e2e-184">DNS es principalmente un protocolo UDP.</span><span class="sxs-lookup"><span data-stu-id="93e2e-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="93e2e-185">Dado que Hola protocolo UDP no garantiza la entrega de mensajes, Hola propio protocolo DNS controla lógica de reintento.</span><span class="sxs-lookup"><span data-stu-id="93e2e-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="93e2e-186">Cada cliente DNS (sistema operativo) puede ofrecer una lógica de reintento diferentes según la preferencia del creador de hello:</span><span class="sxs-lookup"><span data-stu-id="93e2e-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="93e2e-187">Los sistemas operativos Windows realizan un reintento tras un segundo y después tras otros dos, cuatro y otros cuatro segundos.</span><span class="sxs-lookup"><span data-stu-id="93e2e-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="93e2e-188">Hola reintentos del programa de instalación de Linux de manera predeterminada después de cinco segundos.</span><span class="sxs-lookup"><span data-stu-id="93e2e-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="93e2e-189">Debe cambiar este tooretry cinco veces en intervalos de un segundo.</span><span class="sxs-lookup"><span data-stu-id="93e2e-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="93e2e-190">toocheck Hola configuración actual en una máquina virtual de Linux, 'cat /etc/resolv.conf' y busque en línea de hello 'options', por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="93e2e-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="93e2e-191">archivo de Hello resolv.conf generado automáticamente y no debe editarse.</span><span class="sxs-lookup"><span data-stu-id="93e2e-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="93e2e-192">Hola pasos concretos que agregar hello 'options' línea varían según la distribución:</span><span class="sxs-lookup"><span data-stu-id="93e2e-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="93e2e-193">**Ubuntu** (usa resolvconf)</span><span class="sxs-lookup"><span data-stu-id="93e2e-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="93e2e-194">Agregar Hola opciones línea too'/etc/resolveconf/resolv.conf.d/head'.</span><span class="sxs-lookup"><span data-stu-id="93e2e-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="93e2e-195">Ejecute 'resolvconf -u' tooupdate.</span><span class="sxs-lookup"><span data-stu-id="93e2e-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="93e2e-196">**SUSE** (usa netconf)</span><span class="sxs-lookup"><span data-stu-id="93e2e-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="93e2e-197">Agregue 'timeout:1 intentos: 5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = "" parámetro en '/ etcetera/sysconfig/red/config'.</span><span class="sxs-lookup"><span data-stu-id="93e2e-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="93e2e-198">Ejecute tooupdate 'netconfig update'.</span><span class="sxs-lookup"><span data-stu-id="93e2e-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="93e2e-199">**CentOS de Rogue Wave Software (anteriormente OpenLogic)** (usa NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="93e2e-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="93e2e-200">Agregar too'/etc/NetworkManager/dispatcher.d/11-dhclient "eco" opciones timeout:1 intentos: 5"" '.</span><span class="sxs-lookup"><span data-stu-id="93e2e-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="93e2e-201">Ejecute tooupdate 'reinicio de la red de servicio'.</span><span class="sxs-lookup"><span data-stu-id="93e2e-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="93e2e-202">Resolución de nombres mediante su propio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="93e2e-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="93e2e-203">Sus necesidades de resolución de nombres pueden ir más allá de las características de Hola que proporciona Azure.</span><span class="sxs-lookup"><span data-stu-id="93e2e-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="93e2e-204">Por ejemplo, puede necesitar resolución DNS entre redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="93e2e-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="93e2e-205">toocover este escenario, puede utilizar sus propios servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="93e2e-206">Los servidores DNS de DNS reenviar consultas a toorecursive resoluciones de nombres de host de Azure tooresolve un puede red virtual que se encuentran en Hola misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="93e2e-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="93e2e-207">Por ejemplo, un servidor DNS que se ejecuta en Azure puede responder consultas tooDNS para su propio DNS archivos de la zona y reenvían todos los demás tooAzure de las consultas.</span><span class="sxs-lookup"><span data-stu-id="93e2e-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="93e2e-208">Esta funcionalidad permite toosee de máquinas virtuales tanto las entradas de los archivos de zona y los nombres de host que Azure proporciona (a través de reenviador de hello).</span><span class="sxs-lookup"><span data-stu-id="93e2e-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="93e2e-209">Solucionadores de recursiva toohello de acceso de Azure se proporciona a través de la dirección IP virtual de hello 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="93e2e-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="93e2e-210">El reenvío de DNS también habilita la resolución DNS entre redes virtuales y permite que los nombres de host de tooresolve local de máquinas que proporciona Azure.</span><span class="sxs-lookup"><span data-stu-id="93e2e-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="93e2e-211">tooresolve nombre de host de una máquina virtual, máquina virtual de hello DNS server debe residir en Hola misma red virtual y ser tooAzure de consultas de nombre de host tooforward configurado.</span><span class="sxs-lookup"><span data-stu-id="93e2e-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="93e2e-212">Como sufijo DNS de hello es diferente en cada red virtual, puede utilizar el reenvío condicional reglas toosend DNS consulta toohello corregir una red virtual para la resolución.</span><span class="sxs-lookup"><span data-stu-id="93e2e-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="93e2e-213">Hello siguiente imagen muestra dos redes virtuales y una red local realizar la resolución DNS entre redes virtuales con este método:</span><span class="sxs-lookup"><span data-stu-id="93e2e-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Resolución DNS entre redes virtuales](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="93e2e-215">Cuando se utiliza la resolución de nombres que proporciona Azure, sufijo DNS interno de Hola se proporciona tooeach virtual machine mediante DHCP.</span><span class="sxs-lookup"><span data-stu-id="93e2e-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="93e2e-216">Cuando se usa su propia solución de resolución de nombre, este sufijo no es máquinas toovirtual proporcionado porque sufijo Hola interfiere con otras arquitecturas DNS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="93e2e-217">toorefer toomachines por FQDN o tooconfigure sufijo hello en sus máquinas virtuales, puede usar PowerShell o hello sufijo Hola de API toodetermine:</span><span class="sxs-lookup"><span data-stu-id="93e2e-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="93e2e-218">Para redes virtuales que están administradas por el Administrador de recursos de Azure, está disponible a través de hello sufijo hello [tarjeta de interfaz de red](https://msdn.microsoft.com/library/azure/mt163668.aspx) recursos.</span><span class="sxs-lookup"><span data-stu-id="93e2e-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="93e2e-219">También puede ejecutar hello `azure network public-ip show <resource group> <pip name>` comando detalles de hello toodisplay del IP pública, que incluye Hola FQDN de hello NIC.</span><span class="sxs-lookup"><span data-stu-id="93e2e-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="93e2e-220">Si el reenvío de las consultas tooAzure no se ajusta a sus necesidades, deberá tooprovide su propia solución DNS.</span><span class="sxs-lookup"><span data-stu-id="93e2e-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="93e2e-221">La solución DNS debe:</span><span class="sxs-lookup"><span data-stu-id="93e2e-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="93e2e-222">Proporcionar la resolución adecuada de nombres de host, por ejemplo, mediante [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="93e2e-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="93e2e-223">Si usas DDNS, tendrá que la limpieza de registros DNS de toodisable.</span><span class="sxs-lookup"><span data-stu-id="93e2e-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="93e2e-224">Las concesiones DHCP de Azure son muy largas y la limpieza puede eliminar registros DNS de forma prematura.</span><span class="sxs-lookup"><span data-stu-id="93e2e-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="93e2e-225">Proporcionar resolución recursiva adecuado de tooallow de resolución de nombres de dominio externos.</span><span class="sxs-lookup"><span data-stu-id="93e2e-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="93e2e-226">Estar accesible (TCP y UDP en el puerto 53) de los clientes de hello atienda y estar hello tooaccess capaz de Internet.</span><span class="sxs-lookup"><span data-stu-id="93e2e-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="93e2e-227">Protegerse contra el acceso hello toomitigate las amenazas de Internet que suponen los agentes externos.</span><span class="sxs-lookup"><span data-stu-id="93e2e-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="93e2e-228">Para obtener el mejor rendimiento, cuando se usa máquinas virtuales en los servidores DNS de Azure, deshabilitar IPv6 y asignar un [IP pública a nivel de instancia](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS servidor virtual machine.</span><span class="sxs-lookup"><span data-stu-id="93e2e-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>

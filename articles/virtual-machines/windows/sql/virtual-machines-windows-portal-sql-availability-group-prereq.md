---
title: "Grupos de disponibilidad de SQL Server: máquinas virtuales de Azure (requisitos previos) | Microsoft Docs"
description: "En este tutorial se muestra cómo configurar los requisitos previos para crear un grupo de disponibilidad de SQL Server AlwaysOn en máquinas virtuales de Azure."
services: virtual-machines
documentationCenter: na
authors: MikeRayMSFT
manager: jhubbard
editor: monicar
tags: azure-service-management
ms.assetid: c492db4c-3faa-4645-849f-5a1a663be55a
ms.service: virtual-machines-sql
ms.devlang: na
ms.custom: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/09/2017
ms.author: mikeray
ms.openlocfilehash: 3d508877928e033f24dae62c1042745ea7250033
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="complete-the-prerequisites-for-creating-always-on-availability-groups-on-azure-virtual-machines"></a><span data-ttu-id="eaf61-103">Realización de los requisitos previos para crear grupos de disponibilidad AlwaysOn en máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-103">Complete the prerequisites for creating Always On availability groups on Azure virtual machines</span></span>

<span data-ttu-id="eaf61-104">En este tutorial se muestra cómo completar los requisitos previos para crear un [grupo de disponibilidad de SQL Server AlwaysOn en máquinas virtuales (VM) de Azure](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="eaf61-104">This tutorial shows how to complete the prerequisites for creating a [SQL Server Always On availability group on Azure virtual machines (VMs)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span></span> <span data-ttu-id="eaf61-105">Cuando haya completado los requisitos previos, tendrá un controlador de dominio, dos máquinas virtuales SQL Server y un servidor testigo en un único grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-105">When you've finished the prerequisites, you have a domain controller, two SQL Server VMs, and a witness server in a single resource group.</span></span>

<span data-ttu-id="eaf61-106">**Tiempo estimado**: los requisitos previos pueden tardar hasta un par de horas en completarse.</span><span class="sxs-lookup"><span data-stu-id="eaf61-106">**Time estimate**: It might take a couple of hours to complete the prerequisites.</span></span> <span data-ttu-id="eaf61-107">Gran parte de este tiempo se invierte en crear máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="eaf61-107">Much of this time is spent creating virtual machines.</span></span>

<span data-ttu-id="eaf61-108">En el diagrama se muestra lo que va a crear en el tutorial.</span><span class="sxs-lookup"><span data-stu-id="eaf61-108">The following diagram illustrates what you build in the tutorial.</span></span>

![Grupo de disponibilidad](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/00-EndstateSampleNoELB.png)

## <a name="review-availability-group-documentation"></a><span data-ttu-id="eaf61-110">Revisión de la documentación del grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="eaf61-110">Review availability group documentation</span></span>

<span data-ttu-id="eaf61-111">En este tutorial se da por supuesto que tiene conocimientos básicos de grupos de disponibilidad de SQL Server AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="eaf61-111">This tutorial assumes that you have a basic understanding of SQL Server Always On availability groups.</span></span> <span data-ttu-id="eaf61-112">Si no está familiarizado con esta tecnología, consulte [Información general de los grupos de disponibilidad AlwaysOn (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span><span class="sxs-lookup"><span data-stu-id="eaf61-112">If you're not familiar with this technology, see [Overview of Always On Availability Groups (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span></span>


## <a name="create-an-azure-account"></a><span data-ttu-id="eaf61-113">Crear una cuenta de Azure</span><span class="sxs-lookup"><span data-stu-id="eaf61-113">Create an Azure account</span></span>
<span data-ttu-id="eaf61-114">Necesitará una cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-114">You need an Azure account.</span></span> <span data-ttu-id="eaf61-115">Puede [abrir una cuenta gratuita de Azure](/pricing/free-trial/?WT.mc_id=A261C142F) o [activar las ventajas que disfrutan los suscriptores de Visual Studio](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span><span class="sxs-lookup"><span data-stu-id="eaf61-115">You can [open a free Azure account](/pricing/free-trial/?WT.mc_id=A261C142F) or [activate Visual Studio subscriber benefits](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span></span>

## <a name="create-a-resource-group"></a><span data-ttu-id="eaf61-116">Crear un grupo de recursos</span><span class="sxs-lookup"><span data-stu-id="eaf61-116">Create a resource group</span></span>
1. <span data-ttu-id="eaf61-117">Inicie sesión en el [Portal de Azure](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="eaf61-117">Sign in to the [Azure portal](http://portal.azure.com).</span></span>
2. <span data-ttu-id="eaf61-118">Haga clic en **+** para crear un nuevo objeto en el portal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-118">Click **+** to create a new object in the portal.</span></span>

   ![Nuevo objeto](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-portalplus.png)

3. <span data-ttu-id="eaf61-120">Haga clic en **grupo de recursos** en la ventana de búsqueda de **Marketplace**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-120">Type **resource group** in the **Marketplace** search window.</span></span>

   ![Grupos de recursos](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroupsymbol.png)
4. <span data-ttu-id="eaf61-122">Haga clic en **Grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-122">Click **Resource group**.</span></span>
5. <span data-ttu-id="eaf61-123">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-123">Click **Create**.</span></span>
6. <span data-ttu-id="eaf61-124">En la hoja **Grupo de recursos**, en **Nombre del grupo de recursos**, escriba un nombre para el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-124">On the **Resource group** blade, under **Resource group name**, type a name for the resource group.</span></span> <span data-ttu-id="eaf61-125">Por ejemplo, escriba **sql-ha-rg**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-125">For example, type **sql-ha-rg**.</span></span>
7. <span data-ttu-id="eaf61-126">Si tiene varias suscripciones de Azure, compruebe que la suscripción es la suscripción de Azure en la que quiere crear el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-126">If you have multiple Azure subscriptions, verify that the subscription is the Azure subscription that you want to create the availability group in.</span></span>
8. <span data-ttu-id="eaf61-127">Seleccione una ubicación.</span><span class="sxs-lookup"><span data-stu-id="eaf61-127">Select a location.</span></span> <span data-ttu-id="eaf61-128">La ubicación es la región de Azure donde desea crear el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-128">The location is the Azure region where you want to create the availability group.</span></span> <span data-ttu-id="eaf61-129">Para este tutorial, vamos a crear todos los recursos en una ubicación de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-129">For this tutorial, we're going to build all resources in one Azure location.</span></span>
9. <span data-ttu-id="eaf61-130">Compruebe que la función **Anclar al panel** está activada.</span><span class="sxs-lookup"><span data-stu-id="eaf61-130">Verify that **Pin to dashboard** is checked.</span></span> <span data-ttu-id="eaf61-131">Este parámetro opcional coloca un acceso directo para el grupo de recursos en el panel del Portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-131">This optional setting places a shortcut for the resource group on the Azure portal dashboard.</span></span>

   ![Grupos de recursos](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroup.png)

10. <span data-ttu-id="eaf61-133">Haga clic en **Crear** para crear el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-133">Click **Create** to create the resource group.</span></span>

<span data-ttu-id="eaf61-134">Azure crea el grupo de recursos y ancla un acceso directo a él en el portal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-134">Azure creates the resource group and pins a shortcut to the resource group in the portal.</span></span>

## <a name="create-the-network-and-subnets"></a><span data-ttu-id="eaf61-135">Creación de redes y subredes</span><span class="sxs-lookup"><span data-stu-id="eaf61-135">Create the network and subnets</span></span>
<span data-ttu-id="eaf61-136">El siguiente paso es crear las redes y subredes en el grupo de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-136">The next step is to create the networks and subnets in the Azure resource group.</span></span>

<span data-ttu-id="eaf61-137">La solución usa una red virtual con dos subredes.</span><span class="sxs-lookup"><span data-stu-id="eaf61-137">The solution uses one virtual network with two subnets.</span></span> <span data-ttu-id="eaf61-138">En [Información general sobre redes virtuales](../../../virtual-network/virtual-networks-overview.md) encontrará más información sobre las redes de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-138">The [Virtual network overview](../../../virtual-network/virtual-networks-overview.md) provides more information about networks in Azure.</span></span>

<span data-ttu-id="eaf61-139">Para crear la red virtual:</span><span class="sxs-lookup"><span data-stu-id="eaf61-139">To create the virtual network:</span></span>

1. <span data-ttu-id="eaf61-140">En Azure Portal, en el grupo de recursos, haga clic en **+ Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-140">In the Azure portal, in your resource group, click **+ Add**.</span></span> <span data-ttu-id="eaf61-141">Azure abre la hoja **Todo** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-141">Azure opens the **Everything** blade.</span></span>

   ![Nuevo elemento](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/02-newiteminrg.png)
2. <span data-ttu-id="eaf61-143">Busque **red virtual**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-143">Search for **virtual network**.</span></span>

     ![Búsqueda de una red virtual](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/04-findvirtualnetwork.png)
3. <span data-ttu-id="eaf61-145">Haga clic en **Red virtual**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-145">Click **Virtual network**.</span></span>
4. <span data-ttu-id="eaf61-146">En la hoja **Red virtual**, haga clic en el modelo de implementación de **Resource Manager** y en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-146">On the **Virtual network** blade, click the **Resource Manager** deployment model, and then click **Create**.</span></span>

    <span data-ttu-id="eaf61-147">La siguiente tabla muestra la configuración de la red virtual:</span><span class="sxs-lookup"><span data-stu-id="eaf61-147">The following table shows the settings for the virtual network:</span></span>

   | <span data-ttu-id="eaf61-148">**Campo**</span><span class="sxs-lookup"><span data-stu-id="eaf61-148">**Field**</span></span> | <span data-ttu-id="eaf61-149">Valor</span><span class="sxs-lookup"><span data-stu-id="eaf61-149">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="eaf61-150">**Name**</span><span class="sxs-lookup"><span data-stu-id="eaf61-150">**Name**</span></span> |<span data-ttu-id="eaf61-151">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="eaf61-151">autoHAVNET</span></span> |
   | <span data-ttu-id="eaf61-152">**Espacio de direcciones**</span><span class="sxs-lookup"><span data-stu-id="eaf61-152">**Address space**</span></span> |<span data-ttu-id="eaf61-153">10.33.0.0/24</span><span class="sxs-lookup"><span data-stu-id="eaf61-153">10.33.0.0/24</span></span> |
   | <span data-ttu-id="eaf61-154">**Nombre de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-154">**Subnet name**</span></span> |<span data-ttu-id="eaf61-155">Administrador</span><span class="sxs-lookup"><span data-stu-id="eaf61-155">Admin</span></span> |
   | <span data-ttu-id="eaf61-156">**Intervalo de direcciones de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-156">**Subnet address range**</span></span> |<span data-ttu-id="eaf61-157">10.33.0.0/29</span><span class="sxs-lookup"><span data-stu-id="eaf61-157">10.33.0.0/29</span></span> |
   | <span data-ttu-id="eaf61-158">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="eaf61-158">**Subscription**</span></span> |<span data-ttu-id="eaf61-159">Especifique la suscripción que quiere usar.</span><span class="sxs-lookup"><span data-stu-id="eaf61-159">Specify the subscription that you intend to use.</span></span> <span data-ttu-id="eaf61-160">El campo **Suscripción** está en blanco si solo tiene una suscripción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-160">**Subscription** is blank if you only have one subscription.</span></span> |
   | <span data-ttu-id="eaf61-161">**Grupos de recursos**</span><span class="sxs-lookup"><span data-stu-id="eaf61-161">**Resource group**</span></span> |<span data-ttu-id="eaf61-162">Elija la opción **Usar existente** y seleccione el nombre del grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-162">Choose **Use existing** and pick the name of the resource group.</span></span> |
   | <span data-ttu-id="eaf61-163">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="eaf61-163">**Location**</span></span> |<span data-ttu-id="eaf61-164">Especifique la ubicación de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-164">Specify the Azure location.</span></span> |

   <span data-ttu-id="eaf61-165">El intervalo de direcciones de subred y el espacio de direcciones podrían ser distintos a los de la tabla.</span><span class="sxs-lookup"><span data-stu-id="eaf61-165">Your address space and subnet address range might be different from the table.</span></span> <span data-ttu-id="eaf61-166">Según su suscripción, el portal recomienda un espacio de direcciones disponible y el intervalo de direcciones de subred correspondiente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-166">Depending on your subscription, the portal suggests an available address space and corresponding subnet address range.</span></span> <span data-ttu-id="eaf61-167">Si no hay suficiente espacio de direcciones disponible, use otra suscripción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-167">If no sufficient address space is available, use a different subscription.</span></span>

   <span data-ttu-id="eaf61-168">En el ejemplo se usa el nombre de subred **Admin**. Esta subred es para los controladores de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-168">The example uses the subnet name **Admin**. This subnet is for the domain controllers.</span></span>

5. <span data-ttu-id="eaf61-169">Haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-169">Click **Create**.</span></span>

   ![Configuración de la red virtual](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/06-configurevirtualnetwork.png)

<span data-ttu-id="eaf61-171">Azure le devuelve al panel del portal y le informa cuando se cree la red.</span><span class="sxs-lookup"><span data-stu-id="eaf61-171">Azure returns you to the portal dashboard and notifies you when the new network is created.</span></span>

### <a name="create-a-second-subnet"></a><span data-ttu-id="eaf61-172">Cree una segunda subred.</span><span class="sxs-lookup"><span data-stu-id="eaf61-172">Create a second subnet</span></span>
<span data-ttu-id="eaf61-173">La nueva red virtual tiene una subred denominada **Admin**. Los controladores de dominio usan esta subred.</span><span class="sxs-lookup"><span data-stu-id="eaf61-173">The new virtual network has one subnet, named **Admin**. The domain controllers use this subnet.</span></span> <span data-ttu-id="eaf61-174">Las máquinas virtuales con SQL Server usan una segunda subred denominada **SQL**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-174">The SQL Server VMs use a second subnet named **SQL**.</span></span> <span data-ttu-id="eaf61-175">Para configurar esta subred, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="eaf61-175">To configure this subnet:</span></span>

1. <span data-ttu-id="eaf61-176">En el panel, haga clic en el grupo de recursos que ha creado, **SQL-HA-RG**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-176">On your dashboard, click the resource group that you created, **SQL-HA-RG**.</span></span> <span data-ttu-id="eaf61-177">En **Recursos**, busque la red en el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-177">Locate the network in the resource group under **Resources**.</span></span>

    <span data-ttu-id="eaf61-178">Si **SQL-HA-RG** no está visible, haga clic en **Grupos de recursos** y filtre por el nombre del grupo de recursos para encontrarlo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-178">If **SQL-HA-RG** isn't visible, find it by clicking **Resource Groups** and filtering by the resource group name.</span></span>
2. <span data-ttu-id="eaf61-179">Haga clic en **autoHAVNET** en la lista de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-179">Click **autoHAVNET** on the list of resources.</span></span> <span data-ttu-id="eaf61-180">Azure abre la hoja de configuración de red.</span><span class="sxs-lookup"><span data-stu-id="eaf61-180">Azure opens the network configuration blade.</span></span>
3. <span data-ttu-id="eaf61-181">En la hoja de la red virtual **autoHAVNET**, en **Configuración** haga clic en **Subredes**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-181">On the **autoHAVNET** virtual network blade, under **Settings** , click **Subnets**.</span></span>

    <span data-ttu-id="eaf61-182">Observe la subred que ya ha creado.</span><span class="sxs-lookup"><span data-stu-id="eaf61-182">Note the subnet that you already created.</span></span>

   ![Configuración de la red virtual](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/07-addsubnet.png)
5. <span data-ttu-id="eaf61-184">Cree una segunda subred.</span><span class="sxs-lookup"><span data-stu-id="eaf61-184">Create a second subnet.</span></span> <span data-ttu-id="eaf61-185">Haga clic en **+ Subred**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-185">Click **+ Subnet**.</span></span>
6. <span data-ttu-id="eaf61-186">En la hoja **Agregar subred**, configure la subred escribiendo **sqlsubnet** en **Nombre**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-186">On the **Add subnet** blade, configure the subnet by typing **sqlsubnet** under **Name**.</span></span> <span data-ttu-id="eaf61-187">Azure especifica automáticamente un valor válido en **Intervalo de direcciones**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-187">Azure automatically specifies a valid **Address range**.</span></span> <span data-ttu-id="eaf61-188">Compruebe que este intervalo de direcciones tiene al menos 10 direcciones.</span><span class="sxs-lookup"><span data-stu-id="eaf61-188">Verify that this address range has at least 10 addresses in it.</span></span> <span data-ttu-id="eaf61-189">En un entorno de producción, puede que necesite más direcciones.</span><span class="sxs-lookup"><span data-stu-id="eaf61-189">In a production environment, you might require more addresses.</span></span>
7. <span data-ttu-id="eaf61-190">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-190">Click **OK**.</span></span>

    ![Configuración de la red virtual](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/08-configuresubnet.png)

<span data-ttu-id="eaf61-192">En la tabla siguiente se resumen las opciones de configuración de red:</span><span class="sxs-lookup"><span data-stu-id="eaf61-192">The following table summarizes the network configuration settings:</span></span>

| <span data-ttu-id="eaf61-193">**Campo**</span><span class="sxs-lookup"><span data-stu-id="eaf61-193">**Field**</span></span> | <span data-ttu-id="eaf61-194">Valor</span><span class="sxs-lookup"><span data-stu-id="eaf61-194">Value</span></span> |
| --- | --- |
| <span data-ttu-id="eaf61-195">**Name**</span><span class="sxs-lookup"><span data-stu-id="eaf61-195">**Name**</span></span> |<span data-ttu-id="eaf61-196">**autoHAVNET**</span><span class="sxs-lookup"><span data-stu-id="eaf61-196">**autoHAVNET**</span></span> |
| <span data-ttu-id="eaf61-197">**Espacio de direcciones**</span><span class="sxs-lookup"><span data-stu-id="eaf61-197">**Address space**</span></span> |<span data-ttu-id="eaf61-198">Este valor depende de los espacios de direcciones disponibles en su suscripción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-198">This value depends on the available address spaces in your subscription.</span></span> <span data-ttu-id="eaf61-199">Un valor típico es 10.0.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="eaf61-199">A typical value is 10.0.0.0/16.</span></span> |
| <span data-ttu-id="eaf61-200">**Nombre de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-200">**Subnet name**</span></span> |<span data-ttu-id="eaf61-201">**admin**</span><span class="sxs-lookup"><span data-stu-id="eaf61-201">**admin**</span></span> |
| <span data-ttu-id="eaf61-202">**Intervalo de direcciones de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-202">**Subnet address range**</span></span> |<span data-ttu-id="eaf61-203">Este valor depende de los intervalos de direcciones disponibles en su suscripción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-203">This value depends on the available address ranges in your subscription.</span></span> <span data-ttu-id="eaf61-204">Un valor típico es 10.0.0.0/24.</span><span class="sxs-lookup"><span data-stu-id="eaf61-204">A typical value is 10.0.0.0/24.</span></span> |
| <span data-ttu-id="eaf61-205">**Nombre de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-205">**Subnet name**</span></span> |<span data-ttu-id="eaf61-206">**sqlsubnet**</span><span class="sxs-lookup"><span data-stu-id="eaf61-206">**sqlsubnet**</span></span> |
| <span data-ttu-id="eaf61-207">**Intervalo de direcciones de subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-207">**Subnet address range**</span></span> |<span data-ttu-id="eaf61-208">Este valor depende de los intervalos de direcciones disponibles en su suscripción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-208">This value depends on the available address ranges in your subscription.</span></span> <span data-ttu-id="eaf61-209">Un valor típico es 10.0.1.0/24.</span><span class="sxs-lookup"><span data-stu-id="eaf61-209">A typical value is 10.0.1.0/24.</span></span> |
| <span data-ttu-id="eaf61-210">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="eaf61-210">**Subscription**</span></span> |<span data-ttu-id="eaf61-211">Especifique la suscripción que quiere usar.</span><span class="sxs-lookup"><span data-stu-id="eaf61-211">Specify the subscription that you intend to use.</span></span> |
| <span data-ttu-id="eaf61-212">**Grupo de recursos**</span><span class="sxs-lookup"><span data-stu-id="eaf61-212">**Resource Group**</span></span> |<span data-ttu-id="eaf61-213">**SQL-HA-RG**</span><span class="sxs-lookup"><span data-stu-id="eaf61-213">**SQL-HA-RG**</span></span> |
| <span data-ttu-id="eaf61-214">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="eaf61-214">**Location**</span></span> |<span data-ttu-id="eaf61-215">Especifique la misma ubicación que eligió para el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-215">Specify the same location that you chose for the resource group.</span></span> |

## <a name="create-availability-sets"></a><span data-ttu-id="eaf61-216">Creación de conjuntos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="eaf61-216">Create availability sets</span></span>

<span data-ttu-id="eaf61-217">Antes de crear máquinas virtuales, debe crear conjuntos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-217">Before you create virtual machines, you need to create availability sets.</span></span> <span data-ttu-id="eaf61-218">Los conjuntos de disponibilidad reducen el tiempo de inactividad de cara al mantenimiento, tanto planeado como no planeado.</span><span class="sxs-lookup"><span data-stu-id="eaf61-218">Availability sets reduce the downtime for planned or unplanned maintenance events.</span></span> <span data-ttu-id="eaf61-219">Un conjunto de disponibilidad de Azure es un grupo lógico de recursos que Azure coloca en dominios de error y de actualización físicos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-219">An Azure availability set is a logical group of resources that Azure places on physical fault domains and update domains.</span></span> <span data-ttu-id="eaf61-220">Un dominio de error garantiza que los miembros del conjunto de disponibilidad tengan recursos de energía y red independientes.</span><span class="sxs-lookup"><span data-stu-id="eaf61-220">A fault domain ensures that the members of the availability set have separate power and network resources.</span></span> <span data-ttu-id="eaf61-221">Un dominio de actualización garantiza que los miembros del conjunto de disponibilidad no pasen a inactividad por mantenimiento al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-221">An update domain ensures that members of the availability set aren't brought down for maintenance at the same time.</span></span> <span data-ttu-id="eaf61-222">Para más información, consulte [Administración de la disponibilidad de las máquinas virtuales](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="eaf61-222">For more information, see [Manage the availability of virtual machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="eaf61-223">Necesita dos conjuntos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-223">You need two availability sets.</span></span> <span data-ttu-id="eaf61-224">El primero es para los controladores de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-224">One is for the domain controllers.</span></span> <span data-ttu-id="eaf61-225">y el segundo, para las máquinas virtuales con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-225">The second is for the SQL Server VMs.</span></span>

<span data-ttu-id="eaf61-226">Para crear un conjunto de disponibilidad, vaya al grupo de recursos y haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-226">To create an availability set, go to the resource group and click **Add**.</span></span> <span data-ttu-id="eaf61-227">Para filtrar los resultados, escriba **conjunto de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-227">Filter the results by typing **availability set**.</span></span> <span data-ttu-id="eaf61-228">Haga clic en **Conjunto de disponibilidad** en los resultados y, a continuación, haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-228">Click **Availability Set** in the results, and then click **Create**.</span></span>

<span data-ttu-id="eaf61-229">Configure dos conjuntos de disponibilidad según los parámetros de la tabla siguiente:</span><span class="sxs-lookup"><span data-stu-id="eaf61-229">Configure two availability sets according to the parameters in the following table:</span></span>

| <span data-ttu-id="eaf61-230">**Campo**</span><span class="sxs-lookup"><span data-stu-id="eaf61-230">**Field**</span></span> | <span data-ttu-id="eaf61-231">Conjunto de disponibilidad del controlador de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-231">Domain controller availability set</span></span> | <span data-ttu-id="eaf61-232">Conjunto de disponibilidad de SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-232">SQL Server availability set</span></span> |
| --- | --- | --- |
| <span data-ttu-id="eaf61-233">**Name**</span><span class="sxs-lookup"><span data-stu-id="eaf61-233">**Name**</span></span> |<span data-ttu-id="eaf61-234">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="eaf61-234">adavailabilityset</span></span> |<span data-ttu-id="eaf61-235">sqlavailabilityset</span><span class="sxs-lookup"><span data-stu-id="eaf61-235">sqlavailabilityset</span></span> |
| <span data-ttu-id="eaf61-236">**Grupos de recursos**</span><span class="sxs-lookup"><span data-stu-id="eaf61-236">**Resource group**</span></span> |<span data-ttu-id="eaf61-237">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="eaf61-237">SQL-HA-RG</span></span> |<span data-ttu-id="eaf61-238">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="eaf61-238">SQL-HA-RG</span></span> |
| <span data-ttu-id="eaf61-239">**Dominios de error**</span><span class="sxs-lookup"><span data-stu-id="eaf61-239">**Fault domains**</span></span> |<span data-ttu-id="eaf61-240">3</span><span class="sxs-lookup"><span data-stu-id="eaf61-240">3</span></span> |<span data-ttu-id="eaf61-241">3</span><span class="sxs-lookup"><span data-stu-id="eaf61-241">3</span></span> |
| <span data-ttu-id="eaf61-242">**Dominios de actualización**</span><span class="sxs-lookup"><span data-stu-id="eaf61-242">**Update domains**</span></span> |<span data-ttu-id="eaf61-243">5</span><span class="sxs-lookup"><span data-stu-id="eaf61-243">5</span></span> |<span data-ttu-id="eaf61-244">3</span><span class="sxs-lookup"><span data-stu-id="eaf61-244">3</span></span> |

<span data-ttu-id="eaf61-245">Después de crear los conjuntos de disponibilidad, vuelva al grupo de recursos en el Portal de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-245">After you create the availability sets, return to the resource group in the Azure portal.</span></span>

## <a name="create-domain-controllers"></a><span data-ttu-id="eaf61-246">Creación de controladores de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-246">Create domain controllers</span></span>
<span data-ttu-id="eaf61-247">Después de haber creado la red, las subredes, los conjuntos de disponibilidad y un equilibrador de carga accesible desde Internet, está preparado para crear las máquinas virtuales para los controladores de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-247">After you've created the network, subnets, availability sets, and an Internet-facing load balancer, you're ready to create the virtual machines for the domain controllers.</span></span>

### <a name="create-virtual-machines-for-the-domain-controllers"></a><span data-ttu-id="eaf61-248">Creación de máquinas virtuales para controladores de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-248">Create virtual machines for the domain controllers</span></span>
<span data-ttu-id="eaf61-249">Para crear y configurar los controladores de dominio, vuelva al grupo de recursos **SQL-HA-RG** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-249">To create and configure the domain controllers, return to the **SQL-HA-RG** resource group.</span></span>

1. <span data-ttu-id="eaf61-250">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-250">Click **Add**.</span></span> <span data-ttu-id="eaf61-251">Se abrirá la hoja **Todo** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-251">The **Everything** blade opens.</span></span>
2. <span data-ttu-id="eaf61-252">Escriba **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-252">Type **Windows Server 2016 Datacenter**.</span></span>
3. <span data-ttu-id="eaf61-253">Haga clic en **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-253">Click **Windows Server 2016 Datacenter**.</span></span> <span data-ttu-id="eaf61-254">En la hoja **Windows Server 2016 Datacenter**, compruebe que el modelo de implementación sea **Resource Manager** y haga clic en **Crear**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-254">In the **Windows Server 2016 Datacenter** blade, verify that the deployment model is **Resource Manager**, and then click **Create**.</span></span> <span data-ttu-id="eaf61-255">Azure abre la hoja **Crear máquina virtual** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-255">Azure opens the **Create virtual machine** blade.</span></span>

<span data-ttu-id="eaf61-256">Repita los pasos anteriores para crear dos máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="eaf61-256">Repeat the preceding steps to create two virtual machines.</span></span> <span data-ttu-id="eaf61-257">Asigne nombre a las dos máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="eaf61-257">Name the two virtual machines:</span></span>

* <span data-ttu-id="eaf61-258">ad-primary-dc</span><span class="sxs-lookup"><span data-stu-id="eaf61-258">ad-primary-dc</span></span>
* <span data-ttu-id="eaf61-259">ad-secondary-dc</span><span class="sxs-lookup"><span data-stu-id="eaf61-259">ad-secondary-dc</span></span>

  > [!NOTE]
  > <span data-ttu-id="eaf61-260">La máquina virtual **ad-secondary-dc** es opcional. Se usa para proporcionar alta disponibilidad para Active Directory Domain Services.</span><span class="sxs-lookup"><span data-stu-id="eaf61-260">The **ad-secondary-dc** virtual machine is optional, to provide high availability for Active Directory Domain Services.</span></span>
  >
  >

<span data-ttu-id="eaf61-261">La siguiente tabla muestra la configuración de estas dos máquinas:</span><span class="sxs-lookup"><span data-stu-id="eaf61-261">The following table shows the settings for these two machines:</span></span>

| <span data-ttu-id="eaf61-262">**Campo**</span><span class="sxs-lookup"><span data-stu-id="eaf61-262">**Field**</span></span> | <span data-ttu-id="eaf61-263">Valor</span><span class="sxs-lookup"><span data-stu-id="eaf61-263">Value</span></span> |
| --- | --- |
| <span data-ttu-id="eaf61-264">**Name**</span><span class="sxs-lookup"><span data-stu-id="eaf61-264">**Name**</span></span> |<span data-ttu-id="eaf61-265">Primer controlador de dominio: *ad-primary-dc*.</span><span class="sxs-lookup"><span data-stu-id="eaf61-265">First domain controller: *ad-primary-dc*.</span></span></br><span data-ttu-id="eaf61-266">Segundo controlador de dominio: *ad-secondary-dc*.</span><span class="sxs-lookup"><span data-stu-id="eaf61-266">Second domain controller *ad-secondary-dc*.</span></span> |
| <span data-ttu-id="eaf61-267">**Tipo de disco de máquina virtual**</span><span class="sxs-lookup"><span data-stu-id="eaf61-267">**VM disk type**</span></span> |<span data-ttu-id="eaf61-268">SSD</span><span class="sxs-lookup"><span data-stu-id="eaf61-268">SSD</span></span> |
| <span data-ttu-id="eaf61-269">**Nombre de usuario**</span><span class="sxs-lookup"><span data-stu-id="eaf61-269">**User name**</span></span> |<span data-ttu-id="eaf61-270">DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="eaf61-270">DomainAdmin</span></span> |
| <span data-ttu-id="eaf61-271">**Password**</span><span class="sxs-lookup"><span data-stu-id="eaf61-271">**Password**</span></span> |<span data-ttu-id="eaf61-272">Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-272">Contoso!0000</span></span> |
| <span data-ttu-id="eaf61-273">**Suscripción**</span><span class="sxs-lookup"><span data-stu-id="eaf61-273">**Subscription**</span></span> |<span data-ttu-id="eaf61-274">*Su suscripción*</span><span class="sxs-lookup"><span data-stu-id="eaf61-274">*Your subscription*</span></span> |
| <span data-ttu-id="eaf61-275">**Grupos de recursos**</span><span class="sxs-lookup"><span data-stu-id="eaf61-275">**Resource group**</span></span> |<span data-ttu-id="eaf61-276">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="eaf61-276">SQL-HA-RG</span></span> |
| <span data-ttu-id="eaf61-277">**Ubicación**</span><span class="sxs-lookup"><span data-stu-id="eaf61-277">**Location**</span></span> |<span data-ttu-id="eaf61-278">*Su ubicación*</span><span class="sxs-lookup"><span data-stu-id="eaf61-278">*Your location*</span></span> |
| <span data-ttu-id="eaf61-279">**Tamaño**</span><span class="sxs-lookup"><span data-stu-id="eaf61-279">**Size**</span></span> |<span data-ttu-id="eaf61-280">DS1_V2</span><span class="sxs-lookup"><span data-stu-id="eaf61-280">DS1_V2</span></span> |
| <span data-ttu-id="eaf61-281">**Storage**</span><span class="sxs-lookup"><span data-stu-id="eaf61-281">**Storage**</span></span> | <span data-ttu-id="eaf61-282">**Usar discos administrados** - **Sí**</span><span class="sxs-lookup"><span data-stu-id="eaf61-282">**Use managed disks** - **Yes**</span></span> |
| <span data-ttu-id="eaf61-283">**Red virtual**</span><span class="sxs-lookup"><span data-stu-id="eaf61-283">**Virtual network**</span></span> |<span data-ttu-id="eaf61-284">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="eaf61-284">autoHAVNET</span></span> |
| <span data-ttu-id="eaf61-285">**Subred**</span><span class="sxs-lookup"><span data-stu-id="eaf61-285">**Subnet**</span></span> |<span data-ttu-id="eaf61-286">admin</span><span class="sxs-lookup"><span data-stu-id="eaf61-286">admin</span></span> |
| <span data-ttu-id="eaf61-287">**Dirección IP pública**</span><span class="sxs-lookup"><span data-stu-id="eaf61-287">**Public IP address**</span></span> |<span data-ttu-id="eaf61-288">*Mismo nombre que la máquina virtual*</span><span class="sxs-lookup"><span data-stu-id="eaf61-288">*Same name as the VM*</span></span> |
| <span data-ttu-id="eaf61-289">**Grupo de seguridad de red**</span><span class="sxs-lookup"><span data-stu-id="eaf61-289">**Network security group**</span></span> |<span data-ttu-id="eaf61-290">*Mismo nombre que la máquina virtual*</span><span class="sxs-lookup"><span data-stu-id="eaf61-290">*Same name as the VM*</span></span> |
| <span data-ttu-id="eaf61-291">**El conjunto de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="eaf61-291">**Availability set**</span></span> |<span data-ttu-id="eaf61-292">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="eaf61-292">adavailabilityset</span></span> </br><span data-ttu-id="eaf61-293">**Dominios de error**: 2</span><span class="sxs-lookup"><span data-stu-id="eaf61-293">**Fault domains**:2</span></span></br><span data-ttu-id="eaf61-294">**Dominios de actualización**: 2</span><span class="sxs-lookup"><span data-stu-id="eaf61-294">**Update domains**:2</span></span>|
| <span data-ttu-id="eaf61-295">**Diagnóstico**</span><span class="sxs-lookup"><span data-stu-id="eaf61-295">**Diagnostics**</span></span> |<span data-ttu-id="eaf61-296">Enabled</span><span class="sxs-lookup"><span data-stu-id="eaf61-296">Enabled</span></span> |
| <span data-ttu-id="eaf61-297">**Cuenta de almacenamiento de información de diagnóstico**</span><span class="sxs-lookup"><span data-stu-id="eaf61-297">**Diagnostics storage account**</span></span> |<span data-ttu-id="eaf61-298">*Se crea automáticamente*</span><span class="sxs-lookup"><span data-stu-id="eaf61-298">*Automatically created*</span></span> |

   >[!IMPORTANT]
   ><span data-ttu-id="eaf61-299">Solo puede colocar una máquina virtual en un conjunto de disponibilidad al crearlo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-299">You can only place a VM in an availability set when you create it.</span></span> <span data-ttu-id="eaf61-300">Una vez creada una máquina virtual, no se puede cambiar el conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-300">You can't change the availability set after a VM is created.</span></span> <span data-ttu-id="eaf61-301">Consulte [Administración de la disponibilidad de las máquinas virtuales](../manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="eaf61-301">See [Manage the availability of virtual machines](../manage-availability.md).</span></span>

<span data-ttu-id="eaf61-302">Azure crea las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="eaf61-302">Azure creates the virtual machines.</span></span>

<span data-ttu-id="eaf61-303">Después de crear las máquinas virtuales, configure el controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-303">After the virtual machines are created, configure the domain controller.</span></span>

### <a name="configure-the-domain-controller"></a><span data-ttu-id="eaf61-304">Configuración del controlador de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-304">Configure the domain controller</span></span>
<span data-ttu-id="eaf61-305">En los pasos siguientes, configurará la máquina **ad-primary-dc** como controlador de dominio para corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="eaf61-305">In the following steps, configure the **ad-primary-dc** machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="eaf61-306">En el portal, abra el grupo de recursos **SQL-HA-RG** y seleccione la máquina **ad-primary-dc**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-306">In the portal, open the **SQL-HA-RG** resource group and select the **ad-primary-dc** machine.</span></span> <span data-ttu-id="eaf61-307">En la hoja **ad-primary-dc**, haga clic en **Conectar** para abrir un archivo RDP con el fin de obtener acceso a Escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="eaf61-307">On the **ad-primary-dc** blade, click **Connect** to open an RDP file for remote desktop access.</span></span>

    ![Conexión a una máquina virtual](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/20-connectrdp.png)
2. <span data-ttu-id="eaf61-309">Inicie sesión con su cuenta de administrador configurada (**\DomainAdmin**) y la contraseña (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="eaf61-309">Sign in with your configured administrator account (**\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="eaf61-310">De forma predeterminada, se debe mostrar el panel **Administrador del servidor** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-310">By default, the **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="eaf61-311">Haga clic en el vínculo **Agregar roles y características** en el panel.</span><span class="sxs-lookup"><span data-stu-id="eaf61-311">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Administrador del servidor: Agregar roles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
5. <span data-ttu-id="eaf61-313">Seleccione **Siguiente** hasta llegar a la sección **Roles de servidor**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-313">Select **Next** until you get to the **Server Roles** section.</span></span>
6. <span data-ttu-id="eaf61-314">Seleccione los roles **Active Directory Domain Services** y **Servidor DNS**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-314">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="eaf61-315">Cuando se le pida, agregue características adicionales que son necesarias para estos roles.</span><span class="sxs-lookup"><span data-stu-id="eaf61-315">When you're prompted, add any additional features that are required by these roles.</span></span>

   > [!NOTE]
   > <span data-ttu-id="eaf61-316">Windows le advierte de que no hay ninguna dirección IP estática.</span><span class="sxs-lookup"><span data-stu-id="eaf61-316">Windows warns you that there is no static IP address.</span></span> <span data-ttu-id="eaf61-317">Si está probando la configuración, haga clic en **Continuar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-317">If you're testing the configuration, click **Continue**.</span></span> <span data-ttu-id="eaf61-318">En los escenarios de producción, establezca la dirección IP en estática en Azure Portal o [use PowerShell para establecer la dirección IP estática de la máquina del controlador de dominio](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="eaf61-318">For production scenarios, set the IP address to static in the Azure portal, or [use PowerShell to set the static IP address of the domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   >
   >

    ![Cuadro de diálogo Agregar roles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/23-addroles.png)
7. <span data-ttu-id="eaf61-320">Haga clic en **Siguiente** hasta llegar a la sección **Confirmación**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-320">Click **Next** until you reach the **Confirmation** section.</span></span> <span data-ttu-id="eaf61-321">Active la casilla **Reiniciar automáticamente el servidor de destino en caso necesario** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-321">Select the **Restart the destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="eaf61-322">Haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-322">Click **Install**.</span></span>
9. <span data-ttu-id="eaf61-323">Cuando terminen de instalarse las características, vuelva al panel **Administrador del servidor** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-323">After the features finish installing, return to the **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="eaf61-324">Seleccione la nueva opción **AD DS** en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-324">Select the new **AD DS** option on the left-hand pane.</span></span>
11. <span data-ttu-id="eaf61-325">Haga clic en el vínculo **Más** en la barra de advertencia amarilla.</span><span class="sxs-lookup"><span data-stu-id="eaf61-325">Click the **More** link on the yellow warning bar.</span></span>

    ![Cuadro de diálogo AD DS en la máquina virtual del servidor DNS](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/24-addsmore.png)
12. <span data-ttu-id="eaf61-327">En la columna **Acción** del cuadro de diálogo **Todos los detalles de la tarea del servidor**, haga clic en **Promover este servidor a controlador de dominio**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-327">In the **Action** column of the **All Server Task Details** dialog, click **Promote this server to a domain controller**.</span></span>
13. <span data-ttu-id="eaf61-328">En el **Asistente de configuración de Servicios de dominio de Active Directory**, use los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="eaf61-328">In the **Active Directory Domain Services Configuration Wizard**, use the following values:</span></span>

    | <span data-ttu-id="eaf61-329">**Page**</span><span class="sxs-lookup"><span data-stu-id="eaf61-329">**Page**</span></span> | <span data-ttu-id="eaf61-330">Configuración</span><span class="sxs-lookup"><span data-stu-id="eaf61-330">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="eaf61-331">**Configuración de la implementación**</span><span class="sxs-lookup"><span data-stu-id="eaf61-331">**Deployment Configuration**</span></span> |<span data-ttu-id="eaf61-332">**Incorporación de nuevos bosques**</span><span class="sxs-lookup"><span data-stu-id="eaf61-332">**Add a new forest**</span></span><br/> <span data-ttu-id="eaf61-333">**Nombre del dominio raíz** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="eaf61-333">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="eaf61-334">**Opciones del controlador de dominio**</span><span class="sxs-lookup"><span data-stu-id="eaf61-334">**Domain Controller Options**</span></span> |<span data-ttu-id="eaf61-335">**Contraseña de DSRM** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-335">**DSRM Password** = Contoso!0000</span></span><br/><span data-ttu-id="eaf61-336">**Confirmar contraseña** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-336">**Confirm Password** = Contoso!0000</span></span> |
14. <span data-ttu-id="eaf61-337">Haga clic en **Siguiente** para avanzar por las otras páginas del asistente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-337">Click **Next** to go through the other pages in the wizard.</span></span> <span data-ttu-id="eaf61-338">En la página **Comprobación de requisitos previos**, compruebe que ve el mensaje siguiente: **Todas las comprobaciones de requisitos previos se realizaron correctamente**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-338">On the **Prerequisites Check** page, verify that you see the following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="eaf61-339">Puede revisar todos los mensajes de advertencia aplicables, pero es posible continuar con la instalación.</span><span class="sxs-lookup"><span data-stu-id="eaf61-339">You can review any applicable warning messages, but it's possible to continue with the installation.</span></span>
15. <span data-ttu-id="eaf61-340">Haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-340">Click **Install**.</span></span> <span data-ttu-id="eaf61-341">La máquina virtual **ad-primary-dc** se reinicia automáticamente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-341">The **ad-primary-dc** virtual machine automatically reboots.</span></span>

### <a name="note-the-ip-address-of-the-primary-domain-controller"></a><span data-ttu-id="eaf61-342">Anote la dirección IP del controlador de dominio principal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-342">Note the IP address of the primary domain controller</span></span>

<span data-ttu-id="eaf61-343">Utilice el controlador de dominio principal para DNS.</span><span class="sxs-lookup"><span data-stu-id="eaf61-343">Use the primary domain controller for DNS.</span></span> <span data-ttu-id="eaf61-344">Anote la dirección IP del controlador de dominio principal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-344">Note the primary domain controller IP address.</span></span>

<span data-ttu-id="eaf61-345">Una manera de obtener la dirección IP del controlador de dominio principal es a través de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-345">One way to get the primary domain controller IP address is through the Azure portal.</span></span>

1. <span data-ttu-id="eaf61-346">En Azure Portal, abra el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-346">On the Azure portal, open the resource group.</span></span>

2. <span data-ttu-id="eaf61-347">Haga clic en el controlador de dominio principal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-347">Click the primary domain controller.</span></span>

3. <span data-ttu-id="eaf61-348">En la hoja del controlador del dominio principal, haga clic en **Interfaces de red**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-348">On the primary domain controller blade, click **Network interfaces**.</span></span>

![Interfaces de red](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/25-primarydcip.png)

<span data-ttu-id="eaf61-350">Anote la dirección IP privada de este servidor.</span><span class="sxs-lookup"><span data-stu-id="eaf61-350">Note the private IP address for this server.</span></span>

### <a name="configure-the-virtual-network-dns"></a><span data-ttu-id="eaf61-351">Configuración del DNS de la red virtual</span><span class="sxs-lookup"><span data-stu-id="eaf61-351">Configure the virtual network DNS</span></span>
<span data-ttu-id="eaf61-352">Después de crear el primer controlador de dominio y habilitar el DNS en el primer servidor, configure la red virtual para usar este servidor para DNS.</span><span class="sxs-lookup"><span data-stu-id="eaf61-352">After you create the first domain controller and enable DNS on the first server, configure the virtual network to use this server for DNS.</span></span>

1. <span data-ttu-id="eaf61-353">En Azure Portal, haga clic en la red virtual.</span><span class="sxs-lookup"><span data-stu-id="eaf61-353">In the Azure portal, click on the virtual network.</span></span>

2. <span data-ttu-id="eaf61-354">En **Configuración**, haga clic en **Servidor DNS**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-354">Under **Settings**, click **DNS Server**.</span></span>

3. <span data-ttu-id="eaf61-355">Haga clic en **Personalizar** y escriba la dirección IP privada del controlador de dominio principal.</span><span class="sxs-lookup"><span data-stu-id="eaf61-355">Click **Custom**, and type the private IP address of the primary domain controller.</span></span>

4. <span data-ttu-id="eaf61-356">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-356">Click **Save**.</span></span>

### <a name="configure-the-second-domain-controller"></a><span data-ttu-id="eaf61-357">Configuración del segundo controlador de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-357">Configure the second domain controller</span></span>
<span data-ttu-id="eaf61-358">Una vez reiniciado el controlador de dominio principal, puede configurar el segundo controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-358">After the primary domain controller reboots, you can configure the second domain controller.</span></span> <span data-ttu-id="eaf61-359">Este paso opcional es para lograr alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-359">This optional step is for high availability.</span></span> <span data-ttu-id="eaf61-360">Para configurar el segundo controlador de dominio siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="eaf61-360">Follow these steps to configure the second domain controller:</span></span>

1. <span data-ttu-id="eaf61-361">En el portal, abra el grupo de recursos **SQL-HA-RG** y seleccione la máquina **ad-secondary-dc**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-361">In the portal, open the **SQL-HA-RG** resource group and select the **ad-secondary-dc** machine.</span></span> <span data-ttu-id="eaf61-362">En la hoja **ad-secondary-dc**, haga clic en **Conectar** para abrir un archivo RDP con el fin de obtener acceso a Escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="eaf61-362">On the **ad-secondary-dc** blade, click **Connect** to open an RDP file for remote desktop access.</span></span>
2. <span data-ttu-id="eaf61-363">Inicie sesión en la máquina virtual con la cuenta de administrador configurada (**BUILTIN\DomainAdmin**) y la contraseña (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="eaf61-363">Sign in to the VM by using your configured administrator account (**BUILTIN\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="eaf61-364">Cambie la dirección del servidor DNS preferido por la dirección del controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-364">Change the preferred DNS server address to the address of the domain controller.</span></span>
4. <span data-ttu-id="eaf61-365">En **Centro de redes y recursos compartidos**, haga clic en la interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="eaf61-365">In **Network and Sharing Center**, click the network interface.</span></span>
   <span data-ttu-id="eaf61-366">![Interfaz de red](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span><span class="sxs-lookup"><span data-stu-id="eaf61-366">![Network interface](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span></span>

5. <span data-ttu-id="eaf61-367">Haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-367">Click **Properties**.</span></span>
6. <span data-ttu-id="eaf61-368">Seleccione **Protocolo de Internet versión 4 (TCP/IPv4)** y haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-368">Select **Internet Protocol Version 4 (TCP/IPv4)** and click **Properties**.</span></span>
7. <span data-ttu-id="eaf61-369">Seleccione **Usar las siguientes direcciones de servidor DNS** y especifique la dirección del controlador de dominio principal en **Servidor DNS preferido**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-369">Select **Use the following DNS server addresses** and specify the address of the primary domain controller in **Preferred DNS server**.</span></span>
8. <span data-ttu-id="eaf61-370">Haga clic en **Aceptar** y en **Cerrar** para confirmar los cambios.</span><span class="sxs-lookup"><span data-stu-id="eaf61-370">Click **OK**, and then **Close** to commit the changes.</span></span> <span data-ttu-id="eaf61-371">Ahora ya puede unir la máquina virtual a **corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-371">You are now able to join the VM to **corp.contoso.com**.</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="eaf61-372">Si pierde la conexión a Escritorio remoto después de cambiar la configuración de DNS, vaya a Azure Portal y reinicie la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="eaf61-372">If you lose the connection to your remote desktop after changing the DNS setting, go to the Azure portal and restart the virtual machine.</span></span>

9. <span data-ttu-id="eaf61-373">En el escritorio remoto del controlador de dominio secundario, abra el **panel Administrador del servidor**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-373">From the remote desktop to the secondary domain controller, open **Server Manager Dashboard**.</span></span>
10. <span data-ttu-id="eaf61-374">Haga clic en el vínculo **Agregar roles y características** en el panel.</span><span class="sxs-lookup"><span data-stu-id="eaf61-374">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Administrador del servidor: Agregar roles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
11. <span data-ttu-id="eaf61-376">Seleccione **Siguiente** hasta llegar a la sección **Roles de servidor**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-376">Select **Next** until you get to the **Server Roles** section.</span></span>
12. <span data-ttu-id="eaf61-377">Seleccione los roles **Active Directory Domain Services** y **Servidor DNS**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-377">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="eaf61-378">Cuando se le pida, agregue características adicionales que son necesarias para estos roles.</span><span class="sxs-lookup"><span data-stu-id="eaf61-378">When you're prompted, add any additional features that are required by these roles.</span></span>
13. <span data-ttu-id="eaf61-379">Cuando terminen de instalarse las características, vuelva al panel **Administrador del servidor** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-379">After the features finish installing, return to the **Server Manager** dashboard.</span></span>
14. <span data-ttu-id="eaf61-380">Seleccione la nueva opción **AD DS** en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-380">Select the new **AD DS** option on the left-hand pane.</span></span>
15. <span data-ttu-id="eaf61-381">Haga clic en el vínculo **Más** en la barra de advertencia amarilla.</span><span class="sxs-lookup"><span data-stu-id="eaf61-381">Click the **More** link on the yellow warning bar.</span></span>
16. <span data-ttu-id="eaf61-382">En la columna **Acción** del cuadro de diálogo **Todos los detalles de la tarea del servidor**, haga clic en **Promover este servidor a controlador de dominio**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-382">In the **Action** column of the **All Server Task Details** dialog, click **Promote this server to a domain controller**.</span></span>
17. <span data-ttu-id="eaf61-383">En **Configuración de implementación**, seleccione **Agregar un controlador de dominio a un dominio existente**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-383">Under **Deployment Configuration**, select **Add a domain controller to an existing domain**.</span></span>
   <span data-ttu-id="eaf61-384">![Configuración de la implementación](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span><span class="sxs-lookup"><span data-stu-id="eaf61-384">![Deployment configuration](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span></span>
18. <span data-ttu-id="eaf61-385">Haga clic en **Seleccionar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-385">Click **Select**.</span></span>
19. <span data-ttu-id="eaf61-386">Conéctese con la cuenta de administrador (**CORP.CONTOSO.COM\domainadmin**) y la contraseña (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="eaf61-386">Connect by using the administrator account (**CORP.CONTOSO.COM\domainadmin**) and password (**Contoso!0000**).</span></span>
20. <span data-ttu-id="eaf61-387">En **Seleccionar un dominio del bosque**, haga clic en el dominio y en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-387">In **Select a domain from the forest**, click your domain, and then click **OK**.</span></span>
21. <span data-ttu-id="eaf61-388">En **Opciones del controlador de dominio**, utilice los valores predeterminados y establezca una contraseña de DSRM.</span><span class="sxs-lookup"><span data-stu-id="eaf61-388">In **Domain Controller Options**, use the default values and set a DSRM password.</span></span>

   >[!NOTE]
   ><span data-ttu-id="eaf61-389">La página **Opciones de DNS** puede avisarle de que no se puede crear una delegación de este servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="eaf61-389">The **DNS Options** page might warn you that a delegation for this DNS server can't be created.</span></span> <span data-ttu-id="eaf61-390">Puede pasar por alto esta advertencia en entornos de no producción.</span><span class="sxs-lookup"><span data-stu-id="eaf61-390">You can ignore this warning in non-production environments.</span></span>
22. <span data-ttu-id="eaf61-391">Haga clic en **Siguiente** hasta que se muestre la casilla **Requisitos previos**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-391">Click **Next** until the dialog reaches the **Prerequisites** check.</span></span> <span data-ttu-id="eaf61-392">Luego haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-392">Then click **Install**.</span></span>

<span data-ttu-id="eaf61-393">Después de que el servidor complete los cambios de configuración, reinícielo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-393">After the server finishes the configuration changes, restart the server.</span></span>

### <a name="add-the-private-ip-address-to-the-second-domain-controller-to-the-vpn-dns-server"></a><span data-ttu-id="eaf61-394">Incorporación de la dirección IP privada del controlador de dominio secundario al servidor DNS de VPN</span><span class="sxs-lookup"><span data-stu-id="eaf61-394">Add the Private IP Address to the second domain controller to the VPN DNS Server</span></span>

<span data-ttu-id="eaf61-395">En Azure Portal, en la red virtual, cambie la opción Servidor DNS para que incluya la dirección IP del controlador de dominio secundario.</span><span class="sxs-lookup"><span data-stu-id="eaf61-395">In the Azure portal, under virtual network, change the DNS Server to include the IP address of the secondary domain controller.</span></span> <span data-ttu-id="eaf61-396">Esto permitirá la redundancia del servicio DNS.</span><span class="sxs-lookup"><span data-stu-id="eaf61-396">This allows the DNS service redundancy.</span></span>

### <span data-ttu-id="eaf61-397"><a name=DomainAccounts></a> Configuración de las cuentas de dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-397"><a name=DomainAccounts></a> Configure the domain accounts</span></span>

<span data-ttu-id="eaf61-398">En los pasos siguientes configurará las cuentas de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="eaf61-398">In the next steps, you configure the Active Directory accounts.</span></span> <span data-ttu-id="eaf61-399">En la tabla siguiente se muestran las cuentas:</span><span class="sxs-lookup"><span data-stu-id="eaf61-399">The following table shows the accounts:</span></span>

| |<span data-ttu-id="eaf61-400">Cuenta de instalación</span><span class="sxs-lookup"><span data-stu-id="eaf61-400">Installation account</span></span><br/> |<span data-ttu-id="eaf61-401">sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="eaf61-401">sqlserver-0</span></span> <br/><span data-ttu-id="eaf61-402">Cuenta del servicio Agente SQL y SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-402">SQL Server and SQL Agent Service account</span></span> |<span data-ttu-id="eaf61-403">sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="eaf61-403">sqlserver-1</span></span><br/><span data-ttu-id="eaf61-404">Cuenta del servicio Agente SQL y SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-404">SQL Server and SQL Agent Service account</span></span>
| --- | --- | --- | ---
|<span data-ttu-id="eaf61-405">**Nombre**</span><span class="sxs-lookup"><span data-stu-id="eaf61-405">**First Name**</span></span> |<span data-ttu-id="eaf61-406">Instalar</span><span class="sxs-lookup"><span data-stu-id="eaf61-406">Install</span></span> |<span data-ttu-id="eaf61-407">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="eaf61-407">SQLSvc1</span></span> | <span data-ttu-id="eaf61-408">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="eaf61-408">SQLSvc2</span></span>
|<span data-ttu-id="eaf61-409">**Usuario NombreDeCuentaSam**</span><span class="sxs-lookup"><span data-stu-id="eaf61-409">**User SamAccountName**</span></span> |<span data-ttu-id="eaf61-410">Instalar</span><span class="sxs-lookup"><span data-stu-id="eaf61-410">Install</span></span> |<span data-ttu-id="eaf61-411">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="eaf61-411">SQLSvc1</span></span> | <span data-ttu-id="eaf61-412">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="eaf61-412">SQLSvc2</span></span>

<span data-ttu-id="eaf61-413">Para crear cada cuenta, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="eaf61-413">Use the following steps to create each account.</span></span>

1. <span data-ttu-id="eaf61-414">Inicie sesión en la máquina **ad-primary-dc** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-414">Sign in to the **ad-primary-dc** machine.</span></span>
2. <span data-ttu-id="eaf61-415">En **Administrador del servidor**, seleccione **Herramientas** y, después, haga clic en **Centro de administración de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-415">In **Server Manager**, select **Tools**, and then click **Active Directory Administrative Center**.</span></span>   
3. <span data-ttu-id="eaf61-416">Seleccione **corp (local)** en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-416">Select **corp (local)** from the left pane.</span></span>
4. <span data-ttu-id="eaf61-417">En el panel **Tareas** de la derecha, seleccione **Nuevo** y, después, haga clic en **Usuario**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-417">On the right **Tasks** pane, select **New**, and then click **User**.</span></span>
   <span data-ttu-id="eaf61-418">![Centro de administración de Active Directory](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span><span class="sxs-lookup"><span data-stu-id="eaf61-418">![Active Directory Administrative Center](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span></span>

   >[!TIP]
   ><span data-ttu-id="eaf61-419">Establezca una contraseña compleja para cada cuenta.</span><span class="sxs-lookup"><span data-stu-id="eaf61-419">Set a complex password for each account.</span></span><br/> <span data-ttu-id="eaf61-420">Para entornos de no producción, establezca que la cuenta de usuario no expire nunca.</span><span class="sxs-lookup"><span data-stu-id="eaf61-420">For non-production environments, set the user account to never expire.</span></span>

5. <span data-ttu-id="eaf61-421">Haga clic en **Aceptar** para crear el usuario.</span><span class="sxs-lookup"><span data-stu-id="eaf61-421">Click **OK** to create the user.</span></span>
6. <span data-ttu-id="eaf61-422">Repita los pasos anteriores para cada una de las tres cuentas.</span><span class="sxs-lookup"><span data-stu-id="eaf61-422">Repeat the preceding steps for each of the three accounts.</span></span>

### <a name="grant-the-required-permissions-to-the-installation-account"></a><span data-ttu-id="eaf61-423">Concesión de los permisos necesarios para la cuenta de instalación</span><span class="sxs-lookup"><span data-stu-id="eaf61-423">Grant the required permissions to the installation account</span></span>
1. <span data-ttu-id="eaf61-424">En el **Centro de administración de Active Directory**, seleccione **corp (local)** en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-424">In the **Active Directory Administrative Center**, select **corp (local)** in the left pane.</span></span> <span data-ttu-id="eaf61-425">Luego, en el panel **Tareas** a la derecha, haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-425">Then in the right-hand **Tasks** pane, click **Properties**.</span></span>

    ![Propiedades de usuario CORP](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/31-addcproperties.png)
2. <span data-ttu-id="eaf61-427">Seleccione **Extensiones** y luego haga clic en el botón **Avanzadas** situado en la pestaña **Seguridad**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-427">Select **Extensions**, and then click the **Advanced** button on the **Security** tab.</span></span>
3. <span data-ttu-id="eaf61-428">En el cuadro de diálogo **Configuración de seguridad avanzada**, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-428">In the **Advanced Security Settings for corp** dialog, click **Add**.</span></span>
4. <span data-ttu-id="eaf61-429">Haga clic en **Seleccionar una entidad de seguridad**, busque **CORP\Install** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-429">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
5. <span data-ttu-id="eaf61-430">Active la casilla **Leer todas las propiedades**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-430">Select the **Read all properties** check box.</span></span>

6. <span data-ttu-id="eaf61-431">Active la casilla **Create Computer objects** (Crear objetos de proceso).</span><span class="sxs-lookup"><span data-stu-id="eaf61-431">Select the **Create Computer objects** check box.</span></span>

     ![Permisos de usuario Corp](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/33-addpermissions.png)
7. <span data-ttu-id="eaf61-433">Haga clic en **Aceptar** y luego vuelva a hacer clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-433">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="eaf61-434">Cierre la ventana de propiedades **corp**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-434">Close the **corp** properties window.</span></span>

<span data-ttu-id="eaf61-435">Ahora que ha terminado de configurar Active Directory y los objetos de usuario, cree dos máquinas virtuales con SQL Server y una máquina virtual de servidor testigo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-435">Now that you've finished configuring Active Directory and the user objects, create two SQL Server VMs and a witness server VM.</span></span> <span data-ttu-id="eaf61-436">Después, una las tres al dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-436">Then join all three to the domain.</span></span>

## <a name="create-sql-server-vms"></a><span data-ttu-id="eaf61-437">Creación de las máquinas virtuales con SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-437">Create SQL Server VMs</span></span>

<span data-ttu-id="eaf61-438">Cree tres máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="eaf61-438">Create three additional virtual machines.</span></span> <span data-ttu-id="eaf61-439">La solución requiere dos máquinas virtuales con instancias de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-439">The solution requires two virtual machines with SQL Server instances.</span></span> <span data-ttu-id="eaf61-440">Una tercera máquina virtual funciona como testigo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-440">A third virtual machine will function as a witness.</span></span> <span data-ttu-id="eaf61-441">Windows Server 2016 puede usar un [testigo en la nube](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness). No obstante, para mantener la coherencia con los sistemas operativos anteriores, este documento usa una máquina virtual como testigo.</span><span class="sxs-lookup"><span data-stu-id="eaf61-441">Windows Server 2016 can use a [cloud witness](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), however for consistency with previous operating systems this document uses a virtual machine for a witness.</span></span>  

<span data-ttu-id="eaf61-442">Tenga en cuenta las siguientes decisiones de diseño antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="eaf61-442">Before you proceed consider the following deisign decisions.</span></span>

* <span data-ttu-id="eaf61-443">**Almacenamiento: Azure Managed Disks**</span><span class="sxs-lookup"><span data-stu-id="eaf61-443">**Storage - Azure Managed Disks**</span></span>

   <span data-ttu-id="eaf61-444">Para el almacenamiento de máquina virtual, use Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="eaf61-444">For the virtual machine storage, use Azure Managed Disks.</span></span> <span data-ttu-id="eaf61-445">Microsoft recomienda el uso de Managed Disks para máquinas virtuales de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-445">Microsoft recommends Managed Disks for SQL Server virtual machines.</span></span> <span data-ttu-id="eaf61-446">Managed Disks controla el almacenamiento en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="eaf61-446">Managed Disks handles storage behind the scenes.</span></span> <span data-ttu-id="eaf61-447">Además, cuando las máquinas virtuales con Managed Disks están en el mismo conjunto de disponibilidad, Azure distribuye los recursos de almacenamiento para proporcionar la redundancia adecuada.</span><span class="sxs-lookup"><span data-stu-id="eaf61-447">In addition, when virtual machines with Managed Disks are in the same availability set, Azure distributes the storage resources to provide appropriate redundancy.</span></span> <span data-ttu-id="eaf61-448">Para más información, consulte [Introducción a Azure Managed Disks](../managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="eaf61-448">For additional information, see [Azure Managed Disks Overview](../managed-disks-overview.md).</span></span> <span data-ttu-id="eaf61-449">Para obtener información específica acerca de Managed Disks en un conjunto de disponibilidad, consulte [Uso de Managed Disks para las máquinas virtuales de un conjunto de disponibilidad](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="eaf61-449">For specifics about managed disks in an availability set, see [Use Managed Disks for VMs in an availability set](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span>

* <span data-ttu-id="eaf61-450">**Red: direcciones IP privadas en producción**</span><span class="sxs-lookup"><span data-stu-id="eaf61-450">**Network - Private IP addresses in production**</span></span>

   <span data-ttu-id="eaf61-451">Para las máquinas virtuales, este tutorial usa direcciones IP públicas.</span><span class="sxs-lookup"><span data-stu-id="eaf61-451">For the virtual machines, this tutorial uses public IP addresses.</span></span> <span data-ttu-id="eaf61-452">Esto permite conectarse de forma remota directamente a la máquina virtual a través de Internet y facilita pasos de configuración.</span><span class="sxs-lookup"><span data-stu-id="eaf61-452">This enables remote connection directly to the virtual machine over the internet - it makes configuration steps easier.</span></span> <span data-ttu-id="eaf61-453">En entornos de producción, Microsoft recomienda usar únicamente direcciones IP privadas con el fin de reducir el grado de vulnerabilidad del recurso de máquina virtual de la instancia de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-453">In production environments, Microsoft recommends only private IP addresses in order to reduce the vulnerability footprint of the SQL Server instance VM resource.</span></span>

### <a name="create-and-configure-the-sql-server-vms"></a><span data-ttu-id="eaf61-454">Creación y configuración de las máquinas virtuales de SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-454">Create and configure the SQL Server VMs</span></span>
<span data-ttu-id="eaf61-455">A continuación, cree tres máquinas virtuales: dos de SQL Server y una para el nodo de clúster adicional.</span><span class="sxs-lookup"><span data-stu-id="eaf61-455">Next, create three VMs--two SQL Server VMs and a VM for an additional cluster node.</span></span> <span data-ttu-id="eaf61-456">Para crear las máquinas virtuales, vuelva al grupo de recursos **SQL-HA-RG**, haga clic en **Agregar**, busque el elemento apropiado de la galería, haga clic en **Máquina virtual** y luego en **De la galería**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-456">To create each of the VMs, go back to the **SQL-HA-RG** resource group, click **Add**, search for the appropriate gallery item, click **Virtual Machine**, and then click **From Gallery**.</span></span> <span data-ttu-id="eaf61-457">Use la información de la tabla siguiente para ayudarlo a crear las máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="eaf61-457">Use the information in the following table to help you create the VMs:</span></span>


| <span data-ttu-id="eaf61-458">Page</span><span class="sxs-lookup"><span data-stu-id="eaf61-458">Page</span></span> | <span data-ttu-id="eaf61-459">VM1</span><span class="sxs-lookup"><span data-stu-id="eaf61-459">VM1</span></span> | <span data-ttu-id="eaf61-460">VM2</span><span class="sxs-lookup"><span data-stu-id="eaf61-460">VM2</span></span> | <span data-ttu-id="eaf61-461">VM3</span><span class="sxs-lookup"><span data-stu-id="eaf61-461">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="eaf61-462">Selección del elemento adecuado de la galería</span><span class="sxs-lookup"><span data-stu-id="eaf61-462">Select the appropriate gallery item</span></span> |<span data-ttu-id="eaf61-463">**Windows Server 2016 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="eaf61-463">**Windows Server 2016 Datacenter**</span></span> |<span data-ttu-id="eaf61-464">**SQL Server 2016 SP1 Enterprise en Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="eaf61-464">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |<span data-ttu-id="eaf61-465">**SQL Server 2016 SP1 Enterprise en Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="eaf61-465">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |
| <span data-ttu-id="eaf61-466">Configuración de máquina virtual: **Datos básicos**</span><span class="sxs-lookup"><span data-stu-id="eaf61-466">Virtual machine configuration **Basics**</span></span> |<span data-ttu-id="eaf61-467">**Nombre** = clúster-fsw</span><span class="sxs-lookup"><span data-stu-id="eaf61-467">**Name** = cluster-fsw</span></span><br/><span data-ttu-id="eaf61-468">**Nombre de usuario** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="eaf61-468">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="eaf61-469">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-469">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="eaf61-470">**Suscripción** = su suscripción</span><span class="sxs-lookup"><span data-stu-id="eaf61-470">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="eaf61-471">**Grupo de recursos** = SQL-HA-GR</span><span class="sxs-lookup"><span data-stu-id="eaf61-471">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="eaf61-472">**Ubicación** = Su ubicación de Azure</span><span class="sxs-lookup"><span data-stu-id="eaf61-472">**Location** = Your azure location</span></span> |<span data-ttu-id="eaf61-473">**Nombre** = sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="eaf61-473">**Name** = sqlserver-0</span></span><br/><span data-ttu-id="eaf61-474">**Nombre de usuario** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="eaf61-474">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="eaf61-475">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-475">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="eaf61-476">**Suscripción** = su suscripción</span><span class="sxs-lookup"><span data-stu-id="eaf61-476">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="eaf61-477">**Grupo de recursos** = SQL-HA-GR</span><span class="sxs-lookup"><span data-stu-id="eaf61-477">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="eaf61-478">**Ubicación** = Su ubicación de Azure</span><span class="sxs-lookup"><span data-stu-id="eaf61-478">**Location** = Your azure location</span></span> |<span data-ttu-id="eaf61-479">**Nombre** = sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="eaf61-479">**Name** = sqlserver-1</span></span><br/><span data-ttu-id="eaf61-480">**Nombre de usuario** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="eaf61-480">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="eaf61-481">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="eaf61-481">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="eaf61-482">**Suscripción** = su suscripción</span><span class="sxs-lookup"><span data-stu-id="eaf61-482">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="eaf61-483">**Grupo de recursos** = SQL-HA-GR</span><span class="sxs-lookup"><span data-stu-id="eaf61-483">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="eaf61-484">**Ubicación** = Su ubicación de Azure</span><span class="sxs-lookup"><span data-stu-id="eaf61-484">**Location** = Your azure location</span></span> |
| <span data-ttu-id="eaf61-485">Configuración de máquina virtual: **Tamaño**</span><span class="sxs-lookup"><span data-stu-id="eaf61-485">Virtual machine configuration **Size**</span></span> |<span data-ttu-id="eaf61-486">**SIZE** = DS1\_V2 (1 núcleo, 3,5 GB)</span><span class="sxs-lookup"><span data-stu-id="eaf61-486">**SIZE** = DS1\_V2 (1 core, 3.5 GB)</span></span> |<span data-ttu-id="eaf61-487">**TAMAÑO** = DS2\_V2 (2 núcleos y 7 GB)</span><span class="sxs-lookup"><span data-stu-id="eaf61-487">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span></br><span data-ttu-id="eaf61-488">El tamaño debe admitir el almacenamiento SSD (soporte de disco Premium.</span><span class="sxs-lookup"><span data-stu-id="eaf61-488">The size must support SSD storage (Premium disk support.</span></span> <span data-ttu-id="eaf61-489">))</span><span class="sxs-lookup"><span data-stu-id="eaf61-489">))</span></span> |<span data-ttu-id="eaf61-490">**TAMAÑO** = DS2\_V2 (2 núcleos y 7 GB)</span><span class="sxs-lookup"><span data-stu-id="eaf61-490">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span> |
| <span data-ttu-id="eaf61-491">Configuración de máquina virtual: **Configuración**</span><span class="sxs-lookup"><span data-stu-id="eaf61-491">Virtual machine configuration **Settings**</span></span> |<span data-ttu-id="eaf61-492">**Storage**: use Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="eaf61-492">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="eaf61-493">**Red virtual** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="eaf61-493">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="eaf61-494">**Subred** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="eaf61-494">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="eaf61-495">**Dirección IP pública** generada automáticamente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-495">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="eaf61-496">**Grupo de seguridad de red** = ninguno</span><span class="sxs-lookup"><span data-stu-id="eaf61-496">**Network security group** = None</span></span><br/><span data-ttu-id="eaf61-497">**Diagnósticos de supervisión** = habilitado</span><span class="sxs-lookup"><span data-stu-id="eaf61-497">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="eaf61-498">**Cuenta de almacenamiento de diagnósticos** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="eaf61-498">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="eaf61-499">**Conjunto de disponibilidad** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="eaf61-499">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="eaf61-500">**Storage**: use Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="eaf61-500">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="eaf61-501">**Red virtual** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="eaf61-501">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="eaf61-502">**Subred** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="eaf61-502">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="eaf61-503">**Dirección IP pública** generada automáticamente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-503">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="eaf61-504">**Grupo de seguridad de red** = ninguno</span><span class="sxs-lookup"><span data-stu-id="eaf61-504">**Network security group** = None</span></span><br/><span data-ttu-id="eaf61-505">**Diagnósticos de supervisión** = habilitado</span><span class="sxs-lookup"><span data-stu-id="eaf61-505">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="eaf61-506">**Cuenta de almacenamiento de diagnósticos** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="eaf61-506">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="eaf61-507">**Conjunto de disponibilidad** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="eaf61-507">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="eaf61-508">**Storage**: use Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="eaf61-508">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="eaf61-509">**Red virtual** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="eaf61-509">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="eaf61-510">**Subred** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="eaf61-510">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="eaf61-511">**Dirección IP pública** generada automáticamente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-511">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="eaf61-512">**Grupo de seguridad de red** = ninguno</span><span class="sxs-lookup"><span data-stu-id="eaf61-512">**Network security group** = None</span></span><br/><span data-ttu-id="eaf61-513">**Diagnósticos de supervisión** = habilitado</span><span class="sxs-lookup"><span data-stu-id="eaf61-513">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="eaf61-514">**Cuenta de almacenamiento de diagnósticos** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="eaf61-514">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="eaf61-515">**Conjunto de disponibilidad** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="eaf61-515">**Availability set** = sqlAvailabilitySet</span></span><br/> |
| <span data-ttu-id="eaf61-516">Configuración de máquina virtual: **Configuración de SQL Server**</span><span class="sxs-lookup"><span data-stu-id="eaf61-516">Virtual machine configuration **SQL Server settings**</span></span> |<span data-ttu-id="eaf61-517">No aplicable</span><span class="sxs-lookup"><span data-stu-id="eaf61-517">Not applicable</span></span> |<span data-ttu-id="eaf61-518">**Conectividad de SQL** = privado (dentro de la red virtual)</span><span class="sxs-lookup"><span data-stu-id="eaf61-518">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="eaf61-519">**Puerto** = 1433</span><span class="sxs-lookup"><span data-stu-id="eaf61-519">**Port** = 1433</span></span><br/><span data-ttu-id="eaf61-520">**Autenticación SQL** = deshabilitar</span><span class="sxs-lookup"><span data-stu-id="eaf61-520">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="eaf61-521">**Configuración de almacenamiento** = general</span><span class="sxs-lookup"><span data-stu-id="eaf61-521">**Storage configuration** = General</span></span><br/><span data-ttu-id="eaf61-522">**Aplicación de revisiones automatizada** = el domingo a las 2:00</span><span class="sxs-lookup"><span data-stu-id="eaf61-522">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="eaf61-523">**Copia de seguridad automatizada** = deshabilitado</span><span class="sxs-lookup"><span data-stu-id="eaf61-523">**Automated backup** = Disabled</span></span></br><span data-ttu-id="eaf61-524">**Integración del Almacén de claves de Azure** = Deshabilitada</span><span class="sxs-lookup"><span data-stu-id="eaf61-524">**Azure Key Vault integration** = Disabled</span></span> |<span data-ttu-id="eaf61-525">**Conectividad de SQL** = privado (dentro de la red virtual)</span><span class="sxs-lookup"><span data-stu-id="eaf61-525">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="eaf61-526">**Puerto** = 1433</span><span class="sxs-lookup"><span data-stu-id="eaf61-526">**Port** = 1433</span></span><br/><span data-ttu-id="eaf61-527">**Autenticación SQL** = deshabilitar</span><span class="sxs-lookup"><span data-stu-id="eaf61-527">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="eaf61-528">**Configuración de almacenamiento** = general</span><span class="sxs-lookup"><span data-stu-id="eaf61-528">**Storage configuration** = General</span></span><br/><span data-ttu-id="eaf61-529">**Aplicación de revisiones automatizada** = el domingo a las 2:00</span><span class="sxs-lookup"><span data-stu-id="eaf61-529">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="eaf61-530">**Copia de seguridad automatizada** = deshabilitado</span><span class="sxs-lookup"><span data-stu-id="eaf61-530">**Automated backup** = Disabled</span></span></br><span data-ttu-id="eaf61-531">**Integración del Almacén de claves de Azure** = Deshabilitada</span><span class="sxs-lookup"><span data-stu-id="eaf61-531">**Azure Key Vault integration** = Disabled</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="eaf61-532">Los tamaños de máquina que se sugieren aquí están diseñados para probar los grupos de disponibilidad en máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="eaf61-532">The machine sizes suggested here are meant for testing availability groups in Azure VMs.</span></span> <span data-ttu-id="eaf61-533">Para optimizar el rendimiento de las cargas de trabajo de producción, consulte las recomendaciones de tamaños de máquina y la configuración de SQL Server en [Procedimientos recomendados de SQL Server en máquinas virtuales de Azure](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="eaf61-533">For the best performance on production workloads, see the recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure virtual machines](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
>
>

<span data-ttu-id="eaf61-534">Una vez que las tres máquinas virtuales estén totalmente aprovisionadas, tendrá que unirlas al dominio **corp.contoso.com** y conceder a CORP\Install los derechos administrativos sobre las máquinas.</span><span class="sxs-lookup"><span data-stu-id="eaf61-534">After the three VMs are fully provisioned, you need to join them to the **corp.contoso.com** domain and grant CORP\Install administrative rights to the machines.</span></span>

### <span data-ttu-id="eaf61-535"><a name="joinDomain"></a>Unión de los servidores al dominio</span><span class="sxs-lookup"><span data-stu-id="eaf61-535"><a name="joinDomain"></a>Join the servers to the domain</span></span>

<span data-ttu-id="eaf61-536">Ahora ya puede unir las máquinas virtuales a **corp.contoso.com**. Realice los pasos siguientes en las máquinas virtuales con SQL Server y el servidor testigo del recurso compartido de archivos:</span><span class="sxs-lookup"><span data-stu-id="eaf61-536">You're now able to join the VMs to **corp.contoso.com**. Do the following for both the SQL Server VMs and the file share witness server:</span></span>

1. <span data-ttu-id="eaf61-537">Conéctese de forma remota a la máquina virtual con **BUILTIN\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-537">Remotely connect to the virtual machine with **BUILTIN\DomainAdmin**.</span></span>
2. <span data-ttu-id="eaf61-538">En **Administrador del servidor**, haga clic en **Servidor local**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-538">In **Server Manager**, click **Local Server**.</span></span>
3. <span data-ttu-id="eaf61-539">Haga clic en el vínculo **GRUPO DE TRABAJO**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-539">Click the **WORKGROUP** link.</span></span>
4. <span data-ttu-id="eaf61-540">En la sección **Nombre de equipo**, haga clic en **Cambiar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-540">In the **Computer Name** section, click **Change**.</span></span>
5. <span data-ttu-id="eaf61-541">Active la casilla **Dominio** y escriba **corp.contoso.com** en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="eaf61-541">Select the **Domain** check box and type **corp.contoso.com** in the text box.</span></span> <span data-ttu-id="eaf61-542">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-542">Click **OK**.</span></span>
6. <span data-ttu-id="eaf61-543">En el cuadro de diálogo emergente **Seguridad de Windows**, especifique las credenciales de la cuenta de administrador del dominio predeterminado (**CORP\DomainAdmin**) y la contraseña (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="eaf61-543">In the **Windows Security** popup dialog, specify the credentials for the default domain administrator account (**CORP\DomainAdmin**) and the password (**Contoso!0000**).</span></span>
7. <span data-ttu-id="eaf61-544">Cuando vea el mensaje "Bienvenida al dominio corp.contoso.com", haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-544">When you see the "Welcome to the corp.contoso.com domain" message, click **OK**.</span></span>
8. <span data-ttu-id="eaf61-545">Haga clic en **Cerrar** y luego en **Reiniciar ahora** en el cuadro de diálogo emergente.</span><span class="sxs-lookup"><span data-stu-id="eaf61-545">Click **Close**, and then click **Restart Now** in the popup dialog.</span></span>

### <a name="add-the-corpinstall-user-as-an-administrator-on-each-cluster-vm"></a><span data-ttu-id="eaf61-546">Agregue el usuario Corp\Install como administrador en cada máquina virtual del clúster:</span><span class="sxs-lookup"><span data-stu-id="eaf61-546">Add the Corp\Install user as an administrator on each cluster VM</span></span>

<span data-ttu-id="eaf61-547">Después de que cada máquina virtual se reinicie como un miembro del dominio, agregue **CORP\Install** como miembro del grupo de administradores local.</span><span class="sxs-lookup"><span data-stu-id="eaf61-547">After each virtual machine restarts as a member of the domain, add **CORP\Install** as a member of the local administrators group.</span></span>

1. <span data-ttu-id="eaf61-548">Espere hasta que se reinicie la máquina virtual y, después, inicie el archivo RDP de nuevo desde el controlador de dominio principal para iniciar sesión en **sqlserver-0** con la cuenta **CORP\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-548">Wait until the VM is restarted, then launch the RDP file again from the primary domain controller to sign in to **sqlserver-0** by using the **CORP\DomainAdmin** account.</span></span>
   >[!TIP]
   ><span data-ttu-id="eaf61-549">Asegúrese de que inicie sesión con la cuenta de administrador del dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-549">Make sure that you sign in with the domain administrator account.</span></span> <span data-ttu-id="eaf61-550">En los pasos anteriores, usó la cuenta de administrador BUILTIN.</span><span class="sxs-lookup"><span data-stu-id="eaf61-550">In the previous steps, you were using the BUILT IN administrator account.</span></span> <span data-ttu-id="eaf61-551">Ahora que el servidor está en el dominio, utilice la cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-551">Now that the server is in the domain, use the domain account.</span></span> <span data-ttu-id="eaf61-552">En la sesión RDP, especifique *DOMINIO*\\*nombre de usuario*.</span><span class="sxs-lookup"><span data-stu-id="eaf61-552">In your RDP session, specify *DOMAIN*\\*username*.</span></span>

2. <span data-ttu-id="eaf61-553">En **Administrador del servidor** seleccione **Herramientas** y después haga clic en **Administración de equipos**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-553">In **Server Manager**, select **Tools**, and then click **Computer Management**.</span></span>
3. <span data-ttu-id="eaf61-554">En la ventana **Administración de equipos**, expanda **Usuarios y grupos locales** y luego seleccione **Grupos**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-554">In the **Computer Management** window, expand **Local Users and Groups**, and then select **Groups**.</span></span>
4. <span data-ttu-id="eaf61-555">Haga doble clic en el grupo **Administradores** .</span><span class="sxs-lookup"><span data-stu-id="eaf61-555">Double-click the **Administrators** group.</span></span>
5. <span data-ttu-id="eaf61-556">En el cuadro de diálogo **Propiedades de administradores**, haga clic en el botón **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-556">In the **Administrators Properties** dialog, click the **Add** button.</span></span>
6. <span data-ttu-id="eaf61-557">Especifique el usuario **CORP\Install** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-557">Enter the user **CORP\Install**, and then click **OK**.</span></span>
7. <span data-ttu-id="eaf61-558">Haga clic en **Aceptar** para cerrar el cuadro de diálogo **Propiedades de administradores**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-558">Click **OK** to close the **Administrator Properties** dialog.</span></span>
8. <span data-ttu-id="eaf61-559">Repita los pasos anteriores en **sqlserver-1** y **cluster-fsw**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-559">Repeat the previous steps on **sqlserver-1** and **cluster-fsw**.</span></span>

### <span data-ttu-id="eaf61-560"><a name="setServiceAccount"></a>Configuración de las cuentas de servicio de SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-560"><a name="setServiceAccount"></a>Set the SQL Server service accounts</span></span>

<span data-ttu-id="eaf61-561">Establezca la cuenta de servicio de SQL Server en cada máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-561">On each SQL Server VM, set the SQL Server service account.</span></span> <span data-ttu-id="eaf61-562">Utilice las cuentas que creó cuando [configuró las cuentas de dominio](#DomainAccounts).</span><span class="sxs-lookup"><span data-stu-id="eaf61-562">Use the accounts that you created when you [configured the domain accounts](#DomainAccounts).</span></span>

1. <span data-ttu-id="eaf61-563">Abra el **Administrador de configuración de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-563">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="eaf61-564">Haga clic con el botón derecho en el servicio SQL Server y haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-564">Right-click the SQL Server service, and then click **Properties**.</span></span>
3. <span data-ttu-id="eaf61-565">Establezca la cuenta y contraseña.</span><span class="sxs-lookup"><span data-stu-id="eaf61-565">Set the account and password.</span></span>
4. <span data-ttu-id="eaf61-566">Repita estos pasos en la otra máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-566">Repeat these steps on the other SQL Server VM.</span></span>  

<span data-ttu-id="eaf61-567">En lo que respecta a los grupos de disponibilidad de SQL Server, cada máquina virtual con SQL Server debe ejecutarse como una cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-567">For SQL Server availability groups, each SQL Server VM needs to run as a domain account.</span></span>

### <a name="create-a-sign-in-on-each-sql-server-vm-for-the-installation-account"></a><span data-ttu-id="eaf61-568">Creación de un inicio de sesión en cada máquina virtual con SQL Server para la cuenta de instalación</span><span class="sxs-lookup"><span data-stu-id="eaf61-568">Create a sign-in on each SQL Server VM for the installation account</span></span>

<span data-ttu-id="eaf61-569">Use la cuenta de instalación (CORP\install) para configurar el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="eaf61-569">Use the installation account (CORP\install) to configure the availability group.</span></span> <span data-ttu-id="eaf61-570">Esta cuenta debe ser miembro del rol de servidor fijo **sysadmin** en cada máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-570">This account needs to be a member of the **sysadmin** fixed server role on each SQL Server VM.</span></span> <span data-ttu-id="eaf61-571">Con los pasos siguientes se crea un inicio de sesión para la cuenta de instalación:</span><span class="sxs-lookup"><span data-stu-id="eaf61-571">The following steps create a sign-in for the installation account:</span></span>

1. <span data-ttu-id="eaf61-572">Conéctese al servidor mediante el Protocolo de escritorio remoto (RDP) mediante la cuenta *\<MachineName\>\DomainAdmin*.</span><span class="sxs-lookup"><span data-stu-id="eaf61-572">Connect to the server through the Remote Desktop Protocol (RDP) by using the *\<MachineName\>\DomainAdmin* account.</span></span>

1. <span data-ttu-id="eaf61-573">Abra SQL Server Management Studio y conéctese a la instancia local de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-573">Open SQL Server Management Studio and connect to the local instance of SQL Server.</span></span>

1. <span data-ttu-id="eaf61-574">En **Explorador de objetos**, haga clic en **Seguridad**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-574">In **Object Explorer**, click **Security**.</span></span>

1. <span data-ttu-id="eaf61-575">Haga clic con el botón derecho en **Inicios de sesión**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-575">Right-click **Logins**.</span></span> <span data-ttu-id="eaf61-576">Haga clic en **Nuevo inicio de sesión**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-576">Click **New Login**.</span></span>

1. <span data-ttu-id="eaf61-577">En **Inicio de sesión - Nuevo**, haga clic en **Buscar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-577">In **Login - New**, click **Search**.</span></span>

1. <span data-ttu-id="eaf61-578">Haga clic en **Ubicaciones**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-578">Click **Locations**.</span></span>

1. <span data-ttu-id="eaf61-579">Escriba las credenciales del administrador de dominio.</span><span class="sxs-lookup"><span data-stu-id="eaf61-579">Enter the domain administrator network credentials.</span></span>

1. <span data-ttu-id="eaf61-580">Utilice la cuenta de instalación.</span><span class="sxs-lookup"><span data-stu-id="eaf61-580">Use the installation account.</span></span>

1. <span data-ttu-id="eaf61-581">Establezca el inicio de sesión como un miembro del rol de servidor fijo **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-581">Set the sign-in to be a member of the **sysadmin** fixed server role.</span></span>

1. <span data-ttu-id="eaf61-582">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-582">Click **OK**.</span></span>

<span data-ttu-id="eaf61-583">Repita los pasos anteriores en la otra máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-583">Repeat the preceding steps on the other SQL Server VM.</span></span>

## <a name="add-failover-clustering-features-to-both-sql-server-vms"></a><span data-ttu-id="eaf61-584">Adición de características de clúster de conmutación por error en ambas máquinas virtuales con SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-584">Add Failover Clustering features to both SQL Server VMs</span></span>

<span data-ttu-id="eaf61-585">Para agregar características de clúster de conmutación por error, realice las siguientes acciones en ambas máquinas virtuales con SQL Server:</span><span class="sxs-lookup"><span data-stu-id="eaf61-585">To add Failover Clustering features, do the following on both SQL Server VMs:</span></span>

1. <span data-ttu-id="eaf61-586">Conéctese a la máquina virtual de SQL Server con el Protocolo de escritorio remoto (RDP) mediante la cuenta *CORP\install*.</span><span class="sxs-lookup"><span data-stu-id="eaf61-586">Connect to the SQL Server virtual machine through the Remote Desktop Protocol (RDP) by using the *CORP\install* account.</span></span> <span data-ttu-id="eaf61-587">Abra el **panel Administrador de servidores**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-587">Open **Server Manager Dashboard**.</span></span>
2. <span data-ttu-id="eaf61-588">Haga clic en el vínculo **Agregar roles y características** en el panel.</span><span class="sxs-lookup"><span data-stu-id="eaf61-588">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Administrador del servidor: Agregar roles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
3. <span data-ttu-id="eaf61-590">Seleccione **Siguiente** hasta llegar a la sección **Características de servidor**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-590">Select **Next** until you get to the **Server Features** section.</span></span>
4. <span data-ttu-id="eaf61-591">En **Características**, seleccione **Clúster de conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-591">In **Features**, select **Failover Clustering**.</span></span>
5. <span data-ttu-id="eaf61-592">Agregue más características necesarias.</span><span class="sxs-lookup"><span data-stu-id="eaf61-592">Add any additional required features.</span></span>
6. <span data-ttu-id="eaf61-593">Haga clic en **Instalar** para agregar las características.</span><span class="sxs-lookup"><span data-stu-id="eaf61-593">Click **Install** to add the features.</span></span>

<span data-ttu-id="eaf61-594">Repita los pasos en la otra máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-594">Repeat the steps on the other SQL Server VM.</span></span>

## <a name="a-nameendpoint-firewall-configure-the-firewall-on-each-sql-server-vm"></a><span data-ttu-id="eaf61-595"><a name="endpoint-firewall"> Configuración del firewall en cada máquina virtual con SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaf61-595"><a name="endpoint-firewall"> Configure the firewall on each SQL Server VM</span></span>

<span data-ttu-id="eaf61-596">La solución requiere que los siguientes puertos TCP estén abiertos en el firewall:</span><span class="sxs-lookup"><span data-stu-id="eaf61-596">The solution requires the following TCP ports to be open in the firewall:</span></span>

- <span data-ttu-id="eaf61-597">**Máquina virtual con SQL Server**:</span><span class="sxs-lookup"><span data-stu-id="eaf61-597">**SQL Server VM**:</span></span><br/>
   <span data-ttu-id="eaf61-598">Puerto 1433 para una instancia predeterminada de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-598">Port 1433 for a default instance of SQL Server.</span></span>
- <span data-ttu-id="eaf61-599">**Sondeo de Azure Load Balancer:**</span><span class="sxs-lookup"><span data-stu-id="eaf61-599">**Azure load balancer probe:**</span></span><br/>
   <span data-ttu-id="eaf61-600">Cualquier puerto disponible.</span><span class="sxs-lookup"><span data-stu-id="eaf61-600">Any available port.</span></span> <span data-ttu-id="eaf61-601">A menudo, los ejemplos utilizan el 59999.</span><span class="sxs-lookup"><span data-stu-id="eaf61-601">Examples frequently use 59999.</span></span>
- <span data-ttu-id="eaf61-602">**Punto de conexión de reflejo de la base de datos:**</span><span class="sxs-lookup"><span data-stu-id="eaf61-602">**Database mirroring endpoint:**</span></span> <br/>
   <span data-ttu-id="eaf61-603">Cualquier puerto disponible.</span><span class="sxs-lookup"><span data-stu-id="eaf61-603">Any available port.</span></span> <span data-ttu-id="eaf61-604">A menudo, los ejemplos utilizan el 5022.</span><span class="sxs-lookup"><span data-stu-id="eaf61-604">Examples frequently use 5022.</span></span>

<span data-ttu-id="eaf61-605">Los puertos de firewall deben estar abiertos en ambas máquinas virtuales con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-605">The firewall ports need to be open on both SQL Server VMs.</span></span>

<span data-ttu-id="eaf61-606">El método de abrir los puertos depende de la solución de firewall que use.</span><span class="sxs-lookup"><span data-stu-id="eaf61-606">The method of opening the ports depends on the firewall solution that you use.</span></span> <span data-ttu-id="eaf61-607">En la siguiente sección se explica cómo abrir los puertos en Firewall de Windows.</span><span class="sxs-lookup"><span data-stu-id="eaf61-607">The next section explains how to open the ports in Windows Firewall.</span></span> <span data-ttu-id="eaf61-608">Abra los puertos necesarios en cada una de las máquinas virtuales con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-608">Open the required ports on each of your SQL Server VMs.</span></span>

### <a name="open-a-tcp-port-in-the-firewall"></a><span data-ttu-id="eaf61-609">Apertura de un puerto TCP en el firewall</span><span class="sxs-lookup"><span data-stu-id="eaf61-609">Open a TCP port in the firewall</span></span>

1. <span data-ttu-id="eaf61-610">En la pantalla **Inicio** del primer servidor SQL Server, abra **Firewall de Windows con seguridad avanzada**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-610">On the first SQL Server **Start** screen, launch **Windows Firewall with Advanced Security**.</span></span>
2. <span data-ttu-id="eaf61-611">En el panel izquierdo, seleccione **Reglas de entrada**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-611">On the left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="eaf61-612">En el panel derecho, haga clic en **Nueva regla**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-612">On the right pane, click **New Rule**.</span></span>
3. <span data-ttu-id="eaf61-613">En **Tipo de regla**, elija **Puerto**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-613">For **Rule Type**, choose **Port**.</span></span>
4. <span data-ttu-id="eaf61-614">Para el puerto, especifique **TCP** y escriba los números de puerto adecuados.</span><span class="sxs-lookup"><span data-stu-id="eaf61-614">For the port, specify **TCP** and type the appropriate port numbers.</span></span> <span data-ttu-id="eaf61-615">Consulte el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="eaf61-615">See the following example:</span></span>

   ![Firewall de SQL](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/35-tcpports.png)

5. <span data-ttu-id="eaf61-617">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-617">Click **Next**.</span></span>
6. <span data-ttu-id="eaf61-618">En la página **Acción**, mantenga seleccionado **Permitir la conexión** y luego haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-618">On the **Action** page, keep **Allow the connection** selected, and then click **Next**.</span></span>
7. <span data-ttu-id="eaf61-619">En la página **Perfiles**, acepte la configuración predeterminada y luego haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-619">On the **Profile** page, accept the default settings, and then click **Next**.</span></span>
8. <span data-ttu-id="eaf61-620">En la página **Nombre**, especifique el nombre de una regla, como **Sondeo de Azure Load Balancer** en el cuadro de texto **Nombre** y haga clic en **Finalizar**.</span><span class="sxs-lookup"><span data-stu-id="eaf61-620">On the **Name** page, specify a rule name (such as **Azure LB Probe**) in the **Name** text box, and then click **Finish**.</span></span>

<span data-ttu-id="eaf61-621">Repita estos pasos en la segunda máquina virtual con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaf61-621">Repeat these steps on the second SQL Server VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="eaf61-622">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="eaf61-622">Next steps</span></span>

* [<span data-ttu-id="eaf61-623">Creación de un grupo de disponibilidad de SQL Server AlwaysOn en máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="eaf61-623">Create a SQL Server Always On availability group on Azure virtual machines</span></span>](virtual-machines-windows-portal-sql-availability-group-tutorial.md)

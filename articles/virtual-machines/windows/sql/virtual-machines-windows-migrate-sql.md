---
title: "Migración de una Base de datos SQL Server a SQL Server en una máquina virtual | Microsoft Docs"
description: "Obtenga información sobre cómo migrar una base de datos de usuario local a SQL Server en una máquina virtual de Azure."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="418c2-103">Migración de una Base de datos SQL Server a SQL Server en una máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="418c2-104">Existen varios métodos para migrar una base de datos de usuario de SQL Server local a SQL Server en una VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="418c2-105">En este artículo se tratan diversos métodos brevemente y se recomienda el mejor de ellos para diversos escenarios.</span><span class="sxs-lookup"><span data-stu-id="418c2-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="418c2-106">¿Cuáles son los principales métodos de migración?</span><span class="sxs-lookup"><span data-stu-id="418c2-106">What are the primary migration methods?</span></span>
<span data-ttu-id="418c2-107">Los principales métodos de migración son:</span><span class="sxs-lookup"><span data-stu-id="418c2-107">The primary migration methods are:</span></span>

* <span data-ttu-id="418c2-108">Realizar copia de seguridad local con compresión y copiar manualmente el archivo de copia de seguridad en la máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="418c2-109">Realizar una copia de seguridad en una dirección URL y restaurarla en la máquina virtual de Azure desde dicha dirección URL.</span><span class="sxs-lookup"><span data-stu-id="418c2-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="418c2-110">Desasociar y, a continuación, copiar los archivos de datos y de registro en el almacenamiento de blobs de Azure y, seguidamente, asociarlos a SQL Server en la máquina virtual de Azure desde una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="418c2-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="418c2-111">Convertir una máquina física de local a VHD de Hyper-V, cargarla en el almacenamiento de blobs de Azure y, a continuación, implementarla como una máquina virtual nueva con el VHD cargado</span><span class="sxs-lookup"><span data-stu-id="418c2-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="418c2-112">Enviar la unidad de disco duro de envío con el servicio de importación y exportación de Windows</span><span class="sxs-lookup"><span data-stu-id="418c2-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="418c2-113">Si tiene una implementación AlwaysOn local, utilice el [Asistente para agregar una réplica de Azure](../classic/sql-onprem-availability.md) para crear una réplica en Azure y, luego, ejecute una conmutación por error para dirigir a los usuarios a la instancia de base de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="418c2-114">Utilice la [replicación transaccional](https://msdn.microsoft.com/library/ms151176.aspx) de SQL Server para configurar la instancia de Azure SQL Server como suscriptor y, luego, deshabilite la replicación y dirija a los usuarios a la instancia de base de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="418c2-115">También puede utilizar estas mismas técnicas para mover bases de datos entre VM de SQL Server en Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="418c2-116">Por ejemplo, no hay ninguna manera admitida para actualizar una VM de imagen de la galería de SQL Server desde una versión o edición a otra.</span><span class="sxs-lookup"><span data-stu-id="418c2-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="418c2-117">En este caso, debe crear una nueva VM con SQL Server con la nueva versión o edición y luego usar una de las técnicas de migración de este artículo para mover las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="418c2-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="418c2-118">Elección del método de migración</span><span class="sxs-lookup"><span data-stu-id="418c2-118">Choosing your migration method</span></span>
<span data-ttu-id="418c2-119">Para obtener un rendimiento de transferencia de datos óptimo, migre los archivos de base de datos a la VM de Azure con un archivo de copia de seguridad comprimido.</span><span class="sxs-lookup"><span data-stu-id="418c2-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="418c2-120">Para minimizar el tiempo de inactividad durante el proceso de migración de la base de datos, utilice la opción AlwaysOn o la opción de replicación transaccional.</span><span class="sxs-lookup"><span data-stu-id="418c2-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="418c2-121">Si no es posible usar los métodos anteriores, migre la base de datos de forma manual.</span><span class="sxs-lookup"><span data-stu-id="418c2-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="418c2-122">Por lo general, con este método comenzará con una copia de seguridad de la base de datos y luego la copiará en Azure para, posteriormente, realizar una restauración de dicha base de datos.</span><span class="sxs-lookup"><span data-stu-id="418c2-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="418c2-123">También es posible copiar los archivos mismos de la base de datos en Azure y, luego, anexarlos.</span><span class="sxs-lookup"><span data-stu-id="418c2-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="418c2-124">Existen varios métodos para llevar a cabo este proceso manual de migración de una base de datos a una VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="418c2-125">Al actualizar a SQL Server 2014 o SQL Server 2016 desde versiones anteriores de SQL Server, es preciso considerar si es preciso realizar cambios.</span><span class="sxs-lookup"><span data-stu-id="418c2-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="418c2-126">Como parte del proyecto de migración es aconsejable solucionar todas las dependencias de características no compatibles con la nueva versión de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="418c2-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="418c2-127">Para obtener más información sobre los escenarios y las ediciones compatibles, consulte [Actualización a SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="418c2-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="418c2-128">En la tabla siguiente se muestran los principales métodos de migración y se explica en qué circunstancias es más apropiado usar cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="418c2-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="418c2-129">Método</span><span class="sxs-lookup"><span data-stu-id="418c2-129">Method</span></span> | <span data-ttu-id="418c2-130">Versión de base de datos de origen</span><span class="sxs-lookup"><span data-stu-id="418c2-130">Source database version</span></span> | <span data-ttu-id="418c2-131">Versión de base de datos de destino</span><span class="sxs-lookup"><span data-stu-id="418c2-131">Destination database version</span></span> | <span data-ttu-id="418c2-132">Restricción del tamaño de copia de seguridad de la base de datos de origen</span><span class="sxs-lookup"><span data-stu-id="418c2-132">Source database backup size constraint</span></span> | <span data-ttu-id="418c2-133">Notas</span><span class="sxs-lookup"><span data-stu-id="418c2-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="418c2-134">Realizar una copia de seguridad local con compresión y copiar manualmente el archivo de copia de seguridad en la máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="418c2-135">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="418c2-136">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="418c2-137">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="418c2-138">Se trata de una técnica muy sencilla y probada para mover bases de datos entre máquinas.</span><span class="sxs-lookup"><span data-stu-id="418c2-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="418c2-139">Realizar una copia de seguridad a una dirección URL y restaurarla en la máquina virtual de Azure desde dicha dirección URL</span><span class="sxs-lookup"><span data-stu-id="418c2-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="418c2-140">SQL Server 2012 SP1 CU2 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="418c2-141">SQL Server 2012 SP1 CU2 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="418c2-142">< 12,8 TB para SQL Server 2016, de lo contrario < 1 TB</span><span class="sxs-lookup"><span data-stu-id="418c2-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="418c2-143">Este método es solo otra manera de mover el archivo de copia de seguridad a la VM con Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="418c2-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="418c2-144">Desasociar y, a continuación, copiar los archivos de datos y de registro en el almacenamiento de blobs de Azure y, a continuación, asociarlos a SQL Server en la máquina virtual de Azure desde una URL</span><span class="sxs-lookup"><span data-stu-id="418c2-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="418c2-145">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="418c2-146">SQL Server 2014 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="418c2-147">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="418c2-148">Este método se usa cuando se pretenden [almacenar estos archivos mediante el servicio de almacenamiento de blobs de Azure](https://msdn.microsoft.com/library/dn385720.aspx) y adjuntarlos a SQL Server en una VM de Azure, especialmente con bases de datos muy grandes.</span><span class="sxs-lookup"><span data-stu-id="418c2-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="418c2-149">Convertir máquina local en VHD de Hyper-V, cargar en el almacenamiento de blobs de Azure y, a continuación, implementar una nueva máquina virtual con el VHD cargado</span><span class="sxs-lookup"><span data-stu-id="418c2-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="418c2-150">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="418c2-151">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="418c2-152">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="418c2-153">Se usa cuando el usuario [tiene su propia licencia de SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), cuando se migra una base de datos que se va a ejecutar en una versión anterior de SQL Server o cuando se migran bases de datos de usuario y del sistema conjuntamente como parte de la migración de base de datos dependiente de otras bases de datos de usuario o bases de datos del sistema.</span><span class="sxs-lookup"><span data-stu-id="418c2-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="418c2-154">Envío de unidad de disco duro con el servicio de importación y exportación de Windows</span><span class="sxs-lookup"><span data-stu-id="418c2-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="418c2-155">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="418c2-156">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="418c2-157">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="418c2-158">Use el [servicio de importación y exportación de Windows](../../../storage/common/storage-import-export-service.md) cuando el método de copia manual sea demasiado lento, como por ejemplo, en el caso de bases de datos muy grandes.</span><span class="sxs-lookup"><span data-stu-id="418c2-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="418c2-159">Uso del Asistente para agregar una réplica de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="418c2-160">SQL Server 2012 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="418c2-161">SQL Server 2012 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="418c2-162">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="418c2-163">Minimiza el tiempo de inactividad; utilícelo cuando tenga una implementación local de AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="418c2-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="418c2-164">Uso de la replicación transaccional de SQL Server</span><span class="sxs-lookup"><span data-stu-id="418c2-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="418c2-165">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="418c2-166">SQL Server 2005 o superior</span><span class="sxs-lookup"><span data-stu-id="418c2-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="418c2-167">Límite de almacenamiento de máquina virtual de Azure</span><span class="sxs-lookup"><span data-stu-id="418c2-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="418c2-168">Utilícelo cuando necesite minimizar el tiempo de inactividad y no tenga una implementación local de AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="418c2-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="418c2-169">Copia de seguridad y restauración</span><span class="sxs-lookup"><span data-stu-id="418c2-169">Backup and restore</span></span>
<span data-ttu-id="418c2-170">Haga una copia de seguridad de la base de datos con compresión, copie la copia de seguridad a la VM y, luego, restaure dicha base de datos.</span><span class="sxs-lookup"><span data-stu-id="418c2-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="418c2-171">Si el archivo de copia de seguridad es mayor que 1 TB, debe seccionarlo porque el tamaño máximo de un disco de máquina virtual es 1 TB.</span><span class="sxs-lookup"><span data-stu-id="418c2-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="418c2-172">Utilice los siguientes pasos generales para migrar una base de datos de usuario con este método manual:</span><span class="sxs-lookup"><span data-stu-id="418c2-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="418c2-173">Realice una copia de seguridad completa de la base de datos en una ubicación local.</span><span class="sxs-lookup"><span data-stu-id="418c2-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="418c2-174">Cree o cargue una máquina virtual con la versión de SQL Server deseada.</span><span class="sxs-lookup"><span data-stu-id="418c2-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="418c2-175">Configure la conectividad según sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="418c2-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="418c2-176">Consulte [Conexión a una máquina virtual de SQL Server en Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="418c2-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="418c2-177">Copie los archivos de copia de seguridad en la máquina virtual con Escritorio remoto, el Explorador de Windows o el comando de copia de un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="418c2-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="418c2-178">Copia de seguridad en una dirección URL y restauración</span><span class="sxs-lookup"><span data-stu-id="418c2-178">Backup to URL and restore</span></span>
<span data-ttu-id="418c2-179">En lugar de hacer la copia de seguridad en un archivo local, puede usar la [copia de seguridad en una dirección URL](https://msdn.microsoft.com/library/dn435916.aspx) y luego restaurar desde la dirección URL en la VM.</span><span class="sxs-lookup"><span data-stu-id="418c2-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="418c2-180">SQL Server 2016 admite los conjuntos de copia de seguridad seccionados, se recomiendan para mejorar el rendimiento y son necesarios para superar los límites de tamaño por blob.</span><span class="sxs-lookup"><span data-stu-id="418c2-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="418c2-181">En el caso de bases de datos muy grandes, se recomienda usar el [servicio de importación y exportación de Windows](../../../storage/common/storage-import-export-service.md) .</span><span class="sxs-lookup"><span data-stu-id="418c2-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="418c2-182">Desasociación y asociación desde una dirección URL</span><span class="sxs-lookup"><span data-stu-id="418c2-182">Detach and attach from URL</span></span>
<span data-ttu-id="418c2-183">Desasocie la base de datos y los archivos de registro y transfiéralos a [Azure Blob Storage](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="418c2-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="418c2-184">Asocie la base de datos desde la dirección URL en la VM de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="418c2-185">Utilice este método si desea que los archivos de base de datos físicos residan en Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="418c2-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="418c2-186">Esto podría ser útil para bases de datos muy grandes.</span><span class="sxs-lookup"><span data-stu-id="418c2-186">This might be useful for very large databases.</span></span> <span data-ttu-id="418c2-187">Utilice los siguientes pasos generales para migrar una base de datos de usuario con este método manual:</span><span class="sxs-lookup"><span data-stu-id="418c2-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="418c2-188">Desasocie los archivos de base de datos de la instancia de base de datos local.</span><span class="sxs-lookup"><span data-stu-id="418c2-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="418c2-189">Copie los archivos de base de datos desasociados en un almacenamiento de blobs de Azure con la [utilidad de línea de comandos AZCopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="418c2-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="418c2-190">Asocie los archivos de base de datos desde la dirección URL de Azure a la instancia de SQL Server en la máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="418c2-191">Conversión a máquina virtual y carga en la dirección URL e implementación como máquina virtual nueva</span><span class="sxs-lookup"><span data-stu-id="418c2-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="418c2-192">Este método se usa para migrar todas las bases de datos de usuario y del sistema de una instancia de SQL Server local a una máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="418c2-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="418c2-193">Utilice los siguientes pasos generales para migrar una instancia completa de SQL Server con este método manual:</span><span class="sxs-lookup"><span data-stu-id="418c2-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="418c2-194">Convierta las máquinas físicas o virtuales en VHD de Hyper-V mediante [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="418c2-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="418c2-195">Cargue archivos VHD en Almacenamiento de Azure mediante el [cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="418c2-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="418c2-196">Implemente una máquina virtual nueva mediante el VHD cargado.</span><span class="sxs-lookup"><span data-stu-id="418c2-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="418c2-197">Para migrar una aplicación completa, considere el uso de [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="418c2-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="418c2-198">Envío de unidad de disco duro</span><span class="sxs-lookup"><span data-stu-id="418c2-198">Ship hard drive</span></span>
<span data-ttu-id="418c2-199">Use el [método del servicio de importación y exportación de Azure](../../../storage/common/storage-import-export-service.md) para transferir grandes cantidades de datos de archivo al almacenamiento en blobs de Azure en aquellas situaciones en que el proceso de carga a través de la red sea demasiado caro o no sea viable.</span><span class="sxs-lookup"><span data-stu-id="418c2-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="418c2-200">Con este servicio, se envían una o varias unidades de discos duros que contengan esos datos a un centro de datos de Azure, donde los datos se cargarán a su cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="418c2-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="418c2-201">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="418c2-201">Next Steps</span></span>
<span data-ttu-id="418c2-202">Para obtener más información sobre cómo ejecutar SQL Server en Máquinas virtuales de Azure, consulte [Información general sobre SQL Server en Máquinas virtuales de Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="418c2-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="418c2-203">Para obtener instrucciones sobre cómo crear una máquina virtual de Azure SQL Server a partir de una imagen capturada, consulte [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) (Sugerencias y trucos para la "clonación" de máquinas virtuales de SQL Azure a partir de imágenes capturadas) en el blog de CSS SQL Server Engineers.</span><span class="sxs-lookup"><span data-stu-id="418c2-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>


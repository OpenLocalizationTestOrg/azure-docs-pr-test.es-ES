---
title: "aaaHigh disponibilidad y recuperación ante desastres para SQL Server | Documentos de Microsoft"
description: "Obtener una explicación de Hola diversos tipos de estrategias HADR de SQL Server en máquinas virtuales de Azure."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 53981f7e-8370-4979-b26a-93a5988d905f
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: mikeray
ms.openlocfilehash: 2b62d8b30520952ba6b7da7177a2c2de95bea8ce
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="high-availability-and-disaster-recovery-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="bc23d-103">Alta disponibilidad y recuperación ante desastres para SQL Server en máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="bc23d-103">High availability and disaster recovery for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="bc23d-104">Máquinas virtuales de Microsoft Azure (VM) con SQL Server puede ayudar a reducir el costo de Hola de una solución de base de datos alta disponibilidad y ante desastres (HADR) de recuperación.</span><span class="sxs-lookup"><span data-stu-id="bc23d-104">Microsoft Azure virtual machines (VMs) with SQL Server can help lower hello cost of a high availability and disaster recovery (HADR) database solution.</span></span> <span data-ttu-id="bc23d-105">La mayoría de las soluciones HADR de SQL Server son compatibles con las máquinas virtuales de Azure, bien como soluciones exclusivas de Azure o híbridas.</span><span class="sxs-lookup"><span data-stu-id="bc23d-105">Most SQL Server HADR solutions are supported in Azure virtual machines, both as Azure-only and as hybrid solutions.</span></span> <span data-ttu-id="bc23d-106">En una solución solo de Azure, Hola todo el sistema HADR se ejecuta en Azure.</span><span class="sxs-lookup"><span data-stu-id="bc23d-106">In an Azure-only solution, hello entire HADR system runs in Azure.</span></span> <span data-ttu-id="bc23d-107">En una configuración híbrida, parte de la solución de Hola se ejecuta en Azure y Hola otra parte se ejecuta de forma local en su organización.</span><span class="sxs-lookup"><span data-stu-id="bc23d-107">In a hybrid configuration, part of hello solution runs in Azure and hello other part runs on-premises in your organization.</span></span> <span data-ttu-id="bc23d-108">Hello flexibilidad de hello entorno Azure le permite toomove total o parcialmente presupuesto de tooAzure toosatisfy hello y requisitos de HADR de SQL Server de base de datos sistemas.</span><span class="sxs-lookup"><span data-stu-id="bc23d-108">hello flexibility of hello Azure environment enables you toomove partially or completely tooAzure toosatisfy hello budget and HADR requirements of your SQL Server database systems.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="understanding-hello-need-for-an-hadr-solution"></a><span data-ttu-id="bc23d-109">Necesidad de Hola de descripción de una solución HADR</span><span class="sxs-lookup"><span data-stu-id="bc23d-109">Understanding hello need for an HADR solution</span></span>
<span data-ttu-id="bc23d-110">Es una tooyou tooensure que el sistema de base de datos posee capacidades HADR de Hola Hola contrato de nivel de servicio (SLA) requiere.</span><span class="sxs-lookup"><span data-stu-id="bc23d-110">It is up tooyou tooensure that your database system possesses hello HADR capabilities that hello service-level agreement (SLA) requires.</span></span> <span data-ttu-id="bc23d-111">hecho de Hola que Azure proporcione mecanismos de alta disponibilidad, como la recuperación del servicio para los servicios de nube y detección de errores para las máquinas virtuales, no garantiza por sí solo que puede cumplir el SLA de hello deseado.</span><span class="sxs-lookup"><span data-stu-id="bc23d-111">hello fact that Azure provides high availability mechanisms, such as service healing for cloud services and failure recovery detection for Virtual Machines, does not itself guarantee you can meet hello desired SLA.</span></span> <span data-ttu-id="bc23d-112">Estos mecanismos protegen la alta disponibilidad de Hola de hello las máquinas virtuales, pero no Hola alta disponibilidad de SQL Server que se ejecuta dentro de hello las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="bc23d-112">These mechanisms protect hello high availability of hello VMs but not hello high availability of SQL Server running inside hello VMs.</span></span> <span data-ttu-id="bc23d-113">Es posible que toofail de instancia de SQL Server de hello mientras Hola VM está en línea y en buen estado.</span><span class="sxs-lookup"><span data-stu-id="bc23d-113">It is possible for hello SQL Server instance toofail while hello VM is online and healthy.</span></span> <span data-ttu-id="bc23d-114">Además, los mecanismos de alta disponibilidad incluso Hola proporcionados por Azure permiten tiempos de inactividad de las máquinas virtuales de hello due tooevents como la recuperación de errores de software o hardware y actualizaciones del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="bc23d-114">Moreover, even hello high availability mechanisms provided by Azure allow for downtime of hello VMs due tooevents such as recovery from software or hardware failures and operating system upgrades.</span></span>

<span data-ttu-id="bc23d-115">Además, el almacenamiento con redundancia geográfica (GRS) de Azure, que se implementa con una característica llamada replicación geográfica, podría no ser una solución para recuperación ante desastres adecuada para sus bases de datos.</span><span class="sxs-lookup"><span data-stu-id="bc23d-115">In addition, Geo Redundant Storage (GRS) in Azure, which is implemented with a feature called geo-replication, may not be an adequate disaster recovery solution for your databases.</span></span> <span data-ttu-id="bc23d-116">Dado que la replicación geográfica envía datos de forma asincrónica, se pueden perder actualizaciones recientes en caso de hello de un desastre.</span><span class="sxs-lookup"><span data-stu-id="bc23d-116">Because geo-replication sends data asynchronously, recent updates can be lost in hello event of disaster.</span></span> <span data-ttu-id="bc23d-117">Para obtener más información sobre las limitaciones de replicación geográfica se tratan en hello [no se admite para los archivos de datos y de registro en discos independientes de replicación geográfica](#geo-replication-support) sección.</span><span class="sxs-lookup"><span data-stu-id="bc23d-117">More information regarding geo-replication limitations are covered in hello [Geo-replication not supported for data and log files on separate disks](#geo-replication-support) section.</span></span>

## <a name="hadr-deployment-architectures"></a><span data-ttu-id="bc23d-118">Arquitecturas de implementación HADR</span><span class="sxs-lookup"><span data-stu-id="bc23d-118">HADR deployment architectures</span></span>
<span data-ttu-id="bc23d-119">Entre las tecnologías HADR de SQL Server compatibles con Azure se incluyen:</span><span class="sxs-lookup"><span data-stu-id="bc23d-119">SQL Server HADR technologies that are supported in Azure include:</span></span>

* [<span data-ttu-id="bc23d-120">Grupos de disponibilidad AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bc23d-120">Always On Availability Groups</span></span>](https://technet.microsoft.com/library/hh510230.aspx)
* [<span data-ttu-id="bc23d-121">Instancias de clúster de conmutación por error de AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bc23d-121">Always On Failover Cluster Instances</span></span>](https://technet.microsoft.com/library/ms189134.aspx)
* [<span data-ttu-id="bc23d-122">Trasvase de registros</span><span class="sxs-lookup"><span data-stu-id="bc23d-122">Log Shipping</span></span>](https://technet.microsoft.com/library/ms187103.aspx)
* [<span data-ttu-id="bc23d-123">Copia de seguridad y restauración de SQL Server con el servicio Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="bc23d-123">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>](https://msdn.microsoft.com/library/jj919148.aspx)
* <span data-ttu-id="bc23d-124">[Creación de reflejo de la base de datos](https://technet.microsoft.com/library/ms189852.aspx): en desuso en SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="bc23d-124">[Database Mirroring](https://technet.microsoft.com/library/ms189852.aspx) - Deprecated in SQL Server 2016</span></span>

<span data-ttu-id="bc23d-125">Es posible toocombine Hola tecnologías conjuntamente tooimplement una solución de SQL Server que tenga alta disponibilidad y capacidades de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="bc23d-125">It is possible toocombine hello technologies together tooimplement a SQL Server solution that has both high availability and disaster recovery capabilities.</span></span> <span data-ttu-id="bc23d-126">Dependiendo de la tecnología de Hola que se utilice, una implementación híbrida puede requerir un túnel VPN con hello red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="bc23d-126">Depending on hello technology you use, a hybrid deployment may require a VPN tunnel with hello Azure virtual network.</span></span> <span data-ttu-id="bc23d-127">Hello las siguientes secciones muestran algunas de las arquitecturas de implementación de ejemplo de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-127">hello sections below show you some of hello example deployment architectures.</span></span>

## <a name="azure-only-high-availability-solutions"></a><span data-ttu-id="bc23d-128">Exclusiva de Azure: soluciones de alta disponibilidad</span><span class="sxs-lookup"><span data-stu-id="bc23d-128">Azure-only: High availability solutions</span></span>

<span data-ttu-id="bc23d-129">Puede tener una solución de alta disponibilidad para SQL Server en un nivel de base de datos con grupos de disponibilidad Always On (denominados grupos de disponibilidad).</span><span class="sxs-lookup"><span data-stu-id="bc23d-129">You can have a high availability solution for SQL Server at a database level with Always On Availability Groups - called availability groups.</span></span> <span data-ttu-id="bc23d-130">También puede crear una solución de alta disponibilidad en un nivel de instancia con instancias de clúster de conmutación por error Always On (instancias del clúster de conmutación por error).</span><span class="sxs-lookup"><span data-stu-id="bc23d-130">You can also create a high availability solution at an instance level with Always On Failover Cluster Instances - failover cluster instances.</span></span> <span data-ttu-id="bc23d-131">Si desea obtener redundancia adicional, puede crear redundancia en ambos niveles creando de grupos de disponibilidad en instancias de clúster de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="bc23d-131">For additional redundancy, you can create redundancy at both levels by creating availability groups on failover cluster instances.</span></span> 

| <span data-ttu-id="bc23d-132">Technology</span><span class="sxs-lookup"><span data-stu-id="bc23d-132">Technology</span></span> | <span data-ttu-id="bc23d-133">Arquitecturas de ejemplo</span><span class="sxs-lookup"><span data-stu-id="bc23d-133">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="bc23d-134">**Grupos de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="bc23d-134">**Availability groups**</span></span> |<span data-ttu-id="bc23d-135">Réplicas de disponibilidad que se ejecutan en máquinas virtuales de Azure Hola misma región proporcionar una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="bc23d-135">Availability replicas running in Azure VMs in hello same region provide high availability.</span></span> <span data-ttu-id="bc23d-136">Necesita tooconfigure un controlador de dominio de máquina virtual, porque de agrupación en clústeres de conmutación por error de Windows requiere un dominio de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bc23d-136">You need tooconfigure a domain controller VM, because Windows failover clustering requires an Active Directory domain.</span></span><br/> <span data-ttu-id="bc23d-137">![Grupos de disponibilidad](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span><span class="sxs-lookup"><span data-stu-id="bc23d-137">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span></span><br/><span data-ttu-id="bc23d-138">Para más información, vea [Configuración de grupos de disponibilidad en Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-138">For more information, see [Configure Availability Groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span> |
| <span data-ttu-id="bc23d-139">**Instancias de clúster de conmutación por error**</span><span class="sxs-lookup"><span data-stu-id="bc23d-139">**Failover cluster instances**</span></span> |<span data-ttu-id="bc23d-140">Las instancias de clúster de conmutación por error (FCI), que requieren almacenamiento compartido, se pueden crear de tres maneras distintas.</span><span class="sxs-lookup"><span data-stu-id="bc23d-140">Failover Cluster Instances (FCI), which require shared storage, can be created in 3 different ways.</span></span><br/><br/><span data-ttu-id="bc23d-141">1. Un clúster de conmutación por error de dos nodos que se ejecuta en máquinas virtuales de Azure con el uso de almacenamiento conectado [espacios de almacenamiento de Windows Server 2016 directo \(S2D\) ](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide una SAN virtual basada en software.</span><span class="sxs-lookup"><span data-stu-id="bc23d-141">1. A two-node failover cluster running in Azure VMs with attached storage using [Windows Server 2016 Storage Spaces Direct \(S2D\)](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide a software-based virtual SAN.</span></span><br/><br/><span data-ttu-id="bc23d-142">2. Un clúster de conmutación por error de dos nodos que se ejecuta en Azure Virtual Machines con almacenamiento posibilitado por una solución de clústeres de terceros.</span><span class="sxs-lookup"><span data-stu-id="bc23d-142">2. A two-node failover cluster running in Azure VMs with storage supported by a third-party clustering solution.</span></span> <span data-ttu-id="bc23d-143">Si desea obtener un ejemplo específico con SIOS DataKeeper, vea [High availability for a file share using failover clustering and 3rd party software SIOS Datakeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/) (Alta disponibilidad de un recurso compartido de archivos con clúster de conmutación por error y el software de terceros SIOS DataKeeper).</span><span class="sxs-lookup"><span data-stu-id="bc23d-143">For a specific example that uses SIOS DataKeeper, see [High availability for a file share using failover clustering and 3rd party software SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span></span><br/><br/><span data-ttu-id="bc23d-144">3. Un clúster de conmutación por error de dos nodos que se ejecuta en Azure Virtual Machines con almacenamiento en bloque compartido de destino iSCSI remoto a través de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="bc23d-144">3. A two-node failover cluster running in Azure VMs with remote iSCSI Target shared block storage via ExpressRoute.</span></span> <span data-ttu-id="bc23d-145">Por ejemplo, almacenamiento de información privada de NetApp (NPS) expone un destino iSCSI a través de ExpressRoute con Equinix tooAzure máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="bc23d-145">For example, NetApp Private Storage (NPS) exposes an iSCSI target via ExpressRoute with Equinix tooAzure VMs.</span></span><br/><br/><span data-ttu-id="bc23d-146">Para el almacenamiento compartido de terceros y soluciones de replicación de datos, debe ponerse en contacto con el proveedor de Hola de los datos de tooaccessing relacionados con problemas de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="bc23d-146">For third-party shared storage and data replication solutions, you should contact hello vendor for any issues related tooaccessing data on failover.</span></span><br/><br/><span data-ttu-id="bc23d-147">Tenga en cuenta que todavía no se admite el uso de FCI basado en el [Almacenamiento de archivos de Azure](https://azure.microsoft.com/services/storage/files/) , porque esta solución no utiliza Almacenamiento premium.</span><span class="sxs-lookup"><span data-stu-id="bc23d-147">Note that using FCI on top of [Azure File storage](https://azure.microsoft.com/services/storage/files/) is not supported yet, because this solution does not utilize Premium Storage.</span></span> <span data-ttu-id="bc23d-148">Estamos trabajando toosupport este pronto.</span><span class="sxs-lookup"><span data-stu-id="bc23d-148">We are working toosupport this soon.</span></span> |

## <a name="azure-only-disaster-recovery-solutions"></a><span data-ttu-id="bc23d-149">Exclusiva de Azure: soluciones de recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="bc23d-149">Azure-only: Disaster recovery solutions</span></span>
<span data-ttu-id="bc23d-150">Puede tener una solución de recuperación ante desastres para las bases de datos de SQL Server en Azure con grupos de disponibilidad, creación de reflejo de bases de datos o copias de seguridad y restauración con blobs de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="bc23d-150">You can have a disaster recovery solution for your SQL Server databases in Azure using availability groups, database mirroring, or backup and restore with storage blobs.</span></span>

| <span data-ttu-id="bc23d-151">Technology</span><span class="sxs-lookup"><span data-stu-id="bc23d-151">Technology</span></span> | <span data-ttu-id="bc23d-152">Arquitecturas de ejemplo</span><span class="sxs-lookup"><span data-stu-id="bc23d-152">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="bc23d-153">**Grupos de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="bc23d-153">**Availability Groups**</span></span> |<span data-ttu-id="bc23d-154">Réplicas de disponibilidad que se ejecutan en varios centros de datos en máquinas virtuales de Azure para la recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="bc23d-154">Availability replicas running across multiple datacenters in Azure VMs for disaster recovery.</span></span> <span data-ttu-id="bc23d-155">Esta solución entre regiones protege frente a interrupciones en todo el sitio.</span><span class="sxs-lookup"><span data-stu-id="bc23d-155">This cross-region solution protects against complete site outage.</span></span> <br/> <span data-ttu-id="bc23d-156">![Grupos de disponibilidad](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span><span class="sxs-lookup"><span data-stu-id="bc23d-156">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span></span><br/><span data-ttu-id="bc23d-157">Dentro de una región, todas las réplicas deben ser dentro de hello mismo servicio en la nube y Hola misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="bc23d-157">Within a region, all replicas should be within hello same cloud service and hello same VNet.</span></span> <span data-ttu-id="bc23d-158">Dado que cada región tendrá una red virtual distinta, estas soluciones requieren conectividad de red virtual tooVNet.</span><span class="sxs-lookup"><span data-stu-id="bc23d-158">Because each region will have a separate VNet, these solutions require VNet tooVNet connectivity.</span></span> <span data-ttu-id="bc23d-159">Para obtener más información, consulte [configurar una red virtual a red de virtual de conexión mediante Hola portal de Azure](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-159">For more information, see [Configure a VNet-to-VNet connection using hello Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span></span> <span data-ttu-id="bc23d-160">Para obtener instrucciones detalladas, vea [Configuración de un grupo de disponibilidad en máquinas virtuales de Azure en distintas regiones](virtual-machines-windows-portal-sql-availability-group-dr.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-160">For detailed instructions, see [Configure a SQL Server Availability Group on Azure Virtual Machines in Different Regions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span></span>|
| <span data-ttu-id="bc23d-161">**Creación de reflejo de la base de datos**</span><span class="sxs-lookup"><span data-stu-id="bc23d-161">**Database Mirroring**</span></span> |<span data-ttu-id="bc23d-162">Los servidores principal y de reflejo se ejecutan en distintos centros de datos para la recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="bc23d-162">Principal and mirror and servers running in different datacenters for disaster recovery.</span></span> <span data-ttu-id="bc23d-163">Debe realizar la implementación con certificados de servidor porque un dominio de Active Directory no puede abarcar varios centros de datos.</span><span class="sxs-lookup"><span data-stu-id="bc23d-163">You must deploy using server certificates because an active directory domain cannot span multiple datacenters.</span></span><br/>![Creación de reflejo de la base de datos](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_dbmirroring.gif) |
| <span data-ttu-id="bc23d-165">**Copia de seguridad y restauración con el servicio Almacenamiento de blobs de Azure**</span><span class="sxs-lookup"><span data-stu-id="bc23d-165">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="bc23d-166">Las bases de datos de producción copian directamente tooblob almacenamiento en otro centro de datos para la recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="bc23d-166">Production databases backed up directly tooblob storage in a different datacenter for disaster recovery.</span></span><br/><span data-ttu-id="bc23d-167">![Copia de seguridad y restauración](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="bc23d-167">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="bc23d-168">Para más información, consulte [Copias de seguridad y restauración para SQL Server en máquinas virtuales de Azure](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-168">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="hybrid-it-disaster-recovery-solutions"></a><span data-ttu-id="bc23d-169">TI híbrida: soluciones de recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="bc23d-169">Hybrid IT: Disaster recovery solutions</span></span>
<span data-ttu-id="bc23d-170">Puede tener una solución de recuperación ante desastres para las bases de datos de SQL Server en un entorno de TI híbrida con grupos de disponibilidad, creación de reflejo de la base de datos, trasvase de registros y copias de seguridad y restauración con Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bc23d-170">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment using availability groups, database mirroring, log shipping, and backup and restore with Azure blog storage.</span></span>

| <span data-ttu-id="bc23d-171">Technology</span><span class="sxs-lookup"><span data-stu-id="bc23d-171">Technology</span></span> | <span data-ttu-id="bc23d-172">Arquitecturas de ejemplo</span><span class="sxs-lookup"><span data-stu-id="bc23d-172">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="bc23d-173">**Grupos de disponibilidad**</span><span class="sxs-lookup"><span data-stu-id="bc23d-173">**Availability Groups**</span></span> |<span data-ttu-id="bc23d-174">Algunas réplicas de disponibilidad se ejecutan en máquinas virtuales de Azure y réplicas se ejecutan localmente para la recuperación ante desastres a través de sitios.</span><span class="sxs-lookup"><span data-stu-id="bc23d-174">Some availability replicas running in Azure VMs and other replicas running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="bc23d-175">Hello sitio de producción puede ser local o en un centro de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="bc23d-175">hello production site can be either on-premises or in an Azure datacenter.</span></span><br/>![Grupos de disponibilidad](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_alwayson.gif)<br/><span data-ttu-id="bc23d-177">Dado que todas las réplicas de disponibilidad deben estar en Hola mismo clúster de conmutación por error, hello debe abarcar ambas redes (un clúster de conmutación por error de múltiples subredes).</span><span class="sxs-lookup"><span data-stu-id="bc23d-177">Because all availability replicas must be in hello same failover cluster, hello cluster must span both networks (a multi-subnet failover cluster).</span></span> <span data-ttu-id="bc23d-178">Esta configuración requiere una conexión VPN entre Azure y Hola red local.</span><span class="sxs-lookup"><span data-stu-id="bc23d-178">This configuration requires a VPN connection between Azure and hello on-premises network.</span></span><br/><br/><span data-ttu-id="bc23d-179">Para la recuperación ante desastres correcta de las bases de datos, también debe instalar un controlador de dominio de réplica en el sitio de recuperación ante desastres de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-179">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span><br/><br/><span data-ttu-id="bc23d-180">Es posible toouse Hola Asistente para agregar réplicas en SSMS tooadd un tooan de réplica de Azure siempre en el grupo de disponibilidad existente.</span><span class="sxs-lookup"><span data-stu-id="bc23d-180">It is possible toouse hello Add Replica Wizard in SSMS tooadd an Azure replica tooan existing Always On Availability Group.</span></span> <span data-ttu-id="bc23d-181">Para obtener más información, consulte Tutorial: ampliar su tooAzure siempre en el grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="bc23d-181">For more information, see Tutorial: Extend your Always On Availability Group tooAzure.</span></span> |
| <span data-ttu-id="bc23d-182">**Creación de reflejo de la base de datos**</span><span class="sxs-lookup"><span data-stu-id="bc23d-182">**Database Mirroring**</span></span> |<span data-ttu-id="bc23d-183">Un asociado ejecutándose en una máquina virtual de Azure y Hola otro ejecutando de forma local para la recuperación ante desastres a través de sitios con certificados de servidor.</span><span class="sxs-lookup"><span data-stu-id="bc23d-183">One partner running in an Azure VM and hello other running on-premises for cross-site disaster recovery using server certificates.</span></span> <span data-ttu-id="bc23d-184">Los asociados no necesitan toobe en Hola mismo dominio de Active Directory y no se requiere ninguna conexión de VPN.</span><span class="sxs-lookup"><span data-stu-id="bc23d-184">Partners do not need toobe in hello same Active Directory domain, and no VPN connection is required.</span></span><br/><span data-ttu-id="bc23d-185">![Creación de reflejo de la base de datos](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span><span class="sxs-lookup"><span data-stu-id="bc23d-185">![Database Mirroring](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span></span><br/><span data-ttu-id="bc23d-186">Otra situación de creación de reflejo de base de datos implica un asociado se ejecuta en una máquina virtual de Azure y hello otra que se ejecuta de forma local en hello mismo dominio de Active Directory para la recuperación ante desastres entre sitios.</span><span class="sxs-lookup"><span data-stu-id="bc23d-186">Another database mirroring scenario involves one partner running in an Azure VM and hello other running on-premises in hello same Active Directory domain for cross-site disaster recovery.</span></span> <span data-ttu-id="bc23d-187">A [conexión VPN entre la red de hello Azure virtual hello y red local](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) es necesario.</span><span class="sxs-lookup"><span data-stu-id="bc23d-187">A [VPN connection between hello Azure virtual network and hello on-premises network](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) is required.</span></span><br/><br/><span data-ttu-id="bc23d-188">Para la recuperación ante desastres correcta de las bases de datos, también debe instalar un controlador de dominio de réplica en el sitio de recuperación ante desastres de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-188">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="bc23d-189">**Trasvase de registros**</span><span class="sxs-lookup"><span data-stu-id="bc23d-189">**Log Shipping**</span></span> |<span data-ttu-id="bc23d-190">Un servidor que ejecuta en una máquina virtual de Azure y Hola otro ejecutando de forma local para la recuperación ante desastres entre sitios.</span><span class="sxs-lookup"><span data-stu-id="bc23d-190">One server running in an Azure VM and hello other running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="bc23d-191">Trasvase de registros depende de Windows uso compartido de archivos, por lo que se requiere la red en local de una conexión VPN entre la red virtual de Azure de Hola y Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-191">Log shipping depends on Windows file sharing, so a VPN connection between hello Azure virtual network and hello on-premises network is required.</span></span><br/>![Trasvase de registros](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_log_shipping.gif)<br/><span data-ttu-id="bc23d-193">Para la recuperación ante desastres correcta de las bases de datos, también debe instalar un controlador de dominio de réplica en el sitio de recuperación ante desastres de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-193">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="bc23d-194">**Copia de seguridad y restauración con el servicio Almacenamiento de blobs de Azure**</span><span class="sxs-lookup"><span data-stu-id="bc23d-194">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="bc23d-195">Copia de seguridad directamente tooAzure almacenamiento de blobs para recuperación ante desastres de bases de datos de producción en local.</span><span class="sxs-lookup"><span data-stu-id="bc23d-195">On-premises production databases backed up directly tooAzure blob storage for disaster recovery.</span></span><br/><span data-ttu-id="bc23d-196">![Copia de seguridad y restauración](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="bc23d-196">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="bc23d-197">Para más información, consulte [Copias de seguridad y restauración para SQL Server en máquinas virtuales de Azure](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-197">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="important-considerations-for-sql-server-hadr-in-azure"></a><span data-ttu-id="bc23d-198">Consideraciones importantes para HADR de SQL Server en Azure</span><span class="sxs-lookup"><span data-stu-id="bc23d-198">Important considerations for SQL Server HADR in Azure</span></span>
<span data-ttu-id="bc23d-199">Las máquinas virtuales de Azure, el almacenamiento y la conexión de red tienen características operativas diferentes de las de una infraestructura TI local y no virtualizada.</span><span class="sxs-lookup"><span data-stu-id="bc23d-199">Azure VMs, storage, and networking have different operational characteristics than an on-premises, non-virtualized IT infrastructure.</span></span> <span data-ttu-id="bc23d-200">Una implementación correcta de una solución de SQL Server HADR en Azure requiere que entender estas diferencias y diseñar su solución tooaccommodate ellos.</span><span class="sxs-lookup"><span data-stu-id="bc23d-200">A successful implementation of a HADR SQL Server solution in Azure requires that you understand these differences and design your solution tooaccommodate them.</span></span>

### <a name="high-availability-nodes-in-an-availability-set"></a><span data-ttu-id="bc23d-201">Nodos de alta disponibilidad en un conjunto de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="bc23d-201">High availability nodes in an availability set</span></span>
<span data-ttu-id="bc23d-202">Conjuntos de disponibilidad de Azure permiten nodos de alta disponibilidad de hello tooplace en diferentes dominios de error (FD) y dominios de actualización (ud).</span><span class="sxs-lookup"><span data-stu-id="bc23d-202">Availability sets in Azure enable you tooplace hello high availability nodes into separate Fault Domains (FDs) and Update Domains (UDs).</span></span> <span data-ttu-id="bc23d-203">Para las máquinas virtuales de Azure toobe realizó Hola mismo conjunto de disponibilidad, debe implementarlas en hello mismo servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="bc23d-203">For Azure VMs toobe placed in hello same availability set, you must deploy them in hello same cloud service.</span></span> <span data-ttu-id="bc23d-204">Sólo los nodos en hello mismo servicio en la nube puede participar en Hola el mismo conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="bc23d-204">Only nodes in hello same cloud service can participate in hello same availability set.</span></span> <span data-ttu-id="bc23d-205">Para obtener más información, consulte [administrar Hola disponibilidad de las máquinas virtuales](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="bc23d-205">For more information, see [Manage hello Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="failover-cluster-behavior-in-azure-networking"></a><span data-ttu-id="bc23d-206">Comportamiento de clúster de conmutación por error en redes de Azure</span><span class="sxs-lookup"><span data-stu-id="bc23d-206">Failover cluster behavior in Azure networking</span></span>
<span data-ttu-id="bc23d-207">servicio DHCP no compatible con RFC de Hello en Azure puede hacer la creación de hello de determinados toofail de configuraciones de clúster de conmutación por error, debido a toohello nombre de red de clúster que se asigna una dirección IP duplicada, como hello las direcciones IP mismo como uno de los nodos de clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-207">hello non-RFC-compliant DHCP service in Azure can cause hello creation of certain failover cluster configurations toofail, due toohello cluster network name being assigned a duplicate IP address, such as hello same IP address as one of hello cluster nodes.</span></span> <span data-ttu-id="bc23d-208">Se trata de un problema al implementar grupos de disponibilidad, que depende la característica de clúster de conmutación por error de Windows hello.</span><span class="sxs-lookup"><span data-stu-id="bc23d-208">This is an issue when you implement Availability Groups, which depends on hello Windows failover cluster feature.</span></span>

<span data-ttu-id="bc23d-209">Considere el escenario de hello cuando se crea un clúster de dos nodos y se pone en línea:</span><span class="sxs-lookup"><span data-stu-id="bc23d-209">Consider hello scenario when a two-node cluster is created and brought online:</span></span>

1. <span data-ttu-id="bc23d-210">Hola clúster estará en línea y, a continuación, NODE1 solicita una dirección IP asignada dinámicamente para el nombre de red del clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-210">hello cluster comes online, then NODE1 requests a dynamically assigned IP address for hello cluster network name.</span></span>
2. <span data-ttu-id="bc23d-211">Ninguna dirección IP que no sea la dirección IP de NODE1 viene dado por hello servicio DHCP, puesto que Hola servicio DHCP reconoce dicha solicitud Hola procede Nodo1 propio.</span><span class="sxs-lookup"><span data-stu-id="bc23d-211">No IP address other than NODE1’s own IP address is given by hello DHCP service, since hello DHCP service recognizes that hello request comes from NODE1 itself.</span></span>
3. <span data-ttu-id="bc23d-212">Windows detecta que se asigna una dirección duplicada tooNODE1 y toohello nombre de red del clúster de conmutación por error, y se produce un error en grupo de clúster predeterminado de hello toocome en línea.</span><span class="sxs-lookup"><span data-stu-id="bc23d-212">Windows detects that a duplicate address is assigned both tooNODE1 and toohello failover cluster network name, and hello default cluster group fails toocome online.</span></span>
4. <span data-ttu-id="bc23d-213">grupo de clústeres predeterminado Hola mueve tooNODE2, que trata la dirección IP de NODE1 como dirección IP del clúster hello y pone Hola grupo predeterminado del clúster en línea.</span><span class="sxs-lookup"><span data-stu-id="bc23d-213">hello default cluster group moves tooNODE2, which treats NODE1’s IP address as hello cluster IP address and brings hello default cluster group online.</span></span>
5. <span data-ttu-id="bc23d-214">Cuando NODE2 intenta tooestablish conectividad con NODE1, los paquetes dirigidos a NODE1 nunca abandonan NODE2 porque resuelve tooitself de dirección IP de NODE1.</span><span class="sxs-lookup"><span data-stu-id="bc23d-214">When NODE2 attempts tooestablish connectivity with NODE1, packets directed at NODE1 never leave NODE2 because it resolves NODE1’s IP address tooitself.</span></span> <span data-ttu-id="bc23d-215">Nodo2 no se puede establecer conectividad con NODE1, pierde el quórum y cierra el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-215">NODE2 cannot establish connectivity with NODE1, then loses quorum and shuts down hello cluster.</span></span>
6. <span data-ttu-id="bc23d-216">Hola mientras tanto, NODE1 puede enviar paquetes tooNODE2 pero NODE2 no puede responder.</span><span class="sxs-lookup"><span data-stu-id="bc23d-216">In hello meantime, NODE1 can send packets tooNODE2, but NODE2 cannot reply.</span></span> <span data-ttu-id="bc23d-217">Node1 pierde el quórum y cierra el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-217">NODE1 loses quorum and shuts down hello cluster.</span></span>

<span data-ttu-id="bc23d-218">Este escenario puede evitarse mediante la asignación de una dirección IP sin usar estática, como una dirección IP de vínculo local como 169.254.1.1, nombre de red del clúster de toohello en orden toobring Hola clúster nombre de red en línea.</span><span class="sxs-lookup"><span data-stu-id="bc23d-218">This scenario can be avoided by assigning an unused static IP address, such as a link-local IP address like 169.254.1.1, toohello cluster network name in order toobring hello cluster network name online.</span></span> <span data-ttu-id="bc23d-219">toosimplify este proceso, consulte [clúster de conmutación por error de configuración de Windows en Azure para grupos de disponibilidad](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span><span class="sxs-lookup"><span data-stu-id="bc23d-219">toosimplify this process, see [Configuring Windows failover cluster in Azure for availability groups](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span></span>

<span data-ttu-id="bc23d-220">Para más información, vea [Configuración de grupos de disponibilidad en Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-220">For more information, see [Configure availability groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span>

### <a name="availability-group-listener-support"></a><span data-ttu-id="bc23d-221">Compatibilidad del agente de escucha del grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="bc23d-221">Availability group listener support</span></span>
<span data-ttu-id="bc23d-222">Los agentes de escucha del grupo de disponibilidad son compatibles con máquinas virtuales de Azure que ejecutan Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 y Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="bc23d-222">Availability group listeners are supported on Azure VMs running Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, and Windows Server 2016.</span></span> <span data-ttu-id="bc23d-223">Esta compatibilidad se realiza mediante el uso de Hola de extremos con equilibrio de carga habilitado Hola máquinas virtuales de Azure que sean nodos de grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="bc23d-223">This support is made possible by hello use of load-balanced endpoints enabled on hello Azure VMs that are availability group nodes.</span></span> <span data-ttu-id="bc23d-224">Debe seguir los pasos de configuración especiales para toowork de agentes de escucha de Hola para ambas aplicaciones de cliente que se ejecutan en Azure, así como los que se ejecutan en local.</span><span class="sxs-lookup"><span data-stu-id="bc23d-224">You must follow special configuration steps for hello listeners toowork for both client applications that are running in Azure as well as those running on-premises.</span></span>

<span data-ttu-id="bc23d-225">Existen dos opciones principales para configurar el agente de escucha: externa (público) o interna.</span><span class="sxs-lookup"><span data-stu-id="bc23d-225">There are two main options for setting up your listener: external (public) or internal.</span></span> <span data-ttu-id="bc23d-226">Hola agente de escucha externo (público) se utiliza una conexión a internet el equilibrador de carga y está asociado con una IP Virtual pública (VIP) que sea accesible a través de Hola a internet.</span><span class="sxs-lookup"><span data-stu-id="bc23d-226">hello external (public) listener uses an internet facing load balancer and is associated with a public Virtual IP (VIP) that is accessible over hello internet.</span></span> <span data-ttu-id="bc23d-227">Un agente de escucha interno utiliza un equilibrador de carga interno y solo es compatible con clientes en Hola misma red Virtual.</span><span class="sxs-lookup"><span data-stu-id="bc23d-227">An internal listener uses an internal load balancer and only supports clients within hello same Virtual Network.</span></span> <span data-ttu-id="bc23d-228">Para cada tipo de equilibrador de carga, debe habilitar Direct Server Return.</span><span class="sxs-lookup"><span data-stu-id="bc23d-228">For either load balancer type, you must enable Direct Server Return.</span></span> 

<span data-ttu-id="bc23d-229">Si Hola grupo de disponibilidad abarca varias subredes de Azure (por ejemplo, una implementación que se cruza con regiones de Azure), debe incluir la cadena de conexión de cliente de Hola "**MultisubnetFailover = True**".</span><span class="sxs-lookup"><span data-stu-id="bc23d-229">If hello Availability Group spans multiple Azure subnets (such as a deployment that crosses Azure regions), hello client connection string must include "**MultisubnetFailover=True**".</span></span> <span data-ttu-id="bc23d-230">Esto da como resultado toohello réplicas de intentos de conexión paralela en subredes diferentes de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-230">This results in parallel connection attempts toohello replicas in hello different subnets.</span></span> <span data-ttu-id="bc23d-231">Para obtener instrucciones sobre cómo configurar un agente de escucha, consulte</span><span class="sxs-lookup"><span data-stu-id="bc23d-231">For instructions on setting up a listener, see</span></span>

* <span data-ttu-id="bc23d-232">[Configuración de un agente de escucha con ILB para grupos de disponibilidad en Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-232">[Configure an ILB listener for availability groups in Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span></span>
* <span data-ttu-id="bc23d-233">[Configuración de un agente de escucha externo para grupos de disponibilidad en Azure](../classic/ps-sql-ext-listener.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-233">[Configure an external listener for availability groups in Azure](../classic/ps-sql-ext-listener.md).</span></span>

<span data-ttu-id="bc23d-234">Pueden seguir conectándose tooeach réplica de disponibilidad por separado conectándose directamente toohello instancia del servicio.</span><span class="sxs-lookup"><span data-stu-id="bc23d-234">You can still connect tooeach availability replica separately by connecting directly toohello service instance.</span></span> <span data-ttu-id="bc23d-235">Además, puesto que los grupos de disponibilidad son compatibles con versiones anteriores con clientes de creación de reflejo de la base de datos, puede conectarse toohello réplicas de disponibilidad como asociados de creación de reflejo como Hola réplicas están configuradas de la base de datos similar de creación de reflejo toodatabase:</span><span class="sxs-lookup"><span data-stu-id="bc23d-235">Also, since availability groups are backward compatible with database mirroring clients, you can connect toohello availability replicas like database mirroring partners as long as hello replicas are configured similar toodatabase mirroring:</span></span>

* <span data-ttu-id="bc23d-236">Una réplica principal y una réplica secundaria</span><span class="sxs-lookup"><span data-stu-id="bc23d-236">One primary replica and one secondary replica</span></span>
* <span data-ttu-id="bc23d-237">Hello réplica secundaria está configurada como no legible (**secundaria legible** opción establecida demasiado**n**)</span><span class="sxs-lookup"><span data-stu-id="bc23d-237">hello secondary replica is configured as non-readable (**Readable Secondary** option set too**No**)</span></span>

<span data-ttu-id="bc23d-238">Es una cadena de conexión de cliente de ejemplo que corresponde la configuración de tipo de creación de reflejo de base de datos de toothis usa ADO.NET o SQL Server Native Client a continuación:</span><span class="sxs-lookup"><span data-stu-id="bc23d-238">An example client connection string that corresponds toothis database mirroring-like configuration using ADO.NET or SQL Server Native Client is below:</span></span>

    Data Source=ReplicaServer1;Failover Partner=ReplicaServer2;Initial Catalog=AvailabilityDatabase;

<span data-ttu-id="bc23d-239">Para obtener más información sobre la conectividad del cliente, consulte:</span><span class="sxs-lookup"><span data-stu-id="bc23d-239">For more information on client connectivity, see:</span></span>

* [<span data-ttu-id="bc23d-240">Usar palabras clave de cadena de conexión con SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="bc23d-240">Using Connection String Keywords with SQL Server Native Client</span></span>](https://msdn.microsoft.com/library/ms130822.aspx)
* [<span data-ttu-id="bc23d-241">Conectar clientes tooa sesión de creación de reflejo de base de datos (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bc23d-241">Connect Clients tooa Database Mirroring Session (SQL Server)</span></span>](https://technet.microsoft.com/library/ms175484.aspx)
* [<span data-ttu-id="bc23d-242">Conexión tooAvailability agente de escucha de grupo de TI híbrida</span><span class="sxs-lookup"><span data-stu-id="bc23d-242">Connecting tooAvailability Group Listener in Hybrid IT</span></span>](http://blogs.msdn.com/b/sqlalwayson/archive/2013/02/14/connecting-to-availability-group-listener-in-hybrid-it.aspx)
* [<span data-ttu-id="bc23d-243">Agentes de escucha del grupo de disponibilidad, conectividad de cliente y conmutación por error de una aplicación (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bc23d-243">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>](https://technet.microsoft.com/library/hh213417.aspx)
* [<span data-ttu-id="bc23d-244">Uso de cadenas de conexión de creación de reflejo de la base de datos con grupos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="bc23d-244">Using Database-Mirroring Connection Strings with Availability Groups</span></span>](https://technet.microsoft.com/library/hh213417.aspx)

### <a name="network-latency-in-hybrid-it"></a><span data-ttu-id="bc23d-245">Latencia de red en TI híbrida</span><span class="sxs-lookup"><span data-stu-id="bc23d-245">Network latency in hybrid IT</span></span>
<span data-ttu-id="bc23d-246">Debe implementar la solución HADR con la suposición de Hola que puede haber períodos de tiempo con alta latencia de red entre la red local y Azure.</span><span class="sxs-lookup"><span data-stu-id="bc23d-246">You should deploy your HADR solution with hello assumption that there may be periods of time with high network latency between your on-premises network and Azure.</span></span> <span data-ttu-id="bc23d-247">Al implementar réplicas tooAzure, debe utilizar la confirmación asincrónica en lugar de confirmación sincrónica para el modo de sincronización de Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-247">When deploying replicas tooAzure, you should use asynchronous commit instead of synchronous commit for hello synchronization mode.</span></span> <span data-ttu-id="bc23d-248">Al implementar servidores de creación de reflejo de la base de datos tanto local como en Azure, use el modo de alto rendimiento de hello en lugar de modo de alta seguridad Hola.</span><span class="sxs-lookup"><span data-stu-id="bc23d-248">When deploying database mirroring servers both on-premises and in Azure, use hello high-performance mode instead of hello high-safety mode.</span></span>

### <a name="geo-replication-support"></a><span data-ttu-id="bc23d-249">Compatibilidad de la replicación geográfica</span><span class="sxs-lookup"><span data-stu-id="bc23d-249">Geo-replication support</span></span>
<span data-ttu-id="bc23d-250">Replicación geográfica en discos de Azure no admite archivos de datos de Hola y archivo de registro de hello mismo toobe de base de datos almacenado en discos independientes.</span><span class="sxs-lookup"><span data-stu-id="bc23d-250">Geo-replication in Azure disks does not support hello data file and log file of hello same database toobe stored on separate disks.</span></span> <span data-ttu-id="bc23d-251">La GRS replica los cambios en cada disco independiente y asincrónicamente.</span><span class="sxs-lookup"><span data-stu-id="bc23d-251">GRS replicates changes on each disk independently and asynchronously.</span></span> <span data-ttu-id="bc23d-252">Este mecanismo garantiza el orden de escritura de hello en un único disco en la copia de replicación geográfica de hello, pero no a través de las copias replicadas geográficamente de varios discos.</span><span class="sxs-lookup"><span data-stu-id="bc23d-252">This mechanism guarantees hello write order within a single disk on hello geo-replicated copy, but not across geo-replicated copies of multiple disks.</span></span> <span data-ttu-id="bc23d-253">Si configura una base de datos toostore su archivo de datos y su archivo de registro en discos independientes, Hola recupera discos después de un desastre pueden contener una copia más actualizada del archivo de datos de Hola que archivo de registro de hello, que se introduce Hola registro de escritura anticipada en SQL Server y Hola ACID propiedades de las transacciones.</span><span class="sxs-lookup"><span data-stu-id="bc23d-253">If you configure a database toostore its data file and its log file on separate disks, hello recovered disks after a disaster may contain a more up-to-date copy of hello data file than hello log file, which breaks hello write-ahead log in SQL Server and hello ACID properties of transactions.</span></span> <span data-ttu-id="bc23d-254">Si no tiene Hola opción toodisable de replicación geográfica en la cuenta de almacenamiento de hello, debe mantener todos los datos y archivos de registro para una base de datos en hello mismo disco.</span><span class="sxs-lookup"><span data-stu-id="bc23d-254">If you do not have hello option toodisable geo-replication on hello storage account, you should keep all data and log files for a given database on hello same disk.</span></span> <span data-ttu-id="bc23d-255">Si tiene que utilizar más de un disco debido toohello tamaño de base de datos de hello, deberá toodeploy una de las soluciones de recuperación ante desastres de hello mencionada anteriormente tooensure redundancia de datos.</span><span class="sxs-lookup"><span data-stu-id="bc23d-255">If you must use more than one disk due toohello size of hello database, you need toodeploy one of hello disaster recovery solutions listed above tooensure data redundancy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bc23d-256">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="bc23d-256">Next steps</span></span>
<span data-ttu-id="bc23d-257">Si necesita toocreate una máquina virtual de Azure con SQL Server, vea [aprovisionamiento de una máquina Virtual de SQL Server en Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-257">If you need toocreate an Azure virtual machine with SQL Server, see [Provisioning a SQL Server Virtual Machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="bc23d-258">tooget Hola un rendimiento óptimo de SQL Server que se ejecuta en una máquina virtual de Azure, consulte las instrucciones de hello en [prácticas recomendadas de rendimiento para SQL Server en máquinas virtuales Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-258">tooget hello best performance from SQL Server running on an Azure VM, see hello guidance in [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="bc23d-259">Para ver otros temas relacionados con toorunning SQL Server en máquinas virtuales de Azure, consulte [SQL Server en máquinas virtuales Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bc23d-259">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

### <a name="other-resources"></a><span data-ttu-id="bc23d-260">Otros recursos:</span><span class="sxs-lookup"><span data-stu-id="bc23d-260">Other resources</span></span>
* [<span data-ttu-id="bc23d-261">Instalación de un nuevo bosque de Active Directory en Azure</span><span class="sxs-lookup"><span data-stu-id="bc23d-261">Install a new Active Directory forest in Azure</span></span>](../../../active-directory/active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="bc23d-262">Creación del clúster de conmutación por error para grupos de disponibilidad en la VM de Azure</span><span class="sxs-lookup"><span data-stu-id="bc23d-262">Create Failover Cluster for availability groups in Azure VM</span></span>](http://gallery.technet.microsoft.com/scriptcenter/Create-WSFC-Cluster-for-7c207d3a)


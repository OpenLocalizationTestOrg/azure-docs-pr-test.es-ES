---
title: Consideraciones para SQL Server en Azure aaaSecurity | Documentos de Microsoft
description: "En este tema se proporcionan instrucciones generales para proteger SQL Server en ejecución en una máquina virtual de Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 14c3d828fa87446da67beea6d28886de254afe15
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="9a639-103">Consideraciones de seguridad para SQL Server en Máquinas virtuales de Azure</span><span class="sxs-lookup"><span data-stu-id="9a639-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="9a639-104">Este tema incluye instrucciones completas de seguridad que ayudan a establecer instancias del servidor de acceso seguro tooSQL en una máquina virtual (VM) de Azure.</span><span class="sxs-lookup"><span data-stu-id="9a639-104">This topic includes overall security guidelines that help establish secure access tooSQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="9a639-105">Azure es compatible con varias de las normativas del sector y estándares que le permiten toobuild una solución compatible con SQL Server en una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9a639-105">Azure complies with several industry regulations and standards that can enable you toobuild a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="9a639-106">Para obtener información acerca del cumplimiento normativo de Azure, consulte [Centro de confianza de Azure](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="9a639-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-toohello-sql-vm"></a><span data-ttu-id="9a639-107">Controlar el acceso toohello VM de SQL</span><span class="sxs-lookup"><span data-stu-id="9a639-107">Control access toohello SQL VM</span></span>

<span data-ttu-id="9a639-108">Al crear la máquina virtual de SQL Server, tenga en cuenta cómo toocarefully controlar quién tiene máquina toohello de acceso y tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="9a639-108">When you create your SQL Server virtual machine, consider how toocarefully control who has access toohello machine and tooSQL Server.</span></span> <span data-ttu-id="9a639-109">En general, debe realizar los siguientes hello:</span><span class="sxs-lookup"><span data-stu-id="9a639-109">In general, you should do hello following:</span></span>

- <span data-ttu-id="9a639-110">Restringir acceso tooSQL Server tooonly Hola aplicaciones y los clientes que lo necesiten.</span><span class="sxs-lookup"><span data-stu-id="9a639-110">Restrict access tooSQL Server tooonly hello applications and clients that need it.</span></span>
- <span data-ttu-id="9a639-111">Seguir las prácticas recomendadas para administrar las contraseñas y cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="9a639-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="9a639-112">Hello las secciones siguientes proporciona sugerencias sobre pensar a través de estos puntos.</span><span class="sxs-lookup"><span data-stu-id="9a639-112">hello following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="9a639-113">Conexiones seguras</span><span class="sxs-lookup"><span data-stu-id="9a639-113">Secure connections</span></span>

<span data-ttu-id="9a639-114">Cuando se crea una máquina virtual de SQL Server con una imagen de la galería, Hola **conectividad de SQL Server** opción proporciona Hola elección de **locales (dentro de la máquina virtual)**, **privada (dentro de la red Virtual)** , o **público (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="9a639-114">When you create a SQL Server virtual machine with a gallery image, hello **SQL Server Connectivity** option gives you hello choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![Conectividad de SQL Server](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="9a639-116">Para obtener una mayor seguridad hello, elija la opción de más restrictivo de Hola para su escenario.</span><span class="sxs-lookup"><span data-stu-id="9a639-116">For hello best security, choose hello most restrictive option for your scenario.</span></span> <span data-ttu-id="9a639-117">Por ejemplo, si está ejecutando una aplicación que tiene acceso a SQL Server en Hola misma máquina virtual, a continuación, **Local** es la elección más segura de Hola.</span><span class="sxs-lookup"><span data-stu-id="9a639-117">For example, if you are running an application that accesses SQL Server on hello same VM, then **Local** is hello most secure choice.</span></span> <span data-ttu-id="9a639-118">Si está ejecutando una aplicación de Azure que requiere acceso toohello SQL Server, a continuación, **privada** protege la comunicación tooSQL servidor solo dentro de hello especificado [red Virtual de Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9a639-118">If you are running an Azure application that requires access toohello SQL Server, then **Private** secures communication tooSQL Server only within hello specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="9a639-119">Si necesita **público** (internest) acceso toohello VM de SQL Server, a continuación, asegúrese de que toofollow otros procedimientos recomendados en este tema tooreduce el área expuesta a ataques.</span><span class="sxs-lookup"><span data-stu-id="9a639-119">If you require **Public** (internest) access toohello SQL Server VM, then make sure toofollow other best practices in this topic tooreduce your attack surface area.</span></span>

<span data-ttu-id="9a639-120">Hello opciones seleccionadas en el portal de hello usan reglas de seguridad de entrada en las máquinas virtuales de hello [grupo de seguridad de red](../../../virtual-network/virtual-networks-nsg.md) tooallow (NSG) o denegar la máquina de tooyour de tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="9a639-120">hello selected options in hello portal use inbound security rules on hello VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow or deny network traffic tooyour virtual machine.</span></span> <span data-ttu-id="9a639-121">Puede modificar o crear nuevas reglas NSG entradas puerto de SQL Server tooallow tráfico toohello (predeterminado: 1433).</span><span class="sxs-lookup"><span data-stu-id="9a639-121">You can modify or create new inbound NSG rules tooallow traffic toohello SQL Server port (default 1433).</span></span> <span data-ttu-id="9a639-122">También puede especificar direcciones IP específicas que se permiten toocommunicate a través de este puerto.</span><span class="sxs-lookup"><span data-stu-id="9a639-122">You can also specify specific IP addresses that are allowed toocommunicate over this port.</span></span>

![Reglas del grupo de seguridad de red](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="9a639-124">Además de tooNSG reglas toorestrict el tráfico de red, también puede utilizar Hola Firewall de Windows en la máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="9a639-124">In addition tooNSG rules toorestrict network traffic, you can also use hello Windows Firewall on hello virtual machine.</span></span>

<span data-ttu-id="9a639-125">Si usas los puntos de conexión con el modelo de implementación clásica de hello, quite cualquier extremo de máquina virtual de hello si no las use.</span><span class="sxs-lookup"><span data-stu-id="9a639-125">If you are using endpoints with hello classic deployment model, remove any endpoints on hello virtual machine if you do not use them.</span></span> <span data-ttu-id="9a639-126">Para obtener instrucciones sobre el uso de ACL con puntos de conexión, consulte [administrar Hola ACL en un punto de conexión](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="9a639-126">For instructions on using ACLs with endpoints, see [Manage hello ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="9a639-127">Esto no es necesario para las máquinas virtuales que usan Hola, Administrador de recursos.</span><span class="sxs-lookup"><span data-stu-id="9a639-127">This is not necessary for VMs that use hello Resource Manager.</span></span>

<span data-ttu-id="9a639-128">Por último, considere la posibilidad de habilitar conexiones cifradas para instancia Hola de hello motor de base de datos de SQL Server en la máquina virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="9a639-128">Finally, consider enabling encrypted connections for hello instance of hello SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="9a639-129">Configure la instancia de SQL Server con un certificado firmado.</span><span class="sxs-lookup"><span data-stu-id="9a639-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="9a639-130">Para obtener más información, consulte [toohello habilitar conexiones cifradas motor de base de datos](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) y [sintaxis de la cadena de conexión](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a639-130">For more information, see [Enable Encrypted Connections toohello Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="9a639-131">Usar un puerto no predeterminado</span><span class="sxs-lookup"><span data-stu-id="9a639-131">Use a non-default port</span></span>

<span data-ttu-id="9a639-132">De forma predeterminada, SQL Server escucha en un puerto conocido, 1433.</span><span class="sxs-lookup"><span data-stu-id="9a639-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="9a639-133">Para aumentar la seguridad, configure toolisten de SQL Server en un puerto no predeterminado, como 1401.</span><span class="sxs-lookup"><span data-stu-id="9a639-133">For increased security, configure SQL Server toolisten on a non-default port, such as 1401.</span></span> <span data-ttu-id="9a639-134">Si se aprovisiona una imagen de la Galería de SQL Server en hello portal de Azure, puede especificar este puerto en hello **configuración de SQL Server** hoja.</span><span class="sxs-lookup"><span data-stu-id="9a639-134">If you provision a SQL Server gallery image in hello Azure portal, you can specify this port in hello **SQL Server settings** blade.</span></span>

<span data-ttu-id="9a639-135">tooconfigure este después de aprovisionar, tienes dos opciones:</span><span class="sxs-lookup"><span data-stu-id="9a639-135">tooconfigure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="9a639-136">Para máquinas virtuales del Administrador de recursos, puede seleccionar **configuración de SQL Server** de hoja de información general VM de Hola.</span><span class="sxs-lookup"><span data-stu-id="9a639-136">For Resource Manager VMs, you can select **SQL Server configuration** from hello VM overview blade.</span></span> <span data-ttu-id="9a639-137">Esto proporciona una opción de puerto de hello toochange.</span><span class="sxs-lookup"><span data-stu-id="9a639-137">This provides an option toochange hello port.</span></span>

  ![Cambiar el puerto TCP en el portal](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="9a639-139">Para máquinas virtuales clásico o para las máquinas virtuales de SQL Server que no se ha aprovisionado con el portal de Hola, puede configurar manualmente el puerto hello mediante la conexión de forma remota toohello máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9a639-139">For Classic VMs or for SQL Server VMs that were not provisioned with hello portal, you can manually configure hello port by connecting remotely toohello VM.</span></span> <span data-ttu-id="9a639-140">Para pasos de configuración de hello, consulte [configurar una tooListen de servidor en un puerto TCP específico](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="9a639-140">For hello configuration steps, see [Configure a Server tooListen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="9a639-141">Si utiliza esta técnica manual, deberá tooadd un Firewall de Windows regla tooallow el tráfico entrante en ese puerto TCP.</span><span class="sxs-lookup"><span data-stu-id="9a639-141">If you use this manual technique, you also need tooadd a Windows Firewall rule tooallow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9a639-142">Especificación de un puerto no predeterminado es una buena idea si el puerto de SQL Server es toopublic abrir las conexiones a internet.</span><span class="sxs-lookup"><span data-stu-id="9a639-142">Specifying a non-default port is a good idea if your SQL Server port is open toopublic internet connections.</span></span>

<span data-ttu-id="9a639-143">Cuando SQL Server está escuchando en un puerto no predeterminado, debe especificar el puerto de hello cuando se conecta.</span><span class="sxs-lookup"><span data-stu-id="9a639-143">When SQL Server is listening on a non-default port, you must specify hello port when you connect.</span></span> <span data-ttu-id="9a639-144">Por ejemplo, considere un escenario donde la dirección IP del servidor hello es 13.55.255.255 y SQL Server está escuchando en el puerto 1401.</span><span class="sxs-lookup"><span data-stu-id="9a639-144">For example, consider a scenario where hello server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="9a639-145">tooconnect tooSQL Server, especificaría `13.55.255.255,1401` en la cadena de conexión de Hola.</span><span class="sxs-lookup"><span data-stu-id="9a639-145">tooconnect tooSQL Server, you would specify `13.55.255.255,1401` in hello connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="9a639-146">Administrar cuentas</span><span class="sxs-lookup"><span data-stu-id="9a639-146">Manage accounts</span></span>

<span data-ttu-id="9a639-147">No desea nombres de cuenta de estimación de los atacantes tooeasily o contraseñas.</span><span class="sxs-lookup"><span data-stu-id="9a639-147">You don't want attackers tooeasily guess account names or passwords.</span></span> <span data-ttu-id="9a639-148">Usar hello después toohelp sugerencias:</span><span class="sxs-lookup"><span data-stu-id="9a639-148">Use hello following tips toohelp:</span></span>

- <span data-ttu-id="9a639-149">Cree una cuenta de administrador local única que no se llame **Administrador**.</span><span class="sxs-lookup"><span data-stu-id="9a639-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="9a639-150">Use contraseñas seguras complejas para todas sus cuentas.</span><span class="sxs-lookup"><span data-stu-id="9a639-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="9a639-151">Para obtener más información acerca de cómo toocreate una contraseña segura, consulte [crear una contraseña segura](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) artículo.</span><span class="sxs-lookup"><span data-stu-id="9a639-151">For more information about how toocreate a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="9a639-152">De forma predeterminada, Azure selecciona la autenticación de Windows durante la instalación de la máquina virtual de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9a639-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="9a639-153">Por lo tanto, Hola **SA** inicio de sesión está deshabilitado y se asigna una contraseña mediante el programa de instalación.</span><span class="sxs-lookup"><span data-stu-id="9a639-153">Therefore, hello **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="9a639-154">Se recomienda que hello **SA** inicio de sesión no se use ni habilitado.</span><span class="sxs-lookup"><span data-stu-id="9a639-154">We recommend that hello **SA** login should not be used or enabled.</span></span> <span data-ttu-id="9a639-155">Si debe tener un inicio de sesión SQL, utilice uno de hello siguientes estrategias:</span><span class="sxs-lookup"><span data-stu-id="9a639-155">If you must have a SQL login, use one of hello following strategies:</span></span>

  - <span data-ttu-id="9a639-156">Cree una cuenta de SQL con un nombre único que sea miembro de **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="9a639-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="9a639-157">Puede hacerlo desde el portal de hello habilitando **autenticación de SQL** durante el aprovisionamiento.</span><span class="sxs-lookup"><span data-stu-id="9a639-157">You can do this from hello portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="9a639-158">Si no habilita la autenticación de SQL durante el aprovisionamiento, debe cambiar manualmente el modo de autenticación de hello demasiado**modo de autenticación de Windows y SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="9a639-158">If you do not enable SQL Authentication during provisioning, you must manually change hello authentication mode too**SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="9a639-159">Para obtener más información, consulte [Cambiar el modo de autenticación del servidor](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="9a639-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="9a639-160">Si tiene que utilizar hello **SA** inicio de sesión, inicio de sesión de Hola a habilitar después de aprovisionamiento y asignar una nueva contraseña.</span><span class="sxs-lookup"><span data-stu-id="9a639-160">If you must use hello **SA** login, enable hello login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="9a639-161">Seguir las prácticas recomendadas locales</span><span class="sxs-lookup"><span data-stu-id="9a639-161">Follow on-premises best practices</span></span>

<span data-ttu-id="9a639-162">Además toohello procedimientos describen en este tema, se recomienda que revise e implementar prácticas de seguridad locales tradicionales de hello cuando corresponda.</span><span class="sxs-lookup"><span data-stu-id="9a639-162">In addition toohello practices described in this topic, we recommend that you review and implement hello traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="9a639-163">Para más información, vea [Consideraciones de seguridad para una instalación de SQL Server](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation).</span><span class="sxs-lookup"><span data-stu-id="9a639-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="9a639-164">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="9a639-164">Next Steps</span></span>

<span data-ttu-id="9a639-165">Si también está interesado en los procedimientos recomendados de rendimiento, consulte [Procedimientos recomendados para SQL Server en máquinas virtuales de Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="9a639-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="9a639-166">Para ver otros temas relacionados con toorunning SQL Server en máquinas virtuales de Azure, consulte [SQL Server en máquinas virtuales de Azure información general sobre](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9a639-166">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>


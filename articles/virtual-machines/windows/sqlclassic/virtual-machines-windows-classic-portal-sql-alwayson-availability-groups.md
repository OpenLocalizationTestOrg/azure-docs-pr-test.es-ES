---
title: "aaaConfigure siempre en el grupo de disponibilidad en máquinas virtuales de Azure (clásica) | Documentos de Microsoft"
description: Cree un grupo de disponibilidad AlwaysOn con Azure Virtual Machines. Este tutorial usa principalmente la interfaz de usuario de Hola y herramientas en lugar de secuencias de comandos.
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 8d48a3d2-79f8-4ab0-9327-2f30ee0b2ff1
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 03/17/2017
ms.author: mikeray
ms.openlocfilehash: f428ad994a55378c281c959f4696fdcaf50632b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="configure-always-on-availability-group-in-azure-virtual-machines-classic"></a><span data-ttu-id="e3dbc-104">Configuración de grupos de disponibilidad Always On en Azure Virtual Machines (implementación clásica)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-104">Configure Always On availability group in Azure Virtual Machines (classic)</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="e3dbc-105">Portal de Azure clásico: interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="e3dbc-105">Classic: UI</span></span>](../classic/portal-sql-alwayson-availability-groups.md)
> * <span data-ttu-id="e3dbc-106">[Clásico: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span><span class="sxs-lookup"><span data-stu-id="e3dbc-106">[Classic: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span></span><br/>

<span data-ttu-id="e3dbc-107">Antes de comenzar, considere que ahora puede completar esta tarea en un modelo de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-107">Before you begin, consider that you can now complete this task in Azure Resource Manager model.</span></span> <span data-ttu-id="e3dbc-108">Se recomienda el modelo de Azure Resource Manager para las implementaciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-108">We recommend Azure Resource Manager model for new deployments.</span></span> <span data-ttu-id="e3dbc-109">Consulte [Grupos de disponibilidad de SQL Server AlwaysOn en máquinas virtuales de Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-109">See [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="e3dbc-110">Microsoft recomienda que más nuevas implementaciones de usar el modelo del Administrador de recursos de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-110">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="e3dbc-111">Azure tiene dos toocreate de modelos de implementación diferentes y trabajar con recursos: [Administrador de recursos y clásico](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-111">Azure has two different deployment models toocreate and work with resources: [Resource Manager and classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="e3dbc-112">Este artículo explica cómo toouse Hola modelo de implementación clásica.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-112">This article explains how toouse hello classic deployment model.</span></span> 

<span data-ttu-id="e3dbc-113">Esta tarea con el modelo de hello Azure Resource Manager, consulte el toocomplete [grupos de disponibilidad de AlwaysOn de SQL Server en máquinas virtuales de Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-113">toocomplete this task with hello Azure Resource Manager model, see [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

<span data-ttu-id="e3dbc-114">Este tutorial to-end muestra cómo los grupos de disponibilidad tooimplement mediante el uso de SQL Server Always On ejecutar máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-114">This end-to-end tutorial shows you how tooimplement availability groups by using SQL Server Always On running on Azure Virtual Machines.</span></span>

<span data-ttu-id="e3dbc-115">Al final de Hola de tutorial de hello, la solución SQL Server Always On en Azure constará de hello siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-115">At hello end of hello tutorial, your SQL Server Always On solution in Azure will consist of hello following elements:</span></span>

* <span data-ttu-id="e3dbc-116">Una red virtual que contiene varias subredes, incluida una subred front-end y back-end</span><span class="sxs-lookup"><span data-stu-id="e3dbc-116">A virtual network that contains multiple subnets and includes a frontend and a backend subnet</span></span>
* <span data-ttu-id="e3dbc-117">Un controlador de dominio con un dominio de Active Directory (Azure AD)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-117">A domain controller with an Active Directory (Azure AD) domain</span></span>
* <span data-ttu-id="e3dbc-118">Dos máquinas virtuales que ejecutan SQL Server y subred de back-end de implementada toohello y dominio toohello unido a Azure AD</span><span class="sxs-lookup"><span data-stu-id="e3dbc-118">Two virtual machines that run SQL Server and are deployed toohello backend subnet and joined toohello Azure AD domain</span></span>
* <span data-ttu-id="e3dbc-119">Un clúster de conmutación por error de tres nodos con el modelo de quórum de mayoría de nodo de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-119">A three-node failover cluster with hello Node Majority quorum model</span></span>
* <span data-ttu-id="e3dbc-120">Un grupo de disponibilidad que tiene dos réplicas de confirmación sincrónica de una base de datos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="e3dbc-120">An availability group that has two synchronous-commit replicas of an availability database</span></span>

<span data-ttu-id="e3dbc-121">Hola siguiente ilustración es una representación gráfica de la solución de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-121">hello following illustration is a graphical representation of hello solution.</span></span>

![Arquitectura de pruebas para grupos de disponibilidad en Azure](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC791912.png)

<span data-ttu-id="e3dbc-123">Tenga en cuenta que se trata de una de las posibles configuraciones.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-123">Note that this is one possible configuration.</span></span> <span data-ttu-id="e3dbc-124">Por ejemplo, puede minimizar el número de Hola de máquinas virtuales para un grupo de disponibilidad de dos réplicas.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-124">For example, you can minimize hello number of virtual machines for a two-replica availability group.</span></span> <span data-ttu-id="e3dbc-125">Esta configuración se guarda en horas de proceso de Azure mediante el controlador de dominio de hello como testigo de recurso compartido de archivos de hello quórum en un clúster de dos nodos.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-125">This configuration saves on compute hours in Azure by using hello domain controller as hello quorum file share witness in a two-node cluster.</span></span> <span data-ttu-id="e3dbc-126">Este método reduce Hola recuento de máquinas virtuales en uno de configuración se muestra de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-126">This method reduces hello virtual machine count by one from hello illustrated configuration.</span></span>

<span data-ttu-id="e3dbc-127">Este tutorial se da por supuesto siguiente hello:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-127">This tutorial assumes hello following:</span></span>

* <span data-ttu-id="e3dbc-128">Ya tiene una cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-128">You already have an Azure account.</span></span>
* <span data-ttu-id="e3dbc-129">Ya sabe cómo toouse Hola GUI en tooprovision de galería de máquina virtual de hello una máquina virtual clásica que ejecuta SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-129">You already know how toouse hello GUI in hello virtual machine gallery tooprovision a classic virtual machine that runs SQL Server.</span></span>
* <span data-ttu-id="e3dbc-130">Ya tiene un conocimiento sólido de los grupos de disponibilidad AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-130">You already have a solid understanding of Always On availability groups.</span></span> <span data-ttu-id="e3dbc-131">Para obtener más información, consulte [Grupos de disponibilidad AlwaysOn (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-131">For more information, see [Always On Availability Groups (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e3dbc-132">Si le interesa utilizar los grupos de disponibilidad Always On con SharePoint, consulte también [Configuración de grupos de disponibilidad AlwaysOn de SQL Server 2012 para SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-132">If you are interested in using Always On availability groups with SharePoint, also see [Configure SQL Server 2012 Always On Availability Groups for SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span></span>
> 
> 

## <a name="create-hello-virtual-network-and-domain-controller-server"></a><span data-ttu-id="e3dbc-133">Crear red virtual de Hola y servidor de controlador de dominio</span><span class="sxs-lookup"><span data-stu-id="e3dbc-133">Create hello virtual network and domain controller server</span></span>
<span data-ttu-id="e3dbc-134">Comience con una nueva cuenta de prueba de Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-134">You begin with a new Azure trial account.</span></span> <span data-ttu-id="e3dbc-135">Después de configurar la cuenta, debe tener en pantalla de inicio de Hola de hello portal de Azure clásico.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-135">After you set up your account, you should be on hello home screen of hello Azure classic portal.</span></span>

1. <span data-ttu-id="e3dbc-136">Haga clic en hello **New** situado en la esquina izquierda de saludo de la parte inferior de Hola de página de hello, como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-136">Click hello **New** button at hello left corner of hello bottom of hello page, as shown in hello following screenshot.</span></span>
   
    ![Haga clic en nuevo en el portal de Hola](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665511.gif)
2. <span data-ttu-id="e3dbc-138">Haga clic en **servicios de red** > **red Virtual** > **creación personalizada**, tal y como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-138">Click **Network Services** > **Virtual Network** > **Custom Create**, as shown in hello following screenshot.</span></span>
   
    ![Crear red virtual](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665512.gif)
3. <span data-ttu-id="e3dbc-140">Hola **crear una red VIRTUAL** diálogo cuadro, cree una nueva red virtual recorriendo las páginas de Hola y con la configuración de hello en hello en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-140">In hello **CREATE A VIRTUAL NETWORK** dialog box, create a new virtual network by stepping through hello pages and using hello settings in hello following table.</span></span> 
   
   | <span data-ttu-id="e3dbc-141">Page</span><span class="sxs-lookup"><span data-stu-id="e3dbc-141">Page</span></span> | <span data-ttu-id="e3dbc-142">Settings</span><span class="sxs-lookup"><span data-stu-id="e3dbc-142">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e3dbc-143">Detalles de red virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-143">Virtual Network Details</span></span> |<span data-ttu-id="e3dbc-144">**NOMBRE = ContosoNET**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-144">**NAME = ContosoNET**</span></span><br/><span data-ttu-id="e3dbc-145">**REGIÓN = Oeste de EE. UU.**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-145">**REGION = West US**</span></span> |
   | <span data-ttu-id="e3dbc-146">Servidores DNS y conectividad VPN</span><span class="sxs-lookup"><span data-stu-id="e3dbc-146">DNS Servers and VPN Connectivity</span></span> |<span data-ttu-id="e3dbc-147">None</span><span class="sxs-lookup"><span data-stu-id="e3dbc-147">None</span></span> |
   | <span data-ttu-id="e3dbc-148">Espacios de direcciones de la red virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-148">Virtual Network Address Spaces</span></span> |<span data-ttu-id="e3dbc-149">Configuración se muestra en la siguiente captura de pantalla de hello:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-149">Settings are shown in hello following screenshot:</span></span> ![Crear red virtual](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784620.png) |
4. <span data-ttu-id="e3dbc-151">Crear máquina virtual de Hola que va a utilizar como controlador de dominio (DC) de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-151">Create hello virtual machine that you will use as hello domain controller (DC).</span></span> <span data-ttu-id="e3dbc-152">Haga clic en **New** > **proceso** > **Máquina Virtual** > **de la galería**, tal y como se muestra en Hola siguiente captura de pantalla.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-152">Click **New** > **Compute** > **Virtual Machine** > **From Gallery**, as shown in hello following screenshot.</span></span>
   
    ![de una máquina virtual](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784621.png)
5. <span data-ttu-id="e3dbc-154">Hola **crear una máquina VIRTUAL** diálogo cuadro, configure una nueva máquina virtual recorriendo las páginas de Hola y con la configuración de hello en hello en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-154">In hello **CREATE A VIRTUAL MACHINE** dialog box, configure a new virtual machine by stepping through hello pages and using hello settings in hello following table.</span></span> 
   
   | <span data-ttu-id="e3dbc-155">Page</span><span class="sxs-lookup"><span data-stu-id="e3dbc-155">Page</span></span> | <span data-ttu-id="e3dbc-156">Settings</span><span class="sxs-lookup"><span data-stu-id="e3dbc-156">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e3dbc-157">Seleccione el sistema operativo de máquina virtual de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-157">Select hello virtual machine operating system</span></span> |<span data-ttu-id="e3dbc-158">Windows Server 2012 R2 Datacenter</span><span class="sxs-lookup"><span data-stu-id="e3dbc-158">Windows Server 2012 R2 Datacenter</span></span> |
   | <span data-ttu-id="e3dbc-159">Configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-159">Virtual machine configuration</span></span> |<span data-ttu-id="e3dbc-160">**FECHA DE LANZAMIENTO DE LA VERSIÓN** = (última)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-160">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e3dbc-161">**NOMBRE DE MÁQUINA VIRTUAL** = ContosoDC</span><span class="sxs-lookup"><span data-stu-id="e3dbc-161">**VIRTUAL MACHINE NAME** = ContosoDC</span></span><br/><span data-ttu-id="e3dbc-162">**NIVEL**: ESTÁNDAR</span><span class="sxs-lookup"><span data-stu-id="e3dbc-162">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e3dbc-163">**TAMAÑO** = A2 (2 núcleos)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-163">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="e3dbc-164">**NUEVO NOMBRE de USUARIO** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e3dbc-164">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e3dbc-165">**NUEVA CONTRASEÑA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-165">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e3dbc-166">**CONFIRMAR** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-166">**CONFIRM** = Contoso!000</span></span> |
   | <span data-ttu-id="e3dbc-167">Configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-167">Virtual machine configuration</span></span> |<span data-ttu-id="e3dbc-168">**SERVICIO EN LA NUBE**: Crear un nuevo servicio en la nube</span><span class="sxs-lookup"><span data-stu-id="e3dbc-168">**CLOUD SERVICE** = Create a new cloud service</span></span><br/><span data-ttu-id="e3dbc-169">**NOMBRE DE DNS DEL SERVICIO EN LA NUBE** = un nombre de servicio en la nube único</span><span class="sxs-lookup"><span data-stu-id="e3dbc-169">**CLOUD SERVICE DNS NAME** = A unique cloud service name</span></span><br/><span data-ttu-id="e3dbc-170">**NOMBRE DNS** = un nombre único (por ejemplo, ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-170">**DNS NAME** = A unique name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e3dbc-171">**REGION/GRUPO DE AFINIDAD/RED VIRTUAL** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e3dbc-171">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e3dbc-172">**SUBREDES DE LA RED VIRTUAL** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-172">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e3dbc-173">**CUENTA DE ALMACENAMIENTO** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="e3dbc-173">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e3dbc-174">**CONJUNTO DE DISPONIBILIDAD**: (Ninguno)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-174">**AVAILABILITY SET** = (None)</span></span> |
   | <span data-ttu-id="e3dbc-175">Opciones de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-175">Virtual machine options</span></span> |<span data-ttu-id="e3dbc-176">Usar predeterminados</span><span class="sxs-lookup"><span data-stu-id="e3dbc-176">Use defaults</span></span> |

<span data-ttu-id="e3dbc-177">Después de configurar la nueva máquina virtual de hello, espere Hola máquina virtual toobe aprovisione.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-177">After you configure hello new virtual machine, wait for hello virtual machine toobe provsioned.</span></span> <span data-ttu-id="e3dbc-178">Este proceso tarda algún tiempo toofinish.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-178">This process takes some time toofinish.</span></span> <span data-ttu-id="e3dbc-179">Si hace clic en hello **Máquina Virtual** ficha hello Azure clásico portal, puede ver los Estados de ciclismo ContosoDC desde **iniciando (aprovisionamiento)** demasiado**detenido**, **a partir de**, **ejecución (aprovisionamiento)**y, finalmente, **ejecutando**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-179">If you click hello **Virtual Machine** tab in hello Azure classic portal, you can see ContosoDC cycling states from **Starting (Provisioning)** too**Stopped**, **Starting**, **Running (Provisioning)**, and finally **Running**.</span></span>

<span data-ttu-id="e3dbc-180">servidor de DC de Hello ahora se aprovisionó correctamente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-180">hello DC server is now successfully provisioned.</span></span> <span data-ttu-id="e3dbc-181">A continuación, configurará el dominio de Active Directory de hello en este servidor de controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-181">Next, you will configure hello Active Directory domain on this DC server.</span></span>

## <a name="configure-hello-domain-controller"></a><span data-ttu-id="e3dbc-182">Configurar el controlador de dominio de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-182">Configure hello domain controller</span></span>
<span data-ttu-id="e3dbc-183">Hola pasos, configura hello ContosoDC máquina como un controlador de dominio para corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-183">In hello following steps, you configure hello ContosoDC machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="e3dbc-184">En el portal de hello, seleccione hello **ContosoDC** máquina.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-184">In hello portal, select hello **ContosoDC** machine.</span></span> <span data-ttu-id="e3dbc-185">En hello **panel** , haga clic en **conectar** tooopen un escritorio remoto (RDP) de archivos para el acceso de escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-185">On hello **Dashboard** tab, click **Connect** tooopen a remote desktop (RDP) file for remote desktop access.</span></span>
   
    ![Conectar tooVritual máquina](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784622.png)
2. <span data-ttu-id="e3dbc-187">Inicie sesión con su cuenta de administrador configurada (**\AzureAdmin**) y la contraseña (**Contoso!000**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-187">Sign in with your configured administrator account (**\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="e3dbc-188">De forma predeterminada, Hola **el administrador del servidor** se debe mostrar el panel.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-188">By default, hello **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="e3dbc-189">Haga clic en hello **agregar roles y características** vínculo en el panel de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-189">Click hello **Add roles and features** link on hello dashboard.</span></span>
   
    ![Explorador de servidores Agregar roles](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784623.png)
5. <span data-ttu-id="e3dbc-191">Haga clic en **siguiente** hasta llegar toohello **Roles de servidor** sección.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-191">Click **Next** until you get toohello **Server Roles** section.</span></span>
6. <span data-ttu-id="e3dbc-192">Seleccione hello **los servicios de dominio de Active Directory** y **servidor DNS** roles.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-192">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="e3dbc-193">Cuando se le solicite, agregue más características que requieran estos roles.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-193">When prompted, add more features that these roles require.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="e3dbc-194">Recibirá una advertencia de validación que le indicará que no hay ninguna dirección IP estática.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-194">You will get a validation warning that there is no static IP address.</span></span> <span data-ttu-id="e3dbc-195">Si va a probar la configuración de hello, haga clic en **continuar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-195">If you are testing hello configuration, click **Continue**.</span></span> <span data-ttu-id="e3dbc-196">Los escenarios de producción [usar PowerShell tooset Hola dirección IP estática del equipo de controlador de dominio de hello](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-196">For production scenarios [use PowerShell tooset hello static IP address of hello domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   > 
   > 
   
    ![Diálogo Agregar roles](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784624.png)
7. <span data-ttu-id="e3dbc-198">Haga clic en **siguiente** hasta llegar a hello **confirmación** sección.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-198">Click **Next** until you reach hello **Confirmation** section.</span></span> <span data-ttu-id="e3dbc-199">Seleccione hello **reinicie el servidor de destino Hola automáticamente si es necesario** casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-199">Select hello **Restart hello destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="e3dbc-200">Haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-200">Click **Install**.</span></span>
9. <span data-ttu-id="e3dbc-201">Después de instalan características de hello, devolver toohello **el administrador del servidor** panel.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-201">After hello features are installed, return toohello **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="e3dbc-202">Seleccione Hola de nuevo **AD DS** opción en el panel izquierdo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-202">Select hello new **AD DS** option on hello left pane.</span></span>
11. <span data-ttu-id="e3dbc-203">Haga clic en hello **más** vínculo en la barra de advertencia amarillo Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-203">Click hello **More** link on hello yellow warning bar.</span></span>
    
     ![Cuadro de diálogo de AD DS en la máquina virtual del servidor DNS](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784625.png)
12. <span data-ttu-id="e3dbc-205">Hola **acción** columna de hello **todos los detalles de la tarea de servidor** cuadro de diálogo, haga clic en **promocionar este controlador de dominio de servidor tooa**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-205">In hello **Action** column of hello **All Server Task Details** dialog box, click **Promote this server tooa domain controller**.</span></span>
13. <span data-ttu-id="e3dbc-206">Hola **Asistente para la configuración a los servicios de Active Directory dominio**, usar hello siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-206">In hello **Active Directory Domain Services Configuration Wizard**, use hello following values:</span></span>
    
    | <span data-ttu-id="e3dbc-207">Page</span><span class="sxs-lookup"><span data-stu-id="e3dbc-207">Page</span></span> | <span data-ttu-id="e3dbc-208">Configuración</span><span class="sxs-lookup"><span data-stu-id="e3dbc-208">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="e3dbc-209">Configuración de la implementación</span><span class="sxs-lookup"><span data-stu-id="e3dbc-209">Deployment Configuration</span></span> |<span data-ttu-id="e3dbc-210">**Agregar un nuevo bosque** = seleccionado</span><span class="sxs-lookup"><span data-stu-id="e3dbc-210">**Add a new forest** = Selected</span></span><br/><span data-ttu-id="e3dbc-211">**Nombre del dominio raíz** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="e3dbc-211">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="e3dbc-212">Opciones del controlador de dominio</span><span class="sxs-lookup"><span data-stu-id="e3dbc-212">Domain Controller Options</span></span> |<span data-ttu-id="e3dbc-213">**Password** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-213">**Password** = Contoso!000</span></span><br/><span data-ttu-id="e3dbc-214">**Confirmar contraseña** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-214">**Confirm Password** = Contoso!000</span></span> |
14. <span data-ttu-id="e3dbc-215">Haga clic en **siguiente** toogo a través de Hola a otras páginas de Asistente de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-215">Click **Next** toogo through hello other pages in hello wizard.</span></span> <span data-ttu-id="e3dbc-216">En hello **comprobación de requisitos previos** página, compruebe que ve el siguiente mensaje de Hola: **todas las comprobaciones de requisitos previos se realizaron correctamente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-216">On hello **Prerequisites Check** page, verify that you see hello following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="e3dbc-217">Tenga en cuenta que debe revisar todos los mensajes de advertencia aplicables, pero es posible toocontinue con la instalación de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-217">Note that you should review all applicable warning messages, but it is possible toocontinue with hello installation.</span></span>
15. <span data-ttu-id="e3dbc-218">Haga clic en **Instalar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-218">Click **Install**.</span></span> <span data-ttu-id="e3dbc-219">Hola **ContosoDC** máquina virtual se reiniciará automáticamente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-219">hello **ContosoDC** virtual machine will automatically reboot.</span></span>

## <a name="configure-domain-accounts"></a><span data-ttu-id="e3dbc-220">Configuración de cuentas de dominio</span><span class="sxs-lookup"><span data-stu-id="e3dbc-220">Configure domain accounts</span></span>
<span data-ttu-id="e3dbc-221">pasos siguientes Hola configuran cuentas de Active Directory de Hola para su uso posterior.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-221">hello next steps configure hello Active Directory accounts for later use.</span></span>

1. <span data-ttu-id="e3dbc-222">Inicio de sesión de nuevo en toohello **ContosoDC** máquina.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-222">Sign back in toohello **ContosoDC** machine.</span></span>
2. <span data-ttu-id="e3dbc-223">En **Administrador del servidor**, haga clic en **Herramientas** > **Centro de administración de Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-223">In **Server Manager**, click **Tools** > **Active Directory Administrative Center**.</span></span>
   
    ![Centro de administración de Active Directory](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784626.png)
3. <span data-ttu-id="e3dbc-225">Hola **centro de administración de Active Directory**, seleccione **corp (local)** en el panel izquierdo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-225">In hello **Active Directory Administrative Center**, select **corp (local)** in hello left pane.</span></span>
4. <span data-ttu-id="e3dbc-226">En el derecho de hello **tareas** panel, haga clic en **New** > **usuario**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-226">On hello right **Tasks** pane, click **New** > **User**.</span></span> <span data-ttu-id="e3dbc-227">Usar hello después de configuración:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-227">Use hello following settings:</span></span>
   
   | <span data-ttu-id="e3dbc-228">Configuración</span><span class="sxs-lookup"><span data-stu-id="e3dbc-228">Setting</span></span> | <span data-ttu-id="e3dbc-229">Valor</span><span class="sxs-lookup"><span data-stu-id="e3dbc-229">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="e3dbc-230">**Nombre**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-230">**First Name**</span></span> |<span data-ttu-id="e3dbc-231">Instalar</span><span class="sxs-lookup"><span data-stu-id="e3dbc-231">Install</span></span> |
   | <span data-ttu-id="e3dbc-232">**Usuario NombreDeCuentaSam**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-232">**User SamAccountName**</span></span> |<span data-ttu-id="e3dbc-233">Instalar</span><span class="sxs-lookup"><span data-stu-id="e3dbc-233">Install</span></span> |
   | <span data-ttu-id="e3dbc-234">**Password**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-234">**Password**</span></span> |<span data-ttu-id="e3dbc-235">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-235">Contoso!000</span></span> |
   | <span data-ttu-id="e3dbc-236">**Confirmar contraseña**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-236">**Confirm password**</span></span> |<span data-ttu-id="e3dbc-237">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-237">Contoso!000</span></span> |
   | <span data-ttu-id="e3dbc-238">**Otras opciones de contraseña**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-238">**Other password options**</span></span> |<span data-ttu-id="e3dbc-239">Seleccionado</span><span class="sxs-lookup"><span data-stu-id="e3dbc-239">Selected</span></span> |
   | <span data-ttu-id="e3dbc-240">**La contraseña nunca expira**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-240">**Password never expires**</span></span> |<span data-ttu-id="e3dbc-241">Activado</span><span class="sxs-lookup"><span data-stu-id="e3dbc-241">Checked</span></span> |
5. <span data-ttu-id="e3dbc-242">Haga clic en **Aceptar** toocreate hello **instalar** usuario.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-242">Click **OK** toocreate hello **Install** user.</span></span> <span data-ttu-id="e3dbc-243">Esta cuenta será usado tooconfigure Hola conmutación por error hello y clúster de grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-243">This account will be used tooconfigure hello failover cluster and hello availability group.</span></span>
6. <span data-ttu-id="e3dbc-244">Crear dos usuarios adicionales, **CORP\SQLSvc1** y **CORP\SQLSvc2**, con hello mismos pasos.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-244">Create two additional users, **CORP\SQLSvc1** and **CORP\SQLSvc2**, with hello same steps.</span></span> <span data-ttu-id="e3dbc-245">Estas cuentas se utilizarán para las instancias de SQL Server de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-245">These accounts will be used for hello SQL Server instances.</span></span> <span data-ttu-id="e3dbc-246">A continuación, debe toogive **CORP\Install** Hola clústeres de conmutación por error de Windows tooconfigure permisos necesarios.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-246">Next, you need toogive **CORP\Install** hello necessary permissions tooconfigure Windows failover clustering.</span></span>
7. <span data-ttu-id="e3dbc-247">Hola **centro de administración de Active Directory**, haga clic en **corp (local)** en el panel izquierdo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-247">In hello **Active Directory Administrative Center**, click **corp (local)** in hello left pane.</span></span> <span data-ttu-id="e3dbc-248">Hola **tareas** panel, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-248">In hello **Tasks** pane, click **Properties**.</span></span>
   
    ![Propiedades de usuario CORP](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784627.png)
8. <span data-ttu-id="e3dbc-250">Seleccione **extensiones**y, a continuación, haga clic en hello **avanzadas** botón en hello **seguridad** ficha.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-250">Select **Extensions**, and then click hello **Advanced** button on hello **Security** tab.</span></span>
9. <span data-ttu-id="e3dbc-251">Hola **configuración de seguridad avanzada para corp** cuadro de diálogo, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-251">In hello **Advanced Security Settings for corp** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="e3dbc-252">Haga clic en **Seleccionar una entidad de seguridad**, busque **CORP\Install** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-252">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
11. <span data-ttu-id="e3dbc-253">Seleccione hello **leer todas las propiedades** y **crear objetos de equipo** permisos.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-253">Select hello **Read all properties** and **Create Computer objects** permissions.</span></span>
    
     ![Permisos de usuario Corp](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784628.png)
12. <span data-ttu-id="e3dbc-255">Haga clic en **Aceptar** y luego vuelva a hacer clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-255">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="e3dbc-256">Ventana de propiedades de corp Hola cerrar.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-256">Close hello corp properties window.</span></span>

<span data-ttu-id="e3dbc-257">Ahora que ha configurado Active Directory y objetos de usuario de hello, creará tres máquinas virtuales de SQL Server y combinarlos toothis dominio.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-257">Now that you configured Active Directory and hello user objects, you will create three SQL Server virtual machines and join them toothis domain.</span></span>

## <a name="create-hello-sql-server-virtual-machines"></a><span data-ttu-id="e3dbc-258">Crear Hola máquinas virtuales de SQL Server</span><span class="sxs-lookup"><span data-stu-id="e3dbc-258">Create hello SQL Server virtual machines</span></span>
<span data-ttu-id="e3dbc-259">Cree tres máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-259">Create three virtual machines.</span></span> <span data-ttu-id="e3dbc-260">Una es para un nodo de clúster y dos para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-260">One is for a cluster node and two are for SQL Server.</span></span> <span data-ttu-id="e3dbc-261">toocreate de máquinas virtuales de hello, ir atrás toohello portal de Azure clásico, haga clic en **New** > **proceso** > **Máquina Virtual**  >  **De galería**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-261">toocreate each of hello virtual machines, go back toohello Azure classic portal, click **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span> <span data-ttu-id="e3dbc-262">A continuación, use plantillas de hello en hello después toohelp de tabla para crear máquinas virtuales de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-262">Then, use hello templates in hello following table toohelp you create hello virtual machines.</span></span>

| <span data-ttu-id="e3dbc-263">Page</span><span class="sxs-lookup"><span data-stu-id="e3dbc-263">Page</span></span> | <span data-ttu-id="e3dbc-264">VM1</span><span class="sxs-lookup"><span data-stu-id="e3dbc-264">VM1</span></span> | <span data-ttu-id="e3dbc-265">VM2</span><span class="sxs-lookup"><span data-stu-id="e3dbc-265">VM2</span></span> | <span data-ttu-id="e3dbc-266">VM3</span><span class="sxs-lookup"><span data-stu-id="e3dbc-266">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e3dbc-267">Seleccione el sistema operativo de máquina virtual de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-267">Select hello virtual machine operating system</span></span> |<span data-ttu-id="e3dbc-268">**Windows Server 2012 R2 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-268">**Windows Server 2012 R2 Datacenter**</span></span> |<span data-ttu-id="e3dbc-269">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-269">**SQL Server 2014 RTM Enterprise**</span></span> |<span data-ttu-id="e3dbc-270">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-270">**SQL Server 2014 RTM Enterprise**</span></span> |
| <span data-ttu-id="e3dbc-271">Configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-271">Virtual machine configuration</span></span> |<span data-ttu-id="e3dbc-272">**FECHA DE LANZAMIENTO DE LA VERSIÓN** = (última)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-272">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e3dbc-273">**NOMBRE DE LA MÁQUINA VIRTUAL** = ContosoWSFCNode</span><span class="sxs-lookup"><span data-stu-id="e3dbc-273">**VIRTUAL MACHINE NAME** = ContosoWSFCNode</span></span><br/><span data-ttu-id="e3dbc-274">**NIVEL**: ESTÁNDAR</span><span class="sxs-lookup"><span data-stu-id="e3dbc-274">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e3dbc-275">**TAMAÑO** = A2 (2 núcleos)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-275">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="e3dbc-276">**NUEVO NOMBRE de USUARIO** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e3dbc-276">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e3dbc-277">**NUEVA CONTRASEÑA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-277">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e3dbc-278">**CONFIRMAR** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-278">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="e3dbc-279">**FECHA DE LANZAMIENTO DE LA VERSIÓN** = (última)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-279">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e3dbc-280">**NOMBRE DE MÁQUINA VIRTUAL** = ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="e3dbc-280">**VIRTUAL MACHINE NAME** = ContosoSQL1</span></span><br/><span data-ttu-id="e3dbc-281">**NIVEL**: ESTÁNDAR</span><span class="sxs-lookup"><span data-stu-id="e3dbc-281">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e3dbc-282">**TAMAÑO** = A3 (4 núcleos)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-282">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="e3dbc-283">**NUEVO NOMBRE de USUARIO** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e3dbc-283">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e3dbc-284">**NUEVA CONTRASEÑA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-284">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e3dbc-285">**CONFIRMAR** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-285">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="e3dbc-286">**FECHA DE LANZAMIENTO DE LA VERSIÓN** = (última)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-286">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e3dbc-287">**NOMBRE DE MÁQUINA VIRTUAL** = ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="e3dbc-287">**VIRTUAL MACHINE NAME** = ContosoSQL2</span></span><br/><span data-ttu-id="e3dbc-288">**NIVEL**: ESTÁNDAR</span><span class="sxs-lookup"><span data-stu-id="e3dbc-288">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e3dbc-289">**TAMAÑO** = A3 (4 núcleos)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-289">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="e3dbc-290">**NUEVO NOMBRE de USUARIO** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e3dbc-290">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e3dbc-291">**NUEVA CONTRASEÑA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-291">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e3dbc-292">**CONFIRMAR** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e3dbc-292">**CONFIRM** = Contoso!000</span></span> |
| <span data-ttu-id="e3dbc-293">Configuración de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-293">Virtual machine configuration</span></span> |<span data-ttu-id="e3dbc-294">**SERVICIO EN LA NUBE** = nombre DNS del servicio en la nube único creado anteriormente (por ejemplo, ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-294">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e3dbc-295">**REGION/GRUPO DE AFINIDAD/RED VIRTUAL** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e3dbc-295">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e3dbc-296">**SUBREDES DE LA RED VIRTUAL** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-296">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e3dbc-297">**CUENTA DE ALMACENAMIENTO** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="e3dbc-297">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e3dbc-298">**CONJUNTO DE DISPONIBILIDAD** = Crear un conjunto de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="e3dbc-298">**AVAILABILITY SET** = Create an availability set</span></span><br/><span data-ttu-id="e3dbc-299">**NOMBRE DEL CONJUNTO DE DISPONIBILIDAD** = SQLHADR</span><span class="sxs-lookup"><span data-stu-id="e3dbc-299">**AVAILABILITY SET NAME** = SQLHADR</span></span> |<span data-ttu-id="e3dbc-300">**SERVICIO EN LA NUBE** = nombre DNS del servicio en la nube único creado anteriormente (por ejemplo, ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-300">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e3dbc-301">**REGION/GRUPO DE AFINIDAD/RED VIRTUAL** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e3dbc-301">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e3dbc-302">**SUBREDES DE LA RED VIRTUAL** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-302">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e3dbc-303">**CUENTA DE ALMACENAMIENTO** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="e3dbc-303">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e3dbc-304">**CONJUNTO de disponibilidad** = SQLHADR (también puede configurar conjunto una vez creada la máquina de Hola de disponibilidad de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-304">**AVAILABILITY SET** = SQLHADR (You can also configure hello availability set after hello machine has been created.</span></span> <span data-ttu-id="e3dbc-305">Las tres máquinas deben asignarse conjunto de disponibilidad SQLHADR toohello.)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-305">All three machines should be assigned toohello SQLHADR availability set.)</span></span> |<span data-ttu-id="e3dbc-306">**SERVICIO EN LA NUBE** = nombre DNS del servicio en la nube único creado anteriormente (por ejemplo, ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-306">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e3dbc-307">**REGION/GRUPO DE AFINIDAD/RED VIRTUAL** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e3dbc-307">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e3dbc-308">**SUBREDES DE LA RED VIRTUAL** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-308">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e3dbc-309">**CUENTA DE ALMACENAMIENTO** = usar una cuenta de almacenamiento generada automáticamente</span><span class="sxs-lookup"><span data-stu-id="e3dbc-309">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e3dbc-310">**CONJUNTO de disponibilidad** = SQLHADR (también puede configurar conjunto una vez creada la máquina de Hola de disponibilidad de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-310">**AVAILABILITY SET** = SQLHADR (You can also configure hello availability set after hello machine has been created.</span></span> <span data-ttu-id="e3dbc-311">Las tres máquinas deben asignarse conjunto de disponibilidad SQLHADR toohello.)</span><span class="sxs-lookup"><span data-stu-id="e3dbc-311">All three machines should be assigned toohello SQLHADR availability set.)</span></span> |
| <span data-ttu-id="e3dbc-312">Opciones de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-312">Virtual machine options</span></span> |<span data-ttu-id="e3dbc-313">Usar predeterminados</span><span class="sxs-lookup"><span data-stu-id="e3dbc-313">Use defaults</span></span> |<span data-ttu-id="e3dbc-314">Usar predeterminados</span><span class="sxs-lookup"><span data-stu-id="e3dbc-314">Use defaults</span></span> |<span data-ttu-id="e3dbc-315">Usar predeterminados</span><span class="sxs-lookup"><span data-stu-id="e3dbc-315">Use defaults</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="e3dbc-316">configuración anterior de Hello sugiere máquinas virtuales de nivel estándar, porque las máquinas de nivel básico no admiten extremos con equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-316">hello previous configuration suggests STANDARD tier virtual machines, because BASIC tier machines do not support load-balanced endpoints.</span></span> <span data-ttu-id="e3dbc-317">Necesita extremos con equilibrio de carga toocreate más adelante un agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-317">You need load-balanced endpoints later toocreate an availability group listener.</span></span> <span data-ttu-id="e3dbc-318">Además, los tamaños de máquina de Hola que se sugieren aquí están diseñados para las pruebas de los grupos de disponibilidad en máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-318">Also, hello machine sizes that are suggested here are meant for testing availability groups in Azure Virtual Machines.</span></span> <span data-ttu-id="e3dbc-319">Para obtener el mejor rendimiento de hello en cargas de trabajo de producción, vea las recomendaciones de Hola para tamaños de máquina de SQL Server y la configuración de [prácticas recomendadas de rendimiento para SQL Server en máquinas virtuales Azure](../sql/virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-319">For hello best performance on production workloads, see hello recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure Virtual Machines](../sql/virtual-machines-windows-sql-performance.md).</span></span>
> 
> 

<span data-ttu-id="e3dbc-320">Después de hello tres las máquinas virtuales están completamente aprovisionadas, necesita toojoin les toohello **corp.contoso.com** máquinas de toohello de derechos administrativos CORP\Install dominio y grant.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-320">After hello three virtual machines are fully provisioned, you need toojoin them toohello **corp.contoso.com** domain and grant CORP\Install administrative rights toohello machines.</span></span> <span data-ttu-id="e3dbc-321">toodo, Hola uso siguiendo los pasos para cada una de las máquinas virtuales Hola tres.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-321">toodo this, use hello following steps for each of hello three virtual machines.</span></span>

1. <span data-ttu-id="e3dbc-322">En primer lugar, cambie la dirección del servidor DNS preferido de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-322">First, change hello preferred DNS server address.</span></span> <span data-ttu-id="e3dbc-323">Descargar el directorio local de cada máquina virtual RDP archivo tooyour seleccionando la máquina virtual de hello en lista de Hola y haciendo clic en hello **conectar** botón.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-323">Download each virtual machine's RDP file tooyour local directory by selecting hello virtual machine in hello list and clicking hello **Connect** button.</span></span> <span data-ttu-id="e3dbc-324">tooselect una máquina virtual, haga clic en cualquier pero la primera celda de hello en fila hello, como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-324">tooselect a virtual machine, click anywhere but hello first cell in hello row, as shown in hello following screenshot.</span></span>
   
    ![Descargar archivo RDP de hello](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664953.jpg)
2. <span data-ttu-id="e3dbc-326">Abra Hola RDP archivo que descargó e inicie sesión en la máquina virtual de toohello mediante su cuenta de administrador configurada (**BUILTIN\AzureAdmin**) y la contraseña (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-326">Open hello RDP file that you downloaded, and sign in toohello virtual machine by using your configured administrator account (**BUILTIN\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="e3dbc-327">Después de iniciar la sesión, debería ver Hola **el administrador del servidor** panel.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-327">After you sign in, you should see hello **Server Manager** dashboard.</span></span> <span data-ttu-id="e3dbc-328">Haga clic en **servidor Local** en el panel izquierdo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-328">Click **Local Server** in hello left pane.</span></span>
4. <span data-ttu-id="e3dbc-329">Haga clic en hello **dirección IPv4 asignada por DHCP, IPv6 habilitado** vínculo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-329">Click hello **IPv4 address assigned by DHCP, IPv6 enabled** link.</span></span>
5. <span data-ttu-id="e3dbc-330">Hola **las conexiones de red** diálogo cuadro, haga clic en el icono de red de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-330">In hello **Network Connections** dialog box, click hello network icon.</span></span>
   
    ![Cambiar servidor de DNS de máquina virtual preferido de Hola](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784629.png)
6. <span data-ttu-id="e3dbc-332">En la barra de comandos de hello, haga clic en **cambiar la configuración de Hola de esta conexión**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-332">On hello command bar, click **Change hello settings of this connection**.</span></span> <span data-ttu-id="e3dbc-333">(Según el tamaño de saludo de la ventana, puede que tenga tooclick Hola doble flecha derecha toosee este comando).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-333">(Depending on hello size of your window, you might have tooclick hello double right arrow toosee this command).</span></span>
7. <span data-ttu-id="e3dbc-334">Seleccione **Protocolo de Internet versión 4 (TCP/IPv4)** y luego haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-334">Select **Internet Protocol Version 4 (TCP/IPv4)**, and then click **Properties**.</span></span>
8. <span data-ttu-id="e3dbc-335">Seleccione **Hola de uso después de direcciones de servidor DNS** y, a continuación, especifique **10.10.2.4** en **servidor DNS preferido**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-335">Select **Use hello following DNS server addresses** and then specify **10.10.2.4** in **Preferred DNS server**.</span></span>
9. <span data-ttu-id="e3dbc-336">Hola **10.10.2.4** dirección es Hola que es un equipo virtual tooa asignado en la subred 10.10.2.0/24 de hello en una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-336">hello **10.10.2.4** address is hello address that's assigned tooa virtual machine in hello 10.10.2.0/24 subnet in an Azure virtual network.</span></span> <span data-ttu-id="e3dbc-337">La máquina virtual es **ContosoDC**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-337">That virtual machine is **ContosoDC**.</span></span> <span data-ttu-id="e3dbc-338">tooverify **ContosoDC**de dirección IP, utilice **nslookup contosodc** en la ventana de símbolo del sistema hello, como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-338">tooverify **ContosoDC**'s IP address, use **nslookup contosodc** in hello command prompt window, as shown in hello following screenshot.</span></span>
   
    ![Usar dirección IP de NSLOOKUP toofind para controlador de dominio](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664954.jpg)
10. <span data-ttu-id="e3dbc-340">Haga clic en **Aceptar** > **cerrar** cambios de hello toocommit.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-340">Click **OK** > **Close** toocommit hello changes.</span></span> <span data-ttu-id="e3dbc-341">Ahora puede unir máquina virtual de hello demasiado**corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-341">You can now join hello virtual machine too**corp.contoso.com**.</span></span>
11. <span data-ttu-id="e3dbc-342">Nuevo en hello **servidor Local** ventana, haga clic en hello **WORKGROUP** vínculo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-342">Back in hello **Local Server** window, click hello **WORKGROUP** link.</span></span>
12. <span data-ttu-id="e3dbc-343">Hola **nombre_equipo** sección, haga clic en **cambio**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-343">In hello **Computer Name** section, click **Change**.</span></span>
13. <span data-ttu-id="e3dbc-344">Seleccione hello **dominio** casilla de verificación, escriba **corp.contoso.com** en Hola cuadro de texto y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-344">Select hello **Domain** check box, type **corp.contoso.com** in hello text box, and then click **OK**.</span></span>
14. <span data-ttu-id="e3dbc-345">Hola **la seguridad de Windows** diálogo cuadro, especifique las credenciales de hello para la cuenta de administrador de dominio predeterminado de hello (**CORP\AzureAdmin**) y la contraseña de hello (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-345">In hello **Windows Security** dialog box, specify hello credentials for hello default domain administrator account (**CORP\AzureAdmin**) and hello password (**Contoso!000**).</span></span>
15. <span data-ttu-id="e3dbc-346">Cuando vea el mensaje de "dominio de corp.contoso.com bienvenida toohello" Hola, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-346">When you see hello "Welcome toohello corp.contoso.com domain" message, click **OK**.</span></span>
16. <span data-ttu-id="e3dbc-347">Haga clic en **cerrar** > **reiniciar ahora** en el cuadro de diálogo de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-347">Click **Close** > **Restart Now** in hello dialog box.</span></span>

### <a name="add-hello-corpinstall-user-as-an-administrator-on-each-virtual-machine"></a><span data-ttu-id="e3dbc-348">Agregar usuario de hello Corp\Install como un administrador en cada máquina virtual</span><span class="sxs-lookup"><span data-stu-id="e3dbc-348">Add hello Corp\Install user as an administrator on each virtual machine</span></span>
1. <span data-ttu-id="e3dbc-349">Espere hasta que se reinicia la máquina virtual de hello y, a continuación, abra Hola RDP de archivos nuevo toosign en la máquina virtual de toohello con hello **BUILTIN\AzureAdmin** cuenta.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-349">Wait until hello virtual machine restarts, and then open hello RDP file again toosign in toohello virtual machine by using hello **BUILTIN\AzureAdmin** account.</span></span>
2. <span data-ttu-id="e3dbc-350">En **Administrador de servidores**, haga clic en **Herramientas** > **Administración de equipos**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-350">In **Server Manager** click **Tools** > **Computer Management**.</span></span>
   
    ![Administración de equipos](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784630.png)
3. <span data-ttu-id="e3dbc-352">Hola **administración de equipos** cuadro de diálogo, expanda **usuarios y grupos locales**y, a continuación, haga clic en **grupos**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-352">In hello **Computer Management** dialog box, expand **Local Users and Groups**, and then click **Groups**.</span></span>
4. <span data-ttu-id="e3dbc-353">Haga doble clic en hello **administradores** grupo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-353">Double-click hello **Administrators** group.</span></span>
5. <span data-ttu-id="e3dbc-354">Hola **propiedades de administradores de** diálogo cuadro, haga clic en hello **agregar** botón.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-354">In hello **Administrators Properties** dialog box, click hello **Add** button.</span></span>
6. <span data-ttu-id="e3dbc-355">Escriba Hola usuario **CORP\Install**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-355">Enter hello user **CORP\Install**, and then click **OK**.</span></span> <span data-ttu-id="e3dbc-356">Cuando se le piden credenciales, usar hello **AzureAdmin** cuenta con hello **Contoso! 000** contraseña.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-356">When prompted for credentials, use hello **AzureAdmin** account with hello **Contoso!000** password.</span></span>
7. <span data-ttu-id="e3dbc-357">Haga clic en **Aceptar** tooclose hello **propiedades del Administrador de** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-357">Click **OK** tooclose hello **Administrator Properties** dialog box.</span></span>

### <a name="add-hello-failover-clustering-feature-tooeach-virtual-machine"></a><span data-ttu-id="e3dbc-358">Agregar máquina virtual de tooeach de agrupación en clústeres de conmutación por error de característica de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-358">Add hello Failover Clustering feature tooeach virtual machine</span></span>
1. <span data-ttu-id="e3dbc-359">Hola **el administrador del servidor** panel, haga clic en **agregar roles y características**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-359">In hello **Server Manager** dashboard, click **Add roles and features**.</span></span>
2. <span data-ttu-id="e3dbc-360">Hola **agregar Roles y características Asistente**, haga clic en **siguiente** hasta llegar toohello **características** página.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-360">In hello **Add Roles and Features Wizard**, click **Next** until you get toohello **Features** page.</span></span>
3. <span data-ttu-id="e3dbc-361">Seleccione **Clústeres de conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-361">Select **Failover Clustering**.</span></span> <span data-ttu-id="e3dbc-362">Cuando se le solicite, agregue otras las características dependientes.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-362">When prompted, add other dependent features.</span></span>
   
    ![Agregar la característica de agrupación en clústeres de conmutación por error toovirtual máquina](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784631.png)
4. <span data-ttu-id="e3dbc-364">Haga clic en **siguiente**y, a continuación, haga clic en **instalar** en hello **confirmación** página.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-364">Click **Next**, and then click **Install** on hello **Confirmation** page.</span></span>
5. <span data-ttu-id="e3dbc-365">Cuando Hola **agrupación en clústeres de conmutación por error** finalizada la instalación de características, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-365">When hello **Failover Clustering** feature installation is finished, click **Close**.</span></span>
6. <span data-ttu-id="e3dbc-366">Cierre la sesión de máquina virtual de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-366">Sign out of hello virtual machine.</span></span>
7. <span data-ttu-id="e3dbc-367">Repita los pasos Hola de esta sección para todos los servidores de tres: **Nodowsfccontoso**, **ContosoSQL1**, y **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-367">Repeat hello steps in this section for all three servers: **ContosoWSFCNode**, **ContosoSQL1**, and **ContosoSQL2**.</span></span>

<span data-ttu-id="e3dbc-368">Hola ahora se aprovisionan máquinas virtuales de SQL Server y en ejecución, pero cada uno tiene opciones predeterminadas de Hola para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-368">hello SQL Server virtual machines are now provisioned and running, but each has hello default options for SQL Server.</span></span>

## <a name="create-hello-failover-cluster"></a><span data-ttu-id="e3dbc-369">Crear el clúster de conmutación por error de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-369">Create hello failover cluster</span></span>
<span data-ttu-id="e3dbc-370">En esta sección, creará el clúster de conmutación por error de Hola que hospedará el grupo de disponibilidad de Hola que creará más adelante.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-370">In this section, you create hello failover cluster that will host hello availability group that you will create later.</span></span> <span data-ttu-id="e3dbc-371">Por ahora, debe haber hecho Hola después tooeach de máquinas virtuales de hello tres que va a utilizar en el clúster de conmutación por error de hello:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-371">By now, you should have done hello following tooeach of hello three virtual machines that you will use in hello failover cluster:</span></span>

* <span data-ttu-id="e3dbc-372">Máquina virtual de hello totalmente aprovisionado en Azure</span><span class="sxs-lookup"><span data-stu-id="e3dbc-372">Fully provisioned hello virtual machine in Azure</span></span>
* <span data-ttu-id="e3dbc-373">Se unió al dominio de toohello de máquina virtual de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-373">Joined hello virtual machine toohello domain</span></span>
* <span data-ttu-id="e3dbc-374">Agregar **CORP\Install** toohello grupo de administradores locales</span><span class="sxs-lookup"><span data-stu-id="e3dbc-374">Added **CORP\Install** toohello local Administrators group</span></span>
* <span data-ttu-id="e3dbc-375">Característica de agrupación en clústeres de conmutación por error de hello agregada</span><span class="sxs-lookup"><span data-stu-id="e3dbc-375">Added hello failover clustering feature</span></span>

<span data-ttu-id="e3dbc-376">Todos estos son los requisitos previos en cada máquina virtual para poder unir clúster de conmutación por error de toohello.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-376">All these are prerequisites on each virtual machine before you can join it toohello failover cluster.</span></span>

<span data-ttu-id="e3dbc-377">Además, tenga en cuenta que Hola red virtual de Azure no se comportan en hello misma manera que una red local.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-377">Also, note that hello Azure virtual network does not behave in hello same way as an on-premises network.</span></span> <span data-ttu-id="e3dbc-378">Necesita toocreate clúster de Hola Hola siguiendo el orden:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-378">You need toocreate hello cluster in hello following order:</span></span>

1. <span data-ttu-id="e3dbc-379">Cree un clúster de nodo único en un nodo (**ContosoSQL1**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-379">Create a single-node cluster on one node (**ContosoSQL1**).</span></span>
2. <span data-ttu-id="e3dbc-380">Modificar tooan de dirección IP de clúster de hello dirección IP sin usar (**10.10.2.101**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-380">Modify hello cluster IP address tooan unused IP address (**10.10.2.101**).</span></span>
3. <span data-ttu-id="e3dbc-381">Ponga el nombre del clúster de hello en línea.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-381">Bring hello cluster name online.</span></span>
4. <span data-ttu-id="e3dbc-382">Agregar Hola otros nodos (**ContosoSQL2** y **Nodowsfccontoso**).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-382">Add hello other nodes (**ContosoSQL2** and **ContosoWSFCNode**).</span></span>

<span data-ttu-id="e3dbc-383">Usar hello siguiente pasos toocomplete las tareas de Hola que configurar totalmente el clúster de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-383">Use hello following steps toocomplete hello tasks that fully configure hello cluster.</span></span>

1. <span data-ttu-id="e3dbc-384">Archivo RDP de hello abierto para **ContosoSQL1**y de inicio de sesión mediante el uso de la cuenta de dominio de hello **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-384">Open hello RDP file for **ContosoSQL1**, and sign in by using hello domain account **CORP\Install**.</span></span>
2. <span data-ttu-id="e3dbc-385">Hola **el administrador del servidor** panel, haga clic en **herramientas** > **Administrador de clústeres de conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-385">In hello **Server Manager** dashboard, click **Tools** > **Failover Cluster Manager**.</span></span>
3. <span data-ttu-id="e3dbc-386">En el panel izquierdo de hello, haga clic en **Administrador de clústeres de conmutación por error**y, a continuación, haga clic en **crear un clúster**, tal y como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-386">In hello left pane, right-click **Failover Cluster Manager**, and then click **Create a Cluster**, as shown in hello following screenshot.</span></span>
   
    ![Crear clúster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784632.png)
4. <span data-ttu-id="e3dbc-388">En el Asistente para crear clúster de Hola, cree un clúster de un nodo recorriendo las páginas de Hola y con la configuración de hello en hello en la tabla siguiente:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-388">In hello Create Cluster Wizard, create a one-node cluster by stepping through hello pages and using hello settings in hello following table:</span></span>
   
   | <span data-ttu-id="e3dbc-389">Page</span><span class="sxs-lookup"><span data-stu-id="e3dbc-389">Page</span></span> | <span data-ttu-id="e3dbc-390">Configuración</span><span class="sxs-lookup"><span data-stu-id="e3dbc-390">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e3dbc-391">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="e3dbc-391">Before You Begin</span></span> |<span data-ttu-id="e3dbc-392">Usar predeterminados</span><span class="sxs-lookup"><span data-stu-id="e3dbc-392">Use defaults</span></span> |
   | <span data-ttu-id="e3dbc-393">Seleccionar servidores</span><span class="sxs-lookup"><span data-stu-id="e3dbc-393">Select Servers</span></span> |<span data-ttu-id="e3dbc-394">Escriba **ContosoSQL1** en **Especifique el nombre del servidor** y haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-394">Type **ContosoSQL1** in **Enter server name** and click **Add**</span></span> |
   | <span data-ttu-id="e3dbc-395">Advertencia de validación</span><span class="sxs-lookup"><span data-stu-id="e3dbc-395">Validation Warning</span></span> |<span data-ttu-id="e3dbc-396">Seleccione **no. no requieren soporte técnico de Microsoft para este clúster y, por tanto, no desea validación de hello toorun las pruebas. Al hacer clic en siguiente, continuar con la creación de clúster de hello**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-396">Select **No. I do not require support from Microsoft for this cluster, and therefore do not want toorun hello validation tests. When I click Next, continue creating hello cluster**.</span></span> |
   | <span data-ttu-id="e3dbc-397">Punto de acceso para administrar Hola clúster</span><span class="sxs-lookup"><span data-stu-id="e3dbc-397">Access Point for Administering hello Cluster</span></span> |<span data-ttu-id="e3dbc-398">Escriba **Cluster1** en **Nombre de clúster**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-398">Type **Cluster1** in **Cluster Name**</span></span> |
   | <span data-ttu-id="e3dbc-399">Confirmación</span><span class="sxs-lookup"><span data-stu-id="e3dbc-399">Confirmation</span></span> |<span data-ttu-id="e3dbc-400">Use los valores predeterminados a menos que use Espacios de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-400">Use defaults unless you are using Storage Spaces.</span></span> <span data-ttu-id="e3dbc-401">Vea la advertencia Hola sigue a esta tabla.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-401">See hello warning following this table.</span></span> |
   
   > [!WARNING]
   > <span data-ttu-id="e3dbc-402">Si utilizas [espacios de almacenamiento](https://technet.microsoft.com/library/hh831739), que agrupa varios discos en grupos de almacenamiento, debe borrar hello **agregar todo el almacenamiento apto toohello clúster** casilla de verificación de hello **confirmación** página.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-402">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear hello **Add all eligible storage toohello cluster** check box on hello **Confirmation** page.</span></span> <span data-ttu-id="e3dbc-403">Si no desactiva esta opción, los discos virtuales Hola se desasociarán durante el proceso de agrupación en clústeres de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-403">If you do not clear this option, hello virtual disks will be detached during hello clustering process.</span></span> <span data-ttu-id="e3dbc-404">Como resultado, también no aparecerán en el Administrador de discos o en el explorador hasta que los espacios de almacenamiento de Hola se quitan del clúster de Hola y volver a adjuntar mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-404">As a result, they will also not appear in Disk Manager or Explorer until hello storage spaces are removed from hello cluster and reattached by using PowerShell.</span></span>
   > 
   > 
5. <span data-ttu-id="e3dbc-405">En el panel izquierdo de hello, expanda **Administrador de clústeres de conmutación por error**y, a continuación, haga clic en **Cluster1.corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-405">In hello left pane, expand **Failover Cluster Manager**, and then click **Cluster1.corp.contoso.com**.</span></span>
6. <span data-ttu-id="e3dbc-406">En el panel central de hello, desplácese hacia abajo toohello **recursos principales de clúster** sección y expanda hello **nombre: Clutser1** detalles.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-406">In hello center pane, scroll down toohello **Cluster Core Resources** section, and expand hello **Name: Clutser1** details.</span></span> <span data-ttu-id="e3dbc-407">Debería ver dos hello **nombre** hello y **dirección IP** recursos de hello **error** estado.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-407">You should see both hello **Name** and hello **IP Address** resources in hello **Failed** state.</span></span> <span data-ttu-id="e3dbc-408">Hello recurso de dirección IP no se puede conectar porque está asignado a clúster Hola Hola la misma dirección IP como máquina de hello, que es una dirección duplicada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-408">hello IP address resource cannot be brought online because hello cluster is assigned hello same IP address as hello machine itself, which is a duplicate address.</span></span>
7. <span data-ttu-id="e3dbc-409">Hola contextual error **dirección IP** recurso y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-409">Right-click hello failed **IP Address** resource, and then click **Properties**.</span></span>
   
    ![Propiedades de clúster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784633.png)
8. <span data-ttu-id="e3dbc-411">Seleccione **dirección IP estática**, especifique **10.10.2.101** en hello **dirección** cuadro de texto y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-411">Select **Static IP Address**, specify **10.10.2.101** in hello **Address** text box, and then click **OK**.</span></span>
9. <span data-ttu-id="e3dbc-412">Hola **recursos principales de clúster** sección, haga clic en **nombre: Cluster1**y, a continuación, haga clic en **poner en conexión**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-412">In hello **Cluster Core Resources** section, right-click **Name: Cluster1**, and then click **Bring Online**.</span></span> <span data-ttu-id="e3dbc-413">Espere hasta que los recursos estén en línea.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-413">Wait until both resources are online.</span></span> <span data-ttu-id="e3dbc-414">Cuando se trata de un recurso de nombre de clúster de hello en línea, servidor de DC de Hola se actualiza con una nueva cuenta de equipo de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-414">When hello cluster name resource comes online, hello DC server is updated with a new Active Directory computer account.</span></span> <span data-ttu-id="e3dbc-415">Se usará esta cuenta de Active Directory grupo de disponibilidad de Hola de toorun servicio en clúster más adelante.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-415">This Active Directory account will be used toorun hello availability group clustered service later.</span></span>
10. <span data-ttu-id="e3dbc-416">Agregar Hola restantes clúster toohello de nodos.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-416">Add hello remaining nodes toohello cluster.</span></span> <span data-ttu-id="e3dbc-417">En el árbol del explorador de hello, haga clic en **Cluster1.corp.contoso.com**y, a continuación, haga clic en **agregar nodo**, tal y como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-417">In hello browser tree, right-click **Cluster1.corp.contoso.com**, and then click **Add Node**, as shown in hello following screenshot.</span></span>
    
     ![Agregar nodo toohello clúster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784634.png)
11. <span data-ttu-id="e3dbc-419">Hola **Asistente para agregar nodos**, haga clic en **siguiente** en hello **seleccionar servidores** página, agregue **ContosoSQL2** y **Nodowsfccontoso**  toohello lista escribiendo el nombre del servidor hello en **escriba el nombre de servidor** y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-419">In hello **Add Node Wizard**, click **Next** on hello **Select Servers** page, add **ContosoSQL2** and **ContosoWSFCNode** toohello list by typing hello server name in **Enter server name** and then clicking **Add**.</span></span> <span data-ttu-id="e3dbc-420">Cuando haya terminado, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-420">When you are done, click **Next**.</span></span>
12. <span data-ttu-id="e3dbc-421">En hello **advertencia de validación** página, haga clic en **n**, aunque en un escenario de producción, debe realizar pruebas de validación de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-421">On hello **Validation Warning** page, click **No**, although in a production scenario, you should perform hello validation tests.</span></span> <span data-ttu-id="e3dbc-422">A continuación, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-422">Then, click **Next**.</span></span>
13. <span data-ttu-id="e3dbc-423">En hello **confirmación** página, haga clic en **siguiente** nodos de hello tooadd.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-423">On hello **Confirmation** page, click **Next** tooadd hello nodes.</span></span>
    
    > [!WARNING]
    > <span data-ttu-id="e3dbc-424">Si utilizas [espacios de almacenamiento](https://technet.microsoft.com/library/hh831739), que agrupa varios discos en grupos de almacenamiento, debe borrar hello **agregar todo el almacenamiento apto toohello clúster** casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-424">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear hello **Add all eligible storage toohello cluster** check box.</span></span> <span data-ttu-id="e3dbc-425">Si no desactiva esta opción, los discos virtuales Hola se desasociarán durante el proceso de agrupación en clústeres de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-425">If you do not clear this option, hello virtual disks will be detached during hello clustering process.</span></span> <span data-ttu-id="e3dbc-426">Como resultado, que también no aparecerán en el Administrador de discos o en el explorador hasta que se quitan los espacios de almacenamiento de Hola de clúster y volver a adjuntar con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-426">As a result, they will also not appear in Disk Manager or Explorer until hello storage spaces are removed from cluster and reattached using PowerShell.</span></span>
    > 
    > 
14. <span data-ttu-id="e3dbc-427">Cuando se agregan nodos de hello toohello clúster, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-427">After hello nodes are added toohello cluster, click **Finish**.</span></span> <span data-ttu-id="e3dbc-428">El Administrador de clústeres de conmutación por error debe mostrar ahora que el clúster tiene tres nodos y enumerarlos en hello **nodos** contenedor.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-428">Failover Cluster Manager should now show that your cluster has three nodes and list them in hello **Nodes** container.</span></span>
15. <span data-ttu-id="e3dbc-429">Cierre la sesión de la sesión de escritorio remoto de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-429">Sign out of hello remote desktop session.</span></span>

## <a name="prepare-hello-sql-server-instances-for-availability-groups"></a><span data-ttu-id="e3dbc-430">Preparar instancias de SQL Server de Hola para grupos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="e3dbc-430">Prepare hello SQL Server instances for availability groups</span></span>
<span data-ttu-id="e3dbc-431">En esta sección, hará lo Hola siga en ambos **ContosoSQL1** y **contosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-431">In this section, you will do hello following on both **ContosoSQL1** and **contosoSQL2**:</span></span>

* <span data-ttu-id="e3dbc-432">Agregar un inicio de sesión para **NT AUTHORITY\System** con los permisos necesarios, establezca toohello instancia de SQL Server de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-432">Add a login for **NT AUTHORITY\System** with necessary permissions set toohello default SQL Server instance.</span></span>
* <span data-ttu-id="e3dbc-433">Agregar **CORP\Install** como una instancia de SQL Server sysadmin rol toohello predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-433">Add **CORP\Install** as a sysadmin role toohello default SQL Server instance.</span></span>
* <span data-ttu-id="e3dbc-434">Abra firewall de hello para el acceso remoto de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-434">Open hello firewall for remote access of SQL Server.</span></span>
* <span data-ttu-id="e3dbc-435">Habilitar Hola Always On característica de grupos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-435">Enable hello Always On availability groups feature.</span></span>
* <span data-ttu-id="e3dbc-436">Cambiar cuenta de servicio de SQL Server de hello demasiado**CORP\SQLSvc1** y **CORP\SQLSvc2**, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-436">Change hello SQL Server service account too**CORP\SQLSvc1** and **CORP\SQLSvc2**, respectively.</span></span>

<span data-ttu-id="e3dbc-437">Estas acciones pueden realizarse en cualquier orden.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-437">These actions can be performed in any order.</span></span> <span data-ttu-id="e3dbc-438">No obstante, Hola pasos le guiará a través de ellos en orden.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-438">Nevertheless, hello following steps will walk through them in order.</span></span> <span data-ttu-id="e3dbc-439">Siga los pasos de Hola para ambos **ContosoSQL1** y **ContosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-439">Follow hello steps for both **ContosoSQL1** and **ContosoSQL2**:</span></span>

1. <span data-ttu-id="e3dbc-440">Si no se ha registrado fuera de sesión de escritorio remoto de hello para la máquina virtual de hello, hágalo ahora.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-440">If you have not signed out of hello remote desktop session for hello virtual machine, do so now.</span></span>
2. <span data-ttu-id="e3dbc-441">Archivos abierto Hola RDP para **ContosoSQL1** y **ContosoSQL2**e inicie sesión como **BUILTIN\AzureAdmin**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-441">Open hello RDP files for **ContosoSQL1** and **ContosoSQL2**, and sign in as **BUILTIN\AzureAdmin**.</span></span>
3. <span data-ttu-id="e3dbc-442">Agregar **NT AUTHORITY\System** toohello inicios de sesión de SQL Server con los permisos necesarios.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-442">Add **NT AUTHORITY\System** toohello SQL Server logins with necessary permissions.</span></span> <span data-ttu-id="e3dbc-443">Abra **SQL Server Management Studio**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-443">Open **SQL Server Management Studio**.</span></span>
4. <span data-ttu-id="e3dbc-444">Haga clic en **conectar** instancia de SQL Server de tooconnect toohello de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-444">Click **Connect** tooconnect toohello default SQL Server instance.</span></span>
5. <span data-ttu-id="e3dbc-445">En el **Explorador de objetos**, expanda **Seguridad** y luego expanda **Inicios de sesión**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-445">In **Object Explorer**, expand **Security**, and then expand **Logins**.</span></span>
6. <span data-ttu-id="e3dbc-446">Menú contextual hello **NT AUTHORITY\System** inicio de sesión y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-446">Right-click hello **NT AUTHORITY\System** login, and then click **Properties**.</span></span>
7. <span data-ttu-id="e3dbc-447">En hello **elementos protegibles** página servidor local de hello, seleccione **Grant** para Hola los siguientes permisos y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-447">On hello **Securables** page, for hello local server, select **Grant** for hello following permissions, and then click **OK**.</span></span>
   
   * <span data-ttu-id="e3dbc-448">Modificar cualquier grupo de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="e3dbc-448">Alter any availability group</span></span>
   * <span data-ttu-id="e3dbc-449">Conectar SQL</span><span class="sxs-lookup"><span data-stu-id="e3dbc-449">Connect SQL</span></span>
   * <span data-ttu-id="e3dbc-450">Ver estado del servidor</span><span class="sxs-lookup"><span data-stu-id="e3dbc-450">View server state</span></span>
8. <span data-ttu-id="e3dbc-451">Agregar **CORP\Install** como un **sysadmin** instancia de SQL Server de rol toohello predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-451">Add **CORP\Install** as a **sysadmin** role toohello default SQL Server instance.</span></span> <span data-ttu-id="e3dbc-452">En el **Explorador de objetos**, haga clic con el botón derecho en **Inicios de sesión** y luego en **Nuevo inicio de sesión**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-452">In **Object Explorer**, right-click **Logins**, and then click **New Login**.</span></span>
9. <span data-ttu-id="e3dbc-453">Escriba **CORP\Install** en **Nombre de inicio de sesión**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-453">Type **CORP\Install** in **Login name**.</span></span>
10. <span data-ttu-id="e3dbc-454">En hello **Roles de servidor** página, seleccione **sysadmin**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-454">On hello **Server Roles** page, select **sysadmin**, and then click **OK**.</span></span> <span data-ttu-id="e3dbc-455">Después de crear el inicio de sesión de hello, puede verlo expandiendo **inicios de sesión** en **Explorador de objetos**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-455">After you create hello login, you can see it by expanding **Logins** in **Object Explorer**.</span></span>
11. <span data-ttu-id="e3dbc-456">una regla de firewall para SQL Server, en hello toocreate **iniciar** pantalla, abra **Firewall de Windows con seguridad avanzada**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-456">toocreate a firewall rule for SQL Server, on hello **Start** screen, open **Windows Firewall with Advanced Security**.</span></span>
12. <span data-ttu-id="e3dbc-457">En el panel izquierdo de hello, seleccione **reglas de entrada**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-457">In hello left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="e3dbc-458">En el panel derecho de hello, haga clic en **nueva regla**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-458">In hello right pane, click **New Rule**.</span></span>
13. <span data-ttu-id="e3dbc-459">En hello **tipo de regla** página, haga clic en **programa** > **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-459">On hello **Rule Type** page, click **Program** > **Next**.</span></span>
14. <span data-ttu-id="e3dbc-460">En hello **programa** página, seleccione **esta ruta de acceso del programa**, tipo **%ProgramFiles%\Microsoft SQL Server\MSSQL12. MSSQLSERVER\MSSQL\Binn\sqlservr.exe** en Hola cuadro de texto y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-460">On hello **Program** page, select **This program path**, type **%ProgramFiles%\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\sqlservr.exe** in hello text box, and then click **Next**.</span></span> <span data-ttu-id="e3dbc-461">Si está siguiendo estas instrucciones pero usa SQL Server 2012, directorio de SQL Server de hello es **MSSQL11. MSSQLSERVER**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-461">If you are following these directions but using SQL Server 2012, hello SQL Server directory is **MSSQL11.MSSQLSERVER**.</span></span>
15. <span data-ttu-id="e3dbc-462">En hello **acción** página, mantenga **Permitir conexión hello** seleccionada y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-462">On hello **Action** page, keep **Allow hello connection** selected, and then click **Next**.</span></span>
16. <span data-ttu-id="e3dbc-463">En hello **perfil** página, acepte la configuración predeterminada de hello y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-463">On hello **Profile** page, accept hello default settings, and then click **Next**.</span></span>
17. <span data-ttu-id="e3dbc-464">En hello **nombre** página, especifique un nombre de regla, como **SQL Server (regla de programa)**, Hola **nombre** texto cuadro, a continuación, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-464">On hello **Name** page, specify a rule name, such as **SQL Server (Program Rule)**, in hello **Name** text box, then click **Finish**.</span></span>
18. <span data-ttu-id="e3dbc-465">Hola tooenable **grupos de disponibilidad AlwaysOn** característica, en hello **iniciar** pantalla, abra **Administrador de configuración de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-465">tooenable hello **Always On Availability Groups** feature, on hello **Start** screen, open **SQL Server Configuration Manager**.</span></span>
19. <span data-ttu-id="e3dbc-466">En el árbol del explorador de hello, haga clic en **Services de SQL Server**, contextual hello **SQL Server (MSSQLSERVER)** de servicio y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-466">In hello browser tree, click **SQL Server Services**, right-click hello **SQL Server (MSSQLSERVER)** service, and then click **Properties**.</span></span>
20. <span data-ttu-id="e3dbc-467">Haga clic en hello **alta disponibilidad de AlwaysOn** ficha, seleccione **habilitar grupos de disponibilidad AlwaysOn**, tal y como se muestra en Hola siguiente captura de pantalla y, a continuación, haga clic en **aplicar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-467">Click hello **Always On High Availability** tab, select **Enable Always On Availability Groups**, as shown in hello following screenshot, and then click **Apply**.</span></span> <span data-ttu-id="e3dbc-468">Haga clic en **Aceptar** en Hola cuadro de diálogo y no cierre hello **propiedades** todavía el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-468">Click **OK** in hello dialog box, and do not close hello **Properties** dialog box yet.</span></span> <span data-ttu-id="e3dbc-469">Se reiniciará el servicio de SQL Server de hello después de cambiar la cuenta de servicio de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-469">You will restart hello SQL Server service after you change hello service account.</span></span>
    
     ![Habilitación de grupos de disponibilidad AlwaysOn](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665520.gif)
21. <span data-ttu-id="e3dbc-471">Hola toochange cuenta de servicio de SQL Server, haga clic en hello **iniciar sesión** , escriba **CORP\SQLSvc1** (para **ContosoSQL1**) o **CORP\SQLSvc2** () para **ContosoSQL2**) en **nombre-cuenta**, rellene y confirme la contraseña de hello y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-471">toochange hello SQL Server service account, click hello **Log On** tab, type **CORP\SQLSvc1** (for **ContosoSQL1**) or **CORP\SQLSvc2** (for **ContosoSQL2**) in **Account Name**, fill in and confirm hello password, and then click **OK**.</span></span>
22. <span data-ttu-id="e3dbc-472">En el cuadro de diálogo de Hola que aparece, haga clic en **Sí** toorestart Hola servicio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-472">In hello dialog box that opens, click **Yes** toorestart hello SQL Server service.</span></span> <span data-ttu-id="e3dbc-473">Una vez reiniciado Hola servicio SQL Server, cambia que realizó en hello **propiedades** entrarán en vigor de cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-473">After hello SQL Server service restarts, changes that you made in hello **Properties** dialog box are effective.</span></span>
23. <span data-ttu-id="e3dbc-474">Cierre la sesión de hello las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-474">Sign out of hello virtual machines.</span></span>

## <a name="create-hello-availability-group"></a><span data-ttu-id="e3dbc-475">Crear grupo de disponibilidad de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-475">Create hello availability group</span></span>
<span data-ttu-id="e3dbc-476">Ya estás listo tooconfigure un grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-476">You are now ready tooconfigure an availability group.</span></span> <span data-ttu-id="e3dbc-477">A continuación se resume lo que debe hacer:</span><span class="sxs-lookup"><span data-stu-id="e3dbc-477">Below is an outline of what you will do:</span></span>

* <span data-ttu-id="e3dbc-478">Crear una nueva base de datos (**MyDB1**) en **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-478">Create a new database (**MyDB1**) on **ContosoSQL1**.</span></span>
* <span data-ttu-id="e3dbc-479">Realice una copia de seguridad completa y una copia de seguridad del registro de transacciones de base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-479">Take both a full backup and a transaction log backup of hello database.</span></span>
* <span data-ttu-id="e3dbc-480">Restaurar Hola completa y copias de seguridad de registro demasiado**ContosoSQL2** con hello **NORECOVERY** opción.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-480">Restore hello full and log backups too**ContosoSQL2** with hello **NORECOVERY** option.</span></span>
* <span data-ttu-id="e3dbc-481">Crear grupo de disponibilidad de hello (**AG1**) con réplicas secundarias legibles, confirmación sincrónica y conmutación automática por error.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-481">Create hello availability group (**AG1**) with synchronous commit, automatic failover, and readable secondary replicas.</span></span>

### <a name="create-hello-mydb1-database-on-contososql1"></a><span data-ttu-id="e3dbc-482">Crear base de datos de hello MyDB1 en ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="e3dbc-482">Create hello MyDB1 database on ContosoSQL1</span></span>
1. <span data-ttu-id="e3dbc-483">Si todavía no está suscrito fuera de sesiones de escritorio remoto de Hola para **ContosoSQL1** y **ContosoSQL2**, hágalo ahora.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-483">If you have not already signed out of hello remote desktop sessions for **ContosoSQL1** and **ContosoSQL2**, do so now.</span></span>
2. <span data-ttu-id="e3dbc-484">Archivo RDP de hello abierto para **ContosoSQL1**e inicie sesión como **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-484">Open hello RDP file for **ContosoSQL1**, and sign in as **CORP\Install**.</span></span>
3. <span data-ttu-id="e3dbc-485">En el **Explorador de archivos**, en **\\C:**, cree un directorio denominado **backup**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-485">In **File Explorer**, under **C:\\**, create a directory named **backup**.</span></span> <span data-ttu-id="e3dbc-486">Utilizará este directorio tooback y restaurar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-486">You will use this directory tooback up and restore your database.</span></span>
4. <span data-ttu-id="e3dbc-487">Haga clic en nuevo directorio de hello, seleccione demasiado**compartir con**y, a continuación, haga clic en **personas concretas**, tal y como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-487">Right-click hello new directory, point too**Share with**, and then click **Specific people**, as shown in hello following screenshot.</span></span>
   
    ![Creación de una carpeta de copia de seguridad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665521.gif)
5. <span data-ttu-id="e3dbc-489">Agregar **CORP\SQLSvc1**y, a continuación, asígnele el nombre hello **lectura/escritura** permiso.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-489">Add **CORP\SQLSvc1**, and then give it hello **Read/Write** permission.</span></span> <span data-ttu-id="e3dbc-490">Agregar **CORP\SQLSvc2**y, a continuación, asígnele el nombre hello **lectura** permiso, como se muestra en Hola siguiente captura de pantalla y, a continuación, haga clic en **recurso compartido**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-490">Add **CORP\SQLSvc2**, and then give it hello **Read** permission, as shown in hello following screenshot, and then click **Share**.</span></span> <span data-ttu-id="e3dbc-491">Cuando finalice el proceso de uso compartido de archivos de hello, haga clic en **realiza**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-491">After hello file-sharing process is finished, click **Done**.</span></span>
   
    ![Concesión de permisos para la carpeta de copia de seguridad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665522.gif)
6. <span data-ttu-id="e3dbc-493">toocreate Hola base de datos, de hello **iniciar** menú Abrir **SQL Server Management Studio**y, a continuación, haga clic en **conectar** instancia de SQL Server de tooconnect toohello de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-493">toocreate hello database, from hello **Start** menu, open **SQL Server Management Studio**, and then click **Connect** tooconnect toohello default SQL Server instance.</span></span>
7. <span data-ttu-id="e3dbc-494">En el **Explorador de objetos**, haga clic con el botón derecho en **Bases de datos** y, después, haga clic en **Nueva base de datos**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-494">In **Object Explorer**, right-click **Databases**, and then click **New Database**.</span></span>
8. <span data-ttu-id="e3dbc-495">En **Nombre de base de datos**, escriba **MyDB1** y después haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-495">In **Database name**, type **MyDB1**, and then click **OK**.</span></span>

### <a name="make-a-full-backup-of-mydb1-and-restore-it-on-contososql2"></a><span data-ttu-id="e3dbc-496">Realización de una copia de seguridad completa de MyDB1 y restauración en ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="e3dbc-496">Make a full backup of MyDB1 and restore it on ContosoSQL2</span></span>
1. <span data-ttu-id="e3dbc-497">toomake una copia de seguridad completa del programa Hola a la base de datos, en **Explorador de objetos**, expanda **bases de datos**, haga clic en **MyDB1**, seleccione demasiado**tareas**, y a continuación, haga clic en **copia de seguridad**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-497">toomake a full backup of hello database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point too**Tasks**, and then click **Back Up**.</span></span>
2. <span data-ttu-id="e3dbc-498">Hola **origen** sección, mantenga **tipo de copia de seguridad** establecido demasiado**completo**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-498">In hello **Source** section, keep **Backup type** set too**Full**.</span></span> <span data-ttu-id="e3dbc-499">Hola **destino** sección, haga clic en **quitar** tooremove Hola ruta de acceso predeterminada para el archivo de copia de seguridad de hello.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-499">In hello **Destination** section, click **Remove** tooremove hello default file path for hello backup file.</span></span>
3. <span data-ttu-id="e3dbc-500">Hola **destino** sección, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-500">In hello **Destination** section, click **Add**.</span></span>
4. <span data-ttu-id="e3dbc-501">Hola **nombre de archivo** cuadro de texto, escriba  **\\ContosoSQL1\backup\MyDB1.bak**, haga clic en **Aceptar**y, a continuación, haga clic en **Aceptar** nuevo tooback la base de datos de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-501">In hello **File name** text box, type **\\ContosoSQL1\backup\MyDB1.bak**, click **OK**, and then click **OK** again tooback up hello database.</span></span> <span data-ttu-id="e3dbc-502">Cuando finalice la operación de copia de seguridad de hello, haga clic en **Aceptar** nuevo cuadro de diálogo de tooclose Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-502">When hello backup operation finishes, click **OK** again tooclose hello dialog box.</span></span>
5. <span data-ttu-id="e3dbc-503">copia de seguridad de base de datos de hello, de registro de toomake una transacción **Explorador de objetos**, expanda **bases de datos**, haga clic en **MyDB1**, seleccione demasiado**tareas**y, a continuación, haga clic en **copia de seguridad**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-503">toomake a transaction log backup of hello database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point too**Tasks**, and then click **Back Up**.</span></span>
6. <span data-ttu-id="e3dbc-504">En **Tipo de copia de seguridad**, seleccione **Registro de transacciones**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-504">In **Backup type**, select **Transaction Log**.</span></span> <span data-ttu-id="e3dbc-505">Mantener hello **destino** archivo toohello de conjunto de ruta de acceso que especificada anteriormente y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-505">Keep hello **Destination** file path set toohello one you specified earlier, and then click **OK**.</span></span> <span data-ttu-id="e3dbc-506">Una vez finalizada la operación de copia de seguridad de hello, haga clic en **Aceptar** nuevo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-506">After hello backup operation finishes, click **OK** again.</span></span>
7. <span data-ttu-id="e3dbc-507">Hola toorestore completa y registro de transacciones las copias de seguridad **ContosoSQL2**, abra el archivo de hello RDP para **ContosoSQL2**e inicie sesión como **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-507">toorestore hello full and transaction log backups on **ContosoSQL2**, open hello RDP file for **ContosoSQL2**, and sign in as **CORP\Install**.</span></span> <span data-ttu-id="e3dbc-508">Dejar la sesión de escritorio remoto de Hola para **ContosoSQL1** abrir.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-508">Leave hello remote desktop session for **ContosoSQL1** open.</span></span>
8. <span data-ttu-id="e3dbc-509">De hello **iniciar** menú Abrir **SQL Server Management Studio**y, a continuación, haga clic en **conectar** instancia de SQL Server de tooconnect toohello de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-509">From hello **Start** menu, open **SQL Server Management Studio**, and then click **Connect** tooconnect toohello default SQL Server instance.</span></span>
9. <span data-ttu-id="e3dbc-510">En el **Explorador de objetos**, haga clic con el botón derecho en **Bases de datos** y luego en **Restaurar base de datos**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-510">In **Object Explorer**, right-click **Databases**, and then click **Restore Database**.</span></span>
10. <span data-ttu-id="e3dbc-511">Hola **origen** sección, seleccione **dispositivo**y haga clic en el botón de puntos suspensivos hello **...**</span><span class="sxs-lookup"><span data-stu-id="e3dbc-511">In hello **Source** section, select **Device**, and click hello ellipsis **…**</span></span> <span data-ttu-id="e3dbc-512">.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-512">button.</span></span>
11. <span data-ttu-id="e3dbc-513">En **Seleccionar dispositivos de copia de seguridad**, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-513">In **Select backup devices**, click **Add**.</span></span>
12. <span data-ttu-id="e3dbc-514">En la **ubicación del archivo de copia de seguridad**, escriba **\\ContosoSQL1\backup**, haga clic en **Actualizar**, a continuación, seleccione **MyDB1.bak** y haga clic en **Aceptar**, luego haga clic de nuevo en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="e3dbc-514">In **Backup file location**, type **\\ContosoSQL1\backup**, click **Refresh**, select **MyDB1.bak**, click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="e3dbc-515">Ahora debería ver Hola copia de seguridad completa y copia de seguridad de registro de hello en hello **toorestore de conjuntos de copia** panel.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-515">You should now see hello full backup and hello log backup in hello **Backup sets toorestore** pane.</span></span>
13. <span data-ttu-id="e3dbc-516">Vaya toohello **opciones** página, seleccione **RESTORE WITH NORECOVERY** en **estado de recuperación**y, a continuación, haga clic en **Aceptar** base de datos de toorestore Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-516">Go toohello **Options** page, select **RESTORE WITH NORECOVERY** in **Recovery state**, and then click **OK** toorestore hello database.</span></span> <span data-ttu-id="e3dbc-517">Después de hello restaurar operación finalice, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-517">After hello restore operation finishes, click **OK**.</span></span>

### <a name="create-hello-availability-group"></a><span data-ttu-id="e3dbc-518">Crear grupo de disponibilidad de Hola</span><span class="sxs-lookup"><span data-stu-id="e3dbc-518">Create hello availability group</span></span>
1. <span data-ttu-id="e3dbc-519">Vaya realizar copias de sesión de escritorio remoto de toohello para **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-519">Go back toohello remote desktop session for **ContosoSQL1**.</span></span> <span data-ttu-id="e3dbc-520">En **Explorador de objetos** en SQL Server Management Studio, haga clic en **alta disponibilidad de AlwaysOn**y, a continuación, haga clic en **el Asistente para nuevo grupo de disponibilidad**, tal y como se muestra en hello captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-520">In **Object Explorer** in SQL Server Management Studio, right-click **Always On High Availability**, and then click **New Availability Group Wizard**, as shown in hello following screenshot.</span></span>
   
    ![Inicio del Asistente para nuevo grupo de disponibilidad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665523.gif)
2. <span data-ttu-id="e3dbc-522">En hello **Introducción** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-522">On hello **Introduction** page, click **Next**.</span></span> <span data-ttu-id="e3dbc-523">En hello **especificar el nombre de grupo de disponibilidad** página, escriba **AG1** en **nombre del grupo de disponibilidad**, a continuación, haga clic en **siguiente** nuevo.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-523">On hello **Specify Availability Group Name** page, type **AG1** in **Availability group name**, then click **Next** again.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Especificación del nombre de grupo de disponibilidad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665524.gif)
3. <span data-ttu-id="e3dbc-525">En hello **seleccionar bases de datos** , seleccione **MyDB1**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-525">On hello **Select Databases** page, select **MyDB1**, and then click **Next**.</span></span> <span data-ttu-id="e3dbc-526">base de datos de Hello cumple los requisitos previos de Hola para un grupo de disponibilidad dado que ha realizado al menos una copia de seguridad completa en la réplica principal pretendida de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-526">hello database meets hello prerequisites for an availability group because you have taken at least one full backup on hello intended primary replica.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Selección de base de datos](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665525.gif)
4. <span data-ttu-id="e3dbc-528">en hello **especificar réplicas** página, haga clic en **agregar una réplica**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-528">on hello **Specify Replicas** page, click **Add Replica**.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Especificación de réplicas](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665526.gif)
5. <span data-ttu-id="e3dbc-530">Hola **conectar tooServer** cuadro de diálogo, escriba **ContosoSQL2** en **nombre del servidor**y, a continuación, haga clic en **conectar**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-530">In hello **Connect tooServer** dialog box, type **ContosoSQL2** in **Server name**, and then click **Connect**.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad, conectar tooserver](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665527.gif)
6. <span data-ttu-id="e3dbc-532">En hello **especificar réplicas** página, ahora debería ver **ContosoSQL2** enumerados en **réplicas disponibles**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-532">Back on hello **Specify Replicas** page, you should now see **ContosoSQL2** listed in **Available Replicas**.</span></span> <span data-ttu-id="e3dbc-533">Configurar réplicas de hello tal y como se muestra en la siguiente captura de pantalla de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-533">Configure hello replicas as shown in hello following screenshot.</span></span> <span data-ttu-id="e3dbc-534">Cuando haya terminado, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-534">When you are finished, click **Next**.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Especificación de réplicas (completo)](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665528.gif)
7. <span data-ttu-id="e3dbc-536">En hello **seleccionar sincronización de datos iniciales** , seleccione **solo unión**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-536">On hello **Select Initial Data Synchronization** page, select **Join only**, and then click **Next**.</span></span> <span data-ttu-id="e3dbc-537">Ya ha realizado la sincronización de datos manualmente cuando realiza copias de seguridad completa y de transacciones de hello en **ContosoSQL1** y las restauró en **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-537">You already performed data synchronization manually when you made hello full and transaction backups on **ContosoSQL1** and restored them on **ContosoSQL2**.</span></span> <span data-ttu-id="e3dbc-538">Puede elegir no tooperform hello las operaciones de copia de seguridad y restauración en la base de datos y en su lugar, seleccione **completa** toolet Hola Asistente para nuevo grupo de disponibilidad realice la sincronización de datos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-538">You can choose not tooperform hello backup and restore operations on your database and instead select **Full** toolet hello New Availability Group Wizard perform data synchronization for you.</span></span> <span data-ttu-id="e3dbc-539">Sin embargo, no se recomienda esta opción para bases de datos de gran tamaño como las que se encuentran en algunas empresas.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-539">However, we do not recommend this option for very large databases that are found in some enterprises.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad, seleccionar sincronización de datos iniciales](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665529.gif)
8. <span data-ttu-id="e3dbc-541">En hello **validación** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-541">On hello **Validation** page, click **Next**.</span></span> <span data-ttu-id="e3dbc-542">Esta página debe ser similar toohello siguiente captura de pantalla.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-542">This page should look similar toohello following screenshot.</span></span> <span data-ttu-id="e3dbc-543">Hay una advertencia para la configuración de agente de escucha de hello porque no ha configurado un agente de escucha del grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-543">There is a warning for hello listener configuration because you have not configured an availability group listener.</span></span> <span data-ttu-id="e3dbc-544">Puede omitir esta advertencia, ya que este tutorial no configura un agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-544">You can ignore this warning, because this tutorial does not configure a listener.</span></span> <span data-ttu-id="e3dbc-545">agente de escucha de tooconfigure Hola después de completar este tutorial, vea [configurar un agente de escucha ILB para grupos de disponibilidad AlwaysOn en Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-545">tooconfigure hello listener after you complete this tutorial, see [Configure an ILB listener for Always On Availability Groups in Azure](../classic/ps-sql-int-listener.md).</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Validación](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665530.gif)
9. <span data-ttu-id="e3dbc-547">En hello **resumen** página, haga clic en **finalizar**y, a continuación, espere mientras el Asistente de hello configura nuevo grupo de disponibilidad Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-547">On hello **Summary** page, click **Finish**, and then wait while hello wizard configures hello new availability group.</span></span> <span data-ttu-id="e3dbc-548">En hello **progreso** página, puede hacer clic en **detalles más** tooview Hola detallada progreso.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-548">On hello **Progress** page, you can click **More details** tooview hello detailed progress.</span></span> <span data-ttu-id="e3dbc-549">Cuando finalice el Asistente de hello, inspeccionar hello **resultados** tooverify página ese grupo de disponibilidad de Hola se crea correctamente, tal y como se muestra en la siguiente captura de pantalla de hello y, a continuación, haga clic en **cerrar** tooexit Hola Asistente.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-549">After hello wizard finishes, inspect hello **Results** page tooverify that hello availability group is successfully created, as shown in hello following screenshot, and then click **Close** tooexit hello wizard.</span></span>
   
    ![Asistente para nuevo grupo de disponibilidad: Resultados](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665531.gif)
10. <span data-ttu-id="e3dbc-551">En el **Explorador de objetos**, expanda **Alta disponibilidad AlwaysOn** y después, expanda **Grupos de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-551">In **Object Explorer**, expand **Always On High Availability**, and then expand **Availability Groups**.</span></span> <span data-ttu-id="e3dbc-552">Ahora debería ver el nuevo grupo de disponibilidad hello en este contenedor.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-552">You should now see hello new availability group in this container.</span></span> <span data-ttu-id="e3dbc-553">Haga clic con el botón derecho en **AG1 (principal)** y luego en **Mostrar panel**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-553">Right-click **AG1 (Primary)**, and then click **Show Dashboard**.</span></span>
    
     ![Visualización del panel del grupo de disponibilidad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665532.gif)
11. <span data-ttu-id="e3dbc-555">Su **panel AlwaysOn** debe apariencia similar toohello uno Hola siguiente captura de pantalla.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-555">Your **Always On Dashboard** should look similar toohello one in hello following screenshot.</span></span> <span data-ttu-id="e3dbc-556">Puede ver las réplicas de hello, el modo de conmutación por error de Hola de cada réplica y el estado de sincronización de Hola.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-556">You can see hello replicas, hello failover mode of each replica, and hello synchronization state.</span></span>
    
     ![Panel del grupo de disponibilidad](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665533.gif)
12. <span data-ttu-id="e3dbc-558">Devolver demasiado**el administrador del servidor**, haga clic en **herramientas**y, a continuación, abra **Administrador de clústeres de conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-558">Return too**Server Manager**, click **Tools**, and then open **Failover Cluster Manager**.</span></span>
13. <span data-ttu-id="e3dbc-559">Expanda **Cluster1.corp.contoso.com** y expanda **Servicios y aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-559">Expand **Cluster1.corp.contoso.com**, and then expand **Services and applications**.</span></span> <span data-ttu-id="e3dbc-560">Seleccione **Roles** y tenga en cuenta que hello **AG1** se ha creado la función de grupo de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-560">Select **Roles** and note that hello **AG1** availability group role has been created.</span></span> <span data-ttu-id="e3dbc-561">Tenga en cuenta que AG1 no tiene una dirección IP por qué base de datos, los clientes pueden conectarse toohello grupo de disponibilidad, porque no ha configurado un agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-561">Note that AG1 does not have an IP address by which database clients can connect toohello availability group, because you did not configure a listener.</span></span> <span data-ttu-id="e3dbc-562">Puede conectarse directamente toohello nodo principal para las operaciones de lectura y escritura y el nodo secundario de Hola para consultas de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-562">You can connect directly toohello primary node for read-write operations and hello secondary node for read-only queries.</span></span>
    
     ![Grupo de disponibilidad en el administrador de clústeres de conmutación por error.](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665534.gif)

> [!WARNING]
> <span data-ttu-id="e3dbc-564">No intente toofail por grupo de disponibilidad Hola Hola Administrador de clústeres de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-564">Do not try toofail over hello availability group from hello Failover Cluster Manager.</span></span> <span data-ttu-id="e3dbc-565">Todas las operaciones de conmutación por error deben realizarse desde el **Panel AlwaysOn** de SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-565">All failover operations should be performed from within **Always On Dashboard** in SQL Server Management Studio.</span></span> <span data-ttu-id="e3dbc-566">Para obtener más información, consulte [restricciones sobre el uso Hola Administrador de clústeres de conmutación por error con grupos de disponibilidad](https://msdn.microsoft.com/library/ff929171.aspx).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-566">For more information, see [Restrictions on Using hello Failover Cluster Manager with Availability Groups](https://msdn.microsoft.com/library/ff929171.aspx).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="e3dbc-567">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="e3dbc-567">Next steps</span></span>
<span data-ttu-id="e3dbc-568">Ha implementado correctamente SQL Server AlwaysOn mediante la creación de un grupo de disponibilidad en Azure.</span><span class="sxs-lookup"><span data-stu-id="e3dbc-568">You have now successfully implemented SQL Server Always On by creating an availability group in Azure.</span></span> <span data-ttu-id="e3dbc-569">tooconfigure un agente de escucha para este grupo de disponibilidad, consulte [configurar un agente de escucha ILB para grupos de disponibilidad AlwaysOn en Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-569">tooconfigure a listener for this availability group, see [Configure an ILB listener for Always On availability groups in Azure](../classic/ps-sql-int-listener.md).</span></span>

<span data-ttu-id="e3dbc-570">Para obtener más información sobre el uso de SQL Server en Azure, consulte [SQL Server en Máquinas virtuales de Azure](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e3dbc-570">For other information about using SQL Server in Azure, see [SQL Server on Azure Virtual Machines](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span></span>


---
title: aaaPrepare una tooAzure tooupload de VHD de Windows | Documentos de Microsoft
description: "¿Cómo tooprepare un VHD de Windows o VHDX antes de cargar tooAzure"
services: virtual-machines-windows
documentationcenter: 
author: glimoli
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7802489d-33ec-4302-82a4-91463d03887a
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 08/01/2017
ms.author: genli
ms.openlocfilehash: 530390e4c6a4f66ddfd4da23338f9bb3708c299f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/06/2017
---
# <a name="prepare-a-windows-vhd-or-vhdx-tooupload-tooazure"></a><span data-ttu-id="17ad0-103">Preparar una tooAzure tooupload Windows VHD o VHDX</span><span class="sxs-lookup"><span data-stu-id="17ad0-103">Prepare a Windows VHD or VHDX tooupload tooAzure</span></span>
<span data-ttu-id="17ad0-104">Antes de cargar una máquina virtual de Windows (VM) desde local tooMicrosoft Azure, debe preparar Hola disco de duro virtual (VHD o VHDX).</span><span class="sxs-lookup"><span data-stu-id="17ad0-104">Before you upload a Windows  virtual machines (VM) from on-premises tooMicrosoft Azure, you must prepare hello virtual hard disk (VHD or VHDX).</span></span> <span data-ttu-id="17ad0-105">Azure admite solo máquinas virtuales de generación 1 que están en formato de archivo de disco duro virtual de Hola y tienen un disco de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="17ad0-105">Azure supports only generation 1 VMs that are in hello VHD file format and have a fixed sized disk.</span></span> <span data-ttu-id="17ad0-106">Hola tamaño máximo permitido para hello VHD 1.023 GB.</span><span class="sxs-lookup"><span data-stu-id="17ad0-106">hello maximum size allowed for hello VHD is 1,023 GB.</span></span> <span data-ttu-id="17ad0-107">Puede convertir una generación 1 máquina virtual de hello VHDX tooVHD de sistema de archivos y de expansión dinámica en disco toofixed tamaño.</span><span class="sxs-lookup"><span data-stu-id="17ad0-107">You can convert a generation 1 VM from hello VHDX file system tooVHD and from a dynamically expanding disk toofixed-sized.</span></span> <span data-ttu-id="17ad0-108">Sin embargo, no puede cambiar la generación de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-108">But you can't change a VM's generation.</span></span> <span data-ttu-id="17ad0-109">Para obtener más información, consulte [¿Debería crear una máquina virtual de generación 1 o 2 en Hyper-V?](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span><span class="sxs-lookup"><span data-stu-id="17ad0-109">For more information, see [Should I create a generation 1 or 2 VM in Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).</span></span>

<span data-ttu-id="17ad0-110">Para obtener más información sobre la directiva de soporte de hello para la máquina virtual de Azure, consulte [soporte de software de servidor de Microsoft para las máquinas virtuales de Microsoft Azure](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="17ad0-110">For more information about hello support policy for Azure VM, see [Microsoft server software support for Microsoft Azure VMs](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span></span>

> [!Note]
> <span data-ttu-id="17ad0-111">instrucciones de Hello en este artículo aplican toohello versión de 64 bits de Windows Server 2008 R2 y posterior sistema operativo de Windows server.</span><span class="sxs-lookup"><span data-stu-id="17ad0-111">hello instructions in this article apply toohello 64-bit version of Windows Server 2008 R2 and later Windows server operating system.</span></span> <span data-ttu-id="17ad0-112">Para obtener información sobre cómo ejecutar la versión de 32 bits del sistema operativo en Azure, consulte [Soporte para sistemas operativos de 32 bits en máquinas virtuales de Azure](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="17ad0-112">For information about running 32-bit version of operating system in Azure, see [Support for 32-bit operating systems in Azure virtual machines](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span></span>

## <a name="convert-hello-virtual-disk-toovhd-and-fixed-size-disk"></a><span data-ttu-id="17ad0-113">Convertir tooVHD de disco virtual de Hola y disco de tamaño fijo</span><span class="sxs-lookup"><span data-stu-id="17ad0-113">Convert hello virtual disk tooVHD and fixed size disk</span></span> 
<span data-ttu-id="17ad0-114">Si necesita tooconvert su toohello de disco virtual requiere el formato de Azure, use uno de los métodos de hello en esta sección.</span><span class="sxs-lookup"><span data-stu-id="17ad0-114">If you need tooconvert your virtual disk toohello required format for Azure, use one of hello methods in this section.</span></span> <span data-ttu-id="17ad0-115">Realizar una copia de hello VM antes de ejecutar el proceso de conversión de disco virtual de Hola y asegúrese de que ese Hola que VHD de Windows funciona correctamente en el servidor local de Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-115">Back up hello VM before you run hello virtual disk conversion process and make sure that hello Windows VHD works correctly on hello local server.</span></span> <span data-ttu-id="17ad0-116">Resuelva los errores dentro de hello propia máquina virtual antes de que intente tooconvert o cargar tooAzure.</span><span class="sxs-lookup"><span data-stu-id="17ad0-116">Resolve any errors within hello VM itself before you try tooconvert or upload it tooAzure.</span></span>

<span data-ttu-id="17ad0-117">Después de convertir el disco de hello, cree una máquina virtual que usa Hola convertir disco.</span><span class="sxs-lookup"><span data-stu-id="17ad0-117">After you convert hello disk, create a VM that uses hello converted disk.</span></span> <span data-ttu-id="17ad0-118">Inicie e inicie sesión en toohello VM toofinish preparar Hola VM para la carga.</span><span class="sxs-lookup"><span data-stu-id="17ad0-118">Start and sign in toohello VM toofinish preparing hello VM for upload.</span></span>

### <a name="convert-disk-using-hyper-v-manager"></a><span data-ttu-id="17ad0-119">Conversión del disco mediante el Administrador de Hyper-V</span><span class="sxs-lookup"><span data-stu-id="17ad0-119">Convert disk using Hyper-V Manager</span></span>
1. <span data-ttu-id="17ad0-120">Abra el Administrador de Hyper-V y seleccione el equipo local en hello izquierda.</span><span class="sxs-lookup"><span data-stu-id="17ad0-120">Open Hyper-V Manager and select your local computer on hello left.</span></span> <span data-ttu-id="17ad0-121">En el menú de Hola por encima de la lista de equipos de hello, haga clic en **acción** > **editar disco**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-121">In hello menu above hello computer list, click **Action** > **Edit Disk**.</span></span>
2. <span data-ttu-id="17ad0-122">En hello **localizar disco duro Virtual** pantalla, busque y seleccione el disco virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-122">On hello **Locate Virtual Hard Disk** screen, locate and select your virtual disk.</span></span>
3. <span data-ttu-id="17ad0-123">En hello **elegir acción** pantalla y, a continuación, seleccione **convertir** y **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-123">On hello **Choose Action** screen, and then select **Convert** and **Next**.</span></span>
4. <span data-ttu-id="17ad0-124">Si necesita tooconvert vhdx, seleccione **VHD** y, a continuación, haga clic en **siguiente**</span><span class="sxs-lookup"><span data-stu-id="17ad0-124">If you need tooconvert from VHDX, select **VHD** and then click **Next**</span></span>
5. <span data-ttu-id="17ad0-125">Si necesita tooconvert desde un disco de expansión dinámica, seleccione **tamaño fijo** y, a continuación, haga clic en **siguiente**</span><span class="sxs-lookup"><span data-stu-id="17ad0-125">If you need tooconvert from a dynamically expanding disk, select **Fixed size** and then click **Next**</span></span>
6. <span data-ttu-id="17ad0-126">Busque y seleccione un ruta de acceso toosave Hola nuevo archivo VHD.</span><span class="sxs-lookup"><span data-stu-id="17ad0-126">Locate and select a path toosave hello new VHD file to.</span></span>
7. <span data-ttu-id="17ad0-127">Haga clic en **Finalizar**</span><span class="sxs-lookup"><span data-stu-id="17ad0-127">Click **Finish**.</span></span>

>[!NOTE]
><span data-ttu-id="17ad0-128">comandos de Hello en este artículo se deben ejecutar en una sesión de PowerShell con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="17ad0-128">hello commands in this article must be run on an elevated PowerShell session.</span></span>

### <a name="convert-disk-by-using-powershell"></a><span data-ttu-id="17ad0-129">Conversión de disco con PowerShell</span><span class="sxs-lookup"><span data-stu-id="17ad0-129">Convert disk by using PowerShell</span></span>
<span data-ttu-id="17ad0-130">Puede convertir un disco virtual mediante el uso de hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) comando en Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="17ad0-130">You can convert a virtual disk by using hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) command in Windows PowerShell.</span></span> <span data-ttu-id="17ad0-131">Seleccione **Ejecutar como administrador** al iniciar PowerShell.</span><span class="sxs-lookup"><span data-stu-id="17ad0-131">Select **Run as administrator** when you start PowerShell.</span></span> 

<span data-ttu-id="17ad0-132">Hello comando de ejemplo siguiente se convierte de VHDX tooVHD y de un expansión dinámica toofixed tamaño del disco:</span><span class="sxs-lookup"><span data-stu-id="17ad0-132">hello following example command converts from VHDX tooVHD, and from a dynamically expanding disk toofixed-size:</span></span>

```Powershell
Convert-VHD –Path c:\test\MY-VM.vhdx –DestinationPath c:\test\MY-NEW-VM.vhd -VHDType Fixed
```
<span data-ttu-id="17ad0-133">En este comando, reemplace el valor de Hola de "-ruta de acceso" hello ruta de acceso toohello disco duro virtual que desea que el valor de hello y tooconvert para "-DestinationPath" con la nueva ruta de acceso de Hola y el nombre del programa Hola a convertir el disco.</span><span class="sxs-lookup"><span data-stu-id="17ad0-133">In this command, replace hello value for "-Path" with hello path toohello virtual hard disk that you want tooconvert and hello value for "-DestinationPath" with hello new path and name of hello converted disk.</span></span>

### <a name="convert-from-vmware-vmdk-disk-format"></a><span data-ttu-id="17ad0-134">Conversión del formato de disco VMDK de VMware</span><span class="sxs-lookup"><span data-stu-id="17ad0-134">Convert from VMware VMDK disk format</span></span>
<span data-ttu-id="17ad0-135">Si tiene una imagen de máquina virtual de Windows en hello [formato de archivo VMDK](https://en.wikipedia.org/wiki/VMDK), convertir tooa VHD mediante el uso de hello [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span><span class="sxs-lookup"><span data-stu-id="17ad0-135">If you have a Windows VM image in hello [VMDK file format](https://en.wikipedia.org/wiki/VMDK), convert it tooa VHD by using hello [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span></span> <span data-ttu-id="17ad0-136">Para obtener más información, vea el artículo de blog de hello [cómo tooConvert un disco duro virtual de VMware VMDK tooHyper-V](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span><span class="sxs-lookup"><span data-stu-id="17ad0-136">For more information, see hello blog article [How tooConvert a VMware VMDK tooHyper-V VHD](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span></span>

## <a name="set-windows-configurations-for-azure"></a><span data-ttu-id="17ad0-137">Establecimiento de configuraciones de Windows para Azure</span><span class="sxs-lookup"><span data-stu-id="17ad0-137">Set Windows configurations for Azure</span></span>

<span data-ttu-id="17ad0-138">En hello máquina virtual que tiene previsto tooupload tooAzure, ejecutar todos los comandos en los siguientes Hola pasos desde una [ventana de símbolo del sistema con privilegios elevados](https://technet.microsoft.com/library/cc947813.aspx):</span><span class="sxs-lookup"><span data-stu-id="17ad0-138">On hello VM that you plan tooupload tooAzure, run all commands in hello following steps from an [elevated Command Prompt window](https://technet.microsoft.com/library/cc947813.aspx):</span></span>

1. <span data-ttu-id="17ad0-139">Quite cualquier ruta estática persistente en la tabla de enrutamiento de hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-139">Remove any static persistent route on hello routing table:</span></span>
   
   * <span data-ttu-id="17ad0-140">tabla de rutas de hello tooview, ejecute `route print` en línea de comandos de Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-140">tooview hello route table, run `route print` at hello command prompt.</span></span>
   * <span data-ttu-id="17ad0-141">Comprobar hello **rutas de persistencia** secciones.</span><span class="sxs-lookup"><span data-stu-id="17ad0-141">Check hello **Persistence Routes** sections.</span></span> <span data-ttu-id="17ad0-142">Si hay una ruta persistente, use [ruta delete](https://technet.microsoft.com/library/cc739598.apx) tooremove lo.</span><span class="sxs-lookup"><span data-stu-id="17ad0-142">If there is a persistent route, use [route delete](https://technet.microsoft.com/library/cc739598.apx) tooremove it.</span></span>
2. <span data-ttu-id="17ad0-143">Quitar del proxy WinHTTP hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-143">Remove hello WinHTTP proxy:</span></span>
   
    ```PowerShell
    netsh winhttp reset proxy
    ```
3. <span data-ttu-id="17ad0-144">Establecer una directiva de SAN de hello disco demasiado[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span><span class="sxs-lookup"><span data-stu-id="17ad0-144">Set hello disk SAN policy too[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span></span> 
   
    ```PowerShell
    diskpart 
    ```
    <span data-ttu-id="17ad0-145">En la ventana de símbolo del sistema abierta hello, escriba Hola siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="17ad0-145">In hello open Command Prompt window, type hello following commands:</span></span>

     ```DISKPART
    san policy=onlineall
    exit   
    ```

4. <span data-ttu-id="17ad0-146">Establecer tiempo de hora Universal coordinada (UTC) para Windows y Hola tipo de inicio del servicio de hora de Windows (w32time) Hola demasiado**automáticamente**:</span><span class="sxs-lookup"><span data-stu-id="17ad0-146">Set Coordinated Universal Time (UTC) time for Windows and hello startup type of hello Windows Time (w32time) service too**Automatically**:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\TimeZoneInformation' -name "RealTimeIsUniversal" 1 -Type DWord

    Set-Service -Name w32time -StartupType Auto
    ```
5. <span data-ttu-id="17ad0-147">Establecer Hola power perfil toohello **de alto rendimiento**:</span><span class="sxs-lookup"><span data-stu-id="17ad0-147">Set hello power profile toohello **High Performance**:</span></span>

    ```PowerShell
    powercfg /setactive SCHEME_MIN
    ```

## <a name="check-hello-windows-services"></a><span data-ttu-id="17ad0-148">Compruebe los servicios de Windows hello</span><span class="sxs-lookup"><span data-stu-id="17ad0-148">Check hello Windows services</span></span>
<span data-ttu-id="17ad0-149">Asegúrese de que cada uno de hello después de servicios de Windows se establece toohello **valores predeterminados de Windows**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-149">Make sure that each of hello following Windows services is set toohello **Windows default values**.</span></span> <span data-ttu-id="17ad0-150">Estos son los números mínimo de hello de servicios que deben estar configurados toomake ese Hola VM tenga conectividad.</span><span class="sxs-lookup"><span data-stu-id="17ad0-150">These are hello minimum numbers of services that must be set up toomake sure that hello VM has connectivity.</span></span> <span data-ttu-id="17ad0-151">configuración de inicio en hello tooreset, ejecute hello siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="17ad0-151">tooreset hello startup settings, run hello following commands:</span></span>
   
```PowerShell
Set-Service -Name bfe -StartupType Auto
Set-Service -Name dhcp -StartupType Auto
Set-Service -Name dnscache -StartupType Auto
Set-Service -Name IKEEXT -StartupType Auto
Set-Service -Name iphlpsvc -StartupType Auto
Set-Service -Name netlogon -StartupType Manual
Set-Service -Name netman -StartupType Manual
Set-Service -Name nsi -StartupType Auto
Set-Service -Name termService -StartupType Manual
Set-Service -Name MpsSvc -StartupType Auto
Set-Service -Name RemoteRegistry -StartupType Auto
```

## <a name="update-remote-desktop-registry-settings"></a><span data-ttu-id="17ad0-152">Actualización de la configuración del Registro de Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="17ad0-152">Update Remote Desktop registry settings</span></span>
<span data-ttu-id="17ad0-153">Asegúrese de que ese Hola después de configuración están configurados correctamente para la conexión a Escritorio remoto:</span><span class="sxs-lookup"><span data-stu-id="17ad0-153">Make sure that hello following settings are configured correctly for remote desktop connection:</span></span>

>[!Note] 
><span data-ttu-id="17ad0-154">Puede recibir un mensaje de error al ejecutar hello **Set-ItemProperty-ruta de acceso ' HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal servicios - nombre &lt;nombre de objeto&gt; &lt;valor&gt;** en estos pasos.</span><span class="sxs-lookup"><span data-stu-id="17ad0-154">You may receive an error message when you run hello **Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services -name &lt;object name&gt; &lt;value&gt;** in these steps.</span></span> <span data-ttu-id="17ad0-155">mensajes de bienvenida del error pueden omitirse.</span><span class="sxs-lookup"><span data-stu-id="17ad0-155">hello error message can be safely ignored.</span></span> <span data-ttu-id="17ad0-156">Significa que sólo ese dominio hello no inserta esa configuración a través de un objeto de directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="17ad0-156">It means only that hello domain is not pushing that configuration through a Group Policy object.</span></span>
>
>

1. <span data-ttu-id="17ad0-157">Protocolo de escritorio remoto (RDP) está habilitado:</span><span class="sxs-lookup"><span data-stu-id="17ad0-157">Remote Desktop Protocol (RDP) is enabled:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server' -name "fDenyTSConnections" -Value 0 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDenyTSConnections" -Value 0 -Type DWord
    ```
   
2. <span data-ttu-id="17ad0-158">Hola puerto RDP está configurado correctamente (puerto 3389 predeterminado):</span><span class="sxs-lookup"><span data-stu-id="17ad0-158">hello RDP port is set up correctly (Default port 3389):</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "PortNumber" 3389 -Type DWord
    ```
    <span data-ttu-id="17ad0-159">Cuando se implementa una máquina virtual, se crean las reglas predeterminadas de hello en el puerto 3389.</span><span class="sxs-lookup"><span data-stu-id="17ad0-159">When you deploy a VM, hello default rules are created against port 3389.</span></span> <span data-ttu-id="17ad0-160">Si desea que el número de puerto de toochange hello, hacerlo una vez implementada Hola VM en Azure.</span><span class="sxs-lookup"><span data-stu-id="17ad0-160">If you want toochange hello port number,  do that after hello VM is deployed in Azure.</span></span>

3. <span data-ttu-id="17ad0-161">Hola se escuchan en todas las interfaces de red:</span><span class="sxs-lookup"><span data-stu-id="17ad0-161">hello listener is listening in every network interface:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "LanAdapter" 0 -Type DWord
   ```
4. <span data-ttu-id="17ad0-162">Configurar el modo de autenticación a nivel de red de Hola para las conexiones RDP de hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-162">Configure hello Network Level Authentication mode for hello RDP connections:</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "UserAuthentication" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SecurityLayer" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "fAllowSecProtocolNegotiation" 1 -Type DWord
     ```

5. <span data-ttu-id="17ad0-163">Establecer el valor keep-alive hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-163">Set hello keep-alive value：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveEnable" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveInterval" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "KeepAliveTimeout" 1 -Type DWord
    ```
6. <span data-ttu-id="17ad0-164">Vuelva a conectarse:</span><span class="sxs-lookup"><span data-stu-id="17ad0-164">Reconnect：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDisableAutoReconnect" 0 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fInheritReconnectSame" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fReconnectSame" 0 -Type DWord
    ```
7. <span data-ttu-id="17ad0-165">Hola limitar el número de conexiones simultáneas:</span><span class="sxs-lookup"><span data-stu-id="17ad0-165">Limit hello number of concurrent connections：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "MaxInstanceCount" 4294967295 -Type DWord
    ```
8. <span data-ttu-id="17ad0-166">Si hay cualquier los certificados autofirmados acumular el agente de escucha de toohello RDP, quitarlos:</span><span class="sxs-lookup"><span data-stu-id="17ad0-166">If there are any self-signed certificates tied toohello RDP listener, remove them:</span></span>
    
    ```PowerShell
    Remove-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SSLCertificateSHA1Hash"
    ```
    <span data-ttu-id="17ad0-167">Se trata de toomake seguro de que puede conectarse al principio de hello al implementar Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-167">This is toomake sure that you can connect at hello beginning when you deploy hello VM.</span></span> <span data-ttu-id="17ad0-168">También puede ver esto en una fase posterior después de hello que máquina virtual se implementa en Azure si es necesario.</span><span class="sxs-lookup"><span data-stu-id="17ad0-168">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

9. <span data-ttu-id="17ad0-169">Si Hola VM va a formar parte de un dominio, compruebe que todos Hola después configuración toomake seguro de que la configuración anterior de hello no se revierte.</span><span class="sxs-lookup"><span data-stu-id="17ad0-169">If hello VM will be part of a Domain, check all hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="17ad0-170">las directivas de Hola que deben comprobarse son siguiente hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-170">hello policies that must be checked are hello following:</span></span>
    
    - <span data-ttu-id="17ad0-171">RDP está habilitado:</span><span class="sxs-lookup"><span data-stu-id="17ad0-171">RDP is enabled:</span></span>

         <span data-ttu-id="17ad0-172">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\ Componentes\Servicios de Escritorio remoto\Host de sesión de Escritorio remoto\Conexiones:</span><span class="sxs-lookup"><span data-stu-id="17ad0-172">Computer Configuration\Policies\Windows Settings\Administrative Templates\ Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span>
         
         <span data-ttu-id="17ad0-173">**Permitir a los usuarios tooconnect remotamente mediante Escritorio remoto**</span><span class="sxs-lookup"><span data-stu-id="17ad0-173">**Allow users tooconnect remotely by using Remote Desktop**</span></span>

    - <span data-ttu-id="17ad0-174">Directiva de grupo de NLA:</span><span class="sxs-lookup"><span data-stu-id="17ad0-174">NLA group policy:</span></span>

        <span data-ttu-id="17ad0-175">Configuración\Plantillas administrativas\Componentes\Servicios de Escritorio remoto\Host de sesión de Escritorio remoto\Seguridad:</span><span class="sxs-lookup"><span data-stu-id="17ad0-175">Settings\Administrative Templates\Components\Remote Desktop Services\Remote Desktop Session Host\Security:</span></span> 
        
        <span data-ttu-id="17ad0-176">**Exigir la autenticación de usuarios para conexiones remotas con Autenticación a nivel de red**</span><span class="sxs-lookup"><span data-stu-id="17ad0-176">**Require user Authentication for remote connections by using Network Level Authentication**</span></span>
    
    - <span data-ttu-id="17ad0-177">Configuración de conexión persistente:</span><span class="sxs-lookup"><span data-stu-id="17ad0-177">Keep Alive settings:</span></span>

        <span data-ttu-id="17ad0-178">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\ Componentes Windows\Servicios de Escritorio remoto\Host de sesión de Escritorio remoto\Conexiones:</span><span class="sxs-lookup"><span data-stu-id="17ad0-178">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="17ad0-179">**Configurar el intervalo de conexión persistente**</span><span class="sxs-lookup"><span data-stu-id="17ad0-179">**Configure keep-alive connection interval**</span></span>

    - <span data-ttu-id="17ad0-180">Vuelva a conectar la configuración:</span><span class="sxs-lookup"><span data-stu-id="17ad0-180">Reconnect settings:</span></span>

        <span data-ttu-id="17ad0-181">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\ Componentes Windows\Servicios de Escritorio remoto\Host de sesión de Escritorio remoto\Conexiones:</span><span class="sxs-lookup"><span data-stu-id="17ad0-181">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="17ad0-182">**Reconexión automática**</span><span class="sxs-lookup"><span data-stu-id="17ad0-182">**Automatic reconnection**</span></span>

    - <span data-ttu-id="17ad0-183">Limitar el número de Hola de configuración de conexiones:</span><span class="sxs-lookup"><span data-stu-id="17ad0-183">Limit hello number of connections settings:</span></span>

        <span data-ttu-id="17ad0-184">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\ Componentes Windows\Servicios de Escritorio remoto\Host de sesión de Escritorio remoto\Conexiones:</span><span class="sxs-lookup"><span data-stu-id="17ad0-184">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="17ad0-185">**Limitar el número de conexiones**</span><span class="sxs-lookup"><span data-stu-id="17ad0-185">**Limit number of connections**</span></span>

## <a name="configure-windows-firewall-rules"></a><span data-ttu-id="17ad0-186">Configuración de reglas de firewall de Windows</span><span class="sxs-lookup"><span data-stu-id="17ad0-186">Configure Windows Firewall rules</span></span>
1. <span data-ttu-id="17ad0-187">Activar Firewall de Windows en los perfiles de hello tres (dominio, estándar y público):</span><span class="sxs-lookup"><span data-stu-id="17ad0-187">Turn on Windows Firewall on hello three profiles (Domain, Standard, and Public):</span></span>

   ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\DomainProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\PublicProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\Standardprofile' -name "EnableFirewall" -Value 1 -Type DWord
   ```

2. <span data-ttu-id="17ad0-188">Ejecutar el siguiente comando de PowerShell tooallow WinRM a través de perfiles de firewall de hello tres (dominio, privado y público) de Hola y habilitar Hola servicio remota de PowerShell:</span><span class="sxs-lookup"><span data-stu-id="17ad0-188">Run hello following command in PowerShell tooallow WinRM through hello three firewall profiles (Domain, Private, and Public) and enable hello PowerShell Remote service:</span></span>
   
   ```PowerShell
    Enable-PSRemoting -force
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
   ```
3. <span data-ttu-id="17ad0-189">Habilitar Hola siguiendo el tráfico de RDP de Hola de tooallow de reglas de firewall</span><span class="sxs-lookup"><span data-stu-id="17ad0-189">Enable hello following firewall rules tooallow hello RDP traffic</span></span> 

   ```PowerShell
    netsh advfirewall firewall set rule group="Remote Desktop" new enable=yes
   ```   
4. <span data-ttu-id="17ad0-190">Habilitar la regla de uso compartido de impresoras y Hola archivo para que hello VM puede responder comando ping de tooa dentro de hello red Virtual:</span><span class="sxs-lookup"><span data-stu-id="17ad0-190">Enable hello File and Printer Sharing rule so that hello VM can respond tooa ping command inside hello Virtual Network:</span></span>

   ```PowerShell
    netsh advfirewall firewall set rule dir=in name="File and Printer Sharing (Echo Request - ICMPv4-In)" new enable=yes
   ``` 
5. <span data-ttu-id="17ad0-191">Si Hola VM va a formar parte de un dominio, compruebe Hola después configuración toomake seguro de que la configuración anterior de hello no se revierte.</span><span class="sxs-lookup"><span data-stu-id="17ad0-191">If hello VM  will be part of a Domain, check hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="17ad0-192">las directivas de Hello AD que deben comprobarse son siguiente hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-192">hello AD policies that must be checked are hello following:</span></span>

    - <span data-ttu-id="17ad0-193">Habilitar perfiles de Firewall de Windows hello</span><span class="sxs-lookup"><span data-stu-id="17ad0-193">Enable hello Windows Firewall profiles</span></span>

        <span data-ttu-id="17ad0-194">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil de dominio\Firewall de Windows: **Proteger todas las conexiones de red**</span><span class="sxs-lookup"><span data-stu-id="17ad0-194">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Protect all network connections**</span></span>

       <span data-ttu-id="17ad0-195">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil estándar\Firewall de Windows: **Proteger todas las conexiones de red**</span><span class="sxs-lookup"><span data-stu-id="17ad0-195">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Protect all network connections**</span></span>

    - <span data-ttu-id="17ad0-196">Habilitar RDP</span><span class="sxs-lookup"><span data-stu-id="17ad0-196">Enable RDP</span></span> 

        <span data-ttu-id="17ad0-197">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil de dominio\Firewall de Windows: **Permitir las excepciones de Escritorio remoto de entrada**</span><span class="sxs-lookup"><span data-stu-id="17ad0-197">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

        <span data-ttu-id="17ad0-198">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil estándar\Firewall de Windows: **Permitir las excepciones de Escritorio remoto de entrada**</span><span class="sxs-lookup"><span data-stu-id="17ad0-198">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

    - <span data-ttu-id="17ad0-199">Habilitar ICMP-V4</span><span class="sxs-lookup"><span data-stu-id="17ad0-199">Enable ICMP-V4</span></span>

        <span data-ttu-id="17ad0-200">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil de dominio\Firewall de Windows: **Permitir las excepciones ICMP**</span><span class="sxs-lookup"><span data-stu-id="17ad0-200">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

        <span data-ttu-id="17ad0-201">Configuración del equipo\Directivas\Configuración de Windows\Plantillas administrativas\Red\Conexión de red\Firewall de Windows\Perfil estándar\Firewall de Windows: **Permitir las excepciones ICMP**</span><span class="sxs-lookup"><span data-stu-id="17ad0-201">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

## <a name="verify-vm-is-healthy-secure-and-accessible-with-rdp"></a><span data-ttu-id="17ad0-202">Comprobación de que la que máquina virtual es correcta, está segura y es accesible con RDP</span><span class="sxs-lookup"><span data-stu-id="17ad0-202">Verify VM is healthy, secure, and accessible with RDP</span></span> 
1. <span data-ttu-id="17ad0-203">disco de hello seguro toomake es correcto y coherente, ejecute una operación de comprobación de disco en el próximo reinicio de máquina virtual de hello:</span><span class="sxs-lookup"><span data-stu-id="17ad0-203">toomake sure hello disk is healthy and consistent, run a check disk operation at hello next VM restart:</span></span>

    ```PowerShell
    Chkdsk /f
    ```
    <span data-ttu-id="17ad0-204">Asegúrese de que el informe de hello muestra un disco limpio y en buen estado.</span><span class="sxs-lookup"><span data-stu-id="17ad0-204">Make sure that hello report shows a clean and healthy disk.</span></span>

2. <span data-ttu-id="17ad0-205">Establecer configuración de datos de configuración de arranque (BCD) de Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-205">Set hello Boot Configuration Data (BCD) settings.</span></span> 

    > [!Note]
    > <span data-ttu-id="17ad0-206">Asegúrese de ejecutar estos comandos en una ventana CMD con privilegios elevados y **no** en PowerShell:</span><span class="sxs-lookup"><span data-stu-id="17ad0-206">Make sure you run these commands on an elevated CMD window and **NOT** on PowerShell:</span></span>
   
   ```CMD
   bcdedit /set {bootmgr} integrityservices enable
   
   bcdedit /set {default} device partition=C:
   
   bcdedit /set {default} integrityservices enable
   
   bcdedit /set {default} recoveryenabled Off
   
   bcdedit /set {default} osdevice partition=C:
   
   bcdedit /set {default} bootstatuspolicy IgnoreAllFailures
   ```
3. <span data-ttu-id="17ad0-207">Comprobar que ese repositorio de este último de administración de Windows hello es coherente.</span><span class="sxs-lookup"><span data-stu-id="17ad0-207">Verify that hello Windows Management Instrumentations repository is consistent.</span></span> <span data-ttu-id="17ad0-208">tooperform, Hola ejecución siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="17ad0-208">tooperform this, run hello following command:</span></span>

    ```PowerShell
    winmgmt /verifyrepository
    ```
    <span data-ttu-id="17ad0-209">Si se daña el repositorio de hello, consulte [WMI: repositorio está dañado, o no](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span><span class="sxs-lookup"><span data-stu-id="17ad0-209">If hello repository is corrupted, see [WMI: Repository Corruption, or Not](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span></span>

4. <span data-ttu-id="17ad0-210">Asegúrese de que cualquier otra aplicación no está usando el puerto 3389 Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-210">Make sure that any other application is not using hello port 3389.</span></span> <span data-ttu-id="17ad0-211">Este puerto se usa para hello servicio RDP en Azure.</span><span class="sxs-lookup"><span data-stu-id="17ad0-211">This port is used for hello RDP service in Azure.</span></span> <span data-ttu-id="17ad0-212">Puede ejecutar **netstat - anob** toosee qué puertos se utilizan en hello VM:</span><span class="sxs-lookup"><span data-stu-id="17ad0-212">You can run **netstat -anob** toosee which ports are in used on hello VM:</span></span>

    ```PowerShell
    netstat -anob
    ```

5. <span data-ttu-id="17ad0-213">Si hello VHD de Windows que desea que tooupload es un controlador de dominio, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="17ad0-213">If hello Windows VHD that you want tooupload is a domain controller, then follow these steps:</span></span>

    <span data-ttu-id="17ad0-214">A.</span><span class="sxs-lookup"><span data-stu-id="17ad0-214">A.</span></span> <span data-ttu-id="17ad0-215">Siga [estos pasos adicionales](https://support.microsoft.com/kb/2904015) disco de hello tooprepare.</span><span class="sxs-lookup"><span data-stu-id="17ad0-215">Follow [these extra steps](https://support.microsoft.com/kb/2904015) tooprepare hello disk.</span></span>

    <span data-ttu-id="17ad0-216">B.</span><span class="sxs-lookup"><span data-stu-id="17ad0-216">B.</span></span> <span data-ttu-id="17ad0-217">Asegúrese de que conoce contraseña de DSRM hello en caso de tener toostart Hola VM en DSRM en algún momento.</span><span class="sxs-lookup"><span data-stu-id="17ad0-217">Make sure that you know hello DSRM password in case you have toostart hello VM in DSRM at some point.</span></span> <span data-ttu-id="17ad0-218">Puede que desee toorefer toothis vincular hello tooset [contraseña de DSRM](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="17ad0-218">You may want toorefer toothis link tooset hello [DSRM password](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span></span>

6. <span data-ttu-id="17ad0-219">Asegúrese de que la contraseña y la cuenta de administrador integrada Hola se conocen tooyou.</span><span class="sxs-lookup"><span data-stu-id="17ad0-219">Make sure that hello Built-in Administrator account and password are known tooyou.</span></span> <span data-ttu-id="17ad0-220">Puede desea contraseña de administrador local actual de tooreset hello y asegúrese de que puede usar esta cuenta toosign en tooWindows a través de hello conexión RDP.</span><span class="sxs-lookup"><span data-stu-id="17ad0-220">You may want tooreset hello current local administrator password and make sure that you can use this account toosign in tooWindows through hello RDP connection.</span></span> <span data-ttu-id="17ad0-221">Este permiso de acceso se controla mediante el objeto de directiva de grupo "Permitir el registro a través de servicios de escritorio remoto" Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-221">This access permission is controlled by hello "Allow log on through Remote Desktop Services" Group Policy object.</span></span> <span data-ttu-id="17ad0-222">Puede ver este objeto en el Editor de directivas de grupo Local de hello en:</span><span class="sxs-lookup"><span data-stu-id="17ad0-222">You can view this object in hello Local Group Policy Editor under:</span></span>

    <span data-ttu-id="17ad0-223">Configuración del equipo\Configuración de Windows\Configuración de seguridad\Directivas locales\Asignación de derechos de usuario</span><span class="sxs-lookup"><span data-stu-id="17ad0-223">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment</span></span>

7. <span data-ttu-id="17ad0-224">Compruebe toomake seguro de que no está bloqueando el acceso RDP a través de RDP ni de red de hello las directivas de hello después de AD:</span><span class="sxs-lookup"><span data-stu-id="17ad0-224">Check hello following AD polices toomake sure that you are not blocking your RDP access through RDP nor from hello network:</span></span>

    - <span data-ttu-id="17ad0-225">Equipo de toothis de acceso de configuración de equipo\Configuración de Windows\Configuración seguridad\Directivas locales\Asignación derechos Assignment\Deny de equipo desde la red de Hola</span><span class="sxs-lookup"><span data-stu-id="17ad0-225">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny access toothis computer from hello network</span></span>

    - <span data-ttu-id="17ad0-226">Configuración del equipo\Configuración de Windows\Configuración de seguridad\Directivas locales\Asignación de derechos de usuario\Denegar inicio de sesión a través de Servicios de Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="17ad0-226">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny log on through Remote Desktop Services</span></span>


8. <span data-ttu-id="17ad0-227">Reinicio Hola VM toomake seguro de que Windows todavía funciona correctamente puede tener acceso mediante el uso de la conexión RDP de Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-227">Restart hello VM toomake sure that Windows is still healthy can be reached by using hello RDP connection.</span></span> <span data-ttu-id="17ad0-228">En este momento, puede desee toocreate una máquina virtual en su Hola de seguro local del toomake de Hyper-V que está iniciando completamente la máquina virtual y, a continuación, probar si es accesible de RDP.</span><span class="sxs-lookup"><span data-stu-id="17ad0-228">At this point, you may want toocreate a VM in your local Hyper-V toomake sure hello VM is starting completely and then test whether it is RDP reachable.</span></span>

9. <span data-ttu-id="17ad0-229">Quite los filtros adicionales de la Interfaz de controlador de transporte, como el software que analiza los paquetes TCP o los firewalls adicionales.</span><span class="sxs-lookup"><span data-stu-id="17ad0-229">Remove any extra Transport Driver Interface filters, such as software that analyzes TCP packets or extra firewalls.</span></span> <span data-ttu-id="17ad0-230">También puede ver esto en una fase posterior después de hello que máquina virtual se implementa en Azure si es necesario.</span><span class="sxs-lookup"><span data-stu-id="17ad0-230">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

10. <span data-ttu-id="17ad0-231">Desinstale cualquier otro software de terceros y controlador de componentes de toophysical relacionados o cualquier otra tecnología de virtualización.</span><span class="sxs-lookup"><span data-stu-id="17ad0-231">Uninstall any other third-party software and driver that is related toophysical components or any other virtualization technology.</span></span>

### <a name="install-windows-updates"></a><span data-ttu-id="17ad0-232">Instalación de actualizaciones de Windows</span><span class="sxs-lookup"><span data-stu-id="17ad0-232">Install Windows Updates</span></span>
<span data-ttu-id="17ad0-233">configuración de Hello ideal es demasiado**tiene el nivel de revisión de Hola de máquina de hello en hello más reciente**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-233">hello ideal configuration is too**have hello patch level of hello machine at hello latest**.</span></span> <span data-ttu-id="17ad0-234">Si esto no es posible, asegúrese de que ese Hola siguiendo las actualizaciones están instaladas:</span><span class="sxs-lookup"><span data-stu-id="17ad0-234">If this is not possible, make sure that hello following updates are installed:</span></span>

|                       |                   |           |                                       <span data-ttu-id="17ad0-235">Versión del archivo mínima x64</span><span class="sxs-lookup"><span data-stu-id="17ad0-235">Minimum file version x64</span></span>       |                                      |                                      |                            |
|-------------------------|-------------------|------------------------------------|---------------------------------------------|--------------------------------------|--------------------------------------|----------------------------|
| <span data-ttu-id="17ad0-236">Componente</span><span class="sxs-lookup"><span data-stu-id="17ad0-236">Component</span></span>               | <span data-ttu-id="17ad0-237">Binary</span><span class="sxs-lookup"><span data-stu-id="17ad0-237">Binary</span></span>            | <span data-ttu-id="17ad0-238">Windows 7 y Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="17ad0-238">Windows 7 & Windows Server 2008 R2</span></span> | <span data-ttu-id="17ad0-239">Windows 8 y Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="17ad0-239">Windows 8 & Windows Server 2012</span></span>             | <span data-ttu-id="17ad0-240">Windows 8.1 y Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="17ad0-240">Windows 8.1 & Windows Server 2012 R2</span></span> | <span data-ttu-id="17ad0-241">Windows 10 y Windows Server 2016 RS1</span><span class="sxs-lookup"><span data-stu-id="17ad0-241">Windows 10 & Windows Server 2016 RS1</span></span> | <span data-ttu-id="17ad0-242">Windows 10 RS2</span><span class="sxs-lookup"><span data-stu-id="17ad0-242">Windows 10 RS2</span></span>             |
| <span data-ttu-id="17ad0-243">Almacenamiento</span><span class="sxs-lookup"><span data-stu-id="17ad0-243">Storage</span></span>                 | <span data-ttu-id="17ad0-244">disk.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-244">disk.sys</span></span>          | <span data-ttu-id="17ad0-245">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-245">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="17ad0-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span></span> | <span data-ttu-id="17ad0-247">6.3.9600.18203 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="17ad0-247">6.3.9600.18203 - KB3137061</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="17ad0-248">storport.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-248">storport.sys</span></span>      | <span data-ttu-id="17ad0-249">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-249">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span><span class="sxs-lookup"><span data-stu-id="17ad0-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span></span> | <span data-ttu-id="17ad0-251">6.3.9600.18573 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-251">6.3.9600.18573 - KB4022726</span></span>           | <span data-ttu-id="17ad0-252">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-252">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="17ad0-253">10.0.15063.332</span><span class="sxs-lookup"><span data-stu-id="17ad0-253">10.0.15063.332</span></span>             |
|                         | <span data-ttu-id="17ad0-254">ntfs.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-254">ntfs.sys</span></span>          | <span data-ttu-id="17ad0-255">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-255">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span><span class="sxs-lookup"><span data-stu-id="17ad0-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span></span> | <span data-ttu-id="17ad0-257">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-257">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="17ad0-258">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-258">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="17ad0-259">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="17ad0-259">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="17ad0-260">Iologmsg.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-260">Iologmsg.dll</span></span>      | <span data-ttu-id="17ad0-261">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-261">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-262">6.2.9200.16384 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="17ad0-262">6.2.9200.16384 - KB2995387</span></span>                  | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="17ad0-263">Classpnp.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-263">Classpnp.sys</span></span>      | <span data-ttu-id="17ad0-264">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-264">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="17ad0-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span></span> | <span data-ttu-id="17ad0-266">6.3.9600.18334 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="17ad0-266">6.3.9600.18334 - KB3172614</span></span>           | <span data-ttu-id="17ad0-267">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-267">10.0.14393.953 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="17ad0-268">Volsnap.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-268">Volsnap.sys</span></span>       | <span data-ttu-id="17ad0-269">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-269">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span><span class="sxs-lookup"><span data-stu-id="17ad0-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span></span> | <span data-ttu-id="17ad0-271">6.3.9600.18265 - KB3145384</span><span class="sxs-lookup"><span data-stu-id="17ad0-271">6.3.9600.18265 - KB3145384</span></span>           | -                                    | <span data-ttu-id="17ad0-272">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-272">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-273">partmgr.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-273">partmgr.sys</span></span>       | <span data-ttu-id="17ad0-274">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-274">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-275">6.2.9200.16681 - KB2877114</span><span class="sxs-lookup"><span data-stu-id="17ad0-275">6.2.9200.16681 - KB2877114</span></span>                  | <span data-ttu-id="17ad0-276">6.3.9600.17401 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="17ad0-276">6.3.9600.17401 - KB3000850</span></span>           | <span data-ttu-id="17ad0-277">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-277">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="17ad0-278">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-278">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-279">volmgr.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-279">volmgr.sys</span></span>        |                                    |                                             |                                      |                                      | <span data-ttu-id="17ad0-280">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-280">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-281">Volmgrx.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-281">Volmgrx.sys</span></span>       | <span data-ttu-id="17ad0-282">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-282">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | <span data-ttu-id="17ad0-283">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-283">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-284">Msiscsi.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-284">Msiscsi.sys</span></span>       | <span data-ttu-id="17ad0-285">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-285">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-286">6.2.9200.21006 - KB2955163</span><span class="sxs-lookup"><span data-stu-id="17ad0-286">6.2.9200.21006 - KB2955163</span></span>                  | <span data-ttu-id="17ad0-287">6.3.9600.18624 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-287">6.3.9600.18624 - KB4022726</span></span>           | <span data-ttu-id="17ad0-288">10.0.14393.1066 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-288">10.0.14393.1066 - KB4022715</span></span>          | <span data-ttu-id="17ad0-289">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="17ad0-289">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="17ad0-290">Msdsm.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-290">Msdsm.sys</span></span>         | <span data-ttu-id="17ad0-291">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-291">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-292">6.2.9200.21474 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="17ad0-292">6.2.9200.21474 - KB3046101</span></span>                  | <span data-ttu-id="17ad0-293">6.3.9600.18592 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-293">6.3.9600.18592 - KB4022726</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="17ad0-294">Mpio.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-294">Mpio.sys</span></span>          | <span data-ttu-id="17ad0-295">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-295">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-296">6.2.9200.21190 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="17ad0-296">6.2.9200.21190 - KB3046101</span></span>                  | <span data-ttu-id="17ad0-297">6.3.9600.18616 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-297">6.3.9600.18616 - KB4022726</span></span>           | <span data-ttu-id="17ad0-298">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-298">10.0.14393.1198 - KB4022715</span></span>          | -                          |
|                         | <span data-ttu-id="17ad0-299">Fveapi.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-299">Fveapi.dll</span></span>        | <span data-ttu-id="17ad0-300">6.1.7601.23311 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-300">6.1.7601.23311 - KB3125574</span></span>         | <span data-ttu-id="17ad0-301">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="17ad0-301">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="17ad0-302">6.3.9600.18294 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="17ad0-302">6.3.9600.18294 - KB3172614</span></span>           | <span data-ttu-id="17ad0-303">10.0.14393.576 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-303">10.0.14393.576 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="17ad0-304">Fveapibase.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-304">Fveapibase.dll</span></span>    | <span data-ttu-id="17ad0-305">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-305">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-306">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="17ad0-306">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="17ad0-307">6.3.9600.17415 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="17ad0-307">6.3.9600.17415 - KB3172614</span></span>           | <span data-ttu-id="17ad0-308">10.0.14393.206 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-308">10.0.14393.206 - KB4022715</span></span>           | -                          |
| <span data-ttu-id="17ad0-309">Red</span><span class="sxs-lookup"><span data-stu-id="17ad0-309">Network</span></span>                 | <span data-ttu-id="17ad0-310">netvsc.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-310">netvsc.sys</span></span>        | -                                  | -                                           | -                                    | <span data-ttu-id="17ad0-311">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-311">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="17ad0-312">10.0.15063.250 - KB4020001</span><span class="sxs-lookup"><span data-stu-id="17ad0-312">10.0.15063.250 - KB4020001</span></span> |
|                         | <span data-ttu-id="17ad0-313">mrxsmb10.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-313">mrxsmb10.sys</span></span>      | <span data-ttu-id="17ad0-314">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="17ad0-314">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="17ad0-315">6.2.9200.22108 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-315">6.2.9200.22108 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-316">6.3.9600.18603 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-316">6.3.9600.18603 - KB4022726</span></span>           | <span data-ttu-id="17ad0-317">10.0.14393.479 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-317">10.0.14393.479 - KB4022715</span></span>           | <span data-ttu-id="17ad0-318">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="17ad0-318">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="17ad0-319">mrxsmb20.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-319">mrxsmb20.sys</span></span>      | <span data-ttu-id="17ad0-320">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="17ad0-320">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="17ad0-321">6.2.9200.21548 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-321">6.2.9200.21548 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-322">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-322">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="17ad0-323">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-323">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="17ad0-324">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="17ad0-324">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="17ad0-325">mrxsmb.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-325">mrxsmb.sys</span></span>        | <span data-ttu-id="17ad0-326">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="17ad0-326">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="17ad0-327">6.2.9200.22074 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-327">6.2.9200.22074 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-328">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-328">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="17ad0-329">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-329">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="17ad0-330">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-330">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-331">tcpip.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-331">tcpip.sys</span></span>         | <span data-ttu-id="17ad0-332">6.1.7601.23761 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="17ad0-332">6.1.7601.23761 - KB4022722</span></span>         | <span data-ttu-id="17ad0-333">6.2.9200.22070 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-333">6.2.9200.22070 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-334">6.3.9600.18478 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-334">6.3.9600.18478 - KB4022726</span></span>           | <span data-ttu-id="17ad0-335">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-335">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="17ad0-336">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="17ad0-336">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="17ad0-337">http.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-337">http.sys</span></span>          | <span data-ttu-id="17ad0-338">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-338">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-339">6.2.9200.17285 - KB3042553</span><span class="sxs-lookup"><span data-stu-id="17ad0-339">6.2.9200.17285 - KB3042553</span></span>                  | <span data-ttu-id="17ad0-340">6.3.9600.18574 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-340">6.3.9600.18574 - KB4022726</span></span>           | <span data-ttu-id="17ad0-341">10.0.14393.251 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-341">10.0.14393.251 - KB4022715</span></span>           | <span data-ttu-id="17ad0-342">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="17ad0-342">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="17ad0-343">vmswitch.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-343">vmswitch.sys</span></span>      | <span data-ttu-id="17ad0-344">6.1.7601.23727 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="17ad0-344">6.1.7601.23727 - KB4022719</span></span>         | <span data-ttu-id="17ad0-345">6.2.9200.22117 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-345">6.2.9200.22117 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-346">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-346">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="17ad0-347">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-347">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="17ad0-348">10.0.15063.138</span><span class="sxs-lookup"><span data-stu-id="17ad0-348">10.0.15063.138</span></span>             |
| <span data-ttu-id="17ad0-349">Núcleo</span><span class="sxs-lookup"><span data-stu-id="17ad0-349">Core</span></span>                    | <span data-ttu-id="17ad0-350">ntoskrnl.exe</span><span class="sxs-lookup"><span data-stu-id="17ad0-350">ntoskrnl.exe</span></span>      | <span data-ttu-id="17ad0-351">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="17ad0-351">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="17ad0-352">6.2.9200.22170 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="17ad0-352">6.2.9200.22170 - KB4022718</span></span>                  | <span data-ttu-id="17ad0-353">6.3.9600.18696 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-353">6.3.9600.18696 - KB4022726</span></span>           | <span data-ttu-id="17ad0-354">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-354">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="17ad0-355">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="17ad0-355">10.0.15063.483</span></span>             |
| <span data-ttu-id="17ad0-356">Servicios de Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="17ad0-356">Remote Desktop Services</span></span> | <span data-ttu-id="17ad0-357">rdpcorets.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-357">rdpcorets.dll</span></span>     | <span data-ttu-id="17ad0-358">6.2.9200.21506 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="17ad0-358">6.2.9200.21506 - KB4022719</span></span>         | <span data-ttu-id="17ad0-359">6.2.9200.22104 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="17ad0-359">6.2.9200.22104 - KB4022724</span></span>                  | <span data-ttu-id="17ad0-360">6.3.9600.18619 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-360">6.3.9600.18619 - KB4022726</span></span>           | <span data-ttu-id="17ad0-361">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-361">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="17ad0-362">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-362">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-363">termsrv.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-363">termsrv.dll</span></span>       | <span data-ttu-id="17ad0-364">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-364">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="17ad0-365">6.2.9200.17048 - KB2973501</span><span class="sxs-lookup"><span data-stu-id="17ad0-365">6.2.9200.17048 - KB2973501</span></span>                  | <span data-ttu-id="17ad0-366">6.3.9600.17415 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="17ad0-366">6.3.9600.17415 - KB3000850</span></span>           | <span data-ttu-id="17ad0-367">10.0.14393.0 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-367">10.0.14393.0 - KB4022715</span></span>             | <span data-ttu-id="17ad0-368">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="17ad0-368">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="17ad0-369">termdd.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-369">termdd.sys</span></span>        | <span data-ttu-id="17ad0-370">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-370">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="17ad0-371">win32k.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-371">win32k.sys</span></span>        | <span data-ttu-id="17ad0-372">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="17ad0-372">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="17ad0-373">6.2.9200.22168 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="17ad0-373">6.2.9200.22168 - KB4022718</span></span>                  | <span data-ttu-id="17ad0-374">6.3.9600.18698 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="17ad0-374">6.3.9600.18698 - KB4022726</span></span>           | <span data-ttu-id="17ad0-375">10.0.14393.594 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="17ad0-375">10.0.14393.594 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="17ad0-376">rdpdd.dll</span><span class="sxs-lookup"><span data-stu-id="17ad0-376">rdpdd.dll</span></span>         | <span data-ttu-id="17ad0-377">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-377">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="17ad0-378">rdpwd.sys</span><span class="sxs-lookup"><span data-stu-id="17ad0-378">rdpwd.sys</span></span>         | <span data-ttu-id="17ad0-379">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="17ad0-379">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
| <span data-ttu-id="17ad0-380">Seguridad</span><span class="sxs-lookup"><span data-stu-id="17ad0-380">Security</span></span>                | <span data-ttu-id="17ad0-381">TooWannaCrypt vencimiento</span><span class="sxs-lookup"><span data-stu-id="17ad0-381">Due tooWannaCrypt</span></span> | <span data-ttu-id="17ad0-382">KB4012212</span><span class="sxs-lookup"><span data-stu-id="17ad0-382">KB4012212</span></span>                          | <span data-ttu-id="17ad0-383">KB4012213</span><span class="sxs-lookup"><span data-stu-id="17ad0-383">KB4012213</span></span>                                   | <span data-ttu-id="17ad0-384">KB4012213</span><span class="sxs-lookup"><span data-stu-id="17ad0-384">KB4012213</span></span>                            | <span data-ttu-id="17ad0-385">KB4012606</span><span class="sxs-lookup"><span data-stu-id="17ad0-385">KB4012606</span></span>                            | <span data-ttu-id="17ad0-386">KB4012606</span><span class="sxs-lookup"><span data-stu-id="17ad0-386">KB4012606</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="17ad0-387">KB4012216</span><span class="sxs-lookup"><span data-stu-id="17ad0-387">KB4012216</span></span>                                   |                                      | <span data-ttu-id="17ad0-388">KB4013198</span><span class="sxs-lookup"><span data-stu-id="17ad0-388">KB4013198</span></span>                            | <span data-ttu-id="17ad0-389">KB4013198</span><span class="sxs-lookup"><span data-stu-id="17ad0-389">KB4013198</span></span>                  |
|                         |                   | <span data-ttu-id="17ad0-390">KB4012215</span><span class="sxs-lookup"><span data-stu-id="17ad0-390">KB4012215</span></span>                          | <span data-ttu-id="17ad0-391">KB4012214</span><span class="sxs-lookup"><span data-stu-id="17ad0-391">KB4012214</span></span>                                   | <span data-ttu-id="17ad0-392">KB4012216</span><span class="sxs-lookup"><span data-stu-id="17ad0-392">KB4012216</span></span>                            | <span data-ttu-id="17ad0-393">KB4013429</span><span class="sxs-lookup"><span data-stu-id="17ad0-393">KB4013429</span></span>                            | <span data-ttu-id="17ad0-394">KB4013429</span><span class="sxs-lookup"><span data-stu-id="17ad0-394">KB4013429</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="17ad0-395">KB4012217</span><span class="sxs-lookup"><span data-stu-id="17ad0-395">KB4012217</span></span>                                   |                                      | <span data-ttu-id="17ad0-396">KB4013429</span><span class="sxs-lookup"><span data-stu-id="17ad0-396">KB4013429</span></span>                            | <span data-ttu-id="17ad0-397">KB4013429</span><span class="sxs-lookup"><span data-stu-id="17ad0-397">KB4013429</span></span>                  |
       
### <span data-ttu-id="17ad0-398">Cuando sysprep toouse<a id="step23"></a></span><span class="sxs-lookup"><span data-stu-id="17ad0-398">When toouse sysprep <a id="step23"></a></span></span>    

<span data-ttu-id="17ad0-399">Sysprep es un proceso que pueda ejecutar en una instalación de windows que se restablecerá la instalación de hello del sistema de Hola y proporcionará un "hello rápida", eliminando todos los datos personales y restablezca varios componentes.</span><span class="sxs-lookup"><span data-stu-id="17ad0-399">Sysprep is a process that you could run into a windows installation that will reset hello installation of hello system and will provide an “out of hello box experience” by removing all personal data and resetting several components.</span></span> <span data-ttu-id="17ad0-400">Normalmente hace esto si desea toocreate una plantilla desde la que puede implementar varias otras máquinas virtuales que tienen una configuración específica.</span><span class="sxs-lookup"><span data-stu-id="17ad0-400">You typically do this if you want toocreate a template from which you can deploy several other VMs that have a specific configuration.</span></span> <span data-ttu-id="17ad0-401">Esto se conoce como **imagen generalizada**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-401">This is called a **generalized image**.</span></span>

<span data-ttu-id="17ad0-402">En su lugar, si desea que sólo toocreate una máquina virtual desde un disco, no tienes toouse sysprep.</span><span class="sxs-lookup"><span data-stu-id="17ad0-402">If, instead, you want only toocreate one VM from one disk, you don’t have toouse sysprep.</span></span> <span data-ttu-id="17ad0-403">En esta situación, puede crear simplemente Hola VM de lo que se conoce como un **imagen especializada**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-403">In this situation, you can just create hello VM from what is known as a **specialized image**.</span></span>

<span data-ttu-id="17ad0-404">Para obtener más información acerca de cómo toocreate una máquina virtual desde un disco especializado, vea:</span><span class="sxs-lookup"><span data-stu-id="17ad0-404">For more information about how toocreate a VM from a specialized disk, see:</span></span>

- [<span data-ttu-id="17ad0-405">Creación de una máquina virtual a partir de un disco especializado</span><span class="sxs-lookup"><span data-stu-id="17ad0-405">Create a VM from a specialized disk</span></span>](create-vm-specialized.md)
- <span data-ttu-id="17ad0-406">[Create a VM from a specialized VHD disk](https://azure.microsoft.com/resources/templates/201-vm-specialized-vhd/) (Creación de una máquina virtual a partir de un disco duro virtual especializado)</span><span class="sxs-lookup"><span data-stu-id="17ad0-406">[Create a VM from a specialized VHD disk](https://azure.microsoft.com/resources/templates/201-vm-specialized-vhd/)</span></span>

<span data-ttu-id="17ad0-407">Si desea que toocreate una imagen generalizada, deberá toorun sysprep.</span><span class="sxs-lookup"><span data-stu-id="17ad0-407">If you want toocreate a generalized image, you need toorun sysprep.</span></span> <span data-ttu-id="17ad0-408">Para obtener más información acerca de Sysprep, consulte [cómo tooUse Sysprep: Introducción](http://technet.microsoft.com/library/bb457073.aspx).</span><span class="sxs-lookup"><span data-stu-id="17ad0-408">For more information about Sysprep, see [How tooUse Sysprep: An Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span></span> 

<span data-ttu-id="17ad0-409">No todos los roles o aplicaciones instalados en un equipo basado en Windows admiten esta generalización.</span><span class="sxs-lookup"><span data-stu-id="17ad0-409">Not every role or application that’s installed on a Windows-based computer supports this generalization.</span></span> <span data-ttu-id="17ad0-410">Por lo que antes de que se ejecute este procedimiento, consulte toohello siguiente artículo toomake seguro de que ese rol Hola de ese equipo es compatible con sysprep.</span><span class="sxs-lookup"><span data-stu-id="17ad0-410">So before you run this procedure, refer toohello following article toomake sure that hello role of that computer is supported by sysprep.</span></span> <span data-ttu-id="17ad0-411">Para obtener más información, consulte [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles) (Compatibilidad de Sysprep con los roles de servidor).</span><span class="sxs-lookup"><span data-stu-id="17ad0-411">For more information, [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span></span>

### <a name="steps-toogeneralize-a-vhd"></a><span data-ttu-id="17ad0-412">Pasos toogeneralize un disco duro virtual</span><span class="sxs-lookup"><span data-stu-id="17ad0-412">Steps toogeneralize a VHD</span></span>

>[!NOTE]
> <span data-ttu-id="17ad0-413">Después de ejecutar sysprep.exe como Hola especificado de pasos, desactive la opción Hola VM y no se vuelve a activar hasta que cree una imagen de ella en Azure.</span><span class="sxs-lookup"><span data-stu-id="17ad0-413">After you run sysprep.exe as specified  in hello following steps, turn off hello VM, and do not turn it back on until you create an image from it in Azure.</span></span>

1. <span data-ttu-id="17ad0-414">Inicie sesión en toohello VM de Windows.</span><span class="sxs-lookup"><span data-stu-id="17ad0-414">Sign in toohello Windows VM.</span></span>
2. <span data-ttu-id="17ad0-415">Ejecute **Símbolo del sistema** como administrador.</span><span class="sxs-lookup"><span data-stu-id="17ad0-415">Run **Command Prompt** as an administrator.</span></span> 
3. <span data-ttu-id="17ad0-416">Cambie el directorio de Hola a: **%windir%\system32\sysprep**y, a continuación, ejecute **sysprep.exe**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-416">Change hello directory to: **%windir%\system32\sysprep**, and then run **sysprep.exe**.</span></span>
3. <span data-ttu-id="17ad0-417">Hola **herramienta de preparación del sistema** cuadro de diálogo, seleccione **sistema Out-of-Box experiencia inmediata (OOBE)**y asegúrese de que ese hello **generalizar** casilla está activada.</span><span class="sxs-lookup"><span data-stu-id="17ad0-417">In hello **System Preparation Tool** dialog box, select **Enter System Out-of-Box Experience (OOBE)**, and make sure that hello **Generalize** check box is selected.</span></span>

    ![Herramienta de preparación del sistema](media/prepare-for-upload-vhd-image/syspre.png)
4. <span data-ttu-id="17ad0-419">En **Opciones de apagado**, seleccione **Apagar**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-419">In **Shutdown Options**, select **Shutdown**.</span></span>
5. <span data-ttu-id="17ad0-420">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="17ad0-420">Click **OK**.</span></span>
6. <span data-ttu-id="17ad0-421">Cuando Sysprep finalice, cierre Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-421">When Sysprep completes, shut down hello VM.</span></span> <span data-ttu-id="17ad0-422">No utilice **reiniciar** tooshut hacia abajo Hola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-422">Do not use **Restart** tooshut down hello VM.</span></span>
7. <span data-ttu-id="17ad0-423">Ahora hello VHD es listo toobe cargado.</span><span class="sxs-lookup"><span data-stu-id="17ad0-423">Now hello VHD is ready toobe uploaded.</span></span> <span data-ttu-id="17ad0-424">Para obtener más información acerca de cómo toocreate una máquina virtual desde un disco generalizado, consulte [cargar un disco duro virtual generalizado y utilizar toocreate un nuevas máquinas virtuales en Azure](sa-upload-generalized.md).</span><span class="sxs-lookup"><span data-stu-id="17ad0-424">For more information about how toocreate a VM from a generalized disk, see [Upload a generalized VHD and use it toocreate a new VMs in Azure](sa-upload-generalized.md).</span></span>


## <a name="complete-recommended-configurations"></a><span data-ttu-id="17ad0-425">Realice las configuraciones recomendadas</span><span class="sxs-lookup"><span data-stu-id="17ad0-425">Complete recommended configurations</span></span>
<span data-ttu-id="17ad0-426">Hola después de la configuración no afectan a la carga del disco duro virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-426">hello following settings do not affect VHD uploading.</span></span> <span data-ttu-id="17ad0-427">Sin embargo, se recomienda firmemente que los configure.</span><span class="sxs-lookup"><span data-stu-id="17ad0-427">However, we strongly recommend that you configured them.</span></span>

* <span data-ttu-id="17ad0-428">Instalar hello [Azure VM Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="17ad0-428">Install hello [Azure VMs Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="17ad0-429">A continuación, puede habilitar las extensiones de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="17ad0-429">Then you can enable VM extensions.</span></span> <span data-ttu-id="17ad0-430">las extensiones de VM de Hello implementan la mayor parte de funcionalidad crítica de Hola que podría desee toouse con las máquinas virtuales como el restablecimiento de contraseñas, configuración de RDP y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="17ad0-430">hello VM extensions implement most of hello critical functionality that you might want toouse with your VMs such as resetting passwords, configuring RDP, and so on.</span></span> <span data-ttu-id="17ad0-431">Para más información, consulte:</span><span class="sxs-lookup"><span data-stu-id="17ad0-431">For more information, see:</span></span>

    - <span data-ttu-id="17ad0-432">[VM Agent and Extensions – Part 1](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/) (Agente de VM y extensiones: parte 1)</span><span class="sxs-lookup"><span data-stu-id="17ad0-432">[VM Agent and Extensions – Part 1](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/)</span></span>
    - <span data-ttu-id="17ad0-433">[VM Agent and Extensions – Part 2](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/) (Agente de VM y extensiones: parte 2)</span><span class="sxs-lookup"><span data-stu-id="17ad0-433">[VM Agent and Extensions – Part 2](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/)</span></span>
* <span data-ttu-id="17ad0-434">registro de volcado de memoria de Hello puede ser útil para solucionar problemas de bloqueo de Windows.</span><span class="sxs-lookup"><span data-stu-id="17ad0-434">hello Dump log can be helpful in troubleshooting Windows crash issues.</span></span> <span data-ttu-id="17ad0-435">Habilitar la recopilación de registro de hello volcado de memoria:</span><span class="sxs-lookup"><span data-stu-id="17ad0-435">Enable hello Dump log collection:</span></span>
  
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "AutoReboot" -Value 0 -Type DWord
    New-Item -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps'
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
    <span data-ttu-id="17ad0-436">Si recibe errores durante alguno de los procedimientos de hello los pasos de este artículo, esto significa que las claves del registro de hello ya existe.</span><span class="sxs-lookup"><span data-stu-id="17ad0-436">If you receive any errors during any of hello procedural steps in this article, this means that hello registry keys already exists.</span></span> <span data-ttu-id="17ad0-437">En esta situación, utilice Hola siguientes comandos en su lugar:</span><span class="sxs-lookup"><span data-stu-id="17ad0-437">In this situation, use hello following commands instead:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
*  <span data-ttu-id="17ad0-438">Después de crea Hola VM en Azure, se recomienda colocar el archivo de paginación de hello en el rendimiento de tooimprove de volumen de "Unidad Temporal" Hola.</span><span class="sxs-lookup"><span data-stu-id="17ad0-438">After hello VM is created in Azure, we recommend that you put hello pagefile on hello ”Temporal drive” volume tooimprove performance.</span></span> <span data-ttu-id="17ad0-439">Puede configurar esto como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="17ad0-439">You can set up this as follows:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management' -name "PagingFiles" -Value "D:\pagefile"
    ```
<span data-ttu-id="17ad0-440">Si no hay ningún disco de datos que está adjunto toohello VM, letra de unidad del volumen de la unidad Temporal de hello suele ser "D."</span><span class="sxs-lookup"><span data-stu-id="17ad0-440">If there’s any data disk that is attached toohello VM, hello Temporal drive volume's drive letter is typically "D."</span></span> <span data-ttu-id="17ad0-441">Esta designación podría ser diferente, dependiendo del número de Hola de unidades de disco disponibles y la configuración de Hola que realice.</span><span class="sxs-lookup"><span data-stu-id="17ad0-441">This designation could be different, depending on hello number of available drives and hello settings that you  make.</span></span>

## <a name="next-steps"></a><span data-ttu-id="17ad0-442">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="17ad0-442">Next steps</span></span>
* [<span data-ttu-id="17ad0-443">Cargar un tooAzure de imagen de máquina virtual de Windows para las implementaciones del Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="17ad0-443">Upload a Windows VM image tooAzure for Resource Manager deployments</span></span>](upload-generalized-managed.md)


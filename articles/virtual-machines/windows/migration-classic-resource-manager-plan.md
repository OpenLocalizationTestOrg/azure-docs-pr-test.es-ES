---
title: "Planificación de la migración de recursos de IaaS del modelo clásico a Azure Resource Manager | Microsoft Docs"
description: "Planificación de la migración de recursos de IaaS del modelo clásico a Azure Resource Manager"
services: virtual-machines-windows
documentationcenter: 
author: singhkays
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 78492a2c-2694-4023-a7b8-c97d3708dcb7
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 04/01/2017
ms.author: kasing
ms.openlocfilehash: db23eba9ff8debd5268cd02bc4f37c4e6501bfac
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/11/2017
---
# <a name="planning-for-migration-of-iaas-resources-from-classic-to-azure-resource-manager"></a><span data-ttu-id="36f2b-103">Planificación de la migración de recursos de IaaS del modelo clásico a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-103">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>
<span data-ttu-id="36f2b-104">Aunque Azure Resource Manager ofrece muchas características increíbles, es fundamental planear la trayectoria de migración para asegurarse de que el proceso se desarrolla con facilidad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-104">While Azure Resource Manager offers many amazing features, it is critical to plan out your migration journey to make sure things go smoothly.</span></span> <span data-ttu-id="36f2b-105">Dedicar tiempo a la planificación garantizará que no se planteen problemas al ejecutar las actividades de migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-105">Spending time on planning will ensure that you do not encounter issues while executing migration activities.</span></span>

> [!NOTE]
> <span data-ttu-id="36f2b-106">El equipo de asesoramiento al cliente de Azure y los arquitectos de soluciones en la nube han contribuido significativamente en la elaboración de la guía siguiente en colaboración con los clientes en relación con la migración de entornos grandes.</span><span class="sxs-lookup"><span data-stu-id="36f2b-106">The following guidance was heavily contributed to by the Azure Customer Advisory team and Cloud Solution architects working with customers on migrating large environments.</span></span> <span data-ttu-id="36f2b-107">Habida cuenta de que este documento estará sujeto a actualizaciones continuas a medida que surjan nuevos patrones de éxito, resulta conveniente consultarlo de vez en cuando para ver si existen nuevas recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="36f2b-107">As such this document will continue to get updated as new patterns of success emerge, so check back from time to time to see if there are any new recommendations.</span></span>

<span data-ttu-id="36f2b-108">La trayectoria de migración consta de cuatro fases generales:</span><span class="sxs-lookup"><span data-stu-id="36f2b-108">There are four general phases of the migration journey:</span></span><br>

![Fases de migración](../media/virtual-machines-windows-migration-classic-resource-manager/plan-labtest-migrate-beyond.png)

## <a name="plan"></a><span data-ttu-id="36f2b-110">Plan</span><span class="sxs-lookup"><span data-stu-id="36f2b-110">Plan</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="36f2b-111">Consideraciones técnicas y compromisos</span><span class="sxs-lookup"><span data-stu-id="36f2b-111">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="36f2b-112">En función de la envergadura de los requisitos técnicos, de las zonas geográficas y de las prácticas operativas, debería tener en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="36f2b-112">Depending on your technical requirements size, geographies and operational practices, you might want to consider:</span></span>

1. <span data-ttu-id="36f2b-113">¿Por qué le interesa contar con Azure Resource Manager en su organización?</span><span class="sxs-lookup"><span data-stu-id="36f2b-113">Why is Azure Resource Manager desired for your organization?</span></span>  <span data-ttu-id="36f2b-114">¿Por qué motivos empresariales desea realizar una migración?</span><span class="sxs-lookup"><span data-stu-id="36f2b-114">What are the business reasons for a migration?</span></span>
2. <span data-ttu-id="36f2b-115">¿Cuáles son las razones técnicas para disponer de Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="36f2b-115">What are the technical reasons for Azure Resource Manager?</span></span>  <span data-ttu-id="36f2b-116">¿De qué servicios adicionales de Azure desearía beneficiarse, si procede?</span><span class="sxs-lookup"><span data-stu-id="36f2b-116">What (if any) additional Azure services would you like to leverage?</span></span>
3. <span data-ttu-id="36f2b-117">¿Qué aplicación o conjuntos de máquinas virtuales se incluyen en la migración?</span><span class="sxs-lookup"><span data-stu-id="36f2b-117">Which application (or sets of virtual machines) is included in the migration?</span></span>
4. <span data-ttu-id="36f2b-118">¿Qué escenarios son compatibles con la API de migración?</span><span class="sxs-lookup"><span data-stu-id="36f2b-118">Which scenarios are supported with the migration API?</span></span>  <span data-ttu-id="36f2b-119">Revise las [configuraciones y características no admitidas](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span><span class="sxs-lookup"><span data-stu-id="36f2b-119">Review the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span></span>
5. <span data-ttu-id="36f2b-120">¿Los equipos operativos ahora admiten aplicaciones y máquinas virtuales tanto en el modelo clásico como en Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="36f2b-120">Will your operational teams now support applications/VMs in both Classic and Azure Resource Manager?</span></span>
6. <span data-ttu-id="36f2b-121">¿Cómo Azure Resource Manager cambia los procesos de creación de informes, la supervisión, la administración y la implementación de máquinas virtuales, en caso de que sea posible?</span><span class="sxs-lookup"><span data-stu-id="36f2b-121">How (if at all) does Azure Resource Manager change your VM deployment, management, monitoring, and reporting processes?</span></span>  <span data-ttu-id="36f2b-122">¿Es necesario actualizar los scripts de implementación?</span><span class="sxs-lookup"><span data-stu-id="36f2b-122">Do your deployment scripts need to be updated?</span></span>
7. <span data-ttu-id="36f2b-123">¿Cuál es el plan de comunicaciones para avisar a las partes interesadas (usuarios finales, propietarios de aplicaciones y propietarios de infraestructuras)?</span><span class="sxs-lookup"><span data-stu-id="36f2b-123">What is the communications plan to alert stakeholders (end users, application owners, and infrastructure owners)?</span></span>
8. <span data-ttu-id="36f2b-124">Según la complejidad del entorno, ¿debe haber un período de mantenimiento durante el cual la aplicación no está disponible para los usuarios finales y los propietarios de aplicaciones?</span><span class="sxs-lookup"><span data-stu-id="36f2b-124">Depending on the complexity of the environment, should there be a maintenance period where the application is unavailable to end users and to application owners?</span></span>  <span data-ttu-id="36f2b-125">En su caso, ¿durante cuánto tiempo?</span><span class="sxs-lookup"><span data-stu-id="36f2b-125">If so, for how long?</span></span>
9. <span data-ttu-id="36f2b-126">¿Cuál es el plan de aprendizaje para asegurarse de que las partes interesadas conocen y dominan Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="36f2b-126">What is the training plan to ensure stakeholders are knowledgeable and proficient in Azure Resource Manager?</span></span>
10. <span data-ttu-id="36f2b-127">¿Cuál es el plan de administración de programas o de proyectos para la migración?</span><span class="sxs-lookup"><span data-stu-id="36f2b-127">What is the program management or project management plan for the migration?</span></span>
11. <span data-ttu-id="36f2b-128">¿Cuáles son las escalas de tiempo para la migración de Azure Resource Manager y para otros mapas de rutas tecnológicos relacionados?</span><span class="sxs-lookup"><span data-stu-id="36f2b-128">What are the timelines for the Azure Resource Manager migration and other related technology road maps?</span></span>  <span data-ttu-id="36f2b-129">¿Están perfectamente alineados?</span><span class="sxs-lookup"><span data-stu-id="36f2b-129">Are they optimally aligned?</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="36f2b-130">Patrones de éxito</span><span class="sxs-lookup"><span data-stu-id="36f2b-130">Patterns of success</span></span>

<span data-ttu-id="36f2b-131">Los clientes de éxito disponen de planes detallados en los que se abordan, documentan y administran las preguntas anteriores.</span><span class="sxs-lookup"><span data-stu-id="36f2b-131">Successful customers have detailed plans where the preceding questions are discussed, documented and governed.</span></span>  <span data-ttu-id="36f2b-132">Asegúrese de que los planes de migración se comunican de forma amplia a los patrocinadores y a las partes interesadas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-132">Ensure the migration plans are broadly communicated to sponsors and stakeholders.</span></span>  <span data-ttu-id="36f2b-133">Adquiera conocimientos sobre las opciones de migración; se recomienda leer este documento de migración a continuación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-133">Equip yourself with knowledge about your migration options; reading through this migration document set below is highly recommended.</span></span>

* [<span data-ttu-id="36f2b-134">Información general sobre la migración compatible con la plataforma de recursos de IaaS desde el modelo de implementación clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-134">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-135">Profundización técnica en la migración compatible con la plataforma de la implementación clásica a la de Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-135">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* <span data-ttu-id="36f2b-136">[Planning for migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Planificación de la migración de recursos de IaaS del modelo clásico a Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="36f2b-136">[Planning for migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="36f2b-137">Migración de recursos de IaaS de la implementación clásica a Resource Manager con Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="36f2b-137">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-138">Migración de recursos de IaaS de la implementación clásica a Azure Resource Manager con la CLI de Azure</span><span class="sxs-lookup"><span data-stu-id="36f2b-138">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-139">Herramientas de la comunidad para ayudar con la migración de recursos de IaaS de la versión clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-139">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-140">Revisión de los errores más comunes en la migración</span><span class="sxs-lookup"><span data-stu-id="36f2b-140">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-141">Revisión de las preguntas más frecuentes acerca de cómo migrar recursos de IaaS de la versión clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-141">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="36f2b-142">Errores que hay que evitar</span><span class="sxs-lookup"><span data-stu-id="36f2b-142">Pitfalls to avoid</span></span>

- <span data-ttu-id="36f2b-143">Errores de planificación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-143">Failure to plan.</span></span>  <span data-ttu-id="36f2b-144">Los pasos tecnológicos de esta migración se han comprobado y el resultado es predecible.</span><span class="sxs-lookup"><span data-stu-id="36f2b-144">The technology steps of this migration are proven and the outcome is predictable.</span></span>
- <span data-ttu-id="36f2b-145">En todos los escenarios se tendrá en cuenta la suposición de que la plataforma admite la API de migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-145">Assumption that the platform supported migration API will account for all scenarios.</span></span> <span data-ttu-id="36f2b-146">Leer las [configuraciones y características no admitidas](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) para saber qué escenarios se admiten.</span><span class="sxs-lookup"><span data-stu-id="36f2b-146">Read the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) to understand what scenarios are supported.</span></span>
- <span data-ttu-id="36f2b-147">Ausencia de planificación de interrupciones potenciales de la aplicación para los usuarios finales.</span><span class="sxs-lookup"><span data-stu-id="36f2b-147">Not planning potential application outage for end users.</span></span>  <span data-ttu-id="36f2b-148">Planee suficiente búfer para advertir a los usuarios finales del tiempo durante el cual la aplicación posiblemente no estará disponible.</span><span class="sxs-lookup"><span data-stu-id="36f2b-148">Plan enough buffer to adequately warn end users of potentially unavailable application time.</span></span>


## <a name="lab-test"></a><span data-ttu-id="36f2b-149">Análisis de laboratorio</span><span class="sxs-lookup"><span data-stu-id="36f2b-149">Lab Test</span></span>

<span data-ttu-id="36f2b-150">**Replicación de un entorno y realización de una migración de prueba**</span><span class="sxs-lookup"><span data-stu-id="36f2b-150">**Replicate your environment and do a test migration**</span></span>
  > [!NOTE]
  > <span data-ttu-id="36f2b-151">La replicación exacta de un entorno existente se ejecuta mediante una herramienta en la que ha contribuido la comunidad que no es compatible oficialmente con el Soporte técnico de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="36f2b-151">Exact replication of your existing environment is executed by using a community-contributed tool which is not officially supported by Microsoft Support.</span></span> <span data-ttu-id="36f2b-152">Por lo tanto, se trata de un paso **opcional**, pero es la mejor manera de encontrar los problemas sin tocar los entornos de producción.</span><span class="sxs-lookup"><span data-stu-id="36f2b-152">Therefore, it is an **optional** step but it is the best way to find out issues without touching your production environments.</span></span> <span data-ttu-id="36f2b-153">Si no tiene la opción de usar una herramienta en la que ha contribuido la comunidad, lea la recomendación Simulacro de validación, preparación y anulación a continuación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-153">If using a community-contributed tool is not an option, then read about the Validate/Prepare/Abort Dry Run recommendation below.</span></span>
  >

  <span data-ttu-id="36f2b-154">Realizar un análisis de laboratorio de un escenario exacto (proceso, red y almacenamiento) es la mejor forma de asegurar una migración sin problemas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-154">Conducting a lab test of your exact scenario (compute, networking, and storage) is the best way to ensure a smooth migration.</span></span> <span data-ttu-id="36f2b-155">Esto le ayudará a garantizar:</span><span class="sxs-lookup"><span data-stu-id="36f2b-155">This will help ensure:</span></span>

  - <span data-ttu-id="36f2b-156">Que dispone para el análisis de un laboratorio totalmente independiente o de un entorno existente que no sea de producción.</span><span class="sxs-lookup"><span data-stu-id="36f2b-156">A wholly separate lab or an existing non-production environment to test.</span></span> <span data-ttu-id="36f2b-157">Se recomienda un laboratorio completamente independiente que se pueda migrar varias veces y que se pueda modificar de forma destructiva.</span><span class="sxs-lookup"><span data-stu-id="36f2b-157">We recommend a wholly separate lab that can be migrated repeatedly and can be destructively modified.</span></span>  <span data-ttu-id="36f2b-158">A continuación se indican los scripts para recopilar e hidratar metadatos de suscripciones reales.</span><span class="sxs-lookup"><span data-stu-id="36f2b-158">Scripts to collect/hydrate metadata from the real subscriptions are listed below.</span></span>
  - <span data-ttu-id="36f2b-159">Es una buena idea crear el laboratorio en una suscripción independiente.</span><span class="sxs-lookup"><span data-stu-id="36f2b-159">It's a good idea to create the lab in a separate subscription.</span></span> <span data-ttu-id="36f2b-160">El motivo es que el laboratorio se desactivará varias veces, por lo que disponer de una suscripción aislada e independiente reducirá la posibilidad de eliminar por error cualquier elemento real.</span><span class="sxs-lookup"><span data-stu-id="36f2b-160">The reason is that the lab will be torn down repeatedly, and having a separate, isolated subscription will reduce the chance that something real will get accidentally deleted.</span></span>

  <span data-ttu-id="36f2b-161">Esto puede realizarse con la herramienta AsmMetadataParser.</span><span class="sxs-lookup"><span data-stu-id="36f2b-161">This can be accomplished by using the AsmMetadataParser tool.</span></span> <span data-ttu-id="36f2b-162">[Aquí puede encontrar más información sobre esta herramienta](https://github.com/Azure/classic-iaas-resourcemanager-migration/tree/master/AsmToArmMigrationApiToolset).</span><span class="sxs-lookup"><span data-stu-id="36f2b-162">[Read more about this tool here](https://github.com/Azure/classic-iaas-resourcemanager-migration/tree/master/AsmToArmMigrationApiToolset)</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="36f2b-163">Patrones de éxito</span><span class="sxs-lookup"><span data-stu-id="36f2b-163">Patterns of success</span></span>

<span data-ttu-id="36f2b-164">A continuación se indican problemas detectados en muchas de las migraciones más grandes.</span><span class="sxs-lookup"><span data-stu-id="36f2b-164">The following were issues discovered in many of the larger migrations.</span></span> <span data-ttu-id="36f2b-165">No se trata de una lista exhaustiva, por lo que debe remitirse a [Configuraciones y características no admitidas](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) para más detalles.</span><span class="sxs-lookup"><span data-stu-id="36f2b-165">This is not an exhaustive list and you should refer to the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) for more detail.</span></span>  <span data-ttu-id="36f2b-166">Puede encontrarse o no con estos problemas técnicos, pero, de plantearse, podrá tener una experiencia más fluida si los soluciona antes de intentar realizar la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-166">You may or may not encounter these technical issues but if you do solving these before attempting migration will ensure a smoother experience.</span></span>

- <span data-ttu-id="36f2b-167">**Realice un simulacro de validación, preparación y anulación**: se trata quizás del paso más importante para asegurarse de que la migración del modelo clásico a Azure Resource Manager se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="36f2b-167">**Do a Validate/Prepare/Abort Dry Run** -  This is perhaps the most important step to ensure Classic to Azure Resource Manager migration success.</span></span> <span data-ttu-id="36f2b-168">La API de migración consta de tres pasos principales: validación, preparación y confirmación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-168">The migration API has three main steps: Validate, Prepare and Commit.</span></span> <span data-ttu-id="36f2b-169">Con la validación se leerá el estado del entorno clásico y se devolverá un resultado de todos los problemas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-169">Validate will read the state of your classic environment and return a result of all issues.</span></span> <span data-ttu-id="36f2b-170">Sin embargo, como algunos problemas pueden existir en la pila de Azure Resource Manager, la validación puede no detectarlo todo.</span><span class="sxs-lookup"><span data-stu-id="36f2b-170">However, because some issues might exist in the Azure Resource Manager stack, Validate will not catch everything.</span></span> <span data-ttu-id="36f2b-171">En el paso siguiente del proceso de migración, la preparación ayudará a exponer los problemas detectados.</span><span class="sxs-lookup"><span data-stu-id="36f2b-171">The next step in migration process, Prepare will help expose those issues.</span></span> <span data-ttu-id="36f2b-172">Con la preparación, todos los metadatos se moverán del modelo clásico a Azure Resource Manager, pero no se confirmará la migración ni se eliminará ni modificará nada del modelo clásico.</span><span class="sxs-lookup"><span data-stu-id="36f2b-172">Prepare will move the metadata from Classic to Azure Resource Manager, but will not commit the move, and will not remove or change anything on the Classic side.</span></span> <span data-ttu-id="36f2b-173">El simulacro conlleva preparar la migración y después anular (**no confirmar**) la preparación de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-173">The dry run involves preparing the migration, then aborting (**not committing**) the migration prepare.</span></span> <span data-ttu-id="36f2b-174">El objetivo del simulacro de validación, preparación y anulación es que todos los metadatos se encuentren en la pila de Azure Resource Manager, para después examinarlos (*mediante programación o en el portal*) y verificar que todo se ha migrado correctamente, pero también con el propósito de abordar los problemas técnicos.</span><span class="sxs-lookup"><span data-stu-id="36f2b-174">The goal of validate/prepare/abort dry run is to see all of the metadata in the Azure Resource Manager stack, examine it (*programmatically or in Portal*), and verify that everything migrates correctly, and work through technical issues.</span></span>  <span data-ttu-id="36f2b-175">También le permitirá hacerse una idea de la duración de la migración, a fin de que pueda planear el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-175">It will also give you a sense of migration duration so you can plan for downtime accordingly.</span></span>  <span data-ttu-id="36f2b-176">Un simulacro de validación, preparación y anulación no causa ningún tiempo de inactividad al usuario, por lo que no produce ninguna interrupción del uso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-176">A validate/prepare/abort does not cause any user downtime; therefore, it is non-disruptive to application usage.</span></span>
  - <span data-ttu-id="36f2b-177">Será necesario solucionar los puntos siguientes antes del simulacro, aunque, en caso de omitirlos, la prueba de simulacro eliminará con seguridad estos pasos de preparación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-177">The items below will need to be solved before the dry run, but a dry run test will also safely flush out these preparation steps if they are missed.</span></span> <span data-ttu-id="36f2b-178">Durante la migración empresarial, se ha observado que el simulacro es una forma segura e inestimable de garantizar la preparación de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-178">During enterprise migration, we've found the dry run to be a safe and invaluable way to ensure migration readiness.</span></span>
  - <span data-ttu-id="36f2b-179">Cuando la preparación se encuentra en ejecución, el plano de control (operaciones de administración de Azure) se bloquearán en toda la red virtual, por lo que no se puede realizar ninguna modificación en los metadatos de máquinas virtuales durante el proceso de validación, preparación y anulación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-179">When prepare is running, the control plane (Azure management operations) will be locked for the whole virtual network, so no changes can be made to VM metadata during validate/prepare/abort.</span></span>  <span data-ttu-id="36f2b-180">No obstante, en caso contrario, ninguna función de la aplicación (Escritorio remoto, uso de máquina virtual, etc.) se verá afectada.</span><span class="sxs-lookup"><span data-stu-id="36f2b-180">But otherwise any application function (RD, VM usage, etc.) will be unaffected.</span></span>  <span data-ttu-id="36f2b-181">Los usuarios de las máquinas virtuales no sabrán que el simulacro está en ejecución.</span><span class="sxs-lookup"><span data-stu-id="36f2b-181">Users of the VMs will not know that the dry run is being executed.</span></span>

- <span data-ttu-id="36f2b-182">**VPN y circuitos ExpressRoute**.</span><span class="sxs-lookup"><span data-stu-id="36f2b-182">**Express Route Circuits and VPN**.</span></span> <span data-ttu-id="36f2b-183">Actualmente no se pueden migrar las puertas de enlace de ExpressRoute con vínculos de autorización sin tiempos de inactividad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-183">Currently Express Route Gateways with authorization links cannot be migrated without downtime.</span></span> <span data-ttu-id="36f2b-184">Para consultar una solución alternativa, vea [Migración de circuitos ExpressRoute y las redes virtuales asociadas del modelo de implementación clásica a Resource Manager](../../expressroute/expressroute-migration-classic-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="36f2b-184">For the workaround, see [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../../expressroute/expressroute-migration-classic-resource-manager.md).</span></span>

- <span data-ttu-id="36f2b-185">**Extensiones de máquina virtual**: las extensiones de máquina virtual posiblemente son uno de los obstáculos más importantes para migrar las máquinas virtuales en ejecución.</span><span class="sxs-lookup"><span data-stu-id="36f2b-185">**VM Extensions** - Virtual Machine extensions are potentially one of the biggest roadblocks to migrating running VMs.</span></span> <span data-ttu-id="36f2b-186">La corrección de extensiones de máquina virtual puede tardar de 1 a 2 días, por lo que es necesario realizar la planificación teniendo esto en cuenta.</span><span class="sxs-lookup"><span data-stu-id="36f2b-186">Remediation of VM Extensions could take upwards of 1-2 days, so plan accordingly.</span></span>  <span data-ttu-id="36f2b-187">Se precisa de un agente de Azure operativo para informar del estado de las extensiones de las máquinas virtuales en ejecución.</span><span class="sxs-lookup"><span data-stu-id="36f2b-187">A working Azure agent is needed to report back VM Extension status of running VMs.</span></span> <span data-ttu-id="36f2b-188">Si se notifica un estado incorrecto de una máquina virtual en ejecución, la migración se detendrá.</span><span class="sxs-lookup"><span data-stu-id="36f2b-188">If the status comes back as bad for a running VM, this will halt migration.</span></span> <span data-ttu-id="36f2b-189">El agente no necesita estar operativo para habilitar la migración, pero, si existen extensiones en la máquina virtual, se necesitará un agente operativo Y una conectividad saliente a Internet con DNS para que la migración progrese.</span><span class="sxs-lookup"><span data-stu-id="36f2b-189">The agent itself does not need to be in working order to enable migration, but if extensions exist on the VM, then both a working agent AND outbound internet connectivity (with DNS) will be needed for migration to move forward.</span></span>
  - <span data-ttu-id="36f2b-190">Si se pierde la conectividad con un servidor DNS durante la migración, hay que eliminar todas las extensiones de máquina virtual , excepto BGInfo versión 1. \*, de todas las máquinas virtuales antes de preparar la migración y, después, volver a agregarlas a la máquina virtual después de la migración de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-190">If connectivity to a DNS server is lost during migration, all VM Extensions except BGInfo version 1.\* need to first be removed from every VM before migration prepare, and subsequently re-added back to the VM after Azure Resource Manager migration.</span></span>  <span data-ttu-id="36f2b-191">**Esto solo se aplica a las máquinas virtuales en ejecución.**</span><span class="sxs-lookup"><span data-stu-id="36f2b-191">**This is only for VMs that are running.**</span></span>  <span data-ttu-id="36f2b-192">Si las máquinas virtuales se detienen cuando están desasignadas, no es necesario eliminar las extensiones de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="36f2b-192">If the VMs are stopped deallocated, VM Extensions do not need to be removed.</span></span>

  > [!NOTE]
  > <span data-ttu-id="36f2b-193">Muchas extensiones, como la supervisión de Azure Diagnósticos y Security Center, se reinstalarán automáticamente después de la migración, por lo que su eliminación no plantea ningún problema.</span><span class="sxs-lookup"><span data-stu-id="36f2b-193">Many extensions like Azure diagnostics and security center monitoring will reinstall themselves after migration, so removing them is not a problem.</span></span>

  - <span data-ttu-id="36f2b-194">Además, asegúrese de que los Grupos de seguridad de red no restringen el acceso saliente a Internet.</span><span class="sxs-lookup"><span data-stu-id="36f2b-194">In addition, make sure Network Security Groups are not restricting outbound internet access.</span></span> <span data-ttu-id="36f2b-195">Esto puede suceder con algunas configuraciones de Grupos de seguridad de red.</span><span class="sxs-lookup"><span data-stu-id="36f2b-195">This can happen with some Network Security Groups configurations.</span></span> <span data-ttu-id="36f2b-196">El acceso saliente a Internet, y DNS, resulta necesario para migrar las extensiones de máquina virtual a Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-196">Outbound internet access (and DNS) is needed for VM Extensions to be migrated to Azure Resource Manager.</span></span>
  - <span data-ttu-id="36f2b-197">Existen dos versiones de la extensión BGInfo, que se denominan versiones 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="36f2b-197">Two versions of the BGInfo extension exist and are called versions 1 and 2.</span></span>  

      - <span data-ttu-id="36f2b-198">Si la máquina virtual usa la extensión de la versión 1 de BGInfo, dicha extensión se puede dejar tal cual.</span><span class="sxs-lookup"><span data-stu-id="36f2b-198">If the VM is using the BGInfo version 1 extension, you can leave this extension as is.</span></span> <span data-ttu-id="36f2b-199">La API de migración omite esta extensión.</span><span class="sxs-lookup"><span data-stu-id="36f2b-199">The migration API skips this extension.</span></span> <span data-ttu-id="36f2b-200">La extensión BGInfo puede agregarse después de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-200">The BGInfo extension can be added after migration.</span></span>
      - <span data-ttu-id="36f2b-201">Si la máquina virtual usa la extensión de la versión 2 de BGInfo basada en JSON, significa que la máquina virtual se creó mediante Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="36f2b-201">If the VM is using the JSON-based BGInfo version 2 extension, the VM was created using the Azure portal.</span></span> <span data-ttu-id="36f2b-202">La API de migración incluye esta extensión en la migración a Azure Resource Manager, siempre que el agente funcione y tenga acceso saliente a Internet (y DNS).</span><span class="sxs-lookup"><span data-stu-id="36f2b-202">The migration API includes this extension in the migration to Azure Resource Manager, provided the agent is working and has outbound internet access (and DNS).</span></span>

  - <span data-ttu-id="36f2b-203">**Opción de corrección 1**.</span><span class="sxs-lookup"><span data-stu-id="36f2b-203">**Remediation Option 1**.</span></span> <span data-ttu-id="36f2b-204">Si sabe que las máquinas virtuales no tendrán acceso saliente a Internet, un servicio DSN activo y agentes de Azure operativos en las máquinas virtuales, desinstale las extensiones de máquina virtual como parte de la migración antes de la fase de preparación y luego reinstálelas después de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-204">If you know your VMs will not have outbound internet access, a working DNS service, and working Azure agents on the VMs, then uninstall all VM extensions as part of the migration before Prepare, then reinstall the VM Extensions after migration.</span></span>
  - <span data-ttu-id="36f2b-205">**Opción de corrección 2**.</span><span class="sxs-lookup"><span data-stu-id="36f2b-205">**Remediation Option 2**.</span></span> <span data-ttu-id="36f2b-206">Si las extensiones de máquina virtual plantean un gran obstáculo, otra opción consiste en apagar o desasignar todas las máquinas virtuales antes de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-206">If VM extensions are too big of a hurdle, another option is to shutdown/deallocate all VMs before migration.</span></span> <span data-ttu-id="36f2b-207">Migre las máquinas virtuales desasignadas y luego reinícielas en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-207">Migrate the deallocated VMs, then restart them on the Azure Resource Manager side.</span></span> <span data-ttu-id="36f2b-208">Aquí la ventaja es que las extensiones de máquina virtual se migrarán.</span><span class="sxs-lookup"><span data-stu-id="36f2b-208">The benefit here is that VM extensions will migrate.</span></span> <span data-ttu-id="36f2b-209">El inconveniente es que todas las IP virtuales públicas se perderán, algo que no tiene sentido, ya que las máquinas virtuales se apagarán con un impacto mucho mayor en las aplicaciones operativas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-209">The downside is that all public facing Virtual IPs will be lost (this may be a non-starter), and obviously the VMs will shut down causing a much greater impact on working applications.</span></span>

    > [!NOTE]
    > <span data-ttu-id="36f2b-210">Si se configura una directiva de Azure Security Center con respecto a las máquinas virtuales en ejecución que se van a migrar, es necesario detener dicha directiva de seguridad antes de quitar las extensiones, ya que, de lo contrario, la extensión de supervisión de seguridad se reinstalará automáticamente en la máquina virtual después de quitarla.</span><span class="sxs-lookup"><span data-stu-id="36f2b-210">If an Azure Security Center policy is configured against the running VMs being migrated, the security policy needs to be stopped before removing extensions, otherwise the security monitoring extension will be reinstalled automatically on the VM after removing it.</span></span>

- <span data-ttu-id="36f2b-211">**Conjuntos de disponibilidad**: para migrar una red virtual (vNet) a Azure Resource Manager, todas las máquinas virtuales contenidas en la implementación clásica, es decir, el servicio en la nube, deben encontrarse en un conjunto de disponibilidad, o bien ninguna máquina virtual debe pertenecer a ningún conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-211">**Availability Sets** - For a virtual network (vNet) to be migrated to Azure Resource Manager, the Classic deployment (i.e. cloud service) contained VMs must all be in one availability set, or the VMs must all not be in any availability set.</span></span> <span data-ttu-id="36f2b-212">Azure Resource Manager no admite que haya más de un conjunto de disponibilidad en el servicio en la nube y, de ser así, la migración se detendrá.</span><span class="sxs-lookup"><span data-stu-id="36f2b-212">Having more than one availability set in the cloud service is not compatible with Azure Resource Manager and will halt migration.</span></span>  <span data-ttu-id="36f2b-213">Además, no puede haber algunas máquinas virtuales en un conjunto de disponibilidad, y algunas máquinas virtuales no están en un conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-213">Additionally, there cannot be some VMs in an availability set, and some VMs not in an availability set.</span></span> <span data-ttu-id="36f2b-214">Para solucionar esta cuestión, será necesario corregir o reorganizar el servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="36f2b-214">To resolve this, you will need to remediate or reshuffle your cloud service.</span></span>  <span data-ttu-id="36f2b-215">Tenga esto en cuenta para realizar la planificación, ya que esta operación puede llevar bastante tiempo.</span><span class="sxs-lookup"><span data-stu-id="36f2b-215">Plan accordingly as this might be time consuming.</span></span>

- <span data-ttu-id="36f2b-216">**Implementaciones de roles web y roles de trabajo**: Cloud Services con roles web y roles de trabajo no se puede migrar a Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-216">**Web/Worker Role Deployments** -  Cloud Services containing web and worker roles cannot migrate to Azure Resource Manager.</span></span> <span data-ttu-id="36f2b-217">Hay que quitar primero los roles web y los roles de trabajo de la red virtual para que la migración pueda empezar.</span><span class="sxs-lookup"><span data-stu-id="36f2b-217">The web/worker roles must first be removed from the virtual network before migration can start.</span></span>  <span data-ttu-id="36f2b-218">Una solución habitual consiste solo en mover las instancias de roles web y de roles de trabajo a una red virtual clásica independiente que también esté vinculada a un circuito ExpressRoute, o bien en migrar el código a App Services PaaS más recientes (este tema queda fuera del ámbito de este documento).</span><span class="sxs-lookup"><span data-stu-id="36f2b-218">A typical solution is to just move web/worker role instances to a separate Classic virtual network that is also linked to an ExpressRoute circuit, or to migrate the code to newer PaaS App Services (this discussion is beyond the scope of this document).</span></span> <span data-ttu-id="36f2b-219">En el caso de reimplementación anterior, cree una red virtual clásica nueva, mueva los roles web y los roles de trabajo a esa nueva red virtual o reimpleméntelos ahí y luego elimine las implementaciones de la red virtual que se va a migrar.</span><span class="sxs-lookup"><span data-stu-id="36f2b-219">In the former redeploy case, create a new Classic virtual network, move/redeploy the web/worker roles to that new virtual network, then delete the deployments from the virtual network being moved.</span></span> <span data-ttu-id="36f2b-220">No se requiere ningún cambio de código.</span><span class="sxs-lookup"><span data-stu-id="36f2b-220">No code changes required.</span></span> <span data-ttu-id="36f2b-221">La nueva funcionalidad [Emparejamiento de red virtual](../../virtual-network/virtual-network-peering-overview.md) se puede utilizar para emparejar la red virtual clásica que contiene los roles web y los roles de trabajo con otras redes virtuales de la misma región de Azure, como la red virtual que se va a migrar (**después de que termine la migración de la red virtual, ya que las máquinas virtuales emparejadas no se pueden migrar**), a fin de ofrecer las mismas funcionalidades sin perder rendimiento y sin penalizaciones de latencia o ancho de banda.</span><span class="sxs-lookup"><span data-stu-id="36f2b-221">The new [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md) capability can be used to peer together the classic virtual network containing the web/worker roles and other virtual networks in the same Azure region such as the virtual network being migrated (**after virtual network migration is completed as peered virtual networks cannot be migrated**), hence providing the same capabilities with no performance loss and no latency/bandwidth penalties.</span></span> <span data-ttu-id="36f2b-222">Gracias a la adición del [Emparejamiento de red virtual](../../virtual-network/virtual-network-peering-overview.md), las implementaciones de roles web y roles de trabajo ahora pueden mitigarse con facilidad y no bloquean la migración a Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-222">Given the addition of [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md), web/worker role deployments can now easily be mitigated and not block the migration to Azure Resource Manager.</span></span>

- <span data-ttu-id="36f2b-223">**Cuotas de Azure Resource Manager**: las regiones de Azure tienen cuota y límites independientes para el modelo clásico y Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-223">**Azure Resource Manager Quotas** - Azure regions have separate quotas/limits for both Classic and Azure Resource Manager.</span></span> <span data-ttu-id="36f2b-224">Aunque en un escenario de migración no se utiliza ningún hardware nuevo *(se están cambiando las máquinas virtuales existentes del modelo clásico a Azure Resource Manager)*, todavía es necesario que haya cuotas de Azure Resource Manager con capacidad suficiente para poder iniciar la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-224">Even though in a migration scenario new hardware isn't being consumed *(we're swapping existing VMs from Classic to Azure Resource Manager)*, Azure Resource Manager quotas still need to be in place with enough capacity before migration can start.</span></span> <span data-ttu-id="36f2b-225">A continuación, se especifican los límites principales con los que se han detectado problemas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-225">Listed below are the major limits we've seen cause problems.</span></span>  <span data-ttu-id="36f2b-226">Abra un vale de soporte sobre cuotas para aumentar los límites.</span><span class="sxs-lookup"><span data-stu-id="36f2b-226">Open a quota support ticket to raise the limits.</span></span>

    > [!NOTE]
    > <span data-ttu-id="36f2b-227">Estos límites hay que aumentarlos en la misma región a la que se va a migrar el entorno actual.</span><span class="sxs-lookup"><span data-stu-id="36f2b-227">These limits need to be raised in the same region as your current environment to be migrated.</span></span>
    >

    - <span data-ttu-id="36f2b-228">Interfaces de red</span><span class="sxs-lookup"><span data-stu-id="36f2b-228">Network Interfaces</span></span>
    - <span data-ttu-id="36f2b-229">Equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="36f2b-229">Load Balancers</span></span>
    - <span data-ttu-id="36f2b-230">Direcciones IP públicas</span><span class="sxs-lookup"><span data-stu-id="36f2b-230">Public IPs</span></span>
    - <span data-ttu-id="36f2b-231">Direcciones IP públicas estáticas</span><span class="sxs-lookup"><span data-stu-id="36f2b-231">Static Public IPs</span></span>
    - <span data-ttu-id="36f2b-232">Núcleos</span><span class="sxs-lookup"><span data-stu-id="36f2b-232">Cores</span></span>
    - <span data-ttu-id="36f2b-233">Grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="36f2b-233">Network Security Groups</span></span>
    - <span data-ttu-id="36f2b-234">Tablas de ruta</span><span class="sxs-lookup"><span data-stu-id="36f2b-234">Route Tables</span></span>

    <span data-ttu-id="36f2b-235">Puede comprobar las cuotas actuales de Azure Resource Manager mediante los comandos siguientes con la última versión de Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="36f2b-235">You can check your current Azure Resource Manager quotas using the following commands with the latest version of Azure PowerShell.</span></span>

    <span data-ttu-id="36f2b-236">**Compute** *(núcleos y conjuntos de disponibilidad)*</span><span class="sxs-lookup"><span data-stu-id="36f2b-236">**Compute** *(Cores, Availability Sets)*</span></span>

    ```powershell
    Get-AzureRmVMUsage -Location <azure-region>
    ```

    <span data-ttu-id="36f2b-237">**Red** *(redes virtuales, direcciones IP públicas estáticas, direcciones IP públicas, grupos de seguridad de red, interfaces, equilibradores de carga y tablas de rutas)*</span><span class="sxs-lookup"><span data-stu-id="36f2b-237">**Network** *(Virtual Networks, Static Public IPs, Public IPs, Network Security Groups, Network Interfaces, Load Balancers, Route Tables)*</span></span>

    ```powershell
    Get-AzureRmUsage /subscriptions/<subscription-id>/providers/Microsoft.Network/locations/<azure-region> -ApiVersion 2016-03-30 | Format-Table
    ```

    <span data-ttu-id="36f2b-238">**Almacenamiento** *(cuenta de almacenamiento)*</span><span class="sxs-lookup"><span data-stu-id="36f2b-238">**Storage** *(Storage Account)*</span></span>

    ```powershell
    Get-AzureRmStorageUsage
    ```

- <span data-ttu-id="36f2b-239">**Límites de la API de Azure Resource Manager**: si tiene un entorno lo suficientemente grande (por ejemplo,</span><span class="sxs-lookup"><span data-stu-id="36f2b-239">**Azure Resource Manager API throttling limits** - If you have a large enough environment (eg.</span></span> <span data-ttu-id="36f2b-240">más de 400 máquinas virtuales en una red virtual), podría alcanzar los límites predeterminados de escritura de la API (actualmente `1200 writes/hour`) en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-240">> 400 VMs in a VNET), you might hit the default API throttling limits for writes (currently `1200 writes/hour`) in Azure Resource Manager.</span></span> <span data-ttu-id="36f2b-241">Antes de iniciar la migración, debe presentar un vale de soporte para aumentar este límite en la suscripción.</span><span class="sxs-lookup"><span data-stu-id="36f2b-241">Before starting migration, you should raise a support ticket to increase this limit for your subscription.</span></span>


- <span data-ttu-id="36f2b-242">**Estado de máquina virtual de tiempo de espera de aprovisionamiento agotado**: si alguna máquina virtual presenta el estado `provisioning timed out`, es necesario resolver este problema antes de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-242">**Provisioning Timed Out VM Status** - If any VM has the status of `provisioning timed out`, this needs to be resolved pre-migration.</span></span> <span data-ttu-id="36f2b-243">La única manera de hacerlo es que el tiempo de inactividad, mediante el desaprovisionamiento y el reaprovisionamiento de la máquina virtual, es decir, eliminarla, conservar el disco y volver a crearla.</span><span class="sxs-lookup"><span data-stu-id="36f2b-243">The only way to do this is with downtime by deprovisioning/reprovisioning the VM (delete it, keep the disk, and recreate the VM).</span></span>

- <span data-ttu-id="36f2b-244">**Estado de máquina virtual RoleStateUnknown**: si la migración se detiene debido a un mensaje de error `role state unknown`, inspeccione la máquina virtual en el portal y asegúrese de que está en ejecución.</span><span class="sxs-lookup"><span data-stu-id="36f2b-244">**RoleStateUnknown VM Status** - If migration halts due to a `role state unknown` error message, inspect the VM using the portal and ensure it is running.</span></span> <span data-ttu-id="36f2b-245">Este error suele desaparecer por sí solo (no se precisa de ninguna corrección) transcurridos unos minutos, suele ser de carácter transitorio y suele detectarse durante las operaciones `start`, `stop` y `restart` de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="36f2b-245">This error will typically go away on its own (no remediation required) after a few minutes and is often a transient type often seen during a Virtual Machine `start`, `stop`, `restart` operations.</span></span> <span data-ttu-id="36f2b-246">**Práctica recomendada:** vuelva a intentar la migración después de unos minutos.</span><span class="sxs-lookup"><span data-stu-id="36f2b-246">**Recommended practice:** re-try migration again after a few minutes.</span></span>

- <span data-ttu-id="36f2b-247">**El clúster de Fabric no existe** : en algunos casos, determinadas máquinas virtuales no se pueden migrar por distintas razones poco comunes.</span><span class="sxs-lookup"><span data-stu-id="36f2b-247">**Fabric Cluster does not exist** -  In some cases, certain VMs cannot be migrated for various odd reasons.</span></span> <span data-ttu-id="36f2b-248">Uno de estos casos conocidos se da si la máquina virtual se ha creado recientemente (durante la última semana más o menos) y ha iniciado un clúster de Azure que aún no está equipado para cargas de trabajo de Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-248">One of these known cases is if the VM was recently created (within the last week or so) and happened to land an Azure cluster that is not yet equipped for Azure Resource Manager workloads.</span></span>  <span data-ttu-id="36f2b-249">Obtendrá un error que indica `fabric cluster does not exist` y, en este caso, la máquina virtual no se puede migrar.</span><span class="sxs-lookup"><span data-stu-id="36f2b-249">You will get an error that says `fabric cluster does not exist` and the VM cannot be migrated.</span></span> <span data-ttu-id="36f2b-250">Normalmente, basta con esperar un par de día para que este problema concreto se resuelva, ya que el clúster no tardará en estar habilitado para Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-250">Waiting a couple of days will usually resolve this particular problem as the cluster will soon get Azure Resource Manager enabled.</span></span> <span data-ttu-id="36f2b-251">Sin embargo, una solución inmediata consiste en `stop-deallocate` la máquina virtual, continuar después con la migración e iniciar la copia de seguridad de la máquina virtual en Azure Resource Manager después de la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-251">However, one immediate workaround is to `stop-deallocate` the VM, then continue forward with migration, and start the VM back up in Azure Resource Manager after migrating.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="36f2b-252">Errores que hay que evitar</span><span class="sxs-lookup"><span data-stu-id="36f2b-252">Pitfalls to avoid</span></span>

- <span data-ttu-id="36f2b-253">No use métodos abreviados y omita las migraciones del simulacro de validación, preparación y anulación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-253">Do not take shortcuts and omit the validate/prepare/abort dry run migrations.</span></span>
- <span data-ttu-id="36f2b-254">La mayoría de los problemas potenciales, si no todos, se detectarán durante los pasos del simulacro de validación, preparación y anulación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-254">Most, if not all, of your potential issues will surface during the validate/prepare/abort steps.</span></span>

## <a name="migration"></a><span data-ttu-id="36f2b-255">Migración</span><span class="sxs-lookup"><span data-stu-id="36f2b-255">Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="36f2b-256">Consideraciones técnicas y compromisos</span><span class="sxs-lookup"><span data-stu-id="36f2b-256">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="36f2b-257">Ahora está listo porque ha trabajado con los problemas conocidos en su entorno.</span><span class="sxs-lookup"><span data-stu-id="36f2b-257">Now you are ready because you have worked through the known issues with your environment.</span></span>

<span data-ttu-id="36f2b-258">Para las migraciones reales, conviene tener en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="36f2b-258">For the real migrations, you might want to consider:</span></span>

1. <span data-ttu-id="36f2b-259">Planifique y programe la red virtual (unidad más pequeña de migración) con mayor prioridad.</span><span class="sxs-lookup"><span data-stu-id="36f2b-259">Plan and schedule the virtual network (smallest unit of migration) with increasing priority.</span></span>  <span data-ttu-id="36f2b-260">Céntrese primero en las redes virtuales sencillas y continúe después con las más complicadas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-260">Do the simple virtual networks first, and progress with the more complicated virtual networks.</span></span>
2. <span data-ttu-id="36f2b-261">La mayoría de los clientes tendrán entornos de producción y de no producción.</span><span class="sxs-lookup"><span data-stu-id="36f2b-261">Most customers will have non-production and production environments.</span></span>  <span data-ttu-id="36f2b-262">Programe la producción en última instancia.</span><span class="sxs-lookup"><span data-stu-id="36f2b-262">Schedule production last.</span></span>
3. <span data-ttu-id="36f2b-263">**(OPCIONAL)**  Programe un tiempo de inactividad por mantenimiento con una gran cantidad de búfer en caso de que surjan problemas inesperados.</span><span class="sxs-lookup"><span data-stu-id="36f2b-263">**(OPTIONAL)** Schedule a maintenance downtime with plenty of buffer in case unexpected issues arise.</span></span>
4. <span data-ttu-id="36f2b-264">Comuníquese con los equipos de soporte y póngase de acuerdo con ellos en caso de que surjan problemas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-264">Communicate with and align with your support teams in case issues arise.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="36f2b-265">Patrones de éxito</span><span class="sxs-lookup"><span data-stu-id="36f2b-265">Patterns of success</span></span>

<span data-ttu-id="36f2b-266">La orientación técnica de la sección _Análisis de laboratorio_ se debe tener en cuenta y abordar antes de realizar la migración real.</span><span class="sxs-lookup"><span data-stu-id="36f2b-266">The technical guidance from the _Lab Test_ section should be considered and mitigated prior to a real migration.</span></span>  <span data-ttu-id="36f2b-267">Con las pruebas oportunas, la migración realmente no es ningún evento.</span><span class="sxs-lookup"><span data-stu-id="36f2b-267">With adequate testing, the migration is actually a non-event.</span></span>  <span data-ttu-id="36f2b-268">Para entornos de producción, puede resultar útil contar con soporte técnico adicional, como un asociado de Microsoft de confianza o Microsoft Premier Services.</span><span class="sxs-lookup"><span data-stu-id="36f2b-268">For production environments, it might be helpful to have additional support, such as a trusted Microsoft partner or Microsoft Premier services.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="36f2b-269">Errores que hay que evitar</span><span class="sxs-lookup"><span data-stu-id="36f2b-269">Pitfalls to avoid</span></span>

<span data-ttu-id="36f2b-270">El hecho de no realizar las pruebas completas puede generar problemas y retrasos en la migración.</span><span class="sxs-lookup"><span data-stu-id="36f2b-270">Not fully testing may cause issues and delay in the migration.</span></span>  

## <a name="beyond-migration"></a><span data-ttu-id="36f2b-271">Después de la migración</span><span class="sxs-lookup"><span data-stu-id="36f2b-271">Beyond Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="36f2b-272">Consideraciones técnicas y compromisos</span><span class="sxs-lookup"><span data-stu-id="36f2b-272">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="36f2b-273">Ahora que ya está en Azure Resource Manager, maximice la plataforma.</span><span class="sxs-lookup"><span data-stu-id="36f2b-273">Now that you are in Azure Resource Manager, maximize the platform.</span></span>  <span data-ttu-id="36f2b-274">Lea la [información general de Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) para obtener información sobre otras ventajas.</span><span class="sxs-lookup"><span data-stu-id="36f2b-274">Read the [overview of Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) to find out about additional benefits.</span></span>

<span data-ttu-id="36f2b-275">Puntos que se deben tener en cuenta:</span><span class="sxs-lookup"><span data-stu-id="36f2b-275">Things to consider:</span></span>

- <span data-ttu-id="36f2b-276">Agrupe la migración con otras actividades.</span><span class="sxs-lookup"><span data-stu-id="36f2b-276">Bundling the migration with other activities.</span></span>  <span data-ttu-id="36f2b-277">La mayoría de los clientes optan por una ventana de mantenimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="36f2b-277">Most customers opt for an application maintenance window.</span></span>  <span data-ttu-id="36f2b-278">En su caso, podría usar este tiempo de inactividad para habilitar otras funcionalidades de Azure Resource Manager, como el cifrado y la migración a Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="36f2b-278">If so, you might want to use this downtime to enable other Azure Resource Manager capabilities like encryption and migration to Managed Disks.</span></span>
- <span data-ttu-id="36f2b-279">Revise los motivos técnicos y empresariales para migrar a Azure Resource Manager; habilite los servicios adicionales disponibles solo en Azure Resource Manager que sean aplicables a su entorno.</span><span class="sxs-lookup"><span data-stu-id="36f2b-279">Revisit the technical and business reasons for Azure Resource Manager; enable the additional services available only on Azure Resource Manager that apply to your environment.</span></span>
- <span data-ttu-id="36f2b-280">Modernice el entorno con servicios PaaS.</span><span class="sxs-lookup"><span data-stu-id="36f2b-280">Modernize your environment with PaaS services.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="36f2b-281">Patrones de éxito</span><span class="sxs-lookup"><span data-stu-id="36f2b-281">Patterns of success</span></span>

<span data-ttu-id="36f2b-282">Determine qué servicios desea habilitar en Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-282">Be purposeful on what services you now want to enable in Azure Resource Manager.</span></span>  <span data-ttu-id="36f2b-283">Muchos clientes encuentran atractivos los siguientes para sus entornos de Azure:</span><span class="sxs-lookup"><span data-stu-id="36f2b-283">Many customers find the below compelling for their Azure environments:</span></span>

- <span data-ttu-id="36f2b-284">[Control de acceso basado en rol](../../azure-resource-manager/resource-group-overview.md#access-control).</span><span class="sxs-lookup"><span data-stu-id="36f2b-284">[Role Based Access Control](../../azure-resource-manager/resource-group-overview.md#access-control).</span></span>
- <span data-ttu-id="36f2b-285">[Plantillas de Azure Resource Manager para una implementación más sencilla y controlada](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="36f2b-285">[Azure Resource Manager templates for easier and more controlled deployment](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span></span>
- <span data-ttu-id="36f2b-286">[Etiquetas](../../azure-resource-manager/resource-group-using-tags.md).</span><span class="sxs-lookup"><span data-stu-id="36f2b-286">[Tags](../../azure-resource-manager/resource-group-using-tags.md).</span></span>
- [<span data-ttu-id="36f2b-287">Control de actividad</span><span class="sxs-lookup"><span data-stu-id="36f2b-287">Activity Control</span></span>](../../azure-resource-manager/resource-group-audit.md)
- [<span data-ttu-id="36f2b-288">Directivas de recursos</span><span class="sxs-lookup"><span data-stu-id="36f2b-288">Resource Policies</span></span>](../../azure-resource-manager/resource-manager-policy.md)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="36f2b-289">Errores que hay que evitar</span><span class="sxs-lookup"><span data-stu-id="36f2b-289">Pitfalls to avoid</span></span>

<span data-ttu-id="36f2b-290">Recuerde por qué ha iniciado esta trayectoria de migración del modelo clásico a Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="36f2b-290">Remember why you started this Classic to Azure Resource Manager migration journey.</span></span>  <span data-ttu-id="36f2b-291">¿Cuáles eran los objetivos empresariales originales?</span><span class="sxs-lookup"><span data-stu-id="36f2b-291">What were the original business reasons?</span></span> <span data-ttu-id="36f2b-292">¿Ha conseguido el objetivo empresarial?</span><span class="sxs-lookup"><span data-stu-id="36f2b-292">Did you achieve the business reason?</span></span>


## <a name="next-steps"></a><span data-ttu-id="36f2b-293">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="36f2b-293">Next steps</span></span>

* [<span data-ttu-id="36f2b-294">Información general sobre la migración compatible con la plataforma de recursos de IaaS desde el modelo de implementación clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-294">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-295">Profundización técnica en la migración compatible con la plataforma de la implementación clásica a la de Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-295">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-296">Migración de recursos de IaaS de la implementación clásica a Resource Manager con Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="36f2b-296">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-297">Migración de recursos de IaaS de la implementación clásica a Azure Resource Manager con la CLI de Azure</span><span class="sxs-lookup"><span data-stu-id="36f2b-297">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-298">Herramientas de la comunidad para ayudar con la migración de recursos de IaaS de la versión clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-298">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-299">Revisión de los errores más comunes en la migración</span><span class="sxs-lookup"><span data-stu-id="36f2b-299">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="36f2b-300">Revisión de las preguntas más frecuentes acerca de cómo migrar recursos de IaaS de la versión clásica a Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="36f2b-300">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
